var AttentionMulti;(()=>{"use strict";var _e={};_e.d=(D,B)=>{for(var ee in B)_e.o(B,ee)&&!_e.o(D,ee)&&Object.defineProperty(D,ee,{enumerable:!0,get:B[ee]})},_e.o=(D,B)=>Object.prototype.hasOwnProperty.call(D,B);var Ze={};(()=>{_e.d(Ze,{default:()=>Kn});function D(){}const B=e=>e;function ee(e,t){for(const n in t)e[n]=t[n];return e}function Vt(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function li(e,t,n,i,o){e.__svelte_meta={loc:{file:t,line:n,column:i,char:o}}}function je(e){return e()}function Ae(){return Object.create(null)}function H(e){e.forEach(je)}function Y(e){return typeof e=="function"}function Oe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ke;function si(e,t){return ke||(ke=document.createElement("a")),ke.href=t,e===ke.href}function ri(e,t){return e!=e?t==t:e!==t}function $e(e){return Object.keys(e).length===0}function ui(e,t){if(e!=null&&typeof e.subscribe!="function")throw new Error(`'${t}' is not a store with a 'subscribe' method`)}function et(e,...t){if(e==null)return D;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ci(e){let t;return et(e,n=>t=n)(),t}function fi(e,t,n){e.$$.on_destroy.push(et(t,n))}function Gt(e,t,n,i){if(e){const o=tt(e,t,n,i);return e[0](o)}}function tt(e,t,n,i){return e[1]&&i?ee(n.ctx.slice(),e[1](i(t))):n.ctx}function nt(e,t,n,i){if(e[2]&&i){const o=e[2](i(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const l=[],s=Math.max(t.dirty.length,o.length);for(let r=0;r<s;r+=1)l[r]=t.dirty[r]|o[r];return l}return t.dirty|o}return t.dirty}function it(e,t,n,i,o,l){if(o){const s=tt(t,n,i,l);e.p(s,o)}}function ai(e,t,n,i,o,l,s){const r=nt(t,i,o,l);it(e,t,n,i,r,s)}function Xt(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let i=0;i<n;i++)t[i]=-1;return t}return-1}function di(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function _i(e,t){const n={};t=new Set(t);for(const i in e)!t.has(i)&&i[0]!=="$"&&(n[i]=e[i]);return n}function hi(e){const t={};for(const n in e)t[n]=!0;return t}function mi(e){let t=!1;return function(...n){t||(t=!0,e.call(this,...n))}}function pi(e){return e==null?"":e}function gi(e,t,n){return e.set(n),t}const Yt=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function vi(e){return e&&Y(e.destroy)?e.destroy:D}function ki(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const ot=null,bi=typeof window!="undefined";let he=null,be=null;function yi(e){he=e}function wi(e){be=e}const K=new Set;function lt(e){K.forEach(t=>{t.c(e)||(K.delete(t),t.f())}),K.size!==0&&be(lt)}function Fi(){K.clear()}function ye(e){let t;return K.size===0&&be(lt),{promise:new Promise(n=>{K.add(t={c:e,f:n})}),abort(){K.delete(t)}}}const st=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;class te{constructor(t){this.options=t,this._listeners="WeakMap"in st?new WeakMap:void 0}observe(t,n){return this._listeners.set(t,n),this._getObserver().observe(t,this.options),()=>{this._listeners.delete(t),this._observer.unobserve(t)}}_getObserver(){var t;return(t=this._observer)!==null&&t!==void 0?t:this._observer=new ResizeObserver(n=>{var i;for(const o of n)te.entries.set(o.target,o),(i=this._listeners.get(o.target))===null||i===void 0||i(o)})}}te.entries="WeakMap"in st?new WeakMap:void 0;let we=!1;function Ut(){we=!0}function Jt(){we=!1}function Kt(e,t,n,i){for(;e<t;){const o=e+(t-e>>1);n(o)<=i?e=o+1:t=o}return e}function Qt(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if(e.nodeName==="HEAD"){const u=[];for(let f=0;f<t.length;f++){const a=t[f];a.claim_order!==void 0&&u.push(a)}t=u}const n=new Int32Array(t.length+1),i=new Int32Array(t.length);n[0]=-1;let o=0;for(let u=0;u<t.length;u++){const f=t[u].claim_order,a=(o>0&&t[n[o]].claim_order<=f?o+1:Kt(1,o,p=>t[n[p]].claim_order,f))-1;i[u]=n[a]+1;const _=a+1;n[_]=u,o=Math.max(_,o)}const l=[],s=[];let r=t.length-1;for(let u=n[o]+1;u!=0;u=i[u-1]){for(l.push(t[u-1]);r>=u;r--)s.push(t[r]);r--}for(;r>=0;r--)s.push(t[r]);l.reverse(),s.sort((u,f)=>u.claim_order-f.claim_order);for(let u=0,f=0;u<s.length;u++){for(;f<l.length&&s[u].claim_order>=l[f].claim_order;)f++;const a=f<l.length?l[f]:null;e.insertBefore(s[u],a)}}function j(e,t){e.appendChild(t)}function rt(e,t,n){const i=Te(e);if(!i.getElementById(t)){const o=q("style");o.id=t,o.textContent=n,ut(i,o)}}function Te(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Zt(e){const t=q("style");return ut(Te(e),t),t.sheet}function ut(e,t){return j(e.head||e,t),t.sheet}function ct(e,t){if(we){for(Qt(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentNode!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(t.claim_order!==void 0||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||t.nextSibling!==null)&&e.appendChild(t)}function O(e,t,n){e.insertBefore(t,n||null)}function ft(e,t,n){we&&!n?ct(e,t):(t.parentNode!==e||t.nextSibling!=n)&&e.insertBefore(t,n||null)}function F(e){e.parentNode&&e.parentNode.removeChild(e)}function at(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function q(e){return document.createElement(e)}function Ei(e,t){return document.createElement(e,{is:t})}function qi(e,t){const n={};for(const i in e)Yt(e,i)&&t.indexOf(i)===-1&&(n[i]=e[i]);return n}function dt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function I(e){return document.createTextNode(e)}function x(){return I(" ")}function _t(){return I("")}function $t(e){return document.createComment(e)}function W(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function Mi(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Si(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function ji(e){return function(t){return t.stopImmediatePropagation(),e.call(this,t)}}function Ai(e){return function(t){t.target===this&&e.call(this,t)}}function Oi(e){return function(t){t.isTrusted&&e.call(this,t)}}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const en=null;function tn(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const i in t)t[i]==null?e.removeAttribute(i):i==="style"?e.style.cssText=t[i]:i==="__value"?e.value=e[i]=t[i]:n[i]&&n[i].set&&en.indexOf(i)===-1?e[i]=t[i]:b(e,i,t[i])}function Ti(e,t){for(const n in t)b(e,n,t[n])}function nn(e,t){Object.keys(t).forEach(n=>{on(e,n,t[n])})}function on(e,t,n){t in e?e[t]=typeof e[t]=="boolean"&&n===""?!0:n:b(e,t,n)}function Ci(e){return/-/.test(e)?nn:tn}function Di(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function xi(e,t,n){const i=new Set;for(let o=0;o<e.length;o+=1)e[o].checked&&i.add(e[o].__value);return n||i.delete(t),Array.from(i)}function Ni(e){let t;return{p(...n){t=n,t.forEach(i=>e.push(i))},r(){t.forEach(n=>e.splice(e.indexOf(n),1))}}}function Li(e,t){let n=o(e),i;function o(r){for(let u=0;u<t.length;u++)r=r[t[u]]=r[t[u]]||[];return r}function l(){i.forEach(r=>n.push(r))}function s(){i.forEach(r=>n.splice(n.indexOf(r),1))}return{u(r){t=r;const u=o(e);u!==n&&(s(),n=u,l())},p(...r){i=r,l()},r:s}}function Pi(e){return e===""?null:+e}function Hi(e){const t=[];for(let n=0;n<e.length;n+=1)t.push({start:e.start(n),end:e.end(n)});return t}function ln(e){return Array.from(e.childNodes)}function ht(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function Ce(e,t,n,i,o=!1){ht(e);const l=(()=>{for(let s=e.claim_info.last_index;s<e.length;s++){const r=e[s];if(t(r)){const u=n(r);return u===void 0?e.splice(s,1):e[s]=u,o||(e.claim_info.last_index=s),r}}for(let s=e.claim_info.last_index-1;s>=0;s--){const r=e[s];if(t(r)){const u=n(r);return u===void 0?e.splice(s,1):e[s]=u,o?u===void 0&&e.claim_info.last_index--:e.claim_info.last_index=s,r}}return i()})();return l.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,l}function mt(e,t,n,i){return Ce(e,o=>o.nodeName===t,o=>{const l=[];for(let s=0;s<o.attributes.length;s++){const r=o.attributes[s];n[r.name]||l.push(r.name)}l.forEach(s=>o.removeAttribute(s))},()=>i(t))}function Ri(e,t,n){return mt(e,t,n,q)}function Ii(e,t,n){return mt(e,t,n,dt)}function sn(e,t){return Ce(e,n=>n.nodeType===3,n=>{const i=""+t;if(n.data.startsWith(i)){if(n.data.length!==i.length)return n.splitText(i.length)}else n.data=i},()=>I(t),!0)}function zi(e){return sn(e," ")}function Bi(e,t){return Ce(e,n=>n.nodeType===8,n=>{n.data=""+t},()=>$t(t),!0)}function pt(e,t,n){for(let i=n;i<e.length;i+=1){const o=e[i];if(o.nodeType===8&&o.textContent.trim()===t)return i}return e.length}function Wi(e,t){const n=pt(e,"HTML_TAG_START",0),i=pt(e,"HTML_TAG_END",n);if(n===i)return new gt(void 0,t);ht(e);const o=e.splice(n,i-n+1);F(o[0]),F(o[o.length-1]);const l=o.slice(1,o.length-1);for(const s of l)s.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1;return new gt(l,t)}function me(e,t){t=""+t,e.data!==t&&(e.data=t)}function rn(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Vi(e,t,n){~ot.indexOf(n)?rn(e,t):me(e,t)}function Gi(e,t){e.value=t==null?"":t}function Xi(e,t){try{e.type=t}catch(n){}}function M(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function Yi(e,t,n){for(let i=0;i<e.options.length;i+=1){const o=e.options[i];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Ui(e,t){for(let n=0;n<e.options.length;n+=1){const i=e.options[n];i.selected=~t.indexOf(i.__value)}}function Ji(e){const t=e.querySelector(":checked");return t&&t.__value}function Ki(e){return[].map.call(e.querySelectorAll(":checked"),t=>t.__value)}let Fe;function un(){if(Fe===void 0){Fe=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch(e){Fe=!0}}return Fe}function Qi(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const i=q("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const o=un();let l;return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=W(window,"message",s=>{s.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{l=W(i.contentWindow,"resize",t),t()}),j(e,i),()=>{(o||l&&i.contentWindow)&&l(),F(i)}}const Zi=new te({box:"content-box"}),$i=new te({box:"border-box"}),eo=new te({box:"device-pixel-content-box"});function to(e,t,n){e.classList[n?"add":"remove"](t)}function De(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,i,t),o}function no(e,t=document.body){return Array.from(t.querySelectorAll(e))}function io(e,t){const n=[];let i=0;for(const o of t.childNodes)if(o.nodeType===8){const l=o.textContent.trim();l===`HEAD_${e}_END`?(i-=1,n.push(o)):l===`HEAD_${e}_START`&&(i+=1,n.push(o))}else i>0&&n.push(o);return n}class oo{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=dt(n.nodeName):this.e=q(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)O(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(F)}}class gt extends null{constructor(t,n=!1){super(n),this.e=this.n=null,this.l=t}c(t){this.l?this.n=this.l:super.c(t)}i(t){for(let n=0;n<this.n.length;n+=1)ft(this.t,this.n[n],t)}}function lo(e){const t={};for(const n of e)t[n.name]=n.value;return t}function so(e){const t={};return e.childNodes.forEach(n=>{t[n.slot||"default"]=!0}),t}function ro(e,t){return new e(t)}const Ee=new Map;let qe=0;function cn(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function fn(e,t){const n={stylesheet:Zt(t),rules:{}};return Ee.set(e,n),n}function pe(e,t,n,i,o,l,s,r=0){const u=16.666/i;let f=`{
`;for(let c=0;c<=1;c+=u){const d=t+(n-t)*l(c);f+=c*100+`%{${s(d,1-d)}}
`}const a=f+`100% {${s(n,1-n)}}
}`,_=`__svelte_${cn(a)}_${r}`,p=Te(e),{stylesheet:h,rules:m}=Ee.get(p)||fn(p,e);m[_]||(m[_]=!0,h.insertRule(`@keyframes ${_} ${a}`,h.cssRules.length));const v=e.style.animation||"";return e.style.animation=`${v?`${v}, `:""}${_} ${i}ms linear ${o}ms 1 both`,qe+=1,_}function ge(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?l=>l.indexOf(t)<0:l=>l.indexOf("__svelte")===-1),o=n.length-i.length;o&&(e.style.animation=i.join(", "),qe-=o,qe||an())}function an(){be(()=>{qe||(Ee.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&F(t)}),Ee.clear())})}function uo(e,t,n,i){if(!t)return D;const o=e.getBoundingClientRect();if(t.left===o.left&&t.right===o.right&&t.top===o.top&&t.bottom===o.bottom)return D;const{delay:l=0,duration:s=300,easing:r=B,start:u=he()+l,end:f=u+s,tick:a=D,css:_}=n(e,{from:t,to:o},i);let p=!0,h=!1,m;function v(){_&&(m=pe(e,0,1,s,l,r,_)),l||(h=!0)}function c(){_&&ge(e,m),p=!1}return ye(d=>{if(!h&&d>=u&&(h=!0),h&&d>=f&&(a(1,0),c()),!p)return!1;if(h){const k=d-u,y=0+1*r(k/s);a(y,1-y)}return!0}),v(),a(0,1),c}function co(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:i}=t,o=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,dn(e,o)}}function dn(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),o=i.transform==="none"?"":i.transform;e.style.transform=`${o} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let ne;function z(e){ne=e}function V(){if(!ne)throw new Error("Function called outside component initialization");return ne}function fo(e){V().$$.before_update.push(e)}function _n(e){V().$$.on_mount.push(e)}function ao(e){V().$$.after_update.push(e)}function _o(e){V().$$.on_destroy.push(e)}function ho(){const e=V();return(t,n,{cancelable:i=!1}={})=>{const o=e.$$.callbacks[t];if(o){const l=De(t,n,{cancelable:i});return o.slice().forEach(s=>{s.call(e,l)}),!l.defaultPrevented}return!0}}function mo(e,t){return V().$$.context.set(e,t),t}function po(e){return V().$$.context.get(e)}function go(){return V().$$.context}function vo(e){return V().$$.context.has(e)}function ko(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(i=>i.call(this,t))}const ie=[],bo={enabled:!1},oe=[];let le=[];const xe=[],vt=Promise.resolve();let Ne=!1;function kt(){Ne||(Ne=!0,vt.then(Pe))}function yo(){return kt(),vt}function se(e){le.push(e)}function bt(e){xe.push(e)}const Le=new Set;let re=0;function Pe(){if(re!==0)return;const e=ne;do{try{for(;re<ie.length;){const t=ie[re];re++,z(t),hn(t.$$)}}catch(t){throw ie.length=0,re=0,t}for(z(null),ie.length=0,re=0;oe.length;)oe.pop()();for(let t=0;t<le.length;t+=1){const n=le[t];Le.has(n)||(Le.add(n),n())}le.length=0}while(ie.length);for(;xe.length;)xe.pop()();Ne=!1,Le.clear(),z(e)}function hn(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(se)}}function mn(e){const t=[],n=[];le.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),le=t}let ve;function He(){return ve||(ve=Promise.resolve(),ve.then(()=>{ve=null})),ve}function Q(e,t,n){e.dispatchEvent(De(`${t?"intro":"outro"}${n}`))}const Me=new Set;let G;function ue(){G={r:0,c:[],p:G}}function ce(){G.r||H(G.c),G=G.p}function C(e,t){e&&e.i&&(Me.delete(e),e.i(t))}function N(e,t,n,i){if(e&&e.o){if(Me.has(e))return;Me.add(e),G.c.push(()=>{Me.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const Re={duration:0};function wo(e,t,n){const i={direction:"in"};let o=t(e,n,i),l=!1,s,r,u=0;function f(){s&&ge(e,s)}function a(){const{delay:p=0,duration:h=300,easing:m=B,tick:v=D,css:c}=o||Re;c&&(s=pe(e,0,1,h,p,m,c,u++)),v(0,1);const d=he()+p,k=d+h;r&&r.abort(),l=!0,se(()=>Q(e,!0,"start")),r=ye(y=>{if(l){if(y>=k)return v(1,0),Q(e,!0,"end"),f(),l=!1;if(y>=d){const w=m((y-d)/h);v(w,1-w)}}return l})}let _=!1;return{start(){_||(_=!0,ge(e),Y(o)?(o=o(i),He().then(a)):a())},invalidate(){_=!1},end(){l&&(f(),l=!1)}}}function Fo(e,t,n){const i={direction:"out"};let o=t(e,n,i),l=!0,s;const r=G;r.r+=1;function u(){const{delay:f=0,duration:a=300,easing:_=B,tick:p=D,css:h}=o||Re;h&&(s=pe(e,1,0,a,f,_,h));const m=he()+f,v=m+a;se(()=>Q(e,!1,"start")),ye(c=>{if(l){if(c>=v)return p(0,1),Q(e,!1,"end"),--r.r||H(r.c),!1;if(c>=m){const d=_((c-m)/a);p(1-d,d)}}return l})}return Y(o)?He().then(()=>{o=o(i),u()}):u(),{end(f){f&&o.tick&&o.tick(1,0),l&&(s&&ge(e,s),l=!1)}}}function Eo(e,t,n,i){const o={direction:"both"};let l=t(e,n,o),s=i?0:1,r=null,u=null,f=null;function a(){f&&ge(e,f)}function _(h,m){const v=h.b-s;return m*=Math.abs(v),{a:s,b:h.b,d:v,duration:m,start:h.start,end:h.start+m,group:h.group}}function p(h){const{delay:m=0,duration:v=300,easing:c=B,tick:d=D,css:k}=l||Re,y={start:he()+m,b:h};h||(y.group=G,G.r+=1),r||u?u=y:(k&&(a(),f=pe(e,s,h,v,m,c,k)),h&&d(0,1),r=_(y,v),se(()=>Q(e,h,"start")),ye(w=>{if(u&&w>u.start&&(r=_(u,v),u=null,Q(e,r.b,"start"),k&&(a(),f=pe(e,s,r.b,r.duration,0,c,l.css))),r){if(w>=r.end)d(s=r.b,1-s),Q(e,r.b,"end"),u||(r.b?a():--r.group.r||H(r.group.c)),r=null;else if(w>=r.start){const L=w-r.start;s=r.a+r.d*c(L/r.duration),d(s,1-s)}}return!!(r||u)}))}return{run(h){Y(l)?He().then(()=>{l=l(o),p(h)}):p(h)},end(){a(),r=u=null}}}function qo(e,t){const n=t.token={};function i(o,l,s,r){if(t.token!==n)return;t.resolved=r;let u=t.ctx;s!==void 0&&(u=u.slice(),u[s]=r);const f=o&&(t.current=o)(u);let a=!1;t.block&&(t.blocks?t.blocks.forEach((_,p)=>{p!==l&&_&&(ue(),N(_,1,1,()=>{t.blocks[p]===_&&(t.blocks[p]=null)}),ce())}):t.block.d(1),f.c(),C(f,1),f.m(t.mount(),t.anchor),a=!0),t.block=f,t.blocks&&(t.blocks[l]=f),a&&Pe()}if(Vt(e)){const o=V();if(e.then(l=>{z(o),i(t.then,1,t.value,l),z(null)},l=>{if(z(o),i(t.catch,2,t.error,l),z(null),!t.hasCatch)throw l}),t.current!==t.pending)return i(t.pending,0),!0}else{if(t.current!==t.then)return i(t.then,1,t.value,e),!0;t.resolved=e}}function Mo(e,t,n){const i=t.slice(),{resolved:o}=e;e.current===e.then&&(i[e.value]=o),e.current===e.catch&&(i[e.error]=o),e.block.p(i,n)}function pn(e,t){e.d(1),t.delete(e.key)}function gn(e,t){N(e,1,1,()=>{t.delete(e.key)})}function So(e,t){e.f(),pn(e,t)}function jo(e,t){e.f(),gn(e,t)}function Ao(e,t,n,i,o,l,s,r,u,f,a,_){let p=e.length,h=l.length,m=p;const v={};for(;m--;)v[e[m].key]=m;const c=[],d=new Map,k=new Map,y=[];for(m=h;m--;){const g=_(o,l,m),E=n(g);let S=s.get(E);S?i&&y.push(()=>S.p(g,t)):(S=f(E,g),S.c()),d.set(E,c[m]=S),E in v&&k.set(E,Math.abs(m-v[E]))}const w=new Set,L=new Set;function T(g){C(g,1),g.m(r,a),s.set(g.key,g),a=g.first,h--}for(;p&&h;){const g=c[h-1],E=e[p-1],S=g.key,P=E.key;g===E?(a=g.first,p--,h--):d.has(P)?!s.has(S)||w.has(S)?T(g):L.has(P)?p--:k.get(S)>k.get(P)?(L.add(S),T(g)):(w.add(P),p--):(u(E,s),p--)}for(;p--;){const g=e[p];d.has(g.key)||u(g,s)}for(;h;)T(c[h-1]);return H(y),c}function Oo(e,t,n,i){const o=new Set;for(let l=0;l<t.length;l++){const s=i(n(e,t,l));if(o.has(s))throw new Error("Cannot have duplicate keys in a keyed each");o.add(s)}}function To(e,t){const n={},i={},o={$$scope:1};let l=e.length;for(;l--;){const s=e[l],r=t[l];if(r){for(const u in s)u in r||(i[u]=1);for(const u in r)o[u]||(n[u]=r[u],o[u]=1);e[l]=r}else for(const u in s)o[u]=1}for(const s in i)s in n||(n[s]=void 0);return n}function Co(e){return typeof e=="object"&&e!==null?e:{}}const vn=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],kn=new Set([...vn]),bn=/^(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/;function yn(e){return bn.test(e)||e.toLowerCase()==="!doctype"}const wn=/[\s'">/=\u{FDD0}-\u{FDEF}\u{FFFE}\u{FFFF}\u{1FFFE}\u{1FFFF}\u{2FFFE}\u{2FFFF}\u{3FFFE}\u{3FFFF}\u{4FFFE}\u{4FFFF}\u{5FFFE}\u{5FFFF}\u{6FFFE}\u{6FFFF}\u{7FFFE}\u{7FFFF}\u{8FFFE}\u{8FFFF}\u{9FFFE}\u{9FFFF}\u{AFFFE}\u{AFFFF}\u{BFFFE}\u{BFFFF}\u{CFFFE}\u{CFFFF}\u{DFFFE}\u{DFFFF}\u{EFFFE}\u{EFFFF}\u{FFFFE}\u{FFFFF}\u{10FFFE}\u{10FFFF}]/u;function Do(e,t){const n=Object.assign({},...e);if(t){const o=t.classes,l=t.styles;o&&(n.class==null?n.class=o:n.class+=" "+o),l&&(n.style==null?n.style=ze(l):n.style=ze(Fn(n.style,l)))}let i="";return Object.keys(n).forEach(o=>{if(wn.test(o))return;const l=n[o];l===!0?i+=" "+o:kn.has(o.toLowerCase())?l&&(i+=" "+o):l!=null&&(i+=` ${o}="${l}"`)}),i}function Fn(e,t){const n={};for(const i of e.split(";")){const o=i.indexOf(":"),l=i.slice(0,o).trim(),s=i.slice(o+1).trim();!l||(n[l]=s)}for(const i in t){const o=t[i];o?n[i]=o:delete n[i]}return n}const En=/[&"]/g,qn=/[&<]/g;function yt(e,t=!1){const n=String(e),i=t?En:qn;i.lastIndex=0;let o="",l=0;for(;i.test(n);){const s=i.lastIndex-1,r=n[s];o+=n.substring(l,s)+(r==="&"?"&amp;":r==='"'?"&quot;":"&lt;"),l=s+1}return o+n.substring(l)}function wt(e){return typeof e=="string"||e&&typeof e=="object"?yt(e,!0):e}function xo(e){const t={};for(const n in e)t[n]=wt(e[n]);return t}function No(e,t){let n="";for(let i=0;i<e.length;i+=1)n+=t(e[i],i);return n}const Lo={$$render:()=>""};function Po(e,t){if(!e||!e.$$render)throw t==="svelte:component"&&(t+=" this={...}"),new Error(`<${t}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${t}>.`);return e}function Ho(e,t,n,i){return console.log(`{@debug} ${e?e+" ":""}(${t}:${n})`),console.log(i),""}let Ie;function Ro(e){function t(n,i,o,l,s){const r=ne,u={on_destroy:Ie,context:new Map(s||(r?r.$$.context:[])),on_mount:[],before_update:[],after_update:[],callbacks:Ae()};z({$$:u});const f=e(n,i,o,l);return z(r),f}return{render:(n={},{$$slots:i={},context:o=new Map}={})=>{Ie=[];const l={title:"",head:"",css:new Set},s=t(l,n,{},i,o);return H(Ie),{html:s,css:{code:Array.from(l.css).map(r=>r.code).join(`
`),map:null},head:l.title+l.head}},$$render:t}}function Io(e,t,n){if(t==null||n&&!t)return"";const i=n&&t===!0?"":`="${yt(t,!0)}"`;return` ${e}${i}`}function zo(e){return e?` class="${e}"`:""}function ze(e){return Object.keys(e).filter(t=>e[t]).map(t=>`${t}: ${wt(e[t])};`).join(" ")}function Bo(e){const t=ze(e);return t?` style="${t}"`:""}function Ft(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function fe(e){e&&e.c()}function Wo(e,t){e&&e.l(t)}function Z(e,t,n,i){const{fragment:o,after_update:l}=e.$$;o&&o.m(t,n),i||se(()=>{const s=e.$$.on_mount.map(je).filter(Y);e.$$.on_destroy?e.$$.on_destroy.push(...s):H(s),e.$$.on_mount=[]}),l.forEach(se)}function U(e,t){const n=e.$$;n.fragment!==null&&(mn(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Mn(e,t){e.$$.dirty[0]===-1&&(ie.push(e),kt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Be(e,t,n,i,o,l,s,r=[-1]){const u=ne;z(e);const f=e.$$={fragment:null,ctx:[],props:l,update:D,not_equal:o,bound:Ae(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Ae(),dirty:r,skip_bound:!1,root:t.target||u.$$.root};s&&s(f.root);let a=!1;if(f.ctx=n?n(e,t.props||{},(_,p,...h)=>{const m=h.length?h[0]:p;return f.ctx&&o(f.ctx[_],f.ctx[_]=m)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](m),a&&Mn(e,_)),p}):[],f.update(),a=!0,H(f.before_update),f.fragment=i?i(f.ctx):!1,t.target){if(t.hydrate){Ut();const _=ln(t.target);f.fragment&&f.fragment.l(_),_.forEach(F)}else f.fragment&&f.fragment.c();t.intro&&C(e.$$.fragment),Z(e,t.target,t.anchor,t.customElement),Jt(),Pe()}z(u)}let Sn;typeof HTMLElement=="function"&&(Sn=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(je).filter(Y);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){H(this.$$.on_disconnect)}$destroy(){U(this,1),this.$destroy=D}$on(e,t){if(!Y(t))return D;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!$e(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class We{$destroy(){U(this,1),this.$destroy=D}$on(t,n){if(!Y(n))return D;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(t){this.$$set&&!$e(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function R(e,t){document.dispatchEvent(De(e,Object.assign({version:"3.59.2"},t),{bubbles:!0}))}function Vo(e,t){R("SvelteDOMInsert",{target:e,node:t}),j(e,t)}function Go(e,t){R("SvelteDOMInsert",{target:e,node:t}),ct(e,t)}function Xo(e,t,n){R("SvelteDOMInsert",{target:e,node:t,anchor:n}),O(e,t,n)}function Yo(e,t,n){R("SvelteDOMInsert",{target:e,node:t,anchor:n}),ft(e,t,n)}function Ve(e){R("SvelteDOMRemove",{node:e}),F(e)}function Uo(e,t){for(;e.nextSibling&&e.nextSibling!==t;)Ve(e.nextSibling)}function Jo(e){for(;e.previousSibling;)Ve(e.previousSibling)}function Ko(e){for(;e.nextSibling;)Ve(e.nextSibling)}function Qo(e,t,n,i,o,l,s){const r=i===!0?["capture"]:i?Array.from(Object.keys(i)):[];o&&r.push("preventDefault"),l&&r.push("stopPropagation"),s&&r.push("stopImmediatePropagation"),R("SvelteDOMAddEventListener",{node:e,event:t,handler:n,modifiers:r});const u=W(e,t,n,i);return()=>{R("SvelteDOMRemoveEventListener",{node:e,event:t,handler:n,modifiers:r}),u()}}function Zo(e,t,n){b(e,t,n),n==null?R("SvelteDOMRemoveAttribute",{node:e,attribute:t}):R("SvelteDOMSetAttribute",{node:e,attribute:t,value:n})}function $o(e,t,n){e[t]=n,R("SvelteDOMSetProperty",{node:e,property:t,value:n})}function el(e,t,n){e.dataset[t]=n,R("SvelteDOMSetDataset",{node:e,property:t,value:n})}function jn(e,t){t=""+t,e.data!==t&&(R("SvelteDOMSetData",{node:e,data:t}),e.data=t)}function An(e,t){t=""+t,e.wholeText!==t&&(R("SvelteDOMSetData",{node:e,data:t}),e.data=t)}function tl(e,t,n){~ot.indexOf(n)?An(e,t):jn(e,t)}function nl(e){if(typeof e!="string"&&!(e&&typeof e=="object"&&"length"in e)){let t="{#each} only iterates over array-like objects.";throw typeof Symbol=="function"&&e&&Symbol.iterator in e&&(t+=" You can use a spread to convert this iterable into an array."),new Error(t)}}function il(e,t,n){for(const i of Object.keys(t))~n.indexOf(i)||console.warn(`<${e}> received an unexpected slot "${i}".`)}function ol(e){if(e&&!(typeof e=="string"))throw new Error('<svelte:element> expects "this" attribute to be a string.')}function ll(e){e&&yn(e)&&console.warn(`<svelte:element this="${e}"> is self-closing and cannot have content.`)}function sl(e,t){const n="this={...} of <svelte:component> should specify a Svelte component.";try{const i=new e(t);if(!i.$$||!i.$set||!i.$on||!i.$destroy)throw new Error(n);return i}catch(i){const{message:o}=i;throw typeof o=="string"&&o.indexOf("is not a constructor")!==-1?new Error(n):i}}class rl extends null{constructor(t){if(!t||!t.target&&!t.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}class ul extends null{constructor(t){super(t)}}function cl(e){const t=Date.now();return()=>{if(Date.now()-t>e)throw new Error("Infinite loop detected")}}function fl(e,t){return e.map((n,i)=>n+t[i])}function al(e,t){return t.map(n=>e*n)}function On(e,t,n){return e.map((i,o)=>(1-n)*i+n*t[o])}function Et(e,t=2){if(!("length"in e))return Tn(e,t);for(var n=0,i=0;i<e.length;i++)n+=Math.pow(Math.abs(e[i]),t);return Math.pow(n,1/t)}function Tn(e,t=2){for(var n=0,i=0;i<e.shape[0];i++)n+=Math.pow(Math.abs(e.get(i)),t);return Math.pow(n,1/t)}function Ge(e,t=2){var n=Et(e,t);return e.map(i=>i/(1e-4+n))}function Cn(e){for(var t=[[1,0,0],[1,1,0],[0,1,0],[0,1,1],[0,0,1],[1,0,1]].map(s=>Ge(s,1));e<0;)e+=360;e=e%360;var n=360/t.length,i=Math.floor(e/n),o=(e-i*n)/n,l=On(t[i],t[(i+1)%t.length],o);return l=Ge(l,1),l}const Xe=[];function Dn(e){if(e in Xe)return Xe[e];let t=[];for(let n=0;n<e;n++){const i=360*n/e;t.push(Cn(i))}return Xe[e]=t,t}function qt(e){return`rgb(${255*e[0]}, ${255*e[1]}, ${255*e[2]})`}function Mt(e,t=[.98,.98,.98],n=void 0,i=void 0){const o="length"in e?e.length:e.shape[0],l="length"in e?p=>e[p]:p=>e.get(p);if(i==null&&(i=Dn(o)),console.log("Hues",i),n==null){for(var s=[0,0,0],r=0;r<o;r++){const p=l(r);if(p!=0)for(var u=i[r],f=0;f<3;f++)s[f]+=p*u[f]}s=Ge(s,1);for(var a=Et(e,2),a=Math.max(0,Math.min(1,a)),f=0;f<3;f++)s[f]=a*s[f]+(1-a)*t[f];return s}else{for(var r=n,_=i[r],s=[0,0,0],f=0;f<3;f++)s[f]=l(r)*_[f]+(1-l(r))*t[f];return s}}function Ye(e,t=[.98,.98,.98],n=void 0,i=void 0){var o=Mt(e,t,n,i);return qt(o)}function xn(e,t=[.98,.98,.98]){if(e>=0)for(var n=[0,.7,0],i=[0,0,0],o=0;o<3;o++)i[o]=e*n[o]+(1-e)*t[o];else for(var n=[1,0,0],i=[0,0,0],o=0;o<3;o++)i[o]=-e*n[o]+(1+e)*t[o];return console.log("Neuron color",e,i),i}function dl(e,t=[.98,.98,.98]){var n=xn(e,t);return qt(n)}function Nn(e){rt(e,"svelte-1fjpmsy",".container.svelte-1fjpmsy.svelte-1fjpmsy{position:relative;border:1px solid #aaa}.container.svelte-1fjpmsy>.svelte-1fjpmsy{position:absolute}.container.svelte-1fjpmsy canvas.svelte-1fjpmsy{left:0px;top:0px;width:100%;height:100%;image-rendering:pixelated}.container.svelte-1fjpmsy .focus-top.svelte-1fjpmsy,.container.svelte-1fjpmsy .focus-bottom.svelte-1fjpmsy{left:0px;width:100%;background:#aaa;opacity:0.3}.container.svelte-1fjpmsy .focus-top.svelte-1fjpmsy{top:0px}.container.svelte-1fjpmsy .focus-bottom.svelte-1fjpmsy{bottom:0px}.container.svelte-1fjpmsy .focus-left.svelte-1fjpmsy,.container.svelte-1fjpmsy .focus-right.svelte-1fjpmsy{top:0px;height:100%;background:#aaa;opacity:0.3}.container.svelte-1fjpmsy .focus-left.svelte-1fjpmsy{left:0px}.container.svelte-1fjpmsy .focus-right.svelte-1fjpmsy{right:0px}")}function St(e){let t,n,i,o=e[3]!=null&&jt(e);return{c(){t=q("div"),n=q("canvas"),i=x(),o&&o.c(),M(n,"width",e[1]+"px"),M(n,"height",e[2]+"px"),b(n,"class","svelte-1fjpmsy"),b(t,"class","container svelte-1fjpmsy"),M(t,"width",e[1]+"px"),M(t,"height",e[2]+"px")},m(l,s){O(l,t,s),j(t,n),e[9](n),j(t,i),o&&o.m(t,null)},p(l,s){s&2&&M(n,"width",l[1]+"px"),s&4&&M(n,"height",l[2]+"px"),l[3]!=null?o?o.p(l,s):(o=jt(l),o.c(),o.m(t,null)):o&&(o.d(1),o=null),s&2&&M(t,"width",l[1]+"px"),s&4&&M(t,"height",l[2]+"px")},d(l){l&&F(t),e[9](null),o&&o.d()}}}function jt(e){let t,n,i;return{c(){t=q("div"),n=x(),i=q("div"),b(t,"class","focus-top svelte-1fjpmsy"),M(t,"height",e[2]*e[3]/e[0].shape[0]+"px"),b(i,"class","focus-bottom svelte-1fjpmsy"),M(i,"height",e[2]*(1-(e[3]+1)/e[0].shape[0])+"px")},m(o,l){O(o,t,l),O(o,n,l),O(o,i,l)},p(o,l){l&13&&M(t,"height",o[2]*o[3]/o[0].shape[0]+"px"),l&13&&M(i,"height",o[2]*(1-(o[3]+1)/o[0].shape[0])+"px")},d(o){o&&F(t),o&&F(n),o&&F(i)}}}function At(e){let t,n,i,o=e[3]!=null&&Ot(e);return{c(){t=q("div"),n=q("canvas"),i=x(),o&&o.c(),M(n,"width",e[1]+"px"),M(n,"height",e[2]+"px"),b(n,"class","svelte-1fjpmsy"),b(t,"class","container svelte-1fjpmsy"),M(t,"width",e[1]+"px"),M(t,"height",e[2]+"px")},m(l,s){O(l,t,s),j(t,n),e[10](n),j(t,i),o&&o.m(t,null)},p(l,s){s&2&&M(n,"width",l[1]+"px"),s&4&&M(n,"height",l[2]+"px"),l[3]!=null?o?o.p(l,s):(o=Ot(l),o.c(),o.m(t,null)):o&&(o.d(1),o=null),s&2&&M(t,"width",l[1]+"px"),s&4&&M(t,"height",l[2]+"px")},d(l){l&&F(t),e[10](null),o&&o.d()}}}function Ot(e){let t,n,i;return{c(){t=q("div"),n=x(),i=q("div"),b(t,"class","focus-left svelte-1fjpmsy"),M(t,"width",e[1]*e[3]/e[0].shape[1]+"px"),b(i,"class","focus-right svelte-1fjpmsy"),M(i,"width",e[1]*(1-(e[3]+1)/e[0].shape[1])+"px")},m(o,l){O(o,t,l),O(o,n,l),O(o,i,l)},p(o,l){l&11&&M(t,"width",o[1]*o[3]/o[0].shape[1]+"px"),l&11&&M(i,"width",o[1]*(1-(o[3]+1)/o[0].shape[1])+"px")},d(o){o&&F(t),o&&F(n),o&&F(i)}}}function Ln(e){let t,n,i=!e[4]&&St(e),o=e[4]&&At(e);return{c(){i&&i.c(),t=x(),o&&o.c(),n=_t()},m(l,s){i&&i.m(l,s),O(l,t,s),o&&o.m(l,s),O(l,n,s)},p(l,[s]){l[4]?i&&(i.d(1),i=null):i?i.p(l,s):(i=St(l),i.c(),i.m(t.parentNode,t)),l[4]?o?o.p(l,s):(o=At(l),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:D,o:D,d(l){i&&i.d(l),l&&F(t),o&&o.d(l),l&&F(n)}}}function Pn(e,t,n){let{array:i}=t,{width:o}=t,{height:l}=t,{hues:s}=t,{focus_token:r}=t,{isolate_channel:u=void 0}=t,{hover_token_is_target:f=!1}=t,{color_map:a=Mt}=t,_;function p(c,d,k,y=void 0,w=void 0){if(d<k)return[255,255,255];var L=c.pick(d,k,null),T=a(L,void 0,y,w);return T.map(g=>255*g)}function h(c,d,k=void 0,y=void 0){if(!(c==null||d==null)){c.width=d.shape[0],c.height=d.shape[1];for(var w=c.getContext("2d"),L=w.getImageData(0,0,c.width,c.height),T=0;T<c.width;T++)for(var g=0;g<c.height;g++){for(var E=T*c.width+g,S=p(d,T,g,k,y=y),P=0;P<3;P++)L.data[4*E+P]=S[P];L.data[4*E+3]=255}w.putImageData(L,0,0)}}_n(()=>h(_,i,u));function m(c){oe[c?"unshift":"push"](()=>{_=c,n(5,_)})}function v(c){oe[c?"unshift":"push"](()=>{_=c,n(5,_)})}return e.$$set=c=>{"array"in c&&n(0,i=c.array),"width"in c&&n(1,o=c.width),"height"in c&&n(2,l=c.height),"hues"in c&&n(6,s=c.hues),"focus_token"in c&&n(3,r=c.focus_token),"isolate_channel"in c&&n(7,u=c.isolate_channel),"hover_token_is_target"in c&&n(4,f=c.hover_token_is_target),"color_map"in c&&n(8,a=c.color_map)},e.$$.update=()=>{if(e.$$.dirty&225){e:h(_,i,u,s)}},[i,o,l,r,f,_,s,u,a,m,v]}class Hn extends We{constructor(t){super(),Be(this,t,Pn,Ln,Oe,{array:0,width:1,height:2,hues:6,focus_token:3,isolate_channel:7,hover_token_is_target:4,color_map:8},Nn)}}const Se=Hn;function Tt(e,t){return e.mode=="soft"&&(e.value=t),e}function Rn(e,t){if(e.mode=="soft")e.value=t,e.mode="hard";else if(e.mode=="hard"&&e.value!=t)e.value=t;else return In(e);return e}function In(e){return e.value=void 0,e.mode="soft",e}function zn(e){let t,n,i,o;const l=e[4].default,s=Gt(l,e,e[3],null);return{c(){t=q("div"),s&&s.c(),b(t,"style",e[2])},m(r,u){O(r,t,u),s&&s.m(t,null),n=!0,i||(o=[W(t,"mouseover",e[5]),W(t,"click",e[6]),W(t,"mouseout",e[7])],i=!0)},p(r,[u]){s&&s.p&&(!n||u&8)&&it(s,l,r,r[3],n?nt(l,r[3],u,null):Xt(r[3]),null),(!n||u&4)&&b(t,"style",r[2])},i(r){n||(C(s,r),n=!0)},o(r){N(s,r),n=!1},d(r){r&&F(t),s&&s.d(r),i=!1,H(o)}}}function Bn(e,t,n){let{$$slots:i={},$$scope:o}=t,{lock:l}=t,{set_value:s}=t,{style:r=""}=t;const u=()=>{n(0,l=Tt(l,s))},f=()=>{n(0,l=Rn(l,s))},a=()=>{n(0,l=Tt(l,void 0))};return e.$$set=_=>{"lock"in _&&n(0,l=_.lock),"set_value"in _&&n(1,s=_.set_value),"style"in _&&n(2,r=_.style),"$$scope"in _&&n(3,o=_.$$scope)},[l,s,r,o,i,u,f,a]}class Wn extends We{constructor(t){super(),Be(this,t,Bn,zn,Oe,{lock:0,set_value:1,style:2})}}const Ct=Wn;function Vn(e){rt(e,"svelte-xqk9oe",".attn-container.svelte-xqk9oe.svelte-xqk9oe.svelte-xqk9oe{display:grid;grid-template-rows:[title] min-content [main] min-content;grid-template-columns:[big-attn] min-content [heads] minmax(min-content, 624px);gap:12px}.figcaption.svelte-xqk9oe.svelte-xqk9oe.svelte-xqk9oe{color:#888;grid-row:title;white-space:nowrap}.tokens-container.svelte-xqk9oe.svelte-xqk9oe.svelte-xqk9oe{display:grid;grid-template-rows:[title] min-content [main] min-content;grid-template-columns:[left] min-content [right] minmax(min-content, 800px) [end];gap:12px;margin-top:24px;color:white}.tokens.svelte-xqk9oe.svelte-xqk9oe.svelte-xqk9oe{grid-row:main;grid-column-start:left;grid-column-end:end;cursor:pointer;height:min-content;line-height:110%}.tokens.svelte-xqk9oe .token.svelte-xqk9oe.svelte-xqk9oe{white-space:pre-wrap}.tokens.svelte-xqk9oe .selected.svelte-xqk9oe.svelte-xqk9oe{border:1px solid #999;z-index:10}.tokens.svelte-xqk9oe .token.svelte-xqk9oe.svelte-xqk9oe:not(.selected){z-index:0;padding:1px}.hover-mode.svelte-xqk9oe.svelte-xqk9oe.svelte-xqk9oe,.hover-mode-text.svelte-xqk9oe.svelte-xqk9oe.svelte-xqk9oe,.info-mode.svelte-xqk9oe.svelte-xqk9oe.svelte-xqk9oe,.info-mode-text.svelte-xqk9oe.svelte-xqk9oe.svelte-xqk9oe{color:#888;grid-row:title;grid-column:settings;cursor:pointer}.hover-mode-text.svelte-xqk9oe.svelte-xqk9oe.svelte-xqk9oe,.info-mode-text.svelte-xqk9oe.svelte-xqk9oe.svelte-xqk9oe{margin-right:8px}.heads.svelte-xqk9oe.svelte-xqk9oe.svelte-xqk9oe{grid-column:heads;grid-row:main;display:flex;flex-direction:row;flex-wrap:wrap;gap:6px;height:min-content}.heads.svelte-xqk9oe .head-icon.svelte-xqk9oe.svelte-xqk9oe{position:relative;width:62px;height:62px}.heads.svelte-xqk9oe .head-icon.svelte-xqk9oe>.svelte-xqk9oe{position:absolute;right:0px;top:0px}.heads.svelte-xqk9oe .head-icon .head-label.svelte-xqk9oe.svelte-xqk9oe{background:#333;color:#eee;font-size:65%;padding:1px;border-bottom-left-radius:2px;padding-left:4px;padding-right:2px;min-width:14px;opacity:0.75}")}function Dt(e,t,n){const i=e.slice();return i[32]=t[n],i[34]=n,i}function xt(e,t,n){const i=e.slice();return i[35]=t[n],i}function Nt(e){let t,n=e[14][e[9]]+"",i,o;return{c(){t=I("("),i=I(n),o=I(")")},m(l,s){O(l,t,s),O(l,i,s),O(l,o,s)},p(l,s){s[0]&16896&&n!==(n=l[14][l[9]]+"")&&me(i,n)},d(l){l&&F(t),l&&F(i),l&&F(o)}}}function Lt(e){let t,n,i,o;return n=new Se({props:{array:e[7],width:"200",height:"200",focus_token:e[10],hover_token_is_target:e[2],isolate_channel:e[9]}}),{c(){t=q("div"),fe(n.$$.fragment),b(t,"style",i="grid-column: big-attn; grid-row: main; "+(e[13]?"":"display:none;"))},m(l,s){O(l,t,s),Z(n,t,null),o=!0},p(l,s){const r={};s[0]&128&&(r.array=l[7]),s[0]&1024&&(r.focus_token=l[10]),s[0]&4&&(r.hover_token_is_target=l[2]),s[0]&512&&(r.isolate_channel=l[9]),n.$set(r),(!o||s[0]&8192&&i!==(i="grid-column: big-attn; grid-row: main; "+(l[13]?"":"display:none;")))&&b(t,"style",i)},i(l){o||(C(n.$$.fragment,l),o=!0)},o(l){N(n.$$.fragment,l),o=!1},d(l){l&&F(t),U(n)}}}function Pt(e){let t,n,i,o,l=ae(e[11].shape[2]),s=[];for(let u=0;u<l.length;u+=1)s[u]=Ht(xt(e,l,u));const r=u=>N(s[u],1,1,()=>{s[u]=null});return{c(){t=q("div"),t.textContent="Attention Heads (hover to focus, click to lock)",n=x(),i=q("div");for(let u=0;u<s.length;u+=1)s[u].c();b(t,"class","figcaption svelte-xqk9oe"),M(t,"grid-column","heads"),b(i,"class","heads svelte-xqk9oe")},m(u,f){O(u,t,f),O(u,n,f),O(u,i,f);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(i,null);o=!0},p(u,f){if(f[0]&126662){l=ae(u[11].shape[2]);let a;for(a=0;a<l.length;a+=1){const _=xt(u,l,a);s[a]?(s[a].p(_,f),C(s[a],1)):(s[a]=Ht(_),s[a].c(),C(s[a],1),s[a].m(i,null))}for(ue(),a=l.length;a<s.length;a+=1)r(a);ce()}},i(u){if(!o){for(let f=0;f<l.length;f+=1)C(s[f]);o=!0}},o(u){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)N(s[f]);o=!1},d(u){u&&F(t),u&&F(n),u&&F(i),at(s,u)}}}function Gn(e){let t,n,i,o,l=(e[14][e[35]]!=null?e[14][e[35]]:"&nbsp")+"",s,r,u,f,a,_,p=(e[14][e[35]]!=null?e[14][e[35]]:"&nbsp")+"",h,m,v;return n=new Se({props:{array:e[7],width:"60",height:"60",isolate_channel:e[35]}}),f=new Se({props:{array:e[6],width:"60",height:"60",isolate_channel:e[35]}}),{c(){t=q("div"),fe(n.$$.fragment),i=x(),o=q("div"),r=x(),u=q("div"),fe(f.$$.fragment),a=x(),_=q("div"),m=x(),b(o,"class","head-label svelte-xqk9oe"),M(o,"background",e[15][e[35]]),b(t,"class","head-icon svelte-xqk9oe"),b(t,"style",s="opacity: "+(e[9]!=null&&e[9]!=e[35]?"0.2":e[16](e[35],e[10],e[2]))+"; "+(e[13]?"":"display:none;")),b(_,"class","head-label svelte-xqk9oe"),M(_,"background",e[15][e[35]]),b(u,"class","head-icon svelte-xqk9oe"),b(u,"style",h="opacity: "+(e[9]!=null&&e[9]!=e[35]?"0.2":e[16](e[35],e[10],e[2]))+"; "+(e[13]?"display:none;":""))},m(c,d){O(c,t,d),Z(n,t,null),j(t,i),j(t,o),o.innerHTML=l,O(c,r,d),O(c,u,d),Z(f,u,null),j(u,a),j(u,_),_.innerHTML=p,O(c,m,d),v=!0},p(c,d){const k={};d[0]&128&&(k.array=c[7]),d[0]&2048&&(k.isolate_channel=c[35]),n.$set(k),(!v||d[0]&18432)&&l!==(l=(c[14][c[35]]!=null?c[14][c[35]]:"&nbsp")+"")&&(o.innerHTML=l),(!v||d[0]&34816)&&M(o,"background",c[15][c[35]]),(!v||d[0]&11780&&s!==(s="opacity: "+(c[9]!=null&&c[9]!=c[35]?"0.2":c[16](c[35],c[10],c[2]))+"; "+(c[13]?"":"display:none;")))&&b(t,"style",s);const y={};d[0]&64&&(y.array=c[6]),d[0]&2048&&(y.isolate_channel=c[35]),f.$set(y),(!v||d[0]&18432)&&p!==(p=(c[14][c[35]]!=null?c[14][c[35]]:"&nbsp")+"")&&(_.innerHTML=p),(!v||d[0]&34816)&&M(_,"background",c[15][c[35]]),(!v||d[0]&11780&&h!==(h="opacity: "+(c[9]!=null&&c[9]!=c[35]?"0.2":c[16](c[35],c[10],c[2]))+"; "+(c[13]?"display:none;":"")))&&b(u,"style",h)},i(c){v||(C(n.$$.fragment,c),C(f.$$.fragment,c),v=!0)},o(c){N(n.$$.fragment,c),N(f.$$.fragment,c),v=!1},d(c){c&&F(t),U(n),c&&F(r),c&&F(u),U(f),c&&F(m)}}}function Ht(e){let t,n,i;function o(s){e[22](s)}let l={set_value:e[35],$$slots:{default:[Gn]},$$scope:{ctx:e}};return e[1]!==void 0&&(l.lock=e[1]),t=new Ct({props:l}),oe.push(()=>Ft(t,"lock",o)),{c(){fe(t.$$.fragment)},m(s,r){Z(t,s,r),i=!0},p(s,r){const u={};r[0]&2048&&(u.set_value=s[35]),r[0]&61124|r[1]&128&&(u.$$scope={dirty:r,ctx:s}),!n&&r[0]&2&&(n=!0,u.lock=s[1],bt(()=>n=!1)),t.$set(u)},i(s){i||(C(t.$$.fragment,s),i=!0)},o(s){N(t.$$.fragment,s),i=!1},d(s){U(t,s)}}}function Rt(e){let t,n,i,o,l,s,r,u,f,a,_,p,h=e[2]?"target":"source",m,v,c,d,k,y=e[5],w=[];for(let g=0;g<y.length;g+=1)w[g]=It(Dt(e,y,g));const L=g=>N(w[g],1,1,()=>{w[g]=null});let T=e[7]!==void 0&&zt(e);return{c(){t=q("div"),n=q("div"),n.textContent="Tokens (hover to focus, click to lock)",i=x(),o=q("div");for(let g=0;g<w.length;g+=1)w[g].c();l=x(),s=q("div"),r=q("nobr"),u=q("input"),f=x(),a=q("span"),_=I(`Selected is
            `),p=q("b"),m=I(h),v=x(),T&&T.c(),b(n,"class","figcaption svelte-xqk9oe"),M(n,"grid-column","left"),b(o,"class","tokens svelte-xqk9oe"),b(u,"class","hover-mode svelte-xqk9oe"),b(u,"type","checkbox"),b(a,"class","hover-mode-text svelte-xqk9oe"),M(a,"white-space","nowrap"),b(s,"class","toggle"),b(t,"class","tokens-container svelte-xqk9oe")},m(g,E){O(g,t,E),j(t,n),j(t,i),j(t,o);for(let S=0;S<w.length;S+=1)w[S]&&w[S].m(o,null);j(t,l),j(t,s),j(s,r),j(r,u),u.checked=e[2],j(r,f),j(r,a),j(a,_),j(a,p),j(p,m),j(r,v),T&&T.m(r,null),c=!0,d||(k=[W(u,"change",e[24]),W(a,"click",e[25])],d=!0)},p(g,E){if(E[0]&1073){y=g[5];let S;for(S=0;S<y.length;S+=1){const P=Dt(g,y,S);w[S]?(w[S].p(P,E),C(w[S],1)):(w[S]=It(P),w[S].c(),C(w[S],1),w[S].m(o,null))}for(ue(),S=y.length;S<w.length;S+=1)L(S);ce()}E[0]&4&&(u.checked=g[2]),(!c||E[0]&4)&&h!==(h=g[2]?"target":"source")&&me(m,h),g[7]!==void 0?T?T.p(g,E):(T=zt(g),T.c(),T.m(r,null)):T&&(T.d(1),T=null)},i(g){if(!c){for(let E=0;E<y.length;E+=1)C(w[E]);c=!0}},o(g){w=w.filter(Boolean);for(let E=0;E<w.length;E+=1)N(w[E]);c=!1},d(g){g&&F(t),at(w,g),T&&T.d(),d=!1,H(k)}}}function Xn(e){let t,n=e[32]+"",i,o;return{c(){t=q("span"),i=I(n),b(t,"class",o="token "+(e[34]==e[10]?"selected":"")+" svelte-xqk9oe"),M(t,"background",e[4][e[34]])},m(l,s){O(l,t,s),j(t,i)},p(l,s){s[0]&32&&n!==(n=l[32]+"")&&me(i,n),s[0]&1024&&o!==(o="token "+(l[34]==l[10]?"selected":"")+" svelte-xqk9oe")&&b(t,"class",o),s[0]&16&&M(t,"background",l[4][l[34]])},d(l){l&&F(t)}}}function It(e){let t,n,i;function o(s){e[23](s)}let l={set_value:e[34],style:"display: inline",$$slots:{default:[Xn]},$$scope:{ctx:e}};return e[0]!==void 0&&(l.lock=e[0]),t=new Ct({props:l}),oe.push(()=>Ft(t,"lock",o)),{c(){fe(t.$$.fragment)},m(s,r){Z(t,s,r),i=!0},p(s,r){const u={};r[0]&1072|r[1]&128&&(u.$$scope={dirty:r,ctx:s}),!n&&r[0]&1&&(n=!0,u.lock=s[0],bt(()=>n=!1)),t.$set(u)},i(s){i||(C(t.$$.fragment,s),i=!0)},o(s){N(t.$$.fragment,s),i=!1},d(s){U(t,s)}}}function zt(e){let t,n,i,o,l,s=e[3]?"info-weighted":"unmodified",r,u,f;return{c(){t=q("input"),n=x(),i=q("span"),o=I(`Attention is
            `),l=q("b"),r=I(s),b(t,"class","info-mode svelte-xqk9oe"),b(t,"type","checkbox"),b(i,"class","info-mode-text svelte-xqk9oe"),M(i,"white-space","nowrap")},m(a,_){O(a,t,_),t.checked=e[3],O(a,n,_),O(a,i,_),j(i,o),j(i,l),j(l,r),u||(f=[W(t,"change",e[26]),W(i,"click",e[27])],u=!0)},p(a,_){_[0]&8&&(t.checked=a[3]),_[0]&8&&s!==(s=a[3]?"info-weighted":"unmodified")&&me(r,s)},d(a){a&&F(t),a&&F(n),a&&F(i),u=!1,H(f)}}}function Yn(e){let t,n,i,o,l,s,r,u,f,a,_,p,h=e[9]!=null&&Nt(e),m=e[7]!==void 0&&Lt(e);r=new Se({props:{array:e[6],width:"200",height:"200",focus_token:e[10],hover_token_is_target:e[2],isolate_channel:e[9]}});let v=e[12]>1&&Pt(e),c=e[8]&&Rt(e);return{c(){t=q("div"),n=q("div"),i=I(`Attention Pattern
        `),h&&h.c(),o=x(),m&&m.c(),l=x(),s=q("div"),fe(r.$$.fragment),f=x(),v&&v.c(),a=x(),c&&c.c(),_=_t(),b(n,"class","figcaption svelte-xqk9oe"),M(n,"grid-column","big-attn"),b(s,"style",u="grid-column: big-attn; grid-row: main; "+(e[13]?"display:none":"")),b(t,"class","attn-container svelte-xqk9oe")},m(d,k){O(d,t,k),j(t,n),j(n,i),h&&h.m(n,null),j(t,o),m&&m.m(t,null),j(t,l),j(t,s),Z(r,s,null),j(t,f),v&&v.m(t,null),O(d,a,k),c&&c.m(d,k),O(d,_,k),p=!0},p(d,k){d[9]!=null?h?h.p(d,k):(h=Nt(d),h.c(),h.m(n,null)):h&&(h.d(1),h=null),d[7]!==void 0?m?(m.p(d,k),k[0]&128&&C(m,1)):(m=Lt(d),m.c(),C(m,1),m.m(t,l)):m&&(ue(),N(m,1,1,()=>{m=null}),ce());const y={};k[0]&64&&(y.array=d[6]),k[0]&1024&&(y.focus_token=d[10]),k[0]&4&&(y.hover_token_is_target=d[2]),k[0]&512&&(y.isolate_channel=d[9]),r.$set(y),(!p||k[0]&8192&&u!==(u="grid-column: big-attn; grid-row: main; "+(d[13]?"display:none":"")))&&b(s,"style",u),d[12]>1?v?(v.p(d,k),k[0]&4096&&C(v,1)):(v=Pt(d),v.c(),C(v,1),v.m(t,null)):v&&(ue(),N(v,1,1,()=>{v=null}),ce()),d[8]?c?(c.p(d,k),k[0]&256&&C(c,1)):(c=Rt(d),c.c(),C(c,1),c.m(_.parentNode,_)):c&&(ue(),N(c,1,1,()=>{c=null}),ce())},i(d){p||(C(m),C(r.$$.fragment,d),C(v),C(c),p=!0)},o(d){N(m),N(r.$$.fragment,d),N(v),N(c),p=!1},d(d){d&&F(t),h&&h.d(),m&&m.d(),U(r),v&&v.d(),d&&F(a),c&&c.d(d),d&&F(_)}}}function ae(e){return[...Array(e).keys()]}function Bt(e){if(e!==void 0){for(var t=[],n=0;n<e.shape[0];n++){t.push([]);for(var i=0;i<e.shape[2];i++){for(var o=0,l=0;l<e.shape[1];l++)o=Math.max(o,e.pick(n,l,i));t[n].push(o)}}return t}}function Wt(e){if(e!==void 0){for(var t=[],n=0;n<e.shape[0];n++){t.push([]);for(var i=0;i<e.shape[2];i++){for(var o=0,l=0;l<e.shape[1];l++)o=Math.max(o,e.pick(l,n,i));t[n].push(o)}}return t}}function Un(e,t,n){let i,o,l,s,r,u,f,a,_,p,h,m,v,{tokens:c}=t,{attention:d}=t,{info_weighted:k}=t,{head_labels:y}=t,{show_tokens:w=!0}=t,{focus_token_lock:L={value:void 0,mode:"soft"}}=t,{focus_head_lock:T={value:void 0,mode:"soft"}}=t,{hover_token_is_target:g=!1}=t,{_show_info_weighted:E=!1}=t;function S(A,X,J,$=void 0){if(X<J)return"#FFF";var de=A.pick(X,J,null);return Ye(de,void 0,$)}function P(A,X,J){if(X==null)var $=1;else var de=J?p:_,$=Math.max(0,Math.min(1,de[X][A]));return""+$}function Qn(A,X,J,$=void 0,de){if(X==null){var oi=de?p:_;return Ye(oi[J],void 0,$)}let Je,Ke;de?(Je=J,Ke=X):(Je=X,Ke=J);let Qe=S(A,Je,Ke,$);return Qe==="#FFF"&&(Qe="#DDD"),Qe}let{all_token_colors:Ue}=t;function Zn(A){T=A,n(1,T)}function $n(A){L=A,n(0,L)}function ei(){g=this.checked,n(2,g)}const ti=()=>n(2,g=g^!0);function ni(){E=this.checked,n(3,E)}const ii=()=>n(3,E=E^!0);return e.$$set=A=>{"tokens"in A&&n(5,c=A.tokens),"attention"in A&&n(6,d=A.attention),"info_weighted"in A&&n(7,k=A.info_weighted),"head_labels"in A&&n(17,y=A.head_labels),"show_tokens"in A&&n(8,w=A.show_tokens),"focus_token_lock"in A&&n(0,L=A.focus_token_lock),"focus_head_lock"in A&&n(1,T=A.focus_head_lock),"hover_token_is_target"in A&&n(2,g=A.hover_token_is_target),"_show_info_weighted"in A&&n(3,E=A._show_info_weighted),"all_token_colors"in A&&n(4,Ue=A.all_token_colors)},e.$$.update=()=>{if(e.$$.dirty[0]&1){e:n(10,i=L.value)}if(e.$$.dirty[0]&2){e:n(9,o=T.value)}if(e.$$.dirty[0]&136){e:n(13,l=E&&k!==void 0)}if(e.$$.dirty[0]&8384){e:n(11,s=l?k:d)}if(e.$$.dirty[0]&2048){e:window.attention_show=s}if(e.$$.dirty[0]&64){e:n(20,r=Bt(d))}if(e.$$.dirty[0]&64){e:n(18,u=Wt(d))}if(e.$$.dirty[0]&128){e:n(21,f=Bt(k))}if(e.$$.dirty[0]&128){e:n(19,a=Wt(k))}if(e.$$.dirty[0]&3153920){e:_=l?f:r}if(e.$$.dirty[0]&794624){e:p=l?a:u}if(e.$$.dirty[0]&64){e:n(12,h=d.shape[2])}if(e.$$.dirty[0]&4096){e:n(15,m=ae(h).map(A=>Ye(ae(h).map(X=>1),void 0,A)))}if(e.$$.dirty[0]&135168){e:n(14,v=y!=null?y:ae(h))}if(e.$$.dirty[0]&3620){e:n(4,Ue=ae(c.length).map(A=>Qn(s,i,A,o,g)))}},[L,T,g,E,Ue,c,d,k,w,o,i,s,h,l,v,m,P,y,u,a,r,f,Zn,$n,ei,ti,ni,ii]}class Jn extends We{constructor(t){super(),Be(this,t,Un,Yn,Oe,{tokens:5,attention:6,info_weighted:7,head_labels:17,show_tokens:8,focus_token_lock:0,focus_head_lock:1,hover_token_is_target:2,_show_info_weighted:3,all_token_colors:4},Vn,[-1,-1])}}const Kn=Jn})(),AttentionMulti=Ze.default})();
