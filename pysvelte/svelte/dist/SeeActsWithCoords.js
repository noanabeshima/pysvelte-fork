var SeeActsWithCoords;(()=>{var Vh={479:Cr=>{/*! For license information please see plotly.min.js.LICENSE.txt */(function(pa,na){Cr.exports=na()})(self,function(){return function(){var pa={79288:function(ee,z,e){"use strict";var M=e(3400),k={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var o in k){var T=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");M.addStyleRule(T,k[o])}},86712:function(ee,z,e){"use strict";ee.exports=e(84224)},37240:function(ee,z,e){"use strict";ee.exports=e(51132)},29744:function(ee,z,e){"use strict";ee.exports=e(94456)},29352:function(ee,z,e){"use strict";ee.exports=e(67244)},96144:function(ee,z,e){"use strict";ee.exports=e(97776)},53219:function(ee,z,e){"use strict";ee.exports=e(61712)},4624:function(ee,z,e){"use strict";ee.exports=e(95856)},54543:function(ee,z,e){"use strict";ee.exports=e(54272)},45e3:function(ee,z,e){"use strict";ee.exports=e(85404)},62300:function(ee,z,e){"use strict";ee.exports=e(26048)},6920:function(ee,z,e){"use strict";ee.exports=e(66240)},10264:function(ee,z,e){"use strict";ee.exports=e(40448)},32016:function(ee,z,e){"use strict";ee.exports=e(64884)},27528:function(ee,z,e){"use strict";ee.exports=e(15088)},75556:function(ee,z,e){"use strict";ee.exports=e(76744)},39204:function(ee,z,e){"use strict";ee.exports=e(94704)},73996:function(ee,z,e){"use strict";ee.exports=e(62396)},16489:function(ee,z,e){"use strict";ee.exports=e(32028)},5e3:function(ee,z,e){"use strict";ee.exports=e(81932)},77280:function(ee,z,e){"use strict";ee.exports=e(45536)},33992:function(ee,z,e){"use strict";ee.exports=e(42600)},17600:function(ee,z,e){"use strict";ee.exports=e(21536)},49116:function(ee,z,e){"use strict";ee.exports=e(65664)},46808:function(ee,z,e){"use strict";ee.exports=e(29044)},36168:function(ee,z,e){"use strict";ee.exports=e(48928)},13792:function(ee,z,e){"use strict";var M=e(32016);M.register([e(37240),e(29352),e(5e3),e(33992),e(17600),e(49116),e(6920),e(67484),e(79440),e(39204),e(83096),e(36168),e(20260),e(63560),e(65832),e(46808),e(73996),e(48824),e(89904),e(25120),e(13752),e(4340),e(62300),e(29800),e(8363),e(54543),e(86636),e(42192),e(32140),e(77280),e(89296),e(56816),e(70192),e(45e3),e(27528),e(84764),e(3920),e(50248),e(4624),e(69967),e(10264),e(86152),e(53219),e(81604),e(63796),e(29744),e(89336),e(86712),e(75556),e(16489),e(97312),e(96144)]),ee.exports=M},3920:function(ee,z,e){"use strict";ee.exports=e(43480)},25120:function(ee,z,e){"use strict";ee.exports=e(6296)},4340:function(ee,z,e){"use strict";ee.exports=e(7404)},86152:function(ee,z,e){"use strict";ee.exports=e(65456)},56816:function(ee,z,e){"use strict";ee.exports=e(22020)},89296:function(ee,z,e){"use strict";ee.exports=e(29928)},20260:function(ee,z,e){"use strict";ee.exports=e(75792)},32140:function(ee,z,e){"use strict";ee.exports=e(156)},84764:function(ee,z,e){"use strict";ee.exports=e(45499)},48824:function(ee,z,e){"use strict";ee.exports=e(3296)},69967:function(ee,z,e){"use strict";ee.exports=e(4184)},8363:function(ee,z,e){"use strict";ee.exports=e(36952)},86636:function(ee,z,e){"use strict";ee.exports=e(38983)},70192:function(ee,z,e){"use strict";ee.exports=e(11572)},81604:function(ee,z,e){"use strict";ee.exports=e(76924)},63796:function(ee,z,e){"use strict";ee.exports=e(62944)},89336:function(ee,z,e){"use strict";ee.exports=e(95443)},67484:function(ee,z,e){"use strict";ee.exports=e(34864)},97312:function(ee,z,e){"use strict";ee.exports=e(76272)},42192:function(ee,z,e){"use strict";ee.exports=e(97924)},29800:function(ee,z,e){"use strict";ee.exports=e(15436)},63560:function(ee,z,e){"use strict";ee.exports=e(5621)},89904:function(ee,z,e){"use strict";ee.exports=e(91304)},50248:function(ee,z,e){"use strict";ee.exports=e(41724)},65832:function(ee,z,e){"use strict";ee.exports=e(31991)},79440:function(ee,z,e){"use strict";ee.exports=e(22869)},13752:function(ee,z,e){"use strict";ee.exports=e(67776)},83096:function(ee,z,e){"use strict";ee.exports=e(95952)},72196:function(ee){"use strict";ee.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(ee,z,e){"use strict";var M=e(72196),k=e(25376),o=e(33816),T=e(31780).templatedArray;e(36208),ee.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(ee,z,e){"use strict";var M=e(3400),k=e(54460),o=e(23816).draw;function T(h){var s=h._fullLayout;M.filterVisible(s.annotations).forEach(function(t){var i=k.getFromId(h,t.xref),n=k.getFromId(h,t.yref),r=k.getRefType(t.xref),a=k.getRefType(t.yref);t._extremes={},r==="range"&&b(t,i),a==="range"&&b(t,n)})}function b(h,s){var t,i=s._id,n=i.charAt(0),r=h[n],a=h["a"+n],l=h[n+"ref"],u=h["a"+n+"ref"],d=h["_"+n+"padplus"],c=h["_"+n+"padminus"],x={x:1,y:-1}[n]*h[n+"shift"],g=3*h.arrowsize*h.arrowwidth||0,p=g+x,v=g-x,m=3*h.startarrowsize*h.arrowwidth||0,y=m+x,_=m-x;if(u===l){var f=k.findExtremes(s,[s.r2c(r)],{ppadplus:p,ppadminus:v}),S=k.findExtremes(s,[s.r2c(a)],{ppadplus:Math.max(d,y),ppadminus:Math.max(c,_)});t={min:[f.min[0],S.min[0]],max:[f.max[0],S.max[0]]}}else y=a?y+a:y,_=a?_-a:_,t=k.findExtremes(s,[s.r2c(r)],{ppadplus:Math.max(d,p,y),ppadminus:Math.max(c,v,_)});h._extremes[i]=t}ee.exports=function(h){var s=h._fullLayout;if(M.filterVisible(s.annotations).length&&h._fullData.length)return M.syncOrAsync([o,T],h)}},42300:function(ee,z,e){"use strict";var M=e(3400),k=e(24040),o=e(31780).arrayEditor;function T(h,s){var t,i,n,r,a,l,u,d=h._fullLayout.annotations,c=[],x=[],g=[],p=(s||[]).length;for(t=0;t<d.length;t++)if(r=(n=d[t]).clicktoshow){for(i=0;i<p;i++)if(l=(a=s[i]).xaxis,u=a.yaxis,l._id===n.xref&&u._id===n.yref&&l.d2r(a.x)===b(n._xclick,l)&&u.d2r(a.y)===b(n._yclick,u)){(n.visible?r==="onout"?x:g:c).push(t);break}i===p&&n.visible&&r==="onout"&&x.push(t)}return{on:c,off:x,explicitOff:g}}function b(h,s){return s.type==="log"?s.l2r(h):s.d2r(h)}ee.exports={hasClickToShow:function(h,s){var t=T(h,s);return t.on.length>0||t.explicitOff.length>0},onClick:function(h,s){var t,i,n=T(h,s),r=n.on,a=n.off.concat(n.explicitOff),l={},u=h._fullLayout.annotations;if(r.length||a.length){for(t=0;t<r.length;t++)(i=o(h.layout,"annotations",u[r[t]])).modifyItem("visible",!0),M.extendFlat(l,i.getUpdateObj());for(t=0;t<a.length;t++)(i=o(h.layout,"annotations",u[a[t]])).modifyItem("visible",!1),M.extendFlat(l,i.getUpdateObj());return k.call("update",h,{},l)}}}},87192:function(ee,z,e){"use strict";var M=e(3400),k=e(76308);ee.exports=function(o,T,b,h){h("opacity");var s=h("bgcolor"),t=h("bordercolor"),i=k.opacity(t);h("borderpad");var n=h("borderwidth"),r=h("showarrow");if(h("text",r?" ":b._dfltTitle.annotation),h("textangle"),M.coerceFont(h,"font",b.font),h("width"),h("align"),h("height")&&h("valign"),r){var a,l,u=h("arrowside");u.indexOf("end")!==-1&&(a=h("arrowhead"),l=h("arrowsize")),u.indexOf("start")!==-1&&(h("startarrowhead",a),h("startarrowsize",l)),h("arrowcolor",i?T.bordercolor:k.defaultLine),h("arrowwidth",2*(i&&n||1)),h("standoff"),h("startstandoff")}var d=h("hovertext"),c=b.hoverlabel||{};if(d){var x=h("hoverlabel.bgcolor",c.bgcolor||(k.opacity(s)?k.rgb(s):k.defaultLine)),g=h("hoverlabel.bordercolor",c.bordercolor||k.contrast(x));M.coerceFont(h,"hoverlabel.font",{family:c.font.family,size:c.font.size,color:c.font.color||g})}h("captureevents",!!d)}},26828:function(ee,z,e){"use strict";var M=e(38248),k=e(36896);ee.exports=function(o,T,b,h){T=T||{};var s=b==="log"&&T.type==="linear",t=b==="linear"&&T.type==="log";if(s||t)for(var i,n,r=o._fullLayout.annotations,a=T._id.charAt(0),l=0;l<r.length;l++)i=r[l],n="annotations["+l+"].",i[a+"ref"]===T._id&&u(a),i["a"+a+"ref"]===T._id&&u("a"+a);function u(d){var c=i[d],x=null;x=s?k(c,T.range):Math.pow(10,c),M(x)||(x=null),h(n+d,x)}}},45216:function(ee,z,e){"use strict";var M=e(3400),k=e(54460),o=e(51272),T=e(87192),b=e(13916);function h(s,t,i){function n(S,w){return M.coerce(s,t,b,S,w)}var r=n("visible"),a=n("clicktoshow");if(r||a){T(s,t,i,n);for(var l=t.showarrow,u=["x","y"],d=[-10,-30],c={_fullLayout:i},x=0;x<2;x++){var g=u[x],p=k.coerceRef(s,t,c,g,"","paper");if(p!=="paper"&&k.getFromId(c,p)._annIndices.push(t._index),k.coercePosition(t,c,n,p,g,.5),l){var v="a"+g,m=k.coerceRef(s,t,c,v,"pixel",["pixel","paper"]);m!=="pixel"&&m!==p&&(m=t[v]="pixel");var y=m==="pixel"?d[x]:.4;k.coercePosition(t,c,n,m,v,y)}n(g+"anchor"),n(g+"shift")}if(M.noneOrAll(s,t,["x","y"]),l&&M.noneOrAll(s,t,["ax","ay"]),a){var _=n("xclick"),f=n("yclick");t._xclick=_===void 0?t.x:k.cleanPosition(_,c,t.xref),t._yclick=f===void 0?t.y:k.cleanPosition(f,c,t.yref)}}}ee.exports=function(s,t){o(s,t,{name:"annotations",handleItemDefaults:h})}},23816:function(ee,z,e){"use strict";var M=e(33428),k=e(24040),o=e(7316),T=e(3400),b=T.strTranslate,h=e(54460),s=e(76308),t=e(43616),i=e(93024),n=e(72736),r=e(93972),a=e(86476),l=e(31780).arrayEditor,u=e(33652);function d(g,p){var v=g._fullLayout.annotations[p]||{},m=h.getFromId(g,v.xref),y=h.getFromId(g,v.yref);m&&m.setScale(),y&&y.setScale(),x(g,v,p,!1,m,y)}function c(g,p,v,m,y){var _=y[v],f=y[v+"ref"],S=v.indexOf("y")!==-1,w=h.getRefType(f)==="domain",E=S?m.h:m.w;return g?w?_+(S?-p:p)/g._length:g.p2r(g.r2p(_)+p):_+(S?-p:p)/E}function x(g,p,v,m,y,_){var f,S,w=g._fullLayout,E=g._fullLayout._size,P=g._context.edits;m?(f="annotation-"+m,S=m+".annotations"):(f="annotation",S="annotations");var C=l(g.layout,S,p),O=C.modifyBase,R=C.modifyItem,j=C.getUpdateObj;w._infolayer.selectAll("."+f+'[data-index="'+v+'"]').remove();var D="clip"+w._uid+"_ann"+v;if(p._input&&p.visible!==!1){var N={x:{},y:{}},W=+p.textangle||0,F=w._infolayer.append("g").classed(f,!0).attr("data-index",String(v)).style("opacity",p.opacity),U=F.append("g").classed("annotation-text-g",!0),V=P[p.showarrow?"annotationTail":"annotationPosition"],te=p.captureevents||P.annotationText||V,J=U.append("g").style("pointer-events",te?"all":null).call(r,"pointer").on("click",function(){g._dragging=!1,g.emit("plotly_clickannotation",be(M.event))});p.hovertext&&J.on("mouseover",function(){var ve=p.hoverlabel,pe=ve.font,_e=this.getBoundingClientRect(),Te=g.getBoundingClientRect();i.loneHover({x0:_e.left-Te.left,x1:_e.right-Te.left,y:(_e.top+_e.bottom)/2-Te.top,text:p.hovertext,color:ve.bgcolor,borderColor:ve.bordercolor,fontFamily:pe.family,fontSize:pe.size,fontColor:pe.color},{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:g})}).on("mouseout",function(){i.loneUnhover(w._hoverlayer.node())});var K=p.borderwidth,X=p.borderpad,Z=K+X,$=J.append("rect").attr("class","bg").style("stroke-width",K+"px").call(s.stroke,p.bordercolor).call(s.fill,p.bgcolor),re=p.width||p.height,oe=w._topclips.selectAll("#"+D).data(re?[0]:[]);oe.enter().append("clipPath").classed("annclip",!0).attr("id",D).append("rect"),oe.exit().remove();var ie=p.font,ue=w._meta?T.templateString(p.text,w._meta):p.text,me=J.append("text").classed("annotation-text",!0).text(ue);P.annotationText?me.call(n.makeEditable,{delegate:J,gd:g}).call(ge).on("edit",function(ve){p.text=ve,this.call(ge),R("text",ve),y&&y.autorange&&O(y._name+".autorange",!0),_&&_.autorange&&O(_._name+".autorange",!0),k.call("_guiRelayout",g,j())}):me.call(ge)}else M.selectAll("#"+D).remove();function be(ve){var pe={index:v,annotation:p._input,fullAnnotation:p,event:ve};return m&&(pe.subplotId=m),pe}function ge(ve){return ve.call(t.font,ie).attr({"text-anchor":{left:"start",right:"end"}[p.align]||"middle"}),n.convertToTspans(ve,g,de),ve}function de(){var ve=me.selectAll("a");ve.size()===1&&ve.text()===me.text()&&J.insert("a",":first-child").attr({"xlink:xlink:href":ve.attr("xlink:href"),"xlink:xlink:show":ve.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild($.node());var pe=J.select(".annotation-text-math-group"),_e=!pe.empty(),Te=t.bBox((_e?pe:me).node()),le=Te.width,ae=Te.height,he=p.width||le,Se=p.height||ae,ke=Math.round(he+2*Z),Me=Math.round(Se+2*Z);function Ee(gt,ut){return ut==="auto"&&(ut=gt<.3333333333333333?"left":gt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ut]}for(var De=!1,fe=["x","y"],xe=0;xe<fe.length;xe++){var we,Oe,ze,Pe,Ue,Ve=fe[xe],Ze=p[Ve+"ref"]||Ve,it=p["a"+Ve+"ref"],tt={x:y,y:_}[Ve],dt=(W+(Ve==="x"?0:-90))*Math.PI/180,yt=ke*Math.cos(dt),vt=Me*Math.sin(dt),et=Math.abs(yt)+Math.abs(vt),Qe=p[Ve+"anchor"],wt=p[Ve+"shift"]*(Ve==="x"?1:-1),It=N[Ve],Dt=h.getRefType(Ze);if(tt&&Dt!=="domain"){var Ct=tt.r2fraction(p[Ve]);(Ct<0||Ct>1)&&(it===Ze?((Ct=tt.r2fraction(p["a"+Ve]))<0||Ct>1)&&(De=!0):De=!0),we=tt._offset+tt.r2p(p[Ve]),Pe=.5}else{var He=Dt==="domain";Ve==="x"?(ze=p[Ve],we=He?tt._offset+tt._length*ze:we=E.l+E.w*ze):(ze=1-p[Ve],we=He?tt._offset+tt._length*ze:we=E.t+E.h*ze),Pe=p.showarrow?.5:ze}if(p.showarrow){It.head=we;var We=p["a"+Ve];if(Ue=yt*Ee(.5,p.xanchor)-vt*Ee(.5,p.yanchor),it===Ze){var Be=h.getRefType(it);Be==="domain"?(Ve==="y"&&(We=1-We),It.tail=tt._offset+tt._length*We):Be==="paper"?Ve==="y"?(We=1-We,It.tail=E.t+E.h*We):It.tail=E.l+E.w*We:It.tail=tt._offset+tt.r2p(We),Oe=Ue}else It.tail=we+We,Oe=Ue+We;It.text=It.tail+Ue;var Ge=w[Ve==="x"?"width":"height"];if(Ze==="paper"&&(It.head=T.constrain(It.head,1,Ge-1)),it==="pixel"){var at=-Math.max(It.tail-3,It.text),nt=Math.min(It.tail+3,It.text)-Ge;at>0?(It.tail+=at,It.text+=at):nt>0&&(It.tail-=nt,It.text-=nt)}It.tail+=wt,It.head+=wt}else Oe=Ue=et*Ee(Pe,Qe),It.text=we+Ue;It.text+=wt,Ue+=wt,Oe+=wt,p["_"+Ve+"padplus"]=et/2+Oe,p["_"+Ve+"padminus"]=et/2-Oe,p["_"+Ve+"size"]=et,p["_"+Ve+"shift"]=Ue}if(De)J.remove();else{var Re=0,Fe=0;if(p.align!=="left"&&(Re=(he-le)*(p.align==="center"?.5:1)),p.valign!=="top"&&(Fe=(Se-ae)*(p.valign==="middle"?.5:1)),_e)pe.select("svg").attr({x:Z+Re-1,y:Z+Fe}).call(t.setClipUrl,re?D:null,g);else{var rt=Z+Fe-Te.top,Ye=Z+Re-Te.left;me.call(n.positionText,Ye,rt).call(t.setClipUrl,re?D:null,g)}oe.select("rect").call(t.setRect,Z,Z,he,Se),$.call(t.setRect,K/2,K/2,ke-K,Me-K),J.call(t.setTranslate,Math.round(N.x.text-ke/2),Math.round(N.y.text-Me/2)),U.attr({transform:"rotate("+W+","+N.x.text+","+N.y.text+")"});var ct,pt=function(gt,ut){F.selectAll(".annotation-arrow-g").remove();var Mt=N.x.head,xt=N.y.head,mt=N.x.tail+gt,Et=N.y.tail+ut,Lt=N.x.text+gt,zt=N.y.text+ut,Wt=T.rotationXYMatrix(W,Lt,zt),rn=T.apply2DTransform(Wt),Ut=T.apply2DTransform2(Wt),Vt=+$.attr("width"),en=+$.attr("height"),Ln=Lt-.5*Vt,An=Ln+Vt,hn=zt-.5*en,Xt=hn+en,ln=[[Ln,hn,Ln,Xt],[Ln,Xt,An,Xt],[An,Xt,An,hn],[An,hn,Ln,hn]].map(Ut);if(!ln.reduce(function(ur,er){return ur^!!T.segmentsIntersect(Mt,xt,Mt+1e6,xt+1e6,er[0],er[1],er[2],er[3])},!1)){ln.forEach(function(ur){var er=T.segmentsIntersect(mt,Et,Mt,xt,ur[0],ur[1],ur[2],ur[3]);er&&(mt=er.x,Et=er.y)});var nn=p.arrowwidth,cn=p.arrowcolor,Tn=p.arrowside,Mn=F.append("g").style({opacity:s.opacity(cn)}).classed("annotation-arrow-g",!0),zn=Mn.append("path").attr("d","M"+mt+","+Et+"L"+Mt+","+xt).style("stroke-width",nn+"px").call(s.stroke,s.rgb(cn));if(u(zn,Tn,p),P.annotationPosition&&zn.node().parentNode&&!m){var In=Mt,Pn=xt;if(p.standoff){var Hn=Math.sqrt(Math.pow(Mt-mt,2)+Math.pow(xt-Et,2));In+=p.standoff*(mt-Mt)/Hn,Pn+=p.standoff*(Et-xt)/Hn}var Fn,tr,or=Mn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(mt-In)+","+(Et-Pn),transform:b(In,Pn)}).style("stroke-width",nn+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");a.init({element:or.node(),gd:g,prepFn:function(){var ur=t.getTranslate(J);Fn=ur.x,tr=ur.y,y&&y.autorange&&O(y._name+".autorange",!0),_&&_.autorange&&O(_._name+".autorange",!0)},moveFn:function(ur,er){var Mr=rn(Fn,tr),jt=Mr[0]+ur,tn=Mr[1]+er;J.call(t.setTranslate,jt,tn),R("x",c(y,ur,"x",E,p)),R("y",c(_,er,"y",E,p)),p.axref===p.xref&&R("ax",c(y,ur,"ax",E,p)),p.ayref===p.yref&&R("ay",c(_,er,"ay",E,p)),Mn.attr("transform",b(ur,er)),U.attr({transform:"rotate("+W+","+jt+","+tn+")"})},doneFn:function(){k.call("_guiRelayout",g,j());var ur=document.querySelector(".js-notes-box-panel");ur&&ur.redraw(ur.selectedObj)}})}}};p.showarrow&&pt(0,0),V&&a.init({element:J.node(),gd:g,prepFn:function(){ct=U.attr("transform")},moveFn:function(gt,ut){var Mt="pointer";if(p.showarrow)p.axref===p.xref?R("ax",c(y,gt,"ax",E,p)):R("ax",p.ax+gt),p.ayref===p.yref?R("ay",c(_,ut,"ay",E.w,p)):R("ay",p.ay+ut),pt(gt,ut);else{if(m)return;var xt,mt;if(y)xt=c(y,gt,"x",E,p);else{var Et=p._xsize/E.w,Lt=p.x+(p._xshift-p.xshift)/E.w-Et/2;xt=a.align(Lt+gt/E.w,Et,0,1,p.xanchor)}if(_)mt=c(_,ut,"y",E,p);else{var zt=p._ysize/E.h,Wt=p.y-(p._yshift+p.yshift)/E.h-zt/2;mt=a.align(Wt-ut/E.h,zt,0,1,p.yanchor)}R("x",xt),R("y",mt),y&&_||(Mt=a.getCursor(y?.5:xt,_?.5:mt,p.xanchor,p.yanchor))}U.attr({transform:b(gt,ut)+ct}),r(J,Mt)},clickFn:function(gt,ut){p.captureevents&&g.emit("plotly_clickannotation",be(ut))},doneFn:function(){r(J),k.call("_guiRelayout",g,j());var gt=document.querySelector(".js-notes-box-panel");gt&&gt.redraw(gt.selectedObj)}})}}}ee.exports={draw:function(g){var p=g._fullLayout;p._infolayer.selectAll(".annotation").remove();for(var v=0;v<p.annotations.length;v++)p.annotations[v].visible&&d(g,v);return o.previousPromises(g)},drawOne:d,drawRaw:x}},33652:function(ee,z,e){"use strict";var M=e(33428),k=e(76308),o=e(72196),T=e(3400),b=T.strScale,h=T.strRotate,s=T.strTranslate;ee.exports=function(t,i,n){var r,a,l,u,d=t.node(),c=o[n.arrowhead||0],x=o[n.startarrowhead||0],g=(n.arrowwidth||1)*(n.arrowsize||1),p=(n.arrowwidth||1)*(n.startarrowsize||1),v=i.indexOf("start")>=0,m=i.indexOf("end")>=0,y=c.backoff*g+n.standoff,_=x.backoff*p+n.startstandoff;if(d.nodeName==="line"){r={x:+t.attr("x1"),y:+t.attr("y1")},a={x:+t.attr("x2"),y:+t.attr("y2")};var f=r.x-a.x,S=r.y-a.y;if(u=(l=Math.atan2(S,f))+Math.PI,y&&_&&y+_>Math.sqrt(f*f+S*S))return void F();if(y){if(y*y>f*f+S*S)return void F();var w=y*Math.cos(l),E=y*Math.sin(l);a.x+=w,a.y+=E,t.attr({x2:a.x,y2:a.y})}if(_){if(_*_>f*f+S*S)return void F();var P=_*Math.cos(l),C=_*Math.sin(l);r.x-=P,r.y-=C,t.attr({x1:r.x,y1:r.y})}}else if(d.nodeName==="path"){var O=d.getTotalLength(),R="";if(O<y+_)return void F();var j=d.getPointAtLength(0),D=d.getPointAtLength(.1);l=Math.atan2(j.y-D.y,j.x-D.x),r=d.getPointAtLength(Math.min(_,O)),R="0px,"+_+"px,";var N=d.getPointAtLength(O),W=d.getPointAtLength(O-.1);u=Math.atan2(N.y-W.y,N.x-W.x),a=d.getPointAtLength(Math.max(0,O-y)),R+=O-(R?_+y:y)+"px,"+O+"px",t.style("stroke-dasharray",R)}function F(){t.style("stroke-dasharray","0px,100px")}function U(V,te,J,K){V.path&&(V.noRotate&&(J=0),M.select(d.parentNode).append("path").attr({class:t.attr("class"),d:V.path,transform:s(te.x,te.y)+h(180*J/Math.PI)+b(K)}).style({fill:k.rgb(n.arrowcolor),"stroke-width":0}))}v&&U(x,r,l,p),m&&U(c,a,u,g)}},79180:function(ee,z,e){"use strict";var M=e(23816),k=e(42300);ee.exports={moduleType:"component",name:"annotations",layoutAttributes:e(13916),supplyLayoutDefaults:e(45216),includeBasePlot:e(36632)("annotations"),calcAutorange:e(90272),draw:M.draw,drawOne:M.drawOne,drawRaw:M.drawRaw,hasClickToShow:k.hasClickToShow,onClick:k.onClick,convertCoords:e(26828)}},45899:function(ee,z,e){"use strict";var M=e(13916),k=e(67824).overrideAll,o=e(31780).templatedArray;ee.exports=k(o("annotation",{visible:M.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:M.xanchor,xshift:M.xshift,yanchor:M.yanchor,yshift:M.yshift,text:M.text,textangle:M.textangle,font:M.font,width:M.width,height:M.height,opacity:M.opacity,align:M.align,valign:M.valign,bgcolor:M.bgcolor,bordercolor:M.bordercolor,borderpad:M.borderpad,borderwidth:M.borderwidth,showarrow:M.showarrow,arrowcolor:M.arrowcolor,arrowhead:M.arrowhead,startarrowhead:M.startarrowhead,arrowside:M.arrowside,arrowsize:M.arrowsize,startarrowsize:M.startarrowsize,arrowwidth:M.arrowwidth,standoff:M.standoff,startstandoff:M.startstandoff,hovertext:M.hovertext,hoverlabel:M.hoverlabel,captureevents:M.captureevents}),"calc","from-root")},42456:function(ee,z,e){"use strict";var M=e(3400),k=e(54460);function o(T,b){var h=b.fullSceneLayout.domain,s=b.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},M.extendFlat(T._xa,t),k.setConvert(T._xa),T._xa._offset=s.l+h.x[0]*s.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*s.w*(h.x[1]-h.x[0])},T._ya={},M.extendFlat(T._ya,t),k.setConvert(T._ya),T._ya._offset=s.t+(1-h.y[1])*s.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*s.h*(h.y[1]-h.y[0])}}ee.exports=function(T){for(var b=T.fullSceneLayout.annotations,h=0;h<b.length;h++)o(b[h],T);T.fullLayout._infolayer.selectAll(".annotation-"+T.id).remove()}},52808:function(ee,z,e){"use strict";var M=e(3400),k=e(54460),o=e(51272),T=e(87192),b=e(45899);function h(s,t,i,n){function r(l,u){return M.coerce(s,t,b,l,u)}function a(l){var u=l+"axis",d={_fullLayout:{}};return d._fullLayout[u]=i[u],k.coercePosition(t,d,r,l,l,.5)}r("visible")&&(T(s,t,n.fullLayout,r),a("x"),a("y"),a("z"),M.noneOrAll(s,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",r("xanchor"),r("yanchor"),r("xshift"),r("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",r("ax",-10),r("ay",-30),M.noneOrAll(s,t,["ax","ay"])))}ee.exports=function(s,t,i){o(s,t,{name:"annotations",handleItemDefaults:h,fullLayout:i.fullLayout})}},71836:function(ee,z,e){"use strict";var M=e(23816).drawRaw,k=e(94424),o=["x","y","z"];ee.exports=function(T){for(var b=T.fullSceneLayout,h=T.dataScale,s=b.annotations,t=0;t<s.length;t++){for(var i=s[t],n=!1,r=0;r<3;r++){var a=o[r],l=i[a],u=b[a+"axis"].r2fraction(l);if(u<0||u>1){n=!0;break}}n?T.fullLayout._infolayer.select(".annotation-"+T.id+'[data-index="'+t+'"]').remove():(i._pdata=k(T.glplot.cameraParams,[b.xaxis.r2l(i.x)*h[0],b.yaxis.r2l(i.y)*h[1],b.zaxis.r2l(i.z)*h[2]]),M(T.graphDiv,i,t,T.id,i._xa,i._ya))}}},56864:function(ee,z,e){"use strict";var M=e(24040),k=e(3400);ee.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e(45899)}}},layoutAttributes:e(45899),handleDefaults:e(52808),includeBasePlot:function(o,T){var b=M.subplotsRegistry.gl3d;if(b)for(var h=b.attrRegex,s=Object.keys(o),t=0;t<s.length;t++){var i=s[t];h.test(i)&&(o[i].annotations||[]).length&&(k.pushUnique(T._basePlotModules,b),k.pushUnique(T._subplots.gl3d,i))}},convert:e(42456),draw:e(71836)}},54976:function(ee,z,e){"use strict";ee.exports=e(38700),e(15168),e(67020),e(89792),e(55668),e(65168),e(2084),e(26368),e(24747),e(65616),e(30632),e(73040),e(1104),e(51456),e(4592),e(45348)},97776:function(ee,z,e){"use strict";var M=e(54976),k=e(3400),o=e(39032),T=o.EPOCHJD,b=o.ONEDAY,h={valType:"enumerated",values:k.sortObjectKeys(M.calendars),editType:"calc",dflt:"gregorian"},s=function(g,p,v,m){var y={};return y[v]=h,k.coerce(g,p,y,v,m)},t="##",i={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:t,w:t,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},n={};function r(g){var p=n[g];return p||(n[g]=M.instance(g))}function a(g){return k.extendFlat({},h,{description:g})}function l(g){return"Sets the calendar system to use with `"+g+"` date data."}var u={xcalendar:a(l("x"))},d=k.extendFlat({},u,{ycalendar:a(l("y"))}),c=k.extendFlat({},d,{zcalendar:a(l("z"))}),x=a(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ee.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:d,bar:d,box:d,heatmap:d,contour:d,histogram:d,histogram2d:d,histogram2dcontour:d,scatter3d:c,surface:c,mesh3d:c,scattergl:d,ohlc:u,candlestick:u},layout:{calendar:a(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:x},yaxis:{calendar:x},scene:{xaxis:{calendar:x},yaxis:{calendar:x},zaxis:{calendar:x}},polar:{radialaxis:{calendar:x}}},transforms:{filter:{valuecalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:a(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:h,handleDefaults:s,handleTraceDefaults:function(g,p,v,m){for(var y=0;y<v.length;y++)s(g,p,v[y]+"calendar",m.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:r,worldCalFmt:function(g,p,v){for(var m,y,_,f,S,w=Math.floor((p+.05)/b)+T,E=r(v).fromJD(w),P=0;(P=g.indexOf("%",P))!==-1;)(m=g.charAt(P+1))==="0"||m==="-"||m==="_"?(_=3,y=g.charAt(P+2),m==="_"&&(m="-")):(y=m,m="0",_=2),(f=i[y])?(S=f===t?t:E.formatDate(f[m]),g=g.substr(0,P)+S+g.substr(P+_),P+=S.length):P+=_;return g}}},22548:function(ee,z){"use strict";z.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],z.defaultLine="#444",z.lightLine="#eee",z.background="#fff",z.borderLine="#BEC8D9",z.lightFraction=90.9090909090909},76308:function(ee,z,e){"use strict";var M=e(49760),k=e(38248),o=e(38116).isTypedArray,T=ee.exports={},b=e(22548);T.defaults=b.defaults;var h=T.defaultLine=b.defaultLine;T.lightLine=b.lightLine;var s=T.background=b.background;function t(i){if(k(i)||typeof i!="string")return i;var n=i.trim();if(n.substr(0,3)!=="rgb")return i;var r=n.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return i;var a=r[1].trim().split(/\s*[\s,]\s*/),l=n.charAt(3)==="a"&&a.length===4;if(!l&&a.length!==3)return i;for(var u=0;u<a.length;u++){if(!a[u].length||(a[u]=Number(a[u]),!(a[u]>=0)))return i;if(u===3)a[u]>1&&(a[u]=1);else if(a[u]>=1)return i}var d=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return l?"rgba("+d+", "+a[3]+")":"rgb("+d+")"}T.tinyRGB=function(i){var n=i.toRgb();return"rgb("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+")"},T.rgb=function(i){return T.tinyRGB(M(i))},T.opacity=function(i){return i?M(i).getAlpha():0},T.addOpacity=function(i,n){var r=M(i).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+n+")"},T.combine=function(i,n){var r=M(i).toRgb();if(r.a===1)return M(i).toRgbString();var a=M(n||s).toRgb(),l=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},u={r:l.r*(1-r.a)+r.r*r.a,g:l.g*(1-r.a)+r.g*r.a,b:l.b*(1-r.a)+r.b*r.a};return M(u).toRgbString()},T.interpolate=function(i,n,r){var a=M(i).toRgb(),l=M(n).toRgb(),u={r:r*a.r+(1-r)*l.r,g:r*a.g+(1-r)*l.g,b:r*a.b+(1-r)*l.b};return M(u).toRgbString()},T.contrast=function(i,n,r){var a=M(i);return a.getAlpha()!==1&&(a=M(T.combine(i,s))),(a.isDark()?n?a.lighten(n):s:r?a.darken(r):h).toString()},T.stroke=function(i,n){var r=M(n);i.style({stroke:T.tinyRGB(r),"stroke-opacity":r.getAlpha()})},T.fill=function(i,n){var r=M(n);i.style({fill:T.tinyRGB(r),"fill-opacity":r.getAlpha()})},T.clean=function(i){if(i&&typeof i=="object"){var n,r,a,l,u=Object.keys(i);for(n=0;n<u.length;n++)if(l=i[a=u[n]],a.substr(a.length-5)==="color")if(Array.isArray(l))for(r=0;r<l.length;r++)l[r]=t(l[r]);else i[a]=t(l);else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(l))for(r=0;r<l.length;r++)Array.isArray(l[r])&&(l[r][1]=t(l[r][1]));else if(Array.isArray(l)){var d=l[0];if(!Array.isArray(d)&&d&&typeof d=="object")for(r=0;r<l.length;r++)T.clean(l[r])}else l&&typeof l=="object"&&!o(l)&&T.clean(l)}}},42996:function(ee,z,e){"use strict";var M=e(94724),k=e(25376),o=e(92880).extendFlat,T=e(67824).overrideAll;ee.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:M.linecolor,outlinewidth:M.linewidth,bordercolor:M.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:o({},M.ticks,{dflt:""}),ticklabeloverflow:o({},M.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,labelalias:M.labelalias,tickfont:k({}),tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,tickprefix:M.tickprefix,showtickprefix:M.showtickprefix,ticksuffix:M.ticksuffix,showticksuffix:M.showticksuffix,separatethousands:M.separatethousands,exponentformat:M.exponentformat,minexponent:M.minexponent,showexponent:M.showexponent,title:{text:{valType:"string"},font:k({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(ee){"use strict";ee.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(ee,z,e){"use strict";var M=e(3400),k=e(31780),o=e(26332),T=e(25404),b=e(95936),h=e(42568),s=e(42996);ee.exports=function(t,i,n){var r=k.newContainer(i,"colorbar"),a=t.colorbar||{};function l(R,j){return M.coerce(a,r,s,R,j)}var u=n.margin||{t:0,b:0,l:0,r:0},d=n.width-u.l-u.r,c=n.height-u.t-u.b,x=l("orientation")==="v",g=l("thicknessmode");l("thickness",g==="fraction"?30/(x?d:c):30);var p=l("lenmode");l("len",p==="fraction"?1:x?c:d);var v,m,y,_=l("yref")==="paper",f=l("xref")==="paper",S="left";x?(y="middle",S=f?"left":"right",v=f?1.02:1,m=.5):(y=_?"bottom":"top",S="center",v=.5,m=_?1.02:1),M.coerce(a,r,{x:{valType:"number",min:f?-2:0,max:f?3:1,dflt:v}},"x"),M.coerce(a,r,{y:{valType:"number",min:_?-2:0,max:_?3:1,dflt:m}},"y"),l("xanchor",S),l("xpad"),l("yanchor",y),l("ypad"),M.noneOrAll(a,r,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var w=M.coerce(a,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");l("ticklabeloverflow",w.indexOf("inside")!==-1?"hide past domain":"hide past div"),o(a,r,l,"linear");var E=n.font,P={noAutotickangles:!0,outerTicks:!1,font:E};w.indexOf("inside")!==-1&&(P.bgColor="black"),h(a,r,l,"linear",P),b(a,r,l,"linear",P),T(a,r,l,"linear",P),l("title.text",n._dfltTitle.colorbar);var C=r.showticklabels?r.tickfont:E,O=M.extendFlat({},C,{color:E.color,size:M.bigFont(C.size)});M.coerceFont(l,"title.font",O),l("title.side",x?"top":"right")}},37848:function(ee,z,e){"use strict";var M=e(33428),k=e(49760),o=e(7316),T=e(24040),b=e(54460),h=e(86476),s=e(3400),t=s.strTranslate,i=e(92880).extendFlat,n=e(93972),r=e(43616),a=e(76308),l=e(81668),u=e(72736),d=e(94288).flipScale,c=e(28336),x=e(37668),g=e(94724),p=e(84284),v=p.LINE_SPACING,m=p.FROM_TL,y=p.FROM_BR,_=e(63964).cn;ee.exports={draw:function(f){var S=f._fullLayout._infolayer.selectAll("g."+_.colorbar).data(function(w){var E,P,C,O,R=w._fullLayout,j=w.calcdata,D=[];function N(re){return i(re,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function W(){typeof O.calc=="function"?O.calc(w,C,E):(E._fillgradient=P.reversescale?d(P.colorscale):P.colorscale,E._zrange=[P[O.min],P[O.max]])}for(var F=0;F<j.length;F++){var U=j[F];if((C=U[0].trace)._module){var V=C._module.colorbar;if(C.visible===!0&&V)for(var te=Array.isArray(V),J=te?V:[V],K=0;K<J.length;K++){var X=(O=J[K]).container;(P=X?C[X]:C)&&P.showscale&&((E=N(P.colorbar))._id="cb"+C.uid+(te&&X?"-"+X:""),E._traceIndex=C.index,E._propPrefix=(X?X+".":"")+"colorbar.",E._meta=C._meta,W(),D.push(E))}}}for(var Z in R._colorAxes)if((P=R[Z]).showscale){var $=R._colorAxes[Z];(E=N(P.colorbar))._id="cb"+Z,E._propPrefix=Z+".colorbar.",E._meta=R._meta,O={min:"cmin",max:"cmax"},$[0]!=="heatmap"&&(C=$[1],O.calc=C._module.colorbar.calc),W(),D.push(E)}return D}(f),function(w){return w._id});S.enter().append("g").attr("class",function(w){return w._id}).classed(_.colorbar,!0),S.each(function(w){var E=M.select(this);s.ensureSingle(E,"rect",_.cbbg),s.ensureSingle(E,"g",_.cbfills),s.ensureSingle(E,"g",_.cblines),s.ensureSingle(E,"g",_.cbaxis,function(C){C.classed(_.crisp,!0)}),s.ensureSingle(E,"g",_.cbtitleunshift,function(C){C.append("g").classed(_.cbtitle,!0)}),s.ensureSingle(E,"rect",_.cboutline);var P=function(C,O,R){var j=O.orientation==="v",D=O.len,N=O.lenmode,W=O.thickness,F=O.thicknessmode,U=O.outlinewidth,V=O.borderwidth,te=O.bgcolor,J=O.xanchor,K=O.yanchor,X=O.xpad,Z=O.ypad,$=O.x,re=j?O.y:1-O.y,oe=O.yref==="paper",ie=O.xref==="paper",ue=R._fullLayout,me=ue._size,be=O._fillcolor,ge=O._line,de=O.title,ve=de.side,pe=O._zrange||M.extent((typeof be=="function"?be:ge.color).domain()),_e=typeof ge.color=="function"?ge.color:function(){return ge.color},Te=typeof be=="function"?be:function(){return be},le=O._levels,ae=function(Be,Ge,at){var nt,Re,Fe=Ge._levels,rt=[],Ye=[],ct=Fe.end+Fe.size/100,pt=Fe.size,gt=1.001*at[0]-.001*at[1],ut=1.001*at[1]-.001*at[0];for(Re=0;Re<1e5&&(nt=Fe.start+Re*pt,!(pt>0?nt>=ct:nt<=ct));Re++)nt>gt&&nt<ut&&rt.push(nt);if(Ge._fillgradient)Ye=[0];else if(typeof Ge._fillcolor=="function"){var Mt=Ge._filllevels;if(Mt)for(ct=Mt.end+Mt.size/100,pt=Mt.size,Re=0;Re<1e5&&(nt=Mt.start+Re*pt,!(pt>0?nt>=ct:nt<=ct));Re++)nt>at[0]&&nt<at[1]&&Ye.push(nt);else(Ye=rt.map(function(xt){return xt-Fe.size/2})).push(Ye[Ye.length-1]+Fe.size)}else Ge._fillcolor&&typeof Ge._fillcolor=="string"&&(Ye=[0]);return Fe.size<0&&(rt.reverse(),Ye.reverse()),{line:rt,fill:Ye}}(0,O,pe),he=ae.fill,Se=ae.line,ke=Math.round(W*(F==="fraction"?j?me.w:me.h:1)),Me=ke/(j?me.w:me.h),Ee=Math.round(D*(N==="fraction"?j?me.h:me.w:1)),De=Ee/(j?me.h:me.w),fe=ie?me.w:R._fullLayout.width,xe=oe?me.h:R._fullLayout.height,we=Math.round(j?$*fe+X:re*xe+Z),Oe={center:.5,right:1}[J]||0,ze={top:1,middle:.5}[K]||0,Pe=j?$-Oe*Me:re-ze*Me,Ue=j?re-ze*De:$-Oe*De,Ve=Math.round(j?xe*(1-Ue):fe*Ue);O._lenFrac=De,O._thickFrac=Me,O._uFrac=Pe,O._vFrac=Ue;var Ze=O._axis=function(Be,Ge,at){var nt=Be._fullLayout,Re=Ge.orientation==="v",Fe={type:"linear",range:at,tickmode:Ge.tickmode,nticks:Ge.nticks,tick0:Ge.tick0,dtick:Ge.dtick,tickvals:Ge.tickvals,ticktext:Ge.ticktext,ticks:Ge.ticks,ticklen:Ge.ticklen,tickwidth:Ge.tickwidth,tickcolor:Ge.tickcolor,showticklabels:Ge.showticklabels,labelalias:Ge.labelalias,ticklabelposition:Ge.ticklabelposition,ticklabeloverflow:Ge.ticklabeloverflow,ticklabelstep:Ge.ticklabelstep,tickfont:Ge.tickfont,tickangle:Ge.tickangle,tickformat:Ge.tickformat,exponentformat:Ge.exponentformat,minexponent:Ge.minexponent,separatethousands:Ge.separatethousands,showexponent:Ge.showexponent,showtickprefix:Ge.showtickprefix,tickprefix:Ge.tickprefix,showticksuffix:Ge.showticksuffix,ticksuffix:Ge.ticksuffix,title:Ge.title,showline:!0,anchor:"free",side:Re?"right":"bottom",position:1},rt=Re?"y":"x",Ye={type:"linear",_id:rt+Ge._id},ct={letter:rt,font:nt.font,noAutotickangles:rt==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:nt.calendar};function pt(gt,ut){return s.coerce(Fe,Ye,g,gt,ut)}return c(Fe,Ye,pt,ct,nt),x(Fe,Ye,pt,ct),Ye}(R,O,pe);Ze.position=Me+(j?$+X/me.w:re+Z/me.h);var it=["top","bottom"].indexOf(ve)!==-1;if(j&&it&&(Ze.title.side=ve,Ze.titlex=$+X/me.w,Ze.titley=Ue+(de.side==="top"?De-Z/me.h:Z/me.h)),j||it||(Ze.title.side=ve,Ze.titley=re+Z/me.h,Ze.titlex=Ue+X/me.w),ge.color&&O.tickmode==="auto"){Ze.tickmode="linear",Ze.tick0=le.start;var tt=le.size,dt=s.constrain(Ee/50,4,15)+1,yt=(pe[1]-pe[0])/((O.nticks||dt)*tt);if(yt>1){var vt=Math.pow(10,Math.floor(Math.log(yt)/Math.LN10));tt*=vt*s.roundUp(yt/vt,[2,5,10]),(Math.abs(le.start)/le.size+1e-6)%1<2e-6&&(Ze.tick0=0)}Ze.dtick=tt}Ze.domain=j?[Ue+Z/me.h,Ue+De-Z/me.h]:[Ue+X/me.w,Ue+De-X/me.w],Ze.setScale(),C.attr("transform",t(Math.round(me.l),Math.round(me.t)));var et,Qe=C.select("."+_.cbtitleunshift).attr("transform",t(-Math.round(me.l),-Math.round(me.t))),wt=Ze.ticklabelposition,It=Ze.title.font.size,Dt=C.select("."+_.cbaxis),Ct=0,He=0;function We(Be,Ge){var at={propContainer:Ze,propName:O._propPrefix+"title",traceIndex:O._traceIndex,_meta:O._meta,placeholder:ue._dfltTitle.colorbar,containerGroup:C.select("."+_.cbtitle)},nt=Be.charAt(0)==="h"?Be.substr(1):"h"+Be;C.selectAll("."+nt+",."+nt+"-math-group").remove(),l.draw(R,Be,i(at,Ge||{}))}return s.syncOrAsync([o.previousPromises,function(){var Be,Ge;(j&&it||!j&&!it)&&(ve==="top"&&(Be=X+me.l+fe*$,Ge=Z+me.t+xe*(1-Ue-De)+3+.75*It),ve==="bottom"&&(Be=X+me.l+fe*$,Ge=Z+me.t+xe*(1-Ue)-3-.25*It),ve==="right"&&(Ge=Z+me.t+xe*re+3+.75*It,Be=X+me.l+fe*Ue),We(Ze._id+"title",{attributes:{x:Be,y:Ge,"text-anchor":j?"start":"middle"}}))},function(){if(!j&&!it||j&&it){var Be,Ge=C.select("."+_.cbtitle),at=Ge.select("text"),nt=[-U/2,U/2],Re=Ge.select(".h"+Ze._id+"title-math-group").node(),Fe=15.6;if(at.node()&&(Fe=parseInt(at.node().style.fontSize,10)*v),Re?(Be=r.bBox(Re),He=Be.width,(Ct=Be.height)>Fe&&(nt[1]-=(Ct-Fe)/2)):at.node()&&!at.classed(_.jsPlaceholder)&&(Be=r.bBox(at.node()),He=Be.width,Ct=Be.height),j){if(Ct){if(Ct+=5,ve==="top")Ze.domain[1]-=Ct/me.h,nt[1]*=-1;else{Ze.domain[0]+=Ct/me.h;var rt=u.lineCount(at);nt[1]+=(1-rt)*Fe}Ge.attr("transform",t(nt[0],nt[1])),Ze.setScale()}}else He&&(ve==="right"&&(Ze.domain[0]+=(He+It/2)/me.w),Ge.attr("transform",t(nt[0],nt[1])),Ze.setScale())}C.selectAll("."+_.cbfills+",."+_.cblines).attr("transform",j?t(0,Math.round(me.h*(1-Ze.domain[1]))):t(Math.round(me.w*Ze.domain[0]),0)),Dt.attr("transform",j?t(0,Math.round(-me.t)):t(Math.round(-me.l),0));var Ye=C.select("."+_.cbfills).selectAll("rect."+_.cbfill).attr("style","").data(he);Ye.enter().append("rect").classed(_.cbfill,!0).attr("style",""),Ye.exit().remove();var ct=pe.map(Ze.c2p).map(Math.round).sort(function(xt,mt){return xt-mt});Ye.each(function(xt,mt){var Et=[mt===0?pe[0]:(he[mt]+he[mt-1])/2,mt===he.length-1?pe[1]:(he[mt]+he[mt+1])/2].map(Ze.c2p).map(Math.round);j&&(Et[1]=s.constrain(Et[1]+(Et[1]>Et[0])?1:-1,ct[0],ct[1]));var Lt=M.select(this).attr(j?"x":"y",we).attr(j?"y":"x",M.min(Et)).attr(j?"width":"height",Math.max(ke,2)).attr(j?"height":"width",Math.max(M.max(Et)-M.min(Et),2));if(O._fillgradient)r.gradient(Lt,R,O._id,j?"vertical":"horizontalreversed",O._fillgradient,"fill");else{var zt=Te(xt).replace("e-","");Lt.attr("fill",k(zt).toHexString())}});var pt=C.select("."+_.cblines).selectAll("path."+_.cbline).data(ge.color&&ge.width?Se:[]);pt.enter().append("path").classed(_.cbline,!0),pt.exit().remove(),pt.each(function(xt){var mt=we,Et=Math.round(Ze.c2p(xt))+ge.width/2%1;M.select(this).attr("d","M"+(j?mt+","+Et:Et+","+mt)+(j?"h":"v")+ke).call(r.lineGroupStyle,ge.width,_e(xt),ge.dash)}),Dt.selectAll("g."+Ze._id+"tick,path").remove();var gt=we+ke+(U||0)/2-(O.ticks==="outside"?1:0),ut=b.calcTicks(Ze),Mt=b.getTickSigns(Ze)[2];return b.drawTicks(R,Ze,{vals:Ze.ticks==="inside"?b.clipEnds(Ze,ut):ut,layer:Dt,path:b.makeTickPath(Ze,gt,Mt),transFn:b.makeTransTickFn(Ze)}),b.drawLabels(R,Ze,{vals:ut,layer:Dt,transFn:b.makeTransTickLabelFn(Ze),labelFns:b.makeLabelFns(Ze,gt)})},function(){if(j&&!it||!j&&it){var Be,Ge,at=Ze.position||0,nt=Ze._offset+Ze._length/2;if(ve==="right")Ge=nt,Be=me.l+fe*at+10+It*(Ze.showticklabels?1:.5);else if(Be=nt,ve==="bottom"&&(Ge=me.t+xe*at+10+(wt.indexOf("inside")===-1?Ze.tickfont.size:0)+(Ze.ticks!=="intside"&&O.ticklen||0)),ve==="top"){var Re=de.text.split("<br>").length;Ge=me.t+xe*at+10-ke-v*It*Re}We((j?"h":"v")+Ze._id+"title",{avoid:{selection:M.select(R).selectAll("g."+Ze._id+"tick"),side:ve,offsetTop:j?0:me.t,offsetLeft:j?me.l:0,maxShift:j?ue.width:ue.height},attributes:{x:Be,y:Ge,"text-anchor":"middle"},transform:{rotate:j?-90:0,offset:0}})}},o.previousPromises,function(){var Be,Ge=ke+U/2;wt.indexOf("inside")===-1&&(Be=r.bBox(Dt.node()),Ge+=j?Be.width:Be.height),et=Qe.select("text");var at=0,nt=j&&ve==="top",Re=!j&&ve==="right",Fe=0;if(et.node()&&!et.classed(_.jsPlaceholder)){var rt,Ye=Qe.select(".h"+Ze._id+"title-math-group").node();Ye&&(j&&it||!j&&!it)?(at=(Be=r.bBox(Ye)).width,rt=Be.height):(at=(Be=r.bBox(Qe.node())).right-me.l-(j?we:Ve),rt=Be.bottom-me.t-(j?Ve:we),j||ve!=="top"||(Ge+=Be.height,Fe=Be.height)),Re&&(et.attr("transform",t(at/2+It/2,0)),at*=2),Ge=Math.max(Ge,j?at:rt)}var ct=2*(j?X:Z)+Ge+V+U/2,pt=0;!j&&de.text&&K==="bottom"&&re<=0&&(ct+=pt=ct/2,Fe+=pt),ue._hColorbarMoveTitle=pt,ue._hColorbarMoveCBTitle=Fe;var gt=V+U,ut=(j?we:Ve)-gt/2-(j?X:0),Mt=(j?Ve:we)-(j?Ee:Z+Fe-pt);C.select("."+_.cbbg).attr("x",ut).attr("y",Mt).attr(j?"width":"height",Math.max(ct-pt,2)).attr(j?"height":"width",Math.max(Ee+gt,2)).call(a.fill,te).call(a.stroke,O.bordercolor).style("stroke-width",V);var xt=Re?Math.max(at-10,0):0;C.selectAll("."+_.cboutline).attr("x",(j?we:Ve+X)+xt).attr("y",(j?Ve+Z-Ee:we)+(nt?Ct:0)).attr(j?"width":"height",Math.max(ke,2)).attr(j?"height":"width",Math.max(Ee-(j?2*Z+Ct:2*X+xt),2)).call(a.stroke,O.outlinecolor).style({fill:"none","stroke-width":U});var mt=j?Oe*ct:0,Et=j?0:(1-ze)*ct-Fe;if(mt=ie?me.l-mt:-mt,Et=oe?me.t-Et:-Et,C.attr("transform",t(mt,Et)),!j&&(V||k(te).getAlpha()&&!k.equals(ue.paper_bgcolor,te))){var Lt=Dt.selectAll("text"),zt=Lt[0].length,Wt=C.select("."+_.cbbg).node(),rn=r.bBox(Wt),Ut=r.getTranslate(C);Lt.each(function(Tn,Mn){var zn=zt-1;if(Mn===0||Mn===zn){var In,Pn=r.bBox(this),Hn=r.getTranslate(this);if(Mn===zn){var Fn=Pn.right+Hn.x;(In=rn.right+Ut.x+Ve-V-2+$-Fn)>0&&(In=0)}else if(Mn===0){var tr=Pn.left+Hn.x;(In=rn.left+Ut.x+Ve+V+2-tr)<0&&(In=0)}In&&(zt<3?this.setAttribute("transform","translate("+In+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Vt={},en=m[J],Ln=y[J],An=m[K],hn=y[K],Xt=ct-ke;j?(N==="pixels"?(Vt.y=re,Vt.t=Ee*An,Vt.b=Ee*hn):(Vt.t=Vt.b=0,Vt.yt=re+D*An,Vt.yb=re-D*hn),F==="pixels"?(Vt.x=$,Vt.l=ct*en,Vt.r=ct*Ln):(Vt.l=Xt*en,Vt.r=Xt*Ln,Vt.xl=$-W*en,Vt.xr=$+W*Ln)):(N==="pixels"?(Vt.x=$,Vt.l=Ee*en,Vt.r=Ee*Ln):(Vt.l=Vt.r=0,Vt.xl=$+D*en,Vt.xr=$-D*Ln),F==="pixels"?(Vt.y=1-re,Vt.t=ct*An,Vt.b=ct*hn):(Vt.t=Xt*An,Vt.b=Xt*hn,Vt.yt=re-W*An,Vt.yb=re+W*hn));var ln=O.y<.5?"b":"t",nn=O.x<.5?"l":"r";R._fullLayout._reservedMargin[O._id]={};var cn={r:ue.width-ut-mt,l:ut+Vt.r,b:ue.height-Mt-Et,t:Mt+Vt.b};ie&&oe?o.autoMargin(R,O._id,Vt):ie?R._fullLayout._reservedMargin[O._id][ln]=cn[ln]:oe||j?R._fullLayout._reservedMargin[O._id][nn]=cn[nn]:R._fullLayout._reservedMargin[O._id][ln]=cn[ln]}],R)}(E,w,f);P&&P.then&&(f._promises||[]).push(P),f._context.edits.colorbarPosition&&function(C,O,R){var j,D,N,W=O.orientation==="v",F=R._fullLayout._size;h.init({element:C.node(),gd:R,prepFn:function(){j=C.attr("transform"),n(C)},moveFn:function(U,V){C.attr("transform",j+t(U,V)),D=h.align((W?O._uFrac:O._vFrac)+U/F.w,W?O._thickFrac:O._lenFrac,0,1,O.xanchor),N=h.align((W?O._vFrac:1-O._uFrac)-V/F.h,W?O._lenFrac:O._thickFrac,0,1,O.yanchor);var te=h.getCursor(D,N,O.xanchor,O.yanchor);n(C,te)},doneFn:function(){if(n(C),D!==void 0&&N!==void 0){var U={};U[O._propPrefix+"x"]=D,U[O._propPrefix+"y"]=N,O._traceIndex!==void 0?T.call("_guiRestyle",R,U,O._traceIndex):T.call("_guiRelayout",R,U)}}})}(E,w,f)}),S.exit().each(function(w){o.autoMargin(f,w._id)}).remove(),S.order()}}},90553:function(ee,z,e){"use strict";var M=e(3400);ee.exports=function(k){return M.isPlainObject(k.colorbar)}},55080:function(ee,z,e){"use strict";ee.exports={moduleType:"component",name:"colorbar",attributes:e(42996),supplyDefaults:e(64013),draw:e(37848).draw,hasColorbar:e(90553)}},49084:function(ee,z,e){"use strict";var M=e(42996),k=e(53756).counter,o=e(95376),T=e(88304).scales;function b(h){return"`"+h+"`"}o(T),ee.exports=function(h,s){h=h||"";var t,i=(s=s||{}).cLetter||"c",n=("onlyIfNumerical"in s?s.onlyIfNumerical:Boolean(h),"noScale"in s?s.noScale:h==="marker.line"),r="showScaleDflt"in s?s.showScaleDflt:i==="z",a=typeof s.colorscaleDflt=="string"?T[s.colorscaleDflt]:null,l=s.editTypeOverride||"",u=h?h+".":"";"colorAttr"in s?(t=s.colorAttr,s.colorAttr):b(u+(t={z:"z",c:"color"}[i]));var d=i+"auto",c=i+"min",x=i+"max",g=i+"mid",p=(b(u+d),b(u+c),b(u+x),{});p[c]=p[x]=void 0;var v={};v[d]=!1;var m={};return t==="color"&&(m.color={valType:"color",arrayOk:!0,editType:l||"style"},s.anim&&(m.color.anim=!0)),m[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:p},m[c]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:v},m[x]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:v},m[g]={valType:"number",dflt:null,editType:"calc",impliedEdits:p},m.colorscale={valType:"colorscale",editType:"calc",dflt:a,impliedEdits:{autocolorscale:!1}},m.autocolorscale={valType:"boolean",dflt:s.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},m.reversescale={valType:"boolean",dflt:!1,editType:"plot"},n||(m.showscale={valType:"boolean",dflt:r,editType:"calc"},m.colorbar=M),s.noColorAxis||(m.coloraxis={valType:"subplotid",regex:k("coloraxis"),dflt:null,editType:"calc"}),m}},47128:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=e(94288).extractOpts;ee.exports=function(T,b,h){var s,t=T._fullLayout,i=h.vals,n=h.containerStr,r=n?k.nestedProperty(b,n).get():b,a=o(r),l=a.auto!==!1,u=a.min,d=a.max,c=a.mid,x=function(){return k.aggNums(Math.min,null,i)},g=function(){return k.aggNums(Math.max,null,i)};u===void 0?u=x():l&&(u=r._colorAx&&M(u)?Math.min(u,x()):x()),d===void 0?d=g():l&&(d=r._colorAx&&M(d)?Math.max(d,g()):g()),l&&c!==void 0&&(d-c>c-u?u=c-(d-c):d-c<c-u&&(d=c+(c-u))),u===d&&(u-=.5,d+=.5),a._sync("min",u),a._sync("max",d),a.autocolorscale&&(s=u*d<0?t.colorscale.diverging:u>=0?t.colorscale.sequential:t.colorscale.sequentialminus,a._sync("colorscale",s))}},95504:function(ee,z,e){"use strict";var M=e(3400),k=e(94288).hasColorscale,o=e(94288).extractOpts;ee.exports=function(T,b){function h(l,u){var d=l["_"+u];d!==void 0&&(l[u]=d)}function s(l,u){var d=u.container?M.nestedProperty(l,u.container).get():l;if(d)if(d.coloraxis)d._colorAx=b[d.coloraxis];else{var c=o(d),x=c.auto;(x||c.min===void 0)&&h(d,u.min),(x||c.max===void 0)&&h(d,u.max),c.autocolorscale&&h(d,"colorscale")}}for(var t=0;t<T.length;t++){var i=T[t],n=i._module.colorbar;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)s(i,n[r]);else s(i,n);k(i,"marker.line")&&s(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var a in b._colorAxes)s(b[a],{min:"cmin",max:"cmax"})}},27260:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=e(90553),T=e(64013),b=e(88304).isValid,h=e(24040).traceIs;function s(t,i){var n=i.slice(0,i.length-1);return i?k.nestedProperty(t,n).get()||{}:t}ee.exports=function t(i,n,r,a,l){var u=l.prefix,d=l.cLetter,c="_module"in n,x=s(i,u),g=s(n,u),p=s(n._template||{},u)||{},v=function(){return delete i.coloraxis,delete n.coloraxis,t(i,n,r,a,l)};if(c){var m=r._colorAxes||{},y=a(u+"coloraxis");if(y){var _=h(n,"contour")&&k.nestedProperty(n,"contours.coloring").get()||"heatmap",f=m[y];return void(f?(f[2].push(v),f[0]!==_&&(f[0]=!1,k.warn(["Ignoring coloraxis:",y,"setting","as it is linked to incompatible colorscales."].join(" ")))):m[y]=[_,n,[v]])}}var S=x[d+"min"],w=x[d+"max"],E=M(S)&&M(w)&&S<w;a(u+d+"auto",!E)?a(u+d+"mid"):(a(u+d+"min"),a(u+d+"max"));var P,C,O=x.colorscale,R=p.colorscale;O!==void 0&&(P=!b(O)),R!==void 0&&(P=!b(R)),a(u+"autocolorscale",P),a(u+"colorscale"),a(u+"reversescale"),u!=="marker.line."&&(u&&c&&(C=o(x)),a(u+"showscale",C)&&(u&&p&&(g._template=p),T(x,g,r)))}},94288:function(ee,z,e){"use strict";var M=e(33428),k=e(49760),o=e(38248),T=e(3400),b=e(76308),h=e(88304).isValid,s=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function i(u){var d,c,x,g=u._colorAx,p=g||u,v={};for(c=0;c<s.length;c++)v[x=s[c]]=p[x];if(g)for(d="c",c=0;c<t.length;c++)v[x=t[c]]=p["c"+x];else{var m;for(c=0;c<t.length;c++)((m="c"+(x=t[c]))in p||(m="z"+x)in p)&&(v[x]=p[m]);d=m.charAt(0)}return v._sync=function(y,_){var f=t.indexOf(y)!==-1?d+y:y;p[f]=p["_"+f]=_},v}function n(u){for(var d=i(u),c=d.min,x=d.max,g=d.reversescale?r(d.colorscale):d.colorscale,p=g.length,v=new Array(p),m=new Array(p),y=0;y<p;y++){var _=g[y];v[y]=c+_[0]*(x-c),m[y]=_[1]}return{domain:v,range:m}}function r(u){for(var d=u.length,c=new Array(d),x=d-1,g=0;x>=0;x--,g++){var p=u[x];c[g]=[1-p[0],p[1]]}return c}function a(u,d){d=d||{};for(var c=u.domain,x=u.range,g=x.length,p=new Array(g),v=0;v<g;v++){var m=k(x[v]).toRgb();p[v]=[m.r,m.g,m.b,m.a]}var y,_=M.scale.linear().domain(c).range(p).clamp(!0),f=d.noNumericCheck,S=d.returnArray;return(y=f&&S?_:f?function(w){return l(_(w))}:S?function(w){return o(w)?_(w):k(w).isValid()?w:b.defaultLine}:function(w){return o(w)?l(_(w)):k(w).isValid()?w:b.defaultLine}).domain=_.domain,y.range=function(){return x},y}function l(u){var d={r:u[0],g:u[1],b:u[2],a:u[3]};return k(d).toRgbString()}ee.exports={hasColorscale:function(u,d,c){var x=d?T.nestedProperty(u,d).get()||{}:u,g=x[c||"color"];g&&g._inputArray&&(g=g._inputArray);var p=!1;if(T.isArrayOrTypedArray(g)){for(var v=0;v<g.length;v++)if(o(g[v])){p=!0;break}}return T.isPlainObject(x)&&(p||x.showscale===!0||o(x.cmin)&&o(x.cmax)||h(x.colorscale)||T.isPlainObject(x.colorbar))},extractOpts:i,extractScale:n,flipScale:r,makeColorScaleFunc:a,makeColorScaleFuncFromTrace:function(u,d){return a(n(u),d)}}},8932:function(ee,z,e){"use strict";var M=e(88304),k=e(94288);ee.exports={moduleType:"component",name:"colorscale",attributes:e(49084),layoutAttributes:e(92332),supplyLayoutDefaults:e(51608),handleDefaults:e(27260),crossTraceDefaults:e(95504),calc:e(47128),scales:M.scales,defaultScale:M.defaultScale,getScale:M.get,isValidScale:M.isValid,hasColorscale:k.hasColorscale,extractOpts:k.extractOpts,extractScale:k.extractScale,flipScale:k.flipScale,makeColorScaleFunc:k.makeColorScaleFunc,makeColorScaleFuncFromTrace:k.makeColorScaleFuncFromTrace}},92332:function(ee,z,e){"use strict";var M=e(92880).extendFlat,k=e(49084),o=e(88304).scales;ee.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:o.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:o.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:o.RdBu,editType:"calc"}},coloraxis:M({_isSubplotObj:!0,editType:"calc"},k("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(ee,z,e){"use strict";var M=e(3400),k=e(31780),o=e(92332),T=e(27260);ee.exports=function(b,h){function s(d,c){return M.coerce(b,h,o,d,c)}s("colorscale.sequential"),s("colorscale.sequentialminus"),s("colorscale.diverging");var t,i,n=h._colorAxes;function r(d,c){return M.coerce(t,i,o.coloraxis,d,c)}for(var a in n){var l=n[a];if(l[0])t=b[a]||{},(i=k.newContainer(h,a,"coloraxis"))._name=a,T(t,i,h,r,{prefix:"",cLetter:"c"});else{for(var u=0;u<l[2].length;u++)l[2][u]();delete h._colorAxes[a]}}}},88304:function(ee,z,e){"use strict";var M=e(49760),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},o=k.RdBu;function T(b){var h=0;if(!Array.isArray(b)||b.length<2||!b[0]||!b[b.length-1]||+b[0][0]!=0||+b[b.length-1][0]!=1)return!1;for(var s=0;s<b.length;s++){var t=b[s];if(t.length!==2||+t[0]<h||!M(t[1]).isValid())return!1;h=+t[0]}return!0}ee.exports={scales:k,defaultScale:o,get:function(b,h){if(h||(h=o),!b)return h;function s(){try{b=k[b]||JSON.parse(b)}catch(t){b=h}}return typeof b=="string"&&(s(),typeof b=="string"&&s()),T(b)?b:h},isValid:function(b){return k[b]!==void 0||T(b)}}},78316:function(ee){"use strict";ee.exports=function(z,e,M,k,o){var T=(z-M)/(k-M),b=T+e/(k-M),h=(T+b)/2;return o==="left"||o==="bottom"?T:o==="center"||o==="middle"?h:o==="right"||o==="top"?b:T<.6666666666666666-h?T:b>1.3333333333333333-h?b:h}},67416:function(ee,z,e){"use strict";var M=e(3400),k=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ee.exports=function(o,T,b,h){return o=b==="left"?0:b==="center"?1:b==="right"?2:M.constrain(Math.floor(3*o),0,2),T=h==="bottom"?0:h==="middle"?1:h==="top"?2:M.constrain(Math.floor(3*T),0,2),k[T][o]}},72760:function(ee,z){"use strict";z.selectMode=function(e){return e==="lasso"||e==="select"},z.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"},z.openMode=function(e){return e==="drawline"||e==="drawopenpath"},z.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"},z.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"},z.selectingOrDrawing=function(e){return z.freeMode(e)||z.rectMode(e)}},86476:function(ee,z,e){"use strict";var M=e(29128),k=e(52264),o=e(89184),T=e(3400).removeElement,b=e(33816),h=ee.exports={};h.align=e(78316),h.getCursor=e(67416);var s=e(2616);function t(){var n=document.createElement("div");n.className="dragcover";var r=n.style;return r.position="fixed",r.left=0,r.right=0,r.top=0,r.bottom=0,r.zIndex=999999999,r.background="none",document.body.appendChild(n),n}function i(n){return M(n.changedTouches?n.changedTouches[0]:n,document.body)}h.unhover=s.wrapped,h.unhoverRaw=s.raw,h.init=function(n){var r,a,l,u,d,c,x,g,p=n.gd,v=1,m=p._context.doubleClickDelay,y=n.element;p._mouseDownTime||(p._mouseDownTime=0),y.style.pointerEvents="all",y.onmousedown=f,o?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=f,y.addEventListener("touchstart",f,{passive:!1})):y.ontouchstart=f;var _=n.clampFn||function(E,P,C){return Math.abs(E)<C&&(E=0),Math.abs(P)<C&&(P=0),[E,P]};function f(E){p._dragged=!1,p._dragging=!0;var P=i(E);r=P[0],a=P[1],x=E.target,c=E,g=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=r,E.clientY=a),(l=new Date().getTime())-p._mouseDownTime<m?v+=1:(v=1,p._mouseDownTime=l),n.prepFn&&n.prepFn(E,r,a),k&&!g?(d=t()).style.cursor=window.getComputedStyle(y).cursor:k||(d=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor),document.addEventListener("mouseup",w),document.addEventListener("touchend",w),n.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var P=i(E),C=n.minDrag||b.MINDRAG,O=_(P[0]-r,P[1]-a,C),R=O[0],j=O[1];(R||j)&&(p._dragged=!0,h.unhover(p,E)),p._dragged&&n.moveFn&&!g&&(p._dragdata={element:y,dx:R,dy:j},n.moveFn(R,j))}function w(E){if(delete p._dragdata,n.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",w),document.removeEventListener("touchend",w),k?T(d):u&&(d.documentElement.style.cursor=u,u=null),p._dragging){if(p._dragging=!1,new Date().getTime()-p._mouseDownTime>m&&(v=Math.max(v-1,1)),p._dragged)n.doneFn&&n.doneFn();else if(n.clickFn&&n.clickFn(v,c),!g){var P;try{P=new MouseEvent("click",E)}catch(O){var C=i(E);(P=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,C[0],C[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}x.dispatchEvent(P)}p._dragging=!1,p._dragged=!1}else p._dragged=!1}},h.coverSlip=t},2616:function(ee,z,e){"use strict";var M=e(95924),k=e(91200),o=e(52200).getGraphDiv,T=e(92456),b=ee.exports={};b.wrapped=function(h,s,t){(h=o(h))._fullLayout&&k.clear(h._fullLayout._uid+T.HOVERID),b.raw(h,s,t)},b.raw=function(h,s){var t=h._fullLayout,i=h._hoverdata;s||(s={}),s.target&&!h._dragged&&M.triggerHandler(h,"plotly_beforehover",s)===!1||(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),h._hoverdata=void 0,s.target&&i&&h.emit("plotly_unhover",{event:s,points:i}))}},98192:function(ee,z){"use strict";z.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},z.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=k.numberFormat,T=e(38248),b=e(49760),h=e(24040),s=e(76308),t=e(8932),i=k.strTranslate,n=e(72736),r=e(9616),a=e(84284).LINE_SPACING,l=e(13448).DESELECTDIM,u=e(43028),d=e(7152),c=e(10624).appendArrayPointValue,x=ee.exports={};function g(pe,_e,Te,le){var ae=_e.fillpattern,he=_e.fillgradient,Se=ae&&x.getPatternAttr(ae.shape,0,"");if(Se){var ke=x.getPatternAttr(ae.bgcolor,0,null),Me=x.getPatternAttr(ae.fgcolor,0,null),Ee=ae.fgopacity,De=x.getPatternAttr(ae.size,0,8),fe=x.getPatternAttr(ae.solidity,0,.3),xe=_e.uid;x.pattern(pe,"point",Te,xe,Se,De,fe,void 0,ae.fillmode,ke,Me,Ee)}else if(he&&he.type!=="none"){var we,Oe,ze=he.type,Pe="scatterfill-"+_e.uid;le&&(Pe="legendfill-"+_e.uid),le||he.start===void 0&&he.stop===void 0?(ze==="horizontal"&&(ze+="reversed"),pe.call(x.gradient,Te,Pe,ze,he.colorscale,"fill")):(ze==="horizontal"?(we={x:he.start,y:0},Oe={x:he.stop,y:0}):ze==="vertical"&&(we={x:0,y:he.start},Oe={x:0,y:he.stop}),we.x=_e._xA.c2p(we.x===void 0?_e._extremes.x.min[0].val:we.x,!0),we.y=_e._yA.c2p(we.y===void 0?_e._extremes.y.min[0].val:we.y,!0),Oe.x=_e._xA.c2p(Oe.x===void 0?_e._extremes.x.max[0].val:Oe.x,!0),Oe.y=_e._yA.c2p(Oe.y===void 0?_e._extremes.y.max[0].val:Oe.y,!0),pe.call(f,Te,Pe,"linear",he.colorscale,"fill",we,Oe,!0,!1))}else _e.fillcolor&&pe.call(s.fill,_e.fillcolor)}x.font=function(pe,_e,Te,le){k.isPlainObject(_e)&&(le=_e.color,Te=_e.size,_e=_e.family),_e&&pe.style("font-family",_e),Te+1&&pe.style("font-size",Te+"px"),le&&pe.call(s.fill,le)},x.setPosition=function(pe,_e,Te){pe.attr("x",_e).attr("y",Te)},x.setSize=function(pe,_e,Te){pe.attr("width",_e).attr("height",Te)},x.setRect=function(pe,_e,Te,le,ae){pe.call(x.setPosition,_e,Te).call(x.setSize,le,ae)},x.translatePoint=function(pe,_e,Te,le){var ae=Te.c2p(pe.x),he=le.c2p(pe.y);return!!(T(ae)&&T(he)&&_e.node())&&(_e.node().nodeName==="text"?_e.attr("x",ae).attr("y",he):_e.attr("transform",i(ae,he)),!0)},x.translatePoints=function(pe,_e,Te){pe.each(function(le){var ae=M.select(this);x.translatePoint(le,ae,_e,Te)})},x.hideOutsideRangePoint=function(pe,_e,Te,le,ae,he){_e.attr("display",Te.isPtWithinRange(pe,ae)&&le.isPtWithinRange(pe,he)?null:"none")},x.hideOutsideRangePoints=function(pe,_e){if(_e._hasClipOnAxisFalse){var Te=_e.xaxis,le=_e.yaxis;pe.each(function(ae){var he=ae[0].trace,Se=he.xcalendar,ke=he.ycalendar,Me=h.traceIs(he,"bar-like")?".bartext":".point,.textpoint";pe.selectAll(Me).each(function(Ee){x.hideOutsideRangePoint(Ee,M.select(this),Te,le,Se,ke)})})}},x.crispRound=function(pe,_e,Te){return _e&&T(_e)?pe._context.staticPlot?_e:_e<1?1:Math.round(_e):Te||0},x.singleLineStyle=function(pe,_e,Te,le,ae){_e.style("fill","none");var he=(((pe||[])[0]||{}).trace||{}).line||{},Se=Te||he.width||0,ke=ae||he.dash||"";s.stroke(_e,le||he.color),x.dashLine(_e,ke,Se)},x.lineGroupStyle=function(pe,_e,Te,le){pe.style("fill","none").each(function(ae){var he=(((ae||[])[0]||{}).trace||{}).line||{},Se=_e||he.width||0,ke=le||he.dash||"";M.select(this).call(s.stroke,Te||he.color).call(x.dashLine,ke,Se)})},x.dashLine=function(pe,_e,Te){Te=+Te||0,_e=x.dashStyle(_e,Te),pe.style({"stroke-dasharray":_e,"stroke-width":Te+"px"})},x.dashStyle=function(pe,_e){_e=+_e||1;var Te=Math.max(_e,3);return pe==="solid"?pe="":pe==="dot"?pe=Te+"px,"+Te+"px":pe==="dash"?pe=3*Te+"px,"+3*Te+"px":pe==="longdash"?pe=5*Te+"px,"+5*Te+"px":pe==="dashdot"?pe=3*Te+"px,"+Te+"px,"+Te+"px,"+Te+"px":pe==="longdashdot"&&(pe=5*Te+"px,"+2*Te+"px,"+Te+"px,"+2*Te+"px"),pe},x.singleFillStyle=function(pe,_e){var Te=M.select(pe.node());g(pe,((Te.data()[0]||[])[0]||{}).trace||{},_e,!1)},x.fillGroupStyle=function(pe,_e,Te){pe.style("stroke-width",0).each(function(le){var ae=M.select(this);le[0].trace&&g(ae,le[0].trace,_e,Te)})};var p=e(71984);x.symbolNames=[],x.symbolFuncs=[],x.symbolBackOffs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolNoFill={},x.symbolList=[],Object.keys(p).forEach(function(pe){var _e=p[pe],Te=_e.n;x.symbolList.push(Te,String(Te),pe,Te+100,String(Te+100),pe+"-open"),x.symbolNames[Te]=pe,x.symbolFuncs[Te]=_e.f,x.symbolBackOffs[Te]=_e.backoff||0,_e.needLine&&(x.symbolNeedLines[Te]=!0),_e.noDot?x.symbolNoDot[Te]=!0:x.symbolList.push(Te+200,String(Te+200),pe+"-dot",Te+300,String(Te+300),pe+"-open-dot"),_e.noFill&&(x.symbolNoFill[Te]=!0)});var v=x.symbolNames.length;function m(pe,_e,Te,le){var ae=pe%100;return x.symbolFuncs[ae](_e,Te,le)+(pe>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}x.symbolNumber=function(pe){if(T(pe))pe=+pe;else if(typeof pe=="string"){var _e=0;pe.indexOf("-open")>0&&(_e=100,pe=pe.replace("-open","")),pe.indexOf("-dot")>0&&(_e+=200,pe=pe.replace("-dot","")),(pe=x.symbolNames.indexOf(pe))>=0&&(pe+=_e)}return pe%100>=v||pe>=400?0:Math.floor(Math.max(pe,0))};var y=o("~f"),_={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};function f(pe,_e,Te,le,ae,he,Se,ke,Me,Ee){var De,fe=ae.length;le==="linear"?De={node:"linearGradient",attrs:{x1:Se.x,y1:Se.y,x2:ke.x,y2:ke.y,gradientUnits:Me?"userSpaceOnUse":"objectBoundingBox"},reversed:Ee}:le==="radial"&&(De={node:"radialGradient",reversed:Ee});for(var xe=new Array(fe),we=0;we<fe;we++)De.reversed?xe[fe-1-we]=[y(100*(1-ae[we][0])),ae[we][1]]:xe[we]=[y(100*ae[we][0]),ae[we][1]];var Oe=_e._fullLayout,ze="g"+Oe._uid+"-"+Te,Pe=Oe._defs.select(".gradients").selectAll("#"+ze).data([le+xe.join(";")],k.identity);Pe.exit().remove(),Pe.enter().append(De.node).each(function(){var Ue=M.select(this);De.attrs&&Ue.attr(De.attrs),Ue.attr("id",ze);var Ve=Ue.selectAll("stop").data(xe);Ve.exit().remove(),Ve.enter().append("stop"),Ve.each(function(Ze){var it=b(Ze[1]);M.select(this).attr({offset:Ze[0]+"%","stop-color":s.tinyRGB(it),"stop-opacity":it.getAlpha()})})}),pe.style(he,te(ze,_e)).style(he+"-opacity",null),pe.classed("gradient_filled",!0)}x.gradient=function(pe,_e,Te,le,ae,he){var Se=_[le];return f(pe,_e,Te,Se.type,ae,he,Se.start,Se.stop,!1,Se.reversed)},x.pattern=function(pe,_e,Te,le,ae,he,Se,ke,Me,Ee,De,fe){var xe=_e==="legend";ke&&(Me==="overlay"?(Ee=ke,De=s.contrast(Ee)):(Ee=void 0,De=ke));var we,Oe,ze,Pe,Ue,Ve,Ze,it,tt,dt=Te._fullLayout,yt="p"+dt._uid+"-"+le,vt={},et=b(De),Qe=s.tinyRGB(et),wt=fe*et.getAlpha();switch(ae){case"/":we=he*Math.sqrt(2),Oe=he*Math.sqrt(2),Ve="path",vt={d:ze="M-"+we/4+","+Oe/4+"l"+we/2+",-"+Oe/2+"M0,"+Oe+"L"+we+",0M"+we/4*3+","+Oe/4*5+"l"+we/2+",-"+Oe/2,opacity:wt,stroke:Qe,"stroke-width":(Pe=Se*he)+"px"};break;case"\\":we=he*Math.sqrt(2),Oe=he*Math.sqrt(2),Ve="path",vt={d:ze="M"+we/4*3+",-"+Oe/4+"l"+we/2+","+Oe/2+"M0,0L"+we+","+Oe+"M-"+we/4+","+Oe/4*3+"l"+we/2+","+Oe/2,opacity:wt,stroke:Qe,"stroke-width":(Pe=Se*he)+"px"};break;case"x":we=he*Math.sqrt(2),Oe=he*Math.sqrt(2),ze="M-"+we/4+","+Oe/4+"l"+we/2+",-"+Oe/2+"M0,"+Oe+"L"+we+",0M"+we/4*3+","+Oe/4*5+"l"+we/2+",-"+Oe/2+"M"+we/4*3+",-"+Oe/4+"l"+we/2+","+Oe/2+"M0,0L"+we+","+Oe+"M-"+we/4+","+Oe/4*3+"l"+we/2+","+Oe/2,Pe=he-he*Math.sqrt(1-Se),Ve="path",vt={d:ze,opacity:wt,stroke:Qe,"stroke-width":Pe+"px"};break;case"|":Ve="path",Ve="path",vt={d:ze="M"+(we=he)/2+",0L"+we/2+","+(Oe=he),opacity:wt,stroke:Qe,"stroke-width":(Pe=Se*he)+"px"};break;case"-":Ve="path",Ve="path",vt={d:ze="M0,"+(Oe=he)/2+"L"+(we=he)+","+Oe/2,opacity:wt,stroke:Qe,"stroke-width":(Pe=Se*he)+"px"};break;case"+":Ve="path",ze="M"+(we=he)/2+",0L"+we/2+","+(Oe=he)+"M0,"+Oe/2+"L"+we+","+Oe/2,Pe=he-he*Math.sqrt(1-Se),Ve="path",vt={d:ze,opacity:wt,stroke:Qe,"stroke-width":Pe+"px"};break;case".":we=he,Oe=he,Se<Math.PI/4?Ue=Math.sqrt(Se*he*he/Math.PI):(Ze=Se,it=Math.PI/4,Ue=(tt=he/2)+(he/Math.sqrt(2)-tt)*(Ze-it)/(1-it)),Ve="circle",vt={cx:we/2,cy:Oe/2,r:Ue,opacity:wt,fill:Qe}}var It=[ae||"noSh",Ee||"noBg",De||"noFg",he,Se].join(";"),Dt=dt._defs.select(".patterns").selectAll("#"+yt).data([It],k.identity);Dt.exit().remove(),Dt.enter().append("pattern").each(function(){var Ct=M.select(this);if(Ct.attr({id:yt,width:we+"px",height:Oe+"px",patternUnits:"userSpaceOnUse",patternTransform:xe?"scale(0.8)":""}),Ee){var He=b(Ee),We=s.tinyRGB(He),Be=He.getAlpha(),Ge=Ct.selectAll("rect").data([0]);Ge.exit().remove(),Ge.enter().append("rect").attr({width:we+"px",height:Oe+"px",fill:We,"fill-opacity":Be})}var at=Ct.selectAll(Ve).data([0]);at.exit().remove(),at.enter().append(Ve).attr(vt)}),pe.style("fill",te(yt,Te)).style("fill-opacity",null),pe.classed("pattern_filled",!0)},x.initGradients=function(pe){var _e=pe._fullLayout;k.ensureSingle(_e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),M.select(pe).selectAll(".gradient_filled").classed("gradient_filled",!1)},x.initPatterns=function(pe){var _e=pe._fullLayout;k.ensureSingle(_e._defs,"g","patterns").selectAll("pattern").remove(),M.select(pe).selectAll(".pattern_filled").classed("pattern_filled",!1)},x.getPatternAttr=function(pe,_e,Te){return pe&&k.isArrayOrTypedArray(pe)?_e<pe.length?pe[_e]:Te:pe},x.pointStyle=function(pe,_e,Te,le){if(pe.size()){var ae=x.makePointStyleFns(_e);pe.each(function(he){x.singlePointStyle(he,M.select(this),_e,ae,Te,le)})}},x.singlePointStyle=function(pe,_e,Te,le,ae,he){var Se=Te.marker,ke=Se.line;if(he&&he.i>=0&&pe.i===void 0&&(pe.i=he.i),_e.style("opacity",le.selectedOpacityFn?le.selectedOpacityFn(pe):pe.mo===void 0?Se.opacity:pe.mo),le.ms2mrc){var Me;Me=pe.ms==="various"||Se.size==="various"?3:le.ms2mrc(pe.ms),pe.mrc=Me,le.selectedSizeFn&&(Me=pe.mrc=le.selectedSizeFn(pe));var Ee=x.symbolNumber(pe.mx||Se.symbol)||0;pe.om=Ee%200>=100;var De=ve(pe,Te),fe=X(pe,Te);_e.attr("d",m(Ee,Me,De,fe))}var xe,we,Oe,ze=!1;if(pe.so)Oe=ke.outlierwidth,we=ke.outliercolor,xe=Se.outliercolor;else{var Pe=(ke||{}).width;Oe=(pe.mlw+1||Pe+1||(pe.trace?(pe.trace.marker.line||{}).width:0)+1)-1||0,we="mlc"in pe?pe.mlcc=le.lineScale(pe.mlc):k.isArrayOrTypedArray(ke.color)?s.defaultLine:ke.color,k.isArrayOrTypedArray(Se.color)&&(xe=s.defaultLine,ze=!0),xe="mc"in pe?pe.mcc=le.markerScale(pe.mc):Se.color||Se.colors||"rgba(0,0,0,0)",le.selectedColorFn&&(xe=le.selectedColorFn(pe))}if(pe.om)_e.call(s.stroke,xe).style({"stroke-width":(Oe||1)+"px",fill:"none"});else{_e.style("stroke-width",(pe.isBlank?0:Oe)+"px");var Ue=Se.gradient,Ve=pe.mgt;Ve?ze=!0:Ve=Ue&&Ue.type,k.isArrayOrTypedArray(Ve)&&(Ve=Ve[0],_[Ve]||(Ve=0));var Ze=Se.pattern,it=Ze&&x.getPatternAttr(Ze.shape,pe.i,"");if(Ve&&Ve!=="none"){var tt=pe.mgc;tt?ze=!0:tt=Ue.color;var dt=Te.uid;ze&&(dt+="-"+pe.i),x.gradient(_e,ae,dt,Ve,[[0,tt],[1,xe]],"fill")}else if(it){var yt=!1,vt=Ze.fgcolor;!vt&&he&&he.color&&(vt=he.color,yt=!0);var et=x.getPatternAttr(vt,pe.i,he&&he.color||null),Qe=x.getPatternAttr(Ze.bgcolor,pe.i,null),wt=Ze.fgopacity,It=x.getPatternAttr(Ze.size,pe.i,8),Dt=x.getPatternAttr(Ze.solidity,pe.i,.3);yt=yt||pe.mcc||k.isArrayOrTypedArray(Ze.shape)||k.isArrayOrTypedArray(Ze.bgcolor)||k.isArrayOrTypedArray(Ze.fgcolor)||k.isArrayOrTypedArray(Ze.size)||k.isArrayOrTypedArray(Ze.solidity);var Ct=Te.uid;yt&&(Ct+="-"+pe.i),x.pattern(_e,"point",ae,Ct,it,It,Dt,pe.mcc,Ze.fillmode,Qe,et,wt)}else k.isArrayOrTypedArray(xe)?s.fill(_e,xe[pe.i]):s.fill(_e,xe);Oe&&s.stroke(_e,we)}},x.makePointStyleFns=function(pe){var _e={},Te=pe.marker;return _e.markerScale=x.tryColorscale(Te,""),_e.lineScale=x.tryColorscale(Te,"line"),h.traceIs(pe,"symbols")&&(_e.ms2mrc=u.isBubble(pe)?d(pe):function(){return(Te.size||6)/2}),pe.selectedpoints&&k.extendFlat(_e,x.makeSelectedPointStyleFns(pe)),_e},x.makeSelectedPointStyleFns=function(pe){var _e={},Te=pe.selected||{},le=pe.unselected||{},ae=pe.marker||{},he=Te.marker||{},Se=le.marker||{},ke=ae.opacity,Me=he.opacity,Ee=Se.opacity,De=Me!==void 0,fe=Ee!==void 0;(k.isArrayOrTypedArray(ke)||De||fe)&&(_e.selectedOpacityFn=function(it){var tt=it.mo===void 0?ae.opacity:it.mo;return it.selected?De?Me:tt:fe?Ee:l*tt});var xe=ae.color,we=he.color,Oe=Se.color;(we||Oe)&&(_e.selectedColorFn=function(it){var tt=it.mcc||xe;return it.selected?we||tt:Oe||tt});var ze=ae.size,Pe=he.size,Ue=Se.size,Ve=Pe!==void 0,Ze=Ue!==void 0;return h.traceIs(pe,"symbols")&&(Ve||Ze)&&(_e.selectedSizeFn=function(it){var tt=it.mrc||ze/2;return it.selected?Ve?Pe/2:tt:Ze?Ue/2:tt}),_e},x.makeSelectedTextStyleFns=function(pe){var _e={},Te=pe.selected||{},le=pe.unselected||{},ae=pe.textfont||{},he=Te.textfont||{},Se=le.textfont||{},ke=ae.color,Me=he.color,Ee=Se.color;return _e.selectedTextColorFn=function(De){var fe=De.tc||ke;return De.selected?Me||fe:Ee||(Me?fe:s.addOpacity(fe,l))},_e},x.selectedPointStyle=function(pe,_e){if(pe.size()&&_e.selectedpoints){var Te=x.makeSelectedPointStyleFns(_e),le=_e.marker||{},ae=[];Te.selectedOpacityFn&&ae.push(function(he,Se){he.style("opacity",Te.selectedOpacityFn(Se))}),Te.selectedColorFn&&ae.push(function(he,Se){s.fill(he,Te.selectedColorFn(Se))}),Te.selectedSizeFn&&ae.push(function(he,Se){var ke=Se.mx||le.symbol||0,Me=Te.selectedSizeFn(Se);he.attr("d",m(x.symbolNumber(ke),Me,ve(Se,_e),X(Se,_e))),Se.mrc2=Me}),ae.length&&pe.each(function(he){for(var Se=M.select(this),ke=0;ke<ae.length;ke++)ae[ke](Se,he)})}},x.tryColorscale=function(pe,_e){var Te=_e?k.nestedProperty(pe,_e).get():pe;if(Te){var le=Te.color;if((Te.colorscale||Te._colorAx)&&k.isArrayOrTypedArray(le))return t.makeColorScaleFuncFromTrace(Te)}return k.identity};var S,w,E={start:1,end:-1,middle:0,bottom:1,top:-1};function P(pe,_e,Te,le,ae){var he=M.select(pe.node().parentNode),Se=_e.indexOf("top")!==-1?"top":_e.indexOf("bottom")!==-1?"bottom":"middle",ke=_e.indexOf("left")!==-1?"end":_e.indexOf("right")!==-1?"start":"middle",Me=le?le/.8+1:0,Ee=(n.lineCount(pe)-1)*a+1,De=E[ke]*Me,fe=.75*Te+E[Se]*Me+(E[Se]-1)*Ee*Te/2;pe.attr("text-anchor",ke),ae||he.attr("transform",i(De,fe))}function C(pe,_e){var Te=pe.ts||_e.textfont.size;return T(Te)&&Te>0?Te:0}function O(pe,_e,Te){return Te&&(pe=F(pe)),_e?j(pe[1]):R(pe[0])}function R(pe){var _e=M.round(pe,2);return S=_e,_e}function j(pe){var _e=M.round(pe,2);return w=_e,_e}function D(pe,_e,Te,le){var ae=pe[0]-_e[0],he=pe[1]-_e[1],Se=Te[0]-_e[0],ke=Te[1]-_e[1],Me=Math.pow(ae*ae+he*he,.25),Ee=Math.pow(Se*Se+ke*ke,.25),De=(Ee*Ee*ae-Me*Me*Se)*le,fe=(Ee*Ee*he-Me*Me*ke)*le,xe=3*Ee*(Me+Ee),we=3*Me*(Me+Ee);return[[R(_e[0]+(xe&&De/xe)),j(_e[1]+(xe&&fe/xe))],[R(_e[0]-(we&&De/we)),j(_e[1]-(we&&fe/we))]]}x.textPointStyle=function(pe,_e,Te){if(pe.size()){var le;if(_e.selectedpoints){var ae=x.makeSelectedTextStyleFns(_e);le=ae.selectedTextColorFn}var he=_e.texttemplate,Se=Te._fullLayout;pe.each(function(ke){var Me=M.select(this),Ee=he?k.extractOption(ke,_e,"txt","texttemplate"):k.extractOption(ke,_e,"tx","text");if(Ee||Ee===0){if(he){var De=_e._module.formatLabels,fe=De?De(ke,_e,Se):{},xe={};c(xe,_e,ke.i);var we=_e._meta||{};Ee=k.texttemplateString(Ee,fe,Se._d3locale,xe,ke,we)}var Oe=ke.tp||_e.textposition,ze=C(ke,_e),Pe=le?le(ke):ke.tc||_e.textfont.color;Me.call(x.font,ke.tf||_e.textfont.family,ze,Pe).text(Ee).call(n.convertToTspans,Te).call(P,Oe,ze,ke.mrc)}else Me.remove()})}},x.selectedTextStyle=function(pe,_e){if(pe.size()&&_e.selectedpoints){var Te=x.makeSelectedTextStyleFns(_e);pe.each(function(le){var ae=M.select(this),he=Te.selectedTextColorFn(le),Se=le.tp||_e.textposition,ke=C(le,_e);s.fill(ae,he);var Me=h.traceIs(_e,"bar-like");P(ae,Se,ke,le.mrc2||le.mrc,Me)})}},x.smoothopen=function(pe,_e){if(pe.length<3)return"M"+pe.join("L");var Te,le="M"+pe[0],ae=[];for(Te=1;Te<pe.length-1;Te++)ae.push(D(pe[Te-1],pe[Te],pe[Te+1],_e));for(le+="Q"+ae[0][0]+" "+pe[1],Te=2;Te<pe.length-1;Te++)le+="C"+ae[Te-2][1]+" "+ae[Te-1][0]+" "+pe[Te];return le+"Q"+ae[pe.length-3][1]+" "+pe[pe.length-1]},x.smoothclosed=function(pe,_e){if(pe.length<3)return"M"+pe.join("L")+"Z";var Te,le="M"+pe[0],ae=pe.length-1,he=[D(pe[ae],pe[0],pe[1],_e)];for(Te=1;Te<ae;Te++)he.push(D(pe[Te-1],pe[Te],pe[Te+1],_e));for(he.push(D(pe[ae-1],pe[ae],pe[0],_e)),Te=1;Te<=ae;Te++)le+="C"+he[Te-1][1]+" "+he[Te][0]+" "+pe[Te];return le+"C"+he[ae][1]+" "+he[0][0]+" "+pe[0]+"Z"};var N={hv:function(pe,_e,Te){return"H"+R(_e[0])+"V"+O(_e,1,Te)},vh:function(pe,_e,Te){return"V"+j(_e[1])+"H"+O(_e,0,Te)},hvh:function(pe,_e,Te){return"H"+R((pe[0]+_e[0])/2)+"V"+j(_e[1])+"H"+O(_e,0,Te)},vhv:function(pe,_e,Te){return"V"+j((pe[1]+_e[1])/2)+"H"+R(_e[0])+"V"+O(_e,1,Te)}},W=function(pe,_e,Te){return"L"+O(_e,0,Te)+","+O(_e,1,Te)};function F(pe,_e){var Te=pe.backoff,le=pe.trace,ae=pe.d,he=pe.i;if(Te&&le&&le.marker&&le.marker.angle%360==0&&le.line&&le.line.shape!=="spline"){var Se=k.isArrayOrTypedArray(Te),ke=pe,Me=_e?_e[0]:S||0,Ee=_e?_e[1]:w||0,De=ke[0],fe=ke[1],xe=De-Me,we=fe-Ee,Oe=Math.atan2(we,xe),ze=Se?Te[he]:Te;if(ze==="auto"){var Pe=ke.i;le.type==="scatter"&&Pe--;var Ue=ke.marker,Ve=Ue.symbol;k.isArrayOrTypedArray(Ve)&&(Ve=Ve[Pe]);var Ze=Ue.size;k.isArrayOrTypedArray(Ze)&&(Ze=Ze[Pe]),ze=Ue?x.symbolBackOffs[x.symbolNumber(Ve)]*Ze:0,ze+=x.getMarkerStandoff(ae[Pe],le)||0}var it=De-ze*Math.cos(Oe),tt=fe-ze*Math.sin(Oe);(it<=De&&it>=Me||it>=De&&it<=Me)&&(tt<=fe&&tt>=Ee||tt>=fe&&tt<=Ee)&&(pe=[it,tt])}return pe}x.steps=function(pe){var _e=N[pe]||W;return function(Te){for(var le="M"+R(Te[0][0])+","+j(Te[0][1]),ae=Te.length,he=1;he<ae;he++)le+=_e(Te[he-1],Te[he],he===ae-1);return le}},x.applyBackoff=F,x.makeTester=function(){var pe=k.ensureSingleById(M.select("body"),"svg","js-plotly-tester",function(Te){Te.attr(r.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),_e=k.ensureSingle(pe,"path","js-reference-point",function(Te){Te.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});x.tester=pe,x.testref=_e},x.savedBBoxes={};var U=0;function V(pe){var _e=pe.getAttribute("data-unformatted");if(_e!==null)return _e+pe.getAttribute("data-math")+pe.getAttribute("text-anchor")+pe.getAttribute("style")}function te(pe,_e){if(!pe)return null;var Te=_e._context,le=Te._exportedPlot?"":Te._baseUrl||"";return le?"url('"+le+"#"+pe+"')":"url(#"+pe+")"}x.bBox=function(pe,_e,Te){var le,ae,he;if(Te||(Te=V(pe)),Te){if(le=x.savedBBoxes[Te])return k.extendFlat({},le)}else if(pe.childNodes.length===1){var Se=pe.childNodes[0];if(Te=V(Se)){var ke=+Se.getAttribute("x")||0,Me=+Se.getAttribute("y")||0,Ee=Se.getAttribute("transform");if(!Ee){var De=x.bBox(Se,!1,Te);return ke&&(De.left+=ke,De.right+=ke),Me&&(De.top+=Me,De.bottom+=Me),De}if(Te+="~"+ke+"~"+Me+"~"+Ee,le=x.savedBBoxes[Te])return k.extendFlat({},le)}}_e?ae=pe:(he=x.tester.node(),ae=pe.cloneNode(!0),he.appendChild(ae)),M.select(ae).attr("transform",null).call(n.positionText,0,0);var fe=ae.getBoundingClientRect(),xe=x.testref.node().getBoundingClientRect();_e||he.removeChild(ae);var we={height:fe.height,width:fe.width,left:fe.left-xe.left,top:fe.top-xe.top,right:fe.right-xe.left,bottom:fe.bottom-xe.top};return U>=1e4&&(x.savedBBoxes={},U=0),Te&&(x.savedBBoxes[Te]=we),U++,k.extendFlat({},we)},x.setClipUrl=function(pe,_e,Te){pe.attr("clip-path",te(_e,Te))},x.getTranslate=function(pe){var _e=(pe[pe.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(Te,le,ae){return[le,ae].join(" ")}).split(" ");return{x:+_e[0]||0,y:+_e[1]||0}},x.setTranslate=function(pe,_e,Te){var le=pe.attr?"attr":"getAttribute",ae=pe.attr?"attr":"setAttribute",he=pe[le]("transform")||"";return _e=_e||0,Te=Te||0,he=he.replace(/(\btranslate\(.*?\);?)/,"").trim(),he=(he+=i(_e,Te)).trim(),pe[ae]("transform",he),he},x.getScale=function(pe){var _e=(pe[pe.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(Te,le,ae){return[le,ae].join(" ")}).split(" ");return{x:+_e[0]||1,y:+_e[1]||1}},x.setScale=function(pe,_e,Te){var le=pe.attr?"attr":"getAttribute",ae=pe.attr?"attr":"setAttribute",he=pe[le]("transform")||"";return _e=_e||1,Te=Te||1,he=he.replace(/(\bscale\(.*?\);?)/,"").trim(),he=(he+="scale("+_e+","+Te+")").trim(),pe[ae]("transform",he),he};var J=/\s*sc.*/;x.setPointGroupScale=function(pe,_e,Te){if(_e=_e||1,Te=Te||1,pe){var le=_e===1&&Te===1?"":"scale("+_e+","+Te+")";pe.each(function(){var ae=(this.getAttribute("transform")||"").replace(J,"");ae=(ae+=le).trim(),this.setAttribute("transform",ae)})}};var K=/translate\([^)]*\)\s*$/;function X(pe,_e){var Te;return pe&&(Te=pe.mf),Te===void 0&&(Te=_e.marker&&_e.marker.standoff||0),_e._geo||_e._xA?Te:-Te}x.setTextPointsScale=function(pe,_e,Te){pe&&pe.each(function(){var le,ae=M.select(this),he=ae.select("text");if(he.node()){var Se=parseFloat(he.attr("x")||0),ke=parseFloat(he.attr("y")||0),Me=(ae.attr("transform")||"").match(K);le=_e===1&&Te===1?[]:[i(Se,ke),"scale("+_e+","+Te+")",i(-Se,-ke)],Me&&le.push(Me),ae.attr("transform",le.join(""))}})},x.getMarkerStandoff=X;var Z,$,re,oe,ie,ue,me=Math.atan2,be=Math.cos,ge=Math.sin;function de(pe,_e){var Te=_e[0],le=_e[1];return[Te*be(pe)-le*ge(pe),Te*ge(pe)+le*be(pe)]}function ve(pe,_e){var Te,le,ae=pe.ma;ae===void 0&&((ae=_e.marker.angle)&&!k.isArrayOrTypedArray(ae)||(ae=0));var he=_e.marker.angleref;if(he==="previous"||he==="north"){if(_e._geo){var Se=_e._geo.project(pe.lonlat);Te=Se[0],le=Se[1]}else{var ke=_e._xA,Me=_e._yA;if(!ke||!Me)return 90;Te=ke.c2p(pe.x),le=Me.c2p(pe.y)}if(_e._geo){var Ee,De=pe.lonlat[0],fe=pe.lonlat[1],xe=_e._geo.project([De,fe+1e-5]),we=_e._geo.project([De+1e-5,fe]),Oe=me(we[1]-le,we[0]-Te),ze=me(xe[1]-le,xe[0]-Te);if(he==="north")Ee=ae/180*Math.PI;else if(he==="previous"){var Pe=De/180*Math.PI,Ue=fe/180*Math.PI,Ve=Z/180*Math.PI,Ze=$/180*Math.PI,it=Ve-Pe,tt=be(Ze)*ge(it),dt=ge(Ze)*be(Ue)-be(Ze)*ge(Ue)*be(it);Ee=-me(tt,dt)-Math.PI,Z=De,$=fe}var yt=de(Oe,[be(Ee),0]),vt=de(ze,[ge(Ee),0]);ae=me(yt[1]+vt[1],yt[0]+vt[0])/Math.PI*180,he!=="previous"||ue===_e.uid&&pe.i===ie+1||(ae=null)}if(he==="previous"&&!_e._geo)if(ue===_e.uid&&pe.i===ie+1&&T(Te)&&T(le)){var et=Te-re,Qe=le-oe,wt=_e.line&&_e.line.shape||"",It=wt.slice(wt.length-1);It==="h"&&(Qe=0),It==="v"&&(et=0),ae+=me(Qe,et)/Math.PI*180+90}else ae=null}return re=Te,oe=le,ie=pe.i,ue=_e.uid,ae}x.getMarkerAngle=ve},71984:function(ee,z,e){"use strict";var M,k,o,T,b=e(21984),h=e(33428).round,s="M0,0Z",t=Math.sqrt(2),i=Math.sqrt(3),n=Math.PI,r=Math.cos,a=Math.sin;function l(d){return d===null}function u(d,c,x){if(!(d&&d%360!=0||c))return x;if(o===d&&T===c&&M===x)return k;function g(R,j){var D=r(R),N=a(R),W=j[0],F=j[1]+(c||0);return[W*D-F*N,W*N+F*D]}o=d,T=c,M=x;for(var p=d/180*n,v=0,m=0,y=b(x),_="",f=0;f<y.length;f++){var S=y[f],w=S[0],E=v,P=m;if(w==="M"||w==="L")v=+S[1],m=+S[2];else if(w==="m"||w==="l")v+=+S[1],m+=+S[2];else if(w==="H")v=+S[1];else if(w==="h")v+=+S[1];else if(w==="V")m=+S[1];else if(w==="v")m+=+S[1];else if(w==="A"){v=+S[1],m=+S[2];var C=g(p,[+S[6],+S[7]]);S[6]=C[0],S[7]=C[1],S[3]=+S[3]+d}w!=="H"&&w!=="V"||(w="L"),w!=="h"&&w!=="v"||(w="l"),w!=="m"&&w!=="l"||(v-=E,m-=P);var O=g(p,[v,m]);w!=="H"&&w!=="V"||(w="L"),w!=="M"&&w!=="L"&&w!=="m"&&w!=="l"||(S[1]=O[0],S[2]=O[1]),S[0]=w,_+=S[0]+S.slice(1).join(",")}return k=_,_}ee.exports={circle:{n:0,f:function(d,c,x){if(l(c))return s;var g=h(d,2),p="M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z";return x?u(c,x,p):p}},square:{n:1,f:function(d,c,x){if(l(c))return s;var g=h(d,2);return u(c,x,"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")}},diamond:{n:2,f:function(d,c,x){if(l(c))return s;var g=h(1.3*d,2);return u(c,x,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"Z")}},cross:{n:3,f:function(d,c,x){if(l(c))return s;var g=h(.4*d,2),p=h(1.2*d,2);return u(c,x,"M"+p+","+g+"H"+g+"V"+p+"H-"+g+"V"+g+"H-"+p+"V-"+g+"H-"+g+"V-"+p+"H"+g+"V-"+g+"H"+p+"Z")}},x:{n:4,f:function(d,c,x){if(l(c))return s;var g=h(.8*d/t,2),p="l"+g+","+g,v="l"+g+",-"+g,m="l-"+g+",-"+g,y="l-"+g+","+g;return u(c,x,"M0,"+g+p+v+m+v+m+y+m+y+p+y+p+"Z")}},"triangle-up":{n:5,f:function(d,c,x){if(l(c))return s;var g=h(2*d/i,2);return u(c,x,"M-"+g+","+h(d/2,2)+"H"+g+"L0,-"+h(d,2)+"Z")}},"triangle-down":{n:6,f:function(d,c,x){if(l(c))return s;var g=h(2*d/i,2);return u(c,x,"M-"+g+",-"+h(d/2,2)+"H"+g+"L0,"+h(d,2)+"Z")}},"triangle-left":{n:7,f:function(d,c,x){if(l(c))return s;var g=h(2*d/i,2);return u(c,x,"M"+h(d/2,2)+",-"+g+"V"+g+"L-"+h(d,2)+",0Z")}},"triangle-right":{n:8,f:function(d,c,x){if(l(c))return s;var g=h(2*d/i,2);return u(c,x,"M-"+h(d/2,2)+",-"+g+"V"+g+"L"+h(d,2)+",0Z")}},"triangle-ne":{n:9,f:function(d,c,x){if(l(c))return s;var g=h(.6*d,2),p=h(1.2*d,2);return u(c,x,"M-"+p+",-"+g+"H"+g+"V"+p+"Z")}},"triangle-se":{n:10,f:function(d,c,x){if(l(c))return s;var g=h(.6*d,2),p=h(1.2*d,2);return u(c,x,"M"+g+",-"+p+"V"+g+"H-"+p+"Z")}},"triangle-sw":{n:11,f:function(d,c,x){if(l(c))return s;var g=h(.6*d,2),p=h(1.2*d,2);return u(c,x,"M"+p+","+g+"H-"+g+"V-"+p+"Z")}},"triangle-nw":{n:12,f:function(d,c,x){if(l(c))return s;var g=h(.6*d,2),p=h(1.2*d,2);return u(c,x,"M-"+g+","+p+"V-"+g+"H"+p+"Z")}},pentagon:{n:13,f:function(d,c,x){if(l(c))return s;var g=h(.951*d,2),p=h(.588*d,2),v=h(-d,2),m=h(-.309*d,2);return u(c,x,"M"+g+","+m+"L"+p+","+h(.809*d,2)+"H-"+p+"L-"+g+","+m+"L0,"+v+"Z")}},hexagon:{n:14,f:function(d,c,x){if(l(c))return s;var g=h(d,2),p=h(d/2,2),v=h(d*i/2,2);return u(c,x,"M"+v+",-"+p+"V"+p+"L0,"+g+"L-"+v+","+p+"V-"+p+"L0,-"+g+"Z")}},hexagon2:{n:15,f:function(d,c,x){if(l(c))return s;var g=h(d,2),p=h(d/2,2),v=h(d*i/2,2);return u(c,x,"M-"+p+","+v+"H"+p+"L"+g+",0L"+p+",-"+v+"H-"+p+"L-"+g+",0Z")}},octagon:{n:16,f:function(d,c,x){if(l(c))return s;var g=h(.924*d,2),p=h(.383*d,2);return u(c,x,"M-"+p+",-"+g+"H"+p+"L"+g+",-"+p+"V"+p+"L"+p+","+g+"H-"+p+"L-"+g+","+p+"V-"+p+"Z")}},star:{n:17,f:function(d,c,x){if(l(c))return s;var g=1.4*d,p=h(.225*g,2),v=h(.951*g,2),m=h(.363*g,2),y=h(.588*g,2),_=h(-g,2),f=h(-.309*g,2),S=h(.118*g,2),w=h(.809*g,2);return u(c,x,"M"+p+","+f+"H"+v+"L"+m+","+S+"L"+y+","+w+"L0,"+h(.382*g,2)+"L-"+y+","+w+"L-"+m+","+S+"L-"+v+","+f+"H-"+p+"L0,"+_+"Z")}},hexagram:{n:18,f:function(d,c,x){if(l(c))return s;var g=h(.66*d,2),p=h(.38*d,2),v=h(.76*d,2);return u(c,x,"M-"+v+",0l-"+p+",-"+g+"h"+v+"l"+p+",-"+g+"l"+p+","+g+"h"+v+"l-"+p+","+g+"l"+p+","+g+"h-"+v+"l-"+p+","+g+"l-"+p+",-"+g+"h-"+v+"Z")}},"star-triangle-up":{n:19,f:function(d,c,x){if(l(c))return s;var g=h(d*i*.8,2),p=h(.8*d,2),v=h(1.6*d,2),m=h(4*d,2),y="A "+m+","+m+" 0 0 1 ";return u(c,x,"M-"+g+","+p+y+g+","+p+y+"0,-"+v+y+"-"+g+","+p+"Z")}},"star-triangle-down":{n:20,f:function(d,c,x){if(l(c))return s;var g=h(d*i*.8,2),p=h(.8*d,2),v=h(1.6*d,2),m=h(4*d,2),y="A "+m+","+m+" 0 0 1 ";return u(c,x,"M"+g+",-"+p+y+"-"+g+",-"+p+y+"0,"+v+y+g+",-"+p+"Z")}},"star-square":{n:21,f:function(d,c,x){if(l(c))return s;var g=h(1.1*d,2),p=h(2*d,2),v="A "+p+","+p+" 0 0 1 ";return u(c,x,"M-"+g+",-"+g+v+"-"+g+","+g+v+g+","+g+v+g+",-"+g+v+"-"+g+",-"+g+"Z")}},"star-diamond":{n:22,f:function(d,c,x){if(l(c))return s;var g=h(1.4*d,2),p=h(1.9*d,2),v="A "+p+","+p+" 0 0 1 ";return u(c,x,"M-"+g+",0"+v+"0,"+g+v+g+",0"+v+"0,-"+g+v+"-"+g+",0Z")}},"diamond-tall":{n:23,f:function(d,c,x){if(l(c))return s;var g=h(.7*d,2),p=h(1.4*d,2);return u(c,x,"M0,"+p+"L"+g+",0L0,-"+p+"L-"+g+",0Z")}},"diamond-wide":{n:24,f:function(d,c,x){if(l(c))return s;var g=h(1.4*d,2),p=h(.7*d,2);return u(c,x,"M0,"+p+"L"+g+",0L0,-"+p+"L-"+g+",0Z")}},hourglass:{n:25,f:function(d,c,x){if(l(c))return s;var g=h(d,2);return u(c,x,"M"+g+","+g+"H-"+g+"L"+g+",-"+g+"H-"+g+"Z")},noDot:!0},bowtie:{n:26,f:function(d,c,x){if(l(c))return s;var g=h(d,2);return u(c,x,"M"+g+","+g+"V-"+g+"L-"+g+","+g+"V-"+g+"Z")},noDot:!0},"circle-cross":{n:27,f:function(d,c,x){if(l(c))return s;var g=h(d,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(d,c,x){if(l(c))return s;var g=h(d,2),p=h(d/t,2);return u(c,x,"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p+"M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(d,c,x){if(l(c))return s;var g=h(d,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(d,c,x){if(l(c))return s;var g=h(d,2);return u(c,x,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(d,c,x){if(l(c))return s;var g=h(1.3*d,2);return u(c,x,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"ZM0,-"+g+"V"+g+"M-"+g+",0H"+g)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(d,c,x){if(l(c))return s;var g=h(1.3*d,2),p=h(.65*d,2);return u(c,x,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"ZM-"+p+",-"+p+"L"+p+","+p+"M-"+p+","+p+"L"+p+",-"+p)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(d,c,x){if(l(c))return s;var g=h(1.4*d,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(d,c,x){if(l(c))return s;var g=h(d,2);return u(c,x,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(d,c,x){if(l(c))return s;var g=h(1.2*d,2),p=h(.85*d,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(d,c,x){if(l(c))return s;var g=h(d/2,2),p=h(d,2);return u(c,x,"M"+g+","+p+"V-"+p+"M"+(g-p)+",-"+p+"V"+p+"M"+p+","+g+"H-"+p+"M-"+p+","+(g-p)+"H"+p)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(d,c,x){if(l(c))return s;var g=h(1.2*d,2),p=h(1.6*d,2),v=h(.8*d,2);return u(c,x,"M-"+g+","+v+"L0,0M"+g+","+v+"L0,0M0,-"+p+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(d,c,x){if(l(c))return s;var g=h(1.2*d,2),p=h(1.6*d,2),v=h(.8*d,2);return u(c,x,"M-"+g+",-"+v+"L0,0M"+g+",-"+v+"L0,0M0,"+p+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(d,c,x){if(l(c))return s;var g=h(1.2*d,2),p=h(1.6*d,2),v=h(.8*d,2);return u(c,x,"M"+v+","+g+"L0,0M"+v+",-"+g+"L0,0M-"+p+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(d,c,x){if(l(c))return s;var g=h(1.2*d,2),p=h(1.6*d,2),v=h(.8*d,2);return u(c,x,"M-"+v+","+g+"L0,0M-"+v+",-"+g+"L0,0M"+p+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(d,c,x){if(l(c))return s;var g=h(1.4*d,2);return u(c,x,"M"+g+",0H-"+g)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(d,c,x){if(l(c))return s;var g=h(1.4*d,2);return u(c,x,"M0,"+g+"V-"+g)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(d,c,x){if(l(c))return s;var g=h(d,2);return u(c,x,"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(d,c,x){if(l(c))return s;var g=h(d,2);return u(c,x,"M"+g+","+g+"L-"+g+",-"+g)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(d,c,x){if(l(c))return s;var g=h(d,2);return u(c,x,"M0,0L-"+g+","+h(2*d,2)+"H"+g+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(d,c,x){if(l(c))return s;var g=h(d,2);return u(c,x,"M0,0L-"+g+",-"+h(2*d,2)+"H"+g+"Z")},noDot:!0},"arrow-left":{n:47,f:function(d,c,x){if(l(c))return s;var g=h(2*d,2),p=h(d,2);return u(c,x,"M0,0L"+g+",-"+p+"V"+p+"Z")},noDot:!0},"arrow-right":{n:48,f:function(d,c,x){if(l(c))return s;var g=h(2*d,2),p=h(d,2);return u(c,x,"M0,0L-"+g+",-"+p+"V"+p+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(d,c,x){if(l(c))return s;var g=h(d,2);return u(c,x,"M-"+g+",0H"+g+"M0,0L-"+g+","+h(2*d,2)+"H"+g+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(d,c,x){if(l(c))return s;var g=h(d,2);return u(c,x,"M-"+g+",0H"+g+"M0,0L-"+g+",-"+h(2*d,2)+"H"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(d,c,x){if(l(c))return s;var g=h(2*d,2),p=h(d,2);return u(c,x,"M0,-"+p+"V"+p+"M0,0L"+g+",-"+p+"V"+p+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(d,c,x){if(l(c))return s;var g=h(2*d,2),p=h(d,2);return u(c,x,"M0,-"+p+"V"+p+"M0,0L-"+g+",-"+p+"V"+p+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(d,c,x){if(l(c))return s;var g=n/2.5,p=2*d*r(g),v=2*d*a(g);return u(c,x,"M0,0L"+-p+","+v+"L"+p+","+v+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(d,c,x){if(l(c))return s;var g=n/4,p=2*d*r(g),v=2*d*a(g);return u(c,x,"M0,0L"+-p+","+v+"A "+2*d+","+2*d+" 0 0 1 "+p+","+v+"Z")},backoff:.4,noDot:!0}}},97644:function(ee){"use strict";ee.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(ee,z,e){"use strict";var M=e(38248),k=e(24040),o=e(54460),T=e(3400),b=e(93792);function h(s,t,i,n){var r=t["error_"+n]||{},a=[];if(r.visible&&["linear","log"].indexOf(i.type)!==-1){for(var l=b(r),u=0;u<s.length;u++){var d=s[u],c=d.i;if(c===void 0)c=u;else if(c===null)continue;var x=d[n];if(M(i.c2l(x))){var g=l(x,c);if(M(g[0])&&M(g[1])){var p=d[n+"s"]=x-g[0],v=d[n+"h"]=x+g[1];a.push(p,v)}}}var m=i._id,y=t._extremes[m],_=o.findExtremes(i,a,T.extendFlat({tozero:y.opts.tozero},{padded:!0}));y.min=y.min.concat(_.min),y.max=y.max.concat(_.max)}}ee.exports=function(s){for(var t=s.calcdata,i=0;i<t.length;i++){var n=t[i],r=n[0].trace;if(r.visible===!0&&k.traceIs(r,"errorBarsOK")){var a=o.getFromId(s,r.xaxis),l=o.getFromId(s,r.yaxis);h(n,r,a,"x"),h(n,r,l,"y")}}}},93792:function(ee){"use strict";function z(e,M){return e==="percent"?function(k){return Math.abs(k*M/100)}:e==="constant"?function(){return Math.abs(M)}:e==="sqrt"?function(k){return Math.sqrt(Math.abs(k))}:void 0}ee.exports=function(e){var M=e.type,k=e.symmetric;if(M==="data"){var o=e.array||[];if(k)return function(s,t){var i=+o[t];return[i,i]};var T=e.arrayminus||[];return function(s,t){var i=+o[t],n=+T[t];return isNaN(i)&&isNaN(n)?[NaN,NaN]:[n||0,i||0]}}var b=z(M,e.value),h=z(M,e.valueminus);return k||e.valueminus===void 0?function(s){var t=b(s);return[t,t]}:function(s){return[h(s),b(s)]}}},65200:function(ee,z,e){"use strict";var M=e(38248),k=e(24040),o=e(3400),T=e(31780),b=e(97644);ee.exports=function(h,s,t,i){var n="error_"+i.axis,r=T.newContainer(s,n),a=h[n]||{};function l(x,g){return o.coerce(a,r,b,x,g)}if(l("visible",a.array!==void 0||a.value!==void 0||a.type==="sqrt")!==!1){var u=l("type","array"in a?"data":"percent"),d=!0;u!=="sqrt"&&(d=l("symmetric",!((u==="data"?"arrayminus":"valueminus")in a))),u==="data"?(l("array"),l("traceref"),d||(l("arrayminus"),l("tracerefminus"))):u!=="percent"&&u!=="constant"||(l("value"),d||l("valueminus"));var c="copy_"+i.inherit+"style";i.inherit&&(s["error_"+i.inherit]||{}).visible&&l(c,!(a.color||M(a.thickness)||M(a.width))),i.inherit&&r[c]||(l("color",t),l("thickness"),l("width",k.traceIs(s,"gl3d")?0:4))}}},64968:function(ee,z,e){"use strict";var M=e(3400),k=e(67824).overrideAll,o=e(97644),T={error_x:M.extendFlat({},o),error_y:M.extendFlat({},o)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var b={error_x:M.extendFlat({},o),error_y:M.extendFlat({},o),error_z:M.extendFlat({},o)};delete b.error_x.copy_ystyle,delete b.error_y.copy_ystyle,delete b.error_z.copy_ystyle,delete b.error_z.copy_zstyle,ee.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:k(b,"calc","nested"),scattergl:k(T,"calc","nested")}},supplyDefaults:e(65200),calc:e(14880),makeComputeError:e(93792),plot:e(78512),style:e(92036),hoverInfo:function(h,s,t){(s.error_y||{}).visible&&(t.yerr=h.yh-h.y,s.error_y.symmetric||(t.yerrneg=h.y-h.ys)),(s.error_x||{}).visible&&(t.xerr=h.xh-h.x,s.error_x.symmetric||(t.xerrneg=h.x-h.xs))}}},78512:function(ee,z,e){"use strict";var M=e(33428),k=e(38248),o=e(43616),T=e(43028);ee.exports=function(b,h,s,t){var i=s.xaxis,n=s.yaxis,r=t&&t.duration>0,a=b._context.staticPlot;h.each(function(l){var u,d=l[0].trace,c=d.error_x||{},x=d.error_y||{};d.ids&&(u=function(m){return m.id});var g=T.hasMarkers(d)&&d.marker.maxdisplayed>0;x.visible||c.visible||(l=[]);var p=M.select(this).selectAll("g.errorbar").data(l,u);if(p.exit().remove(),l.length){c.visible||p.selectAll("path.xerror").remove(),x.visible||p.selectAll("path.yerror").remove(),p.style("opacity",1);var v=p.enter().append("g").classed("errorbar",!0);r&&v.style("opacity",0).transition().duration(t.duration).style("opacity",1),o.setClipUrl(p,s.layerClipId,b),p.each(function(m){var y=M.select(this),_=function(C,O,R){var j={x:O.c2p(C.x),y:R.c2p(C.y)};return C.yh!==void 0&&(j.yh=R.c2p(C.yh),j.ys=R.c2p(C.ys),k(j.ys)||(j.noYS=!0,j.ys=R.c2p(C.ys,!0))),C.xh!==void 0&&(j.xh=O.c2p(C.xh),j.xs=O.c2p(C.xs),k(j.xs)||(j.noXS=!0,j.xs=O.c2p(C.xs,!0))),j}(m,i,n);if(!g||m.vis){var f,S=y.select("path.yerror");if(x.visible&&k(_.x)&&k(_.yh)&&k(_.ys)){var w=x.width;f="M"+(_.x-w)+","+_.yh+"h"+2*w+"m-"+w+",0V"+_.ys,_.noYS||(f+="m-"+w+",0h"+2*w),S.size()?r&&(S=S.transition().duration(t.duration).ease(t.easing)):S=y.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",f)}else S.remove();var E=y.select("path.xerror");if(c.visible&&k(_.y)&&k(_.xh)&&k(_.xs)){var P=(c.copy_ystyle?x:c).width;f="M"+_.xh+","+(_.y-P)+"v"+2*P+"m0,-"+P+"H"+_.xs,_.noXS||(f+="m0,-"+P+"v"+2*P),E.size()?r&&(E=E.transition().duration(t.duration).ease(t.easing)):E=y.append("path").style("vector-effect",a?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",f)}else E.remove()}})}})}},92036:function(ee,z,e){"use strict";var M=e(33428),k=e(76308);ee.exports=function(o){o.each(function(T){var b=T[0].trace,h=b.error_y||{},s=b.error_x||{},t=M.select(this);t.selectAll("path.yerror").style("stroke-width",h.thickness+"px").call(k.stroke,h.color),s.copy_ystyle&&(s=h),t.selectAll("path.xerror").style("stroke-width",s.thickness+"px").call(k.stroke,s.color)})}},55756:function(ee,z,e){"use strict";var M=e(25376),k=e(65460).hoverlabel,o=e(92880).extendFlat;ee.exports={hoverlabel:{bgcolor:o({},k.bgcolor,{arrayOk:!0}),bordercolor:o({},k.bordercolor,{arrayOk:!0}),font:M({arrayOk:!0,editType:"none"}),align:o({},k.align,{arrayOk:!0}),namelength:o({},k.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(ee,z,e){"use strict";var M=e(3400),k=e(24040);function o(T,b,h,s){s=s||M.identity,Array.isArray(T)&&(b[0][h]=s(T))}ee.exports=function(T){var b=T.calcdata,h=T._fullLayout;function s(a){return function(l){return M.coerceHoverinfo({hoverinfo:l},{_module:a._module},h)}}for(var t=0;t<b.length;t++){var i=b[t],n=i[0].trace;if(!k.traceIs(n,"pie-like")){var r=k.traceIs(n,"2dMap")?o:M.fillArray;r(n.hoverinfo,i,"hi",s(n)),n.hovertemplate&&r(n.hovertemplate,i,"ht"),n.hoverlabel&&(r(n.hoverlabel.bgcolor,i,"hbg"),r(n.hoverlabel.bordercolor,i,"hbc"),r(n.hoverlabel.font.size,i,"hts"),r(n.hoverlabel.font.color,i,"htc"),r(n.hoverlabel.font.family,i,"htf"),r(n.hoverlabel.namelength,i,"hnl"),r(n.hoverlabel.align,i,"hta"))}}}},62376:function(ee,z,e){"use strict";var M=e(24040),k=e(83292).hover;ee.exports=function(o,T,b){var h=M.getComponentMethod("annotations","onClick")(o,o._hoverdata);function s(){o.emit("plotly_click",{points:o._hoverdata,event:T})}b!==void 0&&k(o,T,b,!0),o._hoverdata&&T&&T.target&&(h&&h.then?h.then(s):s(),T.stopImmediatePropagation&&T.stopImmediatePropagation())}},92456:function(ee){"use strict";ee.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(ee,z,e){"use strict";var M=e(3400),k=e(55756),o=e(16132);ee.exports=function(T,b,h,s){var t=M.extendFlat({},s.hoverlabel);b.hovertemplate&&(t.namelength=-1),o(T,b,function(i,n){return M.coerce(T,b,k,i,n)},t)}},10624:function(ee,z,e){"use strict";var M=e(3400);z.getSubplot=function(s){return s.subplot||s.xaxis+s.yaxis||s.geo},z.isTraceInSubplots=function(s,t){if(s.type==="splom"){for(var i=s.xaxes||[],n=s.yaxes||[],r=0;r<i.length;r++)for(var a=0;a<n.length;a++)if(t.indexOf(i[r]+n[a])!==-1)return!0;return!1}return t.indexOf(z.getSubplot(s))!==-1},z.flat=function(s,t){for(var i=new Array(s.length),n=0;n<s.length;n++)i[n]=t;return i},z.p2c=function(s,t){for(var i=new Array(s.length),n=0;n<s.length;n++)i[n]=s[n].p2c(t);return i},z.getDistanceFunction=function(s,t,i,n){return s==="closest"?n||z.quadrature(t,i):s.charAt(0)==="x"?t:i},z.getClosest=function(s,t,i){if(i.index!==!1)i.index>=0&&i.index<s.length?i.distance=0:i.index=!1;else for(var n=0;n<s.length;n++){var r=t(s[n]);r<=i.distance&&(i.index=n,i.distance=r)}return i},z.inbox=function(s,t,i){return s*t<0||s===0?i:1/0},z.quadrature=function(s,t){return function(i){var n=s(i),r=t(i);return Math.sqrt(n*n+r*r)}},z.makeEventData=function(s,t,i){var n="index"in s?s.index:s.pointNumber,r={data:t._input,fullData:t,curveNumber:t.index,pointNumber:n};if(t._indexToPoints){var a=t._indexToPoints[n];a.length===1?r.pointIndex=a[0]:r.pointIndices=a}else r.pointIndex=n;return t._module.eventData?r=t._module.eventData(r,s,t,i,n):("xVal"in s?r.x=s.xVal:"x"in s&&(r.x=s.x),"yVal"in s?r.y=s.yVal:"y"in s&&(r.y=s.y),s.xa&&(r.xaxis=s.xa),s.ya&&(r.yaxis=s.ya),s.zLabelVal!==void 0&&(r.z=s.zLabelVal)),z.appendArrayPointValue(r,t,n),r},z.appendArrayPointValue=function(s,t,i){var n=t._arrayAttrs;if(n)for(var r=0;r<n.length;r++){var a=n[r],l=o(a);if(s[l]===void 0){var u=T(M.nestedProperty(t,a).get(),i);u!==void 0&&(s[l]=u)}}},z.appendArrayMultiPointValues=function(s,t,i){var n=t._arrayAttrs;if(n)for(var r=0;r<n.length;r++){var a=n[r],l=o(a);if(s[l]===void 0){for(var u=M.nestedProperty(t,a).get(),d=new Array(i.length),c=0;c<i.length;c++)d[c]=T(u,i[c]);s[l]=d}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function o(s){return k[s]||s}function T(s,t){return Array.isArray(t)?Array.isArray(s)&&Array.isArray(s[t[0]])?s[t[0]][t[1]]:void 0:s[t]}var b={x:!0,y:!0},h={"x unified":!0,"y unified":!0};z.isUnifiedHover=function(s){return typeof s=="string"&&!!h[s]},z.isXYhover=function(s){return typeof s=="string"&&!!b[s]}},83292:function(ee,z,e){"use strict";var M=e(33428),k=e(38248),o=e(49760),T=e(3400),b=T.strTranslate,h=T.strRotate,s=e(95924),t=e(72736),i=e(72213),n=e(43616),r=e(76308),a=e(86476),l=e(54460),u=e(24040),d=e(10624),c=e(92456),x=e(77864),g=e(31140),p=c.YANGLE,v=Math.PI*p/180,m=1/Math.sin(v),y=Math.cos(v),_=Math.sin(v),f=c.HOVERARROWSIZE,S=c.HOVERTEXTPAD,w={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};function P(X){return[X.trace.index,X.index,X.x0,X.y0,X.name,X.attr,X.xa?X.xa._id:"",X.ya?X.ya._id:""].join(",")}z.hover=function(X,Z,$,re){X=T.getGraphDiv(X);var oe=Z.target;T.throttle(X._fullLayout._uid+c.HOVERID,c.HOVERMINTIME,function(){(function(ie,ue,me,be,ge){me||(me="xy");var de=Array.isArray(me)?me:[me],ve=ie._fullLayout,pe=ve._plots||[],_e=pe[me],Te=ve._has("cartesian");if(_e){var le=_e.overlays.map(function(jt){return jt.id});de=de.concat(le)}for(var ae=de.length,he=new Array(ae),Se=new Array(ae),ke=!1,Me=0;Me<ae;Me++){var Ee=de[Me];if(pe[Ee])ke=!0,he[Me]=pe[Ee].xaxis,Se[Me]=pe[Ee].yaxis;else{if(!ve[Ee]||!ve[Ee]._subplot)return void T.warn("Unrecognized subplot: "+Ee);var De=ve[Ee]._subplot;he[Me]=De.xaxis,Se[Me]=De.yaxis}}var fe=ue.hovermode||ve.hovermode;if(fe&&!ke&&(fe="closest"),["x","y","closest","x unified","y unified"].indexOf(fe)===-1||!ie.calcdata||ie.querySelector(".zoombox")||ie._dragging)return a.unhoverRaw(ie,ue);var xe=ve.hoverdistance;xe===-1&&(xe=1/0);var we=ve.spikedistance;we===-1&&(we=1/0);var Oe,ze,Pe,Ue,Ve,Ze,it,tt,dt,yt,vt,et,Qe,wt=[],It=[],Dt={hLinePoint:null,vLinePoint:null},Ct=!1;if(Array.isArray(ue))for(fe="array",Pe=0;Pe<ue.length;Pe++)(Ve=ie.calcdata[ue[Pe].curveNumber||0])&&(Ze=Ve[0].trace,Ve[0].trace.hoverinfo!=="skip"&&(It.push(Ve),Ze.orientation==="h"&&(Ct=!0)));else{for(Ue=0;Ue<ie.calcdata.length;Ue++)Ve=ie.calcdata[Ue],(Ze=Ve[0].trace).hoverinfo!=="skip"&&d.isTraceInSubplots(Ze,de)&&(It.push(Ve),Ze.orientation==="h"&&(Ct=!0));var He,We;if(ge){if(s.triggerHandler(ie,"plotly_beforehover",ue)===!1)return;var Be=ge.getBoundingClientRect();He=ue.clientX-Be.left,We=ue.clientY-Be.top,ve._calcInverseTransform(ie);var Ge=T.apply3DTransform(ve._invTransform)(He,We);if(He=Ge[0],We=Ge[1],He<0||He>he[0]._length||We<0||We>Se[0]._length)return a.unhoverRaw(ie,ue)}else He="xpx"in ue?ue.xpx:he[0]._length/2,We="ypx"in ue?ue.ypx:Se[0]._length/2;if(ue.pointerX=He+he[0]._offset,ue.pointerY=We+Se[0]._offset,Oe="xval"in ue?d.flat(de,ue.xval):d.p2c(he,He),ze="yval"in ue?d.flat(de,ue.yval):d.p2c(Se,We),!k(Oe[0])||!k(ze[0]))return T.warn("Fx.hover failed",ue,ie),a.unhoverRaw(ie,ue)}var at=1/0;function nt(jt,tn){for(Ue=0;Ue<It.length;Ue++)if((Ve=It[Ue])&&Ve[0]&&Ve[0].trace&&(Ze=Ve[0].trace).visible===!0&&Ze._length!==0&&["carpet","contourcarpet"].indexOf(Ze._module.name)===-1){if(Ze.type==="splom"?it=de[tt=0]:(it=d.getSubplot(Ze),tt=de.indexOf(it)),dt=fe,d.isUnifiedHover(dt)&&(dt=dt.charAt(0)),et={cd:Ve,trace:Ze,xa:he[tt],ya:Se[tt],maxHoverDistance:xe,maxSpikeDistance:we,index:!1,distance:Math.min(at,xe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:r.defaultLine,name:Ze.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ve[it]&&(et.subplot=ve[it]._subplot),ve._splomScenes&&ve._splomScenes[Ze.uid]&&(et.scene=ve._splomScenes[Ze.uid]),Qe=wt.length,dt==="array"){var xn=ue[Ue];"pointNumber"in xn?(et.index=xn.pointNumber,dt="closest"):(dt="","xval"in xn&&(yt=xn.xval,dt="x"),"yval"in xn&&(vt=xn.yval,dt=dt?"closest":"y"))}else jt!==void 0&&tn!==void 0?(yt=jt,vt=tn):(yt=Oe[tt],vt=ze[tt]);if(xe!==0)if(Ze._module&&Ze._module.hoverPoints){var pn=Ze._module.hoverPoints(et,yt,vt,dt,{finiteRange:!0,hoverLayer:ve._hoverlayer});if(pn)for(var Sn,Gn=0;Gn<pn.length;Gn++)Sn=pn[Gn],k(Sn.x0)&&k(Sn.y0)&&wt.push(N(Sn,fe))}else T.log("Unrecognized trace type in hover:",Ze);if(fe==="closest"&&wt.length>Qe&&(wt.splice(0,Qe),at=wt[0].distance),Te&&we!==0&&wt.length===0){et.distance=we,et.index=!1;var Rn=Ze._module.hoverPoints(et,yt,vt,"closest",{hoverLayer:ve._hoverlayer});if(Rn&&(Rn=Rn.filter(function(Yt){return Yt.spikeDistance<=we})),Rn&&Rn.length){var Nn,ir=Rn.filter(function(Yt){return Yt.xa.showspikes&&Yt.xa.spikesnap!=="hovered data"});if(ir.length){var Gt=ir[0];k(Gt.x0)&&k(Gt.y0)&&(Nn=Fe(Gt),(!Dt.vLinePoint||Dt.vLinePoint.spikeDistance>Nn.spikeDistance)&&(Dt.vLinePoint=Nn))}var dn=Rn.filter(function(Yt){return Yt.ya.showspikes&&Yt.ya.spikesnap!=="hovered data"});if(dn.length){var Pt=dn[0];k(Pt.x0)&&k(Pt.y0)&&(Nn=Fe(Pt),(!Dt.hLinePoint||Dt.hLinePoint.spikeDistance>Nn.spikeDistance)&&(Dt.hLinePoint=Nn))}}}}}function Re(jt,tn,xn){for(var pn,Sn=null,Gn=1/0,Rn=0;Rn<jt.length;Rn++)pn=jt[Rn].spikeDistance,xn&&Rn===0&&(pn=-1/0),pn<=Gn&&pn<=tn&&(Sn=jt[Rn],Gn=pn);return Sn}function Fe(jt){return jt?{xa:jt.xa,ya:jt.ya,x:jt.xSpike!==void 0?jt.xSpike:(jt.x0+jt.x1)/2,y:jt.ySpike!==void 0?jt.ySpike:(jt.y0+jt.y1)/2,distance:jt.distance,spikeDistance:jt.spikeDistance,curveNumber:jt.trace.index,color:jt.color,pointNumber:jt.index}:null}nt();var rt={fullLayout:ve,container:ve._hoverlayer,event:ue},Ye=ie._spikepoints,ct={vLinePoint:Dt.vLinePoint,hLinePoint:Dt.hLinePoint};ie._spikepoints=ct;var pt=function(){wt.sort(function(jt,tn){return jt.distance-tn.distance}),wt=function(jt,tn){for(var xn=tn.charAt(0),pn=[],Sn=[],Gn=[],Rn=0;Rn<jt.length;Rn++){var Nn=jt[Rn];u.traceIs(Nn.trace,"bar-like")||u.traceIs(Nn.trace,"box-violin")?Gn.push(Nn):Nn.trace[xn+"period"]?Sn.push(Nn):pn.push(Nn)}return pn.concat(Sn).concat(Gn)}(wt,fe)};pt();var gt=fe.charAt(0),ut=(gt==="x"||gt==="y")&&wt[0]&&E[wt[0].trace.type];if(Te&&we!==0&&wt.length!==0){var Mt=Re(wt.filter(function(jt){return jt.ya.showspikes}),we,ut);Dt.hLinePoint=Fe(Mt);var xt=Re(wt.filter(function(jt){return jt.xa.showspikes}),we,ut);Dt.vLinePoint=Fe(xt)}if(wt.length===0){var mt=a.unhoverRaw(ie,ue);return!Te||Dt.hLinePoint===null&&Dt.vLinePoint===null||F(Ye)&&W(ie,Dt,rt),mt}if(Te&&F(Ye)&&W(ie,Dt,rt),d.isXYhover(dt)&&wt[0].length!==0&&wt[0].trace.type!=="splom"){var Et=wt[0],Lt=(wt=w[Et.trace.type]?wt.filter(function(jt){return jt.trace.index===Et.trace.index}):[Et]).length;nt(V("x",Et,ve),V("y",Et,ve));var zt,Wt=[],rn={},Ut=0,Vt=function(jt){var tn=w[jt.trace.type]?P(jt):jt.trace.index;if(rn[tn]){var xn=rn[tn]-1,pn=Wt[xn];xn>0&&Math.abs(jt.distance)<Math.abs(pn.distance)&&(Wt[xn]=jt)}else Ut++,rn[tn]=Ut,Wt.push(jt)};for(zt=0;zt<Lt;zt++)Vt(wt[zt]);for(zt=wt.length-1;zt>Lt-1;zt--)Vt(wt[zt]);wt=Wt,pt()}var en=ie._hoverdata,Ln=[],An=te(ie),hn=J(ie);for(Pe=0;Pe<wt.length;Pe++){var Xt=wt[Pe],ln=d.makeEventData(Xt,Xt.trace,Xt.cd);if(Xt.hovertemplate!==!1){var nn=!1;Xt.cd[Xt.index]&&Xt.cd[Xt.index].ht&&(nn=Xt.cd[Xt.index].ht),Xt.hovertemplate=nn||Xt.trace.hovertemplate||!1}if(Xt.xa&&Xt.ya){var cn=Xt.x0+Xt.xa._offset,Tn=Xt.x1+Xt.xa._offset,Mn=Xt.y0+Xt.ya._offset,zn=Xt.y1+Xt.ya._offset,In=Math.min(cn,Tn),Pn=Math.max(cn,Tn),Hn=Math.min(Mn,zn),Fn=Math.max(Mn,zn);ln.bbox={x0:In+hn,x1:Pn+hn,y0:Hn+An,y1:Fn+An}}Xt.eventData=[ln],Ln.push(ln)}ie._hoverdata=Ln;var tr=fe==="y"&&(It.length>1||wt.length>1)||fe==="closest"&&Ct&&wt.length>1,or=r.combine(ve.plot_bgcolor||r.background,ve.paper_bgcolor),ur=O(wt,{gd:ie,hovermode:fe,rotateLabels:tr,bgColor:or,container:ve._hoverlayer,outerContainer:ve._paper.node(),commonLabelOpts:ve.hoverlabel,hoverdistance:ve.hoverdistance}),er=ur.hoverLabels;if(d.isUnifiedHover(fe)||(function(jt,tn,xn,pn){var Sn,Gn,Rn,Nn,ir,Gt,dn,Pt=tn?"xa":"ya",Yt=tn?"ya":"xa",Qt=0,mn=1,vn=jt.size(),_n=new Array(vn),sn=0,Kt=pn.minX,Jt=pn.maxX,on=pn.minY,fn=pn.maxY,En=function(lr){return lr*xn._invScaleX},On=function(lr){return lr*xn._invScaleY};function Vn(lr){var dr=lr[0],$n=lr[lr.length-1];if(Gn=dr.pmin-dr.pos-dr.dp+dr.size,Rn=$n.pos+$n.dp+$n.size-dr.pmax,Gn>.01){for(ir=lr.length-1;ir>=0;ir--)lr[ir].dp+=Gn;Sn=!1}if(!(Rn<.01)){if(Gn<-.01){for(ir=lr.length-1;ir>=0;ir--)lr[ir].dp-=Rn;Sn=!1}if(Sn){var _r=0;for(Nn=0;Nn<lr.length;Nn++)(Gt=lr[Nn]).pos+Gt.dp+Gt.size>dr.pmax&&_r++;for(Nn=lr.length-1;Nn>=0&&!(_r<=0);Nn--)(Gt=lr[Nn]).pos>dr.pmax-1&&(Gt.del=!0,_r--);for(Nn=0;Nn<lr.length&&!(_r<=0);Nn++)if((Gt=lr[Nn]).pos<dr.pmin+1)for(Gt.del=!0,_r--,Rn=2*Gt.size,ir=lr.length-1;ir>=0;ir--)lr[ir].dp-=Rn;for(Nn=lr.length-1;Nn>=0&&!(_r<=0);Nn--)(Gt=lr[Nn]).pos+Gt.dp+Gt.size>dr.pmax&&(Gt.del=!0,_r--)}}}for(jt.each(function(lr){var dr=lr[Pt],$n=lr[Yt],_r=dr._id.charAt(0)==="x",Lr=dr.range;sn===0&&Lr&&Lr[0]>Lr[1]!==_r&&(mn=-1);var Gr=0,hi=_r?xn.width:xn.height;if(xn.hovermode==="x"||xn.hovermode==="y"){var di,Wi,gi=j(lr,tn),zi=lr.anchor,_a=zi==="end"?-1:1;if(zi==="middle")Wi=(di=lr.crossPos+(_r?On(gi.y-lr.by/2):En(lr.bx/2+lr.tx2width/2)))+(_r?On(lr.by):En(lr.bx));else if(_r)Wi=(di=lr.crossPos+On(f+gi.y)-On(lr.by/2-f))+On(lr.by);else{var wa=En(_a*f+gi.x),zo=wa+En(_a*lr.bx);di=lr.crossPos+Math.min(wa,zo),Wi=lr.crossPos+Math.max(wa,zo)}_r?on!==void 0&&fn!==void 0&&Math.min(Wi,fn)-Math.max(di,on)>1&&($n.side==="left"?(Gr=$n._mainLinePosition,hi=xn.width):hi=$n._mainLinePosition):Kt!==void 0&&Jt!==void 0&&Math.min(Wi,Jt)-Math.max(di,Kt)>1&&($n.side==="top"?(Gr=$n._mainLinePosition,hi=xn.height):hi=$n._mainLinePosition)}_n[sn++]=[{datum:lr,traceIndex:lr.trace.index,dp:0,pos:lr.pos,posref:lr.posref,size:lr.by*(_r?m:1)/2,pmin:Gr,pmax:hi}]}),_n.sort(function(lr,dr){return lr[0].posref-dr[0].posref||mn*(dr[0].traceIndex-lr[0].traceIndex)});!Sn&&Qt<=vn;){for(Qt++,Sn=!0,Nn=0;Nn<_n.length-1;){var jn=_n[Nn],Kn=_n[Nn+1],Yn=jn[jn.length-1],nr=Kn[0];if((Gn=Yn.pos+Yn.dp+Yn.size-nr.pos-nr.dp+nr.size)>.01&&Yn.pmin===nr.pmin&&Yn.pmax===nr.pmax){for(ir=Kn.length-1;ir>=0;ir--)Kn[ir].dp+=Gn;for(jn.push.apply(jn,Kn),_n.splice(Nn+1,1),dn=0,ir=jn.length-1;ir>=0;ir--)dn+=jn[ir].dp;for(Rn=dn/jn.length,ir=jn.length-1;ir>=0;ir--)jn[ir].dp-=Rn;Sn=!1}else Nn++}_n.forEach(Vn)}for(Nn=_n.length-1;Nn>=0;Nn--){var rr=_n[Nn];for(ir=rr.length-1;ir>=0;ir--){var Jn=rr[ir],vr=Jn.datum;vr.offset=Jn.dp,vr.del=Jn.del}}}(er,tr,ve,ur.commonLabelBoundingBox),D(er,tr,ve._invScaleX,ve._invScaleY)),ge&&ge.tagName){var Mr=u.getComponentMethod("annotations","hasClickToShow")(ie,Ln);i(M.select(ge),Mr?"pointer":"")}ge&&!be&&function(jt,tn,xn){if(!xn||xn.length!==jt._hoverdata.length)return!0;for(var pn=xn.length-1;pn>=0;pn--){var Sn=xn[pn],Gn=jt._hoverdata[pn];if(Sn.curveNumber!==Gn.curveNumber||String(Sn.pointNumber)!==String(Gn.pointNumber)||String(Sn.pointNumbers)!==String(Gn.pointNumbers))return!0}return!1}(ie,0,en)&&(en&&ie.emit("plotly_unhover",{event:ue,points:en}),ie.emit("plotly_hover",{event:ue,points:ie._hoverdata,xaxes:he,yaxes:Se,xvals:Oe,yvals:ze}))})(X,Z,$,re,oe)})},z.loneHover=function(X,Z){var $=!0;Array.isArray(X)||($=!1,X=[X]);var re=Z.gd,oe=te(re),ie=J(re),ue=O(X.map(function(ge){var de=ge._x0||ge.x0||ge.x||0,ve=ge._x1||ge.x1||ge.x||0,pe=ge._y0||ge.y0||ge.y||0,_e=ge._y1||ge.y1||ge.y||0,Te=ge.eventData;if(Te){var le=Math.min(de,ve),ae=Math.max(de,ve),he=Math.min(pe,_e),Se=Math.max(pe,_e),ke=ge.trace;if(u.traceIs(ke,"gl3d")){var Me=re._fullLayout[ke.scene]._scene.container,Ee=Me.offsetLeft,De=Me.offsetTop;le+=Ee,ae+=Ee,he+=De,Se+=De}Te.bbox={x0:le+ie,x1:ae+ie,y0:he+oe,y1:Se+oe},Z.inOut_bbox&&Z.inOut_bbox.push(Te.bbox)}else Te=!1;return{color:ge.color||r.defaultLine,x0:ge.x0||ge.x||0,x1:ge.x1||ge.x||0,y0:ge.y0||ge.y||0,y1:ge.y1||ge.y||0,xLabel:ge.xLabel,yLabel:ge.yLabel,zLabel:ge.zLabel,text:ge.text,name:ge.name,idealAlign:ge.idealAlign,borderColor:ge.borderColor,fontFamily:ge.fontFamily,fontSize:ge.fontSize,fontColor:ge.fontColor,nameLength:ge.nameLength,textAlign:ge.textAlign,trace:ge.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ge.hovertemplate||!1,hovertemplateLabels:ge.hovertemplateLabels||!1,eventData:Te}}),{gd:re,hovermode:"closest",rotateLabels:!1,bgColor:Z.bgColor||r.background,container:M.select(Z.container),outerContainer:Z.outerContainer||Z.container}).hoverLabels,me=0,be=0;return ue.sort(function(ge,de){return ge.y0-de.y0}).each(function(ge,de){var ve=ge.y0-ge.by/2;ge.offset=ve-5<me?me-ve+5:0,me=ve+ge.by+ge.offset,de===Z.anchorIndex&&(be=ge.offset)}).each(function(ge){ge.offset-=be}),D(ue,!1,re._fullLayout._invScaleX,re._fullLayout._invScaleY),$?ue:ue.node()};var C=/<extra>([\s\S]*)<\/extra>/;function O(X,Z){var $=Z.gd,re=$._fullLayout,oe=Z.hovermode,ie=Z.rotateLabels,ue=Z.bgColor,me=Z.container,be=Z.outerContainer,ge=Z.commonLabelOpts||{};if(X.length===0)return[[]];var de=Z.fontFamily||c.HOVERFONT,ve=Z.fontSize||c.HOVERFONTSIZE,pe=X[0],_e=pe.xa,Te=pe.ya,le=oe.charAt(0),ae=le+"Label",he=pe[ae];if(he===void 0&&_e.type==="multicategory")for(var Se=0;Se<X.length&&(he=X[Se][ae])===void 0;Se++);var ke=K($,be),Me=ke.top,Ee=ke.width,De=ke.height,fe=he!==void 0&&pe.distance<=Z.hoverdistance&&(oe==="x"||oe==="y");if(fe){var xe,we,Oe=!0;for(xe=0;xe<X.length;xe++)if(Oe&&X[xe].zLabel===void 0&&(Oe=!1),we=X[xe].hoverinfo||X[xe].trace.hoverinfo){var ze=Array.isArray(we)?we:we.split("+");if(ze.indexOf("all")===-1&&ze.indexOf(oe)===-1){fe=!1;break}}Oe&&(fe=!1)}var Pe=me.selectAll("g.axistext").data(fe?[0]:[]);Pe.enter().append("g").classed("axistext",!0),Pe.exit().remove();var Ue={minX:0,maxX:0,minY:0,maxY:0};if(Pe.each(function(){var mt=M.select(this),Et=T.ensureSingle(mt,"path","",function(Fn){Fn.style({"stroke-width":"1px"})}),Lt=T.ensureSingle(mt,"text","",function(Fn){Fn.attr("data-notex",1)}),zt=ge.bgcolor||r.defaultLine,Wt=ge.bordercolor||r.contrast(zt),rn=r.contrast(zt),Ut={family:ge.font.family||de,size:ge.font.size||ve,color:ge.font.color||rn};Et.style({fill:zt,stroke:Wt}),Lt.text(he).call(n.font,Ut).call(t.positionText,0,0).call(t.convertToTspans,$),mt.attr("transform","");var Vt,en,Ln=K($,Lt.node());if(oe==="x"){var An=_e.side==="top"?"-":"";Lt.attr("text-anchor","middle").call(t.positionText,0,_e.side==="top"?Me-Ln.bottom-f-S:Me-Ln.top+f+S),Vt=_e._offset+(pe.x0+pe.x1)/2,en=Te._offset+(_e.side==="top"?0:Te._length);var hn=Ln.width/2+S,Xt=Vt;Vt<hn?Xt=hn:Vt>re.width-hn&&(Xt=re.width-hn),Et.attr("d","M"+(Vt-Xt)+",0L"+(Vt-Xt+f)+","+An+f+"H"+hn+"v"+An+(2*S+Ln.height)+"H"+-hn+"V"+An+f+"H"+(Vt-Xt-f)+"Z"),Vt=Xt,Ue.minX=Vt-hn,Ue.maxX=Vt+hn,_e.side==="top"?(Ue.minY=en-(2*S+Ln.height),Ue.maxY=en-S):(Ue.minY=en+S,Ue.maxY=en+(2*S+Ln.height))}else{var ln,nn,cn;Te.side==="right"?(ln="start",nn=1,cn="",Vt=_e._offset+_e._length):(ln="end",nn=-1,cn="-",Vt=_e._offset),en=Te._offset+(pe.y0+pe.y1)/2,Lt.attr("text-anchor",ln),Et.attr("d","M0,0L"+cn+f+","+f+"V"+(S+Ln.height/2)+"h"+cn+(2*S+Ln.width)+"V-"+(S+Ln.height/2)+"H"+cn+f+"V-"+f+"Z"),Ue.minY=en-(S+Ln.height/2),Ue.maxY=en+(S+Ln.height/2),Te.side==="right"?(Ue.minX=Vt+f,Ue.maxX=Vt+f+(2*S+Ln.width)):(Ue.minX=Vt-f-(2*S+Ln.width),Ue.maxX=Vt-f);var Tn,Mn=Ln.height/2,zn=Me-Ln.top-Mn,In="clip"+re._uid+"commonlabel"+Te._id;if(Vt<Ln.width+2*S+f){Tn="M-"+(f+S)+"-"+Mn+"h-"+(Ln.width-S)+"V"+Mn+"h"+(Ln.width-S)+"Z";var Pn=Ln.width-Vt+S;t.positionText(Lt,Pn,zn),ln==="end"&&Lt.selectAll("tspan").each(function(){var Fn=M.select(this),tr=n.tester.append("text").text(Fn.text()).call(n.font,Ut),or=K($,tr.node());Math.round(or.width)<Math.round(Ln.width)&&Fn.attr("x",Pn-or.width),tr.remove()})}else t.positionText(Lt,nn*(S+f),zn),Tn=null;var Hn=re._topclips.selectAll("#"+In).data(Tn?[0]:[]);Hn.enter().append("clipPath").attr("id",In).append("path"),Hn.exit().remove(),Hn.select("path").attr("d",Tn),n.setClipUrl(Lt,Tn?In:null,$)}mt.attr("transform",b(Vt,en))}),d.isUnifiedHover(oe)){me.selectAll("g.hovertext").remove();var Ve=X.filter(function(mt){return mt.hoverinfo!=="none"});if(Ve.length===0)return[];var Ze=re.hoverlabel,it=Ze.font,tt={showlegend:!0,legend:{title:{text:he,font:it},font:it,bgcolor:Ze.bgcolor,bordercolor:Ze.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:re.legend?re.legend.traceorder:void 0,orientation:"v"}},dt={font:it};x(tt,dt,$._fullData);var yt=dt.legend;yt.entries=[];for(var vt=0;vt<Ve.length;vt++){var et=Ve[vt];if(et.hoverinfo!=="none"){var Qe=R(et,!0,oe,re,he),wt=Qe[0],It=Qe[1];et.name=It,et.text=It!==""?It+" : "+wt:wt;var Dt=et.cd[et.index];Dt&&(Dt.mc&&(et.mc=Dt.mc),Dt.mcc&&(et.mc=Dt.mcc),Dt.mlc&&(et.mlc=Dt.mlc),Dt.mlcc&&(et.mlc=Dt.mlcc),Dt.mlw&&(et.mlw=Dt.mlw),Dt.mrc&&(et.mrc=Dt.mrc),Dt.dir&&(et.dir=Dt.dir)),et._distinct=!0,yt.entries.push([et])}}yt.entries.sort(function(mt,Et){return mt[0].trace.index-Et[0].trace.index}),yt.layer=me,yt._inHover=!0,yt._groupTitleFont=Ze.grouptitlefont,g($,yt);var Ct,He,We,Be,Ge=me.select("g.legend"),at=K($,Ge.node()),nt=at.width+2*S,Re=at.height+2*S,Fe=Ve[0],rt=(Fe.x0+Fe.x1)/2,Ye=(Fe.y0+Fe.y1)/2,ct=!(u.traceIs(Fe.trace,"bar-like")||u.traceIs(Fe.trace,"box-violin"));le==="y"?ct?(He=Ye-S,Ct=Ye+S):(He=Math.min.apply(null,Ve.map(function(mt){return Math.min(mt.y0,mt.y1)})),Ct=Math.max.apply(null,Ve.map(function(mt){return Math.max(mt.y0,mt.y1)}))):He=Ct=T.mean(Ve.map(function(mt){return(mt.y0+mt.y1)/2}))-Re/2,le==="x"?ct?(We=rt+S,Be=rt-S):(We=Math.max.apply(null,Ve.map(function(mt){return Math.max(mt.x0,mt.x1)})),Be=Math.min.apply(null,Ve.map(function(mt){return Math.min(mt.x0,mt.x1)}))):We=Be=T.mean(Ve.map(function(mt){return(mt.x0+mt.x1)/2}))-nt/2;var pt,gt,ut=_e._offset,Mt=Te._offset;return Be+=ut-nt,He+=Mt-Re,pt=(We+=ut)+nt<Ee&&We>=0?We:Be+nt<Ee&&Be>=0?Be:ut+nt<Ee?ut:We-rt<rt-Be+nt?Ee-nt:0,pt+=S,gt=(Ct+=Mt)+Re<De&&Ct>=0?Ct:He+Re<De&&He>=0?He:Mt+Re<De?Mt:Ct-Ye<Ye-He+Re?De-Re:0,gt+=S,Ge.attr("transform",b(pt-1,gt-1)),Ge}var xt=me.selectAll("g.hovertext").data(X,function(mt){return P(mt)});return xt.enter().append("g").classed("hovertext",!0).each(function(){var mt=M.select(this);mt.append("rect").call(r.fill,r.addOpacity(ue,.8)),mt.append("text").classed("name",!0),mt.append("path").style("stroke-width","1px"),mt.append("text").classed("nums",!0).call(n.font,de,ve)}),xt.exit().remove(),xt.each(function(mt){var Et=M.select(this).attr("transform",""),Lt=mt.color;Array.isArray(Lt)&&(Lt=Lt[mt.eventData[0].pointNumber]);var zt=mt.bgcolor||Lt,Wt=r.combine(r.opacity(zt)?zt:r.defaultLine,ue),rn=r.combine(r.opacity(Lt)?Lt:r.defaultLine,ue),Ut=mt.borderColor||r.contrast(Wt),Vt=R(mt,fe,oe,re,he,Et),en=Vt[0],Ln=Vt[1],An=Et.select("text.nums").call(n.font,mt.fontFamily||de,mt.fontSize||ve,mt.fontColor||Ut).text(en).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,$),hn=Et.select("text.name"),Xt=0,ln=0;if(Ln&&Ln!==en){hn.call(n.font,mt.fontFamily||de,mt.fontSize||ve,rn).text(Ln).attr("data-notex",1).call(t.positionText,0,0).call(t.convertToTspans,$);var nn=K($,hn.node());Xt=nn.width+2*S,ln=nn.height+2*S}else hn.remove(),Et.select("rect").remove();Et.select("path").style({fill:Wt,stroke:Ut});var cn=mt.xa._offset+(mt.x0+mt.x1)/2,Tn=mt.ya._offset+(mt.y0+mt.y1)/2,Mn=Math.abs(mt.x1-mt.x0),zn=Math.abs(mt.y1-mt.y0),In=K($,An.node()),Pn=In.width/re._invScaleX,Hn=In.height/re._invScaleY;mt.ty0=(Me-In.top)/re._invScaleY,mt.bx=Pn+2*S,mt.by=Math.max(Hn+2*S,ln),mt.anchor="start",mt.txwidth=Pn,mt.tx2width=Xt,mt.offset=0;var Fn,tr,or=(Pn+f+S+Xt)*re._invScaleX;if(ie)mt.pos=cn,Fn=Tn+zn/2+or<=De,tr=Tn-zn/2-or>=0,mt.idealAlign!=="top"&&Fn||!tr?Fn?(Tn+=zn/2,mt.anchor="start"):mt.anchor="middle":(Tn-=zn/2,mt.anchor="end"),mt.crossPos=Tn;else{if(mt.pos=Tn,Fn=cn+Mn/2+or<=Ee,tr=cn-Mn/2-or>=0,mt.idealAlign!=="left"&&Fn||!tr)if(Fn)cn+=Mn/2,mt.anchor="start";else{mt.anchor="middle";var ur=or/2,er=cn+ur-Ee,Mr=cn-ur;er>0&&(cn-=er),Mr<0&&(cn+=-Mr)}else cn-=Mn/2,mt.anchor="end";mt.crossPos=cn}An.attr("text-anchor",mt.anchor),Xt&&hn.attr("text-anchor",mt.anchor),Et.attr("transform",b(cn,Tn)+(ie?h(p):""))}),{hoverLabels:xt,commonLabelBoundingBox:Ue}}function R(X,Z,$,re,oe,ie){var ue="",me="";X.nameOverride!==void 0&&(X.name=X.nameOverride),X.name&&(X.trace._meta&&(X.name=T.templateString(X.name,X.trace._meta)),ue=U(X.name,X.nameLength));var be=$.charAt(0),ge=be==="x"?"y":"x";X.zLabel!==void 0?(X.xLabel!==void 0&&(me+="x: "+X.xLabel+"<br>"),X.yLabel!==void 0&&(me+="y: "+X.yLabel+"<br>"),X.trace.type!=="choropleth"&&X.trace.type!=="choroplethmapbox"&&(me+=(me?"z: ":"")+X.zLabel)):Z&&X[be+"Label"]===oe?me=X[ge+"Label"]||"":X.xLabel===void 0?X.yLabel!==void 0&&X.trace.type!=="scattercarpet"&&(me=X.yLabel):me=X.yLabel===void 0?X.xLabel:"("+X.xLabel+", "+X.yLabel+")",!X.text&&X.text!==0||Array.isArray(X.text)||(me+=(me?"<br>":"")+X.text),X.extraText!==void 0&&(me+=(me?"<br>":"")+X.extraText),ie&&me===""&&!X.hovertemplate&&(ue===""&&ie.remove(),me=ue);var de=X.hovertemplate||!1;if(de){var ve=X.hovertemplateLabels||X;X[be+"Label"]!==oe&&(ve[be+"other"]=ve[be+"Val"],ve[be+"otherLabel"]=ve[be+"Label"]),me=(me=T.hovertemplateString(de,ve,re._d3locale,X.eventData[0]||{},X.trace._meta)).replace(C,function(pe,_e){return ue=U(_e,X.nameLength),""})}return[me,ue]}function j(X,Z){var $=0,re=X.offset;return Z&&(re*=-_,$=X.offset*y),{x:$,y:re}}function D(X,Z,$,re){var oe=function(ue){return ue*$},ie=function(ue){return ue*re};X.each(function(ue){var me=M.select(this);if(ue.del)return me.remove();var be,ge,de,ve,pe=me.select("text.nums"),_e=ue.anchor,Te=_e==="end"?-1:1,le=(ve=(de=(ge={start:1,end:-1,middle:0}[(be=ue).anchor])*(f+S))+ge*(be.txwidth+S),be.anchor==="middle"&&(de-=be.tx2width/2,ve+=be.txwidth/2+S),{alignShift:ge,textShiftX:de,text2ShiftX:ve}),ae=j(ue,Z),he=ae.x,Se=ae.y,ke=_e==="middle";me.select("path").attr("d",ke?"M-"+oe(ue.bx/2+ue.tx2width/2)+","+ie(Se-ue.by/2)+"h"+oe(ue.bx)+"v"+ie(ue.by)+"h-"+oe(ue.bx)+"Z":"M0,0L"+oe(Te*f+he)+","+ie(f+Se)+"v"+ie(ue.by/2-f)+"h"+oe(Te*ue.bx)+"v-"+ie(ue.by)+"H"+oe(Te*f+he)+"V"+ie(Se-f)+"Z");var Me=he+le.textShiftX,Ee=Se+ue.ty0-ue.by/2+S,De=ue.textAlign||"auto";De!=="auto"&&(De==="left"&&_e!=="start"?(pe.attr("text-anchor","start"),Me=ke?-ue.bx/2-ue.tx2width/2+S:-ue.bx-S):De==="right"&&_e!=="end"&&(pe.attr("text-anchor","end"),Me=ke?ue.bx/2-ue.tx2width/2-S:ue.bx+S)),pe.call(t.positionText,oe(Me),ie(Ee)),ue.tx2width&&(me.select("text.name").call(t.positionText,oe(le.text2ShiftX+le.alignShift*S+he),ie(Se+ue.ty0-ue.by/2+S)),me.select("rect").call(n.setRect,oe(le.text2ShiftX+(le.alignShift-1)*ue.tx2width/2+he),ie(Se-ue.by/2-1),oe(ue.tx2width),ie(ue.by+2)))})}function N(X,Z){var $=X.index,re=X.trace||{},oe=X.cd[0],ie=X.cd[$]||{};function ue(pe){return pe||k(pe)&&pe===0}var me=Array.isArray($)?function(pe,_e){var Te=T.castOption(oe,$,pe);return ue(Te)?Te:T.extractOption({},re,"",_e)}:function(pe,_e){return T.extractOption(ie,re,pe,_e)};function be(pe,_e,Te){var le=me(_e,Te);ue(le)&&(X[pe]=le)}if(be("hoverinfo","hi","hoverinfo"),be("bgcolor","hbg","hoverlabel.bgcolor"),be("borderColor","hbc","hoverlabel.bordercolor"),be("fontFamily","htf","hoverlabel.font.family"),be("fontSize","hts","hoverlabel.font.size"),be("fontColor","htc","hoverlabel.font.color"),be("nameLength","hnl","hoverlabel.namelength"),be("textAlign","hta","hoverlabel.align"),X.posref=Z==="y"||Z==="closest"&&re.orientation==="h"?X.xa._offset+(X.x0+X.x1)/2:X.ya._offset+(X.y0+X.y1)/2,X.x0=T.constrain(X.x0,0,X.xa._length),X.x1=T.constrain(X.x1,0,X.xa._length),X.y0=T.constrain(X.y0,0,X.ya._length),X.y1=T.constrain(X.y1,0,X.ya._length),X.xLabelVal!==void 0&&(X.xLabel="xLabel"in X?X.xLabel:l.hoverLabelText(X.xa,X.xLabelVal,re.xhoverformat),X.xVal=X.xa.c2d(X.xLabelVal)),X.yLabelVal!==void 0&&(X.yLabel="yLabel"in X?X.yLabel:l.hoverLabelText(X.ya,X.yLabelVal,re.yhoverformat),X.yVal=X.ya.c2d(X.yLabelVal)),X.zLabelVal!==void 0&&X.zLabel===void 0&&(X.zLabel=String(X.zLabelVal)),!(isNaN(X.xerr)||X.xa.type==="log"&&X.xerr<=0)){var ge=l.tickText(X.xa,X.xa.c2l(X.xerr),"hover").text;X.xerrneg!==void 0?X.xLabel+=" +"+ge+" / -"+l.tickText(X.xa,X.xa.c2l(X.xerrneg),"hover").text:X.xLabel+=" \xB1 "+ge,Z==="x"&&(X.distance+=1)}if(!(isNaN(X.yerr)||X.ya.type==="log"&&X.yerr<=0)){var de=l.tickText(X.ya,X.ya.c2l(X.yerr),"hover").text;X.yerrneg!==void 0?X.yLabel+=" +"+de+" / -"+l.tickText(X.ya,X.ya.c2l(X.yerrneg),"hover").text:X.yLabel+=" \xB1 "+de,Z==="y"&&(X.distance+=1)}var ve=X.hoverinfo||X.trace.hoverinfo;return ve&&ve!=="all"&&((ve=Array.isArray(ve)?ve:ve.split("+")).indexOf("x")===-1&&(X.xLabel=void 0),ve.indexOf("y")===-1&&(X.yLabel=void 0),ve.indexOf("z")===-1&&(X.zLabel=void 0),ve.indexOf("text")===-1&&(X.text=void 0),ve.indexOf("name")===-1&&(X.name=void 0)),X}function W(X,Z,$){var re,oe,ie=$.container,ue=$.fullLayout,me=ue._size,be=$.event,ge=!!Z.hLinePoint,de=!!Z.vLinePoint;if(ie.selectAll(".spikeline").remove(),de||ge){var ve=r.combine(ue.plot_bgcolor,ue.paper_bgcolor);if(ge){var pe,_e,Te=Z.hLinePoint;re=Te&&Te.xa,(oe=Te&&Te.ya).spikesnap==="cursor"?(pe=be.pointerX,_e=be.pointerY):(pe=re._offset+Te.x,_e=oe._offset+Te.y);var le,ae,he=o.readability(Te.color,ve)<1.5?r.contrast(ve):Te.color,Se=oe.spikemode,ke=oe.spikethickness,Me=oe.spikecolor||he,Ee=l.getPxPosition(X,oe);if(Se.indexOf("toaxis")!==-1||Se.indexOf("across")!==-1){if(Se.indexOf("toaxis")!==-1&&(le=Ee,ae=pe),Se.indexOf("across")!==-1){var De=oe._counterDomainMin,fe=oe._counterDomainMax;oe.anchor==="free"&&(De=Math.min(De,oe.position),fe=Math.max(fe,oe.position)),le=me.l+De*me.w,ae=me.l+fe*me.w}ie.insert("line",":first-child").attr({x1:le,x2:ae,y1:_e,y2:_e,"stroke-width":ke,stroke:Me,"stroke-dasharray":n.dashStyle(oe.spikedash,ke)}).classed("spikeline",!0).classed("crisp",!0),ie.insert("line",":first-child").attr({x1:le,x2:ae,y1:_e,y2:_e,"stroke-width":ke+2,stroke:ve}).classed("spikeline",!0).classed("crisp",!0)}Se.indexOf("marker")!==-1&&ie.insert("circle",":first-child").attr({cx:Ee+(oe.side!=="right"?ke:-ke),cy:_e,r:ke,fill:Me}).classed("spikeline",!0)}if(de){var xe,we,Oe=Z.vLinePoint;re=Oe&&Oe.xa,oe=Oe&&Oe.ya,re.spikesnap==="cursor"?(xe=be.pointerX,we=be.pointerY):(xe=re._offset+Oe.x,we=oe._offset+Oe.y);var ze,Pe,Ue=o.readability(Oe.color,ve)<1.5?r.contrast(ve):Oe.color,Ve=re.spikemode,Ze=re.spikethickness,it=re.spikecolor||Ue,tt=l.getPxPosition(X,re);if(Ve.indexOf("toaxis")!==-1||Ve.indexOf("across")!==-1){if(Ve.indexOf("toaxis")!==-1&&(ze=tt,Pe=we),Ve.indexOf("across")!==-1){var dt=re._counterDomainMin,yt=re._counterDomainMax;re.anchor==="free"&&(dt=Math.min(dt,re.position),yt=Math.max(yt,re.position)),ze=me.t+(1-yt)*me.h,Pe=me.t+(1-dt)*me.h}ie.insert("line",":first-child").attr({x1:xe,x2:xe,y1:ze,y2:Pe,"stroke-width":Ze,stroke:it,"stroke-dasharray":n.dashStyle(re.spikedash,Ze)}).classed("spikeline",!0).classed("crisp",!0),ie.insert("line",":first-child").attr({x1:xe,x2:xe,y1:ze,y2:Pe,"stroke-width":Ze+2,stroke:ve}).classed("spikeline",!0).classed("crisp",!0)}Ve.indexOf("marker")!==-1&&ie.insert("circle",":first-child").attr({cx:xe,cy:tt-(re.side!=="top"?Ze:-Ze),r:Ze,fill:it}).classed("spikeline",!0)}}}function F(X,Z){return!Z||Z.vLinePoint!==X._spikepoints.vLinePoint||Z.hLinePoint!==X._spikepoints.hLinePoint}function U(X,Z){return t.plainText(X||"",{len:Z,allowedTags:["br","sub","sup","b","i","em"]})}function V(X,Z,$){var re=Z[X+"a"],oe=Z[X+"Val"],ie=Z.cd[0];if(re.type==="category"||re.type==="multicategory")oe=re._categoriesMap[oe];else if(re.type==="date"){var ue=Z.trace[X+"periodalignment"];if(ue){var me=Z.cd[Z.index],be=me[X+"Start"];be===void 0&&(be=me[X]);var ge=me[X+"End"];ge===void 0&&(ge=me[X]);var de=ge-be;ue==="end"?oe+=de:ue==="middle"&&(oe+=de/2)}oe=re.d2c(oe)}return ie&&ie.t&&ie.t.posLetter===re._id&&($.boxmode!=="group"&&$.violinmode!=="group"||(oe+=ie.t.dPos)),oe}function te(X){return X.offsetTop+X.clientTop}function J(X){return X.offsetLeft+X.clientLeft}function K(X,Z){var $=X._fullLayout,re=Z.getBoundingClientRect(),oe=re.left,ie=re.top,ue=oe+re.width,me=ie+re.height,be=T.apply3DTransform($._invTransform)(oe,ie),ge=T.apply3DTransform($._invTransform)(ue,me),de=be[0],ve=be[1],pe=ge[0],_e=ge[1];return{x:de,y:ve,width:pe-de,height:_e-ve,top:Math.min(ve,_e),left:Math.min(de,pe),right:Math.max(de,pe),bottom:Math.max(ve,_e)}}},16132:function(ee,z,e){"use strict";var M=e(3400),k=e(76308),o=e(10624).isUnifiedHover;ee.exports=function(T,b,h,s){s=s||{};var t=b.legend;function i(n){s.font[n]||(s.font[n]=t?b.legend.font[n]:b.font[n])}b&&o(b.hovermode)&&(s.font||(s.font={}),i("size"),i("family"),i("color"),t?(s.bgcolor||(s.bgcolor=k.combine(b.legend.bgcolor,b.paper_bgcolor)),s.bordercolor||(s.bordercolor=b.legend.bordercolor)):s.bgcolor||(s.bgcolor=b.paper_bgcolor)),h("hoverlabel.bgcolor",s.bgcolor),h("hoverlabel.bordercolor",s.bordercolor),h("hoverlabel.namelength",s.namelength),M.coerceFont(h,"hoverlabel.font",s.font),h("hoverlabel.align",s.align)}},41008:function(ee,z,e){"use strict";var M=e(3400),k=e(65460);ee.exports=function(o,T){function b(h,s){return T[h]!==void 0?T[h]:M.coerce(o,T,k,h,s)}return b("clickmode"),b("hovermode")}},93024:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(86476),T=e(10624),b=e(65460),h=e(83292);ee.exports={moduleType:"component",name:"fx",constants:e(92456),schema:{layout:b},attributes:e(55756),layoutAttributes:b,supplyLayoutGlobalDefaults:e(81976),supplyDefaults:e(95448),supplyLayoutDefaults:e(88336),calc:e(55056),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:function(s,t,i){return k.castOption(s,t,"hoverlabel."+i)},castHoverinfo:function(s,t,i){return k.castOption(s,i,"hoverinfo",function(n){return k.coerceHoverinfo({hoverinfo:n},{_module:s._module},t)})},hover:h.hover,unhover:o.unhover,loneHover:h.loneHover,loneUnhover:function(s){var t=k.isD3Selection(s)?s:M.select(s);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()},click:e(62376)}},65460:function(ee,z,e){"use strict";var M=e(92456),k=e(25376),o=k({editType:"none"});o.family.dflt=M.HOVERFONT,o.size.dflt=M.HOVERFONTSIZE,ee.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:o,grouptitlefont:k({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(ee,z,e){"use strict";var M=e(3400),k=e(65460),o=e(41008),T=e(16132);ee.exports=function(b,h){function s(r,a){return M.coerce(b,h,k,r,a)}o(b,h)&&(s("hoverdistance"),s("spikedistance")),s("dragmode")==="select"&&s("selectdirection");var t=h._has("mapbox"),i=h._has("geo"),n=h._basePlotModules.length;h.dragmode==="zoom"&&((t||i)&&n===1||t&&i&&n===2)&&(h.dragmode="pan"),T(b,h,s),M.coerceFont(s,"hoverlabel.grouptitlefont",h.hoverlabel.font)}},81976:function(ee,z,e){"use strict";var M=e(3400),k=e(16132),o=e(65460);ee.exports=function(T,b){k(T,b,function(h,s){return M.coerce(T,b,o,h,s)})}},12704:function(ee,z,e){"use strict";var M=e(3400),k=e(53756).counter,o=e(86968).u,T=e(33816).idRegex,b=e(31780),h={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[k("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:o({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function s(n,r,a){var l=r[a+"axes"],u=Object.keys((n._splomAxes||{})[a]||{});return Array.isArray(l)?l:u.length?u:void 0}function t(n,r,a,l,u,d){var c=r(n+"gap",a),x=r("domain."+n);r(n+"side",l);for(var g=new Array(u),p=x[0],v=(x[1]-p)/(u-c),m=v*(1-c),y=0;y<u;y++){var _=p+v*y;g[d?u-1-y:y]=[_,_+m]}return g}function i(n,r,a,l,u){var d,c=new Array(a);function x(g,p){r.indexOf(p)!==-1&&l[p]===void 0?(c[g]=p,l[p]=g):c[g]=""}if(Array.isArray(n))for(d=0;d<a;d++)x(d,n[d]);else for(x(0,u),d=1;d<a;d++)x(d,u+(d+1));return c}ee.exports={moduleType:"component",name:"grid",schema:{layout:{grid:h}},layoutAttributes:h,sizeDefaults:function(n,r){var a=n.grid||{},l=s(r,a,"x"),u=s(r,a,"y");if(n.grid||l||u){var d,c,x=Array.isArray(a.subplots)&&Array.isArray(a.subplots[0]),g=Array.isArray(l),p=Array.isArray(u),v=g&&l!==a.xaxes&&p&&u!==a.yaxes;x?(d=a.subplots.length,c=a.subplots[0].length):(p&&(d=u.length),g&&(c=l.length));var m=b.newContainer(r,"grid"),y=C("rows",d),_=C("columns",c);if(y*_>1){x||g||p||C("pattern")==="independent"&&(x=!0),m._hasSubplotGrid=x;var f,S,w=C("roworder")==="top to bottom",E=x?.2:.1,P=x?.3:.1;v&&r._splomGridDflt&&(f=r._splomGridDflt.xside,S=r._splomGridDflt.yside),m._domains={x:t("x",C,E,f,_),y:t("y",C,P,S,y,w)}}else delete r.grid}function C(O,R){return M.coerce(a,m,h,O,R)}},contentDefaults:function(n,r){var a=r.grid;if(a&&a._domains){var l,u,d,c,x,g,p,v=n.grid||{},m=r._subplots,y=a._hasSubplotGrid,_=a.rows,f=a.columns,S=a.pattern==="independent",w=a._axisMap={};if(y){var E=v.subplots||[];g=a.subplots=new Array(_);var P=1;for(l=0;l<_;l++){var C=g[l]=new Array(f),O=E[l]||[];for(u=0;u<f;u++)if(S?(x=P===1?"xy":"x"+P+"y"+P,P++):x=O[u],C[u]="",m.cartesian.indexOf(x)!==-1){if(p=x.indexOf("y"),d=x.slice(0,p),c=x.slice(p),w[d]!==void 0&&w[d]!==u||w[c]!==void 0&&w[c]!==l)continue;C[u]=x,w[d]=u,w[c]=l}}}else{var R=s(r,v,"x"),j=s(r,v,"y");a.xaxes=i(R,m.xaxis,f,w,"x"),a.yaxes=i(j,m.yaxis,_,w,"y")}var D=a._anchors={},N=a.roworder==="top to bottom";for(var W in w){var F,U,V,te=W.charAt(0),J=a[te+"side"];if(J.length<8)D[W]="free";else if(te==="x"){if(J.charAt(0)==="t"===N?(F=0,U=1,V=_):(F=_-1,U=-1,V=-1),y){var K=w[W];for(l=F;l!==V;l+=U)if((x=g[l][K])&&(p=x.indexOf("y"),x.slice(0,p)===W)){D[W]=x.slice(p);break}}else for(l=F;l!==V;l+=U)if(c=a.yaxes[l],m.cartesian.indexOf(W+c)!==-1){D[W]=c;break}}else if(J.charAt(0)==="l"?(F=0,U=1,V=f):(F=f-1,U=-1,V=-1),y){var X=w[W];for(l=F;l!==V;l+=U)if((x=g[X][l])&&(p=x.indexOf("y"),x.slice(p)===W)){D[W]=x.slice(0,p);break}}else for(l=F;l!==V;l+=U)if(d=a.xaxes[l],m.cartesian.indexOf(d+W)!==-1){D[W]=d;break}}}}}},65760:function(ee,z,e){"use strict";var M=e(33816),k=e(31780).templatedArray;e(36208),ee.exports=k("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(ee,z,e){"use strict";var M=e(38248),k=e(36896);ee.exports=function(o,T,b,h){T=T||{};var s=b==="log"&&T.type==="linear",t=b==="linear"&&T.type==="log";if(s||t){for(var i,n,r=o._fullLayout.images,a=T._id.charAt(0),l=0;l<r.length;l++)if(n="images["+l+"].",(i=r[l])[a+"ref"]===T._id){var u=i[a],d=i["size"+a],c=null,x=null;if(s){c=k(u,T.range);var g=d/Math.pow(10,c)/2;x=2*Math.log(g+Math.sqrt(1+g*g))/Math.LN10}else x=(c=Math.pow(10,u))*(Math.pow(10,d/2)-Math.pow(10,-d/2));M(c)?M(x)||(x=null):(c=null,x=null),h(n+a,c),h(n+"size"+a,x)}}}},25024:function(ee,z,e){"use strict";var M=e(3400),k=e(54460),o=e(51272),T=e(65760);function b(h,s,t){function i(c,x){return M.coerce(h,s,T,c,x)}var n=i("source");if(!i("visible",!!n))return s;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var r={_fullLayout:t},a=["x","y"],l=0;l<2;l++){var u=a[l],d=k.coerceRef(h,s,r,u,"paper",void 0);d!=="paper"&&k.getFromId(r,d)._imgIndices.push(s._index),k.coercePosition(s,r,i,d,u,0)}return s}ee.exports=function(h,s){o(h,s,{name:"images",handleItemDefaults:b})}},60963:function(ee,z,e){"use strict";var M=e(33428),k=e(43616),o=e(54460),T=e(79811),b=e(9616);ee.exports=function(h){var s,t,i=h._fullLayout,n=[],r={},a=[];for(t=0;t<i.images.length;t++){var l=i.images[t];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){s=T.ref2id(l.xref)+T.ref2id(l.yref);var u=i._plots[s];if(!u){a.push(l);continue}u.mainplot&&(s=u.mainplot.id),r[s]||(r[s]=[]),r[s].push(l)}else l.layer==="above"?n.push(l):a.push(l)}var d={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},c={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function x(f){var S=M.select(this);if(this._imgSrc!==f.source)if(S.attr("xmlns",b.svg),f.source&&f.source.slice(0,5)==="data:")S.attr("xlink:href",f.source),this._imgSrc=f.source;else{var w=new Promise(function(E){var P=new Image;function C(){S.remove(),E()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=C,P.onload=function(){var O=document.createElement("canvas");O.width=this.width,O.height=this.height,O.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var R=O.toDataURL("image/png");S.attr("xlink:href",R),E()},S.on("error",C),P.src=f.source,this._imgSrc=f.source}.bind(this));h._promises.push(w)}}function g(f){var S,w,E=M.select(this),P=o.getFromId(h,f.xref),C=o.getFromId(h,f.yref),O=o.getRefType(f.xref)==="domain",R=o.getRefType(f.yref)==="domain",j=i._size;S=P!==void 0?typeof f.xref=="string"&&O?P._length*f.sizex:Math.abs(P.l2p(f.sizex)-P.l2p(0)):f.sizex*j.w,w=C!==void 0?typeof f.yref=="string"&&R?C._length*f.sizey:Math.abs(C.l2p(f.sizey)-C.l2p(0)):f.sizey*j.h;var D,N,W=S*d[f.xanchor].offset,F=w*c[f.yanchor].offset,U=d[f.xanchor].sizing+c[f.yanchor].sizing;switch(D=P!==void 0?typeof f.xref=="string"&&O?P._length*f.x+P._offset:P.r2p(f.x)+P._offset:f.x*j.w+j.l,D+=W,N=C!==void 0?typeof f.yref=="string"&&R?C._length*(1-f.y)+C._offset:C.r2p(f.y)+C._offset:j.h-f.y*j.h+j.t,N+=F,f.sizing){case"fill":U+=" slice";break;case"stretch":U="none"}E.attr({x:D,y:N,width:S,height:w,preserveAspectRatio:U,opacity:f.opacity});var V=(P&&o.getRefType(f.xref)!=="domain"?P._id:"")+(C&&o.getRefType(f.yref)!=="domain"?C._id:"");k.setClipUrl(E,V?"clip"+i._uid+V:null,h)}var p=i._imageLowerLayer.selectAll("image").data(a),v=i._imageUpperLayer.selectAll("image").data(n);p.enter().append("image"),v.enter().append("image"),p.exit().remove(),v.exit().remove(),p.each(function(f){x.bind(this)(f),g.bind(this)(f)}),v.each(function(f){x.bind(this)(f),g.bind(this)(f)});var m=Object.keys(i._plots);for(t=0;t<m.length;t++){s=m[t];var y=i._plots[s];if(y.imagelayer){var _=y.imagelayer.selectAll("image").data(r[s]||[]);_.enter().append("image"),_.exit().remove(),_.each(function(f){x.bind(this)(f),g.bind(this)(f)})}}}},7402:function(ee,z,e){"use strict";ee.exports={moduleType:"component",name:"images",layoutAttributes:e(65760),supplyLayoutDefaults:e(25024),includeBasePlot:e(36632)("images"),draw:e(60963),convertCoords:e(63556)}},3800:function(ee,z,e){"use strict";var M=e(25376),k=e(22548);ee.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:M({editType:"legend"}),grouptitlefont:M({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:M({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(ee){"use strict";ee.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(ee,z,e){"use strict";var M=e(24040),k=e(3400),o=e(31780),T=e(45464),b=e(3800),h=e(64859),s=e(42451);function t(i,n,r,a){var l=n[i]||{},u=o.newContainer(r,i);function d(U,V){return k.coerce(l,u,b,U,V)}var c=k.coerceFont(d,"font",r.font);if(d("bgcolor",r.paper_bgcolor),d("bordercolor"),d("visible")){for(var x,g=function(U,V){var te=x._input,J=x;return k.coerce(te,J,T,U,V)},p=r.font||{},v=k.coerceFont(d,"grouptitlefont",k.extendFlat({},p,{size:Math.round(1.1*p.size)})),m=0,y=!1,_="normal",f=(r.shapes||[]).filter(function(U){return U.showlegend}),S=a.concat(f).filter(function(U){return i===(U.legend||"legend")}),w=0;w<S.length;w++)if((x=S[w]).visible){var E=x._isShape;(x.showlegend||x._dfltShowLegend&&!(x._module&&x._module.attributes&&x._module.attributes.showlegend&&x._module.attributes.showlegend.dflt===!1))&&(m++,x.showlegend&&(y=!0,(!E&&M.traceIs(x,"pie-like")||x._input.showlegend===!0)&&m++),k.coerceFont(g,"legendgrouptitle.font",v)),(!E&&M.traceIs(x,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(x.fill)!==-1)&&(_=s.isGrouped({traceorder:_})?"grouped+reversed":"reversed"),x.legendgroup!==void 0&&x.legendgroup!==""&&(_=s.isReversed({traceorder:_})?"reversed+grouped":"grouped")}var P=k.coerce(n,r,h,"showlegend",y&&m>(i==="legend"?1:0));if(P===!1&&(r[i]=void 0),(P!==!1||l.uirevision)&&(d("uirevision",r.uirevision),P!==!1)){d("borderwidth");var C,O,R,j=d("orientation")==="h",D=d("yref")==="paper",N=d("xref")==="paper",W="left";if(j?(C=0,M.getComponentMethod("rangeslider","isVisible")(n.xaxis)?D?(O=1.1,R="bottom"):(O=1,R="top"):D?(O=-.1,R="top"):(O=0,R="bottom")):(O=1,R="auto",N?C=1.02:(C=1,W="right")),k.coerce(l,u,{x:{valType:"number",editType:"legend",min:N?-2:0,max:N?3:1,dflt:C}},"x"),k.coerce(l,u,{y:{valType:"number",editType:"legend",min:D?-2:0,max:D?3:1,dflt:O}},"y"),d("traceorder",_),s.isGrouped(r[i])&&d("tracegroupgap"),d("entrywidth"),d("entrywidthmode"),d("indentation"),d("itemsizing"),d("itemwidth"),d("itemclick"),d("itemdoubleclick"),d("groupclick"),d("xanchor",W),d("yanchor",R),d("valign"),k.noneOrAll(l,u,["x","y"]),d("title.text")){d("title.side",j?"left":"top");var F=k.extendFlat({},c,{size:k.bigFont(c.size)});k.coerceFont(d,"title.font",F)}}}}ee.exports=function(i,n,r){var a,l=r.slice(),u=n.shapes;if(u)for(a=0;a<u.length;a++){var d=u[a];if(d.showlegend){var c={_input:d._input,visible:d.visible,showlegend:d.showlegend,legend:d.legend};l.push(c)}}var x=["legend"];for(a=0;a<l.length;a++)k.pushUnique(x,l[a].legend);for(n._legends=[],a=0;a<x.length;a++){var g=x[a];t(g,i,n,l),n[g]&&n[g].visible&&(n[g]._id=g),n._legends.push(g)}}},31140:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(7316),T=e(24040),b=e(95924),h=e(86476),s=e(43616),t=e(76308),i=e(72736),n=e(33048),r=e(65196),a=e(84284),l=a.LINE_SPACING,u=a.FROM_TL,d=a.FROM_BR,c=e(35456),x=e(2012),g=e(42451),p=1,v=/^legend[0-9]*$/;function m(R,j){var D,N,W=j||{},F=R._fullLayout,U=O(W),V=W._inHover;if(V?(N=W.layer,D="hover"):(N=F._infolayer,D=U),N){var te;if(D+=F._uid,R._legendMouseDownTime||(R._legendMouseDownTime=0),V){if(!W.entries)return;te=c(W.entries,W)}else{for(var J=(R.calcdata||[]).slice(),K=F.shapes,X=0;X<K.length;X++){var Z=K[X];if(Z.showlegend){var $={_isShape:!0,_fullInput:Z,index:Z._index,name:Z.name||Z.label.text||"shape "+Z._index,legend:Z.legend,legendgroup:Z.legendgroup,legendgrouptitle:Z.legendgrouptitle,legendrank:Z.legendrank,legendwidth:Z.legendwidth,showlegend:Z.showlegend,visible:Z.visible,opacity:Z.opacity,mode:Z.type==="line"?"lines":"markers",line:Z.line,marker:{line:Z.line,color:Z.fillcolor,size:12,symbol:Z.type==="rect"?"square":Z.type==="circle"?"circle":"hexagon2"}};J.push([{trace:$}])}}te=F.showlegend&&c(J,W,F._legends.length>1)}var re=F.hiddenlabels||[];if(!(V||F.showlegend&&te.length))return N.selectAll("."+U).remove(),F._topdefs.select("#"+D).remove(),o.autoMargin(R,U);var oe=k.ensureSingle(N,"g",U,function(_e){V||_e.attr("pointer-events","all")}),ie=k.ensureSingleById(F._topdefs,"clipPath",D,function(_e){_e.append("rect")}),ue=k.ensureSingle(oe,"rect","bg",function(_e){_e.attr("shape-rendering","crispEdges")});ue.call(t.stroke,W.bordercolor).call(t.fill,W.bgcolor).style("stroke-width",W.borderwidth+"px");var me,be=k.ensureSingle(oe,"g","scrollbox"),ge=W.title;W._titleWidth=0,W._titleHeight=0,ge.text?((me=k.ensureSingle(be,"text",U+"titletext")).attr("text-anchor","start").call(s.font,ge.font).text(ge.text),E(me,be,R,W,p)):be.selectAll("."+U+"titletext").remove();var de=k.ensureSingle(oe,"rect","scrollbar",function(_e){_e.attr(r.scrollBarEnterAttrs).call(t.fill,r.scrollBarColor)}),ve=be.selectAll("g.groups").data(te);ve.enter().append("g").attr("class","groups"),ve.exit().remove();var pe=ve.selectAll("g.traces").data(k.identity);pe.enter().append("g").attr("class","traces"),pe.exit().remove(),pe.style("opacity",function(_e){var Te=_e[0].trace;return T.traceIs(Te,"pie-like")?re.indexOf(_e[0].label)!==-1?.5:1:Te.visible==="legendonly"?.5:1}).each(function(){M.select(this).call(f,R,W)}).call(x,R,W).each(function(){V||M.select(this).call(w,R,U)}),k.syncOrAsync([o.previousPromises,function(){return function(_e,Te,le,ae){var he=_e._fullLayout,Se=O(ae);ae||(ae=he[Se]);var ke=he._size,Me=g.isVertical(ae),Ee=g.isGrouped(ae),De=ae.entrywidthmode==="fraction",fe=ae.borderwidth,xe=2*fe,we=r.itemGap,Oe=ae.indentation+ae.itemwidth+2*we,ze=2*(fe+we),Pe=C(ae),Ue=ae.y<0||ae.y===0&&Pe==="top",Ve=ae.y>1||ae.y===1&&Pe==="bottom",Ze=ae.tracegroupgap,it={};ae._maxHeight=Math.max(Ue||Ve?he.height/2:ke.h,30);var tt=0;ae._width=0,ae._height=0;var dt=function(pt){var gt=0,ut=0,Mt=pt.title.side;return Mt&&(Mt.indexOf("left")!==-1&&(gt=pt._titleWidth),Mt.indexOf("top")!==-1&&(ut=pt._titleHeight)),[gt,ut]}(ae);if(Me)le.each(function(pt){var gt=pt[0].height;s.setTranslate(this,fe+dt[0],fe+dt[1]+ae._height+gt/2+we),ae._height+=gt,ae._width=Math.max(ae._width,pt[0].width)}),tt=Oe+ae._width,ae._width+=we+Oe+xe,ae._height+=ze,Ee&&(Te.each(function(pt,gt){s.setTranslate(this,0,gt*ae.tracegroupgap)}),ae._height+=(ae._lgroupsLength-1)*ae.tracegroupgap);else{var yt=P(ae),vt=ae.x<0||ae.x===0&&yt==="right",et=ae.x>1||ae.x===1&&yt==="left",Qe=Ve||Ue,wt=he.width/2;ae._maxWidth=Math.max(vt?Qe&&yt==="left"?ke.l+ke.w:wt:et?Qe&&yt==="right"?ke.r+ke.w:wt:ke.w,2*Oe);var It=0,Dt=0;le.each(function(pt){var gt=y(pt,ae,Oe);It=Math.max(It,gt),Dt+=gt}),tt=null;var Ct=0;if(Ee){var He=0,We=0,Be=0;Te.each(function(){var pt=0,gt=0;M.select(this).selectAll("g.traces").each(function(Mt){var xt=y(Mt,ae,Oe),mt=Mt[0].height;s.setTranslate(this,dt[0],dt[1]+fe+we+mt/2+gt),gt+=mt,pt=Math.max(pt,xt),it[Mt[0].trace.legendgroup]=pt});var ut=pt+we;We>0&&ut+fe+We>ae._maxWidth?(Ct=Math.max(Ct,We),We=0,Be+=He+Ze,He=gt):He=Math.max(He,gt),s.setTranslate(this,We,Be),We+=ut}),ae._width=Math.max(Ct,We)+fe,ae._height=Be+He+ze}else{var Ge=le.size(),at=Dt+xe+(Ge-1)*we<ae._maxWidth,nt=0,Re=0,Fe=0,rt=0;le.each(function(pt){var gt=pt[0].height,ut=y(pt,ae,Oe),Mt=at?ut:It;De||(Mt+=we),Mt+fe+Re-we>=ae._maxWidth&&(Ct=Math.max(Ct,rt),Re=0,Fe+=nt,ae._height+=nt,nt=0),s.setTranslate(this,dt[0]+fe+Re,dt[1]+fe+Fe+gt/2+we),rt=Re+ut+we,Re+=Mt,nt=Math.max(nt,gt)}),at?(ae._width=Re+xe,ae._height=nt+ze):(ae._width=Math.max(Ct,rt)+xe,ae._height+=nt+ze)}}ae._width=Math.ceil(Math.max(ae._width+dt[0],ae._titleWidth+2*(fe+r.titlePad))),ae._height=Math.ceil(Math.max(ae._height+dt[1],ae._titleHeight+2*(fe+r.itemGap))),ae._effHeight=Math.min(ae._height,ae._maxHeight);var Ye=_e._context.edits,ct=Ye.legendText||Ye.legendPosition;le.each(function(pt){var gt=M.select(this).select("."+Se+"toggle"),ut=pt[0].height,Mt=pt[0].trace.legendgroup,xt=y(pt,ae,Oe);Ee&&Mt!==""&&(xt=it[Mt]);var mt=ct?Oe:tt||xt;Me||De||(mt+=we/2),s.setRect(gt,0,-ut/2,mt,ut)})}(R,ve,pe,W)},function(){var _e,Te,le,ae,he=F._size,Se=W.borderwidth,ke=W.xref==="paper",Me=W.yref==="paper";if(ge.text&&function(Qe,wt,It){if(wt.title.side==="top center"||wt.title.side==="top right"){var Dt=wt.title.font.size*l,Ct=0,He=Qe.node(),We=s.bBox(He).width;wt.title.side==="top center"?Ct=.5*(wt._width-2*It-2*r.titlePad-We):wt.title.side==="top right"&&(Ct=wt._width-2*It-2*r.titlePad-We),i.positionText(Qe,It+r.titlePad+Ct,It+Dt)}}(me,W,Se),!V){var Ee,De;Ee=ke?he.l+he.w*W.x-u[P(W)]*W._width:F.width*W.x-u[P(W)]*W._width,De=Me?he.t+he.h*(1-W.y)-u[C(W)]*W._effHeight:F.height*(1-W.y)-u[C(W)]*W._effHeight;var fe=function(Qe,wt,It,Dt){var Ct=Qe._fullLayout,He=Ct[wt],We=P(He),Be=C(He),Ge=He.xref==="paper",at=He.yref==="paper";Qe._fullLayout._reservedMargin[wt]={};var nt=He.y<.5?"b":"t",Re=He.x<.5?"l":"r",Fe={r:Ct.width-It,l:It+He._width,b:Ct.height-Dt,t:Dt+He._effHeight};if(Ge&&at)return o.autoMargin(Qe,wt,{x:He.x,y:He.y,l:He._width*u[We],r:He._width*d[We],b:He._effHeight*d[Be],t:He._effHeight*u[Be]});Ge?Qe._fullLayout._reservedMargin[wt][nt]=Fe[nt]:at||He.orientation==="v"?Qe._fullLayout._reservedMargin[wt][Re]=Fe[Re]:Qe._fullLayout._reservedMargin[wt][nt]=Fe[nt]}(R,U,Ee,De);if(fe)return;if(F.margin.autoexpand){var xe=Ee,we=De;Ee=ke?k.constrain(Ee,0,F.width-W._width):xe,De=Me?k.constrain(De,0,F.height-W._effHeight):we,Ee!==xe&&k.log("Constrain "+U+".x to make legend fit inside graph"),De!==we&&k.log("Constrain "+U+".y to make legend fit inside graph")}s.setTranslate(oe,Ee,De)}if(de.on(".drag",null),oe.on("wheel",null),V||W._height<=W._maxHeight||R._context.staticPlot){var Oe=W._effHeight;V&&(Oe=W._height),ue.attr({width:W._width-Se,height:Oe-Se,x:Se/2,y:Se/2}),s.setTranslate(be,0,0),ie.select("rect").attr({width:W._width-2*Se,height:Oe-2*Se,x:Se,y:Se}),s.setClipUrl(be,D,R),s.setRect(de,0,0,0,0),delete W._scrollY}else{var ze,Pe,Ue,Ve=Math.max(r.scrollBarMinHeight,W._effHeight*W._effHeight/W._height),Ze=W._effHeight-Ve-2*r.scrollBarMargin,it=W._height-W._effHeight,tt=Ze/it,dt=Math.min(W._scrollY||0,it);ue.attr({width:W._width-2*Se+r.scrollBarWidth+r.scrollBarMargin,height:W._effHeight-Se,x:Se/2,y:Se/2}),ie.select("rect").attr({width:W._width-2*Se+r.scrollBarWidth+r.scrollBarMargin,height:W._effHeight-2*Se,x:Se,y:Se+dt}),s.setClipUrl(be,D,R),et(dt,Ve,tt),oe.on("wheel",function(){et(dt=k.constrain(W._scrollY+M.event.deltaY/Ze*it,0,it),Ve,tt),dt!==0&&dt!==it&&M.event.preventDefault()});var yt=M.behavior.drag().on("dragstart",function(){var Qe=M.event.sourceEvent;ze=Qe.type==="touchstart"?Qe.changedTouches[0].clientY:Qe.clientY,Ue=dt}).on("drag",function(){var Qe=M.event.sourceEvent;Qe.buttons===2||Qe.ctrlKey||(Pe=Qe.type==="touchmove"?Qe.changedTouches[0].clientY:Qe.clientY,dt=function(wt,It,Dt){var Ct=(Dt-It)/tt+wt;return k.constrain(Ct,0,it)}(Ue,ze,Pe),et(dt,Ve,tt))});de.call(yt);var vt=M.behavior.drag().on("dragstart",function(){var Qe=M.event.sourceEvent;Qe.type==="touchstart"&&(ze=Qe.changedTouches[0].clientY,Ue=dt)}).on("drag",function(){var Qe=M.event.sourceEvent;Qe.type==="touchmove"&&(Pe=Qe.changedTouches[0].clientY,dt=function(wt,It,Dt){var Ct=(It-Dt)/tt+wt;return k.constrain(Ct,0,it)}(Ue,ze,Pe),et(dt,Ve,tt))});be.call(vt)}function et(Qe,wt,It){W._scrollY=R._fullLayout[U]._scrollY=Qe,s.setTranslate(be,0,-Qe),s.setRect(de,W._width,r.scrollBarMargin+Qe*It,r.scrollBarWidth,wt),ie.select("rect").attr("y",Se+Qe)}R._context.edits.legendPosition&&(oe.classed("cursor-move",!0),h.init({element:oe.node(),gd:R,prepFn:function(){var Qe=s.getTranslate(oe);le=Qe.x,ae=Qe.y},moveFn:function(Qe,wt){var It=le+Qe,Dt=ae+wt;s.setTranslate(oe,It,Dt),_e=h.align(It,W._width,he.l,he.l+he.w,W.xanchor),Te=h.align(Dt+W._height,-W._height,he.t+he.h,he.t,W.yanchor)},doneFn:function(){if(_e!==void 0&&Te!==void 0){var Qe={};Qe[U+".x"]=_e,Qe[U+".y"]=Te,T.call("_guiRelayout",R,Qe)}},clickFn:function(Qe,wt){var It=N.selectAll("g.traces").filter(function(){var Dt=this.getBoundingClientRect();return wt.clientX>=Dt.left&&wt.clientX<=Dt.right&&wt.clientY>=Dt.top&&wt.clientY<=Dt.bottom});It.size()>0&&_(R,oe,It,Qe,wt)}}))}],R)}}function y(R,j,D){var N=R[0],W=N.width,F=j.entrywidthmode,U=N.trace.legendwidth||j.entrywidth;return F==="fraction"?j._maxWidth*U:D+(U||W)}function _(R,j,D,N,W){var F=D.data()[0][0].trace,U={event:W,node:D.node(),curveNumber:F.index,expandedIndex:F._expandedIndex,data:R.data,layout:R.layout,frames:R._transitionData._frames,config:R._context,fullData:R._fullData,fullLayout:R._fullLayout};F._group&&(U.group=F._group),T.traceIs(F,"pie-like")&&(U.label=D.datum()[0].label);var V=b.triggerHandler(R,"plotly_legendclick",U);if(N===1){if(V===!1)return;j._clickTimeout=setTimeout(function(){R._fullLayout&&n(D,R,N)},R._context.doubleClickDelay)}else N===2&&(j._clickTimeout&&clearTimeout(j._clickTimeout),R._legendMouseDownTime=0,b.triggerHandler(R,"plotly_legenddoubleclick",U)!==!1&&V!==!1&&n(D,R,N))}function f(R,j,D){var N,W,F=O(D),U=R.data()[0][0],V=U.trace,te=T.traceIs(V,"pie-like"),J=!D._inHover&&j._context.edits.legendText&&!te,K=D._maxNameLength;U.groupTitle?(N=U.groupTitle.text,W=U.groupTitle.font):(W=D.font,D.entries?N=U.text:(N=te?U.label:V.name,V._meta&&(N=k.templateString(N,V._meta))));var X=k.ensureSingle(R,"text",F+"text");X.attr("text-anchor","start").call(s.font,W).text(J?S(N,K):N);var Z=D.indentation+D.itemwidth+2*r.itemGap;i.positionText(X,Z,0),J?X.call(i.makeEditable,{gd:j,text:N}).call(E,R,j,D).on("edit",function($){this.text(S($,K)).call(E,R,j,D);var re=U.trace._fullInput||{},oe={};if(T.hasTransform(re,"groupby")){var ie=T.getTransformIndices(re,"groupby"),ue=ie[ie.length-1],me=k.keyedContainer(re,"transforms["+ue+"].styles","target","value.name");me.set(U.trace._group,$),oe=me.constructUpdate()}else oe.name=$;return re._isShape?T.call("_guiRelayout",j,"shapes["+V.index+"].name",oe.name):T.call("_guiRestyle",j,oe,V.index)}):E(X,R,j,D)}function S(R,j){var D=Math.max(4,j);if(R&&R.trim().length>=D/2)return R;for(var N=D-(R=R||"").length;N>0;N--)R+=" ";return R}function w(R,j,D){var N,W=j._context.doubleClickDelay,F=1,U=k.ensureSingle(R,"rect",D+"toggle",function(V){j._context.staticPlot||V.style("cursor","pointer").attr("pointer-events","all"),V.call(t.fill,"rgba(0,0,0,0)")});j._context.staticPlot||(U.on("mousedown",function(){(N=new Date().getTime())-j._legendMouseDownTime<W?F+=1:(F=1,j._legendMouseDownTime=N)}),U.on("mouseup",function(){if(!j._dragged&&!j._editing){var V=j._fullLayout[D];new Date().getTime()-j._legendMouseDownTime>W&&(F=Math.max(F-1,1)),_(j,V,R,F,M.event)}}))}function E(R,j,D,N,W){N._inHover&&R.attr("data-notex",!0),i.convertToTspans(R,D,function(){(function(F,U,V,te){var J=F.data()[0][0];if(V._inHover||!J||J.trace.showlegend){var K=F.select("g[class*=math-group]"),X=K.node(),Z=O(V);V||(V=U._fullLayout[Z]);var $,re,oe=V.borderwidth,ie=(te===p?V.title.font:J.groupTitle?J.groupTitle.font:V.font).size*l;if(X){var ue=s.bBox(X);$=ue.height,re=ue.width,te===p?s.setTranslate(K,oe,oe+.75*$):s.setTranslate(K,0,.25*$)}else{var me="."+Z+(te===p?"title":"")+"text",be=F.select(me),ge=i.lineCount(be),de=be.node();if($=ie*ge,re=de?s.bBox(de).width:0,te===p)V.title.side==="left"&&(re+=2*r.itemGap),i.positionText(be,oe+r.titlePad,oe+ie);else{var ve=2*r.itemGap+V.indentation+V.itemwidth;J.groupTitle&&(ve=r.itemGap,re-=V.indentation+V.itemwidth),i.positionText(be,ve,-ie*((ge-1)/2-.3))}}te===p?(V._titleWidth=re,V._titleHeight=$):(J.lineHeight=ie,J.height=Math.max($,16)+3,J.width=re)}else F.remove()})(j,D,N,W)})}function P(R){return k.isRightAnchor(R)?"right":k.isCenterAnchor(R)?"center":"left"}function C(R){return k.isBottomAnchor(R)?"bottom":k.isMiddleAnchor(R)?"middle":"top"}function O(R){return R._id||"legend"}ee.exports=function(R,j){if(j)m(R,j);else{var D=R._fullLayout,N=D._legends;D._infolayer.selectAll('[class^="legend"]').each(function(){var U=M.select(this),V=U.attr("class").split(" ")[0];V.match(v)&&N.indexOf(V)===-1&&U.remove()});for(var W=0;W<N.length;W++){var F=N[W];m(R,R._fullLayout[F])}}}},35456:function(ee,z,e){"use strict";var M=e(24040),k=e(42451);ee.exports=function(o,T,b){var h,s,t=T._inHover,i=k.isGrouped(T),n=k.isReversed(T),r={},a=[],l=!1,u={},d=0,c=0;function x(N,W,F){if(T.visible!==!1&&(!b||N===T._id))if(W!==""&&k.isGrouped(T))a.indexOf(W)===-1?(a.push(W),l=!0,r[W]=[F]):r[W].push(F);else{var U="~~i"+d;a.push(U),r[U]=[F],d++}}for(h=0;h<o.length;h++){var g=o[h],p=g[0],v=p.trace,m=v.legend,y=v.legendgroup;if(t||v.visible&&v.showlegend)if(M.traceIs(v,"pie-like"))for(u[y]||(u[y]={}),s=0;s<g.length;s++){var _=g[s].label;u[y][_]||(x(m,y,{label:_,color:g[s].color,i:g[s].i,trace:v,pts:g[s].pts}),u[y][_]=!0,c=Math.max(c,(_||"").length))}else x(m,y,p),c=Math.max(c,(v.name||"").length)}if(!a.length)return[];var f=!l||!i,S=[];for(h=0;h<a.length;h++){var w=r[a[h]];f?S.push(w[0]):S.push(w)}for(f&&(S=[S]),h=0;h<S.length;h++){var E=1/0;for(s=0;s<S[h].length;s++){var P=S[h][s].trace.legendrank;E>P&&(E=P)}S[h][0]._groupMinRank=E,S[h][0]._preGroupSort=h}var C=function(N,W){return N.trace.legendrank-W.trace.legendrank||N._preSort-W._preSort};for(S.forEach(function(N,W){N[0]._preGroupSort=W}),S.sort(function(N,W){return N[0]._groupMinRank-W[0]._groupMinRank||N[0]._preGroupSort-W[0]._preGroupSort}),h=0;h<S.length;h++){S[h].forEach(function(N,W){N._preSort=W}),S[h].sort(C);var O=S[h][0].trace,R=null;for(s=0;s<S[h].length;s++){var j=S[h][s].trace.legendgrouptitle;if(j&&j.text){R=j,t&&(j.font=T._groupTitleFont);break}}if(n&&S[h].reverse(),R){var D=!1;for(s=0;s<S[h].length;s++)if(M.traceIs(S[h][s].trace,"pie-like")){D=!0;break}S[h].unshift({i:-1,groupTitle:R,noClick:D,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:T.groupclick==="toggleitem"||O.visible}})}for(s=0;s<S[h].length;s++)S[h][s]=[S[h][s]]}return T._lgroupsLength=S.length,T._maxNameLength=c,S}},33048:function(ee,z,e){"use strict";var M=e(24040),k=e(3400),o=k.pushUnique,T=!0;ee.exports=function(b,h,s){var t=h._fullLayout;if(!h._dragged&&!h._editing){var i,n=t.legend.itemclick,r=t.legend.itemdoubleclick,a=t.legend.groupclick;if(s===1&&n==="toggle"&&r==="toggleothers"&&T&&h.data&&h._context.showTips&&k.notifier(k._(h,"Double-click on legend to isolate one trace"),"long"),T=!1,s===1?i=n:s===2&&(i=r),i){var l=a==="togglegroup",u=t.hiddenlabels?t.hiddenlabels.slice():[],d=b.data()[0][0];if(!d.groupTitle||!d.noClick){var c=h._fullData,x=(t.shapes||[]).filter(function(Te){return Te.showlegend}),g=c.concat(x),p=d.trace;p._isShape&&(p=p._fullInput);var v,m,y,_,f,S=p.legendgroup,w={},E=[],P=[],C=[],O=(t.shapes||[]).map(function(Te){return Te._input}),R=!1,j=p.legend,D=p._fullInput;if(D&&D._isShape||!M.traceIs(p,"pie-like")){var N,W=S&&S.length,F=[];if(W)for(v=0;v<g.length;v++)(N=g[v]).visible&&N.legendgroup===S&&F.push(v);if(i==="toggle"){var U;switch(p.visible){case!0:U="legendonly";break;case!1:U=!1;break;case"legendonly":U=!0}if(W)if(l)for(v=0;v<g.length;v++){var V=g[v];V.visible!==!1&&V.legendgroup===S&&_e(V,U)}else _e(p,U);else _e(p,U)}else if(i==="toggleothers"){var te,J,K,X,Z=!0;for(v=0;v<g.length;v++)if(te=(X=g[v])===p,J=X.showlegend!==!0,!(te||J||W&&X.legendgroup===S||X.legend!==j||X.visible!==!0||M.traceIs(X,"notLegendIsolatable"))){Z=!1;break}for(v=0;v<g.length;v++)if((X=g[v]).visible!==!1&&X.legend===j&&!M.traceIs(X,"notLegendIsolatable"))switch(p.visible){case"legendonly":_e(X,!0);break;case!0:K=!!Z||"legendonly",te=X===p,J=X.showlegend!==!0&&!X.legendgroup,_e(X,!!(te||W&&X.legendgroup===S||J)||K)}}for(v=0;v<P.length;v++)if(y=P[v]){var $=y.constructUpdate(),re=Object.keys($);for(m=0;m<re.length;m++)_=re[m],(w[_]=w[_]||[])[C[v]]=$[_]}for(f=Object.keys(w),v=0;v<f.length;v++)for(_=f[v],m=0;m<E.length;m++)w[_].hasOwnProperty(m)||(w[_][m]=void 0);R?M.call("_guiUpdate",h,w,{shapes:O},E):M.call("_guiRestyle",h,w,E)}else{var oe=d.label,ie=u.indexOf(oe);if(i==="toggle")ie===-1?u.push(oe):u.splice(ie,1);else if(i==="toggleothers"){var ue=ie!==-1,me=[];for(v=0;v<h.calcdata.length;v++){var be=h.calcdata[v];for(m=0;m<be.length;m++){var ge=be[m].label;j===be[0].trace.legend&&oe!==ge&&(u.indexOf(ge)===-1&&(ue=!0),o(u,ge),me.push(ge))}}if(!ue)for(var de=0;de<me.length;de++){var ve=u.indexOf(me[de]);ve!==-1&&u.splice(ve,1)}}M.call("_guiRelayout",h,"hiddenlabels",u)}}}}function pe(Te,le){var ae=E.indexOf(Te),he=w.visible;return he||(he=w.visible=[]),E.indexOf(Te)===-1&&(E.push(Te),ae=E.length-1),he[ae]=le,ae}function _e(Te,le){if(!d.groupTitle||l){var ae,he=Te._fullInput||Te,Se=he._isShape,ke=he.index;if(ke===void 0&&(ke=he._index),M.hasTransform(he,"groupby")){var Me=P[ke];if(!Me){var Ee=M.getTransformIndices(he,"groupby"),De=Ee[Ee.length-1];Me=k.keyedContainer(he,"transforms["+De+"].styles","target","value.visible"),P[ke]=Me}var fe=Me.get(Te._group);fe===void 0&&(fe=!0),fe!==!1&&Me.set(Te._group,le),C[ke]=pe(ke,he.visible!==!1)}else{var xe=he.visible!==!1&&le;Se?(ae=xe,O[ke].visible=ae,R=!0):pe(ke,xe)}}}}},42451:function(ee,z){"use strict";z.isGrouped=function(e){return(e.traceorder||"").indexOf("grouped")!==-1},z.isVertical=function(e){return e.orientation!=="h"},z.isReversed=function(e){return(e.traceorder||"").indexOf("reversed")!==-1}},2780:function(ee,z,e){"use strict";ee.exports={moduleType:"component",name:"legend",layoutAttributes:e(3800),supplyLayoutDefaults:e(77864),draw:e(31140),style:e(2012)}},2012:function(ee,z,e){"use strict";var M=e(33428),k=e(24040),o=e(3400),T=o.strTranslate,b=e(43616),h=e(76308),s=e(94288).extractOpts,t=e(43028),i=e(10528),n=e(69656).castOption,r=e(65196);function a(d,c){return(c?"radial":"horizontal")+(d?"":"reversed")}function l(d){var c=d[0].trace,x=c.contours,g=t.hasLines(c),p=t.hasMarkers(c),v=c.visible&&c.fill&&c.fill!=="none",m=!1,y=!1;if(x){var _=x.coloring;_==="lines"?m=!0:g=_==="none"||_==="heatmap"||x.showlines,x.type==="constraint"?v=x._operation!=="=":_!=="fill"&&_!=="heatmap"||(y=!0)}return{showMarker:p,showLine:g,showFill:v,showGradientLine:m,showGradientFill:y,anyLine:g||m,anyFill:v||y}}function u(d,c,x){return d&&o.isArrayOrTypedArray(d)?c:d>x?x:d}ee.exports=function(d,c,x){var g=c._fullLayout;x||(x=g.legend);var p=x.itemsizing==="constant",v=x.itemwidth,m=(v+2*r.itemGap)/2,y=T(m,0),_=function(w,E,P,C){var O;if(w+1)O=w;else{if(!(E&&E.width>0))return 0;O=E.width}return p?C:Math.min(O,P)};function f(w,E,P){var C=w[0].trace,O=C.marker||{},R=O.line||{},j=O.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",D=P?C.visible&&C.type===P:k.traceIs(C,"bar"),N=M.select(E).select("g.legendpoints").selectAll("path.legend"+P).data(D?[w]:[]);N.enter().append("path").classed("legend"+P,!0).attr("d",j).attr("transform",y),N.exit().remove(),N.each(function(W){var F=M.select(this),U=W[0],V=_(U.mlw,O.line,5,2);F.style("stroke-width",V+"px");var te=U.mcc;if(!x._inHover&&"mc"in U){var J=s(O),K=J.mid;K===void 0&&(K=(J.max+J.min)/2),te=b.tryColorscale(O,"")(K)}var X=te||U.mc||O.color,Z=O.pattern,$=Z&&b.getPatternAttr(Z.shape,0,"");if($){var re=b.getPatternAttr(Z.bgcolor,0,null),oe=b.getPatternAttr(Z.fgcolor,0,null),ie=Z.fgopacity,ue=u(Z.size,8,10),me=u(Z.solidity,.5,1),be="legend-"+C.uid;F.call(b.pattern,"legend",c,be,$,ue,me,te,Z.fillmode,re,oe,ie)}else F.call(h.fill,X);V&&h.stroke(F,U.mlc||R.color)})}function S(w,E,P){var C=w[0],O=C.trace,R=P?O.visible&&O.type===P:k.traceIs(O,P),j=M.select(E).select("g.legendpoints").selectAll("path.legend"+P).data(R?[w]:[]);if(j.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),j.exit().remove(),j.size()){var D=O.marker||{},N=_(n(D.line.width,C.pts),D.line,5,2),W="pieLike",F=o.minExtend(O,{marker:{line:{width:N}}},W),U=o.minExtend(C,{trace:F},W);i(j,U,F,c)}}d.each(function(w){var E=M.select(this),P=o.ensureSingle(E,"g","layers");P.style("opacity",w[0].trace.opacity);var C=x.indentation,O=x.valign,R=w[0].lineHeight,j=w[0].height;if(O==="middle"&&C===0||!R||!j)P.attr("transform",null);else{var D={top:1,bottom:-1}[O]*(.5*(R-j+3))||0,N=x.indentation;P.attr("transform",T(N,D))}P.selectAll("g.legendfill").data([w]).enter().append("g").classed("legendfill",!0),P.selectAll("g.legendlines").data([w]).enter().append("g").classed("legendlines",!0);var W=P.selectAll("g.legendsymbols").data([w]);W.enter().append("g").classed("legendsymbols",!0),W.selectAll("g.legendpoints").data([w]).enter().append("g").classed("legendpoints",!0)}).each(function(w){var E,P=w[0].trace,C=[];if(P.visible)switch(P.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var O=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);O.enter().append("path").classed("legend3dandfriends",!0).attr("transform",y).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(R,j){var D,N=M.select(this),W=s(P),F=W.colorscale,U=W.reversescale;if(F){if(!E){var V=F.length;D=j===0?F[U?V-1:0][1]:j===1?F[U?0:V-1][1]:F[Math.floor((V-1)/2)][1]}}else{var te=P.vertexcolor||P.facecolor||P.color;D=o.isArrayOrTypedArray(te)?te[j]||te[0]:te}N.attr("d",R[0]),D?N.call(h.fill,D):N.call(function(J){if(J.size()){var K="legendfill-"+P.uid;b.gradient(J,c,K,a(U,E==="radial"),F,"fill")}})})}).each(function(w){var E=w[0].trace,P=E.type==="waterfall";if(w[0]._distinct&&P){var C=w[0].trace[w[0].dir].marker;return w[0].mc=C.color,w[0].mlw=C.line.width,w[0].mlc=C.line.color,f(w,this,"waterfall")}var O=[];E.visible&&P&&(O=w[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var R=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(O);R.enter().append("path").classed("legendwaterfall",!0).attr("transform",y).style("stroke-miterlimit",1),R.exit().remove(),R.each(function(j){var D=M.select(this),N=E[j[0]].marker,W=_(void 0,N.line,5,2);D.attr("d",j[1]).style("stroke-width",W+"px").call(h.fill,N.color),W&&D.call(h.stroke,N.line.color)})}).each(function(w){f(w,this,"funnel")}).each(function(w){f(w,this)}).each(function(w){var E=w[0].trace,P=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&k.traceIs(E,"box-violin")?[w]:[]);P.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),P.exit().remove(),P.each(function(){var C=M.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||h.opacity(E.fillcolor)!==0||h.opacity((E.line||{}).color)!==0){var O=_(void 0,E.line,5,2);C.style("stroke-width",O+"px").call(h.fill,E.fillcolor),O&&h.stroke(C,E.line.color)}else{var R=o.minExtend(E,{marker:{size:p?12:o.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});P.call(b.pointStyle,R,c)}})}).each(function(w){S(w,this,"funnelarea")}).each(function(w){S(w,this,"pie")}).each(function(w){var E,P,C=l(w),O=C.showFill,R=C.showLine,j=C.showGradientLine,D=C.showGradientFill,N=C.anyFill,W=C.anyLine,F=w[0],U=F.trace,V=s(U),te=V.colorscale,J=V.reversescale,K=t.hasMarkers(U)||!N?"M5,0":W?"M5,-2":"M5,-3",X=M.select(this),Z=X.select(".legendfill").selectAll("path").data(O||D?[w]:[]);if(Z.enter().append("path").classed("js-fill",!0),Z.exit().remove(),Z.attr("d",K+"h"+v+"v6h-"+v+"z").call(function(oe){if(oe.size())if(O)b.fillGroupStyle(oe,c,!0);else{var ie="legendfill-"+U.uid;b.gradient(oe,c,ie,a(J),te,"fill")}}),R||j){var $=_(void 0,U.line,10,5);P=o.minExtend(U,{line:{width:$}}),E=[o.minExtend(F,{trace:P})]}var re=X.select(".legendlines").selectAll("path").data(R||j?[E]:[]);re.enter().append("path").classed("js-line",!0),re.exit().remove(),re.attr("d",K+(j?"l"+v+",0.0001":"h"+v)).call(R?b.lineGroupStyle:function(oe){if(oe.size()){var ie="legendline-"+U.uid;b.lineGroupStyle(oe),b.gradient(oe,c,ie,a(J),te,"stroke")}})}).each(function(w){var E,P,C=l(w),O=C.anyFill,R=C.anyLine,j=C.showLine,D=C.showMarker,N=w[0],W=N.trace,F=!D&&!R&&!O&&t.hasText(W);function U(re,oe,ie,ue){var me=o.nestedProperty(W,re).get(),be=o.isArrayOrTypedArray(me)&&oe?oe(me):me;if(p&&be&&ue!==void 0&&(be=ue),ie){if(be<ie[0])return ie[0];if(be>ie[1])return ie[1]}return be}function V(re){return N._distinct&&N.index&&re[N.index]?re[N.index]:re[0]}if(D||F||j){var te={},J={};if(D){te.mc=U("marker.color",V),te.mx=U("marker.symbol",V),te.mo=U("marker.opacity",o.mean,[.2,1]),te.mlc=U("marker.line.color",V),te.mlw=U("marker.line.width",o.mean,[0,5],2),J.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var K=U("marker.size",o.mean,[2,16],12);te.ms=K,J.marker.size=K}j&&(J.line={width:U("line.width",V,[0,10],5)}),F&&(te.tx="Aa",te.tp=U("textposition",V),te.ts=10,te.tc=U("textfont.color",V),te.tf=U("textfont.family",V)),E=[o.minExtend(N,te)],(P=o.minExtend(W,J)).selectedpoints=null,P.texttemplate=null}var X=M.select(this).select("g.legendpoints"),Z=X.selectAll("path.scatterpts").data(D?E:[]);Z.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",y),Z.exit().remove(),Z.call(b.pointStyle,P,c),D&&(E[0].mrc=3);var $=X.selectAll("g.pointtext").data(F?E:[]);$.enter().append("g").classed("pointtext",!0).append("text").attr("transform",y),$.exit().remove(),$.selectAll("text").call(b.textPointStyle,P,c)}).each(function(w){var E=w[0].trace,P=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[w,w]:[]);P.enter().append("path").classed("legendcandle",!0).attr("d",function(C,O){return O?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",y).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(C,O){var R=M.select(this),j=E[O?"increasing":"decreasing"],D=_(void 0,j.line,5,2);R.style("stroke-width",D+"px").call(h.fill,j.fillcolor),D&&h.stroke(R,j.line.color)})}).each(function(w){var E=w[0].trace,P=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[w,w]:[]);P.enter().append("path").classed("legendohlc",!0).attr("d",function(C,O){return O?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",y).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(C,O){var R=M.select(this),j=E[O?"increasing":"decreasing"],D=_(void 0,j.line,5,2);R.style("fill","none").call(b.dashLine,j.line.dash,D),D&&h.stroke(R,j.line.color)})})}},66540:function(ee,z,e){"use strict";e(76052),ee.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(ee,z,e){"use strict";var M=e(24040),k=e(7316),o=e(79811),T=e(9224),b=e(4016).eraseActiveShape,h=e(3400),s=h._,t=ee.exports={};function i(g,p){var v,m,y=p.currentTarget,_=y.getAttribute("data-attr"),f=y.getAttribute("data-val")||!0,S=g._fullLayout,w={},E=o.list(g,null,!0),P=S._cartesianSpikesEnabled;if(_==="zoom"){var C,O=f==="in"?.5:2,R=(1+O)/2,j=(1-O)/2;for(m=0;m<E.length;m++)if(!(v=E[m]).fixedrange)if(C=v._name,f==="auto")w[C+".autorange"]=!0;else if(f==="reset")v._rangeInitial0===void 0&&v._rangeInitial1===void 0?w[C+".autorange"]=!0:v._rangeInitial0===void 0?(w[C+".autorange"]=v._autorangeInitial,w[C+".range"]=[null,v._rangeInitial1]):v._rangeInitial1===void 0?(w[C+".range"]=[v._rangeInitial0,null],w[C+".autorange"]=v._autorangeInitial):w[C+".range"]=[v._rangeInitial0,v._rangeInitial1],v._showSpikeInitial!==void 0&&(w[C+".showspikes"]=v._showSpikeInitial,P!=="on"||v._showSpikeInitial||(P="off"));else{var D=[v.r2l(v.range[0]),v.r2l(v.range[1])],N=[R*D[0]+j*D[1],R*D[1]+j*D[0]];w[C+".range[0]"]=v.l2r(N[0]),w[C+".range[1]"]=v.l2r(N[1])}}else _!=="hovermode"||f!=="x"&&f!=="y"||(f=S._isHoriz?"y":"x",y.setAttribute("data-val",f)),w[_]=f;S._cartesianSpikesEnabled=P,M.call("_guiRelayout",g,w)}function n(g,p){for(var v=p.currentTarget,m=v.getAttribute("data-attr"),y=v.getAttribute("data-val")||!0,_=g._fullLayout._subplots.gl3d||[],f={},S=m.split("."),w=0;w<_.length;w++)f[_[w]+"."+S[1]]=y;var E=y==="pan"?y:"zoom";f.dragmode=E,M.call("_guiRelayout",g,f)}function r(g,p){for(var v=p.currentTarget.getAttribute("data-attr"),m=v==="resetLastSave",y=v==="resetDefault",_=g._fullLayout,f=_._subplots.gl3d||[],S={},w=0;w<f.length;w++){var E,P=f[w],C=P+".camera",O=P+".aspectratio",R=P+".aspectmode",j=_[P]._scene;m?(S[C+".up"]=j.viewInitial.up,S[C+".eye"]=j.viewInitial.eye,S[C+".center"]=j.viewInitial.center,E=!0):y&&(S[C+".up"]=null,S[C+".eye"]=null,S[C+".center"]=null,E=!0),E&&(S[O+".x"]=j.viewInitial.aspectratio.x,S[O+".y"]=j.viewInitial.aspectratio.y,S[O+".z"]=j.viewInitial.aspectratio.z,S[R]=j.viewInitial.aspectmode)}M.call("_guiRelayout",g,S)}function a(g,p){var v=p.currentTarget,m=v._previousVal,y=g._fullLayout,_=y._subplots.gl3d||[],f=["xaxis","yaxis","zaxis"],S={},w={};if(m)w=m,v._previousVal=null;else{for(var E=0;E<_.length;E++){var P=_[E],C=y[P],O=P+".hovermode";S[O]=C.hovermode,w[O]=!1;for(var R=0;R<3;R++){var j=f[R],D=P+"."+j+".showspikes";w[D]=!1,S[D]=C[j].showspikes}}v._previousVal=S}return w}function l(g,p){for(var v=p.currentTarget,m=v.getAttribute("data-attr"),y=v.getAttribute("data-val")||!0,_=g._fullLayout,f=_._subplots.geo||[],S=0;S<f.length;S++){var w=f[S],E=_[w];if(m==="zoom"){var P=E.projection.scale,C=y==="in"?2*P:.5*P;M.call("_guiRelayout",g,w+".projection.scale",C)}}m==="reset"&&x(g,"geo")}function u(g){var p=g._fullLayout;return!p.hovermode&&(p._has("cartesian")?p._isHoriz?"y":"x":"closest")}function d(g){var p=u(g);M.call("_guiRelayout",g,"hovermode",p)}function c(g,p){for(var v=p.currentTarget.getAttribute("data-val"),m=g._fullLayout,y=m._subplots.mapbox||[],_={},f=0;f<y.length;f++){var S=y[f],w=m[S].zoom,E=v==="in"?1.05*w:w/1.05;_[S+".zoom"]=E}M.call("_guiRelayout",g,_)}function x(g,p){for(var v=g._fullLayout,m=v._subplots[p]||[],y={},_=0;_<m.length;_++)for(var f=m[_],S=v[f]._subplot.viewInitial,w=Object.keys(S),E=0;E<w.length;E++){var P=w[E];y[f+"."+P]=S[P]}M.call("_guiRelayout",g,y)}t.toImage={name:"toImage",title:function(g){var p=(g._context.toImageButtonOptions||{}).format||"png";return s(g,p==="png"?"Download plot as a png":"Download plot")},icon:T.camera,click:function(g){var p=g._context.toImageButtonOptions,v={format:p.format||"png"};h.notifier(s(g,"Taking snapshot - this may take a few seconds"),"long"),v.format!=="svg"&&h.isIE()&&(h.notifier(s(g,"IE only supports svg.  Changing format to svg."),"long"),v.format="svg"),["filename","width","height","scale"].forEach(function(m){m in p&&(v[m]=p[m])}),M.call("downloadImage",g,v).then(function(m){h.notifier(s(g,"Snapshot succeeded")+" - "+m,"long")}).catch(function(){h.notifier(s(g,"Sorry, there was a problem downloading your snapshot!"),"long")})}},t.sendDataToCloud={name:"sendDataToCloud",title:function(g){return s(g,"Edit in Chart Studio")},icon:T.disk,click:function(g){k.sendDataToCloud(g)}},t.editInChartStudio={name:"editInChartStudio",title:function(g){return s(g,"Edit in Chart Studio")},icon:T.pencil,click:function(g){k.sendDataToCloud(g)}},t.zoom2d={name:"zoom2d",_cat:"zoom",title:function(g){return s(g,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:i},t.pan2d={name:"pan2d",_cat:"pan",title:function(g){return s(g,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:i},t.select2d={name:"select2d",_cat:"select",title:function(g){return s(g,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:i},t.lasso2d={name:"lasso2d",_cat:"lasso",title:function(g){return s(g,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:i},t.drawclosedpath={name:"drawclosedpath",title:function(g){return s(g,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:i},t.drawopenpath={name:"drawopenpath",title:function(g){return s(g,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:i},t.drawline={name:"drawline",title:function(g){return s(g,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:i},t.drawrect={name:"drawrect",title:function(g){return s(g,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:i},t.drawcircle={name:"drawcircle",title:function(g){return s(g,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:i},t.eraseshape={name:"eraseshape",title:function(g){return s(g,"Erase active shape")},icon:T.eraseshape,click:b},t.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(g){return s(g,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:i},t.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(g){return s(g,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:i},t.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(g){return s(g,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:i},t.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(g){return s(g,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:i},t.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(g){return s(g,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:i},t.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(g){return s(g,"Compare data on hover")},attr:"hovermode",val:function(g){return g._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:i},t.zoom3d={name:"zoom3d",_cat:"zoom",title:function(g){return s(g,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:n},t.pan3d={name:"pan3d",_cat:"pan",title:function(g){return s(g,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:n},t.orbitRotation={name:"orbitRotation",title:function(g){return s(g,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:n},t.tableRotation={name:"tableRotation",title:function(g){return s(g,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:n},t.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(g){return s(g,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:r},t.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(g){return s(g,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:r},t.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(g,p){var v=a(g,p);M.call("_guiRelayout",g,v)}},t.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(g){return s(g,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:l},t.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(g){return s(g,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:l},t.resetGeo={name:"resetGeo",_cat:"reset",title:function(g){return s(g,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:l},t.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:d},t.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:d},t.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:d},t.resetViewSankey={name:"resetSankeyGroup",title:function(g){return s(g,"Reset view")},icon:T.home,click:function(g){for(var p={"node.groups":[],"node.x":[],"node.y":[]},v=0;v<g._fullData.length;v++){var m=g._fullData[v]._viewInitial;p["node.groups"].push(m.node.groups.slice()),p["node.x"].push(m.node.x.slice()),p["node.y"].push(m.node.y.slice())}M.call("restyle",g,p)}},t.toggleHover={name:"toggleHover",title:function(g){return s(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(g,p){var v=a(g,p);v.hovermode=u(g),M.call("_guiRelayout",g,v)}},t.resetViews={name:"resetViews",title:function(g){return s(g,"Reset views")},icon:T.home,click:function(g,p){var v=p.currentTarget;v.setAttribute("data-attr","zoom"),v.setAttribute("data-val","reset"),i(g,p),v.setAttribute("data-attr","resetLastSave"),r(g,p),x(g,"geo"),x(g,"mapbox")}},t.toggleSpikelines={name:"toggleSpikelines",title:function(g){return s(g,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(g){var p=g._fullLayout,v=p._cartesianSpikesEnabled;p._cartesianSpikesEnabled=v==="on"?"off":"on",M.call("_guiRelayout",g,function(m){for(var y=m._fullLayout._cartesianSpikesEnabled==="on",_=o.list(m,null,!0),f={},S=0;S<_.length;S++){var w=_[S];f[w._name+".showspikes"]=!!y||w._showSpikeInitial}return f}(g))}},t.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(g){return s(g,"Reset view")},attr:"reset",icon:T.home,click:function(g){x(g,"mapbox")}},t.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(g){return s(g,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:c},t.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(g){return s(g,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:c}},76052:function(ee,z,e){"use strict";var M=e(44248),k=Object.keys(M),o=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(o),b=[];k.forEach(function(h){(function(s){if(T.indexOf(s._cat||s.name)===-1){var t=s.name,i=(s._cat||s.name).toLowerCase();b.indexOf(t)===-1&&b.push(t),b.indexOf(i)===-1&&b.push(i)}})(M[h])}),b.sort(),ee.exports={DRAW_MODES:o,backButtons:T,foreButtons:b}},90824:function(ee,z,e){"use strict";var M=e(3400),k=e(76308),o=e(31780),T=e(66540);ee.exports=function(b,h){var s=b.modebar||{},t=o.newContainer(h,"modebar");function i(r,a){return M.coerce(s,t,T,r,a)}i("orientation"),i("bgcolor",k.addOpacity(h.paper_bgcolor,.5));var n=k.contrast(k.rgb(h.modebar.bgcolor));i("color",k.addOpacity(n,.3)),i("activecolor",k.addOpacity(n,.7)),i("uirevision",h.uirevision),i("add"),i("remove")}},45460:function(ee,z,e){"use strict";ee.exports={moduleType:"component",name:"modebar",layoutAttributes:e(66540),supplyLayoutDefaults:e(90824),manage:e(18816)}},18816:function(ee,z,e){"use strict";var M=e(79811),k=e(43028),o=e(24040),T=e(10624).isUnifiedHover,b=e(66400),h=e(44248),s=e(76052).DRAW_MODES,t=e(3400).extendDeep;ee.exports=function(i){var n=i._fullLayout,r=i._context,a=n._modeBar;if(r.displayModeBar||r.watermark){if(!Array.isArray(r.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(r.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var l,u=r.modeBarButtons;l=Array.isArray(u)&&u.length?function(d){for(var c=t([],d),x=0;x<c.length;x++)for(var g=c[x],p=0;p<g.length;p++){var v=g[p];if(typeof v=="string"){if(h[v]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));c[x][p]=h[v]}}return c}(u):!r.displayModeBar&&r.watermark?[]:function(d){var c=d._fullLayout,x=d._fullData,g=d._context;function p(me,be){if(typeof be=="string"){if(be.toLowerCase()===me.toLowerCase())return!0}else{var ge=be.name,de=be._cat||be.name;if(ge===me||de===me.toLowerCase())return!0}return!1}var v=c.modebar.add;typeof v=="string"&&(v=[v]);var m=c.modebar.remove;typeof m=="string"&&(m=[m]);var y=g.modeBarButtonsToAdd.concat(v.filter(function(me){for(var be=0;be<g.modeBarButtonsToRemove.length;be++)if(p(me,g.modeBarButtonsToRemove[be]))return!1;return!0})),_=g.modeBarButtonsToRemove.concat(m.filter(function(me){for(var be=0;be<g.modeBarButtonsToAdd.length;be++)if(p(me,g.modeBarButtonsToAdd[be]))return!1;return!0})),f=c._has("cartesian"),S=c._has("gl3d"),w=c._has("geo"),E=c._has("pie"),P=c._has("funnelarea"),C=c._has("gl2d"),O=c._has("ternary"),R=c._has("mapbox"),j=c._has("polar"),D=c._has("smith"),N=c._has("sankey"),W=function(me){for(var be=M.list({_fullLayout:me},null,!0),ge=0;ge<be.length;ge++)if(!be[ge].fixedrange)return!1;return!0}(c),F=T(c.hovermode),U=[];function V(me){if(me.length){for(var be=[],ge=0;ge<me.length;ge++){for(var de=me[ge],ve=h[de],pe=ve.name.toLowerCase(),_e=(ve._cat||ve.name).toLowerCase(),Te=!1,le=0;le<_.length;le++){var ae=_[le].toLowerCase();if(ae===pe||ae===_e){Te=!0;break}}Te||be.push(h[de])}U.push(be)}}var te=["toImage"];g.showEditInChartStudio?te.push("editInChartStudio"):g.showSendToCloud&&te.push("sendDataToCloud"),V(te);var J=[],K=[],X=[],Z=[];(f||C||E||P||O)+w+S+R+j+D>1?(K=["toggleHover"],X=["resetViews"]):w?(J=["zoomInGeo","zoomOutGeo"],K=["hoverClosestGeo"],X=["resetGeo"]):S?(K=["hoverClosest3d"],X=["resetCameraDefault3d","resetCameraLastSave3d"]):R?(J=["zoomInMapbox","zoomOutMapbox"],K=["toggleHover"],X=["resetViewMapbox"]):C?K=["hoverClosestGl2d"]:E?K=["hoverClosestPie"]:N?(K=["hoverClosestCartesian","hoverCompareCartesian"],X=["resetViewSankey"]):K=["toggleHover"],f&&(K=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(me){for(var be=0;be<me.length;be++)if(!o.traceIs(me[be],"noHover"))return!1;return!0}(x)||F)&&(K=[]),!f&&!C||W||(J=["zoomIn2d","zoomOut2d","autoScale2d"],X[0]!=="resetViews"&&(X=["resetScale2d"])),S?Z=["zoom3d","pan3d","orbitRotation","tableRotation"]:(f||C)&&!W||O?Z=["zoom2d","pan2d"]:R||w?Z=["pan2d"]:j&&(Z=["zoom2d"]),function(me){for(var be=!1,ge=0;ge<me.length&&!be;ge++){var de=me[ge];de._module&&de._module.selectPoints&&(o.traceIs(de,"scatter-like")?(k.hasMarkers(de)||k.hasText(de))&&(be=!0):o.traceIs(de,"box-violin")&&de.boxpoints!=="all"&&de.points!=="all"||(be=!0))}return be}(x)&&Z.push("select2d","lasso2d");var $=[],re=function(me){$.indexOf(me)===-1&&K.indexOf(me)!==-1&&$.push(me)};if(Array.isArray(y)){for(var oe=[],ie=0;ie<y.length;ie++){var ue=y[ie];typeof ue=="string"?(ue=ue.toLowerCase(),s.indexOf(ue)!==-1?(c._has("mapbox")||c._has("cartesian"))&&Z.push(ue):ue==="togglespikelines"?re("toggleSpikelines"):ue==="togglehover"?re("toggleHover"):ue==="hovercompare"?re("hoverCompareCartesian"):ue==="hoverclosest"?(re("hoverClosestCartesian"),re("hoverClosestGeo"),re("hoverClosest3d"),re("hoverClosestGl2d"),re("hoverClosestPie")):ue==="v1hovermode"&&(re("toggleHover"),re("hoverClosestCartesian"),re("hoverCompareCartesian"),re("hoverClosestGeo"),re("hoverClosest3d"),re("hoverClosestGl2d"),re("hoverClosestPie"))):oe.push(ue)}y=oe}return V(Z),V(J.concat(X)),V($),function(me,be){if(be.length)if(Array.isArray(be[0]))for(var ge=0;ge<be.length;ge++)me.push(be[ge]);else me.push(be);return me}(U,y)}(i),a?a.update(i,l):n._modeBar=b(i,l)}else a&&(a.destroy(),delete n._modeBar)}},66400:function(ee,z,e){"use strict";var M=e(33428),k=e(38248),o=e(3400),T=e(9224),b=e(25788).version,h=new DOMParser;function s(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var t=s.prototype;t.update=function(i,n){this.graphInfo=i;var r=this.graphInfo._context,a=this.graphInfo._fullLayout,l="modebar-"+a._uid;this.element.setAttribute("id",l),this._uid=l,this.element.className="modebar",r.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),a.modebar.orientation==="v"&&(this.element.className+=" vertical",n=n.reverse());var u=a.modebar,d=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";o.deleteRelatedStyleRule(l),o.addRelatedStyleRule(l,d+"#"+l+" .modebar-group","background-color: "+u.bgcolor),o.addRelatedStyleRule(l,"#"+l+" .modebar-btn .icon path","fill: "+u.color),o.addRelatedStyleRule(l,"#"+l+" .modebar-btn:hover .icon path","fill: "+u.activecolor),o.addRelatedStyleRule(l,"#"+l+" .modebar-btn.active .icon path","fill: "+u.activecolor);var c=!this.hasButtons(n),x=this.hasLogo!==r.displaylogo,g=this.locale!==r.locale;if(this.locale=r.locale,(c||x||g)&&(this.removeAllButtons(),this.updateButtons(n),r.watermark||r.displaylogo)){var p=this.getLogo();r.watermark&&(p.className=p.className+" watermark"),a.modebar.orientation==="v"?this.element.insertBefore(p,this.element.childNodes[0]):this.element.appendChild(p),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(i){var n=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var a=n.createGroup();r.forEach(function(l){var u=l.name;if(!u)throw new Error("must provide button 'name' in button config");if(n.buttonsNames.indexOf(u)!==-1)throw new Error("button name '"+u+"' is taken");n.buttonsNames.push(u);var d=n.createButton(l);n.buttonElements.push(d),a.appendChild(d)}),n.element.appendChild(a)})},t.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},t.createButton=function(i){var n=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var a=i.title;a===void 0?a=i.name:typeof a=="function"&&(a=a(this.graphInfo)),(a||a===0)&&r.setAttribute("data-title",a),i.attr!==void 0&&r.setAttribute("data-attr",i.attr);var l=i.val;if(l!==void 0&&(typeof l=="function"&&(l=l(this.graphInfo)),r.setAttribute("data-val",l)),typeof i.click!="function")throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(d){i.click(n.graphInfo,d),n.updateActiveButton(d.currentTarget)}),r.setAttribute("data-toggle",i.toggle||!1),i.toggle&&M.select(r).classed("active",!0);var u=i.icon;return typeof u=="function"?r.appendChild(u()):r.appendChild(this.createIcon(u||T.question)),r.setAttribute("data-gravity",i.gravity||"n"),r},t.createIcon=function(i){var n,r=k(i.height)?Number(i.height):i.ascent-i.descent,a="http://www.w3.org/2000/svg";if(i.path){(n=document.createElementNS(a,"svg")).setAttribute("viewBox",[0,0,i.width,r].join(" ")),n.setAttribute("class","icon");var l=document.createElementNS(a,"path");l.setAttribute("d",i.path),i.transform?l.setAttribute("transform",i.transform):i.ascent!==void 0&&l.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),n.appendChild(l)}return i.svg&&(n=h.parseFromString(i.svg,"application/xml").childNodes[0]),n.setAttribute("height","1em"),n.setAttribute("width","1em"),n},t.updateActiveButton=function(i){var n=this.graphInfo._fullLayout,r=i!==void 0?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var l=a.getAttribute("data-val")||!0,u=a.getAttribute("data-attr"),d=a.getAttribute("data-toggle")==="true",c=M.select(a);if(d)u===r&&c.classed("active",!c.classed("active"));else{var x=u===null?u:o.nestedProperty(n,u).get();c.classed("active",x===l)}})},t.hasButtons=function(i){var n=this.buttons;if(!n||i.length!==n.length)return!1;for(var r=0;r<i.length;++r){if(i[r].length!==n[r].length)return!1;for(var a=0;a<i[r].length;a++)if(i[r][a].name!==n[r][a].name)return!1}return!0},t.getLogo=function(){var i=this.createGroup(),n=document.createElement("a");return n.href="https://plotly.com/",n.target="_blank",n.setAttribute("data-title",o._(this.graphInfo,"Produced with Plotly.js")+" (v"+b+")"),n.className="modebar-btn plotlyjsicon modebar-btn--logo",n.appendChild(this.createIcon(T.newplotlylogo)),i.appendChild(n),i},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){o.removeElement(this.container.querySelector(".modebar")),o.deleteRelatedStyleRule(this._uid)},ee.exports=function(i,n){var r=i._fullLayout,a=new s({graphInfo:i,container:r._modebardiv.node(),buttons:n});return r._privateplot&&M.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a}},26680:function(ee,z,e){"use strict";var M=e(25376),k=e(22548),o=(0,e(31780).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ee.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:M({editType:"plot"}),bgcolor:{valType:"color",dflt:k.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(ee){"use strict";ee.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(ee,z,e){"use strict";var M=e(3400),k=e(76308),o=e(31780),T=e(51272),b=e(26680),h=e(85984);function s(t,i,n,r){var a=r.calendar;function l(d,c){return M.coerce(t,i,b.buttons,d,c)}if(l("visible")){var u=l("step");u!=="all"&&(!a||a==="gregorian"||u!=="month"&&u!=="year"?l("stepmode"):i.stepmode="backward",l("count")),l("label")}}ee.exports=function(t,i,n,r,a){var l=t.rangeselector||{},u=o.newContainer(i,"rangeselector");function d(g,p){return M.coerce(l,u,b,g,p)}if(d("visible",T(l,u,{name:"buttons",handleItemDefaults:s,calendar:a}).length>0)){var c=function(g,p,v){for(var m=v.filter(function(S){return p[S].anchor===g._id}),y=0,_=0;_<m.length;_++){var f=p[m[_]].domain;f&&(y=Math.max(f[1],y))}return[g.domain[0],y+h.yPad]}(i,n,r);d("x",c[0]),d("y",c[1]),M.noneOrAll(t,i,["x","y"]),d("xanchor"),d("yanchor"),M.coerceFont(d,"font",n.font);var x=d("bgcolor");d("activecolor",k.contrast(x,h.lightAmount,h.darkAmount)),d("bordercolor"),d("borderwidth")}}},50216:function(ee,z,e){"use strict";var M=e(33428),k=e(24040),o=e(7316),T=e(76308),b=e(43616),h=e(3400),s=h.strTranslate,t=e(72736),i=e(79811),n=e(84284),r=n.LINE_SPACING,a=n.FROM_TL,l=n.FROM_BR,u=e(85984),d=e(48040);function c(p){return p._id}function x(p,v,m){var y=h.ensureSingle(p,"rect","selector-rect",function(_){_.attr("shape-rendering","crispEdges")});y.attr({rx:u.rx,ry:u.ry}),y.call(T.stroke,v.bordercolor).call(T.fill,function(_,f){return f._isActive||f._isHovered?_.activecolor:_.bgcolor}(v,m)).style("stroke-width",v.borderwidth+"px")}function g(p,v,m,y){var _,f;h.ensureSingle(p,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(b.font,v.font).text((_=m,f=y._fullLayout._meta,_.label?f?h.templateString(_.label,f):_.label:_.step==="all"?"all":_.count+_.step.charAt(0))).call(function(S){t.convertToTspans(S,y)})}ee.exports=function(p){var v=p._fullLayout._infolayer.selectAll(".rangeselector").data(function(m){for(var y=i.list(m,"x",!0),_=[],f=0;f<y.length;f++){var S=y[f];S.rangeselector&&S.rangeselector.visible&&_.push(S)}return _}(p),c);v.enter().append("g").classed("rangeselector",!0),v.exit().remove(),v.style({cursor:"pointer","pointer-events":"all"}),v.each(function(m){var y=M.select(this),_=m,f=_.rangeselector,S=y.selectAll("g.button").data(h.filterVisible(f.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(w){var E=M.select(this),P=d(_,w);w._isActive=function(C,O,R){if(O.step==="all")return C.autorange===!0;var j=Object.keys(R);return C.range[0]===R[j[0]]&&C.range[1]===R[j[1]]}(_,w,P),E.call(x,f,w),E.call(g,f,w,p),E.on("click",function(){p._dragged||k.call("_guiRelayout",p,P)}),E.on("mouseover",function(){w._isHovered=!0,E.call(x,f,w)}),E.on("mouseout",function(){w._isHovered=!1,E.call(x,f,w)})}),function(w,E,P,C,O){var R=0,j=0,D=P.borderwidth;E.each(function(){var te=M.select(this).select(".selector-text"),J=P.font.size*r,K=Math.max(J*t.lineCount(te),16)+3;j=Math.max(j,K)}),E.each(function(){var te=M.select(this),J=te.select(".selector-rect"),K=te.select(".selector-text"),X=K.node()&&b.bBox(K.node()).width,Z=P.font.size*r,$=t.lineCount(K),re=Math.max(X+10,u.minButtonWidth);te.attr("transform",s(D+R,D)),J.attr({x:0,y:0,width:re,height:j}),t.positionText(K,re/2,j/2-($-1)*Z/2+3),R+=re+5});var N=w._fullLayout._size,W=N.l+N.w*P.x,F=N.t+N.h*(1-P.y),U="left";h.isRightAnchor(P)&&(W-=R,U="right"),h.isCenterAnchor(P)&&(W-=R/2,U="center");var V="top";h.isBottomAnchor(P)&&(F-=j,V="bottom"),h.isMiddleAnchor(P)&&(F-=j/2,V="middle"),R=Math.ceil(R),j=Math.ceil(j),W=Math.round(W),F=Math.round(F),o.autoMargin(w,C+"-range-selector",{x:P.x,y:P.y,l:R*a[U],r:R*l[U],b:j*l[V],t:j*a[V]}),O.attr("transform",s(W,F))}(p,S,f,_._name,y)})}},48040:function(ee,z,e){"use strict";var M=e(73220),k=e(3400).titleCase;ee.exports=function(o,T){var b=o._name,h={};if(T.step==="all")h[b+".autorange"]=!0;else{var s=function(t,i){var n,r=t.range,a=new Date(t.r2l(r[1])),l=i.step,u=M["utc"+k(l)],d=i.count;switch(i.stepmode){case"backward":n=t.l2r(+u.offset(a,-d));break;case"todate":var c=u.offset(a,-d);n=t.l2r(+u.ceil(c))}return[n,r[1]]}(o,T);h[b+".range[0]"]=s[0],h[b+".range[1]"]=s[1]}return h}},41152:function(ee,z,e){"use strict";ee.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e(26680)}}},layoutAttributes:e(26680),handleDefaults:e(22148),draw:e(50216)}},11200:function(ee,z,e){"use strict";var M=e(22548);ee.exports={bgcolor:{valType:"color",dflt:M.background,editType:"plot"},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(ee,z,e){"use strict";var M=e(79811).list,k=e(19280).getAutoRange,o=e(74636);ee.exports=function(T){for(var b=M(T,"x",!0),h=0;h<b.length;h++){var s=b[h],t=s[o.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=k(T,s))}}},74636:function(ee){"use strict";ee.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(ee,z,e){"use strict";var M=e(3400),k=e(31780),o=e(79811),T=e(11200),b=e(10936);ee.exports=function(h,s,t){var i=h[t],n=s[t];if(i.rangeslider||s._requestRangeslider[n._id]){M.isPlainObject(i.rangeslider)||(i.rangeslider={});var r,a,l=i.rangeslider,u=k.newContainer(n,"rangeslider");if(y("visible")){y("bgcolor",s.plot_bgcolor),y("bordercolor"),y("borderwidth"),y("thickness"),y("autorange",!n.isValidRange(l.range)),y("range");var d=s._subplots;if(d)for(var c=d.cartesian.filter(function(f){return f.substr(0,f.indexOf("y"))===o.name2id(t)}).map(function(f){return f.substr(f.indexOf("y"),f.length)}),x=M.simpleMap(c,o.id2name),g=0;g<x.length;g++){var p=x[g];r=l[p]||{},a=k.newContainer(u,p,"yaxis");var v,m=s[p];r.range&&m.isValidRange(r.range)&&(v="fixed"),_("rangemode",v)!=="match"&&_("range",m.range.slice())}u._input=l}}function y(f,S){return M.coerce(l,u,T,f,S)}function _(f,S){return M.coerce(r,a,b,f,S)}}},20060:function(ee,z,e){"use strict";var M=e(33428),k=e(24040),o=e(7316),T=e(3400),b=T.strTranslate,h=e(43616),s=e(76308),t=e(81668),i=e(57952),n=e(79811),r=e(86476),a=e(93972),l=e(74636);function u(m){return typeof m.clientX=="number"?m.clientX:m.touches&&m.touches.length>0?m.touches[0].clientX:0}function d(m,y,_,f){var S=T.ensureSingle(m,"rect",l.bgClassName,function(C){C.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),w=f.borderwidth%2==0?f.borderwidth:f.borderwidth-1,E=-f._offsetShift,P=h.crispRound(y,f.borderwidth);S.attr({width:f._width+w,height:f._height+w,transform:b(E,E),"stroke-width":P}).call(s.stroke,f.bordercolor).call(s.fill,f.bgcolor)}function c(m,y,_,f){var S=y._fullLayout;T.ensureSingleById(S._topdefs,"clipPath",f._clipId,function(w){w.append("rect").attr({x:0,y:0})}).select("rect").attr({width:f._width,height:f._height})}function x(m,y,_,f){var S,w=y.calcdata,E=m.selectAll("g."+l.rangePlotClassName).data(_._subplotsWith,T.identity);E.enter().append("g").attr("class",function(P){return l.rangePlotClassName+" "+P}).call(h.setClipUrl,f._clipId,y),E.order(),E.exit().remove(),E.each(function(P,C){var O=M.select(this),R=C===0,j=n.getFromId(y,P,"y"),D=j._name,N=f[D],W={data:[],layout:{xaxis:{type:_.type,domain:[0,1],range:f.range.slice(),calendar:_.calendar},width:f._width,height:f._height,margin:{t:0,b:0,l:0,r:0}},_context:y._context};_.rangebreaks&&(W.layout.xaxis.rangebreaks=_.rangebreaks),W.layout[D]={type:j.type,domain:[0,1],range:N.rangemode!=="match"?N.range.slice():j.range.slice(),calendar:j.calendar},j.rangebreaks&&(W.layout[D].rangebreaks=j.rangebreaks),o.supplyDefaults(W);var F=W._fullLayout.xaxis,U=W._fullLayout[D];F.clearCalc(),F.setScale(),U.clearCalc(),U.setScale();var V={id:P,plotgroup:O,xaxis:F,yaxis:U,isRangePlot:!0};R?S=V:(V.mainplot="xy",V.mainplotinfo=S),i.rangePlot(y,V,function(te,J){for(var K=[],X=0;X<te.length;X++){var Z=te[X],$=Z[0].trace;$.xaxis+$.yaxis===J&&K.push(Z)}return K}(w,P))})}function g(m,y,_,f,S){T.ensureSingle(m,"rect",l.maskMinClassName,function(w){w.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",f._height).call(s.fill,l.maskColor),T.ensureSingle(m,"rect",l.maskMaxClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",f._height).call(s.fill,l.maskColor),S.rangemode!=="match"&&(T.ensureSingle(m,"rect",l.maskMinOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",f._width).call(s.fill,l.maskOppAxisColor),T.ensureSingle(m,"rect",l.maskMaxOppAxisClassName,function(w){w.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",f._width).style("border-top",l.maskOppBorder).call(s.fill,l.maskOppAxisColor))}function p(m,y,_,f){y._context.staticPlot||T.ensureSingle(m,"rect",l.slideBoxClassName,function(S){S.attr({y:0,cursor:l.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:f._height,fill:l.slideBoxFill})}function v(m,y,_,f){var S=T.ensureSingle(m,"g",l.grabberMinClassName),w=T.ensureSingle(m,"g",l.grabberMaxClassName),E={x:0,width:l.handleWidth,rx:l.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":l.handleStrokeWidth,"shape-rendering":"crispEdges"},P={y:Math.round(f._height/4),height:Math.round(f._height/2)};T.ensureSingle(S,"rect",l.handleMinClassName,function(O){O.attr(E)}).attr(P),T.ensureSingle(w,"rect",l.handleMaxClassName,function(O){O.attr(E)}).attr(P);var C={width:l.grabAreaWidth,x:0,y:0,fill:l.grabAreaFill,cursor:y._context.staticPlot?void 0:l.grabAreaCursor};T.ensureSingle(S,"rect",l.grabAreaMinClassName,function(O){O.attr(C)}).attr("height",f._height),T.ensureSingle(w,"rect",l.grabAreaMaxClassName,function(O){O.attr(C)}).attr("height",f._height)}ee.exports=function(m){for(var y=m._fullLayout,_=y._rangeSliderData,f=0;f<_.length;f++){var S=_[f][l.name];S._clipId=S._id+"-"+y._uid}var w=y._infolayer.selectAll("g."+l.containerClassName).data(_,function(E){return E._name});w.exit().each(function(E){var P=E[l.name];y._topdefs.select("#"+P._clipId).remove()}).remove(),_.length!==0&&(w.enter().append("g").classed(l.containerClassName,!0).attr("pointer-events","all"),w.each(function(E){var P=M.select(this),C=E[l.name],O=y[n.id2name(E.anchor)],R=C[n.id2name(E.anchor)];if(C.range){var j,D=T.simpleMap(C.range,E.r2l),N=T.simpleMap(E.range,E.r2l);j=N[0]<N[1]?[Math.min(D[0],N[0]),Math.max(D[1],N[1])]:[Math.max(D[0],N[0]),Math.min(D[1],N[1])],C.range=C._input.range=T.simpleMap(j,E.l2r)}E.cleanRange("rangeslider.range");var W=y._size,F=E.domain;C._width=W.w*(F[1]-F[0]);var U=Math.round(W.l+W.w*F[0]),V=Math.round(W.t+W.h*(1-E._counterDomainMin)+(E.side==="bottom"?E._depth:0)+C._offsetShift+l.extraPad);P.attr("transform",b(U,V)),C._rl=T.simpleMap(C.range,E.r2l);var te=C._rl[0],J=C._rl[1],K=J-te;if(C.p2d=function(be){return be/C._width*K+te},C.d2p=function(be){return(be-te)/K*C._width},E.rangebreaks){var X=E.locateBreaks(te,J);if(X.length){var Z,$,re=0;for(Z=0;Z<X.length;Z++)re+=($=X[Z]).max-$.min;var oe=C._width/(J-te-re),ie=[-oe*te];for(Z=0;Z<X.length;Z++)$=X[Z],ie.push(ie[ie.length-1]-oe*($.max-$.min));for(C.d2p=function(be){for(var ge=ie[0],de=0;de<X.length;de++){var ve=X[de];if(be>=ve.max)ge=ie[de+1];else if(be<ve.min)break}return ge+oe*be},Z=0;Z<X.length;Z++)($=X[Z]).pmin=C.d2p($.min),$.pmax=C.d2p($.max);C.p2d=function(be){for(var ge=ie[0],de=0;de<X.length;de++){var ve=X[de];if(be>=ve.pmax)ge=ie[de+1];else if(be<ve.pmin)break}return(be-ge)/oe}}}if(R.rangemode!=="match"){var ue=O.r2l(R.range[0]),me=O.r2l(R.range[1])-ue;C.d2pOppAxis=function(be){return(be-ue)/me*C._height}}P.call(d,m,E,C).call(c,m,E,C).call(x,m,E,C).call(g,m,E,C,R).call(p,m,E,C).call(v,m,E,C),function(be,ge,de,ve){if(!ge._context.staticPlot){var pe=be.select("rect."+l.slideBoxClassName).node(),_e=be.select("rect."+l.grabAreaMinClassName).node(),Te=be.select("rect."+l.grabAreaMaxClassName).node();be.on("mousedown",le),be.on("touchstart",le)}function le(){var ae=M.event,he=ae.target,Se=u(ae),ke=Se-be.node().getBoundingClientRect().left,Me=ve.d2p(de._rl[0]),Ee=ve.d2p(de._rl[1]),De=r.coverSlip();function fe(we){var Oe,ze,Pe,Ue=+u(we)-Se;switch(he){case pe:if(Pe="ew-resize",Me+Ue>de._length||Ee+Ue<0)return;Oe=Me+Ue,ze=Ee+Ue;break;case _e:if(Pe="col-resize",Me+Ue>de._length)return;Oe=Me+Ue,ze=Ee;break;case Te:if(Pe="col-resize",Ee+Ue<0)return;Oe=Me,ze=Ee+Ue;break;default:Pe="ew-resize",Oe=ke,ze=ke+Ue}if(ze<Oe){var Ve=ze;ze=Oe,Oe=Ve}ve._pixelMin=Oe,ve._pixelMax=ze,a(M.select(De),Pe),function(Ze,it,tt,dt){function yt(Qe){return tt.l2r(T.constrain(Qe,dt._rl[0],dt._rl[1]))}var vt=yt(dt.p2d(dt._pixelMin)),et=yt(dt.p2d(dt._pixelMax));window.requestAnimationFrame(function(){k.call("_guiRelayout",it,tt._name+".range",[vt,et])})}(0,ge,de,ve)}function xe(){De.removeEventListener("mousemove",fe),De.removeEventListener("mouseup",xe),this.removeEventListener("touchmove",fe),this.removeEventListener("touchend",xe),T.removeElement(De)}this.addEventListener("touchmove",fe),this.addEventListener("touchend",xe),De.addEventListener("mousemove",fe),De.addEventListener("mouseup",xe)}}(P,m,E,C),function(be,ge,de,ve,pe,_e){var Te=l.handleWidth/2;function le(we){return T.constrain(we,0,ve._width)}function ae(we){return T.constrain(we,0,ve._height)}function he(we){return T.constrain(we,-Te,ve._width+Te)}var Se=le(ve.d2p(de._rl[0])),ke=le(ve.d2p(de._rl[1]));if(be.select("rect."+l.slideBoxClassName).attr("x",Se).attr("width",ke-Se),be.select("rect."+l.maskMinClassName).attr("width",Se),be.select("rect."+l.maskMaxClassName).attr("x",ke).attr("width",ve._width-ke),_e.rangemode!=="match"){var Me=ve._height-ae(ve.d2pOppAxis(pe._rl[1])),Ee=ve._height-ae(ve.d2pOppAxis(pe._rl[0]));be.select("rect."+l.maskMinOppAxisClassName).attr("x",Se).attr("height",Me).attr("width",ke-Se),be.select("rect."+l.maskMaxOppAxisClassName).attr("x",Se).attr("y",Ee).attr("height",ve._height-Ee).attr("width",ke-Se),be.select("rect."+l.slideBoxClassName).attr("y",Me).attr("height",Ee-Me)}var De=.5,fe=Math.round(he(Se-Te))-De,xe=Math.round(he(ke-Te))+De;be.select("g."+l.grabberMinClassName).attr("transform",b(fe,De)),be.select("g."+l.grabberMaxClassName).attr("transform",b(xe,De))}(P,0,E,C,O,R),E.side==="bottom"&&t.draw(m,E._id+"title",{propContainer:E,propName:E._name+".title",placeholder:y._dfltTitle.x,attributes:{x:E._offset+E._length/2,y:V+C._height+C._offsetShift+10+1.5*E.title.font.size,"text-anchor":"middle"}})}))}},97944:function(ee,z,e){"use strict";var M=e(79811),k=e(72736),o=e(74636),T=e(84284).LINE_SPACING,b=o.name;function h(s){var t=s&&s[b];return t&&t.visible}z.isVisible=h,z.makeData=function(s){var t=M.list({_fullLayout:s},"x",!0),i=s.margin,n=[];if(!s._has("gl2d"))for(var r=0;r<t.length;r++){var a=t[r];if(h(a)){n.push(a);var l=a[b];l._id=b+a._id,l._height=(s.height-i.b-i.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}s._rangeSliderData=n},z.autoMarginOpts=function(s,t){var i=s._fullLayout,n=t[b],r=t._id.charAt(0),a=0,l=0;return t.side==="bottom"&&(a=t._depth,t.title.text!==i._dfltTitle[r]&&(l=1.5*t.title.font.size+10+n._offsetShift,l+=(t.title.text.match(k.BR_TAG_ALL)||[]).length*t.title.font.size*T)),{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:n._height+a+Math.max(i.margin.b,l),pad:o.extraPad+2*n._offsetShift}}},49692:function(ee,z,e){"use strict";var M=e(3400),k=e(11200),o=e(10936),T=e(97944);ee.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:M.extendFlat({},k,{yaxis:o})}}},layoutAttributes:e(11200),handleDefaults:e(94040),calcAutorange:e(26652),draw:e(20060),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},10936:function(ee){"use strict";ee.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(ee,z,e){"use strict";var M=e(13916),k=e(52904).line,o=e(98192).u,T=e(92880).extendFlat,b=e(67824).overrideAll,h=e(31780).templatedArray;e(36208),ee.exports=b(h("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},M.xref,{}),yref:T({},M.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:k.color,width:T({},k.width,{min:1,dflt:1}),dash:T({},o,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(ee){"use strict";ee.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(ee,z,e){"use strict";var M=e(3400),k=e(54460),o=e(51272),T=e(93956),b=e(65152);function h(s,t,i){function n(E,P){return M.coerce(s,t,T,E,P)}var r=n("path"),a=n("type",r?"path":"rect")!=="path";a&&delete t.path,n("opacity"),n("line.color"),n("line.width"),n("line.dash");for(var l=["x","y"],u=0;u<2;u++){var d,c,x,g=l[u],p={_fullLayout:i},v=k.coerceRef(s,t,p,g);if((d=k.getFromId(p,v))._selectionIndices.push(t._index),x=b.rangeToShapePosition(d),c=b.shapePositionToRange(d),a){var m=g+"0",y=g+"1",_=s[m],f=s[y];s[m]=c(s[m],!0),s[y]=c(s[y],!0),k.coercePosition(t,p,n,v,m),k.coercePosition(t,p,n,v,y);var S=t[m],w=t[y];S!==void 0&&w!==void 0&&(t[m]=x(S),t[y]=x(w),s[m]=_,s[y]=f)}}a&&M.noneOrAll(s,t,["x0","x1","y0","y1"])}ee.exports=function(s,t){o(s,t,{name:"selections",handleItemDefaults:h});for(var i=t.selections,n=0;n<i.length;n++){var r=i[n];r&&r.path===void 0&&(r.x0!==void 0&&r.x1!==void 0&&r.y0!==void 0&&r.y1!==void 0||(t.selections[n]=null))}}},23640:function(ee,z,e){"use strict";var M=e(9856).readPaths,k=e(55496),o=e(1936).clearOutlineControllers,T=e(76308),b=e(43616),h=e(31780).arrayEditor,s=e(65152),t=s.getPathString;function i(u){var d=u._fullLayout;for(var c in o(u),d._selectionLayer.selectAll("path").remove(),d._plots){var x=d._plots[c].selectionLayer;x&&x.selectAll("path").remove()}for(var g=0;g<d.selections.length;g++)r(u,g)}function n(u){return u._context.editSelection}function r(u,d){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+d+'"]').remove();var c=s.makeSelectionsOptionsAndPlotinfo(u,d),x=c.options,g=c.plotinfo;x._input&&function(p){var v=t(u,x),m={"data-index":d,"fill-rule":"evenodd",d:v},y=x.opacity,_="rgba(0,0,0,0)",f=x.line.color||T.contrast(u._fullLayout.plot_bgcolor),S=x.line.width,w=x.line.dash;S||(S=5,w="solid");var E=n(u)&&u._fullLayout._activeSelectionIndex===d;E&&(_=u._fullLayout.activeselection.fillcolor,y=u._fullLayout.activeselection.opacity);for(var P=[],C=1;C>=0;C--){var O=p.append("path").attr(m).style("opacity",C?.1:y).call(T.stroke,f).call(T.fill,_).call(b.dashLine,C?"solid":w,C?4+S:S);if(a(O,u,x),E){var R=h(u.layout,"selections",x);O.style({cursor:"move"});var j={element:O.node(),plotinfo:g,gd:u,editHelpers:R,isActiveSelection:!0},D=M(v,u);k(D,O,j)}else O.style("pointer-events",C?"all":"none");P[C]=O}var N=P[0];P[1].node().addEventListener("click",function(){return function(W,F){if(n(W)){var U=+F.node().getAttribute("data-index");if(U>=0){if(U===W._fullLayout._activeSelectionIndex)return void l(W);W._fullLayout._activeSelectionIndex=U,W._fullLayout._deactivateSelection=l,i(W)}}}(u,N)})}(u._fullLayout._selectionLayer)}function a(u,d,c){var x=c.xref+c.yref;b.setClipUrl(u,"clip"+d._fullLayout._uid+x,d)}function l(u){n(u)&&u._fullLayout._activeSelectionIndex>=0&&(o(u),delete u._fullLayout._activeSelectionIndex,i(u))}ee.exports={draw:i,drawOne:r,activateLastSelection:function(u){if(n(u)){var d=u._fullLayout.selections.length-1;u._fullLayout._activeSelectionIndex=d,u._fullLayout._deactivateSelection=l,i(u)}}}},34200:function(ee,z,e){"use strict";var M=e(98192).u,k=e(92880).extendFlat;ee.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:k({},M,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(ee){"use strict";ee.exports=function(z,e,M){M("newselection.mode"),M("newselection.line.width")&&(M("newselection.line.color"),M("newselection.line.dash")),M("activeselection.fillcolor"),M("activeselection.opacity")}},5968:function(ee,z,e){"use strict";var M=e(72760).selectMode,k=e(1936).clearOutline,o=e(9856),T=o.readPaths,b=o.writePaths,h=o.fixDatesForPaths;ee.exports=function(s,t){if(s.length){var i=s[0][0];if(i){var n=i.getAttribute("d"),r=t.gd,a=r._fullLayout.newselection,l=t.plotinfo,u=l.xaxis,d=l.yaxis,c=t.isActiveSelection,x=t.dragmode,g=(r.layout||{}).selections||[];if(!M(x)&&c!==void 0){var p=r._fullLayout._activeSelectionIndex;if(p<g.length)switch(r._fullLayout.selections[p].type){case"rect":x="select";break;case"path":x="lasso"}}var v,m=T(n,r,l,c),y={xref:u._id,yref:d._id,opacity:a.opacity,line:{color:a.line.color,width:a.line.width,dash:a.line.dash}};m.length===1&&(v=m[0]),v&&v.length===5&&x==="select"?(y.type="rect",y.x0=v[0][1],y.y0=v[0][2],y.x1=v[2][1],y.y1=v[2][2]):(y.type="path",u&&d&&h(m,u,d),y.path=b(m),v=null),k(r);for(var _=t.editHelpers,f=(_||{}).modifyItem,S=[],w=0;w<g.length;w++){var E=r._fullLayout.selections[w];if(E){if(S[w]=E._input,c!==void 0&&w===r._fullLayout._activeSelectionIndex){var P=y;switch(E.type){case"rect":f("x0",P.x0),f("x1",P.x1),f("y0",P.y0),f("y1",P.y1);break;case"path":f("path",P.path)}}}else S[w]=E}return c===void 0?(S.push(y),S):_?_.getUpdateObj():{}}}}},5840:function(ee,z,e){"use strict";var M=e(3400).strTranslate;function k(o,T){switch(o.type){case"log":return o.p2d(T);case"date":return o.p2r(T,0,o.calendar);default:return o.p2r(T)}}ee.exports={p2r:k,r2p:function(o,T){switch(o.type){case"log":return o.d2p(T);case"date":return o.r2p(T,0,o.calendar);default:return o.r2p(T)}},axValue:function(o){var T=o._id.charAt(0)==="y"?1:0;return function(b){return k(o,b[T])}},getTransform:function(o){return M(o.xaxis._offset,o.yaxis._offset)}}},22676:function(ee,z,e){"use strict";var M=e(23640),k=e(43156);ee.exports={moduleType:"component",name:"selections",layoutAttributes:e(93956),supplyLayoutDefaults:e(74224),supplyDrawNewSelectionDefaults:e(81004),includeBasePlot:e(36632)("selections"),draw:M.draw,drawOne:M.drawOne,reselect:k.reselect,prepSelect:k.prepSelect,clearOutline:k.clearOutline,clearSelectionsCache:k.clearSelectionsCache,selectOnClick:k.selectOnClick}},43156:function(ee,z,e){"use strict";var M=e(14756),k=e(61456),o=e(24040),T=e(43616).dashStyle,b=e(76308),h=e(93024),s=e(10624).makeEventData,t=e(72760),i=t.freeMode,n=t.rectMode,r=t.drawMode,a=t.openMode,l=t.selectMode,u=e(65152),d=e(85448),c=e(55496),x=e(1936).clearOutline,g=e(9856),p=g.handleEllipse,v=g.readPaths,m=e(93940).newShapes,y=e(5968),_=e(23640).activateLastSelection,f=e(3400),S=f.sorterAsc,w=e(92065),E=e(91200),P=e(79811).getFromId,C=e(73696),O=e(39172).redrawReglTraces,R=e(83280),j=R.MINSELECT,D=w.filter,N=w.tester,W=e(5840),F=W.p2r,U=W.axValue,V=W.getTransform;function te(fe){return fe.subplot!==void 0}function J(fe,xe,we,Oe,ze,Pe,Ue){var Ve,Ze,it,tt,dt,yt,vt,et,Qe,wt=xe._hoverdata,It=xe._fullLayout.clickmode.indexOf("event")>-1,Dt=[];if(function(Ge){return Ge&&Array.isArray(Ge)&&Ge[0].hoverOnBox!==!0}(wt)){$(fe,xe,Pe);var Ct=function(Ge,at){var nt,Re,Fe=Ge[0],rt=-1,Ye=[];for(Re=0;Re<at.length;Re++)if(nt=at[Re],Fe.fullData._expandedIndex===nt.cd[0].trace._expandedIndex){if(Fe.hoverOnBox===!0)break;Fe.pointNumber!==void 0?rt=Fe.pointNumber:Fe.binNumber!==void 0&&(rt=Fe.binNumber,Ye=Fe.pointNumbers);break}return{pointNumber:rt,pointNumbers:Ye,searchInfo:nt}}(wt,Ve=ie(xe,we,Oe,ze));if(Ct.pointNumbers.length>0?function(Ge,at){var nt,Re,Fe,rt=[];for(Fe=0;Fe<Ge.length;Fe++)(nt=Ge[Fe]).cd[0].trace.selectedpoints&&nt.cd[0].trace.selectedpoints.length>0&&rt.push(nt);if(rt.length===1&&rt[0]===at.searchInfo&&(Re=at.searchInfo.cd[0].trace).selectedpoints.length===at.pointNumbers.length){for(Fe=0;Fe<at.pointNumbers.length;Fe++)if(Re.selectedpoints.indexOf(at.pointNumbers[Fe])<0)return!1;return!0}return!1}(Ve,Ct):function(Ge){var at,nt,Re=0;for(nt=0;nt<Ge.length;nt++)if((at=Ge[nt].cd[0].trace).selectedpoints&&(at.selectedpoints.length>1||(Re+=at.selectedpoints.length)>1))return!1;return Re===1}(Ve)&&(yt=me(Ct))){for(Ue&&Ue.remove(),Qe=0;Qe<Ve.length;Qe++)(Ze=Ve[Qe])._module.selectPoints(Ze,!1);be(xe,Ve),re(Pe),It&&De(xe)}else{for(vt=fe.shiftKey&&(yt!==void 0?yt:me(Ct)),it=function(Ge,at,nt){return{pointNumber:Ge,searchInfo:at,subtract:!!nt}}(Ct.pointNumber,Ct.searchInfo,vt),tt=Z(Pe.selectionDefs.concat([it])),Qe=0;Qe<Ve.length;Qe++)if(dt=de(Ve[Qe]._module.selectPoints(Ve[Qe],tt),Ve[Qe]),Dt.length)for(var He=0;He<dt.length;He++)Dt.push(dt[He]);else Dt=dt;if(be(xe,Ve,et={points:Dt}),it&&Pe&&Pe.selectionDefs.push(it),Ue){var We=Pe.mergedPolygons,Be=a(Pe.dragmode);c(ve(We,Be),Ue,Pe)}It&&Ee(xe,et)}}}function K(fe){return"pointNumber"in fe&&"searchInfo"in fe}function X(fe){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(xe,we,Oe,ze){var Pe=fe.searchInfo.cd[0].trace._expandedIndex;return ze.cd[0].trace._expandedIndex===Pe&&Oe===fe.pointNumber},isRect:!1,degenerate:!1,subtract:!!fe.subtract}}function Z(fe){if(fe.length){for(var xe=[],we=K(fe[0])?0:fe[0][0][0],Oe=we,ze=K(fe[0])?0:fe[0][0][1],Pe=ze,Ue=0;Ue<fe.length;Ue++)if(K(fe[Ue]))xe.push(X(fe[Ue]));else{var Ve=N(fe[Ue]);Ve.subtract=!!fe[Ue].subtract,xe.push(Ve),we=Math.min(we,Ve.xmin),Oe=Math.max(Oe,Ve.xmax),ze=Math.min(ze,Ve.ymin),Pe=Math.max(Pe,Ve.ymax)}return{xmin:we,xmax:Oe,ymin:ze,ymax:Pe,pts:[],contains:function(Ze,it,tt,dt){for(var yt=!1,vt=0;vt<xe.length;vt++)xe[vt].contains(Ze,it,tt,dt)&&(yt=!xe[vt].subtract);return yt},isRect:!1,degenerate:!1}}}function $(fe,xe,we){var Oe=xe._fullLayout,ze=we.plotinfo,Pe=we.dragmode,Ue=Oe._lastSelectedSubplot&&Oe._lastSelectedSubplot===ze.id,Ve=(fe.shiftKey||fe.altKey)&&!(r(Pe)&&a(Pe));Ue&&Ve&&ze.selection&&ze.selection.selectionDefs&&!we.selectionDefs?(we.selectionDefs=ze.selection.selectionDefs,we.mergedPolygons=ze.selection.mergedPolygons):Ve&&ze.selection||re(we),Ue||(x(xe),Oe._lastSelectedSubplot=ze.id)}function re(fe,xe){var we=fe.dragmode,Oe=fe.plotinfo,ze=fe.gd;(function(dt){return dt._fullLayout._activeShapeIndex>=0})(ze)&&ze._fullLayout._deactivateShape(ze),function(dt){return dt._fullLayout._activeSelectionIndex>=0}(ze)&&ze._fullLayout._deactivateSelection(ze);var Pe=ze._fullLayout._zoomlayer,Ue=r(we),Ve=l(we);if(Ue||Ve){var Ze,it,tt=Pe.selectAll(".select-outline-"+Oe.id);tt&&ze._fullLayout._outlining&&(Ue&&(Ze=m(tt,fe)),Ze&&o.call("_guiRelayout",ze,{shapes:Ze}),Ve&&!te(fe)&&(it=y(tt,fe)),it&&(ze._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",ze,{selections:it}).then(function(){xe&&_(ze)})),ze._fullLayout._outlining=!1)}Oe.selection={},Oe.selection.selectionDefs=fe.selectionDefs=[],Oe.selection.mergedPolygons=fe.mergedPolygons=[]}function oe(fe){return fe._id}function ie(fe,xe,we,Oe){if(!fe.calcdata)return[];var ze,Pe,Ue,Ve=[],Ze=xe.map(oe),it=we.map(oe);for(Ue=0;Ue<fe.calcdata.length;Ue++)if((Pe=(ze=fe.calcdata[Ue])[0].trace).visible===!0&&Pe._module&&Pe._module.selectPoints)if(!te({subplot:Oe})||Pe.subplot!==Oe&&Pe.geo!==Oe)if(Pe.type==="splom"){if(Pe._xaxes[Ze[0]]&&Pe._yaxes[it[0]]){var tt=ue(Pe._module,ze,xe[0],we[0]);tt.scene=fe._fullLayout._splomScenes[Pe.uid],Ve.push(tt)}}else if(Pe.type==="sankey"){var dt=ue(Pe._module,ze,xe[0],we[0]);Ve.push(dt)}else{if(!(Ze.indexOf(Pe.xaxis)!==-1||Pe._xA&&Pe._xA.overlaying)||!(it.indexOf(Pe.yaxis)!==-1||Pe._yA&&Pe._yA.overlaying))continue;Ve.push(ue(Pe._module,ze,P(fe,Pe.xaxis),P(fe,Pe.yaxis)))}else Ve.push(ue(Pe._module,ze,xe[0],we[0]));return Ve}function ue(fe,xe,we,Oe){return{_module:fe,cd:xe,xaxis:we,yaxis:Oe}}function me(fe){var xe=fe.searchInfo.cd[0].trace,we=fe.pointNumber,Oe=fe.pointNumbers,ze=Oe.length>0?Oe[0]:we;return!!xe.selectedpoints&&xe.selectedpoints.indexOf(ze)>-1}function be(fe,xe,we){var Oe,ze;for(Oe=0;Oe<xe.length;Oe++){var Pe=xe[Oe].cd[0].trace._fullInput,Ue=fe._fullLayout._tracePreGUI[Pe.uid]||{};Ue.selectedpoints===void 0&&(Ue.selectedpoints=Pe._input.selectedpoints||null)}if(we){var Ve=we.points||[];for(Oe=0;Oe<xe.length;Oe++)(ze=xe[Oe].cd[0].trace)._input.selectedpoints=ze._fullInput.selectedpoints=[],ze._fullInput!==ze&&(ze.selectedpoints=[]);for(var Ze=0;Ze<Ve.length;Ze++){var it=Ve[Ze],tt=it.data,dt=it.fullData,yt=it.pointIndex,vt=it.pointIndices;vt?([].push.apply(tt.selectedpoints,vt),ze._fullInput!==ze&&[].push.apply(dt.selectedpoints,vt)):(tt.selectedpoints.push(yt),ze._fullInput!==ze&&dt.selectedpoints.push(yt))}}else for(Oe=0;Oe<xe.length;Oe++)delete(ze=xe[Oe].cd[0].trace).selectedpoints,delete ze._input.selectedpoints,ze._fullInput!==ze&&delete ze._fullInput.selectedpoints;(function(et,Qe){for(var wt=!1,It=0;It<Qe.length;It++){var Dt=Qe[It],Ct=Dt.cd;o.traceIs(Ct[0].trace,"regl")&&(wt=!0);var He=Dt._module,We=He.styleOnSelect||He.style;We&&(We(et,Ct,Ct[0].node3),Ct[0].nodeRangePlot3&&We(et,Ct,Ct[0].nodeRangePlot3))}wt&&(C(et),O(et))})(fe,xe)}function ge(fe,xe,we){for(var Oe=(we?M.difference:M.union)({regions:fe},{regions:[xe]}).regions.reverse(),ze=0;ze<Oe.length;ze++){var Pe=Oe[ze];Pe.subtract=he(Pe,Oe.slice(0,ze))}return Oe}function de(fe,xe){if(Array.isArray(fe))for(var we=xe.cd,Oe=xe.cd[0].trace,ze=0;ze<fe.length;ze++)fe[ze]=s(fe[ze],Oe,we);return fe}function ve(fe,xe){for(var we=[],Oe=0;Oe<fe.length;Oe++){we[Oe]=[];for(var ze=0;ze<fe[Oe].length;ze++){we[Oe][ze]=[],we[Oe][ze][0]=ze?"L":"M";for(var Pe=0;Pe<fe[Oe][ze].length;Pe++)we[Oe][ze].push(fe[Oe][ze][Pe])}xe||we[Oe].push(["Z",we[Oe][0][1],we[Oe][0][2]])}return we}function pe(fe,xe){for(var we,Oe,ze=[],Pe=[],Ue=0;Ue<xe.length;Ue++){var Ve=xe[Ue];Oe=Ve._module.selectPoints(Ve,fe),Pe.push(Oe),we=de(Oe,Ve),ze=ze.concat(we)}return ze}function _e(fe,xe,we,Oe,ze){var Pe,Ue,Ve,Ze=!!Oe;ze&&(Pe=ze.plotinfo,Ue=ze.xaxes[0]._id,Ve=ze.yaxes[0]._id);var it=[],tt=[],dt=ae(fe),yt=fe._fullLayout;if(Pe){var vt=yt._zoomlayer,et=yt.dragmode,Qe=r(et),wt=l(et);if(Qe||wt){var It=P(fe,Ue,"x"),Dt=P(fe,Ve,"y");if(It&&Dt){var Ct=vt.selectAll(".select-outline-"+Pe.id);if(Ct&&fe._fullLayout._outlining&&Ct.length){for(var He=Ct[0][0].getAttribute("d"),We=v(He,fe,Pe),Be=[],Ge=0;Ge<We.length;Ge++){for(var at=We[Ge],nt=[],Re=0;Re<at.length;Re++)nt.push([Se(It,at[Re][1]),Se(Dt,at[Re][2])]);nt.xref=Ue,nt.yref=Ve,nt.subtract=he(nt,Be),Be.push(nt)}dt=dt.concat(Be)}}}}var Fe=Ue&&Ve?[Ue+Ve]:yt._subplots.cartesian;(function(zn){var In=zn.calcdata;if(In)for(var Pn=0;Pn<In.length;Pn++){var Hn=In[Pn][0].trace,Fn=zn._fullLayout._splomScenes;if(Fn){var tr=Fn[Hn.uid];tr&&(tr.selectBatch=[])}}})(fe);for(var rt={},Ye=0;Ye<Fe.length;Ye++){var ct=Fe[Ye],pt=ct.indexOf("y"),gt=ct.slice(0,pt),ut=ct.slice(pt),Mt=Ue&&Ve?we:void 0;if(Mt=le(dt,gt,ut,Mt)){var xt=Oe;if(!Ze){var mt=P(fe,gt,"x"),Et=P(fe,ut,"y");xt=ie(fe,[mt],[Et],ct);for(var Lt=0;Lt<xt.length;Lt++){var zt=xt[Lt],Wt=zt.cd[0],rn=Wt.trace;if(zt._module.name==="scattergl"&&!Wt.t.xpx){var Ut=rn.x,Vt=rn.y,en=rn._length;Wt.t.xpx=[],Wt.t.ypx=[];for(var Ln=0;Ln<en;Ln++)Wt.t.xpx[Ln]=mt.c2p(Ut[Ln]),Wt.t.ypx[Ln]=Et.c2p(Vt[Ln])}zt._module.name==="splom"&&(rt[rn.uid]||(rt[rn.uid]=!0))}}var An=pe(Mt,xt);it=it.concat(An),tt=tt.concat(xt)}}var hn={points:it};be(fe,tt,hn);var Xt=yt.clickmode.indexOf("event")>-1&&xe;if(!Pe&&xe){var ln=ae(fe,!0);if(ln.length){var nn=ln[0].xref,cn=ln[0].yref;if(nn&&cn){var Tn=ke(ln);Me([P(fe,nn,"x"),P(fe,cn,"y")])(hn,Tn)}}fe._fullLayout._noEmitSelectedAtStart?fe._fullLayout._noEmitSelectedAtStart=!1:Xt&&Ee(fe,hn),yt._reselect=!1}if(!Pe&&yt._deselect){var Mn=yt._deselect;(function(zn,In,Pn){for(var Hn=0;Hn<Pn.length;Hn++){var Fn=Pn[Hn];if(Fn.xaxis&&Fn.xaxis._id===zn&&Fn.yaxis&&Fn.yaxis._id===In)return!0}return!1})(Ue=Mn.xref,Ve=Mn.yref,tt)||Te(fe,Ue,Ve,Oe),Xt&&(hn.points.length?Ee(fe,hn):De(fe)),yt._deselect=!1}return{eventData:hn,selectionTesters:we}}function Te(fe,xe,we,Oe){Oe=ie(fe,[P(fe,xe,"x")],[P(fe,we,"y")],xe+we);for(var ze=0;ze<Oe.length;ze++){var Pe=Oe[ze];Pe._module.selectPoints(Pe,!1)}be(fe,Oe)}function le(fe,xe,we,Oe){for(var ze,Pe=0;Pe<fe.length;Pe++){var Ue=fe[Pe];xe===Ue.xref&&we===Ue.yref&&(ze?Oe=Z(ze=ge(ze,Ue,!!Ue.subtract)):(ze=[Ue],Oe=N(Ue)))}return Oe}function ae(fe,xe){for(var we=[],Oe=fe._fullLayout,ze=Oe.selections,Pe=ze.length,Ue=0;Ue<Pe;Ue++)if(!xe||Ue===Oe._activeSelectionIndex){var Ve=ze[Ue];if(Ve){var Ze,it,tt,dt,yt,vt=Ve.xref,et=Ve.yref,Qe=P(fe,vt,"x"),wt=P(fe,et,"y");if(Ve.type==="rect"){yt=[];var It=Se(Qe,Ve.x0),Dt=Se(Qe,Ve.x1),Ct=Se(wt,Ve.y0),He=Se(wt,Ve.y1);yt=[[It,Ct],[It,He],[Dt,He],[Dt,Ct]],Ze=Math.min(It,Dt),it=Math.max(It,Dt),tt=Math.min(Ct,He),dt=Math.max(Ct,He),yt.xmin=Ze,yt.xmax=it,yt.ymin=tt,yt.ymax=dt,yt.xref=vt,yt.yref=et,yt.subtract=!1,yt.isRect=!0,we.push(yt)}else if(Ve.type==="path")for(var We=Ve.path.split("Z"),Be=[],Ge=0;Ge<We.length;Ge++){var at=We[Ge];if(at){at+="Z";var nt=u.extractPathCoords(at,d.paramIsX,"raw"),Re=u.extractPathCoords(at,d.paramIsY,"raw");Ze=1/0,it=-1/0,tt=1/0,dt=-1/0,yt=[];for(var Fe=0;Fe<nt.length;Fe++){var rt=Se(Qe,nt[Fe]),Ye=Se(wt,Re[Fe]);yt.push([rt,Ye]),Ze=Math.min(rt,Ze),it=Math.max(rt,it),tt=Math.min(Ye,tt),dt=Math.max(Ye,dt)}yt.xmin=Ze,yt.xmax=it,yt.ymin=tt,yt.ymax=dt,yt.xref=vt,yt.yref=et,yt.subtract=he(yt,Be),Be.push(yt),we.push(yt)}}}}return we}function he(fe,xe){for(var we=!1,Oe=0;Oe<xe.length;Oe++)for(var ze=xe[Oe],Pe=0;Pe<fe.length;Pe++)if(k(fe[Pe],ze)){we=!we;break}return we}function Se(fe,xe){return fe.type==="date"&&(xe=xe.replace("_"," ")),fe.type==="log"?fe.c2p(xe):fe.r2p(xe,null,fe.calendar)}function ke(fe){for(var xe=fe.length,we=[],Oe=0;Oe<xe;Oe++){var ze=fe[Oe];we=(we=we.concat(ze)).concat([ze[0]])}return(Pe=we).isRect=Pe.length===5&&Pe[0][0]===Pe[4][0]&&Pe[0][1]===Pe[4][1]&&Pe[0][0]===Pe[1][0]&&Pe[2][0]===Pe[3][0]&&Pe[0][1]===Pe[3][1]&&Pe[1][1]===Pe[2][1]||Pe[0][1]===Pe[1][1]&&Pe[2][1]===Pe[3][1]&&Pe[0][0]===Pe[3][0]&&Pe[1][0]===Pe[2][0],Pe.isRect&&(Pe.xmin=Math.min(Pe[0][0],Pe[2][0]),Pe.xmax=Math.max(Pe[0][0],Pe[2][0]),Pe.ymin=Math.min(Pe[0][1],Pe[2][1]),Pe.ymax=Math.max(Pe[0][1],Pe[2][1])),Pe;var Pe}function Me(fe){return function(xe,we){for(var Oe,ze,Pe=0;Pe<fe.length;Pe++){var Ue=fe[Pe],Ve=Ue._id,Ze=Ve.charAt(0);if(we.isRect){Oe||(Oe={});var it=we[Ze+"min"],tt=we[Ze+"max"];it!==void 0&&tt!==void 0&&(Oe[Ve]=[F(Ue,it),F(Ue,tt)].sort(S))}else ze||(ze={}),ze[Ve]=we.map(U(Ue))}Oe&&(xe.range=Oe),ze&&(xe.lassoPoints=ze)}}function Ee(fe,xe){xe&&(xe.selections=(fe.layout||{}).selections||[]),fe.emit("plotly_selected",xe)}function De(fe){fe.emit("plotly_deselect",null)}ee.exports={reselect:_e,prepSelect:function(fe,xe,we,Oe,ze){var Pe=!te(Oe),Ue=i(ze),Ve=n(ze),Ze=a(ze),it=r(ze),tt=l(ze),dt=ze==="drawcircle",yt=ze==="drawline"||dt,vt=Oe.gd,et=vt._fullLayout,Qe=tt&&et.newselection.mode==="immediate"&&Pe,wt=et._zoomlayer,It=Oe.element.getBoundingClientRect(),Dt=Oe.plotinfo,Ct=V(Dt),He=xe-It.left,We=we-It.top;et._calcInverseTransform(vt);var Be=f.apply3DTransform(et._invTransform)(He,We);He=Be[0],We=Be[1];var Ge,at,nt,Re,Fe,rt,Ye,ct=et._invScaleX,pt=et._invScaleY,gt=He,ut=We,Mt="M"+He+","+We,xt=Oe.xaxes[0],mt=Oe.yaxes[0],Et=xt._length,Lt=mt._length,zt=fe.altKey&&!(r(ze)&&Ze);$(fe,vt,Oe),Ue&&(Ge=D([[He,We]],R.BENDPX));var Wt=wt.selectAll("path.select-outline-"+Dt.id).data([1]),rn=it?et.newshape:et.newselection;it&&(Oe.hasText=rn.label.text||rn.label.texttemplate);var Ut=it&&!Ze?rn.fillcolor:"rgba(0,0,0,0)",Vt=rn.line.color||(Pe?b.contrast(vt._fullLayout.plot_bgcolor):"#7f7f7f");Wt.enter().append("path").attr("class","select-outline select-outline-"+Dt.id).style({opacity:it?rn.opacity/2:1,"stroke-dasharray":T(rn.line.dash,rn.line.width),"stroke-width":rn.line.width+"px","shape-rendering":"crispEdges"}).call(b.stroke,Vt).call(b.fill,Ut).attr("fill-rule","evenodd").classed("cursor-move",!!it).attr("transform",Ct).attr("d",Mt+"Z");var en=wt.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",Ct).attr("d","M0,0Z");if(it&&Oe.hasText){var Ln=wt.select(".label-temp");Ln.empty()&&(Ln=wt.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var An=et._uid+R.SELECTID,hn=[],Xt=ie(vt,Oe.xaxes,Oe.yaxes,Oe.subplot);Qe&&!fe.shiftKey&&(Oe._clearSubplotSelections=function(){if(Pe){var nn=xt._id,cn=mt._id;Te(vt,nn,cn,Xt);for(var Tn=(vt.layout||{}).selections||[],Mn=[],zn=!1,In=0;In<Tn.length;In++){var Pn=et.selections[In];Pn.xref!==nn||Pn.yref!==cn?Mn.push(Tn[In]):zn=!0}zn&&(vt._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",vt,{selections:Mn}))}});var ln=function(nn){return nn.plotinfo.fillRangeItems||Me(nn.xaxes.concat(nn.yaxes))}(Oe);Oe.moveFn=function(nn,cn){Oe._clearSubplotSelections&&(Oe._clearSubplotSelections(),Oe._clearSubplotSelections=void 0),gt=Math.max(0,Math.min(Et,ct*nn+He)),ut=Math.max(0,Math.min(Lt,pt*cn+We));var Tn=Math.abs(gt-He),Mn=Math.abs(ut-We);if(Ve){var zn,In,Pn;if(tt){var Hn=et.selectdirection;switch(zn=Hn==="any"?Mn<Math.min(.6*Tn,j)?"h":Tn<Math.min(.6*Mn,j)?"v":"d":Hn){case"h":In=dt?Lt/2:0,Pn=Lt;break;case"v":In=dt?Et/2:0,Pn=Et}}if(it)switch(et.newshape.drawdirection){case"vertical":zn="h",In=dt?Lt/2:0,Pn=Lt;break;case"horizontal":zn="v",In=dt?Et/2:0,Pn=Et;break;case"ortho":Tn<Mn?(zn="h",In=We,Pn=ut):(zn="v",In=He,Pn=gt);break;default:zn="d"}zn==="h"?((Re=yt?p(dt,[gt,In],[gt,Pn]):[[He,In],[He,Pn],[gt,Pn],[gt,In]]).xmin=yt?gt:Math.min(He,gt),Re.xmax=yt?gt:Math.max(He,gt),Re.ymin=Math.min(In,Pn),Re.ymax=Math.max(In,Pn),en.attr("d","M"+Re.xmin+","+(We-j)+"h-4v"+2*j+"h4ZM"+(Re.xmax-1)+","+(We-j)+"h4v"+2*j+"h-4Z")):zn==="v"?((Re=yt?p(dt,[In,ut],[Pn,ut]):[[In,We],[In,ut],[Pn,ut],[Pn,We]]).xmin=Math.min(In,Pn),Re.xmax=Math.max(In,Pn),Re.ymin=yt?ut:Math.min(We,ut),Re.ymax=yt?ut:Math.max(We,ut),en.attr("d","M"+(He-j)+","+Re.ymin+"v-4h"+2*j+"v4ZM"+(He-j)+","+(Re.ymax-1)+"v4h"+2*j+"v-4Z")):zn==="d"&&((Re=yt?p(dt,[He,We],[gt,ut]):[[He,We],[He,ut],[gt,ut],[gt,We]]).xmin=Math.min(He,gt),Re.xmax=Math.max(He,gt),Re.ymin=Math.min(We,ut),Re.ymax=Math.max(We,ut),en.attr("d","M0,0Z"))}else Ue&&(Ge.addPt([gt,ut]),Re=Ge.filtered);if(Oe.selectionDefs&&Oe.selectionDefs.length?(nt=ge(Oe.mergedPolygons,Re,zt),Re.subtract=zt,at=Z(Oe.selectionDefs.concat([Re]))):(nt=[Re],at=N(Re)),c(ve(nt,Ze),Wt,Oe),tt){var Fn,tr=_e(vt,!1),or=tr.eventData?tr.eventData.points.slice():[];tr=_e(vt,!1,at,Xt,Oe),at=tr.selectionTesters,Ye=tr.eventData,Fn=Ge?Ge.filtered:ke(nt),E.throttle(An,R.SELECTDELAY,function(){for(var ur=(hn=pe(at,Xt)).slice(),er=0;er<or.length;er++){for(var Mr=or[er],jt=!1,tn=0;tn<ur.length;tn++)if(ur[tn].curveNumber===Mr.curveNumber&&ur[tn].pointNumber===Mr.pointNumber){jt=!0;break}jt||ur.push(Mr)}ur.length&&(Ye||(Ye={}),Ye.points=ur),ln(Ye,Fn),function(xn,pn){xn.emit("plotly_selecting",pn)}(vt,Ye)})}},Oe.clickFn=function(nn,cn){if(en.remove(),vt._fullLayout._activeShapeIndex>=0)vt._fullLayout._deactivateShape(vt);else if(!it){var Tn=et.clickmode;E.done(An).then(function(){if(E.clear(An),nn===2){for(Wt.remove(),Fe=0;Fe<Xt.length;Fe++)(rt=Xt[Fe])._module.selectPoints(rt,!1);if(be(vt,Xt),re(Oe),De(vt),Xt.length){var Mn=Xt[0].xaxis,zn=Xt[0].yaxis;if(Mn&&zn){for(var In=[],Pn=vt._fullLayout.selections,Hn=0;Hn<Pn.length;Hn++){var Fn=Pn[Hn];Fn&&(Fn.xref===Mn._id&&Fn.yref===zn._id||In.push(Fn))}In.length<Pn.length&&(vt._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",vt,{selections:In}))}}}else Tn.indexOf("select")>-1&&J(cn,vt,Oe.xaxes,Oe.yaxes,Oe.subplot,Oe,Wt),Tn==="event"&&Ee(vt,void 0);h.click(vt,cn,Dt.id)}).catch(f.error)}},Oe.doneFn=function(){en.remove(),E.done(An).then(function(){E.clear(An),!Qe&&Re&&Oe.selectionDefs&&(Re.subtract=zt,Oe.selectionDefs.push(Re),Oe.mergedPolygons.length=0,[].push.apply(Oe.mergedPolygons,nt)),(Qe||it)&&re(Oe,Qe),Oe.doneFnCompleted&&Oe.doneFnCompleted(hn),tt&&Ee(vt,Ye)}).catch(f.error)}},clearOutline:x,clearSelectionsCache:re,selectOnClick:J}},46056:function(ee,z,e){"use strict";var M=e(13916),k=e(25376),o=e(52904).line,T=e(98192).u,b=e(92880).extendFlat,h=e(31780).templatedArray,s=(e(36208),e(45464)),t=e(21776).ye,i=e(97728);ee.exports=h("shape",{visible:b({},s.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:b({},s.legend,{editType:"calc+arraydraw"}),legendgroup:b({},s.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:b({},s.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:k({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:b({},s.legendrank,{editType:"calc+arraydraw"}),legendwidth:b({},s.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:b({},M.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:b({},M.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},o.color,{editType:"arraydraw"}),width:b({},o.width,{editType:"calc+arraydraw"}),dash:b({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:t({},{keys:Object.keys(i)}),font:k({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(ee,z,e){"use strict";var M=e(3400),k=e(54460),o=e(85448),T=e(65152);function b(i){return s(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function h(i){return s(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function s(i,n,r,a,l,u){var d=i/2,c=u;if(n==="pixel"){var x=l?T.extractPathCoords(l,u?o.paramIsY:o.paramIsX):[r,a],g=M.aggNums(Math.max,null,x),p=M.aggNums(Math.min,null,x),v=p<0?Math.abs(p)+d:d,m=g>0?g+d:d;return{ppad:d,ppadplus:c?v:m,ppadminus:c?m:v}}return{ppad:d}}function t(i,n,r,a,l){var u=i.type==="category"||i.type==="multicategory"?i.r2c:i.d2c;if(n!==void 0)return[u(n),u(r)];if(a){var d,c,x,g,p=1/0,v=-1/0,m=a.match(o.segmentRE);for(i.type==="date"&&(u=T.decodeDate(u)),d=0;d<m.length;d++)(c=l[m[d].charAt(0)].drawn)!==void 0&&(!(x=m[d].substr(1).match(o.paramRE))||x.length<c||((g=u(x[c]))<p&&(p=g),g>v&&(v=g)));return v>=p?[p,v]:void 0}}ee.exports=function(i){var n=i._fullLayout,r=M.filterVisible(n.shapes);if(r.length&&i._fullData.length)for(var a=0;a<r.length;a++){var l,u,d=r[a];d._extremes={};var c=k.getRefType(d.xref),x=k.getRefType(d.yref);if(d.xref!=="paper"&&c!=="domain"){var g=d.xsizemode==="pixel"?d.xanchor:d.x0,p=d.xsizemode==="pixel"?d.xanchor:d.x1;(u=t(l=k.getFromId(i,d.xref),g,p,d.path,o.paramIsX))&&(d._extremes[l._id]=k.findExtremes(l,u,b(d)))}if(d.yref!=="paper"&&x!=="domain"){var v=d.ysizemode==="pixel"?d.yanchor:d.y0,m=d.ysizemode==="pixel"?d.yanchor:d.y1;(u=t(l=k.getFromId(i,d.yref),v,m,d.path,o.paramIsY))&&(d._extremes[l._id]=k.findExtremes(l,u,h(d)))}}}},85448:function(ee){"use strict";ee.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(ee,z,e){"use strict";var M=e(3400),k=e(54460),o=e(51272),T=e(46056),b=e(65152);function h(s,t,i){function n(W,F){return M.coerce(s,t,T,W,F)}if(t._isShape=!0,n("visible")){n("showlegend")&&(n("legend"),n("legendwidth"),n("legendgroup"),n("legendgrouptitle.text"),M.coerceFont(n,"legendgrouptitle.font"),n("legendrank"));var r=n("path"),a=n("type",r?"path":"rect"),l=a!=="path";l&&delete t.path,n("editable"),n("layer"),n("opacity"),n("fillcolor"),n("fillrule"),n("line.width")&&(n("line.color"),n("line.dash"));for(var u=n("xsizemode"),d=n("ysizemode"),c=["x","y"],x=0;x<2;x++){var g,p,v,m=c[x],y=m+"anchor",_=m==="x"?u:d,f={_fullLayout:i},S=k.coerceRef(s,t,f,m,void 0,"paper");if(k.getRefType(S)==="range"?((g=k.getFromId(f,S))._shapeIndices.push(t._index),v=b.rangeToShapePosition(g),p=b.shapePositionToRange(g)):p=v=M.identity,l){var w=m+"0",E=m+"1",P=s[w],C=s[E];s[w]=p(s[w],!0),s[E]=p(s[E],!0),_==="pixel"?(n(w,0),n(E,10)):(k.coercePosition(t,f,n,S,w,.25),k.coercePosition(t,f,n,S,E,.75)),t[w]=v(t[w]),t[E]=v(t[E]),s[w]=P,s[E]=C}if(_==="pixel"){var O=s[y];s[y]=p(s[y],!0),k.coercePosition(t,f,n,S,y,.25),t[y]=v(t[y]),s[y]=O}}l&&M.noneOrAll(s,t,["x0","x1","y0","y1"]);var R,j,D=a==="line";if(l&&(R=n("label.texttemplate")),R||(j=n("label.text")),j||R){n("label.textangle");var N=n("label.textposition",D?"middle":"middle center");n("label.xanchor"),n("label.yanchor",function(W,F){return W?"bottom":F.indexOf("top")!==-1?"top":F.indexOf("bottom")!==-1?"bottom":"middle"}(D,N)),n("label.padding"),M.coerceFont(n,"label.font",i.font)}}}ee.exports=function(s,t){o(s,t,{name:"shapes",handleItemDefaults:h})}},60728:function(ee,z,e){"use strict";var M=e(3400),k=e(54460),o=e(72736),T=e(43616),b=e(9856).readPaths,h=e(65152),s=h.getPathString,t=e(97728),i=e(84284).FROM_TL;ee.exports=function(n,r,a,l){if(l.selectAll(".shape-label").remove(),a.label.text||a.label.texttemplate){var u;if(a.label.texttemplate){var d={};if(a.type!=="path"){var c=k.getFromId(n,a.xref),x=k.getFromId(n,a.yref);for(var g in t){var p=t[g](a,c,x);p!==void 0&&(d[g]=p)}}u=M.texttemplateStringForShapes(a.label.texttemplate,{},n._fullLayout._d3locale,d)}else u=a.label.text;var v,m,y,_,f={"data-index":r},S=a.label.font,w=l.append("g").attr(f).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(u);if(a.path){var E=s(n,a),P=b(E,n);v=1/0,y=1/0,m=-1/0,_=-1/0;for(var C=0;C<P.length;C++)for(var O=0;O<P[C].length;O++)for(var R=P[C][O],j=1;j<R.length;j+=2){var D=R[j],N=R[j+1];v=Math.min(v,D),m=Math.max(m,D),y=Math.min(y,N),_=Math.max(_,N)}}else{var W=k.getFromId(n,a.xref),F=k.getRefType(a.xref),U=k.getFromId(n,a.yref),V=k.getRefType(a.yref),te=h.getDataToPixel(n,W,!1,F),J=h.getDataToPixel(n,U,!0,V);v=te(a.x0),m=te(a.x1),y=J(a.y0),_=J(a.y1)}var K=a.label.textangle;K==="auto"&&(K=a.type==="line"?function(oe,ie,ue,me){var be,ge;return ge=Math.abs(ue-oe),be=ue>=oe?ie-me:me-ie,-180/Math.PI*Math.atan2(be,ge)}(v,y,m,_):0),w.call(function(oe){return oe.call(T.font,S).attr({}),o.convertToTspans(oe,n),oe});var X=function(oe,ie,ue,me,be,ge,de){var ve,pe,_e,Te,le=be.label.textposition,ae=be.label.textangle,he=be.label.padding,Se=be.type,ke=Math.PI/180*ge,Me=Math.sin(ke),Ee=Math.cos(ke),De=be.label.xanchor,fe=be.label.yanchor;if(Se==="line"){le==="start"?(ve=oe,pe=ie):le==="end"?(ve=ue,pe=me):(ve=(oe+ue)/2,pe=(ie+me)/2),De==="auto"&&(De=le==="start"?ae==="auto"?ue>oe?"left":ue<oe?"right":"center":ue>oe?"right":ue<oe?"left":"center":le==="end"?ae==="auto"?ue>oe?"right":ue<oe?"left":"center":ue>oe?"left":ue<oe?"right":"center":"center");var xe={bottom:-1,middle:0,top:1};if(ae==="auto"){var we=xe[fe];_e=-he*Me*we,Te=he*Ee*we}else _e=he*{left:1,center:0,right:-1}[De],Te=he*xe[fe];ve+=_e,pe+=Te}else _e=he+3,le.indexOf("right")!==-1?(ve=Math.max(oe,ue)-_e,De==="auto"&&(De="right")):le.indexOf("left")!==-1?(ve=Math.min(oe,ue)+_e,De==="auto"&&(De="left")):(ve=(oe+ue)/2,De==="auto"&&(De="center")),pe=le.indexOf("top")!==-1?Math.min(ie,me):le.indexOf("bottom")!==-1?Math.max(ie,me):(ie+me)/2,Te=he,fe==="bottom"?pe-=Te:fe==="top"&&(pe+=Te);var Oe=i[fe],ze=be.label.font.size,Pe=de.height;return{textx:ve+(Pe*Oe-ze)*Me,texty:pe+-(Pe*Oe-ze)*Ee,xanchor:De}}(v,y,m,_,a,K,T.bBox(w.node())),Z=X.textx,$=X.texty,re=X.xanchor;w.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[re],y:$,x:Z,transform:"rotate("+K+","+Z+","+$+")"}).call(o.positionText,Z,$)}}},55496:function(ee,z,e){"use strict";var M=e(3400).strTranslate,k=e(86476),o=e(72760),T=o.drawMode,b=o.selectMode,h=e(24040),s=e(76308),t=e(7e3),i=t.i000,n=t.i090,r=t.i180,a=t.i270,l=e(1936).clearOutlineControllers,u=e(9856),d=u.pointsOnRectangle,c=u.pointsOnEllipse,x=u.writePaths,g=e(93940).newShapes,p=e(93940).createShapeObj,v=e(5968),m=e(60728);function y(_,f){var S,w,E,P=_[f][1],C=_[f][2],O=_.length;return w=_[S=(f+1)%O][1],E=_[S][2],w===P&&E===C&&(w=_[S=(f+2)%O][1],E=_[S][2]),[S,w,E]}ee.exports=function _(f,S,w,E){E||(E=0);var P=w.gd;function C(){_(f,S,w,E++),(c(f[0])||w.hasText)&&O({redrawing:!0})}function O(be){var ge={};w.isActiveShape!==void 0&&(w.isActiveShape=!1,ge=g(S,w)),w.isActiveSelection!==void 0&&(w.isActiveSelection=!1,ge=v(S,w),P._fullLayout._reselect=!0),Object.keys(ge).length&&h.call((be||{}).redrawing?"relayout":"_guiRelayout",P,ge)}var R,j,D,N,W,F=P._fullLayout._zoomlayer,U=w.dragmode,V=T(U),te=b(U);if((V||te)&&(P._fullLayout._outlining=!0),l(P),S.attr("d",x(f)),E||!w.isActiveShape&&!w.isActiveSelection||(W=function(be,ge){for(var de=0;de<ge.length;de++){var ve=ge[de];be[de]=[];for(var pe=0;pe<ve.length;pe++){be[de][pe]=[];for(var _e=0;_e<ve[pe].length;_e++)be[de][pe][_e]=ve[pe][_e]}}return be}([],f),function(be){R=[];for(var ge=0;ge<f.length;ge++){var de=f[ge],ve=d(de),pe=!ve&&c(de);R[ge]=[];for(var _e=de.length,Te=0;Te<_e;Te++)if(de[Te][0]!=="Z"&&(!pe||Te===i||Te===n||Te===r||Te===a)){var le,ae=ve&&w.isActiveSelection;ae&&(le=y(de,Te));var he=de[Te][1],Se=de[Te][2],ke=be.append(ae?"rect":"circle").attr("data-i",ge).attr("data-j",Te).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(ae){var Me=le[1]-he,Ee=le[2]-Se,De=Ee?5:Math.max(Math.min(25,Math.abs(Me)-5),5),fe=Me?5:Math.max(Math.min(25,Math.abs(Ee)-5),5);ke.classed(Ee?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",De).attr("height",fe).attr("x",he-De/2).attr("y",Se-fe/2).attr("transform",M(Me/2,Ee/2))}else ke.classed("cursor-grab",!0).attr("r",5).attr("cx",he).attr("cy",Se);R[ge][Te]={element:ke.node(),gd:P,prepFn:X,doneFn:$,clickFn:re},k.init(R[ge][Te])}}}(F.append("g").attr("class","outline-controllers")),function(){j=[],f.length&&(j[0]={element:S[0][0],gd:P,prepFn:ie,doneFn:ue,clickFn:me},k.init(j[0]))}()),V&&w.hasText){var J=F.select(".label-temp"),K=p(S,w,w.dragmode);m(P,"label-temp",K,J)}function X(be){D=+be.srcElement.getAttribute("data-i"),N=+be.srcElement.getAttribute("data-j"),R[D][N].moveFn=Z}function Z(be,ge){if(f.length){var de=W[D][N][1],ve=W[D][N][2],pe=f[D],_e=pe.length;if(d(pe)){var Te=be,le=ge;w.isActiveSelection&&(y(pe,N)[1]===pe[N][1]?le=0:Te=0);for(var ae=0;ae<_e;ae++)if(ae!==N){var he=pe[ae];he[1]===pe[N][1]&&(he[1]=de+Te),he[2]===pe[N][2]&&(he[2]=ve+le)}if(pe[N][1]=de+Te,pe[N][2]=ve+le,!d(pe))for(var Se=0;Se<_e;Se++)for(var ke=0;ke<pe[Se].length;ke++)pe[Se][ke]=W[D][Se][ke]}else pe[N][1]=de+be,pe[N][2]=ve+ge;C()}}function $(){O()}function re(be,ge){if(be===2){D=+ge.srcElement.getAttribute("data-i"),N=+ge.srcElement.getAttribute("data-j");var de=f[D];d(de)||c(de)||function(){if(f.length&&f[D]&&f[D].length){for(var ve=[],pe=0;pe<f[D].length;pe++)pe!==N&&ve.push(f[D][pe]);ve.length>1&&(ve.length!==2||ve[1][0]!=="Z")&&(N===0&&(ve[0][0]="M"),f[D]=ve,C(),O())}}()}}function oe(be,ge){(function(de,ve){if(f.length)for(var pe=0;pe<f.length;pe++)for(var _e=0;_e<f[pe].length;_e++)for(var Te=0;Te+2<f[pe][_e].length;Te+=2)f[pe][_e][Te+1]=W[pe][_e][Te+1]+de,f[pe][_e][Te+2]=W[pe][_e][Te+2]+ve})(be,ge),C()}function ie(be){(D=+be.srcElement.getAttribute("data-i"))||(D=0),j[D].moveFn=oe}function ue(){O()}function me(be){be===2&&function(ge){if(b(ge._fullLayout.dragmode)){l(ge);var de=ge._fullLayout._activeSelectionIndex,ve=(ge.layout||{}).selections||[];if(de<ve.length){for(var pe=[],_e=0;_e<ve.length;_e++)_e!==de&&pe.push(ve[_e]);delete ge._fullLayout._activeSelectionIndex;var Te=ge._fullLayout.selections[de];ge._fullLayout._deselect={xref:Te.xref,yref:Te.yref},h.call("_guiRelayout",ge,{selections:pe})}}}(P)}}},4016:function(ee,z,e){"use strict";var M=e(33428),k=e(24040),o=e(3400),T=e(54460),b=e(9856).readPaths,h=e(55496),s=e(60728),t=e(1936).clearOutlineControllers,i=e(76308),n=e(43616),r=e(31780).arrayEditor,a=e(86476),l=e(93972),u=e(85448),d=e(65152),c=d.getPathString;function x(f){var S=f._fullLayout;for(var w in S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._shapeUpperLayer.selectAll("text").remove(),S._shapeLowerLayer.selectAll("text").remove(),S._plots){var E=S._plots[w].shapelayer;E&&(E.selectAll("path").remove(),E.selectAll("text").remove())}for(var P=0;P<S.shapes.length;P++)S.shapes[P].visible===!0&&v(f,P)}function g(f){return!!f._fullLayout._outlining}function p(f){return!f._context.edits.shapePosition}function v(f,S){f._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var w=d.makeShapesOptionsAndPlotinfo(f,S),E=w.options,P=w.plotinfo;function C(O){var R=c(f,E),j={"data-index":S,"fill-rule":E.fillrule,d:R},D=E.opacity,N=E.fillcolor,W=E.line.width?E.line.color:"rgba(0,0,0,0)",F=E.line.width,U=E.line.dash;F||E.editable!==!0||(F=5,U="solid");var V=R[R.length-1]!=="Z",te=p(f)&&E.editable&&f._fullLayout._activeShapeIndex===S;te&&(N=V?"rgba(0,0,0,0)":f._fullLayout.activeshape.fillcolor,D=f._fullLayout.activeshape.opacity);var J,K=O.append("g").classed("shape-group",!0).attr({"data-index":S}),X=K.append("path").attr(j).style("opacity",D).call(i.stroke,W).call(i.fill,N).call(n.dashLine,U,F);if(m(K,f,E),s(f,S,E,K),(te||f._context.edits.shapePosition)&&(J=r(f.layout,"shapes",E)),te){X.style({cursor:"move"});var Z={element:X.node(),plotinfo:P,gd:f,editHelpers:J,hasText:E.label.text||E.label.texttemplate,isActiveShape:!0},$=b(R,f);h($,X,Z)}else f._context.edits.shapePosition?function(re,oe,ie,ue,me,be){var ge,de,ve,pe,_e,Te,le,ae,he,Se,ke,Me,Ee,De,fe,xe,we=10,Oe=10,ze=ie.xsizemode==="pixel",Pe=ie.ysizemode==="pixel",Ue=ie.type==="line",Ve=ie.type==="path",Ze=be.modifyItem,it=M.select(oe.node().parentNode),tt=T.getFromId(re,ie.xref),dt=T.getRefType(ie.xref),yt=T.getFromId(re,ie.yref),vt=T.getRefType(ie.yref),et=d.getDataToPixel(re,tt,!1,dt),Qe=d.getDataToPixel(re,yt,!0,vt),wt=d.getPixelToData(re,tt,!1,dt),It=d.getPixelToData(re,yt,!0,vt),Dt=Ue?function(){var nt=10,Re=Math.max(ie.line.width,nt),Fe=me.append("g").attr("data-index",ue).attr("drag-helper",!0);Fe.append("path").attr("d",oe.attr("d")).style({cursor:"move","stroke-width":Re,"stroke-opacity":"0"});var rt={"fill-opacity":"0"},Ye=Math.max(Re/2,nt);return Fe.append("circle").attr({"data-line-point":"start-point",cx:ze?et(ie.xanchor)+ie.x0:et(ie.x0),cy:Pe?Qe(ie.yanchor)-ie.y0:Qe(ie.y0),r:Ye}).style(rt).classed("cursor-grab",!0),Fe.append("circle").attr({"data-line-point":"end-point",cx:ze?et(ie.xanchor)+ie.x1:et(ie.x1),cy:Pe?Qe(ie.yanchor)-ie.y1:Qe(ie.y1),r:Ye}).style(rt).classed("cursor-grab",!0),Fe}():oe,Ct={element:Dt.node(),gd:re,prepFn:function(nt){g(re)||(ze&&(_e=et(ie.xanchor)),Pe&&(Te=Qe(ie.yanchor)),ie.type==="path"?fe=ie.path:(ge=ze?ie.x0:et(ie.x0),de=Pe?ie.y0:Qe(ie.y0),ve=ze?ie.x1:et(ie.x1),pe=Pe?ie.y1:Qe(ie.y1)),ge<ve?(he=ge,Ee="x0",Se=ve,De="x1"):(he=ve,Ee="x1",Se=ge,De="x0"),!Pe&&de<pe||Pe&&de>pe?(le=de,ke="y0",ae=pe,Me="y1"):(le=pe,ke="y1",ae=de,Me="y0"),He(nt),Ge(me,ie),function(Re,Fe,rt){var Ye=Fe.xref,ct=Fe.yref,pt=T.getFromId(rt,Ye),gt=T.getFromId(rt,ct),ut="";Ye==="paper"||pt.autorange||(ut+=Ye),ct==="paper"||gt.autorange||(ut+=ct),n.setClipUrl(Re,ut?"clip"+rt._fullLayout._uid+ut:null,rt)}(oe,ie,re),Ct.moveFn=xe==="move"?We:Be,Ct.altKey=nt.altKey)},doneFn:function(){g(re)||(l(oe),at(me),m(oe,re,ie),k.call("_guiRelayout",re,be.getUpdateObj()))},clickFn:function(){g(re)||at(me)}};function He(nt){if(g(re))xe=null;else if(Ue)xe=nt.target.tagName==="path"?"move":nt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Re=Ct.element.getBoundingClientRect(),Fe=Re.right-Re.left,rt=Re.bottom-Re.top,Ye=nt.clientX-Re.left,ct=nt.clientY-Re.top,pt=!Ve&&Fe>we&&rt>Oe&&!nt.shiftKey?a.getCursor(Ye/Fe,1-ct/rt):"move";l(oe,pt),xe=pt.split("-")[0]}}function We(nt,Re){if(ie.type==="path"){var Fe=function(ct){return ct},rt=Fe,Ye=Fe;ze?Ze("xanchor",ie.xanchor=wt(_e+nt)):(rt=function(ct){return wt(et(ct)+nt)},tt&&tt.type==="date"&&(rt=d.encodeDate(rt))),Pe?Ze("yanchor",ie.yanchor=It(Te+Re)):(Ye=function(ct){return It(Qe(ct)+Re)},yt&&yt.type==="date"&&(Ye=d.encodeDate(Ye))),Ze("path",ie.path=y(fe,rt,Ye))}else ze?Ze("xanchor",ie.xanchor=wt(_e+nt)):(Ze("x0",ie.x0=wt(ge+nt)),Ze("x1",ie.x1=wt(ve+nt))),Pe?Ze("yanchor",ie.yanchor=It(Te+Re)):(Ze("y0",ie.y0=It(de+Re)),Ze("y1",ie.y1=It(pe+Re)));oe.attr("d",c(re,ie)),Ge(me,ie),s(re,ue,ie,it)}function Be(nt,Re){if(Ve){var Fe=function(Vt){return Vt},rt=Fe,Ye=Fe;ze?Ze("xanchor",ie.xanchor=wt(_e+nt)):(rt=function(Vt){return wt(et(Vt)+nt)},tt&&tt.type==="date"&&(rt=d.encodeDate(rt))),Pe?Ze("yanchor",ie.yanchor=It(Te+Re)):(Ye=function(Vt){return It(Qe(Vt)+Re)},yt&&yt.type==="date"&&(Ye=d.encodeDate(Ye))),Ze("path",ie.path=y(fe,rt,Ye))}else if(Ue){if(xe==="resize-over-start-point"){var ct=ge+nt,pt=Pe?de-Re:de+Re;Ze("x0",ie.x0=ze?ct:wt(ct)),Ze("y0",ie.y0=Pe?pt:It(pt))}else if(xe==="resize-over-end-point"){var gt=ve+nt,ut=Pe?pe-Re:pe+Re;Ze("x1",ie.x1=ze?gt:wt(gt)),Ze("y1",ie.y1=Pe?ut:It(ut))}}else{var Mt=function(Vt){return xe.indexOf(Vt)!==-1},xt=Mt("n"),mt=Mt("s"),Et=Mt("w"),Lt=Mt("e"),zt=xt?le+Re:le,Wt=mt?ae+Re:ae,rn=Et?he+nt:he,Ut=Lt?Se+nt:Se;Pe&&(xt&&(zt=le-Re),mt&&(Wt=ae-Re)),(!Pe&&Wt-zt>Oe||Pe&&zt-Wt>Oe)&&(Ze(ke,ie[ke]=Pe?zt:It(zt)),Ze(Me,ie[Me]=Pe?Wt:It(Wt))),Ut-rn>we&&(Ze(Ee,ie[Ee]=ze?rn:wt(rn)),Ze(De,ie[De]=ze?Ut:wt(Ut)))}oe.attr("d",c(re,ie)),Ge(me,ie),s(re,ue,ie,it)}function Ge(nt,Re){(ze||Pe)&&function(){var Fe=Re.type!=="path",rt=nt.selectAll(".visual-cue").data([0]);rt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ye=et(ze?Re.xanchor:o.midRange(Fe?[Re.x0,Re.x1]:d.extractPathCoords(Re.path,u.paramIsX))),ct=Qe(Pe?Re.yanchor:o.midRange(Fe?[Re.y0,Re.y1]:d.extractPathCoords(Re.path,u.paramIsY)));if(Ye=d.roundPositionForSharpStrokeRendering(Ye,1),ct=d.roundPositionForSharpStrokeRendering(ct,1),ze&&Pe){var pt="M"+(Ye-1-1)+","+(ct-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";rt.attr("d",pt)}else if(ze){var gt="M"+(Ye-1-1)+","+(ct-9-1)+"v18 h2 v-18 Z";rt.attr("d",gt)}else{var ut="M"+(Ye-9-1)+","+(ct-1-1)+"h18 v2 h-18 Z";rt.attr("d",ut)}}()}function at(nt){nt.selectAll(".visual-cue").remove()}a.init(Ct),Dt.node().onmousemove=He}(f,X,E,S,O,J):E.editable===!0&&X.style("pointer-events",V||i.opacity(N)*D<=.5?"stroke":"all");X.node().addEventListener("click",function(){return function(re,oe){if(p(re)){var ie=+oe.node().getAttribute("data-index");if(ie>=0){if(ie===re._fullLayout._activeShapeIndex)return void _(re);re._fullLayout._activeShapeIndex=ie,re._fullLayout._deactivateShape=_,x(re)}}}(f,X)})}E._input&&E.visible===!0&&(E.layer!=="below"?C(f._fullLayout._shapeUpperLayer):E.xref==="paper"||E.yref==="paper"?C(f._fullLayout._shapeLowerLayer):P._hadPlotinfo?C((P.mainplotinfo||P).shapelayer):C(f._fullLayout._shapeLowerLayer))}function m(f,S,w){var E=(w.xref+w.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(f,E?"clip"+S._fullLayout._uid+E:null,S)}function y(f,S,w){return f.replace(u.segmentRE,function(E){var P=0,C=E.charAt(0),O=u.paramIsX[C],R=u.paramIsY[C],j=u.numParams[C];return C+E.substr(1).replace(u.paramRE,function(D){return P>=j||(O[P]?D=S(D):R[P]&&(D=w(D)),P++),D})})}function _(f){p(f)&&f._fullLayout._activeShapeIndex>=0&&(t(f),delete f._fullLayout._activeShapeIndex,x(f))}ee.exports={draw:x,drawOne:v,eraseActiveShape:function(f){if(p(f)){t(f);var S=f._fullLayout._activeShapeIndex,w=(f.layout||{}).shapes||[];if(S<w.length){for(var E=[],P=0;P<w.length;P++)P!==S&&E.push(w[P]);return delete f._fullLayout._activeShapeIndex,k.call("_guiRelayout",f,{shapes:E})}}},drawLabel:s}},92872:function(ee,z,e){"use strict";var M=e(67824).overrideAll,k=e(45464),o=e(25376),T=e(98192).u,b=e(92880).extendFlat,h=e(21776).ye,s=e(97728);ee.exports=M({newshape:{visible:b({},k.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:b({},k.legend,{}),legendgroup:b({},k.legendgroup,{}),legendgrouptitle:{text:b({},k.legendgrouptitle.text,{}),font:o({})},legendrank:b({},k.legendrank,{}),legendwidth:b({},k.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:b({},T,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:b({},k.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:h({newshape:!0},{keys:Object.keys(s)}),font:o({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(ee){"use strict";ee.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(ee,z,e){"use strict";var M=e(76308),k=e(3400);ee.exports=function(o,T,b){if(b("newshape.visible"),b("newshape.name"),b("newshape.showlegend"),b("newshape.legend"),b("newshape.legendwidth"),b("newshape.legendgroup"),b("newshape.legendgrouptitle.text"),k.coerceFont(b,"newshape.legendgrouptitle.font"),b("newshape.legendrank"),b("newshape.drawdirection"),b("newshape.layer"),b("newshape.fillcolor"),b("newshape.fillrule"),b("newshape.opacity"),b("newshape.line.width")){var h=(o||{}).plot_bgcolor||"#FFF";b("newshape.line.color",M.contrast(h)),b("newshape.line.dash")}var s=o.dragmode==="drawline",t=b("newshape.label.text"),i=b("newshape.label.texttemplate");if(t||i){b("newshape.label.textangle");var n=b("newshape.label.textposition",s?"middle":"middle center");b("newshape.label.xanchor"),b("newshape.label.yanchor",function(r,a){return r?"bottom":a.indexOf("top")!==-1?"top":a.indexOf("bottom")!==-1?"bottom":"middle"}(s,n)),b("newshape.label.padding"),k.coerceFont(b,"newshape.label.font",T.font)}b("activeshape.fillcolor"),b("activeshape.opacity")}},9856:function(ee,z,e){"use strict";var M=e(21984),k=e(7e3),o=k.CIRCLE_SIDES,T=k.SQRT2,b=e(5840),h=b.p2r,s=b.r2p,t=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function n(a,l){return Math.abs(a-l)<=1e-6}function r(a,l){var u=l[1]-a[1],d=l[2]-a[2];return Math.sqrt(u*u+d*d)}z.writePaths=function(a){var l=a.length;if(!l)return"M0,0Z";for(var u="",d=0;d<l;d++)for(var c=a[d].length,x=0;x<c;x++){var g=a[d][x][0];if(g==="Z")u+="Z";else for(var p=a[d][x].length,v=0;v<p;v++){var m=v;g==="Q"||g==="S"?m=i[v]:g==="C"&&(m=t[v]),u+=a[d][x][m],v>0&&v<p-1&&(u+=",")}}return u},z.readPaths=function(a,l,u,d){var c,x,g,p=M(a),v=[],m=-1,y=0,_=0,f=function(){x=y,g=_};f();for(var S=0;S<p.length;S++){var w,E,P,C,O=[],R=p[S][0],j=R;switch(R){case"M":v[++m]=[],y=+p[S][1],_=+p[S][2],O.push([j,y,_]),f();break;case"Q":case"S":w=+p[S][1],P=+p[S][2],y=+p[S][3],_=+p[S][4],O.push([j,y,_,w,P]);break;case"C":w=+p[S][1],P=+p[S][2],E=+p[S][3],C=+p[S][4],y=+p[S][5],_=+p[S][6],O.push([j,y,_,w,P,E,C]);break;case"T":case"L":y=+p[S][1],_=+p[S][2],O.push([j,y,_]);break;case"H":j="L",y=+p[S][1],O.push([j,y,_]);break;case"V":j="L",_=+p[S][1],O.push([j,y,_]);break;case"A":j="L";var D=+p[S][1],N=+p[S][2];+p[S][4]||(D=-D,N=-N);var W=y-D,F=_;for(c=1;c<=o/2;c++){var U=2*Math.PI*c/o;O.push([j,W+D*Math.cos(U),F+N*Math.sin(U)])}break;case"Z":y===x&&_===g||(y=x,_=g,O.push([j,y,_]))}for(var V=(u||{}).domain,te=l._fullLayout._size,J=u&&u.xsizemode==="pixel",K=u&&u.ysizemode==="pixel",X=d===!1,Z=0;Z<O.length;Z++){for(c=0;c+2<7;c+=2){var $=O[Z][c+1],re=O[Z][c+2];$!==void 0&&re!==void 0&&(y=$,_=re,u&&(u.xaxis&&u.xaxis.p2r?(X&&($-=u.xaxis._offset),$=J?s(u.xaxis,u.xanchor)+$:h(u.xaxis,$)):(X&&($-=te.l),V?$=V.x[0]+$/te.w:$/=te.w),u.yaxis&&u.yaxis.p2r?(X&&(re-=u.yaxis._offset),re=K?s(u.yaxis,u.yanchor)-re:h(u.yaxis,re)):(X&&(re-=te.t),re=V?V.y[1]-re/te.h:1-re/te.h)),O[Z][c+1]=$,O[Z][c+2]=re)}v[m].push(O[Z].slice())}}return v},z.pointsOnRectangle=function(a){if(a.length!==5)return!1;for(var l=1;l<3;l++)if(!n(a[0][l]-a[1][l],a[3][l]-a[2][l])||!n(a[0][l]-a[3][l],a[1][l]-a[2][l]))return!1;return!(!n(a[0][1],a[1][1])&&!n(a[0][1],a[3][1])||!(r(a[0],a[1])*r(a[0],a[3])))},z.pointsOnEllipse=function(a){var l=a.length;if(l!==o+1)return!1;l=o;for(var u=0;u<l;u++){var d=(2*l-u)%l,c=(l/2+d)%l,x=(l/2+u)%l;if(!n(r(a[u],a[x]),r(a[d],a[c])))return!1}return!0},z.handleEllipse=function(a,l,u){if(!a)return[l,u];var d=z.ellipseOver({x0:l[0],y0:l[1],x1:u[0],y1:u[1]}),c=(d.x1+d.x0)/2,x=(d.y1+d.y0)/2,g=(d.x1-d.x0)/2,p=(d.y1-d.y0)/2;g||(g=p/=T),p||(p=g/=T);for(var v=[],m=0;m<o;m++){var y=2*m*Math.PI/o;v.push([c+g*Math.cos(y),x+p*Math.sin(y)])}return v},z.ellipseOver=function(a){var l=a.x0,u=a.y0,d=a.x1,c=a.y1,x=d-l,g=c-u,p=((l-=x)+d)/2,v=((u-=g)+c)/2;return{x0:p-(x*=T),y0:v-(g*=T),x1:p+x,y1:v+g}},z.fixDatesForPaths=function(a,l,u){var d=l.type==="date",c=u.type==="date";if(!d&&!c)return a;for(var x=0;x<a.length;x++)for(var g=0;g<a[x].length;g++)for(var p=0;p+2<a[x][g].length;p+=2)d&&(a[x][g][p+1]=a[x][g][p+1].replace(" ","_")),c&&(a[x][g][p+2]=a[x][g][p+2].replace(" ","_"));return a}},93940:function(ee,z,e){"use strict";var M=e(72760),k=M.drawMode,o=M.openMode,T=e(7e3),b=T.i000,h=T.i090,s=T.i180,t=T.i270,i=T.cos45,n=T.sin45,r=e(5840),a=r.p2r,l=r.r2p,u=e(1936).clearOutline,d=e(9856),c=d.readPaths,x=d.writePaths,g=d.ellipseOver,p=d.fixDatesForPaths;function v(m,y,_){var f,S=m[0][0],w=y.gd,E=S.getAttribute("d"),P=w._fullLayout.newshape,C=y.plotinfo,O=y.isActiveShape,R=C.xaxis,j=C.yaxis,D=!!C.domain||!C.xaxis,N=!!C.domain||!C.yaxis,W=o(_),F=c(E,w,C,O),U={editable:!0,visible:P.visible,name:P.name,showlegend:P.showlegend,legend:P.legend,legendwidth:P.legendwidth,legendgroup:P.legendgroup,legendgrouptitle:{text:P.legendgrouptitle.text,font:P.legendgrouptitle.font},legendrank:P.legendrank,label:P.label,xref:D?"paper":R._id,yref:N?"paper":j._id,layer:P.layer,opacity:P.opacity,line:{color:P.line.color,width:P.line.width,dash:P.line.dash}};if(W||(U.fillcolor=P.fillcolor,U.fillrule=P.fillrule),F.length===1&&(f=F[0]),f&&f.length===5&&_==="drawrect")U.type="rect",U.x0=f[0][1],U.y0=f[0][2],U.x1=f[2][1],U.y1=f[2][2];else if(f&&_==="drawline")U.type="line",U.x0=f[0][1],U.y0=f[0][2],U.x1=f[1][1],U.y1=f[1][2];else if(f&&_==="drawcircle"){U.type="circle";var V=f[b][1],te=f[h][1],J=f[s][1],K=f[t][1],X=f[b][2],Z=f[h][2],$=f[s][2],re=f[t][2],oe=C.xaxis&&(C.xaxis.type==="date"||C.xaxis.type==="log"),ie=C.yaxis&&(C.yaxis.type==="date"||C.yaxis.type==="log");oe&&(V=l(C.xaxis,V),te=l(C.xaxis,te),J=l(C.xaxis,J),K=l(C.xaxis,K)),ie&&(X=l(C.yaxis,X),Z=l(C.yaxis,Z),$=l(C.yaxis,$),re=l(C.yaxis,re));var ue=(te+K)/2,me=(X+$)/2,be=g({x0:ue,y0:me,x1:ue+(K-te+J-V)/2*i,y1:me+(re-Z+$-X)/2*n});oe&&(be.x0=a(C.xaxis,be.x0),be.x1=a(C.xaxis,be.x1)),ie&&(be.y0=a(C.yaxis,be.y0),be.y1=a(C.yaxis,be.y1)),U.x0=be.x0,U.y0=be.y0,U.x1=be.x1,U.y1=be.y1}else U.type="path",R&&j&&p(F,R,j),U.path=x(F),f=null;return U}ee.exports={newShapes:function(m,y){if(m.length&&m[0][0]){var _=y.gd,f=y.isActiveShape,S=y.dragmode,w=(_.layout||{}).shapes||[];if(!k(S)&&f!==void 0){var E=_._fullLayout._activeShapeIndex;if(E<w.length)switch(_._fullLayout.shapes[E].type){case"rect":S="drawrect";break;case"circle":S="drawcircle";break;case"line":S="drawline";break;case"path":var P=w[E].path||"";S=P[P.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var C=v(m,y,S);u(_);for(var O=y.editHelpers,R=(O||{}).modifyItem,j=[],D=0;D<w.length;D++){var N=_._fullLayout.shapes[D];if(j[D]=N._input,f!==void 0&&D===_._fullLayout._activeShapeIndex){var W=C;switch(N.type){case"line":case"rect":case"circle":R("x0",W.x0),R("x1",W.x1),R("y0",W.y0),R("y1",W.y1);break;case"path":R("path",W.path)}}}return f===void 0?(j.push(C),j):O?O.getUpdateObj():{}}},createShapeObj:v}},1936:function(ee){"use strict";ee.exports={clearOutlineControllers:function(z){var e=z._fullLayout._zoomlayer;e&&e.selectAll(".outline-controllers").remove()},clearOutline:function(z){var e=z._fullLayout._zoomlayer;e&&e.selectAll(".select-outline").remove(),z._fullLayout._outlining=!1}}},65152:function(ee,z,e){"use strict";var M=e(85448),k=e(3400),o=e(54460);z.rangeToShapePosition=function(T){return T.type==="log"?T.r2d:function(b){return b}},z.shapePositionToRange=function(T){return T.type==="log"?T.d2r:function(b){return b}},z.decodeDate=function(T){return function(b){return b.replace&&(b=b.replace("_"," ")),T(b)}},z.encodeDate=function(T){return function(b){return T(b).replace(" ","_")}},z.extractPathCoords=function(T,b,h){var s=[];return T.match(M.segmentRE).forEach(function(t){var i=b[t.charAt(0)].drawn;if(i!==void 0){var n=t.substr(1).match(M.paramRE);if(n&&!(n.length<i)){var r=n[i],a=h?r:k.cleanNumber(r);s.push(a)}}}),s},z.getDataToPixel=function(T,b,h,s){var t,i=T._fullLayout._size;if(b)if(s==="domain")t=function(r){return b._length*(h?1-r:r)+b._offset};else{var n=z.shapePositionToRange(b);t=function(r){return b._offset+b.r2p(n(r,!0))},b.type==="date"&&(t=z.decodeDate(t))}else t=h?function(r){return i.t+i.h*(1-r)}:function(r){return i.l+i.w*r};return t},z.getPixelToData=function(T,b,h,s){var t,i=T._fullLayout._size;if(b)if(s==="domain")t=function(r){var a=(r-b._offset)/b._length;return h?1-a:a};else{var n=z.rangeToShapePosition(b);t=function(r){return n(b.p2r(r-b._offset))}}else t=h?function(r){return 1-(r-i.t)/i.h}:function(r){return(r-i.l)/i.w};return t},z.roundPositionForSharpStrokeRendering=function(T,b){var h=Math.round(b%2)===1,s=Math.round(T);return h?s+.5:s},z.makeShapesOptionsAndPlotinfo=function(T,b){var h=T._fullLayout.shapes[b]||{},s=T._fullLayout._plots[h.xref+h.yref];return s?s._hadPlotinfo=!0:(s={},h.xref&&h.xref!=="paper"&&(s.xaxis=T._fullLayout[h.xref+"axis"]),h.yref&&h.yref!=="paper"&&(s.yaxis=T._fullLayout[h.yref+"axis"])),s.xsizemode=h.xsizemode,s.ysizemode=h.ysizemode,s.xanchor=h.xanchor,s.yanchor=h.yanchor,{options:h,plotinfo:s}},z.makeSelectionsOptionsAndPlotinfo=function(T,b){var h=T._fullLayout.selections[b]||{},s=T._fullLayout._plots[h.xref+h.yref];return s?s._hadPlotinfo=!0:(s={},h.xref&&(s.xaxis=T._fullLayout[h.xref+"axis"]),h.yref&&(s.yaxis=T._fullLayout[h.yref+"axis"])),{options:h,plotinfo:s}},z.getPathString=function(T,b){var h,s,t,i,n,r,a,l,u=b.type,d=o.getRefType(b.xref),c=o.getRefType(b.yref),x=o.getFromId(T,b.xref),g=o.getFromId(T,b.yref),p=T._fullLayout._size;if(x?d==="domain"?s=function(P){return x._offset+x._length*P}:(h=z.shapePositionToRange(x),s=function(P){return x._offset+x.r2p(h(P,!0))}):s=function(P){return p.l+p.w*P},g?c==="domain"?i=function(P){return g._offset+g._length*(1-P)}:(t=z.shapePositionToRange(g),i=function(P){return g._offset+g.r2p(t(P,!0))}):i=function(P){return p.t+p.h*(1-P)},u==="path")return x&&x.type==="date"&&(s=z.decodeDate(s)),g&&g.type==="date"&&(i=z.decodeDate(i)),function(P,C,O){var R=P.path,j=P.xsizemode,D=P.ysizemode,N=P.xanchor,W=P.yanchor;return R.replace(M.segmentRE,function(F){var U=0,V=F.charAt(0),te=M.paramIsX[V],J=M.paramIsY[V],K=M.numParams[V],X=F.substr(1).replace(M.paramRE,function(Z){return te[U]?Z=j==="pixel"?C(N)+Number(Z):C(Z):J[U]&&(Z=D==="pixel"?O(W)-Number(Z):O(Z)),++U>K&&(Z="X"),Z});return U>K&&(X=X.replace(/[\s,]*X.*/,""),k.log("Ignoring extra params in segment "+F)),V+X})}(b,s,i);if(b.xsizemode==="pixel"){var v=s(b.xanchor);n=v+b.x0,r=v+b.x1}else n=s(b.x0),r=s(b.x1);if(b.ysizemode==="pixel"){var m=i(b.yanchor);a=m-b.y0,l=m-b.y1}else a=i(b.y0),l=i(b.y1);if(u==="line")return"M"+n+","+a+"L"+r+","+l;if(u==="rect")return"M"+n+","+a+"H"+r+"V"+l+"H"+n+"Z";var y=(n+r)/2,_=(a+l)/2,f=Math.abs(y-n),S=Math.abs(_-a),w="A"+f+","+S,E=y+f+","+_;return"M"+E+w+" 0 1,1 "+y+","+(_-S)+w+" 0 0,1 "+E+"Z"}},41592:function(ee,z,e){"use strict";var M=e(4016);ee.exports={moduleType:"component",name:"shapes",layoutAttributes:e(46056),supplyLayoutDefaults:e(43712),supplyDrawNewShapeDefaults:e(65144),includeBasePlot:e(36632)("shapes"),calcAutorange:e(96084),draw:M.draw,drawOne:M.drawOne}},97728:function(ee){"use strict";function z(o,T){return T?T.d2l(o):o}function e(o,T){return T?T.l2d(o):o}function M(o,T){return z(o.x1,T)-z(o.x0,T)}function k(o,T,b){return z(o.y1,b)-z(o.y0,b)}ee.exports={x0:function(o){return o.x0},x1:function(o){return o.x1},y0:function(o){return o.y0},y1:function(o){return o.y1},slope:function(o,T,b){return o.type!=="line"?void 0:k(o,0,b)/M(o,T)},dx:M,dy:k,width:function(o,T){return Math.abs(M(o,T))},height:function(o,T,b){return Math.abs(k(o,0,b))},length:function(o,T,b){return o.type!=="line"?void 0:Math.sqrt(Math.pow(M(o,T),2)+Math.pow(k(o,0,b),2))},xcenter:function(o,T){return e((z(o.x1,T)+z(o.x0,T))/2,T)},ycenter:function(o,T,b){return e((z(o.y1,b)+z(o.y0,b))/2,b)}}},89861:function(ee,z,e){"use strict";var M=e(25376),k=e(66741),o=e(92880).extendDeepAll,T=e(67824).overrideAll,b=e(85656),h=e(31780).templatedArray,s=e(60876),t=h("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ee.exports=T(h("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:t,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:o(k({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:b.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:M({})},font:M({}),activebgcolor:{valType:"color",dflt:s.gripBgActiveColor},bgcolor:{valType:"color",dflt:s.railBgColor},bordercolor:{valType:"color",dflt:s.railBorderColor},borderwidth:{valType:"number",min:0,dflt:s.railBorderWidth},ticklen:{valType:"number",min:0,dflt:s.tickLength},tickcolor:{valType:"color",dflt:s.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:s.minorTickLength}}),"arraydraw","from-root")},60876:function(ee){"use strict";ee.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(ee,z,e){"use strict";var M=e(3400),k=e(51272),o=e(89861),T=e(60876).name,b=o.steps;function h(t,i,n){function r(c,x){return M.coerce(t,i,o,c,x)}for(var a=k(t,i,{name:"steps",handleItemDefaults:s}),l=0,u=0;u<a.length;u++)a[u].visible&&l++;if(l<2?i.visible=!1:r("visible")){i._stepCount=l;var d=i._visibleSteps=M.filterVisible(a);(a[r("active")]||{}).visible||(i.active=d[0]._index),r("x"),r("y"),M.noneOrAll(t,i,["x","y"]),r("xanchor"),r("yanchor"),r("len"),r("lenmode"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),M.coerceFont(r,"font",n.font),r("currentvalue.visible")&&(r("currentvalue.xanchor"),r("currentvalue.prefix"),r("currentvalue.suffix"),r("currentvalue.offset"),M.coerceFont(r,"currentvalue.font",i.font)),r("transition.duration"),r("transition.easing"),r("bgcolor"),r("activebgcolor"),r("bordercolor"),r("borderwidth"),r("ticklen"),r("tickwidth"),r("tickcolor"),r("minorticklen")}}function s(t,i){function n(a,l){return M.coerce(t,i,b,a,l)}if(t.method==="skip"||Array.isArray(t.args)?n("visible"):i.visible=!1){n("method"),n("args");var r=n("label","step-"+i._index);n("value",r),n("execute")}}ee.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:h})}},79664:function(ee,z,e){"use strict";var M=e(33428),k=e(7316),o=e(76308),T=e(43616),b=e(3400),h=b.strTranslate,s=e(72736),t=e(31780).arrayEditor,i=e(60876),n=e(84284),r=n.LINE_SPACING,a=n.FROM_TL,l=n.FROM_BR;function u(O){return i.autoMarginIdRoot+O._index}function d(O){return O._index}function c(O,R){var j=T.tester.selectAll("g."+i.labelGroupClass).data(R._visibleSteps);j.enter().append("g").classed(i.labelGroupClass,!0);var D=0,N=0;j.each(function(Z){var $=p(M.select(this),{step:Z},R).node();if($){var re=T.bBox($);N=Math.max(N,re.height),D=Math.max(D,re.width)}}),j.remove();var W=R._dims={};W.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var F=O._fullLayout._size;W.lx=F.l+F.w*R.x,W.ly=F.t+F.h*(1-R.y),R.lenmode==="fraction"?W.outerLength=Math.round(F.w*R.len):W.outerLength=R.len,W.inputAreaStart=0,W.inputAreaLength=Math.round(W.outerLength-R.pad.l-R.pad.r);var U=(W.inputAreaLength-2*i.stepInset)/(R._stepCount-1),V=D+i.labelPadding;if(W.labelStride=Math.max(1,Math.ceil(V/U)),W.labelHeight=N,W.currentValueMaxWidth=0,W.currentValueHeight=0,W.currentValueTotalHeight=0,W.currentValueMaxLines=1,R.currentvalue.visible){var te=T.tester.append("g");j.each(function(Z){var $=x(te,R,Z.label),re=$.node()&&T.bBox($.node())||{width:0,height:0},oe=s.lineCount($);W.currentValueMaxWidth=Math.max(W.currentValueMaxWidth,Math.ceil(re.width)),W.currentValueHeight=Math.max(W.currentValueHeight,Math.ceil(re.height)),W.currentValueMaxLines=Math.max(W.currentValueMaxLines,oe)}),W.currentValueTotalHeight=W.currentValueHeight+R.currentvalue.offset,te.remove()}W.height=W.currentValueTotalHeight+i.tickOffset+R.ticklen+i.labelOffset+W.labelHeight+R.pad.t+R.pad.b;var J="left";b.isRightAnchor(R)&&(W.lx-=W.outerLength,J="right"),b.isCenterAnchor(R)&&(W.lx-=W.outerLength/2,J="center");var K="top";b.isBottomAnchor(R)&&(W.ly-=W.height,K="bottom"),b.isMiddleAnchor(R)&&(W.ly-=W.height/2,K="middle"),W.outerLength=Math.ceil(W.outerLength),W.height=Math.ceil(W.height),W.lx=Math.round(W.lx),W.ly=Math.round(W.ly);var X={y:R.y,b:W.height*l[K],t:W.height*a[K]};R.lenmode==="fraction"?(X.l=0,X.xl=R.x-R.len*a[J],X.r=0,X.xr=R.x+R.len*l[J]):(X.x=R.x,X.l=W.outerLength*a[J],X.r=W.outerLength*l[J]),k.autoMargin(O,u(R),X)}function x(O,R,j){if(R.currentvalue.visible){var D,N,W=R._dims;switch(R.currentvalue.xanchor){case"right":D=W.inputAreaLength-i.currentValueInset-W.currentValueMaxWidth,N="left";break;case"center":D=.5*W.inputAreaLength,N="middle";break;default:D=i.currentValueInset,N="left"}var F=b.ensureSingle(O,"text",i.labelClass,function(X){X.attr({"text-anchor":N,"data-notex":1})}),U=R.currentvalue.prefix?R.currentvalue.prefix:"";if(typeof j=="string")U+=j;else{var V=R.steps[R.active].label,te=R._gd._fullLayout._meta;te&&(V=b.templateString(V,te)),U+=V}R.currentvalue.suffix&&(U+=R.currentvalue.suffix),F.call(T.font,R.currentvalue.font).text(U).call(s.convertToTspans,R._gd);var J=s.lineCount(F),K=(W.currentValueMaxLines+1-J)*R.currentvalue.font.size*r;return s.positionText(F,D,K),F}}function g(O,R,j){b.ensureSingle(O,"rect",i.gripRectClass,function(D){D.call(_,R,O,j).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(o.stroke,j.bordercolor).call(o.fill,j.bgcolor).style("stroke-width",j.borderwidth+"px")}function p(O,R,j){var D=b.ensureSingle(O,"text",i.labelClass,function(F){F.attr({"text-anchor":"middle","data-notex":1})}),N=R.step.label,W=j._gd._fullLayout._meta;return W&&(N=b.templateString(N,W)),D.call(T.font,j.font).text(N).call(s.convertToTspans,j._gd),D}function v(O,R){var j=b.ensureSingle(O,"g",i.labelsClass),D=R._dims,N=j.selectAll("g."+i.labelGroupClass).data(D.labelSteps);N.enter().append("g").classed(i.labelGroupClass,!0),N.exit().remove(),N.each(function(W){var F=M.select(this);F.call(p,W,R),T.setTranslate(F,w(R,W.fraction),i.tickOffset+R.ticklen+R.font.size*r+i.labelOffset+D.currentValueTotalHeight)})}function m(O,R,j,D,N){var W=Math.round(D*(j._stepCount-1)),F=j._visibleSteps[W]._index;F!==j.active&&y(O,R,j,F,!0,N)}function y(O,R,j,D,N,W){var F=j.active;j.active=D,t(O.layout,i.name,j).applyUpdate("active",D);var U=j.steps[j.active];R.call(S,j,W),R.call(x,j),O.emit("plotly_sliderchange",{slider:j,step:j.steps[j.active],interaction:N,previousActive:F}),U&&U.method&&N&&(R._nextMethod?(R._nextMethod.step=U,R._nextMethod.doCallback=N,R._nextMethod.doTransition=W):(R._nextMethod={step:U,doCallback:N,doTransition:W},R._nextMethodRaf=window.requestAnimationFrame(function(){var V=R._nextMethod.step;V.method&&(V.execute&&k.executeAPICommand(O,V.method,V.args),R._nextMethod=null,R._nextMethodRaf=null)})))}function _(O,R,j){if(!R._context.staticPlot){var D=j.node(),N=M.select(R);O.on("mousedown",F),O.on("touchstart",F)}function W(){return j.data()[0]}function F(){var U=W();R.emit("plotly_sliderstart",{slider:U});var V=j.select("."+i.gripRectClass);M.event.stopPropagation(),M.event.preventDefault(),V.call(o.fill,U.activebgcolor);var te=E(U,M.mouse(D)[0]);function J(){var X=W(),Z=E(X,M.mouse(D)[0]);m(R,j,X,Z,!1)}function K(){var X=W();X._dragging=!1,V.call(o.fill,X.bgcolor),N.on("mouseup",null),N.on("mousemove",null),N.on("touchend",null),N.on("touchmove",null),R.emit("plotly_sliderend",{slider:X,step:X.steps[X.active]})}m(R,j,U,te,!0),U._dragging=!0,N.on("mousemove",J),N.on("touchmove",J),N.on("mouseup",K),N.on("touchend",K)}}function f(O,R){var j=O.selectAll("rect."+i.tickRectClass).data(R._visibleSteps),D=R._dims;j.enter().append("rect").classed(i.tickRectClass,!0),j.exit().remove(),j.attr({width:R.tickwidth+"px","shape-rendering":"crispEdges"}),j.each(function(N,W){var F=W%D.labelStride==0,U=M.select(this);U.attr({height:F?R.ticklen:R.minorticklen}).call(o.fill,R.tickcolor),T.setTranslate(U,w(R,W/(R._stepCount-1))-.5*R.tickwidth,(F?i.tickOffset:i.minorTickOffset)+D.currentValueTotalHeight)})}function S(O,R,j){for(var D=O.select("rect."+i.gripRectClass),N=0,W=0;W<R._stepCount;W++)if(R._visibleSteps[W]._index===R.active){N=W;break}var F=w(R,N/(R._stepCount-1));if(!R._invokingCommand){var U=D;j&&R.transition.duration>0&&(U=U.transition().duration(R.transition.duration).ease(R.transition.easing)),U.attr("transform",h(F-.5*i.gripWidth,R._dims.currentValueTotalHeight))}}function w(O,R){var j=O._dims;return j.inputAreaStart+i.stepInset+(j.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,R))}function E(O,R){var j=O._dims;return Math.min(1,Math.max(0,(R-i.stepInset-j.inputAreaStart)/(j.inputAreaLength-2*i.stepInset-2*j.inputAreaStart)))}function P(O,R,j){var D=j._dims,N=b.ensureSingle(O,"rect",i.railTouchRectClass,function(W){W.call(_,R,O,j).style("pointer-events","all")});N.attr({width:D.inputAreaLength,height:Math.max(D.inputAreaWidth,i.tickOffset+j.ticklen+D.labelHeight)}).call(o.fill,j.bgcolor).attr("opacity",0),T.setTranslate(N,0,D.currentValueTotalHeight)}function C(O,R){var j=R._dims,D=j.inputAreaLength-2*i.railInset,N=b.ensureSingle(O,"rect",i.railRectClass);N.attr({width:D,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(o.stroke,R.bordercolor).call(o.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px"),T.setTranslate(N,i.railInset,.5*(j.inputAreaWidth-i.railWidth)+j.currentValueTotalHeight)}ee.exports=function(O){var R=O._context.staticPlot,j=O._fullLayout,D=function(te,J){for(var K=te[i.name],X=[],Z=0;Z<K.length;Z++){var $=K[Z];$.visible&&($._gd=J,X.push($))}return X}(j,O),N=j._infolayer.selectAll("g."+i.containerClassName).data(D.length>0?[0]:[]);function W(te){te._commandObserver&&(te._commandObserver.remove(),delete te._commandObserver),k.autoMargin(O,u(te))}if(N.enter().append("g").classed(i.containerClassName,!0).style("cursor",R?null:"ew-resize"),N.exit().each(function(){M.select(this).selectAll("g."+i.groupClassName).each(W)}).remove(),D.length!==0){var F=N.selectAll("g."+i.groupClassName).data(D,d);F.enter().append("g").classed(i.groupClassName,!0),F.exit().each(W).remove();for(var U=0;U<D.length;U++){var V=D[U];c(O,V)}F.each(function(te){var J=M.select(this);(function(K){var X=K._dims;X.labelSteps=[];for(var Z=K._stepCount,$=0;$<Z;$+=X.labelStride)X.labelSteps.push({fraction:$/(Z-1),step:K._visibleSteps[$]})})(te),k.manageCommandObserver(O,te,te._visibleSteps,function(K){var X=J.data()[0];X.active!==K.index&&(X._dragging||y(O,J,X,K.index,!1,!0))}),function(K,X,Z){(Z.steps[Z.active]||{}).visible||(Z.active=Z._visibleSteps[0]._index),X.call(x,Z).call(C,Z).call(v,Z).call(f,Z).call(P,K,Z).call(g,K,Z);var $=Z._dims;T.setTranslate(X,$.lx+Z.pad.l,$.ly+Z.pad.t),X.call(S,Z,!1),X.call(x,Z)}(O,M.select(this),te)})}}},97544:function(ee,z,e){"use strict";var M=e(60876);ee.exports={moduleType:"component",name:M.name,layoutAttributes:e(89861),supplyLayoutDefaults:e(8132),draw:e(79664)}},81668:function(ee,z,e){"use strict";var M=e(33428),k=e(38248),o=e(7316),T=e(24040),b=e(3400),h=b.strTranslate,s=e(43616),t=e(76308),i=e(72736),n=e(13448),r=e(84284).OPPOSITE_SIDE,a=/ [XY][0-9]* /;ee.exports={draw:function(l,u,d){var c,x=d.propContainer,g=d.propName,p=d.placeholder,v=d.traceIndex,m=d.avoid||{},y=d.attributes,_=d.transform,f=d.containerGroup,S=l._fullLayout,w=1,E=!1,P=x.title,C=(P&&P.text?P.text:"").trim(),O=P&&P.font?P.font:{},R=O.family,j=O.size,D=O.color;g==="title.text"?c="titleText":g.indexOf("axis")!==-1?c="axisTitleText":g.indexOf(!0)&&(c="colorbarTitleText");var N=l._context.edits[c];C===""?w=0:C.replace(a," % ")===p.replace(a," % ")&&(w=.2,E=!0,N||(C="")),d._meta?C=b.templateString(C,d._meta):S._meta&&(C=b.templateString(C,S._meta));var W,F=C||N;f||(f=b.ensureSingle(S._infolayer,"g","g-"+u),W=S._hColorbarMoveTitle);var U=f.selectAll("text").data(F?[0]:[]);if(U.enter().append("text"),U.text(C).attr("class",u),U.exit().remove(),!F)return f;function V(K){b.syncOrAsync([te,J],K)}function te(K){var X;return!_&&W&&(_={}),_?(X="",_.rotate&&(X+="rotate("+[_.rotate,y.x,y.y]+")"),(_.offset||W)&&(X+=h(0,(_.offset||0)-(W||0)))):X=null,K.attr("transform",X),K.style({"font-family":R,"font-size":M.round(j,2)+"px",fill:t.rgb(D),opacity:w*t.opacity(D),"font-weight":o.fontWeight}).attr(y).call(i.convertToTspans,l),o.previousPromises(l)}function J(K){var X=M.select(K.node().parentNode);if(m&&m.selection&&m.side&&C){X.attr("transform",null);var Z=r[m.side],$=m.side==="left"||m.side==="top"?-1:1,re=k(m.pad)?m.pad:2,oe=s.bBox(X.node()),ie={t:0,b:0,l:0,r:0},ue=l._fullLayout._reservedMargin;for(var me in ue)for(var be in ue[me]){var ge=ue[me][be];ie[be]=Math.max(ie[be],ge)}var de={left:ie.l,top:ie.t,right:S.width-ie.r,bottom:S.height-ie.b},ve=m.maxShift||$*(de[m.side]-oe[m.side]),pe=0;if(ve<0)pe=ve;else{var _e=m.offsetLeft||0,Te=m.offsetTop||0;oe.left-=_e,oe.right-=_e,oe.top-=Te,oe.bottom-=Te,m.selection.each(function(){var ae=s.bBox(this);b.bBoxIntersect(oe,ae,re)&&(pe=Math.max(pe,$*(ae[m.side]-oe[Z])+re))}),pe=Math.min(ve,pe),x._titleScoot=Math.abs(pe)}if(pe>0||ve<0){var le={left:[-pe,0],right:[pe,0],top:[0,-pe],bottom:[0,pe]}[m.side];X.attr("transform",h(le[0],le[1]))}}}return U.call(V),N&&(C?U.on(".opacity",null):(w=0,E=!0,U.text(p).on("mouseover.opacity",function(){M.select(this).transition().duration(n.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){M.select(this).transition().duration(n.HIDE_PLACEHOLDER).style("opacity",0)})),U.call(i.makeEditable,{gd:l}).on("edit",function(K){v!==void 0?T.call("_guiRestyle",l,g,K,v):T.call("_guiRelayout",l,g,K)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(V)}).on("input",function(K){this.text(K||" ").call(i.positionText,y.x,y.y)})),U.classed("js-placeholder",E),f}}},88444:function(ee,z,e){"use strict";var M=e(25376),k=e(22548),o=e(92880).extendFlat,T=e(67824).overrideAll,b=e(66741),h=e(31780).templatedArray,s=h("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ee.exports=T(h("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:s,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:o(b({editType:"arraydraw"}),{}),font:M({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:k.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(ee){"use strict";ee.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},91384:function(ee,z,e){"use strict";var M=e(3400),k=e(51272),o=e(88444),T=e(73712).name,b=o.buttons;function h(t,i,n){function r(a,l){return M.coerce(t,i,o,a,l)}r("visible",k(t,i,{name:"buttons",handleItemDefaults:s}).length>0)&&(r("active"),r("direction"),r("type"),r("showactive"),r("x"),r("y"),M.noneOrAll(t,i,["x","y"]),r("xanchor"),r("yanchor"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),M.coerceFont(r,"font",n.font),r("bgcolor",n.paper_bgcolor),r("bordercolor"),r("borderwidth"))}function s(t,i){function n(r,a){return M.coerce(t,i,b,r,a)}n("visible",t.method==="skip"||Array.isArray(t.args))&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}ee.exports=function(t,i){k(t,i,{name:T,handleItemDefaults:h})}},14420:function(ee,z,e){"use strict";var M=e(33428),k=e(7316),o=e(76308),T=e(43616),b=e(3400),h=e(72736),s=e(31780).arrayEditor,t=e(84284).LINE_SPACING,i=e(73712),n=e(37400);function r(w){return w._index}function a(w,E){return+w.attr(i.menuIndexAttrName)===E._index}function l(w,E,P,C,O,R,j,D){E.active=j,s(w.layout,i.name,E).applyUpdate("active",j),E.type==="buttons"?d(w,C,null,null,E):E.type==="dropdown"&&(O.attr(i.menuIndexAttrName,"-1"),u(w,C,O,R,E),D||d(w,C,O,R,E))}function u(w,E,P,C,O){var R=b.ensureSingle(E,"g",i.headerClassName,function(U){U.style("pointer-events","all")}),j=O._dims,D=O.active,N=O.buttons[D]||i.blankHeaderOpts,W={y:O.pad.t,yPad:0,x:O.pad.l,xPad:0,index:0},F={width:j.headerWidth,height:j.headerHeight};R.call(c,O,N,w).call(f,O,W,F),b.ensureSingle(E,"text",i.headerArrowClassName,function(U){U.attr("text-anchor","end").call(T.font,O.font).text(i.arrowSymbol[O.direction])}).attr({x:j.headerWidth-i.arrowOffsetX+O.pad.l,y:j.headerHeight/2+i.textOffsetY+O.pad.t}),R.on("click",function(){P.call(S,String(a(P,O)?-1:O._index)),d(w,E,P,C,O)}),R.on("mouseover",function(){R.call(v)}),R.on("mouseout",function(){R.call(m,O)}),T.setTranslate(E,j.lx,j.ly)}function d(w,E,P,C,O){P||(P=E).attr("pointer-events","all");var R=function(X){return+X.attr(i.menuIndexAttrName)==-1}(P)&&O.type!=="buttons"?[]:O.buttons,j=O.type==="dropdown"?i.dropdownButtonClassName:i.buttonClassName,D=P.selectAll("g."+j).data(b.filterVisible(R)),N=D.enter().append("g").classed(j,!0),W=D.exit();O.type==="dropdown"?(N.attr("opacity","0").transition().attr("opacity","1"),W.transition().attr("opacity","0").remove()):W.remove();var F=0,U=0,V=O._dims,te=["up","down"].indexOf(O.direction)!==-1;O.type==="dropdown"&&(te?U=V.headerHeight+i.gapButtonHeader:F=V.headerWidth+i.gapButtonHeader),O.type==="dropdown"&&O.direction==="up"&&(U=-i.gapButtonHeader+i.gapButton-V.openHeight),O.type==="dropdown"&&O.direction==="left"&&(F=-i.gapButtonHeader+i.gapButton-V.openWidth);var J={x:V.lx+F+O.pad.l,y:V.ly+U+O.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},K={l:J.x+O.borderwidth,t:J.y+O.borderwidth};D.each(function(X,Z){var $=M.select(this);$.call(c,O,X,w).call(f,O,J),$.on("click",function(){M.event.defaultPrevented||(X.execute&&(X.args2&&O.active===Z?(l(w,O,0,E,P,C,-1),k.executeAPICommand(w,X.method,X.args2)):(l(w,O,0,E,P,C,Z),k.executeAPICommand(w,X.method,X.args))),w.emit("plotly_buttonclicked",{menu:O,button:X,active:O.active}))}),$.on("mouseover",function(){$.call(v)}),$.on("mouseout",function(){$.call(m,O),D.call(p,O)})}),D.call(p,O),te?(K.w=Math.max(V.openWidth,V.headerWidth),K.h=J.y-K.t):(K.w=J.x-K.l,K.h=Math.max(V.openHeight,V.headerHeight)),K.direction=O.direction,C&&(D.size()?function(X,Z,$,re,oe,ie){var ue,me,be,ge=oe.direction,de=ge==="up"||ge==="down",ve=oe._dims,pe=oe.active;if(de)for(me=0,be=0;be<pe;be++)me+=ve.heights[be]+i.gapButton;else for(ue=0,be=0;be<pe;be++)ue+=ve.widths[be]+i.gapButton;re.enable(ie,ue,me),re.hbar&&re.hbar.attr("opacity","0").transition().attr("opacity","1"),re.vbar&&re.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,C,O,K):function(X){var Z=!!X.hbar,$=!!X.vbar;Z&&X.hbar.transition().attr("opacity","0").each("end",function(){Z=!1,$||X.disable()}),$&&X.vbar.transition().attr("opacity","0").each("end",function(){$=!1,Z||X.disable()})}(C))}function c(w,E,P,C){w.call(x,E).call(g,E,P,C)}function x(w,E){b.ensureSingle(w,"rect",i.itemRectClassName,function(P){P.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(o.stroke,E.bordercolor).call(o.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function g(w,E,P,C){var O=b.ensureSingle(w,"text",i.itemTextClassName,function(D){D.attr({"text-anchor":"start","data-notex":1})}),R=P.label,j=C._fullLayout._meta;j&&(R=b.templateString(R,j)),O.call(T.font,E.font).text(R).call(h.convertToTspans,C)}function p(w,E){var P=E.active;w.each(function(C,O){var R=M.select(this);O===P&&E.showactive&&R.select("rect."+i.itemRectClassName).call(o.fill,i.activeColor)})}function v(w){w.select("rect."+i.itemRectClassName).call(o.fill,i.hoverColor)}function m(w,E){w.select("rect."+i.itemRectClassName).call(o.fill,E.bgcolor)}function y(w,E){var P=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},C=T.tester.selectAll("g."+i.dropdownButtonClassName).data(b.filterVisible(E.buttons));C.enter().append("g").classed(i.dropdownButtonClassName,!0);var O=["up","down"].indexOf(E.direction)!==-1;C.each(function(F,U){var V=M.select(this);V.call(c,E,F,w);var te=V.select("."+i.itemTextClassName),J=te.node()&&T.bBox(te.node()).width,K=Math.max(J+i.textPadX,i.minWidth),X=E.font.size*t,Z=h.lineCount(te),$=Math.max(X*Z,i.minHeight)+i.textOffsetY;$=Math.ceil($),K=Math.ceil(K),P.widths[U]=K,P.heights[U]=$,P.height1=Math.max(P.height1,$),P.width1=Math.max(P.width1,K),O?(P.totalWidth=Math.max(P.totalWidth,K),P.openWidth=P.totalWidth,P.totalHeight+=$+i.gapButton,P.openHeight+=$+i.gapButton):(P.totalWidth+=K+i.gapButton,P.openWidth+=K+i.gapButton,P.totalHeight=Math.max(P.totalHeight,$),P.openHeight=P.totalHeight)}),O?P.totalHeight-=i.gapButton:P.totalWidth-=i.gapButton,P.headerWidth=P.width1+i.arrowPadX,P.headerHeight=P.height1,E.type==="dropdown"&&(O?(P.width1+=i.arrowPadX,P.totalHeight=P.height1):P.totalWidth=P.width1,P.totalWidth+=i.arrowPadX),C.remove();var R=P.totalWidth+E.pad.l+E.pad.r,j=P.totalHeight+E.pad.t+E.pad.b,D=w._fullLayout._size;P.lx=D.l+D.w*E.x,P.ly=D.t+D.h*(1-E.y);var N="left";b.isRightAnchor(E)&&(P.lx-=R,N="right"),b.isCenterAnchor(E)&&(P.lx-=R/2,N="center");var W="top";b.isBottomAnchor(E)&&(P.ly-=j,W="bottom"),b.isMiddleAnchor(E)&&(P.ly-=j/2,W="middle"),P.totalWidth=Math.ceil(P.totalWidth),P.totalHeight=Math.ceil(P.totalHeight),P.lx=Math.round(P.lx),P.ly=Math.round(P.ly),k.autoMargin(w,_(E),{x:E.x,y:E.y,l:R*({right:1,center:.5}[N]||0),r:R*({left:1,center:.5}[N]||0),b:j*({top:1,middle:.5}[W]||0),t:j*({bottom:1,middle:.5}[W]||0)})}function _(w){return i.autoMarginIdRoot+w._index}function f(w,E,P,C){C=C||{};var O=w.select("."+i.itemRectClassName),R=w.select("."+i.itemTextClassName),j=E.borderwidth,D=P.index,N=E._dims;T.setTranslate(w,j+P.x,j+P.y);var W=["up","down"].indexOf(E.direction)!==-1,F=C.height||(W?N.heights[D]:N.height1);O.attr({x:0,y:0,width:C.width||(W?N.width1:N.widths[D]),height:F});var U=E.font.size*t,V=(h.lineCount(R)-1)*U/2;h.positionText(R,i.textOffsetX,F/2-V+i.textOffsetY),W?P.y+=N.heights[D]+P.yPad:P.x+=N.widths[D]+P.xPad,P.index++}function S(w,E){w.attr(i.menuIndexAttrName,E||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}ee.exports=function(w){var E=w._fullLayout,P=b.filterVisible(E[i.name]);function C(U){k.autoMargin(w,_(U))}var O=E._menulayer.selectAll("g."+i.containerClassName).data(P.length>0?[0]:[]);if(O.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){M.select(this).selectAll("g."+i.headerGroupClassName).each(C)}).remove(),P.length!==0){var R=O.selectAll("g."+i.headerGroupClassName).data(P,r);R.enter().append("g").classed(i.headerGroupClassName,!0);for(var j=b.ensureSingle(O,"g",i.dropdownButtonGroupClassName,function(U){U.style("pointer-events","all")}),D=0;D<P.length;D++){var N=P[D];y(w,N)}var W="updatemenus"+E._uid,F=new n(w,j,W);R.enter().size()&&(j.node().parentNode.appendChild(j.node()),j.call(S)),R.exit().each(function(U){j.call(S),C(U)}).remove(),R.each(function(U){var V=M.select(this),te=U.type==="dropdown"?j:null;k.manageCommandObserver(w,U,U.buttons,function(J){l(w,U,U.buttons[J.index],V,te,F,J.index,!0)}),U.type==="dropdown"?(u(w,V,j,F,U),a(j,U)&&d(w,V,j,F,U)):d(w,V,null,null,U)})}}},76908:function(ee,z,e){"use strict";var M=e(73712);ee.exports={moduleType:"component",name:M.name,layoutAttributes:e(88444),supplyLayoutDefaults:e(91384),draw:e(14420)}},37400:function(ee,z,e){"use strict";ee.exports=b;var M=e(33428),k=e(76308),o=e(43616),T=e(3400);function b(h,s,t){this.gd=h,this.container=s,this.id=t,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}b.barWidth=2,b.barLength=20,b.barRadius=2,b.barPad=1,b.barColor="#808BA4",b.prototype.enable=function(h,s,t){var i=this.gd._fullLayout,n=i.width,r=i.height;this.position=h;var a,l,u,d,c=this.position.l,x=this.position.w,g=this.position.t,p=this.position.h,v=this.position.direction,m=v==="down",y=v==="left",_=v==="up",f=x,S=p;m||y||v==="right"||_||(this.position.direction="down",m=!0),m||_?(l=(a=c)+f,m?(u=g,S=(d=Math.min(u+S,r))-u):S=(d=g+S)-(u=Math.max(d-S,0))):(d=(u=g)+S,y?f=(l=c+f)-(a=Math.max(l-f,0)):(a=c,f=(l=Math.min(a+f,n))-a)),this._box={l:a,t:u,w:f,h:S};var w=x>f,E=b.barLength+2*b.barPad,P=b.barWidth+2*b.barPad,C=c,O=g+p;O+P>r&&(O=r-P);var R=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);R.exit().on(".drag",null).remove(),R.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,b.barColor),w?(this.hbar=R.attr({rx:b.barRadius,ry:b.barRadius,x:C,y:O,width:E,height:P}),this._hbarXMin=C+E/2,this._hbarTranslateMax=f-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var j=p>S,D=b.barWidth+2*b.barPad,N=b.barLength+2*b.barPad,W=c+x,F=g;W+D>n&&(W=n-D);var U=this.container.selectAll("rect.scrollbar-vertical").data(j?[0]:[]);U.exit().on(".drag",null).remove(),U.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,b.barColor),j?(this.vbar=U.attr({rx:b.barRadius,ry:b.barRadius,x:W,y:F,width:D,height:N}),this._vbarYMin=F+N/2,this._vbarTranslateMax=S-N):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var V=this.id,te=a-.5,J=j?l+D+.5:l+.5,K=u-.5,X=w?d+P+.5:d+.5,Z=i._topdefs.selectAll("#"+V).data(w||j?[0]:[]);if(Z.exit().remove(),Z.enter().append("clipPath").attr("id",V).append("rect"),w||j?(this._clipRect=Z.select("rect").attr({x:Math.floor(te),y:Math.floor(K),width:Math.ceil(J)-Math.floor(te),height:Math.ceil(X)-Math.floor(K)}),this.container.call(o.setClipUrl,V,this.gd),this.bg.attr({x:c,y:g,width:x,height:p})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),w||j){var $=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call($);var re=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault(),M.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));w&&this.hbar.on(".drag",null).call(re),j&&this.vbar.on(".drag",null).call(re)}this.setTranslate(s,t)},b.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},b.prototype._onBoxDrag=function(){var h=this.translateX,s=this.translateY;this.hbar&&(h-=M.event.dx),this.vbar&&(s-=M.event.dy),this.setTranslate(h,s)},b.prototype._onBoxWheel=function(){var h=this.translateX,s=this.translateY;this.hbar&&(h+=M.event.deltaY),this.vbar&&(s+=M.event.deltaY),this.setTranslate(h,s)},b.prototype._onBarDrag=function(){var h=this.translateX,s=this.translateY;if(this.hbar){var t=h+this._hbarXMin,i=t+this._hbarTranslateMax;h=(T.constrain(M.event.x,t,i)-t)/(i-t)*(this.position.w-this._box.w)}if(this.vbar){var n=s+this._vbarYMin,r=n+this._vbarTranslateMax;s=(T.constrain(M.event.y,n,r)-n)/(r-n)*(this.position.h-this._box.h)}this.setTranslate(h,s)},b.prototype.setTranslate=function(h,s){var t=this.position.w-this._box.w,i=this.position.h-this._box.h;if(h=T.constrain(h||0,0,t),s=T.constrain(s||0,0,i),this.translateX=h,this.translateY=s,this.container.call(o.setTranslate,this._box.l-this.position.l-h,this._box.t-this.position.t-s),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+h-.5),y:Math.floor(this.position.t+s-.5)}),this.hbar){var n=h/t;this.hbar.call(o.setTranslate,h+n*this._hbarTranslateMax,s)}if(this.vbar){var r=s/i;this.vbar.call(o.setTranslate,h,s+r*this._vbarTranslateMax)}}},84284:function(ee){"use strict";ee.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(ee){"use strict";ee.exports={axisRefDescription:function(z,e,M){return["If set to a",z,"axis id (e.g. *"+z+"* or","*"+z+"2*), the `"+z+"` position refers to a",z,"coordinate. If set to *paper*, the `"+z+"`","position refers to the distance from the",e,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",e,"("+M+"). If set to a",z,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",e,"of the domain of that axis: e.g.,","*"+z+"2 domain* refers to the domain of the second",z," axis and a",z,"position of 0.5 refers to the","point between the",e,"and the",M,"of the domain of the","second",z,"axis."].join(" ")}}},48164:function(ee){"use strict";ee.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},26880:function(ee){"use strict";ee.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(ee){"use strict";ee.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(ee){"use strict";ee.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(ee){"use strict";ee.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},13448:function(ee){"use strict";ee.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(ee){"use strict";ee.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},2264:function(ee,z){"use strict";z.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],z.STYLE=z.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")},9616:function(ee,z){"use strict";z.xmlns="http://www.w3.org/2000/xmlns/",z.svg="http://www.w3.org/2000/svg",z.xlink="http://www.w3.org/1999/xlink",z.svgAttrs={xmlns:z.svg,"xmlns:xlink":z.xlink}},64884:function(ee,z,e){"use strict";z.version=e(25788).version,e(88324),e(79288);for(var M=e(24040),k=z.register=M.register,o=e(22448),T=Object.keys(o),b=0;b<T.length;b++){var h=T[b];h.charAt(0)!=="_"&&(z[h]=o[h]),k({moduleType:"apiMethod",name:h,fn:o[h]})}k(e(65875)),k([e(79180),e(56864),e(22676),e(41592),e(7402),e(76908),e(97544),e(49692),e(41152),e(12704),e(64968),e(8932),e(55080),e(2780),e(93024),e(45460)]),k([e(6580),e(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(k(window.PlotlyLocales),delete window.PlotlyLocales),z.Icons=e(9224);var s=e(93024),t=e(7316);z.Plots={resize:t.resize,graphJson:t.graphJson,sendDataToCloud:t.sendDataToCloud},z.Fx={hover:s.hover,unhover:s.unhover,loneHover:s.loneHover,loneUnhover:s.loneUnhover},z.Snapshot=e(78904),z.PlotSchema=e(73060)},9224:function(ee){"use strict";ee.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(ee,z){"use strict";z.isLeftAnchor=function(e){return e.xanchor==="left"||e.xanchor==="auto"&&e.x<=.3333333333333333},z.isCenterAnchor=function(e){return e.xanchor==="center"||e.xanchor==="auto"&&e.x>.3333333333333333&&e.x<.6666666666666666},z.isRightAnchor=function(e){return e.xanchor==="right"||e.xanchor==="auto"&&e.x>=.6666666666666666},z.isTopAnchor=function(e){return e.yanchor==="top"||e.yanchor==="auto"&&e.y>=.6666666666666666},z.isMiddleAnchor=function(e){return e.yanchor==="middle"||e.yanchor==="auto"&&e.y>.3333333333333333&&e.y<.6666666666666666},z.isBottomAnchor=function(e){return e.yanchor==="bottom"||e.yanchor==="auto"&&e.y<=.3333333333333333}},11864:function(ee,z,e){"use strict";var M=e(20435),k=M.mod,o=M.modHalf,T=Math.PI,b=2*T;function h(n){return Math.abs(n[1]-n[0])>b-1e-14}function s(n,r){return o(r-n,b)}function t(n,r){if(h(r))return!0;var a,l;r[0]<r[1]?(a=r[0],l=r[1]):(a=r[1],l=r[0]),(a=k(a,b))>(l=k(l,b))&&(l+=b);var u=k(n,b),d=u+b;return u>=a&&u<=l||d>=a&&d<=l}function i(n,r,a,l,u,d,c){u=u||0,d=d||0;var x,g,p,v,m,y=h([a,l]);function _(E,P){return[E*Math.cos(P)+u,d-E*Math.sin(P)]}y?(x=0,g=T,p=b):a<l?(x=a,p=l):(x=l,p=a),n<r?(v=n,m=r):(v=r,m=n);var f,S=Math.abs(p-x)<=T?0:1;function w(E,P,C){return"A"+[E,E]+" "+[0,S,C]+" "+_(E,P)}return y?f=v===null?"M"+_(m,x)+w(m,g,0)+w(m,p,0)+"Z":"M"+_(v,x)+w(v,g,0)+w(v,p,0)+"ZM"+_(m,x)+w(m,g,1)+w(m,p,1)+"Z":v===null?(f="M"+_(m,x)+w(m,p,0),c&&(f+="L0,0Z")):f="M"+_(v,x)+"L"+_(m,x)+w(m,p,0)+"L"+_(v,p)+w(v,x,1)+"Z",f}ee.exports={deg2rad:function(n){return n/180*T},rad2deg:function(n){return n/T*180},angleDelta:s,angleDist:function(n,r){return Math.abs(s(n,r))},isFullCircle:h,isAngleInsideSector:t,isPtInsideSector:function(n,r,a,l){return!!t(r,l)&&(a[0]<a[1]?(u=a[0],d=a[1]):(u=a[1],d=a[0]),n>=u&&n<=d);var u,d},pathArc:function(n,r,a,l,u){return i(null,n,r,a,l,u,0)},pathSector:function(n,r,a,l,u){return i(null,n,r,a,l,u,1)},pathAnnulus:function(n,r,a,l,u,d){return i(n,r,a,l,u,d,1)}}},38116:function(ee,z,e){"use strict";var M=e(83160).decode,k=e(63620),o=Array.isArray,T=ArrayBuffer,b=DataView;function h(r){return T.isView(r)&&!(r instanceof b)}function s(r){return o(r)||h(r)}z.isTypedArray=h,z.isArrayOrTypedArray=s,z.isArray1D=function(r){return!s(r[0])},z.ensureArray=function(r,a){return o(r)||(r=[]),r.length=a,r};var t={u1c:typeof Uint8ClampedArray=="undefined"?void 0:Uint8ClampedArray,i1:typeof Int8Array=="undefined"?void 0:Int8Array,u1:typeof Uint8Array=="undefined"?void 0:Uint8Array,i2:typeof Int16Array=="undefined"?void 0:Int16Array,u2:typeof Uint16Array=="undefined"?void 0:Uint16Array,i4:typeof Int32Array=="undefined"?void 0:Int32Array,u4:typeof Uint32Array=="undefined"?void 0:Uint32Array,f4:typeof Float32Array=="undefined"?void 0:Float32Array,f8:typeof Float64Array=="undefined"?void 0:Float64Array};function i(r){return r.constructor===ArrayBuffer}function n(r,a,l){if(s(r)){if(s(r[0])){for(var u=l,d=0;d<r.length;d++)u=a(u,r[d].length);return u}return r.length}return 0}t.uint8c=t.u1c,t.uint8=t.u1,t.int8=t.i1,t.uint16=t.u2,t.int16=t.i2,t.uint32=t.u4,t.int32=t.i4,t.float32=t.f4,t.float64=t.f8,z.isArrayBuffer=i,z.decodeTypedArraySpec=function(r){var a=[],l=function(E){return{bdata:E.bdata,dtype:E.dtype,shape:E.shape}}(r),u=l.dtype,d=t[u];if(!d)throw new Error('Error in dtype: "'+u+'"');var c=d.BYTES_PER_ELEMENT,x=l.bdata;i(x)||(x=M(x));var g=l.shape===void 0?[x.byteLength/c]:(""+l.shape).split(",");g.reverse();var p,v,m=g.length,y=+g[0],_=c*y,f=0;if(m===1)a=new d(x);else if(m===2)for(p=+g[1],v=0;v<p;v++)a[v]=new d(x,f,y),f+=_;else{if(m!==3)throw new Error("ndim: "+m+'is not supported with the shape:"'+l.shape+'"');p=+g[1];for(var S=+g[2],w=0;w<S;w++)for(a[w]=[],v=0;v<p;v++)a[w][v]=new d(x,f,y),f+=_}return a.bdata=l.bdata,a.dtype=l.dtype,a.shape=g.reverse().join(","),r._inputArray=a,a},z.isTypedArraySpec=function(r){return k(r)&&r.hasOwnProperty("dtype")&&typeof r.dtype=="string"&&r.hasOwnProperty("bdata")&&(typeof r.bdata=="string"||i(r.bdata))&&(r.shape===void 0||r.hasOwnProperty("shape")&&(typeof r.shape=="string"||typeof r.shape=="number"))},z.concat=function(){var r,a,l,u,d,c,x,g,p=[],v=!0,m=0;for(l=0;l<arguments.length;l++)(c=(u=arguments[l]).length)&&(a?p.push(u):(a=u,d=c),o(u)?r=!1:(v=!1,m?r!==u.constructor&&(r=!1):r=u.constructor),m+=c);if(!m)return[];if(!p.length)return a;if(v)return a.concat.apply(a,p);if(r){for((x=new r(m)).set(a),l=0;l<p.length;l++)u=p[l],x.set(u,d),d+=u.length;return x}for(x=new Array(m),g=0;g<a.length;g++)x[g]=a[g];for(l=0;l<p.length;l++){for(u=p[l],g=0;g<u.length;g++)x[d+g]=u[g];d+=g}return x},z.maxRowLength=function(r){return n(r,Math.max,0)},z.minRowLength=function(r){return n(r,Math.min,1/0)}},54037:function(ee,z,e){"use strict";var M=e(38248),k=e(39032).BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ee.exports=function(T){return typeof T=="string"&&(T=T.replace(o,"")),M(T)?Number(T):k}},73696:function(ee){"use strict";ee.exports=function(z){var e=z._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(M){M.regl&&M.regl.clear({color:!0,depth:!0})})}},75352:function(ee){"use strict";ee.exports=function(z){z._responsiveChartHandler&&(window.removeEventListener("resize",z._responsiveChartHandler),delete z._responsiveChartHandler)}},63064:function(ee,z,e){"use strict";var M=e(38248),k=e(49760),o=e(45464),T=e(88304),b=e(76308),h=e(13448).DESELECTDIM,s=e(22296),t=e(53756).counter,i=e(20435).modHalf,n=e(38116).isArrayOrTypedArray,r=e(38116).isTypedArraySpec,a=e(38116).decodeTypedArraySpec;function l(u,d){var c=z.valObjectMeta[d.valType];if(d.arrayOk&&n(u))return!0;if(c.validateFunction)return c.validateFunction(u,d);var x={},g=x,p={set:function(v){g=v}};return c.coerceFunction(u,p,x,d),g!==x}z.valObjectMeta={data_array:{coerceFunction:function(u,d,c){d.set(n(u)?u:r(u)?a(u):c)}},enumerated:{coerceFunction:function(u,d,c,x){x.coerceNumber&&(u=+u),x.values.indexOf(u)===-1?d.set(c):d.set(u)},validateFunction:function(u,d){d.coerceNumber&&(u=+u);for(var c=d.values,x=0;x<c.length;x++){var g=String(c[x]);if(g.charAt(0)==="/"&&g.charAt(g.length-1)==="/"){if(new RegExp(g.substr(1,g.length-2)).test(u))return!0}else if(u===c[x])return!0}return!1}},boolean:{coerceFunction:function(u,d,c){u===!0||u===!1?d.set(u):d.set(c)}},number:{coerceFunction:function(u,d,c,x){!M(u)||x.min!==void 0&&u<x.min||x.max!==void 0&&u>x.max?d.set(c):d.set(+u)}},integer:{coerceFunction:function(u,d,c,x){u%1||!M(u)||x.min!==void 0&&u<x.min||x.max!==void 0&&u>x.max?d.set(c):d.set(+u)}},string:{coerceFunction:function(u,d,c,x){if(typeof u!="string"){var g=typeof u=="number";x.strict!==!0&&g?d.set(String(u)):d.set(c)}else x.noBlank&&!u?d.set(c):d.set(u)}},color:{coerceFunction:function(u,d,c){k(u).isValid()?d.set(u):d.set(c)}},colorlist:{coerceFunction:function(u,d,c){Array.isArray(u)&&u.length&&u.every(function(x){return k(x).isValid()})?d.set(u):d.set(c)}},colorscale:{coerceFunction:function(u,d,c){d.set(T.get(u,c))}},angle:{coerceFunction:function(u,d,c){u==="auto"?d.set("auto"):M(u)?d.set(i(+u,360)):d.set(c)}},subplotid:{coerceFunction:function(u,d,c,x){var g=x.regex||t(c);typeof u=="string"&&g.test(u)?d.set(u):d.set(c)},validateFunction:function(u,d){var c=d.dflt;return u===c||typeof u=="string"&&!!t(c).test(u)}},flaglist:{coerceFunction:function(u,d,c,x){if((x.extras||[]).indexOf(u)===-1)if(typeof u=="string"){for(var g=u.split("+"),p=0;p<g.length;){var v=g[p];x.flags.indexOf(v)===-1||g.indexOf(v)<p?g.splice(p,1):p++}g.length?d.set(g.join("+")):d.set(c)}else d.set(c);else d.set(u)}},any:{coerceFunction:function(u,d,c){u===void 0?d.set(c):d.set(r(u)?a(u):u)}},info_array:{coerceFunction:function(u,d,c,x){function g(j,D,N){var W,F={set:function(U){W=U}};return N===void 0&&(N=D.dflt),z.valObjectMeta[D.valType].coerceFunction(j,F,N,D),W}if(r(u)&&(u=a(u)),n(u)){var p,v,m,y,_,f,S=x.dimensions===2||x.dimensions==="1-2"&&Array.isArray(u)&&n(u[0]),w=x.items,E=[],P=Array.isArray(w),C=P&&S&&n(w[0]),O=S&&P&&!C,R=P&&!O?w.length:u.length;if(c=Array.isArray(c)?c:[],S)for(p=0;p<R;p++)for(E[p]=[],m=n(u[p])?u[p]:[],_=O?w.length:P?w[p].length:m.length,v=0;v<_;v++)y=O?w[v]:P?w[p][v]:w,(f=g(m[v],y,(c[p]||[])[v]))!==void 0&&(E[p][v]=f);else for(p=0;p<R;p++)(f=g(u[p],P?w[p]:w,c[p]))!==void 0&&(E[p]=f);d.set(E)}else d.set(c)},validateFunction:function(u,d){if(!n(u))return!1;var c=d.items,x=Array.isArray(c),g=d.dimensions===2;if(!d.freeLength&&u.length!==c.length)return!1;for(var p=0;p<u.length;p++)if(g){if(!n(u[p])||!d.freeLength&&u[p].length!==c[p].length)return!1;for(var v=0;v<u[p].length;v++)if(!l(u[p][v],x?c[p][v]:c))return!1}else if(!l(u[p],x?c[p]:c))return!1;return!0}}},z.coerce=function(u,d,c,x,g){var p=s(c,x).get(),v=s(u,x),m=s(d,x),y=v.get(),_=d._template;if(y===void 0&&_&&(y=s(_,x).get(),_=0),g===void 0&&(g=p.dflt),p.arrayOk){if(n(y))return m.set(y),y;if(r(y))return y=a(y),m.set(y),y}var f=z.valObjectMeta[p.valType].coerceFunction;f(y,m,g,p);var S=m.get();return _&&S===g&&!l(y,p)&&(f(y=s(_,x).get(),m,g,p),S=m.get()),S},z.coerce2=function(u,d,c,x,g){var p=s(u,x),v=z.coerce(u,d,c,x,g);return p.get()!=null&&v},z.coerceFont=function(u,d,c){var x={};return c=c||{},x.family=u(d+".family",c.family),x.size=u(d+".size",c.size),x.color=u(d+".color",c.color),x},z.coercePattern=function(u,d,c,x){if(u(d+".shape")){u(d+".solidity"),u(d+".size");var g=u(d+".fillmode")==="overlay";if(!x){var p=u(d+".bgcolor",g?c:void 0);u(d+".fgcolor",g?b.contrast(p):c)}u(d+".fgopacity",g?.5:1)}},z.coerceHoverinfo=function(u,d,c){var x,g=d._module.attributes,p=g.hoverinfo?g:o,v=p.hoverinfo;if(c._dataLength===1){var m=v.dflt==="all"?v.flags.slice():v.dflt.split("+");m.splice(m.indexOf("name"),1),x=m.join("+")}return z.coerce(u,d,p,"hoverinfo",x)},z.coerceSelectionMarkerOpacity=function(u,d){if(u.marker){var c,x,g=u.marker.opacity;g!==void 0&&(n(g)||u.selected||u.unselected||(c=g,x=h*g),d("selected.marker.opacity",c),d("unselected.marker.opacity",x))}},z.validate=l},67555:function(ee,z,e){"use strict";var M,k,o=e(94336).Yn,T=e(38248),b=e(24248),h=e(20435).mod,s=e(39032),t=s.BADNUM,i=s.ONEDAY,n=s.ONEHOUR,r=s.ONEMIN,a=s.ONESEC,l=s.EPOCHJD,u=e(24040),d=e(94336).E9,c=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,g=new Date().getFullYear()-70;function p(R){return R&&u.componentsRegistry.calendars&&typeof R=="string"&&R!=="gregorian"}function v(R,j){return String(R+Math.pow(10,j)).substr(1)}z.dateTick0=function(R,j){var D=function(W,F){return p(W)?F?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[W]:u.getComponentMethod("calendars","CANONICAL_TICK")[W]:F?"2000-01-02":"2000-01-01"}(R,!!j);if(j<2)return D;var N=z.dateTime2ms(D,R);return N+=i*(j-1),z.ms2DateTime(N,0,R)},z.dfltRange=function(R){return p(R)?u.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},z.isJSDate=function(R){return typeof R=="object"&&R!==null&&typeof R.getTime=="function"},z.dateTime2ms=function(R,j){if(z.isJSDate(R)){var D=R.getTimezoneOffset()*r,N=(R.getUTCMinutes()-R.getMinutes())*r+(R.getUTCSeconds()-R.getSeconds())*a+(R.getUTCMilliseconds()-R.getMilliseconds());if(N){var W=3*r;D=D-W/2+h(N-D+W/2,W)}return(R=Number(R)-D)>=M&&R<=k?R:t}if(typeof R!="string"&&typeof R!="number")return t;R=String(R);var F=p(j),U=R.charAt(0);!F||U!=="G"&&U!=="g"||(R=R.substr(1),j="");var V=F&&j.substr(0,7)==="chinese",te=R.match(V?x:c);if(!te)return t;var J=te[1],K=te[3]||"1",X=Number(te[5]||1),Z=Number(te[7]||0),$=Number(te[9]||0),re=Number(te[11]||0);if(F){if(J.length===2)return t;var oe;J=Number(J);try{var ie=u.getComponentMethod("calendars","getCal")(j);if(V){var ue=K.charAt(K.length-1)==="i";K=parseInt(K,10),oe=ie.newDate(J,ie.toMonthIndex(J,K,ue),X)}else oe=ie.newDate(J,Number(K),X)}catch(be){return t}return oe?(oe.toJD()-l)*i+Z*n+$*r+re*a:t}J=J.length===2?(Number(J)+2e3-g)%100+g:Number(J),K-=1;var me=new Date(Date.UTC(2e3,K,X,Z,$));return me.setUTCFullYear(J),me.getUTCMonth()!==K||me.getUTCDate()!==X?t:me.getTime()+re*a},M=z.MIN_MS=z.dateTime2ms("-9999"),k=z.MAX_MS=z.dateTime2ms("9999-12-31 23:59:59.9999"),z.isDateTime=function(R,j){return z.dateTime2ms(R,j)!==t};var m=90*i,y=3*n,_=5*r;function f(R,j,D,N,W){if((j||D||N||W)&&(R+=" "+v(j,2)+":"+v(D,2),(N||W)&&(R+=":"+v(N,2),W))){for(var F=4;W%10==0;)F-=1,W/=10;R+="."+v(W,F)}return R}z.ms2DateTime=function(R,j,D){if(typeof R!="number"||!(R>=M&&R<=k))return t;j||(j=0);var N,W,F,U,V,te,J=Math.floor(10*h(R+.05,1)),K=Math.round(R-J/10);if(p(D)){var X=Math.floor(K/i)+l,Z=Math.floor(h(R,i));try{N=u.getComponentMethod("calendars","getCal")(D).fromJD(X).formatDate("yyyy-mm-dd")}catch($){N=d("G%Y-%m-%d")(new Date(K))}if(N.charAt(0)==="-")for(;N.length<11;)N="-0"+N.substr(1);else for(;N.length<10;)N="0"+N;W=j<m?Math.floor(Z/n):0,F=j<m?Math.floor(Z%n/r):0,U=j<y?Math.floor(Z%r/a):0,V=j<_?Z%a*10+J:0}else te=new Date(K),N=d("%Y-%m-%d")(te),W=j<m?te.getUTCHours():0,F=j<m?te.getUTCMinutes():0,U=j<y?te.getUTCSeconds():0,V=j<_?10*te.getUTCMilliseconds()+J:0;return f(N,W,F,U,V)},z.ms2DateTimeLocal=function(R){if(!(R>=M+i&&R<=k-i))return t;var j=Math.floor(10*h(R+.05,1)),D=new Date(Math.round(R-j/10));return f(o("%Y-%m-%d")(D),D.getHours(),D.getMinutes(),D.getSeconds(),10*D.getUTCMilliseconds()+j)},z.cleanDate=function(R,j,D){if(R===t)return j;if(z.isJSDate(R)||typeof R=="number"&&isFinite(R)){if(p(D))return b.error("JS Dates and milliseconds are incompatible with world calendars",R),j;if(!(R=z.ms2DateTimeLocal(+R))&&j!==void 0)return j}else if(!z.isDateTime(R,D))return b.error("unrecognized date",R),j;return R};var S=/%\d?f/g,w=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function P(R,j,D,N){R=R.replace(S,function(F){var U=Math.min(+F.charAt(1)||6,6);return(j/1e3%1+2).toFixed(U).substr(2).replace(/0+$/,"")||"0"});var W=new Date(Math.floor(j+.05));if(R=R.replace(w,function(){return E[D("%q")(W)]}),p(N))try{R=u.getComponentMethod("calendars","worldCalFmt")(R,j,N)}catch(F){return"Invalid"}return D(R)(W)}var C=[59,59.9,59.99,59.999,59.9999];z.formatDate=function(R,j,D,N,W,F){if(W=p(W)&&W,!j)if(D==="y")j=F.year;else if(D==="m")j=F.month;else{if(D!=="d")return function(U,V){var te=h(U+.05,i),J=v(Math.floor(te/n),2)+":"+v(h(Math.floor(te/r),60),2);if(V!=="M"){T(V)||(V=0);var K=(100+Math.min(h(U/a,60),C[V])).toFixed(V).substr(1);V>0&&(K=K.replace(/0+$/,"").replace(/[\.]$/,"")),J+=":"+K}return J}(R,D)+`
`+P(F.dayMonthYear,R,N,W);j=F.dayMonth+`
`+F.year}return P(j,R,N,W)};var O=3*i;z.incrementMonth=function(R,j,D){D=p(D)&&D;var N=h(R,i);if(R=Math.round(R-N),D)try{var W=Math.round(R/i)+l,F=u.getComponentMethod("calendars","getCal")(D),U=F.fromJD(W);return j%12?F.add(U,j,"m"):F.add(U,j/12,"y"),(U.toJD()-l)*i+N}catch(te){b.error("invalid ms "+R+" in calendar "+D)}var V=new Date(R+O);return V.setUTCMonth(V.getUTCMonth()+j)+N-O},z.findExactDates=function(R,j){for(var D,N,W=0,F=0,U=0,V=0,te=p(j)&&u.getComponentMethod("calendars","getCal")(j),J=0;J<R.length;J++)if(N=R[J],T(N)){if(!(N%i))if(te)try{(D=te.fromJD(N/i+l)).day()===1?D.month()===1?W++:F++:U++}catch(X){}else(D=new Date(N)).getUTCDate()===1?D.getUTCMonth()===0?W++:F++:U++}else V++;U+=F+=W;var K=R.length-V;return{exactYears:W/K,exactMonths:F/K,exactDays:U/K}}},52200:function(ee,z,e){"use strict";var M=e(33428),k=e(24248),o=e(52248),T=e(36524);function b(n){var r=n&&n.parentNode;r&&r.removeChild(n)}function h(n,r,a){var l="plotly.js-style-"+n,u=document.getElementById(l);u||((u=document.createElement("style")).setAttribute("id",l),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var d=u.sheet;d.insertRule?d.insertRule(r+"{"+a+"}",0):d.addRule?d.addRule(r,a,0):k.warn("addStyleRule failed")}function s(n){var r=window.getComputedStyle(n,null),a=r.getPropertyValue("-webkit-transform")||r.getPropertyValue("-moz-transform")||r.getPropertyValue("-ms-transform")||r.getPropertyValue("-o-transform")||r.getPropertyValue("transform");return a==="none"?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(l){return+l})}function t(n){for(var r=[];i(n);)r.push(n),n=n.parentNode;return r}function i(n){return n&&(n instanceof Element||n instanceof HTMLElement)}ee.exports={getGraphDiv:function(n){var r;if(typeof n=="string"){if((r=document.getElementById(n))===null)throw new Error("No DOM element with id '"+n+"' exists on the page.");return r}if(n==null)throw new Error("DOM element provided is null or undefined");return n},isPlotDiv:function(n){var r=M.select(n);return r.node()instanceof HTMLElement&&r.size()&&r.classed("js-plotly-plot")},removeElement:b,addStyleRule:function(n,r){h("global",n,r)},addRelatedStyleRule:h,deleteRelatedStyleRule:function(n){var r="plotly.js-style-"+n,a=document.getElementById(r);a&&b(a)},getFullTransformMatrix:function(n){var r=t(n),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return r.forEach(function(l){var u=s(l);if(u){var d=o.convertCssMatrix(u);a=T.multiply(a,a,d)}}),a},getElementTransformMatrix:s,getElementAndAncestors:t,equalDomRects:function(n,r){return n&&r&&n.top===r.top&&n.left===r.left&&n.right===r.right&&n.bottom===r.bottom}}},95924:function(ee,z,e){"use strict";var M=e(61252).EventEmitter,k={init:function(o){if(o._ev instanceof M)return o;var T=new M,b=new M;return o._ev=T,o._internalEv=b,o.on=T.on.bind(T),o.once=T.once.bind(T),o.removeListener=T.removeListener.bind(T),o.removeAllListeners=T.removeAllListeners.bind(T),o._internalOn=b.on.bind(b),o._internalOnce=b.once.bind(b),o._removeInternalListener=b.removeListener.bind(b),o._removeAllInternalListeners=b.removeAllListeners.bind(b),o.emit=function(h,s){typeof jQuery!="undefined"&&jQuery(o).trigger(h,s),T.emit(h,s),b.emit(h,s)},o},triggerHandler:function(o,T,b){var h,s;typeof jQuery!="undefined"&&(h=jQuery(o).triggerHandler(T,b));var t=o._ev;if(!t)return h;var i,n=t._events[T];if(!n)return h;function r(a){return a.listener?(t.removeListener(T,a.listener),a.fired?void 0:(a.fired=!0,a.listener.apply(t,[b]))):a.apply(t,[b])}for(n=Array.isArray(n)?n:[n],i=0;i<n.length-1;i++)r(n[i]);return s=r(n[i]),h!==void 0?h:s},purge:function(o){return delete o._ev,delete o.on,delete o.once,delete o.removeListener,delete o.removeAllListeners,delete o.emit,delete o._ev,delete o._internalEv,delete o._internalOn,delete o._internalOnce,delete o._removeInternalListener,delete o._removeAllInternalListeners,o}};ee.exports=k},92880:function(ee,z,e){"use strict";var M=e(63620),k=Array.isArray;function o(T,b,h,s){var t,i,n,r,a,l,u,d=T[0],c=T.length;if(c===2&&k(d)&&k(T[1])&&d.length===0){if(u=function(g,p){var v,m;for(v=0;v<g.length;v++){if((m=g[v])!==null&&typeof m=="object")return!1;m!==void 0&&(p[v]=m)}return!0}(T[1],d),u)return d;d.splice(0,d.length)}for(var x=1;x<c;x++)for(i in t=T[x])n=d[i],r=t[i],s&&k(r)?d[i]=r:b&&r&&(M(r)||(a=k(r)))?(a?(a=!1,l=n&&k(n)?n:[]):l=n&&M(n)?n:{},d[i]=o([l,r],b,h,s)):(r!==void 0||h)&&(d[i]=r);return d}z.extendFlat=function(){return o(arguments,!1,!1,!1)},z.extendDeep=function(){return o(arguments,!0,!1,!1)},z.extendDeepAll=function(){return o(arguments,!0,!0,!1)},z.extendDeepNoArrays=function(){return o(arguments,!0,!1,!0)}},68944:function(ee){"use strict";ee.exports=function(z){for(var e={},M=[],k=0,o=0;o<z.length;o++){var T=z[o];e[T]!==1&&(e[T]=1,M[k++]=T)}return M}},43880:function(ee){"use strict";function z(M){return M.visible===!0}function e(M){var k=M[0].trace;return k.visible===!0&&k._length!==0}ee.exports=function(M){for(var k,o=(k=M,Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?e:z),T=[],b=0;b<M.length;b++){var h=M[b];o(h)&&T.push(h)}return T}},27144:function(ee,z,e){"use strict";var M=e(33428),k=e(36116),o=e(40440),T=e(77844),b=e(42428),h=e(35536),s=e(24248),t=e(63620),i=e(22296),n=e(92065),r=Object.keys(k),a={"ISO-3":h,"USA-states":h,"country names":function(u){for(var d=0;d<r.length;d++){var c=r[d];if(new RegExp(k[c]).test(u.trim().toLowerCase()))return c}return s.log("Unrecognized country name: "+u+"."),!1}};function l(u){var d=u.geojson,c=window.PlotlyGeoAssets||{},x=typeof d=="string"?c[d]:d;return t(x)?x:(s.error("Oops ... something went wrong when fetching "+d),!1)}ee.exports={locationToFeature:function(u,d,c){if(!d||typeof d!="string")return!1;var x,g,p,v=a[u](d);if(v){if(u==="USA-states")for(x=[],p=0;p<c.length;p++)(g=c[p]).properties&&g.properties.gu&&g.properties.gu==="USA"&&x.push(g);else x=c;for(p=0;p<x.length;p++)if((g=x[p]).id===v)return g;s.log(["Location with id",v,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var d,c,x,g,p=u.geometry,v=p.coordinates,m=u.id,y=[];function _(f){for(var S=0;S<f.length-1;S++)if(f[S][0]>0&&f[S+1][0]<0)return S;return null}switch(d=m==="RUS"||m==="FJI"?function(f){var S;if(_(f)===null)S=f;else for(S=new Array(f.length),g=0;g<f.length;g++)S[g]=[f[g][0]<0?f[g][0]+360:f[g][0],f[g][1]];y.push(n.tester(S))}:m==="ATA"?function(f){var S=_(f);if(S===null)return y.push(n.tester(f));var w=new Array(f.length+1),E=0;for(g=0;g<f.length;g++)g>S?w[E++]=[f[g][0]+360,f[g][1]]:g===S?(w[E++]=f[g],w[E++]=[f[g][0],-90]):w[E++]=f[g];var P=n.tester(w);P.pts.pop(),y.push(P)}:function(f){y.push(n.tester(f))},p.type){case"MultiPolygon":for(c=0;c<v.length;c++)for(x=0;x<v[c].length;x++)d(v[c][x]);break;case"Polygon":for(c=0;c<v.length;c++)d(v[c])}return y},getTraceGeojson:l,extractTraceFeature:function(u){var d=u[0].trace,c=l(d);if(!c)return!1;var x,g={},p=[];for(x=0;x<d._length;x++){var v=u[x];(v.loc||v.loc===0)&&(g[v.loc]=v)}function m(f){var S=i(f,d.featureidkey||"id").get(),w=g[S];if(w){var E=f.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var P={type:"Feature",id:S,geometry:E,properties:{}};P.properties.ct=function(C){var O,R=C.geometry;if(R.type==="MultiPolygon")for(var j=R.coordinates,D=0,N=0;N<j.length;N++){var W={type:"Polygon",coordinates:j[N]},F=o.default(W);F>D&&(D=F,O=W)}else O=R;return T.default(O).geometry.coordinates}(P),w.fIn=f,w.fOut=P,p.push(P)}else s.log(["Location",w.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete g[S]}switch(c.type){case"FeatureCollection":var y=c.features;for(x=0;x<y.length;x++)m(y[x]);break;case"Feature":m(c);break;default:return s.warn(["Invalid GeoJSON type",(c.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var _ in g)s.log(["Location *"+_+"*","does not have a matching feature with id-key","*"+d.featureidkey+"*."].join(" "));return p},fetchTraceGeoData:function(u){var d=window.PlotlyGeoAssets||{},c=[];function x(m){return new Promise(function(y,_){M.json(m,function(f,S){if(f){delete d[m];var w=f.status===404?'GeoJSON at URL "'+m+'" does not exist.':"Unexpected error while fetching from "+m;return _(new Error(w))}return d[m]=S,y(S)})})}function g(m){return new Promise(function(y,_){var f=0,S=setInterval(function(){return d[m]&&d[m]!=="pending"?(clearInterval(S),y(d[m])):f>100?(clearInterval(S),_("Unexpected error while fetching from "+m)):void f++},50)})}for(var p=0;p<u.length;p++){var v=u[p][0].trace.geojson;typeof v=="string"&&(d[v]?d[v]==="pending"&&c.push(g(v)):(d[v]="pending",c.push(x(v))))}return c},computeBbox:function(u){return b.default(u)}}},44808:function(ee,z,e){"use strict";var M=e(39032).BADNUM;z.calcTraceToLineCoords=function(k){for(var o=k[0].trace.connectgaps,T=[],b=[],h=0;h<k.length;h++){var s=k[h].lonlat;s[0]!==M?b.push(s):!o&&b.length>0&&(T.push(b),b=[])}return b.length>0&&T.push(b),T},z.makeLine=function(k){return k.length===1?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}},z.makePolygon=function(k){if(k.length===1)return{type:"Polygon",coordinates:k};for(var o=new Array(k.length),T=0;T<k.length;T++)o[T]=[k[T]];return{type:"MultiPolygon",coordinates:o}},z.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(ee,z,e){"use strict";var M,k,o,T=e(20435).mod;function b(s,t,i,n,r,a,l,u){var d=i-s,c=r-s,x=l-r,g=n-t,p=a-t,v=u-a,m=d*v-x*g;if(m===0)return null;var y=(c*v-x*p)/m,_=(c*g-d*p)/m;return _<0||_>1||y<0||y>1?null:{x:s+d*y,y:t+g*y}}function h(s,t,i,n,r){var a=n*s+r*t;if(a<0)return n*n+r*r;if(a>i){var l=n-s,u=r-t;return l*l+u*u}var d=n*t-r*s;return d*d/i}z.segmentsIntersect=b,z.segmentDistance=function(s,t,i,n,r,a,l,u){if(b(s,t,i,n,r,a,l,u))return 0;var d=i-s,c=n-t,x=l-r,g=u-a,p=d*d+c*c,v=x*x+g*g,m=Math.min(h(d,c,p,r-s,a-t),h(d,c,p,l-s,u-t),h(x,g,v,s-r,t-a),h(x,g,v,i-r,n-a));return Math.sqrt(m)},z.getTextLocation=function(s,t,i,n){if(s===k&&n===o||(M={},k=s,o=n),M[i])return M[i];var r=s.getPointAtLength(T(i-n/2,t)),a=s.getPointAtLength(T(i+n/2,t)),l=Math.atan((a.y-r.y)/(a.x-r.x)),u=s.getPointAtLength(T(i,t)),d={x:(4*u.x+r.x+a.x)/6,y:(4*u.y+r.y+a.y)/6,theta:l};return M[i]=d,d},z.clearLocationCache=function(){k=null},z.getVisibleSegment=function(s,t,i){var n,r,a=t.left,l=t.right,u=t.top,d=t.bottom,c=0,x=s.getTotalLength(),g=x;function p(m){var y=s.getPointAtLength(m);m===0?n=y:m===x&&(r=y);var _=y.x<a?a-y.x:y.x>l?y.x-l:0,f=y.y<u?u-y.y:y.y>d?y.y-d:0;return Math.sqrt(_*_+f*f)}for(var v=p(c);v;){if((c+=v+i)>g)return;v=p(c)}for(v=p(g);v;){if(c>(g-=v+i))return;v=p(g)}return{min:c,max:g,len:g-c,total:x,isClosed:c===0&&g===x&&Math.abs(n.x-r.x)<.1&&Math.abs(n.y-r.y)<.1}},z.findPointOnPath=function(s,t,i,n){for(var r,a,l,u=(n=n||{}).pathLength||s.getTotalLength(),d=n.tolerance||.001,c=n.iterationLimit||30,x=s.getPointAtLength(0)[i]>s.getPointAtLength(u)[i]?-1:1,g=0,p=0,v=u;g<c;){if(r=(p+v)/2,l=(a=s.getPointAtLength(r))[i]-t,Math.abs(l)<d)return a;x*l>0?v=r:p=r,g++}return a}},33040:function(ee,z,e){"use strict";var M=e(38248),k=e(49760),o=e(72160),T=e(8932),b=e(22548).defaultLine,h=e(38116).isArrayOrTypedArray,s=o(b);function t(r,a){var l=r;return l[3]*=a,l}function i(r){if(M(r))return s;var a=o(r);return a.length?a:s}function n(r){return M(r)?r:1}ee.exports={formatColor:function(r,a,l){var u=r.color;u&&u._inputArray&&(u=u._inputArray);var d,c,x,g,p,v=h(u),m=h(a),y=T.extractOpts(r),_=[];if(d=y.colorscale!==void 0?T.makeColorScaleFuncFromTrace(r):i,c=v?function(S,w){return S[w]===void 0?s:o(d(S[w]))}:i,x=m?function(S,w){return S[w]===void 0?1:n(S[w])}:n,v||m)for(var f=0;f<l;f++)g=c(u,f),p=x(a,f),_[f]=t(g,p);else _=t(o(u),a);return _},parseColorScale:function(r){var a=T.extractOpts(r),l=a.colorscale;return a.reversescale&&(l=T.flipScale(a.colorscale)),l.map(function(u){var d=u[0],c=k(u[1]).toRgb();return{index:d,rgb:[c.r,c.g,c.b,c.a]}})}}},71688:function(ee,z,e){"use strict";var M=e(35536);function k(o){return[o]}ee.exports={keyFun:function(o){return o.key},repeat:k,descend:M,wrap:k,unwrap:function(o){return o[0]}}},35536:function(ee){"use strict";ee.exports=function(z){return z}},1396:function(ee){"use strict";ee.exports=function(z,e){if(!e)return z;var M=1/Math.abs(e),k=M>1?(M*z+M*e)/M:z+e,o=String(k).length;if(o>16){var T=String(e).length;if(o>=String(z).length+T){var b=parseFloat(k).toPrecision(12);b.indexOf("e+")===-1&&(k=+b)}}return k}},3400:function(ee,z,e){"use strict";var M=e(33428),k=e(94336).E9,o=e(57624).E9,T=e(38248),b=e(39032),h=b.FP_SAFE,s=-h,t=b.BADNUM,i=ee.exports={};i.adjustFormat=function(Z){return!Z||/^\d[.]\df/.test(Z)||/[.]\d%/.test(Z)?Z:Z==="0.f"?"~f":/^\d%/.test(Z)?"~%":/^\ds/.test(Z)?"~s":!/^[~,.0$]/.test(Z)&&/[&fps]/.test(Z)?"~"+Z:Z};var n={};i.warnBadFormat=function(Z){var $=String(Z);n[$]||(n[$]=1,i.warn('encountered bad format: "'+$+'"'))},i.noFormat=function(Z){return String(Z)},i.numberFormat=function(Z){var $;try{$=o(i.adjustFormat(Z))}catch(re){return i.warnBadFormat(Z),i.noFormat}return $},i.nestedProperty=e(22296),i.keyedContainer=e(37804),i.relativeAttr=e(23193),i.isPlainObject=e(63620),i.toLogRange=e(36896),i.relinkPrivateKeys=e(51528);var r=e(38116);i.isArrayBuffer=r.isArrayBuffer,i.isTypedArray=r.isTypedArray,i.isArrayOrTypedArray=r.isArrayOrTypedArray,i.isArray1D=r.isArray1D,i.ensureArray=r.ensureArray,i.concat=r.concat,i.maxRowLength=r.maxRowLength,i.minRowLength=r.minRowLength;var a=e(20435);i.mod=a.mod,i.modHalf=a.modHalf;var l=e(63064);i.valObjectMeta=l.valObjectMeta,i.coerce=l.coerce,i.coerce2=l.coerce2,i.coerceFont=l.coerceFont,i.coercePattern=l.coercePattern,i.coerceHoverinfo=l.coerceHoverinfo,i.coerceSelectionMarkerOpacity=l.coerceSelectionMarkerOpacity,i.validate=l.validate;var u=e(67555);i.dateTime2ms=u.dateTime2ms,i.isDateTime=u.isDateTime,i.ms2DateTime=u.ms2DateTime,i.ms2DateTimeLocal=u.ms2DateTimeLocal,i.cleanDate=u.cleanDate,i.isJSDate=u.isJSDate,i.formatDate=u.formatDate,i.incrementMonth=u.incrementMonth,i.dateTick0=u.dateTick0,i.dfltRange=u.dfltRange,i.findExactDates=u.findExactDates,i.MIN_MS=u.MIN_MS,i.MAX_MS=u.MAX_MS;var d=e(14952);i.findBin=d.findBin,i.sorterAsc=d.sorterAsc,i.sorterDes=d.sorterDes,i.distinctVals=d.distinctVals,i.roundUp=d.roundUp,i.sort=d.sort,i.findIndexOfMin=d.findIndexOfMin,i.sortObjectKeys=e(95376);var c=e(63084);i.aggNums=c.aggNums,i.len=c.len,i.mean=c.mean,i.median=c.median,i.midRange=c.midRange,i.variance=c.variance,i.stdev=c.stdev,i.interp=c.interp;var x=e(52248);i.init2dArray=x.init2dArray,i.transposeRagged=x.transposeRagged,i.dot=x.dot,i.translationMatrix=x.translationMatrix,i.rotationMatrix=x.rotationMatrix,i.rotationXYMatrix=x.rotationXYMatrix,i.apply3DTransform=x.apply3DTransform,i.apply2DTransform=x.apply2DTransform,i.apply2DTransform2=x.apply2DTransform2,i.convertCssMatrix=x.convertCssMatrix,i.inverseTransformMatrix=x.inverseTransformMatrix;var g=e(11864);i.deg2rad=g.deg2rad,i.rad2deg=g.rad2deg,i.angleDelta=g.angleDelta,i.angleDist=g.angleDist,i.isFullCircle=g.isFullCircle,i.isAngleInsideSector=g.isAngleInsideSector,i.isPtInsideSector=g.isPtInsideSector,i.pathArc=g.pathArc,i.pathSector=g.pathSector,i.pathAnnulus=g.pathAnnulus;var p=e(98308);i.isLeftAnchor=p.isLeftAnchor,i.isCenterAnchor=p.isCenterAnchor,i.isRightAnchor=p.isRightAnchor,i.isTopAnchor=p.isTopAnchor,i.isMiddleAnchor=p.isMiddleAnchor,i.isBottomAnchor=p.isBottomAnchor;var v=e(92348);i.segmentsIntersect=v.segmentsIntersect,i.segmentDistance=v.segmentDistance,i.getTextLocation=v.getTextLocation,i.clearLocationCache=v.clearLocationCache,i.getVisibleSegment=v.getVisibleSegment,i.findPointOnPath=v.findPointOnPath;var m=e(92880);i.extendFlat=m.extendFlat,i.extendDeep=m.extendDeep,i.extendDeepAll=m.extendDeepAll,i.extendDeepNoArrays=m.extendDeepNoArrays;var y=e(24248);i.log=y.log,i.warn=y.warn,i.error=y.error;var _=e(53756);i.counterRegex=_.counter;var f=e(91200);i.throttle=f.throttle,i.throttleDone=f.done,i.clearThrottle=f.clear;var S=e(52200);function w(Z){var $={};for(var re in Z)for(var oe=Z[re],ie=0;ie<oe.length;ie++)$[oe[ie]]=+re;return $}i.getGraphDiv=S.getGraphDiv,i.isPlotDiv=S.isPlotDiv,i.removeElement=S.removeElement,i.addStyleRule=S.addStyleRule,i.addRelatedStyleRule=S.addRelatedStyleRule,i.deleteRelatedStyleRule=S.deleteRelatedStyleRule,i.getFullTransformMatrix=S.getFullTransformMatrix,i.getElementTransformMatrix=S.getElementTransformMatrix,i.getElementAndAncestors=S.getElementAndAncestors,i.equalDomRects=S.equalDomRects,i.clearResponsive=e(75352),i.preserveDrawingBuffer=e(34296),i.makeTraceGroups=e(30988),i._=e(98356),i.notifier=e(41792),i.filterUnique=e(68944),i.filterVisible=e(43880),i.pushUnique=e(52416),i.increment=e(1396),i.cleanNumber=e(54037),i.ensureNumber=function(Z){return T(Z)?(Z=Number(Z))>h||Z<s?t:Z:t},i.isIndex=function(Z,$){return!($!==void 0&&Z>=$)&&T(Z)&&Z>=0&&Z%1==0},i.noop=e(16628),i.identity=e(35536),i.repeat=function(Z,$){for(var re=new Array($),oe=0;oe<$;oe++)re[oe]=Z;return re},i.swapAttrs=function(Z,$,re,oe){re||(re="x"),oe||(oe="y");for(var ie=0;ie<$.length;ie++){var ue=$[ie],me=i.nestedProperty(Z,ue.replace("?",re)),be=i.nestedProperty(Z,ue.replace("?",oe)),ge=me.get();me.set(be.get()),be.set(ge)}},i.raiseToTop=function(Z){Z.parentNode.appendChild(Z)},i.cancelTransition=function(Z){return Z.transition().duration(0)},i.constrain=function(Z,$,re){return $>re?Math.max(re,Math.min($,Z)):Math.max($,Math.min(re,Z))},i.bBoxIntersect=function(Z,$,re){return re=re||0,Z.left<=$.right+re&&$.left<=Z.right+re&&Z.top<=$.bottom+re&&$.top<=Z.bottom+re},i.simpleMap=function(Z,$,re,oe,ie){for(var ue=Z.length,me=new Array(ue),be=0;be<ue;be++)me[be]=$(Z[be],re,oe,ie);return me},i.randstr=function Z($,re,oe,ie){if(oe||(oe=16),re===void 0&&(re=24),re<=0)return"0";var ue,me,be=Math.log(Math.pow(2,re))/Math.log(oe),ge="";for(ue=2;be===1/0;ue*=2)be=Math.log(Math.pow(2,re/ue))/Math.log(oe)*ue;var de=be-Math.floor(be);for(ue=0;ue<Math.floor(be);ue++)ge=Math.floor(Math.random()*oe).toString(oe)+ge;de&&(me=Math.pow(oe,de),ge=Math.floor(Math.random()*me).toString(oe)+ge);var ve=parseInt(ge,oe);return $&&$[ge]||ve!==1/0&&ve>=Math.pow(2,re)?ie>10?(i.warn("randstr failed uniqueness"),ge):Z($,re,oe,(ie||0)+1):ge},i.OptionControl=function(Z,$){Z||(Z={}),$||($="opt");var re={optionList:[],_newoption:function(oe){oe[$]=Z,re[oe.name]=oe,re.optionList.push(oe)}};return re["_"+$]=Z,re},i.smooth=function(Z,$){if(($=Math.round($)||0)<2)return Z;var re,oe,ie,ue,me=Z.length,be=2*me,ge=2*$-1,de=new Array(ge),ve=new Array(me);for(re=0;re<ge;re++)de[re]=(1-Math.cos(Math.PI*(re+1)/$))/(2*$);for(re=0;re<me;re++){for(ue=0,oe=0;oe<ge;oe++)(ie=re+oe+1-$)<-me?ie-=be*Math.round(ie/be):ie>=be&&(ie-=be*Math.floor(ie/be)),ie<0?ie=-1-ie:ie>=me&&(ie=be-1-ie),ue+=Z[ie]*de[oe];ve[re]=ue}return ve},i.syncOrAsync=function(Z,$,re){var oe;function ie(){return i.syncOrAsync(Z,$,re)}for(;Z.length;)if((oe=(0,Z.splice(0,1)[0])($))&&oe.then)return oe.then(ie);return re&&re($)},i.stripTrailingSlash=function(Z){return Z.substr(-1)==="/"?Z.substr(0,Z.length-1):Z},i.noneOrAll=function(Z,$,re){if(Z){var oe,ie=!1,ue=!0;for(oe=0;oe<re.length;oe++)Z[re[oe]]!=null?ie=!0:ue=!1;if(ie&&!ue)for(oe=0;oe<re.length;oe++)Z[re[oe]]=$[re[oe]]}},i.mergeArray=function(Z,$,re,oe){var ie=typeof oe=="function";if(i.isArrayOrTypedArray(Z))for(var ue=Math.min(Z.length,$.length),me=0;me<ue;me++){var be=Z[me];$[me][re]=ie?oe(be):be}},i.mergeArrayCastPositive=function(Z,$,re){return i.mergeArray(Z,$,re,function(oe){var ie=+oe;return isFinite(ie)&&ie>0?ie:0})},i.fillArray=function(Z,$,re,oe){if(oe=oe||i.identity,i.isArrayOrTypedArray(Z))for(var ie=0;ie<$.length;ie++)$[ie][re]=oe(Z[ie])},i.castOption=function(Z,$,re,oe){oe=oe||i.identity;var ie=i.nestedProperty(Z,re).get();return i.isArrayOrTypedArray(ie)?Array.isArray($)&&i.isArrayOrTypedArray(ie[$[0]])?oe(ie[$[0]][$[1]]):oe(ie[$]):ie},i.extractOption=function(Z,$,re,oe){if(re in Z)return Z[re];var ie=i.nestedProperty($,oe).get();return Array.isArray(ie)?void 0:ie},i.tagSelected=function(Z,$,re){var oe,ie,ue=$.selectedpoints,me=$._indexToPoints;me&&(oe=w(me));for(var be=0;be<ue.length;be++){var ge=ue[be];if(i.isIndex(ge)||i.isArrayOrTypedArray(ge)&&i.isIndex(ge[0])&&i.isIndex(ge[1])){var de=oe?oe[ge]:ge,ve=re?re[de]:de;(ie=ve)!==void 0&&ie<Z.length&&(Z[ve].selected=1)}}},i.selIndices2selPoints=function(Z){var $=Z.selectedpoints,re=Z._indexToPoints;if(re){for(var oe=w(re),ie=[],ue=0;ue<$.length;ue++){var me=$[ue];if(i.isIndex(me)){var be=oe[me];i.isIndex(be)&&ie.push(be)}}return ie}return $},i.getTargetArray=function(Z,$){var re=$.target;if(typeof re=="string"&&re){var oe=i.nestedProperty(Z,re).get();return!!i.isArrayOrTypedArray(oe)&&oe}return!!i.isArrayOrTypedArray(re)&&re},i.minExtend=function Z($,re,oe){var ie={};typeof re!="object"&&(re={});var ue,me,be,ge=oe==="pieLike"?-1:3,de=Object.keys($);for(ue=0;ue<de.length;ue++)be=$[me=de[ue]],me.charAt(0)!=="_"&&typeof be!="function"&&(me==="module"?ie[me]=be:Array.isArray(be)?ie[me]=me==="colorscale"||ge===-1?be.slice():be.slice(0,ge):i.isTypedArray(be)?ie[me]=ge===-1?be.subarray():be.subarray(0,ge):ie[me]=be&&typeof be=="object"?Z($[me],re[me],oe):be);for(de=Object.keys(re),ue=0;ue<de.length;ue++)typeof(be=re[me=de[ue]])=="object"&&me in ie&&typeof ie[me]=="object"||(ie[me]=be);return ie},i.titleCase=function(Z){return Z.charAt(0).toUpperCase()+Z.substr(1)},i.containsAny=function(Z,$){for(var re=0;re<$.length;re++)if(Z.indexOf($[re])!==-1)return!0;return!1},i.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return E.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;i.isIOS=function(){return P.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var Z=C.exec(window.navigator.userAgent);if(Z&&Z.length===2){var $=parseInt(Z[1]);if(!isNaN($))return $}return null},i.isD3Selection=function(Z){return Z instanceof M.selection},i.ensureSingle=function(Z,$,re,oe){var ie=Z.select($+(re?"."+re:""));if(ie.size())return ie;var ue=Z.append($);return re&&ue.classed(re,!0),oe&&ue.call(oe),ue},i.ensureSingleById=function(Z,$,re,oe){var ie=Z.select($+"#"+re);if(ie.size())return ie;var ue=Z.append($).attr("id",re);return oe&&ue.call(oe),ue},i.objectFromPath=function(Z,$){for(var re,oe=Z.split("."),ie=re={},ue=0;ue<oe.length;ue++){var me=oe[ue],be=null,ge=oe[ue].match(/(.*)\[([0-9]+)\]/);ge?(me=ge[1],be=ge[2],re=re[me]=[],ue===oe.length-1?re[be]=$:re[be]={},re=re[be]):(ue===oe.length-1?re[me]=$:re[me]={},re=re[me])}return ie};var O=/^([^\[\.]+)\.(.+)?/,R=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function j(Z){return Z.slice(0,2)==="__"}i.expandObjectPaths=function(Z){var $,re,oe,ie,ue,me,be;if(typeof Z=="object"&&!Array.isArray(Z)){for(re in Z)if(Z.hasOwnProperty(re))if($=re.match(O)){if(ie=Z[re],j(oe=$[1]))continue;delete Z[re],Z[oe]=i.extendDeepNoArrays(Z[oe]||{},i.objectFromPath(re,i.expandObjectPaths(ie))[oe])}else if($=re.match(R)){if(ie=Z[re],j(oe=$[1]))continue;if(ue=parseInt($[2]),delete Z[re],Z[oe]=Z[oe]||[],$[3]===".")be=$[4],me=Z[oe][ue]=Z[oe][ue]||{},i.extendDeepNoArrays(me,i.objectFromPath(be,i.expandObjectPaths(ie)));else{if(j(oe))continue;Z[oe][ue]=i.expandObjectPaths(ie)}}else{if(j(re))continue;Z[re]=i.expandObjectPaths(Z[re])}}return Z},i.numSeparate=function(Z,$,re){if(re||(re=!1),typeof $!="string"||$.length===0)throw new Error("Separator string required for formatting!");typeof Z=="number"&&(Z=String(Z));var oe=/(\d+)(\d{3})/,ie=$.charAt(0),ue=$.charAt(1),me=Z.split("."),be=me[0],ge=me.length>1?ie+me[1]:"";if(ue&&(me.length>1||be.length>4||re))for(;oe.test(be);)be=be.replace(oe,"$1"+ue+"$2");return be+ge},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;i.templateString=function(Z,$){var re={};return Z.replace(i.TEMPLATE_STRING_REGEX,function(oe,ie){var ue;return D.test(ie)?ue=$[ie]:(re[ie]=re[ie]||i.nestedProperty($,ie).get,ue=re[ie]()),i.isValidTextValue(ue)?ue:""})};var N={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return te.apply(N,arguments)};var W={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return te.apply(W,arguments)};var F=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,U={max:10,count:0,name:"texttemplate",parseMultDiv:!0};i.texttemplateStringForShapes=function(){return te.apply(U,arguments)};var V=/^[:|\|]/;function te(Z,$,re){var oe=this,ie=arguments;$||($={});var ue={};return Z.replace(i.TEMPLATE_STRING_REGEX,function(me,be,ge){var de=be==="_xother"||be==="_yother",ve=be==="_xother_"||be==="_yother_",pe=be==="xother_"||be==="yother_",_e=be==="xother"||be==="yother"||de||pe||ve,Te=be;(de||ve)&&(Te=Te.substring(1)),(pe||ve)&&(Te=Te.substring(0,Te.length-1));var le,ae,he,Se=null,ke=null;if(oe.parseMultDiv){var Me=function(xe){var we=xe.match(F);return we?{key:we[1],op:we[2],number:Number(we[3])}:{key:xe,op:null,number:null}}(Te);Te=Me.key,Se=Me.op,ke=Me.number}if(_e){if((le=$[Te])===void 0)return""}else for(he=3;he<ie.length;he++)if(ae=ie[he]){if(ae.hasOwnProperty(Te)){le=ae[Te];break}if(D.test(Te)||(le=i.nestedProperty(ae,Te).get(),(le=ue[Te]||i.nestedProperty(ae,Te).get())&&(ue[Te]=le)),le!==void 0)break}if(le!==void 0&&(Se==="*"&&(le*=ke),Se==="/"&&(le/=ke)),le===void 0&&oe)return oe.count<oe.max&&(i.warn("Variable '"+Te+"' in "+oe.name+" could not be found!"),le=me),oe.count===oe.max&&i.warn("Too many "+oe.name+" warnings - additional warnings will be suppressed"),oe.count++,me;if(ge){var Ee;if(ge[0]===":"&&(Ee=re?re.numberFormat:i.numberFormat,le!==""&&(le=Ee(ge.replace(V,""))(le))),ge[0]==="|"){Ee=re?re.timeFormat:k;var De=i.dateTime2ms(le);le=i.formatDate(De,ge.replace(V,""),!1,Ee)}}else{var fe=Te+"Label";$.hasOwnProperty(fe)&&(le=$[fe])}return _e&&(le="("+le+")",(de||ve)&&(le=" "+le),(pe||ve)&&(le+=" ")),le})}i.subplotSort=function(Z,$){for(var re=Math.min(Z.length,$.length)+1,oe=0,ie=0,ue=0;ue<re;ue++){var me=Z.charCodeAt(ue)||0,be=$.charCodeAt(ue)||0,ge=me>=48&&me<=57,de=be>=48&&be<=57;if(ge&&(oe=10*oe+me-48),de&&(ie=10*ie+be-48),!ge||!de){if(oe!==ie)return oe-ie;if(me!==be)return me-be}}return ie-oe};var J=2e9;i.seedPseudoRandom=function(){J=2e9},i.pseudoRandom=function(){var Z=J;return J=(69069*J+1)%4294967296,Math.abs(J-Z)<429496729?i.pseudoRandom():J/4294967296},i.fillText=function(Z,$,re){var oe=Array.isArray(re)?function(me){re.push(me)}:function(me){re.text=me},ie=i.extractOption(Z,$,"htx","hovertext");if(i.isValidTextValue(ie))return oe(ie);var ue=i.extractOption(Z,$,"tx","text");return i.isValidTextValue(ue)?oe(ue):void 0},i.isValidTextValue=function(Z){return Z||Z===0},i.formatPercent=function(Z,$){$=$||0;for(var re=(Math.round(100*Z*Math.pow(10,$))*Math.pow(.1,$)).toFixed($)+"%",oe=0;oe<$;oe++)re.indexOf(".")!==-1&&(re=(re=re.replace("0%","%")).replace(".%","%"));return re},i.isHidden=function(Z){var $=window.getComputedStyle(Z).display;return!$||$==="none"},i.strTranslate=function(Z,$){return Z||$?"translate("+Z+","+$+")":""},i.strRotate=function(Z){return Z?"rotate("+Z+")":""},i.strScale=function(Z){return Z!==1?"scale("+Z+")":""},i.getTextTransform=function(Z){var $=Z.noCenter,re=Z.textX,oe=Z.textY,ie=Z.targetX,ue=Z.targetY,me=Z.anchorX||0,be=Z.anchorY||0,ge=Z.rotate,de=Z.scale;return de?de>1&&(de=1):de=0,i.strTranslate(ie-de*(re+me),ue-de*(oe+be))+i.strScale(de)+(ge?"rotate("+ge+($?"":" "+re+" "+oe)+")":"")},i.setTransormAndDisplay=function(Z,$){Z.attr("transform",i.getTextTransform($)),Z.style("display",$.scale?null:"none")},i.ensureUniformFontSize=function(Z,$){var re=i.extendFlat({},$);return re.size=Math.max($.size,Z._fullLayout.uniformtext.minsize||0),re},i.join2=function(Z,$,re){var oe=Z.length;return oe>1?Z.slice(0,-1).join($)+re+Z[oe-1]:Z.join($)},i.bigFont=function(Z){return Math.round(1.2*Z)};var K=i.getFirefoxVersion(),X=K!==null&&K<86;i.getPositionFromD3Event=function(){return X?[M.event.layerX,M.event.layerY]:[M.event.offsetX,M.event.offsetY]}},63620:function(ee){"use strict";ee.exports=function(z){return window&&window.process&&window.process.versions?Object.prototype.toString.call(z)==="[object Object]":Object.prototype.toString.call(z)==="[object Object]"&&Object.getPrototypeOf(z).hasOwnProperty("hasOwnProperty")}},37804:function(ee,z,e){"use strict";var M=e(22296),k=/^\w*$/;ee.exports=function(o,T,b,h){var s,t,i;b=b||"name",h=h||"value";var n={};T&&T.length?(i=M(o,T),t=i.get()):t=o,T=T||"";var r={};if(t)for(s=0;s<t.length;s++)r[t[s][b]]=s;var a=k.test(h),l={set:function(u,d){var c=d===null?4:0;if(!t){if(!i||c===4)return;t=[],i.set(t)}var x=r[u];if(x===void 0){if(c===4)return;c|=3,x=t.length,r[u]=x}else d!==(a?t[x][h]:M(t[x],h).get())&&(c|=2);var g=t[x]=t[x]||{};return g[b]=u,a?g[h]=d:M(g,h).set(d),d!==null&&(c&=-5),n[x]=n[x]|c,l},get:function(u){if(t){var d=r[u];return d===void 0?void 0:a?t[d][h]:M(t[d],h).get()}},rename:function(u,d){var c=r[u];return c===void 0||(n[c]=1|n[c],r[d]=c,delete r[u],t[c][b]=d),l},remove:function(u){var d=r[u];if(d===void 0)return l;var c=t[d];if(Object.keys(c).length>2)return n[d]=2|n[d],l.set(u,null);if(a){for(s=d;s<t.length;s++)n[s]=3|n[s];for(s=d;s<t.length;s++)r[t[s][b]]--;t.splice(d,1),delete r[u]}else M(c,h).set(null),n[d]=6|n[d];return l},constructUpdate:function(){for(var u,d,c={},x=Object.keys(n),g=0;g<x.length;g++)d=x[g],u=T+"["+d+"]",t[d]?(1&n[d]&&(c[u+"."+b]=t[d][b]),2&n[d]&&(c[u+"."+h]=a?4&n[d]?null:t[d][h]:4&n[d]?null:M(t[d],h).get())):c[u]=null;return c}};return l}},98356:function(ee,z,e){"use strict";var M=e(24040);ee.exports=function(k,o){for(var T=k._context.locale,b=0;b<2;b++){for(var h=k._context.locales,s=0;s<2;s++){var t=(h[T]||{}).dictionary;if(t){var i=t[o];if(i)return i}h=M.localeRegistry}var n=T.split("-")[0];if(n===T)break;T=n}return o}},24248:function(ee,z,e){"use strict";var M=e(20556).dfltConfig,k=e(41792),o=ee.exports={};o.log=function(){var T;if(M.logging>1){var b=["LOG:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(M.notifyOnLogging>1){var h=[];for(T=0;T<arguments.length;T++)h.push(arguments[T]);k(h.join("<br>"),"long")}},o.warn=function(){var T;if(M.logging>0){var b=["WARN:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.trace.apply(console,b)}if(M.notifyOnLogging>0){var h=[];for(T=0;T<arguments.length;T++)h.push(arguments[T]);k(h.join("<br>"),"stick")}},o.error=function(){var T;if(M.logging>0){var b=["ERROR:"];for(T=0;T<arguments.length;T++)b.push(arguments[T]);console.error.apply(console,b)}if(M.notifyOnLogging>0){var h=[];for(T=0;T<arguments.length;T++)h.push(arguments[T]);k(h.join("<br>"),"stick")}}},30988:function(ee,z,e){"use strict";var M=e(33428);ee.exports=function(k,o,T){var b=k.selectAll("g."+T.replace(/\s/g,".")).data(o,function(s){return s[0].trace.uid});b.exit().remove(),b.enter().append("g").attr("class",T),b.order();var h=k.classed("rangeplot")?"nodeRangePlot3":"node3";return b.each(function(s){s[0][h]=M.select(this)}),b}},52248:function(ee,z,e){"use strict";var M=e(36524);z.init2dArray=function(k,o){for(var T=new Array(k),b=0;b<k;b++)T[b]=new Array(o);return T},z.transposeRagged=function(k){var o,T,b=0,h=k.length;for(o=0;o<h;o++)b=Math.max(b,k[o].length);var s=new Array(b);for(o=0;o<b;o++)for(s[o]=new Array(h),T=0;T<h;T++)s[o][T]=k[T][o];return s},z.dot=function(k,o){if(!k.length||!o.length||k.length!==o.length)return null;var T,b,h=k.length;if(k[0].length)for(T=new Array(h),b=0;b<h;b++)T[b]=z.dot(k[b],o);else if(o[0].length){var s=z.transposeRagged(o);for(T=new Array(s.length),b=0;b<s.length;b++)T[b]=z.dot(k,s[b])}else for(T=0,b=0;b<h;b++)T+=k[b]*o[b];return T},z.translationMatrix=function(k,o){return[[1,0,k],[0,1,o],[0,0,1]]},z.rotationMatrix=function(k){var o=k*Math.PI/180;return[[Math.cos(o),-Math.sin(o),0],[Math.sin(o),Math.cos(o),0],[0,0,1]]},z.rotationXYMatrix=function(k,o,T){return z.dot(z.dot(z.translationMatrix(o,T),z.rotationMatrix(k)),z.translationMatrix(-o,-T))},z.apply3DTransform=function(k){return function(){var o=arguments,T=arguments.length===1?o[0]:[o[0],o[1],o[2]||0];return z.dot(k,[T[0],T[1],T[2],1]).slice(0,3)}},z.apply2DTransform=function(k){return function(){var o=arguments;o.length===3&&(o=o[0]);var T=arguments.length===1?o[0]:[o[0],o[1]];return z.dot(k,[T[0],T[1],1]).slice(0,2)}},z.apply2DTransform2=function(k){var o=z.apply2DTransform(k);return function(T){return o(T.slice(0,2)).concat(o(T.slice(2,4)))}},z.convertCssMatrix=function(k){if(k){var o=k.length;if(o===16)return k;if(o===6)return[k[0],k[1],0,0,k[2],k[3],0,0,0,0,1,0,k[4],k[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},z.inverseTransformMatrix=function(k){var o=[];return M.invert(o,k),[[o[0],o[1],o[2],o[3]],[o[4],o[5],o[6],o[7]],[o[8],o[9],o[10],o[11]],[o[12],o[13],o[14],o[15]]]}},20435:function(ee){"use strict";ee.exports={mod:function(z,e){var M=z%e;return M<0?M+e:M},modHalf:function(z,e){return Math.abs(z)>e/2?z-Math.round(z/e)*e:z}}},22296:function(ee,z,e){"use strict";var M=e(38248),k=e(38116).isArrayOrTypedArray;function o(n,r){return function(){var a,l,u,d,c,x=n;for(d=0;d<r.length-1;d++){if((a=r[d])===-1){for(l=!0,u=[],c=0;c<x.length;c++)u[c]=o(x[c],r.slice(d+1))(),u[c]!==u[0]&&(l=!1);return l?u[0]:u}if(typeof a=="number"&&!k(x)||typeof(x=x[a])!="object"||x===null)return}if(typeof x=="object"&&x!==null&&(u=x[r[d]])!==null)return u}}ee.exports=function(n,r){if(M(r))r=String(r);else if(typeof r!="string"||r.substr(r.length-4)==="[-1]")throw"bad property string";var a,l,u,d,c=r.split(".");for(d=0;d<c.length;d++)if(String(c[d]).slice(0,2)==="__")throw"bad property string";for(d=0;d<c.length;){if(a=String(c[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(a[1])c[d]=a[1];else{if(d!==0)throw"bad property string";c.splice(0,1)}for(l=a[2].substr(1,a[2].length-2).split("]["),u=0;u<l.length;u++)d++,c.splice(d,0,Number(l[u]))}d++}return typeof n!="object"?function(x,g,p){return{set:function(){throw"bad container"},get:function(){},astr:g,parts:p,obj:x}}(n,r,c):{set:h(n,c,r),get:o(n,c),astr:r,parts:c,obj:n}};var T=/(^|\.)args\[/;function b(n,r){return n===void 0||n===null&&!r.match(T)}function h(n,r,a){return function(l){var u,d,c=n,x="",g=[[n,x]],p=b(l,a);for(d=0;d<r.length-1;d++){if(typeof(u=r[d])=="number"&&!k(c))throw"array index but container is not an array";if(u===-1){if(p=!t(c,r.slice(d+1),l,a))break;return}if(!i(c,u,r[d+1],p))break;if(typeof(c=c[u])!="object"||c===null)throw"container is not an object";x=s(x,u),g.push([c,x])}if(p){if(d===r.length-1&&(delete c[r[d]],Array.isArray(c)&&+r[d]==c.length-1))for(;c.length&&c[c.length-1]===void 0;)c.pop()}else c[r[d]]=l}}function s(n,r){var a=r;return M(r)?a="["+r+"]":n&&(a="."+r),n+a}function t(n,r,a,l){var u,d=k(a),c=!0,x=a,g=l.replace("-1",0),p=!d&&b(a,g),v=r[0];for(u=0;u<n.length;u++)g=l.replace("-1",u),d&&(p=b(x=a[u%a.length],g)),p&&(c=!1),i(n,u,v,p)&&h(n[u],r,l.replace("-1",u))(x);return c}function i(n,r,a,l){if(n[r]===void 0){if(l)return!1;n[r]=typeof a=="number"?[]:{}}return!0}},16628:function(ee){"use strict";ee.exports=function(){}},41792:function(ee,z,e){"use strict";var M=e(33428),k=e(38248),o=[];ee.exports=function(T,b){if(o.indexOf(T)===-1){o.push(T);var h=1e3;k(b)?h=b:b==="long"&&(h=3e3);var s=M.select("body").selectAll(".plotly-notifier").data([0]);s.enter().append("div").classed("plotly-notifier",!0),s.selectAll(".notifier-note").data(o).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var n=M.select(this);n.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){n.transition().call(t)});for(var r=n.append("p"),a=i.split(/<br\s*\/?>/g),l=0;l<a.length;l++)l&&r.append("br"),r.append("span").text(a[l]);b==="stick"?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(h).call(t)})}function t(i){i.duration(700).style("opacity",0).each("end",function(n){var r=o.indexOf(n);r!==-1&&o.splice(r,1),M.select(this).remove()})}}},72213:function(ee,z,e){"use strict";var M=e(93972),k="data-savedcursor";ee.exports=function(o,T){var b=o.attr(k);if(T){if(!b){for(var h=(o.attr("class")||"").split(" "),s=0;s<h.length;s++){var t=h[s];t.indexOf("cursor-")===0&&o.attr(k,t.substr(7)).classed(t,!1)}o.attr(k)||o.attr(k,"!!")}M(o,T)}else b&&(o.attr(k,null),b==="!!"?M(o):M(o,b))}},92065:function(ee,z,e){"use strict";var M=e(52248).dot,k=e(39032).BADNUM,o=ee.exports={};o.tester=function(T){var b,h=T.slice(),s=h[0][0],t=s,i=h[0][1],n=i;for(h[h.length-1][0]===h[0][0]&&h[h.length-1][1]===h[0][1]||h.push(h[0]),b=1;b<h.length;b++)s=Math.min(s,h[b][0]),t=Math.max(t,h[b][0]),i=Math.min(i,h[b][1]),n=Math.max(n,h[b][1]);var r,a=!1;h.length===5&&(h[0][0]===h[1][0]?h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]&&(a=!0,r=function(d){return d[0]===h[0][0]}):h[0][1]===h[1][1]&&h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]&&(a=!0,r=function(d){return d[1]===h[0][1]}));var l=!0,u=h[0];for(b=1;b<h.length;b++)if(u[0]!==h[b][0]||u[1]!==h[b][1]){l=!1;break}return{xmin:s,xmax:t,ymin:i,ymax:n,pts:h,contains:a?function(d,c){var x=d[0],g=d[1];return!(x===k||x<s||x>t||g===k||g<i||g>n||c&&r(d))}:function(d,c){var x=d[0],g=d[1];if(x===k||x<s||x>t||g===k||g<i||g>n)return!1;var p,v,m,y,_,f=h.length,S=h[0][0],w=h[0][1],E=0;for(p=1;p<f;p++)if(v=S,m=w,S=h[p][0],w=h[p][1],!(x<(y=Math.min(v,S))||x>Math.max(v,S)||g>Math.max(m,w)))if(g<Math.min(m,w))x!==y&&E++;else{if(g===(_=S===v?g:m+(x-v)*(w-m)/(S-v)))return p!==1||!c;g<=_&&x!==y&&E++}return E%2==1},isRect:a,degenerate:l}},o.isSegmentBent=function(T,b,h,s){var t,i,n,r=T[b],a=[T[h][0]-r[0],T[h][1]-r[1]],l=M(a,a),u=Math.sqrt(l),d=[-a[1]/u,a[0]/u];for(t=b+1;t<h;t++)if(i=[T[t][0]-r[0],T[t][1]-r[1]],(n=M(i,a))<0||n>l||Math.abs(M(i,d))>s)return!0;return!1},o.filter=function(T,b){var h=[T[0]],s=0,t=0;function i(n){T.push(n);var r=h.length,a=s;h.splice(t+1);for(var l=a+1;l<T.length;l++)(l===T.length-1||o.isSegmentBent(T,a,l+1,b))&&(h.push(T[l]),h.length<r-2&&(s=l,t=h.length-1),a=l)}return T.length>1&&i(T.pop()),{addPt:i,raw:T,filtered:h}}},5048:function(ee,z,e){"use strict";var M=e(16576),k=e(28624);ee.exports=function(o,T,b){var h=o._fullLayout,s=!0;return h._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(b);else if(!t.pick||h._has("parcoords")){try{t.regl=k({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:o._context.plotGlPixelRatio||e.g.devicePixelRatio,extensions:T||[],cachedCode:b||{}})}catch(i){s=!1}t.regl||(s=!1),s&&this.addEventListener("webglcontextlost",function(i){o&&o.emit&&o.emit("plotly_webglcontextlost",{event:i,layer:t.key})},!1)}}),s||M({container:h._glcontainer.node()}),s}},34296:function(ee,z,e){"use strict";var M=e(38248),k=e(25928);ee.exports=function(o){var T;if(typeof(T=o&&o.hasOwnProperty("userAgent")?o.userAgent:function(){var r;return typeof navigator!="undefined"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),r}())!="string")return!0;var b=k({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!b){for(var h=T.split(" "),s=1;s<h.length;s++)if(h[s].indexOf("Safari")!==-1)for(var t=s-1;t>-1;t--){var i=h[t];if(i.substr(0,8)==="Version/"){var n=i.substr(8).split(".")[0];if(M(n)&&(n=+n),n>=13)return!0}}}return b}},52416:function(ee){"use strict";ee.exports=function(z,e){if(e instanceof RegExp){for(var M=e.toString(),k=0;k<z.length;k++)if(z[k]instanceof RegExp&&z[k].toString()===M)return z;z.push(e)}else!e&&e!==0||z.indexOf(e)!==-1||z.push(e);return z}},94552:function(ee,z,e){"use strict";var M=e(3400),k=e(20556).dfltConfig,o={add:function(T,b,h,s,t){var i,n;T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},n=T.undoQueue.index,T.autoplay?T.undoQueue.inSequence||(T.autoplay=!1):(!T.undoQueue.sequence||T.undoQueue.beginSequence?(i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},T.undoQueue.queue.splice(n,T.undoQueue.queue.length-n,i),T.undoQueue.index+=1):i=T.undoQueue.queue[n-1],T.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(b),i.undo.args.unshift(h),i.redo.calls.push(s),i.redo.args.push(t)),T.undoQueue.queue.length>k.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--))},startSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},stopSequence:function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},undo:function(T){var b,h;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,h=0;h<b.undo.calls.length;h++)o.plotDo(T,b.undo.calls[h],b.undo.args[h]);T.undoQueue.inSequence=!1,T.autoplay=!1}},redo:function(T){var b,h;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(b=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,h=0;h<b.redo.calls.length;h++)o.plotDo(T,b.redo.calls[h],b.redo.args[h]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},plotDo:function(T,b,h){T.autoplay=!0,h=function(s,t){for(var i,n=[],r=0;r<t.length;r++)i=t[r],n[r]=i===s?i:typeof i=="object"?Array.isArray(i)?M.extendDeep([],i):M.extendDeepAll({},i):i;return n}(T,h),b.apply(null,h)}};ee.exports=o},53756:function(ee,z){"use strict";z.counter=function(e,M,k,o){var T=(M||"")+(k?"":"$"),b=o===!1?"":"^";return e==="xy"?new RegExp(b+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+T):new RegExp(b+e+"([2-9]|[1-9][0-9]+)?"+T)}},23193:function(ee){"use strict";var z=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,e=/^[^\.\[\]]+$/;ee.exports=function(M,k){for(;k;){var o=M.match(z);if(o)M=o[1];else{if(!M.match(e))throw new Error("bad relativeAttr call:"+[M,k]);M=""}if(k.charAt(0)!=="^")break;k=k.slice(1)}return M&&k.charAt(0)!=="["?M+"."+k:M+k}},51528:function(ee,z,e){"use strict";var M=e(38116).isArrayOrTypedArray,k=e(63620);ee.exports=function o(T,b){for(var h in b){var s=b[h],t=T[h];if(t!==s)if(h.charAt(0)==="_"||typeof s=="function"){if(h in T)continue;T[h]=s}else if(M(s)&&M(t)&&k(s[0])){if(h==="customdata"||h==="ids")continue;for(var i=Math.min(s.length,t.length),n=0;n<i;n++)t[n]!==s[n]&&k(s[n])&&k(t[n])&&o(t[n],s[n])}else k(s)&&k(t)&&(o(t,s),Object.keys(t).length||delete T[h])}}},14952:function(ee,z,e){"use strict";var M=e(38248),k=e(24248),o=e(35536),T=e(39032).BADNUM,b=1e-9;function h(n,r){return n<r}function s(n,r){return n<=r}function t(n,r){return n>r}function i(n,r){return n>=r}z.findBin=function(n,r,a){if(M(r.start))return a?Math.ceil((n-r.start)/r.size-b)-1:Math.floor((n-r.start)/r.size+b);var l,u,d=0,c=r.length,x=0,g=c>1?(r[c-1]-r[0])/(c-1):1;for(u=g>=0?a?h:s:a?i:t,n+=g*b*(a?-1:1)*(g>=0?1:-1);d<c&&x++<100;)u(r[l=Math.floor((d+c)/2)],n)?d=l+1:c=l;return x>90&&k.log("Long binary search..."),d-1},z.sorterAsc=function(n,r){return n-r},z.sorterDes=function(n,r){return r-n},z.distinctVals=function(n){var r,a=n.slice();for(a.sort(z.sorterAsc),r=a.length-1;r>-1&&a[r]===T;r--);for(var l,u=a[r]-a[0]||1,d=u/(r||1)/1e4,c=[],x=0;x<=r;x++){var g=a[x],p=g-l;l===void 0?(c.push(g),l=g):p>d&&(u=Math.min(u,p),c.push(g),l=g)}return{vals:c,minDiff:u}},z.roundUp=function(n,r,a){for(var l,u=0,d=r.length-1,c=0,x=a?0:1,g=a?1:0,p=a?Math.ceil:Math.floor;u<d&&c++<100;)r[l=p((u+d)/2)]<=n?u=l+x:d=l-g;return r[u]},z.sort=function(n,r){for(var a=0,l=0,u=1;u<n.length;u++){var d=r(n[u],n[u-1]);if(d<0?a=1:d>0&&(l=1),a&&l)return n.sort(r)}return l?n:n.reverse()},z.findIndexOfMin=function(n,r){r=r||o;for(var a,l=1/0,u=0;u<n.length;u++){var d=r(n[u]);d<l&&(l=d,a=u)}return a}},93972:function(ee){"use strict";ee.exports=function(z,e){(z.attr("class")||"").split(" ").forEach(function(M){M.indexOf("cursor-")===0&&z.classed(M,!1)}),e&&z.classed("cursor-"+e,!0)}},16576:function(ee,z,e){"use strict";var M=e(76308),k=function(){};ee.exports=function(o){for(var T in o)typeof o[T]=="function"&&(o[T]=k);o.destroy=function(){o.container.parentNode.removeChild(o.container)};var b=document.createElement("div");b.className="no-webgl",b.style.cursor="pointer",b.style.fontSize="24px",b.style.color=M.defaults[0],b.style.position="absolute",b.style.left=b.style.top="0px",b.style.width=b.style.height="100%",b.style["background-color"]=M.lightLine,b.style["z-index"]=30;var h=document.createElement("p");return h.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",h.style.position="relative",h.style.top="50%",h.style.left="50%",h.style.height="30%",h.style.width="50%",h.style.margin="-15% 0 0 -25%",b.appendChild(h),o.container.appendChild(b),o.container.style.background="#FFFFFF",o.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(ee){"use strict";ee.exports=function(z){return Object.keys(z).sort()}},63084:function(ee,z,e){"use strict";var M=e(38248),k=e(38116).isArrayOrTypedArray;z.aggNums=function(o,T,b,h){var s,t;if((!h||h>b.length)&&(h=b.length),M(T)||(T=!1),k(b[0])){for(t=new Array(h),s=0;s<h;s++)t[s]=z.aggNums(o,T,b[s]);b=t}for(s=0;s<h;s++)M(T)?M(b[s])&&(T=o(+T,+b[s])):T=b[s];return T},z.len=function(o){return z.aggNums(function(T){return T+1},0,o)},z.mean=function(o,T){return T||(T=z.len(o)),z.aggNums(function(b,h){return b+h},0,o)/T},z.midRange=function(o){if(o!==void 0&&o.length!==0)return(z.aggNums(Math.max,null,o)+z.aggNums(Math.min,null,o))/2},z.variance=function(o,T,b){return T||(T=z.len(o)),M(b)||(b=z.mean(o,T)),z.aggNums(function(h,s){return h+Math.pow(s-b,2)},0,o)/T},z.stdev=function(o,T,b){return Math.sqrt(z.variance(o,T,b))},z.median=function(o){var T=o.slice().sort();return z.interp(T,.5)},z.interp=function(o,T){if(!M(T))throw"n should be a finite number";if((T=T*o.length-.5)<0)return o[0];if(T>o.length-1)return o[o.length-1];var b=T%1;return b*o[Math.ceil(T)]+(1-b)*o[Math.floor(T)]}},43080:function(ee,z,e){"use strict";var M=e(72160);ee.exports=function(k){return k?M(k):[0,0,0,1]}},9188:function(ee,z,e){"use strict";var M=e(2264),k=e(43616),o=e(3400),T=null;ee.exports=function(){if(T!==null)return T;T=!1;var b=o.isIE()||o.isSafari()||o.isIOS();if(window.navigator.userAgent&&!b){var h=Array.from(M.CSS_DECLARATIONS).reverse(),s=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof s=="function")T=h.some(function(n){return s.apply(null,n)});else{var t=k.tester.append("image").attr("style",M.STYLE),i=window.getComputedStyle(t.node()).imageRendering;T=h.some(function(n){var r=n[1];return i===r||i===r.toLowerCase()}),t.remove()}}return T}},72736:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=k.strTranslate,T=e(9616),b=e(84284).LINE_SPACING,h=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;z.convertToTspans=function(R,j,D){var N=R.text(),W=!R.attr("data-notex")&&j&&j._context.typesetMath&&typeof MathJax!="undefined"&&N.match(h),F=M.select(R.node().parentNode);if(!F.empty()){var U=R.attr("class")?R.attr("class").split(" ")[0]:"text";return U+="-math",F.selectAll("svg."+U).remove(),F.selectAll("g."+U+"-group").remove(),R.style("display",null).attr({"data-unformatted":N,"data-math":"N"}),W?(j&&j._promises||[]).push(new Promise(function(te){R.style("display","none");var J=parseInt(R.node().style.fontSize,10),K={fontSize:J};(function(X,Z,$){var re,oe,ie,ue,me=parseInt((MathJax.version||"").split(".")[0]);if(me===2||me===3){var be=function(){var de="math-output-"+k.randstr({},64),ve=(ue=M.select("body").append("div").attr({id:de}).style({visibility:"hidden",position:"absolute","font-size":Z.fontSize+"px"}).text(X.replace(s,"\\lt ").replace(t,"\\gt "))).node();return me===2?MathJax.Hub.Typeset(ve):MathJax.typeset([ve])},ge=function(){var de=ue.select(me===2?".MathJax_SVG":".MathJax"),ve=!de.empty()&&ue.select("svg").node();if(ve){var pe,_e=ve.getBoundingClientRect();pe=me===2?M.select("body").select("#MathJax_SVG_glyphs"):de.select("defs"),$(de,pe,_e)}else k.log("There was an error in the tex syntax.",X),$();ue.remove()};me===2?MathJax.Hub.Queue(function(){return oe=k.extendDeepAll({},MathJax.Hub.config),ie=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if((re=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},be,ge,function(){if(re!=="SVG")return MathJax.Hub.setRenderer(re)},function(){return ie!==void 0&&(MathJax.Hub.processSectionDelay=ie),MathJax.Hub.Config(oe)}):me===3&&(oe=k.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,(re=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){be(),ge(),re!=="svg"&&(MathJax.config.startup.output=re),MathJax.config=oe}))}else k.warn("No MathJax version:",MathJax.version)})(W[2],K,function(X,Z,$){F.selectAll("svg."+U).remove(),F.selectAll("g."+U+"-group").remove();var re=X&&X.select("svg");if(!re||!re.node())return V(),void te();var oe=F.append("g").classed(U+"-group",!0).attr({"pointer-events":"none","data-unformatted":N,"data-math":"Y"});oe.node().appendChild(re.node()),Z&&Z.node()&&re.node().insertBefore(Z.node().cloneNode(!0),re.node().firstChild);var ie=$.width,ue=$.height;re.attr({class:U,height:ue,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var me=R.node().style.fill||"black",be=re.select("g");be.attr({fill:me,stroke:me});var ge=be.node().getBoundingClientRect(),de=ge.width,ve=ge.height;(de>ie||ve>ue)&&(re.style("overflow","hidden"),de=(ge=re.node().getBoundingClientRect()).width,ve=ge.height);var pe=+R.attr("x"),_e=+R.attr("y"),Te=-(J||R.node().getBoundingClientRect().height)/4;if(U[0]==="y")oe.attr({transform:"rotate("+[-90,pe,_e]+")"+o(-de/2,Te-ve/2)});else if(U[0]==="l")_e=Te-ve/2;else if(U[0]==="a"&&U.indexOf("atitle")!==0)pe=0,_e=Te;else{var le=R.attr("text-anchor");pe-=de*(le==="middle"?.5:le==="end"?1:0),_e=_e+Te-ve/2}re.attr({x:pe,y:_e}),D&&D.call(R,oe),te(oe)})})):V(),R}function V(){F.empty()||(U=R.attr("class")+"-math",F.select("svg."+U).remove()),R.text("").style("white-space","pre");var te=function(J,K){K=K.replace(d," ");var X,Z=!1,$=[],re=-1;function oe(){re++;var ke=document.createElementNS(T.svg,"tspan");M.select(ke).attr({class:"line",dy:re*b+"em"}),J.appendChild(ke),X=ke;var Me=$;if($=[{node:ke}],Me.length>1)for(var Ee=1;Ee<Me.length;Ee++)ie(Me[Ee])}function ie(ke){var Me,Ee=ke.type,De={};if(Ee==="a"){Me="a";var fe=ke.target,xe=ke.href,we=ke.popup;xe&&(De={"xlink:xlink:show":fe==="_blank"||fe.charAt(0)!=="_"?"new":"replace",target:fe,"xlink:xlink:href":xe},we&&(De.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+we+'");return false;'))}else Me="tspan";ke.style&&(De.style=ke.style);var Oe=document.createElementNS(T.svg,Me);if(Ee==="sup"||Ee==="sub"){ue(X,l),X.appendChild(Oe);var ze=document.createElementNS(T.svg,"tspan");ue(ze,l),M.select(ze).attr("dy",a[Ee]),De.dy=r[Ee],X.appendChild(Oe),X.appendChild(ze)}else X.appendChild(Oe);M.select(Oe).attr(De),X=ke.node=Oe,$.push(ke)}function ue(ke,Me){ke.appendChild(document.createTextNode(Me))}function me(ke){if($.length!==1){var Me=$.pop();ke!==Me.type&&k.log("Start tag <"+Me.type+"> doesnt match end tag <"+ke+">. Pretending it did match.",K),X=$[$.length-1].node}else k.log("Ignoring unexpected end tag </"+ke+">.",K)}g.test(K)?oe():(X=J,$=[{node:J}]);for(var be=K.split(c),ge=0;ge<be.length;ge++){var de=be[ge],ve=de.match(x),pe=ve&&ve[2].toLowerCase(),_e=n[pe];if(pe==="br")oe();else if(_e===void 0)ue(X,E(de));else if(ve[1])me(pe);else{var Te=ve[4],le={type:pe},ae=_(Te,p);if(ae?(ae=ae.replace(f,"$1 fill:"),_e&&(ae+=";"+_e)):_e&&(ae=_e),ae&&(le.style=ae),pe==="a"){Z=!0;var he=_(Te,v);if(he){var Se=P(he);Se&&(le.href=Se,le.target=_(Te,m)||"_blank",le.popup=_(Te,y))}}ie(le)}}return Z}(R.node(),N);te&&R.style("pointer-events","all"),z.positionText(R),D&&D.call(R)}};var s=/(<|&lt;|&#60;)/g,t=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],n={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},r={sub:"0.3em",sup:"-0.6em"},a={sub:"-0.21em",sup:"0.42em"},l="\u200B",u=["http:","https:","mailto:","",void 0,":"],d=z.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,g=/<br(\s+.*)?>/i;z.BR_TAG_ALL=/<br(\s+.*)?>/gi;var p=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,v=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,m=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,y=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(R,j){if(!R)return null;var D=R.match(j),N=D&&(D[3]||D[4]);return N&&E(N)}var f=/(^|;)\s*color:/;z.plainText=function(R,j){for(var D=(j=j||{}).len!==void 0&&j.len!==-1?j.len:1/0,N=j.allowedTags!==void 0?j.allowedTags:["br"],W=R.split(c),F=[],U="",V=0,te=0;te<W.length;te++){var J=W[te],K=J.match(x),X=K&&K[2].toLowerCase();if(X)N.indexOf(X)!==-1&&(F.push(J),U=X);else{var Z=J.length;if(V+Z<D)F.push(J),V+=Z;else if(V<D){var $=D-V;U&&(U!=="br"||$<=3||Z<=3)&&F.pop(),D>3?F.push(J.substr(0,$-3)+"..."):F.push(J.substr(0,$));break}U=""}}return F.join("")};var S={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},w=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(R){return R.replace(w,function(j,D){return(D.charAt(0)==="#"?function(N){if(!(N>1114111)){var W=String.fromCodePoint;if(W)return W(N);var F=String.fromCharCode;return N<=65535?F(N):F(55232+(N>>10),N%1024+56320)}}(D.charAt(1)==="x"?parseInt(D.substr(2),16):parseInt(D.substr(1),10)):S[D])||j})}function P(R){var j=encodeURI(decodeURI(R)),D=document.createElement("a"),N=document.createElement("a");D.href=R,N.href=j;var W=D.protocol,F=N.protocol;return u.indexOf(W)!==-1&&u.indexOf(F)!==-1?j:""}function C(R,j,D){var N,W,F,U=D.horizontalAlign,V=D.verticalAlign||"top",te=R.node().getBoundingClientRect(),J=j.node().getBoundingClientRect();return W=V==="bottom"?function(){return te.bottom-N.height}:V==="middle"?function(){return te.top+(te.height-N.height)/2}:function(){return te.top},F=U==="right"?function(){return te.right-N.width}:U==="center"?function(){return te.left+(te.width-N.width)/2}:function(){return te.left},function(){N=this.node().getBoundingClientRect();var K=F()-J.left,X=W()-J.top,Z=D.gd||{};if(D.gd){Z._fullLayout._calcInverseTransform(Z);var $=k.apply3DTransform(Z._fullLayout._invTransform)(K,X);K=$[0],X=$[1]}return this.style({top:X+"px",left:K+"px","z-index":1e3}),this}}z.convertEntities=E,z.sanitizeHTML=function(R){R=R.replace(d," ");for(var j=document.createElement("p"),D=j,N=[],W=R.split(c),F=0;F<W.length;F++){var U=W[F],V=U.match(x),te=V&&V[2].toLowerCase();if(te in n)if(V[1])N.length&&(D=N.pop());else{var J=V[4],K=_(J,p),X=K?{style:K}:{};if(te==="a"){var Z=_(J,v);if(Z){var $=P(Z);if($){X.href=$;var re=_(J,m);re&&(X.target=re)}}}var oe=document.createElement(te);D.appendChild(oe),M.select(oe).attr(X),D=oe,N.push(oe)}else D.appendChild(document.createTextNode(E(U)))}return j.innerHTML},z.lineCount=function(R){return R.selectAll("tspan.line").size()||1},z.positionText=function(R,j,D){return R.each(function(){var N=M.select(this);function W(V,te){return te===void 0?(te=N.attr(V))===null&&(N.attr(V,0),te=0):N.attr(V,te),te}var F=W("x",j),U=W("y",D);this.nodeName==="text"&&N.selectAll("tspan.line").attr({x:F,y:U})})};var O="1px ";z.makeTextShadow=function(R){return O+O+O+R+", -"+O+"-"+O+O+R+", "+O+"-"+O+O+R+", -"+O+O+O+R},z.makeEditable=function(R,j){var D=j.gd,N=j.delegate,W=M.dispatch("edit","input","cancel"),F=N||R;if(R.style({"pointer-events":N?"none":"all"}),R.size()!==1)throw new Error("boo");function U(){var te,J,K,X,Z;te=M.select(D).select(".svg-container"),J=te.append("div"),K=R.node().style,X=parseFloat(K.fontSize||12),(Z=j.text)===void 0&&(Z=R.attr("data-unformatted")),J.classed("plugin-editable editable",!0).style({position:"absolute","font-family":K.fontFamily||"Arial","font-size":X,color:j.fill||K.fill||"black",opacity:1,"background-color":j.background||"transparent",outline:"#ffffff33 1px solid",margin:[-X/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(Z).call(C(R,te,j)).on("blur",function(){D._editing=!1,R.text(this.textContent).style({opacity:1});var oe,ie=M.select(this).attr("class");(oe=ie?"."+ie.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(R.node().parentNode).select(oe).style({opacity:0});var ue=this.textContent;M.select(this).transition().duration(0).remove(),M.select(document).on("mouseup",null),W.edit.call(R,ue)}).on("focus",function(){var oe=this;D._editing=!0,M.select(document).on("mouseup",function(){if(M.event.target===oe)return!1;document.activeElement===J.node()&&J.node().blur()})}).on("keyup",function(){M.event.which===27?(D._editing=!1,R.style({opacity:1}),M.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),W.cancel.call(R,this.textContent)):(W.input.call(R,this.textContent),M.select(this).call(C(R,te,j)))}).on("keydown",function(){M.event.which===13&&this.blur()}).call(V),R.style({opacity:0});var $,re=F.attr("class");($=re?"."+re.split(" ")[0]+"-math-group":"[class*=-math-group]")&&M.select(R.node().parentNode).select($).style({opacity:0})}function V(te){var J=te.node(),K=document.createRange();K.selectNodeContents(J);var X=window.getSelection();X.removeAllRanges(),X.addRange(K),J.focus()}return j.immediate?U():F.on("click",U),M.rebind(R,W,"on")}},91200:function(ee,z){"use strict";var e={};function M(k){k&&k.timer!==null&&(clearTimeout(k.timer),k.timer=null)}z.throttle=function(k,o,T){var b=e[k],h=Date.now();if(!b){for(var s in e)e[s].ts<h-6e4&&delete e[s];b=e[k]={ts:0,timer:null}}function t(){T(),b.ts=Date.now(),b.onDone&&(b.onDone(),b.onDone=null)}M(b),h>b.ts+o?t():b.timer=setTimeout(function(){t(),b.timer=null},o)},z.done=function(k){var o=e[k];return o&&o.timer?new Promise(function(T){var b=o.onDone;o.onDone=function(){b&&b(),T(),o.onDone=null}}):Promise.resolve()},z.clear=function(k){if(k)M(e[k]),delete e[k];else for(var o in e)z.clear(o)}},36896:function(ee,z,e){"use strict";var M=e(38248);ee.exports=function(k,o){if(k>0)return Math.log(k)/Math.LN10;var T=Math.log(Math.min(o[0],o[1]))/Math.LN10;return M(T)||(T=Math.log(Math.max(o[0],o[1]))/Math.LN10-6),T}},59972:function(ee,z,e){"use strict";var M=ee.exports={},k=e(79552).locationmodeToLayer,o=e(55712).NO;M.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},M.getTopojsonPath=function(T,b){return T+b+".json"},M.getTopojsonFeatures=function(T,b){var h=k[T.locationmode],s=b.objects[h];return o(b,s).features}},11680:function(ee){"use strict";ee.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(ee){"use strict";ee.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(ee,z,e){"use strict";var M=e(24040);ee.exports=function(k){for(var o,T,b=M.layoutArrayContainers,h=M.layoutArrayRegexes,s=k.split("[")[0],t=0;t<h.length;t++)if((T=k.match(h[t]))&&T.index===0){o=T[0];break}if(o||(o=b[b.indexOf(s)]),!o)return!1;var i=k.substr(o.length);return i?!!(T=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:o,index:Number(T[1]),property:T[3]||""}:{array:o,index:"",property:""}}},67824:function(ee,z,e){"use strict";var M=e(92880).extendFlat,k=e(63620),o={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},T={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},b=o.flags.slice().concat(["fullReplot"]),h=T.flags.slice().concat("layoutReplot");function s(n){for(var r={},a=0;a<n.length;a++)r[n[a]]=!1;return r}function t(n,r,a){var l=M({},n);for(var u in l){var d=l[u];k(d)&&(l[u]=i(d,r,0,u))}return a==="from-root"&&(l.editType=r),l}function i(n,r,a,l){if(n.valType){var u=M({},n);if(u.editType=r,Array.isArray(n.items)){u.items=new Array(n.items.length);for(var d=0;d<n.items.length;d++)u.items[d]=i(n.items[d],r)}return u}return t(n,r,l.charAt(0)==="_"?"nested":"from-root")}ee.exports={traces:o,layout:T,traceFlags:function(){return s(b)},layoutFlags:function(){return s(h)},update:function(n,r){var a=r.editType;if(a&&a!=="none")for(var l=a.split("+"),u=0;u<l.length;u++)n[l[u]]=!0},overrideAll:t}},93404:function(ee,z,e){"use strict";var M=e(38248),k=e(61784),o=e(24040),T=e(3400),b=e(7316),h=e(79811),s=e(76308),t=h.cleanId,i=h.getFromTrace,n=o.traceIs;function r(v,m){var y=v[m],_=m.charAt(0);y&&y!=="paper"&&(v[m]=t(y,_,!0))}function a(v){function m(y,_){var f=v[y],S=v.title&&v.title[_];f&&!S&&(v.title||(v.title={}),v.title[_]=v[y],delete v[y])}v&&(typeof v.title!="string"&&typeof v.title!="number"||(v.title={text:v.title}),m("titlefont","font"),m("titleposition","position"),m("titleside","side"),m("titleoffset","offset"))}function l(v){if(!T.isPlainObject(v))return!1;var m=v.name;return delete v.name,delete v.showlegend,(typeof m=="string"||typeof m=="number")&&String(m)}function u(v,m,y,_){if(y&&!_)return v;if(_&&!y||!v.trim())return m;if(!m.trim())return v;var f,S=Math.min(v.length,m.length);for(f=0;f<S&&v.charAt(f)===m.charAt(f);f++);return v.substr(0,f).trim()}function d(v){var m="middle",y="center";return typeof v=="string"&&(v.indexOf("top")!==-1?m="top":v.indexOf("bottom")!==-1&&(m="bottom"),v.indexOf("left")!==-1?y="left":v.indexOf("right")!==-1&&(y="right")),m+" "+y}function c(v,m){return m in v&&typeof v[m]=="object"&&Object.keys(v[m]).length===0}z.clearPromiseQueue=function(v){Array.isArray(v._promises)&&v._promises.length>0&&T.log("Clearing previous rejected promises from queue."),v._promises=[]},z.cleanLayout=function(v){var m,y;v||(v={}),v.xaxis1&&(v.xaxis||(v.xaxis=v.xaxis1),delete v.xaxis1),v.yaxis1&&(v.yaxis||(v.yaxis=v.yaxis1),delete v.yaxis1),v.scene1&&(v.scene||(v.scene=v.scene1),delete v.scene1);var _=(b.subplotsRegistry.cartesian||{}).attrRegex,f=(b.subplotsRegistry.polar||{}).attrRegex,S=(b.subplotsRegistry.ternary||{}).attrRegex,w=(b.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(v);for(m=0;m<E.length;m++){var P=E[m];if(_&&_.test(P)){var C=v[P];C.anchor&&C.anchor!=="free"&&(C.anchor=t(C.anchor)),C.overlaying&&(C.overlaying=t(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":C.isdate===!1&&C.islog===!1&&(C.type="linear")),C.autorange!=="withzero"&&C.autorange!=="tozero"||(C.autorange=!0,C.rangemode="tozero"),C.insiderange&&delete C.range,delete C.islog,delete C.isdate,delete C.categories,c(C,"domain")&&delete C.domain,C.autotick!==void 0&&(C.tickmode===void 0&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),a(C)}else if(f&&f.test(P))a(v[P].radialaxis);else if(S&&S.test(P)){var O=v[P];a(O.aaxis),a(O.baxis),a(O.caxis)}else if(w&&w.test(P)){var R=v[P],j=R.cameraposition;if(Array.isArray(j)&&j[0].length===4){var D=j[0],N=j[1],W=j[2],F=k([],D),U=[];for(y=0;y<3;++y)U[y]=N[y]+W*F[2+4*y];R.camera={eye:{x:U[0],y:U[1],z:U[2]},center:{x:N[0],y:N[1],z:N[2]},up:{x:0,y:0,z:1}},delete R.cameraposition}a(R.xaxis),a(R.yaxis),a(R.zaxis)}}var V=Array.isArray(v.annotations)?v.annotations.length:0;for(m=0;m<V;m++){var te=v.annotations[m];T.isPlainObject(te)&&(te.ref&&(te.ref==="paper"?(te.xref="paper",te.yref="paper"):te.ref==="data"&&(te.xref="x",te.yref="y"),delete te.ref),r(te,"xref"),r(te,"yref"))}var J=Array.isArray(v.shapes)?v.shapes.length:0;for(m=0;m<J;m++){var K=v.shapes[m];T.isPlainObject(K)&&(r(K,"xref"),r(K,"yref"))}var X=Array.isArray(v.images)?v.images.length:0;for(m=0;m<X;m++){var Z=v.images[m];T.isPlainObject(Z)&&(r(Z,"xref"),r(Z,"yref"))}var $=v.legend;return $&&($.x>3?($.x=1.02,$.xanchor="left"):$.x<-2&&($.x=-.02,$.xanchor="right"),$.y>3?($.y=1.02,$.yanchor="bottom"):$.y<-2&&($.y=-.02,$.yanchor="top")),a(v),v.dragmode==="rotate"&&(v.dragmode="orbit"),s.clean(v),v.template&&v.template.layout&&z.cleanLayout(v.template.layout),v},z.cleanData=function(v){for(var m=0;m<v.length;m++){var y,_=v[m];if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var f=s.defaults,S=_.error_y.color||(n(_,"bar")?s.defaultLine:f[m%f.length]);_.error_y.color=s.addOpacity(s.rgb(S),s.opacity(S)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir!=="h"||!n(_,"bar")&&_.type.substr(0,9)!=="histogram"||(_.orientation="h",z.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&z.swapXYData(_),_.type!=="histogramx"&&_.type!=="histogramy"||(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=t(_.xaxis,"x")),_.yaxis&&(_.yaxis=t(_.yaxis,"y")),n(_,"gl3d")&&_.scene&&(_.scene=b.subplotsRegistry.gl3d.cleanId(_.scene)),!n(_,"pie-like")&&!n(_,"bar-like"))if(Array.isArray(_.textposition))for(y=0;y<_.textposition.length;y++)_.textposition[y]=d(_.textposition[y]);else _.textposition&&(_.textposition=d(_.textposition));var w=o.getModule(_);if(w&&w.colorbar){var E=w.colorbar.container,P=E?_[E]:_;P&&P.colorscale&&(P.colorscale==="YIGnBu"&&(P.colorscale="YlGnBu"),P.colorscale==="YIOrRd"&&(P.colorscale="YlOrRd"))}if(_.type==="surface"&&T.isPlainObject(_.contours)){var C=["x","y","z"];for(y=0;y<C.length;y++){var O=_.contours[C[y]];T.isPlainObject(O)&&(O.highlightColor&&(O.highlightcolor=O.highlightColor,delete O.highlightColor),O.highlightWidth&&(O.highlightwidth=O.highlightWidth,delete O.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var R=(_.increasing||{}).showlegend!==!1,j=(_.decreasing||{}).showlegend!==!1,D=l(_.increasing),N=l(_.decreasing);if(D!==!1&&N!==!1){var W=u(D,N,R,j);W&&(_.name=W)}else!D&&!N||_.name||(_.name=D||N)}if(Array.isArray(_.transforms)){var F=_.transforms;for(y=0;y<F.length;y++){var U=F[y];if(T.isPlainObject(U))switch(U.type){case"filter":U.filtersrc&&(U.target=U.filtersrc,delete U.filtersrc),U.calendar&&(U.valuecalendar||(U.valuecalendar=U.calendar),delete U.calendar);break;case"groupby":if(U.styles=U.styles||U.style,U.styles&&!Array.isArray(U.styles)){var V=U.styles,te=Object.keys(V);U.styles=[];for(var J=0;J<te.length;J++)U.styles.push({target:te[J],value:V[te[J]]})}}}}c(_,"line")&&delete _.line,"marker"in _&&(c(_.marker,"line")&&delete _.marker.line,c(_,"marker")&&delete _.marker),s.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),a(_),_.colorbar&&a(_.colorbar),_.marker&&_.marker.colorbar&&a(_.marker.colorbar),_.line&&_.line.colorbar&&a(_.line.colorbar),_.aaxis&&a(_.aaxis),_.baxis&&a(_.baxis)}},z.swapXYData=function(v){var m;if(T.swapAttrs(v,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(v.z)&&Array.isArray(v.z[0])&&(v.transpose?delete v.transpose:v.transpose=!0),v.error_x&&v.error_y){var y=v.error_y,_="copy_ystyle"in y?y.copy_ystyle:!(y.color||y.thickness||y.width);T.swapAttrs(v,["error_?.copy_ystyle"]),_&&T.swapAttrs(v,["error_?.color","error_?.thickness","error_?.width"])}if(typeof v.hoverinfo=="string"){var f=v.hoverinfo.split("+");for(m=0;m<f.length;m++)f[m]==="x"?f[m]="y":f[m]==="y"&&(f[m]="x");v.hoverinfo=f.join("+")}},z.coerceTraceIndices=function(v,m){if(M(m))return[m];if(!Array.isArray(m)||!m.length)return v.data.map(function(f,S){return S});if(Array.isArray(m)){for(var y=[],_=0;_<m.length;_++)T.isIndex(m[_],v.data.length)?y.push(m[_]):T.warn("trace index (",m[_],") is not a number or is out of bounds");return y}return m},z.manageArrayContainers=function(v,m,y){var _=v.obj,f=v.parts,S=f.length,w=f[S-1],E=M(w);if(E&&m===null){var P=f.slice(0,S-1).join(".");T.nestedProperty(_,P).get().splice(w,1)}else E&&v.get()===void 0&&v.get()===void 0&&(y[v.astr]=null),v.set(m)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function g(v){var m=v.search(x);if(m>0)return v.substr(0,m)}z.hasParent=function(v,m){for(var y=g(m);y;){if(y in v)return!0;y=g(y)}return!1};var p=["x","y","z"];z.clearAxisTypes=function(v,m,y){for(var _=0;_<m.length;_++)for(var f=v._fullData[_],S=0;S<3;S++){var w=i(v,f,p[S]);if(w&&w.type!=="log"){var E=w._name,P=w._id.substr(1);if(P.substr(0,5)==="scene"){if(y[P]!==void 0)continue;E=P+"."+E}var C=E+".type";y[E]===void 0&&y[C]===void 0&&T.nestedProperty(v.layout,C).set(null)}}}},22448:function(ee,z,e){"use strict";var M=e(36424);z._doPlot=M._doPlot,z.newPlot=M.newPlot,z.restyle=M.restyle,z.relayout=M.relayout,z.redraw=M.redraw,z.update=M.update,z._guiRestyle=M._guiRestyle,z._guiRelayout=M._guiRelayout,z._guiUpdate=M._guiUpdate,z._storeDirectGUIEdit=M._storeDirectGUIEdit,z.react=M.react,z.extendTraces=M.extendTraces,z.prependTraces=M.prependTraces,z.addTraces=M.addTraces,z.deleteTraces=M.deleteTraces,z.moveTraces=M.moveTraces,z.purge=M.purge,z.addFrames=M.addFrames,z.deleteFrames=M.deleteFrames,z.animate=M.animate,z.setPlotConfig=M.setPlotConfig;var k=e(52200).getGraphDiv,o=e(4016).eraseActiveShape;z.deleteActiveShape=function(b){return o(k(b))},z.toImage=e(67024),z.validate=e(21480),z.downloadImage=e(39792);var T=e(94828);z.makeTemplate=T.makeTemplate,z.validateTemplate=T.validateTemplate},17680:function(ee,z,e){"use strict";var M=e(63620),k=e(16628),o=e(24248),T=e(14952).sorterAsc,b=e(24040);z.containerArrayMatch=e(69820);var h=z.isAddVal=function(t){return t==="add"||M(t)},s=z.isRemoveVal=function(t){return t===null||t==="remove"};z.applyContainerArrayChanges=function(t,i,n,r,a){var l=i.astr,u=b.getComponentMethod(l,"supplyLayoutDefaults"),d=b.getComponentMethod(l,"draw"),c=b.getComponentMethod(l,"drawOne"),x=r.replot||r.recalc||u===k||d===k,g=t.layout,p=t._fullLayout;if(n[""]){Object.keys(n).length>1&&o.warn("Full array edits are incompatible with other edits",l);var v=n[""][""];if(s(v))i.set(null);else{if(!Array.isArray(v))return o.warn("Unrecognized full array edit value",l,v),!0;i.set(v)}return!x&&(u(g,p),d(t),!0)}var m,y,_,f,S,w,E,P,C=Object.keys(n).map(Number).sort(T),O=i.get(),R=O||[],j=a(p,l).get(),D=[],N=-1,W=R.length;for(m=0;m<C.length;m++)if(f=n[_=C[m]],S=Object.keys(f),w=f[""],E=h(w),_<0||_>R.length-(E?0:1))o.warn("index out of range",l,_);else if(w!==void 0)S.length>1&&o.warn("Insertion & removal are incompatible with edits to the same index.",l,_),s(w)?D.push(_):E?(w==="add"&&(w={}),R.splice(_,0,w),j&&j.splice(_,0,{})):o.warn("Unrecognized full object edit value",l,_,w),N===-1&&(N=_);else for(y=0;y<S.length;y++)P=l+"["+_+"].",a(R[_],S[y],P).set(f[S[y]]);for(m=D.length-1;m>=0;m--)R.splice(D[m],1),j&&j.splice(D[m],1);if(R.length?O||i.set(R):i.set(null),x)return!1;if(u(g,p),c!==k){var F;if(N===-1)F=C;else{for(W=Math.max(R.length,W),F=[],m=0;m<C.length&&!((_=C[m])>=N);m++)F.push(_);for(m=N;m<W;m++)F.push(m)}for(m=0;m<F.length;m++)c(t,F[m])}else d(t);return!0}},36424:function(ee,z,e){"use strict";var M=e(33428),k=e(38248),o=e(52264),T=e(3400),b=T.nestedProperty,h=e(95924),s=e(94552),t=e(24040),i=e(73060),n=e(7316),r=e(54460),a=e(96312),l=e(94724),u=e(43616),d=e(76308),c=e(42464).initInteractions,x=e(9616),g=e(22676).clearOutline,p=e(20556).dfltConfig,v=e(17680),m=e(93404),y=e(39172),_=e(67824),f=e(33816).AX_NAME_PATTERN,S=0;function w(ke){var Me=ke._fullLayout;Me._redrawFromAutoMarginCount?Me._redrawFromAutoMarginCount--:ke.emit("plotly_afterplot")}function E(ke,Me){try{ke._fullLayout._paper.style("background",Me)}catch(Ee){T.error(Ee)}}function P(ke,Me){E(ke,d.combine(Me,"white"))}function C(ke,Me){if(!ke._context){ke._context=T.extendDeep({},p);var Ee=M.select("base");ke._context._baseUrl=Ee.size()&&Ee.attr("href")?window.location.href.split("#")[0]:""}var De,fe,xe,we=ke._context;if(Me){for(fe=Object.keys(Me),De=0;De<fe.length;De++)(xe=fe[De])!=="editable"&&xe!=="edits"&&xe in we&&(xe==="setBackground"&&Me[xe]==="opaque"?we[xe]=P:we[xe]=Me[xe]);Me.plot3dPixelRatio&&!we.plotGlPixelRatio&&(we.plotGlPixelRatio=we.plot3dPixelRatio);var Oe=Me.editable;if(Oe!==void 0)for(we.editable=Oe,fe=Object.keys(we.edits),De=0;De<fe.length;De++)we.edits[fe[De]]=Oe;if(Me.edits)for(fe=Object.keys(Me.edits),De=0;De<fe.length;De++)(xe=fe[De])in we.edits&&(we.edits[xe]=Me.edits[xe]);we._exportedPlot=Me._exportedPlot}we.staticPlot&&(we.editable=!1,we.edits={},we.autosizable=!1,we.scrollZoom=!1,we.doubleClick=!1,we.showTips=!1,we.showLink=!1,we.displayModeBar=!1),we.displayModeBar!=="hover"||o||(we.displayModeBar=!0),we.setBackground!=="transparent"&&typeof we.setBackground=="function"||(we.setBackground=E),we._hasZeroHeight=we._hasZeroHeight||ke.clientHeight===0,we._hasZeroWidth=we._hasZeroWidth||ke.clientWidth===0;var ze=we.scrollZoom,Pe=we._scrollZoom={};if(ze===!0)Pe.cartesian=1,Pe.gl3d=1,Pe.geo=1,Pe.mapbox=1;else if(typeof ze=="string"){var Ue=ze.split("+");for(De=0;De<Ue.length;De++)Pe[Ue[De]]=1}else ze!==!1&&(Pe.gl3d=1,Pe.geo=1,Pe.mapbox=1)}function O(ke,Me){var Ee,De,fe=Me+1,xe=[];for(Ee=0;Ee<ke.length;Ee++)(De=ke[Ee])<0?xe.push(fe+De):xe.push(De);return xe}function R(ke,Me,Ee){var De,fe;for(De=0;De<Me.length;De++){if((fe=Me[De])!==parseInt(fe,10))throw new Error("all values in "+Ee+" must be integers");if(fe>=ke.data.length||fe<-ke.data.length)throw new Error(Ee+" must be valid indices for gd.data.");if(Me.indexOf(fe,De+1)>-1||fe>=0&&Me.indexOf(-ke.data.length+fe)>-1||fe<0&&Me.indexOf(ke.data.length+fe)>-1)throw new Error("each index in "+Ee+" must be unique.")}}function j(ke,Me,Ee){if(!Array.isArray(ke.data))throw new Error("gd.data must be an array.");if(Me===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(Me)||(Me=[Me]),R(ke,Me,"currentIndices"),Ee===void 0||Array.isArray(Ee)||(Ee=[Ee]),Ee!==void 0&&R(ke,Ee,"newIndices"),Ee!==void 0&&Me.length!==Ee.length)throw new Error("current and new indices must be of equal length.")}function D(ke,Me,Ee,De,fe){(function(Ze,it,tt,dt){var yt=T.isPlainObject(dt);if(!Array.isArray(Ze.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(it))throw new Error("update must be a key:value object");if(tt===void 0)throw new Error("indices must be an integer or array of integers");for(var vt in R(Ze,tt,"indices"),it){if(!Array.isArray(it[vt])||it[vt].length!==tt.length)throw new Error("attribute "+vt+" must be an array of length equal to indices array length");if(yt&&(!(vt in dt)||!Array.isArray(dt[vt])||dt[vt].length!==it[vt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(ke,Me,Ee,De);for(var xe=function(Ze,it,tt,dt){var yt,vt,et,Qe,wt,It=T.isPlainObject(dt),Dt=[];for(var Ct in Array.isArray(tt)||(tt=[tt]),tt=O(tt,Ze.data.length-1),it)for(var He=0;He<tt.length;He++){if(yt=Ze.data[tt[He]],vt=(et=b(yt,Ct)).get(),Qe=it[Ct][He],!T.isArrayOrTypedArray(Qe))throw new Error("attribute: "+Ct+" index: "+He+" must be an array");if(!T.isArrayOrTypedArray(vt))throw new Error("cannot extend missing or non-array attribute: "+Ct);if(vt.constructor!==Qe.constructor)throw new Error("cannot extend array with an array of a different type: "+Ct);wt=It?dt[Ct][He]:dt,k(wt)||(wt=-1),Dt.push({prop:et,target:vt,insert:Qe,maxp:Math.floor(wt)})}return Dt}(ke,Me,Ee,De),we={},Oe={},ze=0;ze<xe.length;ze++){var Pe=xe[ze].prop,Ue=xe[ze].maxp,Ve=fe(xe[ze].target,xe[ze].insert,Ue);Pe.set(Ve[0]),Array.isArray(we[Pe.astr])||(we[Pe.astr]=[]),we[Pe.astr].push(Ve[1]),Array.isArray(Oe[Pe.astr])||(Oe[Pe.astr]=[]),Oe[Pe.astr].push(xe[ze].target.length)}return{update:we,maxPoints:Oe}}function N(ke,Me){var Ee=new ke.constructor(ke.length+Me.length);return Ee.set(ke),Ee.set(Me,ke.length),Ee}function W(ke,Me,Ee,De){ke=T.getGraphDiv(ke),m.clearPromiseQueue(ke);var fe={};if(typeof Me=="string")fe[Me]=Ee;else{if(!T.isPlainObject(Me))return T.warn("Restyle fail.",Me,Ee,De),Promise.reject();fe=T.extendFlat({},Me),De===void 0&&(De=Ee)}Object.keys(fe).length&&(ke.changed=!0);var xe=m.coerceTraceIndices(ke,De),we=te(ke,fe,xe),Oe=we.flags;Oe.calc&&(ke.calcdata=void 0),Oe.clearAxisTypes&&m.clearAxisTypes(ke,xe,{});var ze=[];Oe.fullReplot?ze.push(z._doPlot):(ze.push(n.previousPromises),n.supplyDefaults(ke),Oe.markerSize&&(n.doCalcdata(ke),Z(ze)),Oe.style&&ze.push(y.doTraceStyle),Oe.colorbars&&ze.push(y.doColorBars),ze.push(w)),ze.push(n.rehover,n.redrag,n.reselect),s.add(ke,W,[ke,we.undoit,we.traces],W,[ke,we.redoit,we.traces]);var Pe=T.syncOrAsync(ze,ke);return Pe&&Pe.then||(Pe=Promise.resolve()),Pe.then(function(){return ke.emit("plotly_restyle",we.eventData),ke})}function F(ke){return ke===void 0?null:ke}function U(ke,Me){return Me?function(Ee,De,fe){var xe=b(Ee,De),we=xe.set;return xe.set=function(Oe){V((fe||"")+De,xe.get(),Oe,ke),we(Oe)},xe}:b}function V(ke,Me,Ee,De){if(Array.isArray(Me)||Array.isArray(Ee))for(var fe=Array.isArray(Me)?Me:[],xe=Array.isArray(Ee)?Ee:[],we=Math.max(fe.length,xe.length),Oe=0;Oe<we;Oe++)V(ke+"["+Oe+"]",fe[Oe],xe[Oe],De);else if(T.isPlainObject(Me)||T.isPlainObject(Ee)){var ze=T.isPlainObject(Me)?Me:{},Pe=T.isPlainObject(Ee)?Ee:{},Ue=T.extendFlat({},ze,Pe);for(var Ve in Ue)V(ke+"."+Ve,ze[Ve],Pe[Ve],De)}else De[ke]===void 0&&(De[ke]=F(Me))}function te(ke,Me,Ee){var De,fe=ke._fullLayout,xe=ke._fullData,we=ke.data,Oe=fe._guiEditing,ze=U(fe._preGUI,Oe),Pe=T.extendDeepAll({},Me);J(Me);var Ue,Ve=_.traceFlags(),Ze={},it={};function tt(){return Ee.map(function(){})}function dt(Ut){var Vt=r.id2name(Ut);Ue.indexOf(Vt)===-1&&Ue.push(Vt)}function yt(Ut){return"LAYOUT"+Ut+".autorange"}function vt(Ut){return"LAYOUT"+Ut+".range"}function et(Ut){for(var Vt=Ut;Vt<xe.length;Vt++)if(xe[Vt]._input===we[Ut])return xe[Vt]}function Qe(Ut,Vt,en){if(Array.isArray(Ut))Ut.forEach(function(hn){Qe(hn,Vt,en)});else if(!(Ut in Me)&&!m.hasParent(Me,Ut)){var Ln;if(Ut.substr(0,6)==="LAYOUT")Ln=ze(ke.layout,Ut.replace("LAYOUT",""));else{var An=Ee[en];Ln=U(fe._tracePreGUI[et(An)._fullInput.uid],Oe)(we[An],Ut)}Ut in it||(it[Ut]=tt()),it[Ut][en]===void 0&&(it[Ut][en]=F(Ln.get())),Vt!==void 0&&Ln.set(Vt)}}function wt(Ut){return function(Vt){return xe[Vt][Ut]}}function It(Ut){return function(Vt,en){return Vt===!1?xe[Ee[en]][Ut]:null}}for(var Dt in Me){if(m.hasParent(Me,Dt))throw new Error("cannot set "+Dt+" and a parent attribute simultaneously");var Ct,He,We,Be,Ge,at,nt=Me[Dt];if(Dt!=="autobinx"&&Dt!=="autobiny"||(Dt=Dt.charAt(Dt.length-1)+"bins",nt=Array.isArray(nt)?nt.map(It(Dt)):nt===!1?Ee.map(wt(Dt)):null),Ze[Dt]=nt,Dt.substr(0,6)!=="LAYOUT"){for(it[Dt]=tt(),De=0;De<Ee.length;De++)if(Ct=we[Ee[De]],He=et(Ee[De]),Be=(We=U(fe._tracePreGUI[He._fullInput.uid],Oe)(Ct,Dt)).get(),(Ge=Array.isArray(nt)?nt[De%nt.length]:nt)!==void 0){var Re=We.parts[We.parts.length-1],Fe=Dt.substr(0,Dt.length-Re.length-1),rt=Fe?Fe+".":"",Ye=Fe?b(He,Fe).get():He;if((at=i.getTraceValObject(He,We.parts))&&at.impliedEdits&&Ge!==null)for(var ct in at.impliedEdits)Qe(T.relativeAttr(Dt,ct),at.impliedEdits[ct],De);else if(Re!=="thicknessmode"&&Re!=="lenmode"||Be===Ge||Ge!=="fraction"&&Ge!=="pixels"||!Ye){if(Dt==="type"&&(Ge==="pie"!=(Be==="pie")||Ge==="funnelarea"!=(Be==="funnelarea"))){var pt="x",gt="y";Ge!=="bar"&&Be!=="bar"||Ct.orientation!=="h"||(pt="y",gt="x"),T.swapAttrs(Ct,["?","?src"],"labels",pt),T.swapAttrs(Ct,["d?","?0"],"label",pt),T.swapAttrs(Ct,["?","?src"],"values",gt),Be==="pie"||Be==="funnelarea"?(b(Ct,"marker.color").set(b(Ct,"marker.colors").get()),fe._pielayer.selectAll("g.trace").remove()):t.traceIs(Ct,"cartesian")&&b(Ct,"marker.colors").set(b(Ct,"marker.color").get())}}else{var ut=fe._size,Mt=Ye.orient,xt=Mt==="top"||Mt==="bottom";if(Re==="thicknessmode"){var mt=xt?ut.h:ut.w;Qe(rt+"thickness",Ye.thickness*(Ge==="fraction"?1/mt:mt),De)}else{var Et=xt?ut.w:ut.h;Qe(rt+"len",Ye.len*(Ge==="fraction"?1/Et:Et),De)}}if(it[Dt][De]=F(Be),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Dt)!==-1){if(Dt==="orientation"){We.set(Ge);var Lt=Ct.x&&!Ct.y?"h":"v";if((We.get()||Lt)===He.orientation)continue}else Dt==="orientationaxes"&&(Ct.orientation={v:"h",h:"v"}[He.orientation]);m.swapXYData(Ct),Ve.calc=Ve.clearAxisTypes=!0}else n.dataArrayContainers.indexOf(We.parts[0])!==-1?(m.manageArrayContainers(We,Ge,it),Ve.calc=!0):(at?at.arrayOk&&!t.traceIs(He,"regl")&&(T.isArrayOrTypedArray(Ge)||T.isArrayOrTypedArray(Be))?Ve.calc=!0:_.update(Ve,at):Ve.calc=!0,We.set(Ge))}if(["swapxyaxes","orientationaxes"].indexOf(Dt)!==-1&&r.swap(ke,Ee),Dt==="orientationaxes"){var zt=b(ke.layout,"hovermode"),Wt=zt.get();Wt==="x"?zt.set("y"):Wt==="y"?zt.set("x"):Wt==="x unified"?zt.set("y unified"):Wt==="y unified"&&zt.set("x unified")}if(["orientation","type"].indexOf(Dt)!==-1){for(Ue=[],De=0;De<Ee.length;De++){var rn=we[Ee[De]];t.traceIs(rn,"cartesian")&&(dt(rn.xaxis||"x"),dt(rn.yaxis||"y"))}Qe(Ue.map(yt),!0,0),Qe(Ue.map(vt),[0,1],0)}}else We=ze(ke.layout,Dt.replace("LAYOUT","")),it[Dt]=[F(We.get())],We.set(Array.isArray(nt)?nt[0]:nt),Ve.calc=!0}return(Ve.calc||Ve.plot)&&(Ve.fullReplot=!0),{flags:Ve,undoit:it,redoit:Ze,traces:Ee,eventData:T.extendDeepNoArrays([],[Pe,Ee])}}function J(ke){var Me,Ee,De,fe=T.counterRegex("axis",".title",!1,!1),xe=/colorbar\.title$/,we=Object.keys(ke);for(Me=0;Me<we.length;Me++)Ee=we[Me],De=ke[Ee],Ee!=="title"&&!fe.test(Ee)&&!xe.test(Ee)||typeof De!="string"&&typeof De!="number"?Ee.indexOf("titlefont")>-1&&Ee.indexOf("grouptitlefont")===-1?Oe(Ee,Ee.replace("titlefont","title.font")):Ee.indexOf("titleposition")>-1?Oe(Ee,Ee.replace("titleposition","title.position")):Ee.indexOf("titleside")>-1?Oe(Ee,Ee.replace("titleside","title.side")):Ee.indexOf("titleoffset")>-1&&Oe(Ee,Ee.replace("titleoffset","title.offset")):Oe(Ee,Ee.replace("title","title.text"));function Oe(ze,Pe){ke[Pe]=ke[ze],delete ke[ze]}}function K(ke,Me,Ee){ke=T.getGraphDiv(ke),m.clearPromiseQueue(ke);var De={};if(typeof Me=="string")De[Me]=Ee;else{if(!T.isPlainObject(Me))return T.warn("Relayout fail.",Me,Ee),Promise.reject();De=T.extendFlat({},Me)}Object.keys(De).length&&(ke.changed=!0);var fe=ie(ke,De),xe=fe.flags;xe.calc&&(ke.calcdata=void 0);var we=[n.previousPromises];xe.layoutReplot?we.push(y.layoutReplot):Object.keys(De).length&&(X(ke,xe,fe)||n.supplyDefaults(ke),xe.legend&&we.push(y.doLegend),xe.layoutstyle&&we.push(y.layoutStyles),xe.axrange&&Z(we,fe.rangesAltered),xe.ticks&&we.push(y.doTicksRelayout),xe.modebar&&we.push(y.doModeBar),xe.camera&&we.push(y.doCamera),xe.colorbars&&we.push(y.doColorBars),we.push(w)),we.push(n.rehover,n.redrag,n.reselect),s.add(ke,K,[ke,fe.undoit],K,[ke,fe.redoit]);var Oe=T.syncOrAsync(we,ke);return Oe&&Oe.then||(Oe=Promise.resolve(ke)),Oe.then(function(){return ke.emit("plotly_relayout",fe.eventData),ke})}function X(ke,Me,Ee){var De,fe,xe=ke._fullLayout;if(!Me.axrange)return!1;for(var we in Me)if(we!=="axrange"&&Me[we])return!1;var Oe=function(it,tt){return T.coerce(De,fe,l,it,tt)},ze={};for(var Pe in Ee.rangesAltered){var Ue=r.id2name(Pe);if(De=ke.layout[Ue],fe=xe[Ue],a(De,fe,Oe,ze),fe._matchGroup){for(var Ve in fe._matchGroup)if(Ve!==Pe){var Ze=xe[r.id2name(Ve)];Ze.autorange=fe.autorange,Ze.range=fe.range.slice(),Ze._input.range=fe.range.slice()}}}return!0}function Z(ke,Me){var Ee=Me?function(De){var fe=[];for(var xe in Me){var we=r.getFromId(De,xe);if(fe.push(xe),(we.ticklabelposition||"").indexOf("inside")!==-1&&we._anchorAxis&&fe.push(we._anchorAxis._id),we._matchGroup)for(var Oe in we._matchGroup)Me[Oe]||fe.push(Oe)}return r.draw(De,fe,{skipTitle:!0})}:function(De){return r.draw(De,"redraw")};ke.push(g,y.doAutoRangeAndConstraints,Ee,y.drawData,y.finalDraw)}var $=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,re=/^[xyz]axis[0-9]*\.autorange$/,oe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ie(ke,Me){var Ee,De,fe,xe=ke.layout,we=ke._fullLayout,Oe=we._guiEditing,ze=U(we._preGUI,Oe),Pe=Object.keys(Me),Ue=r.list(ke),Ve=T.extendDeepAll({},Me),Ze={};for(J(Me),Pe=Object.keys(Me),De=0;De<Pe.length;De++)if(Pe[De].indexOf("allaxes")===0){for(fe=0;fe<Ue.length;fe++){var it=Ue[fe]._id.substr(1),tt=it.indexOf("scene")!==-1?it+".":"",dt=Pe[De].replace("allaxes",tt+Ue[fe]._name);Me[dt]||(Me[dt]=Me[Pe[De]])}delete Me[Pe[De]]}var yt=_.layoutFlags(),vt={},et={};function Qe(hn,Xt){if(Array.isArray(hn))hn.forEach(function(nn){Qe(nn,Xt)});else if(!(hn in Me)&&!m.hasParent(Me,hn)){var ln=ze(xe,hn);hn in et||(et[hn]=F(ln.get())),Xt!==void 0&&ln.set(Xt)}}var wt,It={};function Dt(hn){var Xt=r.name2id(hn.split(".")[0]);return It[Xt]=1,Xt}for(var Ct in Me){if(m.hasParent(Me,Ct))throw new Error("cannot set "+Ct+" and a parent attribute simultaneously");for(var He=ze(xe,Ct),We=Me[Ct],Be=He.parts.length-1;Be>0&&typeof He.parts[Be]!="string";)Be--;var Ge=He.parts[Be],at=He.parts[Be-1]+"."+Ge,nt=He.parts.slice(0,Be).join("."),Re=b(ke.layout,nt).get(),Fe=b(we,nt).get(),rt=He.get();if(We!==void 0){vt[Ct]=We,et[Ct]=Ge==="reverse"?We:F(rt);var Ye=i.getLayoutValObject(we,He.parts);if(Ye&&Ye.impliedEdits&&We!==null)for(var ct in Ye.impliedEdits)Qe(T.relativeAttr(Ct,ct),Ye.impliedEdits[ct]);if(["width","height"].indexOf(Ct)!==-1)if(We){Qe("autosize",null);var pt=Ct==="height"?"width":"height";Qe(pt,we[pt])}else we[Ct]=ke._initialAutoSize[Ct];else if(Ct==="autosize")Qe("width",We?null:we.width),Qe("height",We?null:we.height);else if(at.match($))Dt(at),b(we,nt+"._inputRange").set(null);else if(at.match(re)){Dt(at),b(we,nt+"._inputRange").set(null);var gt=b(we,nt).get();gt._inputDomain&&(gt._input.domain=gt._inputDomain.slice())}else at.match(oe)&&b(we,nt+"._inputDomain").set(null);if(Ge==="type"){wt=Re;var ut=Fe.type==="linear"&&We==="log",Mt=Fe.type==="log"&&We==="linear";if(ut||Mt){if(wt&&wt.range)if(Fe.autorange)ut&&(wt.range=wt.range[1]>wt.range[0]?[1,2]:[2,1]);else{var xt=wt.range[0],mt=wt.range[1];ut?(xt<=0&&mt<=0&&Qe(nt+".autorange",!0),xt<=0?xt=mt/1e6:mt<=0&&(mt=xt/1e6),Qe(nt+".range[0]",Math.log(xt)/Math.LN10),Qe(nt+".range[1]",Math.log(mt)/Math.LN10)):(Qe(nt+".range[0]",Math.pow(10,xt)),Qe(nt+".range[1]",Math.pow(10,mt)))}else Qe(nt+".autorange",!0);Array.isArray(we._subplots.polar)&&we._subplots.polar.length&&we[He.parts[0]]&&He.parts[1]==="radialaxis"&&delete we[He.parts[0]]._subplot.viewInitial["radialaxis.range"],t.getComponentMethod("annotations","convertCoords")(ke,Fe,We,Qe),t.getComponentMethod("images","convertCoords")(ke,Fe,We,Qe)}else Qe(nt+".autorange",!0),Qe(nt+".range",null);b(we,nt+"._inputRange").set(null)}else if(Ge.match(f)){var Et=b(we,Ct).get(),Lt=(We||{}).type;Lt&&Lt!=="-"||(Lt="linear"),t.getComponentMethod("annotations","convertCoords")(ke,Et,Lt,Qe),t.getComponentMethod("images","convertCoords")(ke,Et,Lt,Qe)}var zt=v.containerArrayMatch(Ct);if(zt){Ee=zt.array,De=zt.index;var Wt=zt.property,rn=Ye||{editType:"calc"};De!==""&&Wt===""&&(v.isAddVal(We)?et[Ct]=null:v.isRemoveVal(We)?et[Ct]=(b(xe,Ee).get()||[])[De]:T.warn("unrecognized full object value",Me)),_.update(yt,rn),Ze[Ee]||(Ze[Ee]={});var Ut=Ze[Ee][De];Ut||(Ut=Ze[Ee][De]={}),Ut[Wt]=We,delete Me[Ct]}else Ge==="reverse"?(Re.range?Re.range.reverse():(Qe(nt+".autorange",!0),Re.range=[1,0]),Fe.autorange?yt.calc=!0:yt.plot=!0):(Ct==="dragmode"&&(We===!1&&rt!==!1||We!==!1&&rt===!1)||we._has("scatter-like")&&we._has("regl")&&Ct==="dragmode"&&(We==="lasso"||We==="select")&&rt!=="lasso"&&rt!=="select"||we._has("gl2d")?yt.plot=!0:Ye?_.update(yt,Ye):yt.calc=!0,He.set(We))}}for(Ee in Ze)v.applyContainerArrayChanges(ke,ze(xe,Ee),Ze[Ee],yt,ze)||(yt.plot=!0);for(var Vt in It){var en=(wt=r.getFromId(ke,Vt))&&wt._constraintGroup;if(en)for(var Ln in yt.calc=!0,en)It[Ln]||(r.getFromId(ke,Ln)._constraintShrinkable=!0)}(ue(ke)||Me.height||Me.width)&&(yt.plot=!0);var An=we.shapes;for(De=0;De<An.length;De++)if(An[De].showlegend){yt.calc=!0;break}return(yt.plot||yt.calc)&&(yt.layoutReplot=!0),{flags:yt,rangesAltered:It,undoit:et,redoit:vt,eventData:Ve}}function ue(ke){var Me=ke._fullLayout,Ee=Me.width,De=Me.height;return ke.layout.autosize&&n.plotAutoSize(ke,ke.layout,Me),Me.width!==Ee||Me.height!==De}function me(ke,Me,Ee,De){ke=T.getGraphDiv(ke),m.clearPromiseQueue(ke),T.isPlainObject(Me)||(Me={}),T.isPlainObject(Ee)||(Ee={}),Object.keys(Me).length&&(ke.changed=!0),Object.keys(Ee).length&&(ke.changed=!0);var fe=m.coerceTraceIndices(ke,De),xe=te(ke,T.extendFlat({},Me),fe),we=xe.flags,Oe=ie(ke,T.extendFlat({},Ee)),ze=Oe.flags;(we.calc||ze.calc)&&(ke.calcdata=void 0),we.clearAxisTypes&&m.clearAxisTypes(ke,fe,Ee);var Pe=[];ze.layoutReplot?Pe.push(y.layoutReplot):we.fullReplot?Pe.push(z._doPlot):(Pe.push(n.previousPromises),X(ke,ze,Oe)||n.supplyDefaults(ke),we.style&&Pe.push(y.doTraceStyle),(we.colorbars||ze.colorbars)&&Pe.push(y.doColorBars),ze.legend&&Pe.push(y.doLegend),ze.layoutstyle&&Pe.push(y.layoutStyles),ze.axrange&&Z(Pe,Oe.rangesAltered),ze.ticks&&Pe.push(y.doTicksRelayout),ze.modebar&&Pe.push(y.doModeBar),ze.camera&&Pe.push(y.doCamera),Pe.push(w)),Pe.push(n.rehover,n.redrag,n.reselect),s.add(ke,me,[ke,xe.undoit,Oe.undoit,xe.traces],me,[ke,xe.redoit,Oe.redoit,xe.traces]);var Ue=T.syncOrAsync(Pe,ke);return Ue&&Ue.then||(Ue=Promise.resolve(ke)),Ue.then(function(){return ke.emit("plotly_update",{data:xe.eventData,layout:Oe.eventData}),ke})}function be(ke){return function(Me){Me._fullLayout._guiEditing=!0;var Ee=ke.apply(null,arguments);return Me._fullLayout._guiEditing=!1,Ee}}var ge=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],de=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ve(ke,Me){for(var Ee=0;Ee<Me.length;Ee++){var De=Me[Ee],fe=ke.match(De.pattern);if(fe){var xe=fe[1]||"";return{head:xe,tail:ke.substr(xe.length+1),attr:De.attr}}}}function pe(ke,Me){var Ee=b(Me,ke).get();if(Ee!==void 0)return Ee;var De=ke.split(".");for(De.pop();De.length>1;)if(De.pop(),(Ee=b(Me,De.join(".")+".uirevision").get())!==void 0)return Ee;return Me.uirevision}function _e(ke,Me){for(var Ee=0;Ee<Me.length;Ee++)if(Me[Ee]._fullInput.uid===ke)return Ee;return-1}function Te(ke,Me,Ee){for(var De=0;De<Me.length;De++)if(Me[De].uid===ke)return De;return!Me[Ee]||Me[Ee].uid?-1:Ee}function le(ke,Me){var Ee=T.isPlainObject(ke),De=Array.isArray(ke);return Ee||De?(Ee&&T.isPlainObject(Me)||De&&Array.isArray(Me))&&JSON.stringify(ke)===JSON.stringify(Me):ke===Me}function ae(ke,Me,Ee,De){var fe,xe,we,Oe=De.getValObject,ze=De.flags,Pe=De.immutable,Ue=De.inArray,Ve=De.arrayIndex;function Ze(){var Re=fe.editType;Ue&&Re.indexOf("arraydraw")!==-1?T.pushUnique(ze.arrays[Ue],Ve):(_.update(ze,fe),Re!=="none"&&ze.nChanges++,De.transition&&fe.anim&&ze.nChangesAnim++,($.test(we)||re.test(we))&&(ze.rangesAltered[Ee[0]]=1),oe.test(we)&&b(Me,"_inputDomain").set(null),xe==="datarevision"&&(ze.newDataRevision=1))}function it(Re){return Re.valType==="data_array"||Re.arrayOk}for(xe in ke){if(ze.calc&&!De.transition)return;var tt=ke[xe],dt=Me[xe],yt=Ee.concat(xe);if(we=yt.join("."),xe.charAt(0)!=="_"&&typeof tt!="function"&&tt!==dt){if((xe==="tick0"||xe==="dtick")&&Ee[0]!=="geo"){var vt=Me.tickmode;if(vt==="auto"||vt==="array"||!vt)continue}if((xe!=="range"||!Me.autorange)&&(xe!=="zmin"&&xe!=="zmax"||Me.type!=="contourcarpet")&&(fe=Oe(yt))&&(!fe._compareAsJSON||JSON.stringify(tt)!==JSON.stringify(dt))){var et,Qe=fe.valType,wt=it(fe),It=Array.isArray(tt),Dt=Array.isArray(dt);if(It&&Dt){var Ct="_input_"+xe,He=ke[Ct],We=Me[Ct];if(Array.isArray(He)&&He===We)continue}if(dt===void 0)wt&&It?ze.calc=!0:Ze();else if(fe._isLinkedToArray){var Be=[],Ge=!1;Ue||(ze.arrays[xe]=Be);var at=Math.min(tt.length,dt.length),nt=Math.max(tt.length,dt.length);if(at!==nt){if(fe.editType!=="arraydraw"){Ze();continue}Ge=!0}for(et=0;et<at;et++)ae(tt[et],dt[et],yt.concat(et),T.extendFlat({inArray:xe,arrayIndex:et},De));if(Ge)for(et=at;et<nt;et++)Be.push(et)}else!Qe&&T.isPlainObject(tt)?ae(tt,dt,yt,De):wt?It&&Dt?(Pe&&(ze.calc=!0),(Pe||De.newDataRevision)&&Ze()):It!==Dt?ze.calc=!0:Ze():It&&Dt&&tt.length===dt.length&&String(tt)===String(dt)||Ze()}}}for(xe in Me)if(!(xe in ke)&&xe.charAt(0)!=="_"&&typeof Me[xe]!="function"){if(it(fe=Oe(Ee.concat(xe)))&&Array.isArray(Me[xe]))return void(ze.calc=!0);Ze()}}function he(ke,Me){var Ee;for(Ee in ke)if(Ee.charAt(0)!=="_"){var De=ke[Ee],fe=Me[Ee];if(De!==fe)if(T.isPlainObject(De)&&T.isPlainObject(fe)){if(he(De,fe))return!0}else{if(!Array.isArray(De)||!Array.isArray(fe)||De.length!==fe.length)return!0;for(var xe=0;xe<De.length;xe++)if(De[xe]!==fe[xe]&&(!T.isPlainObject(De[xe])||!T.isPlainObject(fe[xe])||he(De[xe],fe[xe])))return!0}}}function Se(ke){var Me=ke._fullLayout,Ee=ke.getBoundingClientRect();if(!T.equalDomRects(Ee,Me._lastBBox)){var De=Me._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(ke));Me._invScaleX=Math.sqrt(De[0][0]*De[0][0]+De[0][1]*De[0][1]+De[0][2]*De[0][2]),Me._invScaleY=Math.sqrt(De[1][0]*De[1][0]+De[1][1]*De[1][1]+De[1][2]*De[1][2]),Me._lastBBox=Ee}}z.animate=function(ke,Me,Ee){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var De=ke._transitionData;De._frameQueue||(De._frameQueue=[]);var fe=(Ee=n.supplyAnimationDefaults(Ee)).transition,xe=Ee.frame;function we(Pe){return Array.isArray(fe)?Pe>=fe.length?fe[0]:fe[Pe]:fe}function Oe(Pe){return Array.isArray(xe)?Pe>=xe.length?xe[0]:xe[Pe]:xe}function ze(Pe,Ue){var Ve=0;return function(){if(Pe&&++Ve===Ue)return Pe()}}return De._frameWaitingCnt===void 0&&(De._frameWaitingCnt=0),new Promise(function(Pe,Ue){function Ve(){ke.emit("plotly_animating"),De._lastFrameAt=-1/0,De._timeToNext=0,De._runningTransitions=0,De._currentFrame=null;var Ct=function(){De._animationRaf=window.requestAnimationFrame(Ct),Date.now()-De._lastFrameAt>De._timeToNext&&function(){De._currentFrame&&De._currentFrame.onComplete&&De._currentFrame.onComplete();var He=De._currentFrame=De._frameQueue.shift();if(He){var We=He.name?He.name.toString():null;ke._fullLayout._currentFrame=We,De._lastFrameAt=Date.now(),De._timeToNext=He.frameOpts.duration,n.transition(ke,He.frame.data,He.frame.layout,m.coerceTraceIndices(ke,He.frame.traces),He.frameOpts,He.transitionOpts).then(function(){He.onComplete&&He.onComplete()}),ke.emit("plotly_animatingframe",{name:We,frame:He.frame,animation:{frame:He.frameOpts,transition:He.transitionOpts}})}else ke.emit("plotly_animated"),window.cancelAnimationFrame(De._animationRaf),De._animationRaf=null}()};Ct()}var Ze,it,tt=0;function dt(Ct){return Array.isArray(fe)?tt>=fe.length?Ct.transitionOpts=fe[tt]:Ct.transitionOpts=fe[0]:Ct.transitionOpts=fe,tt++,Ct}var yt=[],vt=Me==null,et=Array.isArray(Me);if(vt||et||!T.isPlainObject(Me)){if(vt||["string","number"].indexOf(typeof Me)!==-1)for(Ze=0;Ze<De._frames.length;Ze++)(it=De._frames[Ze])&&(vt||String(it.group)===String(Me))&&yt.push({type:"byname",name:String(it.name),data:dt({name:it.name})});else if(et)for(Ze=0;Ze<Me.length;Ze++){var Qe=Me[Ze];["number","string"].indexOf(typeof Qe)!==-1?(Qe=String(Qe),yt.push({type:"byname",name:Qe,data:dt({name:Qe})})):T.isPlainObject(Qe)&&yt.push({type:"object",data:dt(T.extendFlat({},Qe))})}}else yt.push({type:"object",data:dt(T.extendFlat({},Me))});for(Ze=0;Ze<yt.length;Ze++)if((it=yt[Ze]).type==="byname"&&!De._frameHash[it.data.name])return T.warn('animate failure: frame not found: "'+it.data.name+'"'),void Ue();["next","immediate"].indexOf(Ee.mode)!==-1&&function(){if(De._frameQueue.length!==0){for(;De._frameQueue.length;){var Ct=De._frameQueue.pop();Ct.onInterrupt&&Ct.onInterrupt()}ke.emit("plotly_animationinterrupted",[])}}(),Ee.direction==="reverse"&&yt.reverse();var wt=ke._fullLayout._currentFrame;if(wt&&Ee.fromcurrent){var It=-1;for(Ze=0;Ze<yt.length;Ze++)if((it=yt[Ze]).type==="byname"&&it.name===wt){It=Ze;break}if(It>0&&It<yt.length-1){var Dt=[];for(Ze=0;Ze<yt.length;Ze++)it=yt[Ze],(yt[Ze].type!=="byname"||Ze>It)&&Dt.push(it);yt=Dt}}yt.length>0?function(Ct){if(Ct.length!==0){for(var He=0;He<Ct.length;He++){var We;We=Ct[He].type==="byname"?n.computeFrame(ke,Ct[He].name):Ct[He].data;var Be=Oe(He),Ge=we(He);Ge.duration=Math.min(Ge.duration,Be.duration);var at={frame:We,name:Ct[He].name,frameOpts:Be,transitionOpts:Ge};He===Ct.length-1&&(at.onComplete=ze(Pe,2),at.onInterrupt=Ue),De._frameQueue.push(at)}Ee.mode==="immediate"&&(De._lastFrameAt=-1/0),De._animationRaf||Ve()}}(yt):(ke.emit("plotly_animated"),Pe())})},z.addFrames=function(ke,Me,Ee){if(ke=T.getGraphDiv(ke),Me==null)return Promise.resolve();if(!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var De,fe,xe,we,Oe=ke._transitionData._frames,ze=ke._transitionData._frameHash;if(!Array.isArray(Me))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Me);var Pe=Oe.length+2*Me.length,Ue=[],Ve={};for(De=Me.length-1;De>=0;De--)if(T.isPlainObject(Me[De])){var Ze=Me[De].name,it=(ze[Ze]||Ve[Ze]||{}).name,tt=Me[De].name,dt=ze[it]||Ve[it];it&&tt&&typeof tt=="number"&&dt&&S<5&&(S++,T.warn('addFrames: overwriting frame "'+(ze[it]||Ve[it]).name+'" with a frame whose name of type "number" also equates to "'+it+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),S===5&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ve[Ze]={name:Ze},Ue.push({frame:n.supplyFrameDefaults(Me[De]),index:Ee&&Ee[De]!==void 0&&Ee[De]!==null?Ee[De]:Pe+De})}Ue.sort(function(Ct,He){return Ct.index>He.index?-1:Ct.index<He.index?1:0});var yt=[],vt=[],et=Oe.length;for(De=Ue.length-1;De>=0;De--){if(typeof(fe=Ue[De].frame).name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!fe.name)for(;ze[fe.name="frame "+ke._transitionData._counter++];);if(ze[fe.name]){for(xe=0;xe<Oe.length&&(Oe[xe]||{}).name!==fe.name;xe++);yt.push({type:"replace",index:xe,value:fe}),vt.unshift({type:"replace",index:xe,value:Oe[xe]})}else we=Math.max(0,Math.min(Ue[De].index,et)),yt.push({type:"insert",index:we,value:fe}),vt.unshift({type:"delete",index:we}),et++}var Qe=n.modifyFrames,wt=n.modifyFrames,It=[ke,vt],Dt=[ke,yt];return s&&s.add(ke,Qe,It,wt,Dt),n.modifyFrames(ke,yt)},z.deleteFrames=function(ke,Me){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);var Ee,De,fe=ke._transitionData._frames,xe=[],we=[];if(!Me)for(Me=[],Ee=0;Ee<fe.length;Ee++)Me.push(Ee);for((Me=Me.slice()).sort(),Ee=Me.length-1;Ee>=0;Ee--)De=Me[Ee],xe.push({type:"delete",index:De}),we.unshift({type:"insert",index:De,value:fe[De]});var Oe=n.modifyFrames,ze=n.modifyFrames,Pe=[ke,we],Ue=[ke,xe];return s&&s.add(ke,Oe,Pe,ze,Ue),n.modifyFrames(ke,xe)},z.addTraces=function ke(Me,Ee,De){Me=T.getGraphDiv(Me);var fe,xe,we=[],Oe=z.deleteTraces,ze=ke,Pe=[Me,we],Ue=[Me,Ee];for(function(Ve,Ze,it){var tt,dt;if(!Array.isArray(Ve.data))throw new Error("gd.data must be an array.");if(Ze===void 0)throw new Error("traces must be defined.");for(Array.isArray(Ze)||(Ze=[Ze]),tt=0;tt<Ze.length;tt++)if(typeof(dt=Ze[tt])!="object"||Array.isArray(dt)||dt===null)throw new Error("all values in traces array must be non-array objects");if(it===void 0||Array.isArray(it)||(it=[it]),it!==void 0&&it.length!==Ze.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Me,Ee,De),Array.isArray(Ee)||(Ee=[Ee]),Ee=Ee.map(function(Ve){return T.extendFlat({},Ve)}),m.cleanData(Ee),fe=0;fe<Ee.length;fe++)Me.data.push(Ee[fe]);for(fe=0;fe<Ee.length;fe++)we.push(-Ee.length+fe);if(De===void 0)return xe=z.redraw(Me),s.add(Me,Oe,Pe,ze,Ue),xe;Array.isArray(De)||(De=[De]);try{j(Me,we,De)}catch(Ve){throw Me.data.splice(Me.data.length-Ee.length,Ee.length),Ve}return s.startSequence(Me),s.add(Me,Oe,Pe,ze,Ue),xe=z.moveTraces(Me,we,De),s.stopSequence(Me),xe},z.deleteTraces=function ke(Me,Ee){Me=T.getGraphDiv(Me);var De,fe,xe=[],we=z.addTraces,Oe=ke,ze=[Me,xe,Ee],Pe=[Me,Ee];if(Ee===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ee)||(Ee=[Ee]),R(Me,Ee,"indices"),(Ee=O(Ee,Me.data.length-1)).sort(T.sorterDes),De=0;De<Ee.length;De+=1)fe=Me.data.splice(Ee[De],1)[0],xe.push(fe);var Ue=z.redraw(Me);return s.add(Me,we,ze,Oe,Pe),Ue},z.extendTraces=function ke(Me,Ee,De,fe){var xe=D(Me=T.getGraphDiv(Me),Ee,De,fe,function(ze,Pe,Ue){var Ve,Ze;if(T.isTypedArray(ze))if(Ue<0){var it=new ze.constructor(0),tt=N(ze,Pe);Ue<0?(Ve=tt,Ze=it):(Ve=it,Ze=tt)}else if(Ve=new ze.constructor(Ue),Ze=new ze.constructor(ze.length+Pe.length-Ue),Ue===Pe.length)Ve.set(Pe),Ze.set(ze);else if(Ue<Pe.length){var dt=Pe.length-Ue;Ve.set(Pe.subarray(dt)),Ze.set(ze),Ze.set(Pe.subarray(0,dt),ze.length)}else{var yt=Ue-Pe.length,vt=ze.length-yt;Ve.set(ze.subarray(vt)),Ve.set(Pe,yt),Ze.set(ze.subarray(0,vt))}else Ve=ze.concat(Pe),Ze=Ue>=0&&Ue<Ve.length?Ve.splice(0,Ve.length-Ue):[];return[Ve,Ze]}),we=z.redraw(Me),Oe=[Me,xe.update,De,xe.maxPoints];return s.add(Me,z.prependTraces,Oe,ke,arguments),we},z.moveTraces=function ke(Me,Ee,De){var fe,xe=[],we=[],Oe=ke,ze=ke,Pe=[Me=T.getGraphDiv(Me),De,Ee],Ue=[Me,Ee,De];if(j(Me,Ee,De),Ee=Array.isArray(Ee)?Ee:[Ee],De===void 0)for(De=[],fe=0;fe<Ee.length;fe++)De.push(-Ee.length+fe);for(De=Array.isArray(De)?De:[De],Ee=O(Ee,Me.data.length-1),De=O(De,Me.data.length-1),fe=0;fe<Me.data.length;fe++)Ee.indexOf(fe)===-1&&xe.push(Me.data[fe]);for(fe=0;fe<Ee.length;fe++)we.push({newIndex:De[fe],trace:Me.data[Ee[fe]]});for(we.sort(function(Ze,it){return Ze.newIndex-it.newIndex}),fe=0;fe<we.length;fe+=1)xe.splice(we[fe].newIndex,0,we[fe].trace);Me.data=xe;var Ve=z.redraw(Me);return s.add(Me,Oe,Pe,ze,Ue),Ve},z.prependTraces=function ke(Me,Ee,De,fe){var xe=D(Me=T.getGraphDiv(Me),Ee,De,fe,function(ze,Pe,Ue){var Ve,Ze;if(T.isTypedArray(ze))if(Ue<=0){var it=new ze.constructor(0),tt=N(Pe,ze);Ue<0?(Ve=tt,Ze=it):(Ve=it,Ze=tt)}else if(Ve=new ze.constructor(Ue),Ze=new ze.constructor(ze.length+Pe.length-Ue),Ue===Pe.length)Ve.set(Pe),Ze.set(ze);else if(Ue<Pe.length){var dt=Pe.length-Ue;Ve.set(Pe.subarray(0,dt)),Ze.set(Pe.subarray(dt)),Ze.set(ze,dt)}else{var yt=Ue-Pe.length;Ve.set(Pe),Ve.set(ze.subarray(0,yt),Pe.length),Ze.set(ze.subarray(yt))}else Ve=Pe.concat(ze),Ze=Ue>=0&&Ue<Ve.length?Ve.splice(Ue,Ve.length):[];return[Ve,Ze]}),we=z.redraw(Me),Oe=[Me,xe.update,De,xe.maxPoints];return s.add(Me,z.extendTraces,Oe,ke,arguments),we},z.newPlot=function(ke,Me,Ee,De){return ke=T.getGraphDiv(ke),n.cleanPlot([],{},ke._fullData||[],ke._fullLayout||{}),n.purge(ke),z._doPlot(ke,Me,Ee,De)},z._doPlot=function(ke,Me,Ee,De){var fe;if(ke=T.getGraphDiv(ke),h.init(ke),T.isPlainObject(Me)){var xe=Me;Me=xe.data,Ee=xe.layout,De=xe.config,fe=xe.frames}if(h.triggerHandler(ke,"plotly_beforeplot",[Me,Ee,De])===!1)return Promise.reject();Me||Ee||T.isPlotDiv(ke)||T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ke),C(ke,De),Ee||(Ee={}),M.select(ke).classed("js-plotly-plot",!0),u.makeTester(),Array.isArray(ke._promises)||(ke._promises=[]);var we=(ke.data||[]).length===0&&Array.isArray(Me);Array.isArray(Me)&&(m.cleanData(Me),we?ke.data=Me:ke.data.push.apply(ke.data,Me),ke.empty=!1),ke.layout&&!we||(ke.layout=m.cleanLayout(Ee)),n.supplyDefaults(ke);var Oe=ke._fullLayout,ze=Oe._has("cartesian");Oe._replotting=!0,(we||Oe._shouldCreateBgLayer)&&(function(vt){var et=M.select(vt),Qe=vt._fullLayout;if(Qe._calcInverseTransform=Se,Qe._calcInverseTransform(vt),Qe._container=et.selectAll(".plot-container").data([0]),Qe._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Qe._paperdiv=Qe._container.selectAll(".svg-container").data([0]),Qe._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Qe._glcontainer=Qe._paperdiv.selectAll(".gl-container").data([{}]),Qe._glcontainer.enter().append("div").classed("gl-container",!0),Qe._paperdiv.selectAll(".main-svg").remove(),Qe._paperdiv.select(".modebar-container").remove(),Qe._paper=Qe._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Qe._toppaper=Qe._paperdiv.append("svg").classed("main-svg",!0),Qe._modebardiv=Qe._paperdiv.append("div"),delete Qe._modeBar,Qe._hoverpaper=Qe._paperdiv.append("svg").classed("main-svg",!0),!Qe._uid){var wt={};M.selectAll("defs").each(function(){this.id&&(wt[this.id.split("-")[1]]=1)}),Qe._uid=T.randstr(wt)}Qe._paperdiv.selectAll(".main-svg").attr(x.svgAttrs),Qe._defs=Qe._paper.append("defs").attr("id","defs-"+Qe._uid),Qe._clips=Qe._defs.append("g").classed("clips",!0),Qe._topdefs=Qe._toppaper.append("defs").attr("id","topdefs-"+Qe._uid),Qe._topclips=Qe._topdefs.append("g").classed("clips",!0),Qe._bgLayer=Qe._paper.append("g").classed("bglayer",!0),Qe._draggers=Qe._paper.append("g").classed("draglayer",!0);var It=Qe._paper.append("g").classed("layer-below",!0);Qe._imageLowerLayer=It.append("g").classed("imagelayer",!0),Qe._shapeLowerLayer=It.append("g").classed("shapelayer",!0),Qe._cartesianlayer=Qe._paper.append("g").classed("cartesianlayer",!0),Qe._polarlayer=Qe._paper.append("g").classed("polarlayer",!0),Qe._smithlayer=Qe._paper.append("g").classed("smithlayer",!0),Qe._ternarylayer=Qe._paper.append("g").classed("ternarylayer",!0),Qe._geolayer=Qe._paper.append("g").classed("geolayer",!0),Qe._funnelarealayer=Qe._paper.append("g").classed("funnelarealayer",!0),Qe._pielayer=Qe._paper.append("g").classed("pielayer",!0),Qe._iciclelayer=Qe._paper.append("g").classed("iciclelayer",!0),Qe._treemaplayer=Qe._paper.append("g").classed("treemaplayer",!0),Qe._sunburstlayer=Qe._paper.append("g").classed("sunburstlayer",!0),Qe._indicatorlayer=Qe._toppaper.append("g").classed("indicatorlayer",!0),Qe._glimages=Qe._paper.append("g").classed("glimages",!0);var Dt=Qe._toppaper.append("g").classed("layer-above",!0);Qe._imageUpperLayer=Dt.append("g").classed("imagelayer",!0),Qe._shapeUpperLayer=Dt.append("g").classed("shapelayer",!0),Qe._selectionLayer=Qe._toppaper.append("g").classed("selectionlayer",!0),Qe._infolayer=Qe._toppaper.append("g").classed("infolayer",!0),Qe._menulayer=Qe._toppaper.append("g").classed("menulayer",!0),Qe._zoomlayer=Qe._toppaper.append("g").classed("zoomlayer",!0),Qe._hoverlayer=Qe._hoverpaper.append("g").classed("hoverlayer",!0),Qe._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),vt.emit("plotly_framework")}(ke),Oe._shouldCreateBgLayer&&delete Oe._shouldCreateBgLayer),u.initGradients(ke),u.initPatterns(ke),we&&r.saveShowSpikeInitial(ke);var Pe=!ke.calcdata||ke.calcdata.length!==(ke._fullData||[]).length;Pe&&n.doCalcdata(ke);for(var Ue=0;Ue<ke.calcdata.length;Ue++)ke.calcdata[Ue][0].trace=ke._fullData[Ue];ke._context.responsive?ke._responsiveChartHandler||(ke._responsiveChartHandler=function(){T.isHidden(ke)||n.resize(ke)},window.addEventListener("resize",ke._responsiveChartHandler)):T.clearResponsive(ke);var Ve=T.extendFlat({},Oe._size),Ze=0;function it(){if(n.clearAutoMarginIds(ke),y.drawMarginPushers(ke),r.allowAutoMargin(ke),ke._fullLayout.title.text&&ke._fullLayout.title.automargin&&n.allowAutoMargin(ke,"title.automargin"),Oe._has("pie"))for(var vt=ke._fullData,et=0;et<vt.length;et++){var Qe=vt[et];Qe.type==="pie"&&Qe.automargin&&n.allowAutoMargin(ke,"pie."+Qe.uid+".automargin")}return n.doAutoMargin(ke),n.previousPromises(ke)}function tt(){ke._transitioning||(y.doAutoRangeAndConstraints(ke),we&&r.saveRangeInitial(ke),t.getComponentMethod("rangeslider","calcAutorange")(ke))}var dt=[n.previousPromises,function(){if(fe)return z.addFrames(ke,fe)},function vt(){for(var et=Oe._basePlotModules,Qe=0;Qe<et.length;Qe++)et[Qe].drawFramework&&et[Qe].drawFramework(ke);!Oe._glcanvas&&Oe._has("gl")&&(Oe._glcanvas=Oe._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Ct){return Ct.key}),Oe._glcanvas.enter().append("canvas").attr("class",function(Ct){return"gl-canvas gl-canvas-"+Ct.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var wt=ke._context.plotGlPixelRatio;if(Oe._glcanvas){Oe._glcanvas.attr("width",Oe.width*wt).attr("height",Oe.height*wt).style("width",Oe.width+"px").style("height",Oe.height+"px");var It=Oe._glcanvas.data()[0].regl;if(It&&(Math.floor(Oe.width*wt)!==It._gl.drawingBufferWidth||Math.floor(Oe.height*wt)!==It._gl.drawingBufferHeight)){var Dt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ze)return T.log(Dt+" Clearing graph and plotting again."),n.cleanPlot([],{},ke._fullData,Oe),n.supplyDefaults(ke),Oe=ke._fullLayout,n.doCalcdata(ke),Ze++,vt();T.error(Dt)}}return Oe.modebar.orientation==="h"?Oe._modebardiv.style("height",null).style("width","100%"):Oe._modebardiv.style("width",null).style("height",Oe.height+"px"),n.previousPromises(ke)},it,function(){if(n.didMarginChange(Ve,Oe._size))return T.syncOrAsync([it,y.layoutStyles],ke)}];ze&&dt.push(function(){if(Pe)return T.syncOrAsync([t.getComponentMethod("shapes","calcAutorange"),t.getComponentMethod("annotations","calcAutorange"),tt],ke);tt()}),dt.push(y.layoutStyles),ze&&dt.push(function(){return r.draw(ke,we?"":"redraw")},function(vt){var et=vt._fullLayout._insideTickLabelsUpdaterange;if(et)return vt._fullLayout._insideTickLabelsUpdaterange=void 0,K(vt,et).then(function(){r.saveRangeInitial(vt,!0)})}),dt.push(y.drawData,y.finalDraw,c,n.addLinks,n.rehover,n.redrag,n.reselect,n.doAutoMargin,n.previousPromises);var yt=T.syncOrAsync(dt,ke);return yt&&yt.then||(yt=Promise.resolve()),yt.then(function(){return w(ke),ke})},z.purge=function(ke){var Me=(ke=T.getGraphDiv(ke))._fullLayout||{},Ee=ke._fullData||[];return n.cleanPlot([],{},Ee,Me),n.purge(ke),h.purge(ke),Me._container&&Me._container.remove(),delete ke._context,ke},z.react=function(ke,Me,Ee,De){var fe,xe;ke=T.getGraphDiv(ke),m.clearPromiseQueue(ke);var we=ke._fullData,Oe=ke._fullLayout;if(T.isPlotDiv(ke)&&we&&Oe){if(T.isPlainObject(Me)){var ze=Me;Me=ze.data,Ee=ze.layout,De=ze.config,fe=ze.frames}var Pe=!1;if(De){var Ue=T.extendDeep({},ke._context);ke._context=void 0,C(ke,De),Pe=he(Ue,ke._context)}ke.data=Me||[],m.cleanData(ke.data),ke.layout=Ee||{},m.cleanLayout(ke.layout),function(nt,Re,Fe,rt){var Ye,ct,pt,gt,ut,Mt,xt,mt,Et,Lt,zt=rt._preGUI,Wt=[],rn={},Ut={};for(Ye in zt){if(ut=ve(Ye,ge)){if(Et=ut.head,Lt=ut.tail,ct=ut.attr||Et+".uirevision",(gt=(pt=b(rt,ct).get())&&pe(ct,Re))&&gt===pt){if((Mt=zt[Ye])===null&&(Mt=void 0),le(mt=(xt=b(Re,Ye)).get(),Mt)){mt===void 0&&Lt==="autorange"&&Wt.push(Et),xt.set(F(b(rt,Ye).get()));continue}if(Lt==="autorange"||Lt.substr(0,6)==="range["){var Vt=zt[Et+".range[0]"],en=zt[Et+".range[1]"],Ln=zt[Et+".autorange"];if(Ln||Ln===null&&Vt===null&&en===null){if(!(Et in rn)){var An=b(Re,Et).get();rn[Et]=An&&(An.autorange||An.autorange!==!1&&(!An.range||An.range.length!==2))}if(rn[Et]){xt.set(F(b(rt,Ye).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+Ye);delete zt[Ye],ut&&ut.tail.substr(0,6)==="range["&&(Ut[ut.head]=1)}for(var hn=0;hn<Wt.length;hn++){var Xt=Wt[hn];if(Ut[Xt]){var ln=b(Re,Xt).get();ln&&delete ln.autorange}}var nn=rt._tracePreGUI;for(var cn in nn){var Tn,Mn=nn[cn],zn=null;for(Ye in Mn){if(!zn){var In=_e(cn,Fe);if(In<0){delete nn[cn];break}var Pn=Te(cn,nt,(Tn=Fe[In]._fullInput).index);if(Pn<0){delete nn[cn];break}zn=nt[Pn]}if(ut=ve(Ye,de)){if(ut.attr?gt=(pt=b(rt,ut.attr).get())&&pe(ut.attr,Re):(pt=Tn.uirevision,(gt=zn.uirevision)===void 0&&(gt=Re.uirevision)),gt&&gt===pt&&((Mt=Mn[Ye])===null&&(Mt=void 0),le(mt=(xt=b(zn,Ye)).get(),Mt))){xt.set(F(b(Tn,Ye).get()));continue}}else T.warn("unrecognized GUI edit: "+Ye+" in trace uid "+cn);delete Mn[Ye]}}}(ke.data,ke.layout,we,Oe),n.supplyDefaults(ke,{skipUpdateCalc:!0});var Ve=ke._fullData,Ze=ke._fullLayout,it=Ze.datarevision===void 0,tt=Ze.transition,dt=function(nt,Re,Fe,rt,Ye){var ct=_.layoutFlags();return ct.arrays={},ct.rangesAltered={},ct.nChanges=0,ct.nChangesAnim=0,ae(Re,Fe,[],{getValObject:function(pt){return i.getLayoutValObject(Fe,pt)},flags:ct,immutable:rt,transition:Ye,gd:nt}),(ct.plot||ct.calc)&&(ct.layoutReplot=!0),Ye&&ct.nChanges&&ct.nChangesAnim&&(ct.anim=ct.nChanges===ct.nChangesAnim?"all":"some"),ct}(ke,Oe,Ze,it,tt),yt=dt.newDataRevision,vt=function(nt,Re,Fe,rt,Ye,ct){var pt=Re.length===Fe.length;if(!Ye&&!pt)return{fullReplot:!0,calc:!0};var gt,ut,Mt=_.traceFlags();Mt.arrays={},Mt.nChanges=0,Mt.nChangesAnim=0;var xt={getValObject:function(Et){var Lt=i.getTraceValObject(ut,Et);return!ut._module.animatable&&Lt.anim&&(Lt.anim=!1),Lt},flags:Mt,immutable:rt,transition:Ye,newDataRevision:ct,gd:nt},mt={};for(gt=0;gt<Re.length;gt++)if(Fe[gt]){if(ut=Fe[gt]._fullInput,n.hasMakesDataTransform(ut)&&(ut=Fe[gt]),mt[ut.uid])continue;mt[ut.uid]=1,ae(Re[gt]._fullInput,ut,[],xt)}return(Mt.calc||Mt.plot)&&(Mt.fullReplot=!0),Ye&&Mt.nChanges&&Mt.nChangesAnim&&(Mt.anim=Mt.nChanges===Mt.nChangesAnim&&pt?"all":"some"),Mt}(ke,we,Ve,it,tt,yt);if(ue(ke)&&(dt.layoutReplot=!0),vt.calc||dt.calc){ke.calcdata=void 0;for(var et=Object.getOwnPropertyNames(Ze),Qe=0;Qe<et.length;Qe++){var wt=et[Qe],It=wt.substring(0,5);if(It==="xaxis"||It==="yaxis"){var Dt=Ze[wt]._emptyCategories;Dt&&Dt()}}}else n.supplyDefaultsUpdateCalc(ke.calcdata,Ve);var Ct=[];if(fe&&(ke._transitionData={},n.createTransitionData(ke),Ct.push(function(){return z.addFrames(ke,fe)})),Ze.transition&&!Pe&&(vt.anim||dt.anim))dt.ticks&&Ct.push(y.doTicksRelayout),n.doCalcdata(ke),y.doAutoRangeAndConstraints(ke),Ct.push(function(){return n.transitionFromReact(ke,vt,dt,Oe)});else if(vt.fullReplot||dt.layoutReplot||Pe)ke._fullLayout._skipDefaults=!0,Ct.push(z._doPlot);else{for(var He in dt.arrays){var We=dt.arrays[He];if(We.length){var Be=t.getComponentMethod(He,"drawOne");if(Be!==T.noop)for(var Ge=0;Ge<We.length;Ge++)Be(ke,We[Ge]);else{var at=t.getComponentMethod(He,"draw");if(at===T.noop)throw new Error("cannot draw components: "+He);at(ke)}}}Ct.push(n.previousPromises),vt.style&&Ct.push(y.doTraceStyle),(vt.colorbars||dt.colorbars)&&Ct.push(y.doColorBars),dt.legend&&Ct.push(y.doLegend),dt.layoutstyle&&Ct.push(y.layoutStyles),dt.axrange&&Z(Ct),dt.ticks&&Ct.push(y.doTicksRelayout),dt.modebar&&Ct.push(y.doModeBar),dt.camera&&Ct.push(y.doCamera),Ct.push(w)}Ct.push(n.rehover,n.redrag,n.reselect),(xe=T.syncOrAsync(Ct,ke))&&xe.then||(xe=Promise.resolve(ke))}else xe=z.newPlot(ke,Me,Ee,De);return xe.then(function(){return ke.emit("plotly_react",{data:Me,layout:Ee}),ke})},z.redraw=function(ke){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);return m.cleanData(ke.data),m.cleanLayout(ke.layout),ke.calcdata=void 0,z._doPlot(ke).then(function(){return ke.emit("plotly_redraw"),ke})},z.relayout=K,z.restyle=W,z.setPlotConfig=function(ke){return T.extendFlat(p,ke)},z.update=me,z._guiRelayout=be(K),z._guiRestyle=be(W),z._guiUpdate=be(me),z._storeDirectGUIEdit=function(ke,Me,Ee){for(var De in Ee)V(De,b(ke,De).get(),Ee[De],Me)}},20556:function(ee){"use strict";var z={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},e={};(function M(k,o){for(var T in k){var b=k[T];b.valType?o[T]=b.dflt:(o[T]||(o[T]={}),M(b,o[T]))}})(z,e),ee.exports={configAttributes:z,dfltConfig:e}},73060:function(ee,z,e){"use strict";var M=e(24040),k=e(3400),o=e(45464),T=e(64859),b=e(16672),h=e(85656),s=e(20556).configAttributes,t=e(67824),i=k.extendDeepAll,n=k.isPlainObject,r=k.isArrayOrTypedArray,a=k.nestedProperty,l=k.valObjectMeta,u="_isSubplotObj",d="_isLinkedToArray",c="_deprecated",x=[u,d,"_arrayAttrRegexps",c];function g(f,S,w){if(!f)return!1;if(f._isLinkedToArray){if(p(S[w]))w++;else if(w<S.length)return!1}for(;w<S.length;w++){var E=f[S[w]];if(!n(E)||(f=E,w===S.length-1))break;if(f._isLinkedToArray){if(!p(S[++w]))return!1}else if(f.valType==="info_array"){var P=S[++w];if(!p(P))return!1;var C=f.items;if(Array.isArray(C)){if(P>=C.length)return!1;if(f.dimensions===2){if(w++,S.length===w)return f;var O=S[w];if(!p(O))return!1;f=C[P][O]}else f=C[P]}else f=C}}return f}function p(f){return f===Math.round(f)&&f>=0}function v(){var f,S,w={};for(f in i(w,T),M.subplotsRegistry)if((S=M.subplotsRegistry[f]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)y(w,S,S.attr[E]);else y(w,S,S.attr==="subplot"?S.name:S.attr);for(f in M.componentsRegistry){var P=(S=M.componentsRegistry[f]).schema;if(P&&(P.subplots||P.layout)){var C=P.subplots;if(C&&C.xaxis&&!C.yaxis)for(var O in C.xaxis)delete w.yaxis[O];delete w.xaxis.shift,delete w.xaxis.autoshift}else S.name==="colorscale"?i(w,S.layoutAttributes):S.layoutAttributes&&_(w,S.layoutAttributes,S.name)}return{layoutAttributes:m(w)}}function m(f){return function(S){z.crawl(S,function(w,E,P){z.isValObject(w)?w.arrayOk!==!0&&w.valType!=="data_array"||(P[E+"src"]={valType:"string",editType:"none"}):n(w)&&(w.role="object")})}(f),function(S){z.crawl(S,function(w,E,P){if(w){var C=w[d];C&&(delete w[d],P[E]={items:{}},P[E].items[C]=w,P[E].role="object")}})}(f),function(S){(function w(E){for(var P in E)if(n(E[P]))w(E[P]);else if(Array.isArray(E[P]))for(var C=0;C<E[P].length;C++)w(E[P][C]);else E[P]instanceof RegExp&&(E[P]=E[P].toString())})(S)}(f),f}function y(f,S,w){var E=a(f,w),P=i({},S.layoutAttributes);P[u]=!0,E.set(P)}function _(f,S,w){var E=a(f,w);E.set(i(E.get()||{},S))}z.IS_SUBPLOT_OBJ=u,z.IS_LINKED_TO_ARRAY=d,z.DEPRECATED=c,z.UNDERSCORE_ATTRS=x,z.get=function(){var f={};M.allTypes.forEach(function(E){f[E]=function(P){var C,O;O=(C=M.modules[P]._module).basePlotModule;var R={type:null},j=i({},o),D=i({},C.attributes);z.crawl(D,function(F,U,V,te,J){a(j,J).set(void 0),F===void 0&&a(D,J).set(void 0)}),i(R,j),M.traceIs(P,"noOpacity")&&delete R.opacity,M.traceIs(P,"showLegend")||(delete R.showlegend,delete R.legendgroup),M.traceIs(P,"noHover")&&(delete R.hoverinfo,delete R.hoverlabel),C.selectPoints||delete R.selectedpoints,i(R,D),O.attributes&&i(R,O.attributes),R.type=P;var N={meta:C.meta||{},categories:C.categories||{},animatable:Boolean(C.animatable),type:P,attributes:m(R)};if(C.layoutAttributes){var W={};i(W,C.layoutAttributes),N.layoutAttributes=m(W)}return C.animatable||z.crawl(N,function(F){z.isValObject(F)&&"anim"in F&&delete F.anim}),N}(E)});var S,w={};return Object.keys(M.transformsRegistry).forEach(function(E){w[E]=function(P){var C=M.transformsRegistry[P],O=i({},C.attributes);return Object.keys(M.componentsRegistry).forEach(function(R){var j=M.componentsRegistry[R];j.schema&&j.schema.transforms&&j.schema.transforms[P]&&Object.keys(j.schema.transforms[P]).forEach(function(D){_(O,j.schema.transforms[P][D],D)})}),{attributes:m(O)}}(E)}),{defs:{valObjects:l,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:t.traces,layout:t.layout},impliedEdits:{}},traces:f,layout:v(),transforms:w,frames:(S={frames:i({},b)},m(S),S.frames),animation:m(h),config:m(s)}},z.crawl=function(f,S,w,E){var P=w||0;E=E||"",Object.keys(f).forEach(function(C){var O=f[C];if(x.indexOf(C)===-1){var R=(E?E+".":"")+C;S(O,C,f,P,R),z.isValObject(O)||n(O)&&C!=="impliedEdits"&&z.crawl(O,S,P+1,R)}})},z.isValObject=function(f){return f&&f.valType!==void 0},z.findArrayAttributes=function(f){var S,w,E=[],P=[],C=[];function O(F,U,V,te){P=P.slice(0,te).concat([U]),C=C.slice(0,te).concat([F&&F._isLinkedToArray]),F&&(F.valType==="data_array"||F.arrayOk===!0)&&(P[te-1]!=="colorbar"||U!=="ticktext"&&U!=="tickvals")&&R(S,0,"")}function R(F,U,V){var te=F[P[U]],J=V+P[U];if(U===P.length-1)r(te)&&E.push(w+J);else if(C[U]){if(Array.isArray(te))for(var K=0;K<te.length;K++)n(te[K])&&R(te[K],U+1,J+"["+K+"].")}else n(te)&&R(te,U+1,J+".")}S=f,w="",z.crawl(o,O),f._module&&f._module.attributes&&z.crawl(f._module.attributes,O);var j=f.transforms;if(j)for(var D=0;D<j.length;D++){var N=j[D],W=N._module;W&&(w="transforms["+D+"].",S=N,z.crawl(W.attributes,O))}return E},z.getTraceValObject=function(f,S){var w,E,P=S[0],C=1;if(P==="transforms"){if(S.length===1)return o.transforms;var O=f.transforms;if(!Array.isArray(O)||!O.length)return!1;var R=S[1];if(!p(R)||R>=O.length)return!1;E=(w=(M.transformsRegistry[O[R].type]||{}).attributes)&&w[S[2]],C=3}else{var j=f._module;if(j||(j=(M.modules[f.type||o.type.dflt]||{})._module),!j)return!1;if(!(E=(w=j.attributes)&&w[P])){var D=j.basePlotModule;D&&D.attributes&&(E=D.attributes[P])}E||(E=o[P])}return g(E,S,C)},z.getLayoutValObject=function(f,S){var w=function(E,P){var C,O,R,j,D=E._basePlotModules;if(D){var N;for(C=0;C<D.length;C++){if((R=D[C]).attrRegex&&R.attrRegex.test(P)){if(R.layoutAttrOverrides)return R.layoutAttrOverrides;!N&&R.layoutAttributes&&(N=R.layoutAttributes)}var W=R.baseLayoutAttrOverrides;if(W&&P in W)return W[P]}if(N)return N}var F=E._modules;if(F){for(C=0;C<F.length;C++)if((j=F[C].layoutAttributes)&&P in j)return j[P]}for(O in M.componentsRegistry){if((R=M.componentsRegistry[O]).name==="colorscale"&&P.indexOf("coloraxis")===0)return R.layoutAttributes[P];if(!R.schema&&P===R.name)return R.layoutAttributes}return P in T&&T[P]}(f,S[0]);return g(w,S,1)}},31780:function(ee,z,e){"use strict";var M=e(3400),k=e(45464),o="templateitemname",T={name:{valType:"string",editType:"none"}};function b(s){return s&&typeof s=="string"}function h(s){var t=s.length-1;return s.charAt(t)!=="s"&&M.warn("bad argument to arrayDefaultKey: "+s),s.substr(0,s.length-1)+"defaults"}T[o]={valType:"string",editType:"calc"},z.templatedArray=function(s,t){return t._isLinkedToArray=s,t.name=T.name,t[o]=T[o],t},z.traceTemplater=function(s){var t,i,n={};for(t in s)i=s[t],Array.isArray(i)&&i.length&&(n[t]=0);return{newTrace:function(r){var a={type:t=M.coerce(r,{},k,"type"),_template:null};if(t in n){i=s[t];var l=n[t]%i.length;n[t]++,a._template=i[l]}return a}}},z.newContainer=function(s,t,i){var n=s._template,r=n&&(n[t]||i&&n[i]);return M.isPlainObject(r)||(r=null),s[t]={_template:r}},z.arrayTemplater=function(s,t,i){var n=s._template,r=n&&n[h(t)],a=n&&n[t];Array.isArray(a)&&a.length||(a=[]);var l={};return{newItem:function(u){var d={name:u.name,_input:u},c=d[o]=u[o];if(!b(c))return d._template=r,d;for(var x=0;x<a.length;x++){var g=a[x];if(g.name===c)return l[c]=1,d._template=g,d}return d[i]=u[i]||!1,d._template=!1,d},defaultItems:function(){for(var u=[],d=0;d<a.length;d++){var c=a[d],x=c.name;if(b(x)&&!l[x]){var g={_template:c,name:x,_input:{_templateitemname:x}};g[o]=c[o],u.push(g),l[x]=1}}return u}}},z.arrayDefaultKey=h,z.arrayEditor=function(s,t,i){var n=(M.nestedProperty(s,t).get()||[]).length,r=i._index,a=r>=n&&(i._input||{})._templateitemname;a&&(r=n);var l,u=t+"["+r+"]";function d(){l={},a&&(l[u]={},l[u][o]=a)}function c(g,p){a?M.nestedProperty(l[u],g).set(p):l[u+"."+g]=p}function x(){var g=l;return d(),g}return d(),{modifyBase:function(g,p){l[g]=p},modifyItem:c,getUpdateObj:x,applyUpdate:function(g,p){g&&c(g,p);var v=x();for(var m in v)M.nestedProperty(s,m).set(v[m])}}}},39172:function(ee,z,e){"use strict";var M=e(33428),k=e(24040),o=e(7316),T=e(3400),b=e(72736),h=e(73696),s=e(76308),t=e(43616),i=e(81668),n=e(45460),r=e(54460),a=e(84284),l=e(71888),u=l.enforce,d=l.clean,c=e(19280).doAutoRange,x="start";function g(_,f,S){for(var w=0;w<S.length;w++){var E=S[w][0],P=S[w][1];if(!(E[0]>=_[1]||E[1]<=_[0])&&P[0]<f[1]&&P[1]>f[0])return!0}return!1}function p(_){var f,S,w,E,P,C,O=_._fullLayout,R=O._size,j=R.p,D=r.list(_,"",!0);if(O._paperdiv.style({width:_._context.responsive&&O.autosize&&!_._context._hasZeroWidth&&!_.layout.width?"100%":O.width+"px",height:_._context.responsive&&O.autosize&&!_._context._hasZeroHeight&&!_.layout.height?"100%":O.height+"px"}).selectAll(".main-svg").call(t.setSize,O.width,O.height),_._context.setBackground(_,O.paper_bgcolor),z.drawMainTitle(_),n.manage(_),!O._has("cartesian"))return o.previousPromises(_);function N(Pe,Ue,Ve){var Ze=Pe._lw/2;return Pe._id.charAt(0)==="x"?Ue?Ve==="top"?Ue._offset-j-Ze:Ue._offset+Ue._length+j+Ze:R.t+R.h*(1-(Pe.position||0))+Ze%1:Ue?Ve==="right"?Ue._offset+Ue._length+j+Ze:Ue._offset-j-Ze:R.l+R.w*(Pe.position||0)+Ze%1}for(f=0;f<D.length;f++){var W=(E=D[f])._anchorAxis;E._linepositions={},E._lw=t.crispRound(_,E.linewidth,1),E._mainLinePosition=N(E,W,E.side),E._mainMirrorPosition=E.mirror&&W?N(E,W,a.OPPOSITE_SIDE[E.side]):null}var F=[],U=[],V=[],te=s.opacity(O.paper_bgcolor)===1&&s.opacity(O.plot_bgcolor)===1&&O.paper_bgcolor===O.plot_bgcolor;for(S in O._plots)if((w=O._plots[S]).mainplot)w.bg&&w.bg.remove(),w.bg=void 0;else{var J=w.xaxis.domain,K=w.yaxis.domain,X=w.plotgroup;if(g(J,K,V)){var Z=X.node(),$=w.bg=T.ensureSingle(X,"rect","bg");Z.insertBefore($.node(),Z.childNodes[0]),U.push(S)}else X.select("rect.bg").remove(),V.push([J,K]),te||(F.push(S),U.push(S))}var re,oe,ie,ue,me,be,ge,de,ve,pe,_e,Te,le,ae=O._bgLayer.selectAll(".bg").data(F);for(ae.enter().append("rect").classed("bg",!0),ae.exit().remove(),ae.each(function(Pe){O._plots[Pe].bg=M.select(this)}),f=0;f<U.length;f++)w=O._plots[U[f]],P=w.xaxis,C=w.yaxis,w.bg&&P._offset!==void 0&&C._offset!==void 0&&w.bg.call(t.setRect,P._offset-j,C._offset-j,P._length+2*j,C._length+2*j).call(s.fill,O.plot_bgcolor).style("stroke-width",0);if(!O._hasOnlyLargeSploms)for(S in O._plots){w=O._plots[S],P=w.xaxis,C=w.yaxis;var he,Se,ke=w.clipId="clip"+O._uid+S+"plot",Me=T.ensureSingleById(O._clips,"clipPath",ke,function(Pe){Pe.classed("plotclip",!0).append("rect")});w.clipRect=Me.select("rect").attr({width:P._length,height:C._length}),t.setTranslate(w.plot,P._offset,C._offset),w._hasClipOnAxisFalse?(he=null,Se=ke):(he=ke,Se=null),t.setClipUrl(w.plot,he,_),w.layerClipId=Se}function Ee(Pe){return"M"+re+","+Pe+"H"+oe}function De(Pe){return"M"+P._offset+","+Pe+"h"+P._length}function fe(Pe){return"M"+Pe+","+de+"V"+ge}function xe(Pe){return C._shift!==void 0&&(Pe+=C._shift),"M"+Pe+","+C._offset+"v"+C._length}function we(Pe,Ue,Ve){if(!Pe.showline||S!==Pe._mainSubplot)return"";if(!Pe._anchorAxis)return Ve(Pe._mainLinePosition);var Ze=Ue(Pe._mainLinePosition);return Pe.mirror&&(Ze+=Ue(Pe._mainMirrorPosition)),Ze}for(S in O._plots){w=O._plots[S],P=w.xaxis,C=w.yaxis;var Oe="M0,0";v(P,S)&&(me=y(P,"left",C,D),re=P._offset-(me?j+me:0),be=y(P,"right",C,D),oe=P._offset+P._length+(be?j+be:0),ie=N(P,C,"bottom"),ue=N(P,C,"top"),!(le=!P._anchorAxis||S!==P._mainSubplot)||P.mirror!=="allticks"&&P.mirror!=="all"||(P._linepositions[S]=[ie,ue]),Oe=we(P,Ee,De),le&&P.showline&&(P.mirror==="all"||P.mirror==="allticks")&&(Oe+=Ee(ie)+Ee(ue)),w.xlines.style("stroke-width",P._lw+"px").call(s.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),w.xlines.attr("d",Oe);var ze="M0,0";v(C,S)&&(_e=y(C,"bottom",P,D),ge=C._offset+C._length+(_e?j:0),Te=y(C,"top",P,D),de=C._offset-(Te?j:0),ve=N(C,P,"left"),pe=N(C,P,"right"),!(le=!C._anchorAxis||S!==C._mainSubplot)||C.mirror!=="allticks"&&C.mirror!=="all"||(C._linepositions[S]=[ve,pe]),ze=we(C,fe,xe),le&&C.showline&&(C.mirror==="all"||C.mirror==="allticks")&&(ze+=fe(ve)+fe(pe)),w.ylines.style("stroke-width",C._lw+"px").call(s.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),w.ylines.attr("d",ze)}return r.makeClipPaths(_),o.previousPromises(_)}function v(_,f){return(_.ticks||_.showline)&&(f===_._mainSubplot||_.mirror==="all"||_.mirror==="allticks")}function m(_,f,S){if(!S.showline||!S._lw)return!1;if(S.mirror==="all"||S.mirror==="allticks")return!0;var w=S._anchorAxis;if(!w)return!1;var E=a.FROM_BL[f];return S.side===f?w.domain[E]===_.domain[E]:S.mirror&&w.domain[1-E]===_.domain[1-E]}function y(_,f,S,w){if(m(_,f,S))return S._lw;for(var E=0;E<w.length;E++){var P=w[E];if(P._mainAxis===S._mainAxis&&m(_,f,P))return P._lw}return 0}z.layoutStyles=function(_){return T.syncOrAsync([o.doAutoMargin,p],_)},z.drawMainTitle=function(_){var f,S=_._fullLayout.title,w=_._fullLayout,E=function(F){var U=F.title,V="middle";return T.isRightAnchor(U)?V="end":T.isLeftAnchor(U)&&(V=x),V}(w),P=function(F){var U=F.title,V="0em";return T.isTopAnchor(U)?V=a.CAP_SHIFT+"em":T.isMiddleAnchor(U)&&(V=a.MID_SHIFT+"em"),V}(w),C=function(F,U){var V=F.title,te=F._size,J=0;return U!=="0em"&&U?U===a.CAP_SHIFT+"em"&&(J=V.pad.t):J=-V.pad.b,V.y==="auto"?te.t/2:V.yref==="paper"?te.t+te.h-te.h*V.y+J:F.height-F.height*V.y+J}(w,P),O=function(F,U){var V=F.title,te=F._size,J=0;return U===x?J=V.pad.l:U==="end"&&(J=-V.pad.r),V.xref==="paper"?te.l+te.w*V.x+J:F.width*V.x+J}(w,E);if(i.draw(_,"gtitle",{propContainer:w,propName:"title.text",placeholder:w._dfltTitle.plot,attributes:{x:O,y:C,"text-anchor":E,dy:P}}),S.text&&S.automargin){var R=M.selectAll(".gtitle"),j=t.bBox(R.node()).height,D=function(F,U,V){var te=U.y,J=U.yanchor,K=te>.5?"t":"b",X=F._fullLayout.margin[K],Z=0;return U.yref==="paper"?Z=V+U.pad.t+U.pad.b:U.yref==="container"&&(Z=function($,re,oe,ie,ue){var me=0;return oe==="middle"&&(me+=ue/2),$==="t"?(oe==="top"&&(me+=ue),me+=ie-re*ie):(oe==="bottom"&&(me+=ue),me+=re*ie),me}(K,te,J,F._fullLayout.height,V)+U.pad.t+U.pad.b),Z>X?Z:0}(_,S,j);if(D>0){(function(F,U,V,te){var J="title.automargin",K=F._fullLayout.title,X=K.y>.5?"t":"b",Z={x:K.x,y:K.y,t:0,b:0},$={};K.yref==="paper"&&function(re,oe,ie,ue,me){var be=oe.yref==="paper"?re._fullLayout._size.h:re._fullLayout.height,ge=T.isTopAnchor(oe)?ue:ue-me,de=ie==="b"?be-ge:ge;return!(T.isTopAnchor(oe)&&ie==="t"||T.isBottomAnchor(oe)&&ie==="b")&&de<me}(F,K,X,U,te)?Z[X]=V:K.yref==="container"&&($[X]=V,F._fullLayout._reservedMargin[J]=$),o.allowAutoMargin(F,J),o.autoMargin(F,J,Z)})(_,C,D,j),R.attr({x:O,y:C,"text-anchor":E,dy:(f=S.yanchor,f==="top"?a.CAP_SHIFT+.3+"em":f==="bottom"?"-0.3em":a.MID_SHIFT+"em")}).call(b.positionText,O,C);var N=(S.text.match(b.BR_TAG_ALL)||[]).length;if(N){var W=a.LINE_SPACING*N+a.MID_SHIFT;S.y===0&&(W=-W),R.selectAll(".line").each(function(){var F=+this.getAttribute("dy").slice(0,-2)-W+"em";this.setAttribute("dy",F)})}}}},z.doTraceStyle=function(_){var f,S=_.calcdata,w=[];for(f=0;f<S.length;f++){var E=S[f],P=E[0]||{},C=P.trace||{},O=C._module||{},R=O.arraysToCalcdata;R&&R(E,C);var j=O.editStyle;j&&w.push({fn:j,cd0:P})}if(w.length){for(f=0;f<w.length;f++){var D=w[f];D.fn(_,D.cd0)}h(_),z.redrawReglTraces(_)}return o.style(_),k.getComponentMethod("legend","draw")(_),o.previousPromises(_)},z.doColorBars=function(_){return k.getComponentMethod("colorbar","draw")(_),o.previousPromises(_)},z.layoutReplot=function(_){var f=_.layout;return _.layout=void 0,k.call("_doPlot",_,"",f)},z.doLegend=function(_){return k.getComponentMethod("legend","draw")(_),o.previousPromises(_)},z.doTicksRelayout=function(_){return r.draw(_,"redraw"),_._fullLayout._hasOnlyLargeSploms&&(k.subplotsRegistry.splom.updateGrid(_),h(_),z.redrawReglTraces(_)),z.drawMainTitle(_),o.previousPromises(_)},z.doModeBar=function(_){var f=_._fullLayout;n.manage(_);for(var S=0;S<f._basePlotModules.length;S++){var w=f._basePlotModules[S].updateFx;w&&w(_)}return o.previousPromises(_)},z.doCamera=function(_){for(var f=_._fullLayout,S=f._subplots.gl3d,w=0;w<S.length;w++){var E=f[S[w]];E._scene.setViewport(E)}},z.drawData=function(_){var f=_._fullLayout;h(_);for(var S=f._basePlotModules,w=0;w<S.length;w++)S[w].plot(_);return z.redrawReglTraces(_),o.style(_),k.getComponentMethod("selections","draw")(_),k.getComponentMethod("shapes","draw")(_),k.getComponentMethod("annotations","draw")(_),k.getComponentMethod("images","draw")(_),f._replotting=!1,o.previousPromises(_)},z.redrawReglTraces=function(_){var f=_._fullLayout;if(f._has("regl")){var S,w,E=_._fullData,P=[],C=[];for(f._hasOnlyLargeSploms&&f._splomGrid.draw(),S=0;S<E.length;S++){var O=E[S];O.visible===!0&&O._length!==0&&(O.type==="splom"?f._splomScenes[O.uid].draw():O.type==="scattergl"?T.pushUnique(P,O.xaxis+O.yaxis):O.type==="scatterpolargl"&&T.pushUnique(C,O.subplot))}for(S=0;S<P.length;S++)(w=f._plots[P[S]])._scene&&w._scene.draw();for(S=0;S<C.length;S++)(w=f[C[S]]._subplot)._scene&&w._scene.draw()}},z.doAutoRangeAndConstraints=function(_){for(var f,S=r.list(_,"",!0),w={},E=0;E<S.length;E++)if(!w[(f=S[E])._id]){w[f._id]=1,d(_,f),c(_,f);var P=f._matchGroup;if(P)for(var C in P){var O=r.getFromId(_,C);c(_,O,f.range),w[C]=1}}u(_)},z.finalDraw=function(_){k.getComponentMethod("rangeslider","draw")(_),k.getComponentMethod("rangeselector","draw")(_)},z.drawMarginPushers=function(_){k.getComponentMethod("legend","draw")(_),k.getComponentMethod("rangeselector","draw")(_),k.getComponentMethod("sliders","draw")(_),k.getComponentMethod("updatemenus","draw")(_),k.getComponentMethod("colorbar","draw")(_)}},94828:function(ee,z,e){"use strict";var M=e(3400),k=M.isPlainObject,o=e(73060),T=e(7316),b=e(45464),h=e(31780),s=e(20556).dfltConfig;function t(c,x){c=M.extendDeep({},c);var g,p,v=Object.keys(c).sort();function m(w,E,P){if(k(E)&&k(w))t(w,E);else if(Array.isArray(E)&&Array.isArray(w)){var C=h.arrayTemplater({_template:c},P);for(p=0;p<E.length;p++){var O=E[p],R=C.newItem(O)._template;R&&t(R,O)}var j=C.defaultItems();for(p=0;p<j.length;p++)E.push(j[p]._template);for(p=0;p<E.length;p++)delete E[p].templateitemname}}for(g=0;g<v.length;g++){var y=v[g],_=c[y];if(y in x?m(_,x[y],y):x[y]=_,i(y)===y)for(var f in x){var S=i(f);f===S||S!==y||f in c||m(_,x[f],y)}}}function i(c){return c.replace(/[0-9]+$/,"")}function n(c,x,g,p,v){var m=v&&g(v);for(var y in c){var _=c[y],f=l(c,y,p),S=l(c,y,v),w=g(S);if(!w){var E=i(y);E!==y&&(w=g(S=l(c,E,v)))}if(!(m&&m===w||!w||w._noTemplating||w.valType==="data_array"||w.arrayOk&&Array.isArray(_)))if(!w.valType&&k(_))n(_,x,g,f,S);else if(w._isLinkedToArray&&Array.isArray(_))for(var P=!1,C=0,O={},R=0;R<_.length;R++){var j=_[R];if(k(j)){var D=j.name;if(D)O[D]||(n(j,x,g,l(_,C,f),l(_,C,S)),C++,O[D]=1);else if(!P){var N=l(c,h.arrayDefaultKey(y),p),W=l(_,C,f);n(j,x,g,W,l(_,C,S));var F=M.nestedProperty(x,W);M.nestedProperty(x,N).set(F.get()),F.set(null),P=!0}}}else M.nestedProperty(x,f).set(_)}}function r(c,x){return o.getLayoutValObject(c,M.nestedProperty({},x).parts)}function a(c,x){return o.getTraceValObject(c,M.nestedProperty({},x).parts)}function l(c,x,g){return g?Array.isArray(c)?g+"["+x+"]":g+"."+x:x}function u(c){for(var x=0;x<c.length;x++)if(k(c[x]))return!0}function d(c){var x;switch(c.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":x=c.path?"There are no templates for item "+c.path+" with name "+c.templateitemname:"There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":x=c.path?"The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?"Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":"The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type."}return c.msg=x,c}z.makeTemplate=function(c){c=M.isPlainObject(c)?c:M.getGraphDiv(c),c=M.extendDeep({_context:s},{data:c.data,layout:c.layout}),T.supplyDefaults(c);var x=c.data||[],g=c.layout||{};g._basePlotModules=c._fullLayout._basePlotModules,g._modules=c._fullLayout._modules;var p={data:{},layout:{}};x.forEach(function(C){var O={};n(C,O,a.bind(null,C));var R=M.coerce(C,{},b,"type"),j=p.data[R];j||(j=p.data[R]=[]),j.push(O)}),n(g,p.layout,r.bind(null,g)),delete p.layout.template;var v=g.template;if(k(v)){var m,y,_,f,S,w,E=v.layout;k(E)&&t(E,p.layout);var P=v.data;if(k(P)){for(y in p.data)if(_=P[y],Array.isArray(_)){for(w=(S=p.data[y]).length,f=_.length,m=0;m<w;m++)t(_[m%f],S[m]);for(m=w;m<f;m++)S.push(M.extendDeep({},_[m]))}for(y in P)y in p.data||(p.data[y]=M.extendDeep([],P[y]))}}return p},z.validateTemplate=function(c,x){var g=M.extendDeep({},{_context:s,data:c.data,layout:c.layout}),p=g.layout||{};k(x)||(x=p.template||{});var v=x.layout,m=x.data,y=[];g.layout=p,g.layout.template=x,T.supplyDefaults(g);var _=g._fullLayout,f=g._fullData,S={};if(k(v)?(function j(D,N){for(var W in D)if(W.charAt(0)!=="_"&&k(D[W])){var F,U=i(W),V=[];for(F=0;F<N.length;F++)V.push(l(D,W,N[F])),U!==W&&V.push(l(D,U,N[F]));for(F=0;F<V.length;F++)S[V[F]]=1;j(D[W],V)}}(_,["layout"]),function j(D,N){for(var W in D)if(W.indexOf("defaults")===-1&&k(D[W])){var F=l(D,W,N);S[F]?j(D[W],F):y.push({code:"unused",path:F})}}(v,"layout")):y.push({code:"layout"}),k(m)){for(var w,E={},P=0;P<f.length;P++){var C=f[P];E[w=C.type]=(E[w]||0)+1,C._fullInput._template||y.push({code:"missing",index:C._fullInput.index,traceType:w})}for(w in m){var O=m[w].length,R=E[w]||0;O>R?y.push({code:"unused",traceType:w,templateCount:O,dataCount:R}):R>O&&y.push({code:"reused",traceType:w,templateCount:O,dataCount:R})}}else y.push({code:"data"});if(function j(D,N){for(var W in D)if(W.charAt(0)!=="_"){var F=D[W],U=l(D,W,N);k(F)?(Array.isArray(D)&&F._template===!1&&F.templateitemname&&y.push({code:"missing",path:U,templateitemname:F.templateitemname}),j(F,U)):Array.isArray(F)&&u(F)&&j(F,U)}}({data:f,layout:_},""),y.length)return y.map(d)}},67024:function(ee,z,e){"use strict";var M=e(38248),k=e(36424),o=e(7316),T=e(3400),b=e(81792),h=e(37164),s=e(63268),t=e(25788).version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};ee.exports=function(n,r){var a,l,u,d;function c(R){return!(R in r)||T.validate(r[R],i[R])}if(r=r||{},T.isPlainObject(n)?(a=n.data||[],l=n.layout||{},u=n.config||{},d={}):(n=T.getGraphDiv(n),a=T.extendDeep([],n.data),l=T.extendDeep({},n.layout),u=n._context,d=n._fullLayout||{}),!c("width")&&r.width!==null||!c("height")&&r.height!==null)throw new Error("Height and width should be pixel values.");if(!c("format"))throw new Error("Export format is not "+T.join2(i.format.values,", "," or ")+".");var x={};function g(R,j){return T.coerce(r,x,i,R,j)}var p=g("format"),v=g("width"),m=g("height"),y=g("scale"),_=g("setBackground"),f=g("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var w=T.extendFlat({},l);v?w.width=v:r.width===null&&M(d.width)&&(w.width=d.width),m?w.height=m:r.height===null&&M(d.height)&&(w.height=d.height);var E=T.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),P=b.getRedrawFunc(S);function C(){return new Promise(function(R){setTimeout(R,b.getDelay(S._fullLayout))})}function O(){return new Promise(function(R,j){var D=h(S,p,y),N=S._fullLayout.width,W=S._fullLayout.height;function F(){k.purge(S),document.body.removeChild(S)}if(p==="full-json"){var U=o.graphJson(S,!1,"keepdata","object",!0,!0);return U.version=t,U=JSON.stringify(U),F(),R(f?U:b.encodeJSON(U))}if(F(),p==="svg")return R(f?D:b.encodeSVG(D));var V=document.createElement("canvas");V.id=T.randstr(),s({format:p,width:N,height:W,scale:y,canvas:V,svg:D,promise:!0}).then(R).catch(j)})}return new Promise(function(R,j){k.newPlot(S,a,w,E).then(P).then(C).then(O).then(function(D){R(function(N){return f?N.replace(b.IMAGE_URL_PREFIX,""):N}(D))}).catch(function(D){j(D)})})}},21480:function(ee,z,e){"use strict";var M=e(3400),k=e(7316),o=e(73060),T=e(20556).dfltConfig,b=M.isPlainObject,h=Array.isArray,s=M.isArrayOrTypedArray;function t(c,x,g,p,v,m){m=m||[];for(var y=Object.keys(c),_=0;_<y.length;_++){var f=y[_];if(f!=="transforms"){var S=m.slice();S.push(f);var w=c[f],E=x[f],P=l(g,f),C=(P||{}).valType,O=C==="info_array",R=C==="colorscale",j=(P||{}).items;if(a(g,f))if(b(w)&&b(E)&&C!=="any")t(w,E,P,p,v,S);else if(O&&h(w)){w.length>E.length&&p.push(r("unused",v,S.concat(E.length)));var D,N,W,F,U,V=E.length,te=Array.isArray(j);if(te&&(V=Math.min(V,j.length)),P.dimensions===2)for(N=0;N<V;N++)if(h(w[N])){w[N].length>E[N].length&&p.push(r("unused",v,S.concat(N,E[N].length)));var J=E[N].length;for(D=0;D<(te?Math.min(J,j[N].length):J);D++)W=te?j[N][D]:j,F=w[N][D],U=E[N][D],M.validate(F,W)?U!==F&&U!==+F&&p.push(r("dynamic",v,S.concat(N,D),F,U)):p.push(r("value",v,S.concat(N,D),F))}else p.push(r("array",v,S.concat(N),w[N]));else for(N=0;N<V;N++)W=te?j[N]:j,F=w[N],U=E[N],M.validate(F,W)?U!==F&&U!==+F&&p.push(r("dynamic",v,S.concat(N),F,U)):p.push(r("value",v,S.concat(N),F))}else if(P.items&&!O&&h(w)){var K,X,Z=j[Object.keys(j)[0]],$=[];for(K=0;K<E.length;K++){var re=E[K]._index||K;if((X=S.slice()).push(re),b(w[re])&&b(E[K])){$.push(re);var oe=w[re],ie=E[K];b(oe)&&oe.visible!==!1&&ie.visible===!1?p.push(r("invisible",v,X)):t(oe,ie,Z,p,v,X)}}for(K=0;K<w.length;K++)(X=S.slice()).push(K),b(w[K])?$.indexOf(K)===-1&&p.push(r("unused",v,X)):p.push(r("object",v,X,w[K]))}else!b(w)&&b(E)?p.push(r("object",v,S,w)):s(w)||!s(E)||O||R?f in x?M.validate(w,P)?P.valType==="enumerated"&&(P.coerceNumber&&w!==+E||w!==E)&&p.push(r("dynamic",v,S,w,E)):p.push(r("value",v,S,w)):p.push(r("unused",v,S,w)):p.push(r("array",v,S,w));else p.push(r("schema",v,S))}}return p}ee.exports=function(c,x){c===void 0&&(c=[]),x===void 0&&(x={});var g,p,v=o.get(),m=[],y={_context:M.extendFlat({},T)};h(c)?(y.data=M.extendDeep([],c),g=c):(y.data=[],g=[],m.push(r("array","data"))),b(x)?(y.layout=M.extendDeep({},x),p=x):(y.layout={},p={},arguments.length>1&&m.push(r("object","layout"))),k.supplyDefaults(y);for(var _=y._fullData,f=g.length,S=0;S<f;S++){var w=g[S],E=["data",S];if(b(w)){var P=_[S],C=P.type,O=v.traces[C].attributes;O.type={valType:"enumerated",values:[C]},P.visible===!1&&w.visible!==!1&&m.push(r("invisible",E)),t(w,P,O,m,E);var R=w.transforms,j=P.transforms;if(R){h(R)||m.push(r("array",E,["transforms"])),E.push("transforms");for(var D=0;D<R.length;D++){var N=["transforms",D],W=R[D].type;if(b(R[D])){var F=v.transforms[W]?v.transforms[W].attributes:{};F.type={valType:"enumerated",values:Object.keys(v.transforms)},t(R[D],j[D],F,m,E,N)}else m.push(r("object",E,N))}}}else m.push(r("object",E))}var U=y._fullLayout,V=function(te,J){for(var K=te.layout.layoutAttributes,X=0;X<J.length;X++){var Z=J[X],$=te.traces[Z.type],re=$.layoutAttributes;re&&(Z.subplot?M.extendFlat(K[$.attributes.subplot.dflt],re):M.extendFlat(K,re))}return K}(v,_);return t(p,U,V,m,"layout"),m.length===0?void 0:m};var i={object:function(c,x){return(c==="layout"&&x===""?"The layout argument":c[0]==="data"&&x===""?"Trace "+c[1]+" in the data argument":n(c)+"key "+x)+" must be linked to an object container"},array:function(c,x){return(c==="data"?"The data argument":n(c)+"key "+x)+" must be linked to an array container"},schema:function(c,x){return n(c)+"key "+x+" is not part of the schema"},unused:function(c,x,g){var p=b(g)?"container":"key";return n(c)+p+" "+x+" did not get coerced"},dynamic:function(c,x,g,p){return[n(c)+"key",x,"(set to '"+g+"')","got reset to","'"+p+"'","during defaults."].join(" ")},invisible:function(c,x){return(x?n(c)+"item "+x:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,x,g){return[n(c)+"key "+x,"is set to an invalid value ("+g+")"].join(" ")}};function n(c){return h(c)?"In data trace "+c[1]+", ":"In "+c+", "}function r(c,x,g,p,v){var m,y;g=g||"",h(x)?(m=x[0],y=x[1]):(m=x,y=null);var _=function(S){if(!h(S))return String(S);for(var w="",E=0;E<S.length;E++){var P=S[E];typeof P=="number"?w=w.substr(0,w.length-1)+"["+P+"]":w+=P,E<S.length-1&&(w+=".")}return w}(g),f=i[c](x,_,p,v);return M.log(f),{code:c,container:m,trace:y,path:g,astr:_,msg:f}}function a(c,x){var g=d(x),p=g.keyMinusId,v=g.id;return!!(p in c&&c[p]._isSubplotObj&&v)||x in c}function l(c,x){return x in c?c[x]:c[d(x).keyMinusId]}var u=M.counterRegex("([a-z]+)");function d(c){var x=c.match(u);return{keyMinusId:x&&x[1],id:x&&x[2]}}},85656:function(ee){"use strict";ee.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(ee,z,e){"use strict";var M=e(3400),k=e(31780);ee.exports=function(o,T,b){var h,s,t=b.name,i=b.inclusionAttr||"visible",n=T[t],r=M.isArrayOrTypedArray(o[t])?o[t]:[],a=T[t]=[],l=k.arrayTemplater(T,t,i);for(h=0;h<r.length;h++){var u=r[h];M.isPlainObject(u)?s=l.newItem(u):(s=l.newItem({}))[i]=!1,s._index=h,s[i]!==!1&&b.handleItemDefaults(u,s,T,b),a.push(s)}var d=l.defaultItems();for(h=0;h<d.length;h++)(s=d[h])._index=a.length,b.handleItemDefaults({},s,T,b,{}),a.push(s);if(M.isArrayOrTypedArray(n)){var c=Math.min(n.length,a.length);for(h=0;h<c;h++)M.relinkPrivateKeys(a[h],n[h])}return a}},45464:function(ee,z,e){"use strict";var M=e(25376),k=e(55756);ee.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:M({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:k.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=k.dateTime2ms,T=k.incrementMonth,b=e(39032).ONEAVGMONTH;ee.exports=function(h,s,t,i){if(s.type!=="date")return{vals:i};var n=h[t+"periodalignment"];if(!n)return{vals:i};var r,a=h[t+"period"];if(M(a)){if((a=+a)<=0)return{vals:i}}else if(typeof a=="string"&&a.charAt(0)==="M"){var l=+a.substring(1);if(!(l>0&&Math.round(l)===l))return{vals:i};r=l}for(var u=s.calendar,d=n==="start",c=n==="end",x=h[t+"period0"],g=o(x,u)||0,p=[],v=[],m=[],y=i.length,_=0;_<y;_++){var f,S,w,E=i[_];if(r){for(f=Math.round((E-g)/(r*b)),w=T(g,r*f,u);w>E;)w=T(w,-r,u);for(;w<=E;)w=T(w,r,u);S=T(w,-r,u)}else{for(w=g+(f=Math.round((E-g)/a))*a;w>E;)w-=a;for(;w<=E;)w+=a;S=w-a}p[_]=d?S:c?w:(S+w)/2,v[_]=S,m[_]=w}return{vals:p,starts:v,ends:m}}},26720:function(ee){"use strict";ee.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(ee,z,e){"use strict";var M=e(33428),k=e(38248),o=e(3400),T=e(39032).FP_SAFE,b=e(24040),h=e(43616),s=e(79811),t=s.getFromId,i=s.isLinked;function n(_,f){var S,w,E=[],P=_._fullLayout,C=a(P,f,0),O=a(P,f,1),R=u(_,f),j=R.min,D=R.max;if(j.length===0||D.length===0)return o.simpleMap(f.range,f.r2l);var N=j[0].val,W=D[0].val;for(S=1;S<j.length&&N===W;S++)N=Math.min(N,j[S].val);for(S=1;S<D.length&&N===W;S++)W=Math.max(W,D[S].val);var F=f.autorange,U=F==="reversed"||F==="min reversed"||F==="max reversed";if(!U&&f.range){var V=o.simpleMap(f.range,f.r2l);U=V[1]<V[0]}f.autorange==="reversed"&&(f.autorange=!0);var te,J,K,X,Z,$,re=f.rangemode,oe=re==="tozero",ie=re==="nonnegative",ue=f._length,me=ue/10,be=0;for(S=0;S<j.length;S++)for(te=j[S],w=0;w<D.length;w++)($=(J=D[w]).val-te.val-r(f,te.val,J.val))>0&&((Z=ue-C(te)-O(J))>me?$/Z>be&&(K=te,X=J,be=$/Z):$/ue>be&&(K={val:te.val,nopad:1},X={val:J.val,nopad:1},be=$/ue));if(N===W){var ge=N-1,de=N+1;if(oe)if(N===0)E=[0,1];else{var ve=(N>0?D:j).reduce(function(_e,Te){return Math.max(_e,O(Te))},0),pe=N/(1-Math.min(.5,ve/ue));E=N>0?[0,pe]:[pe,0]}else E=ie?[Math.max(0,ge),Math.max(1,de)]:[ge,de]}else oe?(K.val>=0&&(K={val:0,nopad:1}),X.val<=0&&(X={val:0,nopad:1})):ie&&(K.val-be*C(K)<0&&(K={val:0,nopad:1}),X.val<=0&&(X={val:1,nopad:1})),be=(X.val-K.val-r(f,te.val,J.val))/(ue-C(K)-O(X)),E=[K.val-be*C(K),X.val+be*O(X)];return E=y(E,f),f.limitRange&&f.limitRange(),U&&E.reverse(),o.simpleMap(E,f.l2r||Number)}function r(_,f,S){var w=0;if(_.rangebreaks)for(var E=_.locateBreaks(f,S),P=0;P<E.length;P++){var C=E[P];w+=C.max-C.min}return w}function a(_,f,S){var w=.05*f._length,E=f._anchorAxis||{};if((f.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var P=f.isReversed();if(!P){var C=o.simpleMap(f.range,f.r2l);P=C[1]<C[0]}P&&(S=!S)}var O=0;return i(_,f._id)||(O=function(R,j,D){var N=0,W=j._id.charAt(0)==="x";for(var F in R._plots){var U=R._plots[F];if(j._id===U.xaxis._id||j._id===U.yaxis._id){var V=(W?U.yaxis:U.xaxis)||{};if((V.ticklabelposition||"").indexOf("inside")!==-1&&(!D&&(V.side==="left"||V.side==="bottom")||D&&(V.side==="top"||V.side==="right"))){if(V._vals){var te=o.deg2rad(V._tickAngles[V._id+"tick"]||0),J=Math.abs(Math.cos(te)),K=Math.abs(Math.sin(te));if(!V._vals[0].bb){var X=V._id+"tick";V._selections[X].each(function(ie){var ue=M.select(this);ue.select(".text-math-group").empty()&&(ie.bb=h.bBox(ue.node()))})}for(var Z=0;Z<V._vals.length;Z++){var $=V._vals[Z].bb;if($){var re=2*l+$.width,oe=2*l+$.height;N=Math.max(N,W?Math.max(re*J,oe*K):Math.max(oe*J,re*K))}}}V.ticks==="inside"&&V.ticklabelposition==="inside"&&(N+=V.ticklen||0)}}}return N}(_,f,S)),w=Math.max(O,w),f.constrain==="domain"&&f._inputDomain&&(w*=(f._inputDomain[1]-f._inputDomain[0])/(f.domain[1]-f.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?w:O)}}ee.exports={applyAutorangeOptions:y,getAutoRange:n,makePadFn:a,doAutoRange:function(_,f,S){if(f.setScale(),f.autorange){f.range=S?S.slice():n(_,f),f._r=f.range.slice(),f._rl=o.simpleMap(f._r,f.r2l);var w=f._input,E={};E[f._attr+".range"]=f.range,E[f._attr+".autorange"]=f.autorange,b.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,E),w.range=f.range.slice(),w.autorange=f.autorange}var P=f._anchorAxis;if(P&&P.rangeslider){var C=P.rangeslider[f._name];C&&C.rangemode==="auto"&&(C.range=n(_,f)),P._input.rangeslider[f._name]=o.extendFlat({},C)}},findExtremes:function(_,f,S){S||(S={}),_._m||_.setScale();var w,E,P,C,O,R,j,D,N,W=[],F=[],U=f.length,V=S.padded||!1,te=S.tozero&&(_.type==="linear"||_.type==="-"),J=_.type==="log",K=!1,X=S.vpadLinearized||!1;function Z(ge){if(Array.isArray(ge))return K=!0,function(ve){return Math.max(Number(ge[ve]||0),0)};var de=Math.max(Number(ge||0),0);return function(){return de}}var $=Z((_._m>0?S.ppadplus:S.ppadminus)||S.ppad||0),re=Z((_._m>0?S.ppadminus:S.ppadplus)||S.ppad||0),oe=Z(S.vpadplus||S.vpad),ie=Z(S.vpadminus||S.vpad);if(!K){if(D=1/0,N=-1/0,J)for(w=0;w<U;w++)(E=f[w])<D&&E>0&&(D=E),E>N&&E<T&&(N=E);else for(w=0;w<U;w++)(E=f[w])<D&&E>-T&&(D=E),E>N&&E<T&&(N=E);f=[D,N],U=2}var ue={tozero:te,extrapad:V};function me(ge){P=f[ge],k(P)&&(R=$(ge),j=re(ge),X?(C=_.c2l(P)-ie(ge),O=_.c2l(P)+oe(ge)):(D=P-ie(ge),N=P+oe(ge),J&&D<N/10&&(D=N/10),C=_.c2l(D),O=_.c2l(N)),te&&(C=Math.min(0,C),O=Math.max(0,O)),g(C)&&d(W,C,j,ue),g(O)&&c(F,O,R,ue))}var be=Math.min(6,U);for(w=0;w<be;w++)me(w);for(w=U-1;w>=be;w--)me(w);return{min:W,max:F,opts:S}},concatExtremes:u};var l=3;function u(_,f,S){var w,E,P,C=f._id,O=_._fullData,R=_._fullLayout,j=[],D=[];function N(te,J){for(w=0;w<J.length;w++){var K=te[J[w]],X=(K._extremes||{})[C];if(K.visible===!0&&X){for(E=0;E<X.min.length;E++)P=X.min[E],d(j,P.val,P.pad,{extrapad:P.extrapad});for(E=0;E<X.max.length;E++)P=X.max[E],c(D,P.val,P.pad,{extrapad:P.extrapad})}}}if(N(O,f._traceIndices),N(R.annotations||[],f._annIndices||[]),N(R.shapes||[],f._shapeIndices||[]),f._matchGroup&&!S){for(var W in f._matchGroup)if(W!==f._id){var F=t(_,W),U=u(_,F,!0),V=f._length/F._length;for(E=0;E<U.min.length;E++)P=U.min[E],d(j,P.val,P.pad*V,{extrapad:P.extrapad});for(E=0;E<U.max.length;E++)P=U.max[E],c(D,P.val,P.pad*V,{extrapad:P.extrapad})}}return{min:j,max:D}}function d(_,f,S,w){x(_,f,S,w,p)}function c(_,f,S,w){x(_,f,S,w,v)}function x(_,f,S,w,E){for(var P=w.tozero,C=w.extrapad,O=!0,R=0;R<_.length&&O;R++){var j=_[R];if(E(j.val,f)&&j.pad>=S&&(j.extrapad||!C)){O=!1;break}E(f,j.val)&&j.pad<=S&&(C||!j.extrapad)&&(_.splice(R,1),R--)}if(O){var D=P&&f===0;_.push({val:f,pad:D?0:S,extrapad:!D&&C})}}function g(_){return k(_)&&Math.abs(_)<T}function p(_,f){return _<=f}function v(_,f){return _>=f}function m(_,f,S){return f===void 0||S===void 0||(f=_.d2l(f))<_.d2l(S)}function y(_,f){if(!f||!f.autorangeoptions)return _;var S=_[0],w=_[1],E=f.autorangeoptions.include;if(E!==void 0){var P=f.d2l(S),C=f.d2l(w);o.isArrayOrTypedArray(E)||(E=[E]);for(var O=0;O<E.length;O++){var R=f.d2l(E[O]);P>=R&&(P=R,S=R),C<=R&&(C=R,w=R)}}return S=function(j,D){var N=D.autorangeoptions;return N&&N.minallowed!==void 0&&m(D,N.minallowed,N.maxallowed)?N.minallowed:N&&N.clipmin!==void 0&&m(D,N.clipmin,N.clipmax)?Math.max(j,D.d2l(N.clipmin)):j}(S,f),w=function(j,D){var N=D.autorangeoptions;return N&&N.maxallowed!==void 0&&m(D,N.minallowed,N.maxallowed)?N.maxallowed:N&&N.clipmax!==void 0&&m(D,N.clipmin,N.clipmax)?Math.min(j,D.d2l(N.clipmax)):j}(w,f),[S,w]}},76808:function(ee){"use strict";ee.exports=function(z,e,M){var k,o;if(M){var T=e==="reversed"||e==="min reversed"||e==="max reversed";k=M[T?1:0],o=M[T?0:1]}var b=z("autorangeoptions.minallowed",o===null?k:void 0),h=z("autorangeoptions.maxallowed",k===null?o:void 0);b===void 0&&z("autorangeoptions.clipmin"),h===void 0&&z("autorangeoptions.clipmax"),z("autorangeoptions.include")}},54460:function(ee,z,e){"use strict";var M=e(33428),k=e(38248),o=e(7316),T=e(24040),b=e(3400),h=b.strTranslate,s=e(72736),t=e(81668),i=e(76308),n=e(43616),r=e(94724),a=e(98728),l=e(39032),u=l.ONEMAXYEAR,d=l.ONEAVGYEAR,c=l.ONEMINYEAR,x=l.ONEMAXQUARTER,g=l.ONEAVGQUARTER,p=l.ONEMINQUARTER,v=l.ONEMAXMONTH,m=l.ONEAVGMONTH,y=l.ONEMINMONTH,_=l.ONEWEEK,f=l.ONEDAY,S=f/2,w=l.ONEHOUR,E=l.ONEMIN,P=l.ONESEC,C=l.MINUS_SIGN,O=l.BADNUM,R={K:"zeroline"},j={K:"gridline",L:"path"},D={K:"minor-gridline",L:"path"},N={K:"tick",L:"path"},W={K:"tick",L:"text"},F={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},U=e(84284),V=U.MID_SHIFT,te=U.CAP_SHIFT,J=U.LINE_SPACING,K=U.OPPOSITE_SIDE,X=ee.exports={};X.setConvert=e(78344);var Z=e(52976),$=e(79811),re=$.idSort,oe=$.isLinked;X.id2name=$.id2name,X.name2id=$.name2id,X.cleanId=$.cleanId,X.list=$.list,X.listIds=$.listIds,X.getFromId=$.getFromId,X.getFromTrace=$.getFromTrace;var ie=e(19280);X.getAutoRange=ie.getAutoRange,X.findExtremes=ie.findExtremes;var ue=1e-4;function me(Re){var Fe=(Re[1]-Re[0])*ue;return[Re[0]-Fe,Re[1]+Fe]}X.coerceRef=function(Re,Fe,rt,Ye,ct,pt){var gt=Ye.charAt(Ye.length-1),ut=rt._fullLayout._subplots[gt+"axis"],Mt=Ye+"ref",xt={};return ct||(ct=ut[0]||(typeof pt=="string"?pt:pt[0])),pt||(pt=ct),ut=ut.concat(ut.map(function(mt){return mt+" domain"})),xt[Mt]={valType:"enumerated",values:ut.concat(pt?typeof pt=="string"?[pt]:pt:[]),dflt:ct},b.coerce(Re,Fe,xt,Mt)},X.getRefType=function(Re){return Re===void 0?Re:Re==="paper"?"paper":Re==="pixel"?"pixel":/( domain)$/.test(Re)?"domain":"range"},X.coercePosition=function(Re,Fe,rt,Ye,ct,pt){var gt,ut;if(X.getRefType(Ye)!=="range")gt=b.ensureNumber,ut=rt(ct,pt);else{var Mt=X.getFromId(Fe,Ye);ut=rt(ct,pt=Mt.fraction2r(pt)),gt=Mt.cleanPos}Re[ct]=gt(ut)},X.cleanPosition=function(Re,Fe,rt){return(rt==="paper"||rt==="pixel"?b.ensureNumber:X.getFromId(Fe,rt).cleanPos)(Re)},X.redrawComponents=function(Re,Fe){Fe=Fe||X.listIds(Re);var rt=Re._fullLayout;function Ye(ct,pt,gt,ut){for(var Mt=T.getComponentMethod(ct,pt),xt={},mt=0;mt<Fe.length;mt++)for(var Et=rt[X.id2name(Fe[mt])][gt],Lt=0;Lt<Et.length;Lt++){var zt=Et[Lt];if(!xt[zt]&&(Mt(Re,zt),xt[zt]=1,ut))return}}Ye("annotations","drawOne","_annIndices"),Ye("shapes","drawOne","_shapeIndices"),Ye("images","draw","_imgIndices",!0),Ye("selections","drawOne","_selectionIndices")};var be=X.getDataConversions=function(Re,Fe,rt,Ye){var ct,pt=rt==="x"||rt==="y"||rt==="z"?rt:Ye;if(b.isArrayOrTypedArray(pt)){if(ct={type:Z(Ye,void 0,{autotypenumbers:Re._fullLayout.autotypenumbers}),_categories:[]},X.setConvert(ct),ct.type==="category")for(var gt=0;gt<Ye.length;gt++)ct.d2c(Ye[gt])}else ct=X.getFromTrace(Re,Fe,pt);return ct?{d2c:ct.d2c,c2d:ct.c2d}:pt==="ids"?{d2c:de,c2d:de}:{d2c:ge,c2d:ge}};function ge(Re){return+Re}function de(Re){return String(Re)}function ve(Re,Fe){return Math.abs((Re/Fe+.5)%1-.5)<.001}function pe(Re,Fe){return Math.abs(Re/Fe-1)<.001}function _e(Re){return+Re.substring(1)}function Te(Re,Fe){return Re.rangebreaks&&(Fe=Fe.filter(function(rt){return Re.maskBreaks(rt.x)!==O})),Fe}function le(Re){var Fe=Re._mainAxis,rt=[];if(Fe._vals){for(var Ye=0;Ye<Fe._vals.length;Ye++)if(!Fe._vals[Ye].noTick){var ct=Fe.l2p(Fe._vals[Ye].x),pt=Re.p2l(ct),gt=X.tickText(Re,pt);Fe._vals[Ye].minor&&(gt.minor=!0,gt.text=""),rt.push(gt)}}return Te(Re,rt)}function ae(Re,Fe){var rt=me(b.simpleMap(Re.range,Re.r2l)),Ye=Math.min(rt[0],rt[1]),ct=Math.max(rt[0],rt[1]),pt=Re.type==="category"?Re.d2l_noadd:Re.d2l;Re.type==="log"&&String(Re.dtick).charAt(0)!=="L"&&(Re.dtick="L"+Math.pow(10,Math.floor(Math.min(Re.range[0],Re.range[1]))-1));for(var gt=[],ut=0;ut<=1;ut++)if((Fe===void 0||!(Fe&&ut||Fe===!1&&!ut))&&(!ut||Re.minor)){var Mt=ut?Re.minor.tickvals:Re.tickvals,xt=ut?[]:Re.ticktext;if(Mt){b.isArrayOrTypedArray(xt)||(xt=[]);for(var mt=0;mt<Mt.length;mt++){var Et=pt(Mt[mt]);if(Et>Ye&&Et<ct){var Lt=X.tickText(Re,Et,!1,String(xt[mt]));ut&&(Lt.minor=!0,Lt.text=""),gt.push(Lt)}}}}return Te(Re,gt)}X.getDataToCoordFunc=function(Re,Fe,rt,Ye){return be(Re,Fe,rt,Ye).d2c},X.counterLetter=function(Re){var Fe=Re.charAt(0);return Fe==="x"?"y":Fe==="y"?"x":void 0},X.minDtick=function(Re,Fe,rt,Ye){["log","category","multicategory"].indexOf(Re.type)===-1&&Ye?Re._minDtick===void 0?(Re._minDtick=Fe,Re._forceTick0=rt):Re._minDtick&&((Re._minDtick/Fe+1e-6)%1<2e-6&&((rt-Re._forceTick0)/Fe%1+1.000001)%1<2e-6?(Re._minDtick=Fe,Re._forceTick0=rt):((Fe/Re._minDtick+1e-6)%1>2e-6||((rt-Re._forceTick0)/Re._minDtick%1+1.000001)%1>2e-6)&&(Re._minDtick=0)):Re._minDtick=0},X.saveRangeInitial=function(Re,Fe){for(var rt=X.list(Re,"",!0),Ye=!1,ct=0;ct<rt.length;ct++){var pt=rt[ct],gt=pt._rangeInitial0===void 0&&pt._rangeInitial1===void 0,ut=gt||pt.range[0]!==pt._rangeInitial0||pt.range[1]!==pt._rangeInitial1,Mt=pt.autorange;(gt&&Mt!==!0||Fe&&ut)&&(pt._rangeInitial0=Mt==="min"||Mt==="max reversed"?void 0:pt.range[0],pt._rangeInitial1=Mt==="max"||Mt==="min reversed"?void 0:pt.range[1],pt._autorangeInitial=Mt,Ye=!0)}return Ye},X.saveShowSpikeInitial=function(Re,Fe){for(var rt=X.list(Re,"",!0),Ye=!1,ct="on",pt=0;pt<rt.length;pt++){var gt=rt[pt],ut=gt._showSpikeInitial===void 0,Mt=ut||gt.showspikes!==gt._showspikes;(ut||Fe&&Mt)&&(gt._showSpikeInitial=gt.showspikes,Ye=!0),ct!=="on"||gt.showspikes||(ct="off")}return Re._fullLayout._cartesianSpikesEnabled=ct,Ye},X.autoBin=function(Re,Fe,rt,Ye,ct,pt){var gt,ut=b.aggNums(Math.min,null,Re),Mt=b.aggNums(Math.max,null,Re);if(Fe.type==="category"||Fe.type==="multicategory")return{start:ut-.5,end:Mt+.5,size:Math.max(1,Math.round(pt)||1),_dataSpan:Mt-ut};if(ct||(ct=Fe.calendar),gt=Fe.type==="log"?{type:"linear",range:[ut,Mt]}:{type:Fe.type,range:b.simpleMap([ut,Mt],Fe.c2r,0,ct),calendar:ct},X.setConvert(gt),pt=pt&&a.dtick(pt,gt.type))gt.dtick=pt,gt.tick0=a.tick0(void 0,gt.type,ct);else{var xt;if(rt)xt=(Mt-ut)/rt;else{var mt=b.distinctVals(Re),Et=Math.pow(10,Math.floor(Math.log(mt.minDiff)/Math.LN10)),Lt=Et*b.roundUp(mt.minDiff/Et,[.9,1.9,4.9,9.9],!0);xt=Math.max(Lt,2*b.stdev(Re)/Math.pow(Re.length,Ye?.25:.4)),k(xt)||(xt=1)}X.autoTicks(gt,xt)}var zt,Wt=gt.dtick,rn=X.tickIncrement(X.tickFirst(gt),Wt,"reverse",ct);if(typeof Wt=="number")rn=function(Ut,Vt,en,Ln,An){var hn=0,Xt=0,ln=0,nn=0;function cn(In){return(1+100*(In-Ut)/en.dtick)%100<2}for(var Tn=0;Tn<Vt.length;Tn++)Vt[Tn]%1==0?ln++:k(Vt[Tn])||nn++,cn(Vt[Tn])&&hn++,cn(Vt[Tn]+en.dtick/2)&&Xt++;var Mn=Vt.length-nn;if(ln===Mn&&en.type!=="date")en.dtick<1?Ut=Ln-.5*en.dtick:(Ut-=.5)+en.dtick<Ln&&(Ut+=en.dtick);else if(Xt<.1*Mn&&(hn>.3*Mn||cn(Ln)||cn(An))){var zn=en.dtick/2;Ut+=Ut+zn<Ln?zn:-zn}return Ut}(rn,Re,gt,ut,Mt),zt=rn+(1+Math.floor((Mt-rn)/Wt))*Wt;else for(gt.dtick.charAt(0)==="M"&&(rn=function(Ut,Vt,en,Ln,An){var hn=b.findExactDates(Vt,An);if(hn.exactDays>.8){var Xt=Number(en.substr(1));hn.exactYears>.8&&Xt%12==0?Ut=X.tickIncrement(Ut,"M6","reverse")+1.5*f:hn.exactMonths>.8?Ut=X.tickIncrement(Ut,"M1","reverse")+15.5*f:Ut-=S;var ln=X.tickIncrement(Ut,en);if(ln<=Ln)return ln}return Ut}(rn,Re,Wt,ut,ct)),zt=rn;zt<=Mt;)zt=X.tickIncrement(zt,Wt,!1,ct);return{start:Fe.c2r(rn,0,ct),end:Fe.c2r(zt,0,ct),size:Wt,_dataSpan:Mt-ut}},X.prepMinorTicks=function(Re,Fe,rt){if(!Fe.minor.dtick){delete Re.dtick;var Ye,ct=Fe.dtick&&k(Fe._tmin);if(ct){var pt=X.tickIncrement(Fe._tmin,Fe.dtick,!0);Ye=[Fe._tmin,.99*pt+.01*Fe._tmin]}else{var gt=b.simpleMap(Fe.range,Fe.r2l);Ye=[gt[0],.8*gt[0]+.2*gt[1]]}if(Re.range=b.simpleMap(Ye,Fe.l2r),Re._isMinor=!0,X.prepTicks(Re,rt),ct){var ut=k(Fe.dtick),Mt=k(Re.dtick),xt=ut?Fe.dtick:+Fe.dtick.substring(1),mt=Mt?Re.dtick:+Re.dtick.substring(1);ut&&Mt?ve(xt,mt)?xt===2*_&&mt===2*f&&(Re.dtick=_):xt===2*_&&mt===3*f?Re.dtick=_:xt!==_||(Fe._input.minor||{}).nticks?pe(xt/mt,2.5)?Re.dtick=xt/2:Re.dtick=xt:Re.dtick=f:String(Fe.dtick).charAt(0)==="M"?Mt?Re.dtick="M1":ve(xt,mt)?xt>=12&&mt===2&&(Re.dtick="M3"):Re.dtick=Fe.dtick:String(Re.dtick).charAt(0)==="L"?String(Fe.dtick).charAt(0)==="L"?ve(xt,mt)||(Re.dtick=pe(xt/mt,2.5)?Fe.dtick/2:Fe.dtick):Re.dtick="D1":Re.dtick==="D2"&&+Fe.dtick>1&&(Re.dtick=1)}Re.range=Fe.range}Fe.minor._tick0Init===void 0&&(Re.tick0=Fe.tick0)},X.prepTicks=function(Re,Fe){var rt=b.simpleMap(Re.range,Re.r2l,void 0,void 0,Fe);if(Re.tickmode==="auto"||!Re.dtick){var Ye,ct=Re.nticks;ct||(Re.type==="category"||Re.type==="multicategory"?(Ye=Re.tickfont?b.bigFont(Re.tickfont.size||12):15,ct=Re._length/Ye):(Ye=Re._id.charAt(0)==="y"?40:80,ct=b.constrain(Re._length/Ye,4,9)+1),Re._name==="radialaxis"&&(ct*=2)),Re.minor&&Re.minor.tickmode!=="array"||Re.tickmode==="array"&&(ct*=100),Re._roughDTick=Math.abs(rt[1]-rt[0])/ct,X.autoTicks(Re,Re._roughDTick),Re._minDtick>0&&Re.dtick<2*Re._minDtick&&(Re.dtick=Re._minDtick,Re.tick0=Re.l2r(Re._forceTick0))}Re.ticklabelmode==="period"&&function(pt){var gt;function ut(){return!(k(pt.dtick)||pt.dtick.charAt(0)!=="M")}var Mt=ut(),xt=X.getTickFormat(pt);if(xt){var mt=pt._dtickInit!==pt.dtick;/%[fLQsSMX]/.test(xt)||(/%[HI]/.test(xt)?(gt=w,mt&&!Mt&&pt.dtick<w&&(pt.dtick=w)):/%p/.test(xt)?(gt=S,mt&&!Mt&&pt.dtick<S&&(pt.dtick=S)):/%[Aadejuwx]/.test(xt)?(gt=f,mt&&!Mt&&pt.dtick<f&&(pt.dtick=f)):/%[UVW]/.test(xt)?(gt=_,mt&&!Mt&&pt.dtick<_&&(pt.dtick=_)):/%[Bbm]/.test(xt)?(gt=m,mt&&(Mt?_e(pt.dtick)<1:pt.dtick<y)&&(pt.dtick="M1")):/%[q]/.test(xt)?(gt=g,mt&&(Mt?_e(pt.dtick)<3:pt.dtick<p)&&(pt.dtick="M3")):/%[Yy]/.test(xt)&&(gt=d,mt&&(Mt?_e(pt.dtick)<12:pt.dtick<c)&&(pt.dtick="M12")))}(Mt=ut())&&pt.tick0===pt._dowTick0&&(pt.tick0=pt._rawTick0),pt._definedDelta=gt}(Re),Re.tick0||(Re.tick0=Re.type==="date"?"2000-01-01":0),Re.type==="date"&&Re.dtick<.1&&(Re.dtick=.1),we(Re)},X.calcTicks=function(Re,Fe){for(var rt,Ye,ct=Re.type,pt=Re.calendar,gt=Re.ticklabelstep,ut=Re.ticklabelmode==="period",Mt=b.simpleMap(Re.range,Re.r2l,void 0,void 0,Fe),xt=Mt[1]<Mt[0],mt=Math.min(Mt[0],Mt[1]),Et=Math.max(Mt[0],Mt[1]),Lt=Math.max(1e3,Re._length||0),zt=[],Wt=[],rn=[],Ut=[],Vt=Re.minor&&(Re.minor.ticks||Re.minor.showgrid),en=1;en>=(Vt?0:1);en--){var Ln=!en;en?(Re._dtickInit=Re.dtick,Re._tick0Init=Re.tick0):(Re.minor._dtickInit=Re.minor.dtick,Re.minor._tick0Init=Re.minor.tick0);var An=en?Re:b.extendFlat({},Re,Re.minor);if(Ln?X.prepMinorTicks(An,Re,Fe):X.prepTicks(An,Fe),An.tickmode!=="array")if(An.tickmode!=="sync"){var hn=me(Mt),Xt=hn[0],ln=hn[1],nn=k(An.dtick),cn=ct==="log"&&!(nn||An.dtick.charAt(0)==="L"),Tn=X.tickFirst(An,Fe);if(en){if(Re._tmin=Tn,Tn<Xt!==xt)break;ct!=="category"&&ct!=="multicategory"||(ln=xt?Math.max(-.5,ln):Math.min(Re._categories.length-.5,ln))}var Mn,zn,In=null,Pn=Tn;en&&(nn?zn=Re.dtick:ct==="date"?typeof Re.dtick=="string"&&Re.dtick.charAt(0)==="M"&&(zn=m*Re.dtick.substring(1)):zn=Re._roughDTick,Mn=Math.round((Re.r2l(Pn)-Re.r2l(Re.tick0))/zn)-1);var Hn=An.dtick;for(An.rangebreaks&&An._tick0Init!==An.tick0&&(Pn=Be(Pn,Re),xt||(Pn=X.tickIncrement(Pn,Hn,!xt,pt))),en&&ut&&(Pn=X.tickIncrement(Pn,Hn,!xt,pt),Mn--);xt?Pn>=ln:Pn<=ln;Pn=X.tickIncrement(Pn,Hn,xt,pt)){if(en&&Mn++,An.rangebreaks&&!xt){if(Pn<Xt)continue;if(An.maskBreaks(Pn)===O&&Be(Pn,An)>=Et)break}if(rn.length>Lt||Pn===In)break;In=Pn;var Fn={value:Pn};en?(cn&&Pn!==(0|Pn)&&(Fn.simpleLabel=!0),gt>1&&Mn%gt&&(Fn.skipLabel=!0),rn.push(Fn)):(Fn.minor=!0,Ut.push(Fn))}}else rn=[],zt=le(Re);else en?(rn=[],zt=ae(Re,!Ln)):(Ut=[],Wt=ae(Re,!Ln))}if(Vt&&!(Re.minor.ticks==="inside"&&Re.ticks==="outside"||Re.minor.ticks==="outside"&&Re.ticks==="inside")){for(var tr=rn.map(function(Pt){return Pt.value}),or=[],ur=0;ur<Ut.length;ur++){var er=Ut[ur],Mr=er.value;if(tr.indexOf(Mr)===-1){for(var jt=!1,tn=0;!jt&&tn<rn.length;tn++)1e7+rn[tn].value===1e7+Mr&&(jt=!0);jt||or.push(er)}}Ut=or}if(ut&&function(Pt,Yt,Qt){for(var mn=0;mn<Pt.length;mn++){var vn=Pt[mn].value,_n=mn,sn=mn+1;mn<Pt.length-1?(_n=mn,sn=mn+1):mn>0?(_n=mn-1,sn=mn):(_n=mn,sn=mn);var Kt,Jt=Pt[_n].value,on=Pt[sn].value,fn=Math.abs(on-Jt),En=Qt||fn,On=0;En>=c?On=fn>=c&&fn<=u?fn:d:Qt===g&&En>=p?On=fn>=p&&fn<=x?fn:g:En>=y?On=fn>=y&&fn<=v?fn:m:Qt===_&&En>=_?On=_:En>=f?On=f:Qt===S&&En>=S?On=S:Qt===w&&En>=w&&(On=w),On>=fn&&(On=fn,Kt=!0);var Vn=vn+On;if(Yt.rangebreaks&&On>0){for(var jn=0,Kn=0;Kn<84;Kn++){var Yn=(Kn+.5)/84;Yt.maskBreaks(vn*(1-Yn)+Yn*Vn)!==O&&jn++}(On*=jn/84)||(Pt[mn].drop=!0),Kt&&fn>_&&(On=fn)}(On>0||mn===0)&&(Pt[mn].periodX=vn+On/2)}}(rn,Re,Re._definedDelta),Re.rangebreaks){var xn=Re._id.charAt(0)==="y",pn=1;Re.tickmode==="auto"&&(pn=Re.tickfont?Re.tickfont.size:12);var Sn=NaN;for(rt=rn.length-1;rt>-1;rt--)if(rn[rt].drop)rn.splice(rt,1);else{rn[rt].value=Be(rn[rt].value,Re);var Gn=Re.c2p(rn[rt].value);(xn?Sn>Gn-pn:Sn<Gn+pn)?rn.splice(xt?rt+1:rt,1):Sn=Gn}}We(Re)&&Math.abs(Mt[1]-Mt[0])===360&&rn.pop(),Re._tmax=(rn[rn.length-1]||{}).value,Re._prevDateHead="",Re._inCalcTicks=!0;var Rn,Nn,ir=function(Pt){Pt.text="",Re._prevDateHead=Ye};for(rn=rn.concat(Ut),rt=0;rt<rn.length;rt++){var Gt=rn[rt].minor,dn=rn[rt].value;Gt?Wt.push({x:dn,minor:!0}):(Ye=Re._prevDateHead,Rn=X.tickText(Re,dn,!1,rn[rt].simpleLabel),(Nn=rn[rt].periodX)!==void 0&&(Rn.periodX=Nn,(Nn>Et||Nn<mt)&&(Nn>Et&&(Rn.periodX=Et),Nn<mt&&(Rn.periodX=mt),ir(Rn))),rn[rt].skipLabel&&ir(Rn),zt.push(Rn))}return zt=zt.concat(Wt),Re._inCalcTicks=!1,ut&&zt.length&&(zt[0].noTick=!0),zt};var he=[2,5,10],Se=[1,2,3,6,12],ke=[1,2,5,10,15,30],Me=[1,2,3,7,14],Ee=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],De=[-.301,0,.301,.699,1],fe=[15,30,45,90,180];function xe(Re,Fe,rt){return Fe*b.roundUp(Re/Fe,rt)}function we(Re){var Fe=Re.dtick;if(Re._tickexponent=0,k(Fe)||typeof Fe=="string"||(Fe=1),Re.type!=="category"&&Re.type!=="multicategory"||(Re._tickround=null),Re.type==="date"){var rt=Re.r2l(Re.tick0),Ye=Re.l2r(rt).replace(/(^-|i)/g,""),ct=Ye.length;if(String(Fe).charAt(0)==="M")ct>10||Ye.substr(5)!=="01-01"?Re._tickround="d":Re._tickround=+Fe.substr(1)%12==0?"y":"m";else if(Fe>=f&&ct<=10||Fe>=15*f)Re._tickround="d";else if(Fe>=E&&ct<=16||Fe>=w)Re._tickround="M";else if(Fe>=P&&ct<=19||Fe>=E)Re._tickround="S";else{var pt=Re.l2r(rt+Fe).replace(/^-/,"").length;Re._tickround=Math.max(ct,pt)-20,Re._tickround<0&&(Re._tickround=4)}}else if(k(Fe)||Fe.charAt(0)==="L"){var gt=Re.range.map(Re.r2d||Number);k(Fe)||(Fe=Number(Fe.substr(1))),Re._tickround=2-Math.floor(Math.log(Fe)/Math.LN10+.01);var ut=Math.max(Math.abs(gt[0]),Math.abs(gt[1])),Mt=Math.floor(Math.log(ut)/Math.LN10+.01),xt=Re.minexponent===void 0?3:Re.minexponent;Math.abs(Mt)>xt&&(Pe(Re.exponentformat)&&!Ue(Mt)?Re._tickexponent=3*Math.round((Mt-1)/3):Re._tickexponent=Mt)}else Re._tickround=null}function Oe(Re,Fe,rt){var Ye=Re.tickfont||{};return{x:Fe,dx:0,dy:0,text:rt||"",fontSize:Ye.size,font:Ye.family,fontColor:Ye.color}}X.autoTicks=function(Re,Fe,rt){var Ye;function ct(Et){return Math.pow(Et,Math.floor(Math.log(Fe)/Math.LN10))}if(Re.type==="date"){Re.tick0=b.dateTick0(Re.calendar,0);var pt=2*Fe;if(pt>d)Fe/=d,Ye=ct(10),Re.dtick="M"+12*xe(Fe,Ye,he);else if(pt>m)Fe/=m,Re.dtick="M"+xe(Fe,1,Se);else if(pt>f){if(Re.dtick=xe(Fe,f,Re._hasDayOfWeekBreaks?[1,2,7,14]:Me),!rt){var gt=X.getTickFormat(Re),ut=Re.ticklabelmode==="period";ut&&(Re._rawTick0=Re.tick0),/%[uVW]/.test(gt)?Re.tick0=b.dateTick0(Re.calendar,2):Re.tick0=b.dateTick0(Re.calendar,1),ut&&(Re._dowTick0=Re.tick0)}}else pt>w?Re.dtick=xe(Fe,w,Se):pt>E?Re.dtick=xe(Fe,E,ke):pt>P?Re.dtick=xe(Fe,P,ke):(Ye=ct(10),Re.dtick=xe(Fe,Ye,he))}else if(Re.type==="log"){Re.tick0=0;var Mt=b.simpleMap(Re.range,Re.r2l);if(Re._isMinor&&(Fe*=1.5),Fe>.7)Re.dtick=Math.ceil(Fe);else if(Math.abs(Mt[1]-Mt[0])<1){var xt=1.5*Math.abs((Mt[1]-Mt[0])/Fe);Fe=Math.abs(Math.pow(10,Mt[1])-Math.pow(10,Mt[0]))/xt,Ye=ct(10),Re.dtick="L"+xe(Fe,Ye,he)}else Re.dtick=Fe>.3?"D2":"D1"}else Re.type==="category"||Re.type==="multicategory"?(Re.tick0=0,Re.dtick=Math.ceil(Math.max(Fe,1))):We(Re)?(Re.tick0=0,Ye=1,Re.dtick=xe(Fe,Ye,fe)):(Re.tick0=0,Ye=ct(10),Re.dtick=xe(Fe,Ye,he));if(Re.dtick===0&&(Re.dtick=1),!k(Re.dtick)&&typeof Re.dtick!="string"){var mt=Re.dtick;throw Re.dtick=1,"ax.dtick error: "+String(mt)}},X.tickIncrement=function(Re,Fe,rt,Ye){var ct=rt?-1:1;if(k(Fe))return b.increment(Re,ct*Fe);var pt=Fe.charAt(0),gt=ct*Number(Fe.substr(1));if(pt==="M")return b.incrementMonth(Re,gt,Ye);if(pt==="L")return Math.log(Math.pow(10,Re)+gt)/Math.LN10;if(pt==="D"){var ut=Fe==="D2"?De:Ee,Mt=Re+.01*ct,xt=b.roundUp(b.mod(Mt,1),ut,rt);return Math.floor(Mt)+Math.log(M.round(Math.pow(10,xt),1))/Math.LN10}throw"unrecognized dtick "+String(Fe)},X.tickFirst=function(Re,Fe){var rt=Re.r2l||Number,Ye=b.simpleMap(Re.range,rt,void 0,void 0,Fe),ct=Ye[1]<Ye[0],pt=ct?Math.floor:Math.ceil,gt=me(Ye)[0],ut=Re.dtick,Mt=rt(Re.tick0);if(k(ut)){var xt=pt((gt-Mt)/ut)*ut+Mt;return Re.type!=="category"&&Re.type!=="multicategory"||(xt=b.constrain(xt,0,Re._categories.length-1)),xt}var mt=ut.charAt(0),Et=Number(ut.substr(1));if(mt==="M"){for(var Lt,zt,Wt,rn=0,Ut=Mt;rn<10;){if(((Lt=X.tickIncrement(Ut,ut,ct,Re.calendar))-gt)*(Ut-gt)<=0)return ct?Math.min(Ut,Lt):Math.max(Ut,Lt);zt=(gt-(Ut+Lt)/2)/(Lt-Ut),Wt=mt+(Math.abs(Math.round(zt))||1)*Et,Ut=X.tickIncrement(Ut,Wt,zt<0?!ct:ct,Re.calendar),rn++}return b.error("tickFirst did not converge",Re),Ut}if(mt==="L")return Math.log(pt((Math.pow(10,gt)-Mt)/Et)*Et+Mt)/Math.LN10;if(mt==="D"){var Vt=ut==="D2"?De:Ee,en=b.roundUp(b.mod(gt,1),Vt,ct);return Math.floor(gt)+Math.log(M.round(Math.pow(10,en),1))/Math.LN10}throw"unrecognized dtick "+String(ut)},X.tickText=function(Re,Fe,rt,Ye){var ct,pt=Oe(Re,Fe),gt=Re.tickmode==="array",ut=rt||gt,Mt=Re.type,xt=Mt==="category"?Re.d2l_noadd:Re.d2l,mt=function(Ut){var Vt=Re.l2p(Ut);return Vt>=0&&Vt<=Re._length?Ut:null};if(gt&&b.isArrayOrTypedArray(Re.ticktext)){var Et=b.simpleMap(Re.range,Re.r2l),Lt=(Math.abs(Et[1]-Et[0])-(Re._lBreaks||0))/1e4;for(ct=0;ct<Re.ticktext.length&&!(Math.abs(Fe-xt(Re.tickvals[ct]))<Lt);ct++);if(ct<Re.ticktext.length)return pt.text=String(Re.ticktext[ct]),pt.xbnd=[mt(pt.x-.5),mt(pt.x+Re.dtick-.5)],pt}function zt(Ut){if(Ut===void 0)return!0;if(rt)return Ut==="none";var Vt={first:Re._tmin,last:Re._tmax}[Ut];return Ut!=="all"&&Fe!==Vt}var Wt=rt?"never":Re.exponentformat!=="none"&&zt(Re.showexponent)?"hide":"";if(Mt==="date"?function(Ut,Vt,en,Ln){var An=Ut._tickround,hn=en&&Ut.hoverformat||X.getTickFormat(Ut);(Ln=!hn&&Ln)&&(An=k(An)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[An]);var Xt,ln=b.formatDate(Vt.x,hn,An,Ut._dateFormat,Ut.calendar,Ut._extraFormat),nn=ln.indexOf(`
`);if(nn!==-1&&(Xt=ln.substr(nn+1),ln=ln.substr(0,nn)),Ln&&(Xt===void 0||ln!=="00:00:00"&&ln!=="00:00"?ln.length===8&&(ln=ln.replace(/:00$/,"")):(ln=Xt,Xt="")),Xt)if(en)An==="d"?ln+=", "+Xt:ln=Xt+(ln?", "+ln:"");else if(Ut._inCalcTicks&&Ut._prevDateHead===Xt){var cn=Ge(Ut),Tn=Ut._trueSide||Ut.side;(!cn&&Tn==="top"||cn&&Tn==="bottom")&&(ln+="<br> ")}else Ut._prevDateHead=Xt,ln+="<br>"+Xt;Vt.text=ln}(Re,pt,rt,ut):Mt==="log"?function(Ut,Vt,en,Ln,An){var hn=Ut.dtick,Xt=Vt.x,ln=Ut.tickformat,nn=typeof hn=="string"&&hn.charAt(0);if(An==="never"&&(An=""),Ln&&nn!=="L"&&(hn="L3",nn="L"),ln||nn==="L")Vt.text=Ve(Math.pow(10,Xt),Ut,An,Ln);else if(k(hn)||nn==="D"&&b.mod(Xt+.01,1)<.1){var cn=Math.round(Xt),Tn=Math.abs(cn),Mn=Ut.exponentformat;Mn==="power"||Pe(Mn)&&Ue(cn)?(Vt.text=cn===0?1:cn===1?"10":"10<sup>"+(cn>1?"":C)+Tn+"</sup>",Vt.fontSize*=1.25):(Mn==="e"||Mn==="E")&&Tn>2?Vt.text="1"+Mn+(cn>0?"+":C)+Tn:(Vt.text=Ve(Math.pow(10,Xt),Ut,"","fakehover"),hn==="D1"&&Ut._id.charAt(0)==="y"&&(Vt.dy-=Vt.fontSize/6))}else{if(nn!=="D")throw"unrecognized dtick "+String(hn);Vt.text=String(Math.round(Math.pow(10,b.mod(Xt,1)))),Vt.fontSize*=.75}if(Ut.dtick==="D1"){var zn=String(Vt.text).charAt(0);zn!=="0"&&zn!=="1"||(Ut._id.charAt(0)==="y"?Vt.dx-=Vt.fontSize/4:(Vt.dy+=Vt.fontSize/2,Vt.dx+=(Ut.range[1]>Ut.range[0]?1:-1)*Vt.fontSize*(Xt<0?.5:.25)))}}(Re,pt,0,ut,Wt):Mt==="category"?function(Ut,Vt){var en=Ut._categories[Math.round(Vt.x)];en===void 0&&(en=""),Vt.text=String(en)}(Re,pt):Mt==="multicategory"?function(Ut,Vt,en){var Ln=Math.round(Vt.x),An=Ut._categories[Ln]||[],hn=An[1]===void 0?"":String(An[1]),Xt=An[0]===void 0?"":String(An[0]);en?Vt.text=Xt+" - "+hn:(Vt.text=hn,Vt.text2=Xt)}(Re,pt,rt):We(Re)?function(Ut,Vt,en,Ln,An){if(Ut.thetaunit!=="radians"||en)Vt.text=Ve(Vt.x,Ut,An,Ln);else{var hn=Vt.x/180;if(hn===0)Vt.text="0";else{var Xt=function(nn){function cn(In,Pn){return Math.abs(In-Pn)<=1e-6}var Tn=function(In){for(var Pn=1;!cn(Math.round(In*Pn)/Pn,In);)Pn*=10;return Pn}(nn),Mn=nn*Tn,zn=Math.abs(function In(Pn,Hn){return cn(Hn,0)?Pn:In(Hn,Pn%Hn)}(Mn,Tn));return[Math.round(Mn/zn),Math.round(Tn/zn)]}(hn);if(Xt[1]>=100)Vt.text=Ve(b.deg2rad(Vt.x),Ut,An,Ln);else{var ln=Vt.x<0;Xt[1]===1?Xt[0]===1?Vt.text="\u03C0":Vt.text=Xt[0]+"\u03C0":Vt.text=["<sup>",Xt[0],"</sup>","\u2044","<sub>",Xt[1],"</sub>","\u03C0"].join(""),ln&&(Vt.text=C+Vt.text)}}}}(Re,pt,rt,ut,Wt):function(Ut,Vt,en,Ln,An){An==="never"?An="":Ut.showexponent==="all"&&Math.abs(Vt.x/Ut.dtick)<1e-6&&(An="hide"),Vt.text=Ve(Vt.x,Ut,An,Ln)}(Re,pt,0,ut,Wt),Ye||(Re.tickprefix&&!zt(Re.showtickprefix)&&(pt.text=Re.tickprefix+pt.text),Re.ticksuffix&&!zt(Re.showticksuffix)&&(pt.text+=Re.ticksuffix)),Re.labelalias&&Re.labelalias.hasOwnProperty(pt.text)){var rn=Re.labelalias[pt.text];typeof rn=="string"&&(pt.text=rn)}return(Re.tickson==="boundaries"||Re.showdividers)&&(pt.xbnd=[mt(pt.x-.5),mt(pt.x+Re.dtick-.5)]),pt},X.hoverLabelText=function(Re,Fe,rt){rt&&(Re=b.extendFlat({},Re,{hoverformat:rt}));var Ye=b.isArrayOrTypedArray(Fe)?Fe[0]:Fe,ct=b.isArrayOrTypedArray(Fe)?Fe[1]:void 0;if(ct!==void 0&&ct!==Ye)return X.hoverLabelText(Re,Ye,rt)+" - "+X.hoverLabelText(Re,ct,rt);var pt=Re.type==="log"&&Ye<=0,gt=X.tickText(Re,Re.c2l(pt?-Ye:Ye),"hover").text;return pt?Ye===0?"0":C+gt:gt};var ze=["f","p","n","\u03BC","m","","k","M","G","T"];function Pe(Re){return Re==="SI"||Re==="B"}function Ue(Re){return Re>14||Re<-15}function Ve(Re,Fe,rt,Ye){var ct=Re<0,pt=Fe._tickround,gt=rt||Fe.exponentformat||"B",ut=Fe._tickexponent,Mt=X.getTickFormat(Fe),xt=Fe.separatethousands;if(Ye){var mt={exponentformat:gt,minexponent:Fe.minexponent,dtick:Fe.showexponent==="none"?Fe.dtick:k(Re)&&Math.abs(Re)||1,range:Fe.showexponent==="none"?Fe.range.map(Fe.r2d):[0,Re||1]};we(mt),pt=(Number(mt._tickround)||0)+4,ut=mt._tickexponent,Fe.hoverformat&&(Mt=Fe.hoverformat)}if(Mt)return Fe._numFormat(Mt)(Re).replace(/-/g,C);var Et,Lt=Math.pow(10,-pt)/2;if(gt==="none"&&(ut=0),(Re=Math.abs(Re))<Lt)Re="0",ct=!1;else{if(Re+=Lt,ut&&(Re*=Math.pow(10,-ut),pt+=ut),pt===0)Re=String(Math.floor(Re));else if(pt<0){Re=(Re=String(Math.round(Re))).substr(0,Re.length+pt);for(var zt=pt;zt<0;zt++)Re+="0"}else{var Wt=(Re=String(Re)).indexOf(".")+1;Wt&&(Re=Re.substr(0,Wt+pt).replace(/\.?0+$/,""))}Re=b.numSeparate(Re,Fe._separators,xt)}return ut&&gt!=="hide"&&(Pe(gt)&&Ue(ut)&&(gt="power"),Et=ut<0?C+-ut:gt!=="power"?"+"+ut:String(ut),gt==="e"||gt==="E"?Re+=gt+Et:gt==="power"?Re+="\xD710<sup>"+Et+"</sup>":gt==="B"&&ut===9?Re+="B":Pe(gt)&&(Re+=ze[ut/3+5])),ct?C+Re:Re}function Ze(Re,Fe){if(Re){var rt=Object.keys(F).reduce(function(Ye,ct){return Fe.indexOf(ct)!==-1&&F[ct].forEach(function(pt){Ye[pt]=1}),Ye},{});Object.keys(Re).forEach(function(Ye){rt[Ye]||(Ye.length===1?Re[Ye]=0:delete Re[Ye])})}}function it(Re,Fe){for(var rt=[],Ye={},ct=0;ct<Fe.length;ct++){var pt=Fe[ct];Ye[pt.text2]?Ye[pt.text2].push(pt.x):Ye[pt.text2]=[pt.x]}for(var gt in Ye)rt.push(Oe(Re,b.interp(Ye[gt],.5),gt));return rt}function tt(Re){return Re.periodX!==void 0?Re.periodX:Re.x}function dt(Re){return[Re.text,Re.x,Re.axInfo,Re.font,Re.fontSize,Re.fontColor].join("_")}function yt(Re){var Fe=Re.title.font.size,rt=(Re.title.text.match(s.BR_TAG_ALL)||[]).length;return Re.title.hasOwnProperty("standoff")?rt?Fe*(te+rt*J):Fe*te:rt?Fe*(rt+1)*J:Fe}function vt(Re,Fe){var rt=Re.l2p(Fe);return rt>1&&rt<Re._length-1}function et(Re){var Fe=M.select(Re),rt=Fe.select(".text-math-group");return rt.empty()?Fe.select("text"):rt}function Qe(Re){return Re._id+".automargin"}function wt(Re){return Qe(Re)+".mirror"}function It(Re){return Re._id+".rangeslider"}function Dt(Re,Fe){for(var rt=0;rt<Fe.length;rt++)Re.indexOf(Fe[rt])===-1&&Re.push(Fe[rt])}function Ct(Re,Fe,rt){var Ye,ct,pt=[],gt=[],ut=Re.layout;for(Ye=0;Ye<Fe.length;Ye++)pt.push(X.getFromId(Re,Fe[Ye]));for(Ye=0;Ye<rt.length;Ye++)gt.push(X.getFromId(Re,rt[Ye]));var Mt=Object.keys(r),xt=["anchor","domain","overlaying","position","side","tickangle","editType"],mt=["linear","log"];for(Ye=0;Ye<Mt.length;Ye++){var Et=Mt[Ye],Lt=pt[0][Et],zt=gt[0][Et],Wt=!0,rn=!1,Ut=!1;if(Et.charAt(0)!=="_"&&typeof Lt!="function"&&xt.indexOf(Et)===-1){for(ct=1;ct<pt.length&&Wt;ct++){var Vt=pt[ct][Et];Et==="type"&&mt.indexOf(Lt)!==-1&&mt.indexOf(Vt)!==-1&&Lt!==Vt?rn=!0:Vt!==Lt&&(Wt=!1)}for(ct=1;ct<gt.length&&Wt;ct++){var en=gt[ct][Et];Et==="type"&&mt.indexOf(zt)!==-1&&mt.indexOf(en)!==-1&&zt!==en?Ut=!0:gt[ct][Et]!==zt&&(Wt=!1)}Wt&&(rn&&(ut[pt[0]._name].type="linear"),Ut&&(ut[gt[0]._name].type="linear"),He(ut,Et,pt,gt,Re._fullLayout._dfltTitle))}}for(Ye=0;Ye<Re._fullLayout.annotations.length;Ye++){var Ln=Re._fullLayout.annotations[Ye];Fe.indexOf(Ln.xref)!==-1&&rt.indexOf(Ln.yref)!==-1&&b.swapAttrs(ut.annotations[Ye],["?"])}}function He(Re,Fe,rt,Ye,ct){var pt,gt=b.nestedProperty,ut=gt(Re[rt[0]._name],Fe).get(),Mt=gt(Re[Ye[0]._name],Fe).get();for(Fe==="title"&&(ut&&ut.text===ct.x&&(ut.text=ct.y),Mt&&Mt.text===ct.y&&(Mt.text=ct.x)),pt=0;pt<rt.length;pt++)gt(Re,rt[pt]._name+"."+Fe).set(Mt);for(pt=0;pt<Ye.length;pt++)gt(Re,Ye[pt]._name+"."+Fe).set(ut)}function We(Re){return Re._id==="angularaxis"}function Be(Re,Fe){for(var rt=Fe._rangebreaks.length,Ye=0;Ye<rt;Ye++){var ct=Fe._rangebreaks[Ye];if(Re>=ct.min&&Re<ct.max)return ct.max}return Re}function Ge(Re){return(Re.ticklabelposition||"").indexOf("inside")!==-1}function at(Re,Fe){Ge(Re._anchorAxis||{})&&Re._hideCounterAxisInsideTickLabels&&Re._hideCounterAxisInsideTickLabels(Fe)}function nt(Re,Fe,rt,Ye){var ct,pt=Re.anchor==="free"||Re.overlaying!==void 0&&Re.overlaying!==!1?Re.overlaying:Re._id;ct=Ye?Re.side==="right"?Fe:-Fe:Fe,pt in rt||(rt[pt]={}),Re.side in rt[pt]||(rt[pt][Re.side]=0),rt[pt][Re.side]+=ct}X.getTickFormat=function(Re){var Fe,rt,Ye,ct,pt,gt,ut,Mt;function xt(Lt){return typeof Lt!="string"?Lt:Number(Lt.replace("M",""))*m}function mt(Lt,zt){var Wt=["L","D"];if(typeof Lt==typeof zt){if(typeof Lt=="number")return Lt-zt;var rn=Wt.indexOf(Lt.charAt(0)),Ut=Wt.indexOf(zt.charAt(0));return rn===Ut?Number(Lt.replace(/(L|D)/g,""))-Number(zt.replace(/(L|D)/g,"")):rn-Ut}return typeof Lt=="number"?1:-1}function Et(Lt,zt){var Wt=zt[0]===null,rn=zt[1]===null,Ut=mt(Lt,zt[0])>=0,Vt=mt(Lt,zt[1])<=0;return(Wt||Ut)&&(rn||Vt)}if(Re.tickformatstops&&Re.tickformatstops.length>0)switch(Re.type){case"date":case"linear":for(Fe=0;Fe<Re.tickformatstops.length;Fe++)if((Ye=Re.tickformatstops[Fe]).enabled&&(ct=Re.dtick,pt=Ye.dtickrange,gt=void 0,ut=void 0,Mt=void 0,gt=xt||function(Lt){return Lt},ut=pt[0],Mt=pt[1],(!ut&&typeof ut!="number"||gt(ut)<=gt(ct))&&(!Mt&&typeof Mt!="number"||gt(Mt)>=gt(ct)))){rt=Ye;break}break;case"log":for(Fe=0;Fe<Re.tickformatstops.length;Fe++)if((Ye=Re.tickformatstops[Fe]).enabled&&Et(Re.dtick,Ye.dtickrange)){rt=Ye;break}}return rt?rt.value:Re.tickformat},X.getSubplots=function(Re,Fe){var rt=Re._fullLayout._subplots,Ye=rt.cartesian.concat(rt.gl2d||[]),ct=Fe?X.findSubplotsWithAxis(Ye,Fe):Ye;return ct.sort(function(pt,gt){var ut=pt.substr(1).split("y"),Mt=gt.substr(1).split("y");return ut[0]===Mt[0]?+ut[1]-+Mt[1]:+ut[0]-+Mt[0]}),ct},X.findSubplotsWithAxis=function(Re,Fe){for(var rt=new RegExp(Fe._id.charAt(0)==="x"?"^"+Fe._id+"y":Fe._id+"$"),Ye=[],ct=0;ct<Re.length;ct++){var pt=Re[ct];rt.test(pt)&&Ye.push(pt)}return Ye},X.makeClipPaths=function(Re){var Fe=Re._fullLayout;if(!Fe._hasOnlyLargeSploms){var rt,Ye,ct={_offset:0,_length:Fe.width,_id:""},pt={_offset:0,_length:Fe.height,_id:""},gt=X.list(Re,"x",!0),ut=X.list(Re,"y",!0),Mt=[];for(rt=0;rt<gt.length;rt++)for(Mt.push({x:gt[rt],y:pt}),Ye=0;Ye<ut.length;Ye++)rt===0&&Mt.push({x:ct,y:ut[Ye]}),Mt.push({x:gt[rt],y:ut[Ye]});var xt=Fe._clips.selectAll(".axesclip").data(Mt,function(mt){return mt.x._id+mt.y._id});xt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(mt){return"clip"+Fe._uid+mt.x._id+mt.y._id}).append("rect"),xt.exit().remove(),xt.each(function(mt){M.select(this).select("rect").attr({x:mt.x._offset||0,y:mt.y._offset||0,width:mt.x._length||1,height:mt.y._length||1})})}},X.draw=function(Re,Fe,rt){var Ye=Re._fullLayout;Fe==="redraw"&&Ye._paper.selectAll("g.subplot").each(function(ut){var Mt=ut[0],xt=Ye._plots[Mt];if(xt){var mt=xt.xaxis,Et=xt.yaxis;xt.xaxislayer.selectAll("."+mt._id+"tick").remove(),xt.yaxislayer.selectAll("."+Et._id+"tick").remove(),xt.xaxislayer.selectAll("."+mt._id+"tick2").remove(),xt.yaxislayer.selectAll("."+Et._id+"tick2").remove(),xt.xaxislayer.selectAll("."+mt._id+"divider").remove(),xt.yaxislayer.selectAll("."+Et._id+"divider").remove(),xt.minorGridlayer&&xt.minorGridlayer.selectAll("path").remove(),xt.gridlayer&&xt.gridlayer.selectAll("path").remove(),xt.zerolinelayer&&xt.zerolinelayer.selectAll("path").remove(),Ye._infolayer.select(".g-"+mt._id+"title").remove(),Ye._infolayer.select(".g-"+Et._id+"title").remove()}});var ct=Fe&&Fe!=="redraw"?Fe:X.listIds(Re),pt=X.list(Re).filter(function(ut){return ut.autoshift}).map(function(ut){return ut.overlaying});ct.map(function(ut){var Mt=X.getFromId(Re,ut);if(Mt.tickmode==="sync"&&Mt.overlaying){var xt=ct.findIndex(function(mt){return mt===Mt.overlaying});xt>=0&&ct.unshift(ct.splice(xt,1).shift())}});var gt={false:{left:0,right:0}};return b.syncOrAsync(ct.map(function(ut){return function(){if(ut){var Mt=X.getFromId(Re,ut);rt||(rt={}),rt.axShifts=gt,rt.overlayingShiftedAx=pt;var xt=X.drawOne(Re,Mt,rt);return Mt._shiftPusher&&nt(Mt,Mt._fullDepth||0,gt,!0),Mt._r=Mt.range.slice(),Mt._rl=b.simpleMap(Mt._r,Mt.r2l),xt}}}))},X.drawOne=function(Re,Fe,rt){var Ye,ct,pt,gt=(rt=rt||{}).axShifts||{},ut=rt.overlayingShiftedAx||[];Fe.setScale();var Mt=Re._fullLayout,xt=Fe._id,mt=xt.charAt(0),Et=X.counterLetter(xt),Lt=Mt._plots[Fe._mainSubplot];if(Lt){if(Fe._shiftPusher=Fe.autoshift||ut.indexOf(Fe._id)!==-1||ut.indexOf(Fe.overlaying)!==-1,Fe._shiftPusher&Fe.anchor==="free"){var zt=Fe.linewidth/2||0;Fe.ticks==="inside"&&(zt+=Fe.ticklen),nt(Fe,zt,gt,!0),nt(Fe,Fe.shift||0,gt,!1)}rt.skipTitle===!0&&Fe._shift!==void 0||(Fe._shift=function(sn,Kt){return sn.autoshift?Kt[sn.overlaying][sn.side]:sn.shift||0}(Fe,gt));var Wt=Lt[mt+"axislayer"],rn=Fe._mainLinePosition,Ut=rn+=Fe._shift,Vt=Fe._mainMirrorPosition,en=Fe._vals=X.calcTicks(Fe),Ln=[Fe.mirror,Ut,Vt].join("_");for(Ye=0;Ye<en.length;Ye++)en[Ye].axInfo=Ln;Fe._selections={},Fe._tickAngles&&(Fe._prevTickAngles=Fe._tickAngles),Fe._tickAngles={},Fe._depth=null;var An={};if(Fe.visible){var hn,Xt,ln=X.makeTransTickFn(Fe),nn=X.makeTransTickLabelFn(Fe),cn=Fe.ticks==="inside",Tn=Fe.ticks==="outside";if(Fe.tickson==="boundaries"){var Mn=function(sn,Kt){var Jt,on=[],fn=function(En,On){var Vn=En.xbnd[On];Vn!==null&&on.push(b.extendFlat({},En,{x:Vn}))};if(Kt.length){for(Jt=0;Jt<Kt.length;Jt++)fn(Kt[Jt],0);fn(Kt[Jt-1],1)}return on}(0,en);Xt=X.clipEnds(Fe,Mn),hn=cn?Xt:Mn}else Xt=X.clipEnds(Fe,en),hn=cn&&Fe.ticklabelmode!=="period"?Xt:en;var zn,In=Fe._gridVals=Xt,Pn=function(sn,Kt){var Jt,on,fn=[],En=Kt.length&&Kt[Kt.length-1].x<Kt[0].x,On=function(jn,Kn){var Yn=jn.xbnd[Kn];Yn!==null&&fn.push(b.extendFlat({},jn,{x:Yn}))};if(sn.showdividers&&Kt.length){for(Jt=0;Jt<Kt.length;Jt++){var Vn=Kt[Jt];Vn.text2!==on&&On(Vn,En?1:0),on=Vn.text2}On(Kt[Jt-1],En?0:1)}return fn}(Fe,en);if(!Mt._hasOnlyLargeSploms){var Hn=Fe._subplotsWith,Fn={};for(Ye=0;Ye<Hn.length;Ye++){ct=Hn[Ye];var tr=(pt=Mt._plots[ct])[Et+"axis"],or=tr._mainAxis._id;if(!Fn[or]){Fn[or]=1;var ur=mt==="x"?"M0,"+tr._offset+"v"+tr._length:"M"+tr._offset+",0h"+tr._length;X.drawGrid(Re,Fe,{vals:In,counterAxis:tr,layer:pt.gridlayer.select("."+xt),minorLayer:pt.minorGridlayer.select("."+xt),path:ur,transFn:ln}),X.drawZeroLine(Re,Fe,{counterAxis:tr,layer:pt.zerolinelayer,path:ur,transFn:ln})}}}var er=X.getTickSigns(Fe),Mr=X.getTickSigns(Fe,"minor");if(Fe.ticks||Fe.minor&&Fe.minor.ticks){var jt,tn,xn,pn,Sn=X.makeTickPath(Fe,Ut,er[2]),Gn=X.makeTickPath(Fe,Ut,Mr[2],{minor:!0});if(Fe._anchorAxis&&Fe.mirror&&Fe.mirror!==!0?(jt=X.makeTickPath(Fe,Vt,er[3]),tn=X.makeTickPath(Fe,Vt,Mr[3],{minor:!0}),xn=Sn+jt,pn=Gn+tn):(jt="",tn="",xn=Sn,pn=Gn),Fe.showdividers&&Tn&&Fe.tickson==="boundaries"){var Rn={};for(Ye=0;Ye<Pn.length;Ye++)Rn[Pn[Ye].x]=1;zn=function(sn){return Rn[sn.x]?jt:xn}}else zn=function(sn){return sn.minor?pn:xn}}if(X.drawTicks(Re,Fe,{vals:hn,layer:Wt,path:zn,transFn:ln}),Fe.mirror==="allticks"){var Nn=Object.keys(Fe._linepositions||{});for(Ye=0;Ye<Nn.length;Ye++){ct=Nn[Ye],pt=Mt._plots[ct];var ir=Fe._linepositions[ct]||[],Gt=ir[0],dn=ir[1],Pt=ir[2],Yt=X.makeTickPath(Fe,Gt,Pt?er[0]:Mr[0],{minor:Pt})+X.makeTickPath(Fe,dn,Pt?er[1]:Mr[1],{minor:Pt});X.drawTicks(Re,Fe,{vals:hn,layer:pt[mt+"axislayer"],path:Yt,transFn:ln})}}var Qt=[];if(Qt.push(function(){return X.drawLabels(Re,Fe,{vals:en,layer:Wt,plotinfo:pt,transFn:nn,labelFns:X.makeLabelFns(Fe,Ut)})}),Fe.type==="multicategory"){var mn={x:2,y:10}[mt];Qt.push(function(){var sn={x:"height",y:"width"}[mt],Kt=_n()[sn]+mn+(Fe._tickAngles[xt+"tick"]?Fe.tickfont.size*J:0);return X.drawLabels(Re,Fe,{vals:it(Fe,en),layer:Wt,cls:xt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:ln,labelFns:X.makeLabelFns(Fe,Ut+Kt*er[4])})}),Qt.push(function(){return Fe._depth=er[4]*(_n("tick2")[Fe.side]-Ut),function(sn,Kt,Jt){var on=Kt._id+"divider",fn=Jt.vals,En=Jt.layer.selectAll("path."+on).data(fn,dt);En.exit().remove(),En.enter().insert("path",":first-child").classed(on,1).classed("crisp",1).call(i.stroke,Kt.dividercolor).style("stroke-width",n.crispRound(sn,Kt.dividerwidth,1)+"px"),En.attr("transform",Jt.transFn).attr("d",Jt.path)}(Re,Fe,{vals:Pn,layer:Wt,path:X.makeTickPath(Fe,Ut,er[4],{len:Fe._depth}),transFn:ln})})}else Fe.title.hasOwnProperty("standoff")&&Qt.push(function(){Fe._depth=er[4]*(_n()[Fe.side]-Ut)});var vn=T.getComponentMethod("rangeslider","isVisible")(Fe);return rt.skipTitle||vn&&Fe.side==="bottom"||Qt.push(function(){return function(sn,Kt){var Jt,on=sn._fullLayout,fn=Kt._id,En=fn.charAt(0),On=Kt.title.font.size;if(Kt.title.hasOwnProperty("standoff"))Jt=Kt._depth+Kt.title.standoff+yt(Kt);else{var Vn=Ge(Kt);if(Kt.type==="multicategory")Jt=Kt._depth;else{var jn=1.5*On;Vn&&(jn=.5*On,Kt.ticks==="outside"&&(jn+=Kt.ticklen)),Jt=10+jn+(Kt.linewidth?Kt.linewidth-1:0)}Vn||(Jt+=En==="x"?Kt.side==="top"?On*(Kt.showticklabels?1:0):On*(Kt.showticklabels?1.5:.5):Kt.side==="right"?On*(Kt.showticklabels?1:.5):On*(Kt.showticklabels?.5:0))}var Kn,Yn,nr,rr,Jn=X.getPxPosition(sn,Kt);if(En==="x"?(Yn=Kt._offset+Kt._length/2,nr=Kt.side==="top"?Jn-Jt:Jn+Jt):(nr=Kt._offset+Kt._length/2,Yn=Kt.side==="right"?Jn+Jt:Jn-Jt,Kn={rotate:"-90",offset:0}),Kt.type!=="multicategory"){var vr=Kt._selections[Kt._id+"tick"];if(rr={selection:vr,side:Kt.side},vr&&vr.node()&&vr.node().parentNode){var lr=n.getTranslate(vr.node().parentNode);rr.offsetLeft=lr.x,rr.offsetTop=lr.y}Kt.title.hasOwnProperty("standoff")&&(rr.pad=0)}return Kt._titleStandoff=Jt,t.draw(sn,fn+"title",{propContainer:Kt,propName:Kt._name+".title.text",placeholder:on._dfltTitle[En],avoid:rr,transform:Kn,attributes:{x:Yn,y:nr,"text-anchor":"middle"}})}(Re,Fe)}),Qt.push(function(){var sn,Kt,Jt,on,fn=Fe.side.charAt(0),En=K[Fe.side].charAt(0),On=X.getPxPosition(Re,Fe),Vn=Tn?Fe.ticklen:0;(Fe.automargin||vn||Fe._shiftPusher)&&(Fe.type==="multicategory"?sn=_n("tick2"):(sn=_n(),mt==="x"&&fn==="b"&&(Fe._depth=Math.max(sn.width>0?sn.bottom-On:0,Vn))));var jn=0,Kn=0;if(Fe._shiftPusher&&(jn=Math.max(Vn,sn.height>0?fn==="l"?On-sn.left:sn.right-On:0),Fe.title.text!==Mt._dfltTitle[mt]&&(Kn=(Fe._titleStandoff||0)+(Fe._titleScoot||0),fn==="l"&&(Kn+=yt(Fe))),Fe._fullDepth=Math.max(jn,Kn)),Fe.automargin){Kt={x:0,y:0,r:0,l:0,t:0,b:0};var Yn=[0,1],nr=typeof Fe._shift=="number"?Fe._shift:0;if(mt==="x"){if(fn==="b"?Kt[fn]=Fe._depth:(Kt[fn]=Fe._depth=Math.max(sn.width>0?On-sn.top:0,Vn),Yn.reverse()),sn.width>0){var rr=sn.right-(Fe._offset+Fe._length);rr>0&&(Kt.xr=1,Kt.r=rr);var Jn=Fe._offset-sn.left;Jn>0&&(Kt.xl=0,Kt.l=Jn)}}else if(fn==="l"?(Fe._depth=Math.max(sn.height>0?On-sn.left:0,Vn),Kt[fn]=Fe._depth-nr):(Fe._depth=Math.max(sn.height>0?sn.right-On:0,Vn),Kt[fn]=Fe._depth+nr,Yn.reverse()),sn.height>0){var vr=sn.bottom-(Fe._offset+Fe._length);vr>0&&(Kt.yb=0,Kt.b=vr);var lr=Fe._offset-sn.top;lr>0&&(Kt.yt=1,Kt.t=lr)}Kt[Et]=Fe.anchor==="free"?Fe.position:Fe._anchorAxis.domain[Yn[0]],Fe.title.text!==Mt._dfltTitle[mt]&&(Kt[fn]+=yt(Fe)+(Fe.title.standoff||0)),Fe.mirror&&Fe.anchor!=="free"&&((Jt={x:0,y:0,r:0,l:0,t:0,b:0})[En]=Fe.linewidth,Fe.mirror&&Fe.mirror!==!0&&(Jt[En]+=Vn),Fe.mirror===!0||Fe.mirror==="ticks"?Jt[Et]=Fe._anchorAxis.domain[Yn[1]]:Fe.mirror!=="all"&&Fe.mirror!=="allticks"||(Jt[Et]=[Fe._counterDomainMin,Fe._counterDomainMax][Yn[1]]))}vn&&(on=T.getComponentMethod("rangeslider","autoMarginOpts")(Re,Fe)),typeof Fe.automargin=="string"&&(Ze(Kt,Fe.automargin),Ze(Jt,Fe.automargin)),o.autoMargin(Re,Qe(Fe),Kt),o.autoMargin(Re,wt(Fe),Jt),o.autoMargin(Re,It(Fe),on)}),b.syncOrAsync(Qt)}}function _n(sn){var Kt=xt+(sn||"tick");return An[Kt]||(An[Kt]=function(Jt,on,fn){var En,On,Vn,jn;if(Jt._selections[on].size())En=1/0,On=-1/0,Vn=1/0,jn=-1/0,Jt._selections[on].each(function(){var Yn=et(this),nr=n.bBox(Yn.node().parentNode);En=Math.min(En,nr.top),On=Math.max(On,nr.bottom),Vn=Math.min(Vn,nr.left),jn=Math.max(jn,nr.right)});else{var Kn=X.makeLabelFns(Jt,fn);En=On=Kn.yFn({dx:0,dy:0,fontSize:0}),Vn=jn=Kn.xFn({dx:0,dy:0,fontSize:0})}return{top:En,bottom:On,left:Vn,right:jn,height:On-En,width:jn-Vn}}(Fe,Kt,Ut)),An[Kt]}},X.getTickSigns=function(Re,Fe){var rt=Re._id.charAt(0),Ye={x:"top",y:"right"}[rt],ct=Re.side===Ye?1:-1,pt=[-1,1,ct,-ct];return(Fe?(Re.minor||{}).ticks:Re.ticks)!=="inside"==(rt==="x")&&(pt=pt.map(function(gt){return-gt})),Re.side&&pt.push({l:-1,t:-1,r:1,b:1}[Re.side.charAt(0)]),pt},X.makeTransTickFn=function(Re){return Re._id.charAt(0)==="x"?function(Fe){return h(Re._offset+Re.l2p(Fe.x),0)}:function(Fe){return h(0,Re._offset+Re.l2p(Fe.x))}},X.makeTransTickLabelFn=function(Re){var Fe=function(ct){var pt=ct.ticklabelposition||"",gt=function(Vt){return pt.indexOf(Vt)!==-1},ut=gt("top"),Mt=gt("left"),xt=gt("right"),mt=gt("bottom"),Et=gt("inside"),Lt=mt||Mt||ut||xt;if(!Lt&&!Et)return[0,0];var zt=ct.side,Wt=Lt?(ct.tickwidth||0)/2:0,rn=3,Ut=ct.tickfont?ct.tickfont.size:12;return(mt||ut)&&(Wt+=Ut*te,rn+=(ct.linewidth||0)/2),(Mt||xt)&&(Wt+=(ct.linewidth||0)/2,rn+=3),Et&&zt==="top"&&(rn-=Ut*(1-te)),(Mt||ut)&&(Wt=-Wt),zt!=="bottom"&&zt!=="right"||(rn=-rn),[Lt?Wt:0,Et?rn:0]}(Re),rt=Fe[0],Ye=Fe[1];return Re._id.charAt(0)==="x"?function(ct){return h(rt+Re._offset+Re.l2p(tt(ct)),Ye)}:function(ct){return h(Ye,rt+Re._offset+Re.l2p(tt(ct)))}},X.makeTickPath=function(Re,Fe,rt,Ye){Ye||(Ye={});var ct=Ye.minor;if(ct&&!Re.minor)return"";var pt=Ye.len!==void 0?Ye.len:ct?Re.minor.ticklen:Re.ticklen,gt=Re._id.charAt(0),ut=(Re.linewidth||1)/2;return gt==="x"?"M0,"+(Fe+ut*rt)+"v"+pt*rt:"M"+(Fe+ut*rt)+",0h"+pt*rt},X.makeLabelFns=function(Re,Fe,rt){var Ye=Re.ticklabelposition||"",ct=function(Mn){return Ye.indexOf(Mn)!==-1},pt=ct("top"),gt=ct("left"),ut=ct("right"),Mt=ct("bottom")||gt||pt||ut,xt=ct("inside"),mt=Ye==="inside"&&Re.ticks==="inside"||!xt&&Re.ticks==="outside"&&Re.tickson!=="boundaries",Et=0,Lt=0,zt=mt?Re.ticklen:0;if(xt?zt*=-1:Mt&&(zt=0),mt&&(Et+=zt,rt)){var Wt=b.deg2rad(rt);Et=zt*Math.cos(Wt)+1,Lt=zt*Math.sin(Wt)}Re.showticklabels&&(mt||Re.showline)&&(Et+=.2*Re.tickfont.size);var rn,Ut,Vt,en,Ln,An={labelStandoff:Et+=(Re.linewidth||1)/2*(xt?-1:1),labelShift:Lt},hn=0,Xt=Re.side,ln=Re._id.charAt(0),nn=Re.tickangle;if(ln==="x")en=(Ln=!xt&&Xt==="bottom"||xt&&Xt==="top")?1:-1,xt&&(en*=-1),rn=Lt*en,Ut=Fe+Et*en,Vt=Ln?1:-.2,Math.abs(nn)===90&&(xt?Vt+=V:Vt=nn===-90&&Xt==="bottom"?te:nn===90&&Xt==="top"?V:.5,hn=V/2*(nn/90)),An.xFn=function(Mn){return Mn.dx+rn+hn*Mn.fontSize},An.yFn=function(Mn){return Mn.dy+Ut+Mn.fontSize*Vt},An.anchorFn=function(Mn,zn){if(Mt){if(gt)return"end";if(ut)return"start"}return k(zn)&&zn!==0&&zn!==180?zn*en<0!==xt?"end":"start":"middle"},An.heightFn=function(Mn,zn,In){return zn<-60||zn>60?-.5*In:Re.side==="top"!==xt?-In:0};else if(ln==="y"){if(en=(Ln=!xt&&Xt==="left"||xt&&Xt==="right")?1:-1,xt&&(en*=-1),rn=Et,Ut=Lt*en,Vt=0,xt||Math.abs(nn)!==90||(Vt=nn===-90&&Xt==="left"||nn===90&&Xt==="right"?te:.5),xt){var cn=k(nn)?+nn:0;if(cn!==0){var Tn=b.deg2rad(cn);hn=Math.abs(Math.sin(Tn))*te*en,Vt=0}}An.xFn=function(Mn){return Mn.dx+Fe-(rn+Mn.fontSize*Vt)*en+hn*Mn.fontSize},An.yFn=function(Mn){return Mn.dy+Ut+Mn.fontSize*V},An.anchorFn=function(Mn,zn){return k(zn)&&Math.abs(zn)===90?"middle":Ln?"end":"start"},An.heightFn=function(Mn,zn,In){return Re.side==="right"&&(zn*=-1),zn<-30?-In:zn<30?-.5*In:0}}return An},X.drawTicks=function(Re,Fe,rt){rt=rt||{};var Ye=Fe._id+"tick",ct=[].concat(Fe.minor&&Fe.minor.ticks?rt.vals.filter(function(gt){return gt.minor&&!gt.noTick}):[]).concat(Fe.ticks?rt.vals.filter(function(gt){return!gt.minor&&!gt.noTick}):[]),pt=rt.layer.selectAll("path."+Ye).data(ct,dt);pt.exit().remove(),pt.enter().append("path").classed(Ye,1).classed("ticks",1).classed("crisp",rt.crisp!==!1).each(function(gt){return i.stroke(M.select(this),gt.minor?Fe.minor.tickcolor:Fe.tickcolor)}).style("stroke-width",function(gt){return n.crispRound(Re,gt.minor?Fe.minor.tickwidth:Fe.tickwidth,1)+"px"}).attr("d",rt.path).style("display",null),at(Fe,[N]),pt.attr("transform",rt.transFn)},X.drawGrid=function(Re,Fe,rt){if(rt=rt||{},Fe.tickmode!=="sync"){var Ye=Fe._id+"grid",ct=Fe.minor&&Fe.minor.showgrid,pt=ct?rt.vals.filter(function(Vt){return Vt.minor}):[],gt=Fe.showgrid?rt.vals.filter(function(Vt){return!Vt.minor}):[],ut=rt.counterAxis;if(ut&&X.shouldShowZeroLine(Re,Fe,ut))for(var Mt=Fe.tickmode==="array",xt=0;xt<gt.length;xt++){var mt=gt[xt].x;if(Mt?!mt:Math.abs(mt)<Fe.dtick/100){if(gt=gt.slice(0,xt).concat(gt.slice(xt+1)),!Mt)break;xt--}}Fe._gw=n.crispRound(Re,Fe.gridwidth,1);for(var Et=ct?n.crispRound(Re,Fe.minor.gridwidth,1):0,Lt=rt.layer,zt=rt.minorLayer,Wt=1;Wt>=0;Wt--){var rn=Wt?Lt:zt;if(rn){var Ut=rn.selectAll("path."+Ye).data(Wt?gt:pt,dt);Ut.exit().remove(),Ut.enter().append("path").classed(Ye,1).classed("crisp",rt.crisp!==!1),Ut.attr("transform",rt.transFn).attr("d",rt.path).each(function(Vt){return i.stroke(M.select(this),Vt.minor?Fe.minor.gridcolor:Fe.gridcolor||"#ddd")}).style("stroke-dasharray",function(Vt){return n.dashStyle(Vt.minor?Fe.minor.griddash:Fe.griddash,Vt.minor?Fe.minor.gridwidth:Fe.gridwidth)}).style("stroke-width",function(Vt){return(Vt.minor?Et:Fe._gw)+"px"}).style("display",null),typeof rt.path=="function"&&Ut.attr("d",rt.path)}}at(Fe,[j,D])}},X.drawZeroLine=function(Re,Fe,rt){rt=rt||rt;var Ye=Fe._id+"zl",ct=X.shouldShowZeroLine(Re,Fe,rt.counterAxis),pt=rt.layer.selectAll("path."+Ye).data(ct?[{x:0,id:Fe._id}]:[]);pt.exit().remove(),pt.enter().append("path").classed(Ye,1).classed("zl",1).classed("crisp",rt.crisp!==!1).each(function(){rt.layer.selectAll("path").sort(function(gt,ut){return re(gt.id,ut.id)})}),pt.attr("transform",rt.transFn).attr("d",rt.path).call(i.stroke,Fe.zerolinecolor||i.defaultLine).style("stroke-width",n.crispRound(Re,Fe.zerolinewidth,Fe._gw||1)+"px").style("display",null),at(Fe,[R])},X.drawLabels=function(Re,Fe,rt){rt=rt||{};var Ye=Re._fullLayout,ct=Fe._id,pt=rt.cls||ct+"tick",gt=rt.vals.filter(function(Fn){return Fn.text}),ut=rt.labelFns,Mt=rt.secondary?0:Fe.tickangle,xt=(Fe._prevTickAngles||{})[pt],mt=rt.layer.selectAll("g."+pt).data(Fe.showticklabels?gt:[],dt),Et=[];function Lt(Fn,tr){Fn.each(function(or){var ur=M.select(this),er=ur.select(".text-math-group"),Mr=ut.anchorFn(or,tr),jt=rt.transFn.call(ur.node(),or)+(k(tr)&&+tr!=0?" rotate("+tr+","+ut.xFn(or)+","+(ut.yFn(or)-or.fontSize/2)+")":""),tn=s.lineCount(ur),xn=J*or.fontSize,pn=ut.heightFn(or,k(tr)?+tr:0,(tn-1)*xn);if(pn&&(jt+=h(0,pn)),er.empty()){var Sn=ur.select("text");Sn.attr({transform:jt,"text-anchor":Mr}),Sn.style("opacity",1),Fe._adjustTickLabelsOverflow&&Fe._adjustTickLabelsOverflow()}else{var Gn=n.bBox(er.node()).width*{end:-.5,start:.5}[Mr];er.attr("transform",jt+h(Gn,0))}})}mt.enter().append("g").classed(pt,1).append("text").attr("text-anchor","middle").each(function(Fn){var tr=M.select(this),or=Re._promises.length;tr.call(s.positionText,ut.xFn(Fn),ut.yFn(Fn)).call(n.font,Fn.font,Fn.fontSize,Fn.fontColor).text(Fn.text).call(s.convertToTspans,Re),Re._promises[or]?Et.push(Re._promises.pop().then(function(){Lt(tr,Mt)})):Lt(tr,Mt)}),at(Fe,[W]),mt.exit().remove(),rt.repositionOnUpdate&&mt.each(function(Fn){M.select(this).select("text").call(s.positionText,ut.xFn(Fn),ut.yFn(Fn))}),Fe._adjustTickLabelsOverflow=function(){var Fn=Fe.ticklabeloverflow;if(Fn&&Fn!=="allow"){var tr=Fn.indexOf("hide")!==-1,or=Fe._id.charAt(0)==="x",ur=0,er=or?Re._fullLayout.width:Re._fullLayout.height;if(Fn.indexOf("domain")!==-1){var Mr=b.simpleMap(Fe.range,Fe.r2l);ur=Fe.l2p(Mr[0])+Fe._offset,er=Fe.l2p(Mr[1])+Fe._offset}var jt=Math.min(ur,er),tn=Math.max(ur,er),xn=Fe.side,pn=1/0,Sn=-1/0;for(var Gn in mt.each(function(ir){var Gt=M.select(this);if(Gt.select(".text-math-group").empty()){var dn=n.bBox(Gt.node()),Pt=0;or?(dn.right>tn||dn.left<jt)&&(Pt=1):(dn.bottom>tn||dn.top+(Fe.tickangle?0:ir.fontSize/4)<jt)&&(Pt=1);var Yt=Gt.select("text");Pt?tr&&Yt.style("opacity",0):(Yt.style("opacity",1),pn=xn==="bottom"||xn==="right"?Math.min(pn,or?dn.top:dn.left):-1/0,Sn=xn==="top"||xn==="left"?Math.max(Sn,or?dn.bottom:dn.right):1/0)}}),Ye._plots){var Rn=Ye._plots[Gn];if(Fe._id===Rn.xaxis._id||Fe._id===Rn.yaxis._id){var Nn=or?Rn.yaxis:Rn.xaxis;Nn&&(Nn["_visibleLabelMin_"+Fe._id]=pn,Nn["_visibleLabelMax_"+Fe._id]=Sn)}}}},Fe._hideCounterAxisInsideTickLabels=function(Fn){var tr=Fe._id.charAt(0)==="x",or=[];for(var ur in Ye._plots){var er=Ye._plots[ur];Fe._id!==er.xaxis._id&&Fe._id!==er.yaxis._id||or.push(tr?er.yaxis:er.xaxis)}or.forEach(function(Mr,jt){Mr&&Ge(Mr)&&(Fn||[R,D,j,N,W]).forEach(function(tn){var xn=tn.K==="tick"&&tn.L==="text"&&Fe.ticklabelmode==="period",pn=Ye._plots[Fe._mainSubplot];(tn.K===R.K?pn.zerolinelayer.selectAll("."+Fe._id+"zl"):tn.K===D.K?pn.minorGridlayer.selectAll("."+Fe._id):tn.K===j.K?pn.gridlayer.selectAll("."+Fe._id):pn[Fe._id.charAt(0)+"axislayer"]).each(function(){var Sn=M.select(this);tn.L&&(Sn=Sn.selectAll(tn.L)),Sn.each(function(Gn){var Rn=Fe.l2p(xn?tt(Gn):Gn.x)+Fe._offset,Nn=M.select(this);Rn<Fe["_visibleLabelMax_"+Mr._id]&&Rn>Fe["_visibleLabelMin_"+Mr._id]?Nn.style("display","none"):tn.K!=="tick"||jt||Nn.style("display",null)})})})})},Lt(mt,xt+1?xt:Mt);var zt=null;Fe._selections&&(Fe._selections[pt]=mt);var Wt=[function(){return Et.length&&Promise.all(Et)}];Fe.automargin&&Ye._redrawFromAutoMarginCount&&xt===90?(zt=xt,Wt.push(function(){Lt(mt,xt)})):Wt.push(function(){if(Lt(mt,Mt),gt.length&&Fe.autotickangles&&(Fe.type!=="log"||String(Fe.dtick).charAt(0)!=="D")){zt=Fe.autotickangles[0];var Fn,tr=0,or=[],ur=1;if(mt.each(function(vn){tr=Math.max(tr,vn.fontSize);var _n=Fe.l2p(vn.x),sn=et(this),Kt=n.bBox(sn.node());ur=Math.max(ur,s.lineCount(sn)),or.push({top:0,bottom:10,height:10,left:_n-Kt.width/2,right:_n+Kt.width/2+2,width:Kt.width+2})}),Fe.tickson!=="boundaries"&&!Fe.showdividers||rt.secondary){var er=gt.length,Mr=Math.abs((gt[er-1].x-gt[0].x)*Fe._m)/(er-1),jt=Fe.ticklabelposition||"",tn=function(vn){return jt.indexOf(vn)!==-1},xn=tn("top"),pn=tn("left"),Sn=tn("right"),Gn=tn("bottom")||pn||xn||Sn?(Fe.tickwidth||0)+6:0,Rn=Mr,Nn=1.25*tr*ur,ir=Rn/Math.sqrt(Math.pow(Rn,2)+Math.pow(Nn,2)),Gt=Fe.autotickangles.map(function(vn){return vn*Math.PI/180}),dn=Gt.find(function(vn){return Math.abs(Math.cos(vn))<=ir});dn===void 0&&(dn=Gt.reduce(function(vn,_n){return Math.abs(Math.cos(vn))<Math.abs(Math.cos(_n))?vn:_n},Gt[0]));var Pt=dn*(180/Math.PI);for(Fn=0;Fn<or.length-1;Fn++)if(b.bBoxIntersect(or[Fn],or[Fn+1],Gn)){zt=Pt;break}}else{var Yt=2;for(Fe.ticks&&(Yt+=Fe.tickwidth/2),Fn=0;Fn<or.length;Fn++){var Qt=gt[Fn].xbnd,mn=or[Fn];if(Qt[0]!==null&&mn.left-Fe.l2p(Qt[0])<Yt||Qt[1]!==null&&Fe.l2p(Qt[1])-mn.right<Yt){zt=90;break}}}zt&&Lt(mt,zt)}}),Fe._tickAngles&&Wt.push(function(){Fe._tickAngles[pt]=zt===null?k(Mt)?Mt:0:zt});var rn=function(){var Fn=0,tr=0;return mt.each(function(or,ur){var er,Mr=et(this);Mr.select(".text-math-group").empty()&&(Fe._vals[ur]&&(er=Fe._vals[ur].bb||n.bBox(Mr.node()),Fe._vals[ur].bb=er),Fn=Math.max(Fn,er.width),tr=Math.max(tr,er.height))}),{labelsMaxW:Fn,labelsMaxH:tr}},Ut=Fe._anchorAxis;if(Ut&&(Ut.autorange||Ut.insiderange)&&Ge(Fe)&&!oe(Ye,Fe._id)&&(Ye._insideTickLabelsUpdaterange||(Ye._insideTickLabelsUpdaterange={}),Ut.autorange&&(Ye._insideTickLabelsUpdaterange[Ut._name+".autorange"]=Ut.autorange,Wt.push(rn)),Ut.insiderange)){var Vt=rn(),en=Fe._id.charAt(0)==="y"?Vt.labelsMaxW:Vt.labelsMaxH;en+=6,Fe.ticklabelposition==="inside"&&(en+=Fe.ticklen||0);var Ln=Fe.side==="right"||Fe.side==="top"?1:-1,An=Ln===1?1:0,hn=Ln===1?0:1,Xt=[];Xt[hn]=Ut.range[hn];var ln=Ut.range,nn=Ut.r2p(ln[An]),cn=Ut.r2p(ln[hn]),Tn=Ye._insideTickLabelsUpdaterange[Ut._name+".range"];if(Tn){var Mn=Ut.r2p(Tn[An]),zn=Ut.r2p(Tn[hn]),In=Ln*(Fe._id.charAt(0)==="y"?1:-1);In*nn<In*Mn&&(nn=Mn,Xt[An]=ln[An]=Tn[An]),In*cn>In*zn&&(cn=zn,Xt[hn]=ln[hn]=Tn[hn])}var Pn=Math.abs(cn-nn);Pn-en>0?en*=1+en/(Pn-=en):en=0,Fe._id.charAt(0)!=="y"&&(en=-en),Xt[An]=Ut.p2r(Ut.r2p(ln[An])+Ln*en),Ut.autorange==="min"||Ut.autorange==="max reversed"?(Xt[0]=null,Ut._rangeInitial0=void 0,Ut._rangeInitial1=void 0):Ut.autorange!=="max"&&Ut.autorange!=="min reversed"||(Xt[1]=null,Ut._rangeInitial0=void 0,Ut._rangeInitial1=void 0),Ye._insideTickLabelsUpdaterange[Ut._name+".range"]=Xt}var Hn=b.syncOrAsync(Wt);return Hn&&Hn.then&&Re._promises.push(Hn),Hn},X.getPxPosition=function(Re,Fe){var rt,Ye=Re._fullLayout._size,ct=Fe._id.charAt(0),pt=Fe.side;return Fe.anchor!=="free"?rt=Fe._anchorAxis:ct==="x"?rt={_offset:Ye.t+(1-(Fe.position||0))*Ye.h,_length:0}:ct==="y"&&(rt={_offset:Ye.l+(Fe.position||0)*Ye.w+Fe._shift,_length:0}),pt==="top"||pt==="left"?rt._offset:pt==="bottom"||pt==="right"?rt._offset+rt._length:void 0},X.shouldShowZeroLine=function(Re,Fe,rt){var Ye=b.simpleMap(Fe.range,Fe.r2l);return Ye[0]*Ye[1]<=0&&Fe.zeroline&&(Fe.type==="linear"||Fe.type==="-")&&!(Fe.rangebreaks&&Fe.maskBreaks(0)===O)&&(vt(Fe,0)||!function(ct,pt,gt,ut){var Mt=gt._mainAxis;if(Mt){var xt=ct._fullLayout,mt=pt._id.charAt(0),Et=X.counterLetter(pt._id),Lt=pt._offset+(Math.abs(ut[0])<Math.abs(ut[1])==(mt==="x")?0:pt._length),zt=xt._plots[gt._mainSubplot];if(!(zt.mainplotinfo||zt).overlays.length)return Vt(gt);for(var Wt=X.list(ct,Et),rn=0;rn<Wt.length;rn++){var Ut=Wt[rn];if(Ut._mainAxis===Mt&&Vt(Ut))return!0}}function Vt(en){if(!en.showline||!en.linewidth)return!1;var Ln=Math.max((en.linewidth+pt.zerolinewidth)/2,1);function An(ln){return typeof ln=="number"&&Math.abs(ln-Lt)<Ln}if(An(en._mainLinePosition)||An(en._mainMirrorPosition))return!0;var hn=en._linepositions||{};for(var Xt in hn)if(An(hn[Xt][0])||An(hn[Xt][1]))return!0}}(Re,Fe,rt,Ye)||function(ct,pt){for(var gt=ct._fullData,ut=pt._mainSubplot,Mt=pt._id.charAt(0),xt=0;xt<gt.length;xt++){var mt=gt[xt];if(mt.visible===!0&&mt.xaxis+mt.yaxis===ut&&(T.traceIs(mt,"bar-like")&&mt.orientation==={x:"h",y:"v"}[Mt]||mt.fill&&mt.fill.charAt(mt.fill.length-1)===Mt))return!0}return!1}(Re,Fe))},X.clipEnds=function(Re,Fe){return Fe.filter(function(rt){return vt(Re,rt.x)})},X.allowAutoMargin=function(Re){for(var Fe=X.list(Re,"",!0),rt=0;rt<Fe.length;rt++){var Ye=Fe[rt];Ye.automargin&&(o.allowAutoMargin(Re,Qe(Ye)),Ye.mirror&&o.allowAutoMargin(Re,wt(Ye))),T.getComponentMethod("rangeslider","isVisible")(Ye)&&o.allowAutoMargin(Re,It(Ye))}},X.swap=function(Re,Fe){for(var rt=function(ct,pt){var gt,ut,Mt=[];for(gt=0;gt<pt.length;gt++){var xt=[],mt=ct._fullData[pt[gt]].xaxis,Et=ct._fullData[pt[gt]].yaxis;if(mt&&Et){for(ut=0;ut<Mt.length;ut++)Mt[ut].x.indexOf(mt)===-1&&Mt[ut].y.indexOf(Et)===-1||xt.push(ut);if(xt.length){var Lt,zt=Mt[xt[0]];if(xt.length>1)for(ut=1;ut<xt.length;ut++)Lt=Mt[xt[ut]],Dt(zt.x,Lt.x),Dt(zt.y,Lt.y);Dt(zt.x,[mt]),Dt(zt.y,[Et])}else Mt.push({x:[mt],y:[Et]})}}return Mt}(Re,Fe),Ye=0;Ye<rt.length;Ye++)Ct(Re,rt[Ye].x,rt[Ye].y)}},52976:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=e(39032).BADNUM,T=k.isArrayOrTypedArray,b=k.isDateTime,h=k.cleanNumber,s=Math.round;function t(n,r){return r?M(n):typeof n=="number"}function i(n){return Math.max(1,(n-1)/1e3)}ee.exports=function(n,r,a){var l=n,u=a.noMultiCategory;if(T(l)&&!l.length)return"-";if(!u&&function(p){return T(p[0])&&T(p[1])}(l))return"multicategory";if(u&&Array.isArray(l[0])){for(var d=[],c=0;c<l.length;c++)if(T(l[c]))for(var x=0;x<l[c].length;x++)d.push(l[c][x]);l=d}if(function(p,v){for(var m=p.length,y=i(m),_=0,f=0,S={},w=0;w<m;w+=y){var E=p[s(w)],P=String(E);S[P]||(S[P]=1,b(E,v)&&_++,M(E)&&f++)}return _>2*f}(l,r))return"date";var g=a.autotypenumbers!=="strict";return function(p,v){for(var m=p.length,y=i(m),_=0,f=0,S={},w=0;w<m;w+=y){var E=p[s(w)],P=String(E);if(!S[P]){S[P]=1;var C=typeof E;C==="boolean"?f++:(v?h(E)!==o:C==="number")?_++:C==="string"&&f++}}return f>2*_}(l,g)?"category":function(p,v){for(var m=p.length,y=0;y<m;y++)if(t(p[y],v))return!0;return!1}(l,g)?"linear":"-"}},28336:function(ee,z,e){"use strict";var M=e(38248),k=e(24040),o=e(3400),T=e(31780),b=e(51272),h=e(94724),s=e(26332),t=e(25404),i=e(95936),n=e(42568),r=e(22416),a=e(42136),l=e(96312),u=e(78344),d=e(33816).WEEKDAY_PATTERN,c=e(33816).HOUR_PATTERN;function x(v,m,y){function _(R,j){return o.coerce(v,m,h.rangebreaks,R,j)}if(_("enabled")){var f=_("bounds");if(f&&f.length>=2){var S,w,E="";if(f.length===2){for(S=0;S<2;S++)if(w=p(f[S])){E=d;break}}var P=_("pattern",E);if(P===d)for(S=0;S<2;S++)(w=p(f[S]))&&(m.bounds[S]=f[S]=w-1);if(P)for(S=0;S<2;S++)switch(w=f[S],P){case d:if(!M(w)||(w=+w)!==Math.floor(w)||w<0||w>=7)return void(m.enabled=!1);m.bounds[S]=f[S]=w;break;case c:if(!M(w)||(w=+w)<0||w>24)return void(m.enabled=!1);m.bounds[S]=f[S]=w}if(y.autorange===!1){var C=y.range;if(C[0]<C[1]){if(f[0]<C[0]&&f[1]>C[1])return void(m.enabled=!1)}else if(f[0]>C[0]&&f[1]<C[1])return void(m.enabled=!1)}}else{var O=_("values");if(!O||!O.length)return void(m.enabled=!1);_("dvalue")}}}ee.exports=function(v,m,y,_,f){var S,w=_.letter,E=_.font||{},P=_.splomStash||{},C=y("visible",!_.visibleDflt),O=m._template||{},R=m.type||O.type||"-";R==="date"&&(k.getComponentMethod("calendars","handleDefaults")(v,m,"calendar",_.calendar),_.noTicklabelmode||(S=y("ticklabelmode")));var j="";_.noTicklabelposition&&R!=="multicategory"||(j=o.coerce(v,m,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:S==="period"?["outside","inside"]:w==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),_.noTicklabeloverflow||y("ticklabeloverflow",j.indexOf("inside")!==-1?"hide past domain":R==="category"||R==="multicategory"?"allow":"hide past div"),u(m,f),l(v,m,y,_),r(v,m,y,_),R==="category"||_.noHover||y("hoverformat");var D=y("color"),N=D!==h.color.dflt?D:E.color,W=P.label||f._dfltTitle[w];if(n(v,m,y,R,_),!C)return m;y("title.text",W),o.coerceFont(y,"title.font",{family:E.family,size:o.bigFont(E.size),color:N}),s(v,m,y,R);var F=_.hasMinor;if(F&&(T.newContainer(m,"minor"),s(v,m,y,R,{isMinor:!0})),i(v,m,y,R,_),t(v,m,y,_),F){var U=_.isMinor;_.isMinor=!0,t(v,m,y,_),_.isMinor=U}a(v,m,y,{dfltColor:D,bgColor:_.bgColor,showGrid:_.showGrid,hasMinor:F,attributes:h}),!F||m.minor.ticks||m.minor.showgrid||delete m.minor,(m.showline||m.ticks)&&y("mirror");var V,te=R==="multicategory";if(_.noTickson||R!=="category"&&!te||!m.ticks&&!m.showgrid||(te&&(V="boundaries"),y("tickson",V)==="boundaries"&&delete m.ticklabelposition),te&&y("showdividers")&&(y("dividercolor"),y("dividerwidth")),R==="date")if(b(v,m,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:x}),m.rangebreaks.length){for(var J=0;J<m.rangebreaks.length;J++)if(m.rangebreaks[J].pattern===d){m._hasDayOfWeekBreaks=!0;break}if(u(m,f),f._has("scattergl")||f._has("splom"))for(var K=0;K<_.data.length;K++){var X=_.data[K];X.type!=="scattergl"&&X.type!=="splom"||(X.visible=!1,o.warn(X.type+" traces do not work on axes with rangebreaks. Setting trace "+X.index+" to `visible: false`."))}}else delete m.rangebreaks;return m};var g={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function p(v){if(typeof v=="string")return g[v.substr(0,3).toLowerCase()]}},29736:function(ee,z,e){"use strict";var M=e(26880),k=M.FORMAT_LINK,o=M.DATE_FORMAT_LINK;function T(h,s){return["Sets the "+h+" formatting rule"+(s?"for `"+s+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+k+"."].join(" ")}function b(h,s){return T(h,s)+[" And for dates see: "+o+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ee.exports={axisHoverFormat:function(h,s){return{valType:"string",dflt:"",editType:"none",description:(s?T:b)("hover text",h)+["By default the values are formatted using "+(s?"generic number format":"`"+h+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:T,descriptionWithDates:b}},79811:function(ee,z,e){"use strict";var M=e(24040),k=e(33816);function o(T,b){if(b&&b.length){for(var h=0;h<b.length;h++)if(b[h][T])return!0}return!1}z.id2name=function(T){if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)){var b=T.split(" ")[0].substr(1);return b==="1"&&(b=""),T.charAt(0)+"axis"+b}},z.name2id=function(T){if(T.match(k.AX_NAME_PATTERN)){var b=T.substr(5);return b==="1"&&(b=""),T.charAt(0)+b}},z.cleanId=function(T,b,h){var s=/( domain)$/.test(T);if(typeof T=="string"&&T.match(k.AX_ID_PATTERN)&&(!b||T.charAt(0)===b)&&(!s||h)){var t=T.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),T.charAt(0)+t+(s&&h?" domain":"")}},z.list=function(T,b,h){var s=T._fullLayout;if(!s)return[];var t,i=z.listIds(T,b),n=new Array(i.length);for(t=0;t<i.length;t++){var r=i[t];n[t]=s[r.charAt(0)+"axis"+r.substr(1)]}if(!h){var a=s._subplots.gl3d||[];for(t=0;t<a.length;t++){var l=s[a[t]];b?n.push(l[b+"axis"]):n.push(l.xaxis,l.yaxis,l.zaxis)}}return n},z.listIds=function(T,b){var h=T._fullLayout;if(!h)return[];var s=h._subplots;return b?s[b+"axis"]:s.xaxis.concat(s.yaxis)},z.getFromId=function(T,b,h){var s=T._fullLayout;return b=b===void 0||typeof b!="string"?b:b.replace(" domain",""),h==="x"?b=b.replace(/y[0-9]*/,""):h==="y"&&(b=b.replace(/x[0-9]*/,"")),s[z.id2name(b)]},z.getFromTrace=function(T,b,h){var s=T._fullLayout,t=null;if(M.traceIs(b,"gl3d")){var i=b.scene;i.substr(0,5)==="scene"&&(t=s[i][h+"axis"])}else t=z.getFromId(T,b[h+"axis"]||h);return t},z.idSort=function(T,b){var h=T.charAt(0),s=b.charAt(0);return h!==s?h>s?1:-1:+(T.substr(1)||1)-+(b.substr(1)||1)},z.ref2id=function(T){return!!/^[xyz]/.test(T)&&T.split(" ")[0]},z.isLinked=function(T,b){return o(b,T._axisMatchGroups)||o(b,T._axisConstraintGroups)}},22416:function(ee,z,e){"use strict";var M=e(38116).isTypedArraySpec;ee.exports=function(k,o,T,b){if(o.type==="category"){var h,s=k.categoryarray,t=Array.isArray(s)&&s.length>0||M(s);t&&(h="array");var i,n=T("categoryorder",h);n==="array"&&(i=T("categoryarray")),t||n!=="array"||(n=o.categoryorder="trace"),n==="trace"?o._initialCategories=[]:n==="array"?o._initialCategories=i.slice():(i=function(r,a){var l,u,d,c=a.dataAttr||r._id.charAt(0),x={};if(a.axData)l=a.axData;else for(l=[],u=0;u<a.data.length;u++){var g=a.data[u];g[c+"axis"]===r._id&&l.push(g)}for(u=0;u<l.length;u++){var p=l[u][c];for(d=0;d<p.length;d++){var v=p[d];v!=null&&(x[v]=1)}}return Object.keys(x)}(o,b).sort(),n==="category ascending"?o._initialCategories=i:n==="category descending"&&(o._initialCategories=i.reverse()))}}},98728:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=e(39032),T=o.ONEDAY,b=o.ONEWEEK;z.dtick=function(h,s){var t=s==="log",i=s==="date",n=s==="category",r=i?T:1;if(!h)return r;if(M(h))return(h=Number(h))<=0?r:n?Math.max(1,Math.round(h)):i?Math.max(.1,h):h;if(typeof h!="string"||!i&&!t)return r;var a=h.charAt(0),l=h.substr(1);return(l=M(l)?Number(l):0)<=0||!(i&&a==="M"&&l===Math.round(l)||t&&a==="L"||t&&a==="D"&&(l===1||l===2))?r:h},z.tick0=function(h,s,t,i){return s==="date"?k.cleanDate(h,k.dateTick0(t,i%b==0?1:0)):i!=="D1"&&i!=="D2"?M(h)?Number(h):0:void 0}},33816:function(ee,z,e){"use strict";var M=e(53756).counter;ee.exports={idRegex:{x:M("x","( domain)?"),y:M("y","( domain)?")},attrRegex:M("[xy]axis"),xAxisMatch:M("xaxis"),yAxisMatch:M("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},71888:function(ee,z,e){"use strict";var M=e(3400),k=e(19280),o=e(79811).id2name,T=e(94724),b=e(21160),h=e(78344),s=e(39032).ALMOST_EQUAL,t=e(84284).FROM_BL;function i(c,x,g){var p=g.axIds,v=g.layoutOut,m=g.hasImage,y=v._axisConstraintGroups,_=v._axisMatchGroups,f=x._id,S=f.charAt(0),w=((v._splomAxes||{})[S]||{})[f]||{},E=x._id,P=E.charAt(0)==="x";function C(Z,$){return M.coerce(c,x,T,Z,$)}x._matchGroup=null,x._constraintGroup=null,C("constrain",m?"domain":"range"),M.coerce(c,x,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var O,R,j=x.type,D=[];for(O=0;O<p.length;O++)(R=p[O])!==E&&v[o(R)].type===j&&D.push(R);var N=r(y,E);if(N){var W=[];for(O=0;O<D.length;O++)N[R=D[O]]||W.push(R);D=W}var F,U,V=D.length;V&&(c.matches||w.matches)&&(F=M.coerce(c,x,{matches:{valType:"enumerated",values:D,dflt:D.indexOf(w.matches)!==-1?w.matches:void 0}},"matches"));var te=m&&!P?x.anchor:void 0;if(V&&!F&&(c.scaleanchor||te)&&(U=M.coerce(c,x,{scaleanchor:{valType:"enumerated",values:D.concat([!1])}},"scaleanchor",te)),F){x._matchGroup=a(_,E,F,1);var J=v[o(F)],K=n(v,x)/n(v,J);P!==(F.charAt(0)==="x")&&(K=(P?"x":"y")+K),a(y,E,F,K)}else c.matches&&p.indexOf(c.matches)!==-1&&M.warn("ignored "+x._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(U){var X=C("scaleratio");X||(X=x.scaleratio=1),a(y,E,U,X)}else c.scaleanchor&&p.indexOf(c.scaleanchor)!==-1&&M.warn("ignored "+x._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function n(c,x){var g=x.domain;return g||(g=c[o(x.overlaying)].domain),g[1]-g[0]}function r(c,x){for(var g=0;g<c.length;g++)if(c[g][x])return c[g];return null}function a(c,x,g,p){var v,m,y,_,f,S=r(c,x);S===null?((S={})[x]=1,f=c.length,c.push(S)):f=c.indexOf(S);var w=Object.keys(S);for(v=0;v<c.length;v++)if(y=c[v],v!==f&&y[g]){var E=y[g];for(m=0;m<w.length;m++)y[_=w[m]]=l(E,l(p,S[_]));return void c.splice(f,1)}if(p!==1)for(m=0;m<w.length;m++){var P=w[m];S[P]=l(p,S[P])}S[g]=1}function l(c,x){var g,p,v="",m="";typeof c=="string"&&(g=(v=c.match(/^[xy]*/)[0]).length,c=+c.substr(g)),typeof x=="string"&&(p=(m=x.match(/^[xy]*/)[0]).length,x=+x.substr(p));var y=c*x;return g||p?g&&p&&v.charAt(0)!==m.charAt(0)?g===p?y:(g>p?v.substr(p):m.substr(g))+y:v+m+c*x:y}function u(c,x){for(var g=x._size,p=g.h/g.w,v={},m=Object.keys(c),y=0;y<m.length;y++){var _=m[y],f=c[_];if(typeof f=="string"){var S=f.match(/^[xy]*/)[0],w=S.length;f=+f.substr(w);for(var E=S.charAt(0)==="y"?p:1/p,P=0;P<w;P++)f*=E}v[_]=f}return v}function d(c,x){var g=c._inputDomain,p=t[c.constraintoward],v=g[0]+(g[1]-g[0])*p;c.domain=c._input.domain=[v+(g[0]-v)/x,v+(g[1]-v)/x],c.setScale()}z.handleDefaults=function(c,x,g){var p,v,m,y,_,f,S,w,E=g.axIds,P=g.axHasImage,C=x._axisConstraintGroups=[],O=x._axisMatchGroups=[];for(p=0;p<E.length;p++)i(_=c[y=o(E[p])],f=x[y],{axIds:E,layoutOut:x,hasImage:P[y]});function R(J,K){for(p=0;p<J.length;p++)for(m in v=J[p])x[o(m)][K]=v}for(R(O,"_matchGroup"),p=0;p<C.length;p++)for(m in v=C[p])if((f=x[o(m)]).fixedrange){for(var j in v){var D=o(j);(c[D]||{}).fixedrange===!1&&M.warn("fixedrange was specified as false for axis "+D+" but was overridden because another axis in its constraint group has fixedrange true"),x[D].fixedrange=!0}break}for(p=0;p<C.length;){for(m in v=C[p]){(f=x[o(m)])._matchGroup&&Object.keys(f._matchGroup).length===Object.keys(v).length&&(C.splice(p,1),p--);break}p++}R(C,"_constraintGroup");var N=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],W=!1,F=!1;function U(){w=f[S],S==="rangebreaks"&&(F=f._hasDayOfWeekBreaks)}for(p=0;p<O.length;p++){v=O[p];for(var V=0;V<N.length;V++){var te;for(m in S=N[V],w=null,v)if(_=c[y=o(m)],f=x[y],S in f){if(!f.matches&&(te=f,S in _)){U();break}w===null&&S in _&&U()}if(S==="range"&&w&&_.range&&_.range.length===2&&_.range[0]!==null&&_.range[1]!==null&&(W=!0),S==="autorange"&&w===null&&W&&(w=!1),w===null&&S in te&&(w=te[S]),w!==null)for(m in v)(f=x[o(m)])[S]=S==="range"?w.slice():w,S==="rangebreaks"&&(f._hasDayOfWeekBreaks=F,h(f,x))}}},z.enforce=function(c){var x,g,p,v,m,y,_,f,S=c._fullLayout,w=S._axisConstraintGroups||[];for(x=0;x<w.length;x++){p=u(w[x],S);var E=Object.keys(p),P=1/0,C=0,O=1/0,R={},j={},D=!1;for(g=0;g<E.length;g++)j[v=E[g]]=m=S[o(v)],m._inputDomain?m.domain=m._inputDomain.slice():m._inputDomain=m.domain.slice(),m._inputRange||(m._inputRange=m.range.slice()),m.setScale(),R[v]=y=Math.abs(m._m)/p[v],P=Math.min(P,y),m.constrain!=="domain"&&m._constraintShrinkable||(O=Math.min(O,y)),delete m._constraintShrinkable,C=Math.max(C,y),m.constrain==="domain"&&(D=!0);if(!(P>s*C)||D){for(g=0;g<E.length;g++)if(y=R[v=E[g]],_=(m=j[v]).constrain,y!==O||_==="domain")if(f=y/O,_==="range")b(m,f);else{var N=m._inputDomain,W=(m.domain[1]-m.domain[0])/(N[1]-N[0]),F=(m.r2l(m.range[1])-m.r2l(m.range[0]))/(m.r2l(m._inputRange[1])-m.r2l(m._inputRange[0]));if((f/=W)*F<1){m.domain=m._input.domain=N.slice(),b(m,f);continue}if(F<1&&(m.range=m._input.range=m._inputRange.slice(),f*=F),m.autorange){var U=m.r2l(m.range[0]),V=m.r2l(m.range[1]),te=(U+V)/2,J=te,K=te,X=Math.abs(V-te),Z=te-X*f*1.0001,$=te+X*f*1.0001,re=k.makePadFn(S,m,0),oe=k.makePadFn(S,m,1);d(m,f);var ie,ue,me=Math.abs(m._m),be=k.concatExtremes(c,m),ge=be.min,de=be.max;for(ue=0;ue<ge.length;ue++)(ie=ge[ue].val-re(ge[ue])/me)>Z&&ie<J&&(J=ie);for(ue=0;ue<de.length;ue++)(ie=de[ue].val+oe(de[ue])/me)<$&&ie>K&&(K=ie);f/=(K-J)/(2*X),J=m.l2r(J),K=m.l2r(K),m.range=m._input.range=U<V?[J,K]:[K,J]}d(m,f)}}}},z.getAxisGroup=function(c,x){for(var g=c._axisMatchGroups,p=0;p<g.length;p++)if(g[p][x])return"g"+p;return x},z.clean=function(c,x){if(x._inputDomain){for(var g=!1,p=x._id,v=c._fullLayout._axisConstraintGroups,m=0;m<v.length;m++)if(v[m][p]){g=!0;break}g&&x.constrain==="domain"||(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}}},51184:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=k.numberFormat,T=e(49760),b=e(89184),h=e(24040),s=k.strTranslate,t=e(72736),i=e(76308),n=e(43616),r=e(93024),a=e(54460),l=e(93972),u=e(86476),d=e(72760),c=d.selectingOrDrawing,x=d.freeMode,g=e(84284).FROM_TL,p=e(73696),v=e(39172).redrawReglTraces,m=e(7316),y=e(79811).getFromId,_=e(22676).prepSelect,f=e(22676).clearOutline,S=e(22676).selectOnClick,w=e(21160),E=e(33816),P=E.MINDRAG,C=E.MINZOOM,O=!0;function R(ie,ue,me,be){var ge=k.ensureSingle(ie.draglayer,ue,me,function(de){de.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ie.id)});return ge.call(l,be),ge.node()}function j(ie,ue,me,be,ge,de,ve){var pe=R(ie,"rect",ue,me);return M.select(pe).call(n.setRect,be,ge,de,ve),pe}function D(ie,ue){for(var me=0;me<ie.length;me++)if(!ie[me].fixedrange)return ue;return""}function N(ie,ue,me,be,ge){for(var de=0;de<ie.length;de++){var ve=ie[de];if(!ve.fixedrange)if(ve.rangebreaks){var pe=ve._id.charAt(0)==="y",_e=pe?1-ue:ue,Te=pe?1-me:me;be[ve._name+".range[0]"]=ve.l2r(ve.p2l(_e*ve._length)),be[ve._name+".range[1]"]=ve.l2r(ve.p2l(Te*ve._length))}else{var le=ve._rl[0],ae=ve._rl[1]-le;be[ve._name+".range[0]"]=ve.l2r(le+ae*ue),be[ve._name+".range[1]"]=ve.l2r(le+ae*me)}}if(ge&&ge.length){var he=(ue+(1-me))/2;N(ge,he,1-he,be,[])}}function W(ie,ue){for(var me=0;me<ie.length;me++){var be=ie[me];if(!be.fixedrange){if(be.rangebreaks){var ge=be._length,de=(be.p2l(0+ue)-be.p2l(0)+(be.p2l(ge+ue)-be.p2l(ge)))/2;be.range=[be.l2r(be._rl[0]-de),be.l2r(be._rl[1]-de)]}else be.range=[be.l2r(be._rl[0]-ue/be._m),be.l2r(be._rl[1]-ue/be._m)];be.limitRange&&be.limitRange()}}}function F(ie){return 1-(ie>=0?Math.min(ie,.9):1/(1/Math.max(ie,-.3)+3.222))}function U(ie,ue,me,be,ge){return ie.append("path").attr("class","zoombox").style({fill:ue>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",s(me,be)).attr("d",ge+"Z")}function V(ie,ue,me){return ie.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",s(ue,me)).attr("d","M0,0Z")}function te(ie,ue,me,be,ge,de){ie.attr("d",be+"M"+me.l+","+me.t+"v"+me.h+"h"+me.w+"v-"+me.h+"h-"+me.w+"Z"),J(ie,ue,ge,de)}function J(ie,ue,me,be){me||(ie.transition().style("fill",be>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ue.transition().style("opacity",1).duration(200))}function K(ie){M.select(ie).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function X(ie){O&&ie.data&&ie._context.showTips&&(k.notifier(k._(ie,"Double-click to zoom back out"),"long"),O=!1)}function Z(ie){var ue=Math.floor(Math.min(ie.b-ie.t,ie.r-ie.l,C)/2);return"M"+(ie.l-3.5)+","+(ie.t-.5+ue)+"h3v"+-ue+"h"+ue+"v-3h-"+(ue+3)+"ZM"+(ie.r+3.5)+","+(ie.t-.5+ue)+"h-3v"+-ue+"h"+-ue+"v-3h"+(ue+3)+"ZM"+(ie.r+3.5)+","+(ie.b+.5-ue)+"h-3v"+ue+"h"+-ue+"v3h"+(ue+3)+"ZM"+(ie.l-3.5)+","+(ie.b+.5-ue)+"h3v"+ue+"h"+ue+"v3h-"+(ue+3)+"Z"}function $(ie,ue,me,be,ge){for(var de,ve,pe,_e,Te=!1,le={},ae={},he=(ge||{}).xaHash,Se=(ge||{}).yaHash,ke=0;ke<ue.length;ke++){var Me=ue[ke];for(de in me)if(Me[de]){for(pe in Me)ge&&(he[pe]||Se[pe])||(pe.charAt(0)==="x"?me:be)[pe]||(le[pe]=de);for(ve in be)ge&&(he[ve]||Se[ve])||!Me[ve]||(Te=!0)}for(ve in be)if(Me[ve])for(_e in Me)ge&&(he[_e]||Se[_e])||(_e.charAt(0)==="x"?me:be)[_e]||(ae[_e]=ve)}Te&&(k.extendFlat(le,ae),ae={});var Ee={},De=[];for(pe in le){var fe=y(ie,pe);De.push(fe),Ee[fe._id]=fe}var xe={},we=[];for(_e in ae){var Oe=y(ie,_e);we.push(Oe),xe[Oe._id]=Oe}return{xaHash:Ee,yaHash:xe,xaxes:De,yaxes:we,xLinks:le,yLinks:ae,isSubplotConstrained:Te}}function re(ie,ue){if(b){var me=ie.onwheel!==void 0?"wheel":"mousewheel";ie._onwheel&&ie.removeEventListener(me,ie._onwheel),ie._onwheel=ue,ie.addEventListener(me,ue,{passive:!1})}else ie.onwheel!==void 0?ie.onwheel=ue:ie.onmousewheel!==void 0?ie.onmousewheel=ue:ie.isAddedWheelEvent||(ie.isAddedWheelEvent=!0,ie.addEventListener("wheel",ue,{passive:!1}))}function oe(ie){var ue=[];for(var me in ie)ue.push(ie[me]);return ue}ee.exports={makeDragBox:function(ie,ue,me,be,ge,de,ve,pe){var _e,Te,le,ae,he,Se,ke,Me,Ee,De,fe,xe,we,Oe,ze,Pe,Ue,Ve,Ze,it,tt,dt,yt,vt=ie._fullLayout._zoomlayer,et=ve+pe==="nsew",Qe=(ve+pe).length===1;function wt(){if(_e=ue.xaxis,Te=ue.yaxis,Ee=_e._length,De=Te._length,ke=_e._offset,Me=Te._offset,(le={})[_e._id]=_e,(ae={})[Te._id]=Te,ve&&pe)for(var Xt=ue.overlays,ln=0;ln<Xt.length;ln++){var nn=Xt[ln].xaxis;le[nn._id]=nn;var cn=Xt[ln].yaxis;ae[cn._id]=cn}he=oe(le),Se=oe(ae),we=D(he,pe),Oe=D(Se,ve),ze=!Oe&&!we,xe=$(ie,ie._fullLayout._axisMatchGroups,le,ae);var Tn=(fe=$(ie,ie._fullLayout._axisConstraintGroups,le,ae,xe)).isSubplotConstrained||xe.isSubplotConstrained;Pe=pe||Tn,Ue=ve||Tn;var Mn=ie._fullLayout;Ve=Mn._has("scattergl"),Ze=Mn._has("splom"),it=Mn._has("svg")}me+=ue.yaxis._shift,wt();var It=function(Xt,ln,nn){return Xt?Xt==="nsew"?nn?"":ln==="pan"?"move":"crosshair":Xt.toLowerCase()+"-resize":"pointer"}(Oe+we,ie._fullLayout.dragmode,et),Dt=j(ue,ve+pe+"drag",It,me,be,ge,de);if(ze&&!et)return Dt.onmousedown=null,Dt.style.pointerEvents="none",Dt;var Ct,He,We,Be,Ge,at,nt,Re,Fe,rt,Ye={element:Dt,gd:ie,plotinfo:ue};function ct(){Ye.plotinfo.selection=!1,f(ie)}function pt(Xt,ln){var nn=Ye.gd;if(nn._fullLayout._activeShapeIndex>=0)nn._fullLayout._deactivateShape(nn);else{var cn=nn._fullLayout.clickmode;if(K(nn),Xt!==2||Qe||Ut(),et)cn.indexOf("select")>-1&&S(ln,nn,he,Se,ue.id,Ye),cn.indexOf("event")>-1&&r.click(nn,ln,ue.id);else if(Xt===1&&Qe){var Tn=ve?Te:_e,Mn=ve==="s"||pe==="w"?0:1,zn=Tn._name+".range["+Mn+"]",In=function(Fn,tr){var or,ur=Fn.range[tr],er=Math.abs(ur-Fn.range[1-tr]);return Fn.type==="date"?ur:Fn.type==="log"?(or=Math.ceil(Math.max(0,-Math.log(er)/Math.LN10))+3,o("."+or+"g")(Math.pow(10,ur))):(or=Math.floor(Math.log(Math.abs(ur))/Math.LN10)-Math.floor(Math.log(er)/Math.LN10)+4,o("."+String(or)+"g")(ur))}(Tn,Mn),Pn="left",Hn="middle";if(Tn.fixedrange)return;ve?(Hn=ve==="n"?"top":"bottom",Tn.side==="right"&&(Pn="right")):pe==="e"&&(Pn="right"),nn._context.showAxisRangeEntryBoxes&&M.select(Dt).call(t.makeEditable,{gd:nn,immediate:!0,background:nn._fullLayout.paper_bgcolor,text:String(In),fill:Tn.tickfont?Tn.tickfont.color:"#444",horizontalAlign:Pn,verticalAlign:Hn}).on("edit",function(Fn){var tr=Tn.d2r(Fn);tr!==void 0&&h.call("_guiRelayout",nn,zn,tr)})}}}function gt(Xt,ln){if(ie._transitioningWithDuration)return!1;var nn=Math.max(0,Math.min(Ee,dt*Xt+Ct)),cn=Math.max(0,Math.min(De,yt*ln+He)),Tn=Math.abs(nn-Ct),Mn=Math.abs(cn-He);function zn(){nt="",We.r=We.l,We.t=We.b,Fe.attr("d","M0,0Z")}if(We.l=Math.min(Ct,nn),We.r=Math.max(Ct,nn),We.t=Math.min(He,cn),We.b=Math.max(He,cn),fe.isSubplotConstrained)Tn>C||Mn>C?(nt="xy",Tn/Ee>Mn/De?(Mn=Tn*De/Ee,He>cn?We.t=He-Mn:We.b=He+Mn):(Tn=Mn*Ee/De,Ct>nn?We.l=Ct-Tn:We.r=Ct+Tn),Fe.attr("d",Z(We))):zn();else if(xe.isSubplotConstrained)if(Tn>C||Mn>C){nt="xy";var In=Math.min(We.l/Ee,(De-We.b)/De),Pn=Math.max(We.r/Ee,(De-We.t)/De);We.l=In*Ee,We.r=Pn*Ee,We.b=(1-In)*De,We.t=(1-Pn)*De,Fe.attr("d",Z(We))}else zn();else!Oe||Mn<Math.min(Math.max(.6*Tn,P),C)?Tn<P||!we?zn():(We.t=0,We.b=De,nt="x",Fe.attr("d",function(Hn,Fn){return"M"+(Hn.l-.5)+","+(Fn-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(Hn.r+.5)+","+(Fn-C-.5)+"h3v"+(2*C+1)+"h-3Z"}(We,He))):!we||Tn<Math.min(.6*Mn,C)?(We.l=0,We.r=Ee,nt="y",Fe.attr("d",function(Hn,Fn){return"M"+(Fn-C-.5)+","+(Hn.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(Fn-C-.5)+","+(Hn.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(We,Ct))):(nt="xy",Fe.attr("d",Z(We)));We.w=We.r-We.l,We.h=We.b-We.t,nt&&(rt=!0),ie._dragged=rt,te(Re,Fe,We,Ge,at,Be),ut(),ie.emit("plotly_relayouting",tt),at=!0}function ut(){tt={},nt!=="xy"&&nt!=="x"||(N(he,We.l/Ee,We.r/Ee,tt,fe.xaxes),Wt("x",tt)),nt!=="xy"&&nt!=="y"||(N(Se,(De-We.b)/De,(De-We.t)/De,tt,fe.yaxes),Wt("y",tt))}function Mt(){ut(),K(ie),Vt(),X(ie)}Ye.prepFn=function(Xt,ln,nn){var cn=Ye.dragmode,Tn=ie._fullLayout.dragmode;Tn!==cn&&(Ye.dragmode=Tn),wt(),dt=ie._fullLayout._invScaleX,yt=ie._fullLayout._invScaleY,ze||(et?Xt.shiftKey?Tn==="pan"?Tn="zoom":c(Tn)||(Tn="pan"):Xt.ctrlKey&&(Tn="pan"):Tn="pan"),x(Tn)?Ye.minDrag=1:Ye.minDrag=void 0,c(Tn)?(Ye.xaxes=he,Ye.yaxes=Se,_(Xt,ln,nn,Ye,Tn)):(Ye.clickFn=pt,c(cn)&&ct(),ze||(Tn==="zoom"?(Ye.moveFn=gt,Ye.doneFn=Mt,Ye.minDrag=1,function(Mn,zn,In){var Pn=Dt.getBoundingClientRect();Ct=zn-Pn.left,He=In-Pn.top,ie._fullLayout._calcInverseTransform(ie);var Hn=k.apply3DTransform(ie._fullLayout._invTransform)(Ct,He);Ct=Hn[0],He=Hn[1],We={l:Ct,r:Ct,w:0,t:He,b:He,h:0},Be=ie._hmpixcount?ie._hmlumcount/ie._hmpixcount:T(ie._fullLayout.plot_bgcolor).getLuminance(),at=!1,nt="xy",rt=!1,Re=U(vt,Be,ke,Me,Ge="M0,0H"+Ee+"V"+De+"H0V0"),Fe=V(vt,ke,Me)}(0,ln,nn)):Tn==="pan"&&(Ye.moveFn=zt,Ye.doneFn=Vt))),ie._fullLayout._redrag=function(){var Mn=ie._dragdata;if(Mn&&Mn.element===Dt){var zn=ie._fullLayout.dragmode;c(zn)||(wt(),en([0,0,Ee,De]),Ye.moveFn(Mn.dx,Mn.dy))}}},u.init(Ye);var xt=[0,0,Ee,De],mt=null,Et=E.REDRAWDELAY,Lt=ue.mainplot?ie._fullLayout._plots[ue.mainplot]:ue;function zt(Xt,ln){if(Xt*=dt,ln*=yt,!ie._transitioningWithDuration){if(ie._fullLayout._replotting=!0,we==="ew"||Oe==="ns"){var nn=we?-Xt:0,cn=Oe?-ln:0;if(xe.isSubplotConstrained){if(we&&Oe){var Tn=(Xt/Ee-ln/De)/2;nn=-(Xt=Tn*Ee),cn=-(ln=-Tn*De)}Oe?nn=-cn*Ee/De:cn=-nn*De/Ee}return we&&(W(he,Xt),Wt("x")),Oe&&(W(Se,ln),Wt("y")),en([nn,cn,Ee,De]),rn(),void ie.emit("plotly_relayouting",tt)}var Mn,zn,In=we==="w"==(Oe==="n")?1:-1;if(we&&Oe&&(fe.isSubplotConstrained||xe.isSubplotConstrained)){var Pn=(Xt/Ee+In*ln/De)/2;Xt=Pn*Ee,ln=In*Pn*De}if(we==="w"?Xt=or(he,0,Xt):we==="e"?Xt=or(he,1,-Xt):we||(Xt=0),Oe==="n"?ln=or(Se,1,ln):Oe==="s"?ln=or(Se,0,-ln):Oe||(ln=0),Mn=we==="w"?Xt:0,zn=Oe==="n"?ln:0,fe.isSubplotConstrained&&!xe.isSubplotConstrained||xe.isSubplotConstrained&&we&&Oe&&In>0){var Hn;if(xe.isSubplotConstrained||!we&&Oe.length===1){for(Hn=0;Hn<he.length;Hn++)he[Hn].range=he[Hn]._r.slice(),w(he[Hn],1-ln/De);Mn=(Xt=ln*Ee/De)/2}if(xe.isSubplotConstrained||!Oe&&we.length===1){for(Hn=0;Hn<Se.length;Hn++)Se[Hn].range=Se[Hn]._r.slice(),w(Se[Hn],1-Xt/Ee);zn=(ln=Xt*De/Ee)/2}}xe.isSubplotConstrained&&Oe||Wt("x"),xe.isSubplotConstrained&&we||Wt("y");var Fn=Ee-Xt,tr=De-ln;!xe.isSubplotConstrained||we&&Oe||(we?(zn=Mn?0:Xt*De/Ee,tr=Fn*De/Ee):(Mn=zn?0:ln*Ee/De,Fn=tr*Ee/De)),en([Mn,zn,Fn,tr]),rn(),ie.emit("plotly_relayouting",tt)}function or(ur,er,Mr){for(var jt,tn,xn=1-er,pn=0;pn<ur.length;pn++){var Sn=ur[pn];if(!Sn.fixedrange){jt=Sn,tn=Sn._rl[xn]+(Sn._rl[er]-Sn._rl[xn])/F(Mr/Sn._length);var Gn=Sn.l2r(tn);Gn!==!1&&Gn!==void 0&&(Sn.range[er]=Gn)}}return jt._length*(jt._rl[er]-tn)/(jt._rl[er]-jt._rl[xn])}}function Wt(Xt,ln){for(var nn=xe.isSubplotConstrained?{x:Se,y:he}[Xt]:xe[Xt+"axes"],cn=xe.isSubplotConstrained?{x:he,y:Se}[Xt]:[],Tn=0;Tn<nn.length;Tn++){var Mn=nn[Tn],zn=Mn._id,In=xe.xLinks[zn]||xe.yLinks[zn],Pn=cn[0]||le[In]||ae[In];Pn&&(ln?(ln[Mn._name+".range[0]"]=ln[Pn._name+".range[0]"],ln[Mn._name+".range[1]"]=ln[Pn._name+".range[1]"]):Mn.range=Pn.range.slice())}}function rn(){var Xt,ln=[];function nn(zn){for(Xt=0;Xt<zn.length;Xt++)zn[Xt].fixedrange||ln.push(zn[Xt]._id)}function cn(zn,In){for(Xt=0;Xt<zn.length;Xt++){var Pn=zn[Xt],Hn=Pn[In];Pn.fixedrange||Hn.tickmode!=="sync"||ln.push(Hn._id)}}for(Pe&&(nn(he),nn(fe.xaxes),nn(xe.xaxes),cn(ue.overlays,"xaxis")),Ue&&(nn(Se),nn(fe.yaxes),nn(xe.yaxes),cn(ue.overlays,"yaxis")),tt={},Xt=0;Xt<ln.length;Xt++){var Tn=ln[Xt],Mn=y(ie,Tn);a.drawOne(ie,Mn,{skipTitle:!0}),tt[Mn._name+".range[0]"]=Mn.range[0],tt[Mn._name+".range[1]"]=Mn.range[1]}a.redrawComponents(ie,ln)}function Ut(){if(!ie._transitioningWithDuration){var Xt=ie._context.doubleClick,ln=[];we&&(ln=ln.concat(he)),Oe&&(ln=ln.concat(Se)),xe.xaxes&&(ln=ln.concat(xe.xaxes)),xe.yaxes&&(ln=ln.concat(xe.yaxes));var nn,cn,Tn={};if(Xt==="reset+autosize")for(Xt="autosize",cn=0;cn<ln.length;cn++){var Mn=(nn=ln[cn])._rangeInitial0,zn=nn._rangeInitial1,In=Mn!==void 0||zn!==void 0;if(In&&(Mn!==void 0&&Mn!==nn.range[0]||zn!==void 0&&zn!==nn.range[1])||!In&&nn.autorange!==!0){Xt="reset";break}}if(Xt==="autosize")for(cn=0;cn<ln.length;cn++)(nn=ln[cn]).fixedrange||(Tn[nn._name+".autorange"]=!0);else if(Xt==="reset"){for((we||fe.isSubplotConstrained)&&(ln=ln.concat(fe.xaxes)),Oe&&!fe.isSubplotConstrained&&(ln=ln.concat(fe.yaxes)),fe.isSubplotConstrained&&(we?Oe||(ln=ln.concat(Se)):ln=ln.concat(he)),cn=0;cn<ln.length;cn++)if(!(nn=ln[cn]).fixedrange){var Pn=nn._name,Hn=nn._autorangeInitial;nn._rangeInitial0===void 0&&nn._rangeInitial1===void 0?Tn[Pn+".autorange"]=!0:nn._rangeInitial0===void 0?(Tn[Pn+".autorange"]=Hn,Tn[Pn+".range"]=[null,nn._rangeInitial1]):nn._rangeInitial1===void 0?(Tn[Pn+".range"]=[nn._rangeInitial0,null],Tn[Pn+".autorange"]=Hn):Tn[Pn+".range"]=[nn._rangeInitial0,nn._rangeInitial1]}}ie.emit("plotly_doubleclick",null),h.call("_guiRelayout",ie,Tn)}}function Vt(){en([0,0,Ee,De]),k.syncOrAsync([m.previousPromises,function(){ie._fullLayout._replotting=!1,h.call("_guiRelayout",ie,tt)}],ie)}function en(Xt){var ln,nn,cn,Tn,Mn=ie._fullLayout,zn=Mn._plots,In=Mn._subplots.cartesian;if(Ze&&h.subplotsRegistry.splom.drag(ie),Ve){for(ln=0;ln<In.length;ln++)if(cn=(nn=zn[In[ln]]).xaxis,Tn=nn.yaxis,nn._scene){var Pn=k.simpleMap(cn.range,cn.r2l),Hn=k.simpleMap(Tn.range,Tn.r2l);cn.limitRange&&cn.limitRange(),Tn.limitRange&&Tn.limitRange(),Pn=cn.range,Hn=Tn.range,nn._scene.update({range:[Pn[0],Hn[0],Pn[1],Hn[1]]})}}if((Ze||Ve)&&(p(ie),v(ie)),it){var Fn=Xt[2]/_e._length,tr=Xt[3]/Te._length;for(ln=0;ln<In.length;ln++){cn=(nn=zn[In[ln]]).xaxis,Tn=nn.yaxis;var or,ur,er,Mr,jt=(Pe||xe.isSubplotConstrained)&&!cn.fixedrange&&le[cn._id],tn=(Ue||xe.isSubplotConstrained)&&!Tn.fixedrange&&ae[Tn._id];if(jt?(or=Fn,er=pe||xe.isSubplotConstrained?Xt[0]:hn(cn,or)):xe.xaHash[cn._id]?(or=Fn,er=Xt[0]*cn._length/_e._length):xe.yaHash[cn._id]?(or=tr,er=Oe==="ns"?-Xt[1]*cn._length/Te._length:hn(cn,or,{n:"top",s:"bottom"}[Oe])):er=An(cn,or=Ln(cn,Fn,tr)),or>1&&(cn.maxallowed!==void 0&&Pe===(cn.range[0]<cn.range[1]?"e":"w")||cn.minallowed!==void 0&&Pe===(cn.range[0]<cn.range[1]?"w":"e"))&&(or=1,er=0),tn?(ur=tr,Mr=ve||xe.isSubplotConstrained?Xt[1]:hn(Tn,ur)):xe.yaHash[Tn._id]?(ur=tr,Mr=Xt[1]*Tn._length/Te._length):xe.xaHash[Tn._id]?(ur=Fn,Mr=we==="ew"?-Xt[0]*Tn._length/_e._length:hn(Tn,ur,{e:"right",w:"left"}[we])):Mr=An(Tn,ur=Ln(Tn,Fn,tr)),ur>1&&(Tn.maxallowed!==void 0&&Ue===(Tn.range[0]<Tn.range[1]?"n":"s")||Tn.minallowed!==void 0&&Ue===(Tn.range[0]<Tn.range[1]?"s":"n"))&&(ur=1,Mr=0),or||ur){or||(or=1),ur||(ur=1);var xn=cn._offset-er/or,pn=Tn._offset-Mr/ur;nn.clipRect.call(n.setTranslate,er,Mr).call(n.setScale,or,ur),nn.plot.call(n.setTranslate,xn,pn).call(n.setScale,1/or,1/ur),or===nn.xScaleFactor&&ur===nn.yScaleFactor||(n.setPointGroupScale(nn.zoomScalePts,or,ur),n.setTextPointsScale(nn.zoomScaleTxt,or,ur)),n.hideOutsideRangePoints(nn.clipOnAxisFalseTraces,nn),nn.xScaleFactor=or,nn.yScaleFactor=ur}}}}function Ln(Xt,ln,nn){return Xt.fixedrange?0:Pe&&fe.xaHash[Xt._id]?ln:Ue&&(fe.isSubplotConstrained?fe.xaHash:fe.yaHash)[Xt._id]?nn:0}function An(Xt,ln){return ln?(Xt.range=Xt._r.slice(),w(Xt,ln),hn(Xt,ln)):0}function hn(Xt,ln,nn){return Xt._length*(1-ln)*g[nn||Xt.constraintoward||"middle"]}return ve.length*pe.length!=1&&re(Dt,function(Xt){if(ie._context._scrollZoom.cartesian||ie._fullLayout._enablescrollzoom){if(ct(),ie._transitioningWithDuration)return Xt.preventDefault(),void Xt.stopPropagation();wt(),clearTimeout(mt);var ln=-Xt.deltaY;if(isFinite(ln)||(ln=Xt.wheelDelta/10),isFinite(ln)){var nn,cn=Math.exp(-Math.min(Math.max(ln,-20),20)/200),Tn=Lt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Mn=(Xt.clientX-Tn.left)/Tn.width,zn=(Tn.bottom-Xt.clientY)/Tn.height;if(Pe){for(pe||(Mn=.5),nn=0;nn<he.length;nn++)In(he[nn],Mn,cn);Wt("x"),xt[2]*=cn,xt[0]+=xt[2]*Mn*(1/cn-1)}if(Ue){for(ve||(zn=.5),nn=0;nn<Se.length;nn++)In(Se[nn],zn,cn);Wt("y"),xt[3]*=cn,xt[1]+=xt[3]*(1-zn)*(1/cn-1)}en(xt),rn(),ie.emit("plotly_relayouting",tt),mt=setTimeout(function(){ie._fullLayout&&(xt=[0,0,Ee,De],Vt())},Et),Xt.preventDefault()}else k.log("Did not find wheel motion attributes: ",Xt)}function In(Pn,Hn,Fn){if(!Pn.fixedrange){var tr=k.simpleMap(Pn.range,Pn.r2l),or=tr[0]+(tr[1]-tr[0])*Hn;Pn.range=tr.map(function(ur){return Pn.l2r(or+(ur-or)*Fn)})}}}),Dt},makeDragger:R,makeRectDragger:j,makeZoombox:U,makeCorners:V,updateZoombox:te,xyCorners:Z,transitionZoombox:J,removeZoombox:K,showDoubleClickNotifier:X,attachWheelEventHandler:re}},42464:function(ee,z,e){"use strict";var M=e(33428),k=e(93024),o=e(86476),T=e(93972),b=e(51184).makeDragBox,h=e(33816).DRAGGERSIZE;z.initInteractions=function(s){var t=s._fullLayout;if(s._context.staticPlot)M.select(s).selectAll(".drag").remove();else if(t._has("cartesian")||t._has("splom")){Object.keys(t._plots||{}).sort(function(n,r){if((t._plots[n].mainplot&&!0)===(t._plots[r].mainplot&&!0)){var a=n.split("y"),l=r.split("y");return a[0]===l[0]?Number(a[1]||1)-Number(l[1]||1):Number(a[0]||1)-Number(l[0]||1)}return t._plots[n].mainplot?1:-1}).forEach(function(n){var r=t._plots[n],a=r.xaxis,l=r.yaxis;if(!r.mainplot){var u=b(s,r,a._offset,l._offset,a._length,l._length,"ns","ew");u.onmousemove=function(x){s._fullLayout._rehover=function(){s._fullLayout._hoversubplot===n&&s._fullLayout._plots[n]&&k.hover(s,x,n)},k.hover(s,x,n),s._fullLayout._lasthover=u,s._fullLayout._hoversubplot=n},u.onmouseout=function(x){s._dragging||(s._fullLayout._hoversubplot=null,o.unhover(s,x))},s._context.showAxisDragHandles&&(b(s,r,a._offset-h,l._offset-h,h,h,"n","w"),b(s,r,a._offset+a._length,l._offset-h,h,h,"n","e"),b(s,r,a._offset-h,l._offset+l._length,h,h,"s","w"),b(s,r,a._offset+a._length,l._offset+l._length,h,h,"s","e"))}if(s._context.showAxisDragHandles){if(n===a._mainSubplot){var d=a._mainLinePosition;a.side==="top"&&(d-=h),b(s,r,a._offset+.1*a._length,d,.8*a._length,h,"","ew"),b(s,r,a._offset,d,.1*a._length,h,"","w"),b(s,r,a._offset+.9*a._length,d,.1*a._length,h,"","e")}if(n===l._mainSubplot){var c=l._mainLinePosition;l.side!=="right"&&(c-=h),b(s,r,c,l._offset+.1*l._length,h,.8*l._length,"ns",""),b(s,r,c,l._offset+.9*l._length,h,.1*l._length,"s",""),b(s,r,c,l._offset,h,.1*l._length,"n","")}}});var i=t._hoverlayer.node();i.onmousemove=function(n){n.target=s._fullLayout._lasthover,k.hover(s,n,t._hoversubplot)},i.onclick=function(n){n.target=s._fullLayout._lasthover,k.click(s,n)},i.onmousedown=function(n){s._fullLayout._lasthover.onmousedown(n)},z.updateFx(s)}},z.updateFx=function(s){var t=s._fullLayout,i=t.dragmode==="pan"?"move":"crosshair";T(t._draggers,i)}},36632:function(ee,z,e){"use strict";var M=e(24040),k=e(3400),o=e(79811);ee.exports=function(T){return function(b,h){var s=b[T];if(Array.isArray(s))for(var t=M.subplotsRegistry.cartesian,i=t.idRegex,n=h._subplots,r=n.xaxis,a=n.yaxis,l=n.cartesian,u=h._has("cartesian")||h._has("gl2d"),d=0;d<s.length;d++){var c=s[d];if(k.isPlainObject(c)){var x=o.cleanId(c.xref,"x",!1),g=o.cleanId(c.yref,"y",!1),p=i.x.test(x),v=i.y.test(g);if(p||v){u||k.pushUnique(h._basePlotModules,t);var m=!1;p&&r.indexOf(x)===-1&&(r.push(x),m=!0),v&&a.indexOf(g)===-1&&(a.push(g),m=!0),m&&p&&v&&l.push(x+g)}}}}}},57952:function(ee,z,e){"use strict";var M=e(33428),k=e(24040),o=e(3400),T=e(7316),b=e(43616),h=e(84888)._M,s=e(79811),t=e(33816),i=e(9616),n=o.ensureSingle;function r(c,x,g){return o.ensureSingle(c,x,g,function(p){p.datum(g)})}function a(c,x,g,p,v){for(var m,y,_,f=t.traceLayerClasses,S=c._fullLayout,w=S._modules,E=[],P=[],C=0;C<w.length;C++){var O=(m=w[C]).name,R=k.modules[O].categories;if(R.svg){var j=m.layerName||O+"layer",D=m.plot;_=(y=h(g,D))[0],g=y[1],_.length&&E.push({i:f.indexOf(j),className:j,plotMethod:D,cdModule:_}),R.zoomScale&&P.push("."+j)}}E.sort(function(F,U){return F.i-U.i});var N=x.plot.selectAll("g.mlayer").data(E,function(F){return F.className});if(N.enter().append("g").attr("class",function(F){return F.className}).classed("mlayer",!0).classed("rangeplot",x.isRangePlot),N.exit().remove(),N.order(),N.each(function(F){var U=M.select(this),V=F.className;F.plotMethod(c,x,F.cdModule,U,p,v),t.clipOnAxisFalseQuery.indexOf("."+V)===-1&&b.setClipUrl(U,x.layerClipId,c)}),S._has("scattergl")&&(m=k.getModule("scattergl"),_=h(g,m)[0],m.plot(c,x,_)),!c._context.staticPlot&&(x._hasClipOnAxisFalse&&(x.clipOnAxisFalseTraces=x.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var W=x.plot.selectAll(P.join(",")).selectAll(".trace");x.zoomScalePts=W.selectAll("path.point"),x.zoomScaleTxt=W.selectAll(".textpoint")}}function l(c,x){var g=x.plotgroup,p=x.id,v=t.layerValue2layerClass[x.xaxis.layer],m=t.layerValue2layerClass[x.yaxis.layer],y=c._fullLayout._hasOnlyLargeSploms;if(x.mainplot){var _=x.mainplotinfo,f=_.plotgroup,S=p+"-x",w=p+"-y";x.minorGridlayer=_.minorGridlayer,x.gridlayer=_.gridlayer,x.zerolinelayer=_.zerolinelayer,n(_.overlinesBelow,"path",S),n(_.overlinesBelow,"path",w),n(_.overaxesBelow,"g",S),n(_.overaxesBelow,"g",w),x.plot=n(_.overplot,"g",p),n(_.overlinesAbove,"path",S),n(_.overlinesAbove,"path",w),n(_.overaxesAbove,"g",S),n(_.overaxesAbove,"g",w),x.xlines=f.select(".overlines-"+v).select("."+S),x.ylines=f.select(".overlines-"+m).select("."+w),x.xaxislayer=f.select(".overaxes-"+v).select("."+S),x.yaxislayer=f.select(".overaxes-"+m).select("."+w)}else if(y)x.xlines=n(g,"path","xlines-above"),x.ylines=n(g,"path","ylines-above"),x.xaxislayer=n(g,"g","xaxislayer-above"),x.yaxislayer=n(g,"g","yaxislayer-above");else{var E=n(g,"g","layer-subplot");x.shapelayer=n(E,"g","shapelayer"),x.imagelayer=n(E,"g","imagelayer"),x.minorGridlayer=n(g,"g","minor-gridlayer"),x.gridlayer=n(g,"g","gridlayer"),x.zerolinelayer=n(g,"g","zerolinelayer"),n(g,"path","xlines-below"),n(g,"path","ylines-below"),x.overlinesBelow=n(g,"g","overlines-below"),n(g,"g","xaxislayer-below"),n(g,"g","yaxislayer-below"),x.overaxesBelow=n(g,"g","overaxes-below"),x.plot=n(g,"g","plot"),x.overplot=n(g,"g","overplot"),x.xlines=n(g,"path","xlines-above"),x.ylines=n(g,"path","ylines-above"),x.overlinesAbove=n(g,"g","overlines-above"),n(g,"g","xaxislayer-above"),n(g,"g","yaxislayer-above"),x.overaxesAbove=n(g,"g","overaxes-above"),x.xlines=g.select(".xlines-"+v),x.ylines=g.select(".ylines-"+m),x.xaxislayer=g.select(".xaxislayer-"+v),x.yaxislayer=g.select(".yaxislayer-"+m)}y||(r(x.minorGridlayer,"g",x.xaxis._id),r(x.minorGridlayer,"g",x.yaxis._id),x.minorGridlayer.selectAll("g").map(function(P){return P[0]}).sort(s.idSort),r(x.gridlayer,"g",x.xaxis._id),r(x.gridlayer,"g",x.yaxis._id),x.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(s.idSort)),x.xlines.style("fill","none").classed("crisp",!0),x.ylines.style("fill","none").classed("crisp",!0)}function u(c,x){if(c){var g={};for(var p in c.each(function(_){var f=_[0];M.select(this).remove(),d(f,x),g[f]=!0}),x._plots)for(var v=x._plots[p].overlays||[],m=0;m<v.length;m++){var y=v[m];g[y.id]&&y.plot.selectAll(".trace").remove()}}}function d(c,x){x._draggers.selectAll("g."+c).remove(),x._defs.select("#clip"+x._uid+c+"plot").remove()}z.name="cartesian",z.attr=["xaxis","yaxis"],z.idRoot=["x","y"],z.idRegex=t.idRegex,z.attrRegex=t.attrRegex,z.attributes=e(26720),z.layoutAttributes=e(94724),z.supplyLayoutDefaults=e(67352),z.transitionAxes=e(73736),z.finalizeSubplots=function(c,x){var g,p,v,m=x._subplots,y=m.xaxis,_=m.yaxis,f=m.cartesian,S=f.concat(m.gl2d||[]),w={},E={};for(g=0;g<S.length;g++){var P=S[g].split("y");w[P[0]]=1,E["y"+P[1]]=1}for(g=0;g<y.length;g++)w[p=y[g]]||(v=(c[s.id2name(p)]||{}).anchor,t.idRegex.y.test(v)||(v="y"),f.push(p+v),S.push(p+v),E[v]||(E[v]=1,o.pushUnique(_,v)));for(g=0;g<_.length;g++)E[v=_[g]]||(p=(c[s.id2name(v)]||{}).anchor,t.idRegex.x.test(p)||(p="x"),f.push(p+v),S.push(p+v),w[p]||(w[p]=1,o.pushUnique(y,p)));if(!S.length){for(var C in p="",v="",c)t.attrRegex.test(C)&&(C.charAt(0)==="x"?(!p||+C.substr(5)<+p.substr(5))&&(p=C):(!v||+C.substr(5)<+v.substr(5))&&(v=C));p=p?s.name2id(p):"x",v=v?s.name2id(v):"y",y.push(p),_.push(v),f.push(p+v)}},z.plot=function(c,x,g,p){var v,m=c._fullLayout,y=m._subplots.cartesian,_=c.calcdata;if(!Array.isArray(x))for(x=[],v=0;v<_.length;v++)x.push(v);for(v=0;v<y.length;v++){for(var f,S=y[v],w=m._plots[S],E=[],P=0;P<_.length;P++){var C=_[P],O=C[0].trace;O.xaxis+O.yaxis===S&&((x.indexOf(O.index)!==-1||O.carpet)&&(f&&f[0].trace.xaxis+f[0].trace.yaxis===S&&["tonextx","tonexty","tonext"].indexOf(O.fill)!==-1&&E.indexOf(f)===-1&&E.push(f),E.push(C)),f=C)}a(c,w,E,g,p)}},z.clean=function(c,x,g,p){var v,m,y,_=p._plots||{},f=x._plots||{},S=p._subplots||{};if(p._hasOnlyLargeSploms&&!x._hasOnlyLargeSploms)for(y in _)(v=_[y]).plotgroup&&v.plotgroup.remove();var w=p._has&&p._has("gl"),E=x._has&&x._has("gl");if(w&&!E)for(y in _)(v=_[y])._scene&&v._scene.destroy();if(S.xaxis&&S.yaxis){var P=s.listIds({_fullLayout:p});for(m=0;m<P.length;m++){var C=P[m];x[s.id2name(C)]||p._infolayer.selectAll(".g-"+C+"title").remove()}}var O=p._has&&p._has("cartesian"),R=x._has&&x._has("cartesian");if(O&&!R)u(p._cartesianlayer.selectAll(".subplot"),p),p._defs.selectAll(".axesclip").remove(),delete p._axisConstraintGroups,delete p._axisMatchGroups;else if(S.cartesian)for(m=0;m<S.cartesian.length;m++){var j=S.cartesian[m];if(!f[j]){var D="."+j+",."+j+"-x,."+j+"-y";p._cartesianlayer.selectAll(D).remove(),d(j,p)}}},z.drawFramework=function(c){var x=c._fullLayout,g=function(v){var m,y,_,f,S,w,E=v._fullLayout,P=E._subplots.cartesian,C=P.length,O=[],R=[];for(m=0;m<C;m++){_=P[m],S=(f=E._plots[_]).xaxis,w=f.yaxis;var j=S._mainAxis,D=w._mainAxis,N=j._id+D._id,W=E._plots[N];f.overlays=[],N!==_&&W?(f.mainplot=N,f.mainplotinfo=W,R.push(_)):(f.mainplot=void 0,f.mainplotinfo=void 0,O.push(_))}for(m=0;m<R.length;m++)_=R[m],(f=E._plots[_]).mainplotinfo.overlays.push(f);var F=O.concat(R),U=new Array(C);for(m=0;m<C;m++){_=F[m],S=(f=E._plots[_]).xaxis,w=f.yaxis;var V=[_,S.layer,w.layer,S.overlaying||"",w.overlaying||""];for(y=0;y<f.overlays.length;y++)V.push(f.overlays[y].id);U[m]=V}return U}(c),p=x._cartesianlayer.selectAll(".subplot").data(g,String);p.enter().append("g").attr("class",function(v){return"subplot "+v[0]}),p.order(),p.exit().call(u,x),p.each(function(v){var m=v[0],y=x._plots[m];y.plotgroup=M.select(this),l(c,y),y.draglayer=n(x._draggers,"g",m)})},z.rangePlot=function(c,x,g){l(c,x),a(c,x,g),T.style(c)},z.toSVG=function(c){var x=c._fullLayout._glimages,g=M.select(c).selectAll(".svg-container");g.filter(function(p,v){return v===g.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var p=this,v=p.toDataURL("image/png");x.append("svg:image").attr({xmlns:i.svg,"xlink:href":v,preserveAspectRatio:"none",x:0,y:0,width:p.style.width,height:p.style.height})})},z.updateFx=e(42464).updateFx},94724:function(ee,z,e){"use strict";var M=e(25376),k=e(22548),o=e(98192).u,T=e(92880).extendFlat,b=e(31780).templatedArray,h=e(29736).descriptionWithDates,s=e(39032).ONEDAY,t=e(33816),i=t.HOUR_PATTERN,n=t.WEEKDAY_PATTERN,r={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},a=T({},r,{values:r.values.slice().concat(["sync"])});function l(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},d={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"data_array",editType:"ticks"},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function g(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=5),w}function p(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var v={valType:"color",dflt:k.defaultLine,editType:"ticks"},m={valType:"color",dflt:k.lightLine,editType:"ticks"};function y(S){var w={valType:"number",min:0,editType:"ticks"};return S||(w.dflt=1),w}var _=T({},o,{editType:"ticks"}),f={valType:"boolean",editType:"ticks"};ee.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:k.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:M({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"calc"},rangebreaks:b("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[n,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:s},editType:"calc"}),tickmode:a,nticks:l(),tick0:u,dtick:d,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:c,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:g(),tickwidth:p(),tickcolor:v,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:M({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:h("tick label")},tickformatstops:b("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:h("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:f,gridcolor:m,gridwidth:y(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:k.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",t.idRegex.x.toString(),t.idRegex.y.toString()],editType:"plot"},minor:{tickmode:r,nticks:l("minor"),tick0:u,dtick:d,tickvals:c,ticks:x,ticklen:g("minor"),tickwidth:p("minor"),tickcolor:v,gridcolor:m,gridwidth:y("minor"),griddash:_,showgrid:f,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:M({editType:"ticks"})}}},67352:function(ee,z,e){"use strict";var M=e(3400),k=e(76308),o=e(10624).isUnifiedHover,T=e(41008),b=e(31780),h=e(64859),s=e(94724),t=e(14944),i=e(28336),n=e(71888),r=e(37668),a=e(79811),l=a.id2name,u=a.name2id,d=e(33816).AX_ID_PATTERN,c=e(24040),x=c.traceIs,g=c.getComponentMethod;function p(v,m,y){Array.isArray(v[m])?v[m].push(y):v[m]=[y]}ee.exports=function(v,m,y){var _,f,S=m.autotypenumbers,w={},E={},P={},C={},O={},R={},j={},D={},N={},W={};for(_=0;_<y.length;_++){var F=y[_];if(x(F,"cartesian")||x(F,"gl2d")){var U,V;if(F.xaxis)U=l(F.xaxis),p(w,U,F);else if(F.xaxes)for(f=0;f<F.xaxes.length;f++)p(w,l(F.xaxes[f]),F);if(F.yaxis)V=l(F.yaxis),p(w,V,F);else if(F.yaxes)for(f=0;f<F.yaxes.length;f++)p(w,l(F.yaxes[f]),F);F.type==="funnel"?F.orientation==="h"?(U&&(E[U]=!0),V&&(j[V]=!0)):V&&(P[V]=!0):F.type==="image"?(V&&(D[V]=!0),U&&(D[U]=!0)):(V&&(O[V]=!0,R[V]=!0),x(F,"carpet")&&(F.type!=="carpet"||F._cheater)||U&&(C[U]=!0)),F.type==="carpet"&&F._cheater&&U&&(E[U]=!0),x(F,"2dMap")&&(N[U]=!0,N[V]=!0),x(F,"oriented")&&(W[F.orientation==="h"?V:U]=!0)}}var te=m._subplots,J=te.xaxis,K=te.yaxis,X=M.simpleMap(J,l),Z=M.simpleMap(K,l),$=X.concat(Z),re=k.background;J.length&&K.length&&(re=M.coerce(v,m,h,"plot_bgcolor"));var oe,ie,ue,me,be,ge=k.combine(re,m.paper_bgcolor);function de(){var Qe=w[oe]||[];be._traceIndices=Qe.map(function(wt){return wt._expandedIndex}),be._annIndices=[],be._shapeIndices=[],be._selectionIndices=[],be._imgIndices=[],be._subplotsWith=[],be._counterAxes=[],be._name=be._attr=oe,be._id=ie}function ve(Qe,wt){return M.coerce(me,be,s,Qe,wt)}function pe(Qe,wt){return M.coerce2(me,be,s,Qe,wt)}function _e(Qe){return Qe==="x"?K:J}function Te(Qe,wt){for(var It=Qe==="x"?X:Z,Dt=[],Ct=0;Ct<It.length;Ct++){var He=It[Ct];He===wt||(v[He]||{}).overlaying||Dt.push(u(He))}return Dt}var le={x:_e("x"),y:_e("y")},ae=le.x.concat(le.y),he={},Se=[];function ke(){var Qe=me.matches;d.test(Qe)&&ae.indexOf(Qe)===-1&&(he[Qe]=me.type,Se=Object.keys(he))}var Me=T(v,m),Ee=o(Me);for(_=0;_<$.length;_++){oe=$[_],ie=u(oe),ue=oe.charAt(0),M.isPlainObject(v[oe])||(v[oe]={}),me=v[oe],be=b.newContainer(m,oe,ue+"axis"),de();var De=ue==="x"&&!C[oe]&&E[oe]||ue==="y"&&!O[oe]&&P[oe],fe=ue==="y"&&(!R[oe]&&j[oe]||D[oe]),xe={hasMinor:!0,letter:ue,font:m.font,outerTicks:N[oe],showGrid:!W[oe],data:w[oe]||[],bgColor:ge,calendar:m.calendar,automargin:!0,visibleDflt:De,reverseDflt:fe,autotypenumbersDflt:S,splomStash:((m._splomAxes||{})[ue]||{})[ie],noAutotickangles:ue==="y"};ve("uirevision",m.uirevision),t(me,be,ve,xe),i(me,be,ve,xe,m);var we=Ee&&ue===Me.charAt(0),Oe=pe("spikecolor",Ee?be.color:void 0),ze=pe("spikethickness",Ee?1.5:void 0),Pe=pe("spikedash",Ee?"dot":void 0),Ue=pe("spikemode",Ee?"across":void 0),Ve=pe("spikesnap");ve("showspikes",!!(we||Oe||ze||Pe||Ue||Ve))||(delete be.spikecolor,delete be.spikethickness,delete be.spikedash,delete be.spikemode,delete be.spikesnap);var Ze=l(me.overlaying),it=[0,1];if(m[Ze]!==void 0){var tt=l(m[Ze].anchor);m[tt]!==void 0&&(it=m[tt].domain)}r(me,be,ve,{letter:ue,counterAxes:le[ue],overlayableAxes:Te(ue,oe),grid:m.grid,overlayingDomain:it}),ve("title.standoff"),ke(),be._input=me}for(_=0;_<Se.length;){ie=Se[_++],ue=(oe=l(ie)).charAt(0),M.isPlainObject(v[oe])||(v[oe]={}),me=v[oe],be=b.newContainer(m,oe,ue+"axis"),de();var dt={letter:ue,font:m.font,outerTicks:N[oe],showGrid:!W[oe],data:[],bgColor:ge,calendar:m.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((m._splomAxes||{})[ue]||{})[ie]};ve("uirevision",m.uirevision),be.type=he[ie]||"linear",i(me,be,ve,dt,m),r(me,be,ve,{letter:ue,counterAxes:le[ue],overlayableAxes:Te(ue,oe),grid:m.grid}),ve("fixedrange"),ke(),be._input=me}var yt=g("rangeslider","handleDefaults"),vt=g("rangeselector","handleDefaults");for(_=0;_<X.length;_++)oe=X[_],me=v[oe],be=m[oe],yt(v,m,oe),be.type==="date"&&vt(me,be,m,Z,be.calendar),ve("fixedrange");for(_=0;_<Z.length;_++){oe=Z[_],me=v[oe],be=m[oe];var et=m[l(be.anchor)];ve("fixedrange",g("rangeslider","isVisible")(et))}n.handleDefaults(v,m,{axIds:ae.concat(Se).sort(a.idSort),axHasImage:D})}},42136:function(ee,z,e){"use strict";var M=e(49760).mix,k=e(22548),o=e(3400);ee.exports=function(T,b,h,s){var t=(s=s||{}).dfltColor;function i(v,m){return o.coerce2(T,b,s.attributes,v,m)}var n=i("linecolor",t),r=i("linewidth");h("showline",s.showLine||!!n||!!r)||(delete b.linecolor,delete b.linewidth);var a=i("gridcolor",M(t,s.bgColor,s.blend||k.lightFraction).toRgbString()),l=i("gridwidth"),u=i("griddash");if(h("showgrid",s.showGrid||!!a||!!l||!!u)||(delete b.gridcolor,delete b.gridwidth,delete b.griddash),s.hasMinor){var d=i("minor.gridcolor",M(b.gridcolor,s.bgColor,67).toRgbString()),c=i("minor.gridwidth",b.gridwidth||1),x=i("minor.griddash",b.griddash||"solid");h("minor.showgrid",!!d||!!c||!!x)||(delete b.minor.gridcolor,delete b.minor.gridwidth,delete b.minor.griddash)}if(!s.noZeroLine){var g=i("zerolinecolor",t),p=i("zerolinewidth");h("zeroline",s.showGrid||!!g||!!p)||(delete b.zerolinecolor,delete b.zerolinewidth)}}},37668:function(ee,z,e){"use strict";var M=e(38248),k=e(3400);ee.exports=function(o,T,b,h){var s,t,i,n,r,a,l=h.counterAxes||[],u=h.overlayableAxes||[],d=h.letter,c=h.grid,x=h.overlayingDomain;c&&(t=c._domains[d][c._axisMap[T._id]],s=c._anchors[T._id],t&&(i=c[d+"side"].split(" ")[0],n=c.domain[d][i==="right"||i==="top"?1:0])),t=t||[0,1],s=s||(M(o.position)?"free":l[0]||"free"),i=i||(d==="x"?"bottom":"left"),n=n||0,r=0,a=!1;var g=k.coerce(o,T,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:s}},"anchor"),p=k.coerce(o,T,{side:{valType:"enumerated",values:d==="x"?["bottom","top"]:["left","right"],dflt:i}},"side");g==="free"&&(d==="y"&&(b("autoshift")&&(n=p==="left"?x[0]:x[1],a=!T.automargin||T.automargin,r=p==="left"?-3:3),b("shift",r)),b("position",n)),b("automargin",a);var v=!1;if(u.length&&(v=k.coerce(o,T,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!v){var m=b("domain",t);m[0]>m[1]-.000244140625&&(T.domain=t),k.noneOrAll(o.domain,T.domain,t),T.tickmode==="sync"&&(T.tickmode="auto")}return b("layer"),T}},42568:function(ee,z,e){"use strict";var M=e(85024);ee.exports=function(k,o,T,b,h){h||(h={});var s=h.tickSuffixDflt,t=M(k);T("tickprefix")&&T("showtickprefix",t),T("ticksuffix",s)&&T("showticksuffix",t)}},96312:function(ee,z,e){"use strict";var M=e(76808);ee.exports=function(k,o,T,b){var h=o._template||{},s=o.type||h.type||"-";T("minallowed"),T("maxallowed");var t,i=T("range");i||b.noInsiderange||s==="log"||(!(t=T("insiderange"))||t[0]!==null&&t[1]!==null||(o.insiderange=!1,t=void 0),t&&(i=T("range",t)));var n,r=o.getAutorangeDflt(i,b),a=T("autorange",r);!i||(i[0]!==null||i[1]!==null)&&(i[0]!==null&&i[1]!==null||a!=="reversed"&&a!==!0)&&(i[0]===null||a!=="min"&&a!=="max reversed")&&(i[1]===null||a!=="max"&&a!=="min reversed")||(i=void 0,delete o.range,o.autorange=!0,n=!0),n||(a=T("autorange",r=o.getAutorangeDflt(i,b))),a&&(M(T,a,i),s!=="linear"&&s!=="-"||T("rangemode")),o.cleanRange()}},21160:function(ee,z,e){"use strict";var M=e(84284).FROM_BL;ee.exports=function(k,o,T){T===void 0&&(T=M[k.constraintoward||"center"]);var b=[k.r2l(k.range[0]),k.r2l(k.range[1])],h=b[0]+(b[1]-b[0])*T;k.range=k._input.range=[k.l2r(h+(b[0]-h)*o),k.l2r(h+(b[1]-h)*o)],k.setScale()}},78344:function(ee,z,e){"use strict";var M=e(33428),k=e(94336).E9,o=e(3400),T=o.numberFormat,b=e(38248),h=o.cleanNumber,s=o.ms2DateTime,t=o.dateTime2ms,i=o.ensureNumber,n=o.isArrayOrTypedArray,r=e(39032),a=r.FP_SAFE,l=r.BADNUM,u=r.LOG_CLIP,d=r.ONEWEEK,c=r.ONEDAY,x=r.ONEHOUR,g=r.ONEMIN,p=r.ONESEC,v=e(79811),m=e(33816),y=m.HOUR_PATTERN,_=m.WEEKDAY_PATTERN;function f(w){return Math.pow(10,w)}function S(w){return w!=null}ee.exports=function(w,E){E=E||{};var P=w._id||"x",C=P.charAt(0);function O($,re){if($>0)return Math.log($)/Math.LN10;if($<=0&&re&&w.range&&w.range.length===2){var oe=w.range[0],ie=w.range[1];return .5*(oe+ie-2*u*Math.abs(oe-ie))}return l}function R($,re,oe,ie){if((ie||{}).msUTC&&b($))return+$;var ue=t($,oe||w.calendar);if(ue===l){if(!b($))return l;$=+$;var me=Math.floor(10*o.mod($+.05,1)),be=Math.round($-me/10);ue=t(new Date(be))+me/10}return ue}function j($,re,oe){return s($,re,oe||w.calendar)}function D($){return w._categories[Math.round($)]}function N($){if(S($)){if(w._categoriesMap===void 0&&(w._categoriesMap={}),w._categoriesMap[$]!==void 0)return w._categoriesMap[$];w._categories.push(typeof $=="number"?String($):$);var re=w._categories.length-1;return w._categoriesMap[$]=re,re}return l}function W($){if(w._categoriesMap)return w._categoriesMap[$]}function F($){var re=W($);return re!==void 0?re:b($)?+$:void 0}function U($){return b($)?+$:W($)}function V($,re,oe){return M.round(oe+re*$,2)}function te($,re,oe){return($-oe)/re}var J=function($){return b($)?V($,w._m,w._b):l},K=function($){return te($,w._m,w._b)};if(w.rangebreaks){var X=C==="y";J=function($){if(!b($))return l;var re=w._rangebreaks.length;if(!re)return V($,w._m,w._b);var oe=X;w.range[0]>w.range[1]&&(oe=!oe);for(var ie=oe?-1:1,ue=ie*$,me=0,be=0;be<re;be++){var ge=ie*w._rangebreaks[be].min,de=ie*w._rangebreaks[be].max;if(ue<ge)break;if(!(ue>de)){me=ue<(ge+de)/2?be:be+1;break}me=be+1}var ve=w._B[me]||0;return isFinite(ve)?V($,w._m2,ve):0},K=function($){var re=w._rangebreaks.length;if(!re)return te($,w._m,w._b);for(var oe=0,ie=0;ie<re&&!($<w._rangebreaks[ie].pmin);ie++)$>w._rangebreaks[ie].pmax&&(oe=ie+1);return te($,w._m2,w._B[oe])}}w.c2l=w.type==="log"?O:i,w.l2c=w.type==="log"?f:i,w.l2p=J,w.p2l=K,w.c2p=w.type==="log"?function($,re){return J(O($,re))}:J,w.p2c=w.type==="log"?function($){return f(K($))}:K,["linear","-"].indexOf(w.type)!==-1?(w.d2r=w.r2d=w.d2c=w.r2c=w.d2l=w.r2l=h,w.c2d=w.c2r=w.l2d=w.l2r=i,w.d2p=w.r2p=function($){return w.l2p(h($))},w.p2d=w.p2r=K,w.cleanPos=i):w.type==="log"?(w.d2r=w.d2l=function($,re){return O(h($),re)},w.r2d=w.r2c=function($){return f(h($))},w.d2c=w.r2l=h,w.c2d=w.l2r=i,w.c2r=O,w.l2d=f,w.d2p=function($,re){return w.l2p(w.d2r($,re))},w.p2d=function($){return f(K($))},w.r2p=function($){return w.l2p(h($))},w.p2r=K,w.cleanPos=i):w.type==="date"?(w.d2r=w.r2d=o.identity,w.d2c=w.r2c=w.d2l=w.r2l=R,w.c2d=w.c2r=w.l2d=w.l2r=j,w.d2p=w.r2p=function($,re,oe){return w.l2p(R($,0,oe))},w.p2d=w.p2r=function($,re,oe){return j(K($),re,oe)},w.cleanPos=function($){return o.cleanDate($,l,w.calendar)}):w.type==="category"?(w.d2c=w.d2l=N,w.r2d=w.c2d=w.l2d=D,w.d2r=w.d2l_noadd=F,w.r2c=function($){var re=U($);return re!==void 0?re:w.fraction2r(.5)},w.l2r=w.c2r=i,w.r2l=U,w.d2p=function($){return w.l2p(w.r2c($))},w.p2d=function($){return D(K($))},w.r2p=w.d2p,w.p2r=K,w.cleanPos=function($){return typeof $=="string"&&$!==""?$:i($)}):w.type==="multicategory"&&(w.r2d=w.c2d=w.l2d=D,w.d2r=w.d2l_noadd=F,w.r2c=function($){var re=F($);return re!==void 0?re:w.fraction2r(.5)},w.r2c_just_indices=W,w.l2r=w.c2r=i,w.r2l=F,w.d2p=function($){return w.l2p(w.r2c($))},w.p2d=function($){return D(K($))},w.r2p=w.d2p,w.p2r=K,w.cleanPos=function($){return Array.isArray($)||typeof $=="string"&&$!==""?$:i($)},w.setupMultiCategory=function($){var re,oe,ie=w._traceIndices,ue=w._matchGroup;if(ue&&w._categories.length===0){for(var me in ue)if(me!==P){var be=E[v.id2name(me)];ie=ie.concat(be._traceIndices)}}var ge=[[0,{}],[0,{}]],de=[];for(re=0;re<ie.length;re++){var ve=$[ie[re]];if(C in ve){var pe=ve[C],_e=ve._length||o.minRowLength(pe);if(n(pe[0])&&n(pe[1]))for(oe=0;oe<_e;oe++){var Te=pe[0][oe],le=pe[1][oe];S(Te)&&S(le)&&(de.push([Te,le]),Te in ge[0][1]||(ge[0][1][Te]=ge[0][0]++),le in ge[1][1]||(ge[1][1][le]=ge[1][0]++))}}}for(de.sort(function(ae,he){var Se=ge[0][1],ke=Se[ae[0]]-Se[he[0]];if(ke)return ke;var Me=ge[1][1];return Me[ae[1]]-Me[he[1]]}),re=0;re<de.length;re++)N(de[re])}),w.fraction2r=function($){var re=w.r2l(w.range[0]),oe=w.r2l(w.range[1]);return w.l2r(re+$*(oe-re))},w.r2fraction=function($){var re=w.r2l(w.range[0]),oe=w.r2l(w.range[1]);return(w.r2l($)-re)/(oe-re)},w.limitRange=function($){var re=w.minallowed,oe=w.maxallowed;if(re!==void 0||oe!==void 0){$||($="range");var ie=o.nestedProperty(w,$).get(),ue=o.simpleMap(ie,w.r2l),me=ue[1]<ue[0];me&&ue.reverse();var be=o.simpleMap([re,oe],w.r2l);if(re!==void 0&&ue[0]<be[0]&&(ie[me?1:0]=re),oe!==void 0&&ue[1]>be[1]&&(ie[me?0:1]=oe),ie[0]===ie[1]){var ge=w.l2r(re),de=w.l2r(oe);if(re!==void 0){var ve=ge+1;oe!==void 0&&(ve=Math.min(ve,de)),ie[me?1:0]=ve}if(oe!==void 0){var pe=de+1;re!==void 0&&(pe=Math.max(pe,ge)),ie[me?0:1]=pe}}}},w.cleanRange=function($,re){w._cleanRange($,re),w.limitRange($)},w._cleanRange=function($,re){re||(re={}),$||($="range");var oe,ie,ue=o.nestedProperty(w,$).get();if(ie=(ie=w.type==="date"?o.dfltRange(w.calendar):C==="y"?m.DFLTRANGEY:w._name==="realaxis"?[0,1]:re.dfltRange||m.DFLTRANGEX).slice(),w.rangemode!=="tozero"&&w.rangemode!=="nonnegative"||(ie[0]=0),ue&&ue.length===2){var me=ue[0]===null,be=ue[1]===null;for(w.type!=="date"||w.autorange||(ue[0]=o.cleanDate(ue[0],l,w.calendar),ue[1]=o.cleanDate(ue[1],l,w.calendar)),oe=0;oe<2;oe++)if(w.type==="date"){if(!o.isDateTime(ue[oe],w.calendar)){w[$]=ie;break}if(w.r2l(ue[0])===w.r2l(ue[1])){var ge=o.constrain(w.r2l(ue[0]),o.MIN_MS+1e3,o.MAX_MS-1e3);ue[0]=w.l2r(ge-1e3),ue[1]=w.l2r(ge+1e3);break}}else{if(!b(ue[oe])){if(me||be||!b(ue[1-oe])){w[$]=ie;break}ue[oe]=ue[1-oe]*(oe?10:.1)}if(ue[oe]<-a?ue[oe]=-a:ue[oe]>a&&(ue[oe]=a),ue[0]===ue[1]){var de=Math.max(1,Math.abs(1e-6*ue[0]));ue[0]-=de,ue[1]+=de}}}else o.nestedProperty(w,$).set(ie)},w.setScale=function($){var re=E._size;if(w.overlaying){var oe=v.getFromId({_fullLayout:E},w.overlaying);w.domain=oe.domain}var ie=$&&w._r?"_r":"range",ue=w.calendar;w.cleanRange(ie);var me,be,ge=w.r2l(w[ie][0],ue),de=w.r2l(w[ie][1],ue),ve=C==="y";if(ve?(w._offset=re.t+(1-w.domain[1])*re.h,w._length=re.h*(w.domain[1]-w.domain[0]),w._m=w._length/(ge-de),w._b=-w._m*de):(w._offset=re.l+w.domain[0]*re.w,w._length=re.w*(w.domain[1]-w.domain[0]),w._m=w._length/(de-ge),w._b=-w._m*ge),w._rangebreaks=[],w._lBreaks=0,w._m2=0,w._B=[],w.rangebreaks&&(w._rangebreaks=w.locateBreaks(Math.min(ge,de),Math.max(ge,de)),w._rangebreaks.length)){for(me=0;me<w._rangebreaks.length;me++)be=w._rangebreaks[me],w._lBreaks+=Math.abs(be.max-be.min);var pe=ve;ge>de&&(pe=!pe),pe&&w._rangebreaks.reverse();var _e=pe?-1:1;for(w._m2=_e*w._length/(Math.abs(de-ge)-w._lBreaks),w._B.push(-w._m2*(ve?de:ge)),me=0;me<w._rangebreaks.length;me++)be=w._rangebreaks[me],w._B.push(w._B[w._B.length-1]-_e*w._m2*(be.max-be.min));for(me=0;me<w._rangebreaks.length;me++)(be=w._rangebreaks[me]).pmin=J(be.min),be.pmax=J(be.max)}if(!isFinite(w._m)||!isFinite(w._b)||w._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},w.maskBreaks=function($){var re,oe,ie,ue,me,be=w.rangebreaks||[];be._cachedPatterns||(be._cachedPatterns=be.map(function(Te){return Te.enabled&&Te.bounds?o.simpleMap(Te.bounds,Te.pattern?h:w.d2c):null})),be._cachedValues||(be._cachedValues=be.map(function(Te){return Te.enabled&&Te.values?o.simpleMap(Te.values,w.d2c).sort(o.sorterAsc):null}));for(var ge=0;ge<be.length;ge++){var de=be[ge];if(de.enabled){if(de.bounds){var ve=de.pattern;switch(oe=(re=be._cachedPatterns[ge])[0],ie=re[1],ve){case _:ue=(me=new Date($)).getUTCDay(),oe>ie&&(ie+=7,ue<oe&&(ue+=7));break;case y:ue=(me=new Date($)).getUTCHours()+(me.getUTCMinutes()/60+me.getUTCSeconds()/3600+me.getUTCMilliseconds()/36e5),oe>ie&&(ie+=24,ue<oe&&(ue+=24));break;case"":ue=$}if(ue>=oe&&ue<ie)return l}else for(var pe=be._cachedValues[ge],_e=0;_e<pe.length;_e++)if(ie=(oe=pe[_e])+de.dvalue,$>=oe&&$<ie)return l}}return $},w.locateBreaks=function($,re){var oe,ie,ue,me,be=[];if(!w.rangebreaks)return be;var ge=w.rangebreaks.slice().sort(function(Me,Ee){return Me.pattern===_&&Ee.pattern===y?-1:Ee.pattern===_&&Me.pattern===y?1:0}),de=function(Me,Ee){if((Me=o.constrain(Me,$,re))!==(Ee=o.constrain(Ee,$,re))){for(var De=!0,fe=0;fe<be.length;fe++){var xe=be[fe];Me<xe.max&&Ee>=xe.min&&(Me<xe.min&&(xe.min=Me),Ee>xe.max&&(xe.max=Ee),De=!1)}De&&be.push({min:Me,max:Ee})}};for(oe=0;oe<ge.length;oe++){var ve=ge[oe];if(ve.enabled)if(ve.bounds){var pe=$,_e=re;ve.pattern&&(pe=Math.floor(pe)),ue=(ie=o.simpleMap(ve.bounds,ve.pattern?h:w.r2l))[0],me=ie[1];var Te,le,ae=new Date(pe);switch(ve.pattern){case _:le=d,Te=(me-ue+(me<ue?7:0))*c,pe+=ue*c-(ae.getUTCDay()*c+ae.getUTCHours()*x+ae.getUTCMinutes()*g+ae.getUTCSeconds()*p+ae.getUTCMilliseconds());break;case y:le=c,Te=(me-ue+(me<ue?24:0))*x,pe+=ue*x-(ae.getUTCHours()*x+ae.getUTCMinutes()*g+ae.getUTCSeconds()*p+ae.getUTCMilliseconds());break;default:pe=Math.min(ie[0],ie[1]),Te=le=(_e=Math.max(ie[0],ie[1]))-pe}for(var he=pe;he<_e;he+=le)de(he,he+Te)}else for(var Se=o.simpleMap(ve.values,w.d2c),ke=0;ke<Se.length;ke++)de(ue=Se[ke],me=ue+ve.dvalue)}return be.sort(function(Me,Ee){return Me.min-Ee.min}),be},w.makeCalcdata=function($,re,oe){var ie,ue,me,be,ge=w.type,de=ge==="date"&&$[re+"calendar"];if(re in $){if(ie=$[re],be=$._length||o.minRowLength(ie),o.isTypedArray(ie)&&(ge==="linear"||ge==="log")){if(be===ie.length)return ie;if(ie.subarray)return ie.subarray(0,be)}if(ge==="multicategory")return function(_e,Te){for(var le=new Array(Te),ae=0;ae<Te;ae++){var he=(_e[0]||[])[ae],Se=(_e[1]||[])[ae];le[ae]=W([he,Se])}return le}(ie,be);for(ue=new Array(be),me=0;me<be;me++)ue[me]=w.d2c(ie[me],0,de,oe)}else{var ve=re+"0"in $?w.d2c($[re+"0"],0,de):0,pe=$["d"+re]?Number($["d"+re]):1;for(ie=$[{x:"y",y:"x"}[re]],be=$._length||ie.length,ue=new Array(be),me=0;me<be;me++)ue[me]=ve+me*pe}if(w.rangebreaks)for(me=0;me<be;me++)ue[me]=w.maskBreaks(ue[me]);return ue},w.isValidRange=function($,re){return Array.isArray($)&&$.length===2&&(re&&$[0]===null||b(w.r2l($[0])))&&(re&&$[1]===null||b(w.r2l($[1])))},w.getAutorangeDflt=function($,re){var oe=!w.isValidRange($,"nullOk");return oe&&re&&re.reverseDflt?oe="reversed":$&&($[0]===null&&$[1]===null?oe=!0:$[0]===null&&$[1]!==null?oe="min":$[0]!==null&&$[1]===null&&(oe="max")),oe},w.isReversed=function(){var $=w.autorange;return $==="reversed"||$==="min reversed"||$==="max reversed"},w.isPtWithinRange=function($,re){var oe=w.c2l($[C],null,re),ie=w.r2l(w.range[0]),ue=w.r2l(w.range[1]);return ie<ue?ie<=oe&&oe<=ue:ue<=oe&&oe<=ie},w._emptyCategories=function(){w._categories=[],w._categoriesMap={}},w.clearCalc=function(){var $=w._matchGroup;if($){var re=null,oe=null;for(var ie in $){var ue=E[v.id2name(ie)];if(ue._categories){re=ue._categories,oe=ue._categoriesMap;break}}re&&oe?(w._categories=re,w._categoriesMap=oe):w._emptyCategories()}else w._emptyCategories();if(w._initialCategories)for(var me=0;me<w._initialCategories.length;me++)N(w._initialCategories[me])},w.sortByInitialCategories=function(){var $=[];if(w._emptyCategories(),w._initialCategories)for(var re=0;re<w._initialCategories.length;re++)N(w._initialCategories[re]);$=$.concat(w._traceIndices);var oe=w._matchGroup;for(var ie in oe)if(P!==ie){var ue=E[v.id2name(ie)];ue._categories=w._categories,ue._categoriesMap=w._categoriesMap,$=$.concat(ue._traceIndices)}return $};var Z=E._d3locale;w.type==="date"&&(w._dateFormat=Z?Z.timeFormat:k,w._extraFormat=E._extraFormat),w._separators=E.separators,w._numFormat=Z?Z.numberFormat:T,delete w._minDtick,delete w._forceTick0}},85024:function(ee){"use strict";ee.exports=function(z){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(M){return z[M]!==void 0});if(e.every(function(M){return z[M]===z[e[0]]})||e.length===1)return z[e[0]]}},95936:function(ee,z,e){"use strict";var M=e(3400),k=e(76308).contrast,o=e(94724),T=e(85024),b=e(51272);function h(s,t){function i(n,r){return M.coerce(s,t,o.tickformatstops,n,r)}i("enabled")&&(i("dtickrange"),i("value"))}ee.exports=function(s,t,i,n,r){r||(r={});var a=i("labelalias");M.isPlainObject(a)||delete t.labelalias;var l=T(s);if(i("showticklabels")){var u=r.font||{},d=t.color,c=(t.ticklabelposition||"").indexOf("inside")!==-1?k(r.bgColor):d&&d!==o.color.dflt?d:u.color;if(M.coerceFont(i,"tickfont",{family:u.family,size:u.size,color:c}),r.noTicklabelstep||n==="multicategory"||n==="log"||i("ticklabelstep"),!r.noAng){var x=i("tickangle");r.noAutotickangles||x!=="auto"||i("autotickangles")}if(n!=="category"){var g=i("tickformat");b(s,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:h}),t.tickformatstops.length||delete t.tickformatstops,r.noExp||g||n==="date"||(i("showexponent",l),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},25404:function(ee,z,e){"use strict";var M=e(3400),k=e(94724);ee.exports=function(o,T,b,h){var s=h.isMinor,t=s?o.minor||{}:o,i=s?T.minor:T,n=s?k.minor:k,r=s?"minor.":"",a=M.coerce2(t,i,n,"ticklen",s?.6*(T.ticklen||5):void 0),l=M.coerce2(t,i,n,"tickwidth",s?T.tickwidth||1:void 0),u=M.coerce2(t,i,n,"tickcolor",(s?T.tickcolor:void 0)||i.color);b(r+"ticks",!s&&h.outerTicks||a||l||u?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},26332:function(ee,z,e){"use strict";var M=e(98728),k=e(3400).isArrayOrTypedArray,o=e(38116).isTypedArraySpec,T=e(38116).decodeTypedArraySpec;ee.exports=function(b,h,s,t,i){i||(i={});var n=i.isMinor,r=n?b.minor||{}:b,a=n?h.minor:h,l=n?"minor.":"";function u(v){var m=r[v];return o(m)&&(m=T(m)),m!==void 0?m:(a._template||{})[v]}var d=u("tick0"),c=u("dtick"),x=u("tickvals"),g=s(l+"tickmode",k(x)?"array":c?"linear":"auto");if(g==="auto"||g==="sync")s(l+"nticks");else if(g==="linear"){var p=a.dtick=M.dtick(c,t);a.tick0=M.tick0(d,t,h.calendar,p)}else t!=="multicategory"&&(s(l+"tickvals")===void 0?a.tickmode="auto":n||s("ticktext"))}},73736:function(ee,z,e){"use strict";var M=e(33428),k=e(24040),o=e(3400),T=e(43616),b=e(54460);ee.exports=function(h,s,t,i){var n=h._fullLayout;if(s.length!==0){var r,a,l,u;i&&(r=i());var d=M.ease(t.easing);return h._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var g={},p=0;p<s.length;p++){var v=s[p],m=v.plotinfo.xaxis,y=v.plotinfo.yaxis;v.xr0&&(g[m._name+".range"]=v.xr0.slice()),v.yr0&&(g[y._name+".range"]=v.yr0.slice())}return k.call("relayout",h,g).then(function(){for(var _=0;_<s.length;_++)c(s[_].plotinfo)})}()}),a=Date.now(),u=window.requestAnimationFrame(function g(){l=Date.now();for(var p=Math.min(1,(l-a)/t.duration),v=d(p),m=0;m<s.length;m++)x(s[m],v);l-a>t.duration?(function(){for(var y={},_=0;_<s.length;_++){var f=s[_],S=f.plotinfo.xaxis,w=f.plotinfo.yaxis;f.xr1&&(y[S._name+".range"]=f.xr1.slice()),f.yr1&&(y[w._name+".range"]=f.yr1.slice())}r&&r(),k.call("relayout",h,y).then(function(){for(var E=0;E<s.length;E++)c(s[E].plotinfo)})}(),u=window.cancelAnimationFrame(g)):u=window.requestAnimationFrame(g)}),Promise.resolve()}function c(g){var p=g.xaxis,v=g.yaxis;n._defs.select("#"+g.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),g.plot.call(T.setTranslate,p._offset,v._offset).call(T.setScale,1,1);var m=g.plot.selectAll(".scatterlayer .trace");m.selectAll(".point").call(T.setPointGroupScale,1,1),m.selectAll(".textpoint").call(T.setTextPointsScale,1,1),m.call(T.hideOutsideRangePoints,g)}function x(g,p){var v=g.plotinfo,m=v.xaxis,y=v.yaxis,_=m._length,f=y._length,S=!!g.xr1,w=!!g.yr1,E=[];if(S){var P=o.simpleMap(g.xr0,m.r2l),C=o.simpleMap(g.xr1,m.r2l),O=P[1]-P[0],R=C[1]-C[0];E[0]=(P[0]*(1-p)+p*C[0]-P[0])/(P[1]-P[0])*_,E[2]=_*(1-p+p*R/O),m.range[0]=m.l2r(P[0]*(1-p)+p*C[0]),m.range[1]=m.l2r(P[1]*(1-p)+p*C[1])}else E[0]=0,E[2]=_;if(w){var j=o.simpleMap(g.yr0,y.r2l),D=o.simpleMap(g.yr1,y.r2l),N=j[1]-j[0],W=D[1]-D[0];E[1]=(j[1]*(1-p)+p*D[1]-j[1])/(j[0]-j[1])*f,E[3]=f*(1-p+p*W/N),y.range[0]=m.l2r(j[0]*(1-p)+p*D[0]),y.range[1]=y.l2r(j[1]*(1-p)+p*D[1])}else E[1]=0,E[3]=f;b.drawOne(h,m,{skipTitle:!0}),b.drawOne(h,y,{skipTitle:!0}),b.redrawComponents(h,[m._id,y._id]);var F=S?_/E[2]:1,U=w?f/E[3]:1,V=S?E[0]:0,te=w?E[1]:0,J=S?E[0]/E[2]*_:0,K=w?E[1]/E[3]*f:0,X=m._offset-J,Z=y._offset-K;v.clipRect.call(T.setTranslate,V,te).call(T.setScale,1/F,1/U),v.plot.call(T.setTranslate,X,Z).call(T.setScale,F,U),T.setPointGroupScale(v.zoomScalePts,1/F,1/U),T.setTextPointsScale(v.zoomScaleTxt,1/F,1/U)}b.redrawComponents(h)}},14944:function(ee,z,e){"use strict";var M=e(24040).traceIs,k=e(52976);function o(b){return{v:"x",h:"y"}[b.orientation||"v"]}function T(b,h){var s=o(b),t=M(b,"box-violin"),i=M(b._fullInput||{},"candlestick");return t&&!i&&h===s&&b[s]===void 0&&b[s+"0"]===void 0}ee.exports=function(b,h,s,t){s("autotypenumbers",t.autotypenumbersDflt),s("type",(t.splomStash||{}).type)==="-"&&(function(i,n){if(i.type==="-"){var r,a=i._id,l=a.charAt(0);a.indexOf("scene")!==-1&&(a=l);var u=function(y,_,f){for(var S=0;S<y.length;S++){var w=y[S];if(w.type==="splom"&&w._length>0&&(w["_"+f+"axes"]||{})[_]||(w[f+"axis"]||f)===_&&(T(w,f)||(w[f]||[]).length||w[f+"0"]))return w}}(n,a,l);if(u)if(u.type!=="histogram"||l!=={v:"y",h:"x"}[u.orientation||"v"]){var d=l+"calendar",c=u[d],x={noMultiCategory:!M(u,"cartesian")||M(u,"noMultiCategory")};if(u.type==="box"&&u._hasPreCompStats&&l==={h:"x",v:"y"}[u.orientation||"v"]&&(x.noMultiCategory=!0),x.autotypenumbers=i.autotypenumbers,T(u,l)){var g=o(u),p=[];for(r=0;r<n.length;r++){var v=n[r];M(v,"box-violin")&&(v[l+"axis"]||l)===a&&(v[g]!==void 0?p.push(v[g][0]):v.name!==void 0?p.push(v.name):p.push("text"),v[d]!==c&&(c=void 0))}i.type=k(p,c,x)}else if(u.type==="splom"){var m=u.dimensions[u._axesDim[a]];m.visible&&(i.type=k(m.values,c,x))}else i.type=k(u[l]||[u[l+"0"]],c,x)}else i.type="linear"}}(h,t.data),h.type==="-"?h.type="linear":b.type=h.type)}},62460:function(ee,z,e){"use strict";var M=e(24040),k=e(3400);function o(s,t,i){var n,r,a,l=!1;if(t.type==="data")n=s._fullData[t.traces!==null?t.traces[0]:0];else{if(t.type!=="layout")return!1;n=s._fullLayout}return r=k.nestedProperty(n,t.prop).get(),(a=i[t.type]=i[t.type]||{}).hasOwnProperty(t.prop)&&a[t.prop]!==r&&(l=!0),a[t.prop]=r,{changed:l,value:r}}function T(s,t){var i=[],n=t[0],r={};if(typeof n=="string")r[n]=t[1];else{if(!k.isPlainObject(n))return i;r=n}return h(r,function(a,l,u){i.push({type:"layout",prop:a,value:u})},"",0),i}function b(s,t){var i,n,r,a,l=[];if(n=t[0],r=t[1],i=t[2],a={},typeof n=="string")a[n]=r;else{if(!k.isPlainObject(n))return l;a=n,i===void 0&&(i=r)}return i===void 0&&(i=null),h(a,function(u,d,c){var x,g;if(Array.isArray(c)){g=c.slice();var p=Math.min(g.length,s.data.length);i&&(p=Math.min(p,i.length)),x=[];for(var v=0;v<p;v++)x[v]=i?i[v]:v}else g=c,x=i?i.slice():null;if(x===null)Array.isArray(g)&&(g=g[0]);else if(Array.isArray(x)){if(!Array.isArray(g)){var m=g;g=[];for(var y=0;y<x.length;y++)g[y]=m}g.length=Math.min(x.length,g.length)}l.push({type:"data",prop:u,traces:x,value:g})},"",0),l}function h(s,t,i,n){Object.keys(s).forEach(function(r){var a=s[r];if(r[0]!=="_"){var l=i+(n>0?".":"")+r;k.isPlainObject(a)?h(a,t,l,n+1):t(l,r,a)}})}z.manageCommandObserver=function(s,t,i,n){var r={},a=!0;t&&t._commandObserver&&(r=t._commandObserver),r.cache||(r.cache={}),r.lookupTable={};var l=z.hasSimpleAPICommandBindings(s,i,r.lookupTable);if(t&&t._commandObserver){if(l)return r;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,r}if(l){o(s,l,r.cache),r.check=function(){if(a){var c=o(s,l,r.cache);return c.changed&&n&&r.lookupTable[c.value]!==void 0&&(r.disable(),Promise.resolve(n({value:c.value,type:l.type,prop:l.prop,traces:l.traces,index:r.lookupTable[c.value]})).then(r.enable,r.enable)),c.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],d=0;d<u.length;d++)s._internalOn(u[d],r.check);r.remove=function(){for(var c=0;c<u.length;c++)s._removeInternalListener(u[c],r.check)}}else k.log("Unable to automatically bind plot updates to API command"),r.lookupTable={},r.remove=function(){};return r.disable=function(){a=!1},r.enable=function(){a=!0},t&&(t._commandObserver=r),r},z.hasSimpleAPICommandBindings=function(s,t,i){var n,r,a=t.length;for(n=0;n<a;n++){var l,u=t[n],d=u.method,c=u.args;if(Array.isArray(c)||(c=[]),!d)return!1;var x=z.computeAPICommandBindings(s,d,c);if(x.length!==1)return!1;if(r){if((l=x[0]).type!==r.type||l.prop!==r.prop)return!1;if(Array.isArray(r.traces)){if(!Array.isArray(l.traces))return!1;l.traces.sort();for(var g=0;g<r.traces.length;g++)if(r.traces[g]!==l.traces[g])return!1}else if(l.prop!==r.prop)return!1}else r=x[0],Array.isArray(r.traces)&&r.traces.sort();var p=(l=x[0]).value;if(Array.isArray(p)){if(p.length!==1)return!1;p=p[0]}i&&(i[p]=n)}return r},z.executeAPICommand=function(s,t,i){if(t==="skip")return Promise.resolve();var n=M.apiMethodRegistry[t],r=[s];Array.isArray(i)||(i=[]);for(var a=0;a<i.length;a++)r.push(i[a]);return n.apply(null,r).catch(function(l){return k.warn("API call to Plotly."+t+" rejected.",l),Promise.reject(l)})},z.computeAPICommandBindings=function(s,t,i){var n;switch(Array.isArray(i)||(i=[]),t){case"restyle":n=b(s,i);break;case"relayout":n=T(0,i);break;case"update":n=b(s,[i[0],i[2]]).concat(T(0,[i[1]]));break;case"animate":n=function(r,a){return Array.isArray(a[0])&&a[0].length===1&&["string","number"].indexOf(typeof a[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:a[0][0].toString()}]:[]}(0,i);break;default:n=[]}return n}},86968:function(ee,z,e){"use strict";var M=e(92880).extendFlat;z.u=function(k,o){o=o||{};var T={valType:"info_array",editType:(k=k||{}).editType,items:[{valType:"number",min:0,max:1,editType:k.editType},{valType:"number",min:0,max:1,editType:k.editType}],dflt:[0,1]},b=(k.name&&k.name,k.trace,o.description&&o.description,{x:M({},T,{}),y:M({},T,{}),editType:k.editType});return k.noGridCell||(b.row={valType:"integer",min:0,dflt:0,editType:k.editType},b.column={valType:"integer",min:0,dflt:0,editType:k.editType}),b},z.Q=function(k,o,T,b){var h=b&&b.x||[0,1],s=b&&b.y||[0,1],t=o.grid;if(t){var i=T("domain.column");i!==void 0&&(i<t.columns?h=t._domains.x[i]:delete k.domain.column);var n=T("domain.row");n!==void 0&&(n<t.rows?s=t._domains.y[n]:delete k.domain.row)}var r=T("domain.x",h),a=T("domain.y",s);r[0]<r[1]||(k.domain.x=h.slice()),a[0]<a[1]||(k.domain.y=s.slice())}},25376:function(ee){"use strict";ee.exports=function(z){var e=z.editType,M=z.colorEditType;M===void 0&&(M=e);var k={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:M},editType:e};return z.autoSize&&(k.size.dflt="auto"),z.autoColor&&(k.color.dflt="auto"),z.arrayOk&&(k.family.arrayOk=!0,k.size.arrayOk=!0,k.color.arrayOk=!0),k}},16672:function(ee){"use strict";ee.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(ee,z){"use strict";z.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},z.axesNames=["lonaxis","lataxis"],z.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},z.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},z.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},z.clipPad=.001,z.precision=.1,z.landColor="#F0DC82",z.waterColor="#3399FF",z.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},z.sphereSVG={type:"Sphere"},z.fillLayers={ocean:1,land:1,lakes:1},z.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},z.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],z.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],z.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(ee,z,e){"use strict";var M=e(33428),k=e(83356),o=k.geoPath,T=k.geoDistance,b=e(87108),h=e(24040),s=e(3400),t=s.strTranslate,i=e(76308),n=e(43616),r=e(93024),a=e(7316),l=e(54460),u=e(19280).getAutoRange,d=e(86476),c=e(22676).prepSelect,x=e(22676).clearOutline,g=e(22676).selectOnClick,p=e(79248),v=e(79552),m=e(27144),y=e(59972),_=e(55712).NO;function f(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=f.prototype;function w(E,P){var C=v.clipPad,O=E[0]+C,R=E[1]-C,j=P[0]+C,D=P[1]-C;O>0&&R<0&&(R+=360);var N=(R-O)/4;return{type:"Polygon",coordinates:[[[O,j],[O,D],[O+N,D],[O+2*N,D],[O+3*N,D],[R,D],[R,j],[R-N,j],[R-2*N,j],[R-3*N,j],[O,j]]]}}ee.exports=function(E){return new f(E)},S.plot=function(E,P,C,O){var R=this;if(O)return R.update(E,P,!0);R._geoCalcData=E,R._fullLayout=P;var j=P[this.id],D=[],N=!1;for(var W in v.layerNameToAdjective)if(W!=="frame"&&j["show"+W]){N=!0;break}for(var F=!1,U=0;U<E.length;U++){var V=E[0][0].trace;V._geo=R,V.locationmode&&(N=!0);var te=V.marker;if(te){var J=te.angle,K=te.angleref;(J||K==="north"||K==="previous")&&(F=!0)}}if(this._hasMarkerAngles=F,N){var X=y.getTopojsonName(j);R.topojson!==null&&X===R.topojsonName||(R.topojsonName=X,PlotlyGeoAssets.topojson[R.topojsonName]===void 0&&D.push(R.fetchTopojson()))}D=D.concat(m.fetchTraceGeoData(E)),C.push(new Promise(function(Z,$){Promise.all(D).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(E,P),Z()}).catch($)}))},S.fetchTopojson=function(){var E=this,P=y.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(C,O){M.json(P,function(R,j){if(R)return R.status===404?O(new Error(["plotly.js could not find topojson file at",P+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):O(new Error(["unexpected error while fetching topojson file at",P].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=j,C()})})},S.update=function(E,P,C){var O=P[this.id];this.hasChoropleth=!1;for(var R=0;R<E.length;R++){var j=E[R],D=j[0].trace;D.type==="choropleth"&&(this.hasChoropleth=!0),D.visible===!0&&D._length>0&&D._module.calcGeoJSON(j,P)}if(!C){if(this.updateProjection(E,P))return;this.viewInitial&&this.scope===O.scope||this.saveViewInitial(O)}this.scope=O.scope,this.updateBaseLayers(P,O),this.updateDims(P,O),this.updateFx(P,O),a.generalUpdatePerTraceModule(this.graphDiv,this,E,O);var N=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=N.selectAll(".point"),this.dataPoints.text=N.selectAll("text"),this.dataPaths.line=N.selectAll(".js-line");var W=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=W.selectAll("path"),this._render()},S.updateProjection=function(E,P){var C=this.graphDiv,O=P[this.id],R=P._size,j=O.domain,D=O.projection,N=O.lonaxis,W=O.lataxis,F=N._ax,U=W._ax,V=this.projection=function(ae){var he=ae.projection,Se=he.type,ke=v.projNames[Se];ke="geo"+s.titleCase(ke);for(var Me=(k[ke]||b[ke])(),Ee=ae._isSatellite?180*Math.acos(1/he.distance)/Math.PI:ae._isClipped?v.lonaxisSpan[Se]/2:null,De=["center","rotate","parallels","clipExtent"],fe=function(Oe){return Oe?Me:[]},xe=0;xe<De.length;xe++){var we=De[xe];typeof Me[we]!="function"&&(Me[we]=fe)}return Me.isLonLatOverEdges=function(Oe){if(Me(Oe)===null)return!0;if(Ee){var ze=Me.rotate();return T(Oe,[-ze[0],-ze[1]])>Ee*Math.PI/180}return!1},Me.getPath=function(){return o().projection(Me)},Me.getBounds=function(Oe){return Me.getPath().bounds(Oe)},Me.precision(v.precision),ae._isSatellite&&Me.tilt(he.tilt).distance(he.distance),Ee&&Me.clipAngle(Ee-v.clipPad),Me}(O),te=[[R.l+R.w*j.x[0],R.t+R.h*(1-j.y[1])],[R.l+R.w*j.x[1],R.t+R.h*(1-j.y[0])]],J=O.center||{},K=D.rotation||{},X=N.range||[],Z=W.range||[];if(O.fitbounds){F._length=te[1][0]-te[0][0],U._length=te[1][1]-te[0][1],F.range=u(C,F),U.range=u(C,U);var $=(F.range[0]+F.range[1])/2,re=(U.range[0]+U.range[1])/2;if(O._isScoped)J={lon:$,lat:re};else if(O._isClipped){J={lon:$,lat:re},K={lon:$,lat:re,roll:K.roll};var oe=D.type,ie=v.lonaxisSpan[oe]/2||180,ue=v.lataxisSpan[oe]/2||90;X=[$-ie,$+ie],Z=[re-ue,re+ue]}else J={lon:$,lat:re},K={lon:$,lat:K.lat,roll:K.roll}}V.center([J.lon-K.lon,J.lat-K.lat]).rotate([-K.lon,-K.lat,K.roll]).parallels(D.parallels);var me=w(X,Z);V.fitExtent(te,me);var be=this.bounds=V.getBounds(me),ge=this.fitScale=V.scale(),de=V.translate();if(O.fitbounds){var ve=V.getBounds(w(F.range,U.range)),pe=Math.min((be[1][0]-be[0][0])/(ve[1][0]-ve[0][0]),(be[1][1]-be[0][1])/(ve[1][1]-ve[0][1]));isFinite(pe)?V.scale(pe*ge):s.warn("Something went wrong during"+this.id+"fitbounds computations.")}else V.scale(D.scale*ge);var _e=this.midPt=[(be[0][0]+be[1][0])/2,(be[0][1]+be[1][1])/2];if(V.translate([de[0]+(_e[0]-de[0]),de[1]+(_e[1]-de[1])]).clipExtent(be),O._isAlbersUsa){var Te=V([J.lon,J.lat]),le=V.translate();V.translate([le[0]-(Te[0]-le[0]),le[1]-(Te[1]-le[1])])}},S.updateBaseLayers=function(E,P){var C=this,O=C.topojson,R=C.layers,j=C.basePaths;function D(V){return V==="lonaxis"||V==="lataxis"}function N(V){return Boolean(v.lineLayers[V])}function W(V){return Boolean(v.fillLayers[V])}var F=(this.hasChoropleth?v.layersForChoropleth:v.layers).filter(function(V){return N(V)||W(V)?P["show"+V]:!D(V)||P[V].showgrid}),U=C.framework.selectAll(".layer").data(F,String);U.exit().each(function(V){delete R[V],delete j[V],M.select(this).remove()}),U.enter().append("g").attr("class",function(V){return"layer "+V}).each(function(V){var te=R[V]=M.select(this);V==="bg"?C.bgRect=te.append("rect").style("pointer-events","all"):D(V)?j[V]=te.append("path").style("fill","none"):V==="backplot"?te.append("g").classed("choroplethlayer",!0):V==="frontplot"?te.append("g").classed("scatterlayer",!0):N(V)?j[V]=te.append("path").style("fill","none").style("stroke-miterlimit",2):W(V)&&(j[V]=te.append("path").style("stroke","none"))}),U.order(),U.each(function(V){var te=j[V],J=v.layerNameToAdjective[V];V==="frame"?te.datum(v.sphereSVG):N(V)||W(V)?te.datum(_(O,O.objects[V])):D(V)&&te.datum(function(K,X,Z){var $,re,oe,ie=X[K],ue=v.scopeDefaults[X.scope];K==="lonaxis"?($=ue.lonaxisRange,re=ue.lataxisRange,oe=function(le,ae){return[le,ae]}):K==="lataxis"&&($=ue.lataxisRange,re=ue.lonaxisRange,oe=function(le,ae){return[ae,le]});var me={type:"linear",range:[$[0],$[1]-1e-6],tick0:ie.tick0,dtick:ie.dtick};l.setConvert(me,Z);var be=l.calcTicks(me);X.isScoped||K!=="lonaxis"||be.pop();for(var ge=be.length,de=new Array(ge),ve=0;ve<ge;ve++)for(var pe=be[ve].x,_e=de[ve]=[],Te=re[0];Te<re[1]+2.5;Te+=2.5)_e.push(oe(pe,Te));return{type:"MultiLineString",coordinates:de}}(V,P,E)).call(i.stroke,P[V].gridcolor).call(n.dashLine,P[V].griddash,P[V].gridwidth),N(V)?te.call(i.stroke,P[J+"color"]).call(n.dashLine,"",P[J+"width"]):W(V)&&te.call(i.fill,P[J+"color"])})},S.updateDims=function(E,P){var C=this.bounds,O=(P.framewidth||0)/2,R=C[0][0]-O,j=C[0][1]-O,D=C[1][0]-R+O,N=C[1][1]-j+O;n.setRect(this.clipRect,R,j,D,N),this.bgRect.call(n.setRect,R,j,D,N).call(i.fill,P.bgcolor),this.xaxis._offset=R,this.xaxis._length=D,this.yaxis._offset=j,this.yaxis._length=N},S.updateFx=function(E,P){var C=this,O=C.graphDiv,R=C.bgRect,j=E.dragmode,D=E.clickmode;if(!C.isStatic){var N={element:C.bgRect.node(),gd:O,plotinfo:{id:C.id,xaxis:C.xaxis,yaxis:C.yaxis,fillRangeItems:function(F,U){U.isRect?(F.range={})[C.id]=[W([U.xmin,U.ymin]),W([U.xmax,U.ymax])]:(F.lassoPoints={})[C.id]=U.map(W)}},xaxes:[C.xaxis],yaxes:[C.yaxis],subplot:C.id,clickFn:function(F){F===2&&x(O)}};j==="pan"?(R.node().onmousedown=null,R.call(p(C,P)),R.on("dblclick.zoom",function(){var F=C.viewInitial,U={};for(var V in F)U[C.id+"."+V]=F[V];h.call("_guiRelayout",O,U),O.emit("plotly_doubleclick",null)}),O._context._scrollZoom.geo||R.on("wheel.zoom",null)):j!=="select"&&j!=="lasso"||(R.on(".zoom",null),N.prepFn=function(F,U,V){c(F,U,V,N,j)},d.init(N)),R.on("mousemove",function(){var F=C.projection.invert(s.getPositionFromD3Event());if(!F)return d.unhover(O,M.event);C.xaxis.p2c=function(){return F[0]},C.yaxis.p2c=function(){return F[1]},r.hover(O,M.event,C.id)}),R.on("mouseout",function(){O._dragging||d.unhover(O,M.event)}),R.on("click",function(){j!=="select"&&j!=="lasso"&&(D.indexOf("select")>-1&&g(M.event,O,[C.xaxis],[C.yaxis],C.id,N),D.indexOf("event")>-1&&r.click(O,M.event))})}function W(F){return C.projection.invert([F[0]+C.xaxis._offset,F[1]+C.yaxis._offset])}},S.makeFramework=function(){var E=this,P=E.graphDiv,C=P._fullLayout,O="clip"+C._uid+E.id;E.clipDef=C._clips.append("clipPath").attr("id",O),E.clipRect=E.clipDef.append("rect"),E.framework=M.select(E.container).append("g").attr("class","geo "+E.id).call(n.setClipUrl,O,P),E.project=function(R){var j=E.projection(R);return j?[j[0]-E.xaxis._offset,j[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(R){return E.project(R)[0]}},E.yaxis={_id:"y",c2p:function(R){return E.project(R)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(E.mockAxis,C)},S.saveViewInitial=function(E){var P,C=E.center||{},O=E.projection,R=O.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":O.scale},P=E._isScoped?{"center.lon":C.lon,"center.lat":C.lat}:E._isClipped?{"projection.rotation.lon":R.lon,"projection.rotation.lat":R.lat}:{"center.lon":C.lon,"center.lat":C.lat,"projection.rotation.lon":R.lon},s.extendFlat(this.viewInitial,P)},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,P=this.projection,C=P.getPath();function O(j){var D=P(j.lonlat);return D?t(D[0],D[1]):null}function R(j){return P.isLonLatOverEdges(j.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",C);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(j){return C(j.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",R).attr("transform",O)}},10816:function(ee,z,e){"use strict";var M=e(84888).KY,k=e(3400).counterRegex,o=e(43520),T="geo",b=k(T),h={};h[T]={valType:"subplotid",dflt:T,editType:"calc"},ee.exports={attr:T,name:T,idRoot:T,idRegex:b,attrRegex:b,attributes:h,layoutAttributes:e(40384),supplyLayoutDefaults:e(86920),plot:function(s){for(var t=s._fullLayout,i=s.calcdata,n=t._subplots[T],r=0;r<n.length;r++){var a=n[r],l=M(i,T,a),u=t[a]._subplot;u||(u=o({id:a,graphDiv:s,container:t._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),t[a]._subplot=u),u.plot(l,t,s._promises)}},updateFx:function(s){for(var t=s._fullLayout,i=t._subplots[T],n=0;n<i.length;n++){var r=t[i[n]];r._subplot.updateFx(t,r)}},clean:function(s,t,i,n){for(var r=n._subplots[T]||[],a=0;a<r.length;a++){var l=r[a],u=n[l]._subplot;!t[l]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},40384:function(ee,z,e){"use strict";var M=e(22548),k=e(86968).u,o=e(98192).u,T=e(79552),b=e(67824).overrideAll,h=e(95376),s={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:M.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:o};(ee.exports=b({domain:k({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:h(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:h(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:M.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:M.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:M.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:M.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:M.background},lonaxis:s,lataxis:s},"plot","from-root")).uirevision={valType:"any",editType:"none"}},86920:function(ee,z,e){"use strict";var M=e(3400),k=e(168),o=e(84888).op,T=e(79552),b=e(40384),h=T.axesNames;function s(t,i,n,r){var a=o(r.fullData,"geo",r.id).map(function(K){return K._expandedIndex}),l=n("resolution"),u=n("scope"),d=T.scopeDefaults[u],c=n("projection.type",d.projType),x=i._isAlbersUsa=c==="albers usa";x&&(u=i.scope="usa");var g=i._isScoped=u!=="world",p=i._isSatellite=c==="satellite",v=i._isConic=c.indexOf("conic")!==-1||c==="albers",m=i._isClipped=!!T.lonaxisSpan[c];if(t.visible===!1){var y=M.extendDeep({},i._template);y.showcoastlines=!1,y.showcountries=!1,y.showframe=!1,y.showlakes=!1,y.showland=!1,y.showocean=!1,y.showrivers=!1,y.showsubunits=!1,y.lonaxis&&(y.lonaxis.showgrid=!1),y.lataxis&&(y.lataxis.showgrid=!1),i._template=y}for(var _=n("visible"),f=0;f<h.length;f++){var S,w=h[f],E=[30,10][f];if(g)S=d[w+"Range"];else{var P=T[w+"Span"],C=(P[c]||P["*"])/2,O=n("projection.rotation."+w.substr(0,3),d.projRotate[f]);S=[O-C,O+C]}var R=n(w+".range",S);n(w+".tick0"),n(w+".dtick",E),n(w+".showgrid",!!_&&void 0)&&(n(w+".gridcolor"),n(w+".gridwidth"),n(w+".griddash")),i[w]._ax={type:"linear",_id:w.slice(0,3),_traceIndices:a,setScale:M.identity,c2l:M.identity,r2l:M.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var j=i.lonaxis.range,D=i.lataxis.range,N=j[0],W=j[1];N>0&&W<0&&(W+=360);var F,U,V,te=(N+W)/2;if(!x){var J=g?d.projRotate:[te,0,0];F=n("projection.rotation.lon",J[0]),n("projection.rotation.lat",J[1]),n("projection.rotation.roll",J[2]),n("showcoastlines",!g&&_)&&(n("coastlinecolor"),n("coastlinewidth")),n("showocean",!!_&&void 0)&&n("oceancolor")}x?(U=-96.6,V=38.7):(U=g?te:F,V=(D[0]+D[1])/2),n("center.lon",U),n("center.lat",V),p&&(n("projection.tilt"),n("projection.distance")),v&&n("projection.parallels",d.projParallels||[0,60]),n("projection.scale"),n("showland",!!_&&void 0)&&n("landcolor"),n("showlakes",!!_&&void 0)&&n("lakecolor"),n("showrivers",!!_&&void 0)&&(n("rivercolor"),n("riverwidth")),n("showcountries",g&&u!=="usa"&&_)&&(n("countrycolor"),n("countrywidth")),(u==="usa"||u==="north america"&&l===50)&&(n("showsubunits",_),n("subunitcolor"),n("subunitwidth")),g||n("showframe",_)&&(n("framecolor"),n("framewidth")),n("bgcolor"),n("fitbounds")&&(delete i.projection.scale,g?(delete i.center.lon,delete i.center.lat):m?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}ee.exports=function(t,i,n){k(t,i,n,{type:"geo",attributes:b,handleDefaults:s,fullData:n,partition:"y"})}},79248:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(24040),T=Math.PI/180,b=180/Math.PI,h={cursor:"pointer"},s={cursor:"auto"};function t(g,p){return M.behavior.zoom().translate(p.translate()).scale(p.scale())}function i(g,p,v){var m=g.id,y=g.graphDiv,_=y.layout,f=_[m],S=y._fullLayout,w=S[m],E={},P={};function C(O,R){E[m+"."+O]=k.nestedProperty(f,O).get(),o.call("_storeDirectGUIEdit",_,S._preGUI,E);var j=k.nestedProperty(w,O);j.get()!==R&&(j.set(R),k.nestedProperty(f,O).set(R),P[m+"."+O]=R)}v(C),C("projection.scale",p.scale()/g.fitScale),C("fitbounds",!1),y.emit("plotly_relayout",P)}function n(g,p){var v=t(0,p);function m(y){var _=p.invert(g.midPt);y("center.lon",_[0]),y("center.lat",_[1])}return v.on("zoomstart",function(){M.select(this).style(h)}).on("zoom",function(){p.scale(M.event.scale).translate(M.event.translate),g.render(!0);var y=p.invert(g.midPt);g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":p.scale()/g.fitScale,"geo.center.lon":y[0],"geo.center.lat":y[1]})}).on("zoomend",function(){M.select(this).style(s),i(g,p,m)}),v}function r(g,p){var v,m,y,_,f,S,w,E,P,C=t(0,p);function O(j){return p.invert(j)}function R(j){var D=p.rotate(),N=p.invert(g.midPt);j("projection.rotation.lon",-D[0]),j("center.lon",N[0]),j("center.lat",N[1])}return C.on("zoomstart",function(){M.select(this).style(h),v=M.mouse(this),m=p.rotate(),y=p.translate(),_=m,f=O(v)}).on("zoom",function(){if(S=M.mouse(this),function(N){var W=O(N);if(!W)return!0;var F=p(W);return Math.abs(F[0]-N[0])>2||Math.abs(F[1]-N[1])>2}(v))return C.scale(p.scale()),void C.translate(p.translate());p.scale(M.event.scale),p.translate([y[0],M.event.translate[1]]),f?O(S)&&(E=O(S),w=[_[0]+(E[0]-f[0]),m[1],m[2]],p.rotate(w),_=w):f=O(v=S),P=!0,g.render(!0);var j=p.rotate(),D=p.invert(g.midPt);g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":p.scale()/g.fitScale,"geo.center.lon":D[0],"geo.center.lat":D[1],"geo.projection.rotation.lon":-j[0]})}).on("zoomend",function(){M.select(this).style(s),P&&i(g,p,R)}),C}function a(g,p){var v,m={r:p.rotate(),k:p.scale()},y=t(0,p),_=function(E){for(var P=0,C=arguments.length,O=[];++P<C;)O.push(arguments[P]);var R=M.dispatch.apply(null,O);return R.of=function(j,D){return function(N){var W;try{W=N.sourceEvent=M.event,N.target=E,M.event=N,R[N.type].apply(j,D)}finally{M.event=W}}},R}(y,"zoomstart","zoom","zoomend"),f=0,S=y.on;function w(E){var P=p.rotate();E("projection.rotation.lon",-P[0]),E("projection.rotation.lat",-P[1])}return y.on("zoomstart",function(){M.select(this).style(h);var E,P,C,O,R,j,D,N,W,F,U,V=M.mouse(this),te=p.rotate(),J=te,K=p.translate(),X=(P=.5*(E=te)[0]*T,C=.5*E[1]*T,O=.5*E[2]*T,R=Math.sin(P),j=Math.cos(P),D=Math.sin(C),N=Math.cos(C),W=Math.sin(O),[j*N*(F=Math.cos(O))+R*D*W,R*N*F-j*D*W,j*D*F+R*N*W,j*N*W-R*D*F]);v=l(p,V),S.call(y,"zoom",function(){var Z,$,re,oe,ie,ue,me,be,ge,de,ve=M.mouse(this);if(p.scale(m.k=M.event.scale),v){if(l(p,ve)){p.rotate(te).translate(K);var pe=l(p,ve),_e=function(ae,he){if(ae&&he){var Se=function(De,fe){return[De[1]*fe[2]-De[2]*fe[1],De[2]*fe[0]-De[0]*fe[2],De[0]*fe[1]-De[1]*fe[0]]}(ae,he),ke=Math.sqrt(x(Se,Se)),Me=.5*Math.acos(Math.max(-1,Math.min(1,x(ae,he)))),Ee=Math.sin(Me)/ke;return ke&&[Math.cos(Me),Se[2]*Ee,-Se[1]*Ee,Se[0]*Ee]}}(v,pe),Te=function(ae){return[Math.atan2(2*(ae[0]*ae[1]+ae[2]*ae[3]),1-2*(ae[1]*ae[1]+ae[2]*ae[2]))*b,Math.asin(Math.max(-1,Math.min(1,2*(ae[0]*ae[2]-ae[3]*ae[1]))))*b,Math.atan2(2*(ae[0]*ae[3]+ae[1]*ae[2]),1-2*(ae[2]*ae[2]+ae[3]*ae[3]))*b]}((re=(Z=X)[0],oe=Z[1],ie=Z[2],ue=Z[3],[re*(me=($=_e)[0])-oe*(be=$[1])-ie*(ge=$[2])-ue*(de=$[3]),re*be+oe*me+ie*de-ue*ge,re*ge-oe*de+ie*me+ue*be,re*de+oe*ge-ie*be+ue*me])),le=m.r=function(ae,he,Se){var ke=c(he,2,ae[0]);ke=c(ke,1,ae[1]),ke=c(ke,0,ae[2]-Se[2]);var Me,Ee,De=he[0],fe=he[1],xe=he[2],we=ke[0],Oe=ke[1],ze=ke[2],Pe=Math.atan2(fe,De)*b,Ue=Math.sqrt(De*De+fe*fe);Math.abs(Oe)>Ue?(Ee=(Oe>0?90:-90)-Pe,Me=0):(Ee=Math.asin(Oe/Ue)*b-Pe,Me=Math.sqrt(Ue*Ue-Oe*Oe));var Ve=180-Ee-2*Pe,Ze=(Math.atan2(ze,we)-Math.atan2(xe,Me))*b,it=(Math.atan2(ze,we)-Math.atan2(xe,-Me))*b;return u(Se[0],Se[1],Ee,Ze)<=u(Se[0],Se[1],Ve,it)?[Ee,Ze,Se[2]]:[Ve,it,Se[2]]}(Te,v,J);isFinite(le[0])&&isFinite(le[1])&&isFinite(le[2])||(le=J),p.rotate(le),J=le}}else v=l(p,V=ve);_.of(this,arguments)({type:"zoom"})}),U=_.of(this,arguments),f++||U({type:"zoomstart"})}).on("zoomend",function(){var E;M.select(this).style(s),S.call(y,"zoom",null),E=_.of(this,arguments),--f||E({type:"zoomend"}),i(g,p,w)}).on("zoom.redraw",function(){g.render(!0);var E=p.rotate();g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":p.scale()/g.fitScale,"geo.projection.rotation.lon":-E[0],"geo.projection.rotation.lat":-E[1]})}),M.rebind(y,_,"on")}function l(g,p){var v=g.invert(p);return v&&isFinite(v[0])&&isFinite(v[1])&&function(m){var y=m[0]*T,_=m[1]*T,f=Math.cos(_);return[f*Math.cos(y),f*Math.sin(y),Math.sin(_)]}(v)}function u(g,p,v,m){var y=d(v-g),_=d(m-p);return Math.sqrt(y*y+_*_)}function d(g){return(g%360+540)%360-180}function c(g,p,v){var m=v*T,y=g.slice(),_=p===0?1:0,f=p===2?1:2,S=Math.cos(m),w=Math.sin(m);return y[_]=g[_]*S-g[f]*w,y[f]=g[f]*S+g[_]*w,y}function x(g,p){for(var v=0,m=0,y=g.length;m<y;++m)v+=g[m]*p[m];return v}ee.exports=function(g,p){var v=g.projection;return(p._isScoped?n:p._isClipped?a:r)(g,v)}},84888:function(ee,z,e){"use strict";var M=e(24040),k=e(33816).SUBPLOT_PATTERN;z.KY=function(o,T,b){var h=M.subplotsRegistry[T];if(!h)return[];for(var s=h.attr,t=[],i=0;i<o.length;i++){var n=o[i];n[0].trace[s]===b&&t.push(n)}return t},z._M=function(o,T){var b,h=[],s=[];if(!(b=typeof T=="string"?M.getModule(T).plot:typeof T=="function"?T:T.plot))return[h,o];for(var t=0;t<o.length;t++){var i=o[t],n=i[0].trace;n.visible===!0&&n._length!==0&&(n._module&&n._module.plot===b?h.push(i):s.push(i))}return[h,s]},z.op=function(o,T,b){if(!M.subplotsRegistry[T])return[];var h,s,t,i=M.subplotsRegistry[T].attr,n=[];if(T==="gl2d"){var r=b.match(k);s="x"+r[1],t="y"+r[2]}for(var a=0;a<o.length;a++)h=o[a],T==="gl2d"&&M.traceIs(h,"gl2d")?h[i[0]]===s&&h[i[1]]===t&&n.push(h):h[i]===b&&n.push(h);return n}},2428:function(ee,z,e){"use strict";var M=e(62644),k=e(97264),o=e(29128),T=e(33816),b=e(89184);function h(s,t){this.element=s,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}ee.exports=function(s){var t=s.mouseContainer,i=s.glplot,n=new h(t,i);function r(){s.xaxis.autorange=!1,s.yaxis.autorange=!1}function a(l,u,d){var c,x,g=s.calcDataBox(),p=i.viewBox,v=n.lastPos[0],m=n.lastPos[1],y=T.MINDRAG*i.pixelRatio,_=T.MINZOOM*i.pixelRatio;function f(O,R,j){var D=Math.min(R,j),N=Math.max(R,j);D!==N?(g[O]=D,g[O+2]=N,n.dataBox=g,s.setRanges(g)):(s.selectBox.selectBox=[0,0,1,1],s.glplot.setDirty())}switch(u*=i.pixelRatio,d*=i.pixelRatio,d=p[3]-p[1]-d,s.fullLayout.dragmode){case"zoom":if(l){var S=u/(p[2]-p[0])*(g[2]-g[0])+g[0],w=d/(p[3]-p[1])*(g[3]-g[1])+g[1];n.boxInited||(n.boxStart[0]=S,n.boxStart[1]=w,n.dragStart[0]=u,n.dragStart[1]=d),n.boxEnd[0]=S,n.boxEnd[1]=w,n.boxInited=!0,n.boxEnabled||n.boxStart[0]===n.boxEnd[0]&&n.boxStart[1]===n.boxEnd[1]||(n.boxEnabled=!0);var E=Math.abs(n.dragStart[0]-u)<_,P=Math.abs(n.dragStart[1]-d)<_;if(!function(){for(var O=s.graphDiv._fullLayout._axisConstraintGroups,R=s.xaxis._id,j=s.yaxis._id,D=0;D<O.length;D++)if(O[D][R]!==-1){if(O[D][j]!==-1)return!0;break}return!1}()||E&&P)E&&(n.boxEnd[0]=n.boxStart[0]),P&&(n.boxEnd[1]=n.boxStart[1]);else{c=n.boxEnd[0]-n.boxStart[0],x=n.boxEnd[1]-n.boxStart[1];var C=(g[3]-g[1])/(g[2]-g[0]);Math.abs(c*C)>Math.abs(x)?(n.boxEnd[1]=n.boxStart[1]+Math.abs(c)*C*(x>=0?1:-1),n.boxEnd[1]<g[1]?(n.boxEnd[1]=g[1],n.boxEnd[0]=n.boxStart[0]+(g[1]-n.boxStart[1])/Math.abs(C)):n.boxEnd[1]>g[3]&&(n.boxEnd[1]=g[3],n.boxEnd[0]=n.boxStart[0]+(g[3]-n.boxStart[1])/Math.abs(C))):(n.boxEnd[0]=n.boxStart[0]+Math.abs(x)/C*(c>=0?1:-1),n.boxEnd[0]<g[0]?(n.boxEnd[0]=g[0],n.boxEnd[1]=n.boxStart[1]+(g[0]-n.boxStart[0])*Math.abs(C)):n.boxEnd[0]>g[2]&&(n.boxEnd[0]=g[2],n.boxEnd[1]=n.boxStart[1]+(g[2]-n.boxStart[0])*Math.abs(C)))}}else n.boxEnabled?(c=n.boxStart[0]!==n.boxEnd[0],x=n.boxStart[1]!==n.boxEnd[1],c||x?(c&&(f(0,n.boxStart[0],n.boxEnd[0]),s.xaxis.autorange=!1),x&&(f(1,n.boxStart[1],n.boxEnd[1]),s.yaxis.autorange=!1),s.relayoutCallback()):s.glplot.setDirty(),n.boxEnabled=!1,n.boxInited=!1):n.boxInited&&(n.boxInited=!1);break;case"pan":n.boxEnabled=!1,n.boxInited=!1,l?(n.panning||(n.dragStart[0]=u,n.dragStart[1]=d),Math.abs(n.dragStart[0]-u)<y&&(u=n.dragStart[0]),Math.abs(n.dragStart[1]-d)<y&&(d=n.dragStart[1]),c=(v-u)*(g[2]-g[0])/(i.viewBox[2]-i.viewBox[0]),x=(m-d)*(g[3]-g[1])/(i.viewBox[3]-i.viewBox[1]),g[0]+=c,g[2]+=c,g[1]+=x,g[3]+=x,s.setRanges(g),n.panning=!0,n.lastInputTime=Date.now(),r(),s.cameraChanged(),s.handleAnnotations()):n.panning&&(n.panning=!1,s.relayoutCallback())}n.lastPos[0]=u,n.lastPos[1]=d}return n.mouseListener=M(t,a),t.addEventListener("touchstart",function(l){var u=o(l.changedTouches[0],t);a(0,u[0],u[1]),a(1,u[0],u[1]),l.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchmove",function(l){l.preventDefault();var u=o(l.changedTouches[0],t);a(1,u[0],u[1]),l.preventDefault()},!!b&&{passive:!1}),t.addEventListener("touchend",function(l){a(0,n.lastPos[0],n.lastPos[1]),l.preventDefault()},!!b&&{passive:!1}),n.wheelListener=k(t,function(l,u){if(!s.scrollZoom)return!1;var d=s.calcDataBox(),c=i.viewBox,x=n.lastPos[0],g=n.lastPos[1],p=Math.exp(5*u/(c[3]-c[1])),v=x/(c[2]-c[0])*(d[2]-d[0])+d[0],m=g/(c[3]-c[1])*(d[3]-d[1])+d[1];return d[0]=(d[0]-v)*p+v,d[2]=(d[2]-v)*p+v,d[1]=(d[1]-m)*p+m,d[3]=(d[3]-m)*p+m,s.setRanges(d),n.lastInputTime=Date.now(),r(),s.cameraChanged(),s.handleAnnotations(),s.relayoutCallback(),!0},!0),n}},92568:function(ee,z,e){"use strict";var M=e(54460),k=e(43080);function o(h){this.scene=h,this.gl=h.gl,this.pixelRatio=h.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=o.prototype,b=["xaxis","yaxis"];T.merge=function(h){var s,t,i,n,r,a,l,u,d,c,x;for(this.titleEnable=!1,this.backgroundColor=k(h.plot_bgcolor),c=0;c<2;++c){var g=(s=b[c]).charAt(0);for(i=(t=h[this.scene[s]._name]).title.text===this.scene.fullLayout._dfltTitle[g]?"":t.title.text,x=0;x<=2;x+=2)this.labelEnable[c+x]=!1,this.labels[c+x]=i,this.labelColor[c+x]=k(t.title.font.color),this.labelFont[c+x]=t.title.font.family,this.labelSize[c+x]=t.title.font.size,this.labelPad[c+x]=this.getLabelPad(s,t),this.tickEnable[c+x]=!1,this.tickColor[c+x]=k((t.tickfont||{}).color),this.tickAngle[c+x]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[c+x]=this.getTickPad(t),this.tickMarkLength[c+x]=0,this.tickMarkWidth[c+x]=t.tickwidth||0,this.tickMarkColor[c+x]=k(t.tickcolor),this.borderLineEnable[c+x]=!1,this.borderLineColor[c+x]=k(t.linecolor),this.borderLineWidth[c+x]=t.linewidth||0;l=this.hasSharedAxis(t),r=this.hasAxisInDfltPos(s,t)&&!l,a=this.hasAxisInAltrPos(s,t)&&!l,n=t.mirror||!1,u=l?String(n).indexOf("all")!==-1:!!n,d=l?n==="allticks":String(n).indexOf("ticks")!==-1,r?this.labelEnable[c]=!0:a&&(this.labelEnable[c+2]=!0),r?this.tickEnable[c]=t.showticklabels:a&&(this.tickEnable[c+2]=t.showticklabels),(r||u)&&(this.borderLineEnable[c]=t.showline),(a||u)&&(this.borderLineEnable[c+2]=t.showline),(r||d)&&(this.tickMarkLength[c]=this.getTickMarkLength(t)),(a||d)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(t)),this.gridLineEnable[c]=t.showgrid,this.gridLineColor[c]=k(t.gridcolor),this.gridLineWidth[c]=t.gridwidth,this.zeroLineEnable[c]=t.zeroline,this.zeroLineColor[c]=k(t.zerolinecolor),this.zeroLineWidth[c]=t.zerolinewidth}},T.hasSharedAxis=function(h){var s=this.scene,t=s.fullLayout._subplots.gl2d;return M.findSubplotsWithAxis(t,h).indexOf(s.id)!==0},T.hasAxisInDfltPos=function(h,s){var t=s.side;return h==="xaxis"?t==="bottom":h==="yaxis"?t==="left":void 0},T.hasAxisInAltrPos=function(h,s){var t=s.side;return h==="xaxis"?t==="top":h==="yaxis"?t==="right":void 0},T.getLabelPad=function(h,s){var t=1.5,i=s.title.font.size,n=s.showticklabels;return h==="xaxis"?s.side==="top"?i*(t+(n?1:0))-10:i*(t+(n?.5:0))-10:h==="yaxis"?s.side==="right"?10+i*(t+(n?1:.5)):10+i*(t+(n?.5:0)):void 0},T.getTickPad=function(h){return h.ticks==="outside"?10+h.ticklen:15},T.getTickMarkLength=function(h){if(!h.ticks)return 0;var s=h.ticklen;return h.ticks==="inside"?-s:s},ee.exports=function(h){return new o(h)}},39952:function(ee,z,e){"use strict";var M=e(67824).overrideAll,k=e(17188),o=e(64859),T=e(9616),b=e(33816),h=e(57952),s=e(65460),t=e(84888).op;z.name="gl2d",z.attr=["xaxis","yaxis"],z.idRoot=["x","y"],z.idRegex=b.idRegex,z.attrRegex=b.attrRegex,z.attributes=e(26720),z.supplyLayoutDefaults=function(i,n,r){n._has("cartesian")||h.supplyLayoutDefaults(i,n,r)},z.layoutAttrOverrides=M(h.layoutAttributes,"plot","from-root"),z.baseLayoutAttrOverrides=M({plot_bgcolor:o.plot_bgcolor,hoverlabel:s.hoverlabel},"plot","nested"),z.plot=function(i){for(var n=i._fullLayout,r=i._fullData,a=n._subplots.gl2d,l=0;l<a.length;l++){var u=a[l],d=n._plots[u],c=t(r,"gl2d",u),x=d._scene2d;x===void 0&&(x=new k({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},n),d._scene2d=x),x.plot(c,i.calcdata,n,i.layout)}},z.clean=function(i,n,r,a){for(var l=a._subplots.gl2d||[],u=0;u<l.length;u++){var d=l[u],c=a._plots[d];c._scene2d&&t(i,"gl2d",d).length===0&&(c._scene2d.destroy(),delete a._plots[d])}h.clean.apply(this,arguments)},z.drawFramework=function(i){i._context.staticPlot||h.drawFramework(i)},z.toSVG=function(i){for(var n=i._fullLayout,r=n._subplots.gl2d,a=0;a<r.length;a++){var l=n._plots[r[a]]._scene2d,u=l.toImage("png");n._glimages.append("svg:image").attr({xmlns:T.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},z.updateFx=function(i){for(var n=i._fullLayout,r=n._subplots.gl2d,a=0;a<r.length;a++)n._plots[r[a]]._scene2d.updateFx(n.dragmode)}},17188:function(ee,z,e){"use strict";var M,k,o=e(24040),T=e(54460),b=e(93024),h=e(67792).gl_plot2d,s=e(67792).gl_spikes2d,t=e(67792).gl_select_box,i=e(5408),n=e(92568),r=e(2428),a=e(16576),l=e(71888),u=l.enforce,d=l.clean,c=e(19280).doAutoRange,x=e(72760),g=x.drawMode,p=x.selectMode,v=["xaxis","yaxis"],m=e(33816).SUBPLOT_PATTERN;function y(f,S){this.container=f.container,this.graphDiv=f.graphDiv,this.pixelRatio=f.plotGlPixelRatio||window.devicePixelRatio,this.id=f.id,this.staticPlot=!!f.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=n(this),this.glplotOptions.merge(S),this.glplot=h(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=s(this.glplot),this.selectBox=t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}ee.exports=y;var _=y.prototype;_.makeFramework=function(){if(this.staticPlot){if(!(k||(M=document.createElement("canvas"),k=i({canvas:M,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=M,this.gl=k}else{var f=this.container.querySelector(".gl-canvas-focus"),S=i({canvas:f,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return a(this),void(this.stopped=!0);this.canvas=f,this.gl=S}var w=this.canvas;w.style.width="100%",w.style.height="100%",w.style.position="absolute",w.style.top="0px",w.style.left="0px",w.style["pointer-events"]="none",this.updateSize(w);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var C=this.container;C.appendChild(E),C.appendChild(P);var O=this;P.addEventListener("mouseout",function(){O.isMouseOver=!1,O.unhover()}),P.addEventListener("mouseover",function(){O.isMouseOver=!0})},_.toImage=function(f){f||(f="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(M),this.updateSize(this.canvas);var S=this.glplot.gl,w=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var P=new Uint8Array(w*E*4);S.readPixels(0,0,w,E,S.RGBA,S.UNSIGNED_BYTE,P);for(var C=0,O=E-1;C<O;++C,--O)for(var R=0;R<w;++R)for(var j=0;j<4;++j){var D=P[4*(w*C+R)+j];P[4*(w*C+R)+j]=P[4*(w*O+R)+j],P[4*(w*O+R)+j]=D}var N=document.createElement("canvas");N.width=w,N.height=E;var W,F=N.getContext("2d",{willReadFrequently:!0}),U=F.createImageData(w,E);switch(U.data.set(P),F.putImageData(U,0,0),f){case"jpeg":W=N.toDataURL("image/jpeg");break;case"webp":W=N.toDataURL("image/webp");break;default:W=N.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(M),W},_.updateSize=function(f){f||(f=this.canvas);var S=this.pixelRatio,w=this.fullLayout,E=w.width,P=w.height,C=0|Math.ceil(S*E),O=0|Math.ceil(S*P);return f.width===C&&f.height===O||(f.width=C,f.height=O),f},_.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var f=[T.calcTicks(this.xaxis),T.calcTicks(this.yaxis)],S=0;S<2;++S)for(var w=0;w<f[S].length;++w)f[S][w].text=f[S][w].text+"";return f},_.updateRefs=function(f){this.fullLayout=f;var S=this.id.match(m),w="xaxis"+S[1],E="yaxis"+S[2];this.xaxis=this.fullLayout[w],this.yaxis=this.fullLayout[E]},_.relayoutCallback=function(){var f=this.graphDiv,S=this.xaxis,w=this.yaxis,E=f.layout,P={},C=P[S._name+".range"]=S.range.slice(),O=P[w._name+".range"]=w.range.slice();P[S._name+".autorange"]=S.autorange,P[w._name+".autorange"]=w.autorange,o.call("_storeDirectGUIEdit",f.layout,f._fullLayout._preGUI,P);var R=E[S._name];R.range=C,R.autorange=S.autorange;var j=E[w._name];j.range=O,j.autorange=w.autorange,P.lastInputTime=this.camera.lastInputTime,f.emit("plotly_relayout",P)},_.cameraChanged=function(){var f=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(w,E){for(var P=0;P<2;++P){var C=w[P],O=E[P];if(C.length!==O.length)return!0;for(var R=0;R<C.length;++R)if(C[R].x!==O[R].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=f.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},_.handleAnnotations=function(){for(var f=this.graphDiv,S=this.fullLayout.annotations,w=0;w<S.length;w++){var E=S[w];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&o.getComponentMethod("annotations","drawOne")(f,w)}},_.destroy=function(){if(this.glplot){var f=this.traces;f&&Object.keys(f).map(function(S){f[S].dispose(),delete f[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},_.plot=function(f,S,w){var E=this.glplot;this.updateRefs(w),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(f,S),this.updateFx(w.dragmode);var P=w.width,C=w.height;this.updateSize(this.canvas);var O=this.glplotOptions;O.merge(w),O.screenBox=[0,0,P,C];var R={_fullLayout:{_axisConstraintGroups:w._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:w._size}};d(R,this.xaxis),d(R,this.yaxis);var j,D,N=w._size,W=this.xaxis.domain,F=this.yaxis.domain;for(O.viewBox=[N.l+W[0]*N.w,N.b+F[0]*N.h,P-N.r-(1-W[1])*N.w,C-N.t-(1-F[1])*N.h],this.mouseContainer.style.width=N.w*(W[1]-W[0])+"px",this.mouseContainer.style.height=N.h*(F[1]-F[0])+"px",this.mouseContainer.height=N.h*(F[1]-F[0]),this.mouseContainer.style.left=N.l+W[0]*N.w+"px",this.mouseContainer.style.top=N.t+(1-F[1])*N.h+"px",D=0;D<2;++D)(j=this[v[D]])._length=O.viewBox[D+2]-O.viewBox[D],c(this.graphDiv,j),j.setScale();u(R),O.ticks=this.computeTickMarks(),O.dataBox=this.calcDataBox(),O.merge(w),E.update(O),this.glplot.draw()},_.calcDataBox=function(){var f=this.xaxis,S=this.yaxis,w=f.range,E=S.range,P=f.r2l,C=S.r2l;return[P(w[0]),C(E[0]),P(w[1]),C(E[1])]},_.setRanges=function(f){var S=this.xaxis,w=this.yaxis,E=S.l2r,P=w.l2r;S.range=[E(f[0]),E(f[2])],w.range=[P(f[1]),P(f[3])]},_.updateTraces=function(f,S){var w,E,P,C=Object.keys(this.traces);this.fullData=f;e:for(w=0;w<C.length;w++){var O=C[w],R=this.traces[O];for(E=0;E<f.length;E++)if((P=f[E]).uid===O&&P.type===R.type)continue e;R.dispose(),delete this.traces[O]}for(w=0;w<f.length;w++){P=f[w];var j=S[w],D=this.traces[P.uid];D?D.update(P,j):(D=P._module.plot(this,P,j),this.traces[P.uid]=D)}this.glplot.objects.sort(function(N,W){return N._trace.index-W._trace.index})},_.updateFx=function(f){p(f)||g(f)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=f==="pan"?"move":f==="zoom"?"crosshair":null},_.emitPointAction=function(f,S){for(var w,E=f.trace.uid,P=f.pointIndex,C=0;C<this.fullData.length;C++)this.fullData[C].uid===E&&(w=this.fullData[C]);var O={x:f.traceCoord[0],y:f.traceCoord[1],curveNumber:w.index,pointNumber:P,data:w._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};b.appendArrayPointValue(O,w,P),this.graphDiv.emit(S,{points:[O]})},_.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var f=this.glplot,S=this.camera,w=S.mouseListener,E=this.lastButtonState===1&&w.buttons===0,P=this.fullLayout;this.lastButtonState=w.buttons,this.cameraChanged();var C,O=w.x*f.pixelRatio,R=this.canvas.height-f.pixelRatio*w.y;if(S.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var j=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],D=0;D<2;D++)S.boxStart[D]===S.boxEnd[D]&&(j[D]=f.dataBox[D],j[D+2]=f.dataBox[D+2]);f.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var N=P._size,W=this.xaxis.domain,F=this.yaxis.domain,U=(C=f.pick(O/f.pixelRatio+N.l+W[0]*N.w,R/f.pixelRatio-(N.t+(1-F[1])*N.h)))&&C.object._trace.handlePick(C);if(U&&E&&this.emitPointAction(U,"plotly_click"),C&&C.object._trace.hoverinfo!=="skip"&&P.hovermode&&U&&(!this.lastPickResult||this.lastPickResult.traceUid!==U.trace.uid||this.lastPickResult.dataCoord[0]!==U.dataCoord[0]||this.lastPickResult.dataCoord[1]!==U.dataCoord[1])){var V=U;this.lastPickResult={traceUid:U.trace?U.trace.uid:null,dataCoord:U.dataCoord.slice()},this.spikes.update({center:C.dataCoord}),V.screenCoord=[((f.viewBox[2]-f.viewBox[0])*(C.dataCoord[0]-f.dataBox[0])/(f.dataBox[2]-f.dataBox[0])+f.viewBox[0])/f.pixelRatio,(this.canvas.height-(f.viewBox[3]-f.viewBox[1])*(C.dataCoord[1]-f.dataBox[1])/(f.dataBox[3]-f.dataBox[1])-f.viewBox[1])/f.pixelRatio],this.emitPointAction(U,"plotly_hover");var te=this.fullData[V.trace.index]||{},J=V.pointIndex,K=b.castHoverinfo(te,P,J);if(K&&K!=="all"){var X=K.split("+");X.indexOf("x")===-1&&(V.traceCoord[0]=void 0),X.indexOf("y")===-1&&(V.traceCoord[1]=void 0),X.indexOf("z")===-1&&(V.traceCoord[2]=void 0),X.indexOf("text")===-1&&(V.textLabel=void 0),X.indexOf("name")===-1&&(V.name=void 0)}b.loneHover({x:V.screenCoord[0],y:V.screenCoord[1],xLabel:this.hoverFormatter("xaxis",V.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",V.traceCoord[1]),zLabel:V.traceCoord[2],text:V.textLabel,name:V.name,color:b.castHoverOption(te,J,"bgcolor")||V.color,borderColor:b.castHoverOption(te,J,"bordercolor"),fontFamily:b.castHoverOption(te,J,"font.family"),fontSize:b.castHoverOption(te,J,"font.size"),fontColor:b.castHoverOption(te,J,"font.color"),nameLength:b.castHoverOption(te,J,"namelength"),textAlign:b.castHoverOption(te,J,"align")},{container:this.svgContainer,gd:this.graphDiv})}}C||this.unhover(),f.draw()}},_.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),b.loneUnhover(this.svgContainer))},_.hoverFormatter=function(f,S){if(S!==void 0){var w=this[f];return T.tickText(w,w.c2l(S),"hover").text}}},12536:function(ee,z,e){"use strict";var M=e(67824).overrideAll,k=e(65460),o=e(98432),T=e(84888).op,b=e(3400),h=e(9616),s="gl3d",t="scene";z.name=s,z.attr=t,z.idRoot=t,z.idRegex=z.attrRegex=b.counterRegex("scene"),z.attributes=e(6636),z.layoutAttributes=e(346),z.baseLayoutAttrOverrides=M({hoverlabel:k.hoverlabel},"plot","nested"),z.supplyLayoutDefaults=e(5208),z.plot=function(i){for(var n=i._fullLayout,r=i._fullData,a=n._subplots[s],l=0;l<a.length;l++){var u=a[l],d=T(r,s,u),c=n[u],x=c.camera,g=c._scene;g||(g=new o({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:x},n),c._scene=g),g.viewInitial||(g.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),g.plot(d,n,i.layout)}},z.clean=function(i,n,r,a){for(var l=a._subplots[s]||[],u=0;u<l.length;u++){var d=l[u];!n[d]&&a[d]._scene&&(a[d]._scene.destroy(),a._infolayer&&a._infolayer.selectAll(".annotation-"+d).remove())}},z.toSVG=function(i){for(var n=i._fullLayout,r=n._subplots[s],a=n._size,l=0;l<r.length;l++){var u=n[r[l]],d=u.domain,c=u._scene,x=c.toImage("png");n._glimages.append("svg:image").attr({xmlns:h.svg,"xlink:href":x,x:a.l+a.w*d.x[0],y:a.t+a.h*(1-d.y[1]),width:a.w*(d.x[1]-d.x[0]),height:a.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"}),c.destroy()}},z.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var n=i.substr(5);return n==="1"&&(n=""),t+n}},z.updateFx=function(i){for(var n=i._fullLayout,r=n._subplots[s],a=0;a<r.length;a++)n[r[a]]._scene.updateFx(n.dragmode,n.hovermode)}},6636:function(ee){"use strict";ee.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(ee,z,e){"use strict";var M=e(76308),k=e(94724),o=e(92880).extendFlat,T=e(67824).overrideAll;ee.exports=T({visible:k.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:M.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:k.color,categoryorder:k.categoryorder,categoryarray:k.categoryarray,title:{text:k.title.text,font:k.title.font},type:o({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorange:k.autorange,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},rangemode:k.rangemode,minallowed:k.minallowed,maxallowed:k.maxallowed,range:o({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,mirror:k.mirror,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,tickfont:k.tickfont,tickangle:k.tickangle,tickprefix:k.tickprefix,showtickprefix:k.showtickprefix,ticksuffix:k.ticksuffix,showticksuffix:k.showticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:k.showline,linecolor:k.linecolor,linewidth:k.linewidth,showgrid:k.showgrid,gridcolor:o({},k.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:k.gridwidth,zeroline:k.zeroline,zerolinecolor:k.zerolinecolor,zerolinewidth:k.zerolinewidth,_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},"plot","from-root")},64380:function(ee,z,e){"use strict";var M=e(49760).mix,k=e(3400),o=e(31780),T=e(86140),b=e(14944),h=e(28336),s=["xaxis","yaxis","zaxis"];ee.exports=function(t,i,n){var r,a;function l(c,x){return k.coerce(r,a,T,c,x)}for(var u=0;u<s.length;u++){var d=s[u];r=t[d]||{},(a=o.newContainer(i,d))._id=d[0]+n.scene,a._name=d,b(r,a,l,n),h(r,a,l,{font:n.font,letter:d[0],data:n.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),l("gridcolor",M(a.color,n.bgColor,72.72727272727273).toRgbString()),l("title.text",d[0]),a.setScale=k.noop,l("showspikes")&&(l("spikesides"),l("spikethickness"),l("spikecolor",a.color)),l("showaxeslabels"),l("showbackground")&&l("backgroundcolor")}}},44728:function(ee,z,e){"use strict";var M=e(43080),k=e(3400),o=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}T.prototype.merge=function(b,h){for(var s=this,t=0;t<3;++t){var i=h[o[t]];i.visible?(s.labels[t]=b._meta?k.templateString(i.title.text,b._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(s.labelColor[t]=M(i.title.font.color)),i.title.font.family&&(s.labelFont[t]=i.title.font.family),i.title.font.size&&(s.labelSize[t]=i.title.font.size)),"showline"in i&&(s.lineEnable[t]=i.showline),"linecolor"in i&&(s.lineColor[t]=M(i.linecolor)),"linewidth"in i&&(s.lineWidth[t]=i.linewidth),"showgrid"in i&&(s.gridEnable[t]=i.showgrid),"gridcolor"in i&&(s.gridColor[t]=M(i.gridcolor)),"gridwidth"in i&&(s.gridWidth[t]=i.gridwidth),i.type==="log"?s.zeroEnable[t]=!1:"zeroline"in i&&(s.zeroEnable[t]=i.zeroline),"zerolinecolor"in i&&(s.zeroLineColor[t]=M(i.zerolinecolor)),"zerolinewidth"in i&&(s.zeroLineWidth[t]=i.zerolinewidth),"ticks"in i&&i.ticks?s.lineTickEnable[t]=!0:s.lineTickEnable[t]=!1,"ticklen"in i&&(s.lineTickLength[t]=s._defaultLineTickLength[t]=i.ticklen),"tickcolor"in i&&(s.lineTickColor[t]=M(i.tickcolor)),"tickwidth"in i&&(s.lineTickWidth[t]=i.tickwidth),"tickangle"in i&&(s.tickAngle[t]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(s.tickEnable[t]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(s.tickColor[t]=M(i.tickfont.color)),i.tickfont.family&&(s.tickFont[t]=i.tickfont.family),i.tickfont.size&&(s.tickSize[t]=i.tickfont.size)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(s.lineTickMirror[t]=!0,s.lineMirror[t]=!0):i.mirror===!0?(s.lineTickMirror[t]=!1,s.lineMirror[t]=!0):(s.lineTickMirror[t]=!1,s.lineMirror[t]=!1):s.lineMirror[t]=!1,"showbackground"in i&&i.showbackground!==!1?(s.backgroundEnable[t]=!0,s.backgroundColor[t]=M(i.backgroundcolor)):s.backgroundEnable[t]=!1):(s.tickEnable[t]=!1,s.labelEnable[t]=!1,s.lineEnable[t]=!1,s.lineTickEnable[t]=!1,s.gridEnable[t]=!1,s.zeroEnable[t]=!1,s.backgroundEnable[t]=!1)}},ee.exports=function(b,h){var s=new T;return s.merge(b,h),s}},5208:function(ee,z,e){"use strict";var M=e(3400),k=e(76308),o=e(24040),T=e(168),b=e(64380),h=e(346),s=e(84888).op,t="gl3d";function i(n,r,a,l){for(var u=a("bgcolor"),d=k.combine(u,l.paper_bgcolor),c=["up","center","eye"],x=0;x<c.length;x++)a("camera."+c[x]+".x"),a("camera."+c[x]+".y"),a("camera."+c[x]+".z");a("camera.projection.type");var g=!!a("aspectratio.x")&&!!a("aspectratio.y")&&!!a("aspectratio.z"),p=a("aspectmode",g?"manual":"auto");g||(n.aspectratio=r.aspectratio={x:1,y:1,z:1},p==="manual"&&(r.aspectmode="auto"),n.aspectmode=r.aspectmode);var v=s(l.fullData,t,l.id);b(n,r,{font:l.font,scene:l.id,data:v,bgColor:d,calendar:l.calendar,autotypenumbersDflt:l.autotypenumbersDflt,fullLayout:l.fullLayout}),o.getComponentMethod("annotations3d","handleDefaults")(n,r,l);var m=l.getDfltFromLayout("dragmode");if(m!==!1&&!m)if(m="orbit",n.camera&&n.camera.up){var y=n.camera.up.x,_=n.camera.up.y,f=n.camera.up.z;f!==0&&(y&&_&&f?f/Math.sqrt(y*y+_*_+f*f)>.999&&(m="turntable"):m="turntable")}else m="turntable";a("dragmode",m),a("hovermode",l.getDfltFromLayout("hovermode"))}ee.exports=function(n,r,a){var l=r._basePlotModules.length>1;T(n,r,a,{type:t,attributes:h,handleDefaults:i,fullLayout:r,font:r.font,fullData:a,getDfltFromLayout:function(u){if(!l)return M.validate(n[u],h[u])?n[u]:void 0},autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,calendar:r.calendar})}},346:function(ee,z,e){"use strict";var M=e(86140),k=e(86968).u,o=e(92880).extendFlat,T=e(3400).counterRegex;function b(h,s,t){return{x:{valType:"number",dflt:h,editType:"camera"},y:{valType:"number",dflt:s,editType:"camera"},z:{valType:"number",dflt:t,editType:"camera"},editType:"camera"}}ee.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:o(b(0,0,1),{}),center:o(b(0,0,0),{}),eye:o(b(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:k({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:M,yaxis:M,zaxis:M,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(ee,z,e){"use strict";var M=e(43080),k=["xaxis","yaxis","zaxis"];function o(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}o.prototype.merge=function(T){for(var b=0;b<3;++b){var h=T[k[b]];h.visible?(this.enabled[b]=h.showspikes,this.colors[b]=M(h.spikecolor),this.drawSides[b]=h.spikesides,this.lineWidth[b]=h.spikethickness):(this.enabled[b]=!1,this.drawSides[b]=!1)}},ee.exports=function(T){var b=new o;return b.merge(T),b}},87152:function(ee,z,e){"use strict";ee.exports=function(b){for(var h=b.axesOptions,s=b.glplot.axesPixels,t=b.fullSceneLayout,i=[[],[],[]],n=0;n<3;++n){var r=t[o[n]];if(r._length=(s[n].hi-s[n].lo)*s[n].pixelsPerDataUnit/b.dataScale[n],Math.abs(r._length)===1/0||isNaN(r._length))i[n]=[];else{r._input_range=r.range.slice(),r.range[0]=s[n].lo/b.dataScale[n],r.range[1]=s[n].hi/b.dataScale[n],r._m=1/(b.dataScale[n]*s[n].pixelsPerDataUnit),r.range[0]===r.range[1]&&(r.range[0]-=1,r.range[1]+=1);var a=r.tickmode;if(r.tickmode==="auto"){r.tickmode="linear";var l=r.nticks||k.constrain(r._length/40,4,9);M.autoTicks(r,Math.abs(r.range[1]-r.range[0])/l)}for(var u=M.calcTicks(r,{msUTC:!0}),d=0;d<u.length;++d)u[d].x=u[d].x*b.dataScale[n],r.type==="date"&&(u[d].text=u[d].text.replace(/\<br\>/g," "));i[n]=u,r.tickmode=a}}for(h.ticks=i,n=0;n<3;++n)for(T[n]=.5*(b.glplot.bounds[0][n]+b.glplot.bounds[1][n]),d=0;d<2;++d)h.bounds[d][n]=b.glplot.bounds[d][n];b.contourLevels=function(c){for(var x=new Array(3),g=0;g<3;++g){for(var p=c[g],v=new Array(p.length),m=0;m<p.length;++m)v[m]=p[m].x;x[g]=v}return x}(i)};var M=e(54460),k=e(3400),o=["xaxis","yaxis","zaxis"],T=[0,0,0]},94424:function(ee){"use strict";function z(e,M){var k,o,T=[0,0,0,0];for(k=0;k<4;++k)for(o=0;o<4;++o)T[o]+=e[4*k+o]*M[k];return T}ee.exports=function(e,M){return z(e.projection,z(e.view,z(e.model,[M[0],M[1],M[2],1])))}},98432:function(ee,z,e){"use strict";var M,k,o=e(67792).gl_plot3d,T=o.createCamera,b=o.createScene,h=e(5408),s=e(89184),t=e(24040),i=e(3400),n=i.preserveDrawingBuffer(),r=e(54460),a=e(93024),l=e(43080),u=e(16576),d=e(94424),c=e(44728),x=e(9020),g=e(87152),p=e(19280).applyAutorangeOptions,v=!1;function m(w,E){var P=document.createElement("div"),C=w.container;this.graphDiv=w.graphDiv;var O=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none",P.appendChild(O),this.svgContainer=O,P.id=w.id,P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",C.appendChild(P),this.fullLayout=E,this.id=w.id||"scene",this.fullSceneLayout=E[this.id],this.plotArgs=[[],{},{}],this.axesOptions=c(E,E[this.id]),this.spikeOptions=x(E[this.id]),this.container=P,this.staticMode=!!w.staticPlot,this.pixelRatio=this.pixelRatio||w.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=t.getComponentMethod("annotations3d","convert"),this.drawAnnotations=t.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var y=m.prototype;y.prepareOptions=function(){var w=this,E={canvas:w.canvas,gl:w.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:w.container,axes:w.axesOptions,spikes:w.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:w.camera,pixelRatio:w.pixelRatio};if(w.staticMode){if(!(k||(M=document.createElement("canvas"),k=h({canvas:M,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=k,E.canvas=M}return E};var _=!0;y.tryCreatePlot=function(){var w=this,E=w.prepareOptions(),P=!0;try{w.glplot=b(E)}catch(C){if(w.staticMode||!_||n)P=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=E.glOptions.preserveDrawingBuffer=!0,w.glplot=b(E)}catch(O){n=E.glOptions.preserveDrawingBuffer=!1,P=!1}}}return _=!1,P},y.initializeGLCamera=function(){var w=this,E=w.fullSceneLayout.camera,P=E.projection.type==="orthographic";w.camera=T(w.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:P,zoomMin:.01,zoomMax:100,mode:"orbit"})},y.initializeGLPlot=function(){var w=this;if(w.initializeGLCamera(),!w.tryCreatePlot())return u(w);w.traces={},w.make4thDimension();var E=w.graphDiv,P=E.layout,C=function(){var R={};return w.isCameraChanged(P)&&(R[w.id+".camera"]=w.getCamera()),w.isAspectChanged(P)&&(R[w.id+".aspectratio"]=w.glplot.getAspectratio(),P[w.id].aspectmode!=="manual"&&(w.fullSceneLayout.aspectmode=P[w.id].aspectmode=R[w.id+".aspectmode"]="manual")),R},O=function(R){if(R.fullSceneLayout.dragmode!==!1){var j=C();R.saveLayout(P),R.graphDiv.emit("plotly_relayout",j)}};return w.glplot.canvas&&(w.glplot.canvas.addEventListener("mouseup",function(){O(w)}),w.glplot.canvas.addEventListener("touchstart",function(){v=!0}),w.glplot.canvas.addEventListener("wheel",function(R){if(E._context._scrollZoom.gl3d){if(w.camera._ortho){var j=R.deltaX>R.deltaY?1.1:.9090909090909091,D=w.glplot.getAspectratio();w.glplot.setAspectratio({x:j*D.x,y:j*D.y,z:j*D.z})}O(w)}},!!s&&{passive:!1}),w.glplot.canvas.addEventListener("mousemove",function(){if(w.fullSceneLayout.dragmode!==!1&&w.camera.mouseListener.buttons!==0){var R=C();w.graphDiv.emit("plotly_relayouting",R)}}),w.staticMode||w.glplot.canvas.addEventListener("webglcontextlost",function(R){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:R,layer:w.id})},!1)),w.glplot.oncontextloss=function(){w.recoverContext()},w.glplot.onrender=function(){w.render()},!0},y.render=function(){var w,E=this,P=E.graphDiv,C=E.svgContainer,O=E.container.getBoundingClientRect();P._fullLayout._calcInverseTransform(P);var R=P._fullLayout._invScaleX,j=P._fullLayout._invScaleY,D=O.width*R,N=O.height*j;C.setAttributeNS(null,"viewBox","0 0 "+D+" "+N),C.setAttributeNS(null,"width",D),C.setAttributeNS(null,"height",N),g(E),E.glplot.axes.update(E.axesOptions);for(var W=Object.keys(E.traces),F=null,U=E.glplot.selection,V=0;V<W.length;++V)(w=E.traces[W[V]]).data.hoverinfo!=="skip"&&w.handlePick(U)&&(F=w),w.setContourLevels&&w.setContourLevels();function te(de,ve,pe){var _e=E.fullSceneLayout[de+"axis"];return _e.type!=="log"&&(ve=_e.d2l(ve)),r.hoverLabelText(_e,ve,pe)}if(F!==null){var J=d(E.glplot.cameraParams,U.dataCoordinate);w=F.data;var K,X=P._fullData[w.index],Z=U.index,$={xLabel:te("x",U.traceCoordinate[0],w.xhoverformat),yLabel:te("y",U.traceCoordinate[1],w.yhoverformat),zLabel:te("z",U.traceCoordinate[2],w.zhoverformat)},re=a.castHoverinfo(X,E.fullLayout,Z),oe=(re||"").split("+"),ie=re&&re==="all";X.hovertemplate||ie||(oe.indexOf("x")===-1&&($.xLabel=void 0),oe.indexOf("y")===-1&&($.yLabel=void 0),oe.indexOf("z")===-1&&($.zLabel=void 0),oe.indexOf("text")===-1&&(U.textLabel=void 0),oe.indexOf("name")===-1&&(F.name=void 0));var ue=[];w.type==="cone"||w.type==="streamtube"?($.uLabel=te("x",U.traceCoordinate[3],w.uhoverformat),(ie||oe.indexOf("u")!==-1)&&ue.push("u: "+$.uLabel),$.vLabel=te("y",U.traceCoordinate[4],w.vhoverformat),(ie||oe.indexOf("v")!==-1)&&ue.push("v: "+$.vLabel),$.wLabel=te("z",U.traceCoordinate[5],w.whoverformat),(ie||oe.indexOf("w")!==-1)&&ue.push("w: "+$.wLabel),$.normLabel=U.traceCoordinate[6].toPrecision(3),(ie||oe.indexOf("norm")!==-1)&&ue.push("norm: "+$.normLabel),w.type==="streamtube"&&($.divergenceLabel=U.traceCoordinate[7].toPrecision(3),(ie||oe.indexOf("divergence")!==-1)&&ue.push("divergence: "+$.divergenceLabel)),U.textLabel&&ue.push(U.textLabel),K=ue.join("<br>")):w.type==="isosurface"||w.type==="volume"?($.valueLabel=r.hoverLabelText(E._mockAxis,E._mockAxis.d2l(U.traceCoordinate[3]),w.valuehoverformat),ue.push("value: "+$.valueLabel),U.textLabel&&ue.push(U.textLabel),K=ue.join("<br>")):K=U.textLabel;var me={x:U.traceCoordinate[0],y:U.traceCoordinate[1],z:U.traceCoordinate[2],data:X._input,fullData:X,curveNumber:X.index,pointNumber:Z};a.appendArrayPointValue(me,X,Z),w._module.eventData&&(me=X._module.eventData(me,U,X,{},Z));var be={points:[me]};if(E.fullSceneLayout.hovermode){var ge=[];a.loneHover({trace:X,x:(.5+.5*J[0]/J[3])*D,y:(.5-.5*J[1]/J[3])*N,xLabel:$.xLabel,yLabel:$.yLabel,zLabel:$.zLabel,text:K,name:F.name,color:a.castHoverOption(X,Z,"bgcolor")||F.color,borderColor:a.castHoverOption(X,Z,"bordercolor"),fontFamily:a.castHoverOption(X,Z,"font.family"),fontSize:a.castHoverOption(X,Z,"font.size"),fontColor:a.castHoverOption(X,Z,"font.color"),nameLength:a.castHoverOption(X,Z,"namelength"),textAlign:a.castHoverOption(X,Z,"align"),hovertemplate:i.castOption(X,Z,"hovertemplate"),hovertemplateLabels:i.extendFlat({},me,$),eventData:[me]},{container:C,gd:P,inOut_bbox:ge}),me.bbox=ge[0]}U.distance<5&&(U.buttons||v)?P.emit("plotly_click",be):P.emit("plotly_hover",be),this.oldEventData=be}else a.loneUnhover(C),this.oldEventData&&P.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},y.recoverContext=function(){var w=this;w.glplot.dispose();var E=function(){w.glplot.gl.isContextLost()?requestAnimationFrame(E):w.initializeGLPlot()?w.plot.apply(w,w.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(E)};var f=["xaxis","yaxis","zaxis"];function S(w,E,P){for(var C=w.fullSceneLayout,O=0;O<3;O++){var R=f[O],j=R.charAt(0),D=C[R],N=E[j],W=E[j+"calendar"],F=E["_"+j+"length"];if(i.isArrayOrTypedArray(N))for(var U,V=0;V<(F||N.length);V++)if(i.isArrayOrTypedArray(N[V]))for(var te=0;te<N[V].length;++te)U=D.d2l(N[V][te],0,W),!isNaN(U)&&isFinite(U)&&(P[0][O]=Math.min(P[0][O],U),P[1][O]=Math.max(P[1][O],U));else U=D.d2l(N[V],0,W),!isNaN(U)&&isFinite(U)&&(P[0][O]=Math.min(P[0][O],U),P[1][O]=Math.max(P[1][O],U));else P[0][O]=Math.min(P[0][O],0),P[1][O]=Math.max(P[1][O],F-1)}}y.plot=function(w,E,P){var C=this;if(C.plotArgs=[w,E,P],!C.glplot.contextLost){var O,R,j,D,N,W,F=E[C.id],U=P[C.id];C.fullLayout=E,C.fullSceneLayout=F,C.axesOptions.merge(E,F),C.spikeOptions.merge(F),C.setViewport(F),C.updateFx(F.dragmode,F.hovermode),C.camera.enableWheel=C.graphDiv._context._scrollZoom.gl3d,C.glplot.setClearColor(l(F.bgcolor)),C.setConvert(N),w?Array.isArray(w)||(w=[w]):w=[];var V=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(j=0;j<w.length;++j)(O=w[j]).visible===!0&&O._length!==0&&S(this,O,V);(function(Ee,De){for(var fe=Ee.fullSceneLayout,xe=fe.annotations||[],we=0;we<3;we++)for(var Oe=f[we],ze=Oe.charAt(0),Pe=fe[Oe],Ue=0;Ue<xe.length;Ue++){var Ve=xe[Ue];if(Ve.visible){var Ze=Pe.r2l(Ve[ze]);!isNaN(Ze)&&isFinite(Ze)&&(De[0][we]=Math.min(De[0][we],Ze),De[1][we]=Math.max(De[1][we],Ze))}}})(this,V);var te=[1,1,1];for(D=0;D<3;++D)V[1][D]===V[0][D]?te[D]=1:te[D]=1/(V[1][D]-V[0][D]);for(C.dataScale=te,C.convertAnnotations(this),j=0;j<w.length;++j)(O=w[j]).visible===!0&&O._length!==0&&((R=C.traces[O.uid])?R.data.type===O.type?R.update(O):(R.dispose(),R=O._module.plot(this,O),C.traces[O.uid]=R):(R=O._module.plot(this,O),C.traces[O.uid]=R),R.name=O.name);var J=Object.keys(C.traces);e:for(j=0;j<J.length;++j){for(D=0;D<w.length;++D)if(w[D].uid===J[j]&&w[D].visible===!0&&w[D]._length!==0)continue e;(R=C.traces[J[j]]).dispose(),delete C.traces[J[j]]}C.glplot.objects.sort(function(Ee,De){return Ee._trace.data.index-De._trace.data.index});var K,X=[[0,0,0],[0,0,0]],Z=[],$={};for(j=0;j<3;++j){var re;if((W=(N=F[f[j]]).type)in $?($[W].acc*=te[j],$[W].count+=1):$[W]={acc:te[j],count:1},N.autorange){X[0][j]=1/0,X[1][j]=-1/0;var oe=C.glplot.objects,ie=C.fullSceneLayout.annotations||[],ue=N._name.charAt(0);for(D=0;D<oe.length;D++){var me=oe[D],be=me.bounds,ge=me._trace.data._pad||0;me.constructor.name==="ErrorBars"&&N._lowerLogErrorBound?X[0][j]=Math.min(X[0][j],N._lowerLogErrorBound):X[0][j]=Math.min(X[0][j],be[0][j]/te[j]-ge),X[1][j]=Math.max(X[1][j],be[1][j]/te[j]+ge)}for(D=0;D<ie.length;D++){var de=ie[D];if(de.visible){var ve=N.r2l(de[ue]);X[0][j]=Math.min(X[0][j],ve),X[1][j]=Math.max(X[1][j],ve)}}if("rangemode"in N&&N.rangemode==="tozero"&&(X[0][j]=Math.min(X[0][j],0),X[1][j]=Math.max(X[1][j],0)),X[0][j]>X[1][j])X[0][j]=-1,X[1][j]=1;else{var pe=X[1][j]-X[0][j];X[0][j]-=pe/32,X[1][j]+=pe/32}if(re=[X[0][j],X[1][j]],re=p(re,N),X[0][j]=re[0],X[1][j]=re[1],N.isReversed()){var _e=X[0][j];X[0][j]=X[1][j],X[1][j]=_e}}else re=N.range,X[0][j]=N.r2l(re[0]),X[1][j]=N.r2l(re[1]);X[0][j]===X[1][j]&&(X[0][j]-=1,X[1][j]+=1),Z[j]=X[1][j]-X[0][j],N.range=[X[0][j],X[1][j]],N.limitRange(),C.glplot.setBounds(j,{min:N.range[0]*te[j],max:N.range[1]*te[j]})}var Te=F.aspectmode;if(Te==="cube")K=[1,1,1];else if(Te==="manual"){var le=F.aspectratio;K=[le.x,le.y,le.z]}else{if(Te!=="auto"&&Te!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var ae=[1,1,1];for(j=0;j<3;++j){var he=$[W=(N=F[f[j]]).type];ae[j]=Math.pow(he.acc,1/he.count)/te[j]}K=Te==="data"||Math.max.apply(null,ae)/Math.min.apply(null,ae)<=4?ae:[1,1,1]}F.aspectratio.x=U.aspectratio.x=K[0],F.aspectratio.y=U.aspectratio.y=K[1],F.aspectratio.z=U.aspectratio.z=K[2],C.glplot.setAspectratio(F.aspectratio),C.viewInitial.aspectratio||(C.viewInitial.aspectratio={x:F.aspectratio.x,y:F.aspectratio.y,z:F.aspectratio.z}),C.viewInitial.aspectmode||(C.viewInitial.aspectmode=F.aspectmode);var Se=F.domain||null,ke=E._size||null;if(Se&&ke){var Me=C.container.style;Me.position="absolute",Me.left=ke.l+Se.x[0]*ke.w+"px",Me.top=ke.t+(1-Se.y[1])*ke.h+"px",Me.width=ke.w*(Se.x[1]-Se.x[0])+"px",Me.height=ke.h*(Se.y[1]-Se.y[0])+"px"}C.glplot.redraw()}},y.destroy=function(){var w=this;w.glplot&&(w.camera.mouseListener.enabled=!1,w.container.removeEventListener("wheel",w.camera.wheelListener),w.camera=null,w.glplot.dispose(),w.container.parentNode.removeChild(w.container),w.glplot=null)},y.getCamera=function(){var w,E=this;return E.camera.view.recalcMatrix(E.camera.view.lastT()),{up:{x:(w=E.camera).up[0],y:w.up[1],z:w.up[2]},center:{x:w.center[0],y:w.center[1],z:w.center[2]},eye:{x:w.eye[0],y:w.eye[1],z:w.eye[2]},projection:{type:w._ortho===!0?"orthographic":"perspective"}}},y.setViewport=function(w){var E,P=this,C=w.camera;P.camera.lookAt.apply(this,[[(E=C).eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]),P.glplot.setAspectratio(w.aspectratio),C.projection.type==="orthographic"!==P.camera._ortho&&(P.glplot.redraw(),P.glplot.clearRGBA(),P.glplot.dispose(),P.initializeGLPlot())},y.isCameraChanged=function(w){var E=this.getCamera(),P=i.nestedProperty(w,this.id+".camera").get();function C(D,N,W,F){var U=["up","center","eye"],V=["x","y","z"];return N[U[W]]&&D[U[W]][V[F]]===N[U[W]][V[F]]}var O=!1;if(P===void 0)O=!0;else{for(var R=0;R<3;R++)for(var j=0;j<3;j++)if(!C(E,P,R,j)){O=!0;break}(!P.projection||E.projection&&E.projection.type!==P.projection.type)&&(O=!0)}return O},y.isAspectChanged=function(w){var E=this.glplot.getAspectratio(),P=i.nestedProperty(w,this.id+".aspectratio").get();return P===void 0||P.x!==E.x||P.y!==E.y||P.z!==E.z},y.saveLayout=function(w){var E,P,C,O,R,j,D=this,N=D.fullLayout,W=D.isCameraChanged(w),F=D.isAspectChanged(w),U=W||F;if(U){var V={};W&&(E=D.getCamera(),C=(P=i.nestedProperty(w,D.id+".camera")).get(),V[D.id+".camera"]=C),F&&(O=D.glplot.getAspectratio(),j=(R=i.nestedProperty(w,D.id+".aspectratio")).get(),V[D.id+".aspectratio"]=j),t.call("_storeDirectGUIEdit",w,N._preGUI,V),W&&(P.set(E),i.nestedProperty(N,D.id+".camera").set(E)),F&&(R.set(O),i.nestedProperty(N,D.id+".aspectratio").set(O),D.glplot.redraw())}return U},y.updateFx=function(w,E){var P=this,C=P.camera;if(C)if(w==="orbit")C.mode="orbit",C.keyBindingMode="rotate";else if(w==="turntable"){C.up=[0,0,1],C.mode="turntable",C.keyBindingMode="rotate";var O=P.graphDiv,R=O._fullLayout,j=P.fullSceneLayout.camera,D=j.up.x,N=j.up.y,W=j.up.z;if(W/Math.sqrt(D*D+N*N+W*W)<.999){var F=P.id+".camera.up",U={x:0,y:0,z:1},V={};V[F]=U;var te=O.layout;t.call("_storeDirectGUIEdit",te,R._preGUI,V),j.up=U,i.nestedProperty(te,F).set(U)}}else C.keyBindingMode=w;P.fullSceneLayout.hovermode=E},y.toImage=function(w){var E=this;w||(w="png"),E.staticMode&&E.container.appendChild(M),E.glplot.redraw();var P=E.glplot.gl,C=P.drawingBufferWidth,O=P.drawingBufferHeight;P.bindFramebuffer(P.FRAMEBUFFER,null);var R=new Uint8Array(C*O*4);P.readPixels(0,0,C,O,P.RGBA,P.UNSIGNED_BYTE,R),function(F,U,V){for(var te=0,J=V-1;te<J;++te,--J)for(var K=0;K<U;++K)for(var X=0;X<4;++X){var Z=4*(U*te+K)+X,$=4*(U*J+K)+X,re=F[Z];F[Z]=F[$],F[$]=re}}(R,C,O),function(F,U,V){for(var te=0;te<V;++te)for(var J=0;J<U;++J){var K=4*(U*te+J),X=F[K+3];if(X>0)for(var Z=255/X,$=0;$<3;++$)F[K+$]=Math.min(Z*F[K+$],255)}}(R,C,O);var j=document.createElement("canvas");j.width=C,j.height=O;var D,N=j.getContext("2d",{willReadFrequently:!0}),W=N.createImageData(C,O);switch(W.data.set(R),N.putImageData(W,0,0),w){case"jpeg":D=j.toDataURL("image/jpeg");break;case"webp":D=j.toDataURL("image/webp");break;default:D=j.toDataURL("image/png")}return E.staticMode&&E.container.removeChild(M),D},y.setConvert=function(){for(var w=0;w<3;w++){var E=this.fullSceneLayout[f[w]];r.setConvert(E,this.fullLayout),E.setScale=i.noop}},y.make4thDimension=function(){var w=this,E=w.graphDiv._fullLayout;w._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(w._mockAxis,E)},ee.exports=m},52094:function(ee){"use strict";ee.exports=function(z,e,M,k){k=k||z.length;for(var o=new Array(k),T=0;T<k;T++)o[T]=[z[T],e[T],M[T]];return o}},64859:function(ee,z,e){"use strict";var M=e(25376),k=e(85656),o=e(22548),T=e(92872),b=e(34200),h=e(66741),s=e(92880).extendFlat,t=M({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=o.defaultLine,ee.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:M({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(h({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:o.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:o.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:o.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:b.newselection,activeselection:b.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},k.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:M({editType:"layoutstyle"})}}},47552:function(ee,z,e){"use strict";var M=e(95376),k="1.13.4",o='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',o].join(" "),b=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),h={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:o,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:b,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},s=M(h);ee.exports={requiredVersion:k,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:h,styleValuesNonMapbox:s,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+k+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",s.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},89032:function(ee,z,e){"use strict";var M=e(3400);ee.exports=function(k,o){var T=k.split(" "),b=T[0],h=T[1],s=M.isArrayOrTypedArray(o)?M.mean(o):o,t=.5+s/100,i=1.5+s/100,n=["",""],r=[0,0];switch(b){case"top":n[0]="top",r[1]=-i;break;case"bottom":n[0]="bottom",r[1]=i}switch(h){case"left":n[1]="right",r[0]=-t;break;case"right":n[1]="left",r[0]=t}return{anchor:n[0]&&n[1]?n.join("-"):n[0]?n[0]:n[1]?n[1]:"center",offset:r}}},33688:function(ee,z,e){"use strict";var M=e(3480),k=e(3400),o=k.strTranslate,T=k.strScale,b=e(84888).KY,h=e(9616),s=e(33428),t=e(43616),i=e(72736),n=e(14440),r="mapbox",a=z.constants=e(47552);function l(u){return typeof u=="string"&&(a.styleValuesMapbox.indexOf(u)!==-1||u.indexOf("mapbox://")===0||u.indexOf("stamen")===0)}z.name=r,z.attr="subplot",z.idRoot=r,z.idRegex=z.attrRegex=k.counterRegex(r),z.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},z.layoutAttributes=e(5232),z.supplyLayoutDefaults=e(5976),z.plot=function(u){var d=u._fullLayout,c=u.calcdata,x=d._subplots[r];if(M.version!==a.requiredVersion)throw new Error(a.wrongVersionErrorMsg);var g=function(f,S){var w=f._fullLayout;if(f._context.mapboxAccessToken==="")return"";for(var E=[],P=[],C=!1,O=!1,R=0;R<S.length;R++){var j=w[S[R]],D=j.accesstoken;l(j.style)&&(D?k.pushUnique(E,D):(l(j._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),C=!0),O=!0)),D&&k.pushUnique(P,D)}if(O){var N=C?a.noAccessTokenErrorMsg:a.missingStyleErrorMsg;throw k.error(N),new Error(N)}return E.length?(E.length>1&&k.warn(a.multipleTokensErrorMsg),E[0]):(P.length&&k.log(["Listed mapbox access token(s)",P.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,x);M.accessToken=g;for(var p=0;p<x.length;p++){var v=x[p],m=b(c,r,v),y=d[v],_=y._subplot;_||(_=new n(u,v),d[v]._subplot=_),_.viewInitial||(_.viewInitial={center:k.extendFlat({},y.center),zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),_.plot(m,d,u._promises)}},z.clean=function(u,d,c,x){for(var g=x._subplots[r]||[],p=0;p<g.length;p++){var v=g[p];!d[v]&&x[v]._subplot&&x[v]._subplot.destroy()}},z.toSVG=function(u){for(var d=u._fullLayout,c=d._subplots[r],x=d._size,g=0;g<c.length;g++){var p=d[c[g]],v=p.domain,m=p._subplot.toImage("png");d._glimages.append("svg:image").attr({xmlns:h.svg,"xlink:href":m,x:x.l+x.w*v.x[0],y:x.t+x.h*(1-v.y[1]),width:x.w*(v.x[1]-v.x[0]),height:x.h*(v.y[1]-v.y[0]),preserveAspectRatio:"none"});var y=s.select(p._subplot.div);if(y.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var _=d._glimages.append("g");_.attr("transform",o(x.l+x.w*v.x[0]+10,x.t+x.h*(1-v.y[0])-31)),_.append("path").attr("d",a.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",a.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",a.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",a.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var f=y.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=d._glimages.append("g"),w=S.append("text");w.text(f).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":f});var E=t.bBox(w.node()),P=x.w*(v.x[1]-v.x[0]);if(E.width>P/2){var C=f.split("|").join("<br>");w.text(C).attr("data-unformatted",C).call(i.convertToTspans,u),E=t.bBox(w.node())}w.attr("transform",o(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;E.width+6>P&&(O=P/(E.width+6));var R=[x.l+x.w*v.x[1],x.t+x.h*(1-v.y[0])];S.attr("transform",o(R[0],R[1])+T(O))}},z.updateFx=function(u){for(var d=u._fullLayout,c=d._subplots[r],x=0;x<c.length;x++)d[c[x]]._subplot.updateFx(d)}},22360:function(ee,z,e){"use strict";var M=e(3400),k=e(72736).sanitizeHTML,o=e(89032),T=e(47552);function b(i,n){this.subplot=i,this.uid=i.uid+"-"+n,this.index=n,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var h=b.prototype;function s(i){if(!i.visible)return!1;var n=i.source;if(Array.isArray(n)&&n.length>0){for(var r=0;r<n.length;r++)if(typeof n[r]!="string"||n[r].length===0)return!1;return!0}return M.isPlainObject(n)||typeof n=="string"&&n.length>0}function t(i){var n={},r={};switch(i.type){case"circle":M.extendFlat(r,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":M.extendFlat(r,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":M.extendFlat(r,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var a=i.symbol,l=o(a.textposition,a.iconsize);M.extendFlat(n,{"icon-image":a.icon+"-15","icon-size":a.iconsize/10,"text-field":a.text,"text-size":a.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":a.placement}),M.extendFlat(r,{"icon-color":i.color,"text-color":a.textfont.color,"text-opacity":i.opacity});break;case"raster":M.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:n,paint:r}}h.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=s(i)},h.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&i.sourcetype==="image"&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},h.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},h.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},h.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},h.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var n=this.findFollowingMapboxLayerId(this.lookupBelow());n!==null&&this.subplot.map.moveLayer(this.idLayer,n)},h.updateSource=function(i){var n=this.subplot.map;if(n.getSource(this.idSource)&&n.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,s(i)){var r=function(a){var l,u=a.sourcetype,d=a.source,c={type:u};return u==="geojson"?l="data":u==="vector"?l=typeof d=="string"?"url":"tiles":u==="raster"?(l="tiles",c.tileSize=256):u==="image"&&(l="url",c.coordinates=a.coordinates),c[l]=d,a.sourceattribution&&(c.attribution=k(a.sourceattribution)),c}(i);n.addSource(this.idSource,r)}},h.findFollowingMapboxLayerId=function(i){if(i==="traces")for(var n=this.subplot.getMapLayers(),r=0;r<n.length;r++){var a=n[r].id;if(typeof a=="string"&&a.indexOf(T.traceLayerPrefix)===0){i=a;break}}return i},h.updateLayer=function(i){var n=this.subplot,r=t(i),a=this.lookupBelow(),l=this.findFollowingMapboxLayerId(a);this.removeLayer(),s(i)&&n.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:r.layout,paint:r.paint},l),this.layerType=i.type,this.below=a},h.updateStyle=function(i){if(s(i)){var n=t(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint)}},h.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},h.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},ee.exports=function(i,n,r){var a=new b(i,n);return a.update(r),a}},5232:function(ee,z,e){"use strict";var M=e(3400),k=e(76308).defaultLine,o=e(86968).u,T=e(25376),b=e(52904).textposition,h=e(67824).overrideAll,s=e(31780).templatedArray,t=e(47552),i=T({});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(ee.exports=h({_arrayAttrRegexps:[M.counterRegex("mapbox",".layers",!0)],domain:o({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:t.styleValuesMapbox.concat(t.styleValuesNonMapbox),dflt:t.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:s("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:k},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:k}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:M.extendFlat({},b,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},5976:function(ee,z,e){"use strict";var M=e(3400),k=e(168),o=e(51272),T=e(5232);function b(s,t,i,n){i("accesstoken",n.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var r=i("bounds.west"),a=i("bounds.east"),l=i("bounds.south"),u=i("bounds.north");r!==void 0&&a!==void 0&&l!==void 0&&u!==void 0||delete t.bounds,o(s,t,{name:"layers",handleItemDefaults:h}),t._input=s}function h(s,t){function i(u,d){return M.coerce(s,t,T.layers,u,d)}if(i("visible")){var n,r=i("sourcetype"),a=r==="raster"||r==="image";i("source"),i("sourceattribution"),r==="vector"&&i("sourcelayer"),r==="image"&&i("coordinates"),a&&(n="raster");var l=i("type",n);a&&l!=="raster"&&(l=t.type="raster",M.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),l==="circle"&&i("circle.radius"),l==="line"&&(i("line.width"),i("line.dash")),l==="fill"&&i("fill.outlinecolor"),l==="symbol"&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),M.coerceFont(i,"symbol.textfont"),i("symbol.textposition"),i("symbol.placement"))}}ee.exports=function(s,t,i){k(s,t,i,{type:"mapbox",attributes:T,handleDefaults:b,partition:"y",accessToken:t._mapboxAccessToken})}},14440:function(ee,z,e){"use strict";var M=e(3480),k=e(3400),o=e(27144),T=e(24040),b=e(54460),h=e(86476),s=e(93024),t=e(72760),i=t.drawMode,n=t.selectMode,r=e(22676).prepSelect,a=e(22676).clearOutline,l=e(22676).clearSelectionsCache,u=e(22676).selectOnClick,d=e(47552),c=e(22360);function x(_,f){this.id=f,this.gd=_;var S=_._fullLayout,w=_._context;this.container=S._glcontainer.node(),this.isStatic=w.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var g=x.prototype;g.plot=function(_,f,S){var w,E=this,P=f[E.id];E.map&&P.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),w=E.map?new Promise(function(C,O){E.updateMap(_,f,C,O)}):new Promise(function(C,O){E.createMap(_,f,C,O)}),S.push(w)},g.createMap=function(_,f,S,w){var E=this,P=f[E.id],C=E.styleObj=v(P.style,f);E.accessToken=P.accesstoken;var O=P.bounds,R=O?[[O.west,O.south],[O.east,O.north]]:null,j=E.map=new M.Map({container:E.div,style:C.style,center:y(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,maxBounds:R,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new M.AttributionControl({compact:!0}));j._canvas.style.left="0px",j._canvas.style.top="0px",E.rejectOnError(w),E.isStatic||E.initFx(_,f);var D=[];D.push(new Promise(function(N){j.once("load",N)})),D=D.concat(o.fetchTraceGeoData(_)),Promise.all(D).then(function(){E.fillBelowLookup(_,f),E.updateData(_),E.updateLayout(f),E.resolveOnRender(S)}).catch(w)},g.updateMap=function(_,f,S,w){var E=this,P=E.map,C=f[this.id];E.rejectOnError(w);var O=[],R=v(C.style,f);JSON.stringify(E.styleObj)!==JSON.stringify(R)&&(E.styleObj=R,P.setStyle(R.style),E.traceHash={},O.push(new Promise(function(j){P.once("styledata",j)}))),O=O.concat(o.fetchTraceGeoData(_)),Promise.all(O).then(function(){E.fillBelowLookup(_,f),E.updateData(_),E.updateLayout(f),E.resolveOnRender(S)}).catch(w)},g.fillBelowLookup=function(_,f){var S,w,E=f[this.id].layers,P=this.belowLookup={},C=!1;for(S=0;S<_.length;S++){var O=_[S][0].trace,R=O._module;typeof O.below=="string"?w=O.below:R.getBelow&&(w=R.getBelow(O,this)),w===""&&(C=!0),P["trace-"+O.uid]=w||""}for(S=0;S<E.length;S++){var j=E[S];w=typeof j.below=="string"?j.below:C?"traces":"",P["layout-"+S]=w}var D,N,W={};for(D in P)W[w=P[D]]?W[w].push(D):W[w]=[D];for(w in W){var F=W[w];if(F.length>1)for(S=0;S<F.length;S++)(D=F[S]).indexOf("trace-")===0?(N=D.split("trace-")[1],this.traceHash[N]&&(this.traceHash[N].below=null)):D.indexOf("layout-")===0&&(N=D.split("layout-")[1],this.layerList[N]&&(this.layerList[N].below=null))}};var p={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function v(_,f){var S={};if(k.isPlainObject(_))S.id=_.id,S.style=_;else if(typeof _=="string")if(S.id=_,d.styleValuesMapbox.indexOf(_)!==-1)S.style=m(_);else if(d.stylesNonMapbox[_]){S.style=d.stylesNonMapbox[_];var w=S.style.sources["plotly-"+_],E=w?w.tiles:void 0;E&&E[0]&&E[0].slice(-9)==="?api_key="&&(E[0]+=f._mapboxAccessToken)}else S.style=_;else S.id=d.styleValueDflt,S.style=m(d.styleValueDflt);return S.transition={duration:0,delay:0},S}function m(_){return d.styleUrlPrefix+_+"-"+d.styleUrlSuffix}function y(_){return[_.lon,_.lat]}g.updateData=function(_){var f,S,w,E,P=this.traceHash,C=_.slice().sort(function(N,W){return p[N[0].trace.type]-p[W[0].trace.type]});for(w=0;w<C.length;w++){var O=C[w],R=!1;(f=P[(S=O[0].trace).uid])&&(f.type===S.type?(f.update(O),R=!0):f.dispose()),!R&&S._module&&(P[S.uid]=S._module.plot(this,O))}var j=Object.keys(P);e:for(w=0;w<j.length;w++){var D=j[w];for(E=0;E<_.length;E++)if(D===(S=_[E][0].trace).uid)continue e;(f=P[D]).dispose(),delete P[D]}},g.updateLayout=function(_){var f=this.map,S=_[this.id];this.dragging||this.wheeling||(f.setCenter(y(S.center)),f.setZoom(S.zoom),f.setBearing(S.bearing),f.setPitch(S.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?f.scrollZoom.enable():f.scrollZoom.disable()},g.resolveOnRender=function(_){var f=this.map;f.on("render",function S(){f.loaded()&&(f.off("render",S),setTimeout(_,10))})},g.rejectOnError=function(_){var f=this.map;function S(){_(new Error(d.mapOnErrorMsg))}f.once("error",S),f.once("style.error",S),f.once("source.error",S),f.once("tile.error",S),f.once("layer.error",S)},g.createFramework=function(_){var f=this,S=f.div=document.createElement("div");S.id=f.uid,S.style.position="absolute",f.container.appendChild(S),f.xaxis={_id:"x",c2p:function(w){return f.project(w).x}},f.yaxis={_id:"y",c2p:function(w){return f.project(w).y}},f.updateFramework(_),f.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(f.mockAxis,_)},g.initFx=function(_,f){var S=this,w=S.gd,E=S.map;function P(){s.loneUnhover(f._hoverlayer)}function C(){var O=S.getView();w.emit("plotly_relayouting",S.getViewEditsWithDerived(O))}E.on("moveend",function(O){if(S.map){var R=w._fullLayout;if(O.originalEvent||S.wheeling){var j=R[S.id];T.call("_storeDirectGUIEdit",w.layout,R._preGUI,S.getViewEdits(j));var D=S.getView();j._input.center=j.center=D.center,j._input.zoom=j.zoom=D.zoom,j._input.bearing=j.bearing=D.bearing,j._input.pitch=j.pitch=D.pitch,w.emit("plotly_relayout",S.getViewEditsWithDerived(D))}O.originalEvent&&O.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),R._rehover&&R._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(O){var R=S.div.getBoundingClientRect(),j=[O.originalEvent.offsetX,O.originalEvent.offsetY];O.target.getBoundingClientRect=function(){return R},S.xaxis.p2c=function(){return E.unproject(j).lng},S.yaxis.p2c=function(){return E.unproject(j).lat},w._fullLayout._rehover=function(){w._fullLayout._hoversubplot===S.id&&w._fullLayout[S.id]&&s.hover(w,O,S.id)},s.hover(w,O,S.id),w._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,P()}),E.on("zoomstart",P),E.on("mouseout",function(){w._fullLayout._hoversubplot=null}),E.on("drag",C),E.on("zoom",C),E.on("dblclick",function(){var O=w._fullLayout[S.id];T.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,S.getViewEdits(O));var R=S.viewInitial;E.setCenter(y(R.center)),E.setZoom(R.zoom),E.setBearing(R.bearing),E.setPitch(R.pitch);var j=S.getView();O._input.center=O.center=j.center,O._input.zoom=O.zoom=j.zoom,O._input.bearing=O.bearing=j.bearing,O._input.pitch=O.pitch=j.pitch,w.emit("plotly_doubleclick",null),w.emit("plotly_relayout",S.getViewEditsWithDerived(j))}),S.clearOutline=function(){l(S.dragOptions),a(S.dragOptions.gd)},S.onClickInPanFn=function(O){return function(R){var j=w._fullLayout.clickmode;j.indexOf("select")>-1&&u(R.originalEvent,w,[S.xaxis],[S.yaxis],S.id,O),j.indexOf("event")>-1&&s.click(w,R.originalEvent)}}},g.updateFx=function(_){var f=this,S=f.map,w=f.gd;if(!f.isStatic){var E,P=_.dragmode;E=function(R,j){j.isRect?(R.range={})[f.id]=[O([j.xmin,j.ymin]),O([j.xmax,j.ymax])]:(R.lassoPoints={})[f.id]=j.map(O)};var C=f.dragOptions;f.dragOptions=k.extendDeep(C||{},{dragmode:_.dragmode,element:f.div,gd:w,plotinfo:{id:f.id,domain:_[f.id].domain,xaxis:f.xaxis,yaxis:f.yaxis,fillRangeItems:E},xaxes:[f.xaxis],yaxes:[f.yaxis],subplot:f.id}),S.off("click",f.onClickInPanHandler),n(P)||i(P)?(S.dragPan.disable(),S.on("zoomstart",f.clearOutline),f.dragOptions.prepFn=function(R,j,D){r(R,j,D,f.dragOptions,P)},h.init(f.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",f.clearOutline),f.div.onmousedown=null,f.div.ontouchstart=null,f.div.removeEventListener("touchstart",f.div._ontouchstart),f.onClickInPanHandler=f.onClickInPanFn(f.dragOptions),S.on("click",f.onClickInPanHandler))}function O(R){var j=f.map.unproject(R);return[j.lng,j.lat]}},g.updateFramework=function(_){var f=_[this.id].domain,S=_._size,w=this.div.style;w.width=S.w*(f.x[1]-f.x[0])+"px",w.height=S.h*(f.y[1]-f.y[0])+"px",w.left=S.l+f.x[0]*S.w+"px",w.top=S.t+(1-f.y[1])*S.h+"px",this.xaxis._offset=S.l+f.x[0]*S.w,this.xaxis._length=S.w*(f.x[1]-f.x[0]),this.yaxis._offset=S.t+(1-f.y[1])*S.h,this.yaxis._length=S.h*(f.y[1]-f.y[0])},g.updateLayers=function(_){var f,S=_[this.id].layers,w=this.layerList;if(S.length!==w.length){for(f=0;f<w.length;f++)w[f].dispose();for(w=this.layerList=[],f=0;f<S.length;f++)w.push(c(this,f,S[f]))}else for(f=0;f<S.length;f++)w[f].update(S[f])},g.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},g.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},g.setOptions=function(_,f,S){for(var w in S)this.map[f](_,w,S[w])},g.getMapLayers=function(){return this.map.getStyle().layers},g.addLayer=function(_,f){var S=this.map;if(typeof f=="string"){if(f==="")return void S.addLayer(_,f);for(var w=this.getMapLayers(),E=0;E<w.length;E++)if(f===w[E].id)return void S.addLayer(_,f);k.warn(["Trying to add layer with *below* value",f,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(_)},g.project=function(_){return this.map.project(new M.LngLat(_[0],_[1]))},g.getView=function(){var _=this.map,f=_.getCenter(),S={lon:f.lng,lat:f.lat},w=_.getCanvas(),E=parseInt(w.style.width),P=parseInt(w.style.height);return{center:S,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([E,0]).toArray(),_.unproject([E,P]).toArray(),_.unproject([0,P]).toArray()]}}},g.getViewEdits=function(_){for(var f=this.id,S=["center","zoom","bearing","pitch"],w={},E=0;E<S.length;E++){var P=S[E];w[f+"."+P]=_[P]}return w},g.getViewEditsWithDerived=function(_){var f=this.id,S=this.getViewEdits(_);return S[f+"._derived"]=_._derived,S},ee.exports=x},66741:function(ee){"use strict";ee.exports=function(z){var e=z.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},7316:function(ee,z,e){"use strict";var M=e(33428),k=e(94336).m_,o=e(57624).SO,T=e(38248),b=e(83160),h=e(24040),s=e(73060),t=e(31780),i=e(3400),n=e(76308),r=e(39032).BADNUM,a=e(79811),l=e(1936).clearOutline,u=e(55308),d=e(85656),c=e(16672),x=e(84888)._M,g=i.relinkPrivateKeys,p=i._,v=ee.exports={};i.extendFlat(v,h),v.attributes=e(45464),v.attributes.type.values=v.allTypes,v.fontAttrs=e(25376),v.layoutAttributes=e(64859),v.fontWeight="normal";var m=v.transformsRegistry,y=e(62460);v.executeAPICommand=y.executeAPICommand,v.computeAPICommandBindings=y.computeAPICommandBindings,v.manageCommandObserver=y.manageCommandObserver,v.hasSimpleAPICommandBindings=y.hasSimpleAPICommandBindings,v.redrawText=function(F){return F=i.getGraphDiv(F),new Promise(function(U){setTimeout(function(){F._fullLayout&&(h.getComponentMethod("annotations","draw")(F),h.getComponentMethod("legend","draw")(F),h.getComponentMethod("colorbar","draw")(F),U(v.previousPromises(F)))},300)})},v.resize=function(F){var U;F=i.getGraphDiv(F);var V=new Promise(function(te,J){F&&!i.isHidden(F)||J(new Error("Resize must be passed a displayed plot div element.")),F._redrawTimer&&clearTimeout(F._redrawTimer),F._resolveResize&&(U=F._resolveResize),F._resolveResize=te,F._redrawTimer=setTimeout(function(){if(!F.layout||F.layout.width&&F.layout.height||i.isHidden(F))te(F);else{delete F.layout.width,delete F.layout.height;var K=F.changed;F.autoplay=!0,h.call("relayout",F,{autosize:!0}).then(function(){F.changed=K,F._resolveResize===te&&(delete F._resolveResize,te(F))})}},100)});return U&&U(V),V},v.previousPromises=function(F){if((F._promises||[]).length)return Promise.all(F._promises).then(function(){F._promises=[]})},v.addLinks=function(F){if(F._context.showLink||F._context.showSources){var U=F._fullLayout,V=i.ensureSingle(U._paper,"text","js-plot-link-container",function($){$.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var re=M.select(this);re.append("tspan").classed("js-link-to-tool",!0),re.append("tspan").classed("js-link-spacer",!0),re.append("tspan").classed("js-sourcelinks",!0)})}),te=V.node(),J={y:U._paper.attr("height")-9};document.body.contains(te)&&te.getComputedTextLength()>=U.width-20?(J["text-anchor"]="start",J.x=5):(J["text-anchor"]="end",J.x=U._paper.attr("width")-7),V.attr(J);var K=V.select(".js-link-to-tool"),X=V.select(".js-link-spacer"),Z=V.select(".js-sourcelinks");F._context.showSources&&F._context.showSources(F),F._context.showLink&&function($,re){re.text("");var oe=re.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text($._context.linkText+" "+String.fromCharCode(187));if($._context.sendData)oe.on("click",function(){v.sendDataToCloud($)});else{var ie=window.location.pathname.split("/"),ue=window.location.search;oe.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ie[2].split(".")[0]+"/"+ie[1]+ue})}}(F,K),X.text(K.text()&&Z.text()?" - ":"")}},v.sendDataToCloud=function(F){var U=(window.PLOTLYENV||{}).BASE_URL||F._context.plotlyServerURL;if(U){F.emit("plotly_beforeexport");var V=M.select(F).append("div").attr("id","hiddenform").style("display","none"),te=V.append("form").attr({action:U+"/external",method:"post",target:"_blank"});return te.append("input").attr({type:"text",name:"data"}).node().value=v.graphJson(F,!1,"keepdata"),te.node().submit(),V.remove(),F.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],f=["year","month","dayMonth","dayMonthYear"];function S(F,U){var V=F._context.locale;V||(V="en-US");var te=!1,J={};function K(ie){for(var ue=!0,me=0;me<U.length;me++){var be=U[me];J[be]||(ie[be]?J[be]=ie[be]:ue=!1)}ue&&(te=!0)}for(var X=0;X<2;X++){for(var Z=F._context.locales,$=0;$<2;$++){var re=(Z[V]||{}).format;if(re&&(K(re),te))break;Z=h.localeRegistry}var oe=V.split("-")[0];if(te||oe===V)break;V=oe}return te||K(h.localeRegistry.en.format),J}function w(F,U){var V={_fullLayout:U},te=F._id.charAt(0)==="x",J=F._mainAxis._anchorAxis,K="",X="",Z="";if(J&&(Z=J._mainAxis._id,K=te?F._id+Z:Z+F._id),!K||!U._plots[K]){K="";for(var $=F._counterAxes,re=0;re<$.length;re++){var oe=$[re],ie=te?F._id+oe:oe+F._id;X||(X=ie);var ue=a.getFromId(V,oe);if(Z&&ue.overlaying===Z){K=ie;break}}}return K||X}function E(F){var U=F.transforms;if(Array.isArray(U)&&U.length)for(var V=0;V<U.length;V++){var te=U[V],J=te._module||m[te.type];if(J&&J.makesData)return!0}return!1}function P(F,U,V,te){for(var J=F.transforms,K=[F],X=0;X<J.length;X++){var Z=J[X],$=m[Z.type];$&&$.transform&&(K=$.transform(K,{transform:Z,fullTrace:F,fullData:U,layout:V,fullLayout:te,transformIndex:X}))}return K}function C(F){return typeof F=="string"&&F.substr(F.length-2)==="px"&&parseFloat(F)}function O(F){var U=F.margin;if(!F._size){var V=F._size={l:Math.round(U.l),r:Math.round(U.r),t:Math.round(U.t),b:Math.round(U.b),p:Math.round(U.pad)};V.w=Math.round(F.width)-V.l-V.r,V.h=Math.round(F.height)-V.t-V.b}F._pushmargin||(F._pushmargin={}),F._pushmarginIds||(F._pushmarginIds={}),F._reservedMargin||(F._reservedMargin={})}v.supplyDefaults=function(F,U){var V=U&&U.skipUpdateCalc,te=F._fullLayout||{};if(te._skipDefaults)delete te._skipDefaults;else{var J,K=F._fullLayout={},X=F.layout||{},Z=F._fullData||[],$=F._fullData=[],re=F.data||[],oe=F.calcdata||[],ie=F._context||{};F._transitionData||v.createTransitionData(F),K._dfltTitle={plot:p(F,"Click to enter Plot title"),x:p(F,"Click to enter X axis title"),y:p(F,"Click to enter Y axis title"),colorbar:p(F,"Click to enter Colorscale title"),annotation:p(F,"new text")},K._traceWord=p(F,"trace");var ue=S(F,_);if(K._mapboxAccessToken=ie.mapboxAccessToken,te._initialAutoSizeIsDone){var me=te.width,be=te.height;v.supplyLayoutGlobalDefaults(X,K,ue),X.width||(K.width=me),X.height||(K.height=be),v.sanitizeMargins(K)}else{v.supplyLayoutGlobalDefaults(X,K,ue);var ge=!X.width||!X.height,de=K.autosize,ve=ie.autosizable;ge&&(de||ve)?v.plotAutoSize(F,X,K):ge&&v.sanitizeMargins(K),!de&&ge&&(X.width=K.width,X.height=K.height)}K._d3locale=function(Pe,Ue){return Pe.decimal=Ue.charAt(0),Pe.thousands=Ue.charAt(1),{numberFormat:function(Ve){try{Ve=o(Pe).format(i.adjustFormat(Ve))}catch(Ze){return i.warnBadFormat(Ve),i.noFormat}return Ve},timeFormat:k(Pe).utcFormat}}(ue,K.separators),K._extraFormat=S(F,f),K._initialAutoSizeIsDone=!0,K._dataLength=re.length,K._modules=[],K._visibleModules=[],K._basePlotModules=[];var pe=K._subplots=function(){var Pe,Ue,Ve=h.collectableSubplotTypes,Ze={};if(!Ve){Ve=[];var it=h.subplotsRegistry;for(var tt in it){var dt=it[tt].attr;if(dt&&(Ve.push(tt),Array.isArray(dt)))for(Ue=0;Ue<dt.length;Ue++)i.pushUnique(Ve,dt[Ue])}}for(Pe=0;Pe<Ve.length;Pe++)Ze[Ve[Pe]]=[];return Ze}(),_e=K._splomAxes={x:{},y:{}},Te=K._splomSubplots={};K._splomGridDflt={},K._scatterStackOpts={},K._firstScatter={},K._alignmentOpts={},K._colorAxes={},K._requestRangeslider={},K._traceUids=function(Pe,Ue){var Ve,Ze,it=Ue.length,tt=[];for(Ve=0;Ve<Pe.length;Ve++){var dt=Pe[Ve]._fullInput;dt!==Ze&&tt.push(dt),Ze=dt}var yt=tt.length,vt=new Array(it),et={};function Qe(Dt,Ct){vt[Ct]=Dt,et[Dt]=1}function wt(Dt,Ct){if(Dt&&typeof Dt=="string"&&!et[Dt])return Qe(Dt,Ct),!0}for(Ve=0;Ve<it;Ve++){var It=Ue[Ve].uid;typeof It=="number"&&(It=String(It)),wt(It,Ve)||Ve<yt&&wt(tt[Ve].uid,Ve)||Qe(i.randstr(et),Ve)}return vt}(Z,re),K._globalTransforms=(F._context||{}).globalTransforms,v.supplyDataDefaults(re,$,X,K);var le=Object.keys(_e.x),ae=Object.keys(_e.y);if(le.length>1&&ae.length>1){for(h.getComponentMethod("grid","sizeDefaults")(X,K),J=0;J<le.length;J++)i.pushUnique(pe.xaxis,le[J]);for(J=0;J<ae.length;J++)i.pushUnique(pe.yaxis,ae[J]);for(var he in Te)i.pushUnique(pe.cartesian,he)}if(K._has=v._hasPlotType.bind(K),Z.length===$.length)for(J=0;J<$.length;J++)g($[J],Z[J]);v.supplyLayoutModuleDefaults(X,K,$,F._transitionData);var Se=K._visibleModules,ke=[];for(J=0;J<Se.length;J++){var Me=Se[J].crossTraceDefaults;Me&&i.pushUnique(ke,Me)}for(J=0;J<ke.length;J++)ke[J]($,K);K._hasOnlyLargeSploms=K._basePlotModules.length===1&&K._basePlotModules[0].name==="splom"&&le.length>15&&ae.length>15&&K.shapes.length===0&&K.images.length===0,v.linkSubplots($,K,Z,te),v.cleanPlot($,K,Z,te);var Ee=!(!te._has||!te._has("gl2d")),De=!(!K._has||!K._has("gl2d")),fe=!(!te._has||!te._has("cartesian"))||Ee,xe=!(!K._has||!K._has("cartesian"))||De;fe&&!xe?te._bgLayer.remove():xe&&!fe&&(K._shouldCreateBgLayer=!0),te._zoomlayer&&!F._dragging&&l({_fullLayout:te}),function(Pe,Ue){var Ve,Ze=[];Ue.meta&&(Ve=Ue._meta={meta:Ue.meta,layout:{meta:Ue.meta}});for(var it=0;it<Pe.length;it++){var tt=Pe[it];tt.meta?Ze[tt.index]=tt._meta={meta:tt.meta}:Ue.meta&&(tt._meta={meta:Ue.meta}),Ue.meta&&(tt._meta.layout={meta:Ue.meta})}Ze.length&&(Ve||(Ve=Ue._meta={}),Ve.data=Ze)}($,K),g(K,te),h.getComponentMethod("colorscale","crossTraceDefaults")($,K),K._preGUI||(K._preGUI={}),K._tracePreGUI||(K._tracePreGUI={});var we,Oe=K._tracePreGUI,ze={};for(we in Oe)ze[we]="old";for(J=0;J<$.length;J++)ze[we=$[J]._fullInput.uid]||(Oe[we]={}),ze[we]="new";for(we in ze)ze[we]==="old"&&delete Oe[we];O(K),h.getComponentMethod("rangeslider","makeData")(K),V||oe.length!==$.length||v.supplyDefaultsUpdateCalc(oe,$)}},v.supplyDefaultsUpdateCalc=function(F,U){for(var V=0;V<U.length;V++){var te=U[V],J=(F[V]||[])[0];if(J&&J.trace){var K=J.trace;if(K._hasCalcTransform){var X,Z,$,re=K._arrayAttrs;for(X=0;X<re.length;X++)Z=re[X],$=i.nestedProperty(K,Z).get().slice(),i.nestedProperty(te,Z).set($)}J.trace=te}}},v.createTransitionData=function(F){F._transitionData||(F._transitionData={}),F._transitionData._frames||(F._transitionData._frames=[]),F._transitionData._frameHash||(F._transitionData._frameHash={}),F._transitionData._counter||(F._transitionData._counter=0),F._transitionData._interruptCallbacks||(F._transitionData._interruptCallbacks=[])},v._hasPlotType=function(F){var U,V=this._basePlotModules||[];for(U=0;U<V.length;U++)if(V[U].name===F)return!0;var te=this._modules||[];for(U=0;U<te.length;U++){var J=te[U].name;if(J===F)return!0;var K=h.modules[J];if(K&&K.categories[F])return!0}return!1},v.cleanPlot=function(F,U,V,te){var J,K,X=te._basePlotModules||[];for(J=0;J<X.length;J++){var Z=X[J];Z.clean&&Z.clean(F,U,V,te)}var $=te._has&&te._has("gl"),re=U._has&&U._has("gl");$&&!re&&te._glcontainer!==void 0&&(te._glcontainer.selectAll(".gl-canvas").remove(),te._glcontainer.selectAll(".no-webgl").remove(),te._glcanvas=null);var oe=!!te._infolayer;e:for(J=0;J<V.length;J++){var ie=V[J].uid;for(K=0;K<F.length;K++)if(ie===F[K].uid)continue e;oe&&te._infolayer.select(".cb"+ie).remove()}},v.linkSubplots=function(F,U,V,te){var J,K,X=te._plots||{},Z=U._plots={},$=U._subplots,re={_fullData:F,_fullLayout:U},oe=$.cartesian.concat($.gl2d||[]);for(J=0;J<oe.length;J++){var ie,ue=oe[J],me=X[ue],be=a.getFromId(re,ue,"x"),ge=a.getFromId(re,ue,"y");for(me?ie=Z[ue]=me:(ie=Z[ue]={}).id=ue,be._counterAxes.push(ge._id),ge._counterAxes.push(be._id),be._subplotsWith.push(ue),ge._subplotsWith.push(ue),ie.xaxis=be,ie.yaxis=ge,ie._hasClipOnAxisFalse=!1,K=0;K<F.length;K++){var de=F[K];if(de.xaxis===ie.xaxis._id&&de.yaxis===ie.yaxis._id&&de.cliponaxis===!1){ie._hasClipOnAxisFalse=!0;break}}}var ve,pe=a.list(re,null,!0);for(J=0;J<pe.length;J++){var _e=null;(ve=pe[J]).overlaying&&(_e=a.getFromId(re,ve.overlaying))&&_e.overlaying&&(ve.overlaying=!1,_e=null),ve._mainAxis=_e||ve,_e&&(ve.domain=_e.domain.slice()),ve._anchorAxis=ve.anchor==="free"?null:a.getFromId(re,ve.anchor)}for(J=0;J<pe.length;J++)if((ve=pe[J])._counterAxes.sort(a.idSort),ve._subplotsWith.sort(i.subplotSort),ve._mainSubplot=w(ve,U),ve._counterAxes.length&&(ve.spikemode&&ve.spikemode.indexOf("across")!==-1||ve.automargin&&ve.mirror&&ve.anchor!=="free"||h.getComponentMethod("rangeslider","isVisible")(ve))){var Te=1,le=0;for(K=0;K<ve._counterAxes.length;K++){var ae=a.getFromId(re,ve._counterAxes[K]);Te=Math.min(Te,ae.domain[0]),le=Math.max(le,ae.domain[1])}Te<le&&(ve._counterDomainMin=Te,ve._counterDomainMax=le)}},v.clearExpandedTraceDefaultColors=function(F){var U,V,te;for(V=[],(U=F._module._colorAttrs)||(F._module._colorAttrs=U=[],s.crawl(F._module.attributes,function(J,K,X,Z){V[Z]=K,V.length=Z+1,J.valType==="color"&&J.dflt===void 0&&U.push(V.join("."))})),te=0;te<U.length;te++)i.nestedProperty(F,"_input."+U[te]).get()||i.nestedProperty(F,U[te]).set(null)},v.supplyDataDefaults=function(F,U,V,te){var J,K,X,Z=te._modules,$=te._visibleModules,re=te._basePlotModules,oe=0,ie=0;function ue(he){U.push(he);var Se=he._module;Se&&(i.pushUnique(Z,Se),he.visible===!0&&i.pushUnique($,Se),i.pushUnique(re,he._module.basePlotModule),oe++,he._input.visible!==!1&&ie++)}te._transformModules=[];var me={},be=[],ge=(V.template||{}).data||{},de=t.traceTemplater(ge);for(J=0;J<F.length;J++){if(X=F[J],(K=de.newTrace(X)).uid=te._traceUids[J],v.supplyTraceDefaults(X,K,ie,te,J),K.index=J,K._input=X,K._expandedIndex=oe,K.transforms&&K.transforms.length)for(var ve=X.visible!==!1&&K.visible===!1,pe=P(K,U,V,te),_e=0;_e<pe.length;_e++){var Te=pe[_e],le={_template:K._template,type:K.type,uid:K.uid+_e};ve&&Te.visible===!1&&delete Te.visible,v.supplyTraceDefaults(Te,le,oe,te,J),g(le,Te),le.index=J,le._input=X,le._fullInput=K,le._expandedIndex=oe,le._expandedInput=Te,ue(le)}else K._fullInput=K,K._expandedInput=K,ue(K);h.traceIs(K,"carpetAxis")&&(me[K.carpet]=K),h.traceIs(K,"carpetDependent")&&be.push(J)}for(J=0;J<be.length;J++)if((K=U[be[J]]).visible){var ae=me[K.carpet];K._carpet=ae,ae&&ae.visible?(K.xaxis=ae.xaxis,K.yaxis=ae.yaxis):K.visible=!1}},v.supplyAnimationDefaults=function(F){var U;F=F||{};var V={};function te(J,K){return i.coerce(F||{},V,d,J,K)}if(te("mode"),te("direction"),te("fromcurrent"),Array.isArray(F.frame))for(V.frame=[],U=0;U<F.frame.length;U++)V.frame[U]=v.supplyAnimationFrameDefaults(F.frame[U]||{});else V.frame=v.supplyAnimationFrameDefaults(F.frame||{});if(Array.isArray(F.transition))for(V.transition=[],U=0;U<F.transition.length;U++)V.transition[U]=v.supplyAnimationTransitionDefaults(F.transition[U]||{});else V.transition=v.supplyAnimationTransitionDefaults(F.transition||{});return V},v.supplyAnimationFrameDefaults=function(F){var U={};function V(te,J){return i.coerce(F||{},U,d.frame,te,J)}return V("duration"),V("redraw"),U},v.supplyAnimationTransitionDefaults=function(F){var U={};function V(te,J){return i.coerce(F||{},U,d.transition,te,J)}return V("duration"),V("easing"),U},v.supplyFrameDefaults=function(F){var U={};function V(te,J){return i.coerce(F,U,c,te,J)}return V("group"),V("name"),V("traces"),V("baseframe"),V("data"),V("layout"),U},v.supplyTraceDefaults=function(F,U,V,te,J){var K,X=te.colorway||n.defaults,Z=X[V%X.length];function $(_e,Te){return i.coerce(F,U,v.attributes,_e,Te)}var re=$("visible");$("type"),$("name",te._traceWord+" "+J),$("uirevision",te.uirevision);var oe=v.getModule(U);if(U._module=oe,oe){var ie=oe.basePlotModule,ue=ie.attr,me=ie.attributes;if(ue&&me){var be=te._subplots,ge="";if(re||ie.name!=="gl2d"){if(Array.isArray(ue))for(K=0;K<ue.length;K++){var de=ue[K],ve=i.coerce(F,U,me,de);be[de]&&i.pushUnique(be[de],ve),ge+=ve}else ge=i.coerce(F,U,me,ue);be[ie.name]&&i.pushUnique(be[ie.name],ge)}}}if(re){if($("customdata"),$("ids"),$("meta"),h.traceIs(U,"showLegend")?(i.coerce(F,U,oe.attributes.showlegend?oe.attributes:v.attributes,"showlegend"),$("legend"),$("legendwidth"),$("legendgroup"),$("legendgrouptitle.text"),$("legendrank"),U._dfltShowLegend=!0):U._dfltShowLegend=!1,oe&&oe.supplyDefaults(F,U,Z,te),h.traceIs(U,"noOpacity")||$("opacity"),h.traceIs(U,"notLegendIsolatable")&&(U.visible=!!U.visible),h.traceIs(U,"noHover")||(U.hovertemplate||i.coerceHoverinfo(F,U,te),U.type!=="parcats"&&h.getComponentMethod("fx","supplyDefaults")(F,U,Z,te)),oe&&oe.selectPoints){var pe=$("selectedpoints");i.isTypedArray(pe)&&(U.selectedpoints=Array.from(pe))}v.supplyTransformDefaults(F,U,te)}return U},v.hasMakesDataTransform=E,v.supplyTransformDefaults=function(F,U,V){if(U._length||E(F)){var te=V._globalTransforms||[],J=V._transformModules||[];if(Array.isArray(F.transforms)||te.length!==0)for(var K=F.transforms||[],X=te.concat(K),Z=U.transforms=[],$=0;$<X.length;$++){var re,oe=X[$],ie=oe.type,ue=m[ie],me=!(oe._module&&oe._module===ue),be=ue&&typeof ue.transform=="function";ue||i.warn("Unrecognized transform type "+ie+"."),ue&&ue.supplyDefaults&&(me||be)?((re=ue.supplyDefaults(oe,U,V,F)).type=ie,re._module=ue,i.pushUnique(J,ue)):re=i.extendFlat({},oe),Z.push(re)}}},v.supplyLayoutGlobalDefaults=function(F,U,V){function te(oe,ie){return i.coerce(F,U,v.layoutAttributes,oe,ie)}var J=F.template;i.isPlainObject(J)&&(U.template=J,U._template=J.layout,U._dataTemplate=J.data),te("autotypenumbers");var K=i.coerceFont(te,"font"),X=K.size;i.coerceFont(te,"title.font",i.extendFlat({},K,{size:Math.round(1.4*X)})),te("title.text",U._dfltTitle.plot),te("title.xref");var Z=te("title.yref");te("title.pad.t"),te("title.pad.r"),te("title.pad.b"),te("title.pad.l");var $=te("title.automargin");te("title.x"),te("title.xanchor"),te("title.y"),te("title.yanchor"),$&&(Z==="paper"&&(U.title.y!==0&&(U.title.y=1),U.title.yanchor==="auto"&&(U.title.yanchor=U.title.y===0?"top":"bottom")),Z==="container"&&(U.title.y==="auto"&&(U.title.y=1),U.title.yanchor==="auto"&&(U.title.yanchor=U.title.y<.5?"bottom":"top"))),te("uniformtext.mode")&&te("uniformtext.minsize"),te("autosize",!(F.width&&F.height)),te("width"),te("height"),te("minreducedwidth"),te("minreducedheight"),te("margin.l"),te("margin.r"),te("margin.t"),te("margin.b"),te("margin.pad"),te("margin.autoexpand"),F.width&&F.height&&v.sanitizeMargins(U),h.getComponentMethod("grid","sizeDefaults")(F,U),te("paper_bgcolor"),te("separators",V.decimal+V.thousands),te("hidesources"),te("colorway"),te("datarevision");var re=te("uirevision");te("editrevision",re),te("selectionrevision",re),h.getComponentMethod("modebar","supplyLayoutDefaults")(F,U),h.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(F,U,te),h.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(F,U,te),te("meta"),i.isPlainObject(F.transition)&&(te("transition.duration"),te("transition.easing"),te("transition.ordering")),h.getComponentMethod("calendars","handleDefaults")(F,U,"calendar"),h.getComponentMethod("fx","supplyLayoutGlobalDefaults")(F,U,te),i.coerce(F,U,u,"scattermode")},v.plotAutoSize=function(F,U,V){var te,J,K=F._context||{},X=K.frameMargins,Z=i.isPlotDiv(F);if(Z&&F.emit("plotly_autosize"),K.fillFrame)te=window.innerWidth,J=window.innerHeight,document.body.style.overflow="hidden";else{var $=Z?window.getComputedStyle(F):{};if(te=C($.width)||C($.maxWidth)||V.width,J=C($.height)||C($.maxHeight)||V.height,T(X)&&X>0){var re=1-2*X;te=Math.round(re*te),J=Math.round(re*J)}}var oe=v.layoutAttributes.width.min,ie=v.layoutAttributes.height.min;te<oe&&(te=oe),J<ie&&(J=ie);var ue=!U.width&&Math.abs(V.width-te)>1,me=!U.height&&Math.abs(V.height-J)>1;(me||ue)&&(ue&&(V.width=te),me&&(V.height=J)),F._initialAutoSize||(F._initialAutoSize={width:te,height:J}),v.sanitizeMargins(V)},v.supplyLayoutModuleDefaults=function(F,U,V,te){var J,K,X,Z=h.componentsRegistry,$=U._basePlotModules,re=h.subplotsRegistry.cartesian;for(J in Z)(X=Z[J]).includeBasePlot&&X.includeBasePlot(F,U);for(var oe in $.length||$.push(re),U._has("cartesian")&&(h.getComponentMethod("grid","contentDefaults")(F,U),re.finalizeSubplots(F,U)),U._subplots)U._subplots[oe].sort(i.subplotSort);for(K=0;K<$.length;K++)(X=$[K]).supplyLayoutDefaults&&X.supplyLayoutDefaults(F,U,V);var ie=U._modules;for(K=0;K<ie.length;K++)(X=ie[K]).supplyLayoutDefaults&&X.supplyLayoutDefaults(F,U,V);var ue=U._transformModules;for(K=0;K<ue.length;K++)(X=ue[K]).supplyLayoutDefaults&&X.supplyLayoutDefaults(F,U,V,te);for(J in Z)(X=Z[J]).supplyLayoutDefaults&&X.supplyLayoutDefaults(F,U,V)},v.purge=function(F){var U=F._fullLayout||{};U._glcontainer!==void 0&&(U._glcontainer.selectAll(".gl-canvas").remove(),U._glcontainer.remove(),U._glcanvas=null),U._modeBar&&U._modeBar.destroy(),F._transitionData&&(F._transitionData._interruptCallbacks&&(F._transitionData._interruptCallbacks.length=0),F._transitionData._animationRaf&&window.cancelAnimationFrame(F._transitionData._animationRaf)),i.clearThrottle(),i.clearResponsive(F),delete F.data,delete F.layout,delete F._fullData,delete F._fullLayout,delete F.calcdata,delete F.empty,delete F.fid,delete F.undoqueue,delete F.undonum,delete F.autoplay,delete F.changed,delete F._promises,delete F._redrawTimer,delete F._hmlumcount,delete F._hmpixcount,delete F._transitionData,delete F._transitioning,delete F._initialAutoSize,delete F._transitioningWithDuration,delete F._dragging,delete F._dragged,delete F._dragdata,delete F._hoverdata,delete F._snapshotInProgress,delete F._editing,delete F._mouseDownTime,delete F._legendMouseDownTime,F.removeAllListeners&&F.removeAllListeners()},v.style=function(F){var U,V=F._fullLayout._visibleModules,te=[];for(U=0;U<V.length;U++){var J=V[U];J.style&&i.pushUnique(te,J.style)}for(U=0;U<te.length;U++)te[U](F)},v.sanitizeMargins=function(F){if(F&&F.margin){var U,V=F.width,te=F.height,J=F.margin,K=V-(J.l+J.r),X=te-(J.t+J.b);K<0&&(U=(V-1)/(J.l+J.r),J.l=Math.floor(U*J.l),J.r=Math.floor(U*J.r)),X<0&&(U=(te-1)/(J.t+J.b),J.t=Math.floor(U*J.t),J.b=Math.floor(U*J.b))}},v.clearAutoMarginIds=function(F){F._fullLayout._pushmarginIds={}},v.allowAutoMargin=function(F,U){F._fullLayout._pushmarginIds[U]=1},v.autoMargin=function(F,U,V){var te=F._fullLayout,J=te.width,K=te.height,X=te.margin,Z=te.minreducedwidth,$=te.minreducedheight,re=i.constrain(J-X.l-X.r,2,Z),oe=i.constrain(K-X.t-X.b,2,$),ie=Math.max(0,J-re),ue=Math.max(0,K-oe),me=te._pushmargin,be=te._pushmarginIds;if(X.autoexpand!==!1){if(V){var ge=V.pad;if(ge===void 0&&(ge=Math.min(12,X.l,X.r,X.t,X.b)),ie){var de=(V.l+V.r)/ie;de>1&&(V.l/=de,V.r/=de)}if(ue){var ve=(V.t+V.b)/ue;ve>1&&(V.t/=ve,V.b/=ve)}var pe=V.xl!==void 0?V.xl:V.x,_e=V.xr!==void 0?V.xr:V.x,Te=V.yt!==void 0?V.yt:V.y,le=V.yb!==void 0?V.yb:V.y;me[U]={l:{val:pe,size:V.l+ge},r:{val:_e,size:V.r+ge},b:{val:le,size:V.b+ge},t:{val:Te,size:V.t+ge}},be[U]=1}else delete me[U],delete be[U];if(!te._replotting)return v.doAutoMargin(F)}},v.doAutoMargin=function(F){var U=F._fullLayout,V=U.width,te=U.height;U._size||(U._size={}),O(U);var J=U._size,K=U.margin,X={t:0,b:0,l:0,r:0},Z=i.extendFlat({},J),$=K.l,re=K.r,oe=K.t,ie=K.b,ue=U._pushmargin,me=U._pushmarginIds,be=U.minreducedwidth,ge=U.minreducedheight;if(K.autoexpand!==!1){for(var de in ue)me[de]||delete ue[de];var ve=F._fullLayout._reservedMargin;for(var pe in ve)for(var _e in ve[pe]){var Te=ve[pe][_e];X[_e]=Math.max(X[_e],Te)}for(var le in ue.base={l:{val:0,size:$},r:{val:1,size:re},t:{val:1,size:oe},b:{val:0,size:ie}},X){var ae=0;for(var he in ue)he!=="base"&&T(ue[he][le].size)&&(ae=ue[he][le].size>ae?ue[he][le].size:ae);var Se=Math.max(0,K[le]-ae);X[le]=Math.max(0,X[le]-Se)}for(var ke in ue){var Me=ue[ke].l||{},Ee=ue[ke].b||{},De=Me.val,fe=Me.size,xe=Ee.val,we=Ee.size,Oe=V-X.r-X.l,ze=te-X.t-X.b;for(var Pe in ue){if(T(fe)&&ue[Pe].r){var Ue=ue[Pe].r.val,Ve=ue[Pe].r.size;if(Ue>De){var Ze=(fe*Ue+(Ve-Oe)*De)/(Ue-De),it=(Ve*(1-De)+(fe-Oe)*(1-Ue))/(Ue-De);Ze+it>$+re&&($=Ze,re=it)}}if(T(we)&&ue[Pe].t){var tt=ue[Pe].t.val,dt=ue[Pe].t.size;if(tt>xe){var yt=(we*tt+(dt-ze)*xe)/(tt-xe),vt=(dt*(1-xe)+(we-ze)*(1-tt))/(tt-xe);yt+vt>ie+oe&&(ie=yt,oe=vt)}}}}}var et=i.constrain(V-K.l-K.r,2,be),Qe=i.constrain(te-K.t-K.b,2,ge),wt=Math.max(0,V-et),It=Math.max(0,te-Qe);if(wt){var Dt=($+re)/wt;Dt>1&&($/=Dt,re/=Dt)}if(It){var Ct=(ie+oe)/It;Ct>1&&(ie/=Ct,oe/=Ct)}if(J.l=Math.round($)+X.l,J.r=Math.round(re)+X.r,J.t=Math.round(oe)+X.t,J.b=Math.round(ie)+X.b,J.p=Math.round(K.pad),J.w=Math.round(V)-J.l-J.r,J.h=Math.round(te)-J.t-J.b,!U._replotting&&(v.didMarginChange(Z,J)||function(We){if("_redrawFromAutoMarginCount"in We._fullLayout)return!1;var Be=a.list(We,"",!0);for(var Ge in Be)if(Be[Ge].autoshift||Be[Ge].shift)return!0;return!1}(F))){"_redrawFromAutoMarginCount"in U?U._redrawFromAutoMarginCount++:U._redrawFromAutoMarginCount=1;var He=3*(1+Object.keys(me).length);if(U._redrawFromAutoMarginCount<He)return h.call("_doPlot",F);U._size=Z,i.warn("Too many auto-margin redraws.")}(function(We){var Be=a.list(We,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Ge){for(var at=0;at<Be.length;at++){var nt=Be[at][Ge];nt&&nt()}})})(F)};var R=["l","r","t","b","p","w","h"];function j(F,U,V){var te=!1,J=[v.previousPromises,function(){if(F._transitionData)return F._transitioning=!1,function(X){var Z=Promise.resolve();if(!X)return Z;for(;X.length;)Z=Z.then(X.shift());return Z}(F._transitionData._interruptCallbacks)},V.prepareFn,v.rehover,v.reselect,function(){return F.emit("plotly_transitioning",[]),new Promise(function(X){F._transitioning=!0,U.duration>0&&(F._transitioningWithDuration=!0),F._transitionData._interruptCallbacks.push(function(){te=!0}),V.redraw&&F._transitionData._interruptCallbacks.push(function(){return h.call("redraw",F)}),F._transitionData._interruptCallbacks.push(function(){F.emit("plotly_transitioninterrupted",[])});var Z=0,$=0;function re(){return Z++,function(){var oe;$++,te||$!==Z||(oe=X,F._transitionData&&(function(ie){if(ie)for(;ie.length;)ie.shift()}(F._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(V.redraw)return h.call("redraw",F)}).then(function(){F._transitioning=!1,F._transitioningWithDuration=!1,F.emit("plotly_transitioned",[])}).then(oe)))}}V.runFn(re),setTimeout(re())})}],K=i.syncOrAsync(J,F);return K&&K.then||(K=Promise.resolve()),K.then(function(){return F})}v.didMarginChange=function(F,U){for(var V=0;V<R.length;V++){var te=R[V],J=F[te],K=U[te];if(!T(J)||Math.abs(K-J)>1)return!0}return!1},v.graphJson=function(F,U,V,te,J,K){(J&&U&&!F._fullData||J&&!U&&!F._fullLayout)&&v.supplyDefaults(F);var X=J?F._fullData:F.data,Z=J?F._fullLayout:F.layout,$=(F._transitionData||{})._frames;function re(ue,me){if(typeof ue=="function")return me?"_function_":null;if(i.isPlainObject(ue)){var be,ge={};return Object.keys(ue).sort().forEach(function(_e){if(["_","["].indexOf(_e.charAt(0))===-1)if(typeof ue[_e]!="function"){if(V==="keepdata"){if(_e.substr(_e.length-3)==="src")return}else if(V==="keepstream"){if(typeof(be=ue[_e+"src"])=="string"&&be.indexOf(":")>0&&!i.isPlainObject(ue.stream))return}else if(V!=="keepall"&&typeof(be=ue[_e+"src"])=="string"&&be.indexOf(":")>0)return;ge[_e]=re(ue[_e],me)}else me&&(ge[_e]="_function")}),ge}var de=Array.isArray(ue),ve=i.isTypedArray(ue);if((de||ve)&&ue.dtype&&ue.shape){var pe=ue.bdata;return re({dtype:ue.dtype,shape:ue.shape,bdata:i.isArrayBuffer(pe)?b.encode(pe):pe},me)}return de?ue.map(function(_e){return re(_e,me)}):ve?i.simpleMap(ue,i.identity):i.isJSDate(ue)?i.ms2DateTimeLocal(+ue):ue}var oe={data:(X||[]).map(function(ue){var me=re(ue);return U&&delete me.fit,me})};if(!U&&(oe.layout=re(Z),J)){var ie=Z._size;oe.layout.computed={margin:{b:ie.b,l:ie.l,r:ie.r,t:ie.t}}}return $&&(oe.frames=re($)),K&&(oe.config=re(F._context,!0)),te==="object"?oe:JSON.stringify(oe)},v.modifyFrames=function(F,U){var V,te,J,K=F._transitionData._frames,X=F._transitionData._frameHash;for(V=0;V<U.length;V++)switch((te=U[V]).type){case"replace":J=te.value;var Z=(K[te.index]||{}).name,$=J.name;K[te.index]=X[$]=J,$!==Z&&(delete X[Z],X[$]=J);break;case"insert":X[(J=te.value).name]=J,K.splice(te.index,0,J);break;case"delete":delete X[(J=K[te.index]).name],K.splice(te.index,1)}return Promise.resolve()},v.computeFrame=function(F,U){var V,te,J,K,X=F._transitionData._frameHash;if(!U)throw new Error("computeFrame must be given a string frame name");var Z=X[U.toString()];if(!Z)return!1;for(var $=[Z],re=[Z.name];Z.baseframe&&(Z=X[Z.baseframe.toString()])&&re.indexOf(Z.name)===-1;)$.push(Z),re.push(Z.name);for(var oe={};Z=$.pop();)if(Z.layout&&(oe.layout=v.extendLayout(oe.layout,Z.layout)),Z.data){if(oe.data||(oe.data=[]),!(te=Z.traces))for(te=[],V=0;V<Z.data.length;V++)te[V]=V;for(oe.traces||(oe.traces=[]),V=0;V<Z.data.length;V++)(J=te[V])!=null&&((K=oe.traces.indexOf(J))===-1&&(K=oe.data.length,oe.traces[K]=J),oe.data[K]=v.extendTrace(oe.data[K],Z.data[V]))}return oe},v.recomputeFrameHash=function(F){for(var U=F._transitionData._frameHash={},V=F._transitionData._frames,te=0;te<V.length;te++){var J=V[te];J&&J.name&&(U[J.name]=J)}},v.extendObjectWithContainers=function(F,U,V){var te,J,K,X,Z,$,re,oe=i.extendDeepNoArrays({},U||{}),ie=i.expandObjectPaths(oe),ue={};if(V&&V.length)for(K=0;K<V.length;K++)(J=(te=i.nestedProperty(ie,V[K])).get())===void 0?i.nestedProperty(ue,V[K]).set(null):(te.set(null),i.nestedProperty(ue,V[K]).set(J));if(F=i.extendDeepNoArrays(F||{},ie),V&&V.length){for(K=0;K<V.length;K++)if($=i.nestedProperty(ue,V[K]).get()){for(re=(Z=i.nestedProperty(F,V[K])).get(),Array.isArray(re)||(re=[],Z.set(re)),X=0;X<$.length;X++){var me=$[X];re[X]=me===null?null:v.extendObjectWithContainers(re[X],me)}Z.set(re)}}return F},v.dataArrayContainers=["transforms","dimensions"],v.layoutArrayContainers=h.layoutArrayContainers,v.extendTrace=function(F,U){return v.extendObjectWithContainers(F,U,v.dataArrayContainers)},v.extendLayout=function(F,U){return v.extendObjectWithContainers(F,U,v.layoutArrayContainers)},v.transition=function(F,U,V,te,J,K){var X={redraw:J.redraw},Z={},$=[];return X.prepareFn=function(){for(var re=Array.isArray(U)?U.length:0,oe=te.slice(0,re),ie=0;ie<oe.length;ie++){var ue=oe[ie],me=F._fullData[ue]._module;if(me){if(me.animatable){var be=me.basePlotModule.name;Z[be]||(Z[be]=[]),Z[be].push(ue)}F.data[oe[ie]]=v.extendTrace(F.data[oe[ie]],U[ie])}}var ge=i.expandObjectPaths(i.extendDeepNoArrays({},V)),de=/^[xy]axis[0-9]*$/;for(var ve in ge)de.test(ve)&&delete ge[ve].range;v.extendLayout(F.layout,ge),delete F.calcdata,v.supplyDefaults(F),v.doCalcdata(F);var pe=i.expandObjectPaths(V);if(pe){var _e=F._fullLayout._plots;for(var Te in _e){var le=_e[Te],ae=le.xaxis,he=le.yaxis,Se=ae.range.slice(),ke=he.range.slice(),Me=null,Ee=null,De=null,fe=null;Array.isArray(pe[ae._name+".range"])?Me=pe[ae._name+".range"].slice():Array.isArray((pe[ae._name]||{}).range)&&(Me=pe[ae._name].range.slice()),Array.isArray(pe[he._name+".range"])?Ee=pe[he._name+".range"].slice():Array.isArray((pe[he._name]||{}).range)&&(Ee=pe[he._name].range.slice()),Se&&Me&&(ae.r2l(Se[0])!==ae.r2l(Me[0])||ae.r2l(Se[1])!==ae.r2l(Me[1]))&&(De={xr0:Se,xr1:Me}),ke&&Ee&&(he.r2l(ke[0])!==he.r2l(Ee[0])||he.r2l(ke[1])!==he.r2l(Ee[1]))&&(fe={yr0:ke,yr1:Ee}),(De||fe)&&$.push(i.extendFlat({plotinfo:le},De,fe))}}return Promise.resolve()},X.runFn=function(re){var oe,ie,ue=F._fullLayout._basePlotModules,me=$.length;if(V)for(ie=0;ie<ue.length;ie++)ue[ie].transitionAxes&&ue[ie].transitionAxes(F,$,K,re);for(var be in me?((oe=i.extendFlat({},K)).duration=0,delete Z.cartesian):oe=K,Z){var ge=Z[be];F._fullData[ge[0]]._module.basePlotModule.plot(F,ge,oe,re)}},j(F,K,X)},v.transitionFromReact=function(F,U,V,te){var J=F._fullLayout,K=J.transition,X={},Z=[];return X.prepareFn=function(){var $=J._plots;for(var re in X.redraw=!1,U.anim==="some"&&(X.redraw=!0),V.anim==="some"&&(X.redraw=!0),$){var oe=$[re],ie=oe.xaxis,ue=oe.yaxis,me=te[ie._name].range.slice(),be=te[ue._name].range.slice(),ge=ie.range.slice(),de=ue.range.slice();ie.setScale(),ue.setScale();var ve=null,pe=null;ie.r2l(me[0])===ie.r2l(ge[0])&&ie.r2l(me[1])===ie.r2l(ge[1])||(ve={xr0:me,xr1:ge}),ue.r2l(be[0])===ue.r2l(de[0])&&ue.r2l(be[1])===ue.r2l(de[1])||(pe={yr0:be,yr1:de}),(ve||pe)&&Z.push(i.extendFlat({plotinfo:oe},ve,pe))}return Promise.resolve()},X.runFn=function($){for(var re,oe,ie,ue=F._fullData,me=F._fullLayout._basePlotModules,be=[],ge=0;ge<ue.length;ge++)be.push(ge);function de(){if(F._fullLayout)for(var pe=0;pe<me.length;pe++)me[pe].transitionAxes&&me[pe].transitionAxes(F,Z,re,$)}function ve(){if(F._fullLayout)for(var pe=0;pe<me.length;pe++)me[pe].plot(F,ie,oe,$)}Z.length&&U.anim?K.ordering==="traces first"?(re=i.extendFlat({},K,{duration:0}),ie=be,oe=K,setTimeout(de,K.duration),ve()):(re=K,ie=null,oe=i.extendFlat({},K,{duration:0}),setTimeout(ve,re.duration),de()):Z.length?(re=K,de()):U.anim&&(ie=be,oe=K,ve())},j(F,K,X)},v.doCalcdata=function(F,U){var V,te,J,K,X=a.list(F),Z=F._fullData,$=F._fullLayout,re=new Array(Z.length),oe=(F.calcdata||[]).slice();for(F.calcdata=re,$._numBoxes=0,$._numViolins=0,$._violinScaleGroupStats={},F._hmpixcount=0,F._hmlumcount=0,$._piecolormap={},$._sunburstcolormap={},$._treemapcolormap={},$._iciclecolormap={},$._funnelareacolormap={},J=0;J<Z.length;J++)Array.isArray(U)&&U.indexOf(J)===-1&&(re[J]=oe[J]);for(J=0;J<Z.length;J++)(V=Z[J])._arrayAttrs=s.findArrayAttributes(V),V._extremes={};var ie=$._subplots.polar||[];for(J=0;J<ie.length;J++)X.push($[ie[J]].radialaxis,$[ie[J]].angularaxis);for(var ue in $._colorAxes){var me=$[ue];me.cauto!==!1&&(delete me.cmin,delete me.cmax)}var be=!1;function ge(pe){if(V=Z[pe],te=V._module,V.visible===!0&&V.transforms){if(te&&te.calc){var _e=te.calc(F,V);_e[0]&&_e[0].t&&_e[0].t._scene&&delete _e[0].t._scene.dirty}for(K=0;K<V.transforms.length;K++){var Te=V.transforms[K];(te=m[Te.type])&&te.calcTransform&&(V._hasCalcTransform=!0,be=!0,te.calcTransform(F,V,Te))}}}function de(pe,_e){if(V=Z[pe],!!(te=V._module).isContainer===_e){var Te=[];if(V.visible===!0&&V._length!==0){delete V._indexToPoints;var le=V.transforms||[];for(K=le.length-1;K>=0;K--)if(le[K].enabled){V._indexToPoints=le[K]._indexToPoints;break}te&&te.calc&&(Te=te.calc(F,V))}Array.isArray(Te)&&Te[0]||(Te=[{x:r,y:r}]),Te[0].t||(Te[0].t={}),Te[0].trace=V,re[pe]=Te}}for(N(X,Z,$),J=0;J<Z.length;J++)de(J,!0);for(J=0;J<Z.length;J++)ge(J);for(be&&N(X,Z,$),J=0;J<Z.length;J++)de(J,!0);for(J=0;J<Z.length;J++)de(J,!1);W(F);var ve=function(pe,_e){var Te,le,ae,he,Se,ke=[];function Me(Ge,at,nt){var Re=at._id.charAt(0);if(Ge==="histogram2dcontour"){var Fe=at._counterAxes[0],rt=a.getFromId(_e,Fe),Ye=Re==="x"||Fe==="x"&&rt.type==="category",ct=Re==="y"||Fe==="y"&&rt.type==="category";return function(pt,gt){return pt===0||gt===0||Ye&&pt===nt[gt].length-1||ct&&gt===nt.length-1?-1:(Re==="y"?gt:pt)-1}}return function(pt,gt){return Re==="y"?gt:pt}}var Ee={min:function(Ge){return i.aggNums(Math.min,null,Ge)},max:function(Ge){return i.aggNums(Math.max,null,Ge)},sum:function(Ge){return i.aggNums(function(at,nt){return at+nt},null,Ge)},total:function(Ge){return i.aggNums(function(at,nt){return at+nt},null,Ge)},mean:function(Ge){return i.mean(Ge)},median:function(Ge){return i.median(Ge)}};function De(Ge,at){return Ge[1]-at[1]}function fe(Ge,at){return at[1]-Ge[1]}for(Te=0;Te<pe.length;Te++){var xe=pe[Te];if(xe.type==="category"){var we=xe.categoryorder.match(D);if(we){var Oe=we[1],ze=we[2],Pe=xe._id.charAt(0),Ue=Pe==="x",Ve=[];for(le=0;le<xe._categories.length;le++)Ve.push([xe._categories[le],[]]);for(le=0;le<xe._traceIndices.length;le++){var Ze=xe._traceIndices[le],it=_e._fullData[Ze];if(it.visible===!0){var tt=it.type;h.traceIs(it,"histogram")&&(delete it._xautoBinFinished,delete it._yautoBinFinished);var dt=tt==="splom",yt=tt==="scattergl",vt=_e.calcdata[Ze];for(ae=0;ae<vt.length;ae++){var et,Qe,wt=vt[ae];if(dt){var It=it._axesDim[xe._id];if(!Ue){var Dt=it._diag[It][0];Dt&&(xe=_e._fullLayout[a.id2name(Dt)])}var Ct=wt.trace.dimensions[It].values;for(he=0;he<Ct.length;he++)for(et=xe._categoriesMap[Ct[he]],Se=0;Se<wt.trace.dimensions.length;Se++)if(Se!==It){var He=wt.trace.dimensions[Se];Ve[et][1].push(He.values[he])}}else if(yt){for(he=0;he<wt.t.x.length;he++)Ue?(et=wt.t.x[he],Qe=wt.t.y[he]):(et=wt.t.y[he],Qe=wt.t.x[he]),Ve[et][1].push(Qe);wt.t&&wt.t._scene&&delete wt.t._scene.dirty}else if(wt.hasOwnProperty("z")){Qe=wt.z;var We=Me(it.type,xe,Qe);for(he=0;he<Qe.length;he++)for(Se=0;Se<Qe[he].length;Se++)(et=We(Se,he))+1&&Ve[et][1].push(Qe[he][Se])}else for((et=wt.p)===void 0&&(et=wt[Pe]),(Qe=wt.s)===void 0&&(Qe=wt.v),Qe===void 0&&(Qe=Ue?wt.y:wt.x),Array.isArray(Qe)||(Qe=Qe===void 0?[]:[Qe]),he=0;he<Qe.length;he++)Ve[et][1].push(Qe[he])}}}xe._categoriesValue=Ve;var Be=[];for(le=0;le<Ve.length;le++)Be.push([Ve[le][0],Ee[Oe](Ve[le][1])]);Be.sort(ze==="descending"?fe:De),xe._categoriesAggregatedValue=Be,xe._initialCategories=Be.map(function(Ge){return Ge[0]}),ke=ke.concat(xe.sortByInitialCategories())}}}return ke}(X,F);if(ve.length){for($._numBoxes=0,$._numViolins=0,J=0;J<ve.length;J++)de(ve[J],!0);for(J=0;J<ve.length;J++)de(ve[J],!1);W(F)}h.getComponentMethod("fx","calc")(F),h.getComponentMethod("errorbars","calc")(F)};var D=/(total|sum|min|max|mean|median) (ascending|descending)/;function N(F,U,V){var te={};function J($){$.clearCalc(),$.type==="multicategory"&&$.setupMultiCategory(U),te[$._id]=1}i.simpleMap(F,J);for(var K=V._axisMatchGroups||[],X=0;X<K.length;X++)for(var Z in K[X])te[Z]||J(V[a.id2name(Z)])}function W(F){var U,V,te,J=F._fullLayout,K=J._visibleModules,X={};for(V=0;V<K.length;V++){var Z=K[V],$=Z.crossTraceCalc;if($){var re=Z.basePlotModule.name;X[re]?i.pushUnique(X[re],$):X[re]=[$]}}for(te in X){var oe=X[te],ie=J._subplots[te];if(Array.isArray(ie))for(U=0;U<ie.length;U++){var ue=ie[U],me=te==="cartesian"?J._plots[ue]:J[ue];for(V=0;V<oe.length;V++)oe[V](F,me,ue)}else for(V=0;V<oe.length;V++)oe[V](F)}}v.rehover=function(F){F._fullLayout._rehover&&F._fullLayout._rehover()},v.redrag=function(F){F._fullLayout._redrag&&F._fullLayout._redrag()},v.reselect=function(F){var U=F._fullLayout,V=(F.layout||{}).selections,te=U._previousSelections;U._previousSelections=V;var J=U._reselect||JSON.stringify(V)!==JSON.stringify(te);h.getComponentMethod("selections","reselect")(F,J)},v.generalUpdatePerTraceModule=function(F,U,V,te){var J,K=U.traceHash,X={};for(J=0;J<V.length;J++){var Z=V[J],$=Z[0].trace;$.visible&&(X[$.type]=X[$.type]||[],X[$.type].push(Z))}for(var re in K)if(!X[re]){var oe=K[re][0];oe[0].trace.visible=!1,X[re]=[oe]}for(var ie in X){var ue=X[ie];ue[0][0].trace._module.plot(F,U,i.filterVisible(ue),te)}U.traceHash=X},v.plotBasePlot=function(F,U,V,te,J){var K=h.getModule(F),X=x(U.calcdata,K)[0];K.plot(U,X,te,J)},v.cleanBasePlot=function(F,U,V,te,J){var K=J._has&&J._has(F),X=V._has&&V._has(F);K&&!X&&J["_"+F+"layer"].selectAll("g.trace").remove()}},39360:function(ee){"use strict";ee.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(ee,z,e){"use strict";var M=e(3400),k=e(92065).tester,o=M.findIndexOfMin,T=M.isAngleInsideSector,b=M.angleDelta,h=M.angleDist;function s(r,a,l,u){var d,c,x=u[0],g=u[1],p=i(Math.sin(a)-Math.sin(r)),v=i(Math.cos(a)-Math.cos(r)),m=Math.tan(l),y=i(1/m),_=p/v,f=g-_*x;return y?p&&v?c=m*(d=f/(m-_)):v?(d=g*y,c=g):(d=x,c=x*m):p&&v?(d=0,c=f):v?(d=0,c=g):d=c=NaN,[d,c]}function t(r,a,l,u){return M.isFullCircle([a,l])?function(d,c){var x,g=c.length,p=new Array(g+1);for(x=0;x<g;x++){var v=c[x];p[x]=[d*Math.cos(v),d*Math.sin(v)]}return p[x]=p[0].slice(),p}(r,u):function(d,c,x,g){var p,v,m=g.length,y=[];function _(j){return[d*Math.cos(j),d*Math.sin(j)]}function f(j,D,N){return s(j,D,N,_(j))}function S(j){return M.mod(j,m)}function w(j){return T(j,[c,x])}var E=o(g,function(j){return w(j)?h(j,c):1/0}),P=f(g[E],g[S(E-1)],c);for(y.push(P),p=E,v=0;v<m;p++,v++){var C=g[S(p)];if(!w(C))break;y.push(_(C))}var O=o(g,function(j){return w(j)?h(j,x):1/0}),R=f(g[O],g[S(O+1)],x);return y.push(R),y.push([0,0]),y.push(y[0].slice()),y}(r,a,l,u)}function i(r){return Math.abs(r)>1e-10?r:0}function n(r,a,l){a=a||0,l=l||0;for(var u=r.length,d=new Array(u),c=0;c<u;c++){var x=r[c];d[c]=[a+x[0],l-x[1]]}return d}ee.exports={isPtInsidePolygon:function(r,a,l,u,d){if(!T(a,u))return!1;var c,x;l[0]<l[1]?(c=l[0],x=l[1]):(c=l[1],x=l[0]);var g=k(t(c,u[0],u[1],d)),p=k(t(x,u[0],u[1],d)),v=[r*Math.cos(a),r*Math.sin(a)];return p.contains(v)&&!g.contains(v)},findPolygonOffset:function(r,a,l,u){for(var d=1/0,c=1/0,x=t(r,a,l,u),g=0;g<x.length;g++){var p=x[g];d=Math.min(d,p[0]),c=Math.min(c,-p[1])}return[d,c]},findEnclosingVertexAngles:function(r,a){var l=o(a,function(d){var c=b(d,r);return c>0?c:1/0}),u=M.mod(l+1,a.length);return[a[l],a[u]]},findIntersectionXY:s,findXYatLength:function(r,a,l,u){var d=-a*l,c=a*a+1,x=2*(a*d-l),g=d*d+l*l-r*r,p=Math.sqrt(x*x-4*c*g),v=(-x+p)/(2*c),m=(-x-p)/(2*c);return[[v,a*v+d+u],[m,a*m+d+u]]},clampTiny:i,pathPolygon:function(r,a,l,u,d,c){return"M"+n(t(r,a,l,u),d,c).join("L")},pathPolygonAnnulus:function(r,a,l,u,d,c,x){var g,p;r<a?(g=r,p=a):(g=a,p=r);var v=n(t(g,l,u,d),c,x);return"M"+n(t(p,l,u,d),c,x).reverse().join("L")+"M"+v.join("L")}}},40872:function(ee,z,e){"use strict";var M=e(84888).KY,k=e(3400).counterRegex,o=e(62400),T=e(39360),b=T.attr,h=T.name,s=k(h),t={};t[b]={valType:"subplotid",dflt:h,editType:"calc"},ee.exports={attr:b,name:h,idRoot:h,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(95300),supplyLayoutDefaults:e(84380),plot:function(i){for(var n=i._fullLayout,r=i.calcdata,a=n._subplots[h],l=0;l<a.length;l++){var u=a[l],d=M(r,h,u),c=n[u]._subplot;c||(c=o(i,u),n[u]._subplot=c),c.plot(d,n,i._promises)}},clean:function(i,n,r,a){for(var l=a._subplots[h]||[],u=a._has&&a._has("gl"),d=n._has&&n._has("gl"),c=u&&!d,x=0;x<l.length;x++){var g=l[x],p=a[g]._subplot;if(!n[g]&&p)for(var v in p.framework.remove(),p.layers["radial-axis-title"].remove(),p.clipPaths)p.clipPaths[v].remove();c&&p._scene&&(p._scene.destroy(),p._scene=null)}},toSVG:e(57952).toSVG}},95300:function(ee,z,e){"use strict";var M=e(22548),k=e(94724),o=e(86968).u,T=e(3400).extendFlat,b=e(67824).overrideAll,h=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({tickmode:k.minor.tickmode,nticks:k.nticks,tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,layer:k.layer},"plot","from-root"),t={visible:T({},k.visible,{dflt:!0}),type:T({},k.type,{values:["-","linear","log","date","category"]}),autotypenumbers:k.autotypenumbers,autorangeoptions:{minallowed:k.autorangeoptions.minallowed,maxallowed:k.autorangeoptions.maxallowed,clipmin:k.autorangeoptions.clipmin,clipmax:k.autorangeoptions.clipmax,include:k.autorangeoptions.include,editType:"plot"},autorange:T({},k.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:T({},k.minallowed,{editType:"plot"}),maxallowed:T({},k.maxallowed,{editType:"plot"}),range:T({},k.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:k.categoryorder,categoryarray:k.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:k.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},k.title.text,{editType:"plot",dflt:""}),font:T({},k.title.font,{editType:"plot"}),editType:"plot"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}};T(t,h,s);var i={visible:T({},k.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:k.autotypenumbers,categoryorder:k.categoryorder,categoryarray:k.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:k.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(i,h,s),ee.exports={domain:o({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:M.background},radialaxis:t,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(ee,z,e){"use strict";var M=e(3400),k=e(76308),o=e(31780),T=e(168),b=e(84888).op,h=e(26332),s=e(25404),t=e(95936),i=e(42568),n=e(22416),r=e(42136),a=e(76808),l=e(52976),u=e(95300),d=e(57696),c=e(39360),x=c.axisNames;function g(v,m,y,_){var f=y("bgcolor");_.bgColor=k.combine(f,_.paper_bgcolor);var S=y("sector");y("hole");var w,E=b(_.fullData,c.name,_.id),P=_.layoutOut;function C(ie,ue){return y(w+"."+ie,ue)}for(var O=0;O<x.length;O++){w=x[O],M.isPlainObject(v[w])||(v[w]={});var R=v[w],j=o.newContainer(m,w);j._id=j._name=w,j._attr=_.id+"."+w,j._traceIndices=E.map(function(ie){return ie._expandedIndex});var D=c.axisName2dataArray[w],N=p(R,j,C,E,D,_);n(R,j,C,{axData:E,dataAttr:D});var W=C("visible");switch(d(j,m,P),C("uirevision",m.uirevision),j._m=1,w){case"radialaxis":C("minallowed"),C("maxallowed");var F,U=C("range"),V=j.getAutorangeDflt(U),te=C("autorange",V);!U||(U[0]!==null||U[1]!==null)&&(U[0]!==null&&U[1]!==null||te!=="reversed"&&te!==!0)&&(U[0]===null||te!=="min"&&te!=="max reversed")&&(U[1]===null||te!=="max"&&te!=="min reversed")||(U=void 0,delete j.range,j.autorange=!0,F=!0),F||(te=C("autorange",V=j.getAutorangeDflt(U))),R.autorange=te,te&&(a(C,te,U),N!=="linear"&&N!=="-"||C("rangemode"),j.isReversed()&&(j._m=-1)),j.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(N==="date"){M.log("Polar plots do not support date angular axes yet.");for(var J=0;J<E.length;J++)E[J].visible=!1;N=R.type=j.type="linear"}C(N==="linear"?"thetaunit":"period");var K=C("direction");C("rotation",{counterclockwise:0,clockwise:90}[K])}if(i(R,j,C,j.type,{tickSuffixDflt:j.thetaunit==="degrees"?"\xB0":void 0}),W){var X,Z,$,re,oe=_.font||{};Z=(X=C("color"))===R.color?X:oe.color,$=oe.size,re=oe.family,h(R,j,C,j.type),t(R,j,C,j.type,{font:{color:Z,size:$,family:re},noAutotickangles:w==="angularaxis"}),s(R,j,C,{outerTicks:!0}),r(R,j,C,{dfltColor:X,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[w]}),C("layer"),w==="radialaxis"&&(C("side"),C("angle",S[0]),C("title.text"),M.coerceFont(C,"title.font",{color:Z,size:M.bigFont($),family:re}))}N!=="category"&&C("hoverformat"),j._input=R}m.angularaxis.type==="category"&&y("gridshape")}function p(v,m,y,_,f,S){var w=y("autotypenumbers",S.autotypenumbersDflt);if(y("type")==="-"){for(var E,P=0;P<_.length;P++)if(_[P].visible){E=_[P];break}E&&E[f]&&(m.type=l(E[f],"gregorian",{noMultiCategory:!0,autotypenumbers:w})),m.type==="-"?m.type="linear":v.type=m.type}return m.type}ee.exports=function(v,m,y){T(v,m,y,{type:c.name,attributes:u,handleDefaults:g,font:m.font,autotypenumbersDflt:m.autotypenumbers,paper_bgcolor:m.paper_bgcolor,fullData:y,layoutOut:m})}},62400:function(ee,z,e){"use strict";var M=e(33428),k=e(49760),o=e(24040),T=e(3400),b=T.strRotate,h=T.strTranslate,s=e(76308),t=e(43616),i=e(7316),n=e(54460),r=e(78344),a=e(57696),l=e(19280).doAutoRange,u=e(51184),d=e(86476),c=e(93024),x=e(81668),g=e(22676).prepSelect,p=e(22676).selectOnClick,v=e(22676).clearOutline,m=e(93972),y=e(73696),_=e(39172).redrawReglTraces,f=e(84284).MID_SHIFT,S=e(39360),w=e(57384),E=e(36416),P=E.smith,C=E.reactanceArc,O=E.resistanceArc,R=E.smithTransform,j=T._,D=T.mod,N=T.deg2rad,W=T.rad2deg;function F(K,X,Z){this.isSmith=Z||!1,this.id=X,this.gd=K,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var $=K._fullLayout,re="clip"+$._uid+X;this.clipIds.forTraces=re+"-for-traces",this.clipPaths.forTraces=$._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=$["_"+(Z?"smith":"polar")+"layer"].append("g").attr("class",X),this.getHole=function(oe){return this.isSmith?0:oe.hole},this.getSector=function(oe){return this.isSmith?[0,360]:oe.sector},this.getRadial=function(oe){return this.isSmith?oe.realaxis:oe.radialaxis},this.getAngular=function(oe){return this.isSmith?oe.imaginaryaxis:oe.angularaxis},Z||(this.radialTickLayout=null,this.angularTickLayout=null)}var U=F.prototype;function V(K){var X=K.ticks+String(K.ticklen)+String(K.showticklabels);return"side"in K&&(X+=K.side),X}function te(K,X){return X[T.findIndexOfMin(X,function(Z){return T.angleDist(K,Z)})]}function J(K,X,Z){return X?(K.attr("display",null),K.attr(Z)):K&&K.attr("display","none"),K}ee.exports=function(K,X,Z){return new F(K,X,Z)},U.plot=function(K,X){for(var Z=this,$=X[Z.id],re=!1,oe=0;oe<K.length;oe++)if(K[oe][0].trace.cliponaxis===!1){re=!0;break}Z._hasClipOnAxisFalse=re,Z.updateLayers(X,$),Z.updateLayout(X,$),i.generalUpdatePerTraceModule(Z.gd,Z,K,$),Z.updateFx(X,$),Z.isSmith&&(delete $.realaxis.range,delete $.imaginaryaxis.range)},U.updateLayers=function(K,X){var Z=this,$=Z.isSmith,re=Z.layers,oe=Z.getRadial(X),ie=Z.getAngular(X),ue=S.layerNames,me=ue.indexOf("frontplot"),be=ue.slice(0,me),ge=ie.layer==="below traces",de=oe.layer==="below traces";ge&&be.push("angular-line"),de&&be.push("radial-line"),ge&&be.push("angular-axis"),de&&be.push("radial-axis"),be.push("frontplot"),ge||be.push("angular-line"),de||be.push("radial-line"),ge||be.push("angular-axis"),de||be.push("radial-axis");var ve=($?"smith":"polar")+"sublayer",pe=Z.framework.selectAll("."+ve).data(be,String);pe.enter().append("g").attr("class",function(_e){return ve+" "+_e}).each(function(_e){var Te=re[_e]=M.select(this);switch(_e){case"frontplot":$||Te.append("g").classed("barlayer",!0),Te.append("g").classed("scatterlayer",!0);break;case"backplot":Te.append("g").classed("maplayer",!0);break;case"plotbg":re.bg=Te.append("path");break;case"radial-grid":case"angular-grid":Te.style("fill","none");break;case"radial-line":Te.append("line").style("fill","none");break;case"angular-line":Te.append("path").style("fill","none")}}),pe.order()},U.updateLayout=function(K,X){var Z=this,$=Z.layers,re=K._size,oe=Z.getRadial(X),ie=Z.getAngular(X),ue=X.domain.x,me=X.domain.y;Z.xOffset=re.l+re.w*ue[0],Z.yOffset=re.t+re.h*(1-me[1]);var be=Z.xLength=re.w*(ue[1]-ue[0]),ge=Z.yLength=re.h*(me[1]-me[0]),de=Z.getSector(X);Z.sectorInRad=de.map(N);var ve,pe,_e,Te,le,ae=Z.sectorBBox=function(it){var tt,dt=it[0],yt=it[1]-dt,vt=D(dt,360),et=vt+yt,Qe=Math.cos(N(vt)),wt=Math.sin(N(vt)),It=Math.cos(N(et)),Dt=Math.sin(N(et));return tt=vt<=90&&et>=90||vt>90&&et>=450?1:wt<=0&&Dt<=0?0:Math.max(wt,Dt),[vt<=180&&et>=180||vt>180&&et>=540?-1:Qe>=0&&It>=0?0:Math.min(Qe,It),vt<=270&&et>=270||vt>270&&et>=630?-1:wt>=0&&Dt>=0?0:Math.min(wt,Dt),et>=360?1:Qe<=0&&It<=0?0:Math.max(Qe,It),tt]}(de),he=ae[2]-ae[0],Se=ae[3]-ae[1],ke=ge/be,Me=Math.abs(Se/he);ke>Me?(ve=be,le=(ge-(pe=be*Me))/re.h/2,_e=[ue[0],ue[1]],Te=[me[0]+le,me[1]-le]):(pe=ge,le=(be-(ve=ge/Me))/re.w/2,_e=[ue[0]+le,ue[1]-le],Te=[me[0],me[1]]),Z.xLength2=ve,Z.yLength2=pe,Z.xDomain2=_e,Z.yDomain2=Te;var Ee,De=Z.xOffset2=re.l+re.w*_e[0],fe=Z.yOffset2=re.t+re.h*(1-Te[1]),xe=Z.radius=ve/he,we=Z.innerRadius=Z.getHole(X)*xe,Oe=Z.cx=De-xe*ae[0],ze=Z.cy=fe+xe*ae[3],Pe=Z.cxx=Oe-De,Ue=Z.cyy=ze-fe,Ve=oe.side;Ve==="counterclockwise"?(Ee=Ve,Ve="top"):Ve==="clockwise"&&(Ee=Ve,Ve="bottom"),Z.radialAxis=Z.mockAxis(K,X,oe,{_id:"x",side:Ve,_trueSide:Ee,domain:[we/re.w,xe/re.w]}),Z.angularAxis=Z.mockAxis(K,X,ie,{side:"right",domain:[0,Math.PI],autorange:!1}),Z.doAutoRange(K,X),Z.updateAngularAxis(K,X),Z.updateRadialAxis(K,X),Z.updateRadialAxisTitle(K,X),Z.xaxis=Z.mockCartesianAxis(K,X,{_id:"x",domain:_e}),Z.yaxis=Z.mockCartesianAxis(K,X,{_id:"y",domain:Te});var Ze=Z.pathSubplot();Z.clipPaths.forTraces.select("path").attr("d",Ze).attr("transform",h(Pe,Ue)),$.frontplot.attr("transform",h(De,fe)).call(t.setClipUrl,Z._hasClipOnAxisFalse?null:Z.clipIds.forTraces,Z.gd),$.bg.attr("d",Ze).attr("transform",h(Oe,ze)).call(s.fill,X.bgcolor)},U.mockAxis=function(K,X,Z,$){var re=T.extendFlat({},Z,$);return a(re,X,K),re},U.mockCartesianAxis=function(K,X,Z){var $=this,re=$.isSmith,oe=Z._id,ie=T.extendFlat({type:"linear"},Z);r(ie,K);var ue={x:[0,2],y:[1,3]};return ie.setRange=function(){var me=$.sectorBBox,be=ue[oe],ge=$.radialAxis._rl,de=(ge[1]-ge[0])/(1-$.getHole(X));ie.range=[me[be[0]]*de,me[be[1]]*de]},ie.isPtWithinRange=oe!=="x"||re?function(){return!0}:function(me){return $.isPtInside(me)},ie.setRange(),ie.setScale(),ie},U.doAutoRange=function(K,X){var Z=this,$=Z.gd,re=Z.radialAxis,oe=Z.getRadial(X);l($,re);var ie=re.range;if(oe.range=ie.slice(),oe._input.range=ie.slice(),re._rl=[re.r2l(ie[0],null,"gregorian"),re.r2l(ie[1],null,"gregorian")],re.minallowed!==void 0){var ue=re.r2l(re.minallowed);re._rl[0]>re._rl[1]?re._rl[1]=Math.max(re._rl[1],ue):re._rl[0]=Math.max(re._rl[0],ue)}if(re.maxallowed!==void 0){var me=re.r2l(re.maxallowed);re._rl[0]<re._rl[1]?re._rl[1]=Math.min(re._rl[1],me):re._rl[0]=Math.min(re._rl[0],me)}},U.updateRadialAxis=function(K,X){var Z=this,$=Z.gd,re=Z.layers,oe=Z.radius,ie=Z.innerRadius,ue=Z.cx,me=Z.cy,be=Z.getRadial(X),ge=D(Z.getSector(X)[0],360),de=Z.radialAxis,ve=ie<oe,pe=Z.isSmith;pe||(Z.fillViewInitialKey("radialaxis.angle",be.angle),Z.fillViewInitialKey("radialaxis.range",de.range.slice()),de.setGeometry()),de.tickangle==="auto"&&ge>90&&ge<=270&&(de.tickangle=180);var _e=pe?function(fe){var xe=R(Z,P([fe.x,0]));return h(xe[0]-ue,xe[1]-me)}:function(fe){return h(de.l2p(fe.x)+ie,0)},Te=pe?function(fe){return O(Z,fe.x,-1/0,1/0)}:function(fe){return Z.pathArc(de.r2p(fe.x)+ie)},le=V(be);if(Z.radialTickLayout!==le&&(re["radial-axis"].selectAll(".xtick").remove(),Z.radialTickLayout=le),ve){de.setScale();var ae=0,he=pe?(de.tickvals||[]).filter(function(fe){return fe>=0}).map(function(fe){return n.tickText(de,fe,!0,!1)}):n.calcTicks(de),Se=pe?he:n.clipEnds(de,he),ke=n.getTickSigns(de)[2];pe&&((de.ticks==="top"&&de.side==="bottom"||de.ticks==="bottom"&&de.side==="top")&&(ke=-ke),de.ticks==="top"&&de.side==="top"&&(ae=-de.ticklen),de.ticks==="bottom"&&de.side==="bottom"&&(ae=de.ticklen)),n.drawTicks($,de,{vals:he,layer:re["radial-axis"],path:n.makeTickPath(de,0,ke),transFn:_e,crisp:!1}),n.drawGrid($,de,{vals:Se,layer:re["radial-grid"],path:Te,transFn:T.noop,crisp:!1}),n.drawLabels($,de,{vals:he,layer:re["radial-axis"],transFn:_e,labelFns:n.makeLabelFns(de,ae)})}var Me=Z.radialAxisAngle=Z.vangles?W(te(N(be.angle),Z.vangles)):be.angle,Ee=h(ue,me),De=Ee+b(-Me);J(re["radial-axis"],ve&&(be.showticklabels||be.ticks),{transform:De}),J(re["radial-grid"],ve&&be.showgrid,{transform:pe?"":Ee}),J(re["radial-line"].select("line"),ve&&be.showline,{x1:pe?-oe:ie,y1:0,x2:oe,y2:0,transform:De}).attr("stroke-width",be.linewidth).call(s.stroke,be.linecolor)},U.updateRadialAxisTitle=function(K,X,Z){if(!this.isSmith){var $=this,re=$.gd,oe=$.radius,ie=$.cx,ue=$.cy,me=$.getRadial(X),be=$.id+"title",ge=0;if(me.title){var de=t.bBox($.layers["radial-axis"].node()).height,ve=me.title.font.size,pe=me.side;ge=pe==="top"?ve:pe==="counterclockwise"?-(de+.4*ve):de+.8*ve}var _e=Z!==void 0?Z:$.radialAxisAngle,Te=N(_e),le=Math.cos(Te),ae=Math.sin(Te),he=ie+oe/2*le+ge*ae,Se=ue-oe/2*ae+ge*le;$.layers["radial-axis-title"]=x.draw(re,be,{propContainer:me,propName:$.id+".radialaxis.title",placeholder:j(re,"Click to enter radial axis title"),attributes:{x:he,y:Se,"text-anchor":"middle"},transform:{rotate:-_e}})}},U.updateAngularAxis=function(K,X){var Z=this,$=Z.gd,re=Z.layers,oe=Z.radius,ie=Z.innerRadius,ue=Z.cx,me=Z.cy,be=Z.getAngular(X),ge=Z.angularAxis,de=Z.isSmith;de||(Z.fillViewInitialKey("angularaxis.rotation",be.rotation),ge.setGeometry(),ge.setScale());var ve=de?function(fe){var xe=R(Z,P([0,fe.x]));return Math.atan2(xe[0]-ue,xe[1]-me)-Math.PI/2}:function(fe){return ge.t2g(fe.x)};ge.type==="linear"&&ge.thetaunit==="radians"&&(ge.tick0=W(ge.tick0),ge.dtick=W(ge.dtick));var pe=function(fe){return h(ue+oe*Math.cos(fe),me-oe*Math.sin(fe))},_e=de?function(fe){var xe=R(Z,P([0,fe.x]));return h(xe[0],xe[1])}:function(fe){return pe(ve(fe))},Te=de?function(fe){var xe=R(Z,P([0,fe.x])),we=Math.atan2(xe[0]-ue,xe[1]-me)-Math.PI/2;return h(xe[0],xe[1])+b(-W(we))}:function(fe){var xe=ve(fe);return pe(xe)+b(-W(xe))},le=de?function(fe){return C(Z,fe.x,0,1/0)}:function(fe){var xe=ve(fe),we=Math.cos(xe),Oe=Math.sin(xe);return"M"+[ue+ie*we,me-ie*Oe]+"L"+[ue+oe*we,me-oe*Oe]},ae=n.makeLabelFns(ge,0).labelStandoff,he={xFn:function(fe){var xe=ve(fe);return Math.cos(xe)*ae},yFn:function(fe){var xe=ve(fe),we=Math.sin(xe)>0?.2:1;return-Math.sin(xe)*(ae+fe.fontSize*we)+Math.abs(Math.cos(xe))*(fe.fontSize*f)},anchorFn:function(fe){var xe=ve(fe),we=Math.cos(xe);return Math.abs(we)<.1?"middle":we>0?"start":"end"},heightFn:function(fe,xe,we){var Oe=ve(fe);return-.5*(1+Math.sin(Oe))*we}},Se=V(be);Z.angularTickLayout!==Se&&(re["angular-axis"].selectAll("."+ge._id+"tick").remove(),Z.angularTickLayout=Se);var ke,Me=de?[1/0].concat(ge.tickvals||[]).map(function(fe){return n.tickText(ge,fe,!0,!1)}):n.calcTicks(ge);if(de&&(Me[0].text="\u221E",Me[0].fontSize*=1.75),X.gridshape==="linear"?(ke=Me.map(ve),T.angleDelta(ke[0],ke[1])<0&&(ke=ke.slice().reverse())):ke=null,Z.vangles=ke,ge.type==="category"&&(Me=Me.filter(function(fe){return T.isAngleInsideSector(ve(fe),Z.sectorInRad)})),ge.visible){var Ee=ge.ticks==="inside"?-1:1,De=(ge.linewidth||1)/2;n.drawTicks($,ge,{vals:Me,layer:re["angular-axis"],path:"M"+Ee*De+",0h"+Ee*ge.ticklen,transFn:Te,crisp:!1}),n.drawGrid($,ge,{vals:Me,layer:re["angular-grid"],path:le,transFn:T.noop,crisp:!1}),n.drawLabels($,ge,{vals:Me,layer:re["angular-axis"],repositionOnUpdate:!0,transFn:_e,labelFns:he})}J(re["angular-line"].select("path"),be.showline,{d:Z.pathSubplot(),transform:h(ue,me)}).attr("stroke-width",be.linewidth).call(s.stroke,be.linecolor)},U.updateFx=function(K,X){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(K),this.updateRadialDrag(K,X,0),this.updateRadialDrag(K,X,1)),this.updateHoverAndMainDrag(K))},U.updateHoverAndMainDrag=function(K){var X,Z,$=this,re=$.isSmith,oe=$.gd,ie=$.layers,ue=K._zoomlayer,me=S.MINZOOM,be=S.OFFEDGE,ge=$.radius,de=$.innerRadius,ve=$.cx,pe=$.cy,_e=$.cxx,Te=$.cyy,le=$.sectorInRad,ae=$.vangles,he=$.radialAxis,Se=w.clampTiny,ke=w.findXYatLength,Me=w.findEnclosingVertexAngles,Ee=S.cornerHalfWidth,De=S.cornerLen/2,fe=u.makeDragger(ie,"path","maindrag",K.dragmode===!1?"none":"crosshair");M.select(fe).attr("d",$.pathSubplot()).attr("transform",h(ve,pe)),fe.onmousemove=function(nt){c.hover(oe,nt,$.id),oe._fullLayout._lasthover=fe,oe._fullLayout._hoversubplot=$.id},fe.onmouseout=function(nt){oe._dragging||d.unhover(oe,nt)};var xe,we,Oe,ze,Pe,Ue,Ve,Ze,it,tt={element:fe,gd:oe,subplot:$.id,plotinfo:{id:$.id,xaxis:$.xaxis,yaxis:$.yaxis},xaxes:[$.xaxis],yaxes:[$.yaxis]};function dt(nt,Re){return Math.sqrt(nt*nt+Re*Re)}function yt(nt,Re){return dt(nt-_e,Re-Te)}function vt(nt,Re){return Math.atan2(Te-Re,nt-_e)}function et(nt,Re){return[nt*Math.cos(Re),nt*Math.sin(-Re)]}function Qe(nt,Re){if(nt===0)return $.pathSector(2*Ee);var Fe=De/nt,rt=Re-Fe,Ye=Re+Fe,ct=Math.max(0,Math.min(nt,ge)),pt=ct-Ee,gt=ct+Ee;return"M"+et(pt,rt)+"A"+[pt,pt]+" 0,0,0 "+et(pt,Ye)+"L"+et(gt,Ye)+"A"+[gt,gt]+" 0,0,1 "+et(gt,rt)+"Z"}function wt(nt,Re,Fe){if(nt===0)return $.pathSector(2*Ee);var rt,Ye,ct=et(nt,Re),pt=et(nt,Fe),gt=Se((ct[0]+pt[0])/2),ut=Se((ct[1]+pt[1])/2);if(gt&&ut){var Mt=ut/gt,xt=-1/Mt,mt=ke(Ee,Mt,gt,ut);rt=ke(De,xt,mt[0][0],mt[0][1]),Ye=ke(De,xt,mt[1][0],mt[1][1])}else{var Et,Lt;ut?(Et=De,Lt=Ee):(Et=Ee,Lt=De),rt=[[gt-Et,ut-Lt],[gt+Et,ut-Lt]],Ye=[[gt-Et,ut+Lt],[gt+Et,ut+Lt]]}return"M"+rt.join("L")+"L"+Ye.reverse().join("L")+"Z"}function It(nt,Re){return Re=Math.max(Math.min(Re,ge),de),nt<be?nt=0:ge-nt<be?nt=ge:Re<be?Re=0:ge-Re<be&&(Re=ge),Math.abs(Re-nt)>me?(nt<Re?(Oe=nt,ze=Re):(Oe=Re,ze=nt),!0):(Oe=null,ze=null,!1)}function Dt(nt,Re){nt=nt||Pe,Re=Re||"M0,0Z",Ze.attr("d",nt),it.attr("d",Re),u.transitionZoombox(Ze,it,Ue,Ve),Ue=!0;var Fe={};Ge(Fe),oe.emit("plotly_relayouting",Fe)}function Ct(nt,Re){var Fe,rt,Ye=xe+(nt*=X),ct=we+(Re*=Z),pt=yt(xe,we),gt=Math.min(yt(Ye,ct),ge),ut=vt(xe,we);It(pt,gt)&&(Fe=Pe+$.pathSector(ze),Oe&&(Fe+=$.pathSector(Oe)),rt=Qe(Oe,ut)+Qe(ze,ut)),Dt(Fe,rt)}function He(nt,Re,Fe,rt){var Ye=w.findIntersectionXY(Fe,rt,Fe,[nt-_e,Te-Re]);return dt(Ye[0],Ye[1])}function We(nt,Re){var Fe,rt,Ye=xe+nt,ct=we+Re,pt=vt(xe,we),gt=vt(Ye,ct),ut=Me(pt,ae),Mt=Me(gt,ae);It(He(xe,we,ut[0],ut[1]),Math.min(He(Ye,ct,Mt[0],Mt[1]),ge))&&(Fe=Pe+$.pathSector(ze),Oe&&(Fe+=$.pathSector(Oe)),rt=[wt(Oe,ut[0],ut[1]),wt(ze,ut[0],ut[1])].join(" ")),Dt(Fe,rt)}function Be(){if(u.removeZoombox(oe),Oe!==null&&ze!==null){var nt={};Ge(nt),u.showDoubleClickNotifier(oe),o.call("_guiRelayout",oe,nt)}}function Ge(nt){var Re=he._rl,Fe=(Re[1]-Re[0])/(1-de/ge)/ge,rt=[Re[0]+(Oe-de)*Fe,Re[0]+(ze-de)*Fe];nt[$.id+".radialaxis.range"]=rt}function at(nt,Re){var Fe=oe._fullLayout.clickmode;if(u.removeZoombox(oe),nt===2){var rt={};for(var Ye in $.viewInitial)rt[$.id+"."+Ye]=$.viewInitial[Ye];oe.emit("plotly_doubleclick",null),o.call("_guiRelayout",oe,rt)}Fe.indexOf("select")>-1&&nt===1&&p(Re,oe,[$.xaxis],[$.yaxis],$.id,tt),Fe.indexOf("event")>-1&&c.click(oe,Re,$.id)}tt.prepFn=function(nt,Re,Fe){var rt=oe._fullLayout.dragmode,Ye=fe.getBoundingClientRect();oe._fullLayout._calcInverseTransform(oe);var ct=oe._fullLayout._invTransform;X=oe._fullLayout._invScaleX,Z=oe._fullLayout._invScaleY;var pt=T.apply3DTransform(ct)(Re-Ye.left,Fe-Ye.top);if(xe=pt[0],we=pt[1],ae){var gt=w.findPolygonOffset(ge,le[0],le[1],ae);xe+=_e+gt[0],we+=Te+gt[1]}switch(rt){case"zoom":tt.clickFn=at,re||(tt.moveFn=ae?We:Ct,tt.doneFn=Be,function(){Oe=null,ze=null,Pe=$.pathSubplot(),Ue=!1;var ut=oe._fullLayout[$.id];Ve=k(ut.bgcolor).getLuminance(),(Ze=u.makeZoombox(ue,Ve,ve,pe,Pe)).attr("fill-rule","evenodd"),it=u.makeCorners(ue,ve,pe),v(oe)}());break;case"select":case"lasso":g(nt,Re,Fe,tt,rt)}},d.init(tt)},U.updateRadialDrag=function(K,X,Z){var $=this,re=$.gd,oe=$.layers,ie=$.radius,ue=$.innerRadius,me=$.cx,be=$.cy,ge=$.radialAxis,de=S.radialDragBoxSize,ve=de/2;if(ge.visible){var pe,_e,Te,le=N($.radialAxisAngle),ae=ge._rl,he=ae[0],Se=ae[1],ke=ae[Z],Me=.75*(ae[1]-ae[0])/(1-$.getHole(X))/ie;Z?(pe=me+(ie+ve)*Math.cos(le),_e=be-(ie+ve)*Math.sin(le),Te="radialdrag"):(pe=me+(ue-ve)*Math.cos(le),_e=be-(ue-ve)*Math.sin(le),Te="radialdrag-inner");var Ee,De,fe,xe=u.makeRectDragger(oe,Te,"crosshair",-ve,-ve,de,de),we={element:xe,gd:re};K.dragmode===!1&&(we.dragmode=!1),J(M.select(xe),ge.visible&&ue<ie,{transform:h(pe,_e)}),we.prepFn=function(){Ee=null,De=null,fe=null,we.moveFn=Oe,we.doneFn=ze,v(re)},we.clampFn=function(Ve,Ze){return Math.sqrt(Ve*Ve+Ze*Ze)<S.MINDRAG&&(Ve=0,Ze=0),[Ve,Ze]},d.init(we)}function Oe(Ve,Ze){if(Ee)Ee(Ve,Ze);else{var it=[Ve,-Ze],tt=[Math.cos(le),Math.sin(le)],dt=Math.abs(T.dot(it,tt)/Math.sqrt(T.dot(it,it)));isNaN(dt)||(Ee=dt<.5?Pe:Ue)}var yt={};(function(vt){De!==null?vt[$.id+".radialaxis.angle"]=De:fe!==null&&(vt[$.id+".radialaxis.range["+Z+"]"]=fe)})(yt),re.emit("plotly_relayouting",yt)}function ze(){De!==null?o.call("_guiRelayout",re,$.id+".radialaxis.angle",De):fe!==null&&o.call("_guiRelayout",re,$.id+".radialaxis.range["+Z+"]",fe)}function Pe(Ve,Ze){if(Z!==0){var it=pe+Ve,tt=_e+Ze;De=Math.atan2(be-tt,it-me),$.vangles&&(De=te(De,$.vangles)),De=W(De);var dt=h(me,be)+b(-De);oe["radial-axis"].attr("transform",dt),oe["radial-line"].select("line").attr("transform",dt);var yt=$.gd._fullLayout,vt=yt[$.id];$.updateRadialAxisTitle(yt,vt,De)}}function Ue(Ve,Ze){var it=T.dot([Ve,-Ze],[Math.cos(le),Math.sin(le)]);if(fe=ke-Me*it,Me>0==(Z?fe>he:fe<Se)){var tt=re._fullLayout,dt=tt[$.id];ge.range[Z]=fe,ge._rl[Z]=fe,$.updateRadialAxis(tt,dt),$.xaxis.setRange(),$.xaxis.setScale(),$.yaxis.setRange(),$.yaxis.setScale();var yt=!1;for(var vt in $.traceHash){var et=$.traceHash[vt],Qe=T.filterVisible(et);et[0][0].trace._module.plot(re,$,Qe,dt),o.traceIs(vt,"gl")&&Qe.length&&(yt=!0)}yt&&(y(re),_(re))}else fe=null}},U.updateAngularDrag=function(K){var X=this,Z=X.gd,$=X.layers,re=X.radius,oe=X.angularAxis,ie=X.cx,ue=X.cy,me=X.cxx,be=X.cyy,ge=S.angularDragBoxSize,de=u.makeDragger($,"path","angulardrag",K.dragmode===!1?"none":"move"),ve={element:de,gd:Z};function pe(we,Oe){return Math.atan2(be+ge-Oe,we-me-ge)}K.dragmode===!1?ve.dragmode=!1:M.select(de).attr("d",X.pathAnnulus(re,re+ge)).attr("transform",h(ie,ue)).call(m,"move");var _e,Te,le,ae,he,Se,ke=$.frontplot.select(".scatterlayer").selectAll(".trace"),Me=ke.selectAll(".point"),Ee=ke.selectAll(".textpoint");function De(we,Oe){var ze=X.gd._fullLayout,Pe=ze[X.id],Ue=pe(_e+we*K._invScaleX,Te+Oe*K._invScaleY),Ve=W(Ue-Se);if(ae=le+Ve,$.frontplot.attr("transform",h(X.xOffset2,X.yOffset2)+b([-Ve,me,be])),X.vangles){he=X.radialAxisAngle+Ve;var Ze=h(ie,ue)+b(-Ve),it=h(ie,ue)+b(-he);$.bg.attr("transform",Ze),$["radial-grid"].attr("transform",Ze),$["radial-axis"].attr("transform",it),$["radial-line"].select("line").attr("transform",it),X.updateRadialAxisTitle(ze,Pe,he)}else X.clipPaths.forTraces.select("path").attr("transform",h(me,be)+b(Ve));Me.each(function(){var Qe=M.select(this),wt=t.getTranslate(Qe);Qe.attr("transform",h(wt.x,wt.y)+b([Ve]))}),Ee.each(function(){var Qe=M.select(this),wt=Qe.select("text"),It=t.getTranslate(Qe);Qe.attr("transform",b([Ve,wt.attr("x"),wt.attr("y")])+h(It.x,It.y))}),oe.rotation=T.modHalf(ae,360),X.updateAngularAxis(ze,Pe),X._hasClipOnAxisFalse&&!T.isFullCircle(X.sectorInRad)&&ke.call(t.hideOutsideRangePoints,X);var tt=!1;for(var dt in X.traceHash)if(o.traceIs(dt,"gl")){var yt=X.traceHash[dt],vt=T.filterVisible(yt);yt[0][0].trace._module.plot(Z,X,vt,Pe),vt.length&&(tt=!0)}tt&&(y(Z),_(Z));var et={};fe(et),Z.emit("plotly_relayouting",et)}function fe(we){we[X.id+".angularaxis.rotation"]=ae,X.vangles&&(we[X.id+".radialaxis.angle"]=he)}function xe(){Ee.select("text").attr("transform",null);var we={};fe(we),o.call("_guiRelayout",Z,we)}ve.prepFn=function(we,Oe,ze){var Pe=K[X.id];le=Pe.angularaxis.rotation;var Ue=de.getBoundingClientRect();_e=Oe-Ue.left,Te=ze-Ue.top,Z._fullLayout._calcInverseTransform(Z);var Ve=T.apply3DTransform(K._invTransform)(_e,Te);_e=Ve[0],Te=Ve[1],Se=pe(_e,Te),ve.moveFn=De,ve.doneFn=xe,v(Z)},X.vangles&&!T.isFullCircle(X.sectorInRad)&&(ve.prepFn=T.noop,m(M.select(de),null)),d.init(ve)},U.isPtInside=function(K){if(this.isSmith)return!0;var X=this.sectorInRad,Z=this.vangles,$=this.angularAxis.c2g(K.theta),re=this.radialAxis,oe=re.c2l(K.r),ie=re._rl;return(Z?w.isPtInsidePolygon:T.isPtInsideSector)(oe,$,ie,X,Z)},U.pathArc=function(K){var X=this.sectorInRad,Z=this.vangles;return(Z?w.pathPolygon:T.pathArc)(K,X[0],X[1],Z)},U.pathSector=function(K){var X=this.sectorInRad,Z=this.vangles;return(Z?w.pathPolygon:T.pathSector)(K,X[0],X[1],Z)},U.pathAnnulus=function(K,X){var Z=this.sectorInRad,$=this.vangles;return($?w.pathPolygonAnnulus:T.pathAnnulus)(K,X,Z[0],Z[1],$)},U.pathSubplot=function(){var K=this.innerRadius,X=this.radius;return K?this.pathAnnulus(K,X):this.pathSector(X)},U.fillViewInitialKey=function(K,X){K in this.viewInitial||(this.viewInitial[K]=X)}},57696:function(ee,z,e){"use strict";var M=e(3400),k=e(78344),o=M.deg2rad,T=M.rad2deg;ee.exports=function(b,h,s){switch(k(b,s),b._id){case"x":case"radialaxis":(function(t,i){var n=i._subplot;t.setGeometry=function(){var r=t._rl[0],a=t._rl[1],l=n.innerRadius,u=(n.radius-l)/(a-r),d=l/u,c=r>a?function(x){return x<=0}:function(x){return x>=0};t.c2g=function(x){var g=t.c2l(x)-r;return(c(g)?g:0)+d},t.g2c=function(x){return t.l2c(x+r-d)},t.g2p=function(x){return x*u},t.c2p=function(x){return t.g2p(t.c2g(x))}}})(b,h);break;case"angularaxis":(function(t,i){var n=t.type;if(n==="linear"){var r=t.d2c,a=t.c2d;t.d2c=function(l,u){return function(d,c){return c==="degrees"?o(d):d}(r(l),u)},t.c2d=function(l,u){return a(function(d,c){return c==="degrees"?T(d):d}(l,u))}}t.makeCalcdata=function(l,u){var d,c,x=l[u],g=l._length,p=function(f){return t.d2c(f,l.thetaunit)};if(x)for(d=new Array(g),c=0;c<g;c++)d[c]=p(x[c]);else{var v=u+"0",m="d"+u,y=v in l?p(l[v]):0,_=l[m]?p(l[m]):(t.period||2*Math.PI)/g;for(d=new Array(g),c=0;c<g;c++)d[c]=y+c*_}return d},t.setGeometry=function(){var l,u,d,c,x=i.sector,g=x.map(o),p={clockwise:-1,counterclockwise:1}[t.direction],v=o(t.rotation),m=function(S){return p*S+v},y=function(S){return(S-v)/p};switch(n){case"linear":u=l=M.identity,c=o,d=T,t.range=M.isFullCircle(g)?[x[0],x[0]+360]:g.map(y).map(T);break;case"category":var _=t._categories.length,f=t.period?Math.max(t.period,_):_;f===0&&(f=1),u=c=function(S){return 2*S*Math.PI/f},l=d=function(S){return S*f/Math.PI/2},t.range=[0,f]}t.c2g=function(S){return m(u(S))},t.g2c=function(S){return l(y(S))},t.t2g=function(S){return m(c(S))},t.g2t=function(S){return d(y(S))}}})(b,h)}}},55012:function(ee){"use strict";ee.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(ee){"use strict";function z(o){return o<0?-1:o>0?1:0}function e(o){var T=o[0],b=o[1];if(!isFinite(T)||!isFinite(b))return[1,0];var h=(T+1)*(T+1)+b*b;return[(T*T+b*b-1)/h,2*b/h]}function M(o,T){var b=T[0],h=T[1];return[b*o.radius+o.cx,-h*o.radius+o.cy]}function k(o,T){return T*o.radius}ee.exports={smith:e,reactanceArc:function(o,T,b,h){var s=M(o,e([b,T])),t=s[0],i=s[1],n=M(o,e([h,T])),r=n[0],a=n[1];if(T===0)return["M"+t+","+i,"L"+r+","+a].join(" ");var l=k(o,1/Math.abs(T));return["M"+t+","+i,"A"+l+","+l+" 0 0,"+(T<0?1:0)+" "+r+","+a].join(" ")},resistanceArc:function(o,T,b,h){var s=k(o,1/(T+1)),t=M(o,e([T,b])),i=t[0],n=t[1],r=M(o,e([T,h])),a=r[0],l=r[1];if(z(b)!==z(h)){var u=M(o,e([T,0]));return["M"+i+","+n,"A"+s+","+s+" 0 0,"+(0<b?0:1)+" "+u[0]+","+u[1],"A"+s+","+s+" 0 0,"+(h<0?0:1)+a+","+l].join(" ")}return["M"+i+","+n,"A"+s+","+s+" 0 0,"+(h<b?0:1)+" "+a+","+l].join(" ")},smithTransform:M}},47788:function(ee,z,e){"use strict";var M=e(84888).KY,k=e(3400).counterRegex,o=e(62400),T=e(55012),b=T.attr,h=T.name,s=k(h),t={};t[b]={valType:"subplotid",dflt:h,editType:"calc"},ee.exports={attr:b,name:h,idRoot:h,idRegex:s,attrRegex:s,attributes:t,layoutAttributes:e(6183),supplyLayoutDefaults:e(22836),plot:function(i){for(var n=i._fullLayout,r=i.calcdata,a=n._subplots[h],l=0;l<a.length;l++){var u=a[l],d=M(r,h,u),c=n[u]._subplot;c||(c=o(i,u,!0),n[u]._subplot=c),c.plot(d,n,i._promises)}},clean:function(i,n,r,a){for(var l=a._subplots[h]||[],u=0;u<l.length;u++){var d=l[u],c=a[d]._subplot;if(!n[d]&&c)for(var x in c.framework.remove(),c.clipPaths)c.clipPaths[x].remove()}},toSVG:e(57952).toSVG}},6183:function(ee,z,e){"use strict";var M=e(22548),k=e(94724),o=e(86968).u,T=e(3400).extendFlat,b=e(67824).overrideAll,h=b({color:k.color,showline:T({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:T({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash},"plot","from-root"),s=b({ticklen:k.ticklen,tickwidth:T({},k.tickwidth,{dflt:2}),tickcolor:k.tickcolor,showticklabels:k.showticklabels,labelalias:k.labelalias,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,tickfont:k.tickfont,tickformat:k.tickformat,hoverformat:k.hoverformat,layer:k.layer},"plot","from-root"),t=T({visible:T({},k.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},k.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},h,s),i=T({visible:T({},k.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:k.ticks,editType:"calc"},h,s);ee.exports={domain:o({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:M.background},realaxis:t,imaginaryaxis:i,editType:"calc"}},22836:function(ee,z,e){"use strict";var M,k,o,T=e(3400),b=e(76308),h=e(31780),s=e(168),t=e(84888).op,i=e(42568),n=e(95936),r=e(42136),a=e(78344),l=e(6183),u=e(55012),d=u.axisNames,c=(M=function(g){return T.isTypedArray(g)&&(g=Array.from(g)),g.slice().reverse().map(function(p){return-p}).concat([0]).concat(g)},k=String,o={},function(g){var p=k?k(g):g;if(p in o)return o[p];var v=M(g);return o[p]=v,v});function x(g,p,v,m){var y=v("bgcolor");m.bgColor=b.combine(y,m.paper_bgcolor);var _,f=t(m.fullData,u.name,m.id),S=m.layoutOut;function w(U,V){return v(_+"."+U,V)}for(var E=0;E<d.length;E++){_=d[E],T.isPlainObject(g[_])||(g[_]={});var P=g[_],C=h.newContainer(p,_);C._id=C._name=_,C._attr=m.id+"."+_,C._traceIndices=f.map(function(U){return U._expandedIndex});var O=w("visible");if(C.type="linear",a(C,S),i(P,C,w,C.type),O){var R,j,D,N,W=_==="realaxis";W&&w("side"),W?w("tickvals"):w("tickvals",c(p.realaxis.tickvals||l.realaxis.tickvals.dflt)),T.isTypedArray(C.tickvals)&&(C.tickvals=Array.from(C.tickvals));var F=m.font||{};O&&(j=(R=w("color"))===P.color?R:F.color,D=F.size,N=F.family),n(P,C,w,C.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!W,noExp:!0,font:{color:j,size:D,family:N}}),T.coerce2(g,p,l,_+".ticklen"),T.coerce2(g,p,l,_+".tickwidth"),T.coerce2(g,p,l,_+".tickcolor",p.color),w("ticks")||(delete p[_].ticklen,delete p[_].tickwidth,delete p[_].tickcolor),r(P,C,w,{dfltColor:R,bgColor:m.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[_]}),w("layer")}w("hoverformat"),delete C.type,C._input=P}}ee.exports=function(g,p,v){s(g,p,v,{noUirevision:!0,type:u.name,attributes:l,handleDefaults:x,font:p.font,paper_bgcolor:p.paper_bgcolor,fullData:v,layoutOut:p})}},168:function(ee,z,e){"use strict";var M=e(3400),k=e(31780),o=e(86968).Q;ee.exports=function(T,b,h,s){var t,i,n=s.type,r=s.attributes,a=s.handleDefaults,l=s.partition||"x",u=b._subplots[n],d=u.length,c=d&&u[0].replace(/\d+$/,"");function x(m,y){return M.coerce(t,i,r,m,y)}for(var g=0;g<d;g++){var p=u[g];t=T[p]?T[p]:T[p]={},i=k.newContainer(b,p,c),s.noUirevision||x("uirevision",b.uirevision);var v={};v[l]=[g/d,(g+1)/d],o(i,b,x,v),s.id=p,a(t,i,x,s)}}},21776:function(ee,z,e){"use strict";var M=e(26880);function k(o){var T=o.description?" "+o.description:"",b=o.keys||[];if(b.length>0){for(var h=[],s=0;s<b.length;s++)h[s]="`"+b[s]+"`";T+="Finally, the template string has access to ",T=b.length===1?T+"variable "+h[0]:T+"variables "+h.slice(0,-1).join(", ")+" and "+h.slice(-1)+"."}return T}M.FORMAT_LINK,M.DATE_FORMAT_LINK,z.Ks=function(o,T){o=o||{},k(T=T||{});var b={valType:"string",dflt:"",editType:o.editType||"none"};return o.arrayOk!==!1&&(b.arrayOk=!0),b},z.Gw=function(o,T){o=o||{},k(T=T||{});var b={valType:"string",dflt:"",editType:o.editType||"calc"};return o.arrayOk!==!1&&(b.arrayOk=!0),b},z.ye=function(o,T){return T=T||{},(o=o||{}).newshape,k(T),{valType:"string",dflt:"",editType:o.editType||"arraydraw"}}},19352:function(ee,z,e){"use strict";var M=e(24696),k=e(84888).KY,o=e(3400).counterRegex,T="ternary";z.name=T;var b=z.attr="subplot";z.idRoot=T,z.idRegex=z.attrRegex=o(T),(z.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},z.layoutAttributes=e(86379),z.supplyLayoutDefaults=e(38536),z.plot=function(h){for(var s=h._fullLayout,t=h.calcdata,i=s._subplots[T],n=0;n<i.length;n++){var r=i[n],a=k(t,T,r),l=s[r]._subplot;l||(l=new M({id:r,graphDiv:h,container:s._ternarylayer.node()},s),s[r]._subplot=l),l.plot(a,s,h._promises)}},z.clean=function(h,s,t,i){for(var n=i._subplots[T]||[],r=0;r<n.length;r++){var a=n[r],l=i[a]._subplot;!s[a]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},86379:function(ee,z,e){"use strict";var M=e(22548),k=e(86968).u,o=e(94724),T=e(67824).overrideAll,b=e(92880).extendFlat,h={title:{text:o.title.text,font:o.title.font},color:o.color,tickmode:o.minor.tickmode,nticks:b({},o.nticks,{dflt:6,min:1}),tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,hoverformat:o.hoverformat,showline:b({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:b({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth,griddash:o.griddash,layer:o.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}},s=ee.exports=T({domain:k({name:"ternary"}),bgcolor:{valType:"color",dflt:M.background},sum:{valType:"number",dflt:1,min:0},aaxis:h,baxis:h,caxis:h},"plot","from-root");s.uirevision={valType:"any",editType:"none"},s.aaxis.uirevision=s.baxis.uirevision=s.caxis.uirevision={valType:"any",editType:"none"}},38536:function(ee,z,e){"use strict";var M=e(76308),k=e(31780),o=e(3400),T=e(168),b=e(95936),h=e(42568),s=e(25404),t=e(26332),i=e(42136),n=e(86379),r=["aaxis","baxis","caxis"];function a(u,d,c,x){var g,p,v,m=c("bgcolor"),y=c("sum");x.bgColor=M.combine(m,x.paper_bgcolor);for(var _=0;_<r.length;_++)p=u[g=r[_]]||{},(v=k.newContainer(d,g))._name=g,l(p,v,x,d);var f=d.aaxis,S=d.baxis,w=d.caxis;f.min+S.min+w.min>=y&&(f.min=0,S.min=0,w.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function l(u,d,c,x){var g=n[d._name];function p(S,w){return o.coerce(u,d,g,S,w)}p("uirevision",x.uirevision),d.type="linear";var v=p("color"),m=v!==g.color.dflt?v:c.font.color,y=d._name.charAt(0).toUpperCase(),_="Component "+y,f=p("title.text",_);d._hovertitle=f===_?f:y,o.coerceFont(p,"title.font",{family:c.font.family,size:o.bigFont(c.font.size),color:m}),p("min"),t(u,d,p,"linear"),h(u,d,p,"linear"),b(u,d,p,"linear",{noAutotickangles:!0}),s(u,d,p,{outerTicks:!0}),p("showticklabels")&&(o.coerceFont(p,"tickfont",{family:c.font.family,size:c.font.size,color:m}),p("tickangle"),p("tickformat")),i(u,d,p,{dfltColor:v,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:g}),p("hoverformat"),p("layer")}ee.exports=function(u,d,c){T(u,d,c,{type:"ternary",attributes:n,handleDefaults:a,font:d.font,paper_bgcolor:d.paper_bgcolor})}},24696:function(ee,z,e){"use strict";var M=e(33428),k=e(49760),o=e(24040),T=e(3400),b=T.strTranslate,h=T._,s=e(76308),t=e(43616),i=e(78344),n=e(92880).extendFlat,r=e(7316),a=e(54460),l=e(86476),u=e(93024),d=e(72760),c=d.freeMode,x=d.rectMode,g=e(81668),p=e(22676).prepSelect,v=e(22676).selectOnClick,m=e(22676).clearOutline,y=e(22676).clearSelectionsCache,_=e(33816);function f(D,N){this.id=D.id,this.graphDiv=D.graphDiv,this.init(N),this.makeFramework(N),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}ee.exports=f;var S=f.prototype;S.init=function(D){this.container=D._ternarylayer,this.defs=D._defs,this.layoutId=D._uid,this.traceHash={},this.layers={}},S.plot=function(D,N){var W=this,F=N[W.id],U=N._size;W._hasClipOnAxisFalse=!1;for(var V=0;V<D.length;V++)if(D[V][0].trace.cliponaxis===!1){W._hasClipOnAxisFalse=!0;break}W.updateLayers(F),W.adjustLayout(F,U),r.generalUpdatePerTraceModule(W.graphDiv,W,D,F),W.layers.plotbg.select("path").call(s.fill,F.bgcolor)},S.makeFramework=function(D){var N=this,W=N.graphDiv,F=D[N.id],U=N.clipId="clip"+N.layoutId+N.id,V=N.clipIdRelative="clip-relative"+N.layoutId+N.id;N.clipDef=T.ensureSingleById(D._clips,"clipPath",U,function(te){te.append("path").attr("d","M0,0Z")}),N.clipDefRelative=T.ensureSingleById(D._clips,"clipPath",V,function(te){te.append("path").attr("d","M0,0Z")}),N.plotContainer=T.ensureSingle(N.container,"g",N.id),N.updateLayers(F),t.setClipUrl(N.layers.backplot,U,W),t.setClipUrl(N.layers.grids,U,W)},S.updateLayers=function(D){var N=this.layers,W=["draglayer","plotbg","backplot","grids"];D.aaxis.layer==="below traces"&&W.push("aaxis","aline"),D.baxis.layer==="below traces"&&W.push("baxis","bline"),D.caxis.layer==="below traces"&&W.push("caxis","cline"),W.push("frontplot"),D.aaxis.layer==="above traces"&&W.push("aaxis","aline"),D.baxis.layer==="above traces"&&W.push("baxis","bline"),D.caxis.layer==="above traces"&&W.push("caxis","cline");var F=this.plotContainer.selectAll("g.toplevel").data(W,String),U=["agrid","bgrid","cgrid"];F.enter().append("g").attr("class",function(V){return"toplevel "+V}).each(function(V){var te=M.select(this);N[V]=te,V==="frontplot"?te.append("g").classed("scatterlayer",!0):V==="backplot"?te.append("g").classed("maplayer",!0):V==="plotbg"?te.append("path").attr("d","M0,0Z"):V==="aline"||V==="bline"||V==="cline"?te.append("path"):V==="grids"&&U.forEach(function(J){N[J]=te.append("g").classed("grid "+J,!0)})}),F.order()};var w=Math.sqrt(4/3);S.adjustLayout=function(D,N){var W,F,U,V,te,J,K=this,X=D.domain,Z=(X.x[0]+X.x[1])/2,$=(X.y[0]+X.y[1])/2,re=X.x[1]-X.x[0],oe=X.y[1]-X.y[0],ie=re*N.w,ue=oe*N.h,me=D.sum,be=D.aaxis.min,ge=D.baxis.min,de=D.caxis.min;ie>w*ue?U=(V=ue)*w:V=(U=ie)/w,te=re*U/ie,J=oe*V/ue,W=N.l+N.w*Z-U/2,F=N.t+N.h*(1-$)-V/2,K.x0=W,K.y0=F,K.w=U,K.h=V,K.sum=me,K.xaxis={type:"linear",range:[be+2*de-me,me-be-2*ge],domain:[Z-te/2,Z+te/2],_id:"x"},i(K.xaxis,K.graphDiv._fullLayout),K.xaxis.setScale(),K.xaxis.isPtWithinRange=function(Ee){return Ee.a>=K.aaxis.range[0]&&Ee.a<=K.aaxis.range[1]&&Ee.b>=K.baxis.range[1]&&Ee.b<=K.baxis.range[0]&&Ee.c>=K.caxis.range[1]&&Ee.c<=K.caxis.range[0]},K.yaxis={type:"linear",range:[be,me-ge-de],domain:[$-J/2,$+J/2],_id:"y"},i(K.yaxis,K.graphDiv._fullLayout),K.yaxis.setScale(),K.yaxis.isPtWithinRange=function(){return!0};var ve=K.yaxis.domain[0],pe=K.aaxis=n({},D.aaxis,{range:[be,me-ge-de],side:"left",tickangle:(+D.aaxis.tickangle||0)-30,domain:[ve,ve+J*w],anchor:"free",position:0,_id:"y",_length:U});i(pe,K.graphDiv._fullLayout),pe.setScale();var _e=K.baxis=n({},D.baxis,{range:[me-be-de,ge],side:"bottom",domain:K.xaxis.domain,anchor:"free",position:0,_id:"x",_length:U});i(_e,K.graphDiv._fullLayout),_e.setScale();var Te=K.caxis=n({},D.caxis,{range:[me-be-ge,de],side:"right",tickangle:(+D.caxis.tickangle||0)+30,domain:[ve,ve+J*w],anchor:"free",position:0,_id:"y",_length:U});i(Te,K.graphDiv._fullLayout),Te.setScale();var le="M"+W+","+(F+V)+"h"+U+"l-"+U/2+",-"+V+"Z";K.clipDef.select("path").attr("d",le),K.layers.plotbg.select("path").attr("d",le);var ae="M0,"+V+"h"+U+"l-"+U/2+",-"+V+"Z";K.clipDefRelative.select("path").attr("d",ae);var he=b(W,F);K.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",he),K.clipDefRelative.select("path").attr("transform",null);var Se=b(W-_e._offset,F+V);K.layers.baxis.attr("transform",Se),K.layers.bgrid.attr("transform",Se);var ke=b(W+U/2,F)+"rotate(30)"+b(0,-pe._offset);K.layers.aaxis.attr("transform",ke),K.layers.agrid.attr("transform",ke);var Me=b(W+U/2,F)+"rotate(-30)"+b(0,-Te._offset);K.layers.caxis.attr("transform",Me),K.layers.cgrid.attr("transform",Me),K.drawAxes(!0),K.layers.aline.select("path").attr("d",pe.showline?"M"+W+","+(F+V)+"l"+U/2+",-"+V:"M0,0").call(s.stroke,pe.linecolor||"#000").style("stroke-width",(pe.linewidth||0)+"px"),K.layers.bline.select("path").attr("d",_e.showline?"M"+W+","+(F+V)+"h"+U:"M0,0").call(s.stroke,_e.linecolor||"#000").style("stroke-width",(_e.linewidth||0)+"px"),K.layers.cline.select("path").attr("d",Te.showline?"M"+(W+U/2)+","+F+"l"+U/2+","+V:"M0,0").call(s.stroke,Te.linecolor||"#000").style("stroke-width",(Te.linewidth||0)+"px"),K.graphDiv._context.staticPlot||K.initInteractions(),t.setClipUrl(K.layers.frontplot,K._hasClipOnAxisFalse?null:K.clipId,K.graphDiv)},S.drawAxes=function(D){var N=this,W=N.graphDiv,F=N.id.substr(7)+"title",U=N.layers,V=N.aaxis,te=N.baxis,J=N.caxis;if(N.drawAx(V),N.drawAx(te),N.drawAx(J),D){var K=Math.max(V.showticklabels?V.tickfont.size/2:0,(J.showticklabels?.75*J.tickfont.size:0)+(J.ticks==="outside"?.87*J.ticklen:0)),X=(te.showticklabels?te.tickfont.size:0)+(te.ticks==="outside"?te.ticklen:0)+3;U["a-title"]=g.draw(W,"a"+F,{propContainer:V,propName:N.id+".aaxis.title",placeholder:h(W,"Click to enter Component A title"),attributes:{x:N.x0+N.w/2,y:N.y0-V.title.font.size/3-K,"text-anchor":"middle"}}),U["b-title"]=g.draw(W,"b"+F,{propContainer:te,propName:N.id+".baxis.title",placeholder:h(W,"Click to enter Component B title"),attributes:{x:N.x0-X,y:N.y0+N.h+.83*te.title.font.size+X,"text-anchor":"middle"}}),U["c-title"]=g.draw(W,"c"+F,{propContainer:J,propName:N.id+".caxis.title",placeholder:h(W,"Click to enter Component C title"),attributes:{x:N.x0+N.w+X,y:N.y0+N.h+.83*J.title.font.size+X,"text-anchor":"middle"}})}},S.drawAx=function(D){var N,W=this,F=W.graphDiv,U=D._name,V=U.charAt(0),te=D._id,J=W.layers[U],K=V+"tickLayout",X=(N=D).ticks+String(N.ticklen)+String(N.showticklabels);W[K]!==X&&(J.selectAll("."+te+"tick").remove(),W[K]=X),D.setScale();var Z=a.calcTicks(D),$=a.clipEnds(D,Z),re=a.makeTransTickFn(D),oe=a.getTickSigns(D)[2],ie=T.deg2rad(30),ue=oe*(D.linewidth||1)/2,me=oe*D.ticklen,be=W.w,ge=W.h,de=V==="b"?"M0,"+ue+"l"+Math.sin(ie)*me+","+Math.cos(ie)*me:"M"+ue+",0l"+Math.cos(ie)*me+","+-Math.sin(ie)*me,ve={a:"M0,0l"+ge+",-"+be/2,b:"M0,0l-"+be/2+",-"+ge,c:"M0,0l-"+ge+","+be/2}[V];a.drawTicks(F,D,{vals:D.ticks==="inside"?$:Z,layer:J,path:de,transFn:re,crisp:!1}),a.drawGrid(F,D,{vals:$,layer:W.layers[V+"grid"],path:ve,transFn:re,crisp:!1}),a.drawLabels(F,D,{vals:Z,layer:J,transFn:re,labelFns:a.makeLabelFns(D,0,30)})};var E=_.MINZOOM/2+.87,P="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",C="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",O="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",R=!0;function j(D){M.select(D).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){y(this.dragOptions),m(this.dragOptions.gd)},S.initInteractions=function(){var D,N,W,F,U,V,te,J,K,X,Z,$,re=this,oe=re.layers.plotbg.select("path").node(),ie=re.graphDiv,ue=ie._fullLayout._zoomlayer;function me(ae){var he={};return he[re.id+".aaxis.min"]=ae.a,he[re.id+".baxis.min"]=ae.b,he[re.id+".caxis.min"]=ae.c,he}function be(ae,he){var Se=ie._fullLayout.clickmode;j(ie),ae===2&&(ie.emit("plotly_doubleclick",null),o.call("_guiRelayout",ie,me({a:0,b:0,c:0}))),Se.indexOf("select")>-1&&ae===1&&v(he,ie,[re.xaxis],[re.yaxis],re.id,re.dragOptions),Se.indexOf("event")>-1&&u.click(ie,he,re.id)}function ge(ae,he){return 1-he/re.h}function de(ae,he){return 1-(ae+(re.h-he)/Math.sqrt(3))/re.w}function ve(ae,he){return(ae-(re.h-he)/Math.sqrt(3))/re.w}function pe(ae,he){var Se=W+ae*D,ke=F+he*N,Me=Math.max(0,Math.min(1,ge(0,F),ge(0,ke))),Ee=Math.max(0,Math.min(1,de(W,F),de(Se,ke))),De=Math.max(0,Math.min(1,ve(W,F),ve(Se,ke))),fe=(Me/2+De)*re.w,xe=(1-Me/2-Ee)*re.w,we=(fe+xe)/2,Oe=xe-fe,ze=(1-Me)*re.h,Pe=ze-Oe/w;Oe<_.MINZOOM?(te=U,Z.attr("d",K),$.attr("d","M0,0Z")):(te={a:U.a+Me*V,b:U.b+Ee*V,c:U.c+De*V},Z.attr("d",K+"M"+fe+","+ze+"H"+xe+"L"+we+","+Pe+"L"+fe+","+ze+"Z"),$.attr("d","M"+W+","+F+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+fe+","+ze+P+"M"+xe+","+ze+C+"M"+we+","+Pe+O)),X||(Z.transition().style("fill",J>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),$.transition().style("opacity",1).duration(200),X=!0),ie.emit("plotly_relayouting",me(te))}function _e(){j(ie),te!==U&&(o.call("_guiRelayout",ie,me(te)),R&&ie.data&&ie._context.showTips&&(T.notifier(h(ie,"Double-click to zoom back out"),"long"),R=!1))}function Te(ae,he){var Se=ae/re.xaxis._m,ke=he/re.yaxis._m,Me=[(te={a:U.a-ke,b:U.b+(Se+ke)/2,c:U.c-(Se-ke)/2}).a,te.b,te.c].sort(T.sorterAsc),Ee=Me.indexOf(te.a),De=Me.indexOf(te.b),fe=Me.indexOf(te.c);Me[0]<0&&(Me[1]+Me[0]/2<0?(Me[2]+=Me[0]+Me[1],Me[0]=Me[1]=0):(Me[2]+=Me[0]/2,Me[1]+=Me[0]/2,Me[0]=0),te={a:Me[Ee],b:Me[De],c:Me[fe]},he=(U.a-te.a)*re.yaxis._m,ae=(U.c-te.c-U.b+te.b)*re.xaxis._m);var xe=b(re.x0+ae,re.y0+he);re.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",xe);var we=b(-ae,-he);re.clipDefRelative.select("path").attr("transform",we),re.aaxis.range=[te.a,re.sum-te.b-te.c],re.baxis.range=[re.sum-te.a-te.c,te.b],re.caxis.range=[re.sum-te.a-te.b,te.c],re.drawAxes(!1),re._hasClipOnAxisFalse&&re.plotContainer.select(".scatterlayer").selectAll(".trace").call(t.hideOutsideRangePoints,re),ie.emit("plotly_relayouting",me(te))}function le(){o.call("_guiRelayout",ie,me(te))}this.dragOptions={element:oe,gd:ie,plotinfo:{id:re.id,domain:ie._fullLayout[re.id].domain,xaxis:re.xaxis,yaxis:re.yaxis},subplot:re.id,prepFn:function(ae,he,Se){re.dragOptions.xaxes=[re.xaxis],re.dragOptions.yaxes=[re.yaxis],D=ie._fullLayout._invScaleX,N=ie._fullLayout._invScaleY;var ke=re.dragOptions.dragmode=ie._fullLayout.dragmode;c(ke)?re.dragOptions.minDrag=1:re.dragOptions.minDrag=void 0,ke==="zoom"?(re.dragOptions.moveFn=pe,re.dragOptions.clickFn=be,re.dragOptions.doneFn=_e,function(Me,Ee,De){var fe=oe.getBoundingClientRect();W=Ee-fe.left,F=De-fe.top,ie._fullLayout._calcInverseTransform(ie);var xe=ie._fullLayout._invTransform,we=T.apply3DTransform(xe)(W,F);W=we[0],F=we[1],U={a:re.aaxis.range[0],b:re.baxis.range[1],c:re.caxis.range[1]},te=U,V=re.aaxis.range[1]-U.a,J=k(re.graphDiv._fullLayout[re.id].bgcolor).getLuminance(),K="M0,"+re.h+"L"+re.w/2+", 0L"+re.w+","+re.h+"Z",X=!1,Z=ue.append("path").attr("class","zoombox").attr("transform",b(re.x0,re.y0)).style({fill:J>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",K),$=ue.append("path").attr("class","zoombox-corners").attr("transform",b(re.x0,re.y0)).style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),re.clearOutline(ie)}(0,he,Se)):ke==="pan"?(re.dragOptions.moveFn=Te,re.dragOptions.clickFn=be,re.dragOptions.doneFn=le,U={a:re.aaxis.range[0],b:re.baxis.range[1],c:re.caxis.range[1]},te=U,re.clearOutline(ie)):(x(ke)||c(ke))&&p(ae,he,Se,re.dragOptions,ke)}},oe.onmousemove=function(ae){u.hover(ie,ae,re.id),ie._fullLayout._lasthover=oe,ie._fullLayout._hoversubplot=re.id},oe.onmouseout=function(ae){ie._dragging||l.unhover(ie,ae)},l.init(this.dragOptions)}},24040:function(ee,z,e){"use strict";var M=e(24248),k=e(16628),o=e(52416),T=e(63620),b=e(52200).addStyleRule,h=e(92880),s=e(45464),t=e(64859),i=h.extendFlat,n=h.extendDeepAll;function r(v){var m=v.name,y=v.categories,_=v.meta;if(z.modules[m])M.log("Type "+m+" already registered");else{z.subplotsRegistry[v.basePlotModule.name]||function(R){var j=R.name;if(z.subplotsRegistry[j])M.log("Plot type "+j+" already registered.");else for(var D in d(R),z.subplotsRegistry[j]=R,z.componentsRegistry)g(D,R.name)}(v.basePlotModule);for(var f={},S=0;S<y.length;S++)f[y[S]]=!0,z.allCategories[y[S]]=!0;for(var w in z.modules[m]={_module:v,categories:f},_&&Object.keys(_).length&&(z.modules[m].meta=_),z.allTypes.push(m),z.componentsRegistry)c(w,m);v.layoutAttributes&&i(z.traceLayoutAttributes,v.layoutAttributes);var E=v.basePlotModule,P=E.name;if(P==="mapbox"){var C=E.constants.styleRules;for(var O in C)b(".js-plotly-plot .plotly .mapboxgl-"+O,C[O])}P!=="geo"&&P!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function a(v){if(typeof v.name!="string")throw new Error("Component module *name* must be a string.");var m=v.name;for(var y in z.componentsRegistry[m]=v,v.layoutAttributes&&(v.layoutAttributes._isLinkedToArray&&o(z.layoutArrayContainers,m),d(v)),z.modules)c(m,y);for(var _ in z.subplotsRegistry)g(m,_);for(var f in z.transformsRegistry)x(m,f);v.schema&&v.schema.layout&&n(t,v.schema.layout)}function l(v){if(typeof v.name!="string")throw new Error("Transform module *name* must be a string.");var m="Transform module "+v.name,y=typeof v.transform=="function",_=typeof v.calcTransform=="function";if(!y&&!_)throw new Error(m+" is missing a *transform* or *calcTransform* method.");for(var f in y&&_&&M.log([m+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(v.attributes)||M.log(m+" registered without an *attributes* object."),typeof v.supplyDefaults!="function"&&M.log(m+" registered without a *supplyDefaults* method."),z.transformsRegistry[v.name]=v,z.componentsRegistry)x(f,v.name)}function u(v){var m=v.name,y=m.split("-")[0],_=v.dictionary,f=v.format,S=_&&Object.keys(_).length,w=f&&Object.keys(f).length,E=z.localeRegistry,P=E[m];if(P||(E[m]=P={}),y!==m){var C=E[y];C||(E[y]=C={}),S&&C.dictionary===P.dictionary&&(C.dictionary=_),w&&C.format===P.format&&(C.format=f)}S&&(P.dictionary=_),w&&(P.format=f)}function d(v){if(v.layoutAttributes){var m=v.layoutAttributes._arrayAttrRegexps;if(m)for(var y=0;y<m.length;y++)o(z.layoutArrayRegexes,m[y])}}function c(v,m){var y=z.componentsRegistry[v].schema;if(y&&y.traces){var _=y.traces[m];_&&n(z.modules[m]._module.attributes,_)}}function x(v,m){var y=z.componentsRegistry[v].schema;if(y&&y.transforms){var _=y.transforms[m];_&&n(z.transformsRegistry[m].attributes,_)}}function g(v,m){var y=z.componentsRegistry[v].schema;if(y&&y.subplots){var _=z.subplotsRegistry[m],f=_.layoutAttributes,S=_.attr==="subplot"?_.name:_.attr;Array.isArray(S)&&(S=S[0]);var w=y.subplots[S];f&&w&&n(f,w)}}function p(v){return typeof v=="object"&&(v=v.type),v}z.modules={},z.allCategories={},z.allTypes=[],z.subplotsRegistry={},z.transformsRegistry={},z.componentsRegistry={},z.layoutArrayContainers=[],z.layoutArrayRegexes=[],z.traceLayoutAttributes={},z.localeRegistry={},z.apiMethodRegistry={},z.collectableSubplotTypes=null,z.register=function(v){if(z.collectableSubplotTypes=null,!v)throw new Error("No argument passed to Plotly.register.");v&&!Array.isArray(v)&&(v=[v]);for(var m=0;m<v.length;m++){var y=v[m];if(!y)throw new Error("Invalid module was attempted to be registered!");switch(y.moduleType){case"trace":r(y);break;case"transform":l(y);break;case"component":a(y);break;case"locale":u(y);break;case"apiMethod":var _=y.name;z.apiMethodRegistry[_]=y.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},z.getModule=function(v){var m=z.modules[p(v)];return!!m&&m._module},z.traceIs=function(v,m){if((v=p(v))==="various")return!1;var y=z.modules[v];return y||(v&&M.log("Unrecognized trace type "+v+"."),y=z.modules[s.type.dflt]),!!y.categories[m]},z.getTransformIndices=function(v,m){for(var y=[],_=v.transforms||[],f=0;f<_.length;f++)_[f].type===m&&y.push(f);return y},z.hasTransform=function(v,m){for(var y=v.transforms||[],_=0;_<y.length;_++)if(y[_].type===m)return!0;return!1},z.getComponentMethod=function(v,m){var y=z.componentsRegistry[v];return y&&y[m]||k},z.call=function(){var v=arguments[0],m=[].slice.call(arguments,1);return z.apiMethodRegistry[v].apply(null,m)}},91536:function(ee,z,e){"use strict";var M=e(24040),k=e(3400),o=k.extendFlat,T=k.extendDeep;function b(h){var s;switch(h){case"themes__thumb":s={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":s={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:s={}}return s}ee.exports=function(h,s){var t,i,n=h.data,r=h.layout,a=T([],n),l=T({},r,b(s.tileClass)),u=h._context||{};if(s.width&&(l.width=s.width),s.height&&(l.height=s.height),s.tileClass==="thumbnail"||s.tileClass==="themes__thumb"){l.annotations=[];var d=Object.keys(l);for(t=0;t<d.length;t++)i=d[t],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(l[d[t]].title={text:""});for(t=0;t<a.length;t++){var c=a[t];c.showscale=!1,c.marker&&(c.marker.showscale=!1),M.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(s.annotations))for(t=0;t<s.annotations.length;t++)l.annotations.push(s.annotations[t]);var x=Object.keys(l).filter(function(y){return y.match(/^scene\d*$/)});if(x.length){var g={};for(s.tileClass==="thumbnail"&&(g={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),t=0;t<x.length;t++){var p=l[x[t]];p.xaxis||(p.xaxis={}),p.yaxis||(p.yaxis={}),p.zaxis||(p.zaxis={}),o(p.xaxis,g),o(p.yaxis,g),o(p.zaxis,g),p._scene=null}}var v=document.createElement("div");s.tileClass&&(v.className=s.tileClass);var m={gd:v,td:v,layout:l,data:a,config:{staticPlot:s.staticPlot===void 0||s.staticPlot,plotGlPixelRatio:s.plotGlPixelRatio===void 0?2:s.plotGlPixelRatio,displaylogo:s.displaylogo||!1,showLink:s.showLink||!1,showTips:s.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return s.setBackground!=="transparent"&&(m.config.setBackground=s.setBackground||"opaque"),m.gd.defaultLayout=b(s.tileClass),m}},39792:function(ee,z,e){"use strict";var M=e(3400),k=e(67024),o=e(48616),T=e(81792);ee.exports=function(b,h){var s;return M.isPlainObject(b)||(s=M.getGraphDiv(b)),(h=h||{}).format=h.format||"png",h.width=h.width||null,h.height=h.height||null,h.imageDataOnly=!0,new Promise(function(t,i){s&&s._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),M.isIE()&&h.format!=="svg"&&i(new Error(T.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var n=k(b,h),r=h.filename||b.fn||"newplot";r+="."+h.format.replace("-","."),n.then(function(a){return s&&(s._snapshotInProgress=!1),o(a,r,h.format)}).then(function(a){t(a)}).catch(function(a){s&&(s._snapshotInProgress=!1),i(a)})})}},48616:function(ee,z,e){"use strict";var M=e(3400),k=e(81792);ee.exports=function(o,T,b){var h=document.createElement("a"),s="download"in h;return new Promise(function(t,i){var n,r;if(M.isIE())return n=k.createBlob(o,"svg"),window.navigator.msSaveBlob(n,T),n=null,t(T);if(s)return n=k.createBlob(o,b),r=k.createObjectURL(n),h.href=r,h.download=T,document.body.appendChild(h),h.click(),document.body.removeChild(h),k.revokeObjectURL(r),n=null,t(T);if(M.isSafari()){var a=b==="svg"?",":";base64,";return k.octetStream(a+encodeURIComponent(o)),t(T)}i(new Error("download error"))})}},81792:function(ee,z,e){"use strict";var M=e(24040);z.getDelay=function(o){return o._has&&(o._has("gl3d")||o._has("gl2d")||o._has("mapbox"))?500:0},z.getRedrawFunc=function(o){return function(){M.getComponentMethod("colorbar","draw")(o)}},z.encodeSVG=function(o){return"data:image/svg+xml,"+encodeURIComponent(o)},z.encodeJSON=function(o){return"data:application/json,"+encodeURIComponent(o)};var k=window.URL||window.webkitURL;z.createObjectURL=function(o){return k.createObjectURL(o)},z.revokeObjectURL=function(o){return k.revokeObjectURL(o)},z.createBlob=function(o,T){if(T==="svg")return new window.Blob([o],{type:"image/svg+xml;charset=utf-8"});if(T==="full-json")return new window.Blob([o],{type:"application/json;charset=utf-8"});var b=function(h){for(var s=h.length,t=new ArrayBuffer(s),i=new Uint8Array(t),n=0;n<s;n++)i[n]=h.charCodeAt(n);return t}(window.atob(o));return new window.Blob([b],{type:"image/"+T})},z.octetStream=function(o){document.location.href="data:application/octet-stream"+o},z.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,z.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(ee,z,e){"use strict";var M=e(81792),k={getDelay:M.getDelay,getRedrawFunc:M.getRedrawFunc,clone:e(91536),toSVG:e(37164),svgToImg:e(63268),toImage:e(61808),downloadImage:e(39792)};ee.exports=k},63268:function(ee,z,e){"use strict";var M=e(3400),k=e(61252).EventEmitter,o=e(81792);ee.exports=function(T){var b=T.emitter||new k,h=new Promise(function(s,t){var i=window.Image,n=T.svg,r=T.format||"png";if(M.isIE()&&r!=="svg"){var a=new Error(o.MSG_IE_BAD_FORMAT);return t(a),T.promise?h:b.emit("error",a)}var l,u,d=T.canvas,c=T.scale||1,x=T.width||300,g=T.height||150,p=c*x,v=c*g,m=d.getContext("2d",{willReadFrequently:!0}),y=new i;r==="svg"||M.isSafari()?u=o.encodeSVG(n):(l=o.createBlob(n,"svg"),u=o.createObjectURL(l)),d.width=p,d.height=v,y.onload=function(){var _;switch(l=null,o.revokeObjectURL(u),r!=="svg"&&m.drawImage(y,0,0,p,v),r){case"jpeg":_=d.toDataURL("image/jpeg");break;case"png":_=d.toDataURL("image/png");break;case"webp":_=d.toDataURL("image/webp");break;case"svg":_=u;break;default:var f="Image format is not jpeg, png, svg or webp.";if(t(new Error(f)),!T.promise)return b.emit("error",f)}s(_),T.promise||b.emit("success",_)},y.onerror=function(_){if(l=null,o.revokeObjectURL(u),t(_),!T.promise)return b.emit("error",_)},y.src=u});return T.promise?h:b}},61808:function(ee,z,e){"use strict";var M=e(61252).EventEmitter,k=e(24040),o=e(3400),T=e(81792),b=e(91536),h=e(37164),s=e(63268);ee.exports=function(t,i){var n=new M,r=b(t,{format:"png"}),a=r.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var l=T.getRedrawFunc(a);return k.call("_doPlot",a,r.data,r.layout,r.config).then(l).then(function(){var u=T.getDelay(a._fullLayout);setTimeout(function(){var d=h(a),c=document.createElement("canvas");c.id=o.randstr(),(n=s({format:i.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:c,emitter:n,svg:d})).clean=function(){a&&document.body.removeChild(a)}},u)}).catch(function(u){n.emit("error",u)}),n}},37164:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(76308),b=e(9616),h=/"/g,s="TOBESTRIPPED",t=new RegExp('("'+s+")|("+s+'")',"g");ee.exports=function(i,n,r){var a,l=i._fullLayout,u=l._paper,d=l._toppaper,c=l.width,x=l.height;u.insert("rect",":first-child").call(o.setRect,0,0,c,x).call(T.fill,l.paper_bgcolor);var g=l._basePlotModules||[];for(a=0;a<g.length;a++){var p=g[a];p.toSVG&&p.toSVG(i)}if(d){var v=d.node().childNodes,m=Array.prototype.slice.call(v);for(a=0;a<m.length;a++){var y=m[a];y.childNodes.length&&u.node().appendChild(y)}}l._draggers&&l._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var f=M.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){f.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&f.style("font-family",S.replace(h,s))}else f.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var f=M.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&f.style("fill",S.replace(h,s));var w=this.style.stroke;w&&w.indexOf("url(")!==-1&&f.style("stroke",w.replace(h,s))}),n!=="pdf"&&n!=="eps"||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(b.xmlns,"xmlns",b.svg),u.node().setAttributeNS(b.xmlns,"xmlns:xlink",b.xlink),n==="svg"&&r&&(u.attr("width",r*c),u.attr("height",r*x),u.attr("viewBox","0 0 "+c+" "+x));var _=new window.XMLSerializer().serializeToString(u.node());return _=(_=(_=function(f){var S=M.select("body").append("div").style({display:"none"}).html(""),w=f.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":S.html(E).text()});return S.remove(),w}(_)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),k.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},84664:function(ee,z,e){"use strict";var M=e(3400);ee.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(o.text,k,"tx"),M.mergeArray(o.hovertext,k,"htx");var b=o.marker;if(b){M.mergeArray(b.opacity,k,"mo",!0),M.mergeArray(b.color,k,"mc");var h=b.line;h&&(M.mergeArray(h.color,k,"mlc"),M.mergeArrayCastPositive(h.width,k,"mlw"))}}},20832:function(ee,z,e){"use strict";var M=e(52904),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(21776).Gw,b=e(49084),h=e(25376),s=e(78048),t=e(98192).c,i=e(92880).extendFlat,n=h({editType:"calc",arrayOk:!0,colorEditType:"style"}),r=i({},M.marker.line.width,{dflt:0}),a=i({width:r,editType:"calc"},b("marker.line")),l=i({line:a,editType:"calc"},b("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:t,cornerradius:{valType:"any",editType:"calc"}});ee.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:M.text,texttemplate:T({editType:"plot"},{keys:s.eventDataKeys}),hovertext:M.hovertext,hovertemplate:o({},{keys:s.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},n,{}),insidetextfont:i({},n,{}),outsidetextfont:i({},n,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},M.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:{marker:{opacity:M.selected.marker.opacity,color:M.selected.marker.color,editType:"style"},textfont:M.selected.textfont,editType:"style"},unselected:{marker:{opacity:M.unselected.marker.opacity,color:M.unselected.marker.color,editType:"style"},textfont:M.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(ee,z,e){"use strict";var M=e(54460),k=e(1220),o=e(94288).hasColorscale,T=e(47128),b=e(84664),h=e(4500);ee.exports=function(s,t){var i,n,r,a,l,u,d=M.getFromId(s,t.xaxis||"x"),c=M.getFromId(s,t.yaxis||"y"),x={msUTC:!(!t.base&&t.base!==0)};t.orientation==="h"?(i=d.makeCalcdata(t,"x",x),r=c.makeCalcdata(t,"y"),a=k(t,c,"y",r),l=!!t.yperiodalignment,u="y"):(i=c.makeCalcdata(t,"y",x),r=d.makeCalcdata(t,"x"),a=k(t,d,"x",r),l=!!t.xperiodalignment,u="x"),n=a.vals;for(var g=Math.min(n.length,i.length),p=new Array(g),v=0;v<g;v++)p[v]={p:n[v],s:i[v]},l&&(p[v].orig_p=r[v],p[v][u+"End"]=a.ends[v],p[v][u+"Start"]=a.starts[v]),t.ids&&(p[v].id=String(t.ids[v]));return o(t,"marker")&&T(s,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),o(t,"marker.line")&&T(s,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(p,t),h(p,t),p}},78048:function(ee){"use strict";ee.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(ee,z,e){"use strict";var M=e(38248),k=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,T=e(24040),b=e(54460),h=e(71888).getAxisGroup,s=e(72592);function t(g,p,v,m,y){if(m.length){var _,f,S,w;switch(function(E,P){var C,O;for(C=0;C<P.length;C++){var R,j=P[C],D=j[0].trace,N=D.type==="funnel"?D._base:D.base,W=D.orientation==="h"?D.xcalendar:D.ycalendar,F=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(k(N)){for(O=0;O<Math.min(N.length,j.length);O++)R=F(N[O],0,W),M(R)?(j[O].b=+R,j[O].hasB=1):j[O].b=0;for(;O<j.length;O++)j[O].b=0}else{R=F(N,0,W);var U=M(R);for(R=U?R:0,O=0;O<j.length;O++)j[O].b=R,U&&(j[O].hasB=1)}}}(v,m),y.mode){case"overlay":i(p,v,m,y);break;case"group":for(_=[],f=[],S=0;S<m.length;S++)(w=m[S])[0].trace.offset===void 0?f.push(w):_.push(w);f.length&&function(E,P,C,O,R){var j=new s(O,{posAxis:P,sepNegVal:!1,overlapNoMerge:!R.norm});(function(D,N,W,F){for(var U=D._fullLayout,V=W.positions,te=W.distinctPositions,J=W.minDiff,K=W.traces,X=K.length,Z=V.length!==te.length,$=J*(1-F.gap),re=h(U,N._id)+K[0][0].trace.orientation,oe=U._alignmentOpts[re]||{},ie=0;ie<X;ie++){var ue,me,be=K[ie],ge=be[0].trace,de=oe[ge.alignmentgroup]||{},ve=Object.keys(de.offsetGroups||{}).length,pe=(ue=ve?$/ve:Z?$/X:$)*(1-(F.groupgap||0));me=ve?((2*ge._offsetIndex+1-ve)*ue-pe)/2:Z?((2*ie+1-X)*ue-pe)/2:-pe/2;var _e=be[0].t;_e.barwidth=pe,_e.poffset=me,_e.bargroupwidth=$,_e.bardelta=J}W.binWidth=K[0][0].t.barwidth/100,r(W),a(N,W),l(N,W,Z)})(E,P,j,R),function(D,N){for(var W=D.traces,F=0;F<W.length;F++){var U=W[F];if(U[0].trace.base===void 0)for(var V=new s([U],{posAxis:N,sepNegVal:!0,overlapNoMerge:!0}),te=0;te<U.length;te++){var J=U[te];if(J.p!==o){var K=V.put(J.p,J.b+J.s);K&&(J.b=K)}}}}(j,P),R.norm?(d(j),c(C,j,R)):u(C,j)}(g,p,v,f,y),_.length&&i(p,v,_,y);break;case"stack":case"relative":for(_=[],f=[],S=0;S<m.length;S++)(w=m[S])[0].trace.base===void 0?f.push(w):_.push(w);(function(E){if(!(E.length<2)){var P,C,O,R,j,D;for(P=0;P<E.length&&(R=(C=E[P][0].trace).marker?C.marker.cornerradius:void 0)===void 0;P++);if(R!==void 0)for(j=M(R)?+R:+R.slice(0,-1),D=M(R)?"px":"%",P=0;P<E.length;P++)(O=E[P][0].t).cornerradiusvalue=j,O.cornerradiusform=D}})(f),f.length&&function(E,P,C,O,R){var j=new s(O,{posAxis:P,sepNegVal:R.mode==="relative",overlapNoMerge:!(R.norm||R.mode==="stack"||R.mode==="relative")});n(P,j,R),function(U,V,te){var J,K,X,Z,$,re,oe=x(U),ie=V.traces;for(Z=0;Z<ie.length;Z++)if((K=(J=ie[Z])[0].trace).type==="funnel")for($=0;$<J.length;$++)(re=J[$]).s!==o&&V.put(re.p,-.5*re.s);for(Z=0;Z<ie.length;Z++){X=(K=(J=ie[Z])[0].trace).type==="funnel";var ue=[];for($=0;$<J.length;$++)if((re=J[$]).s!==o){var me;me=X?re.s:re.s+re.b;var be=V.put(re.p,me),ge=be+me;re.b=be,re[oe]=ge,te.norm||(ue.push(ge),re.hasB&&ue.push(be))}te.norm||(K._extremes[U._id]=b.findExtremes(U,ue,{tozero:!0,padded:!0}))}}(C,j,R);for(var D=0;D<O.length;D++)for(var N=O[D],W=0;W<N.length;W++){var F=N[W];F.s!==o&&F.b+F.s===j.get(F.p,F.s)&&(F._outmost=!0)}R.norm&&c(C,j,R)}(0,p,v,f,y),_.length&&i(p,v,_,y)}(function(E){var P,C,O,R,j,D,N;for(P=0;P<E.length;P++)O=(C=E[P])[0].trace,(R=C[0].t).cornerradiusvalue===void 0&&(j=O.marker?O.marker.cornerradius:void 0)!==void 0&&(D=M(j)?+j:+j.slice(0,-1),N=M(j)?"px":"%",R.cornerradiusvalue=D,R.cornerradiusform=N)})(m),function(E,P){var C,O,R,j=x(P),D={},N=1/0,W=-1/0;for(C=0;C<E.length;C++)for(R=E[C],O=0;O<R.length;O++){var F=R[O].p;M(F)&&(N=Math.min(N,F),W=Math.max(W,F))}var U=1e4/(W-N),V=D.round=function(ge){return String(Math.round(U*(ge-N)))},te={},J={},K=E.some(function(ge){var de=ge[0].trace;return"marker"in de&&de.marker.cornerradius});for(C=0;C<E.length;C++){(R=E[C])[0].t.extents=D;var X=R[0].t.poffset,Z=k(X);for(O=0;O<R.length;O++){var $=R[O],re=$[j]-$.w/2;if(M(re)){var oe=$[j]+$.w/2,ie=V($.p);D[ie]?D[ie]=[Math.min(re,D[ie][0]),Math.max(oe,D[ie][1])]:D[ie]=[re,oe]}if($.p0=$.p+(Z?X[O]:X),$.p1=$.p0+$.w,$.s0=$.b,$.s1=$.s0+$.s,K){var ue=Math.min($.s0,$.s1)||0,me=Math.max($.s0,$.s1)||0,be=$[j];te[be]=be in te?Math.min(te[be],ue):ue,J[be]=be in J?Math.max(J[be],me):me}}}K&&function(ge,de,ve,pe){for(var _e=x(pe),Te=0;Te<ge.length;Te++)for(var le=ge[Te],ae=0;ae<le.length;ae++){var he=le[ae],Se=he[_e];he._sMin=de[Se],he._sMax=ve[Se]}}(E,te,J,P)}(m,p)}}function i(g,p,v,m){for(var y=0;y<v.length;y++){var _=v[y],f=new s([_],{posAxis:g,sepNegVal:!1,overlapNoMerge:!m.norm});n(g,f,m),m.norm?(d(f),c(p,f,m)):u(p,f)}}function n(g,p,v){for(var m=p.minDiff,y=p.traces,_=m*(1-v.gap),f=_*(1-(v.groupgap||0)),S=-f/2,w=0;w<y.length;w++){var E=y[w][0].t;E.barwidth=f,E.poffset=S,E.bargroupwidth=_,E.bardelta=m}p.binWidth=y[0][0].t.barwidth/100,r(p),a(g,p),l(g,p)}function r(g){var p,v,m=g.traces;for(p=0;p<m.length;p++){var y,_=m[p],f=_[0],S=f.trace,w=f.t,E=S._offset||S.offset,P=w.poffset;if(k(E)){for(y=Array.prototype.slice.call(E,0,_.length),v=0;v<y.length;v++)M(y[v])||(y[v]=P);for(v=y.length;v<_.length;v++)y.push(P);w.poffset=y}else E!==void 0&&(w.poffset=E);var C=S._width||S.width,O=w.barwidth;if(k(C)){var R=Array.prototype.slice.call(C,0,_.length);for(v=0;v<R.length;v++)M(R[v])||(R[v]=O);for(v=R.length;v<_.length;v++)R.push(O);if(w.barwidth=R,E===void 0){for(y=[],v=0;v<_.length;v++)y.push(P+(O-R[v])/2);w.poffset=y}}else C!==void 0&&(w.barwidth=C,E===void 0&&(w.poffset=P+(O-C)/2))}}function a(g,p){for(var v=p.traces,m=x(g),y=0;y<v.length;y++)for(var _=v[y],f=_[0].t,S=f.poffset,w=k(S),E=f.barwidth,P=k(E),C=0;C<_.length;C++){var O=_[C],R=O.w=P?E[C]:E;O.p===void 0&&(O.p=O[m],O["orig_"+m]=O[m]);var j=(w?S[C]:S)+R/2;O[m]=O.p+j}}function l(g,p,v){var m=p.traces,y=p.minDiff/2;b.minDtick(g,p.minDiff,p.distinctPositions[0],v);for(var _=0;_<m.length;_++){var f,S,w,E,P=m[_],C=P[0],O=C.trace,R=[];for(E=0;E<P.length;E++)S=(f=P[E]).p-y,w=f.p+y,R.push(S,w);if(O.width||O.offset){var j=C.t,D=j.poffset,N=j.barwidth,W=k(D),F=k(N);for(E=0;E<P.length;E++){f=P[E];var U=W?D[E]:D,V=F?N[E]:N;w=(S=f.p+U)+V,R.push(S,w)}}O._extremes[g._id]=b.findExtremes(g,R,{padded:!1})}}function u(g,p){for(var v=p.traces,m=x(g),y=0;y<v.length;y++){for(var _=v[y],f=_[0].trace,S=f.type==="scatter",w=f.orientation==="v",E=[],P=!1,C=0;C<_.length;C++){var O=_[C],R=S?0:O.b,j=S?w?O.y:O.x:R+O.s;O[m]=j,E.push(j),O.hasB&&E.push(R),O.hasB&&O.b||(P=!0)}f._extremes[g._id]=b.findExtremes(g,E,{tozero:P,padded:!0})}}function d(g){for(var p=g.traces,v=0;v<p.length;v++)for(var m=p[v],y=0;y<m.length;y++){var _=m[y];_.s!==o&&g.put(_.p,_.b+_.s)}}function c(g,p,v){var m=p.traces,y=x(g),_=v.norm==="fraction"?1:100,f=_/1e9,S=g.l2c(g.c2l(0)),w=v.mode==="stack"?_:S;function E(te){return M(g.c2l(te))&&(te<S-f||te>w+f||!M(S))}for(var P=0;P<m.length;P++){for(var C=m[P],O=C[0].trace,R=[],j=!1,D=!1,N=0;N<C.length;N++){var W=C[N];if(W.s!==o){var F=Math.abs(_/p.get(W.p,W.s));W.b*=F,W.s*=F;var U=W.b,V=U+W.s;W[y]=V,R.push(V),D=D||E(V),W.hasB&&(R.push(U),D=D||E(U)),W.hasB&&W.b||(j=!0)}}O._extremes[g._id]=b.findExtremes(g,R,{tozero:j,padded:D})}}function x(g){return g._id.charAt(0)}ee.exports={crossTraceCalc:function(g,p){for(var v=p.xaxis,m=p.yaxis,y=g._fullLayout,_=g._fullData,f=g.calcdata,S=[],w=[],E=0;E<_.length;E++){var P=_[E];if(P.visible===!0&&T.traceIs(P,"bar")&&P.xaxis===v._id&&P.yaxis===m._id&&(P.orientation==="h"?S.push(f[E]):w.push(f[E]),P._computePh))for(var C=g.calcdata[E],O=0;O<C.length;O++)typeof C[O].ph0=="function"&&(C[O].ph0=C[O].ph0()),typeof C[O].ph1=="function"&&(C[O].ph1=C[O].ph1())}var R={xCat:v.type==="category"||v.type==="multicategory",yCat:m.type==="category"||m.type==="multicategory",mode:y.barmode,norm:y.barnorm,gap:y.bargap,groupgap:y.bargroupgap};t(g,v,m,w,R),t(g,m,v,S,R)},setGroupPositions:t}},31508:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=e(76308),T=e(24040),b=e(43980),h=e(31147),s=e(55592),t=e(20011),i=e(20832),n=k.coerceFont;function r(l){if(M(l)){if((l=+l)>=0)return l}else if(typeof l=="string"&&(l=l.trim()).slice(-1)==="%"&&M(l.slice(0,-1))&&(l=+l.slice(0,-1))>=0)return l+"%"}function a(l,u,d,c,x,g){var p=(g=g||{}).moduleHasSelected!==!1,v=g.moduleHasUnselected!==!1,m=g.moduleHasConstrain!==!1,y=g.moduleHasCliponaxis!==!1,_=g.moduleHasTextangle!==!1,f=g.moduleHasInsideanchor!==!1,S=!!g.hasPathbar,w=Array.isArray(x)||x==="auto",E=w||x==="inside",P=w||x==="outside";if(E||P){var C=n(c,"textfont",d.font),O=k.extendFlat({},C),R=!(l.textfont&&l.textfont.color);if(R&&delete O.color,n(c,"insidetextfont",O),S){var j=k.extendFlat({},C);R&&delete j.color,n(c,"pathbar.textfont",j)}P&&n(c,"outsidetextfont",C),p&&c("selected.textfont.color"),v&&c("unselected.textfont.color"),m&&c("constraintext"),y&&c("cliponaxis"),_&&c("textangle"),c("texttemplate")}E&&f&&c("insidetextanchor")}ee.exports={supplyDefaults:function(l,u,d,c){function x(m,y){return k.coerce(l,u,i,m,y)}if(b(l,u,c,x)){h(l,u,c,x),x("xhoverformat"),x("yhoverformat"),x("orientation",u.x&&!u.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var g=x("textposition");a(l,0,c,x,g,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(l,u,x,d,c);var p=(u.marker.line||{}).color,v=T.getComponentMethod("errorbars","supplyDefaults");v(l,u,p||o.defaultLine,{axis:"y"}),v(l,u,p||o.defaultLine,{axis:"x",inherit:"y"}),k.coerceSelectionMarkerOpacity(u,x)}else u.visible=!1},crossTraceDefaults:function(l,u){var d,c;function x(v,m){return k.coerce(c._input,c,i,v,m)}for(var g=0;g<l.length;g++)if((c=l[g]).type==="bar"){d=c._input;var p=x("marker.cornerradius",u.barcornerradius);c.marker&&(c.marker.cornerradius=r(p)),u.barmode==="group"&&t(d,c,u,x)}},handleText:a,validateCornerradius:r}},52160:function(ee){"use strict";ee.exports=function(z,e,M){return z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),M.orientation==="h"?(z.label=z.y,z.value=z.x):(z.label=z.x,z.value=z.y),z}},60444:function(ee,z,e){"use strict";var M=e(38248),k=e(49760),o=e(3400).isArrayOrTypedArray;z.coerceString=function(T,b,h){if(typeof b=="string"){if(b||!T.noBlank)return b}else if((typeof b=="number"||b===!0)&&!T.strict)return String(b);return h!==void 0?h:T.dflt},z.coerceNumber=function(T,b,h){if(M(b)){b=+b;var s=T.min,t=T.max;if(!(s!==void 0&&b<s||t!==void 0&&b>t))return b}return h!==void 0?h:T.dflt},z.coerceColor=function(T,b,h){return k(b).isValid()?b:h!==void 0?h:T.dflt},z.coerceEnumerated=function(T,b,h){return T.coerceNumber&&(b=+b),T.values.indexOf(b)!==-1?b:h!==void 0?h:T.dflt},z.getValue=function(T,b){var h;return o(T)?b<T.length&&(h=T[b]):h=T,h},z.getLineWidth=function(T,b){return 0<b.mlw?b.mlw:o(T.marker.line.width)?0:T.marker.line.width}},63400:function(ee,z,e){"use strict";var M=e(93024),k=e(24040),o=e(76308),T=e(3400).fillText,b=e(60444).getLineWidth,h=e(54460).hoverLabelText,s=e(39032).BADNUM;function t(n,r,a,l,u){var d,c,x,g,p,v,m,y=n.cd,_=y[0].trace,f=y[0].t,S=l==="closest",w=_.type==="waterfall",E=n.maxHoverDistance,P=n.maxSpikeDistance;_.orientation==="h"?(d=a,c=r,x="y",g="x",p=J,v=V):(d=r,c=a,x="x",g="y",v=J,p=V);var C=_[x+"period"],O=S||C;function R(ue){return D(ue,-1)}function j(ue){return D(ue,1)}function D(ue,me){var be=ue.w;return ue[x]+me*be/2}function N(ue){return ue[x+"End"]-ue[x+"Start"]}var W=S?R:C?function(ue){return ue.p-N(ue)/2}:function(ue){return Math.min(R(ue),ue.p-f.bardelta/2)},F=S?j:C?function(ue){return ue.p+N(ue)/2}:function(ue){return Math.max(j(ue),ue.p+f.bardelta/2)};function U(ue,me,be){return u.finiteRange&&(be=0),M.inbox(ue-d,me-d,be+Math.min(1,Math.abs(me-ue)/m)-1)}function V(ue){return U(W(ue),F(ue),E)}function te(ue){var me=ue[g];if(w){var be=Math.abs(ue.rawS)||0;c>0?me+=be:c<0&&(me-=be)}return me}function J(ue){var me=c,be=ue.b,ge=te(ue);return M.inbox(be-me,ge-me,E+(ge-me)/(ge-be)-1)}var K=n[x+"a"],X=n[g+"a"];m=Math.abs(K.r2c(K.range[1])-K.r2c(K.range[0]));var Z=M.getDistanceFunction(l,p,v,function(ue){return(p(ue)+v(ue))/2});if(M.getClosest(y,Z,n),n.index!==!1&&y[n.index].p!==s){O||(W=function(ue){return Math.min(R(ue),ue.p-f.bargroupwidth/2)},F=function(ue){return Math.max(j(ue),ue.p+f.bargroupwidth/2)});var $=y[n.index],re=_.base?$.b+$.s:$.s;n[g+"0"]=n[g+"1"]=X.c2p($[g],!0),n[g+"LabelVal"]=re;var oe=f.extents[f.extents.round($.p)];n[x+"0"]=K.c2p(S?W($):oe[0],!0),n[x+"1"]=K.c2p(S?F($):oe[1],!0);var ie=$.orig_p!==void 0;return n[x+"LabelVal"]=ie?$.orig_p:$.p,n.labelLabel=h(K,n[x+"LabelVal"],_[x+"hoverformat"]),n.valueLabel=h(X,n[g+"LabelVal"],_[g+"hoverformat"]),n.baseLabel=h(X,$.b,_[g+"hoverformat"]),n.spikeDistance=(function(ue){var me=c,be=ue.b,ge=te(ue);return M.inbox(be-me,ge-me,P+(ge-me)/(ge-be)-1)}($)+function(ue){return U(R(ue),j(ue),P)}($))/2,n[x+"Spike"]=K.c2p($.p,!0),T($,_,n),n.hovertemplate=_.hovertemplate,n}}function i(n,r){var a=r.mcc||n.marker.color,l=r.mlcc||n.marker.line.color,u=b(n,r);return o.opacity(a)?a:o.opacity(l)&&u?l:void 0}ee.exports={hoverPoints:function(n,r,a,l,u){var d=t(n,r,a,l,u);if(d){var c=d.cd,x=c[0].trace,g=c[d.index];return d.color=i(x,g),k.getComponentMethod("errorbars","hoverInfo")(g,x,d),[d]}},hoverOnBars:t,getTraceColor:i}},51132:function(ee,z,e){"use strict";ee.exports={attributes:e(20832),layoutAttributes:e(39324),supplyDefaults:e(31508).supplyDefaults,crossTraceDefaults:e(31508).crossTraceDefaults,supplyLayoutDefaults:e(37156),calc:e(71820),crossTraceCalc:e(96376).crossTraceCalc,colorbar:e(5528),arraysToCalcdata:e(84664),plot:e(98184).plot,style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(63400).hoverPoints,eventData:e(52160),selectPoints:e(45784),moduleType:"trace",name:"bar",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(ee){"use strict";ee.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(ee,z,e){"use strict";var M=e(24040),k=e(54460),o=e(3400),T=e(39324),b=e(31508).validateCornerradius;ee.exports=function(h,s,t){function i(p,v){return o.coerce(h,s,T,p,v)}for(var n=!1,r=!1,a=!1,l={},u=i("barmode"),d=0;d<t.length;d++){var c=t[d];if(M.traceIs(c,"bar")&&c.visible){if(n=!0,u==="group"){var x=c.xaxis+c.yaxis;l[x]&&(a=!0),l[x]=!0}c.visible&&c.type==="histogram"&&k.getFromId({_fullLayout:s},c[c.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(r=!0)}}if(n){u!=="overlay"&&i("barnorm"),i("bargap",r&&!a?0:.2),i("bargroupgap");var g=i("barcornerradius");s.barcornerradius=b(g)}else delete s.barmode}},98184:function(ee,z,e){"use strict";var M=e(33428),k=e(38248),o=e(3400),T=e(72736),b=e(76308),h=e(43616),s=e(24040),t=e(54460).tickText,i=e(82744),n=i.recordMinTextSize,r=i.clearMinTextSize,a=e(60100),l=e(60444),u=e(78048),d=e(20832),c=d.text,x=d.textposition,g=e(10624).appendArrayPointValue,p=u.TEXTPAD;function v(O){return O.id}function m(O){if(O.ids)return v}function y(O){return(O>0)-(O<0)}function _(O,R){return O<R?1:-1}function f(O,R,j,D){var N;return!R.uniformtext.mode&&S(j)?(D&&(N=D()),O.transition().duration(j.duration).ease(j.easing).each("end",function(){N&&N()}).each("interrupt",function(){N&&N()})):O}function S(O){return O&&O.duration>0}function w(O,R,j,D,N){return!(O<0||R<0)&&(j<=O&&D<=R||j<=R&&D<=O||(N?O>=j*(R/D):R>=D*(O/j)))}function E(O){return O==="auto"?0:O}function P(O,R){var j=Math.PI/180*R,D=Math.abs(Math.sin(j)),N=Math.abs(Math.cos(j));return{x:O.width*N+O.height*D,y:O.width*D+O.height*N}}function C(O,R,j,D,N,W){var F=!!W.isHorizontal,U=!!W.constrained,V=W.angle||0,te=W.anchor,J=te==="end",K=te==="start",X=((W.leftToRight||0)+1)/2,Z=1-X,$=W.hasB,re=W.r,oe=W.overhead,ie=N.width,ue=N.height,me=Math.abs(R-O),be=Math.abs(D-j),ge=me>2*p&&be>2*p?p:0;me-=2*ge,be-=2*ge;var de=E(V);V!=="auto"||ie<=me&&ue<=be||!(ie>me||ue>be)||(ie>be||ue>me)&&ie<ue==me<be||(de+=90);var ve,pe,_e=P(N,de);if(re&&re-oe>p){var Te=function(fe,xe,we,Oe,ze,Pe,Ue,Ve,Ze){var it,tt,dt,yt,vt=Math.max(0,Math.abs(xe-fe)-2*p),et=Math.max(0,Math.abs(Oe-we)-2*p),Qe=Pe-p,wt=Ue?Qe-Math.sqrt(Qe*Qe-(Qe-Ue)*(Qe-Ue)):Qe,It=Ze?2*Qe:Ve?Qe-Ue:2*wt,Dt=Ze?2*Qe:Ve?2*wt:Qe-Ue;return ze.y/ze.x>=et/(vt-It)?yt=et/ze.y:ze.y/ze.x<=(et-Dt)/vt?yt=vt/ze.x:!Ze&&Ve?(it=ze.x*ze.x+ze.y*ze.y/4,dt=(vt-Qe)*(vt-Qe)+(et/2-Qe)*(et/2-Qe)-Qe*Qe,yt=(-(tt=-2*ze.x*(vt-Qe)-ze.y*(et/2-Qe))+Math.sqrt(tt*tt-4*it*dt))/(2*it)):Ze?(it=(ze.x*ze.x+ze.y*ze.y)/4,dt=(vt/2-Qe)*(vt/2-Qe)+(et/2-Qe)*(et/2-Qe)-Qe*Qe,yt=(-(tt=-ze.x*(vt/2-Qe)-ze.y*(et/2-Qe))+Math.sqrt(tt*tt-4*it*dt))/(2*it)):(it=ze.x*ze.x/4+ze.y*ze.y,dt=(vt/2-Qe)*(vt/2-Qe)+(et-Qe)*(et-Qe)-Qe*Qe,yt=(-(tt=-ze.x*(vt/2-Qe)-2*ze.y*(et-Qe))+Math.sqrt(tt*tt-4*it*dt))/(2*it)),{scale:yt=Math.min(1,yt),pad:Ve?Math.max(0,Qe-Math.sqrt(Math.max(0,Qe*Qe-(Qe-(et-ze.y*yt)/2)*(Qe-(et-ze.y*yt)/2)))-Ue):Math.max(0,Qe-Math.sqrt(Math.max(0,Qe*Qe-(Qe-(vt-ze.x*yt)/2)*(Qe-(vt-ze.x*yt)/2)))-Ue)}}(O,R,j,D,_e,re,oe,F,$);ve=Te.scale,pe=Te.pad}else ve=1,U&&(ve=Math.min(1,me/_e.x,be/_e.y)),pe=0;var le=N.left*Z+N.right*X,ae=(N.top+N.bottom)/2,he=(O+p)*Z+(R-p)*X,Se=(j+D)/2,ke=0,Me=0;if(K||J){var Ee=(F?_e.x:_e.y)/2;re&&(J||$)&&(ge+=pe);var De=F?_(O,R):_(j,D);F?K?(he=O+De*ge,ke=-De*Ee):(he=R-De*ge,ke=De*Ee):K?(Se=j+De*ge,Me=-De*Ee):(Se=D-De*ge,Me=De*Ee)}return{textX:le,textY:ae,targetX:he,targetY:Se,anchorX:ke,anchorY:Me,scale:ve,rotate:de}}ee.exports={plot:function(O,R,j,D,N,W){var F=R.xaxis,U=R.yaxis,V=O._fullLayout,te=O._context.staticPlot;N||(N={mode:V.barmode,norm:V.barmode,gap:V.bargap,groupgap:V.bargroupgap},r("bar",V));var J=o.makeTraceGroups(D,j,"trace bars").each(function(K){var X=M.select(this),Z=K[0].trace,$=K[0].t,re=Z.type==="waterfall",oe=Z.type==="funnel",ie=Z.type==="histogram",ue=Z.type==="bar",me=ue||oe,be=0;re&&Z.connector.visible&&Z.connector.mode==="between"&&(be=Z.connector.line.width/2);var ge=Z.orientation==="h",de=S(N),ve=o.ensureSingle(X,"g","points"),pe=m(Z),_e=ve.selectAll("g.point").data(o.identity,pe);_e.enter().append("g").classed("point",!0),_e.exit().remove(),_e.each(function(le,ae){var he,Se,ke=M.select(this),Me=function(nt,Re,Fe,rt){var Ye=[],ct=[],pt=rt?Re:Fe,gt=rt?Fe:Re;return Ye[0]=pt.c2p(nt.s0,!0),ct[0]=gt.c2p(nt.p0,!0),Ye[1]=pt.c2p(nt.s1,!0),ct[1]=gt.c2p(nt.p1,!0),rt?[Ye,ct]:[ct,Ye]}(le,F,U,ge),Ee=Me[0][0],De=Me[0][1],fe=Me[1][0],xe=Me[1][1],we=(ge?De-Ee:xe-fe)==0;if(we&&me&&l.getLineWidth(Z,le)&&(we=!1),we||(we=!(k(Ee)&&k(De)&&k(fe)&&k(xe))),le.isBlank=we,we&&(ge?De=Ee:xe=fe),be&&!we&&(ge?(Ee-=_(Ee,De)*be,De+=_(Ee,De)*be):(fe-=_(fe,xe)*be,xe+=_(fe,xe)*be)),Z.type==="waterfall"){if(!we){var Oe=Z[le.dir].marker;he=Oe.line.width,Se=Oe.color}}else he=l.getLineWidth(Z,le),Se=le.mc||Z.marker.color;function ze(nt){var Re=M.round(he/2%1,2);return N.gap===0&&N.groupgap===0?M.round(Math.round(nt)-Re,2):nt}var Pe=b.opacity(Se)<1||he>.01?ze:function(nt,Re,Fe){return Fe&&nt===Re?nt:Math.abs(nt-Re)>=2?ze(nt):nt>Re?Math.ceil(nt):Math.floor(nt)};O._context.staticPlot||(Ee=Pe(Ee,De,ge),De=Pe(De,Ee,ge),fe=Pe(fe,xe,!ge),xe=Pe(xe,fe,!ge));var Ue,Ve=ge?F.c2p:U.c2p;Ue=le.s0>0?le._sMax:le.s0<0?le._sMin:le.s1>0?le._sMax:le._sMin;var Ze,it,tt=ue||ie?function(nt,Re){if(!nt)return 0;var Fe,rt=Math.abs(ge?xe-fe:De-Ee),Ye=Math.abs(ge?De-Ee:xe-fe),ct=Pe(Math.abs(Ve(Ue,!0)-Ve(0,!0))),pt=le.hasB?Math.min(rt/2,Ye/2):Math.min(rt/2,ct);return Fe=Re==="%"?rt*(Math.min(50,nt)/100):nt,Pe(Math.max(Math.min(Fe,pt),0))}($.cornerradiusvalue,$.cornerradiusform):0,dt="M"+Ee+","+fe+"V"+xe+"H"+De+"V"+fe+"Z",yt=0;if(tt&&le.s){var vt=y(le.s0)===0||y(le.s)===y(le.s0)?le.s1:le.s0;if((yt=Pe(le.hasB?0:Math.abs(Ve(Ue,!0)-Ve(vt,!0))))<tt){var et=_(Ee,De),Qe=_(fe,xe),wt=et===-Qe?1:0;if(ge)if(le.hasB)Ze="M"+(Ee+tt*et)+","+fe+"A "+tt+","+tt+" 0 0 "+wt+" "+Ee+","+(fe+tt*Qe)+"V"+(xe-tt*Qe)+"A "+tt+","+tt+" 0 0 "+wt+" "+(Ee+tt*et)+","+xe+"H"+(De-tt*et)+"A "+tt+","+tt+" 0 0 "+wt+" "+De+","+(xe-tt*Qe)+"V"+(fe+tt*Qe)+"A "+tt+","+tt+" 0 0 "+wt+" "+(De-tt*et)+","+fe+"Z";else{var It=(it=Math.abs(De-Ee)+yt)<tt?tt-Math.sqrt(it*(2*tt-it)):0,Dt=yt>0?Math.sqrt(yt*(2*tt-yt)):0,Ct=et>0?Math.max:Math.min;Ze="M"+Ee+","+fe+"V"+(xe-It*Qe)+"H"+Ct(De-(tt-yt)*et,Ee)+"A "+tt+","+tt+" 0 0 "+wt+" "+De+","+(xe-tt*Qe-Dt)+"V"+(fe+tt*Qe+Dt)+"A "+tt+","+tt+" 0 0 "+wt+" "+Ct(De-(tt-yt)*et,Ee)+","+(fe+It*Qe)+"Z"}else if(le.hasB)Ze="M"+(Ee+tt*et)+","+fe+"A "+tt+","+tt+" 0 0 "+wt+" "+Ee+","+(fe+tt*Qe)+"V"+(xe-tt*Qe)+"A "+tt+","+tt+" 0 0 "+wt+" "+(Ee+tt*et)+","+xe+"H"+(De-tt*et)+"A "+tt+","+tt+" 0 0 "+wt+" "+De+","+(xe-tt*Qe)+"V"+(fe+tt*Qe)+"A "+tt+","+tt+" 0 0 "+wt+" "+(De-tt*et)+","+fe+"Z";else{var He=(it=Math.abs(xe-fe)+yt)<tt?tt-Math.sqrt(it*(2*tt-it)):0,We=yt>0?Math.sqrt(yt*(2*tt-yt)):0,Be=Qe>0?Math.max:Math.min;Ze="M"+(Ee+He*et)+","+fe+"V"+Be(xe-(tt-yt)*Qe,fe)+"A "+tt+","+tt+" 0 0 "+wt+" "+(Ee+tt*et-We)+","+xe+"H"+(De-tt*et+We)+"A "+tt+","+tt+" 0 0 "+wt+" "+(De-He*et)+","+Be(xe-(tt-yt)*Qe,fe)+"V"+fe+"Z"}}else Ze=dt}else Ze=dt;var Ge=f(o.ensureSingle(ke,"path"),V,N,W);if(Ge.style("vector-effect",te?"none":"non-scaling-stroke").attr("d",isNaN((De-Ee)*(xe-fe))||we&&O._context.staticPlot?"M0,0Z":Ze).call(h.setClipUrl,R.layerClipId,O),!V.uniformtext.mode&&de){var at=h.makePointStyleFns(Z);h.singlePointStyle(le,Ge,Z,at,O)}(function(nt,Re,Fe,rt,Ye,ct,pt,gt,ut,Mt,xt,mt,Et){var Lt,zt=Re.xaxis,Wt=Re.yaxis,rn=nt._fullLayout;function Ut(ir,Gt,dn){return o.ensureSingle(ir,"text").text(Gt).attr({class:"bartext bartext-"+Lt,"text-anchor":"middle","data-notex":1}).call(h.font,dn).call(T.convertToTspans,nt)}var Vt=rt[0].trace,en=Vt.orientation==="h",Ln=function(ir,Gt,dn,Pt,Yt){var Qt,mn=Gt[0].trace;return Qt=mn.texttemplate?function(vn,_n,sn,Kt,Jt){var on=_n[0].trace,fn=o.castOption(on,sn,"texttemplate");if(!fn)return"";var En,On,Vn,jn,Kn=on.type==="histogram",Yn=on.type==="waterfall",nr=on.type==="funnel",rr=on.orientation==="h";function Jn(Gr){return t(jn,jn.c2l(Gr),!0).text}rr?(En="y",On=Jt,Vn="x",jn=Kt):(En="x",On=Kt,Vn="y",jn=Jt);var vr,lr=_n[sn],dr={};dr.label=lr.p,dr.labelLabel=dr[En+"Label"]=(vr=lr.p,t(On,On.c2l(vr),!0).text);var $n=o.castOption(on,lr.i,"text");($n===0||$n)&&(dr.text=$n),dr.value=lr.s,dr.valueLabel=dr[Vn+"Label"]=Jn(lr.s);var _r={};g(_r,on,lr.i),(Kn||_r.x===void 0)&&(_r.x=rr?dr.value:dr.label),(Kn||_r.y===void 0)&&(_r.y=rr?dr.label:dr.value),(Kn||_r.xLabel===void 0)&&(_r.xLabel=rr?dr.valueLabel:dr.labelLabel),(Kn||_r.yLabel===void 0)&&(_r.yLabel=rr?dr.labelLabel:dr.valueLabel),Yn&&(dr.delta=+lr.rawS||lr.s,dr.deltaLabel=Jn(dr.delta),dr.final=lr.v,dr.finalLabel=Jn(dr.final),dr.initial=dr.final-dr.delta,dr.initialLabel=Jn(dr.initial)),nr&&(dr.value=lr.s,dr.valueLabel=Jn(dr.value),dr.percentInitial=lr.begR,dr.percentInitialLabel=o.formatPercent(lr.begR),dr.percentPrevious=lr.difR,dr.percentPreviousLabel=o.formatPercent(lr.difR),dr.percentTotal=lr.sumR,dr.percenTotalLabel=o.formatPercent(lr.sumR));var Lr=o.castOption(on,lr.i,"customdata");return Lr&&(dr.customdata=Lr),o.texttemplateString(fn,dr,vn._d3locale,_r,dr,on._meta||{})}(ir,Gt,dn,Pt,Yt):mn.textinfo?function(vn,_n,sn,Kt){var Jt=vn[0].trace,on=Jt.orientation==="h",fn=Jt.type==="waterfall",En=Jt.type==="funnel";function On(Lr){return t(on?sn:Kt,+Lr,!0).text}var Vn,jn,Kn=Jt.textinfo,Yn=vn[_n],nr=Kn.split("+"),rr=[],Jn=function(Lr){return nr.indexOf(Lr)!==-1};if(Jn("label")&&rr.push((jn=vn[_n].p,t(on?Kt:sn,jn,!0).text)),Jn("text")&&((Vn=o.castOption(Jt,Yn.i,"text"))===0||Vn)&&rr.push(Vn),fn){var vr=+Yn.rawS||Yn.s,lr=Yn.v,dr=lr-vr;Jn("initial")&&rr.push(On(dr)),Jn("delta")&&rr.push(On(vr)),Jn("final")&&rr.push(On(lr))}if(En){Jn("value")&&rr.push(On(Yn.s));var $n=0;Jn("percent initial")&&$n++,Jn("percent previous")&&$n++,Jn("percent total")&&$n++;var _r=$n>1;Jn("percent initial")&&(Vn=o.formatPercent(Yn.begR),_r&&(Vn+=" of initial"),rr.push(Vn)),Jn("percent previous")&&(Vn=o.formatPercent(Yn.difR),_r&&(Vn+=" of previous"),rr.push(Vn)),Jn("percent total")&&(Vn=o.formatPercent(Yn.sumR),_r&&(Vn+=" of total"),rr.push(Vn))}return rr.join("<br>")}(Gt,dn,Pt,Yt):l.getValue(mn.text,dn),l.coerceString(c,Qt)}(rn,rt,Ye,zt,Wt);Lt=function(ir,Gt){var dn=l.getValue(ir.textposition,Gt);return l.coerceEnumerated(x,dn)}(Vt,Ye);var An=mt.mode==="stack"||mt.mode==="relative",hn=rt[Ye],Xt=!An||hn._outmost,ln=hn.hasB,nn=Mt&&Mt-xt>p;if(Ln&&Lt!=="none"&&(!hn.isBlank&&ct!==pt&&gt!==ut||Lt!=="auto"&&Lt!=="inside")){var cn=rn.font,Tn=a.getBarColor(rt[Ye],Vt),Mn=a.getInsideTextFont(Vt,Ye,cn,Tn),zn=a.getOutsideTextFont(Vt,Ye,cn),In=Vt.insidetextanchor||"end",Pn=Fe.datum();en?zt.type==="log"&&Pn.s0<=0&&(ct=zt.range[0]<zt.range[1]?0:zt._length):Wt.type==="log"&&Pn.s0<=0&&(gt=Wt.range[0]<Wt.range[1]?Wt._length:0);var Hn,Fn,tr,or,ur,er=Math.abs(pt-ct),Mr=Math.abs(ut-gt),jt=er-2*p,tn=Mr-2*p;if(Lt==="outside"&&(Xt||hn.hasB||(Lt="inside")),Lt==="auto")if(Xt){Lt="inside",Hn=Ut(Fe,Ln,ur=o.ensureUniformFontSize(nt,Mn)),tr=(Fn=h.bBox(Hn.node())).width,or=Fn.height;var xn,pn=tr>0&&or>0;xn=nn?ln?w(jt-2*Mt,tn,tr,or,en)||w(jt,tn-2*Mt,tr,or,en):en?w(jt-(Mt-xt),tn,tr,or,en)||w(jt,tn-2*(Mt-xt),tr,or,en):w(jt,tn-(Mt-xt),tr,or,en)||w(jt-2*(Mt-xt),tn,tr,or,en):w(jt,tn,tr,or,en),pn&&xn?Lt="inside":(Lt="outside",Hn.remove(),Hn=null)}else Lt="inside";if(!Hn){var Sn=(Hn=Ut(Fe,Ln,ur=o.ensureUniformFontSize(nt,Lt==="outside"?zn:Mn))).attr("transform");if(Hn.attr("transform",""),tr=(Fn=h.bBox(Hn.node())).width,or=Fn.height,Hn.attr("transform",Sn),tr<=0||or<=0)return void Hn.remove()}var Gn,Rn=Vt.textangle;Gn=Lt==="outside"?function(ir,Gt,dn,Pt,Yt,Qt){var mn,vn=!!Qt.isHorizontal,_n=!!Qt.constrained,sn=Qt.angle||0,Kt=Yt.width,Jt=Yt.height,on=Math.abs(Gt-ir),fn=Math.abs(Pt-dn);mn=vn?fn>2*p?p:0:on>2*p?p:0;var En=1;_n&&(En=vn?Math.min(1,fn/Jt):Math.min(1,on/Kt));var On=E(sn),Vn=P(Yt,On),jn=(vn?Vn.x:Vn.y)/2,Kn=(Yt.left+Yt.right)/2,Yn=(Yt.top+Yt.bottom)/2,nr=(ir+Gt)/2,rr=(dn+Pt)/2,Jn=0,vr=0,lr=vn?_(Gt,ir):_(dn,Pt);return vn?(nr=Gt-lr*mn,Jn=lr*jn):(rr=Pt+lr*mn,vr=-lr*jn),{textX:Kn,textY:Yn,targetX:nr,targetY:rr,anchorX:Jn,anchorY:vr,scale:En,rotate:On}}(ct,pt,gt,ut,Fn,{isHorizontal:en,constrained:Vt.constraintext==="both"||Vt.constraintext==="outside",angle:Rn}):C(ct,pt,gt,ut,Fn,{isHorizontal:en,constrained:Vt.constraintext==="both"||Vt.constraintext==="inside",angle:Rn,anchor:In,hasB:ln,r:Mt,overhead:xt}),Gn.fontSize=ur.size,n(Vt.type==="histogram"?"bar":Vt.type,Gn,rn),hn.transform=Gn;var Nn=f(Hn,rn,mt,Et);o.setTransormAndDisplay(Nn,Gn)}else Fe.select("text").remove()})(O,R,ke,K,ae,Ee,De,fe,xe,tt,yt,N,W),R.layerClipId&&h.hideOutsideRangePoint(le,ke.select("text"),F,U,Z.xcalendar,Z.ycalendar)});var Te=Z.cliponaxis===!1;h.setClipUrl(X,Te?null:R.layerClipId,O)});s.getComponentMethod("errorbars","plot")(O,J,R,N)},toMoveInsideBar:C}},45784:function(ee){"use strict";function z(e,M,k,o,T){var b=M.c2p(o?e.s0:e.p0,!0),h=M.c2p(o?e.s1:e.p1,!0),s=k.c2p(o?e.p0:e.s0,!0),t=k.c2p(o?e.p1:e.s1,!0);return T?[(b+h)/2,(s+t)/2]:o?[h,(s+t)/2]:[(b+h)/2,t]}ee.exports=function(e,M){var k,o=e.cd,T=e.xaxis,b=e.yaxis,h=o[0].trace,s=h.type==="funnel",t=h.orientation==="h",i=[];if(M===!1)for(k=0;k<o.length;k++)o[k].selected=0;else for(k=0;k<o.length;k++){var n=o[k],r="ct"in n?n.ct:z(n,T,b,t,s);M.contains(r,!1,k,e)?(i.push({pointNumber:k,x:T.c2d(n.x),y:b.c2d(n.y)}),n.selected=1):n.selected=0}return i}},72592:function(ee,z,e){"use strict";ee.exports=k;var M=e(3400).distinctVals;function k(o,T){this.traces=o,this.sepNegVal=T.sepNegVal,this.overlapNoMerge=T.overlapNoMerge;for(var b=1/0,h=T.posAxis._id.charAt(0),s=[],t=0;t<o.length;t++){for(var i=o[t],n=0;n<i.length;n++){var r=i[n],a=r.p;a===void 0&&(a=r[h]),a!==void 0&&s.push(a)}i[0]&&i[0].width1&&(b=Math.min(i[0].width1,b))}this.positions=s;var l=M(s);this.distinctPositions=l.vals,l.vals.length===1&&b!==1/0?this.minDiff=b:this.minDiff=Math.min(l.minDiff,b);var u=(T.posAxis||{}).type;u!=="category"&&u!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(o,T){var b=this.getLabel(o,T),h=this.bins[b]||0;return this.bins[b]=h+T,h},k.prototype.get=function(o,T){var b=this.getLabel(o,T);return this.bins[b]||0},k.prototype.getLabel=function(o,T){return(T<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?o:Math.round(o/this.binWidth))}},60100:function(ee,z,e){"use strict";var M=e(33428),k=e(76308),o=e(43616),T=e(3400),b=e(24040),h=e(82744).resizeText,s=e(20832),t=s.textfont,i=s.insidetextfont,n=s.outsidetextfont,r=e(60444);function a(v,m,y){o.pointStyle(v.selectAll("path"),m,y),l(v,m,y)}function l(v,m,y){v.selectAll("text").each(function(_){var f=M.select(this),S=T.ensureUniformFontSize(y,u(f,_,m,y));o.font(f,S)})}function u(v,m,y,_){var f=_._fullLayout.font,S=y.textfont;if(v.classed("bartext-inside")){var w=p(m,y);S=c(y,m.i,f,w)}else v.classed("bartext-outside")&&(S=x(y,m.i,f));return S}function d(v,m,y){return g(t,v.textfont,m,y)}function c(v,m,y,_){var f=d(v,m,y);return(v._input.textfont===void 0||v._input.textfont.color===void 0||Array.isArray(v.textfont.color)&&v.textfont.color[m]===void 0)&&(f={color:k.contrast(_),family:f.family,size:f.size}),g(i,v.insidetextfont,m,f)}function x(v,m,y){var _=d(v,m,y);return g(n,v.outsidetextfont,m,_)}function g(v,m,y,_){m=m||{};var f=r.getValue(m.family,y),S=r.getValue(m.size,y),w=r.getValue(m.color,y);return{family:r.coerceString(v.family,f,_.family),size:r.coerceNumber(v.size,S,_.size),color:r.coerceColor(v.color,w,_.color)}}function p(v,m){return m.type==="waterfall"?m[v.dir].marker.color:v.mcc||v.mc||m.marker.color}ee.exports={style:function(v){var m=M.select(v).selectAll("g.barlayer").selectAll("g.trace");h(v,m,"bar");var y=m.size(),_=v._fullLayout;m.style("opacity",function(f){return f[0].trace.opacity}).each(function(f){(_.barmode==="stack"&&y>1||_.bargap===0&&_.bargroupgap===0&&!f[0].trace.marker.line.width)&&M.select(this).attr("shape-rendering","crispEdges")}),m.selectAll("g.points").each(function(f){a(M.select(this),f[0].trace,v)}),b.getComponentMethod("errorbars","style")(m)},styleTextPoints:l,styleOnSelect:function(v,m,y){var _=m[0].trace;_.selectedpoints?function(f,S,w){o.selectedPointStyle(f.selectAll("path"),S),function(E,P,C){E.each(function(O){var R,j=M.select(this);if(O.selected){R=T.ensureUniformFontSize(C,u(j,O,P,C));var D=P.selected.textfont&&P.selected.textfont.color;D&&(R.color=D),o.font(j,R)}else o.selectedTextStyle(j,P)})}(f.selectAll("text"),S,w)}(y,_,v):(a(y,_,v),b.getComponentMethod("errorbars","style")(y))},getInsideTextFont:c,getOutsideTextFont:x,getBarColor:p,resizeText:h}},55592:function(ee,z,e){"use strict";var M=e(76308),k=e(94288).hasColorscale,o=e(27260),T=e(3400).coercePattern;ee.exports=function(b,h,s,t,i){var n=s("marker.color",t),r=k(b,"marker");r&&o(b,h,i,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",M.defaultLine),k(b,"marker.line")&&o(b,h,i,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),T(s,"marker.pattern",n,r),s("selected.marker.color"),s("unselected.marker.color")}},82744:function(ee,z,e){"use strict";var M=e(33428),k=e(3400);function o(T){return"_"+T+"Text_minsize"}ee.exports={recordMinTextSize:function(T,b,h){if(h.uniformtext.mode){var s=o(T),t=h.uniformtext.minsize,i=b.scale*b.fontSize;b.hide=i<t,h[s]=h[s]||1/0,b.hide||(h[s]=Math.min(h[s],Math.max(i,t)))}},clearMinTextSize:function(T,b){b[o(T)]=void 0},resizeText:function(T,b,h){var s=T._fullLayout,t=s["_"+h+"Text_minsize"];if(t){var i,n=s.uniformtext.mode==="hide";switch(h){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}b.selectAll(i).each(function(r){var a=r.transform;if(a){a.scale=n&&a.hide?0:t/a.fontSize;var l=M.select(this).select("text");k.setTransormAndDisplay(l,a)}})}}}},78100:function(ee,z,e){"use strict";var M,k=e(21776).Ks,o=e(92880).extendFlat,T=e(8319),b=e(20832);ee.exports={r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,base:o({},b.base,{}),offset:o({},b.offset,{}),width:o({},b.width,{}),text:o({},b.text,{}),hovertext:o({},b.hovertext,{}),marker:(M=o({},b.marker),delete M.cornerradius,M),hoverinfo:T.hoverinfo,hovertemplate:k(),selected:b.selected,unselected:b.unselected}},47056:function(ee,z,e){"use strict";var M=e(94288).hasColorscale,k=e(47128),o=e(3400).isArrayOrTypedArray,T=e(84664),b=e(96376).setGroupPositions,h=e(4500),s=e(24040).traceIs,t=e(3400).extendFlat;ee.exports={calc:function(i,n){for(var r=i._fullLayout,a=n.subplot,l=r[a].radialaxis,u=r[a].angularaxis,d=l.makeCalcdata(n,"r"),c=u.makeCalcdata(n,"theta"),x=n._length,g=new Array(x),p=d,v=c,m=0;m<x;m++)g[m]={p:v[m],s:p[m]};function y(_){var f=n[_];f!==void 0&&(n["_"+_]=o(f)?u.makeCalcdata(n,_):u.d2c(f,n.thetaunit))}return u.type==="linear"&&(y("width"),y("offset")),M(n,"marker")&&k(i,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),M(n,"marker.line")&&k(i,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(g,n),h(g,n),g},crossTraceCalc:function(i,n,r){for(var a=i.calcdata,l=[],u=0;u<a.length;u++){var d=a[u],c=d[0].trace;c.visible===!0&&s(c,"bar")&&c.subplot===r&&l.push(d)}var x=t({},n.radialaxis,{_id:"x"}),g=n.angularaxis;b(i,g,x,l,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},70384:function(ee,z,e){"use strict";var M=e(3400),k=e(85968).handleRThetaDefaults,o=e(55592),T=e(78100);ee.exports=function(b,h,s,t){function i(n,r){return M.coerce(b,h,T,n,r)}k(b,h,t,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),o(b,h,i,s,t),M.coerceSelectionMarkerOpacity(h,i)):h.visible=!1}},68896:function(ee,z,e){"use strict";var M=e(93024),k=e(3400),o=e(63400).getTraceColor,T=k.fillText,b=e(8504).makeHoverPointText,h=e(57384).isPtInsidePolygon;ee.exports=function(s,t,i){var n=s.cd,r=n[0].trace,a=s.subplot,l=a.radialAxis,u=a.angularAxis,d=a.vangles,c=d?h:k.isPtInsideSector,x=s.maxHoverDistance,g=u._period||2*Math.PI,p=Math.abs(l.g2p(Math.sqrt(t*t+i*i))),v=Math.atan2(i,t);if(l.range[0]>l.range[1]&&(v+=Math.PI),M.getClosest(n,function(_){return c(p,v,[_.rp0,_.rp1],[_.thetag0,_.thetag1],d)?x+Math.min(1,Math.abs(_.thetag1-_.thetag0)/g)-1+(_.rp1-p)/(_.rp1-_.rp0)-1:1/0},s),s.index!==!1){var m=n[s.index];s.x0=s.x1=m.ct[0],s.y0=s.y1=m.ct[1];var y=k.extendFlat({},m,{r:m.s,theta:m.p});return T(m,r,s),b(y,r,a,s),s.hovertemplate=r.hovertemplate,s.color=o(r,m),s.xLabelVal=s.yLabelVal=void 0,m.s<0&&(s.idealAlign="left"),[s]}}},94456:function(ee,z,e){"use strict";ee.exports={moduleType:"trace",name:"barpolar",basePlotModule:e(40872),categories:["polar","bar","showLegend"],attributes:e(78100),layoutAttributes:e(9320),supplyDefaults:e(70384),supplyLayoutDefaults:e(89580),calc:e(47056).calc,crossTraceCalc:e(47056).crossTraceCalc,plot:e(42040),colorbar:e(5528),formatLabels:e(22852),style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,hoverPoints:e(68896),selectPoints:e(45784),meta:{}}},9320:function(ee){"use strict";ee.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(ee,z,e){"use strict";var M=e(3400),k=e(9320);ee.exports=function(o,T,b){var h,s={};function t(r,a){return M.coerce(o[h]||{},T[h],k,r,a)}for(var i=0;i<b.length;i++){var n=b[i];n.type==="barpolar"&&n.visible===!0&&(s[h=n.subplot]||(t("barmode"),t("bargap"),s[h]=1))}}},42040:function(ee,z,e){"use strict";var M=e(33428),k=e(38248),o=e(3400),T=e(43616),b=e(57384);ee.exports=function(h,s,t){var i=h._context.staticPlot,n=s.xaxis,r=s.yaxis,a=s.radialAxis,l=s.angularAxis,u=function(c){var x=c.cxx,g=c.cyy;return c.vangles?function(p,v,m,y){var _,f;o.angleDelta(m,y)>0?(_=m,f=y):(_=y,f=m);var S=[b.findEnclosingVertexAngles(_,c.vangles)[0],(_+f)/2,b.findEnclosingVertexAngles(f,c.vangles)[1]];return b.pathPolygonAnnulus(p,v,_,f,S,x,g)}:function(p,v,m,y){return o.pathAnnulus(p,v,m,y,x,g)}}(s),d=s.layers.frontplot.select("g.barlayer");o.makeTraceGroups(d,t,"trace bars").each(function(){var c=M.select(this),x=o.ensureSingle(c,"g","points").selectAll("g.point").data(o.identity);x.enter().append("g").style("vector-effect",i?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(g){var p,v=M.select(this),m=g.rp0=a.c2p(g.s0),y=g.rp1=a.c2p(g.s1),_=g.thetag0=l.c2g(g.p0),f=g.thetag1=l.c2g(g.p1);if(k(m)&&k(y)&&k(_)&&k(f)&&m!==y&&_!==f){var S=a.c2g(g.s1),w=(_+f)/2;g.ct=[n.c2p(S*Math.cos(w)),r.c2p(S*Math.sin(w))],p=u(m,y,_,f)}else p="M0,0Z";o.ensureSingle(v,"path").attr("d",p)}),T.setClipUrl(c,s._hasClipOnAxisFalse?s.clipIds.forTraces:null,h)})}},63188:function(ee,z,e){"use strict";var M=e(98304),k=e(52904),o=e(20832),T=e(22548),b=e(29736).axisHoverFormat,h=e(21776).Ks,s=e(92880).extendFlat,t=k.marker,i=t.line;ee.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:s({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:s({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:s({},t.angle,{arrayOk:!1,editType:"calc"}),size:s({},t.size,{arrayOk:!1,editType:"calc"}),color:s({},t.color,{arrayOk:!1,editType:"style"}),line:{color:s({},i.color,{arrayOk:!1,dflt:T.defaultLine,editType:"style"}),width:s({},i.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup,selected:{marker:k.selected.marker,editType:"style"},unselected:{marker:k.unselected.marker,editType:"style"},text:s({},k.text,{}),hovertext:s({},k.hovertext,{}),hovertemplate:h({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},62555:function(ee,z,e){"use strict";var M=e(38248),k=e(54460),o=e(1220),T=e(3400),b=e(39032).BADNUM,h=T._;ee.exports=function(c,x){var g,p,v,m,y,_,f,S=c._fullLayout,w=k.getFromId(c,x.xaxis||"x"),E=k.getFromId(c,x.yaxis||"y"),P=[],C=x.type==="violin"?"_numViolins":"_numBoxes";x.orientation==="h"?(v=w,m="x",y=E,_="y",f=!!x.yperiodalignment):(v=E,m="y",y=w,_="x",f=!!x.xperiodalignment);var O,R,j,D,N,W,F=function(ze,Pe,Ue,Ve){var Ze,it=Pe+"0"in ze;if(Pe in ze||it&&"d"+Pe in ze){var tt=Ue.makeCalcdata(ze,Pe);return[o(ze,Ue,Pe,tt).vals,tt]}Ze=it?ze[Pe+"0"]:"name"in ze&&(Ue.type==="category"||M(ze.name)&&["linear","log"].indexOf(Ue.type)!==-1||T.isDateTime(ze.name)&&Ue.type==="date")?ze.name:Ve;for(var dt=Ue.type==="multicategory"?Ue.r2c_just_indices(Ze):Ue.d2c(Ze,0,ze[Pe+"calendar"]),yt=ze._length,vt=new Array(yt),et=0;et<yt;et++)vt[et]=dt;return[vt]}(x,_,y,S[C]),U=F[0],V=F[1],te=T.distinctVals(U,y),J=te.vals,K=te.minDiff/2,X=(x.boxpoints||x.points)==="all"?T.identity:function(ze){return ze.v<O.lf||ze.v>O.uf};if(x._hasPreCompStats){var Z=x[m],$=function(ze){return v.d2c((x[ze]||[])[g])},re=1/0,oe=-1/0;for(g=0;g<x._length;g++){var ie=U[g];if(M(ie)){if((O={}).pos=O[_]=ie,f&&V&&(O.orig_p=V[g]),O.q1=$("q1"),O.med=$("median"),O.q3=$("q3"),R=[],Z&&T.isArrayOrTypedArray(Z[g]))for(p=0;p<Z[g].length;p++)(W=v.d2c(Z[g][p]))!==b&&(t(N={v:W,i:[g,p]},x,[g,p]),R.push(N));if(O.pts=R.sort(i),D=(j=O[m]=R.map(n)).length,O.med!==b&&O.q1!==b&&O.q3!==b&&O.med>=O.q1&&O.q3>=O.med){var ue=$("lowerfence");O.lf=ue!==b&&ue<=O.q1?ue:r(O,j,D);var me=$("upperfence");O.uf=me!==b&&me>=O.q3?me:a(O,j,D);var be=$("mean");O.mean=be!==b?be:D?T.mean(j,D):(O.q1+O.q3)/2;var ge=$("sd");O.sd=be!==b&&ge>=0?ge:D?T.stdev(j,D,O.mean):O.q3-O.q1,O.lo=l(O),O.uo=u(O);var de=$("notchspan");de=de!==b&&de>0?de:d(O,D),O.ln=O.med-de,O.un=O.med+de;var ve=O.lf,pe=O.uf;x.boxpoints&&j.length&&(ve=Math.min(ve,j[0]),pe=Math.max(pe,j[D-1])),x.notched&&(ve=Math.min(ve,O.ln),pe=Math.max(pe,O.un)),O.min=ve,O.max=pe}else{var _e;T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+O.q1,"median = "+O.med,"q3 = "+O.q3].join(`
`)),_e=O.med!==b?O.med:O.q1!==b?O.q3!==b?(O.q1+O.q3)/2:O.q1:O.q3!==b?O.q3:0,O.med=_e,O.q1=O.q3=_e,O.lf=O.uf=_e,O.mean=O.sd=_e,O.ln=O.un=_e,O.min=O.max=_e}re=Math.min(re,O.min),oe=Math.max(oe,O.max),O.pts2=R.filter(X),P.push(O)}}x._extremes[v._id]=k.findExtremes(v,[re,oe],{padded:!0})}else{var Te=v.makeCalcdata(x,m),le=function(ze,Pe){for(var Ue=ze.length,Ve=new Array(Ue+1),Ze=0;Ze<Ue;Ze++)Ve[Ze]=ze[Ze]-Pe;return Ve[Ue]=ze[Ue-1]+Pe,Ve}(J,K),ae=J.length,he=function(ze){for(var Pe=new Array(ze),Ue=0;Ue<ze;Ue++)Pe[Ue]=[];return Pe}(ae);for(g=0;g<x._length;g++)if(W=Te[g],M(W)){var Se=T.findBin(U[g],le);Se>=0&&Se<ae&&(t(N={v:W,i:g},x,g),he[Se].push(N))}var ke=1/0,Me=-1/0,Ee=x.quartilemethod,De=Ee==="exclusive",fe=Ee==="inclusive";for(g=0;g<ae;g++)if(he[g].length>0){var xe,we;(O={}).pos=O[_]=J[g],R=O.pts=he[g].sort(i),D=(j=O[m]=R.map(n)).length,O.min=j[0],O.max=j[D-1],O.mean=T.mean(j,D),O.sd=T.stdev(j,D,O.mean)*x.sdmultiple,O.med=T.interp(j,.5),D%2&&(De||fe)?(De?(xe=j.slice(0,D/2),we=j.slice(D/2+1)):fe&&(xe=j.slice(0,D/2+1),we=j.slice(D/2)),O.q1=T.interp(xe,.5),O.q3=T.interp(we,.5)):(O.q1=T.interp(j,.25),O.q3=T.interp(j,.75)),O.lf=r(O,j,D),O.uf=a(O,j,D),O.lo=l(O),O.uo=u(O);var Oe=d(O,D);O.ln=O.med-Oe,O.un=O.med+Oe,ke=Math.min(ke,O.ln),Me=Math.max(Me,O.un),O.pts2=R.filter(X),P.push(O)}x.notched&&T.isTypedArray(Te)&&(Te=Array.from(Te)),x._extremes[v._id]=k.findExtremes(v,x.notched?Te.concat([ke,Me]):Te,{padded:!0})}return function(ze,Pe){if(T.isArrayOrTypedArray(Pe.selectedpoints))for(var Ue=0;Ue<ze.length;Ue++){for(var Ve=ze[Ue].pts||[],Ze={},it=0;it<Ve.length;it++)Ze[Ve[it].i]=it;T.tagSelected(Ve,Pe,Ze)}}(P,x),P.length>0?(P[0].t={num:S[C],dPos:K,posLetter:_,valLetter:m,labels:{med:h(c,"median:"),min:h(c,"min:"),q1:h(c,"q1:"),q3:h(c,"q3:"),max:h(c,"max:"),mean:x.boxmean==="sd"||x.sizemode==="sd"?h(c,"mean \xB1 \u03C3:").replace("\u03C3",x.sdmultiple===1?"\u03C3":x.sdmultiple+"\u03C3"):h(c,"mean:"),lf:h(c,"lower fence:"),uf:h(c,"upper fence:")}},S[C]++,P):[{t:{empty:!0}}]};var s={text:"tx",hovertext:"htx"};function t(c,x,g){for(var p in s)T.isArrayOrTypedArray(x[p])&&(Array.isArray(g)?T.isArrayOrTypedArray(x[p][g[0]])&&(c[s[p]]=x[p][g[0]][g[1]]):c[s[p]]=x[p][g])}function i(c,x){return c.v-x.v}function n(c){return c.v}function r(c,x,g){return g===0?c.q1:Math.min(c.q1,x[Math.min(T.findBin(2.5*c.q1-1.5*c.q3,x,!0)+1,g-1)])}function a(c,x,g){return g===0?c.q3:Math.max(c.q3,x[Math.max(T.findBin(2.5*c.q3-1.5*c.q1,x),0)])}function l(c){return 4*c.q1-3*c.q3}function u(c){return 4*c.q3-3*c.q1}function d(c,x){return x===0?0:1.57*(c.q3-c.q1)/Math.sqrt(x)}},96404:function(ee,z,e){"use strict";var M=e(54460),k=e(3400),o=e(71888).getAxisGroup,T=["v","h"];function b(h,s,t,i){var n,r,a,l=s.calcdata,u=s._fullLayout,d=i._id,c=d.charAt(0),x=[],g=0;for(n=0;n<t.length;n++)for(a=l[t[n]],r=0;r<a.length;r++)x.push(i.c2l(a[r].pos,!0)),g+=(a[r].pts2||[]).length;if(x.length){var p=k.distinctVals(x);i.type!=="category"&&i.type!=="multicategory"||(p.minDiff=1);var v=p.minDiff/2;M.minDtick(i,p.minDiff,p.vals[0],!0);var m=u[h==="violin"?"_numViolins":"_numBoxes"],y=u[h+"mode"]==="group"&&m>1,_=1-u[h+"gap"],f=1-u[h+"groupgap"];for(n=0;n<t.length;n++){var S,w,E,P,C,O,R=(a=l[t[n]])[0].trace,j=a[0].t,D=R.width,N=R.side;if(D)S=w=P=D/2,E=0;else if(S=v,y){var W=o(u,i._id)+R.orientation,F=(u._alignmentOpts[W]||{})[R.alignmentgroup]||{},U=Object.keys(F.offsetGroups||{}).length,V=U||m;w=S*_*f/V,E=2*S*(((U?R._offsetIndex:j.num)+.5)/V-.5)*_,P=S*_/V}else w=S*_*f,E=0,P=S;j.dPos=S,j.bPos=E,j.bdPos=w,j.wHover=P;var te,J,K,X,Z,$,re=E+w,oe=Boolean(D);if(N==="positive"?(C=S*(D?1:.5),te=re,O=te=E):N==="negative"?(C=te=E,O=S*(D?1:.5),J=re):(C=O=S,te=J=re),(R.boxpoints||R.points)&&g>0){var ie=R.pointpos,ue=R.jitter,me=R.marker.size/2,be=0;ie+ue>=0&&((be=re*(ie+ue))>C?(oe=!0,Z=me,K=be):be>te&&(Z=me,K=C)),be<=C&&(K=C);var ge=0;ie-ue<=0&&((ge=-re*(ie-ue))>O?(oe=!0,$=me,X=ge):ge>J&&($=me,X=O)),ge<=O&&(X=O)}else K=C,X=O;var de=new Array(a.length);for(r=0;r<a.length;r++)de[r]=a[r].pos;R._extremes[d]=M.findExtremes(i,de,{padded:oe,vpadminus:X,vpadplus:K,vpadLinearized:!0,ppadminus:{x:$,y:Z}[c],ppadplus:{x:Z,y:$}[c]})}}}ee.exports={crossTraceCalc:function(h,s){for(var t=h.calcdata,i=s.xaxis,n=s.yaxis,r=0;r<T.length;r++){for(var a=T[r],l=a==="h"?n:i,u=[],d=0;d<t.length;d++){var c=t[d],x=c[0].t,g=c[0].trace;g.visible!==!0||g.type!=="box"&&g.type!=="candlestick"||x.empty||(g.orientation||"v")!==a||g.xaxis!==i._id||g.yaxis!==n._id||u.push(d)}b("box",h,u,l)}},setPositionOffset:b}},90624:function(ee,z,e){"use strict";var M=e(3400),k=e(24040),o=e(76308),T=e(31147),b=e(20011),h=e(52976),s=e(63188);function t(n,r,a,l){function u(N){var W=0;return N&&N.length&&(W+=1,M.isArrayOrTypedArray(N[0])&&N[0].length&&(W+=1)),W}function d(N){return M.validate(n[N],s[N])}var c,x=a("y"),g=a("x");if(r.type==="box"){var p=a("q1"),v=a("median"),m=a("q3");r._hasPreCompStats=p&&p.length&&v&&v.length&&m&&m.length,c=Math.min(M.minRowLength(p),M.minRowLength(v),M.minRowLength(m))}var y,_,f=u(x),S=u(g),w=f&&M.minRowLength(x),E=S&&M.minRowLength(g),P=l.calendar,C={autotypenumbers:l.autotypenumbers};if(r._hasPreCompStats)switch(String(S)+String(f)){case"00":var O=d("x0")||d("dx");y=!d("y0")&&!d("dy")||O?"v":"h",_=c;break;case"10":y="v",_=Math.min(c,E);break;case"20":y="h",_=Math.min(c,g.length);break;case"01":y="h",_=Math.min(c,w);break;case"02":y="v",_=Math.min(c,x.length);break;case"12":y="v",_=Math.min(c,E,x.length);break;case"21":y="h",_=Math.min(c,g.length,w);break;case"11":_=0;break;case"22":var R,j=!1;for(R=0;R<g.length;R++)if(h(g[R],P,C)==="category"){j=!0;break}if(j)y="v",_=Math.min(c,E,x.length);else{for(R=0;R<x.length;R++)if(h(x[R],P,C)==="category"){j=!0;break}j?(y="h",_=Math.min(c,g.length,w)):(y="v",_=Math.min(c,E,x.length))}}else f>0?(y="v",_=S>0?Math.min(E,w):Math.min(w)):S>0?(y="h",_=Math.min(E)):_=0;if(_){r._length=_;var D=a("orientation",y);r._hasPreCompStats?D==="v"&&S===0?(a("x0",0),a("dx",1)):D==="h"&&f===0&&(a("y0",0),a("dy",1)):D==="v"&&S===0?a("x0"):D==="h"&&f===0&&a("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(n,r,["x","y"],l)}else r.visible=!1}function i(n,r,a,l){var u=l.prefix,d=M.coerce2(n,r,s,"marker.outliercolor"),c=a("marker.line.outliercolor"),x="outliers";r._hasPreCompStats?x="all":(d||c)&&(x="suspectedoutliers");var g=a(u+"points",x);g?(a("jitter",g==="all"?.3:0),a("pointpos",g==="all"?-1.5:0),a("marker.symbol"),a("marker.opacity"),a("marker.size"),a("marker.angle"),a("marker.color",r.line.color),a("marker.line.color"),a("marker.line.width"),g==="suspectedoutliers"&&(a("marker.line.outliercolor",r.marker.color),a("marker.line.outlierwidth")),a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size"),a("text"),a("hovertext")):delete r.marker;var p=a("hoveron");p!=="all"&&p.indexOf("points")===-1||a("hovertemplate"),M.coerceSelectionMarkerOpacity(r,a)}ee.exports={supplyDefaults:function(n,r,a,l){function u(_,f){return M.coerce(n,r,s,_,f)}if(t(n,r,u,l),r.visible!==!1){T(n,r,l,u),u("xhoverformat"),u("yhoverformat");var d=r._hasPreCompStats;d&&(u("lowerfence"),u("upperfence")),u("line.color",(n.marker||{}).color||a),u("line.width"),u("fillcolor",o.addOpacity(r.line.color,.5));var c=!1;if(d){var x=u("mean"),g=u("sd");x&&x.length&&(c=!0,g&&g.length&&(c="sd"))}u("whiskerwidth");var p,v=u("sizemode");v==="quartiles"&&(p=u("boxmean",c)),u("showwhiskers",v==="quartiles"),v!=="sd"&&p!=="sd"||u("sdmultiple"),u("width"),u("quartilemethod");var m=!1;if(d){var y=u("notchspan");y&&y.length&&(m=!0)}else M.validate(n.notchwidth,s.notchwidth)&&(m=!0);u("notched",m)&&u("notchwidth"),i(n,r,u,{prefix:"box"})}},crossTraceDefaults:function(n,r){var a,l;function u(x){return M.coerce(l._input,l,s,x)}for(var d=0;d<n.length;d++){var c=(l=n[d]).type;c!=="box"&&c!=="violin"||(a=l._input,r[c+"mode"]==="group"&&b(a,l,r,u))}},handleSampleDefaults:t,handlePointsDefaults:i}},10392:function(ee){"use strict";ee.exports=function(z,e){return e.hoverOnBox&&(z.hoverOnBox=e.hoverOnBox),"xVal"in e&&(z.x=e.xVal),"yVal"in e&&(z.y=e.yVal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z}},27576:function(ee,z,e){"use strict";var M=e(54460),k=e(3400),o=e(93024),T=e(76308),b=k.fillText;function h(t,i,n,r){var a,l,u,d,c,x,g,p,v,m,y,_,f,S,w=t.cd,E=t.xa,P=t.ya,C=w[0].trace,O=w[0].t,R=C.type==="violin",j=O.bdPos,D=O.wHover,N=function(_e){return u.c2l(_e.pos)+O.bPos-u.c2l(x)};R&&C.side!=="both"?(C.side==="positive"&&(v=function(_e){var Te=N(_e);return o.inbox(Te,Te+D,m)},_=j,f=0),C.side==="negative"&&(v=function(_e){var Te=N(_e);return o.inbox(Te-D,Te,m)},_=0,f=j)):(v=function(_e){var Te=N(_e);return o.inbox(Te-D,Te+D,m)},_=f=j),S=R?function(_e){return o.inbox(_e.span[0]-c,_e.span[1]-c,m)}:function(_e){return o.inbox(_e.min-c,_e.max-c,m)},C.orientation==="h"?(c=i,x=n,g=S,p=v,a="y",u=P,l="x",d=E):(c=n,x=i,g=v,p=S,a="x",u=E,l="y",d=P);var W=Math.min(1,j/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function F(_e){return(g(_e)+p(_e))/2}m=t.maxHoverDistance-W,y=t.maxSpikeDistance-W;var U=o.getDistanceFunction(r,g,p,F);if(o.getClosest(w,U,t),t.index===!1)return[];var V=w[t.index],te=C.line.color,J=(C.marker||{}).color;T.opacity(te)&&C.line.width?t.color=te:T.opacity(J)&&C.boxpoints?t.color=J:t.color=C.fillcolor,t[a+"0"]=u.c2p(V.pos+O.bPos-f,!0),t[a+"1"]=u.c2p(V.pos+O.bPos+_,!0),t[a+"LabelVal"]=V.orig_p!==void 0?V.orig_p:V.pos;var K=a+"Spike";t.spikeDistance=F(V)*y/m,t[K]=u.c2p(V.pos,!0);var X=C.boxmean||C.sizemode==="sd"||(C.meanline||{}).visible,Z=C.boxpoints||C.points,$=Z&&X?["max","uf","q3","med","mean","q1","lf","min"]:Z&&!X?["max","uf","q3","med","q1","lf","min"]:!Z&&X?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],re=d.range[1]<d.range[0];C.orientation===(re?"v":"h")&&$.reverse();for(var oe=t.spikeDistance,ie=t[K],ue=[],me=0;me<$.length;me++){var be=$[me];if(be in V){var ge=V[be],de=d.c2p(ge,!0),ve=k.extendFlat({},t);ve.attr=be,ve[l+"0"]=ve[l+"1"]=de,ve[l+"LabelVal"]=ge,ve[l+"Label"]=(O.labels?O.labels[be]+" ":"")+M.hoverLabelText(d,ge,C[l+"hoverformat"]),ve.hoverOnBox=!0,be!=="mean"||!("sd"in V)||C.boxmean!=="sd"&&C.sizemode!=="sd"||(ve[l+"err"]=V.sd),ve.hovertemplate=!1,ue.push(ve)}}t.name="",t.spikeDistance=void 0,t[K]=void 0;for(var pe=0;pe<ue.length;pe++)ue[pe].attr!=="med"?(ue[pe].name="",ue[pe].spikeDistance=void 0,ue[pe][K]=void 0):(ue[pe].spikeDistance=oe,ue[pe][K]=ie);return ue}function s(t,i,n){for(var r,a,l,u=t.cd,d=t.xa,c=t.ya,x=u[0].trace,g=d.c2p(i),p=c.c2p(n),v=o.quadrature(function(R){var j=Math.max(3,R.mrc||0);return Math.max(Math.abs(d.c2p(R.x)-g)-j,1-3/j)},function(R){var j=Math.max(3,R.mrc||0);return Math.max(Math.abs(c.c2p(R.y)-p)-j,1-3/j)}),m=!1,y=0;y<u.length;y++){a=u[y];for(var _=0;_<(a.pts||[]).length;_++){var f=v(l=a.pts[_]);f<=t.distance&&(t.distance=f,m=[y,_])}}if(!m)return!1;l=(a=u[m[0]]).pts[m[1]];var S=d.c2p(l.x,!0),w=c.c2p(l.y,!0),E=l.mrc||1;r=k.extendFlat({},t,{index:l.i,color:(x.marker||{}).color,name:x.name,x0:S-E,x1:S+E,y0:w-E,y1:w+E,spikeDistance:t.distance,hovertemplate:x.hovertemplate});var P,C=a.orig_p,O=C!==void 0?C:a.pos;return x.orientation==="h"?(P=c,r.xLabelVal=l.x,r.yLabelVal=O):(P=d,r.xLabelVal=O,r.yLabelVal=l.y),r[P._id.charAt(0)+"Spike"]=P.c2p(a.pos,!0),b(l,x,r),r}ee.exports={hoverPoints:function(t,i,n,r){var a,l=t.cd[0].trace.hoveron,u=[];return l.indexOf("boxes")!==-1&&(u=u.concat(h(t,i,n,r))),l.indexOf("points")!==-1&&(a=s(t,i,n)),r==="closest"?a?[a]:u:(a&&u.push(a),u)},hoverOnBoxes:h,hoverOnPoints:s}},67244:function(ee,z,e){"use strict";ee.exports={attributes:e(63188),layoutAttributes:e(16560),supplyDefaults:e(90624).supplyDefaults,crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(68832).supplyLayoutDefaults,calc:e(62555),crossTraceCalc:e(96404).crossTraceCalc,plot:e(18728).plot,style:e(25776).style,styleOnSelect:e(25776).styleOnSelect,hoverPoints:e(27576).hoverPoints,eventData:e(10392),selectPoints:e(8264),moduleType:"trace",name:"box",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(ee){"use strict";ee.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(ee,z,e){"use strict";var M=e(24040),k=e(3400),o=e(16560);function T(b,h,s,t,i){for(var n=i+"Layout",r=!1,a=0;a<s.length;a++){var l=s[a];if(M.traceIs(l,n)){r=!0;break}}r&&(t(i+"mode"),t(i+"gap"),t(i+"groupgap"))}ee.exports={supplyLayoutDefaults:function(b,h,s){T(0,0,s,function(t,i){return k.coerce(b,h,o,t,i)},"box")},_supply:T}},18728:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(43616);function T(s,t,i,n,r){var a,l,u=i.orientation==="h",d=t.val,c=t.pos,x=!!c.rangebreaks,g=n.bPos,p=n.wdPos||0,v=n.bPosPxOffset||0,m=i.whiskerwidth||0,y=i.showwhiskers!==!1,_=i.notched||!1,f=_?1-2*i.notchwidth:1;Array.isArray(n.bdPos)?(a=n.bdPos[0],l=n.bdPos[1]):(a=n.bdPos,l=n.bdPos);var S=s.selectAll("path.box").data(i.type!=="violin"||i.box.visible?k.identity:[]);S.enter().append("path").style("vector-effect",r?"none":"non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(w){if(w.empty)return M.select(this).attr("d","M0,0Z");var E=c.c2l(w.pos+g,!0),P=c.l2p(E-a)+v,C=c.l2p(E+l)+v,O=x?(P+C)/2:c.l2p(E)+v,R=i.whiskerwidth,j=x?P*R+(1-R)*O:c.l2p(E-p)+v,D=x?C*R+(1-R)*O:c.l2p(E+p)+v,N=c.l2p(E-a*f)+v,W=c.l2p(E+l*f)+v,F=i.sizemode==="sd",U=d.c2p(F?w.mean-w.sd:w.q1,!0),V=F?d.c2p(w.mean+w.sd,!0):d.c2p(w.q3,!0),te=k.constrain(F?d.c2p(w.mean,!0):d.c2p(w.med,!0),Math.min(U,V)+1,Math.max(U,V)-1),J=w.lf===void 0||i.boxpoints===!1||F,K=d.c2p(J?w.min:w.lf,!0),X=d.c2p(J?w.max:w.uf,!0),Z=d.c2p(w.ln,!0),$=d.c2p(w.un,!0);u?M.select(this).attr("d","M"+te+","+N+"V"+W+"M"+U+","+P+"V"+C+(_?"H"+Z+"L"+te+","+W+"L"+$+","+C:"")+"H"+V+"V"+P+(_?"H"+$+"L"+te+","+N+"L"+Z+","+P:"")+"Z"+(y?"M"+U+","+O+"H"+K+"M"+V+","+O+"H"+X+(m===0?"":"M"+K+","+j+"V"+D+"M"+X+","+j+"V"+D):"")):M.select(this).attr("d","M"+N+","+te+"H"+W+"M"+P+","+U+"H"+C+(_?"V"+Z+"L"+W+","+te+"L"+C+","+$:"")+"V"+V+"H"+P+(_?"V"+$+"L"+N+","+te+"L"+P+","+Z:"")+"Z"+(y?"M"+O+","+U+"V"+K+"M"+O+","+V+"V"+X+(m===0?"":"M"+j+","+K+"H"+D+"M"+j+","+X+"H"+D):""))})}function b(s,t,i,n){var r=t.x,a=t.y,l=n.bdPos,u=n.bPos,d=i.boxpoints||i.points;k.seedPseudoRandom();var c=s.selectAll("g.points").data(d?function(g){return g.forEach(function(p){p.t=n,p.trace=i}),g}:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var x=c.selectAll("path").data(function(g){var p,v,m=g.pts2,y=Math.max((g.max-g.min)/10,g.q3-g.q1),_=1e-9*y,f=.01*y,S=[],w=0;if(i.jitter){if(y===0)for(w=1,S=new Array(m.length),p=0;p<m.length;p++)S[p]=1;else for(p=0;p<m.length;p++){var E=Math.max(0,p-5),P=m[E].v,C=Math.min(m.length-1,p+5),O=m[C].v;d!=="all"&&(m[p].v<g.lf?O=Math.min(O,g.lf):P=Math.max(P,g.uf));var R=Math.sqrt(f*(C-E)/(O-P+_))||0;R=k.constrain(Math.abs(R),0,1),S.push(R),w=Math.max(R,w)}v=2*i.jitter/(w||1)}for(p=0;p<m.length;p++){var j=m[p],D=j.v,N=i.jitter?v*S[p]*(k.pseudoRandom()-.5):0,W=g.pos+u+l*(i.pointpos+N);i.orientation==="h"?(j.y=W,j.x=D):(j.x=W,j.y=D),d==="suspectedoutliers"&&D<g.uo&&D>g.lo&&(j.so=!0)}return m});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(o.translatePoints,r,a)}function h(s,t,i,n){var r,a,l=t.val,u=t.pos,d=!!u.rangebreaks,c=n.bPos,x=n.bPosPxOffset||0,g=i.boxmean||(i.meanline||{}).visible;Array.isArray(n.bdPos)?(r=n.bdPos[0],a=n.bdPos[1]):(r=n.bdPos,a=n.bdPos);var p=s.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?k.identity:[]);p.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),p.exit().remove(),p.each(function(v){var m=u.c2l(v.pos+c,!0),y=u.l2p(m-r)+x,_=u.l2p(m+a)+x,f=d?(y+_)/2:u.l2p(m)+x,S=l.c2p(v.mean,!0),w=l.c2p(v.mean-v.sd,!0),E=l.c2p(v.mean+v.sd,!0);i.orientation==="h"?M.select(this).attr("d","M"+S+","+y+"V"+_+(g==="sd"?"m0,0L"+w+","+f+"L"+S+","+y+"L"+E+","+f+"Z":"")):M.select(this).attr("d","M"+y+","+S+"H"+_+(g==="sd"?"m0,0L"+f+","+w+"L"+y+","+S+"L"+f+","+E+"Z":""))})}ee.exports={plot:function(s,t,i,n){var r=s._context.staticPlot,a=t.xaxis,l=t.yaxis;k.makeTraceGroups(n,i,"trace boxes").each(function(u){var d,c,x=M.select(this),g=u[0],p=g.t,v=g.trace;p.wdPos=p.bdPos*v.whiskerwidth,v.visible!==!0||p.empty?x.remove():(v.orientation==="h"?(d=l,c=a):(d=a,c=l),T(x,{pos:d,val:c},v,p,r),b(x,{x:a,y:l},v,p),h(x,{pos:d,val:c},v,p))})},plotBoxAndWhiskers:T,plotPoints:b,plotBoxMean:h}},8264:function(ee){"use strict";ee.exports=function(z,e){var M,k,o=z.cd,T=z.xaxis,b=z.yaxis,h=[];if(e===!1)for(M=0;M<o.length;M++)for(k=0;k<(o[M].pts||[]).length;k++)o[M].pts[k].selected=0;else for(M=0;M<o.length;M++)for(k=0;k<(o[M].pts||[]).length;k++){var s=o[M].pts[k],t=T.c2p(s.x),i=b.c2p(s.y);e.contains([t,i],null,s.i,z)?(h.push({pointNumber:s.i,x:T.c2d(s.x),y:b.c2d(s.y)}),s.selected=1):s.selected=0}return h}},25776:function(ee,z,e){"use strict";var M=e(33428),k=e(76308),o=e(43616);ee.exports={style:function(T,b,h){var s=h||M.select(T).selectAll("g.trace.boxes");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var i=M.select(this),n=t[0].trace,r=n.line.width;function a(d,c,x,g){d.style("stroke-width",c+"px").call(k.stroke,x).call(k.fill,g)}var l=i.selectAll("path.box");if(n.type==="candlestick")l.each(function(d){if(!d.empty){var c=M.select(this),x=n[d.dir];a(c,x.line.width,x.line.color,x.fillcolor),c.style("opacity",n.selectedpoints&&!d.selected?.3:1)}});else{a(l,r,n.line.color,n.fillcolor),i.selectAll("path.mean").style({"stroke-width":r,"stroke-dasharray":2*r+"px,"+r+"px"}).call(k.stroke,n.line.color);var u=i.selectAll("path.point");o.pointStyle(u,n,T)}})},styleOnSelect:function(T,b,h){var s=b[0].trace,t=h.selectAll("path.point");s.selectedpoints?o.selectedPointStyle(t,s):o.pointStyle(t,s,T)}}},64216:function(ee,z,e){"use strict";var M=e(3400).extendFlat,k=e(29736).axisHoverFormat,o=e(20279),T=e(63188);function b(h){return{line:{color:M({},T.line.color,{dflt:h}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}ee.exports={xperiod:o.xperiod,xperiod0:o.xperiod0,xperiodalignment:o.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:o.x,open:o.open,high:o.high,low:o.low,close:o.close,line:{width:M({},T.line.width,{}),editType:"style"},increasing:b(o.increasing.line.color.dflt),decreasing:b(o.decreasing.line.color.dflt),text:o.text,hovertext:o.hovertext,whiskerwidth:M({},T.whiskerwidth,{dflt:0}),hoverlabel:o.hoverlabel}},46283:function(ee,z,e){"use strict";var M=e(3400),k=e(54460),o=e(1220),T=e(42812).calcCommon;function b(h,s,t,i){return{min:t,q1:Math.min(h,i),med:i,q3:Math.max(h,i),max:s}}ee.exports=function(h,s){var t=h._fullLayout,i=k.getFromId(h,s.xaxis),n=k.getFromId(h,s.yaxis),r=i.makeCalcdata(s,"x"),a=o(s,i,"x",r).vals,l=T(h,s,r,a,n,b);return l.length?(M.extendFlat(l[0].t,{num:t._numBoxes,dPos:M.distinctVals(a).minDiff/2,posLetter:"x",valLetter:"y"}),t._numBoxes++,l):[{t:{empty:!0}}]}},64588:function(ee,z,e){"use strict";var M=e(3400),k=e(76308),o=e(52744),T=e(31147),b=e(64216);function h(s,t,i,n){var r=i(n+".line.color");i(n+".line.width",t.line.width),i(n+".fillcolor",k.addOpacity(r,.5))}ee.exports=function(s,t,i,n){function r(a,l){return M.coerce(s,t,b,a,l)}o(s,t,r,n)?(T(s,t,n,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),h(0,t,r,"increasing"),h(0,t,r,"decreasing"),r("text"),r("hovertext"),r("whiskerwidth"),n._requestRangeslider[t.xaxis]=!0):t.visible=!1}},61712:function(ee,z,e){"use strict";ee.exports={moduleType:"trace",name:"candlestick",basePlotModule:e(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e(64216),layoutAttributes:e(16560),supplyLayoutDefaults:e(68832).supplyLayoutDefaults,crossTraceCalc:e(96404).crossTraceCalc,supplyDefaults:e(64588),calc:e(46283),plot:e(18728).plot,layerName:"boxlayer",style:e(25776).style,hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},93504:function(ee,z,e){"use strict";var M=e(63856),k=e(31780);ee.exports=function(o,T,b,h,s){h("a")||(h("da"),h("a0")),h("b")||(h("db"),h("b0")),function(t,i,n,r){["aaxis","baxis"].forEach(function(a){var l=a.charAt(0),u=t[a]||{},d=k.newContainer(i,a),c={noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:l+"axis",letter:l,font:i.font,name:a,data:t[l],calendar:i.calendar,dfltColor:r,bgColor:n.paper_bgcolor,autotypenumbersDflt:n.autotypenumbers,fullLayout:n};M(u,d,c),d._categories=d._categories||[],t[a]||u.type==="-"||(t[a]={type:u.type})})}(o,T,b,s)}},51676:function(ee,z,e){"use strict";var M=e(3400).isArrayOrTypedArray;function k(o,T){if(!M(o)||T>=10)return null;for(var b=1/0,h=-1/0,s=o.length,t=0;t<s;t++){var i=o[t];if(M(i)){var n=k(i,T+1);n&&(b=Math.min(n[0],b),h=Math.max(n[1],h))}else b=Math.min(i,b),h=Math.max(i,h)}return[b,h]}ee.exports=function(o){return k(o,0)}},85720:function(ee,z,e){"use strict";var M=e(25376),k=e(98692),o=e(22548),T=M({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=o.defaultLine,ee.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:k,baxis:k,font:T,color:{valType:"color",dflt:o.defaultLine,editType:"plot"},transforms:void 0}},77712:function(ee,z,e){"use strict";var M=e(3400).isArrayOrTypedArray;ee.exports=function(k,o,T,b){var h,s,t,i,n,r,a,l,u,d,c,x,g,p=M(T)?"a":"b",v=(p==="a"?k.aaxis:k.baxis).smoothing,m=p==="a"?k.a2i:k.b2j,y=p==="a"?T:b,_=p==="a"?b:T,f=p==="a"?o.a.length:o.b.length,S=p==="a"?o.b.length:o.a.length,w=Math.floor(p==="a"?k.b2j(_):k.a2i(_)),E=p==="a"?function(te){return k.evalxy([],te,w)}:function(te){return k.evalxy([],w,te)};v&&(t=Math.max(0,Math.min(S-2,w)),i=w-t,s=p==="a"?function(te,J){return k.dxydi([],te,t,J,i)}:function(te,J){return k.dxydj([],t,te,i,J)});var P=m(y[0]),C=m(y[1]),O=P<C?1:-1,R=1e-8*(C-P),j=O>0?Math.floor:Math.ceil,D=O>0?Math.ceil:Math.floor,N=O>0?Math.min:Math.max,W=O>0?Math.max:Math.min,F=j(P+R),U=D(C-R),V=[[a=E(P)]];for(h=F;h*O<U*O;h+=O)n=[],c=W(P,h),g=(x=N(C,h+O))-c,r=Math.max(0,Math.min(f-2,Math.floor(.5*(c+x)))),l=E(x),v&&(u=s(r,c-r),d=s(r,x-r),n.push([a[0]+u[0]/3*g,a[1]+u[1]/3*g]),n.push([l[0]-d[0]/3*g,l[1]-d[1]/3*g])),n.push(l),V.push(n),a=l;return V}},98692:function(ee,z,e){"use strict";var M=e(25376),k=e(22548),o=e(94724),T=e(29736).descriptionWithDates,b=e(67824).overrideAll,h=e(98192).u,s=e(92880).extendFlat;ee.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:M({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:o.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:s({},o.labelalias,{editType:"calc"}),tickfont:M({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:b(o.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:k.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:s({},h,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:s({},h,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:k.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:M({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(ee,z,e){"use strict";var M=e(85720),k=e(76308).addOpacity,o=e(24040),T=e(3400),b=e(26332),h=e(95936),s=e(42568),t=e(22416),i=e(78344),n=e(52976);ee.exports=function(r,a,l){var u=l.letter,d=l.font||{},c=M[u+"axis"];function x(O,R){return T.coerce(r,a,c,O,R)}function g(O,R){return T.coerce2(r,a,c,O,R)}l.name&&(a._name=l.name,a._id=l.name),x("autotypenumbers",l.autotypenumbersDflt);var p=x("type");p==="-"&&(l.data&&function(O,R){if(O.type==="-"){var j=O._id.charAt(0),D=O[j+"calendar"];O.type=n(R,D,{autotypenumbers:O.autotypenumbers})}}(a,l.data),a.type==="-"?a.type="linear":p=r.type=a.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",u+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),a.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),a._hovertitle=u,p==="date"&&o.getComponentMethod("calendars","handleDefaults")(r,a,"calendar",l.calendar),i(a,l.fullLayout),a.c2p=T.identity;var v=x("color",l.dfltColor),m=v===r.color?v:d.color;x("title.text")&&(T.coerceFont(x,"title.font",{family:d.family,size:T.bigFont(d.size),color:m}),x("title.offset")),x("tickangle"),x("autorange",!a.isValidRange(r.range))&&x("rangemode"),x("range"),a.cleanRange(),x("fixedrange"),b(r,a,x,p),s(r,a,x,p,l),h(r,a,x,p,l),t(r,a,x,{data:l.data,dataAttr:u});var y=g("gridcolor",k(v,.3)),_=g("gridwidth"),f=g("griddash"),S=x("showgrid");S||(delete a.gridcolor,delete a.gridwidth,delete a.griddash);var w=g("startlinecolor",v),E=g("startlinewidth",_);x("startline",a.showgrid||!!w||!!E)||(delete a.startlinecolor,delete a.startlinewidth);var P=g("endlinecolor",v),C=g("endlinewidth",_);return x("endline",a.showgrid||!!P||!!C)||(delete a.endlinecolor,delete a.endlinewidth),S?(x("minorgridcount"),x("minorgridwidth",_),x("minorgriddash",f),x("minorgridcolor",k(y,.06)),a.minorgridcount||(delete a.minorgridwidth,delete a.minorgriddash,delete a.minorgridcolor)):(delete a.gridcolor,delete a.gridwidth,delete a.griddash),a.showticklabels==="none"&&(delete a.tickfont,delete a.tickangle,delete a.showexponent,delete a.exponentformat,delete a.minexponent,delete a.tickformat,delete a.showticksuffix,delete a.showtickprefix),a.showticksuffix||delete a.ticksuffix,a.showtickprefix||delete a.tickprefix,x("tickmode"),a}},58744:function(ee,z,e){"use strict";var M=e(54460),k=e(3400).isArray1D,o=e(60776),T=e(51676),b=e(19216),h=e(14724),s=e(24944),t=e(26136),i=e(51512),n=e(2872),r=e(81e3);ee.exports=function(a,l){var u=M.getFromId(a,l.xaxis),d=M.getFromId(a,l.yaxis),c=l.aaxis,x=l.baxis,g=l.x,p=l.y,v=[];g&&k(g)&&v.push("x"),p&&k(p)&&v.push("y"),v.length&&n(l,c,x,"a","b",v);var m=l._a=l._a||l.a,y=l._b=l._b||l.b;g=l._x||l.x,p=l._y||l.y;var _={};if(l._cheater){var f=c.cheatertype==="index"?m.length:m,S=x.cheatertype==="index"?y.length:y;g=o(f,S,l.cheaterslope)}l._x=g=t(g),l._y=p=t(p),i(g,m,y),i(p,m,y),r(l),l.setScale();var w=T(g),E=T(p),P=.5*(w[1]-w[0]),C=.5*(w[1]+w[0]),O=.5*(E[1]-E[0]),R=.5*(E[1]+E[0]),j=1.3;return w=[C-P*j,C+P*j],E=[R-O*j,R+O*j],l._extremes[u._id]=M.findExtremes(u,w,{padded:!0}),l._extremes[d._id]=M.findExtremes(d,E,{padded:!0}),b(l,"a","b"),b(l,"b","a"),h(l,c),h(l,x),_.clipsegments=s(l._xctrl,l._yctrl,c,x),_.x=g,_.y=p,_.a=m,_.b=y,[_]}},24944:function(ee){"use strict";ee.exports=function(z,e,M,k){var o,T,b,h=[],s=!!M.smoothing,t=!!k.smoothing,i=z[0].length-1,n=z.length-1;for(o=0,T=[],b=[];o<=i;o++)T[o]=z[0][o],b[o]=e[0][o];for(h.push({x:T,y:b,bicubic:s}),o=0,T=[],b=[];o<=n;o++)T[o]=z[o][i],b[o]=e[o][i];for(h.push({x:T,y:b,bicubic:t}),o=i,T=[],b=[];o>=0;o--)T[i-o]=z[n][o],b[i-o]=e[n][o];for(h.push({x:T,y:b,bicubic:s}),o=n,T=[],b=[];o>=0;o--)T[n-o]=z[o][0],b[n-o]=e[o][0];return h.push({x:T,y:b,bicubic:t}),h}},19216:function(ee,z,e){"use strict";var M=e(54460),k=e(92880).extendFlat;ee.exports=function(o,T,b){var h,s,t,i,n,r,a,l,u,d,c,x,g,p,v=o["_"+T],m=o[T+"axis"],y=m._gridlines=[],_=m._minorgridlines=[],f=m._boundarylines=[],S=o["_"+b],w=o[b+"axis"];m.tickmode==="array"&&(m.tickvals=v.slice());var E=o._xctrl,P=o._yctrl,C=E[0].length,O=E.length,R=o._a.length,j=o._b.length;M.prepTicks(m),m.tickmode==="array"&&delete m.tickvals;var D=m.smoothing?3:1;function N(F){var U,V,te,J,K,X,Z,$,re,oe,ie,ue,me=[],be=[],ge={};if(T==="b")for(V=o.b2j(F),te=Math.floor(Math.max(0,Math.min(j-2,V))),J=V-te,ge.length=j,ge.crossLength=R,ge.xy=function(de){return o.evalxy([],de,V)},ge.dxy=function(de,ve){return o.dxydi([],de,te,ve,J)},U=0;U<R;U++)X=Math.min(R-2,U),Z=U-X,$=o.evalxy([],U,V),w.smoothing&&U>0&&(re=o.dxydi([],U-1,te,0,J),me.push(K[0]+re[0]/3),be.push(K[1]+re[1]/3),oe=o.dxydi([],U-1,te,1,J),me.push($[0]-oe[0]/3),be.push($[1]-oe[1]/3)),me.push($[0]),be.push($[1]),K=$;else for(U=o.a2i(F),X=Math.floor(Math.max(0,Math.min(R-2,U))),Z=U-X,ge.length=R,ge.crossLength=j,ge.xy=function(de){return o.evalxy([],U,de)},ge.dxy=function(de,ve){return o.dxydj([],X,de,Z,ve)},V=0;V<j;V++)te=Math.min(j-2,V),J=V-te,$=o.evalxy([],U,V),w.smoothing&&V>0&&(ie=o.dxydj([],X,V-1,Z,0),me.push(K[0]+ie[0]/3),be.push(K[1]+ie[1]/3),ue=o.dxydj([],X,V-1,Z,1),me.push($[0]-ue[0]/3),be.push($[1]-ue[1]/3)),me.push($[0]),be.push($[1]),K=$;return ge.axisLetter=T,ge.axis=m,ge.crossAxis=w,ge.value=F,ge.constvar=b,ge.index=l,ge.x=me,ge.y=be,ge.smoothing=w.smoothing,ge}function W(F){var U,V,te,J,K,X=[],Z=[],$={};if($.length=v.length,$.crossLength=S.length,T==="b")for(te=Math.max(0,Math.min(j-2,F)),K=Math.min(1,Math.max(0,F-te)),$.xy=function(re){return o.evalxy([],re,F)},$.dxy=function(re,oe){return o.dxydi([],re,te,oe,K)},U=0;U<C;U++)X[U]=E[F*D][U],Z[U]=P[F*D][U];else for(V=Math.max(0,Math.min(R-2,F)),J=Math.min(1,Math.max(0,F-V)),$.xy=function(re){return o.evalxy([],F,re)},$.dxy=function(re,oe){return o.dxydj([],V,re,J,oe)},U=0;U<O;U++)X[U]=E[U][F*D],Z[U]=P[U][F*D];return $.axisLetter=T,$.axis=m,$.crossAxis=w,$.value=v[F],$.constvar=b,$.index=F,$.x=X,$.y=Z,$.smoothing=w.smoothing,$}if(m.tickmode==="array"){for(i=5e-15,r=(n=[Math.floor((v.length-1-m.arraytick0)/m.arraydtick*(1+i)),Math.ceil(-m.arraytick0/m.arraydtick/(1+i))].sort(function(F,U){return F-U}))[0]-1,a=n[1]+1,l=r;l<a;l++)(s=m.arraytick0+m.arraydtick*l)<0||s>v.length-1||y.push(k(W(s),{color:m.gridcolor,width:m.gridwidth,dash:m.griddash}));for(l=r;l<a;l++)if(t=m.arraytick0+m.arraydtick*l,c=Math.min(t+m.arraydtick,v.length-1),!(t<0||t>v.length-1||c<0||c>v.length-1))for(x=v[t],g=v[c],h=0;h<m.minorgridcount;h++)(p=c-t)<=0||(d=x+(g-x)*(h+1)/(m.minorgridcount+1)*(m.arraydtick/p))<v[0]||d>v[v.length-1]||_.push(k(N(d),{color:m.minorgridcolor,width:m.minorgridwidth,dash:m.minorgriddash}));m.startline&&f.push(k(W(0),{color:m.startlinecolor,width:m.startlinewidth})),m.endline&&f.push(k(W(v.length-1),{color:m.endlinecolor,width:m.endlinewidth}))}else{for(i=5e-15,r=(n=[Math.floor((v[v.length-1]-m.tick0)/m.dtick*(1+i)),Math.ceil((v[0]-m.tick0)/m.dtick/(1+i))].sort(function(F,U){return F-U}))[0],a=n[1],l=r;l<=a;l++)u=m.tick0+m.dtick*l,y.push(k(N(u),{color:m.gridcolor,width:m.gridwidth,dash:m.griddash}));for(l=r-1;l<a+1;l++)for(u=m.tick0+m.dtick*l,h=0;h<m.minorgridcount;h++)(d=u+m.dtick*(h+1)/(m.minorgridcount+1))<v[0]||d>v[v.length-1]||_.push(k(N(d),{color:m.minorgridcolor,width:m.minorgridwidth,dash:m.minorgriddash}));m.startline&&f.push(k(N(v[0]),{color:m.startlinecolor,width:m.startlinewidth})),m.endline&&f.push(k(N(v[v.length-1]),{color:m.endlinecolor,width:m.endlinewidth}))}}},14724:function(ee,z,e){"use strict";var M=e(54460),k=e(92880).extendFlat;ee.exports=function(o,T){var b,h,s,t=T._labels=[],i=T._gridlines;for(b=0;b<i.length;b++)s=i[b],["start","both"].indexOf(T.showticklabels)!==-1&&(h=M.tickText(T,s.value),k(h,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),t.push(h)),["end","both"].indexOf(T.showticklabels)!==-1&&(h=M.tickText(T,s.value),k(h,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:b===0,isLast:b===i.length-1}),t.push(h))}},62284:function(ee){"use strict";ee.exports=function(z,e,M,k){var o=z[0]-e[0],T=z[1]-e[1],b=M[0]-e[0],h=M[1]-e[1],s=Math.pow(o*o+T*T,.25),t=Math.pow(b*b+h*h,.25),i=(t*t*o-s*s*b)*k,n=(t*t*T-s*s*h)*k,r=t*(s+t)*3,a=s*(s+t)*3;return[[e[0]+(r&&i/r),e[1]+(r&&n/r)],[e[0]-(a&&i/a),e[1]-(a&&n/a)]]}},60776:function(ee,z,e){"use strict";var M=e(3400).isArrayOrTypedArray;ee.exports=function(k,o,T){var b,h,s,t,i,n,r=[],a=M(k)?k.length:k,l=M(o)?o.length:o,u=M(k)?k:null,d=M(o)?o:null;u&&(s=(u.length-1)/(u[u.length-1]-u[0])/(a-1)),d&&(t=(d.length-1)/(d[d.length-1]-d[0])/(l-1));var c=1/0,x=-1/0;for(h=0;h<l;h++)for(r[h]=[],i=d?(d[h]-d[0])*t:h/(l-1),b=0;b<a;b++)n=(u?(u[b]-u[0])*s:b/(a-1))-i*T,c=Math.min(n,c),x=Math.max(n,x),r[h][b]=n;var g=1/(x-c),p=-c*g;for(h=0;h<l;h++)for(b=0;b<a;b++)r[h][b]=g*r[h][b]+p;return r}},30180:function(ee,z,e){"use strict";var M=e(62284),k=e(3400).ensureArray;function o(T,b,h){var s=-.5*h[0]+1.5*b[0],t=-.5*h[1]+1.5*b[1];return[(2*s+T[0])/3,(2*t+T[1])/3]}ee.exports=function(T,b,h,s,t,i){var n,r,a,l,u,d,c,x,g,p,v=h[0].length,m=h.length,y=t?3*v-2:v,_=i?3*m-2:m;for(T=k(T,_),b=k(b,_),a=0;a<_;a++)T[a]=k(T[a],y),b[a]=k(b[a],y);for(r=0,l=0;r<m;r++,l+=i?3:1)for(u=T[l],d=b[l],c=h[r],x=s[r],n=0,a=0;n<v;n++,a+=t?3:1)u[a]=c[n],d[a]=x[n];if(t)for(r=0,l=0;r<m;r++,l+=i?3:1){for(n=1,a=3;n<v-1;n++,a+=3)g=M([h[r][n-1],s[r][n-1]],[h[r][n],s[r][n]],[h[r][n+1],s[r][n+1]],t),T[l][a-1]=g[0][0],b[l][a-1]=g[0][1],T[l][a+1]=g[1][0],b[l][a+1]=g[1][1];p=o([T[l][0],b[l][0]],[T[l][2],b[l][2]],[T[l][3],b[l][3]]),T[l][1]=p[0],b[l][1]=p[1],p=o([T[l][y-1],b[l][y-1]],[T[l][y-3],b[l][y-3]],[T[l][y-4],b[l][y-4]]),T[l][y-2]=p[0],b[l][y-2]=p[1]}if(i)for(a=0;a<y;a++){for(l=3;l<_-3;l+=3)g=M([T[l-3][a],b[l-3][a]],[T[l][a],b[l][a]],[T[l+3][a],b[l+3][a]],i),T[l-1][a]=g[0][0],b[l-1][a]=g[0][1],T[l+1][a]=g[1][0],b[l+1][a]=g[1][1];p=o([T[0][a],b[0][a]],[T[2][a],b[2][a]],[T[3][a],b[3][a]]),T[1][a]=p[0],b[1][a]=p[1],p=o([T[_-1][a],b[_-1][a]],[T[_-3][a],b[_-3][a]],[T[_-4][a],b[_-4][a]]),T[_-2][a]=p[0],b[_-2][a]=p[1]}if(t&&i)for(l=1;l<_;l+=(l+1)%3==0?2:1){for(a=3;a<y-3;a+=3)g=M([T[l][a-3],b[l][a-3]],[T[l][a],b[l][a]],[T[l][a+3],b[l][a+3]],t),T[l][a-1]=.5*(T[l][a-1]+g[0][0]),b[l][a-1]=.5*(b[l][a-1]+g[0][1]),T[l][a+1]=.5*(T[l][a+1]+g[1][0]),b[l][a+1]=.5*(b[l][a+1]+g[1][1]);p=o([T[l][0],b[l][0]],[T[l][2],b[l][2]],[T[l][3],b[l][3]]),T[l][1]=.5*(T[l][1]+p[0]),b[l][1]=.5*(b[l][1]+p[1]),p=o([T[l][y-1],b[l][y-1]],[T[l][y-3],b[l][y-3]],[T[l][y-4],b[l][y-4]]),T[l][y-2]=.5*(T[l][y-2]+p[0]),b[l][y-2]=.5*(b[l][y-2]+p[1])}return[T,b]}},24588:function(ee){"use strict";ee.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(ee){"use strict";ee.exports=function(z,e,M){return e&&M?function(k,o,T,b,h){var s,t,i,n,r,a;k||(k=[]),o*=3,T*=3;var l=b*b,u=1-b,d=u*u,c=u*b*2,x=-3*d,g=3*(d-c),p=3*(c-l),v=3*l,m=h*h,y=m*h,_=1-h,f=_*_,S=f*_;for(a=0;a<z.length;a++)s=x*(r=z[a])[T][o]+g*r[T][o+1]+p*r[T][o+2]+v*r[T][o+3],t=x*r[T+1][o]+g*r[T+1][o+1]+p*r[T+1][o+2]+v*r[T+1][o+3],i=x*r[T+2][o]+g*r[T+2][o+1]+p*r[T+2][o+2]+v*r[T+2][o+3],n=x*r[T+3][o]+g*r[T+3][o+1]+p*r[T+3][o+2]+v*r[T+3][o+3],k[a]=S*s+3*(f*h*t+_*m*i)+y*n;return k}:e?function(k,o,T,b,h){var s,t,i,n;k||(k=[]),o*=3;var r=b*b,a=1-b,l=a*a,u=a*b*2,d=-3*l,c=3*(l-u),x=3*(u-r),g=3*r,p=1-h;for(i=0;i<z.length;i++)s=d*(n=z[i])[T][o]+c*n[T][o+1]+x*n[T][o+2]+g*n[T][o+3],t=d*n[T+1][o]+c*n[T+1][o+1]+x*n[T+1][o+2]+g*n[T+1][o+3],k[i]=p*s+h*t;return k}:M?function(k,o,T,b,h){var s,t,i,n,r,a;k||(k=[]),T*=3;var l=h*h,u=l*h,d=1-h,c=d*d,x=c*d;for(r=0;r<z.length;r++)s=(a=z[r])[T][o+1]-a[T][o],t=a[T+1][o+1]-a[T+1][o],i=a[T+2][o+1]-a[T+2][o],n=a[T+3][o+1]-a[T+3][o],k[r]=x*s+3*(c*h*t+d*l*i)+u*n;return k}:function(k,o,T,b,h){var s,t,i,n;k||(k=[]);var r=1-h;for(i=0;i<z.length;i++)s=(n=z[i])[T][o+1]-n[T][o],t=n[T+1][o+1]-n[T+1][o],k[i]=r*s+h*t;return k}}},24464:function(ee){"use strict";ee.exports=function(z,e,M){return e&&M?function(k,o,T,b,h){var s,t,i,n,r,a;k||(k=[]),o*=3,T*=3;var l=b*b,u=l*b,d=1-b,c=d*d,x=c*d,g=h*h,p=1-h,v=p*p,m=p*h*2,y=-3*v,_=3*(v-m),f=3*(m-g),S=3*g;for(a=0;a<z.length;a++)s=y*(r=z[a])[T][o]+_*r[T+1][o]+f*r[T+2][o]+S*r[T+3][o],t=y*r[T][o+1]+_*r[T+1][o+1]+f*r[T+2][o+1]+S*r[T+3][o+1],i=y*r[T][o+2]+_*r[T+1][o+2]+f*r[T+2][o+2]+S*r[T+3][o+2],n=y*r[T][o+3]+_*r[T+1][o+3]+f*r[T+2][o+3]+S*r[T+3][o+3],k[a]=x*s+3*(c*b*t+d*l*i)+u*n;return k}:e?function(k,o,T,b,h){var s,t,i,n,r,a;k||(k=[]),o*=3;var l=h*h,u=l*h,d=1-h,c=d*d,x=c*d;for(r=0;r<z.length;r++)s=(a=z[r])[T+1][o]-a[T][o],t=a[T+1][o+1]-a[T][o+1],i=a[T+1][o+2]-a[T][o+2],n=a[T+1][o+3]-a[T][o+3],k[r]=x*s+3*(c*h*t+d*l*i)+u*n;return k}:M?function(k,o,T,b,h){var s,t,i,n;k||(k=[]),T*=3;var r=1-b,a=h*h,l=1-h,u=l*l,d=l*h*2,c=-3*u,x=3*(u-d),g=3*(d-a),p=3*a;for(i=0;i<z.length;i++)s=c*(n=z[i])[T][o]+x*n[T+1][o]+g*n[T+2][o]+p*n[T+3][o],t=c*n[T][o+1]+x*n[T+1][o+1]+g*n[T+2][o+1]+p*n[T+3][o+1],k[i]=r*s+b*t;return k}:function(k,o,T,b,h){var s,t,i,n;k||(k=[]);var r=1-b;for(i=0;i<z.length;i++)s=(n=z[i])[T+1][o]-n[T][o],t=n[T+1][o+1]-n[T][o+1],k[i]=r*s+b*t;return k}}},29056:function(ee){"use strict";ee.exports=function(z,e,M,k,o){var T=e-2,b=M-2;return k&&o?function(h,s,t){var i,n,r,a,l,u;h||(h=[]);var d=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-d)),g=Math.max(0,Math.min(1,t-c));d*=3,c*=3;var p=x*x,v=p*x,m=1-x,y=m*m,_=y*m,f=g*g,S=f*g,w=1-g,E=w*w,P=E*w;for(u=0;u<z.length;u++)i=_*(l=z[u])[c][d]+3*(y*x*l[c][d+1]+m*p*l[c][d+2])+v*l[c][d+3],n=_*l[c+1][d]+3*(y*x*l[c+1][d+1]+m*p*l[c+1][d+2])+v*l[c+1][d+3],r=_*l[c+2][d]+3*(y*x*l[c+2][d+1]+m*p*l[c+2][d+2])+v*l[c+2][d+3],a=_*l[c+3][d]+3*(y*x*l[c+3][d+1]+m*p*l[c+3][d+2])+v*l[c+3][d+3],h[u]=P*i+3*(E*g*n+w*f*r)+S*a;return h}:k?function(h,s,t){h||(h=[]);var i,n,r,a,l,u,d=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-d)),g=Math.max(0,Math.min(1,t-c));d*=3;var p=x*x,v=p*x,m=1-x,y=m*m,_=y*m,f=1-g;for(l=0;l<z.length;l++)i=f*(u=z[l])[c][d]+g*u[c+1][d],n=f*u[c][d+1]+g*u[c+1][d+1],r=f*u[c][d+2]+g*u[c+1][d+1],a=f*u[c][d+3]+g*u[c+1][d+1],h[l]=_*i+3*(y*x*n+m*p*r)+v*a;return h}:o?function(h,s,t){h||(h=[]);var i,n,r,a,l,u,d=Math.max(0,Math.min(Math.floor(s),T)),c=Math.max(0,Math.min(Math.floor(t),b)),x=Math.max(0,Math.min(1,s-d)),g=Math.max(0,Math.min(1,t-c));c*=3;var p=g*g,v=p*g,m=1-g,y=m*m,_=y*m,f=1-x;for(l=0;l<z.length;l++)i=f*(u=z[l])[c][d]+x*u[c][d+1],n=f*u[c+1][d]+x*u[c+1][d+1],r=f*u[c+2][d]+x*u[c+2][d+1],a=f*u[c+3][d]+x*u[c+3][d+1],h[l]=_*i+3*(y*g*n+m*p*r)+v*a;return h}:function(h,s,t){h||(h=[]);var i,n,r,a,l=Math.max(0,Math.min(Math.floor(s),T)),u=Math.max(0,Math.min(Math.floor(t),b)),d=Math.max(0,Math.min(1,s-l)),c=Math.max(0,Math.min(1,t-u)),x=1-c,g=1-d;for(r=0;r<z.length;r++)i=g*(a=z[r])[u][l]+d*a[u][l+1],n=g*a[u+1][l]+d*a[u+1][l+1],h[r]=x*i+c*n;return h}}},38356:function(ee,z,e){"use strict";var M=e(3400),k=e(86411),o=e(93504),T=e(85720),b=e(22548);ee.exports=function(h,s,t,i){function n(a,l){return M.coerce(h,s,T,a,l)}s._clipPathId="clip"+s.uid+"carpet";var r=n("color",b.defaultLine);M.coerceFont(n,"font"),n("carpet"),o(h,s,i,n,r),s.a&&s.b?(s.a.length<3&&(s.aaxis.smoothing=0),s.b.length<3&&(s.baxis.smoothing=0),k(h,s,n)||(s.visible=!1),s._cheater&&n("cheaterslope")):s.visible=!1}},95856:function(ee,z,e){"use strict";ee.exports={attributes:e(85720),supplyDefaults:e(38356),plot:e(164),calc:e(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(ee){"use strict";ee.exports=function(z,e){for(var M,k=z._fullData.length,o=0;o<k;o++){var T=z._fullData[o];if(T.index!==e.index&&T.type==="carpet"&&(M||(M=T),T.carpet===e.carpet))return T}return M}},53416:function(ee){"use strict";ee.exports=function(z,e,M){if(z.length===0)return"";var k,o=[],T=M?3:1;for(k=0;k<z.length;k+=T)o.push(z[k]+","+e[k]),M&&k<z.length-T&&(o.push("C"),o.push([z[k+1]+","+e[k+1],z[k+2]+","+e[k+2]+" "].join(" ")));return o.join(M?"":"L")}},87072:function(ee,z,e){"use strict";var M=e(3400).isArrayOrTypedArray;ee.exports=function(k,o,T){var b;for(M(k)?k.length>o.length&&(k=k.slice(0,o.length)):k=[],b=0;b<o.length;b++)k[b]=T(o[b]);return k}},15584:function(ee){"use strict";ee.exports=function(z,e,M,k,o,T){var b=o[0]*z.dpdx(e),h=o[1]*z.dpdy(M),s=1,t=1;if(T){var i=Math.sqrt(o[0]*o[0]+o[1]*o[1]),n=Math.sqrt(T[0]*T[0]+T[1]*T[1]),r=(o[0]*T[0]+o[1]*T[1])/i/n;t=Math.max(0,r)}var a=180*Math.atan2(h,b)/Math.PI;return a<-90?(a+=180,s=-s):a>90&&(a-=180,s=-s),{angle:a,flip:s,p:z.c2p(k,e,M),offsetMultplier:t}}},164:function(ee,z,e){"use strict";var M=e(33428),k=e(43616),o=e(87072),T=e(53416),b=e(15584),h=e(72736),s=e(3400),t=s.strRotate,i=s.strTranslate,n=e(84284);function r(c,x,g,p,v,m,y){var _="const-"+v+"-lines",f=g.selectAll("."+_).data(m);f.enter().append("path").classed(_,!0).style("vector-effect",y?"none":"non-scaling-stroke"),f.each(function(S){var w=S,E=w.x,P=w.y,C=o([],E,c.c2p),O=o([],P,x.c2p),R="M"+T(C,O,w.smoothing);M.select(this).attr("d",R).style("stroke-width",w.width).style("stroke",w.color).style("stroke-dasharray",k.dashStyle(w.dash,w.width)).style("fill","none")}),f.exit().remove()}function a(c,x,g,p,v,m,y,_){var f=m.selectAll("text."+_).data(y);f.enter().append("text").classed(_,!0);var S=0,w={};return f.each(function(E,P){var C;if(E.axis.tickangle==="auto")C=b(p,x,g,E.xy,E.dxy);else{var O=(E.axis.tickangle+180)*Math.PI/180;C=b(p,x,g,E.xy,[Math.cos(O),Math.sin(O)])}P||(w={angle:C.angle,flip:C.flip});var R=(E.endAnchor?-1:1)*C.flip,j=M.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(k.font,E.font).text(E.text).call(h.convertToTspans,c),D=k.bBox(this);j.attr("transform",i(C.p[0],C.p[1])+t(C.angle)+i(E.axis.labelpadding*R,.3*D.height)),S=Math.max(S,D.width+E.axis.labelpadding)}),f.exit().remove(),w.maxExtent=S,w}ee.exports=function(c,x,g,p){var v=c._context.staticPlot,m=x.xaxis,y=x.yaxis,_=c._fullLayout._clips;s.makeTraceGroups(p,g,"trace").each(function(f){var S=M.select(this),w=f[0],E=w.trace,P=E.aaxis,C=E.baxis,O=s.ensureSingle(S,"g","minorlayer"),R=s.ensureSingle(S,"g","majorlayer"),j=s.ensureSingle(S,"g","boundarylayer"),D=s.ensureSingle(S,"g","labellayer");S.style("opacity",E.opacity),r(m,y,R,0,"a",P._gridlines,!0),r(m,y,R,0,"b",C._gridlines,!0),r(m,y,O,0,"a",P._minorgridlines,!0),r(m,y,O,0,"b",C._minorgridlines,!0),r(m,y,j,0,"a-boundary",P._boundarylines,v),r(m,y,j,0,"b-boundary",C._boundarylines,v);var N=a(c,m,y,E,0,D,P._labels,"a-label"),W=a(c,m,y,E,0,D,C._labels,"b-label");(function(F,U,V,te,J,K,X,Z){var $,re,oe,ie,ue=s.aggNums(Math.min,null,V.a),me=s.aggNums(Math.max,null,V.a),be=s.aggNums(Math.min,null,V.b),ge=s.aggNums(Math.max,null,V.b);$=.5*(ue+me),re=be,oe=V.ab2xy($,re,!0),ie=V.dxyda_rough($,re),X.angle===void 0&&s.extendFlat(X,b(V,J,K,oe,V.dxydb_rough($,re))),d(F,U,V,0,oe,ie,V.aaxis,J,K,X,"a-title"),$=ue,re=.5*(be+ge),oe=V.ab2xy($,re,!0),ie=V.dxydb_rough($,re),Z.angle===void 0&&s.extendFlat(Z,b(V,J,K,oe,V.dxyda_rough($,re))),d(F,U,V,0,oe,ie,V.baxis,J,K,Z,"b-title")})(c,D,E,0,m,y,N,W),function(F,U,V,te,J){var K,X,Z,$,re=V.select("#"+F._clipPathId);re.size()||(re=V.append("clipPath").classed("carpetclip",!0));var oe=s.ensureSingle(re,"path","carpetboundary"),ie=U.clipsegments,ue=[];for($=0;$<ie.length;$++)K=ie[$],X=o([],K.x,te.c2p),Z=o([],K.y,J.c2p),ue.push(T(X,Z,K.bicubic));var me="M"+ue.join("L")+"Z";re.attr("id",F._clipPathId),oe.attr("d",me)}(E,w,_,m,y)})};var l=n.LINE_SPACING,u=(1-n.MID_SHIFT)/l+1;function d(c,x,g,p,v,m,y,_,f,S,w){var E=[];y.title.text&&E.push(y.title.text);var P=x.selectAll("text."+w).data(E),C=S.maxExtent;P.enter().append("text").classed(w,!0),P.each(function(){var O=b(g,_,f,v,m);["start","both"].indexOf(y.showticklabels)===-1&&(C=0);var R=y.title.font.size;C+=R+y.title.offset;var j=(S.angle+(S.flip<0?180:0)-O.angle+450)%360,D=j>90&&j<270,N=M.select(this);N.text(y.title.text).call(h.convertToTspans,c),D&&(C=(-h.lineCount(N)+u)*l*R-C),N.attr("transform",i(O.p[0],O.p[1])+t(O.angle)+i(0,C)).attr("text-anchor","middle").call(k.font,y.title.font)}),P.exit().remove()}},81e3:function(ee,z,e){"use strict";var M=e(24588),k=e(14952).findBin,o=e(30180),T=e(29056),b=e(26435),h=e(24464);ee.exports=function(s){var t=s._a,i=s._b,n=t.length,r=i.length,a=s.aaxis,l=s.baxis,u=t[0],d=t[n-1],c=i[0],x=i[r-1],g=t[t.length-1]-t[0],p=i[i.length-1]-i[0],v=g*M.RELATIVE_CULL_TOLERANCE,m=p*M.RELATIVE_CULL_TOLERANCE;u-=v,d+=v,c-=m,x+=m,s.isVisible=function(y,_){return y>u&&y<d&&_>c&&_<x},s.isOccluded=function(y,_){return y<u||y>d||_<c||_>x},s.setScale=function(){var y=s._x,_=s._y,f=o(s._xctrl,s._yctrl,y,_,a.smoothing,l.smoothing);s._xctrl=f[0],s._yctrl=f[1],s.evalxy=T([s._xctrl,s._yctrl],n,r,a.smoothing,l.smoothing),s.dxydi=b([s._xctrl,s._yctrl],a.smoothing,l.smoothing),s.dxydj=h([s._xctrl,s._yctrl],a.smoothing,l.smoothing)},s.i2a=function(y){var _=Math.max(0,Math.floor(y[0]),n-2),f=y[0]-_;return(1-f)*t[_]+f*t[_+1]},s.j2b=function(y){var _=Math.max(0,Math.floor(y[1]),n-2),f=y[1]-_;return(1-f)*i[_]+f*i[_+1]},s.ij2ab=function(y){return[s.i2a(y[0]),s.j2b(y[1])]},s.a2i=function(y){var _=Math.max(0,Math.min(k(y,t),n-2)),f=t[_],S=t[_+1];return Math.max(0,Math.min(n-1,_+(y-f)/(S-f)))},s.b2j=function(y){var _=Math.max(0,Math.min(k(y,i),r-2)),f=i[_],S=i[_+1];return Math.max(0,Math.min(r-1,_+(y-f)/(S-f)))},s.ab2ij=function(y){return[s.a2i(y[0]),s.b2j(y[1])]},s.i2c=function(y,_){return s.evalxy([],y,_)},s.ab2xy=function(y,_,f){if(!f&&(y<t[0]||y>t[n-1]|_<i[0]||_>i[r-1]))return[!1,!1];var S=s.a2i(y),w=s.b2j(_),E=s.evalxy([],S,w);if(f){var P,C,O,R,j=0,D=0,N=[];y<t[0]?(P=0,C=0,j=(y-t[0])/(t[1]-t[0])):y>t[n-1]?(P=n-2,C=1,j=(y-t[n-1])/(t[n-1]-t[n-2])):C=S-(P=Math.max(0,Math.min(n-2,Math.floor(S)))),_<i[0]?(O=0,R=0,D=(_-i[0])/(i[1]-i[0])):_>i[r-1]?(O=r-2,R=1,D=(_-i[r-1])/(i[r-1]-i[r-2])):R=w-(O=Math.max(0,Math.min(r-2,Math.floor(w)))),j&&(s.dxydi(N,P,O,C,R),E[0]+=N[0]*j,E[1]+=N[1]*j),D&&(s.dxydj(N,P,O,C,R),E[0]+=N[0]*D,E[1]+=N[1]*D)}return E},s.c2p=function(y,_,f){return[_.c2p(y[0]),f.c2p(y[1])]},s.p2x=function(y,_,f){return[_.p2c(y[0]),f.p2c(y[1])]},s.dadi=function(y){var _=Math.max(0,Math.min(t.length-2,y));return t[_+1]-t[_]},s.dbdj=function(y){var _=Math.max(0,Math.min(i.length-2,y));return i[_+1]-i[_]},s.dxyda=function(y,_,f,S){var w=s.dxydi(null,y,_,f,S),E=s.dadi(y,f);return[w[0]/E,w[1]/E]},s.dxydb=function(y,_,f,S){var w=s.dxydj(null,y,_,f,S),E=s.dbdj(_,S);return[w[0]/E,w[1]/E]},s.dxyda_rough=function(y,_,f){var S=g*(f||.1),w=s.ab2xy(y+S,_,!0),E=s.ab2xy(y-S,_,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},s.dxydb_rough=function(y,_,f){var S=p*(f||.1),w=s.ab2xy(y,_+S,!0),E=s.ab2xy(y,_-S,!0);return[.5*(w[0]-E[0])/S,.5*(w[1]-E[1])/S]},s.dpdx=function(y){return y._m},s.dpdy=function(y){return y._m}}},51512:function(ee,z,e){"use strict";var M=e(3400);ee.exports=function(k,o,T){var b,h,s,t=[],i=[],n=k[0].length,r=k.length;function a(F,U){var V,te=0,J=0;return F>0&&(V=k[U][F-1])!==void 0&&(J++,te+=V),F<n-1&&(V=k[U][F+1])!==void 0&&(J++,te+=V),U>0&&(V=k[U-1][F])!==void 0&&(J++,te+=V),U<r-1&&(V=k[U+1][F])!==void 0&&(J++,te+=V),te/Math.max(1,J)}var l,u,d,c,x,g,p,v,m,y,_,f=0;for(b=0;b<n;b++)for(h=0;h<r;h++)k[h][b]===void 0&&(t.push(b),i.push(h),k[h][b]=a(b,h)),f=Math.max(f,Math.abs(k[h][b]));if(!t.length)return k;var S=0,w=0,E=t.length;do{for(S=0,s=0;s<E;s++){b=t[s],h=i[s];var P,C,O,R,j,D,N=0,W=0;b===0?(O=o[j=Math.min(n-1,2)],R=o[1],P=k[h][j],W+=(C=k[h][1])+(C-P)*(o[0]-R)/(R-O),N++):b===n-1&&(O=o[j=Math.max(0,n-3)],R=o[n-2],P=k[h][j],W+=(C=k[h][n-2])+(C-P)*(o[n-1]-R)/(R-O),N++),(b===0||b===n-1)&&h>0&&h<r-1&&(l=T[h+1]-T[h],W+=((u=T[h]-T[h-1])*k[h+1][b]+l*k[h-1][b])/(u+l),N++),h===0?(O=T[D=Math.min(r-1,2)],R=T[1],P=k[D][b],W+=(C=k[1][b])+(C-P)*(T[0]-R)/(R-O),N++):h===r-1&&(O=T[D=Math.max(0,r-3)],R=T[r-2],P=k[D][b],W+=(C=k[r-2][b])+(C-P)*(T[r-1]-R)/(R-O),N++),(h===0||h===r-1)&&b>0&&b<n-1&&(l=o[b+1]-o[b],W+=((u=o[b]-o[b-1])*k[h][b+1]+l*k[h][b-1])/(u+l),N++),N?W/=N:(d=o[b+1]-o[b],c=o[b]-o[b-1],v=(x=T[h+1]-T[h])*(g=T[h]-T[h-1])*(x+g),W=((p=d*c*(d+c))*(g*k[h+1][b]+x*k[h-1][b])+v*(c*k[h][b+1]+d*k[h][b-1]))/(v*(c+d)+p*(g+x))),S+=(y=(m=W-k[h][b])/f)*y,_=N?0:.85,k[h][b]+=m*(1+_)}S=Math.sqrt(S)}while(w++<100&&S>1e-5);return M.log("Smoother converged to",S,"after",w,"iterations"),k}},86411:function(ee,z,e){"use strict";var M=e(3400).isArray1D;ee.exports=function(k,o,T){var b=T("x"),h=b&&b.length,s=T("y"),t=s&&s.length;if(!h&&!t)return!1;if(o._cheater=!b,h&&!M(b)||t&&!M(s))o._length=null;else{var i=h?b.length:1/0;t&&(i=Math.min(i,s.length)),o.a&&o.a.length&&(i=Math.min(i,o.a.length)),o.b&&o.b.length&&(i=Math.min(i,o.b.length)),o._length=i}return!0}},83372:function(ee,z,e){"use strict";var M=e(21776).Ks,k=e(6096),o=e(49084),T=e(45464),b=e(22548).defaultLine,h=e(92880).extendFlat,s=k.marker.line;ee.exports=h({locations:{valType:"data_array",editType:"calc"},locationmode:k.locationmode,z:{valType:"data_array",editType:"calc"},geojson:h({},k.geojson,{}),featureidkey:k.featureidkey,text:h({},k.text,{}),hovertext:h({},k.hovertext,{}),marker:{line:{color:h({},s.color,{dflt:b}),width:h({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:k.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:k.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:h({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:M(),showlegend:h({},T.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(ee,z,e){"use strict";var M=e(38248),k=e(39032).BADNUM,o=e(47128),T=e(20148),b=e(4500);function h(s){return s&&typeof s=="string"}ee.exports=function(s,t){var i,n=t._length,r=new Array(n);i=t.geojson?function(c){return h(c)||M(c)}:h;for(var a=0;a<n;a++){var l=r[a]={},u=t.locations[a],d=t.z[a];i(u)&&M(d)?(l.loc=u,l.z=d):(l.loc=null,l.z=k),l.index=a}return T(r,t),o(s,t,{vals:t.z,containerStr:"",cLetter:"z"}),b(r,t),r}},30972:function(ee,z,e){"use strict";var M=e(3400),k=e(27260),o=e(83372);ee.exports=function(T,b,h,s){function t(l,u){return M.coerce(T,b,o,l,u)}var i=t("locations"),n=t("z");if(i&&i.length&&M.isArrayOrTypedArray(n)&&n.length){b._length=Math.min(i.length,n.length);var r,a=t("geojson");(typeof a=="string"&&a!==""||M.isPlainObject(a))&&(r="geojson-id"),t("locationmode",r)==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,s,t,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(b,t)}else b.visible=!1}},52428:function(ee){"use strict";ee.exports=function(z,e,M,k,o){z.location=e.location,z.z=e.z;var T=k[o];return T.fIn&&T.fIn.properties&&(z.properties=T.fIn.properties),z.ct=T.ct,z}},69224:function(ee,z,e){"use strict";var M=e(54460),k=e(83372),o=e(3400).fillText;ee.exports=function(T,b,h){var s,t,i,n,r=T.cd,a=r[0].trace,l=T.subplot,u=[b,h],d=[b+360,h];for(t=0;t<r.length;t++)if(n=!1,(s=r[t])._polygons){for(i=0;i<s._polygons.length;i++)s._polygons[i].contains(u)&&(n=!n),s._polygons[i].contains(d)&&(n=!n);if(n)break}if(n&&s)return T.x0=T.x1=T.xa.c2p(s.ct),T.y0=T.y1=T.ya.c2p(s.ct),T.index=s.index,T.location=s.loc,T.z=s.z,T.zLabel=M.tickText(l.mockAxis,l.mockAxis.c2l(s.z),"hover").text,T.hovertemplate=s.hovertemplate,function(c,x,g){if(!x.hovertemplate){var p=g.hi||x.hoverinfo,v=String(g.loc),m=p==="all"?k.hoverinfo.flags:p.split("+"),y=m.indexOf("name")!==-1,_=m.indexOf("location")!==-1,f=m.indexOf("z")!==-1,S=m.indexOf("text")!==-1,w=[];!y&&_?c.nameOverride=v:(y&&(c.nameOverride=x.name),_&&w.push(v)),f&&w.push(c.zLabel),S&&o(g,x,w),c.extraText=w.join("<br>")}}(T,a,s),[T]}},54272:function(ee,z,e){"use strict";ee.exports={attributes:e(83372),supplyDefaults:e(30972),colorbar:e(96288),calc:e(7924),calcGeoJSON:e(88364).calcGeoJSON,plot:e(88364).plot,style:e(7947).style,styleOnSelect:e(7947).styleOnSelect,hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),moduleType:"trace",name:"choropleth",basePlotModule:e(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(27144),T=e(59972).getTopojsonFeatures,b=e(19280).findExtremes,h=e(7947).style;ee.exports={calcGeoJSON:function(s,t){for(var i=s[0].trace,n=t[i.geo],r=n._subplot,a=i.locationmode,l=i._length,u=a==="geojson-id"?o.extractTraceFeature(s):T(i,r.topojson),d=[],c=[],x=0;x<l;x++){var g=s[x],p=a==="geojson-id"?g.fOut:o.locationToFeature(a,g.loc,u);if(p){g.geojson=p,g.ct=p.properties.ct,g._polygons=o.feature2polygons(p);var v=o.computeBbox(p);d.push(v[0],v[2]),c.push(v[1],v[3])}else g.geojson=null}if(n.fitbounds==="geojson"&&a==="geojson-id"){var m=o.computeBbox(o.getTraceGeojson(i));d=[m[0],m[2]],c=[m[1],m[3]]}var y={padded:!0};i._extremes.lon=b(n.lonaxis._ax,d,y),i._extremes.lat=b(n.lataxis._ax,c,y)},plot:function(s,t,i){var n=t.layers.backplot.select(".choroplethlayer");k.makeTraceGroups(n,i,"trace choropleth").each(function(r){var a=M.select(this).selectAll("path.choroplethlocation").data(k.identity);a.enter().append("path").classed("choroplethlocation",!0),a.exit().remove(),h(s,r)})}}},17328:function(ee){"use strict";ee.exports=function(z,e){var M,k,o,T,b,h=z.cd,s=z.xaxis,t=z.yaxis,i=[];if(e===!1)for(M=0;M<h.length;M++)h[M].selected=0;else for(M=0;M<h.length;M++)(o=(k=h[M]).ct)&&(T=s.c2p(o),b=t.c2p(o),e.contains([T,b],null,M,z)?(i.push({pointNumber:M,lon:o[0],lat:o[1]}),k.selected=1):k.selected=0);return i}},7947:function(ee,z,e){"use strict";var M=e(33428),k=e(76308),o=e(43616),T=e(8932);function b(h,s){var t=s[0].trace,i=s[0].node3.selectAll(".choroplethlocation"),n=t.marker||{},r=n.line||{},a=T.makeColorScaleFuncFromTrace(t);i.each(function(l){M.select(this).attr("fill",a(l.z)).call(k.stroke,l.mlc||r.color).call(o.dashLine,"",l.mlw||r.width||0).style("opacity",n.opacity)}),o.selectedPointStyle(i,t)}ee.exports={style:function(h,s){s&&b(0,s)},styleOnSelect:function(h,s){var t=s[0].node3,i=s[0].trace;i.selectedpoints?o.selectedPointStyle(t.selectAll(".choroplethlocation"),i):b(0,s)}}},45608:function(ee,z,e){"use strict";var M=e(83372),k=e(49084),o=e(21776).Ks,T=e(45464),b=e(92880).extendFlat;ee.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},M.featureidkey,{}),below:{valType:"string",editType:"plot"},text:M.text,hovertext:M.hovertext,marker:{line:{color:b({},M.marker.line.color,{editType:"plot"}),width:b({},M.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},M.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},M.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},M.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:M.hoverinfo,hovertemplate:o({},{keys:["properties"]}),showlegend:b({},T.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=e(8932),T=e(43616),b=e(44808).makeBlank,h=e(27144);function s(t){var i,n=t[0].trace,r=n._opts;if(n.selectedpoints){for(var a=T.makeSelectedPointStyleFns(n),l=0;l<t.length;l++){var u=t[l];u.fOut&&(u.fOut.properties.mo2=a.selectedOpacityFn(u))}i={type:"identity",property:"mo2"}}else i=k.isArrayOrTypedArray(n.marker.opacity)?{type:"identity",property:"mo"}:n.marker.opacity;return k.extendFlat(r.fill.paint,{"fill-opacity":i}),k.extendFlat(r.line.paint,{"line-opacity":i}),r}ee.exports={convert:function(t){var i=t[0].trace,n=i.visible===!0&&i._length!==0,r={layout:{visibility:"none"},paint:{}},a={layout:{visibility:"none"},paint:{}},l=i._opts={fill:r,line:a,geojson:b()};if(!n)return l;var u=h.extractTraceFeature(t);if(!u)return l;var d,c,x,g=o.makeColorScaleFuncFromTrace(i),p=i.marker,v=p.line||{};k.isArrayOrTypedArray(p.opacity)&&(d=function(w){var E=w.mo;return M(E)?+k.constrain(E,0,1):0}),k.isArrayOrTypedArray(v.color)&&(c=function(w){return w.mlc}),k.isArrayOrTypedArray(v.width)&&(x=function(w){return w.mlw});for(var m=0;m<t.length;m++){var y=t[m],_=y.fOut;if(_){var f=_.properties;f.fc=g(y.z),d&&(f.mo=d(y)),c&&(f.mlc=c(y)),x&&(f.mlw=x(y)),y.ct=f.ct,y._polygons=h.feature2polygons(_)}}var S=d?{type:"identity",property:"mo"}:p.opacity;return k.extendFlat(r.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),k.extendFlat(a.paint,{"line-color":c?{type:"identity",property:"mlc"}:v.color,"line-width":x?{type:"identity",property:"mlw"}:v.width,"line-opacity":S}),r.layout.visibility="visible",a.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:u},s(t),l},convertOnSelect:s}},9352:function(ee,z,e){"use strict";var M=e(3400),k=e(27260),o=e(45608);ee.exports=function(T,b,h,s){function t(a,l){return M.coerce(T,b,o,a,l)}var i=t("locations"),n=t("z"),r=t("geojson");M.isArrayOrTypedArray(i)&&i.length&&M.isArrayOrTypedArray(n)&&n.length&&(typeof r=="string"&&r!==""||M.isPlainObject(r))?(t("featureidkey"),b._length=Math.min(i.length,n.length),t("below"),t("text"),t("hovertext"),t("hovertemplate"),t("marker.line.width")&&t("marker.line.color"),t("marker.opacity"),k(T,b,s,t,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(b,t)):b.visible=!1}},85404:function(ee,z,e){"use strict";ee.exports={attributes:e(45608),supplyDefaults:e(9352),colorbar:e(96288),calc:e(7924),plot:e(61288),hoverPoints:e(69224),eventData:e(52428),selectPoints:e(17328),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.updateOnSelect(k)},getBelow:function(M,k){for(var o=k.getMapLayers(),T=o.length-2;T>=0;T--){var b=o[T].id;if(typeof b=="string"&&b.indexOf("water")===0){for(var h=T+1;h<o.length;h++)if(typeof(b=o[h].id)=="string"&&b.indexOf("plotly-")===-1)return b}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(ee,z,e){"use strict";var M=e(13504).convert,k=e(13504).convertOnSelect,o=e(47552).traceLayerPrefix;function T(h,s){this.type="choroplethmapbox",this.subplot=h,this.uid=s,this.sourceId="source-"+s,this.layerList=[["fill",o+s+"-fill"],["line",o+s+"-line"]],this.below=null}var b=T.prototype;b.update=function(h){this._update(M(h)),h[0].trace._glTrace=this},b.updateOnSelect=function(h){this._update(k(h))},b._update=function(h){var s=this.subplot,t=this.layerList,i=s.belowLookup["trace-"+this.uid];s.map.getSource(this.sourceId).setData(h.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(h,i),this.below=i);for(var n=0;n<t.length;n++){var r=t[n],a=r[0],l=r[1],u=h[a];s.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&s.setOptions(l,"setPaintProperty",u.paint)}},b._addLayers=function(h,s){for(var t=this.subplot,i=this.layerList,n=this.sourceId,r=0;r<i.length;r++){var a=i[r],l=a[0],u=h[l];t.addLayer({type:l,id:a[1],source:n,layout:u.layout,paint:u.paint},s)}},b._removeLayers=function(){for(var h=this.subplot.map,s=this.layerList,t=s.length-1;t>=0;t--)h.removeLayer(s[t][1])},b.dispose=function(){var h=this.subplot.map;this._removeLayers(),h.removeSource(this.sourceId)},ee.exports=function(h,s){var t=s[0].trace,i=new T(h,t.uid),n=i.sourceId,r=M(s),a=i.below=h.belowLookup["trace-"+t.uid];return h.map.addSource(n,{type:"geojson",data:r.geojson}),i._addLayers(r,a),s[0].trace._glTrace=i,i}},86040:function(ee,z,e){"use strict";var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),b=e(45464),h=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["norm"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:h({},b.showlegend,{dflt:!1})};h(s,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=h({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,ee.exports=s},83344:function(ee,z,e){"use strict";var M=e(47128);ee.exports=function(k,o){for(var T=o.u,b=o.v,h=o.w,s=Math.min(o.x.length,o.y.length,o.z.length,T.length,b.length,h.length),t=-1/0,i=1/0,n=0;n<s;n++){var r=T[n],a=b[n],l=h[n],u=Math.sqrt(r*r+a*a+l*l);t=Math.max(t,u),i=Math.min(i,u)}o._len=s,o._normMax=t,M(k,o,{vals:[i,t],containerStr:"",cLetter:"c"})}},6648:function(ee,z,e){"use strict";var M=e(67792).gl_cone3d,k=e(67792).gl_cone3d.createConeMesh,o=e(3400).simpleMap,T=e(33040).parseColorScale,b=e(8932).extractOpts,h=e(3400).isArrayOrTypedArray,s=e(52094);function t(u,d){this.scene=u,this.uid=d,this.mesh=null,this.data=null}var i=t.prototype;i.handlePick=function(u){if(u.object===this.mesh){var d=u.index=u.data.index,c=this.data.x[d],x=this.data.y[d],g=this.data.z[d],p=this.data.u[d],v=this.data.v[d],m=this.data.w[d];u.traceCoordinate=[c,x,g,p,v,m,Math.sqrt(p*p+v*v+m*m)];var y=this.data.hovertext||this.data.text;return h(y)&&y[d]!==void 0?u.textLabel=y[d]:y&&(u.textLabel=y),!0}};var n={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},a={tip:1,tail:1,cm:.75,center:.5};function l(u,d){var c=u.fullSceneLayout,x=u.dataScale,g={};function p(_,f){var S=c[f],w=x[n[f]];return o(_,function(E){return S.d2l(E)*w})}g.vectors=s(p(d.u,"xaxis"),p(d.v,"yaxis"),p(d.w,"zaxis"),d._len),g.positions=s(p(d.x,"xaxis"),p(d.y,"yaxis"),p(d.z,"zaxis"),d._len);var v=b(d);g.colormap=T(d),g.vertexIntensityBounds=[v.min/d._normMax,v.max/d._normMax],g.coneOffset=r[d.anchor],d.sizemode==="scaled"?g.coneSize=d.sizeref||.5:g.coneSize=d.sizeref&&d._normMax?d.sizeref/d._normMax:.5;var m=M(g),y=d.lightposition;return m.lightPosition=[y.x,y.y,y.z],m.ambient=d.lighting.ambient,m.diffuse=d.lighting.diffuse,m.specular=d.lighting.specular,m.roughness=d.lighting.roughness,m.fresnel=d.lighting.fresnel,m.opacity=d.opacity,d._pad=a[d.anchor]*m.vectorScale*m.coneScale*d._normMax,m}i.update=function(u){this.data=u;var d=l(this.scene,u);this.mesh.update(d)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(u,d){var c=u.glplot.gl,x=l(u,d),g=k(c,x),p=new t(u,d.uid);return p.mesh=g,p.data=d,g._trace=p,u.glplot.add(g),p}},86096:function(ee,z,e){"use strict";var M=e(3400),k=e(27260),o=e(86040);ee.exports=function(T,b,h,s){function t(d,c){return M.coerce(T,b,o,d,c)}var i=t("u"),n=t("v"),r=t("w"),a=t("x"),l=t("y"),u=t("z");i&&i.length&&n&&n.length&&r&&r.length&&a&&a.length&&l&&l.length&&u&&u.length?(t("sizeref"),t("sizemode"),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},26048:function(ee,z,e){"use strict";ee.exports={moduleType:"trace",name:"cone",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(86040),supplyDefaults:e(86096),colorbar:{min:"cmin",max:"cmax"},calc:e(83344),plot:e(6648),eventData:function(M,k){return M.norm=k.traceCoordinate[6],M},meta:{}}},67104:function(ee,z,e){"use strict";var M=e(83328),k=e(52904),o=e(29736),T=o.axisHoverFormat,b=o.descriptionOnlyNumbers,h=e(49084),s=e(98192).u,t=e(25376),i=e(92880).extendFlat,n=e(69104),r=n.COMPARISON_OPS2,a=n.INTERVAL_OPS,l=k.line;ee.exports=i({z:M.z,x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,text:M.text,hovertext:M.hovertext,transpose:M.transpose,xtype:M.xtype,ytype:M.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:i({},M.texttemplate,{}),textfont:i({},M.textfont,{}),hoverongaps:M.hoverongaps,connectgaps:i({},M.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:b("contour label")},operation:{valType:"enumerated",values:[].concat(r).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:s,smoothing:i({},l.smoothing,{}),editType:"plot"}},h("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(ee,z,e){"use strict";var M=e(8932),k=e(19512),o=e(54444),T=e(46960);ee.exports=function(b,h){var s=k(b,h),t=s[0].z;o(h,t);var i,n=h.contours,r=M.extractOpts(h);if(n.coloring==="heatmap"&&r.auto&&h.autocontour===!1){var a=n.start,l=T(n),u=n.size||1,d=Math.floor((l-a)/u)+1;isFinite(u)||(u=1,d=1);var c=a-u/2;i=[c,c+d*u]}else i=t;return M.calc(b,h,{vals:i,cLetter:"z"}),s}},56008:function(ee){"use strict";ee.exports=function(z,e){var M,k=z[0],o=k.z;switch(e.type){case"levels":var T=Math.min(o[0][0],o[0][1]);for(M=0;M<z.length;M++){var b=z[M];b.prefixBoundary=!b.edgepaths.length&&(T>b.level||b.starts.length&&T===b.level)}break;case"constraint":if(k.prefixBoundary=!1,k.edgepaths.length)return;var h=k.x.length,s=k.y.length,t=-1/0,i=1/0;for(M=0;M<s;M++)i=Math.min(i,o[M][0]),i=Math.min(i,o[M][h-1]),t=Math.max(t,o[M][0]),t=Math.max(t,o[M][h-1]);for(M=1;M<h-1;M++)i=Math.min(i,o[0][M]),i=Math.min(i,o[s-1][M]),t=Math.max(t,o[0][M]),t=Math.max(t,o[s-1][M]);var n,r,a=e.value;switch(e._operation){case">":a>t&&(k.prefixBoundary=!0);break;case"<":(a<i||k.starts.length&&a===i)&&(k.prefixBoundary=!0);break;case"[]":n=Math.min(a[0],a[1]),((r=Math.max(a[0],a[1]))<i||n>t||k.starts.length&&r===i)&&(k.prefixBoundary=!0);break;case"][":n=Math.min(a[0],a[1]),r=Math.max(a[0],a[1]),n<i&&r>t&&(k.prefixBoundary=!0)}}}},55296:function(ee,z,e){"use strict";var M=e(8932),k=e(41076),o=e(46960);ee.exports={min:"zmin",max:"zmax",calc:function(T,b,h){var s=b.contours,t=b.line,i=s.size||1,n=s.coloring,r=k(b,{isColorbar:!0});if(n==="heatmap"){var a=M.extractOpts(b);h._fillgradient=a.reversescale?M.flipScale(a.colorscale):a.colorscale,h._zrange=[a.min,a.max]}else n==="fill"&&(h._fillcolor=r);h._line={color:n==="lines"?r:t.color,width:s.showlines!==!1?t.width:0,dash:t.dash},h._levels={start:s.start,end:o(s),size:i}}}},93252:function(ee){"use strict";ee.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(ee,z,e){"use strict";var M=e(38248),k=e(17428),o=e(76308),T=o.addOpacity,b=o.opacity,h=e(69104),s=e(3400).isArrayOrTypedArray,t=h.CONSTRAINT_REDUCTION,i=h.COMPARISON_OPS2;ee.exports=function(n,r,a,l,u,d){var c,x,g,p=r.contours,v=a("contours.operation");p._operation=t[v],function(m,y){var _;i.indexOf(y.operation)===-1?(m("contours.value",[0,1]),s(y.value)?y.value.length>2?y.value=y.value.slice(2):y.length===0?y.value=[0,1]:y.length<2?(_=parseFloat(y.value[0]),y.value=[_,_+1]):y.value=[parseFloat(y.value[0]),parseFloat(y.value[1])]:M(y.value)&&(_=parseFloat(y.value),y.value=[_,_+1])):(m("contours.value",0),M(y.value)||(s(y.value)?y.value=parseFloat(y.value[0]):y.value=0))}(a,p),v==="="?c=p.showlines=!0:(c=a("contours.showlines"),g=a("fillcolor",T((n.line||{}).color||u,.5))),c&&(x=a("line.color",g&&b(g)?T(r.fillcolor,1):u),a("line.width",2),a("line.dash")),a("line.smoothing"),k(a,l,x,d)}},3212:function(ee,z,e){"use strict";var M=e(69104),k=e(38248);function o(h,s){var t,i=Array.isArray(s);function n(r){return k(r)?+r:null}return M.COMPARISON_OPS2.indexOf(h)!==-1?t=n(i?s[0]:s):M.INTERVAL_OPS.indexOf(h)!==-1?t=i?[n(s[0]),n(s[1])]:[n(s),n(s)]:M.SET_OPS.indexOf(h)!==-1&&(t=i?s.map(n):[n(s)]),t}function T(h){return function(s){s=o(h,s);var t=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return{start:t,end:i,size:i-t}}}function b(h){return function(s){return{start:s=o(h,s),end:1/0,size:1/0}}}ee.exports={"[]":T("[]"),"][":T("]["),">":b(">"),"<":b("<"),"=":b("=")}},84952:function(ee){"use strict";ee.exports=function(z,e,M,k){var o=k("contours.start"),T=k("contours.end"),b=o===!1||T===!1,h=M("contours.size");!(b?e.autocontour=!0:M("autocontour",!1))&&h||M("ncontours")}},82172:function(ee,z,e){"use strict";var M=e(3400);function k(o){return M.extendFlat({},o,{edgepaths:M.extendDeep([],o.edgepaths),paths:M.extendDeep([],o.paths),starts:M.extendDeep([],o.starts)})}ee.exports=function(o,T){var b,h,s,t=function(r){return r.reverse()},i=function(r){return r};switch(T){case"=":case"<":return o;case">":for(o.length!==1&&M.warn("Contour data invalid for the specified inequality operation."),h=o[0],b=0;b<h.edgepaths.length;b++)h.edgepaths[b]=t(h.edgepaths[b]);for(b=0;b<h.paths.length;b++)h.paths[b]=t(h.paths[b]);for(b=0;b<h.starts.length;b++)h.starts[b]=t(h.starts[b]);return o;case"][":var n=t;t=i,i=n;case"[]":for(o.length!==2&&M.warn("Contour data invalid for the specified inequality range operation."),h=k(o[0]),s=k(o[1]),b=0;b<h.edgepaths.length;b++)h.edgepaths[b]=t(h.edgepaths[b]);for(b=0;b<h.paths.length;b++)h.paths[b]=t(h.paths[b]);for(b=0;b<h.starts.length;b++)h.starts[b]=t(h.starts[b]);for(;s.edgepaths.length;)h.edgepaths.push(i(s.edgepaths.shift()));for(;s.paths.length;)h.paths.push(i(s.paths.shift()));for(;s.starts.length;)h.starts.push(i(s.starts.shift()));return[h]}}},57004:function(ee,z,e){"use strict";var M=e(3400),k=e(51264),o=e(31147),T=e(95536),b=e(84952),h=e(97680),s=e(39096),t=e(67104);ee.exports=function(i,n,r,a){function l(d,c){return M.coerce(i,n,t,d,c)}if(k(i,n,l,a)){o(i,n,a,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hoverongaps"),l("hovertemplate");var u=l("contours.type")==="constraint";l("connectgaps",M.isArray1D(n.z)),u?T(i,n,l,a,r):(b(i,n,l,function(d){return M.coerce2(i,n,t,d)}),h(i,n,l,a)),n.contours&&n.contours.coloring==="heatmap"&&s(l,a)}else n.visible=!1}},61512:function(ee,z,e){"use strict";var M=e(3400),k=e(3212),o=e(46960);ee.exports=function(T,b,h){for(var s=T.type==="constraint"?k[T._operation](T.value):T,t=s.size,i=[],n=o(s),r=h.trace._carpetTrace,a=r?{xaxis:r.aaxis,yaxis:r.baxis,x:h.a,y:h.b}:{xaxis:b.xaxis,yaxis:b.yaxis,x:h.x,y:h.y},l=s.start;l<n;l+=t)if(i.push(M.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:h.z,smoothing:h.trace.line.smoothing},a)),i.length>1e3){M.warn("Too many contours, clipping at 1000",T);break}return i}},46960:function(ee){"use strict";ee.exports=function(z){return z.end+z.size/1e6}},88748:function(ee,z,e){"use strict";var M=e(3400),k=e(93252);function o(h,s,t,i){return Math.abs(h[0]-s[0])<t&&Math.abs(h[1]-s[1])<i}function T(h,s,t,i,n){var r,a=s.join(","),l=h.crossings[a],u=function(re,oe,ie){var ue=0,me=0;return re>20&&oe?re===208||re===1114?ue=ie[0]===0?1:-1:me=ie[1]===0?1:-1:k.BOTTOMSTART.indexOf(re)!==-1?me=1:k.LEFTSTART.indexOf(re)!==-1?ue=1:k.TOPSTART.indexOf(re)!==-1?me=-1:ue=-1,[ue,me]}(l,t,s),d=[b(h,s,[-u[0],-u[1]])],c=h.z.length,x=h.z[0].length,g=s.slice(),p=u.slice();for(r=0;r<1e4;r++){if(l>20?(l=k.CHOOSESADDLE[l][(u[0]||u[1])<0?0:1],h.crossings[a]=k.SADDLEREMAINDER[l]):delete h.crossings[a],!(u=k.NEWDELTA[l])){M.log("Found bad marching index:",l,s,h.level);break}d.push(b(h,s,u)),s[0]+=u[0],s[1]+=u[1],a=s.join(","),o(d[d.length-1],d[d.length-2],i,n)&&d.pop();var v=u[0]&&(s[0]<0||s[0]>x-2)||u[1]&&(s[1]<0||s[1]>c-2);if(s[0]===g[0]&&s[1]===g[1]&&u[0]===p[0]&&u[1]===p[1]||t&&v)break;l=h.crossings[a]}r===1e4&&M.log("Infinite loop in contour?");var m,y,_,f,S,w,E,P,C,O,R,j,D,N,W,F=o(d[0],d[d.length-1],i,n),U=0,V=.2*h.smoothing,te=[],J=0;for(r=1;r<d.length;r++)j=d[r],D=d[r-1],N=j[2]-D[2],W=j[3]-D[3],U+=E=Math.sqrt(N*N+W*W),te.push(E);var K=U/te.length*V;function X(re){return d[re%d.length]}for(r=d.length-2;r>=J;r--)if((m=te[r])<K){for(_=0,y=r-1;y>=J&&m+te[y]<K;y--)m+=te[y];if(F&&r===d.length-2)for(_=0;_<y&&m+te[_]<K;_++)m+=te[_];S=r-y+_+1,w=Math.floor((r+y+_+2)/2),f=F||r!==d.length-2?F||y!==-1?S%2?X(w):[(X(w)[0]+X(w+1)[0])/2,(X(w)[1]+X(w+1)[1])/2]:d[0]:d[d.length-1],d.splice(y+1,r-y+1,f),r=y+1,_&&(J=_),F&&(r===d.length-2?d[_]=d[d.length-1]:r===0&&(d[d.length-1]=d[0]))}for(d.splice(0,J),r=0;r<d.length;r++)d[r].length=2;if(!(d.length<2))if(F)d.pop(),h.paths.push(d);else{t||M.log("Unclosed interior contour?",h.level,g.join(","),d.join("L"));var Z=!1;for(P=0;P<h.edgepaths.length;P++)if(O=h.edgepaths[P],!Z&&o(O[0],d[d.length-1],i,n)){d.pop(),Z=!0;var $=!1;for(C=0;C<h.edgepaths.length;C++)if(o((R=h.edgepaths[C])[R.length-1],d[0],i,n)){$=!0,d.shift(),h.edgepaths.splice(P,1),C===P?h.paths.push(d.concat(R)):(C>P&&C--,h.edgepaths[C]=R.concat(d,O));break}$||(h.edgepaths[P]=d.concat(O))}for(P=0;P<h.edgepaths.length&&!Z;P++)o((O=h.edgepaths[P])[O.length-1],d[0],i,n)&&(d.shift(),h.edgepaths[P]=O.concat(d),Z=!0);Z||h.edgepaths.push(d)}}function b(h,s,t){var i=s[0]+Math.max(t[0],0),n=s[1]+Math.max(t[1],0),r=h.z[n][i],a=h.xaxis,l=h.yaxis;if(t[1]){var u=(h.level-r)/(h.z[n][i+1]-r),d=(u!==1?(1-u)*a.c2l(h.x[i]):0)+(u!==0?u*a.c2l(h.x[i+1]):0);return[a.c2p(a.l2c(d),!0),l.c2p(h.y[n],!0),i+u,n]}var c=(h.level-r)/(h.z[n+1][i]-r),x=(c!==1?(1-c)*l.c2l(h.y[n]):0)+(c!==0?c*l.c2l(h.y[n+1]):0);return[a.c2p(h.x[i],!0),l.c2p(l.l2c(x),!0),i,n+c]}ee.exports=function(h,s,t){var i,n,r,a;for(s=s||.01,t=t||.01,n=0;n<h.length;n++){for(r=h[n],a=0;a<r.starts.length;a++)T(r,r.starts[a],"edge",s,t);for(i=0;Object.keys(r.crossings).length&&i<1e4;)i++,T(r,Object.keys(r.crossings)[0].split(",").map(Number),void 0,s,t);i===1e4&&M.log("Infinite loop in contour?")}}},38200:function(ee,z,e){"use strict";var M=e(76308),k=e(55512);ee.exports=function(o,T,b,h,s){s||(s={}),s.isContour=!0;var t=k(o,T,b,h,s);return t&&t.forEach(function(i){var n=i.trace;n.contours.type==="constraint"&&(n.fillcolor&&M.opacity(n.fillcolor)?i.color=M.addOpacity(n.fillcolor,1):n.contours.showlines&&M.opacity(n.line.color)&&(i.color=M.addOpacity(n.line.color,1)))}),t}},66240:function(ee,z,e){"use strict";ee.exports={attributes:e(67104),supplyDefaults:e(57004),calc:e(20688),plot:e(23676).plot,style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"contour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(ee,z,e){"use strict";var M=e(3400);ee.exports=function(k,o,T,b){if(b||(b={}),k("contours.showlabels")){var h=o.font;M.coerceFont(k,"contours.labelfont",{family:h.family,size:h.size,color:T}),k("contours.labelformat")}b.hasHover!==!1&&k("zhoverformat")}},41076:function(ee,z,e){"use strict";var M=e(33428),k=e(8932),o=e(46960);ee.exports=function(T){var b=T.contours,h=b.start,s=o(b),t=b.size||1,i=Math.floor((s-h)/t)+1,n=b.coloring==="lines"?0:1,r=k.extractOpts(T);isFinite(t)||(t=1,i=1);var a,l,u=r.reversescale?k.flipScale(r.colorscale):r.colorscale,d=u.length,c=new Array(d),x=new Array(d),g=r.min,p=r.max;if(b.coloring==="heatmap"){for(l=0;l<d;l++)a=u[l],c[l]=a[0]*(p-g)+g,x[l]=a[1];var v=M.extent([g,p,b.start,b.start+t*(i-1)]),m=v[g<p?0:1],y=v[g<p?1:0];m!==g&&(c.splice(0,0,m),x.splice(0,0,x[0])),y!==p&&(c.push(y),x.push(x[x.length-1]))}else{var _=T._input&&typeof T._input.zmin=="number"&&typeof T._input.zmax=="number";for(_&&(h<=g||s>=p)&&(h<=g&&(h=g),s>=p&&(s=p),i=Math.floor((s-h)/t)+1,n=0),l=0;l<d;l++)a=u[l],c[l]=(a[0]*(i+n-1)-n/2)*t+h,x[l]=a[1];(_||T.autocontour)&&(c[0]>g&&(c.unshift(g),x.unshift(x[0])),c[c.length-1]<p&&(c.push(p),x.push(x[x.length-1])))}return k.makeColorScaleFunc({domain:c,range:x},{noNumericCheck:!0})}},72424:function(ee,z,e){"use strict";var M=e(93252);function k(o,T){var b=(T[0][0]>o?0:1)+(T[0][1]>o?0:2)+(T[1][1]>o?0:4)+(T[1][0]>o?0:8);return b===5||b===10?o>(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4?b===5?713:1114:b===5?104:208:b===15?0:b}ee.exports=function(o){var T,b,h,s,t,i,n,r,a,l=o[0].z,u=l.length,d=l[0].length,c=u===2||d===2;for(b=0;b<u-1;b++)for(s=[],b===0&&(s=s.concat(M.BOTTOMSTART)),b===u-2&&(s=s.concat(M.TOPSTART)),T=0;T<d-1;T++)for(h=s.slice(),T===0&&(h=h.concat(M.LEFTSTART)),T===d-2&&(h=h.concat(M.RIGHTSTART)),t=T+","+b,i=[[l[b][T],l[b][T+1]],[l[b+1][T],l[b+1][T+1]]],a=0;a<o.length;a++)(n=k((r=o[a]).level,i))&&(r.crossings[t]=n,h.indexOf(n)!==-1&&(r.starts.push([T,b]),c&&h.indexOf(n,h.indexOf(n)+1)!==-1&&r.starts.push([T,b])))}},23676:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(8932),b=e(72736),h=e(54460),s=e(78344),t=e(41420),i=e(72424),n=e(88748),r=e(61512),a=e(82172),l=e(56008),u=e(93252),d=u.LABELOPTIMIZER;function c(p,v){var m,y,_,f,S,w,E,P="",C=0,O=p.edgepaths.map(function(F,U){return U}),R=!0;function j(F){return Math.abs(F[1]-v[2][1])<.01}function D(F){return Math.abs(F[0]-v[0][0])<.01}function N(F){return Math.abs(F[0]-v[2][0])<.01}for(;O.length;){for(w=o.smoothopen(p.edgepaths[C],p.smoothing),P+=R?w:w.replace(/^M/,"L"),O.splice(O.indexOf(C),1),m=p.edgepaths[C][p.edgepaths[C].length-1],f=-1,_=0;_<4;_++){if(!m){k.log("Missing end?",C,p);break}for(E=m,Math.abs(E[1]-v[0][1])<.01&&!N(m)?y=v[1]:D(m)?y=v[0]:j(m)?y=v[3]:N(m)&&(y=v[2]),S=0;S<p.edgepaths.length;S++){var W=p.edgepaths[S][0];Math.abs(m[0]-y[0])<.01?Math.abs(m[0]-W[0])<.01&&(W[1]-m[1])*(y[1]-W[1])>=0&&(y=W,f=S):Math.abs(m[1]-y[1])<.01?Math.abs(m[1]-W[1])<.01&&(W[0]-m[0])*(y[0]-W[0])>=0&&(y=W,f=S):k.log("endpt to newendpt is not vert. or horz.",m,y,W)}if(m=y,f>=0)break;P+="L"+y}if(f===p.edgepaths.length){k.log("unclosed perimeter path");break}C=f,(R=O.indexOf(C)===-1)&&(C=O[0],P+="Z")}for(C=0;C<p.paths.length;C++)P+=o.smoothclosed(p.paths[C],p.smoothing);return P}function x(p,v,m,y){var _=v.width/2,f=v.height/2,S=p.x,w=p.y,E=p.theta,P=Math.cos(E)*_,C=Math.sin(E)*_,O=(S>y.center?y.right-S:S-y.left)/(P+Math.abs(Math.sin(E)*f)),R=(w>y.middle?y.bottom-w:w-y.top)/(Math.abs(C)+Math.cos(E)*f);if(O<1||R<1)return 1/0;var j=d.EDGECOST*(1/(O-1)+1/(R-1));j+=d.ANGLECOST*E*E;for(var D=S-P,N=w-C,W=S+P,F=w+C,U=0;U<m.length;U++){var V=m[U],te=Math.cos(V.theta)*V.width/2,J=Math.sin(V.theta)*V.width/2,K=2*k.segmentDistance(D,N,W,F,V.x-te,V.y-J,V.x+te,V.y+J)/(v.height+V.height),X=V.level===v.level,Z=X?d.SAMELEVELDISTANCE:1;if(K<=Z)return 1/0;j+=d.NEIGHBORCOST*(X?d.SAMELEVELFACTOR:1)/(K-Z)}return j}function g(p){var v,m,y=p.trace._emptypoints,_=[],f=p.z.length,S=p.z[0].length,w=[];for(v=0;v<S;v++)w.push(1);for(v=0;v<f;v++)_.push(w.slice());for(v=0;v<y.length;v++)_[(m=y[v])[0]][m[1]]=0;return p.zmask=_,_}z.plot=function(p,v,m,y){var _=v.xaxis,f=v.yaxis;k.makeTraceGroups(y,m,"contour").each(function(S){var w=M.select(this),E=S[0],P=E.trace,C=E.x,O=E.y,R=P.contours,j=r(R,v,E),D=k.ensureSingle(w,"g","heatmapcoloring"),N=[];R.coloring==="heatmap"&&(N=[S]),t(p,v,N,D),i(j),n(j);var W=_.c2p(C[0],!0),F=_.c2p(C[C.length-1],!0),U=f.c2p(O[0],!0),V=f.c2p(O[O.length-1],!0),te=[[W,V],[F,V],[F,U],[W,U]],J=j;R.type==="constraint"&&(J=a(j,R._operation)),function(K,X,Z){var $=k.ensureSingle(K,"g","contourbg").selectAll("path").data(Z.coloring==="fill"?[0]:[]);$.enter().append("path"),$.exit().remove(),$.attr("d","M"+X.join("L")+"Z").style("stroke","none")}(w,te,R),function(K,X,Z,$){var re=$.coloring==="fill"||$.type==="constraint"&&$._operation!=="=",oe="M"+Z.join("L")+"Z";re&&l(X,$);var ie=k.ensureSingle(K,"g","contourfill").selectAll("path").data(re?X:[]);ie.enter().append("path"),ie.exit().remove(),ie.each(function(ue){var me=(ue.prefixBoundary?oe:"")+c(ue,Z);me?M.select(this).attr("d",me).style("stroke","none"):M.select(this).remove()})}(w,J,te,R),function(K,X,Z,$,re){var oe=Z._context.staticPlot,ie=k.ensureSingle(K,"g","contourlines"),ue=re.showlines!==!1,me=re.showlabels,be=ue&&me,ge=z.createLines(ie,ue||me,X,oe),de=z.createLineClip(ie,be,Z,$.trace.uid),ve=K.selectAll("g.contourlabels").data(me?[0]:[]);if(ve.exit().remove(),ve.enter().append("g").classed("contourlabels",!0),me){var pe=[],_e=[];k.clearLocationCache();var Te=z.labelFormatter(Z,$),le=o.tester.append("text").attr("data-notex",1).call(o.font,re.labelfont),ae=X[0].xaxis,he=X[0].yaxis,Se=ae._length,ke=he._length,Me=ae.range,Ee=he.range,De=k.aggNums(Math.min,null,$.x),fe=k.aggNums(Math.max,null,$.x),xe=k.aggNums(Math.min,null,$.y),we=k.aggNums(Math.max,null,$.y),Oe=Math.max(ae.c2p(De,!0),0),ze=Math.min(ae.c2p(fe,!0),Se),Pe=Math.max(he.c2p(we,!0),0),Ue=Math.min(he.c2p(xe,!0),ke),Ve={};Me[0]<Me[1]?(Ve.left=Oe,Ve.right=ze):(Ve.left=ze,Ve.right=Oe),Ee[0]<Ee[1]?(Ve.top=Pe,Ve.bottom=Ue):(Ve.top=Ue,Ve.bottom=Pe),Ve.middle=(Ve.top+Ve.bottom)/2,Ve.center=(Ve.left+Ve.right)/2,pe.push([[Ve.left,Ve.top],[Ve.right,Ve.top],[Ve.right,Ve.bottom],[Ve.left,Ve.bottom]]);var Ze=Math.sqrt(Se*Se+ke*ke),it=u.LABELDISTANCE*Ze/Math.max(1,X.length/u.LABELINCREASE);ge.each(function(tt){var dt=z.calcTextOpts(tt.level,Te,le,Z);M.select(this).selectAll("path").each(function(){var yt=k.getVisibleSegment(this,Ve,dt.height/2);if(yt&&!(yt.len<(dt.width+dt.height)*u.LABELMIN))for(var vt=Math.min(Math.ceil(yt.len/it),u.LABELMAX),et=0;et<vt;et++){var Qe=z.findBestTextLocation(this,yt,dt,_e,Ve);if(!Qe)break;z.addLabelData(Qe,dt,_e,pe)}})}),le.remove(),z.drawLabels(ve,_e,Z,de,be?pe:null)}me&&!ue&&ge.remove()}(w,j,p,E,R),function(K,X,Z,$,re){var oe=$.trace,ie=Z._fullLayout._clips,ue="clip"+oe.uid,me=ie.selectAll("#"+ue).data(oe.connectgaps?[]:[0]);if(me.enter().append("clipPath").classed("contourclip",!0).attr("id",ue),me.exit().remove(),oe.connectgaps===!1){var be={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:X.xaxis,yaxis:X.yaxis,x:$.x,y:$.y,z:g($),smoothing:0};i([be]),n([be]),l([be],{type:"levels"}),k.ensureSingle(me,"path","").attr("d",(be.prefixBoundary?"M"+re.join("L")+"Z":"")+c(be,re))}else ue=null;o.setClipUrl(K,ue,Z)}(w,v,p,E,te)})},z.createLines=function(p,v,m,y){var _=m[0].smoothing,f=p.selectAll("g.contourlevel").data(v?m:[]);if(f.exit().remove(),f.enter().append("g").classed("contourlevel",!0),v){var S=f.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(E){return o.smoothopen(E,_)}).style("stroke-miterlimit",1).style("vector-effect",y?"none":"non-scaling-stroke");var w=f.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});w.exit().remove(),w.enter().append("path").classed("closedline",!0),w.attr("d",function(E){return o.smoothclosed(E,_)}).style("stroke-miterlimit",1).style("vector-effect",y?"none":"non-scaling-stroke")}return f},z.createLineClip=function(p,v,m,y){var _=v?"clipline"+y:null,f=m._fullLayout._clips.selectAll("#"+_).data(v?[0]:[]);return f.exit().remove(),f.enter().append("clipPath").classed("contourlineclip",!0).attr("id",_),o.setClipUrl(p,_,m),f},z.labelFormatter=function(p,v){var m=p._fullLayout,y=v.trace,_=y.contours,f={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(_.labelformat)f.tickformat=_.labelformat,s(f,m);else{var S=T.extractOpts(y);if(S&&S.colorbar&&S.colorbar._axis)f=S.colorbar._axis;else{if(_.type==="constraint"){var w=_.value;k.isArrayOrTypedArray(w)?f.range=[w[0],w[w.length-1]]:f.range=[w,w]}else f.range=[_.start,_.end],f.nticks=(_.end-_.start)/_.size;f.range[0]===f.range[1]&&(f.range[1]+=f.range[0]||1),f.nticks||(f.nticks=1e3),s(f,m),h.prepTicks(f),f._tmin=null,f._tmax=null}}return function(E){return h.tickText(f,E).text}},z.calcTextOpts=function(p,v,m,y){var _=v(p);m.text(_).call(b.convertToTspans,y);var f=m.node(),S=o.bBox(f,!0);return{text:_,width:S.width,height:S.height,fontSize:+f.style["font-size"].replace("px",""),level:p,dy:(S.top+S.bottom)/2}},z.findBestTextLocation=function(p,v,m,y,_){var f,S,w,E,P,C=m.width;v.isClosed?(S=v.len/d.INITIALSEARCHPOINTS,f=v.min+S/2,w=v.max):(S=(v.len-C)/(d.INITIALSEARCHPOINTS+1),f=v.min+S+C/2,w=v.max-(S+C)/2);for(var O=1/0,R=0;R<d.ITERATIONS;R++){for(var j=f;j<w;j+=S){var D=k.getTextLocation(p,v.total,j,C),N=x(D,m,y,_);N<O&&(O=N,P=D,E=j)}if(O>2*d.MAXCOST)break;R&&(S/=2),w=(f=E-S/2)+1.5*S}if(O<=d.MAXCOST)return P},z.addLabelData=function(p,v,m,y){var _=v.fontSize,f=v.width+_/3,S=Math.max(0,v.height-_/3),w=p.x,E=p.y,P=p.theta,C=Math.sin(P),O=Math.cos(P),R=function(D,N){return[w+D*O-N*C,E+D*C+N*O]},j=[R(-f/2,-S/2),R(-f/2,S/2),R(f/2,S/2),R(f/2,-S/2)];m.push({text:v.text,x:w,y:E,dy:v.dy,theta:P,level:v.level,width:f,height:S}),y.push(j)},z.drawLabels=function(p,v,m,y,_){var f=p.selectAll("text").data(v,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(f.exit().remove(),f.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var P=E.x+Math.sin(E.theta)*E.dy,C=E.y-Math.cos(E.theta)*E.dy;M.select(this).text(E.text).attr({x:P,y:C,transform:"rotate("+180*E.theta/Math.PI+" "+P+" "+C+")"}).call(b.convertToTspans,m)}),_){for(var S="",w=0;w<_.length;w++)S+="M"+_[w].join("L")+"Z";k.ensureSingle(y,"path","").attr("d",S)}}},54444:function(ee,z,e){"use strict";var M=e(54460),k=e(3400);function o(T,b,h){var s={type:"linear",range:[T,b]};return M.autoTicks(s,(b-T)/(h||15)),s}ee.exports=function(T,b){var h=T.contours;if(T.autocontour){var s=T.zmin,t=T.zmax;(T.zauto||s===void 0)&&(s=k.aggNums(Math.min,null,b)),(T.zauto||t===void 0)&&(t=k.aggNums(Math.max,null,b));var i=o(s,t,T.ncontours);h.size=i.dtick,h.start=M.tickFirst(i),i.range.reverse(),h.end=M.tickFirst(i),h.start===s&&(h.start+=h.size),h.end===t&&(h.end-=h.size),h.start>h.end&&(h.start=h.end=(h.start+h.end)/2),T._input.contours||(T._input.contours={}),k.extendFlat(T._input.contours,{start:h.start,end:h.end,size:h.size}),T._input.autocontour=!0}else if(h.type!=="constraint"){var n,r=h.start,a=h.end,l=T._input.contours;r>a&&(h.start=l.start=a,a=h.end=l.end=r,r=h.start),h.size>0||(n=r===a?1:o(r,a,T.ncontours).dtick,l.size=h.size=n)}}},52440:function(ee,z,e){"use strict";var M=e(33428),k=e(43616),o=e(41648),T=e(41076);ee.exports=function(b){var h=M.select(b).selectAll("g.contour");h.style("opacity",function(s){return s[0].trace.opacity}),h.each(function(s){var t=M.select(this),i=s[0].trace,n=i.contours,r=i.line,a=n.size||1,l=n.start,u=n.type==="constraint",d=!u&&n.coloring==="lines",c=!u&&n.coloring==="fill",x=d||c?T(i):null;t.selectAll("g.contourlevel").each(function(v){M.select(this).selectAll("path").call(k.lineGroupStyle,r.width,d?x(v.level):r.color,r.dash)});var g=n.labelfont;if(t.selectAll("g.contourlabels text").each(function(v){k.font(M.select(this),{family:g.family,size:g.size,color:g.color||(d?x(v.level):r.color)})}),u)t.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(c){var p;t.selectAll("g.contourfill path").style("fill",function(v){return p===void 0&&(p=v.level),x(v.level+.5*a)}),p===void 0&&(p=l),t.selectAll("g.contourbg path").style("fill",x(p-.5*a))}}),o(b)}},97680:function(ee,z,e){"use strict";var M=e(27260),k=e(17428);ee.exports=function(o,T,b,h,s){var t,i=b("contours.coloring"),n="";i==="fill"&&(t=b("contours.showlines")),t!==!1&&(i!=="lines"&&(n=b("line.color","#000")),b("line.width",.5),b("line.dash")),i!=="none"&&(o.showlegend!==!0&&(T.showlegend=!1),T._dfltShowLegend=!1,M(o,T,h,b,{prefix:"",cLetter:"z"})),b("line.smoothing"),k(b,h,n,s)}},37960:function(ee,z,e){"use strict";var M=e(83328),k=e(67104),o=e(49084),T=e(92880).extendFlat,b=k.contours;ee.exports=T({carpet:{valType:"string",editType:"calc"},z:M.z,a:M.x,a0:M.x0,da:M.dx,b:M.y,b0:M.y0,db:M.dy,text:M.text,hovertext:M.hovertext,transpose:M.transpose,atype:M.xtype,btype:M.ytype,fillcolor:k.fillcolor,autocontour:k.autocontour,ncontours:k.ncontours,contours:{type:b.type,start:b.start,end:b.end,size:b.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:b.showlines,showlabels:b.showlabels,labelfont:b.labelfont,labelformat:b.labelformat,operation:b.operation,value:b.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:k.line.color,width:k.line.width,dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},transforms:void 0},o("",{cLetter:"z",autoColorDflt:!1}))},30572:function(ee,z,e){"use strict";var M=e(47128),k=e(3400),o=e(2872),T=e(26136),b=e(70448),h=e(11240),s=e(35744),t=e(3252),i=e(50948),n=e(54444);ee.exports=function(r,a){var l=a._carpetTrace=i(r,a);if(l&&l.visible&&l.visible!=="legendonly"){if(!a.a||!a.b){var u=r.data[l.index],d=r.data[a.index];d.a||(d.a=u.a),d.b||(d.b=u.b),t(d,a,a._defaultColor,r._fullLayout)}var c=function(x,g){var p,v,m,y,_,f,S,w=g._carpetTrace,E=w.aaxis,P=w.baxis;E._minDtick=0,P._minDtick=0,k.isArray1D(g.z)&&o(g,E,P,"a","b",["z"]),p=g._a=g._a||g.a,y=g._b=g._b||g.b,p=p?E.makeCalcdata(g,"_a"):[],y=y?P.makeCalcdata(g,"_b"):[],v=g.a0||0,m=g.da||1,_=g.b0||0,f=g.db||1,S=g._z=T(g._z||g.z,g.transpose),g._emptypoints=h(S),b(S,g._emptypoints);var C=k.maxRowLength(S),O=g.xtype==="scaled"?"":p,R=s(g,O,v,m,C,E),j=g.ytype==="scaled"?"":y,D={a:R,b:s(g,j,_,f,S.length,P),z:S};return g.contours.type==="levels"&&g.contours.coloring!=="none"&&M(x,g,{vals:S,containerStr:"",cLetter:"z"}),[D]}(r,a);return n(a,a._z),c}}},3252:function(ee,z,e){"use strict";var M=e(3400),k=e(51264),o=e(37960),T=e(95536),b=e(84952),h=e(97680);ee.exports=function(s,t,i,n){function r(a,l){return M.coerce(s,t,o,a,l)}if(r("carpet"),s.a&&s.b){if(!k(s,t,r,n,"a","b"))return void(t.visible=!1);r("text"),r("contours.type")==="constraint"?T(s,t,r,n,i,{hasHover:!1}):(b(s,t,r,function(a){return M.coerce2(s,t,o,a)}),h(s,t,r,n,{hasHover:!1}))}else t._defaultColor=i,t._length=null}},40448:function(ee,z,e){"use strict";ee.exports={attributes:e(37960),supplyDefaults:e(3252),colorbar:e(55296),calc:e(30572),plot:e(94440),style:e(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:e(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(ee,z,e){"use strict";var M=e(33428),k=e(87072),o=e(53416),T=e(43616),b=e(3400),h=e(72424),s=e(88748),t=e(23676),i=e(93252),n=e(82172),r=e(61512),a=e(56008),l=e(50948),u=e(77712);function d(g,p,v){var m=g.getPointAtLength(p),y=g.getPointAtLength(v),_=y.x-m.x,f=y.y-m.y,S=Math.sqrt(_*_+f*f);return[_/S,f/S]}function c(g){var p=Math.sqrt(g[0]*g[0]+g[1]*g[1]);return[g[0]/p,g[1]/p]}function x(g,p){var v=Math.abs(g[0]*p[0]+g[1]*p[1]);return Math.sqrt(1-v*v)/v}ee.exports=function(g,p,v,m){var y=p.xaxis,_=p.yaxis;b.makeTraceGroups(m,v,"contour").each(function(f){var S=M.select(this),w=f[0],E=w.trace,P=E._carpetTrace=l(g,E),C=g.calcdata[P.index][0];if(P.visible&&P.visible!=="legendonly"){var O=w.a,R=w.b,j=E.contours,D=r(j,p,w),N=j.type==="constraint",W=j._operation,F=N?W==="="?"lines":"fill":j.coloring,U=[[O[0],R[R.length-1]],[O[O.length-1],R[R.length-1]],[O[O.length-1],R[0]],[O[0],R[0]]];h(D);var V=1e-8*(O[O.length-1]-O[0]),te=1e-8*(R[R.length-1]-R[0]);s(D,V,te);var J,K,X,Z,$=D;j.type==="constraint"&&($=n(D,W)),function(ue,me){var be,ge,de,ve,pe,_e,Te,le,ae;for(be=0;be<ue.length;be++){for(pe=(ve=ue[be]).pedgepaths=[],_e=ve.ppaths=[],ge=0;ge<ve.edgepaths.length;ge++){for(ae=ve.edgepaths[ge],Te=[],de=0;de<ae.length;de++)Te[de]=me(ae[de]);pe.push(Te)}for(ge=0;ge<ve.paths.length;ge++){for(ae=ve.paths[ge],le=[],de=0;de<ae.length;de++)le[de]=me(ae[de]);_e.push(le)}}}(D,ie);var re=[];for(Z=C.clipsegments.length-1;Z>=0;Z--)J=C.clipsegments[Z],K=k([],J.x,y.c2p),X=k([],J.y,_.c2p),K.reverse(),X.reverse(),re.push(o(K,X,J.bicubic));var oe="M"+re.join("L")+"Z";(function(ue,me,be,ge,de,ve){var pe,_e,Te,le,ae=b.ensureSingle(ue,"g","contourbg").selectAll("path").data(ve!=="fill"||de?[]:[0]);ae.enter().append("path"),ae.exit().remove();var he=[];for(le=0;le<me.length;le++)pe=me[le],_e=k([],pe.x,be.c2p),Te=k([],pe.y,ge.c2p),he.push(o(_e,Te,pe.bicubic));ae.attr("d","M"+he.join("L")+"Z").style("stroke","none")})(S,C.clipsegments,y,_,N,F),function(ue,me,be,ge,de,ve,pe,_e,Te,le,ae){var he=le==="fill";he&&a(de,ue.contours);var Se=b.ensureSingle(me,"g","contourfill").selectAll("path").data(he?de:[]);Se.enter().append("path"),Se.exit().remove(),Se.each(function(ke){var Me=(ke.prefixBoundary?ae:"")+function(Ee,De,fe,xe,we,Oe,ze,Pe){var Ue,Ve,Ze,it,tt,dt,yt,vt="",et=De.edgepaths.map(function(nt,Re){return Re}),Qe=!0,wt=1e-4*Math.abs(fe[0][0]-fe[2][0]),It=1e-4*Math.abs(fe[0][1]-fe[2][1]);function Dt(nt){return Math.abs(nt[1]-fe[0][1])<It}function Ct(nt){return Math.abs(nt[1]-fe[2][1])<It}function He(nt){return Math.abs(nt[0]-fe[0][0])<wt}function We(nt){return Math.abs(nt[0]-fe[2][0])<wt}function Be(nt,Re){var Fe,rt,Ye,ct,pt="";for(Dt(nt)&&!We(nt)||Ct(nt)&&!He(nt)?(ct=we.aaxis,Ye=u(we,Oe,[nt[0],Re[0]],.5*(nt[1]+Re[1]))):(ct=we.baxis,Ye=u(we,Oe,.5*(nt[0]+Re[0]),[nt[1],Re[1]])),Fe=1;Fe<Ye.length;Fe++)for(pt+=ct.smoothing?"C":"L",rt=0;rt<Ye[Fe].length;rt++){var gt=Ye[Fe][rt];pt+=[ze.c2p(gt[0]),Pe.c2p(gt[1])]+" "}return pt}for(Ue=0,Ve=null;et.length;){var Ge=De.edgepaths[Ue][0];for(Ve&&(vt+=Be(Ve,Ge)),yt=T.smoothopen(De.edgepaths[Ue].map(xe),De.smoothing),vt+=Qe?yt:yt.replace(/^M/,"L"),et.splice(et.indexOf(Ue),1),Ve=De.edgepaths[Ue][De.edgepaths[Ue].length-1],tt=-1,it=0;it<4;it++){if(!Ve){b.log("Missing end?",Ue,De);break}for(Dt(Ve)&&!We(Ve)?Ze=fe[1]:He(Ve)?Ze=fe[0]:Ct(Ve)?Ze=fe[3]:We(Ve)&&(Ze=fe[2]),dt=0;dt<De.edgepaths.length;dt++){var at=De.edgepaths[dt][0];Math.abs(Ve[0]-Ze[0])<wt?Math.abs(Ve[0]-at[0])<wt&&(at[1]-Ve[1])*(Ze[1]-at[1])>=0&&(Ze=at,tt=dt):Math.abs(Ve[1]-Ze[1])<It?Math.abs(Ve[1]-at[1])<It&&(at[0]-Ve[0])*(Ze[0]-at[0])>=0&&(Ze=at,tt=dt):b.log("endpt to newendpt is not vert. or horz.",Ve,Ze,at)}if(tt>=0)break;vt+=Be(Ve,Ze),Ve=Ze}if(tt===De.edgepaths.length){b.log("unclosed perimeter path");break}Ue=tt,(Qe=et.indexOf(Ue)===-1)&&(Ue=et[0],vt+=Be(Ve,Ze)+"Z",Ve=null)}for(Ue=0;Ue<De.paths.length;Ue++)vt+=T.smoothclosed(De.paths[Ue].map(xe),De.smoothing);return vt}(0,ke,ve,pe,_e,Te,be,ge);Me?M.select(this).attr("d",Me).style("stroke","none"):M.select(this).remove()})}(E,S,y,_,$,U,ie,P,C,F,oe),function(ue,me,be,ge,de,ve,pe){var _e=be._context.staticPlot,Te=b.ensureSingle(ue,"g","contourlines"),le=de.showlines!==!1,ae=de.showlabels,he=le&&ae,Se=t.createLines(Te,le||ae,me,_e),ke=t.createLineClip(Te,he,be,ge.trace.uid),Me=ue.selectAll("g.contourlabels").data(ae?[0]:[]);if(Me.exit().remove(),Me.enter().append("g").classed("contourlabels",!0),ae){var Ee=ve.xaxis,De=ve.yaxis,fe=Ee._length,xe=De._length,we=[[[0,0],[fe,0],[fe,xe],[0,xe]]],Oe=[];b.clearLocationCache();var ze=t.labelFormatter(be,ge),Pe=T.tester.append("text").attr("data-notex",1).call(T.font,de.labelfont),Ue={left:0,right:fe,center:fe/2,top:0,bottom:xe,middle:xe/2},Ve=Math.sqrt(fe*fe+xe*xe),Ze=i.LABELDISTANCE*Ve/Math.max(1,me.length/i.LABELINCREASE);Se.each(function(it){var tt=t.calcTextOpts(it.level,ze,Pe,be);M.select(this).selectAll("path").each(function(dt){var yt=this,vt=b.getVisibleSegment(yt,Ue,tt.height/2);if(vt&&(function(It,Dt,Ct,He,We,Be){for(var Ge,at=0;at<Ct.pedgepaths.length;at++)Dt===Ct.pedgepaths[at]&&(Ge=Ct.edgepaths[at]);if(Ge){var nt=We.a[0],Re=We.a[We.a.length-1],Fe=We.b[0],rt=We.b[We.b.length-1],Ye=d(It,0,1),ct=d(It,He.total,He.total-1),pt=ut(Ge[0],Ye),gt=He.total-ut(Ge[Ge.length-1],ct);He.min<pt&&(He.min=pt),He.max>gt&&(He.max=gt),He.len=He.max-He.min}function ut(Mt,xt){var mt,Et=0,Lt=.1;return(Math.abs(Mt[0]-nt)<Lt||Math.abs(Mt[0]-Re)<Lt)&&(mt=c(We.dxydb_rough(Mt[0],Mt[1],Lt)),Et=Math.max(Et,Be*x(xt,mt)/2)),(Math.abs(Mt[1]-Fe)<Lt||Math.abs(Mt[1]-rt)<Lt)&&(mt=c(We.dxyda_rough(Mt[0],Mt[1],Lt)),Et=Math.max(Et,Be*x(xt,mt)/2)),Et}}(yt,dt,it,vt,pe,tt.height),!(vt.len<(tt.width+tt.height)*i.LABELMIN)))for(var et=Math.min(Math.ceil(vt.len/Ze),i.LABELMAX),Qe=0;Qe<et;Qe++){var wt=t.findBestTextLocation(yt,vt,tt,Oe,Ue);if(!wt)break;t.addLabelData(wt,tt,Oe,we)}})}),Pe.remove(),t.drawLabels(Me,Oe,be,ke,he?we:null)}ae&&!le&&Se.remove()}(S,D,g,w,j,p,P),T.setClipUrl(S,P._clipPathId,g)}function ie(ue){var me=P.ab2xy(ue[0],ue[1],!0);return[y.c2p(me[0]),_.c2p(me[1])]}})}},33928:function(ee,z,e){"use strict";var M=e(49084),k=e(21776).Ks,o=e(45464),T=e(31512),b=e(92880).extendFlat;ee.exports=b({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:b({},o.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:k(),showlegend:b({},o.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(ee,z,e){"use strict";var M=e(38248),k=e(3400).isArrayOrTypedArray,o=e(39032).BADNUM,T=e(47128),b=e(3400)._;ee.exports=function(h,s){for(var t=s._length,i=new Array(t),n=s.z,r=k(n)&&n.length,a=0;a<t;a++){var l=i[a]={},u=s.lon[a],d=s.lat[a];if(l.lonlat=M(u)&&M(d)?[+u,+d]:[o,o],r){var c=n[a];l.z=M(c)?c:o}}return T(h,s,{vals:r?n:[0,1],containerStr:"",cLetter:"z"}),t&&(i[0].t={labels:{lat:b(h,"lat:")+" ",lon:b(h,"lon:")+" "}}),i}},4629:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=e(76308),T=e(8932),b=e(39032).BADNUM,h=e(44808).makeBlank;ee.exports=function(s){var t=s[0].trace,i=t.visible===!0&&t._length!==0,n=t._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:h()};if(!i)return n;var r,a=[],l=t.z,u=t.radius,d=k.isArrayOrTypedArray(l)&&l.length,c=k.isArrayOrTypedArray(u);for(r=0;r<s.length;r++){var x=s[r],g=x.lonlat;if(g[0]!==b){var p={};if(d){var v=x.z;p.z=v!==b?v:0}c&&(p.r=M(u[r])&&u[r]>0?+u[r]:0),a.push({type:"Feature",geometry:{type:"Point",coordinates:g},properties:p})}}var m=T.extractOpts(t),y=m.reversescale?T.flipScale(m.colorscale):m.colorscale,_=y[0][1],f=["interpolate",["linear"],["heatmap-density"],0,o.opacity(_)<1?_:o.addOpacity(_,0)];for(r=1;r<y.length;r++)f.push(y[r][0],y[r][1]);var S=["interpolate",["linear"],["get","z"],m.min,0,m.max,1];return k.extendFlat(n.heatmap.paint,{"heatmap-weight":d?S:1/(m.max-m.min),"heatmap-color":f,"heatmap-radius":c?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),n.geojson={type:"FeatureCollection",features:a},n.heatmap.layout.visibility="visible",n}},97664:function(ee,z,e){"use strict";var M=e(3400),k=e(27260),o=e(33928);ee.exports=function(T,b,h,s){function t(a,l){return M.coerce(T,b,o,a,l)}var i=t("lon")||[],n=t("lat")||[],r=Math.min(i.length,n.length);r?(b._length=r,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),k(T,b,s,t,{prefix:"",cLetter:"z"})):b.visible=!1}},96176:function(ee){"use strict";ee.exports=function(z,e){return z.lon=e.lon,z.lat=e.lat,z.z=e.z,z}},25336:function(ee,z,e){"use strict";var M=e(54460),k=e(63312).hoverPoints,o=e(63312).getExtraText;ee.exports=function(T,b,h){var s=k(T,b,h);if(s){var t=s[0],i=t.cd,n=i[0].trace,r=i[t.index];if(delete t.color,"z"in r){var a=t.subplot.mockAxis;t.z=r.z,t.zLabel=M.tickText(a,a.c2l(r.z),"hover").text}return t.extraText=o(n,r,i[0].t.labels),[t]}}},15088:function(ee,z,e){"use strict";ee.exports={attributes:e(33928),supplyDefaults:e(97664),colorbar:e(96288),formatLabels:e(11960),calc:e(90876),plot:e(35256),hoverPoints:e(25336),eventData:e(96176),getBelow:function(M,k){for(var o=k.getMapLayers(),T=0;T<o.length;T++){var b=o[T],h=b.id;if(b.type==="symbol"&&typeof h=="string"&&h.indexOf("plotly-")===-1)return h}},moduleType:"trace",name:"densitymapbox",basePlotModule:e(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(ee,z,e){"use strict";var M=e(4629),k=e(47552).traceLayerPrefix;function o(b,h){this.type="densitymapbox",this.subplot=b,this.uid=h,this.sourceId="source-"+h,this.layerList=[["heatmap",k+h+"-heatmap"]],this.below=null}var T=o.prototype;T.update=function(b){var h=this.subplot,s=this.layerList,t=M(b),i=h.belowLookup["trace-"+this.uid];h.map.getSource(this.sourceId).setData(t.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(t,i),this.below=i);for(var n=0;n<s.length;n++){var r=s[n],a=r[0],l=r[1],u=t[a];h.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&h.setOptions(l,"setPaintProperty",u.paint)}},T._addLayers=function(b,h){for(var s=this.subplot,t=this.layerList,i=this.sourceId,n=0;n<t.length;n++){var r=t[n],a=r[0],l=b[a];s.addLayer({type:a,id:r[1],source:i,layout:l.layout,paint:l.paint},h)}},T._removeLayers=function(){for(var b=this.subplot.map,h=this.layerList,s=h.length-1;s>=0;s--)b.removeLayer(h[s][1])},T.dispose=function(){var b=this.subplot.map;this._removeLayers(),b.removeSource(this.sourceId)},ee.exports=function(b,h){var s=h[0].trace,t=new o(b,s.uid),i=t.sourceId,n=M(h),r=t.below=b.belowLookup["trace-"+s.uid];return b.map.addSource(i,{type:"geojson",data:n.geojson}),t._addLayers(n,r),t}},74248:function(ee,z,e){"use strict";var M=e(3400);ee.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(o.text,k,"tx"),M.mergeArray(o.hovertext,k,"htx");var b=o.marker;if(b){M.mergeArray(b.opacity,k,"mo"),M.mergeArray(b.color,k,"mc");var h=b.line;h&&(M.mergeArray(h.color,k,"mlc"),M.mergeArrayCastPositive(h.width,k,"mlw"))}}},20088:function(ee,z,e){"use strict";var M,k=e(20832),o=e(52904).line,T=e(45464),b=e(29736).axisHoverFormat,h=e(21776).Ks,s=e(21776).Gw,t=e(74732),i=e(92880).extendFlat,n=e(76308);ee.exports={x:k.x,x0:k.x0,dx:k.dx,y:k.y,y0:k.y0,dy:k.dy,xperiod:k.xperiod,yperiod:k.yperiod,xperiod0:k.xperiod0,yperiod0:k.yperiod0,xperiodalignment:k.xperiodalignment,yperiodalignment:k.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:k.hovertext,hovertemplate:h({},{keys:t.eventDataKeys}),hoverinfo:i({},T.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:s({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),text:k.text,textposition:k.textposition,insidetextanchor:i({},k.insidetextanchor,{dflt:"middle"}),textangle:i({},k.textangle,{dflt:0}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:k.outsidetextfont,constraintext:k.constraintext,cliponaxis:k.cliponaxis,orientation:i({},k.orientation,{}),offset:i({},k.offset,{arrayOk:!1}),width:i({},k.width,{arrayOk:!1}),marker:(M=i({},k.marker),delete M.pattern,delete M.cornerradius,M),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},o.color,{dflt:n.defaultLine}),width:i({},o.width,{dflt:0,editType:"plot"}),dash:o.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:k.offsetgroup,alignmentgroup:k.alignmentgroup}},23096:function(ee,z,e){"use strict";var M=e(54460),k=e(1220),o=e(74248),T=e(4500),b=e(39032).BADNUM;function h(s){return s===b?0:s}ee.exports=function(s,t){var i,n,r,a,l,u,d,c,x=M.getFromId(s,t.xaxis||"x"),g=M.getFromId(s,t.yaxis||"y");t.orientation==="h"?(i=x.makeCalcdata(t,"x"),r=g.makeCalcdata(t,"y"),a=k(t,g,"y",r),l=!!t.yperiodalignment,u="y"):(i=g.makeCalcdata(t,"y"),r=x.makeCalcdata(t,"x"),a=k(t,x,"x",r),l=!!t.xperiodalignment,u="x"),n=a.vals;var p,v=Math.min(n.length,i.length),m=new Array(v);for(t._base=[],d=0;d<v;d++){i[d]<0&&(i[d]=b);var y=!1;i[d]!==b&&d+1<v&&i[d+1]!==b&&(y=!0),c=m[d]={p:n[d],s:i[d],cNext:y},t._base[d]=-.5*c.s,l&&(m[d].orig_p=r[d],m[d][u+"End"]=a.ends[d],m[d][u+"Start"]=a.starts[d]),t.ids&&(c.id=String(t.ids[d])),d===0&&(m[0].vTotal=0),m[0].vTotal+=h(c.s),c.begR=h(c.s)/h(m[0].s)}for(d=0;d<v;d++)(c=m[d]).s!==b&&(c.sumR=c.s/m[0].vTotal,c.difR=p!==void 0?c.s/p:1,p=c.s);return o(m,t),T(m,t),m}},74732:function(ee){"use strict";ee.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(ee,z,e){"use strict";var M=e(96376).setGroupPositions;ee.exports=function(k,o){var T,b,h=k._fullLayout,s=k._fullData,t=k.calcdata,i=o.xaxis,n=o.yaxis,r=[],a=[],l=[];for(b=0;b<s.length;b++){var u=s[b],d=u.orientation==="h";u.visible===!0&&u.xaxis===i._id&&u.yaxis===n._id&&u.type==="funnel"&&(T=t[b],d?l.push(T):a.push(T),r.push(T))}var c={mode:h.funnelmode,norm:h.funnelnorm,gap:h.funnelgap,groupgap:h.funnelgroupgap};for(M(k,i,n,a,c),M(k,n,i,l,c),b=0;b<r.length;b++){T=r[b];for(var x=0;x<T.length;x++)x+1<T.length&&(T[x].nextP0=T[x+1].p0,T[x].nextS0=T[x+1].s0,T[x].nextP1=T[x+1].p1,T[x].nextS1=T[x+1].s1)}}},45432:function(ee,z,e){"use strict";var M=e(3400),k=e(20011),o=e(31508).handleText,T=e(43980),b=e(31147),h=e(20088),s=e(76308);ee.exports={supplyDefaults:function(t,i,n,r){function a(c,x){return M.coerce(t,i,h,c,x)}if(T(t,i,r,a)){b(t,i,r,a),a("xhoverformat"),a("yhoverformat"),a("orientation",i.y&&!i.x?"v":"h"),a("offset"),a("width");var l=a("text");a("hovertext"),a("hovertemplate");var u=a("textposition");o(t,i,r,a,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition==="none"||i.texttemplate||a("textinfo",M.isArrayOrTypedArray(l)?"text+value":"value");var d=a("marker.color",n);a("marker.line.color",s.defaultLine),a("marker.line.width"),a("connector.visible")&&(a("connector.fillcolor",function(c){var x=M.isArrayOrTypedArray(c)?"#000":c;return s.addOpacity(x,.5*s.opacity(x))}(d)),a("connector.line.width")&&(a("connector.line.color"),a("connector.line.dash")))}else i.visible=!1},crossTraceDefaults:function(t,i){var n,r;function a(u){return M.coerce(r._input,r,h,u)}if(i.funnelmode==="group")for(var l=0;l<t.length;l++)n=(r=t[l])._input,k(n,r,i,a)}}},34580:function(ee){"use strict";ee.exports=function(z,e){return z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,"percentInitial"in e&&(z.percentInitial=e.percentInitial),"percentPrevious"in e&&(z.percentPrevious=e.percentPrevious),"percentTotal"in e&&(z.percentTotal=e.percentTotal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z}},31488:function(ee,z,e){"use strict";var M=e(76308).opacity,k=e(63400).hoverOnBars,o=e(3400).formatPercent;ee.exports=function(T,b,h,s,t){var i=k(T,b,h,s,t);if(i){var n=i.cd,r=n[0].trace,a=r.orientation==="h",l=n[i.index];i[(a?"x":"y")+"LabelVal"]=l.s,i.percentInitial=l.begR,i.percentInitialLabel=o(l.begR,1),i.percentPrevious=l.difR,i.percentPreviousLabel=o(l.difR,1),i.percentTotal=l.sumR,i.percentTotalLabel=o(l.sumR,1);var u=l.hi||r.hoverinfo,d=[];if(u&&u!=="none"&&u!=="skip"){var c=u==="all",x=u.split("+"),g=function(p){return c||x.indexOf(p)!==-1};g("percent initial")&&d.push(i.percentInitialLabel+" of initial"),g("percent previous")&&d.push(i.percentPreviousLabel+" of previous"),g("percent total")&&d.push(i.percentTotalLabel+" of total")}return i.extraText=d.join("<br>"),i.color=function(p,v){var m=p.marker,y=v.mc||m.color,_=v.mlc||m.line.color,f=v.mlw||m.line.width;return M(y)?y:M(_)&&f?_:void 0}(r,l),[i]}}},94704:function(ee,z,e){"use strict";ee.exports={attributes:e(20088),layoutAttributes:e(7076),supplyDefaults:e(45432).supplyDefaults,crossTraceDefaults:e(45432).crossTraceDefaults,supplyLayoutDefaults:e(11631),calc:e(23096),crossTraceCalc:e(4804),plot:e(42200),style:e(44544).style,hoverPoints:e(31488),eventData:e(34580),selectPoints:e(45784),moduleType:"trace",name:"funnel",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(ee){"use strict";ee.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(ee,z,e){"use strict";var M=e(3400),k=e(7076);ee.exports=function(o,T,b){var h=!1;function s(n,r){return M.coerce(o,T,k,n,r)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&i.type==="funnel"){h=!0;break}}h&&(s("funnelmode"),s("funnelgap",.2),s("funnelgroupgap"))}},42200:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(39032).BADNUM,b=e(98184),h=e(82744).clearMinTextSize;function s(t,i,n,r){var a=[],l=[],u=r?i:n,d=r?n:i;return a[0]=u.c2p(t.s0,!0),l[0]=d.c2p(t.p0,!0),a[1]=u.c2p(t.s1,!0),l[1]=d.c2p(t.p1,!0),a[2]=u.c2p(t.nextS0,!0),l[2]=d.c2p(t.nextP0,!0),a[3]=u.c2p(t.nextS1,!0),l[3]=d.c2p(t.nextP1,!0),r?[a,l]:[l,a]}ee.exports=function(t,i,n,r){var a=t._fullLayout;h("funnel",a),function(l,u,d,c){var x=u.xaxis,g=u.yaxis;k.makeTraceGroups(c,d,"trace bars").each(function(p){var v=M.select(this),m=p[0].trace,y=k.ensureSingle(v,"g","regions");if(m.connector&&m.connector.visible){var _=m.orientation==="h",f=y.selectAll("g.region").data(k.identity);f.enter().append("g").classed("region",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var P=s(w,x,g,_),C=P[0],O=P[1],R="";C[0]!==T&&O[0]!==T&&C[1]!==T&&O[1]!==T&&C[2]!==T&&O[2]!==T&&C[3]!==T&&O[3]!==T&&(R+=_?"M"+C[0]+","+O[1]+"L"+C[2]+","+O[2]+"H"+C[3]+"L"+C[1]+","+O[1]+"Z":"M"+C[1]+","+O[1]+"L"+C[2]+","+O[3]+"V"+O[2]+"L"+C[1]+","+O[0]+"Z"),R===""&&(R="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",R).call(o.setClipUrl,u.layerClipId,l)}})}else y.remove()})}(t,i,n,r),function(l,u,d,c){var x=u.xaxis,g=u.yaxis;k.makeTraceGroups(c,d,"trace bars").each(function(p){var v=M.select(this),m=p[0].trace,y=k.ensureSingle(v,"g","lines");if(m.connector&&m.connector.visible&&m.connector.line.width){var _=m.orientation==="h",f=y.selectAll("g.line").data(k.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var P=s(w,x,g,_),C=P[0],O=P[1],R="";C[3]!==void 0&&O[3]!==void 0&&(_?(R+="M"+C[0]+","+O[1]+"L"+C[2]+","+O[2],R+="M"+C[1]+","+O[1]+"L"+C[3]+","+O[2]):(R+="M"+C[1]+","+O[1]+"L"+C[2]+","+O[3],R+="M"+C[1]+","+O[0]+"L"+C[2]+","+O[2])),R===""&&(R="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",R).call(o.setClipUrl,u.layerClipId,l)}})}else y.remove()})}(t,i,n,r),b.plot(t,i,n,r,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})}},44544:function(ee,z,e){"use strict";var M=e(33428),k=e(43616),o=e(76308),T=e(13448).DESELECTDIM,b=e(60100),h=e(82744).resizeText,s=b.styleTextPoints;ee.exports={style:function(t,i,n){var r=n||M.select(t).selectAll("g.funnellayer").selectAll("g.trace");h(t,r,"funnel"),r.style("opacity",function(a){return a[0].trace.opacity}),r.each(function(a){var l=M.select(this),u=a[0].trace;l.selectAll(".point > path").each(function(d){if(!d.isBlank){var c=u.marker;M.select(this).call(o.fill,d.mc||c.color).call(o.stroke,d.mlc||c.line.color).call(k.dashLine,c.line.dash,d.mlw||c.line.width).style("opacity",u.selectedpoints&&!d.selected?T:1)}}),s(l,u,t),l.selectAll(".regions").each(function(){M.select(this).selectAll("path").style("stroke-width",0).call(o.fill,u.connector.fillcolor)}),l.selectAll(".lines").each(function(){var d=u.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),d.width,d.color,d.dash)})})}}},22332:function(ee,z,e){"use strict";var M=e(74996),k=e(45464),o=e(86968).u,T=e(21776).Ks,b=e(21776).Gw,h=e(92880).extendFlat;ee.exports={labels:M.labels,label0:M.label0,dlabel:M.dlabel,values:M.values,marker:{colors:M.marker.colors,line:{color:h({},M.marker.line.color,{dflt:null}),width:h({},M.marker.line.width,{dflt:1}),editType:"calc"},pattern:M.marker.pattern,editType:"calc"},text:M.text,hovertext:M.hovertext,scalegroup:h({},M.scalegroup,{}),textinfo:h({},M.textinfo,{flags:["label","text","value","percent"]}),texttemplate:b({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:h({},k.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:h({},M.textposition,{values:["inside","none"],dflt:"inside"}),textfont:M.textfont,insidetextfont:M.insidetextfont,title:{text:M.title.text,font:M.title.font,position:h({},M.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:o({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(ee,z,e){"use strict";var M=e(7316);z.name="funnelarea",z.plot=function(k,o,T,b){M.plotBasePlot(z.name,k,o,T,b)},z.clean=function(k,o,T,b){M.cleanBasePlot(z.name,k,o,T,b)}},54e3:function(ee,z,e){"use strict";var M=e(45768);ee.exports={calc:function(k,o){return M.calc(k,o)},crossTraceCalc:function(k){M.crossTraceCalc(k,{type:"funnelarea"})}}},92688:function(ee,z,e){"use strict";var M=e(3400),k=e(22332),o=e(86968).Q,T=e(31508).handleText,b=e(74174).handleLabelsAndValues,h=e(74174).handleMarkerDefaults;ee.exports=function(s,t,i,n){function r(v,m){return M.coerce(s,t,k,v,m)}var a=r("labels"),l=r("values"),u=b(a,l),d=u.len;if(t._hasLabels=u.hasLabels,t._hasValues=u.hasValues,!t._hasLabels&&t._hasValues&&(r("label0"),r("dlabel")),d){t._length=d,h(s,t,n,r),r("scalegroup");var c,x=r("text"),g=r("texttemplate");if(g||(c=r("textinfo",Array.isArray(x)?"text+percent":"percent")),r("hovertext"),r("hovertemplate"),g||c&&c!=="none"){var p=r("textposition");T(s,t,n,r,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else c==="none"&&r("textposition","none");o(t,n,r),r("title.text")&&(r("title.position"),M.coerceFont(r,"title.font",n.font)),r("aspectratio"),r("baseratio")}else t.visible=!1}},62396:function(ee,z,e){"use strict";ee.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e(91248),categories:["pie-like","funnelarea","showLegend"],attributes:e(22332),layoutAttributes:e(61280),supplyDefaults:e(92688),supplyLayoutDefaults:e(35384),calc:e(54e3).calc,crossTraceCalc:e(54e3).crossTraceCalc,plot:e(39472),style:e(62096),styleOne:e(10528),meta:{}}},61280:function(ee,z,e){"use strict";var M=e(85204).hiddenlabels;ee.exports={hiddenlabels:M,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(ee,z,e){"use strict";var M=e(3400),k=e(61280);ee.exports=function(o,T){function b(h,s){return M.coerce(o,T,k,h,s)}b("hiddenlabels"),b("funnelareacolorway",T.colorway),b("extendfunnelareacolors")}},39472:function(ee,z,e){"use strict";var M=e(33428),k=e(43616),o=e(3400),T=o.strScale,b=o.strTranslate,h=e(72736),s=e(98184).toMoveInsideBar,t=e(82744),i=t.recordMinTextSize,n=t.clearMinTextSize,r=e(69656),a=e(37820),l=a.attachFxHandlers,u=a.determineInsideTextFont,d=a.layoutAreas,c=a.prerenderTitles,x=a.positionTitleOutside,g=a.formatSliceLabel;function p(v,m){return"l"+(m[0]-v[0])+","+(m[1]-v[1])}ee.exports=function(v,m){var y=v._context.staticPlot,_=v._fullLayout;n("funnelarea",_),c(m,v),d(m,_._size),o.makeTraceGroups(_._funnelarealayer,m,"trace").each(function(f){var S=M.select(this),w=f[0],E=w.trace;(function(P){if(P.length){var C=P[0],O=C.trace,R=O.aspectratio,j=O.baseratio;j>.999&&(j=.999);var D,N,W,F=Math.pow(j,2),U=C.vTotal,V=U,te=U*F/(1-F)/U,J=[];for(J.push(Te()),N=P.length-1;N>-1;N--)if(!(W=P[N]).hidden){var K=W.v/V;te+=K,J.push(Te())}var X=1/0,Z=-1/0;for(N=0;N<J.length;N++)D=J[N],X=Math.min(X,D[1]),Z=Math.max(Z,D[1]);for(N=0;N<J.length;N++)J[N][1]-=(Z+X)/2;var $=J[J.length-1][0],re=C.r,oe=(Z-X)/2,ie=re/$,ue=re/oe*R;for(C.r=ue*oe,N=0;N<J.length;N++)J[N][0]*=ie,J[N][1]*=ue;var me,be,ge=[-(D=J[0])[0],D[1]],de=[D[0],D[1]],ve=0;for(N=P.length-1;N>-1;N--)if(!(W=P[N]).hidden){var pe=J[ve+=1][0],_e=J[ve][1];W.TL=[-pe,_e],W.TR=[pe,_e],W.BL=ge,W.BR=de,W.pxmid=(me=W.TR,be=W.BR,[.5*(me[0]+be[0]),.5*(me[1]+be[1])]),ge=W.TL,de=W.TR}}function Te(){var le,ae={x:le=Math.sqrt(te),y:-le};return[ae.x,ae.y]}})(f),S.each(function(){var P=M.select(this).selectAll("g.slice").data(f);P.enter().append("g").classed("slice",!0),P.exit().remove(),P.each(function(O,R){if(O.hidden)M.select(this).selectAll("path,g").remove();else{O.pointNumber=O.i,O.curveNumber=E.index;var j=w.cx,D=w.cy,N=M.select(this),W=N.selectAll("path.surface").data([O]);W.enter().append("path").classed("surface",!0).style({"pointer-events":y?"none":"all"}),N.call(l,v,f);var F="M"+(j+O.TR[0])+","+(D+O.TR[1])+p(O.TR,O.BR)+p(O.BR,O.BL)+p(O.BL,O.TL)+"Z";W.attr("d",F),g(v,O,w);var U=r.castOption(E.textposition,O.pts),V=N.selectAll("g.slicetext").data(O.text&&U!=="none"?[0]:[]);V.enter().append("g").classed("slicetext",!0),V.exit().remove(),V.each(function(){var te=o.ensureSingle(M.select(this),"text","",function(ie){ie.attr("data-notex",1)}),J=o.ensureUniformFontSize(v,u(E,O,_.font));te.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(k.font,J).call(h.convertToTspans,v);var K,X,Z,$=k.bBox(te.node()),re=Math.min(O.BL[1],O.BR[1])+D,oe=Math.max(O.TL[1],O.TR[1])+D;X=Math.max(O.TL[0],O.BL[0])+j,Z=Math.min(O.TR[0],O.BR[0])+j,(K=s(X,Z,re,oe,$,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=J.size,i(E.type,K,_),f[R].transform=K,o.setTransormAndDisplay(te,K)})}});var C=M.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);C.enter().append("g").classed("titletext",!0),C.exit().remove(),C.each(function(){var O=o.ensureSingle(M.select(this),"text","",function(D){D.attr("data-notex",1)}),R=E.title.text;E._meta&&(R=o.templateString(R,E._meta)),O.text(R).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(k.font,E.title.font).call(h.convertToTspans,v);var j=x(w,_._size);O.attr("transform",b(j.x,j.y)+T(Math.min(1,j.scale))+b(j.tx,j.ty))})})})}},62096:function(ee,z,e){"use strict";var M=e(33428),k=e(10528),o=e(82744).resizeText;ee.exports=function(T){var b=T._fullLayout._funnelarealayer.selectAll(".trace");o(T,b,"funnelarea"),b.each(function(h){var s=h[0].trace,t=M.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(i){M.select(this).call(k,i,s,T)})})}},83328:function(ee,z,e){"use strict";var M=e(52904),k=e(45464),o=e(25376),T=e(29736).axisHoverFormat,b=e(21776).Ks,h=e(21776).Gw,s=e(49084),t=e(92880).extendFlat;ee.exports=t({z:{valType:"data_array",editType:"calc"},x:t({},M.x,{impliedEdits:{xtype:"array"}}),x0:t({},M.x0,{impliedEdits:{xtype:"scaled"}}),dx:t({},M.dx,{impliedEdits:{xtype:"scaled"}}),y:t({},M.y,{impliedEdits:{ytype:"array"}}),y0:t({},M.y0,{impliedEdits:{ytype:"scaled"}}),dy:t({},M.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:t({},M.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:t({},M.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:t({},M.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:t({},M.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:t({},M.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:t({},M.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:b(),texttemplate:h({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:o({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:t({},k.showlegend,{dflt:!1})},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},19512:function(ee,z,e){"use strict";var M=e(24040),k=e(3400),o=e(54460),T=e(1220),b=e(55480),h=e(47128),s=e(2872),t=e(26136),i=e(70448),n=e(11240),r=e(35744),a=e(39032).BADNUM;function l(u){for(var d=[],c=u.length,x=0;x<c;x++){var g=u[x];g!==a&&d.push(g)}return d}ee.exports=function(u,d){var c,x,g,p,v,m,y,_,f,S,w,E=o.getFromId(u,d.xaxis||"x"),P=o.getFromId(u,d.yaxis||"y"),C=M.traceIs(d,"contour"),O=M.traceIs(d,"histogram"),R=M.traceIs(d,"gl2d"),j=C?"best":d.zsmooth;if(E._minDtick=0,P._minDtick=0,O)p=(w=b(u,d)).orig_x,c=w.x,x=w.x0,g=w.dx,_=w.orig_y,v=w.y,m=w.y0,y=w.dy,f=w.z;else{var D=d.z;k.isArray1D(D)?(s(d,E,P,"x","y",["z"]),c=d._x,v=d._y,D=d._z):(p=d.x?E.makeCalcdata(d,"x"):[],_=d.y?P.makeCalcdata(d,"y"):[],c=T(d,E,"x",p).vals,v=T(d,P,"y",_).vals,d._x=c,d._y=v),x=d.x0,g=d.dx,m=d.y0,y=d.dy,f=t(D,d,E,P)}function N(Z){j=d._input.zsmooth=d.zsmooth=!1,k.warn('cannot use zsmooth: "fast": '+Z)}function W(Z){if(Z.length>1){var $=(Z[Z.length-1]-Z[0])/(Z.length-1),re=Math.abs($/100);for(S=0;S<Z.length-1;S++)if(Math.abs(Z[S+1]-Z[S]-$)>re)return!1}return!0}(E.rangebreaks||P.rangebreaks)&&(f=function(Z,$,re){for(var oe=[],ie=-1,ue=0;ue<re.length;ue++)if($[ue]!==a){oe[++ie]=[];for(var me=0;me<re[ue].length;me++)Z[me]!==a&&oe[ie].push(re[ue][me])}return oe}(c,v,f),O||(c=l(c),v=l(v),d._x=c,d._y=v)),O||!C&&!d.connectgaps||(d._emptypoints=n(f),i(f,d._emptypoints)),d._islinear=!1,E.type==="log"||P.type==="log"?j==="fast"&&N("log axis found"):W(c)?W(v)?d._islinear=!0:j==="fast"&&N("y scale is not linear"):j==="fast"&&N("x scale is not linear");var F=k.maxRowLength(f),U=d.xtype==="scaled"?"":c,V=r(d,U,x,g,F,E),te=d.ytype==="scaled"?"":v,J=r(d,te,m,y,f.length,P);R||(d._extremes[E._id]=o.findExtremes(E,V),d._extremes[P._id]=o.findExtremes(P,J));var K={x:V,y:J,z:f,text:d._text||d.text,hovertext:d._hovertext||d.hovertext};if(d.xperiodalignment&&p&&(K.orig_x=p),d.yperiodalignment&&_&&(K.orig_y=_),U&&U.length===V.length-1&&(K.xCenter=U),te&&te.length===J.length-1&&(K.yCenter=te),O&&(K.xRanges=w.xRanges,K.yRanges=w.yRanges,K.pts=w.pts),C||h(u,d,{vals:f,cLetter:"z"}),C&&d.contours&&d.contours.coloring==="heatmap"){var X={type:d.type==="contour"?"heatmap":"histogram2d",xcalendar:d.xcalendar,ycalendar:d.ycalendar};K.xfill=r(X,U,x,g,F,E),K.yfill=r(X,te,m,y,f.length,P)}return[K]}},26136:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=e(39032).BADNUM;ee.exports=function(T,b,h,s){var t,i,n,r,a,l;function u(v){if(M(v))return+v}if(b&&b.transpose){for(t=0,a=0;a<T.length;a++)t=Math.max(t,T[a].length);if(t===0)return!1;n=function(v){return v.length},r=function(v,m,y){return(v[y]||[])[m]}}else t=T.length,n=function(v,m){return v[m].length},r=function(v,m,y){return(v[m]||[])[y]};var d=function(v,m,y){return m===o||y===o?o:r(v,m,y)};function c(v){if(b&&b.type!=="carpet"&&b.type!=="contourcarpet"&&v&&v.type==="category"&&b["_"+v._id.charAt(0)].length){var m=v._id.charAt(0),y={},_=b["_"+m+"CategoryMap"]||b[m];for(a=0;a<_.length;a++)y[_[a]]=a;return function(f){var S=y[v._categories[f]];return S+1?S:o}}return k.identity}var x=c(h),g=c(s);s&&s.type==="category"&&(t=s._categories.length);var p=new Array(t);for(a=0;a<t;a++)for(i=h&&h.type==="category"?h._categories.length:n(T,a),p[a]=new Array(i),l=0;l<i;l++)p[a][l]=u(d(T,g(a),x(l)));return p}},96288:function(ee){"use strict";ee.exports={min:"zmin",max:"zmax"}},2872:function(ee,z,e){"use strict";var M=e(3400),k=e(39032).BADNUM,o=e(1220);ee.exports=function(T,b,h,s,t,i){var n=T._length,r=b.makeCalcdata(T,s),a=h.makeCalcdata(T,t);r=o(T,b,s,r).vals,a=o(T,h,t,a).vals;var l,u,d,c,x=T.text,g=x!==void 0&&M.isArray1D(x),p=T.hovertext,v=p!==void 0&&M.isArray1D(p),m=M.distinctVals(r),y=m.vals,_=M.distinctVals(a),f=_.vals,S=[],w=f.length,E=y.length;for(l=0;l<i.length;l++)S[l]=M.init2dArray(w,E);g&&(d=M.init2dArray(w,E)),v&&(c=M.init2dArray(w,E));var P=M.init2dArray(w,E);for(l=0;l<n;l++)if(r[l]!==k&&a[l]!==k){var C=M.findBin(r[l]+m.minDiff/2,y),O=M.findBin(a[l]+_.minDiff/2,f);for(u=0;u<i.length;u++){var R=T[i[u]];S[u][O][C]=R[l],P[O][C]=l}g&&(d[O][C]=x[l]),v&&(c[O][C]=p[l])}for(T["_"+s]=y,T["_"+t]=f,u=0;u<i.length;u++)T["_"+i[u]]=S[u];g&&(T._text=d),v&&(T._hovertext=c),b&&b.type==="category"&&(T["_"+s+"CategoryMap"]=y.map(function(j){return b._categories[j]})),h&&h.type==="category"&&(T["_"+t+"CategoryMap"]=f.map(function(j){return h._categories[j]})),T._after2before=P}},24480:function(ee,z,e){"use strict";var M=e(3400),k=e(51264),o=e(39096),T=e(31147),b=e(82748),h=e(27260),s=e(83328);ee.exports=function(t,i,n,r){function a(l,u){return M.coerce(t,i,s,l,u)}k(t,i,a,r)?(T(t,i,r,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),o(a,r),b(t,i,a,r),a("hoverongaps"),a("connectgaps",M.isArray1D(i.z)&&i.zsmooth!==!1),h(t,i,r,a,{prefix:"",cLetter:"z"})):i.visible=!1}},11240:function(ee,z,e){"use strict";var M=e(3400).maxRowLength;ee.exports=function(k){var o,T,b,h,s,t,i,n,r=[],a={},l=[],u=k[0],d=[],c=[0,0,0],x=M(k);for(T=0;T<k.length;T++)for(o=d,d=u,u=k[T+1]||[],b=0;b<x;b++)d[b]===void 0&&((t=(d[b-1]!==void 0?1:0)+(d[b+1]!==void 0?1:0)+(o[b]!==void 0?1:0)+(u[b]!==void 0?1:0))?(T===0&&t++,b===0&&t++,T===k.length-1&&t++,b===d.length-1&&t++,t<4&&(a[[T,b]]=[T,b,t]),r.push([T,b,t])):l.push([T,b]));for(;l.length;){for(i={},n=!1,s=l.length-1;s>=0;s--)(t=((a[[(T=(h=l[s])[0])-1,b=h[1]]]||c)[2]+(a[[T+1,b]]||c)[2]+(a[[T,b-1]]||c)[2]+(a[[T,b+1]]||c)[2])/20)&&(i[h]=[T,b,t],l.splice(s,1),n=!0);if(!n)throw"findEmpties iterated with no new neighbors";for(h in i)a[h]=i[h],r.push(i[h])}return r.sort(function(g,p){return p[2]-g[2]})}},55512:function(ee,z,e){"use strict";var M=e(93024),k=e(3400),o=k.isArrayOrTypedArray,T=e(54460),b=e(8932).extractOpts;ee.exports=function(h,s,t,i,n){n||(n={});var r,a,l,u,d=n.isContour,c=h.cd[0],x=c.trace,g=h.xa,p=h.ya,v=c.x,m=c.y,y=c.z,_=c.xCenter,f=c.yCenter,S=c.zmask,w=x.zhoverformat,E=v,P=m;if(h.index!==!1){try{l=Math.round(h.index[1]),u=Math.round(h.index[0])}catch(K){return void k.error("Error hovering on heatmap, pointNumber must be [row,col], found:",h.index)}if(l<0||l>=y[0].length||u<0||u>y.length)return}else{if(M.inbox(s-v[0],s-v[v.length-1],0)>0||M.inbox(t-m[0],t-m[m.length-1],0)>0)return;if(d){var C;for(E=[2*v[0]-v[1]],C=1;C<v.length;C++)E.push((v[C]+v[C-1])/2);for(E.push([2*v[v.length-1]-v[v.length-2]]),P=[2*m[0]-m[1]],C=1;C<m.length;C++)P.push((m[C]+m[C-1])/2);P.push([2*m[m.length-1]-m[m.length-2]])}l=Math.max(0,Math.min(E.length-2,k.findBin(s,E))),u=Math.max(0,Math.min(P.length-2,k.findBin(t,P)))}var O,R,j=g.c2p(v[l]),D=g.c2p(v[l+1]),N=p.c2p(m[u]),W=p.c2p(m[u+1]);d?(O=c.orig_x||v,R=c.orig_y||m,D=j,r=O[l],W=N,a=R[u]):(O=c.orig_x||_||v,R=c.orig_y||f||m,r=_?O[l]:(O[l]+O[l+1])/2,a=f?R[u]:(R[u]+R[u+1])/2,g&&g.type==="category"&&(r=v[l]),p&&p.type==="category"&&(a=m[u]),x.zsmooth&&(j=D=g.c2p(r),N=W=p.c2p(a)));var F=y[u][l];if(S&&!S[u][l]&&(F=void 0),F!==void 0||x.hoverongaps){var U;o(c.hovertext)&&o(c.hovertext[u])?U=c.hovertext[u][l]:o(c.text)&&o(c.text[u])&&(U=c.text[u][l]);var V=b(x),te={type:"linear",range:[V.min,V.max],hoverformat:w,_separators:g._separators,_numFormat:g._numFormat},J=T.tickText(te,F,"hover").text;return[k.extendFlat(h,{index:x._after2before?x._after2before[u][l]:[u,l],distance:h.maxHoverDistance,spikeDistance:h.maxSpikeDistance,x0:j,x1:D,y0:N,y1:W,xLabelVal:r,yLabelVal:a,zLabelVal:F,zLabel:J,text:U})]}}},81932:function(ee,z,e){"use strict";ee.exports={attributes:e(83328),supplyDefaults:e(24480),calc:e(19512),plot:e(41420),colorbar:e(96288),style:e(41648),hoverPoints:e(55512),moduleType:"trace",name:"heatmap",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(ee,z,e){"use strict";var M=e(3400),k=[[-1,0],[1,0],[0,-1],[0,1]];function o(b){return .5-.25*Math.min(1,.5*b)}function T(b,h,s){var t,i,n,r,a,l,u,d,c,x,g,p,v,m=0;for(r=0;r<h.length;r++){for(i=(t=h[r])[0],n=t[1],g=b[i][n],x=0,c=0,a=0;a<4;a++)(u=b[i+(l=k[a])[0]])&&(d=u[n+l[1]])!==void 0&&(x===0?p=v=d:(p=Math.min(p,d),v=Math.max(v,d)),c++,x+=d);if(c===0)throw"iterateInterp2d order is wrong: no defined neighbors";b[i][n]=x/c,g===void 0?c<4&&(m=1):(b[i][n]=(1+s)*b[i][n]-s*g,v>p&&(m=Math.max(m,Math.abs(b[i][n]-g)/(v-p))))}return m}ee.exports=function(b,h){var s,t=1;for(T(b,h),s=0;s<h.length&&!(h[s][2]<4);s++);for(h=h.slice(s),s=0;s<100&&t>.01;s++)t=T(b,h,o(t));return t>.01&&M.log("interp2d didn't converge quickly",t),b}},39096:function(ee,z,e){"use strict";var M=e(3400);ee.exports=function(k,o){k("texttemplate");var T=M.extendFlat({},o.font,{color:"auto",size:"auto"});M.coerceFont(k,"textfont",T)}},35744:function(ee,z,e){"use strict";var M=e(24040),k=e(3400).isArrayOrTypedArray;ee.exports=function(o,T,b,h,s,t){var i,n,r,a=[],l=M.traceIs(o,"contour"),u=M.traceIs(o,"histogram"),d=M.traceIs(o,"gl2d");if(k(T)&&T.length>1&&!u&&t.type!=="category"){var c=T.length;if(!(c<=s))return l?T.slice(0,s):T.slice(0,s+1);if(l||d)a=Array.from(T).slice(0,s);else if(s===1)a=t.type==="log"?[.5*T[0],2*T[0]]:[T[0]-.5,T[0]+.5];else if(t.type==="log"){for(a=[Math.pow(T[0],1.5)/Math.pow(T[1],.5)],r=1;r<c;r++)a.push(Math.sqrt(T[r-1]*T[r]));a.push(Math.pow(T[c-1],1.5)/Math.pow(T[c-2],.5))}else{for(a=[1.5*T[0]-.5*T[1]],r=1;r<c;r++)a.push(.5*(T[r-1]+T[r]));a.push(1.5*T[c-1]-.5*T[c-2])}if(c<s){var x,g=a[a.length-1];if(t.type==="log")for(x=g/a[a.length-2],r=c;r<s;r++)g*=x,a.push(g);else for(x=g-a[a.length-2],r=c;r<s;r++)g+=x,a.push(g)}}else{var p=o[t._id.charAt(0)+"calendar"];for(i=u?t.r2c(b,0,p):k(T)&&T.length===1?T[0]:b===void 0?0:(t.type==="log"?t.d2c:t.r2c)(b,0,p),n=h||1,r=l||d?0:-.5;r<s;r++)a.push(i+n*r)}return a}},41420:function(ee,z,e){"use strict";var M=e(33428),k=e(49760),o=e(24040),T=e(43616),b=e(54460),h=e(3400),s=e(72736),t=e(76688),i=e(76308),n=e(8932).extractOpts,r=e(8932).makeColorScaleFuncFromTrace,a=e(9616),l=e(84284).LINE_SPACING,u=e(9188),d=e(2264).STYLE,c="heatmap-label";function x(y){return y.selectAll("g."+c)}function g(y){x(y).remove()}function p(y,_){var f=_.length-2,S=h.constrain(h.findBin(y,_),0,f),w=_[S],E=_[S+1],P=h.constrain(S+(y-w)/(E-w)-.5,0,f),C=Math.round(P),O=Math.abs(P-C);return P&&P!==f&&O?{bin0:C,frac:O,bin1:Math.round(C+O/(P-C))}:{bin0:C,bin1:C,frac:0}}function v(y,_){var f=_.length-1,S=h.constrain(h.findBin(y,_),0,f),w=_[S],E=(y-w)/(_[S+1]-w)||0;return E<=0?{bin0:S,bin1:S,frac:0}:E<.5?{bin0:S,bin1:S+1,frac:E}:{bin0:S+1,bin1:S,frac:1-E}}function m(y,_,f){y[_]=f[0],y[_+1]=f[1],y[_+2]=f[2],y[_+3]=Math.round(255*f[3])}ee.exports=function(y,_,f,S){var w=_.xaxis,E=_.yaxis;h.makeTraceGroups(S,f,"hm").each(function(P){var C,O,R,j,D,N,W,F,U=M.select(this),V=P[0],te=V.trace,J=te.xgap||0,K=te.ygap||0,X=V.z,Z=V.x,$=V.y,re=V.xCenter,oe=V.yCenter,ie=o.traceIs(te,"contour"),ue=ie?"best":te.zsmooth,me=X.length,be=h.maxRowLength(X),ge=!1,de=!1;for(N=0;C===void 0&&N<Z.length-1;)C=w.c2p(Z[N]),N++;for(N=Z.length-1;O===void 0&&N>0;)O=w.c2p(Z[N]),N--;for(O<C&&(R=O,O=C,C=R,ge=!0),N=0;j===void 0&&N<$.length-1;)j=E.c2p($[N]),N++;for(N=$.length-1;D===void 0&&N>0;)D=E.c2p($[N]),N--;D<j&&(R=j,j=D,D=R,de=!0),ie&&(re=Z,oe=$,Z=V.xfill,$=V.yfill);var ve="default";if(ue?ve=ue==="best"?"smooth":"fast":te._islinear&&J===0&&K===0&&u()&&(ve="fast"),ve!=="fast"){var pe=ue==="best"?0:.5;C=Math.max(-pe*w._length,C),O=Math.min((1+pe)*w._length,O),j=Math.max(-pe*E._length,j),D=Math.min((1+pe)*E._length,D)}var _e,Te,le=Math.round(O-C),ae=Math.round(D-j);if(C>=w._length||O<=0||j>=E._length||D<=0)return U.selectAll("image").data([]).exit().remove(),void g(U);ve==="fast"?(_e=be,Te=me):(_e=le,Te=ae);var he=document.createElement("canvas");he.width=_e,he.height=Te;var Se,ke,Me=he.getContext("2d",{willReadFrequently:!0}),Ee=r(te,{noNumericCheck:!0,returnArray:!0});ve==="fast"?(Se=ge?function(jt){return be-1-jt}:h.identity,ke=de?function(jt){return me-1-jt}:h.identity):(Se=function(jt){return h.constrain(Math.round(w.c2p(Z[jt])-C),0,le)},ke=function(jt){return h.constrain(Math.round(E.c2p($[jt])-j),0,ae)});var De,fe,xe,we,Oe=ke(0),ze=[Oe,Oe],Pe=ge?0:1,Ue=de?0:1,Ve=0,Ze=0,it=0,tt=0;function dt(jt,tn){if(jt!==void 0){var xn=Ee(jt);return xn[0]=Math.round(xn[0]),xn[1]=Math.round(xn[1]),xn[2]=Math.round(xn[2]),Ve+=tn,Ze+=xn[0]*tn,it+=xn[1]*tn,tt+=xn[2]*tn,xn}return[0,0,0,0]}function yt(jt,tn,xn,pn){var Sn=jt[xn.bin0];if(Sn===void 0)return dt(void 0,1);var Gn,Rn=jt[xn.bin1],Nn=tn[xn.bin0],ir=tn[xn.bin1],Gt=Rn-Sn||0,dn=Nn-Sn||0;return Gn=Rn===void 0?ir===void 0?0:Nn===void 0?2*(ir-Sn):2*(2*ir-Nn-Sn)/3:ir===void 0?Nn===void 0?0:2*(2*Sn-Rn-Nn)/3:Nn===void 0?2*(2*ir-Rn-Sn)/3:ir+Sn-Rn-Nn,dt(Sn+xn.frac*Gt+pn.frac*(dn+xn.frac*Gn))}if(ve!=="default"){var vt,et=0;try{vt=new Uint8Array(_e*Te*4)}catch(jt){vt=new Array(_e*Te*4)}if(ve==="smooth"){var Qe,wt,It,Dt=re||Z,Ct=oe||$,He=new Array(Dt.length),We=new Array(Ct.length),Be=new Array(le),Ge=re?v:p,at=oe?v:p;for(N=0;N<Dt.length;N++)He[N]=Math.round(w.c2p(Dt[N])-C);for(N=0;N<Ct.length;N++)We[N]=Math.round(E.c2p(Ct[N])-j);for(N=0;N<le;N++)Be[N]=Ge(N,He);for(W=0;W<ae;W++)for(wt=X[(Qe=at(W,We)).bin0],It=X[Qe.bin1],N=0;N<le;N++,et+=4)m(vt,et,we=yt(wt,It,Be[N],Qe))}else for(W=0;W<me;W++)for(xe=X[W],ze=ke(W),N=0;N<be;N++)we=dt(xe[N],1),m(vt,et=4*(ze*be+Se(N)),we);var nt=Me.createImageData(_e,Te);try{nt.data.set(vt)}catch(jt){var Re=nt.data,Fe=Re.length;for(W=0;W<Fe;W++)Re[W]=vt[W]}Me.putImageData(nt,0,0)}else{var rt=Math.floor(J/2),Ye=Math.floor(K/2);for(W=0;W<me;W++)if(xe=X[W],ze.reverse(),ze[Ue]=ke(W+1),ze[0]!==ze[1]&&ze[0]!==void 0&&ze[1]!==void 0)for(De=[fe=Se(0),fe],N=0;N<be;N++)De.reverse(),De[Pe]=Se(N+1),De[0]!==De[1]&&De[0]!==void 0&&De[1]!==void 0&&(we=dt(xe[N],(De[1]-De[0])*(ze[1]-ze[0])),Me.fillStyle="rgba("+we.join(",")+")",Me.fillRect(De[0]+rt,ze[0]+Ye,De[1]-De[0]-J,ze[1]-ze[0]-K))}Ze=Math.round(Ze/Ve),it=Math.round(it/Ve),tt=Math.round(tt/Ve);var ct=k("rgb("+Ze+","+it+","+tt+")");y._hmpixcount=(y._hmpixcount||0)+Ve,y._hmlumcount=(y._hmlumcount||0)+Ve*ct.getLuminance();var pt=U.selectAll("image").data(P);pt.enter().append("svg:image").attr({xmlns:a.svg,preserveAspectRatio:"none"}),pt.attr({height:ae,width:le,x:C,y:j,"xlink:href":he.toDataURL("image/png")}),ve!=="fast"||ue||pt.attr("style",d),g(U);var gt=te.texttemplate;if(gt){var ut=n(te),Mt={type:"linear",range:[ut.min,ut.max],_separators:w._separators,_numFormat:w._numFormat},xt=te.type==="histogram2dcontour",mt=te.type==="contour",Et=mt?me-1:me,Lt=mt?1:0,zt=mt?be-1:be,Wt=[];for(N=mt?1:0;N<Et;N++){var rn;if(mt)rn=V.y[N];else if(xt){if(N===0||N===me-1)continue;rn=V.y[N]}else if(V.yCenter)rn=V.yCenter[N];else{if(N+1===me&&V.y[N+1]===void 0)continue;rn=(V.y[N]+V.y[N+1])/2}var Ut=Math.round(E.c2p(rn));if(!(0>Ut||Ut>E._length))for(W=Lt;W<zt;W++){var Vt;if(mt)Vt=V.x[W];else if(xt){if(W===0||W===be-1)continue;Vt=V.x[W]}else if(V.xCenter)Vt=V.xCenter[W];else{if(W+1===be&&V.x[W+1]===void 0)continue;Vt=(V.x[W]+V.x[W+1])/2}var en=Math.round(w.c2p(Vt));if(!(0>en||en>w._length)){var Ln=t({x:Vt,y:rn},te,y._fullLayout);Ln.x=Vt,Ln.y=rn;var An=V.z[N][W];An===void 0?(Ln.z="",Ln.zLabel=""):(Ln.z=An,Ln.zLabel=b.tickText(Mt,An,"hover").text);var hn=V.text&&V.text[N]&&V.text[N][W];hn!==void 0&&hn!==!1||(hn=""),Ln.text=hn;var Xt=h.texttemplateString(gt,Ln,y._fullLayout._d3locale,Ln,te._meta||{});if(Xt){var ln=Xt.split("<br>"),nn=ln.length,cn=0;for(F=0;F<nn;F++)cn=Math.max(cn,ln[F].length);Wt.push({l:nn,c:cn,t:Xt,x:en,y:Ut,z:An})}}}}var Tn=te.textfont,Mn=Tn.family,zn=Tn.size,In=y._fullLayout.font.size;if(!zn||zn==="auto"){var Pn=1/0,Hn=1/0,Fn=0,tr=0;for(F=0;F<Wt.length;F++){var or=Wt[F];if(Fn=Math.max(Fn,or.l),tr=Math.max(tr,or.c),F<Wt.length-1){var ur=Wt[F+1],er=Math.abs(ur.x-or.x),Mr=Math.abs(ur.y-or.y);er&&(Pn=Math.min(Pn,er)),Mr&&(Hn=Math.min(Hn,Mr))}}isFinite(Pn)&&isFinite(Hn)?(Pn-=J,Hn-=K,Pn/=tr,Hn/=Fn,Pn/=l/2,Hn/=l,zn=Math.min(Math.floor(Pn),Math.floor(Hn),In)):zn=In}if(zn<=0||!isFinite(zn))return;x(U).data(Wt).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(jt){var tn=M.select(this),xn=Tn.color;xn&&xn!=="auto"||(xn=i.contrast(jt.z===void 0?y._fullLayout.plot_bgcolor:"rgba("+Ee(jt.z).join()+")")),tn.attr("data-notex",1).call(s.positionText,function(pn){return pn.x}(jt),function(pn){return pn.y-zn*(pn.l*l/2-1)}(jt)).call(T.font,Mn,zn,xn).text(jt.t).call(s.convertToTspans,y)})}})}},41648:function(ee,z,e){"use strict";var M=e(33428);ee.exports=function(k){M.select(k).selectAll(".hm image").style("opacity",function(o){return o.trace.opacity})}},82748:function(ee){"use strict";ee.exports=function(z,e,M){M("zsmooth")===!1&&(M("xgap"),M("ygap")),M("zhoverformat")}},51264:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=e(24040);function T(b,h){var s=h(b);return(s?h(b+"type","array"):"scaled")==="scaled"&&(h(b+"0"),h("d"+b)),s}ee.exports=function(b,h,s,t,i,n){var r,a,l=s("z");if(i=i||"x",n=n||"y",l===void 0||!l.length)return 0;if(k.isArray1D(l)){r=s(i),a=s(n);var u=k.minRowLength(r),d=k.minRowLength(a);if(u===0||d===0)return 0;h._length=Math.min(u,d,l.length)}else{if(r=T(i,s),a=T(n,s),!function(c){for(var x,g=!0,p=!1,v=!1,m=0;m<c.length;m++){if(x=c[m],!k.isArrayOrTypedArray(x)){g=!1;break}x.length>0&&(p=!0);for(var y=0;y<x.length;y++)if(M(x[y])){v=!0;break}}return g&&p&&v}(l))return 0;s("transpose"),h._length=null}return b.type==="heatmapgl"||o.getComponentMethod("calendars","handleTraceDefaults")(b,h,[i,n],t),!0}},74512:function(ee,z,e){"use strict";for(var M=e(83328),k=e(49084),o=e(92880).extendFlat,T=e(67824).overrideAll,b=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],h={},s=0;s<b.length;s++){var t=b[s];h[t]=M[t]}h.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},o(h,k("",{cLetter:"z",autoColorDflt:!1})),ee.exports=T(h,"calc","nested")},84656:function(ee,z,e){"use strict";var M=e(67792).gl_heatmap2d,k=e(54460),o=e(43080);function T(h,s){this.scene=h,this.uid=s,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=M(h.glplot,this.options),this.heatmap._trace=this}var b=T.prototype;b.handlePick=function(h){var s=this.options,t=s.shape,i=h.pointId,n=i%t[0],r=Math.floor(i/t[0]),a=i;return{trace:this,dataCoord:h.dataCoord,traceCoord:[s.x[n],s.y[r],s.z[a]],textLabel:this.textLabels[i],name:this.name,pointIndex:[r,n],hoverinfo:this.hoverinfo}},b.update=function(h,s){var t=s[0];this.index=h.index,this.name=h.name,this.hoverinfo=h.hoverinfo;var i=t.z;this.options.z=[].concat.apply([],i);var n=i[0].length,r=i.length;this.options.shape=[n,r],this.options.x=t.x,this.options.y=t.y,this.options.zsmooth=h.zsmooth;var a=function(x){for(var g=x.colorscale,p=x.zmin,v=x.zmax,m=g.length,y=new Array(m),_=new Array(4*m),f=0;f<m;f++){var S=g[f],w=o(S[1]);y[f]=p+S[0]*(v-p);for(var E=0;E<4;E++)_[4*f+E]=w[E]}return{colorLevels:y,colorValues:_}}(h);this.options.colorLevels=a.colorLevels,this.options.colorValues=a.colorValues,this.textLabels=[].concat.apply([],h.text),this.heatmap.update(this.options);var l,u,d=this.scene.xaxis,c=this.scene.yaxis;h.zsmooth===!1&&(l={ppad:t.x[1]-t.x[0]},u={ppad:t.y[1]-t.y[0]}),h._extremes[d._id]=k.findExtremes(d,t.x,l),h._extremes[c._id]=k.findExtremes(c,t.y,u)},b.dispose=function(){this.heatmap.dispose()},ee.exports=function(h,s,t){var i=new T(h,s.uid);return i.update(s,t),i}},86464:function(ee,z,e){"use strict";var M=e(3400),k=e(51264),o=e(27260),T=e(74512);ee.exports=function(b,h,s,t){function i(n,r){return M.coerce(b,h,T,n,r)}k(b,h,i,t)?(i("text"),i("zsmooth"),o(b,h,t,i,{prefix:"",cLetter:"z"})):h.visible=!1}},45536:function(ee,z,e){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),ee.exports={attributes:e(74512),supplyDefaults:e(86464),colorbar:e(96288),calc:e(19512),plot:e(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:e(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(ee,z,e){"use strict";var M=e(20832),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(21776).Gw,b=e(25376),h=e(11120),s=e(73316),t=e(92880).extendFlat;ee.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:k("x"),yhoverformat:k("y"),text:t({},M.text,{}),hovertext:t({},M.hovertext,{}),orientation:M.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:h("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:h("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({},{keys:s.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:t({},M.textposition,{arrayOk:!1}),textfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:b({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:M.insidetextanchor,textangle:M.textangle,cliponaxis:M.cliponaxis,constraintext:M.constraintext,marker:M.marker,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,_deprecated:{bardir:M._deprecated.bardir}}},2e3:function(ee){"use strict";ee.exports=function(z,e){for(var M=z.length,k=0,o=0;o<M;o++)e[o]?(z[o]/=e[o],k+=z[o]):z[o]=null;return k}},11120:function(ee){"use strict";ee.exports=function(z,e){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(ee,z,e){"use strict";var M=e(38248);ee.exports={count:function(k,o,T){return T[k]++,1},sum:function(k,o,T,b){var h=b[o];return M(h)?(h=Number(h),T[k]+=h,h):0},avg:function(k,o,T,b,h){var s=b[o];return M(s)&&(s=Number(s),T[k]+=s,h[k]++),0},min:function(k,o,T,b){var h=b[o];if(M(h)){if(h=Number(h),!M(T[k]))return T[k]=h,h;if(T[k]>h){var s=h-T[k];return T[k]=h,s}}return 0},max:function(k,o,T,b){var h=b[o];if(M(h)){if(h=Number(h),!M(T[k]))return T[k]=h,h;if(T[k]<h){var s=h-T[k];return T[k]=h,s}}return 0}}},67712:function(ee,z,e){"use strict";var M=e(39032),k=M.ONEAVGYEAR,o=M.ONEAVGMONTH,T=M.ONEDAY,b=M.ONEHOUR,h=M.ONEMIN,s=M.ONESEC,t=e(54460).tickIncrement;function i(l,u,d,c){if(l*u<=0)return 1/0;for(var x=Math.abs(u-l),g=d.type==="date",p=n(x,g),v=0;v<10;v++){var m=n(80*p,g);if(p===m||!r(m,l,u,g,d,c))break;p=m}return p}function n(l,u){return u&&l>s?l>T?l>1.1*k?k:l>1.1*o?o:T:l>b?b:l>h?h:s:Math.pow(10,Math.floor(Math.log(l)/Math.LN10))}function r(l,u,d,c,x,g){if(c&&l>T){var p=a(u,x,g),v=a(d,x,g),m=l===k?0:1;return p[m]!==v[m]}return Math.floor(d/l)-Math.floor(u/l)>.1}function a(l,u,d){var c=u.c2d(l,k,d).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}ee.exports=function(l,u,d,c,x){var g,p,v=-1.1*u,m=-.1*u,y=l-m,_=d[0],f=d[1],S=Math.min(i(_+m,_+y,c,x),i(f+m,f+y,c,x)),w=Math.min(i(_+v,_+m,c,x),i(f+v,f+m,c,x));if(S>w&&w<Math.abs(f-_)/4e3?(g=S,p=!1):(g=Math.min(S,w),p=!0),c.type==="date"&&g>T){var E=g===k?1:6,P=g===k?"M12":"M1";return function(C,O){var R=c.c2d(C,k,x),j=R.indexOf("-",E);j>0&&(R=R.substr(0,j));var D=c.d2c(R,0,x);if(D<C){var N=t(D,P,!1,x);(D+N)/2<C+l&&(D=N)}return O&&p?t(D,P,!0,x):D}}return function(C,O){var R=g*Math.round(C/g);return R+g/10<C&&R+.9*g<C+l&&(R+=g),O&&p&&(R-=g),R}}},35852:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=e(24040),T=e(54460),b=e(84664),h=e(16964),s=e(10648),t=e(2e3),i=e(67712);function n(r,a,l,u,d){var c,x,g,p,v,m,y,_=u+"bins",f=r._fullLayout,S=a["_"+u+"bingroup"],w=f._histogramBinOpts[S],E=f.barmode==="overlay",P=function(de){return l.r2c(de,0,p)},C=function(de){return l.c2r(de,0,p)},O=l.type==="date"?function(de){return de||de===0?k.cleanDate(de,null,p):null}:function(de){return M(de)?Number(de):null};function R(de,ve,pe){ve[de+"Found"]?(ve[de]=O(ve[de]),ve[de]===null&&(ve[de]=pe[de])):(m[de]=ve[de]=pe[de],k.nestedProperty(x[0],_+"."+de).set(pe[de]))}if(a["_"+u+"autoBinFinished"])delete a["_"+u+"autoBinFinished"];else{x=w.traces;var j=[],D=!0,N=!1,W=!1;for(c=0;c<x.length;c++)if((g=x[c]).visible){var F=w.dirs[c];v=g["_"+F+"pos0"]=l.makeCalcdata(g,F),j=k.concat(j,v),delete g["_"+u+"autoBinFinished"],a.visible===!0&&(D?D=!1:(delete g._autoBin,g["_"+u+"autoBinFinished"]=1),o.traceIs(g,"2dMap")&&(N=!0),g.type==="histogram2dcontour"&&(W=!0))}p=x[0][u+"calendar"];var U=T.autoBin(j,l,w.nbins,N,p,w.sizeFound&&w.size),V=x[0]._autoBin={};if(m=V[w.dirs[0]]={},W&&(w.size||(U.start=C(T.tickIncrement(P(U.start),U.size,!0,p))),w.end===void 0&&(U.end=C(T.tickIncrement(P(U.end),U.size,!1,p)))),E&&!o.traceIs(a,"2dMap")&&U._dataSpan===0&&l.type!=="category"&&l.type!=="multicategory"&&a.bingroup===""&&a.xbins===void 0){if(d)return[U,v,!0];U=function(de,ve,pe,_e,Te){var le,ae,he,Se=de._fullLayout,ke=function(Ze,it){for(var tt=it.xaxis,dt=it.yaxis,yt=it.orientation,vt=[],et=Ze._fullData,Qe=0;Qe<et.length;Qe++){var wt=et[Qe];wt.type==="histogram"&&wt.visible===!0&&wt.orientation===yt&&wt.xaxis===tt&&wt.yaxis===dt&&vt.push(wt)}return vt}(de,ve),Me=!1,Ee=1/0,De=[ve];for(le=0;le<ke.length;le++)if((ae=ke[le])===ve)Me=!0;else if(Me){var fe=n(de,ae,pe,_e,!0),xe=fe[0],we=fe[2];ae["_"+_e+"autoBinFinished"]=1,ae["_"+_e+"pos0"]=fe[1],we?De.push(ae):Ee=Math.min(Ee,xe.size)}else he=Se._histogramBinOpts[ae["_"+_e+"bingroup"]],Ee=Math.min(Ee,he.size||ae[Te].size);var Oe=new Array(De.length);for(le=0;le<De.length;le++)for(var ze=De[le]["_"+_e+"pos0"],Pe=0;Pe<ze.length;Pe++)if(ze[Pe]!==void 0){Oe[le]=ze[Pe];break}for(isFinite(Ee)||(Ee=k.distinctVals(Oe).minDiff),le=0;le<De.length;le++){var Ue=(ae=De[le])[_e+"calendar"],Ve={start:pe.c2r(Oe[le]-Ee/2,0,Ue),end:pe.c2r(Oe[le]+Ee/2,0,Ue),size:Ee};ae._input[Te]=ae[Te]=Ve,(he=Se._histogramBinOpts[ae["_"+_e+"bingroup"]])&&k.extendFlat(he,Ve)}return ve[Te]}(r,a,l,u,_)}(y=g.cumulative||{}).enabled&&y.currentbin!=="include"&&(y.direction==="decreasing"?U.start=C(T.tickIncrement(P(U.start),U.size,!0,p)):U.end=C(T.tickIncrement(P(U.end),U.size,!1,p))),w.size=U.size,w.sizeFound||(m.size=U.size,k.nestedProperty(x[0],_+".size").set(U.size)),R("start",w,U),R("end",w,U)}v=a["_"+u+"pos0"],delete a["_"+u+"pos0"];var te=a._input[_]||{},J=k.extendFlat({},w),K=w.start,X=l.r2l(te.start),Z=X!==void 0;if((w.startFound||Z)&&X!==l.r2l(K)){var $=Z?X:k.aggNums(Math.min,null,v),re={type:l.type==="category"||l.type==="multicategory"?"linear":l.type,r2l:l.r2l,dtick:w.size,tick0:K,calendar:p,range:[$,T.tickIncrement($,w.size,!1,p)].map(l.l2r)},oe=T.tickFirst(re);oe>l.r2l($)&&(oe=T.tickIncrement(oe,w.size,!0,p)),J.start=l.l2r(oe),Z||k.nestedProperty(a,_+".start").set(J.start)}var ie=w.end,ue=l.r2l(te.end),me=ue!==void 0;if((w.endFound||me)&&ue!==l.r2l(ie)){var be=me?ue:k.aggNums(Math.max,null,v);J.end=l.l2r(be),me||k.nestedProperty(a,_+".start").set(J.end)}var ge="autobin"+u;return a._input[ge]===!1&&(a._input[_]=k.extendFlat({},a[_]||{}),delete a._input[ge],delete a[ge]),[J,v]}ee.exports={calc:function(r,a){var l,u,d,c,x=[],g=[],p=a.orientation==="h",v=T.getFromId(r,p?a.yaxis:a.xaxis),m=p?"y":"x",y={x:"y",y:"x"}[m],_=a[m+"calendar"],f=a.cumulative,S=n(r,a,v,m),w=S[0],E=S[1],P=typeof w.size=="string",C=[],O=P?C:w,R=[],j=[],D=[],N=0,W=a.histnorm,F=a.histfunc,U=W.indexOf("density")!==-1;f.enabled&&U&&(W=W.replace(/ ?density$/,""),U=!1);var V,te=F==="max"||F==="min"?null:0,J=h.count,K=s[W],X=!1,Z=function(ae){return v.r2c(ae,0,_)};for(k.isArrayOrTypedArray(a[y])&&F!=="count"&&(V=a[y],X=F==="avg",J=h[F]),l=Z(w.start),d=Z(w.end)+(l-T.tickIncrement(l,w.size,!1,_))/1e6;l<d&&x.length<1e6&&(u=T.tickIncrement(l,w.size,!1,_),x.push((l+u)/2),g.push(te),D.push([]),C.push(l),U&&R.push(1/(u-l)),X&&j.push(0),!(u<=l));)l=u;C.push(l),P||v.type!=="date"||(O={start:Z(O.start),end:Z(O.end),size:O.size}),r._fullLayout._roundFnOpts||(r._fullLayout._roundFnOpts={});var $=a["_"+m+"bingroup"],re={leftGap:1/0,rightGap:1/0};$&&(r._fullLayout._roundFnOpts[$]||(r._fullLayout._roundFnOpts[$]=re),re=r._fullLayout._roundFnOpts[$]);var oe,ie=g.length,ue=!0,me=re.leftGap,be=re.rightGap,ge={};for(l=0;l<E.length;l++){var de=E[l];(c=k.findBin(de,O))>=0&&c<ie&&(N+=J(c,l,g,V,j),ue&&D[c].length&&de!==E[D[c][0]]&&(ue=!1),D[c].push(l),ge[l]=c,me=Math.min(me,de-C[c]),be=Math.min(be,C[c+1]-de))}re.leftGap=me,re.rightGap=be,ue||(oe=function(ae,he){return function(){var Se=r._fullLayout._roundFnOpts[$];return i(Se.leftGap,Se.rightGap,C,v,_)(ae,he)}}),X&&(N=t(g,j)),K&&K(g,N,R),f.enabled&&function(ae,he,Se){var ke,Me,Ee;function De(xe){Ee=ae[xe],ae[xe]/=2}function fe(xe){Me=ae[xe],ae[xe]=Ee+Me/2,Ee+=Me}if(Se==="half")if(he==="increasing")for(De(0),ke=1;ke<ae.length;ke++)fe(ke);else for(De(ae.length-1),ke=ae.length-2;ke>=0;ke--)fe(ke);else if(he==="increasing"){for(ke=1;ke<ae.length;ke++)ae[ke]+=ae[ke-1];Se==="exclude"&&(ae.unshift(0),ae.pop())}else{for(ke=ae.length-2;ke>=0;ke--)ae[ke]+=ae[ke+1];Se==="exclude"&&(ae.push(0),ae.shift())}}(g,f.direction,f.currentbin);var ve=Math.min(x.length,g.length),pe=[],_e=0,Te=ve-1;for(l=0;l<ve;l++)if(g[l]){_e=l;break}for(l=ve-1;l>=_e;l--)if(g[l]){Te=l;break}for(l=_e;l<=Te;l++)if(M(x[l])&&M(g[l])){var le={p:x[l],s:g[l],b:0};f.enabled||(le.pts=D[l],ue?le.ph0=le.ph1=D[l].length?E[D[l][0]]:x[l]:(a._computePh=!0,le.ph0=oe(C[l]),le.ph1=oe(C[l+1],!0))),pe.push(le)}return pe.length===1&&(pe[0].width1=T.tickIncrement(pe[0].p,w.size,!1,_)-pe[0].p),b(pe,a),k.isArrayOrTypedArray(a.selectedpoints)&&k.tagSelected(pe,a,ge),pe},calcAllAutoBins:n}},73316:function(ee){"use strict";ee.exports={eventDataKeys:["binNumber"]}},80536:function(ee,z,e){"use strict";var M=e(3400),k=e(79811),o=e(24040).traceIs,T=e(20011),b=e(31508).validateCornerradius,h=M.nestedProperty,s=e(71888).getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],i=["x","y"];ee.exports=function(n,r){var a,l,u,d,c,x,g,p=r._histogramBinOpts={},v=[],m={},y=[];function _(te,J){return M.coerce(a._input,a,a._module.attributes,te,J)}function f(te){return te.orientation==="v"?"x":"y"}function S(te,J,K){var X=te.uid+"__"+K;J||(J=X);var Z=function(ie,ue){return k.getFromTrace({_fullLayout:r},ie,ue).type}(te,K),$=te[K+"calendar"]||"",re=p[J],oe=!0;re&&(Z===re.axType&&$===re.calendar?(oe=!1,re.traces.push(te),re.dirs.push(K)):(J=X,Z!==re.axType&&M.warn(["Attempted to group the bins of trace",te.index,"set on a","type:"+Z,"axis","with bins on","type:"+re.axType,"axis."].join(" ")),$!==re.calendar&&M.warn(["Attempted to group the bins of trace",te.index,"set with a",$,"calendar","with bins",re.calendar?"on a "+re.calendar+" calendar":"w/o a set calendar"].join(" ")))),oe&&(p[J]={traces:[te],dirs:[K],axType:Z,calendar:te[K+"calendar"]||""}),te["_"+K+"bingroup"]=J}for(c=0;c<n.length;c++)if(a=n[c],o(a,"histogram")){if(v.push(a),delete a._xautoBinFinished,delete a._yautoBinFinished,a.type==="histogram"){var w=_("marker.cornerradius",r.barcornerradius);a.marker&&(a.marker.cornerradius=b(w))}o(a,"2dMap")||T(a._input,a,r,_)}var E=r._alignmentOpts||{};for(c=0;c<v.length;c++){if(a=v[c],u="",!o(a,"2dMap")){if(d=f(a),r.barmode==="group"&&a.alignmentgroup){var P=a[d+"axis"],C=s(r,P)+a.orientation;(E[C]||{})[a.alignmentgroup]&&(u=C)}u||r.barmode==="overlay"||(u=s(r,a.xaxis)+s(r,a.yaxis)+f(a))}u?(m[u]||(m[u]=[]),m[u].push(a)):y.push(a)}for(u in m)if((l=m[u]).length!==1){var O=!1;for(l.length&&(a=l[0],O=_("bingroup")),u=O||u,c=0;c<l.length;c++){var R=(a=l[c])._input.bingroup;R&&R!==u&&M.warn(["Trace",a.index,"must match","within bingroup",u+".","Ignoring its bingroup:",R,"setting."].join(" ")),a.bingroup=u,S(a,u,f(a))}}else y.push(l[0]);for(c=0;c<y.length;c++){a=y[c];var j=_("bingroup");if(o(a,"2dMap"))for(g=0;g<2;g++){var D=_((d=i[g])+"bingroup",j?j+"__"+d:null);S(a,D,d)}else S(a,j,f(a))}for(u in p){var N=p[u];for(l=N.traces,x=0;x<t.length;x++){var W,F,U=t[x],V=U.name;if(V!=="nbins"||!N.sizeFound){for(c=0;c<l.length;c++){if(a=l[c],d=N.dirs[c],W=U.aStr[d],h(a._input,W).get()!==void 0){N[V]=_(W),N[V+"Found"]=!0;break}(F=(a._autoBin||{})[d]||{})[V]&&h(a,W).set(F[V])}if(V==="start"||V==="end")for(;c<l.length;c++)(a=l[c])["_"+d+"bingroup"]&&_(W,(F=(a._autoBin||{})[d]||{})[V]);V!=="nbins"||N.sizeFound||N.nbinsFound||(a=l[0],N[V]=_(W))}}}}},6616:function(ee,z,e){"use strict";var M=e(24040),k=e(3400),o=e(76308),T=e(31508).handleText,b=e(55592),h=e(40196);ee.exports=function(s,t,i,n){function r(m,y){return k.coerce(s,t,h,m,y)}var a=r("x"),l=r("y");r("cumulative.enabled")&&(r("cumulative.direction"),r("cumulative.currentbin")),r("text");var u=r("textposition");T(s,t,n,r,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat");var d=r("orientation",l&&!a?"h":"v"),c=d==="v"?"x":"y",x=d==="v"?"y":"x",g=a&&l?Math.min(k.minRowLength(a)&&k.minRowLength(l)):k.minRowLength(t[c]||[]);if(g){t._length=g,M.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y"],n),t[x]&&r("histfunc"),r("histnorm"),r("autobin"+c),b(s,t,r,i,n),k.coerceSelectionMarkerOpacity(t,r);var p=(t.marker.line||{}).color,v=M.getComponentMethod("errorbars","supplyDefaults");v(s,t,p||o.defaultLine,{axis:"y"}),v(s,t,p||o.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1}},84980:function(ee){"use strict";ee.exports=function(z,e,M,k,o){if(z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,"zLabelVal"in e&&(z.z=e.zLabelVal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),!(M.cumulative||{}).enabled){var T,b=Array.isArray(o)?k[0].pts[o[0]][o[1]]:k[o].pts;if(z.pointNumbers=b,z.binNumber=z.pointNumber,delete z.pointNumber,delete z.pointIndex,M._indexToPoints){T=[];for(var h=0;h<b.length;h++)T=T.concat(M._indexToPoints[b[h]])}else T=b;z.pointIndices=T}return z}},43339:function(ee,z,e){"use strict";var M=e(63400).hoverPoints,k=e(54460).hoverLabelText;ee.exports=function(o,T,b,h,s){var t=M(o,T,b,h,s);if(t){var i=(o=t[0]).cd[o.index],n=o.cd[0].trace;if(!n.cumulative.enabled){var r=n.orientation==="h"?"y":"x";o[r+"Label"]=k(o[r+"a"],[i.ph0,i.ph1],n[r+"hoverformat"])}return t}}},42600:function(ee,z,e){"use strict";ee.exports={attributes:e(40196),layoutAttributes:e(39324),supplyDefaults:e(6616),crossTraceDefaults:e(80536),supplyLayoutDefaults:e(37156),calc:e(35852).calc,crossTraceCalc:e(96376).crossTraceCalc,plot:e(98184).plot,layerName:"barlayer",style:e(60100).style,styleOnSelect:e(60100).styleOnSelect,colorbar:e(5528),hoverPoints:e(43339),selectPoints:e(45784),eventData:e(84980),moduleType:"trace",name:"histogram",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(ee){"use strict";ee.exports={percent:function(z,e){for(var M=z.length,k=100/e,o=0;o<M;o++)z[o]*=k},probability:function(z,e){for(var M=z.length,k=0;k<M;k++)z[k]/=e},density:function(z,e,M,k){var o=z.length;k=k||1;for(var T=0;T<o;T++)z[T]*=M[T]*k},"probability density":function(z,e,M,k){var o=z.length;k&&(e/=k);for(var T=0;T<o;T++)z[T]*=M[T]/e}}},37008:function(ee,z,e){"use strict";var M=e(40196),k=e(11120),o=e(83328),T=e(45464),b=e(29736).axisHoverFormat,h=e(21776).Ks,s=e(21776).Gw,t=e(49084),i=e(92880).extendFlat;ee.exports=i({x:M.x,y:M.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:k("x"),nbinsy:M.nbinsy,ybins:k("y"),autobinx:M.autobinx,autobiny:M.autobiny,bingroup:i({},M.bingroup,{}),xbingroup:i({},M.bingroup,{}),ybingroup:i({},M.bingroup,{}),xgap:o.xgap,ygap:o.ygap,zsmooth:o.zsmooth,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:h({},{keys:"z"}),texttemplate:s({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:o.textfont,showlegend:i({},T.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},55480:function(ee,z,e){"use strict";var M=e(3400),k=e(54460),o=e(16964),T=e(10648),b=e(2e3),h=e(67712),s=e(35852).calcAllAutoBins;function t(r,a,l,u){var d,c=new Array(r);if(u)for(d=0;d<r;d++)c[d]=1/(a[d+1]-a[d]);else{var x=1/l;for(d=0;d<r;d++)c[d]=x}return c}function i(r,a){return{start:r(a.start),end:r(a.end),size:a.size}}function n(r,a,l,u,d,c){var x,g=r.length-1,p=new Array(g),v=h(l,u,r,d,c);for(x=0;x<g;x++){var m=(a||[])[x];p[x]=m===void 0?[v(r[x]),v(r[x+1],!0)]:[m,m]}return p}ee.exports=function(r,a){var l,u,d,c,x=k.getFromId(r,a.xaxis),g=k.getFromId(r,a.yaxis),p=a.xcalendar,v=a.ycalendar,m=function(dt){return x.r2c(dt,0,p)},y=function(dt){return g.r2c(dt,0,v)},_=s(r,a,x,"x"),f=_[0],S=_[1],w=s(r,a,g,"y"),E=w[0],P=w[1],C=a._length;S.length>C&&S.splice(C,S.length-C),P.length>C&&P.splice(C,P.length-C);var O=[],R=[],j=[],D=typeof f.size=="string",N=typeof E.size=="string",W=[],F=[],U=D?W:f,V=N?F:E,te=0,J=[],K=[],X=a.histnorm,Z=a.histfunc,$=X.indexOf("density")!==-1,re=Z==="max"||Z==="min"?null:0,oe=o.count,ie=T[X],ue=!1,me=[],be=[],ge="z"in a?a.z:"marker"in a&&Array.isArray(a.marker.color)?a.marker.color:"";ge&&Z!=="count"&&(ue=Z==="avg",oe=o[Z]);var de=f.size,ve=m(f.start),pe=m(f.end)+(ve-k.tickIncrement(ve,de,!1,p))/1e6;for(l=ve;l<pe;l=k.tickIncrement(l,de,!1,p))R.push(re),W.push(l),ue&&j.push(0);W.push(l);var _e,Te=R.length,le=(l-ve)/Te,ae=(_e=ve+le/2,x.c2r(_e,0,p)),he=E.size,Se=y(E.start),ke=y(E.end)+(Se-k.tickIncrement(Se,he,!1,v))/1e6;for(l=Se;l<ke;l=k.tickIncrement(l,he,!1,v)){O.push(R.slice()),F.push(l);var Me=new Array(Te);for(u=0;u<Te;u++)Me[u]=[];K.push(Me),ue&&J.push(j.slice())}F.push(l);var Ee=O.length,De=(l-Se)/Ee,fe=function(dt){return g.c2r(dt,0,v)}(Se+De/2);$&&(me=t(R.length,U,le,D),be=t(O.length,V,De,N)),D||x.type!=="date"||(U=i(m,U)),N||g.type!=="date"||(V=i(y,V));var xe=!0,we=!0,Oe=new Array(Te),ze=new Array(Ee),Pe=1/0,Ue=1/0,Ve=1/0,Ze=1/0;for(l=0;l<C;l++){var it=S[l],tt=P[l];d=M.findBin(it,U),c=M.findBin(tt,V),d>=0&&d<Te&&c>=0&&c<Ee&&(te+=oe(d,l,O[c],ge,J[c]),K[c][d].push(l),xe&&(Oe[d]===void 0?Oe[d]=it:Oe[d]!==it&&(xe=!1)),we&&(ze[c]===void 0?ze[c]=tt:ze[c]!==tt&&(we=!1)),Pe=Math.min(Pe,it-W[d]),Ue=Math.min(Ue,W[d+1]-it),Ve=Math.min(Ve,tt-F[c]),Ze=Math.min(Ze,F[c+1]-tt))}if(ue)for(c=0;c<Ee;c++)te+=b(O[c],J[c]);if(ie)for(c=0;c<Ee;c++)ie(O[c],te,me,be[c]);return{x:S,xRanges:n(W,xe&&Oe,Pe,Ue,x,p),x0:ae,dx:le,y:P,yRanges:n(F,we&&ze,Ve,Ze,g,v),y0:fe,dy:De,z:O,pts:K}}},99784:function(ee,z,e){"use strict";var M=e(3400),k=e(56408),o=e(82748),T=e(27260),b=e(39096),h=e(37008);ee.exports=function(s,t,i,n){function r(a,l){return M.coerce(s,t,h,a,l)}k(s,t,r,n),t.visible!==!1&&(o(s,t,r,n),T(s,t,n,r,{prefix:"",cLetter:"z"}),r("hovertemplate"),b(r,n),r("xhoverformat"),r("yhoverformat"))}},59576:function(ee,z,e){"use strict";var M=e(55512),k=e(54460).hoverLabelText;ee.exports=function(o,T,b,h,s){var t=M(o,T,b,h,s);if(t){var i=(o=t[0]).index,n=i[0],r=i[1],a=o.cd[0],l=a.trace,u=a.xRanges[r],d=a.yRanges[n];return o.xLabel=k(o.xa,[u[0],u[1]],l.xhoverformat),o.yLabel=k(o.ya,[d[0],d[1]],l.yhoverformat),t}}},21536:function(ee,z,e){"use strict";ee.exports={attributes:e(37008),supplyDefaults:e(99784),crossTraceDefaults:e(80536),calc:e(19512),plot:e(41420),layerName:"heatmaplayer",colorbar:e(96288),style:e(41648),hoverPoints:e(59576),eventData:e(84980),moduleType:"trace",name:"histogram2d",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(ee,z,e){"use strict";var M=e(24040),k=e(3400);ee.exports=function(o,T,b,h){var s=b("x"),t=b("y"),i=k.minRowLength(s),n=k.minRowLength(t);i&&n?(T._length=Math.min(i,n),M.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x","y"],h),(b("z")||b("marker.color"))&&b("histfunc"),b("histnorm"),b("autobinx"),b("autobiny")):T.visible=!1}},81220:function(ee,z,e){"use strict";var M=e(37008),k=e(67104),o=e(49084),T=e(29736).axisHoverFormat,b=e(92880).extendFlat;ee.exports=b({x:M.x,y:M.y,z:M.z,marker:M.marker,histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:M.xbins,nbinsy:M.nbinsy,ybins:M.ybins,autobinx:M.autobinx,autobiny:M.autobiny,bingroup:M.bingroup,xbingroup:M.xbingroup,ybingroup:M.ybingroup,autocontour:k.autocontour,ncontours:k.ncontours,contours:k.contours,line:{color:k.line.color,width:b({},k.line.width,{dflt:.5}),dash:k.line.dash,smoothing:k.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:M.hovertemplate,texttemplate:k.texttemplate,textfont:k.textfont},o("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(ee,z,e){"use strict";var M=e(3400),k=e(56408),o=e(84952),T=e(97680),b=e(39096),h=e(81220);ee.exports=function(s,t,i,n){function r(a,l){return M.coerce(s,t,h,a,l)}k(s,t,r,n),t.visible!==!1&&(o(s,t,r,function(a){return M.coerce2(s,t,h,a)}),T(s,t,r,n),r("xhoverformat"),r("yhoverformat"),r("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&b(r,n))}},65664:function(ee,z,e){"use strict";ee.exports={attributes:e(81220),supplyDefaults:e(3704),crossTraceDefaults:e(80536),calc:e(20688),plot:e(23676).plot,layerName:"contourlayer",style:e(52440),colorbar:e(55296),hoverPoints:e(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(ee,z,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(49084),T=e(86968).u,b=e(74996),h=e(424),s=e(40516),t=e(32984),i=e(92880).extendFlat,n=e(98192).c;ee.exports={labels:h.labels,parents:h.parents,values:h.values,branchvalues:h.branchvalues,count:h.count,level:h.level,maxdepth:h.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:s.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:h.marker.colors,line:h.marker.line,pattern:n,editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),leaf:h.leaf,pathbar:s.pathbar,text:b.text,textinfo:h.textinfo,texttemplate:k({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:h.hoverinfo,hovertemplate:M({},{keys:t.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:s.outsidetextfont,textposition:s.textposition,sort:b.sort,root:h.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},59564:function(ee,z,e){"use strict";var M=e(7316);z.name="icicle",z.plot=function(k,o,T,b){M.plotBasePlot(z.name,k,o,T,b)},z.clean=function(k,o,T,b){M.cleanBasePlot(z.name,k,o,T,b)}},73876:function(ee,z,e){"use strict";var M=e(3776);z.r=function(k,o){return M.calc(k,o)},z.q=function(k){return M._runCrossTraceCalc("icicle",k)}},7045:function(ee,z,e){"use strict";var M=e(3400),k=e(97376),o=e(76308),T=e(86968).Q,b=e(31508).handleText,h=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,n=t.handleDefaults;ee.exports=function(r,a,l,u){function d(y,_){return M.coerce(r,a,k,y,_)}var c=d("labels"),x=d("parents");if(c&&c.length&&x&&x.length){var g=d("values");g&&g.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.orientation"),d("tiling.flip"),d("tiling.pad");var p=d("text");d("texttemplate"),a.texttemplate||d("textinfo",M.isArrayOrTypedArray(p)?"text+label":"label"),d("hovertext"),d("hovertemplate");var v=d("pathbar.visible");b(r,a,u,d,"auto",{hasPathbar:v,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition"),s(r,a,u,d);var m=a._hasColorscale=i(r,"marker","colors")||(r.marker||{}).coloraxis;m&&n(r,a,u,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",m?1:.7),a._hovered={marker:{line:{width:2,color:o.contrast(u.paper_bgcolor)}}},v&&(d("pathbar.thickness",a.pathbar.textfont.size+2*h),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),T(a,u,d),a._length=null}else a.visible=!1}},67880:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(72736),b=e(25132),h=e(47192).styleOne,s=e(32984),t=e(78176),i=e(45716),n=e(96488).formatSliceLabel,r=!1;ee.exports=function(a,l,u,d,c){var x=c.width,g=c.height,p=c.viewX,v=c.viewY,m=c.pathSlice,y=c.toMoveInsideSlice,_=c.strTransform,f=c.hasTransition,S=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,P=c.prevEntry,C=a._context.staticPlot,O=a._fullLayout,R=l[0].trace,j=R.textposition.indexOf("left")!==-1,D=R.textposition.indexOf("right")!==-1,N=R.textposition.indexOf("bottom")!==-1,W=b(u,[x,g],{flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1,orientation:R.tiling.orientation,pad:{inner:R.tiling.pad},maxDepth:R._maxDepth}).descendants(),F=1/0,U=-1/0;W.forEach(function(X){var Z=X.depth;Z>=R._maxDepth?(X.x0=X.x1=(X.x0+X.x1)/2,X.y0=X.y1=(X.y0+X.y1)/2):(F=Math.min(F,Z),U=Math.max(U,Z))}),d=d.data(W,t.getPtId),R._maxVisibleLayers=isFinite(U)?U-F+1:0,d.enter().append("g").classed("slice",!0),S(d,r,{},[x,g],m),d.order();var V=null;if(f&&P){var te=t.getPtId(P);d.each(function(X){V===null&&t.getPtId(X)===te&&(V={x0:X.x0,x1:X.x1,y0:X.y0,y1:X.y1})})}var J=function(){return V||{x0:0,x1:x,y0:0,y1:g}},K=d;return f&&(K=K.transition().each("end",function(){var X=M.select(this);t.setSliceCursor(X,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),K.each(function(X){X._x0=p(X.x0),X._x1=p(X.x1),X._y0=v(X.y0),X._y1=v(X.y1),X._hoverX=p(X.x1-R.tiling.pad),X._hoverY=v(N?X.y1-R.tiling.pad/2:X.y0+R.tiling.pad/2);var Z=M.select(this),$=k.ensureSingle(Z,"path","surface",function(ue){ue.style("pointer-events",C?"none":"all")});f?$.transition().attrTween("d",function(ue){var me=w(ue,r,J(),[x,g],{orientation:R.tiling.orientation,flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1});return function(be){return m(me(be))}}):$.attr("d",m),Z.call(i,u,a,l,{styleOne:h,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),$.call(h,X,R,a,{hovered:!1}),X.x0===X.x1||X.y0===X.y1?X._text="":X._text=n(X,u,R,l,O)||"";var re=k.ensureSingle(Z,"g","slicetext"),oe=k.ensureSingle(re,"text","",function(ue){ue.attr("data-notex",1)}),ie=k.ensureUniformFontSize(a,t.determineTextFont(R,X,O.font));oe.text(X._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":j?"start":"middle").call(o.font,ie).call(T.convertToTspans,a),X.textBB=o.bBox(oe.node()),X.transform=y(X,{fontSize:ie.size}),X.transform.fontSize=ie.size,f?oe.transition().attrTween("transform",function(ue){var me=E(ue,r,J(),[x,g]);return function(be){return _(me(be))}}):oe.attr("transform",_(X))}),V}},29044:function(ee,z,e){"use strict";ee.exports={moduleType:"trace",name:"icicle",basePlotModule:e(59564),categories:[],animatable:!0,attributes:e(97376),layoutAttributes:e(90676),supplyDefaults:e(7045),supplyLayoutDefaults:e(4304),calc:e(73876).r,crossTraceCalc:e(73876).q,plot:e(38364),style:e(47192).style,colorbar:e(5528),meta:{}}},90676:function(ee){"use strict";ee.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(ee,z,e){"use strict";var M=e(3400),k=e(90676);ee.exports=function(o,T){function b(h,s){return M.coerce(o,T,k,h,s)}b("iciclecolorway",T.colorway),b("extendiciclecolors")}},25132:function(ee,z,e){"use strict";var M=e(74148),k=e(83024);ee.exports=function(o,T,b){var h=b.flipX,s=b.flipY,t=b.orientation==="h",i=b.maxDepth,n=T[0],r=T[1];i&&(n=(o.height+1)*T[0]/Math.min(o.height+1,i),r=(o.height+1)*T[1]/Math.min(o.height+1,i));var a=M.partition().padding(b.pad.inner).size(t?[T[1],n]:[T[0],r])(o);return(t||h||s)&&k(a,T,{swapXY:t,flipX:h,flipY:s}),a}},38364:function(ee,z,e){"use strict";var M=e(95808),k=e(67880);ee.exports=function(o,T,b,h){return M(o,T,b,h,{type:"icicle",drawDescendants:k})}},47192:function(ee,z,e){"use strict";var M=e(33428),k=e(76308),o=e(3400),T=e(82744).resizeText,b=e(60404);function h(s,t,i,n){var r=t.data.data,a=!t.children,l=r.i,u=o.castOption(i,l,"marker.line.color")||k.defaultLine,d=o.castOption(i,l,"marker.line.width")||0;s.call(b,t,i,n).style("stroke-width",d).call(k.stroke,u).style("opacity",a?i.leaf.opacity:null)}ee.exports={style:function(s){var t=s._fullLayout._iciclelayer.selectAll(".trace");T(s,t,"icicle"),t.each(function(i){var n=M.select(this),r=i[0].trace;n.style("opacity",r.opacity),n.selectAll("path.surface").each(function(a){M.select(this).call(h,a,r,s)})})},styleOne:h}},95188:function(ee,z,e){"use strict";for(var M=e(45464),k=e(21776).Ks,o=e(92880).extendFlat,T=e(47797).colormodel,b=["rgb","rgba","rgba256","hsl","hsla"],h=[],s=[],t=0;t<b.length;t++){var i=T[b[t]];h.push("For the `"+b[t]+"` colormodel, it is ["+(i.zminDflt||i.min).join(", ")+"]."),s.push("For the `"+b[t]+"` colormodel, it is ["+(i.zmaxDflt||i.max).join(", ")+"].")}ee.exports=o({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:b,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:o({},M.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:k({},{keys:["z","color","colormodel"]}),transforms:void 0})},93336:function(ee,z,e){"use strict";var M=e(3400),k=e(47797),o=e(38248),T=e(54460),b=e(3400).maxRowLength,h=e(18712).i;function s(i,n,r,a){return function(l){return M.constrain((l-i)*n,r,a)}}function t(i,n){return function(r){return M.constrain(r,i,n)}}ee.exports=function(i,n){var r,a;if(n._hasZ)r=n.z.length,a=b(n.z);else if(n._hasSource){var l=h(n.source);r=l.height,a=l.width}var u,d=T.getFromId(i,n.xaxis||"x"),c=T.getFromId(i,n.yaxis||"y"),x=d.d2c(n.x0)-n.dx/2,g=c.d2c(n.y0)-n.dy/2,p=[x,x+a*n.dx],v=[g,g+r*n.dy];if(d&&d.type==="log")for(u=0;u<a;u++)p.push(x+u*n.dx);if(c&&c.type==="log")for(u=0;u<r;u++)v.push(g+u*n.dy);return n._extremes[d._id]=T.findExtremes(d,p),n._extremes[c._id]=T.findExtremes(c,v),n._scaler=function(m){var y=k.colormodel[m.colormodel],_=(y.colormodel||m.colormodel).length;m._sArray=[];for(var f=0;f<_;f++)y.min[f]!==m.zmin[f]||y.max[f]!==m.zmax[f]?m._sArray.push(s(m.zmin[f],(y.max[f]-y.min[f])/(m.zmax[f]-m.zmin[f]),y.min[f],y.max[f])):m._sArray.push(t(y.min[f],y.max[f]));return function(S){for(var w=S.slice(0,_),E=0;E<_;E++){var P=w[E];if(!o(P))return!1;w[E]=m._sArray[E](P)}return w}}(n),[{x0:x,y0:g,z:n.z,w:a,h:r}]}},47797:function(ee){"use strict";ee.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(z){return z.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(z){return z.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(z){return z.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(z){var e=z.slice(0,3);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(z){var e=z.slice(0,4);return e[1]=e[1]+"%",e[2]=e[2]+"%",e},suffix:["\xB0","%","%",""]}}}},13188:function(ee,z,e){"use strict";var M=e(3400),k=e(95188),o=e(47797),T=e(81792).IMAGE_URL_PREFIX;ee.exports=function(b,h){function s(n,r){return M.coerce(b,h,k,n,r)}s("source"),h.source&&!h.source.match(T)&&delete h.source,h._hasSource=!!h.source;var t,i=s("z");h._hasZ=!(i===void 0||!i.length||!i[0]||!i[0].length),h._hasZ||h._hasSource?(s("x0"),s("y0"),s("dx"),s("dy"),h._hasZ?(s("colormodel","rgb"),s("zmin",(t=o.colormodel[h.colormodel]).zminDflt||t.min),s("zmax",t.zmaxDflt||t.max)):h._hasSource&&(h.colormodel="rgba256",t=o.colormodel[h.colormodel],h.zmin=t.zminDflt,h.zmax=t.zmaxDflt),s("zsmooth"),s("text"),s("hovertext"),s("hovertemplate"),h._length=null):h.visible=!1}},79972:function(ee){"use strict";ee.exports=function(z,e){return"xVal"in e&&(z.x=e.xVal),"yVal"in e&&(z.y=e.yVal),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z.color=e.color,z.colormodel=e.trace.colormodel,z.z||(z.z=e.color),z}},18712:function(ee,z,e){"use strict";var M=e(19480),k=e(81792).IMAGE_URL_PREFIX,o=e(33576).Buffer;z.i=function(T){var b=T.replace(k,""),h=new o(b,"base64");return M(h)}},24892:function(ee,z,e){"use strict";var M=e(93024),k=e(3400),o=k.isArrayOrTypedArray,T=e(47797);ee.exports=function(b,h,s){var t=b.cd[0],i=t.trace,n=b.xa,r=b.ya;if(!(M.inbox(h-t.x0,h-(t.x0+t.w*i.dx),0)>0||M.inbox(s-t.y0,s-(t.y0+t.h*i.dy),0)>0)){var a,l=Math.floor((h-t.x0)/i.dx),u=Math.floor(Math.abs(s-t.y0)/i.dy);if(i._hasZ?a=t.z[u][l]:i._hasSource&&(a=i._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(l,u,1,1).data),a){var d,c=t.hi||i.hoverinfo;if(c){var x=c.split("+");x.indexOf("all")!==-1&&(x=["color"]),x.indexOf("color")!==-1&&(d=!0)}var g,p=T.colormodel[i.colormodel],v=p.colormodel||i.colormodel,m=v.length,y=i._scaler(a),_=p.suffix,f=[];(i.hovertemplate||d)&&(f.push("["+[y[0]+_[0],y[1]+_[1],y[2]+_[2]].join(", ")),m===4&&f.push(", "+y[3]+_[3]),f.push("]"),f=f.join(""),b.extraText=v.toUpperCase()+": "+f),o(i.hovertext)&&o(i.hovertext[u])?g=i.hovertext[u][l]:o(i.text)&&o(i.text[u])&&(g=i.text[u][l]);var S=r.c2p(t.y0+(u+.5)*i.dy),w=t.x0+(l+.5)*i.dx,E=t.y0+(u+.5)*i.dy,P="["+a.slice(0,i.colormodel.length).join(", ")+"]";return[k.extendFlat(b,{index:[u,l],x0:n.c2p(t.x0+l*i.dx),x1:n.c2p(t.x0+(l+1)*i.dx),y0:S,y1:S,color:y,xVal:w,xLabelVal:w,yVal:E,yLabelVal:E,zLabelVal:P,text:g,hovertemplateLabels:{zLabel:P,colorLabel:f,"color[0]Label":y[0]+_[0],"color[1]Label":y[1]+_[1],"color[2]Label":y[2]+_[2],"color[3]Label":y[3]+_[3]}})]}}}},48928:function(ee,z,e){"use strict";ee.exports={attributes:e(95188),supplyDefaults:e(13188),calc:e(93336),plot:e(63715),style:e(28576),hoverPoints:e(24892),eventData:e(79972),moduleType:"trace",name:"image",basePlotModule:e(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=k.strTranslate,T=e(9616),b=e(47797),h=e(9188),s=e(2264).STYLE;ee.exports=function(t,i,n,r){var a=i.xaxis,l=i.yaxis,u=!t._context._exportedPlot&&h();k.makeTraceGroups(r,n,"im").each(function(d){var c=M.select(this),x=d[0],g=x.trace,p=(g.zsmooth==="fast"||g.zsmooth===!1&&u)&&!g._hasZ&&g._hasSource&&a.type==="linear"&&l.type==="linear";g._realImage=p;var v,m,y,_,f,S,w=x.z,E=x.x0,P=x.y0,C=x.w,O=x.h,R=g.dx,j=g.dy;for(S=0;v===void 0&&S<C;)v=a.c2p(E+S*R),S++;for(S=C;m===void 0&&S>0;)m=a.c2p(E+S*R),S--;for(S=0;_===void 0&&S<O;)_=l.c2p(P+S*j),S++;for(S=O;f===void 0&&S>0;)f=l.c2p(P+S*j),S--;m<v&&(y=m,m=v,v=y),f<_&&(y=_,_=f,f=y),p||(v=Math.max(-.5*a._length,v),m=Math.min(1.5*a._length,m),_=Math.max(-.5*l._length,_),f=Math.min(1.5*l._length,f));var D=Math.round(m-v),N=Math.round(f-_);if(D<=0||N<=0)c.selectAll("image").data([]).exit().remove();else{var W=c.selectAll("image").data([d]);W.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),W.exit().remove();var F=g.zsmooth===!1?s:"";if(p){var U=k.simpleMap(a.range,a.r2l),V=k.simpleMap(l.range,l.r2l),te=U[1]<U[0],J=V[1]>V[0];if(te||J){var K=v+D/2,X=_+N/2;F+="transform:"+o(K+"px",X+"px")+"scale("+(te?-1:1)+","+(J?-1:1)+")"+o(-K+"px",-X+"px")+";"}}W.attr("style",F);var Z=new Promise(function(re){if(g._hasZ)re();else if(g._hasSource)if(g._canvas&&g._canvas.el.width===C&&g._canvas.el.height===O&&g._canvas.source===g.source)re();else{var oe=document.createElement("canvas");oe.width=C,oe.height=O;var ie=oe.getContext("2d",{willReadFrequently:!0});g._image=g._image||new Image;var ue=g._image;ue.onload=function(){ie.drawImage(ue,0,0),g._canvas={el:oe,source:g.source},re()},ue.setAttribute("src",g.source)}}).then(function(){var re,oe;if(g._hasZ)oe=$(function(ue,me){var be=w[me][ue];return k.isTypedArray(be)&&(be=Array.from(be)),be}),re=oe.toDataURL("image/png");else if(g._hasSource)if(p)re=g.source;else{var ie=g._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,C,O).data;oe=$(function(ue,me){var be=4*(me*C+ue);return[ie[be],ie[be+1],ie[be+2],ie[be+3]]}),re=oe.toDataURL("image/png")}W.attr({"xlink:href":re,height:N,width:D,x:v,y:_})});t._promises.push(Z)}function $(re){var oe=document.createElement("canvas");oe.width=D,oe.height=N;var ie,ue=oe.getContext("2d",{willReadFrequently:!0}),me=function(he){return k.constrain(Math.round(a.c2p(E+he*R)-v),0,D)},be=function(he){return k.constrain(Math.round(l.c2p(P+he*j)-_),0,N)},ge=b.colormodel[g.colormodel],de=ge.colormodel||g.colormodel,ve=ge.fmt;for(S=0;S<x.w;S++){var pe=me(S),_e=me(S+1);if(_e!==pe&&!isNaN(_e)&&!isNaN(pe))for(var Te=0;Te<x.h;Te++){var le=be(Te),ae=be(Te+1);ae===le||isNaN(ae)||isNaN(le)||!re(S,Te)||(ie=g._scaler(re(S,Te)),ue.fillStyle=ie?de+"("+ve(ie).join(",")+")":"rgba(0,0,0,0)",ue.fillRect(pe,le,_e-pe,ae-le))}}return oe}})}},28576:function(ee,z,e){"use strict";var M=e(33428);ee.exports=function(k){M.select(k).selectAll(".im image").style("opacity",function(o){return o[0].trace.opacity})}},89864:function(ee,z,e){"use strict";var M=e(92880).extendFlat,k=e(92880).extendDeep,o=e(67824).overrideAll,T=e(25376),b=e(22548),h=e(86968).u,s=e(94724),t=e(31780).templatedArray,i=e(48164),n=e(29736).descriptionOnlyNumbers,r=T({editType:"plot",colorEditType:"plot"}),a={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:b.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},l={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=t("step",k({},a,{range:l}));ee.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:h({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:M({},r,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:n("value")},font:M({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:n("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:M({},r,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:k({},a,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:o({range:l,visible:M({},s.visible,{dflt:!0}),tickmode:s.minor.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:M({},s.ticks,{dflt:"outside"}),ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,ticklabelstep:s.ticklabelstep,showticklabels:s.showticklabels,labelalias:s.labelalias,tickfont:T({}),tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,separatethousands:s.separatethousands,exponentformat:s.exponentformat,minexponent:s.minexponent,showexponent:s.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:M({},a.line.color,{}),width:M({},a.line.width,{dflt:1}),editType:"plot"},thickness:M({},a.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(ee,z,e){"use strict";var M=e(7316);z.name="indicator",z.plot=function(k,o,T,b){M.plotBasePlot(z.name,k,o,T,b)},z.clean=function(k,o,T,b){M.cleanBasePlot(z.name,k,o,T,b)}},79136:function(ee){"use strict";ee.exports={calc:function(z,e){var M=[],k=e.value;typeof e._lastValue!="number"&&(e._lastValue=e.value);var o=e._lastValue,T=o;return e._hasDelta&&typeof e.delta.reference=="number"&&(T=e.delta.reference),M[0]={y:k,lastY:o,delta:k-T,relativeDelta:(k-T)/T},M}}},12096:function(ee){"use strict";ee.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(ee,z,e){"use strict";var M=e(3400),k=e(89864),o=e(86968).Q,T=e(31780),b=e(51272),h=e(12096),s=e(26332),t=e(25404),i=e(95936),n=e(42568);function r(a,l){function u(d,c){return M.coerce(a,l,k.gauge.steps,d,c)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}ee.exports={supplyDefaults:function(a,l,u,d){function c(P,C){return M.coerce(a,l,k,P,C)}o(l,d,c),c("mode"),l._hasNumber=l.mode.indexOf("number")!==-1,l._hasDelta=l.mode.indexOf("delta")!==-1,l._hasGauge=l.mode.indexOf("gauge")!==-1;var x=c("value");l._range=[0,typeof x=="number"?1.5*x:1];var g,p,v,m,y,_,f=new Array(2);function S(P,C){return M.coerce(v,m,k.gauge,P,C)}function w(P,C){return M.coerce(y,_,k.gauge.axis,P,C)}if(l._hasNumber&&(c("number.valueformat"),c("number.font.color",d.font.color),c("number.font.family",d.font.family),c("number.font.size"),l.number.font.size===void 0&&(l.number.font.size=h.defaultNumberFontSize,f[0]=!0),c("number.prefix"),c("number.suffix"),g=l.number.font.size),l._hasDelta&&(c("delta.font.color",d.font.color),c("delta.font.family",d.font.family),c("delta.font.size"),l.delta.font.size===void 0&&(l.delta.font.size=(l._hasNumber?.5:1)*(g||h.defaultNumberFontSize),f[1]=!0),c("delta.reference",l.value),c("delta.relative"),c("delta.valueformat",l.delta.relative?"2%":""),c("delta.increasing.symbol"),c("delta.increasing.color"),c("delta.decreasing.symbol"),c("delta.decreasing.color"),c("delta.position"),c("delta.prefix"),c("delta.suffix"),p=l.delta.font.size),l._scaleNumbers=(!l._hasNumber||f[0])&&(!l._hasDelta||f[1])||!1,c("title.font.color",d.font.color),c("title.font.family",d.font.family),c("title.font.size",.25*(g||p||h.defaultNumberFontSize)),c("title.text"),l._hasGauge){(v=a.gauge)||(v={}),m=T.newContainer(l,"gauge"),S("shape"),(l._isBullet=l.gauge.shape==="bullet")||c("title.align","center"),(l._isAngular=l.gauge.shape==="angular")||c("align","center"),S("bgcolor",d.paper_bgcolor),S("borderwidth"),S("bordercolor"),S("bar.color"),S("bar.line.color"),S("bar.line.width"),S("bar.thickness",h.valueThickness*(l.gauge.shape==="bullet"?.5:1)),b(v,m,{name:"steps",handleItemDefaults:r}),S("threshold.value"),S("threshold.thickness"),S("threshold.line.width"),S("threshold.line.color"),y={},v&&(y=v.axis||{}),_=T.newContainer(m,"axis"),w("visible"),l._range=w("range",l._range);var E={noAutotickangles:!0,outerTicks:!0};s(y,_,w,"linear"),n(y,_,w,"linear",E),i(y,_,w,"linear",E),t(y,_,w,E)}else c("title.align","center"),c("align","center"),l._isAngular=l._isBullet=!1;l._length=null}}},43480:function(ee,z,e){"use strict";ee.exports={moduleType:"trace",name:"indicator",basePlotModule:e(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e(89864),supplyDefaults:e(20424).supplyDefaults,calc:e(79136).calc,plot:e(97864),meta:{}}},97864:function(ee,z,e){"use strict";var M=e(33428),k=e(67756).qy,o=e(67756).Gz,T=e(3400),b=T.strScale,h=T.strTranslate,s=T.rad2deg,t=e(84284).MID_SHIFT,i=e(43616),n=e(12096),r=e(72736),a=e(54460),l=e(28336),u=e(37668),d=e(94724),c=e(76308),x={left:"start",center:"middle",right:"end"},g={left:0,center:.5,right:1},p=/[yzafpnµmkMGTPEZY]/;function v(w){return w&&w.duration>0}function m(w){w.each(function(E){c.stroke(M.select(this),E.line.color)}).each(function(E){c.fill(M.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function y(w,E,P){var C=w._fullLayout,O=T.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},E),R={type:"linear",_id:"x"+E._id},j={letter:"x",font:C.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function D(N,W){return T.coerce(O,R,d,N,W)}return l(O,R,D,j,C),u(O,R,D,j),R}function _(w,E,P){return[Math.min(E/w.width,P/w.height),w,E+"x"+P]}function f(w,E,P,C){var O=document.createElementNS("http://www.w3.org/2000/svg","text"),R=M.select(O);return R.text(w).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",w).call(r.convertToTspans,C).call(i.font,E),i.bBox(R.node())}function S(w,E,P,C,O,R){var j="_cache"+E;w[j]&&w[j].key===O||(w[j]={key:O,value:P});var D=T.aggNums(R,null,[w[j].value,C],2);return w[j].value=D,D}ee.exports=function(w,E,P,C){var O,R=w._fullLayout;v(P)&&C&&(O=C()),T.makeTraceGroups(R._indicatorlayer,E,"trace").each(function(j){var D,N,W,F,U,V=j[0].trace,te=M.select(this),J=V._hasGauge,K=V._isAngular,X=V._isBullet,Z=V.domain,$={w:R._size.w*(Z.x[1]-Z.x[0]),h:R._size.h*(Z.y[1]-Z.y[0]),l:R._size.l+R._size.w*Z.x[0],r:R._size.r+R._size.w*(1-Z.x[1]),t:R._size.t+R._size.h*(1-Z.y[1]),b:R._size.b+R._size.h*Z.y[0]},re=$.l+$.w/2,oe=$.t+$.h/2,ie=Math.min($.w/2,$.h),ue=n.innerRadius*ie,me=V.align||"center";if(N=oe,J){if(K&&(D=re,N=oe+ie/2,W=function(le){return function(ae,he){return[he/Math.sqrt(ae.width/2*(ae.width/2)+ae.height*ae.height),ae,he]}(le,.9*ue)}),X){var be=n.bulletPadding,ge=1-n.bulletNumberDomainSize+be;D=$.l+(ge+(1-ge)*g[me])*$.w,W=function(le){return _(le,(n.bulletNumberDomainSize-be)*$.w,$.h)}}}else D=$.l+g[me]*$.w,W=function(le){return _(le,$.w,$.h)};(function(le,ae,he,Se){var ke,Me,Ee,De=he[0].trace,fe=Se.numbersX,xe=Se.numbersY,we=De.align||"center",Oe=x[we],ze=Se.transitionOpts,Pe=Se.onComplete,Ue=T.ensureSingle(ae,"g","numbers"),Ve=[];De._hasNumber&&Ve.push("number"),De._hasDelta&&(Ve.push("delta"),De.delta.position==="left"&&Ve.reverse());var Ze=Ue.selectAll("text").data(Ve);function it(It,Dt,Ct,He){if(!It.match("s")||Ct>=0==He>=0||Dt(Ct).slice(-1).match(p)||Dt(He).slice(-1).match(p))return Dt;var We=It.slice().replace("s","f").replace(/\d+/,function(Ge){return parseInt(Ge)-1}),Be=y(le,{tickformat:We});return function(Ge){return Math.abs(Ge)<1?a.tickText(Be,Ge).text:Dt(Ge)}}Ze.enter().append("text"),Ze.attr("text-anchor",function(){return Oe}).attr("class",function(It){return It}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Ze.exit().remove();var tt,dt=De.mode+De.align;if(De._hasDelta&&(tt=function(){var It=y(le,{tickformat:De.delta.valueformat},De._range);It.setScale(),a.prepTicks(It);var Dt=function(Re){return a.tickText(It,Re).text},Ct=De.delta.suffix,He=De.delta.prefix,We=function(Re){return De.delta.relative?Re.relativeDelta:Re.delta},Be=function(Re,Fe){return Re===0||typeof Re!="number"||isNaN(Re)?"-":(Re>0?De.delta.increasing.symbol:De.delta.decreasing.symbol)+He+Fe(Re)+Ct},Ge=function(Re){return Re.delta>=0?De.delta.increasing.color:De.delta.decreasing.color};De._deltaLastValue===void 0&&(De._deltaLastValue=We(he[0]));var at=Ue.select("text.delta");function nt(){at.text(Be(We(he[0]),Dt)).call(c.fill,Ge(he[0])).call(r.convertToTspans,le)}return at.call(i.font,De.delta.font).call(c.fill,Ge({delta:De._deltaLastValue})),v(ze)?at.transition().duration(ze.duration).ease(ze.easing).tween("text",function(){var Re=M.select(this),Fe=We(he[0]),rt=De._deltaLastValue,Ye=it(De.delta.valueformat,Dt,rt,Fe),ct=o(rt,Fe);return De._deltaLastValue=Fe,function(pt){Re.text(Be(ct(pt),Ye)),Re.call(c.fill,Ge({delta:ct(pt)}))}}).each("end",function(){nt(),Pe&&Pe()}).each("interrupt",function(){nt(),Pe&&Pe()}):nt(),Me=f(Be(We(he[0]),Dt),De.delta.font,Oe,le),at}(),dt+=De.delta.position+De.delta.font.size+De.delta.font.family+De.delta.valueformat,dt+=De.delta.increasing.symbol+De.delta.decreasing.symbol,Ee=Me),De._hasNumber&&(function(){var It=y(le,{tickformat:De.number.valueformat},De._range);It.setScale(),a.prepTicks(It);var Dt=function(Ge){return a.tickText(It,Ge).text},Ct=De.number.suffix,He=De.number.prefix,We=Ue.select("text.number");function Be(){var Ge=typeof he[0].y=="number"?He+Dt(he[0].y)+Ct:"-";We.text(Ge).call(i.font,De.number.font).call(r.convertToTspans,le)}v(ze)?We.transition().duration(ze.duration).ease(ze.easing).each("end",function(){Be(),Pe&&Pe()}).each("interrupt",function(){Be(),Pe&&Pe()}).attrTween("text",function(){var Ge=M.select(this),at=o(he[0].lastY,he[0].y);De._lastValue=he[0].y;var nt=it(De.number.valueformat,Dt,he[0].lastY,he[0].y);return function(Re){Ge.text(He+nt(at(Re))+Ct)}}):Be(),ke=f(He+Dt(he[0].y)+Ct,De.number.font,Oe,le)}(),dt+=De.number.font.size+De.number.font.family+De.number.valueformat+De.number.suffix+De.number.prefix,Ee=ke),De._hasDelta&&De._hasNumber){var yt,vt,et=[(ke.left+ke.right)/2,(ke.top+ke.bottom)/2],Qe=[(Me.left+Me.right)/2,(Me.top+Me.bottom)/2],wt=.75*De.delta.font.size;De.delta.position==="left"&&(yt=S(De,"deltaPos",0,-1*(ke.width*g[De.align]+Me.width*(1-g[De.align])+wt),dt,Math.min),vt=et[1]-Qe[1],Ee={width:ke.width+Me.width+wt,height:Math.max(ke.height,Me.height),left:Me.left+yt,right:ke.right,top:Math.min(ke.top,Me.top+vt),bottom:Math.max(ke.bottom,Me.bottom+vt)}),De.delta.position==="right"&&(yt=S(De,"deltaPos",0,ke.width*(1-g[De.align])+Me.width*g[De.align]+wt,dt,Math.max),vt=et[1]-Qe[1],Ee={width:ke.width+Me.width+wt,height:Math.max(ke.height,Me.height),left:ke.left,right:Me.right+yt,top:Math.min(ke.top,Me.top+vt),bottom:Math.max(ke.bottom,Me.bottom+vt)}),De.delta.position==="bottom"&&(yt=null,vt=Me.height,Ee={width:Math.max(ke.width,Me.width),height:ke.height+Me.height,left:Math.min(ke.left,Me.left),right:Math.max(ke.right,Me.right),top:ke.bottom-ke.height,bottom:ke.bottom+Me.height}),De.delta.position==="top"&&(yt=null,vt=ke.top,Ee={width:Math.max(ke.width,Me.width),height:ke.height+Me.height,left:Math.min(ke.left,Me.left),right:Math.max(ke.right,Me.right),top:ke.bottom-ke.height-Me.height,bottom:ke.bottom}),tt.attr({dx:yt,dy:vt})}(De._hasNumber||De._hasDelta)&&Ue.attr("transform",function(){var It=Se.numbersScaler(Ee);dt+=It[2];var Dt,Ct=S(De,"numbersScale",1,It[0],dt,Math.min);De._scaleNumbers||(Ct=1),Dt=De._isAngular?xe-Ct*Ee.bottom:xe-Ct*(Ee.top+Ee.bottom)/2,De._numbersTop=Ct*Ee.top+Dt;var He=Ee[we];we==="center"&&(He=(Ee.left+Ee.right)/2);var We=fe-Ct*He;return We=S(De,"numbersTranslate",0,We,dt,Math.max),h(We,Dt)+b(Ct)})})(w,te,j,{numbersX:D,numbersY:N,numbersScaler:W,transitionOpts:P,onComplete:O}),J&&(F={range:V.gauge.axis.range,color:V.gauge.bgcolor,line:{color:V.gauge.bordercolor,width:0},thickness:1},U={range:V.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:V.gauge.bordercolor,width:V.gauge.borderwidth},thickness:1});var de=te.selectAll("g.angular").data(K?j:[]);de.exit().remove();var ve=te.selectAll("g.angularaxis").data(K?j:[]);ve.exit().remove(),K&&function(le,ae,he,Se){var ke,Me,Ee,De,fe=he[0].trace,xe=Se.size,we=Se.radius,Oe=Se.innerRadius,ze=Se.gaugeBg,Pe=Se.gaugeOutline,Ue=[xe.l+xe.w/2,xe.t+xe.h/2+we/2],Ve=Se.gauge,Ze=Se.layer,it=Se.transitionOpts,tt=Se.onComplete,dt=Math.PI/2;function yt(pt){var gt=fe.gauge.axis.range[0],ut=(pt-gt)/(fe.gauge.axis.range[1]-gt)*Math.PI-dt;return ut<-dt?-dt:ut>dt?dt:ut}function vt(pt){return M.svg.arc().innerRadius((Oe+we)/2-pt/2*(we-Oe)).outerRadius((Oe+we)/2+pt/2*(we-Oe)).startAngle(-dt)}function et(pt){pt.attr("d",function(gt){return vt(gt.thickness).startAngle(yt(gt.range[0])).endAngle(yt(gt.range[1]))()})}Ve.enter().append("g").classed("angular",!0),Ve.attr("transform",h(Ue[0],Ue[1])),Ze.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Ze.selectAll("g.xangularaxistick,path,text").remove(),(ke=y(le,fe.gauge.axis)).type="linear",ke.range=fe.gauge.axis.range,ke._id="xangularaxis",ke.ticklabeloverflow="allow",ke.setScale();var Qe=function(pt){return(ke.range[0]-pt.x)/(ke.range[1]-ke.range[0])*Math.PI+Math.PI},wt={},It=a.makeLabelFns(ke,0).labelStandoff;wt.xFn=function(pt){var gt=Qe(pt);return Math.cos(gt)*It},wt.yFn=function(pt){var gt=Qe(pt),ut=Math.sin(gt)>0?.2:1;return-Math.sin(gt)*(It+pt.fontSize*ut)+Math.abs(Math.cos(gt))*(pt.fontSize*t)},wt.anchorFn=function(pt){var gt=Qe(pt),ut=Math.cos(gt);return Math.abs(ut)<.1?"middle":ut>0?"start":"end"},wt.heightFn=function(pt,gt,ut){var Mt=Qe(pt);return-.5*(1+Math.sin(Mt))*ut};var Dt=function(pt){return h(Ue[0]+we*Math.cos(pt),Ue[1]-we*Math.sin(pt))};if(Ee=function(pt){return Dt(Qe(pt))},Me=a.calcTicks(ke),De=a.getTickSigns(ke)[2],ke.visible){De=ke.ticks==="inside"?-1:1;var Ct=(ke.linewidth||1)/2;a.drawTicks(le,ke,{vals:Me,layer:Ze,path:"M"+De*Ct+",0h"+De*ke.ticklen,transFn:function(pt){var gt=Qe(pt);return Dt(gt)+"rotate("+-s(gt)+")"}}),a.drawLabels(le,ke,{vals:Me,layer:Ze,transFn:Ee,labelFns:wt})}var He=[ze].concat(fe.gauge.steps),We=Ve.selectAll("g.bg-arc").data(He);We.enter().append("g").classed("bg-arc",!0).append("path"),We.select("path").call(et).call(m),We.exit().remove();var Be=vt(fe.gauge.bar.thickness),Ge=Ve.selectAll("g.value-arc").data([fe.gauge.bar]);Ge.enter().append("g").classed("value-arc",!0).append("path");var at,nt,Re,Fe=Ge.select("path");v(it)?(Fe.transition().duration(it.duration).ease(it.easing).each("end",function(){tt&&tt()}).each("interrupt",function(){tt&&tt()}).attrTween("d",(at=Be,nt=yt(he[0].lastY),Re=yt(he[0].y),function(){var pt=k(nt,Re);return function(gt){return at.endAngle(pt(gt))()}})),fe._lastValue=he[0].y):Fe.attr("d",typeof he[0].y=="number"?Be.endAngle(yt(he[0].y)):"M0,0Z"),Fe.call(m),Ge.exit().remove(),He=[];var rt=fe.gauge.threshold.value;(rt||rt===0)&&He.push({range:[rt,rt],color:fe.gauge.threshold.color,line:{color:fe.gauge.threshold.line.color,width:fe.gauge.threshold.line.width},thickness:fe.gauge.threshold.thickness});var Ye=Ve.selectAll("g.threshold-arc").data(He);Ye.enter().append("g").classed("threshold-arc",!0).append("path"),Ye.select("path").call(et).call(m),Ye.exit().remove();var ct=Ve.selectAll("g.gauge-outline").data([Pe]);ct.enter().append("g").classed("gauge-outline",!0).append("path"),ct.select("path").call(et).call(m),ct.exit().remove()}(w,0,j,{radius:ie,innerRadius:ue,gauge:de,layer:ve,size:$,gaugeBg:F,gaugeOutline:U,transitionOpts:P,onComplete:O});var pe=te.selectAll("g.bullet").data(X?j:[]);pe.exit().remove();var _e=te.selectAll("g.bulletaxis").data(X?j:[]);_e.exit().remove(),X&&function(le,ae,he,Se){var ke,Me,Ee,De,fe,xe=he[0].trace,we=Se.gauge,Oe=Se.layer,ze=Se.gaugeBg,Pe=Se.gaugeOutline,Ue=Se.size,Ve=xe.domain,Ze=Se.transitionOpts,it=Se.onComplete;we.enter().append("g").classed("bullet",!0),we.attr("transform",h(Ue.l,Ue.t)),Oe.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Oe.selectAll("g.xbulletaxistick,path,text").remove();var tt=Ue.h,dt=xe.gauge.bar.thickness*tt,yt=Ve.x[0],vt=Ve.x[0]+(Ve.x[1]-Ve.x[0])*(xe._hasNumber||xe._hasDelta?1-n.bulletNumberDomainSize:1);function et(We){We.attr("width",function(Be){return Math.max(0,ke.c2p(Be.range[1])-ke.c2p(Be.range[0]))}).attr("x",function(Be){return ke.c2p(Be.range[0])}).attr("y",function(Be){return .5*(1-Be.thickness)*tt}).attr("height",function(Be){return Be.thickness*tt})}(ke=y(le,xe.gauge.axis))._id="xbulletaxis",ke.domain=[yt,vt],ke.setScale(),Me=a.calcTicks(ke),Ee=a.makeTransTickFn(ke),De=a.getTickSigns(ke)[2],fe=Ue.t+Ue.h,ke.visible&&(a.drawTicks(le,ke,{vals:ke.ticks==="inside"?a.clipEnds(ke,Me):Me,layer:Oe,path:a.makeTickPath(ke,fe,De),transFn:Ee}),a.drawLabels(le,ke,{vals:Me,layer:Oe,transFn:Ee,labelFns:a.makeLabelFns(ke,fe)}));var Qe=[ze].concat(xe.gauge.steps),wt=we.selectAll("g.bg-bullet").data(Qe);wt.enter().append("g").classed("bg-bullet",!0).append("rect"),wt.select("rect").call(et).call(m),wt.exit().remove();var It=we.selectAll("g.value-bullet").data([xe.gauge.bar]);It.enter().append("g").classed("value-bullet",!0).append("rect"),It.select("rect").attr("height",dt).attr("y",(tt-dt)/2).call(m),v(Ze)?It.select("rect").transition().duration(Ze.duration).ease(Ze.easing).each("end",function(){it&&it()}).each("interrupt",function(){it&&it()}).attr("width",Math.max(0,ke.c2p(Math.min(xe.gauge.axis.range[1],he[0].y)))):It.select("rect").attr("width",typeof he[0].y=="number"?Math.max(0,ke.c2p(Math.min(xe.gauge.axis.range[1],he[0].y))):0),It.exit().remove();var Dt=he.filter(function(){return xe.gauge.threshold.value||xe.gauge.threshold.value===0}),Ct=we.selectAll("g.threshold-bullet").data(Dt);Ct.enter().append("g").classed("threshold-bullet",!0).append("line"),Ct.select("line").attr("x1",ke.c2p(xe.gauge.threshold.value)).attr("x2",ke.c2p(xe.gauge.threshold.value)).attr("y1",(1-xe.gauge.threshold.thickness)/2*tt).attr("y2",(1-(1-xe.gauge.threshold.thickness)/2)*tt).call(c.stroke,xe.gauge.threshold.line.color).style("stroke-width",xe.gauge.threshold.line.width),Ct.exit().remove();var He=we.selectAll("g.gauge-outline").data([Pe]);He.enter().append("g").classed("gauge-outline",!0).append("rect"),He.select("rect").call(et).call(m),He.exit().remove()}(w,0,j,{gauge:pe,layer:_e,size:$,gaugeBg:F,gaugeOutline:U,transitionOpts:P,onComplete:O});var Te=te.selectAll("text.title").data(j);Te.exit().remove(),Te.enter().append("text").classed("title",!0),Te.attr("text-anchor",function(){return X?x.right:x[V.title.align]}).text(V.title.text).call(i.font,V.title.font).call(r.convertToTspans,w),Te.attr("transform",function(){var le,ae=$.l+$.w*g[V.title.align],he=n.titlePadding,Se=i.bBox(Te.node());return J?(K&&(le=V.gauge.axis.visible?i.bBox(ve.node()).top-he-Se.bottom:$.t+$.h/2-ie/2-Se.bottom-he),X&&(le=N-(Se.top+Se.bottom)/2,ae=$.l-n.bulletPadding*$.w)):le=V._numbersTop-he-Se.bottom,h(ae,le)})})}},50048:function(ee,z,e){"use strict";var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),b=e(45464),h=e(92880).extendFlat,s=e(67824).overrideAll,t=ee.exports=s(h({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:o(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:h({},b.showlegend,{dflt:!1})},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:h({},b.hoverinfo)}),"calc","nested");t.flatshading.dflt=!0,t.lighting.facenormalsepsilon.dflt=0,t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},62624:function(ee,z,e){"use strict";var M=e(47128),k=e(3832).processGrid,o=e(3832).filter;ee.exports=function(T,b){b._len=Math.min(b.x.length,b.y.length,b.z.length,b.value.length),b._x=o(b.x,b._len),b._y=o(b.y,b._len),b._z=o(b.z,b._len),b._value=o(b.value,b._len);var h=k(b);b._gridFill=h.fill,b._Xs=h.Xs,b._Ys=h.Ys,b._Zs=h.Zs,b._len=h.len;for(var s=1/0,t=-1/0,i=0;i<b._len;i++){var n=b._value[i];s=Math.min(s,n),t=Math.max(t,n)}b._minValues=s,b._maxValues=t,b._vMin=b.isomin===void 0||b.isomin===null?s:b.isomin,b._vMax=b.isomax===void 0||b.isomin===null?t:b.isomax,M(T,b,{vals:[b._vMin,b._vMax],containerStr:"",cLetter:"c"})}},31460:function(ee,z,e){"use strict";var M=e(67792).gl_mesh3d,k=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,T=e(43080),b=e(8932).extractOpts,h=e(52094),s=function(a,l){for(var u=l.length-1;u>0;u--){var d=Math.min(l[u],l[u-1]),c=Math.max(l[u],l[u-1]);if(c>d&&d<a&&a<=c)return{id:u,distRatio:(c-a)/(c-d)}}return{id:0,distRatio:0}};function t(a,l,u){this.scene=a,this.uid=u,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var i=t.prototype;i.handlePick=function(a){if(a.object===this.mesh){var l=a.data.index,u=this.data._meshX[l],d=this.data._meshY[l],c=this.data._meshZ[l],x=this.data._Ys.length,g=this.data._Zs.length,p=s(u,this.data._Xs).id,v=s(d,this.data._Ys).id,m=s(c,this.data._Zs).id,y=a.index=m+g*v+g*x*p;a.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var _=this.data.hovertext||this.data.text;return o(_)&&_[y]!==void 0?a.textLabel=_[y]:_&&(a.textLabel=_),!0}},i.update=function(a){var l=this.scene,u=l.fullSceneLayout;function d(g,p,v,m){return p.map(function(y){return g.d2l(y,0,m)*v})}this.data=r(a);var c={positions:h(d(u.xaxis,a._meshX,l.dataScale[0],a.xcalendar),d(u.yaxis,a._meshY,l.dataScale[1],a.ycalendar),d(u.zaxis,a._meshZ,l.dataScale[2],a.zcalendar)),cells:h(a._meshI,a._meshJ,a._meshK),lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:T(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},x=b(a);c.vertexIntensity=a._meshIntensity,c.vertexIntensityBounds=[x.min,x.max],c.colormap=k(a),this.mesh.update(c)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(a){a._meshI=[],a._meshJ=[],a._meshK=[];var l,u,d,c,x,g,p,v=a.surface.show,m=a.spaceframe.show,y=a.surface.fill,_=a.spaceframe.fill,f=!1,S=!1,w=0,E=a._Xs,P=a._Ys,C=a._Zs,O=E.length,R=P.length,j=C.length,D=n.indexOf(a._gridFill.replace(/-/g,"").replace(/\+/g,"")),N=function(Oe,ze,Pe){switch(D){case 5:return Pe+j*ze+j*R*Oe;case 4:return Pe+j*Oe+j*O*ze;case 3:return ze+R*Pe+R*j*Oe;case 2:return ze+R*Oe+R*O*Pe;case 1:return Oe+O*Pe+O*j*ze;default:return Oe+O*ze+O*R*Pe}},W=a._minValues,F=a._maxValues,U=a._vMin,V=a._vMax;function te(Oe,ze,Pe){for(var Ue=g.length,Ve=u;Ve<Ue;Ve++)if(Oe===d[Ve]&&ze===c[Ve]&&Pe===x[Ve])return Ve;return-1}function J(){u=l}function K(){d=[],c=[],x=[],g=[],l=0,J()}function X(Oe,ze,Pe,Ue){return d.push(Oe),c.push(ze),x.push(Pe),g.push(Ue),++l-1}function Z(Oe,ze,Pe){for(var Ue=[],Ve=0;Ve<Oe.length;Ve++)Ue[Ve]=Oe[Ve]*(1-Pe)+Pe*ze[Ve];return Ue}function $(Oe){p=Oe}function re(Oe,ze){return Oe==="all"||Oe===null||Oe.indexOf(ze)>-1}function oe(Oe,ze){return Oe===null?ze:Oe}function ie(Oe,ze,Pe){J();var Ue,Ve,Ze,it=[ze],tt=[Pe];if(p>=1)it=[ze],tt=[Pe];else if(p>0){var dt=function(He,We){var Be=He[0],Ge=He[1],at=He[2],nt=function(ut,Mt,xt){for(var mt=[],Et=0;Et<ut.length;Et++)mt[Et]=(ut[Et]+Mt[Et]+xt[Et])/3;return mt}(Be,Ge,at),Re=Math.sqrt(1-p),Fe=Z(nt,Be,Re),rt=Z(nt,Ge,Re),Ye=Z(nt,at,Re),ct=We[0],pt=We[1],gt=We[2];return{xyzv:[[Be,Ge,rt],[rt,Fe,Be],[Ge,at,Ye],[Ye,rt,Ge],[at,Be,Fe],[Fe,Ye,at]],abc:[[ct,pt,-1],[-1,-1,ct],[pt,gt,-1],[-1,-1,pt],[gt,ct,-1],[-1,-1,gt]]}}(ze,Pe);it=dt.xyzv,tt=dt.abc}for(var yt=0;yt<it.length;yt++){ze=it[yt],Pe=tt[yt];for(var vt=[],et=0;et<3;et++){var Qe=ze[et][0],wt=ze[et][1],It=ze[et][2],Dt=ze[et][3],Ct=Pe[et]>-1?Pe[et]:te(Qe,wt,It);vt[et]=Ct>-1?Ct:X(Qe,wt,It,oe(Oe,Dt))}Ue=vt[0],Ve=vt[1],Ze=vt[2],a._meshI.push(Ue),a._meshJ.push(Ve),a._meshK.push(Ze),++w}}function ue(Oe,ze,Pe,Ue){var Ve=Oe[3];Ve<Pe&&(Ve=Pe),Ve>Ue&&(Ve=Ue);for(var Ze=(Oe[3]-Ve)/(Oe[3]-ze[3]+1e-9),it=[],tt=0;tt<4;tt++)it[tt]=(1-Ze)*Oe[tt]+Ze*ze[tt];return it}function me(Oe,ze,Pe){return Oe>=ze&&Oe<=Pe}function be(Oe){var ze=.001*(V-U);return Oe>=U-ze&&Oe<=V+ze}function ge(Oe){for(var ze=[],Pe=0;Pe<4;Pe++){var Ue=Oe[Pe];ze.push([a._x[Ue],a._y[Ue],a._z[Ue],a._value[Ue]])}return ze}var de=3;function ve(Oe,ze,Pe,Ue,Ve,Ze){Ze||(Ze=1),Pe=[-1,-1,-1];var it=!1,tt=[me(ze[0][3],Ue,Ve),me(ze[1][3],Ue,Ve),me(ze[2][3],Ue,Ve)];if(!tt[0]&&!tt[1]&&!tt[2])return!1;var dt=function(vt,et,Qe){return be(et[0][3])&&be(et[1][3])&&be(et[2][3])?(ie(vt,et,Qe),!0):Ze<de&&ve(vt,et,Qe,U,V,++Ze)};if(tt[0]&&tt[1]&&tt[2])return dt(Oe,ze,Pe)||it;var yt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(vt){if(tt[vt[0]]&&tt[vt[1]]&&!tt[vt[2]]){var et=ze[vt[0]],Qe=ze[vt[1]],wt=ze[vt[2]],It=ue(wt,et,Ue,Ve),Dt=ue(wt,Qe,Ue,Ve);it=dt(Oe,[Dt,It,et],[-1,-1,Pe[vt[0]]])||it,it=dt(Oe,[et,Qe,Dt],[Pe[vt[0]],Pe[vt[1]],-1])||it,yt=!0}}),yt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(vt){if(tt[vt[0]]&&!tt[vt[1]]&&!tt[vt[2]]){var et=ze[vt[0]],Qe=ze[vt[1]],wt=ze[vt[2]],It=ue(Qe,et,Ue,Ve),Dt=ue(wt,et,Ue,Ve);it=dt(Oe,[Dt,It,et],[-1,-1,Pe[vt[0]]])||it,yt=!0}}),it}function pe(Oe,ze,Pe,Ue){var Ve=!1,Ze=ge(ze),it=[me(Ze[0][3],Pe,Ue),me(Ze[1][3],Pe,Ue),me(Ze[2][3],Pe,Ue),me(Ze[3][3],Pe,Ue)];if(!(it[0]||it[1]||it[2]||it[3]))return Ve;if(it[0]&&it[1]&&it[2]&&it[3])return S&&(Ve=function(dt,yt,vt){var et=function(Qe,wt,It){ie(dt,[yt[Qe],yt[wt],yt[It]],[vt[Qe],vt[wt],vt[It]])};et(0,1,2),et(3,0,1),et(2,3,0),et(1,2,3)}(Oe,Ze,ze)||Ve),Ve;var tt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(dt){if(it[dt[0]]&&it[dt[1]]&&it[dt[2]]&&!it[dt[3]]){var yt=Ze[dt[0]],vt=Ze[dt[1]],et=Ze[dt[2]],Qe=Ze[dt[3]];if(S)Ve=ie(Oe,[yt,vt,et],[ze[dt[0]],ze[dt[1]],ze[dt[2]]])||Ve;else{var wt=ue(Qe,yt,Pe,Ue),It=ue(Qe,vt,Pe,Ue),Dt=ue(Qe,et,Pe,Ue);Ve=ie(null,[wt,It,Dt],[-1,-1,-1])||Ve}tt=!0}}),tt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(dt){if(it[dt[0]]&&it[dt[1]]&&!it[dt[2]]&&!it[dt[3]]){var yt=Ze[dt[0]],vt=Ze[dt[1]],et=Ze[dt[2]],Qe=Ze[dt[3]],wt=ue(et,yt,Pe,Ue),It=ue(et,vt,Pe,Ue),Dt=ue(Qe,vt,Pe,Ue),Ct=ue(Qe,yt,Pe,Ue);S?(Ve=ie(Oe,[yt,Ct,wt],[ze[dt[0]],-1,-1])||Ve,Ve=ie(Oe,[vt,It,Dt],[ze[dt[1]],-1,-1])||Ve):Ve=function(He,We,Be){var Ge=function(at,nt,Re){ie(null,[We[at],We[nt],We[Re]],[Be[at],Be[nt],Be[Re]])};Ge(0,1,2),Ge(2,3,0)}(0,[wt,It,Dt,Ct],[-1,-1,-1,-1])||Ve,tt=!0}}),tt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(dt){if(it[dt[0]]&&!it[dt[1]]&&!it[dt[2]]&&!it[dt[3]]){var yt=Ze[dt[0]],vt=Ze[dt[1]],et=Ze[dt[2]],Qe=Ze[dt[3]],wt=ue(vt,yt,Pe,Ue),It=ue(et,yt,Pe,Ue),Dt=ue(Qe,yt,Pe,Ue);S?(Ve=ie(Oe,[yt,wt,It],[ze[dt[0]],-1,-1])||Ve,Ve=ie(Oe,[yt,It,Dt],[ze[dt[0]],-1,-1])||Ve,Ve=ie(Oe,[yt,Dt,wt],[ze[dt[0]],-1,-1])||Ve):Ve=ie(null,[wt,It,Dt],[-1,-1,-1])||Ve,tt=!0}})),Ve}function _e(Oe,ze,Pe,Ue,Ve,Ze,it,tt,dt,yt,vt){var et=!1;return f&&(re(Oe,"A")&&(et=pe(null,[ze,Pe,Ue,Ze],yt,vt)||et),re(Oe,"B")&&(et=pe(null,[Pe,Ue,Ve,dt],yt,vt)||et),re(Oe,"C")&&(et=pe(null,[Pe,Ze,it,dt],yt,vt)||et),re(Oe,"D")&&(et=pe(null,[Ue,Ze,tt,dt],yt,vt)||et),re(Oe,"E")&&(et=pe(null,[Pe,Ue,Ze,dt],yt,vt)||et)),S&&(et=pe(Oe,[Pe,Ue,Ze,dt],yt,vt)||et),et}function Te(Oe,ze,Pe,Ue,Ve,Ze,it,tt){return[tt[0]===!0||ve(Oe,ge([ze,Pe,Ue]),[ze,Pe,Ue],Ze,it),tt[1]===!0||ve(Oe,ge([Ue,Ve,ze]),[Ue,Ve,ze],Ze,it)]}function le(Oe,ze,Pe,Ue,Ve,Ze,it,tt,dt){return tt?Te(Oe,ze,Pe,Ve,Ue,Ze,it,dt):Te(Oe,Pe,Ve,Ue,ze,Ze,it,dt)}function ae(Oe,ze,Pe,Ue,Ve,Ze,it){var tt,dt,yt,vt,et=!1,Qe=function(){et=ve(Oe,[tt,dt,yt],[-1,-1,-1],Ve,Ze)||et,et=ve(Oe,[yt,vt,tt],[-1,-1,-1],Ve,Ze)||et},wt=it[0],It=it[1],Dt=it[2];return wt&&(tt=Z(ge([N(ze,Pe-0,Ue-0)])[0],ge([N(ze-1,Pe-0,Ue-0)])[0],wt),dt=Z(ge([N(ze,Pe-0,Ue-1)])[0],ge([N(ze-1,Pe-0,Ue-1)])[0],wt),yt=Z(ge([N(ze,Pe-1,Ue-1)])[0],ge([N(ze-1,Pe-1,Ue-1)])[0],wt),vt=Z(ge([N(ze,Pe-1,Ue-0)])[0],ge([N(ze-1,Pe-1,Ue-0)])[0],wt),Qe()),It&&(tt=Z(ge([N(ze-0,Pe,Ue-0)])[0],ge([N(ze-0,Pe-1,Ue-0)])[0],It),dt=Z(ge([N(ze-0,Pe,Ue-1)])[0],ge([N(ze-0,Pe-1,Ue-1)])[0],It),yt=Z(ge([N(ze-1,Pe,Ue-1)])[0],ge([N(ze-1,Pe-1,Ue-1)])[0],It),vt=Z(ge([N(ze-1,Pe,Ue-0)])[0],ge([N(ze-1,Pe-1,Ue-0)])[0],It),Qe()),Dt&&(tt=Z(ge([N(ze-0,Pe-0,Ue)])[0],ge([N(ze-0,Pe-0,Ue-1)])[0],Dt),dt=Z(ge([N(ze-0,Pe-1,Ue)])[0],ge([N(ze-0,Pe-1,Ue-1)])[0],Dt),yt=Z(ge([N(ze-1,Pe-1,Ue)])[0],ge([N(ze-1,Pe-1,Ue-1)])[0],Dt),vt=Z(ge([N(ze-1,Pe-0,Ue)])[0],ge([N(ze-1,Pe-0,Ue-1)])[0],Dt),Qe()),et}function he(Oe,ze,Pe,Ue,Ve,Ze,it,tt,dt,yt,vt,et){var Qe=Oe;return et?(f&&Oe==="even"&&(Qe=null),_e(Qe,ze,Pe,Ue,Ve,Ze,it,tt,dt,yt,vt)):(f&&Oe==="odd"&&(Qe=null),_e(Qe,dt,tt,it,Ze,Ve,Ue,Pe,ze,yt,vt))}function Se(Oe,ze,Pe,Ue,Ve){for(var Ze=[],it=0,tt=0;tt<ze.length;tt++)for(var dt=ze[tt],yt=1;yt<j;yt++)for(var vt=1;vt<R;vt++)Ze.push(le(Oe,N(dt,vt-1,yt-1),N(dt,vt-1,yt),N(dt,vt,yt-1),N(dt,vt,yt),Pe,Ue,(dt+vt+yt)%2,Ve&&Ve[it]?Ve[it]:[])),it++;return Ze}function ke(Oe,ze,Pe,Ue,Ve){for(var Ze=[],it=0,tt=0;tt<ze.length;tt++)for(var dt=ze[tt],yt=1;yt<O;yt++)for(var vt=1;vt<j;vt++)Ze.push(le(Oe,N(yt-1,dt,vt-1),N(yt,dt,vt-1),N(yt-1,dt,vt),N(yt,dt,vt),Pe,Ue,(yt+dt+vt)%2,Ve&&Ve[it]?Ve[it]:[])),it++;return Ze}function Me(Oe,ze,Pe,Ue,Ve){for(var Ze=[],it=0,tt=0;tt<ze.length;tt++)for(var dt=ze[tt],yt=1;yt<R;yt++)for(var vt=1;vt<O;vt++)Ze.push(le(Oe,N(vt-1,yt-1,dt),N(vt-1,yt,dt),N(vt,yt-1,dt),N(vt,yt,dt),Pe,Ue,(vt+yt+dt)%2,Ve&&Ve[it]?Ve[it]:[])),it++;return Ze}function Ee(Oe,ze,Pe){for(var Ue=1;Ue<j;Ue++)for(var Ve=1;Ve<R;Ve++)for(var Ze=1;Ze<O;Ze++)he(Oe,N(Ze-1,Ve-1,Ue-1),N(Ze-1,Ve-1,Ue),N(Ze-1,Ve,Ue-1),N(Ze-1,Ve,Ue),N(Ze,Ve-1,Ue-1),N(Ze,Ve-1,Ue),N(Ze,Ve,Ue-1),N(Ze,Ve,Ue),ze,Pe,(Ze+Ve+Ue)%2)}function De(Oe,ze,Pe,Ue,Ve,Ze){for(var it=[],tt=0,dt=0;dt<ze.length;dt++)for(var yt=ze[dt],vt=1;vt<j;vt++)for(var et=1;et<R;et++)it.push(ae(Oe,yt,et,vt,Pe,Ue,Ve[dt],Ze&&Ze[tt]&&Ze[tt])),tt++;return it}function fe(Oe,ze,Pe,Ue,Ve,Ze){for(var it=[],tt=0,dt=0;dt<ze.length;dt++)for(var yt=ze[dt],vt=1;vt<O;vt++)for(var et=1;et<j;et++)it.push(ae(Oe,vt,yt,et,Pe,Ue,Ve[dt],Ze&&Ze[tt]&&Ze[tt])),tt++;return it}function xe(Oe,ze,Pe,Ue,Ve,Ze){for(var it=[],tt=0,dt=0;dt<ze.length;dt++)for(var yt=ze[dt],vt=1;vt<R;vt++)for(var et=1;et<O;et++)it.push(ae(Oe,et,vt,yt,Pe,Ue,Ve[dt],Ze&&Ze[tt]&&Ze[tt])),tt++;return it}function we(Oe,ze){for(var Pe=[],Ue=Oe;Ue<ze;Ue++)Pe.push(Ue);return Pe}return function(){K(),function(){for(var dt=0;dt<O;dt++)for(var yt=0;yt<R;yt++)for(var vt=0;vt<j;vt++){var et=N(dt,yt,vt);X(a._x[et],a._y[et],a._z[et],a._value[et])}}();var Oe=null;if(m&&_&&($(_),S=!0,Ee(Oe,U,V),S=!1),v&&y){$(y);for(var ze=a.surface.pattern,Pe=a.surface.count,Ue=0;Ue<Pe;Ue++){var Ve=Pe===1?.5:Ue/(Pe-1),Ze=(1-Ve)*U+Ve*V,it=Math.abs(Ze-W)>Math.abs(Ze-F)?[W,Ze]:[Ze,F];f=!0,Ee(ze,it[0],it[1]),f=!1}}var tt=[[Math.min(U,F),Math.max(U,F)],[Math.min(W,V),Math.max(W,V)]];["x","y","z"].forEach(function(dt){for(var yt=[],vt=0;vt<tt.length;vt++){var et=0,Qe=tt[vt][0],wt=tt[vt][1],It=a.slices[dt];if(It.show&&It.fill){$(It.fill);var Dt=[],Ct=[],He=[];if(It.locations.length)for(var We=0;We<It.locations.length;We++){var Be=s(It.locations[We],dt==="x"?E:dt==="y"?P:C);Be.distRatio===0?Dt.push(Be.id):Be.id>0&&(Ct.push(Be.id),dt==="x"?He.push([Be.distRatio,0,0]):dt==="y"?He.push([0,Be.distRatio,0]):He.push([0,0,Be.distRatio]))}else Dt=we(1,dt==="x"?O-1:dt==="y"?R-1:j-1);Ct.length>0&&(yt[et]=dt==="x"?De(Oe,Ct,Qe,wt,He,yt[et]):dt==="y"?fe(Oe,Ct,Qe,wt,He,yt[et]):xe(Oe,Ct,Qe,wt,He,yt[et]),et++),Dt.length>0&&(yt[et]=dt==="x"?Se(Oe,Dt,Qe,wt,yt[et]):dt==="y"?ke(Oe,Dt,Qe,wt,yt[et]):Me(Oe,Dt,Qe,wt,yt[et]),et++)}var Ge=a.caps[dt];Ge.show&&Ge.fill&&($(Ge.fill),yt[et]=dt==="x"?Se(Oe,[0,O-1],Qe,wt,yt[et]):dt==="y"?ke(Oe,[0,R-1],Qe,wt,yt[et]):Me(Oe,[0,j-1],Qe,wt,yt[et]),et++)}}),w===0&&K(),a._meshX=d,a._meshY=c,a._meshZ=x,a._meshIntensity=g,a._Xs=E,a._Ys=P,a._Zs=C}(),a}ee.exports={findNearestOnAxis:s,generateIsoMeshes:r,createIsosurfaceTrace:function(a,l){var u=a.glplot.gl,d=M({gl:u}),c=new t(a,d,l.uid);return d._trace=c,c.update(l),a.glplot.add(d),c}}},70548:function(ee,z,e){"use strict";var M=e(3400),k=e(24040),o=e(50048),T=e(27260);function b(h,s,t,i,n){var r=n("isomin"),a=n("isomax");a!=null&&r!=null&&r>a&&(s.isomin=null,s.isomax=null);var l=n("x"),u=n("y"),d=n("z"),c=n("value");l&&l.length&&u&&u.length&&d&&d.length&&c&&c.length?(k.getComponentMethod("calendars","handleTraceDefaults")(h,s,["x","y","z"],i),n("valuehoverformat"),["x","y","z"].forEach(function(x){n(x+"hoverformat");var g="caps."+x;n(g+".show")&&n(g+".fill");var p="slices."+x;n(p+".show")&&(n(p+".fill"),n(p+".locations"))}),n("spaceframe.show")&&n("spaceframe.fill"),n("surface.show")&&(n("surface.count"),n("surface.fill"),n("surface.pattern")),n("contour.show")&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(x){n(x)}),T(h,s,i,n,{prefix:"",cLetter:"c"}),s._length=null):s.visible=!1}ee.exports={supplyDefaults:function(h,s,t,i){b(h,s,0,i,function(n,r){return M.coerce(h,s,o,n,r)})},supplyIsoDefaults:b}},6296:function(ee,z,e){"use strict";ee.exports={attributes:e(50048),supplyDefaults:e(70548).supplyDefaults,calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(ee,z,e){"use strict";var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(16716),b=e(45464),h=e(92880).extendFlat;ee.exports=h({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"}),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},M("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:h({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:h({},T.lightposition.x,{dflt:1e5}),y:h({},T.lightposition.y,{dflt:1e5}),z:h({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:h({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:h({},b.hoverinfo,{editType:"calc"}),showlegend:h({},b.showlegend,{dflt:!1})})},1876:function(ee,z,e){"use strict";var M=e(47128);ee.exports=function(k,o){o.intensity&&M(k,o,{vals:o.intensity,containerStr:"",cLetter:"c"})}},576:function(ee,z,e){"use strict";var M=e(67792).gl_mesh3d,k=e(67792).delaunay_triangulate,o=e(67792).alpha_shape,T=e(67792).convex_hull,b=e(33040).parseColorScale,h=e(3400).isArrayOrTypedArray,s=e(43080),t=e(8932).extractOpts,i=e(52094);function n(c,x,g){this.scene=c,this.uid=g,this.mesh=x,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var r=n.prototype;function a(c){for(var x=[],g=c.length,p=0;p<g;p++)x[p]=s(c[p]);return x}function l(c,x,g,p){for(var v=[],m=x.length,y=0;y<m;y++)v[y]=c.d2l(x[y],0,p)*g;return v}function u(c){for(var x=[],g=c.length,p=0;p<g;p++)x[p]=Math.round(c[p]);return x}function d(c,x){for(var g=c.length,p=0;p<g;p++)if(c[p]<=-.5||c[p]>=x-.5)return!1;return!0}r.handlePick=function(c){if(c.object===this.mesh){var x=c.index=c.data.index;c.data._cellCenter?c.traceCoordinate=c.data.dataCoordinate:c.traceCoordinate=[this.data.x[x],this.data.y[x],this.data.z[x]];var g=this.data.hovertext||this.data.text;return h(g)&&g[x]!==void 0?c.textLabel=g[x]:g&&(c.textLabel=g),!0}},r.update=function(c){var x=this.scene,g=x.fullSceneLayout;this.data=c;var p,v=c.x.length,m=i(l(g.xaxis,c.x,x.dataScale[0],c.xcalendar),l(g.yaxis,c.y,x.dataScale[1],c.ycalendar),l(g.zaxis,c.z,x.dataScale[2],c.zcalendar));if(c.i&&c.j&&c.k){if(c.i.length!==c.j.length||c.j.length!==c.k.length||!d(c.i,v)||!d(c.j,v)||!d(c.k,v))return;p=i(u(c.i),u(c.j),u(c.k))}else p=c.alphahull===0?T(m):c.alphahull>0?o(c.alphahull,m):function(S,w){for(var E=["x","y","z"].indexOf(S),P=[],C=w.length,O=0;O<C;O++)P[O]=[w[O][(E+1)%3],w[O][(E+2)%3]];return k(P)}(c.delaunayaxis,m);var y={positions:m,cells:p,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:s(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};if(c.intensity){var _=t(c);this.color="#fff";var f=c.intensitymode;y[f+"Intensity"]=c.intensity,y[f+"IntensityBounds"]=[_.min,_.max],y.colormap=b(c)}else c.vertexcolor?(this.color=c.vertexcolor[0],y.vertexColors=a(c.vertexcolor)):c.facecolor?(this.color=c.facecolor[0],y.cellColors=a(c.facecolor)):(this.color=c.color,y.meshColor=s(c.color));this.mesh.update(y)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(c,x){var g=c.glplot.gl,p=M({gl:g}),v=new n(c,p,x.uid);return p._trace=v,v.update(x),c.glplot.add(p),v}},74212:function(ee,z,e){"use strict";var M=e(24040),k=e(3400),o=e(27260),T=e(52948);ee.exports=function(b,h,s,t){function i(r,a){return k.coerce(b,h,T,r,a)}function n(r){var a=r.map(function(l){var u=i(l);return u&&k.isArrayOrTypedArray(u)?u:null});return a.every(function(l){return l&&l.length===a[0].length})&&a}n(["x","y","z"])?(n(["i","j","k"]),(!h.i||h.j&&h.k)&&(!h.j||h.k&&h.i)&&(!h.k||h.i&&h.j)?(M.getComponentMethod("calendars","handleTraceDefaults")(b,h,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(r){i(r)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in b?(i("intensity"),i("intensitymode"),o(b,h,t,i,{prefix:"",cLetter:"c"})):(h.showscale=!1,"facecolor"in b?i("facecolor"):"vertexcolor"in b?i("vertexcolor"):i("color",s)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),h._length=null):h.visible=!1):h.visible=!1}},7404:function(ee,z,e){"use strict";ee.exports={attributes:e(52948),supplyDefaults:e(74212),calc:e(1876),colorbar:{min:"cmin",max:"cmax"},plot:e(576),moduleType:"trace",name:"mesh3d",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(ee,z,e){"use strict";var M=e(3400).extendFlat,k=e(52904),o=e(29736).axisHoverFormat,T=e(98192).u,b=e(55756),h=e(48164),s=h.INCREASING.COLOR,t=h.DECREASING.COLOR,i=k.line;function n(r){return{line:{color:M({},i.color,{dflt:r}),width:i.width,dash:T,editType:"style"},editType:"style"}}ee.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:M({},i.width,{}),dash:M({},T,{}),editType:"style"},increasing:n(s),decreasing:n(t),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:M({},b.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},42812:function(ee,z,e){"use strict";var M=e(3400),k=M._,o=e(54460),T=e(1220),b=e(39032).BADNUM;function h(t,i,n,r){return{o:t,h:i,l:n,c:r}}function s(t,i,n,r,a,l){for(var u=a.makeCalcdata(i,"open"),d=a.makeCalcdata(i,"high"),c=a.makeCalcdata(i,"low"),x=a.makeCalcdata(i,"close"),g=M.isArrayOrTypedArray(i.text),p=M.isArrayOrTypedArray(i.hovertext),v=!0,m=null,y=!!i.xperiodalignment,_=[],f=0;f<r.length;f++){var S=r[f],w=u[f],E=d[f],P=c[f],C=x[f];if(S!==b&&w!==b&&E!==b&&P!==b&&C!==b){C===w?m!==null&&C!==m&&(v=C>m):v=C>w,m=C;var O=l(w,E,P,C);O.pos=S,O.yc=(w+C)/2,O.i=f,O.dir=v?"increasing":"decreasing",O.x=O.pos,O.y=[P,E],y&&(O.orig_p=n[f]),g&&(O.tx=i.text[f]),p&&(O.htx=i.hovertext[f]),_.push(O)}else _.push({pos:S,empty:!0})}return i._extremes[a._id]=o.findExtremes(a,M.concat(c,d),{padded:!0}),_.length&&(_[0].t={labels:{open:k(t,"open:")+" ",high:k(t,"high:")+" ",low:k(t,"low:")+" ",close:k(t,"close:")+" "}}),_}ee.exports={calc:function(t,i){var n=o.getFromId(t,i.xaxis),r=o.getFromId(t,i.yaxis),a=function(x,g,p){var v=p._minDiff;if(!v){var m,y=x._fullData,_=[];for(v=1/0,m=0;m<y.length;m++){var f=y[m];if(f.type==="ohlc"&&f.visible===!0&&f.xaxis===g._id){_.push(f);var S=g.makeCalcdata(f,"x");f._origX=S;var w=T(p,g,"x",S).vals;f._xcalc=w;var E=M.distinctVals(w).minDiff;E&&isFinite(E)&&(v=Math.min(v,E))}}for(v===1/0&&(v=1),m=0;m<_.length;m++)_[m]._minDiff=v}return v*p.tickwidth}(t,n,i),l=i._minDiff;i._minDiff=null;var u=i._origX;i._origX=null;var d=i._xcalc;i._xcalc=null;var c=s(t,i,u,d,r,h);return i._extremes[n._id]=o.findExtremes(n,d,{vpad:l/2}),c.length?(M.extendFlat(c[0].t,{wHover:l/2,tickLen:a}),c):[{t:{empty:!0}}]},calcCommon:s}},23860:function(ee,z,e){"use strict";var M=e(3400),k=e(52744),o=e(31147),T=e(20279);function b(h,s,t,i){t(i+".line.color"),t(i+".line.width",s.line.width),t(i+".line.dash",s.line.dash)}ee.exports=function(h,s,t,i){function n(r,a){return M.coerce(h,s,T,r,a)}k(h,s,n,i)?(o(h,s,i,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),n("line.dash"),b(0,s,n,"increasing"),b(0,s,n,"decreasing"),n("text"),n("hovertext"),n("tickwidth"),i._requestRangeslider[s.xaxis]=!0):s.visible=!1}},18720:function(ee,z,e){"use strict";var M=e(54460),k=e(3400),o=e(93024),T=e(76308),b=e(3400).fillText,h=e(48164),s={increasing:h.INCREASING.SYMBOL,decreasing:h.DECREASING.SYMBOL};function t(r,a,l,u){var d,c,x=r.cd,g=r.xa,p=x[0].trace,v=x[0].t,m=p.type,y=m==="ohlc"?"l":"min",_=m==="ohlc"?"h":"max",f=v.bPos||0,S=function(F){return F.pos+f-a},w=v.bdPos||v.tickLen,E=v.wHover,P=Math.min(1,w/Math.abs(g.r2c(g.range[1])-g.r2c(g.range[0])));function C(F){var U=S(F);return o.inbox(U-E,U+E,d)}function O(F){var U=F[y],V=F[_];return U===V||o.inbox(U-l,V-l,d)}function R(F){return(C(F)+O(F))/2}d=r.maxHoverDistance-P,c=r.maxSpikeDistance-P;var j=o.getDistanceFunction(u,C,O,R);if(o.getClosest(x,j,r),r.index===!1)return null;var D=x[r.index];if(D.empty)return null;var N=p[D.dir],W=N.line.color;return T.opacity(W)&&N.line.width?r.color=W:r.color=N.fillcolor,r.x0=g.c2p(D.pos+f-w,!0),r.x1=g.c2p(D.pos+f+w,!0),r.xLabelVal=D.orig_p!==void 0?D.orig_p:D.pos,r.spikeDistance=R(D)*c/d,r.xSpike=g.c2p(D.pos,!0),r}function i(r,a,l,u){var d=r.cd,c=r.ya,x=d[0].trace,g=d[0].t,p=[],v=t(r,a,l,u);if(!v)return[];var m=d[v.index].hi||x.hoverinfo,y=m.split("+");if(m!=="all"&&y.indexOf("y")===-1)return[];for(var _=["high","open","close","low"],f={},S=0;S<_.length;S++){var w,E=_[S],P=x[E][v.index],C=c.c2p(P,!0);P in f?(w=f[P]).yLabel+="<br>"+g.labels[E]+M.hoverLabelText(c,P,x.yhoverformat):((w=k.extendFlat({},v)).y0=w.y1=C,w.yLabelVal=P,w.yLabel=g.labels[E]+M.hoverLabelText(c,P,x.yhoverformat),w.name="",p.push(w),f[P]=w)}return p}function n(r,a,l,u){var d=r.cd,c=r.ya,x=d[0].trace,g=d[0].t,p=t(r,a,l,u);if(!p)return[];var v=d[p.index],m=p.index=v.i,y=v.dir;function _(O){return g.labels[O]+M.hoverLabelText(c,x[O][m],x.yhoverformat)}var f=v.hi||x.hoverinfo,S=f.split("+"),w=f==="all",E=w||S.indexOf("y")!==-1,P=w||S.indexOf("text")!==-1,C=E?[_("open"),_("high"),_("low"),_("close")+"  "+s[y]]:[];return P&&b(v,x,C),p.extraText=C.join("<br>"),p.y0=p.y1=c.c2p(v.yc,!0),[p]}ee.exports={hoverPoints:function(r,a,l,u){return r.cd[0].trace.hoverlabel.split?i(r,a,l,u):n(r,a,l,u)},hoverSplit:i,hoverOnPoints:n}},65456:function(ee,z,e){"use strict";ee.exports={moduleType:"trace",name:"ohlc",basePlotModule:e(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:e(20279),supplyDefaults:e(23860),calc:e(42812).calc,plot:e(36664),style:e(14008),hoverPoints:e(18720).hoverPoints,selectPoints:e(97384)}},52744:function(ee,z,e){"use strict";var M=e(24040),k=e(3400);ee.exports=function(o,T,b,h){var s=b("x"),t=b("open"),i=b("high"),n=b("low"),r=b("close");if(b("hoverlabel.split"),M.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x"],h),t&&i&&n&&r){var a=Math.min(t.length,i.length,n.length,r.length);return s&&(a=Math.min(a,k.minRowLength(s))),T._length=a,a}}},36664:function(ee,z,e){"use strict";var M=e(33428),k=e(3400);ee.exports=function(o,T,b,h){var s=T.yaxis,t=T.xaxis,i=!!t.rangebreaks;k.makeTraceGroups(h,b,"trace ohlc").each(function(n){var r=M.select(this),a=n[0],l=a.t;if(a.trace.visible!==!0||l.empty)r.remove();else{var u=l.tickLen,d=r.selectAll("path").data(k.identity);d.enter().append("path"),d.exit().remove(),d.attr("d",function(c){if(c.empty)return"M0,0Z";var x=t.c2p(c.pos-u,!0),g=t.c2p(c.pos+u,!0),p=i?(x+g)/2:t.c2p(c.pos,!0);return"M"+x+","+s.c2p(c.o,!0)+"H"+p+"M"+p+","+s.c2p(c.h,!0)+"V"+s.c2p(c.l,!0)+"M"+g+","+s.c2p(c.c,!0)+"H"+p})}})}},97384:function(ee){"use strict";ee.exports=function(z,e){var M,k=z.cd,o=z.xaxis,T=z.yaxis,b=[],h=k[0].t.bPos||0;if(e===!1)for(M=0;M<k.length;M++)k[M].selected=0;else for(M=0;M<k.length;M++){var s=k[M];e.contains([o.c2p(s.pos+h),T.c2p(s.yc)],null,s.i,z)?(b.push({pointNumber:s.i,x:o.c2d(s.pos),y:T.c2d(s.yc)}),s.selected=1):s.selected=0}return b}},14008:function(ee,z,e){"use strict";var M=e(33428),k=e(43616),o=e(76308);ee.exports=function(T,b,h){var s=h||M.select(T).selectAll("g.ohlclayer").selectAll("g.trace");s.style("opacity",function(t){return t[0].trace.opacity}),s.each(function(t){var i=t[0].trace;M.select(this).selectAll("path").each(function(n){if(!n.empty){var r=i[n.dir].line;M.select(this).style("fill","none").call(o.stroke,r.color).call(k.dashLine,r.dash,r.width).style("opacity",i.selectedpoints&&!n.selected?.3:1)}})})}},72140:function(ee,z,e){"use strict";var M=e(92880).extendFlat,k=e(45464),o=e(25376),T=e(49084),b=e(21776).Ks,h=e(86968).u,s=M({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});ee.exports={domain:h({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:M({},k.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:b({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:o({editType:"calc"}),tickfont:o({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:s,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(ee,z,e){"use strict";var M=e(84888)._M,k=e(60268),o="parcats";z.name=o,z.plot=function(T,b,h,s){var t=M(T.calcdata,o);if(t.length){var i=t[0];k(T,i,h,s)}},z.clean=function(T,b,h,s){var t=s._has&&s._has("parcats"),i=b._has&&b._has("parcats");t&&!i&&s._paperdiv.selectAll(".parcats").remove()}},69136:function(ee,z,e){"use strict";var M=e(71688).wrap,k=e(94288).hasColorscale,o=e(47128),T=e(68944),b=e(43616),h=e(3400),s=e(38248);function t(r,a,l){r.valueInds.push(a),r.count+=l}function i(r,a,l){return{categoryInds:r,color:a,rawColor:l,valueInds:[],count:0}}function n(r,a,l){r.valueInds.push(a),r.count+=l}ee.exports=function(r,a){var l=h.filterVisible(a.dimensions);if(l.length===0)return[];var u,d,c,x=l.map(function(V){var te;if(V.categoryorder==="trace")te=null;else if(V.categoryorder==="array")te=V.categoryarray;else{te=T(V.values);for(var J=!0,K=0;K<te.length;K++)if(!s(te[K])){J=!1;break}te.sort(J?h.sorterAsc:void 0),V.categoryorder==="category descending"&&(te=te.reverse())}return function(X,Z){Z=Z==null?[]:Z.map(function(ge){return ge});var $={},re={},oe=[];Z.forEach(function(ge,de){$[ge]=0,re[ge]=de});for(var ie=0;ie<X.length;ie++){var ue,me=X[ie];$[me]===void 0?($[me]=1,ue=Z.push(me)-1,re[me]=ue):($[me]++,ue=re[me]),oe.push(ue)}var be=Z.map(function(ge){return $[ge]});return{uniqueValues:Z,uniqueCounts:be,inds:oe}}(V.values,te)});u=h.isArrayOrTypedArray(a.counts)?a.counts:[a.counts],function(V){var te,J=V.map(function(K){return K.displayindex});if(function(K){for(var X=new Array(K.length),Z=0;Z<K.length;Z++){if(K[Z]<0||K[Z]>=K.length||X[K[Z]]!==void 0)return!1;X[K[Z]]=!0}return!0}(J))for(te=0;te<V.length;te++)V[te]._displayindex=V[te].displayindex;else for(te=0;te<V.length;te++)V[te]._displayindex=te}(l),l.forEach(function(V,te){(function(J,K){J._categoryarray=K.uniqueValues,J.ticktext===null||J.ticktext===void 0?J._ticktext=[]:J._ticktext=J.ticktext.slice();for(var X=J._ticktext.length;X<K.uniqueValues.length;X++)J._ticktext.push(K.uniqueValues[X])})(V,x[te])});var g,p=a.line;p?(k(a,"line")&&o(r,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),g=b.tryColorscale(p)):g=h.identity;var v,m,y,_,f,S=l[0].values.length,w={},E=x.map(function(V){return V.inds});for(c=0,v=0;v<S;v++){var P=[];for(m=0;m<E.length;m++)P.push(E[m][v]);d=u[v%u.length],c+=d;var C=(y=v,_=void 0,f=void 0,h.isArrayOrTypedArray(p.color)?f=_=p.color[y%p.color.length]:_=p.color,{color:g(_),rawColor:f}),O=P+"-"+C.rawColor;w[O]===void 0&&(w[O]=i(P,C.color,C.rawColor)),n(w[O],v,d)}var R,j=l.map(function(V,te){return function(J,K,X,Z,$){return{dimensionInd:J,containerInd:K,displayInd:X,dimensionLabel:Z,count:$,categories:[],dragX:null}}(te,V._index,V._displayindex,V.label,c)});for(v=0;v<S;v++)for(d=u[v%u.length],m=0;m<j.length;m++){var D=j[m].containerInd,N=x[m].inds[v],W=j[m].categories;if(W[N]===void 0){var F=a.dimensions[D]._categoryarray[N],U=a.dimensions[D]._ticktext[N];W[N]={dimensionInd:m,categoryInd:R=N,categoryValue:F,displayInd:R,categoryLabel:U,valueInds:[],count:0,dragY:null}}t(W[N],v,d)}return M(function(V,te,J){var K=V.map(function(X){return X.categories.length}).reduce(function(X,Z){return Math.max(X,Z)});return{dimensions:V,paths:te,trace:void 0,maxCats:K,count:J}}(j,w,c))}},76671:function(ee,z,e){"use strict";var M=e(3400),k=e(94288).hasColorscale,o=e(27260),T=e(86968).Q,b=e(51272),h=e(72140),s=e(26284),t=e(38116).isTypedArraySpec;function i(n,r){function a(p,v){return M.coerce(n,r,h.dimensions,p,v)}var l=a("values"),u=a("visible");if(l&&l.length||(u=r.visible=!1),u){a("label"),a("displayindex",r._index);var d,c=n.categoryarray,x=M.isArrayOrTypedArray(c)&&c.length>0||t(c);x&&(d="array");var g=a("categoryorder",d);g==="array"?(a("categoryarray"),a("ticktext")):(delete n.categoryarray,delete n.ticktext),x||g!=="array"||(r.categoryorder="trace")}}ee.exports=function(n,r,a,l){function u(p,v){return M.coerce(n,r,h,p,v)}var d=b(n,r,{name:"dimensions",handleItemDefaults:i}),c=function(p,v,m,y,_){_("line.shape"),_("line.hovertemplate");var f=_("line.color",y.colorway[0]);if(k(p,"line")&&M.isArrayOrTypedArray(f)){if(f.length)return _("line.colorscale"),o(p,v,y,_,{prefix:"line.",cLetter:"c"}),f.length;v.line.color=m}return 1/0}(n,r,a,l,u);T(r,l,u),Array.isArray(d)&&d.length||(r.visible=!1),s(r,d,"values",c),u("hoveron"),u("hovertemplate"),u("arrangement"),u("bundlecolors"),u("sortpaths"),u("counts");var x={family:l.font.family,size:Math.round(l.font.size),color:l.font.color};M.coerceFont(u,"labelfont",x);var g={family:l.font.family,size:Math.round(l.font.size/1.2),color:l.font.color};M.coerceFont(u,"tickfont",g)}},22020:function(ee,z,e){"use strict";ee.exports={attributes:e(72140),supplyDefaults:e(76671),calc:e(69136),plot:e(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e(91800),categories:["noOpacity"],meta:{}}},51036:function(ee,z,e){"use strict";var M=e(33428),k=e(67756).Gz,o=e(36424),T=e(93024),b=e(3400),h=b.strTranslate,s=e(43616),t=e(49760),i=e(72736);function n(J,K,X,Z){var $=K._context.staticPlot,re=J.map(W.bind(0,K,X)),oe=Z.selectAll("g.parcatslayer").data([null]);oe.enter().append("g").attr("class","parcatslayer").style("pointer-events",$?"none":"all");var ie=oe.selectAll("g.trace.parcats").data(re,r),ue=ie.enter().append("g").attr("class","trace parcats");ie.attr("transform",function(le){return h(le.x,le.y)}),ue.append("g").attr("class","paths");var me=ie.select("g.paths").selectAll("path.path").data(function(le){return le.paths},r);me.attr("fill",function(le){return le.model.color});var be=me.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(le){return le.model.color}).attr("fill-opacity",0);p(be),me.attr("d",function(le){return le.svgD}),be.empty()||me.sort(l),me.exit().remove(),me.on("mouseover",u).on("mouseout",d).on("click",g),ue.append("g").attr("class","dimensions");var ge=ie.select("g.dimensions").selectAll("g.dimension").data(function(le){return le.dimensions},r);ge.enter().append("g").attr("class","dimension"),ge.attr("transform",function(le){return h(le.x,0)}),ge.exit().remove();var de=ge.selectAll("g.category").data(function(le){return le.categories},r),ve=de.enter().append("g").attr("class","category");de.attr("transform",function(le){return h(0,le.y)}),ve.append("rect").attr("class","catrect").attr("pointer-events","none"),de.select("rect.catrect").attr("fill","none").attr("width",function(le){return le.width}).attr("height",function(le){return le.height}),m(ve);var pe=de.selectAll("rect.bandrect").data(function(le){return le.bands},r);pe.each(function(){b.raiseToTop(this)}),pe.attr("fill",function(le){return le.color});var _e=pe.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(le){return le.color}).attr("fill-opacity",0);pe.attr("fill",function(le){return le.color}).attr("width",function(le){return le.width}).attr("height",function(le){return le.height}).attr("y",function(le){return le.y}).attr("cursor",function(le){return le.parcatsViewModel.arrangement==="fixed"?"default":le.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),y(_e),pe.exit().remove(),ve.append("text").attr("class","catlabel").attr("pointer-events","none");var Te=K._fullLayout.paper_bgcolor;de.select("text.catlabel").attr("text-anchor",function(le){return a(le)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",i.makeTextShadow(Te)).style("fill","rgb(0, 0, 0)").attr("x",function(le){return a(le)?le.width+5:-5}).attr("y",function(le){return le.height/2}).text(function(le){return le.model.categoryLabel}).each(function(le){s.font(M.select(this),le.parcatsViewModel.categorylabelfont),i.convertToTspans(M.select(this),K)}),ve.append("text").attr("class","dimlabel"),de.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(le){return le.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(le){return le.width/2}).attr("y",-5).text(function(le,ae){return ae===0?le.parcatsViewModel.model.dimensions[le.model.dimensionInd].dimensionLabel:null}).each(function(le){s.font(M.select(this),le.parcatsViewModel.labelfont)}),de.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",P),de.exit().remove(),ge.call(M.behavior.drag().origin(function(le){return{x:le.x,y:0}}).on("dragstart",C).on("drag",O).on("dragend",R)),ie.each(function(le){le.traceSelection=M.select(this),le.pathSelection=M.select(this).selectAll("g.paths").selectAll("path.path"),le.dimensionSelection=M.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ie.exit().remove()}function r(J){return J.key}function a(J){var K=J.parcatsViewModel.dimensions.length,X=J.parcatsViewModel.dimensions[K-1].model.dimensionInd;return J.model.dimensionInd===X}function l(J,K){return J.model.rawColor>K.model.rawColor?1:J.model.rawColor<K.model.rawColor?-1:0}function u(J){if(!J.parcatsViewModel.dragDimension&&J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){b.raiseToTop(this),v(M.select(this));var K=c(J),X=x(J);if(J.parcatsViewModel.graphDiv.emit("plotly_hover",{points:K,event:M.event,constraints:X}),J.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var Z,$,re,oe=M.mouse(this)[0],ie=J.parcatsViewModel.graphDiv,ue=J.parcatsViewModel.trace,me=ie._fullLayout,be=me._paperdiv.node().getBoundingClientRect(),ge=J.parcatsViewModel.graphDiv.getBoundingClientRect();for(re=0;re<J.leftXs.length-1;re++)if(J.leftXs[re]+J.dimWidths[re]-2<=oe&&oe<=J.leftXs[re+1]+2){var de=J.parcatsViewModel.dimensions[re],ve=J.parcatsViewModel.dimensions[re+1];Z=(de.x+de.width+ve.x)/2,$=(J.topYs[re]+J.topYs[re+1]+J.height)/2;break}var pe=J.parcatsViewModel.x+Z,_e=J.parcatsViewModel.y+$,Te=t.mostReadable(J.model.color,["black","white"]),le=J.model.count,ae=le/J.parcatsViewModel.model.count,he={countLabel:le,probabilityLabel:ae.toFixed(3)},Se=[];J.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Se.push(["Count:",he.countLabel].join(" ")),J.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Se.push(["P:",he.probabilityLabel].join(" "));var ke=Se.join("<br>"),Me=M.mouse(ie)[0];T.loneHover({trace:ue,x:pe-be.left+ge.left,y:_e-be.top+ge.top,text:ke,color:J.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Te,idealAlign:Me<pe?"right":"left",hovertemplate:(ue.line||{}).hovertemplate,hovertemplateLabels:he,eventData:[{data:ue._input,fullData:ue,count:le,probability:ae}]},{container:me._hoverlayer.node(),outerContainer:me._paper.node(),gd:ie})}}}function d(J){if(!J.parcatsViewModel.dragDimension&&(p(M.select(this)),T.loneUnhover(J.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),J.parcatsViewModel.pathSelection.sort(l),J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var K=c(J),X=x(J);J.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:K,event:M.event,constraints:X})}}function c(J){for(var K=[],X=j(J.parcatsViewModel),Z=0;Z<J.model.valueInds.length;Z++){var $=J.model.valueInds[Z];K.push({curveNumber:X,pointNumber:$})}return K}function x(J){for(var K={},X=J.parcatsViewModel.model.dimensions,Z=0;Z<X.length;Z++){var $=X[Z],re=$.categories[J.model.categoryInds[Z]];K[$.containerInd]=re.categoryValue}return J.model.rawColor!==void 0&&(K.color=J.model.rawColor),K}function g(J){if(J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var K=c(J),X=x(J);J.parcatsViewModel.graphDiv.emit("plotly_click",{points:K,event:M.event,constraints:X})}}function p(J){J.attr("fill",function(K){return K.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function v(J){J.attr("fill-opacity",.8).attr("stroke",function(K){return t.mostReadable(K.model.color,["black","white"])}).attr("stroke-width",.3)}function m(J){J.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function y(J){J.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function _(J){var K=J.parcatsViewModel.pathSelection,X=J.categoryViewModel.model.dimensionInd,Z=J.categoryViewModel.model.categoryInd;return K.filter(function($){return $.model.categoryInds[X]===Z&&$.model.color===J.color})}function f(J,K,X){var Z=M.select(J).datum(),$=Z.categoryViewModel.model,re=Z.parcatsViewModel.graphDiv,oe=M.select(J.parentNode).selectAll("rect.bandrect"),ie=[];oe.each(function(me){_(me).each(function(be){Array.prototype.push.apply(ie,c(be))})});var ue={};ue[$.dimensionInd]=$.categoryValue,re.emit(K,{points:ie,event:X,constraints:ue})}function S(J,K,X){var Z=M.select(J).datum(),$=Z.categoryViewModel.model,re=Z.parcatsViewModel.graphDiv,oe=_(Z),ie=[];oe.each(function(me){Array.prototype.push.apply(ie,c(me))});var ue={};ue[$.dimensionInd]=$.categoryValue,Z.rawColor!==void 0&&(ue.color=Z.rawColor),re.emit(K,{points:ie,event:X,constraints:ue})}function w(J,K,X){J._fullLayout._calcInverseTransform(J);var Z,$,re=J._fullLayout._invScaleX,oe=J._fullLayout._invScaleY,ie=M.select(X.parentNode).select("rect.catrect"),ue=ie.node().getBoundingClientRect(),me=ie.datum(),be=me.parcatsViewModel,ge=be.model.dimensions[me.model.dimensionInd],de=be.trace,ve=ue.top+ue.height/2;be.dimensions.length>1&&ge.displayInd===be.dimensions.length-1?(Z=ue.left,$="left"):(Z=ue.left+ue.width,$="right");var pe=me.model.count,_e=me.model.categoryLabel,Te=pe/me.parcatsViewModel.model.count,le={countLabel:pe,categoryLabel:_e,probabilityLabel:Te.toFixed(3)},ae=[];me.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&ae.push(["Count:",le.countLabel].join(" ")),me.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&ae.push(["P("+le.categoryLabel+"):",le.probabilityLabel].join(" "));var he=ae.join("<br>");return{trace:de,x:re*(Z-K.left),y:oe*(ve-K.top),text:he,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:$,hovertemplate:de.hovertemplate,hovertemplateLabels:le,eventData:[{data:de._input,fullData:de,count:pe,category:_e,probability:Te}]}}function E(J){if(!J.parcatsViewModel.dragDimension&&J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(M.mouse(this)[1]<-1)return;var K,X=J.parcatsViewModel.graphDiv,Z=X._fullLayout,$=Z._paperdiv.node().getBoundingClientRect(),re=J.parcatsViewModel.hoveron,oe=this;re==="color"?(function(ie){var ue=M.select(ie).datum(),me=_(ue);v(me),me.each(function(){b.raiseToTop(this)}),M.select(ie.parentNode).selectAll("rect.bandrect").filter(function(be){return be.color===ue.color}).each(function(){b.raiseToTop(this),M.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(oe),S(oe,"plotly_hover",M.event)):(function(ie){M.select(ie.parentNode).selectAll("rect.bandrect").each(function(ue){var me=_(ue);v(me),me.each(function(){b.raiseToTop(this)})}),M.select(ie.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(oe),f(oe,"plotly_hover",M.event)),J.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(re==="category"?K=w(X,$,oe):re==="color"?K=function(ie,ue,me){ie._fullLayout._calcInverseTransform(ie);var be,ge,de=ie._fullLayout._invScaleX,ve=ie._fullLayout._invScaleY,pe=me.getBoundingClientRect(),_e=M.select(me).datum(),Te=_e.categoryViewModel,le=Te.parcatsViewModel,ae=le.model.dimensions[Te.model.dimensionInd],he=le.trace,Se=pe.y+pe.height/2;le.dimensions.length>1&&ae.displayInd===le.dimensions.length-1?(be=pe.left,ge="left"):(be=pe.left+pe.width,ge="right");var ke=Te.model.categoryLabel,Me=_e.parcatsViewModel.model.count,Ee=0;_e.categoryViewModel.bands.forEach(function(Ze){Ze.color===_e.color&&(Ee+=Ze.count)});var De=Te.model.count,fe=0;le.pathSelection.each(function(Ze){Ze.model.color===_e.color&&(fe+=Ze.model.count)});var xe=Ee/Me,we=Ee/fe,Oe=Ee/De,ze={countLabel:Me,categoryLabel:ke,probabilityLabel:xe.toFixed(3)},Pe=[];Te.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Pe.push(["Count:",ze.countLabel].join(" ")),Te.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Pe.push("P(color \u2229 "+ke+"): "+ze.probabilityLabel),Pe.push("P("+ke+" | color): "+we.toFixed(3)),Pe.push("P(color | "+ke+"): "+Oe.toFixed(3)));var Ue=Pe.join("<br>"),Ve=t.mostReadable(_e.color,["black","white"]);return{trace:he,x:de*(be-ue.left),y:ve*(Se-ue.top),text:Ue,color:_e.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Ve,fontSize:10,idealAlign:ge,hovertemplate:he.hovertemplate,hovertemplateLabels:ze,eventData:[{data:he._input,fullData:he,category:ke,count:Me,probability:xe,categorycount:De,colorcount:fe,bandcolorcount:Ee}]}}(X,$,oe):re==="dimension"&&(K=function(ie,ue,me){var be=[];return M.select(me.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){be.push(w(ie,ue,this))}),be}(X,$,oe)),K&&T.loneHover(K,{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:X}))}}function P(J){var K=J.parcatsViewModel;K.dragDimension||(p(K.pathSelection),m(K.dimensionSelection.selectAll("g.category")),y(K.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(K.graphDiv._fullLayout._hoverlayer.node()),K.pathSelection.sort(l),K.hoverinfoItems.indexOf("skip")!==-1)||(J.parcatsViewModel.hoveron==="color"?S(this,"plotly_unhover",M.event):f(this,"plotly_unhover",M.event))}function C(J){J.parcatsViewModel.arrangement!=="fixed"&&(J.dragDimensionDisplayInd=J.model.displayInd,J.initialDragDimensionDisplayInds=J.parcatsViewModel.model.dimensions.map(function(K){return K.displayInd}),J.dragHasMoved=!1,J.dragCategoryDisplayInd=null,M.select(this).selectAll("g.category").select("rect.catrect").each(function(K){var X=M.mouse(this)[0],Z=M.mouse(this)[1];-2<=X&&X<=K.width+2&&-2<=Z&&Z<=K.height+2&&(J.dragCategoryDisplayInd=K.model.displayInd,J.initialDragCategoryDisplayInds=J.model.categories.map(function($){return $.displayInd}),K.model.dragY=K.y,b.raiseToTop(this.parentNode),M.select(this.parentNode).selectAll("rect.bandrect").each(function($){$.y<Z&&Z<=$.y+$.height&&(J.potentialClickBand=this)}))}),J.parcatsViewModel.dragDimension=J,T.loneUnhover(J.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function O(J){if(J.parcatsViewModel.arrangement!=="fixed"&&(J.dragHasMoved=!0,J.dragDimensionDisplayInd!==null)){var K=J.dragDimensionDisplayInd,X=K-1,Z=K+1,$=J.parcatsViewModel.dimensions[K];if(J.dragCategoryDisplayInd!==null){var re=$.categories[J.dragCategoryDisplayInd];re.model.dragY+=M.event.dy;var oe=re.model.dragY,ie=re.model.displayInd,ue=$.categories,me=ue[ie-1],be=ue[ie+1];me!==void 0&&oe<me.y+me.height/2&&(re.model.displayInd=me.model.displayInd,me.model.displayInd=ie),be!==void 0&&oe+re.height>be.y+be.height/2&&(re.model.displayInd=be.model.displayInd,be.model.displayInd=ie),J.dragCategoryDisplayInd=re.model.displayInd}if(J.dragCategoryDisplayInd===null||J.parcatsViewModel.arrangement==="freeform"){$.model.dragX=M.event.x;var ge=J.parcatsViewModel.dimensions[X],de=J.parcatsViewModel.dimensions[Z];ge!==void 0&&$.model.dragX<ge.x+ge.width&&($.model.displayInd=ge.model.displayInd,ge.model.displayInd=K),de!==void 0&&$.model.dragX+$.width>de.x&&($.model.displayInd=de.model.displayInd,de.model.displayInd=J.dragDimensionDisplayInd),J.dragDimensionDisplayInd=$.model.displayInd}V(J.parcatsViewModel),U(J.parcatsViewModel),N(J.parcatsViewModel),D(J.parcatsViewModel)}}function R(J){if(J.parcatsViewModel.arrangement!=="fixed"&&J.dragDimensionDisplayInd!==null){M.select(this).selectAll("text").attr("font-weight","normal");var K={},X=j(J.parcatsViewModel),Z=J.parcatsViewModel.model.dimensions.map(function(be){return be.displayInd}),$=J.initialDragDimensionDisplayInds.some(function(be,ge){return be!==Z[ge]});$&&Z.forEach(function(be,ge){var de=J.parcatsViewModel.model.dimensions[ge].containerInd;K["dimensions["+de+"].displayindex"]=be});var re=!1;if(J.dragCategoryDisplayInd!==null){var oe=J.model.categories.map(function(be){return be.displayInd});if(re=J.initialDragCategoryDisplayInds.some(function(be,ge){return be!==oe[ge]})){var ie=J.model.categories.slice().sort(function(be,ge){return be.displayInd-ge.displayInd}),ue=ie.map(function(be){return be.categoryValue}),me=ie.map(function(be){return be.categoryLabel});K["dimensions["+J.model.containerInd+"].categoryarray"]=[ue],K["dimensions["+J.model.containerInd+"].ticktext"]=[me],K["dimensions["+J.model.containerInd+"].categoryorder"]="array"}}J.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!J.dragHasMoved&&J.potentialClickBand&&(J.parcatsViewModel.hoveron==="color"?S(J.potentialClickBand,"plotly_click",M.event.sourceEvent):f(J.potentialClickBand,"plotly_click",M.event.sourceEvent)),J.model.dragX=null,J.dragCategoryDisplayInd!==null&&(J.parcatsViewModel.dimensions[J.dragDimensionDisplayInd].categories[J.dragCategoryDisplayInd].model.dragY=null,J.dragCategoryDisplayInd=null),J.dragDimensionDisplayInd=null,J.parcatsViewModel.dragDimension=null,J.dragHasMoved=null,J.potentialClickBand=null,V(J.parcatsViewModel),U(J.parcatsViewModel),M.transition().duration(300).ease("cubic-in-out").each(function(){N(J.parcatsViewModel,!0),D(J.parcatsViewModel,!0)}).each("end",function(){($||re)&&o.restyle(J.parcatsViewModel.graphDiv,K,[X])})}}function j(J){for(var K,X=J.graphDiv._fullData,Z=0;Z<X.length;Z++)if(J.key===X[Z].uid){K=Z;break}return K}function D(J,K){var X;K===void 0&&(K=!1),J.pathSelection.data(function(Z){return Z.paths},r),(X=J.pathSelection,K?X.transition():X).attr("d",function(Z){return Z.svgD})}function N(J,K){function X(oe){return K?oe.transition():oe}K===void 0&&(K=!1),J.dimensionSelection.data(function(oe){return oe.dimensions},r);var Z=J.dimensionSelection.selectAll("g.category").data(function(oe){return oe.categories},r);X(J.dimensionSelection).attr("transform",function(oe){return h(oe.x,0)}),X(Z).attr("transform",function(oe){return h(0,oe.y)}),Z.select(".dimlabel").text(function(oe,ie){return ie===0?oe.parcatsViewModel.model.dimensions[oe.model.dimensionInd].dimensionLabel:null}),Z.select(".catlabel").attr("text-anchor",function(oe){return a(oe)?"start":"end"}).attr("x",function(oe){return a(oe)?oe.width+5:-5}).each(function(oe){var ie,ue;a(oe)?(ie=oe.width+5,ue="start"):(ie=-5,ue="end"),M.select(this).selectAll("tspan").attr("x",ie).attr("text-anchor",ue)});var $=Z.selectAll("rect.bandrect").data(function(oe){return oe.bands},r),re=$.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(oe){return oe.color}).attr("fill-opacity",0);$.attr("fill",function(oe){return oe.color}).attr("width",function(oe){return oe.width}).attr("height",function(oe){return oe.height}).attr("y",function(oe){return oe.y}),y(re),$.each(function(){b.raiseToTop(this)}),$.exit().remove()}function W(J,K,X){var Z,$=X[0],re=K.margin||{l:80,r:80,t:100,b:80},oe=$.trace,ie=oe.domain,ue=K.width,me=K.height,be=Math.floor(ue*(ie.x[1]-ie.x[0])),ge=Math.floor(me*(ie.y[1]-ie.y[0])),de=ie.x[0]*ue+re.l,ve=K.height-ie.y[1]*K.height+re.t,pe=oe.line.shape;Z=oe.hoverinfo==="all"?["count","probability"]:(oe.hoverinfo||"").split("+");var _e={trace:oe,key:oe.uid,model:$,x:de,y:ve,width:be,height:ge,hoveron:oe.hoveron,hoverinfoItems:Z,arrangement:oe.arrangement,bundlecolors:oe.bundlecolors,sortpaths:oe.sortpaths,labelfont:oe.labelfont,categorylabelfont:oe.tickfont,pathShape:pe,dragDimension:null,margin:re,paths:[],dimensions:[],graphDiv:J,traceSelection:null,pathSelection:null,dimensionSelection:null};return $.dimensions&&(V(_e),U(_e)),_e}function F(J,K,X,Z,$){var re,oe,ie=[],ue=[];for(oe=0;oe<X.length-1;oe++)re=k(X[oe]+J[oe],J[oe+1]),ie.push(re($)),ue.push(re(1-$));var me="M "+J[0]+","+K[0];for(me+="l"+X[0]+",0 ",oe=1;oe<X.length;oe++)me+="C"+ie[oe-1]+","+K[oe-1]+" "+ue[oe-1]+","+K[oe]+" "+J[oe]+","+K[oe],me+="l"+X[oe]+",0 ";for(me+="l0,"+Z+" ",me+="l -"+X[X.length-1]+",0 ",oe=X.length-2;oe>=0;oe--)me+="C"+ue[oe]+","+(K[oe+1]+Z)+" "+ie[oe]+","+(K[oe]+Z)+" "+(J[oe]+X[oe])+","+(K[oe]+Z),me+="l-"+X[oe]+",0 ";return me+"Z"}function U(J){var K=J.dimensions,X=J.model,Z=K.map(function(ze){return ze.categories.map(function(Pe){return Pe.y})}),$=J.model.dimensions.map(function(ze){return ze.categories.map(function(Pe){return Pe.displayInd})}),re=J.model.dimensions.map(function(ze){return ze.displayInd}),oe=J.dimensions.map(function(ze){return ze.model.dimensionInd}),ie=K.map(function(ze){return ze.x}),ue=K.map(function(ze){return ze.width}),me=[];for(var be in X.paths)X.paths.hasOwnProperty(be)&&me.push(X.paths[be]);function ge(ze){var Pe=ze.categoryInds.map(function(Ue,Ve){return $[Ve][Ue]});return oe.map(function(Ue){return Pe[Ue]})}me.sort(function(ze,Pe){var Ue=ge(ze),Ve=ge(Pe);return J.sortpaths==="backward"&&(Ue.reverse(),Ve.reverse()),Ue.push(ze.valueInds[0]),Ve.push(Pe.valueInds[0]),J.bundlecolors&&(Ue.unshift(ze.rawColor),Ve.unshift(Pe.rawColor)),Ue<Ve?-1:Ue>Ve?1:0});for(var de=new Array(me.length),ve=K[0].model.count,pe=K[0].categories.map(function(ze){return ze.height}).reduce(function(ze,Pe){return ze+Pe}),_e=0;_e<me.length;_e++){var Te,le=me[_e];Te=ve>0?pe*(le.count/ve):0;for(var ae,he=new Array(Z.length),Se=0;Se<le.categoryInds.length;Se++){var ke=le.categoryInds[Se],Me=$[Se][ke],Ee=re[Se];he[Ee]=Z[Ee][Me],Z[Ee][Me]+=Te;var De=J.dimensions[Ee].categories[Me],fe=De.bands.length,xe=De.bands[fe-1];if(xe===void 0||le.rawColor!==xe.rawColor){var we=xe===void 0?0:xe.y+xe.height;De.bands.push({key:we,color:le.color,rawColor:le.rawColor,height:Te,width:De.width,count:le.count,y:we,categoryViewModel:De,parcatsViewModel:J})}else{var Oe=De.bands[fe-1];Oe.height+=Te,Oe.count+=le.count}}ae=J.pathShape==="hspline"?F(ie,he,ue,Te,.5):F(ie,he,ue,Te,0),de[_e]={key:le.valueInds[0],model:le,height:Te,leftXs:ie,topYs:he,dimWidths:ue,svgD:ae,parcatsViewModel:J}}J.paths=de}function V(J){var K=J.model.dimensions.map(function(oe){return{displayInd:oe.displayInd,dimensionInd:oe.dimensionInd}});K.sort(function(oe,ie){return oe.displayInd-ie.displayInd});var X=[];for(var Z in K){var $=K[Z].dimensionInd,re=J.model.dimensions[$];X.push(te(J,re))}J.dimensions=X}function te(J,K){var X,Z=J.model.dimensions.length,$=K.displayInd;X=40+(Z>1?(J.width-80-16)/(Z-1):0)*$;var re,oe,ie,ue,me,be=[],ge=J.model.maxCats,de=K.categories.length,ve=K.count,pe=J.height-8*(ge-1),_e=8*(ge-de)/2,Te=K.categories.map(function(le){return{displayInd:le.displayInd,categoryInd:le.categoryInd}});for(Te.sort(function(le,ae){return le.displayInd-ae.displayInd}),me=0;me<de;me++)ue=Te[me].categoryInd,oe=K.categories[ue],re=ve>0?oe.count/ve*pe:0,ie={key:oe.valueInds[0],model:oe,width:16,height:re,y:oe.dragY!==null?oe.dragY:_e,bands:[],parcatsViewModel:J},_e=_e+re+8,be.push(ie);return{key:K.dimensionInd,x:K.dragX!==null?K.dragX:X,y:0,width:16,model:K,categories:be,parcatsViewModel:J,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}ee.exports=function(J,K,X,Z){n(X,J,Z,K)}},60268:function(ee,z,e){"use strict";var M=e(51036);ee.exports=function(k,o,T,b){var h=k._fullLayout,s=h._paper,t=h._size;M(k,s,o,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},T,b)}},82296:function(ee,z,e){"use strict";var M=e(49084),k=e(94724),o=e(25376),T=e(86968).u,b=e(92880).extendFlat,h=e(31780).templatedArray;ee.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:o({editType:"plot"}),tickfont:o({editType:"plot"}),rangefont:o({editType:"plot"}),dimensions:h("dimension",{label:{valType:"string",editType:"plot"},tickvals:b({},k.tickvals,{editType:"plot"}),ticktext:b({},k.ticktext,{editType:"plot"}),tickformat:b({},k.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:b({editType:"calc"},M("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(ee,z,e){"use strict";var M=e(30140),k=e(33428),o=e(71688).keyFun,T=e(71688).repeat,b=e(3400).sorterAsc,h=e(3400).strTranslate,s=M.bar.snapRatio;function t(w,E){return w*(1-s)+E*s}var i=M.bar.snapClose;function n(w,E){return w*(1-i)+E*i}function r(w,E,P,C){if(function(te,J){for(var K=0;K<J.length;K++)if(te>=J[K][0]&&te<=J[K][1])return!0;return!1}(P,C))return P;var O=w?-1:1,R=0,j=E.length-1;if(O<0){var D=R;R=j,j=D}for(var N=E[R],W=N,F=R;O*F<O*j;F+=O){var U=F+O,V=E[U];if(O*P<O*n(N,V))return t(N,W);if(O*P<O*V||U===j)return t(V,N);W=N,N=V}}function a(w){w.attr("x",-M.bar.captureWidth/2).attr("width",M.bar.captureWidth)}function l(w){w.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(w){if(!w.brush.filterSpecified)return"0,"+w.height;for(var E,P,C,O=d(w.brush.filter.getConsolidated(),w.height),R=[0],j=O.length?O[0][0]:null,D=0;D<O.length;D++)P=(E=O[D])[1]-E[0],R.push(j),R.push(P),(C=D+1)<O.length&&(j=O[C][0]-E[1]);return R.push(w.height),R}function d(w,E){return w.map(function(P){return P.map(function(C){return Math.max(0,C*E)}).sort(b)})}function c(){k.select(document.body).style("cursor",null)}function x(w){w.attr("stroke-dasharray",u)}function g(w,E){var P=k.select(w).selectAll(".highlight, .highlight-shadow");x(E?P.transition().duration(M.bar.snapDuration).each("end",E):P)}function p(w,E){var P,C=w.brush,O=NaN,R={};if(C.filterSpecified){var j=w.height,D=C.filter.getConsolidated(),N=d(D,j),W=NaN,F=NaN,U=NaN;for(P=0;P<=N.length;P++){var V=N[P];if(V&&V[0]<=E&&E<=V[1]){W=P;break}if(F=P?P-1:NaN,V&&V[0]>E){U=P;break}}if(O=W,isNaN(O)&&(O=isNaN(F)||isNaN(U)?isNaN(F)?U:F:E-N[F][1]<N[U][0]-E?F:U),!isNaN(O)){var te=N[O],J=function($,re){var oe=M.bar.handleHeight;if(!(re>$[1]+oe||re<$[0]-oe))return re>=.9*$[1]+.1*$[0]?"n":re<=.9*$[0]+.1*$[1]?"s":"ns"}(te,E);J&&(R.interval=D[O],R.intervalPix=te,R.region=J)}}if(w.ordinal&&!R.region){var K=w.unitTickvals,X=w.unitToPaddedPx.invert(E);for(P=0;P<K.length;P++){var Z=[.25*K[Math.max(P-1,0)]+.75*K[P],.25*K[Math.min(P+1,K.length-1)]+.75*K[P]];if(X>=Z[0]&&X<=Z[1]){R.clickableOrdinalRange=Z;break}}}return R}function v(w,E){k.event.sourceEvent.stopPropagation();var P=E.height-k.mouse(w)[1]-2*M.verticalPadding,C=E.brush.svgBrush;C.wasDragged=!0,C._dragging=!0,C.grabbingBar?C.newExtent=[P-C.grabPoint,P+C.barLength-C.grabPoint].map(E.unitToPaddedPx.invert):C.newExtent=[C.startExtent,E.unitToPaddedPx.invert(P)].sort(b),E.brush.filterSpecified=!0,C.extent=C.stayingIntervals.concat([C.newExtent]),C.brushCallback(E),g(w.parentNode)}function m(w,E){var P=p(E,E.height-k.mouse(w)[1]-2*M.verticalPadding),C="crosshair";P.clickableOrdinalRange?C="pointer":P.region&&(C=P.region+"-resize"),k.select(document.body).style("cursor",C)}function y(w){w.on("mousemove",function(E){k.event.preventDefault(),E.parent.inBrushDrag||m(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||c()}).call(k.behavior.drag().on("dragstart",function(E){(function(P,C){k.event.sourceEvent.stopPropagation();var O=C.height-k.mouse(P)[1]-2*M.verticalPadding,R=C.unitToPaddedPx.invert(O),j=C.brush,D=p(C,O),N=D.interval,W=j.svgBrush;if(W.wasDragged=!1,W.grabbingBar=D.region==="ns",W.grabbingBar){var F=N.map(C.unitToPaddedPx);W.grabPoint=O-F[0]-M.verticalPadding,W.barLength=F[1]-F[0]}W.clickableOrdinalRange=D.clickableOrdinalRange,W.stayingIntervals=C.multiselect&&j.filterSpecified?j.filter.getConsolidated():[],N&&(W.stayingIntervals=W.stayingIntervals.filter(function(U){return U[0]!==N[0]&&U[1]!==N[1]})),W.startExtent=D.region?N[D.region==="s"?1:0]:R,C.parent.inBrushDrag=!0,W.brushStartCallback()})(this,E)}).on("drag",function(E){v(this,E)}).on("dragend",function(E){(function(P,C){var O=C.brush,R=O.filter,j=O.svgBrush;j._dragging||(m(P,C),v(P,C),C.brush.svgBrush.wasDragged=!1),j._dragging=!1,k.event.sourceEvent.stopPropagation();var D=j.grabbingBar;if(j.grabbingBar=!1,j.grabLocation=void 0,C.parent.inBrushDrag=!1,c(),!j.wasDragged)return j.wasDragged=void 0,j.clickableOrdinalRange?O.filterSpecified&&C.multiselect?j.extent.push(j.clickableOrdinalRange):(j.extent=[j.clickableOrdinalRange],O.filterSpecified=!0):D?(j.extent=j.stayingIntervals,j.extent.length===0&&f(O)):f(O),j.brushCallback(C),g(P.parentNode),void j.brushEndCallback(O.filterSpecified?R.getConsolidated():[]);var N=function(){R.set(R.getConsolidated())};if(C.ordinal){var W=C.unitTickvals;W[W.length-1]<W[0]&&W.reverse(),j.newExtent=[r(0,W,j.newExtent[0],j.stayingIntervals),r(1,W,j.newExtent[1],j.stayingIntervals)];var F=j.newExtent[1]>j.newExtent[0];j.extent=j.stayingIntervals.concat(F?[j.newExtent]:[]),j.extent.length||f(O),j.brushCallback(C),F?g(P.parentNode,N):(N(),g(P.parentNode))}else N();j.brushEndCallback(O.filterSpecified?R.getConsolidated():[])})(this,E)}))}function _(w,E){return w[0]-E[0]}function f(w){w.filterSpecified=!1,w.svgBrush.extent=[[-1/0,1/0]]}function S(w){for(var E,P=w.slice(),C=[],O=P.shift();O;){for(E=O.slice();(O=P.shift())&&O[0]<=E[1];)E[1]=Math.max(E[1],O[1]);C.push(E)}return C.length===1&&C[0][0]>C[0][1]&&(C=[]),C}ee.exports={makeBrush:function(w,E,P,C,O,R){var j,D=function(){var N,W,F=[];return{set:function(U){(F=U.map(function(V){return V.slice().sort(b)}).sort(_)).length===1&&F[0][0]===-1/0&&F[0][1]===1/0&&(F=[[0,-1]]),N=S(F),W=F.reduce(function(V,te){return[Math.min(V[0],te[0]),Math.max(V[1],te[1])]},[1/0,-1/0])},get:function(){return F.slice()},getConsolidated:function(){return N},getBounds:function(){return W}}}();return D.set(P),{filter:D,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:C,brushCallback:(j=O,function(N){var W=N.brush,F=function(V){return V.svgBrush.extent.map(function(te){return te.slice()})}(W),U=F.slice();W.filter.set(U),j()}),brushEndCallback:R}}},ensureAxisBrush:function(w,E,P){var C=w.selectAll("."+M.cn.axisBrush).data(T,o);C.enter().append("g").classed(M.cn.axisBrush,!0),function(O,R,j){var D=j._context.staticPlot,N=O.selectAll(".background").data(T);N.enter().append("rect").classed("background",!0).call(a).call(l).style("pointer-events",D?"none":"auto").attr("transform",h(0,M.verticalPadding)),N.call(y).attr("height",function(U){return U.height-M.verticalPadding});var W=O.selectAll(".highlight-shadow").data(T);W.enter().append("line").classed("highlight-shadow",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width+M.bar.strokeWidth).attr("stroke",R).attr("opacity",M.bar.strokeOpacity).attr("stroke-linecap","butt"),W.attr("y1",function(U){return U.height}).call(x);var F=O.selectAll(".highlight").data(T);F.enter().append("line").classed("highlight",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width-M.bar.strokeWidth).attr("stroke",M.bar.fillColor).attr("opacity",M.bar.fillOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(U){return U.height}).call(x)}(C,E,P)},cleanRanges:function(w,E){if(Array.isArray(w[0])?(w=w.map(function(C){return C.sort(b)}),w=E.multiselect?S(w.sort(_)):[w[0]]):w=[w.sort(b)],E.tickvals){var P=E.tickvals.slice().sort(b);if(!(w=w.map(function(C){var O=[r(0,P,C[0],[]),r(1,P,C[1],[])];if(O[1]>O[0])return O}).filter(function(C){return C})).length)return}return w.length>1?w:w[0]}}},61664:function(ee,z,e){"use strict";ee.exports={attributes:e(82296),supplyDefaults:e(60664),calc:e(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(ee,z,e){"use strict";var M=e(33428),k=e(84888)._M,o=e(24196),T=e(9616);z.name="parcoords",z.plot=function(b){var h=k(b.calcdata,"parcoords")[0];h.length&&o(b,h)},z.clean=function(b,h,s,t){var i=t._has&&t._has("parcoords"),n=h._has&&h._has("parcoords");i&&!n&&(t._paperdiv.selectAll(".parcoords").remove(),t._glimages.selectAll("*").remove())},z.toSVG=function(b){var h=b._fullLayout._glimages,s=M.select(b).selectAll(".svg-container");s.filter(function(t,i){return i===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this,i=t.toDataURL("image/png");h.append("svg:image").attr({xmlns:T.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:t.style.width,height:t.style.height})}),window.setTimeout(function(){M.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(ee,z,e){"use strict";var M=e(3400).isArrayOrTypedArray,k=e(8932),o=e(71688).wrap;ee.exports=function(T,b){var h,s;return k.hasColorscale(b,"line")&&M(b.line.color)?(h=b.line.color,s=k.extractOpts(b.line).colorscale,k.calc(T,b,{vals:h,containerStr:"line",cLetter:"c"})):(h=function(t){for(var i=new Array(t),n=0;n<t;n++)i[n]=.5;return i}(b._length),s=[[0,b.line.color],[1,b.line.color]]),o({lineColor:h,cscale:s})}},30140:function(ee){"use strict";ee.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(ee,z,e){"use strict";var M=e(3400),k=e(94288).hasColorscale,o=e(27260),T=e(86968).Q,b=e(51272),h=e(54460),s=e(82296),t=e(71864),i=e(30140).maxDimensionCount,n=e(26284);function r(a,l,u,d){function c(m,y){return M.coerce(a,l,s.dimensions,m,y)}var x=c("values"),g=c("visible");if(x&&x.length||(g=l.visible=!1),g){c("label"),c("tickvals"),c("ticktext"),c("tickformat");var p=c("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:p},h.setConvert(l._ax,d.layout),c("multiselect");var v=c("constraintrange");v&&(l.constraintrange=t.cleanRanges(v,l))}}ee.exports=function(a,l,u,d){function c(m,y){return M.coerce(a,l,s,m,y)}var x=a.dimensions;Array.isArray(x)&&x.length>i&&(M.log("parcoords traces support up to "+i+" dimensions at the moment"),x.splice(i));var g=b(a,l,{name:"dimensions",layout:d,handleItemDefaults:r}),p=function(m,y,_,f,S){var w=S("line.color",_);if(k(m,"line")&&M.isArrayOrTypedArray(w)){if(w.length)return S("line.colorscale"),o(m,y,f,S,{prefix:"line.",cLetter:"c"}),w.length;y.line.color=_}return 1/0}(a,l,u,d,c);T(l,d,c),Array.isArray(g)&&g.length||(l.visible=!1),n(l,g,"values",p);var v={family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color};M.coerceFont(c,"labelfont",v),M.coerceFont(c,"tickfont",v),M.coerceFont(c,"rangefont",v),c("labelangle"),c("labelside"),c("unselected.line.color"),c("unselected.line.opacity")}},95724:function(ee,z,e){"use strict";var M=e(3400).isTypedArray;z.convertTypedArray=function(k){return M(k)?Array.prototype.slice.call(k):k},z.isOrdinal=function(k){return!!k.tickvals},z.isVisible=function(k){return k.visible||!("visible"in k)}},29928:function(ee,z,e){"use strict";var M=e(61664);M.plot=e(24196),ee.exports=M},51352:function(ee,z,e){"use strict";var M=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),k=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),o=e(30140).maxDimensionCount,T=e(3400),b=1e-6,h=new Uint8Array(4),s=new Uint8Array(4),t={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(g,p,v,m,y){var _=g._gl;_.enable(_.SCISSOR_TEST),_.scissor(p,v,m,y),g.clear({color:[0,0,0,0],depth:1})}function n(g,p,v,m,y,_){var f=_.key;v.drawCompleted||(function(S){S.read({x:0,y:0,width:1,height:1,data:h})}(g),v.drawCompleted=!0),function S(w){var E=Math.min(m,y-w*m);w===0&&(window.cancelAnimationFrame(v.currentRafs[f]),delete v.currentRafs[f],i(g,_.scissorX,_.scissorY,_.scissorWidth,_.viewBoxSize[1])),v.clearOnly||(_.count=2*E,_.offset=2*w*m,p(_),w*m+E<y&&(v.currentRafs[f]=window.requestAnimationFrame(function(){S(w+1)})),v.drawCompleted=!1)}(0)}function r(g,p){for(var v=new Array(256),m=0;m<256;m++)v[m]=g(m/255).concat(p);return v}function a(g,p){return(g>>>8*p)%256/255}function l(g,p,v){for(var m=new Array(8*p),y=0,_=0;_<p;_++)for(var f=0;f<2;f++)for(var S=0;S<4;S++){var w=4*g+S,E=v[64*_+w];w===63&&f===0&&(E*=-1),m[y++]=E}return m}function u(g){var p="0"+g;return p.substr(p.length-2)}function d(g){return g<o?"p"+u(g+1)+"_"+u(g+4):"colors"}function c(g,p,v,m,y,_,f,S,w,E,P,C,O,R){for(var j=[[],[]],D=0;D<64;D++)j[0][D]=D===y?1:0,j[1][D]=D===_?1:0;f*=R,S*=R,w*=R,E*=R;var N=g.lines.canvasOverdrag*R,W=g.domain,F=g.canvasWidth*R,U=g.canvasHeight*R,V=g.pad.l*R,te=g.pad.b*R,J=g.layoutHeight*R,K=g.layoutWidth*R,X=g.deselectedLines.color,Z=g.deselectedLines.opacity;return T.extendFlat({key:P,resolution:[F,U],viewBoxPos:[f+N,S],viewBoxSize:[w,E],i0:y,i1:_,dim0A:j[0].slice(0,16),dim0B:j[0].slice(16,32),dim0C:j[0].slice(32,48),dim0D:j[0].slice(48,64),dim1A:j[1].slice(0,16),dim1B:j[1].slice(16,32),dim1C:j[1].slice(32,48),dim1D:j[1].slice(48,64),drwLayer:C,contextColor:[X[0]/255,X[1]/255,X[2]/255,Z!=="auto"?X[3]*Z:Math.max(.00392156862745098,Math.pow(1/g.lines.color.length,.3333333333333333))],scissorX:(m===p?0:f+N)+(V-N)+K*W.x[0],scissorWidth:(m===v?F-f+N:w+.5)+(m===p?f+N:0),scissorY:S+te+J*W.y[0],scissorHeight:E,viewportX:V-N+K*W.x[0],viewportY:te+J*W.y[0],viewportWidth:F,viewportHeight:U},O)}function x(g){var p=2047,v=Math.max(0,Math.floor(g[0]*p),0),m=Math.min(p,Math.ceil(g[1]*p),p);return[Math.min(v,m),Math.max(v,m)]}ee.exports=function(g,p){var v,m,y,_,f,S=p.context,w=p.pick,E=p.regl,P=E._gl,C=P.getParameter(P.ALIASED_LINE_WIDTH_RANGE),O=Math.max(C[0],Math.min(C[1],p.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},j=function(U){for(var V={},te=0;te<=o;te+=4)V[d(te)]=U.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return V}(E),D=E.texture(t),N=[];F(p);var W=E({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:M,frag:k,primitive:"lines",lineWidth:O,attributes:j,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:D,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function F(U){v=U.model,m=U.viewModel,y=m.dimensions.slice(),_=y[0]?y[0].values.length:0;var V=v.lines,te=w?V.color.map(function(K,X){return X/V.color.length}):V.color,J=function(K,X,Z){for(var $,re=new Array(K*(o+4)),oe=0,ie=0;ie<K;ie++){for(var ue=0;ue<o;ue++)re[oe++]=ue<X.length?X[ue].paddedUnitValues[ie]:.5;re[oe++]=a(ie,2),re[oe++]=a(ie,1),re[oe++]=a(ie,0),re[oe++]=($=Z[ie],Math.max(b,Math.min(.999999,$)))}return re}(_,y,te);(function(K,X,Z){for(var $=0;$<=o;$+=4)K[d($)](l($/4,X,Z))})(j,_,J),S||w||(D=E.texture(T.extendFlat({data:r(v.unitToColor,255)},t)))}return{render:function(U,V,te){var J,K,X,Z=U.length,$=1/0,re=-1/0;for(J=0;J<Z;J++)U[J].dim0.canvasX<$&&($=U[J].dim0.canvasX,K=J),U[J].dim1.canvasX>re&&(re=U[J].dim1.canvasX,X=J);Z===0&&i(E,0,0,v.canvasWidth,v.canvasHeight);var oe=function(Te){var le,ae,he,Se=[[],[]];for(he=0;he<64;he++){var ke=!Te&&he<y.length?y[he].brush.filter.getBounds():[-1/0,1/0];Se[0][he]=ke[0],Se[1][he]=ke[1]}var Me=new Array(16384);for(le=0;le<16384;le++)Me[le]=255;if(!Te)for(le=0;le<y.length;le++){var Ee=le%8,De=(le-Ee)/8,fe=Math.pow(2,Ee),xe=y[le].brush.filter.get();if(!(xe.length<2)){var we=x(xe[0])[1];for(ae=1;ae<xe.length;ae++){var Oe=x(xe[ae]);for(he=we+1;he<Oe[0];he++)Me[8*he+De]&=~fe;we=Math.max(we,Oe[1])}}}var ze={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Me};return f?f(ze):f=E.texture(ze),{maskTexture:f,maskHeight:2048,loA:Se[0].slice(0,16),loB:Se[0].slice(16,32),loC:Se[0].slice(32,48),loD:Se[0].slice(48,64),hiA:Se[1].slice(0,16),hiB:Se[1].slice(16,32),hiC:Se[1].slice(32,48),hiD:Se[1].slice(48,64)}}(S);for(J=0;J<Z;J++){var ie=U[J],ue=ie.dim0.crossfilterDimensionIndex,me=ie.dim1.crossfilterDimensionIndex,be=ie.canvasX,ge=ie.canvasY,de=be+ie.panelSizeX,ve=ie.plotGlPixelRatio;if(V||!N[ue]||N[ue][0]!==be||N[ue][1]!==de){N[ue]=[be,de];var pe=c(v,K,X,J,ue,me,be,ge,ie.panelSizeX,ie.panelSizeY,ie.dim0.crossfilterDimensionIndex,S?0:w?2:1,oe,ve);R.clearOnly=te;var _e=V?v.lines.blockLineCount:_;n(E,W,R,_e,_,pe)}}},readPixel:function(U,V){return E.read({x:U,y:V,width:1,height:1,data:s}),s},readPixels:function(U,V,te,J){var K=new Uint8Array(4*te*J);return E.read({x:U,y:V,width:te,height:J,data:K}),K},destroy:function(){for(var U in g.style["pointer-events"]="none",D.destroy(),f&&f.destroy(),j)j[U].destroy()},update:F}}},26284:function(ee){"use strict";ee.exports=function(z,e,M,k){var o,T;for(k||(k=1/0),o=0;o<e.length;o++)(T=e[o]).visible&&(k=Math.min(k,T[M].length));for(k===1/0&&(k=0),z._length=k,o=0;o<e.length;o++)(T=e[o]).visible&&(T._length=k);return k}},36336:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=k.isArrayOrTypedArray,T=k.numberFormat,b=e(96824),h=e(54460),s=k.strRotate,t=k.strTranslate,i=e(72736),n=e(43616),r=e(8932),a=e(71688),l=a.keyFun,u=a.repeat,d=a.unwrap,c=e(95724),x=e(30140),g=e(71864),p=e(51352);function v(W,F,U){return k.aggNums(W,null,F,U)}function m(W,F){return _(v(Math.min,W,F),v(Math.max,W,F))}function y(W){var F=W.range;return F?_(F[0],F[1]):m(W.values,W._length)}function _(W,F){return!isNaN(W)&&isFinite(W)||(W=0),!isNaN(F)&&isFinite(F)||(F=0),W===F&&(W===0?(W-=1,F+=1):(W*=.9,F*=1.1)),[W,F]}function f(W,F,U,V,te){var J,K,X=y(U);return V?M.scale.ordinal().domain(V.map((J=T(U.tickformat),K=te,K?function(Z,$){var re=K[$];return re==null?J(Z):re}:J))).range(V.map(function(Z){var $=(Z-X[0])/(X[1]-X[0]);return W-F+$*(2*F-W)})):M.scale.linear().domain(X).range([W-F,F])}function S(W){if(W.tickvals){var F=y(W);return M.scale.ordinal().domain(W.tickvals).range(W.tickvals.map(function(U){return(U-F[0])/(F[1]-F[0])}))}}function w(W){var F=W.map(function(te){return te[0]}),U=W.map(function(te){var J=b(te[1]);return M.rgb("rgb("+J[0]+","+J[1]+","+J[2]+")")}),V="rgb".split("").map(function(te){return M.scale.linear().clamp(!0).domain(F).range(U.map((J=te,function(K){return K[J]})));var J});return function(te){return V.map(function(J){return J(te)})}}function E(W){return W.dimensions.some(function(F){return F.brush.filterSpecified})}function P(W,F,U){var V=d(F),te=V.trace,J=c.convertTypedArray(V.lineColor),K=te.line,X={color:b(te.unselected.line.color),opacity:te.unselected.line.opacity},Z=r.extractOpts(K),$=Z.reversescale?r.flipScale(V.cscale):V.cscale,re=te.domain,oe=te.dimensions,ie=W.width,ue=te.labelangle,me=te.labelside,be=te.labelfont,ge=te.tickfont,de=te.rangefont,ve=k.extendDeepNoArrays({},K,{color:J.map(M.scale.linear().domain(y({values:J,range:[Z.min,Z.max],_length:te._length}))),blockLineCount:x.blockLineCount,canvasOverdrag:x.overdrag*x.canvasPixelRatio}),pe=Math.floor(ie*(re.x[1]-re.x[0])),_e=Math.floor(W.height*(re.y[1]-re.y[0])),Te=W.margin||{l:80,r:80,t:100,b:80},le=pe,ae=_e;return{key:U,colCount:oe.filter(c.isVisible).length,dimensions:oe,tickDistance:x.tickDistance,unitToColor:w($),lines:ve,deselectedLines:X,labelAngle:ue,labelSide:me,labelFont:be,tickFont:ge,rangeFont:de,layoutWidth:ie,layoutHeight:W.height,domain:re,translateX:re.x[0]*ie,translateY:W.height-re.y[1]*W.height,pad:Te,canvasWidth:le*x.canvasPixelRatio+2*ve.canvasOverdrag,canvasHeight:ae*x.canvasPixelRatio,width:le,height:ae,canvasPixelRatio:x.canvasPixelRatio}}function C(W,F,U){var V=U.width,te=U.height,J=U.dimensions,K=U.canvasPixelRatio,X=function(ie){return V*ie/Math.max(1,U.colCount-1)},Z=x.verticalPadding/te,$=function(ie,ue){return M.scale.linear().range([ue,ie-ue])}(te,x.verticalPadding),re={key:U.key,xScale:X,model:U,inBrushDrag:!1},oe={};return re.dimensions=J.filter(c.isVisible).map(function(ie,ue){var me=function(Ee,De){return M.scale.linear().domain(y(Ee)).range([De,1-De])}(ie,Z),be=oe[ie.label];oe[ie.label]=(be||0)+1;var ge=ie.label+(be?"__"+be:""),de=ie.constraintrange,ve=de&&de.length;ve&&!o(de[0])&&(de=[de]);var pe=ve?de.map(function(Ee){return Ee.map(me)}):[[-1/0,1/0]],_e=ie.values;_e.length>ie._length&&(_e=_e.slice(0,ie._length));var Te,le=ie.tickvals;function ae(Ee,De){return{val:Ee,text:Te[De]}}function he(Ee,De){return Ee.val-De.val}if(o(le)&&le.length){k.isTypedArray(le)&&(le=Array.from(le)),Te=ie.ticktext,o(Te)&&Te.length?Te.length>le.length?Te=Te.slice(0,le.length):le.length>Te.length&&(le=le.slice(0,Te.length)):Te=le.map(T(ie.tickformat));for(var Se=1;Se<le.length;Se++)if(le[Se]<le[Se-1]){for(var ke=le.map(ae).sort(he),Me=0;Me<le.length;Me++)le[Me]=ke[Me].val,Te[Me]=ke[Me].text;break}}else le=void 0;return _e=c.convertTypedArray(_e),{key:ge,label:ie.label,tickFormat:ie.tickformat,tickvals:le,ticktext:Te,ordinal:c.isOrdinal(ie),multiselect:ie.multiselect,xIndex:ue,crossfilterDimensionIndex:ue,visibleIndex:ie._index,height:te,values:_e,paddedUnitValues:_e.map(me),unitTickvals:le&&le.map(me),xScale:X,x:X(ue),canvasX:X(ue)*K,unitToPaddedPx:$,domainScale:f(te,x.verticalPadding,ie,le,Te),ordinalScale:S(ie),parent:re,model:U,brush:g.makeBrush(W,ve,pe,function(){W.linePickActive(!1)},function(){var Ee=re;Ee.focusLayer&&Ee.focusLayer.render(Ee.panels,!0);var De=E(Ee);!W.contextShown()&&De?(Ee.contextLayer&&Ee.contextLayer.render(Ee.panels,!0),W.contextShown(!0)):W.contextShown()&&!De&&(Ee.contextLayer&&Ee.contextLayer.render(Ee.panels,!0,!0),W.contextShown(!1))},function(Ee){if(re.focusLayer.render(re.panels,!0),re.pickLayer&&re.pickLayer.render(re.panels,!0),W.linePickActive(!0),F&&F.filterChanged){var De=me.invert,fe=Ee.map(function(xe){return xe.map(De).sort(k.sorterAsc)}).sort(function(xe,we){return xe[0]-we[0]});F.filterChanged(re.key,ie._index,fe)}})}}),re}function O(W){W.classed(x.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function R(W,F){var U=F==="top"?1:-1,V=W*Math.PI/180;return{dir:U,dx:Math.sin(V),dy:Math.cos(V),degrees:W}}function j(W,F,U){for(var V=F.panels||(F.panels=[]),te=W.data(),J=0;J<te.length-1;J++){var K=V[J]||(V[J]={}),X=te[J],Z=te[J+1];K.dim0=X,K.dim1=Z,K.canvasX=X.canvasX,K.panelSizeX=Z.canvasX-X.canvasX,K.panelSizeY=F.model.canvasHeight,K.y=0,K.canvasY=0,K.plotGlPixelRatio=U}}function D(W,F){return h.tickText(W._ax,F,!1).text}function N(W,F){if(W.ordinal)return"";var U=W.domainScale.domain(),V=U[F?U.length-1:0];return D(W.model.dimensions[W.visibleIndex],V)}ee.exports=function(W,F,U,V){var te=W._context.staticPlot,J=W._fullLayout,K=J._toppaper,X=J._glcontainer,Z=W._context.plotGlPixelRatio,$=W._fullLayout.paper_bgcolor;(function(Ee){for(var De=0;De<Ee.length;De++)for(var fe=0;fe<Ee[De].length;fe++)for(var xe=Ee[De][fe].trace,we=xe.dimensions,Oe=0;Oe<we.length;Oe++){var ze=we[Oe].values,Pe=we[Oe]._ax;Pe&&(Pe.range?Pe.range=_(Pe.range[0],Pe.range[1]):Pe.range=m(ze,xe._length),Pe.dtick||(Pe.dtick=.01*(Math.abs(Pe.range[1]-Pe.range[0])||1)),Pe.tickformat=we[Oe].tickformat,h.calcTicks(Pe),Pe.cleanRange())}})(F);var re,oe,ie=(re=!0,oe=!1,{linePickActive:function(Ee){return arguments.length?re=!!Ee:re},contextShown:function(Ee){return arguments.length?oe=!!Ee:oe}}),ue=F.filter(function(Ee){return d(Ee).trace.visible}).map(P.bind(0,U)).map(C.bind(0,ie,V));X.each(function(Ee,De){return k.extendFlat(Ee,ue[De])});var me=X.selectAll(".gl-canvas").each(function(Ee){Ee.viewModel=ue[0],Ee.viewModel.plotGlPixelRatio=Z,Ee.viewModel.paperColor=$,Ee.model=Ee.viewModel?Ee.viewModel.model:null}),be=null;me.filter(function(Ee){return Ee.pick}).style("pointer-events",te?"none":"auto").on("mousemove",function(Ee){if(ie.linePickActive()&&Ee.lineLayer&&V&&V.hover){var De=M.event,fe=this.width,xe=this.height,we=M.mouse(this),Oe=we[0],ze=we[1];if(Oe<0||ze<0||Oe>=fe||ze>=xe)return;var Pe=Ee.lineLayer.readPixel(Oe,xe-1-ze),Ue=Pe[3]!==0,Ve=Ue?Pe[2]+256*(Pe[1]+256*Pe[0]):null,Ze={x:Oe,y:ze,clientX:De.clientX,clientY:De.clientY,dataIndex:Ee.model.key,curveNumber:Ve};Ve!==be&&(Ue?V.hover(Ze):V.unhover&&V.unhover(Ze),be=Ve)}}),me.style("opacity",function(Ee){return Ee.pick?0:1}),K.style("background","rgba(255, 255, 255, 0)");var ge=K.selectAll("."+x.cn.parcoords).data(ue,l);ge.exit().remove(),ge.enter().append("g").classed(x.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ge.attr("transform",function(Ee){return t(Ee.model.translateX,Ee.model.translateY)});var de=ge.selectAll("."+x.cn.parcoordsControlView).data(u,l);de.enter().append("g").classed(x.cn.parcoordsControlView,!0),de.attr("transform",function(Ee){return t(Ee.model.pad.l,Ee.model.pad.t)});var ve=de.selectAll("."+x.cn.yAxis).data(function(Ee){return Ee.dimensions},l);ve.enter().append("g").classed(x.cn.yAxis,!0),de.each(function(Ee){j(ve,Ee,Z)}),me.each(function(Ee){if(Ee.viewModel){!Ee.lineLayer||V?Ee.lineLayer=p(this,Ee):Ee.lineLayer.update(Ee),(Ee.key||Ee.key===0)&&(Ee.viewModel[Ee.key]=Ee.lineLayer);var De=!Ee.context||V;Ee.lineLayer.render(Ee.viewModel.panels,De)}}),ve.attr("transform",function(Ee){return t(Ee.xScale(Ee.xIndex),0)}),ve.call(M.behavior.drag().origin(function(Ee){return Ee}).on("drag",function(Ee){var De=Ee.parent;ie.linePickActive(!1),Ee.x=Math.max(-x.overdrag,Math.min(Ee.model.width+x.overdrag,M.event.x)),Ee.canvasX=Ee.x*Ee.model.canvasPixelRatio,ve.sort(function(fe,xe){return fe.x-xe.x}).each(function(fe,xe){fe.xIndex=xe,fe.x=Ee===fe?fe.x:fe.xScale(fe.xIndex),fe.canvasX=fe.x*fe.model.canvasPixelRatio}),j(ve,De,Z),ve.filter(function(fe){return Math.abs(Ee.xIndex-fe.xIndex)!==0}).attr("transform",function(fe){return t(fe.xScale(fe.xIndex),0)}),M.select(this).attr("transform",t(Ee.x,0)),ve.each(function(fe,xe,we){we===Ee.parent.key&&(De.dimensions[xe]=fe)}),De.contextLayer&&De.contextLayer.render(De.panels,!1,!E(De)),De.focusLayer.render&&De.focusLayer.render(De.panels)}).on("dragend",function(Ee){var De=Ee.parent;Ee.x=Ee.xScale(Ee.xIndex),Ee.canvasX=Ee.x*Ee.model.canvasPixelRatio,j(ve,De,Z),M.select(this).attr("transform",function(fe){return t(fe.x,0)}),De.contextLayer&&De.contextLayer.render(De.panels,!1,!E(De)),De.focusLayer&&De.focusLayer.render(De.panels),De.pickLayer&&De.pickLayer.render(De.panels,!0),ie.linePickActive(!0),V&&V.axesMoved&&V.axesMoved(De.key,De.dimensions.map(function(fe){return fe.crossfilterDimensionIndex}))})),ve.exit().remove();var pe=ve.selectAll("."+x.cn.axisOverlays).data(u,l);pe.enter().append("g").classed(x.cn.axisOverlays,!0),pe.selectAll("."+x.cn.axis).remove();var _e=pe.selectAll("."+x.cn.axis).data(u,l);_e.enter().append("g").classed(x.cn.axis,!0),_e.each(function(Ee){var De=Ee.model.height/Ee.model.tickDistance,fe=Ee.domainScale,xe=fe.domain();M.select(this).call(M.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(De,Ee.tickFormat).tickValues(Ee.ordinal?xe:null).tickFormat(function(we){return c.isOrdinal(Ee)?we:D(Ee.model.dimensions[Ee.visibleIndex],we)}).scale(fe)),n.font(_e.selectAll("text"),Ee.model.tickFont)}),_e.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),_e.selectAll("text").style("text-shadow",i.makeTextShadow($)).style("cursor","default");var Te=pe.selectAll("."+x.cn.axisHeading).data(u,l);Te.enter().append("g").classed(x.cn.axisHeading,!0);var le=Te.selectAll("."+x.cn.axisTitle).data(u,l);le.enter().append("text").classed(x.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",te?"none":"auto"),le.text(function(Ee){return Ee.label}).each(function(Ee){var De=M.select(this);n.font(De,Ee.model.labelFont),i.convertToTspans(De,W)}).attr("transform",function(Ee){var De=R(Ee.model.labelAngle,Ee.model.labelSide),fe=x.axisTitleOffset;return(De.dir>0?"":t(0,2*fe+Ee.model.height))+s(De.degrees)+t(-fe*De.dx,-fe*De.dy)}).attr("text-anchor",function(Ee){var De=R(Ee.model.labelAngle,Ee.model.labelSide);return 2*Math.abs(De.dx)>Math.abs(De.dy)?De.dir*De.dx<0?"start":"end":"middle"});var ae=pe.selectAll("."+x.cn.axisExtent).data(u,l);ae.enter().append("g").classed(x.cn.axisExtent,!0);var he=ae.selectAll("."+x.cn.axisExtentTop).data(u,l);he.enter().append("g").classed(x.cn.axisExtentTop,!0),he.attr("transform",t(0,-x.axisExtentOffset));var Se=he.selectAll("."+x.cn.axisExtentTopText).data(u,l);Se.enter().append("text").classed(x.cn.axisExtentTopText,!0).call(O),Se.text(function(Ee){return N(Ee,!0)}).each(function(Ee){n.font(M.select(this),Ee.model.rangeFont)});var ke=ae.selectAll("."+x.cn.axisExtentBottom).data(u,l);ke.enter().append("g").classed(x.cn.axisExtentBottom,!0),ke.attr("transform",function(Ee){return t(0,Ee.model.height+x.axisExtentOffset)});var Me=ke.selectAll("."+x.cn.axisExtentBottomText).data(u,l);Me.enter().append("text").classed(x.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(O),Me.text(function(Ee){return N(Ee,!1)}).each(function(Ee){n.font(M.select(this),Ee.model.rangeFont)}),g.ensureAxisBrush(pe,$,W)}},24196:function(ee,z,e){"use strict";var M=e(36336),k=e(5048),o=e(95724).isVisible,T={};function b(h,s,t){var i=s.indexOf(t),n=h.indexOf(i);return n===-1&&(n+=s.length),n}(ee.exports=function(h,s){var t=h._fullLayout;if(k(h,[],T)){var i={},n={},r={},a={},l=t._size;s.forEach(function(u,d){var c=u[0].trace;r[d]=c.index;var x=a[d]=c._fullInput.index;i[d]=h.data[x].dimensions,n[d]=h.data[x].dimensions.slice()}),M(h,s,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{filterChanged:function(u,d,c){var x=n[u][d],g=c.map(function(f){return f.slice()}),p="dimensions["+d+"].constraintrange",v=t._tracePreGUI[h._fullData[r[u]]._fullInput.uid];if(v[p]===void 0){var m=x.constraintrange;v[p]=m||null}var y=h._fullData[r[u]].dimensions[d];g.length?(g.length===1&&(g=g[0]),x.constraintrange=g,y.constraintrange=g.slice(),g=[g]):(delete x.constraintrange,delete y.constraintrange,g=null);var _={};_[p]=g,h.emit("plotly_restyle",[_,[a[u]]])},hover:function(u){h.emit("plotly_hover",u)},unhover:function(u){h.emit("plotly_unhover",u)},axesMoved:function(u,d){var c=function(x,g){return function(p,v){return b(x,g,p)-b(x,g,v)}}(d,n[u].filter(o));i[u].sort(c),n[u].filter(function(x){return!o(x)}).sort(function(x){return n[u].indexOf(x)}).forEach(function(x){i[u].splice(i[u].indexOf(x),1),i[u].splice(n[u].indexOf(x),0,x)}),h.emit("plotly_restyle",[{dimensions:[i[u]]},[a[u]]])}})}}).reglPrecompiled=T},74996:function(ee,z,e){"use strict";var M=e(45464),k=e(86968).u,o=e(25376),T=e(22548),b=e(21776).Ks,h=e(21776).Gw,s=e(92880).extendFlat,t=e(98192).c,i=o({editType:"plot",arrayOk:!0,colorEditType:"plot"});ee.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:s({},M.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","percent","text"]}),texttemplate:h({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:s({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:s({},i,{}),outsidetextfont:s({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:s({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:k({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:s({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(ee,z,e){"use strict";var M=e(7316);z.name="pie",z.plot=function(k,o,T,b){M.plotBasePlot(z.name,k,o,T,b)},z.clean=function(k,o,T,b){M.cleanBasePlot(z.name,k,o,T,b)}},45768:function(ee,z,e){"use strict";var M=e(38248),k=e(49760),o=e(76308),T={};function b(s){return function(t,i){return!!t&&!!(t=k(t)).isValid()&&(t=o.addOpacity(t,t.getAlpha()),s[i]||(s[i]=t),t)}}function h(s,t){var i,n=JSON.stringify(s),r=t[n];if(!r){for(r=s.slice(),i=0;i<s.length;i++)r.push(k(s[i]).lighten(20).toHexString());for(i=0;i<s.length;i++)r.push(k(s[i]).darken(20).toHexString());t[n]=r}return r}ee.exports={calc:function(s,t){var i,n,r=[],a=s._fullLayout,l=a.hiddenlabels||[],u=t.labels,d=t.marker.colors||[],c=t.values,x=t._length,g=t._hasValues&&x;if(t.dlabel)for(u=new Array(x),i=0;i<x;i++)u[i]=String(t.label0+i*t.dlabel);var p={},v=b(a["_"+t.type+"colormap"]),m=0,y=!1;for(i=0;i<x;i++){var _,f,S;if(g){if(_=c[i],!M(_))continue;_=+_}else _=1;(f=u[i])!==void 0&&f!==""||(f=i);var w=p[f=String(f)];w===void 0?(p[f]=r.length,(S=l.indexOf(f)!==-1)||(m+=_),r.push({v:_,label:f,color:v(d[i],f),i,pts:[i],hidden:S})):(y=!0,(n=r[w]).v+=_,n.pts.push(i),n.hidden||(m+=_),n.color===!1&&d[i]&&(n.color=v(d[i],f)))}return r=r.filter(function(E){return E.v>=0}),(t.type==="funnelarea"?y:t.sort)&&r.sort(function(E,P){return P.v-E.v}),r[0]&&(r[0].vTotal=m),r},crossTraceCalc:function(s,t){var i=(t||{}).type;i||(i="pie");var n=s._fullLayout,r=s.calcdata,a=n[i+"colorway"],l=n["_"+i+"colormap"];n["extend"+i+"colors"]&&(a=h(a,T));for(var u=0,d=0;d<r.length;d++){var c=r[d];if(c[0].trace.type===i)for(var x=0;x<c.length;x++){var g=c[x];g.color===!1&&(l[g.label]?g.color=l[g.label]:(l[g.label]=g.color=a[u%a.length],u++))}}},makePullColorFn:b,generateExtendedColors:h}},74174:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=e(74996),T=e(86968).Q,b=e(31508).handleText,h=e(3400).coercePattern;function s(i,n){var r=k.isArrayOrTypedArray(i),a=k.isArrayOrTypedArray(n),l=Math.min(r?i.length:1/0,a?n.length:1/0);if(isFinite(l)||(l=0),l&&a){for(var u,d=0;d<l;d++){var c=n[d];if(M(c)&&c>0){u=!0;break}}u||(l=0)}return{hasLabels:r,hasValues:a,len:l}}function t(i,n,r,a,l){a("marker.line.width")&&a("marker.line.color",l?void 0:r.paper_bgcolor);var u=a("marker.colors");h(a,"marker.pattern",u),i.marker&&!n.marker.pattern.fgcolor&&(n.marker.pattern.fgcolor=i.marker.colors),n.marker.pattern.bgcolor||(n.marker.pattern.bgcolor=r.paper_bgcolor)}ee.exports={handleLabelsAndValues:s,handleMarkerDefaults:t,supplyDefaults:function(i,n,r,a){function l(y,_){return k.coerce(i,n,o,y,_)}var u=s(l("labels"),l("values")),d=u.len;if(n._hasLabels=u.hasLabels,n._hasValues=u.hasValues,!n._hasLabels&&n._hasValues&&(l("label0"),l("dlabel")),d){n._length=d,t(i,n,a,l,!0),l("scalegroup");var c,x=l("text"),g=l("texttemplate");if(g||(c=l("textinfo",k.isArrayOrTypedArray(x)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),g||c&&c!=="none"){var p=l("textposition");b(i,n,a,l,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(p)||p==="auto"||p==="outside")&&l("automargin"),(p==="inside"||p==="auto"||Array.isArray(p))&&l("insidetextorientation")}else c==="none"&&l("textposition","none");T(n,a,l);var v=l("hole");if(l("title.text")){var m=l("title.position",v?"middle center":"top center");v||m!=="middle center"||(n.title.position="top center"),k.coerceFont(l,"title.font",a.font)}l("sort"),l("direction"),l("rotation"),l("pull")}else n.visible=!1}}},53644:function(ee,z,e){"use strict";var M=e(10624).appendArrayMultiPointValues;ee.exports=function(k,o){var T={curveNumber:o.index,pointNumbers:k.pts,data:o._input,fullData:o,label:k.label,color:k.color,value:k.v,percent:k.percent,text:k.text,bbox:k.bbox,v:k.v};return k.pts.length===1&&(T.pointNumber=T.i=k.pts[0]),M(T,o,k.pts),o.type==="funnelarea"&&(delete T.v,delete T.i),T}},21552:function(ee,z,e){"use strict";var M=e(43616),k=e(76308);ee.exports=function(o,T,b,h){var s=b.marker.pattern;s&&s.shape?M.pointStyle(o,b,h,T):k.fill(o,T.color)}},69656:function(ee,z,e){"use strict";var M=e(3400);function k(o){return o.indexOf("e")!==-1?o.replace(/[.]?0+e/,"e"):o.indexOf(".")!==-1?o.replace(/[.]?0+$/,""):o}z.formatPiePercent=function(o,T){var b=k((100*o).toPrecision(3));return M.numSeparate(b,T)+"%"},z.formatPieValue=function(o,T){var b=k(o.toPrecision(10));return M.numSeparate(b,T)},z.getFirstFilled=function(o,T){if(M.isArrayOrTypedArray(o))for(var b=0;b<T.length;b++){var h=o[T[b]];if(h||h===0||h==="")return h}},z.castOption=function(o,T){return M.isArrayOrTypedArray(o)?z.getFirstFilled(o,T):o||void 0},z.getRotationAngle=function(o){return(o==="auto"?0:o)*Math.PI/180}},75792:function(ee,z,e){"use strict";ee.exports={attributes:e(74996),supplyDefaults:e(74174).supplyDefaults,supplyLayoutDefaults:e(90248),layoutAttributes:e(85204),calc:e(45768).calc,crossTraceCalc:e(45768).crossTraceCalc,plot:e(37820).plot,style:e(22152),styleOne:e(10528),moduleType:"trace",name:"pie",basePlotModule:e(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(ee){"use strict";ee.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(ee,z,e){"use strict";var M=e(3400),k=e(85204);ee.exports=function(o,T){function b(h,s){return M.coerce(o,T,k,h,s)}b("hiddenlabels"),b("piecolorway",T.colorway),b("extendpiecolors")}},37820:function(ee,z,e){"use strict";var M=e(33428),k=e(7316),o=e(93024),T=e(76308),b=e(43616),h=e(3400),s=h.strScale,t=h.strTranslate,i=e(72736),n=e(82744),r=n.recordMinTextSize,a=n.clearMinTextSize,l=e(78048).TEXTPAD,u=e(69656),d=e(53644),c=e(3400).isValidTextValue;function x(W,F,U){var V=U[0],te=V.cx,J=V.cy,K=V.trace,X=K.type==="funnelarea";"_hasHoverLabel"in K||(K._hasHoverLabel=!1),"_hasHoverEvent"in K||(K._hasHoverEvent=!1),W.on("mouseover",function(Z){var $=F._fullLayout,re=F._fullData[K.index];if(!F._dragging&&$.hovermode!==!1){var oe=re.hoverinfo;if(Array.isArray(oe)&&(oe=o.castHoverinfo({hoverinfo:[u.castOption(oe,Z.pts)],_module:K._module},$,0)),oe==="all"&&(oe="label+text+value+percent+name"),re.hovertemplate||oe!=="none"&&oe!=="skip"&&oe){var ie=Z.rInscribed||0,ue=te+Z.pxmid[0]*(1-ie),me=J+Z.pxmid[1]*(1-ie),be=$.separators,ge=[];if(oe&&oe.indexOf("label")!==-1&&ge.push(Z.label),Z.text=u.castOption(re.hovertext||re.text,Z.pts),oe&&oe.indexOf("text")!==-1){var de=Z.text;h.isValidTextValue(de)&&ge.push(de)}Z.value=Z.v,Z.valueLabel=u.formatPieValue(Z.v,be),oe&&oe.indexOf("value")!==-1&&ge.push(Z.valueLabel),Z.percent=Z.v/V.vTotal,Z.percentLabel=u.formatPiePercent(Z.percent,be),oe&&oe.indexOf("percent")!==-1&&ge.push(Z.percentLabel);var ve=re.hoverlabel,pe=ve.font,_e=[];o.loneHover({trace:K,x0:ue-ie*V.r,x1:ue+ie*V.r,y:me,_x0:X?te+Z.TL[0]:ue-ie*V.r,_x1:X?te+Z.TR[0]:ue+ie*V.r,_y0:X?J+Z.TL[1]:me-ie*V.r,_y1:X?J+Z.BL[1]:me+ie*V.r,text:ge.join("<br>"),name:re.hovertemplate||oe.indexOf("name")!==-1?re.name:void 0,idealAlign:Z.pxmid[0]<0?"left":"right",color:u.castOption(ve.bgcolor,Z.pts)||Z.color,borderColor:u.castOption(ve.bordercolor,Z.pts),fontFamily:u.castOption(pe.family,Z.pts),fontSize:u.castOption(pe.size,Z.pts),fontColor:u.castOption(pe.color,Z.pts),nameLength:u.castOption(ve.namelength,Z.pts),textAlign:u.castOption(ve.align,Z.pts),hovertemplate:u.castOption(re.hovertemplate,Z.pts),hovertemplateLabels:Z,eventData:[d(Z,re)]},{container:$._hoverlayer.node(),outerContainer:$._paper.node(),gd:F,inOut_bbox:_e}),Z.bbox=_e[0],K._hasHoverLabel=!0}K._hasHoverEvent=!0,F.emit("plotly_hover",{points:[d(Z,re)],event:M.event})}}),W.on("mouseout",function(Z){var $=F._fullLayout,re=F._fullData[K.index],oe=M.select(this).datum();K._hasHoverEvent&&(Z.originalEvent=M.event,F.emit("plotly_unhover",{points:[d(oe,re)],event:M.event}),K._hasHoverEvent=!1),K._hasHoverLabel&&(o.loneUnhover($._hoverlayer.node()),K._hasHoverLabel=!1)}),W.on("click",function(Z){var $=F._fullLayout,re=F._fullData[K.index];F._dragging||$.hovermode===!1||(F._hoverdata=[d(Z,re)],o.click(F,M.event))})}function g(W,F,U){var V=u.castOption(W.insidetextfont.color,F.pts);!V&&W._input.textfont&&(V=u.castOption(W._input.textfont.color,F.pts));var te=u.castOption(W.insidetextfont.family,F.pts)||u.castOption(W.textfont.family,F.pts)||U.family,J=u.castOption(W.insidetextfont.size,F.pts)||u.castOption(W.textfont.size,F.pts)||U.size;return{color:V||T.contrast(F.color),family:te,size:J}}function p(W,F){for(var U,V,te=0;te<W.length;te++)if((V=(U=W[te][0]).trace).title.text){var J=V.title.text;V._meta&&(J=h.templateString(J,V._meta));var K=b.tester.append("text").attr("data-notex",1).text(J).call(b.font,V.title.font).call(i.convertToTspans,F),X=b.bBox(K.node(),!0);U.titleBox={width:X.width,height:X.height},K.remove()}}function v(W,F,U){var V=U.r||F.rpx1,te=F.rInscribed;if(F.startangle===F.stopangle)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var J,K=F.ring,X=K===1&&Math.abs(F.startangle-F.stopangle)===2*Math.PI,Z=F.halfangle,$=F.midangle,re=U.trace.insidetextorientation,oe=re==="horizontal",ie=re==="tangential",ue=re==="radial",me=re==="auto",be=[];if(!me){var ge,de=function(ae,he){if(function(Ee,De){var fe=Ee.startangle,xe=Ee.stopangle;return fe>De&&De>xe||fe<De&&De<xe}(F,ae)){var Se=Math.abs(ae-F.startangle),ke=Math.abs(ae-F.stopangle),Me=Se<ke?Se:ke;(J=he==="tan"?y(W,V,K,Me,0):m(W,V,K,Me,Math.PI/2)).textPosAngle=ae,be.push(J)}};if(oe||ie){for(ge=4;ge>=-4;ge-=2)de(Math.PI*ge,"tan");for(ge=4;ge>=-4;ge-=2)de(Math.PI*(ge+1),"tan")}if(oe||ue){for(ge=4;ge>=-4;ge-=2)de(Math.PI*(ge+1.5),"rad");for(ge=4;ge>=-4;ge-=2)de(Math.PI*(ge+.5),"rad")}}if(X||me||oe){var ve=Math.sqrt(W.width*W.width+W.height*W.height);if((J={scale:te*V*2/ve,rCenter:1-te,rotate:0}).textPosAngle=(F.startangle+F.stopangle)/2,J.scale>=1)return J;be.push(J)}(me||ue)&&((J=m(W,V,K,Z,$)).textPosAngle=(F.startangle+F.stopangle)/2,be.push(J)),(me||ie)&&((J=y(W,V,K,Z,$)).textPosAngle=(F.startangle+F.stopangle)/2,be.push(J));for(var pe=0,_e=0,Te=0;Te<be.length;Te++){var le=be[Te].scale;if(_e<le&&(_e=le,pe=Te),!me&&_e>=1)break}return be[pe]}function m(W,F,U,V,te){F=Math.max(0,F-2*l);var J=W.width/W.height,K=S(J,V,F,U);return{scale:2*K/W.height,rCenter:_(J,K/F),rotate:f(te)}}function y(W,F,U,V,te){F=Math.max(0,F-2*l);var J=W.height/W.width,K=S(J,V,F,U);return{scale:2*K/W.width,rCenter:_(J,K/F),rotate:f(te+Math.PI/2)}}function _(W,F){return Math.cos(F)-W*F}function f(W){return(180/Math.PI*W+720)%180-90}function S(W,F,U,V){var te=W+1/(2*Math.tan(F));return U*Math.min(1/(Math.sqrt(te*te+.5)+te),V/(Math.sqrt(W*W+V/2)+W))}function w(W,F){return W.v!==F.vTotal||F.trace.hole?Math.min(1/(1+1/Math.sin(W.halfangle)),W.ring/2):1}function E(W,F){var U=F.pxmid[0],V=F.pxmid[1],te=W.width/2,J=W.height/2;return U<0&&(te*=-1),V<0&&(J*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs(J)*(te>0?1:-1)/2,y:J/(1+U*U/(V*V)),outside:!0}}function P(W,F){var U,V,te,J=W.trace,K={x:W.cx,y:W.cy},X={tx:0,ty:0};X.ty+=J.title.font.size,te=O(J),J.title.position.indexOf("top")!==-1?(K.y-=(1+te)*W.r,X.ty-=W.titleBox.height):J.title.position.indexOf("bottom")!==-1&&(K.y+=(1+te)*W.r);var Z,$=W.r/((Z=W.trace.aspectratio)===void 0?1:Z),re=F.w*(J.domain.x[1]-J.domain.x[0])/2;return J.title.position.indexOf("left")!==-1?(re+=$,K.x-=(1+te)*$,X.tx+=W.titleBox.width/2):J.title.position.indexOf("center")!==-1?re*=2:J.title.position.indexOf("right")!==-1&&(re+=$,K.x+=(1+te)*$,X.tx-=W.titleBox.width/2),U=re/W.titleBox.width,V=C(W,F)/W.titleBox.height,{x:K.x,y:K.y,scale:Math.min(U,V),tx:X.tx,ty:X.ty}}function C(W,F){var U=W.trace,V=F.h*(U.domain.y[1]-U.domain.y[0]);return Math.min(W.titleBox.height,V/2)}function O(W){var F,U=W.pull;if(!U)return 0;if(h.isArrayOrTypedArray(U))for(U=0,F=0;F<W.pull.length;F++)W.pull[F]>U&&(U=W.pull[F]);return U}function R(W,F){for(var U=[],V=0;V<W.length;V++){var te=W[V][0],J=te.trace,K=J.domain,X=F.w*(K.x[1]-K.x[0]),Z=F.h*(K.y[1]-K.y[0]);J.title.text&&J.title.position!=="middle center"&&(Z-=C(te,F));var $=X/2,re=Z/2;J.type!=="funnelarea"||J.scalegroup||(re/=J.aspectratio),te.r=Math.min($,re)/(1+O(J)),te.cx=F.l+F.w*(J.domain.x[1]+J.domain.x[0])/2,te.cy=F.t+F.h*(1-J.domain.y[0])-Z/2,J.title.text&&J.title.position.indexOf("bottom")!==-1&&(te.cy-=C(te,F)),J.scalegroup&&U.indexOf(J.scalegroup)===-1&&U.push(J.scalegroup)}(function(oe,ie){for(var ue,me,be,ge=0;ge<ie.length;ge++){var de=1/0,ve=ie[ge];for(me=0;me<oe.length;me++)if((be=(ue=oe[me][0]).trace).scalegroup===ve){var pe;if(be.type==="pie")pe=ue.r*ue.r;else if(be.type==="funnelarea"){var _e,Te;be.aspectratio>1?Te=(_e=ue.r)/be.aspectratio:_e=(Te=ue.r)*be.aspectratio,pe=(_e*=(1+be.baseratio)/2)*Te}de=Math.min(de,pe/ue.vTotal)}for(me=0;me<oe.length;me++)if((be=(ue=oe[me][0]).trace).scalegroup===ve){var le=de*ue.vTotal;be.type==="funnelarea"&&(le/=(1+be.baseratio)/2,le/=be.aspectratio),ue.r=Math.sqrt(le)}}})(W,U)}function j(W,F){return[W*Math.sin(F),-W*Math.cos(F)]}function D(W,F,U){var V=W._fullLayout,te=U.trace,J=te.texttemplate,K=te.textinfo;if(!J&&K&&K!=="none"){var X,Z=K.split("+"),$=function(pe){return Z.indexOf(pe)!==-1},re=$("label"),oe=$("text"),ie=$("value"),ue=$("percent"),me=V.separators;if(X=re?[F.label]:[],oe){var be=u.getFirstFilled(te.text,F.pts);c(be)&&X.push(be)}ie&&X.push(u.formatPieValue(F.v,me)),ue&&X.push(u.formatPiePercent(F.v/U.vTotal,me)),F.text=X.join("<br>")}if(J){var ge=h.castOption(te,F.i,"texttemplate");if(ge){var de=function(pe){return{label:pe.label,value:pe.v,valueLabel:u.formatPieValue(pe.v,V.separators),percent:pe.v/U.vTotal,percentLabel:u.formatPiePercent(pe.v/U.vTotal,V.separators),color:pe.color,text:pe.text,customdata:h.castOption(te,pe.i,"customdata")}}(F),ve=u.getFirstFilled(te.text,F.pts);(c(ve)||ve==="")&&(de.text=ve),F.text=h.texttemplateString(ge,de,W._fullLayout._d3locale,de,te._meta||{})}else F.text=""}}function N(W,F){var U=W.rotate*Math.PI/180,V=Math.cos(U),te=Math.sin(U),J=(F.left+F.right)/2,K=(F.top+F.bottom)/2;W.textX=J*V-K*te,W.textY=J*te+K*V,W.noCenter=!0}ee.exports={plot:function(W,F){var U=W._context.staticPlot,V=W._fullLayout,te=V._size;a("pie",V),p(F,W),R(F,te);var J=h.makeTraceGroups(V._pielayer,F,"trace").each(function(K){var X=M.select(this),Z=K[0],$=Z.trace;(function(re){var oe,ie,ue,me=re[0],be=me.r,ge=me.trace,de=u.getRotationAngle(ge.rotation),ve=2*Math.PI/me.vTotal,pe="px0",_e="px1";if(ge.direction==="counterclockwise"){for(oe=0;oe<re.length&&re[oe].hidden;oe++);if(oe===re.length)return;de+=ve*re[oe].v,ve*=-1,pe="px1",_e="px0"}for(ue=j(be,de),oe=0;oe<re.length;oe++)(ie=re[oe]).hidden||(ie[pe]=ue,ie.startangle=de,de+=ve*ie.v/2,ie.pxmid=j(be,de),ie.midangle=de,ue=j(be,de+=ve*ie.v/2),ie.stopangle=de,ie[_e]=ue,ie.largeArc=ie.v>me.vTotal/2?1:0,ie.halfangle=Math.PI*Math.min(ie.v/me.vTotal,.5),ie.ring=1-ge.hole,ie.rInscribed=w(ie,me))})(K),X.attr("stroke-linejoin","round"),X.each(function(){var re=M.select(this).selectAll("g.slice").data(K);re.enter().append("g").classed("slice",!0),re.exit().remove();var oe=[[[],[]],[[],[]]],ie=!1;re.each(function(_e,Te){if(_e.hidden)M.select(this).selectAll("path,g").remove();else{_e.pointNumber=_e.i,_e.curveNumber=$.index,oe[_e.pxmid[1]<0?0:1][_e.pxmid[0]<0?0:1].push(_e);var le=Z.cx,ae=Z.cy,he=M.select(this),Se=he.selectAll("path.surface").data([_e]);if(Se.enter().append("path").classed("surface",!0).style({"pointer-events":U?"none":"all"}),he.call(x,W,K),$.pull){var ke=+u.castOption($.pull,_e.pts)||0;ke>0&&(le+=ke*_e.pxmid[0],ae+=ke*_e.pxmid[1])}_e.cxFinal=le,_e.cyFinal=ae;var Me=$.hole;if(_e.v===Z.vTotal){var Ee="M"+(le+_e.px0[0])+","+(ae+_e.px0[1])+Oe(_e.px0,_e.pxmid,!0,1)+Oe(_e.pxmid,_e.px0,!0,1)+"Z";Me?Se.attr("d","M"+(le+Me*_e.px0[0])+","+(ae+Me*_e.px0[1])+Oe(_e.px0,_e.pxmid,!1,Me)+Oe(_e.pxmid,_e.px0,!1,Me)+"Z"+Ee):Se.attr("d",Ee)}else{var De=Oe(_e.px0,_e.px1,!0,1);if(Me){var fe=1-Me;Se.attr("d","M"+(le+Me*_e.px1[0])+","+(ae+Me*_e.px1[1])+Oe(_e.px1,_e.px0,!1,Me)+"l"+fe*_e.px0[0]+","+fe*_e.px0[1]+De+"Z")}else Se.attr("d","M"+le+","+ae+"l"+_e.px0[0]+","+_e.px0[1]+De+"Z")}D(W,_e,Z);var xe=u.castOption($.textposition,_e.pts),we=he.selectAll("g.slicetext").data(_e.text&&xe!=="none"?[0]:[]);we.enter().append("g").classed("slicetext",!0),we.exit().remove(),we.each(function(){var ze=h.ensureSingle(M.select(this),"text","",function(yt){yt.attr("data-notex",1)}),Pe=h.ensureUniformFontSize(W,xe==="outside"?function(yt,vt,et){return{color:u.castOption(yt.outsidetextfont.color,vt.pts)||u.castOption(yt.textfont.color,vt.pts)||et.color,family:u.castOption(yt.outsidetextfont.family,vt.pts)||u.castOption(yt.textfont.family,vt.pts)||et.family,size:u.castOption(yt.outsidetextfont.size,vt.pts)||u.castOption(yt.textfont.size,vt.pts)||et.size}}($,_e,V.font):g($,_e,V.font));ze.text(_e.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(b.font,Pe).call(i.convertToTspans,W);var Ue,Ve=b.bBox(ze.node());if(xe==="outside")Ue=E(Ve,_e);else if(Ue=v(Ve,_e,Z),xe==="auto"&&Ue.scale<1){var Ze=h.ensureUniformFontSize(W,$.outsidetextfont);ze.call(b.font,Ze),Ue=E(Ve=b.bBox(ze.node()),_e)}var it=Ue.textPosAngle,tt=it===void 0?_e.pxmid:j(Z.r,it);if(Ue.targetX=le+tt[0]*Ue.rCenter+(Ue.x||0),Ue.targetY=ae+tt[1]*Ue.rCenter+(Ue.y||0),N(Ue,Ve),Ue.outside){var dt=Ue.targetY;_e.yLabelMin=dt-Ve.height/2,_e.yLabelMid=dt,_e.yLabelMax=dt+Ve.height/2,_e.labelExtraX=0,_e.labelExtraY=0,ie=!0}Ue.fontSize=Pe.size,r($.type,Ue,V),K[Te].transform=Ue,h.setTransormAndDisplay(ze,Ue)})}function Oe(ze,Pe,Ue,Ve){var Ze=Ve*(Pe[0]-ze[0]),it=Ve*(Pe[1]-ze[1]);return"a"+Ve*Z.r+","+Ve*Z.r+" 0 "+_e.largeArc+(Ue?" 1 ":" 0 ")+Ze+","+it}});var ue=M.select(this).selectAll("g.titletext").data($.title.text?[0]:[]);if(ue.enter().append("g").classed("titletext",!0),ue.exit().remove(),ue.each(function(){var _e,Te=h.ensureSingle(M.select(this),"text","",function(ae){ae.attr("data-notex",1)}),le=$.title.text;$._meta&&(le=h.templateString(le,$._meta)),Te.text(le).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(b.font,$.title.font).call(i.convertToTspans,W),_e=$.title.position==="middle center"?function(ae){var he=Math.sqrt(ae.titleBox.width*ae.titleBox.width+ae.titleBox.height*ae.titleBox.height);return{x:ae.cx,y:ae.cy,scale:ae.trace.hole*ae.r*2/he,tx:0,ty:-ae.titleBox.height/2+ae.trace.title.font.size}}(Z):P(Z,te),Te.attr("transform",t(_e.x,_e.y)+s(Math.min(1,_e.scale))+t(_e.tx,_e.ty))}),ie&&function(_e,Te){var le,ae,he,Se,ke,Me,Ee,De,fe,xe,we,Oe,ze;function Pe(it,tt){return it.pxmid[1]-tt.pxmid[1]}function Ue(it,tt){return tt.pxmid[1]-it.pxmid[1]}function Ve(it,tt){tt||(tt={});var dt,yt,vt,et,Qe=tt.labelExtraY+(ae?tt.yLabelMax:tt.yLabelMin),wt=ae?it.yLabelMin:it.yLabelMax,It=ae?it.yLabelMax:it.yLabelMin,Dt=it.cyFinal+ke(it.px0[1],it.px1[1]),Ct=Qe-wt;if(Ct*Ee>0&&(it.labelExtraY=Ct),h.isArrayOrTypedArray(Te.pull))for(yt=0;yt<xe.length;yt++)(vt=xe[yt])===it||(u.castOption(Te.pull,it.pts)||0)>=(u.castOption(Te.pull,vt.pts)||0)||((it.pxmid[1]-vt.pxmid[1])*Ee>0?(Ct=vt.cyFinal+ke(vt.px0[1],vt.px1[1])-wt-it.labelExtraY)*Ee>0&&(it.labelExtraY+=Ct):(It+it.labelExtraY-Dt)*Ee>0&&(dt=3*Me*Math.abs(yt-xe.indexOf(it)),(et=vt.cxFinal+Se(vt.px0[0],vt.px1[0])+dt-(it.cxFinal+it.pxmid[0])-it.labelExtraX)*Me>0&&(it.labelExtraX+=et)))}for(ae=0;ae<2;ae++)for(he=ae?Pe:Ue,ke=ae?Math.max:Math.min,Ee=ae?1:-1,le=0;le<2;le++){for(Se=le?Math.max:Math.min,Me=le?1:-1,(De=_e[ae][le]).sort(he),fe=_e[1-ae][le],xe=fe.concat(De),Oe=[],we=0;we<De.length;we++)De[we].yLabelMid!==void 0&&Oe.push(De[we]);for(ze=!1,we=0;ae&&we<fe.length;we++)if(fe[we].yLabelMid!==void 0){ze=fe[we];break}for(we=0;we<Oe.length;we++){var Ze=we&&Oe[we-1];ze&&!we&&(Ze=ze),Ve(Oe[we],Ze)}}}(oe,$),function(_e,Te){_e.each(function(le){var ae=M.select(this);if(le.labelExtraX||le.labelExtraY){var he=ae.select("g.slicetext text");le.transform.targetX+=le.labelExtraX,le.transform.targetY+=le.labelExtraY,h.setTransormAndDisplay(he,le.transform);var Se=le.cxFinal+le.pxmid[0],ke="M"+Se+","+(le.cyFinal+le.pxmid[1]),Me=(le.yLabelMax-le.yLabelMin)*(le.pxmid[0]<0?-1:1)/4;if(le.labelExtraX){var Ee=le.labelExtraX*le.pxmid[1]/le.pxmid[0],De=le.yLabelMid+le.labelExtraY-(le.cyFinal+le.pxmid[1]);Math.abs(Ee)>Math.abs(De)?ke+="l"+De*le.pxmid[0]/le.pxmid[1]+","+De+"H"+(Se+le.labelExtraX+Me):ke+="l"+le.labelExtraX+","+Ee+"v"+(De-Ee)+"h"+Me}else ke+="V"+(le.yLabelMid+le.labelExtraY)+"h"+Me;h.ensureSingle(ae,"path","textline").call(T.stroke,Te.outsidetextfont.color).attr({"stroke-width":Math.min(2,Te.outsidetextfont.size/8),d:ke,fill:"none"})}else ae.select("path.textline").remove()})}(re,$),ie&&$.automargin){var me=b.bBox(X.node()),be=$.domain,ge=te.w*(be.x[1]-be.x[0]),de=te.h*(be.y[1]-be.y[0]),ve=(.5*ge-Z.r)/te.w,pe=(.5*de-Z.r)/te.h;k.autoMargin(W,"pie."+$.uid+".automargin",{xl:be.x[0]-ve,xr:be.x[1]+ve,yb:be.y[0]-pe,yt:be.y[1]+pe,l:Math.max(Z.cx-Z.r-me.left,0),r:Math.max(me.right-(Z.cx+Z.r),0),b:Math.max(me.bottom-(Z.cy+Z.r),0),t:Math.max(Z.cy-Z.r-me.top,0),pad:5})}})});setTimeout(function(){J.selectAll("tspan").each(function(){var K=M.select(this);K.attr("dy")&&K.attr("dy",K.attr("dy"))})},0)},formatSliceLabel:D,transformInsideText:v,determineInsideTextFont:g,positionTitleOutside:P,prerenderTitles:p,layoutAreas:R,attachFxHandlers:x,computeTransform:N}},22152:function(ee,z,e){"use strict";var M=e(33428),k=e(10528),o=e(82744).resizeText;ee.exports=function(T){var b=T._fullLayout._pielayer.selectAll(".trace");o(T,b,"pie"),b.each(function(h){var s=h[0].trace,t=M.select(this);t.style({opacity:s.opacity}),t.selectAll("path.surface").each(function(i){M.select(this).call(k,i,s,T)})})}},10528:function(ee,z,e){"use strict";var M=e(76308),k=e(69656).castOption,o=e(21552);ee.exports=function(T,b,h,s){var t=h.marker.line,i=k(t.color,b.pts)||M.defaultLine,n=k(t.width,b.pts)||0;T.call(o,b,h,s).style("stroke-width",n).call(M.stroke,i)}},35484:function(ee,z,e){"use strict";var M=e(52904);ee.exports={x:M.x,y:M.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:M.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(ee,z,e){"use strict";var M=e(67792).gl_pointcloud2d,k=e(3400).isArrayOrTypedArray,o=e(43080),T=e(19280).findExtremes,b=e(44928);function h(t,i){this.scene=t,this.uid=i,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=M(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var s=h.prototype;s.handlePick=function(t){var i=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*i],this.pickXYData[2*i+1]]:[this.pickXData[i],this.pickYData[i]],textLabel:k(this.textLabels)?this.textLabels[i]:this.textLabels,color:this.color,name:this.name,pointIndex:i,hoverinfo:this.hoverinfo}},s.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=b(t,{})},s.updateFast=function(t){var i,n,r,a,l,u,d=this.xData=this.pickXData=t.x,c=this.yData=this.pickYData=t.y,x=this.pickXYData=t.xy,g=t.xbounds&&t.ybounds,p=t.indices,v=this.bounds;if(x){if(r=x,i=x.length>>>1,g)v[0]=t.xbounds[0],v[2]=t.xbounds[1],v[1]=t.ybounds[0],v[3]=t.ybounds[1];else for(u=0;u<i;u++)a=r[2*u],l=r[2*u+1],a<v[0]&&(v[0]=a),a>v[2]&&(v[2]=a),l<v[1]&&(v[1]=l),l>v[3]&&(v[3]=l);if(p)n=p;else for(n=new Int32Array(i),u=0;u<i;u++)n[u]=u}else for(i=d.length,r=new Float32Array(2*i),n=new Int32Array(i),u=0;u<i;u++)a=d[u],l=c[u],n[u]=u,r[2*u]=a,r[2*u+1]=l,a<v[0]&&(v[0]=a),a>v[2]&&(v[2]=a),l<v[1]&&(v[1]=l),l>v[3]&&(v[3]=l);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=r;var m=o(t.marker.color),y=o(t.marker.border.color),_=t.opacity*t.marker.opacity;m[3]*=_,this.pointcloudOptions.color=m;var f=t.marker.blend;f===null&&(f=d.length<100||c.length<100),this.pointcloudOptions.blend=f,y[3]*=_,this.pointcloudOptions.borderColor=y;var S=t.marker.sizemin,w=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=S,this.pointcloudOptions.sizeMax=w,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,P=this.scene.yaxis,C=w/2||.5;t._extremes[E._id]=T(E,[v[0],v[2]],{ppad:C}),t._extremes[P._id]=T(P,[v[1],v[3]],{ppad:C})},s.dispose=function(){this.pointcloud.dispose()},ee.exports=function(t,i){var n=new h(t,i.uid);return n.update(i),n}},41904:function(ee,z,e){"use strict";var M=e(3400),k=e(35484);ee.exports=function(o,T,b){function h(s,t){return M.coerce(o,T,k,s,t)}h("x"),h("y"),h("xbounds"),h("ybounds"),o.xy&&o.xy instanceof Float32Array&&(T.xy=o.xy),o.indices&&o.indices instanceof Int32Array&&(T.indices=o.indices),h("text"),h("marker.color",b),h("marker.opacity"),h("marker.blend"),h("marker.sizemin"),h("marker.sizemax"),h("marker.border.color",b),h("marker.border.arearatio"),T._length=null}},156:function(ee,z,e){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),ee.exports={attributes:e(35484),supplyDefaults:e(41904),calc:e(41484),plot:e(11072),moduleType:"trace",name:"pointcloud",basePlotModule:e(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(ee,z,e){"use strict";var M=e(25376),k=e(45464),o=e(22548),T=e(55756),b=e(86968).u,h=e(21776).Ks,s=e(49084),t=e(31780).templatedArray,i=e(29736).descriptionOnlyNumbers,n=e(92880).extendFlat,r=e(67824).overrideAll;(ee.exports=r({hoverinfo:n({},k.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:b({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:M({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:h({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:h({},{keys:["value","label"]}),colorscales:t("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:n(s().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},10760:function(ee,z,e){"use strict";var M=e(67824).overrideAll,k=e(84888)._M,o=e(59596),T=e(65460),b=e(93972),h=e(86476),s=e(22676).prepSelect,t=e(3400),i=e(24040),n="sankey";function r(a,l){var u=a._fullData[l],d=a._fullLayout,c=d.dragmode,x=d.dragmode==="pan"?"move":"crosshair",g=u._bgRect;if(g&&c!=="pan"&&c!=="zoom"){b(g,x);var p={_id:"x",c2p:t.identity,_offset:u._sankey.translateX,_length:u._sankey.width},v={_id:"y",c2p:t.identity,_offset:u._sankey.translateY,_length:u._sankey.height},m={gd:a,element:g.node(),plotinfo:{id:l,xaxis:p,yaxis:v,fillRangeItems:t.noop},subplot:l,xaxes:[p],yaxes:[v],doneFnCompleted:function(y){var _,f=a._fullData[l],S=f.node.groups.slice(),w=[];function E(R){for(var j=f._sankey.graph.nodes,D=0;D<j.length;D++)if(j[D].pointNumber===R)return j[D]}for(var P=0;P<y.length;P++){var C=E(y[P].pointNumber);if(C)if(C.group){for(var O=0;O<C.childrenNodes.length;O++)w.push(C.childrenNodes[O].pointNumber);S[C.pointNumber-f.node._count]=!1}else w.push(C.pointNumber)}_=S.filter(Boolean).concat([w]),i.call("_guiRestyle",a,{"node.groups":[_]},l)},prepFn:function(y,_,f){s(y,_,f,m,c)}};h.init(m)}}z.name=n,z.baseLayoutAttrOverrides=M({hoverlabel:T.hoverlabel},"plot","nested"),z.plot=function(a){var l=k(a.calcdata,n)[0];o(a,l),z.updateFx(a)},z.clean=function(a,l,u,d){var c=d._has&&d._has(n),x=l._has&&l._has(n);c&&!x&&(d._paperdiv.selectAll(".sankey").remove(),d._paperdiv.selectAll(".bgsankey").remove())},z.updateFx=function(a){for(var l=0;l<a._fullData.length;l++)r(a,l)}},48068:function(ee,z,e){"use strict";var M=e(78484),k=e(3400),o=e(71688).wrap,T=k.isArrayOrTypedArray,b=k.isIndex,h=e(8932);ee.exports=function(s,t){var i=function(n){var r,a=n.node,l=n.link,u=[],d=T(l.color),c=T(l.hovercolor),x=T(l.customdata),g={},p={},v=l.colorscales.length;for(r=0;r<v;r++){var m=l.colorscales[r],y=h.extractScale(m,{cLetter:"c"}),_=h.makeColorScaleFunc(y);p[m.label]=_}var f=0;for(r=0;r<l.value.length;r++)l.source[r]>f&&(f=l.source[r]),l.target[r]>f&&(f=l.target[r]);var S,w=f+1;n.node._count=w;var E=n.node.groups,P={};for(r=0;r<E.length;r++){var C=E[r];for(S=0;S<C.length;S++){var O=C[S],R=w+r;P.hasOwnProperty(O)?k.warn("Node "+O+" is already part of a group."):P[O]=R}}var j={source:[],target:[]};for(r=0;r<l.value.length;r++){var D=l.value[r],N=l.source[r],W=l.target[r];if(D>0&&b(N,w)&&b(W,w)&&(!P.hasOwnProperty(N)||!P.hasOwnProperty(W)||P[N]!==P[W])){P.hasOwnProperty(W)&&(W=P[W]),P.hasOwnProperty(N)&&(N=P[N]),W=+W,g[N=+N]=g[W]=!0;var F="";l.label&&l.label[r]&&(F=l.label[r]);var U=null;F&&p.hasOwnProperty(F)&&(U=p[F]),u.push({pointNumber:r,label:F,color:d?l.color[r]:l.color,hovercolor:c?l.hovercolor[r]:l.hovercolor,customdata:x?l.customdata[r]:l.customdata,concentrationscale:U,source:N,target:W,value:+D}),j.source.push(N),j.target.push(W)}}var V=w+E.length,te=T(a.color),J=T(a.customdata),K=[];for(r=0;r<V;r++)if(g[r]){var X=a.label[r];K.push({group:r>w-1,childrenNodes:[],pointNumber:r,label:X,color:te?a.color[r]:a.color,customdata:J?a.customdata[r]:a.customdata})}var Z=!1;return function($,re,oe){for(var ie=k.init2dArray($,0),ue=0;ue<Math.min(re.length,oe.length);ue++)if(k.isIndex(re[ue],$)&&k.isIndex(oe[ue],$)){if(re[ue]===oe[ue])return!0;ie[re[ue]].push(oe[ue])}return M(ie).components.some(function(me){return me.length>1})}(V,j.source,j.target)&&(Z=!0),{circular:Z,links:u,nodes:K,groups:E,groupLookup:P}}(t);return o({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},11820:function(ee){"use strict";ee.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(ee,z,e){"use strict";var M=e(3400),k=e(41440),o=e(76308),T=e(49760),b=e(86968).Q,h=e(16132),s=e(31780),t=e(51272);function i(n,r){function a(l,u){return M.coerce(n,r,k.link.colorscales,l,u)}a("label"),a("cmin"),a("cmax"),a("colorscale")}ee.exports=function(n,r,a,l){function u(E,P){return M.coerce(n,r,k,E,P)}var d=M.extendDeep(l.hoverlabel,n.hoverlabel),c=n.node,x=s.newContainer(r,"node");function g(E,P){return M.coerce(c,x,k.node,E,P)}g("label"),g("groups"),g("x"),g("y"),g("pad"),g("thickness"),g("line.color"),g("line.width"),g("hoverinfo",n.hoverinfo),h(c,x,g,d),g("hovertemplate"),g("align");var p=l.colorway;g("color",x.label.map(function(E,P){return o.addOpacity(function(C){return p[C%p.length]}(P),.8)})),g("customdata");var v=n.link||{},m=s.newContainer(r,"link");function y(E,P){return M.coerce(v,m,k.link,E,P)}y("label"),y("arrowlen"),y("source"),y("target"),y("value"),y("line.color"),y("line.width"),y("hoverinfo",n.hoverinfo),h(v,m,y,d),y("hovertemplate");var _,f=T(l.paper_bgcolor).getLuminance()<.333,S=y("color",f?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)");function w(E){var P=T(E);if(!P.isValid())return E;var C=P.getAlpha();return C<=.8?P.setAlpha(C+.2):P=f?P.brighten():P.darken(),P.toRgbString()}y("hovercolor",Array.isArray(S)?S.map(w):w(S)),y("customdata"),t(v,m,{name:"colorscales",handleItemDefaults:i}),b(r,l,u),u("orientation"),u("valueformat"),u("valuesuffix"),x.x.length&&x.y.length&&(_="freeform"),u("arrangement",_),M.coerceFont(u,"textfont",M.extendFlat({},l.font)),r._length=null}},45499:function(ee,z,e){"use strict";ee.exports={attributes:e(41440),supplyDefaults:e(47140),calc:e(48068),plot:e(59596),moduleType:"trace",name:"sankey",basePlotModule:e(10760),selectPoints:e(81128),categories:["noOpacity"],meta:{}}},59596:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=k.numberFormat,T=e(83248),b=e(93024),h=e(76308),s=e(11820).cn,t=k._;function i(v){return v!==""}function n(v,m){return v.filter(function(y){return y.key===m.traceId})}function r(v,m){M.select(v).select("path").style("fill-opacity",m),M.select(v).select("rect").style("fill-opacity",m)}function a(v){M.select(v).select("text.name").style("fill","black")}function l(v){return function(m){return v.node.sourceLinks.indexOf(m.link)!==-1||v.node.targetLinks.indexOf(m.link)!==-1}}function u(v){return function(m){return m.node.sourceLinks.indexOf(v.link)!==-1||m.node.targetLinks.indexOf(v.link)!==-1}}function d(v,m,y){m&&y&&n(y,m).selectAll("."+s.sankeyLink).filter(l(m)).call(x.bind(0,m,y,!1))}function c(v,m,y){m&&y&&n(y,m).selectAll("."+s.sankeyLink).filter(l(m)).call(g.bind(0,m,y,!1))}function x(v,m,y,_){_.style("fill",function(f){if(!f.link.concentrationscale)return f.tinyColorHoverHue}).style("fill-opacity",function(f){if(!f.link.concentrationscale)return f.tinyColorHoverAlpha}),_.each(function(f){var S=f.link.label;S!==""&&n(m,v).selectAll("."+s.sankeyLink).filter(function(w){return w.link.label===S}).style("fill",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverHue}).style("fill-opacity",function(w){if(!w.link.concentrationscale)return w.tinyColorHoverAlpha})}),y&&n(m,v).selectAll("."+s.sankeyNode).filter(u(v)).call(d)}function g(v,m,y,_){_.style("fill",function(f){return f.tinyColorHue}).style("fill-opacity",function(f){return f.tinyColorAlpha}),_.each(function(f){var S=f.link.label;S!==""&&n(m,v).selectAll("."+s.sankeyLink).filter(function(w){return w.link.label===S}).style("fill",function(w){return w.tinyColorHue}).style("fill-opacity",function(w){return w.tinyColorAlpha})}),y&&n(m,v).selectAll(s.sankeyNode).filter(u(v)).call(c)}function p(v,m){var y=v.hoverlabel||{},_=k.nestedProperty(y,m).get();return!Array.isArray(_)&&_}ee.exports=function(v,m){for(var y=v._fullLayout,_=y._paper,f=y._size,S=0;S<v._fullData.length;S++)if(v._fullData[S].visible&&v._fullData[S].type===s.sankey&&!v._fullData[S]._viewInitial){var w=v._fullData[S].node;v._fullData[S]._viewInitial={node:{groups:w.groups.slice(),x:w.x.slice(),y:w.y.slice()}}}var E=t(v,"source:")+" ",P=t(v,"target:")+" ",C=t(v,"concentration:")+" ",O=t(v,"incoming flow count:")+" ",R=t(v,"outgoing flow count:")+" ";T(v,_,m,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{linkEvents:{hover:function(j,D,N){v._fullLayout.hovermode!==!1&&(M.select(j).call(x.bind(0,D,N,!0)),D.link.trace.link.hoverinfo!=="skip"&&(D.link.fullData=D.link.trace,v.emit("plotly_hover",{event:M.event,points:[D.link]})))},follow:function(j,D){if(v._fullLayout.hovermode!==!1){var N=D.link.trace.link;if(N.hoverinfo!=="none"&&N.hoverinfo!=="skip"){for(var W=[],F=0,U=0;U<D.flow.links.length;U++){var V=D.flow.links[U];if(v._fullLayout.hovermode!=="closest"||D.link.pointNumber===V.pointNumber){D.link.pointNumber===V.pointNumber&&(F=U),V.fullData=V.trace,N=D.link.trace.link;var te=K(V),J={valueLabel:o(D.valueFormat)(V.value)+D.valueSuffix};W.push({x:te[0],y:te[1],name:J.valueLabel,text:[V.label||"",E+V.source.label,P+V.target.label,V.concentrationscale?C+o("%0.2f")(V.flow.labelConcentration):""].filter(i).join("<br>"),color:p(N,"bgcolor")||h.addOpacity(V.color,1),borderColor:p(N,"bordercolor"),fontFamily:p(N,"font.family"),fontSize:p(N,"font.size"),fontColor:p(N,"font.color"),nameLength:p(N,"namelength"),textAlign:p(N,"align"),idealAlign:M.event.x<te[0]?"right":"left",hovertemplate:N.hovertemplate,hovertemplateLabels:J,eventData:[V]})}}b.loneHover(W,{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:v,anchorIndex:F}).each(function(){D.link.concentrationscale||r(this,.65),a(this)})}}function K(X){var Z,$;X.circular?(Z=(X.circularPathData.leftInnerExtent+X.circularPathData.rightInnerExtent)/2,$=X.circularPathData.verticalFullExtent):(Z=(X.source.x1+X.target.x0)/2,$=(X.y0+X.y1)/2);var re=[Z,$];return X.trace.orientation==="v"&&re.reverse(),re[0]+=D.parent.translateX,re[1]+=D.parent.translateY,re}},unhover:function(j,D,N){v._fullLayout.hovermode!==!1&&(M.select(j).call(g.bind(0,D,N,!0)),D.link.trace.link.hoverinfo!=="skip"&&(D.link.fullData=D.link.trace,v.emit("plotly_unhover",{event:M.event,points:[D.link]})),b.loneUnhover(y._hoverlayer.node()))},select:function(j,D){var N=D.link;N.originalEvent=M.event,v._hoverdata=[N],b.click(v,{target:!0})}},nodeEvents:{hover:function(j,D,N){v._fullLayout.hovermode!==!1&&(M.select(j).call(d,D,N),D.node.trace.node.hoverinfo!=="skip"&&(D.node.fullData=D.node.trace,v.emit("plotly_hover",{event:M.event,points:[D.node]})))},follow:function(j,D){if(v._fullLayout.hovermode!==!1){var N=D.node.trace.node;if(N.hoverinfo!=="none"&&N.hoverinfo!=="skip"){var W=M.select(j).select("."+s.nodeRect),F=v._fullLayout._paperdiv.node().getBoundingClientRect(),U=W.node().getBoundingClientRect(),V=U.left-2-F.left,te=U.right+2-F.left,J=U.top+U.height/4-F.top,K={valueLabel:o(D.valueFormat)(D.node.value)+D.valueSuffix};D.node.fullData=D.node.trace,v._fullLayout._calcInverseTransform(v);var X=v._fullLayout._invScaleX,Z=v._fullLayout._invScaleY,$=b.loneHover({x0:X*V,x1:X*te,y:Z*J,name:o(D.valueFormat)(D.node.value)+D.valueSuffix,text:[D.node.label,O+D.node.targetLinks.length,R+D.node.sourceLinks.length].filter(i).join("<br>"),color:p(N,"bgcolor")||D.tinyColorHue,borderColor:p(N,"bordercolor"),fontFamily:p(N,"font.family"),fontSize:p(N,"font.size"),fontColor:p(N,"font.color"),nameLength:p(N,"namelength"),textAlign:p(N,"align"),idealAlign:"left",hovertemplate:N.hovertemplate,hovertemplateLabels:K,eventData:[D.node]},{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:v});r($,.85),a($)}}},unhover:function(j,D,N){v._fullLayout.hovermode!==!1&&(M.select(j).call(c,D,N),D.node.trace.node.hoverinfo!=="skip"&&(D.node.fullData=D.node.trace,v.emit("plotly_unhover",{event:M.event,points:[D.node]})),b.loneUnhover(y._hoverlayer.node()))},select:function(j,D,N){var W=D.node;W.originalEvent=M.event,v._hoverdata=[W],M.select(j).call(c,D,N),b.click(v,{target:!0})}}})}},83248:function(ee,z,e){"use strict";var M=e(49812),k=e(67756).Gz,o=e(33428),T=e(26800),b=e(48932),h=e(11820),s=e(49760),t=e(76308),i=e(43616),n=e(3400),r=n.strTranslate,a=n.strRotate,l=e(71688),u=l.keyFun,d=l.repeat,c=l.unwrap,x=e(72736),g=e(24040),p=e(84284),v=p.CAP_SHIFT,m=p.LINE_SPACING;function y(U,V,te){var J,K=c(V),X=K.trace,Z=X.domain,$=X.orientation==="h",re=X.node.pad,oe=X.node.thickness,ie={justify:T.sankeyJustify,left:T.sankeyLeft,right:T.sankeyRight,center:T.sankeyCenter}[X.node.align],ue=U.width*(Z.x[1]-Z.x[0]),me=U.height*(Z.y[1]-Z.y[0]),be=K._nodes,ge=K._links,de=K.circular;(J=de?b.sankeyCircular().circularLinkGap(0):T.sankey()).iterations(h.sankeyIterations).size($?[ue,me]:[me,ue]).nodeWidth(oe).nodePadding(re).nodeId(function(Ee){return Ee.pointNumber}).nodeAlign(ie).nodes(be).links(ge);var ve,pe,_e,Te=J();for(var le in J.nodePadding()<re&&n.warn("node.pad was reduced to ",J.nodePadding()," to fit within the figure."),K._groupLookup){var ae,he=parseInt(K._groupLookup[le]);for(ve=0;ve<Te.nodes.length;ve++)if(Te.nodes[ve].pointNumber===he){ae=Te.nodes[ve];break}if(ae){var Se={pointNumber:parseInt(le),x0:ae.x0,x1:ae.x1,y0:ae.y0,y1:ae.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Te.nodes.unshift(Se),ae.childrenNodes.unshift(Se)}}if(function(){for(ve=0;ve<Te.nodes.length;ve++){var Ee,De,fe=Te.nodes[ve],xe={};for(pe=0;pe<fe.targetLinks.length;pe++)Ee=(De=fe.targetLinks[pe]).source.pointNumber+":"+De.target.pointNumber,xe.hasOwnProperty(Ee)||(xe[Ee]=[]),xe[Ee].push(De);var we=Object.keys(xe);for(pe=0;pe<we.length;pe++){var Oe=xe[Ee=we[pe]],ze=0,Pe={};for(_e=0;_e<Oe.length;_e++)Pe[(De=Oe[_e]).label]||(Pe[De.label]=0),Pe[De.label]+=De.value,ze+=De.value;for(_e=0;_e<Oe.length;_e++)(De=Oe[_e]).flow={value:ze,labelConcentration:Pe[De.label]/ze,concentration:De.value/ze,links:Oe},De.concentrationscale&&(De.color=s(De.concentrationscale(De.flow.labelConcentration)))}var Ue=0;for(pe=0;pe<fe.sourceLinks.length;pe++)Ue+=fe.sourceLinks[pe].value;for(pe=0;pe<fe.sourceLinks.length;pe++)(De=fe.sourceLinks[pe]).concentrationOut=De.value/Ue;var Ve=0;for(pe=0;pe<fe.targetLinks.length;pe++)Ve+=fe.targetLinks[pe].value;for(pe=0;pe<fe.targetLinks.length;pe++)(De=fe.targetLinks[pe]).concenrationIn=De.value/Ve}}(),X.node.x.length&&X.node.y.length){for(ve=0;ve<Math.min(X.node.x.length,X.node.y.length,Te.nodes.length);ve++)if(X.node.x[ve]&&X.node.y[ve]){var ke=[X.node.x[ve]*ue,X.node.y[ve]*me];Te.nodes[ve].x0=ke[0]-oe/2,Te.nodes[ve].x1=ke[0]+oe/2;var Me=Te.nodes[ve].y1-Te.nodes[ve].y0;Te.nodes[ve].y0=ke[1]-Me/2,Te.nodes[ve].y1=ke[1]+Me/2}X.arrangement==="snap"&&function(Ee){var De,fe,xe=Ee.map(function(Ue,Ve){return{x0:Ue.x0,index:Ve}}).sort(function(Ue,Ve){return Ue.x0-Ve.x0}),we=[],Oe=-1,ze=-1/0;for(ve=0;ve<xe.length;ve++){var Pe=Ee[xe[ve].index];Pe.x0>ze+oe&&(Oe+=1,De=Pe.x0),ze=Pe.x0,we[Oe]||(we[Oe]=[]),we[Oe].push(Pe),fe=De-Pe.x0,Pe.x0+=fe,Pe.x1+=fe}return we}(be=Te.nodes).forEach(function(Ee){var De,fe,xe,we=0,Oe=Ee.length;for(Ee.sort(function(ze,Pe){return ze.y0-Pe.y0}),xe=0;xe<Oe;++xe)(De=Ee[xe]).y0>=we||(fe=we-De.y0)>1e-6&&(De.y0+=fe,De.y1+=fe),we=De.y1+re}),J.update(Te)}return{circular:de,key:te,trace:X,guid:n.randstr(),horizontal:$,width:ue,height:me,nodePad:X.node.pad,nodeLineColor:X.node.line.color,nodeLineWidth:X.node.line.width,linkLineColor:X.link.line.color,linkLineWidth:X.link.line.width,linkArrowLength:X.link.arrowlen,valueFormat:X.valueformat,valueSuffix:X.valuesuffix,textFont:X.textfont,translateX:Z.x[0]*U.width+U.margin.l,translateY:U.height-Z.y[1]*U.height+U.margin.t,dragParallel:$?me:ue,dragPerpendicular:$?ue:me,arrangement:X.arrangement,sankey:J,graph:Te,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(U,V,te){var J=s(V.color),K=s(V.hovercolor),X=V.source.label+"|"+V.target.label+"__"+te;return V.trace=U.trace,V.curveNumber=U.trace.index,{circular:U.circular,key:X,traceId:U.key,pointNumber:V.pointNumber,link:V,tinyColorHue:t.tinyRGB(J),tinyColorAlpha:J.getAlpha(),tinyColorHoverHue:t.tinyRGB(K),tinyColorHoverAlpha:K.getAlpha(),linkPath:f,linkLineColor:U.linkLineColor,linkLineWidth:U.linkLineWidth,linkArrowLength:U.linkArrowLength,valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,parent:U,interactionState:U.interactionState,flow:V.flow}}function f(){return function(U){var V=U.linkArrowLength;if(U.link.circular)return function(ve,pe){var _e=ve.width/2,Te=ve.circularPathData;return ve.circularLinkType==="top"?"M "+(Te.targetX-pe)+" "+(Te.targetY+_e)+" L"+(Te.rightInnerExtent-pe)+" "+(Te.targetY+_e)+"A"+(Te.rightLargeArcRadius+_e)+" "+(Te.rightSmallArcRadius+_e)+" 0 0 1 "+(Te.rightFullExtent-_e-pe)+" "+(Te.targetY-Te.rightSmallArcRadius)+"L"+(Te.rightFullExtent-_e-pe)+" "+Te.verticalRightInnerExtent+"A"+(Te.rightLargeArcRadius+_e)+" "+(Te.rightLargeArcRadius+_e)+" 0 0 1 "+(Te.rightInnerExtent-pe)+" "+(Te.verticalFullExtent-_e)+"L"+Te.leftInnerExtent+" "+(Te.verticalFullExtent-_e)+"A"+(Te.leftLargeArcRadius+_e)+" "+(Te.leftLargeArcRadius+_e)+" 0 0 1 "+(Te.leftFullExtent+_e)+" "+Te.verticalLeftInnerExtent+"L"+(Te.leftFullExtent+_e)+" "+(Te.sourceY-Te.leftSmallArcRadius)+"A"+(Te.leftLargeArcRadius+_e)+" "+(Te.leftSmallArcRadius+_e)+" 0 0 1 "+Te.leftInnerExtent+" "+(Te.sourceY+_e)+"L"+Te.sourceX+" "+(Te.sourceY+_e)+"L"+Te.sourceX+" "+(Te.sourceY-_e)+"L"+Te.leftInnerExtent+" "+(Te.sourceY-_e)+"A"+(Te.leftLargeArcRadius-_e)+" "+(Te.leftSmallArcRadius-_e)+" 0 0 0 "+(Te.leftFullExtent-_e)+" "+(Te.sourceY-Te.leftSmallArcRadius)+"L"+(Te.leftFullExtent-_e)+" "+Te.verticalLeftInnerExtent+"A"+(Te.leftLargeArcRadius-_e)+" "+(Te.leftLargeArcRadius-_e)+" 0 0 0 "+Te.leftInnerExtent+" "+(Te.verticalFullExtent+_e)+"L"+(Te.rightInnerExtent-pe)+" "+(Te.verticalFullExtent+_e)+"A"+(Te.rightLargeArcRadius-_e)+" "+(Te.rightLargeArcRadius-_e)+" 0 0 0 "+(Te.rightFullExtent+_e-pe)+" "+Te.verticalRightInnerExtent+"L"+(Te.rightFullExtent+_e-pe)+" "+(Te.targetY-Te.rightSmallArcRadius)+"A"+(Te.rightLargeArcRadius-_e)+" "+(Te.rightSmallArcRadius-_e)+" 0 0 0 "+(Te.rightInnerExtent-pe)+" "+(Te.targetY-_e)+"L"+(Te.targetX-pe)+" "+(Te.targetY-_e)+(pe>0?"L"+Te.targetX+" "+Te.targetY:"")+"Z":"M "+(Te.targetX-pe)+" "+(Te.targetY-_e)+" L"+(Te.rightInnerExtent-pe)+" "+(Te.targetY-_e)+"A"+(Te.rightLargeArcRadius+_e)+" "+(Te.rightSmallArcRadius+_e)+" 0 0 0 "+(Te.rightFullExtent-_e-pe)+" "+(Te.targetY+Te.rightSmallArcRadius)+"L"+(Te.rightFullExtent-_e-pe)+" "+Te.verticalRightInnerExtent+"A"+(Te.rightLargeArcRadius+_e)+" "+(Te.rightLargeArcRadius+_e)+" 0 0 0 "+(Te.rightInnerExtent-pe)+" "+(Te.verticalFullExtent+_e)+"L"+Te.leftInnerExtent+" "+(Te.verticalFullExtent+_e)+"A"+(Te.leftLargeArcRadius+_e)+" "+(Te.leftLargeArcRadius+_e)+" 0 0 0 "+(Te.leftFullExtent+_e)+" "+Te.verticalLeftInnerExtent+"L"+(Te.leftFullExtent+_e)+" "+(Te.sourceY+Te.leftSmallArcRadius)+"A"+(Te.leftLargeArcRadius+_e)+" "+(Te.leftSmallArcRadius+_e)+" 0 0 0 "+Te.leftInnerExtent+" "+(Te.sourceY-_e)+"L"+Te.sourceX+" "+(Te.sourceY-_e)+"L"+Te.sourceX+" "+(Te.sourceY+_e)+"L"+Te.leftInnerExtent+" "+(Te.sourceY+_e)+"A"+(Te.leftLargeArcRadius-_e)+" "+(Te.leftSmallArcRadius-_e)+" 0 0 1 "+(Te.leftFullExtent-_e)+" "+(Te.sourceY+Te.leftSmallArcRadius)+"L"+(Te.leftFullExtent-_e)+" "+Te.verticalLeftInnerExtent+"A"+(Te.leftLargeArcRadius-_e)+" "+(Te.leftLargeArcRadius-_e)+" 0 0 1 "+Te.leftInnerExtent+" "+(Te.verticalFullExtent-_e)+"L"+(Te.rightInnerExtent-pe)+" "+(Te.verticalFullExtent-_e)+"A"+(Te.rightLargeArcRadius-_e)+" "+(Te.rightLargeArcRadius-_e)+" 0 0 1 "+(Te.rightFullExtent+_e-pe)+" "+Te.verticalRightInnerExtent+"L"+(Te.rightFullExtent+_e-pe)+" "+(Te.targetY+Te.rightSmallArcRadius)+"A"+(Te.rightLargeArcRadius-_e)+" "+(Te.rightSmallArcRadius-_e)+" 0 0 1 "+(Te.rightInnerExtent-pe)+" "+(Te.targetY+_e)+"L"+(Te.targetX-pe)+" "+(Te.targetY+_e)+(pe>0?"L"+Te.targetX+" "+Te.targetY:"")+"Z"}(U.link,V);var te=Math.abs((U.link.target.x0-U.link.source.x1)/2);V>te&&(V=te);var J=U.link.source.x1,K=U.link.target.x0-V,X=k(J,K),Z=X(.5),$=X(.5),re=U.link.y0-U.link.width/2,oe=U.link.y0+U.link.width/2,ie=U.link.y1-U.link.width/2,ue=U.link.y1+U.link.width/2,me="M"+J+","+re,be="C"+Z+","+re+" "+$+","+ie+" "+K+","+ie,ge="C"+$+","+ue+" "+Z+","+oe+" "+J+","+oe,de=V>0?"L"+(K+V)+","+(ie+U.link.width/2):"";return me+be+(de+="L"+K+","+ue)+ge+"Z"}}function S(U,V){var te=s(V.color),J=h.nodePadAcross,K=U.nodePad/2;V.dx=V.x1-V.x0,V.dy=V.y1-V.y0;var X=V.dx,Z=Math.max(.5,V.dy),$="node_"+V.pointNumber;return V.group&&($=n.randstr()),V.trace=U.trace,V.curveNumber=U.trace.index,{index:V.pointNumber,key:$,partOfGroup:V.partOfGroup||!1,group:V.group,traceId:U.key,trace:U.trace,node:V,nodePad:U.nodePad,nodeLineColor:U.nodeLineColor,nodeLineWidth:U.nodeLineWidth,textFont:U.textFont,size:U.horizontal?U.height:U.width,visibleWidth:Math.ceil(X),visibleHeight:Z,zoneX:-J,zoneY:-K,zoneWidth:X+2*J,zoneHeight:Z+2*K,labelY:U.horizontal?V.dy/2+1:V.dx/2+1,left:V.originalLayer===1,sizeAcross:U.width,forceLayouts:U.forceLayouts,horizontal:U.horizontal,darkBackground:te.getBrightness()<=128,tinyColorHue:t.tinyRGB(te),tinyColorAlpha:te.getAlpha(),valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,graph:U.graph,arrangement:U.arrangement,uniqueNodeLabelPathId:[U.guid,U.key,$].join("_"),interactionState:U.interactionState,figure:U}}function w(U){U.attr("transform",function(V){return r(V.node.x0.toFixed(3),V.node.y0.toFixed(3))})}function E(U){U.call(w)}function P(U,V){U.call(E),V.attr("d",f())}function C(U){U.attr("width",function(V){return V.node.x1-V.node.x0}).attr("height",function(V){return V.visibleHeight})}function O(U){return U.link.width>1||U.linkLineWidth>0}function R(U){return r(U.translateX,U.translateY)+(U.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function j(U,V,te){U.on(".basic",null).on("mouseover.basic",function(J){J.interactionState.dragInProgress||J.partOfGroup||(te.hover(this,J,V),J.interactionState.hovered=[this,J])}).on("mousemove.basic",function(J){J.interactionState.dragInProgress||J.partOfGroup||(te.follow(this,J),J.interactionState.hovered=[this,J])}).on("mouseout.basic",function(J){J.interactionState.dragInProgress||J.partOfGroup||(te.unhover(this,J,V),J.interactionState.hovered=!1)}).on("click.basic",function(J){J.interactionState.hovered&&(te.unhover(this,J,V),J.interactionState.hovered=!1),J.interactionState.dragInProgress||J.partOfGroup||te.select(this,J,V)})}function D(U,V,te,J){var K=o.behavior.drag().origin(function(X){return{x:X.node.x0+X.visibleWidth/2,y:X.node.y0+X.visibleHeight/2}}).on("dragstart",function(X){if(X.arrangement!=="fixed"&&(n.ensureSingle(J._fullLayout._infolayer,"g","dragcover",function($){J._fullLayout._dragCover=$}),n.raiseToTop(this),X.interactionState.dragInProgress=X.node,W(X.node),X.interactionState.hovered&&(te.nodeEvents.unhover.apply(0,X.interactionState.hovered),X.interactionState.hovered=!1),X.arrangement==="snap")){var Z=X.traceId+"|"+X.key;X.forceLayouts[Z]?X.forceLayouts[Z].alpha(1):function($,re,oe,ie){(function(me){for(var be=0;be<me.length;be++)me[be].y=(me[be].y0+me[be].y1)/2,me[be].x=(me[be].x0+me[be].x1)/2})(oe.graph.nodes);var ue=oe.graph.nodes.filter(function(me){return me.originalX===oe.node.originalX}).filter(function(me){return!me.partOfGroup});oe.forceLayouts[re]=M.forceSimulation(ue).alphaDecay(0).force("collide",M.forceCollide().radius(function(me){return me.dy/2+oe.nodePad/2}).strength(1).iterations(h.forceIterations)).force("constrain",function(me,be,ge,de){return function(){for(var ve=0,pe=0;pe<ge.length;pe++){var _e=ge[pe];_e===de.interactionState.dragInProgress?(_e.x=_e.lastDraggedX,_e.y=_e.lastDraggedY):(_e.vx=(_e.originalX-_e.x)/h.forceTicksPerFrame,_e.y=Math.min(de.size-_e.dy/2,Math.max(_e.dy/2,_e.y))),ve=Math.max(ve,Math.abs(_e.vx),Math.abs(_e.vy))}!de.interactionState.dragInProgress&&ve<.1&&de.forceLayouts[be].alpha()>0&&de.forceLayouts[be].alpha(0)}}(0,re,ue,oe)).stop()}(0,Z,X),function($,re,oe,ie,ue){window.requestAnimationFrame(function me(){var be;for(be=0;be<h.forceTicksPerFrame;be++)oe.forceLayouts[ie].tick();if(function(de){for(var ve=0;ve<de.length;ve++)de[ve].y0=de[ve].y-de[ve].dy/2,de[ve].y1=de[ve].y0+de[ve].dy,de[ve].x0=de[ve].x-de[ve].dx/2,de[ve].x1=de[ve].x0+de[ve].dx}(oe.graph.nodes),oe.sankey.update(oe.graph),P($.filter(F(oe)),re),oe.forceLayouts[ie].alpha()>0)window.requestAnimationFrame(me);else{var ge=oe.node.originalX;oe.node.x0=ge-oe.visibleWidth/2,oe.node.x1=ge+oe.visibleWidth/2,N(oe,ue)}})}(U,V,X,Z,J)}}).on("drag",function(X){if(X.arrangement!=="fixed"){var Z=o.event.x,$=o.event.y;X.arrangement==="snap"?(X.node.x0=Z-X.visibleWidth/2,X.node.x1=Z+X.visibleWidth/2,X.node.y0=$-X.visibleHeight/2,X.node.y1=$+X.visibleHeight/2):(X.arrangement==="freeform"&&(X.node.x0=Z-X.visibleWidth/2,X.node.x1=Z+X.visibleWidth/2),$=Math.max(0,Math.min(X.size-X.visibleHeight/2,$)),X.node.y0=$-X.visibleHeight/2,X.node.y1=$+X.visibleHeight/2),W(X.node),X.arrangement!=="snap"&&(X.sankey.update(X.graph),P(U.filter(F(X)),V))}}).on("dragend",function(X){if(X.arrangement!=="fixed"){X.interactionState.dragInProgress=!1;for(var Z=0;Z<X.node.childrenNodes.length;Z++)X.node.childrenNodes[Z].x=X.node.x,X.node.childrenNodes[Z].y=X.node.y;X.arrangement!=="snap"&&N(X,J)}});U.on(".drag",null).call(K)}function N(U,V){for(var te=[],J=[],K=0;K<U.graph.nodes.length;K++){var X=(U.graph.nodes[K].x0+U.graph.nodes[K].x1)/2,Z=(U.graph.nodes[K].y0+U.graph.nodes[K].y1)/2;te.push(X/U.figure.width),J.push(Z/U.figure.height)}g.call("_guiRestyle",V,{"node.x":[te],"node.y":[J]},U.trace.index).then(function(){V._fullLayout._dragCover&&V._fullLayout._dragCover.remove()})}function W(U){U.lastDraggedX=U.x0+U.dx/2,U.lastDraggedY=U.y0+U.dy/2}function F(U){return function(V){return V.node.originalX===U.node.originalX}}ee.exports=function(U,V,te,J,K){var X=U._context.staticPlot,Z=!1;n.ensureSingle(U._fullLayout._infolayer,"g","first-render",function(){Z=!0});var $=U._fullLayout._dragCover,re=te.filter(function(ve){return c(ve).trace.visible}).map(y.bind(null,J)),oe=V.selectAll("."+h.cn.sankey).data(re,u);oe.exit().remove(),oe.enter().append("g").classed(h.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",X?"none":"auto").attr("transform",R),oe.each(function(ve,pe){U._fullData[pe]._sankey=ve;var _e="bgsankey-"+ve.trace.uid+"-"+pe;n.ensureSingle(U._fullLayout._draggers,"rect",_e),U._fullData[pe]._bgRect=o.select("."+_e),U._fullData[pe]._bgRect.style("pointer-events",X?"none":"all").attr("width",ve.width).attr("height",ve.height).attr("x",ve.translateX).attr("y",ve.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),oe.transition().ease(h.ease).duration(h.duration).attr("transform",R);var ie=oe.selectAll("."+h.cn.sankeyLinks).data(d,u);ie.enter().append("g").classed(h.cn.sankeyLinks,!0).style("fill","none");var ue=ie.selectAll("."+h.cn.sankeyLink).data(function(ve){return ve.graph.links.filter(function(pe){return pe.value}).map(_.bind(null,ve))},u);ue.enter().append("path").classed(h.cn.sankeyLink,!0).call(j,oe,K.linkEvents),ue.style("stroke",function(ve){return O(ve)?t.tinyRGB(s(ve.linkLineColor)):ve.tinyColorHue}).style("stroke-opacity",function(ve){return O(ve)?t.opacity(ve.linkLineColor):ve.tinyColorAlpha}).style("fill",function(ve){return ve.tinyColorHue}).style("fill-opacity",function(ve){return ve.tinyColorAlpha}).style("stroke-width",function(ve){return O(ve)?ve.linkLineWidth:1}).attr("d",f()),ue.style("opacity",function(){return U._context.staticPlot||Z||$?1:0}).transition().ease(h.ease).duration(h.duration).style("opacity",1),ue.exit().transition().ease(h.ease).duration(h.duration).style("opacity",0).remove();var me=oe.selectAll("."+h.cn.sankeyNodeSet).data(d,u);me.enter().append("g").classed(h.cn.sankeyNodeSet,!0),me.style("cursor",function(ve){switch(ve.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var be=me.selectAll("."+h.cn.sankeyNode).data(function(ve){var pe=ve.graph.nodes;return function(_e){var Te,le=[];for(Te=0;Te<_e.length;Te++)_e[Te].originalX=(_e[Te].x0+_e[Te].x1)/2,_e[Te].originalY=(_e[Te].y0+_e[Te].y1)/2,le.indexOf(_e[Te].originalX)===-1&&le.push(_e[Te].originalX);for(le.sort(function(ae,he){return ae-he}),Te=0;Te<_e.length;Te++)_e[Te].originalLayerIndex=le.indexOf(_e[Te].originalX),_e[Te].originalLayer=_e[Te].originalLayerIndex/(le.length-1)}(pe),pe.map(S.bind(null,ve))},u);be.enter().append("g").classed(h.cn.sankeyNode,!0).call(w).style("opacity",function(ve){return!U._context.staticPlot&&!Z||ve.partOfGroup?0:1}),be.call(j,oe,K.nodeEvents).call(D,ue,K,U),be.transition().ease(h.ease).duration(h.duration).call(w).style("opacity",function(ve){return ve.partOfGroup?0:1}),be.exit().transition().ease(h.ease).duration(h.duration).style("opacity",0).remove();var ge=be.selectAll("."+h.cn.nodeRect).data(d);ge.enter().append("rect").classed(h.cn.nodeRect,!0).call(C),ge.style("stroke-width",function(ve){return ve.nodeLineWidth}).style("stroke",function(ve){return t.tinyRGB(s(ve.nodeLineColor))}).style("stroke-opacity",function(ve){return t.opacity(ve.nodeLineColor)}).style("fill",function(ve){return ve.tinyColorHue}).style("fill-opacity",function(ve){return ve.tinyColorAlpha}),ge.transition().ease(h.ease).duration(h.duration).call(C);var de=be.selectAll("."+h.cn.nodeLabel).data(d);de.enter().append("text").classed(h.cn.nodeLabel,!0).style("cursor","default"),de.attr("data-notex",1).text(function(ve){return ve.node.label}).each(function(ve){var pe=o.select(this);i.font(pe,ve.textFont),x.convertToTspans(pe,U)}).style("text-shadow",x.makeTextShadow(U._fullLayout.paper_bgcolor)).attr("text-anchor",function(ve){return ve.horizontal&&ve.left?"end":"start"}).attr("transform",function(ve){var pe=o.select(this),_e=x.lineCount(pe),Te=ve.textFont.size*((_e-1)*m-v),le=ve.nodeLineWidth/2+3,ae=((ve.horizontal?ve.visibleHeight:ve.visibleWidth)-Te)/2;ve.horizontal&&(ve.left?le=-le:le+=ve.visibleWidth);var he=ve.horizontal?"":"scale(-1,1)"+a(90);return r(ve.horizontal?le:ae,ve.horizontal?ae:le)+he}),de.transition().ease(h.ease).duration(h.duration)}},81128:function(ee){"use strict";ee.exports=function(z,e){for(var M=[],k=z.cd[0].trace,o=k._sankey.graph.nodes,T=0;T<o.length;T++){var b=o[T];if(!b.partOfGroup){var h=[(b.x0+b.x1)/2,(b.y0+b.y1)/2];k.orientation==="v"&&h.reverse(),e&&e.contains(h,!1,T,z)&&M.push({pointNumber:b.pointNumber})}}return M}},20148:function(ee,z,e){"use strict";var M=e(3400);ee.exports=function(k,o){for(var T=0;T<k.length;T++)k[T].i=T;M.mergeArray(o.text,k,"tx"),M.mergeArray(o.texttemplate,k,"txt"),M.mergeArray(o.hovertext,k,"htx"),M.mergeArray(o.customdata,k,"data"),M.mergeArray(o.textposition,k,"tp"),o.textfont&&(M.mergeArrayCastPositive(o.textfont.size,k,"ts"),M.mergeArray(o.textfont.color,k,"tc"),M.mergeArray(o.textfont.family,k,"tf"));var b=o.marker;if(b){M.mergeArrayCastPositive(b.size,k,"ms"),M.mergeArrayCastPositive(b.opacity,k,"mo"),M.mergeArray(b.symbol,k,"mx"),M.mergeArray(b.angle,k,"ma"),M.mergeArray(b.standoff,k,"mf"),M.mergeArray(b.color,k,"mc");var h=b.line;b.line&&(M.mergeArray(h.color,k,"mlc"),M.mergeArrayCastPositive(h.width,k,"mlw"));var s=b.gradient;s&&s.type!=="none"&&(M.mergeArray(s.type,k,"mgt"),M.mergeArray(s.color,k,"mgc"))}}},52904:function(ee,z,e){"use strict";var M=e(29736).axisHoverFormat,k=e(21776).Gw,o=e(21776).Ks,T=e(49084),b=e(25376),h=e(98192).u,s=e(98192).c,t=e(43616),i=e(88200),n=e(92880).extendFlat,r=e(98304);ee.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:M("x"),yhoverformat:M("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:o({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:n({},h,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:r(!0),fillgradient:n({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:s,marker:n({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:n({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:b({editType:"calc",colorEditType:"style",arrayOk:!0})}},16356:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=e(54460),T=e(1220),b=e(39032).BADNUM,h=e(43028),s=e(90136),t=e(20148),i=e(4500);function n(d,c,x,g,p,v,m){var y=c._length,_=d._fullLayout,f=x._id,S=g._id,w=_._firstScatter[l(c)]===c.uid,E=(u(c,_,x,g)||{}).orientation,P=c.fill;x._minDtick=0,g._minDtick=0;var C={padded:!0},O={padded:!0};m&&(C.ppad=O.ppad=m);var R=y<2||p[0]!==p[y-1]||v[0]!==v[y-1];R&&(P==="tozerox"||P==="tonextx"&&(w||E==="h"))?C.tozero=!0:(c.error_y||{}).visible||P!=="tonexty"&&P!=="tozeroy"&&(h.hasMarkers(c)||h.hasText(c))||(C.padded=!1,C.ppad=0),R&&(P==="tozeroy"||P==="tonexty"&&(w||E==="v"))?O.tozero=!0:P!=="tonextx"&&P!=="tozerox"||(O.padded=!1),f&&(c._extremes[f]=o.findExtremes(x,p,C)),S&&(c._extremes[S]=o.findExtremes(g,v,O))}function r(d,c){if(h.hasMarkers(d)){var x,g=d.marker,p=1.6*(d.marker.sizeref||1);if(x=d.marker.sizemode==="area"?function(f){return Math.max(Math.sqrt((f||0)/p),3)}:function(f){return Math.max((f||0)/p,3)},k.isArrayOrTypedArray(g.size)){var v={type:"linear"};o.setConvert(v);for(var m=v.makeCalcdata(d.marker,"size"),y=new Array(c),_=0;_<c;_++)y[_]=x(m[_]);return y}return x(g.size)}}function a(d,c){var x=l(c),g=d._firstScatter;g[x]||(g[x]=c.uid)}function l(d){var c=d.stackgroup;return d.xaxis+d.yaxis+d.type+(c?"-"+c:"")}function u(d,c,x,g){var p=d.stackgroup;if(p){var v=c._scatterStackOpts[x._id+g._id][p],m=v.orientation==="v"?g:x;return m.type==="linear"||m.type==="log"?v:void 0}}ee.exports={calc:function(d,c){var x,g,p,v,m,y,_=d._fullLayout,f=c._xA=o.getFromId(d,c.xaxis||"x","x"),S=c._yA=o.getFromId(d,c.yaxis||"y","y"),w=f.makeCalcdata(c,"x"),E=S.makeCalcdata(c,"y"),P=T(c,f,"x",w),C=T(c,S,"y",E),O=P.vals,R=C.vals,j=c._length,D=new Array(j),N=c.ids,W=u(c,_,f,S),F=!1;a(_,c);var U,V="x",te="y";W?(k.pushUnique(W.traceIndices,c._expandedIndex),(x=W.orientation==="v")?(te="s",U="x"):(V="s",U="y"),m=W.stackgaps==="interpolate"):n(d,c,f,S,O,R,r(c,j));var J=!!c.xperiodalignment,K=!!c.yperiodalignment;for(g=0;g<j;g++){var X=D[g]={},Z=M(O[g]),$=M(R[g]);Z&&$?(X[V]=O[g],X[te]=R[g],J&&(X.orig_x=w[g],X.xEnd=P.ends[g],X.xStart=P.starts[g]),K&&(X.orig_y=E[g],X.yEnd=C.ends[g],X.yStart=C.starts[g])):W&&(x?Z:$)?(X[U]=x?O[g]:R[g],X.gap=!0,m?(X.s=b,F=!0):X.s=0):X[V]=X[te]=b,N&&(X.id=String(N[g]))}if(t(D,c),s(d,c),i(D,c),W){for(g=0;g<D.length;)D[g][U]===b?D.splice(g,1):g++;if(k.sort(D,function(ue,me){return ue[U]-me[U]||ue.i-me.i}),F){for(g=0;g<D.length-1&&D[g].gap;)g++;for((y=D[g].s)||(y=D[g].s=0),p=0;p<g;p++)D[p].s=y;for(v=D.length-1;v>g&&D[v].gap;)v--;for(y=D[v].s,p=D.length-1;p>v;p--)D[p].s=y;for(;g<v;)if(D[++g].gap){for(p=g+1;D[p].gap;)p++;for(var re=D[g-1][U],oe=D[g-1].s,ie=(D[p].s-oe)/(D[p][U]-re);g<p;)D[g].s=oe+(D[g][U]-re)*ie,g++}}}return D},calcMarkerSize:r,calcAxisExpansion:n,setFirstScatter:a,getStackOpts:u}},4500:function(ee,z,e){"use strict";var M=e(3400);ee.exports=function(k,o){M.isArrayOrTypedArray(o.selectedpoints)&&M.tagSelected(k,o)}},90136:function(ee,z,e){"use strict";var M=e(94288).hasColorscale,k=e(47128),o=e(43028);ee.exports=function(T,b){o.hasLines(b)&&M(b,"line")&&k(T,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),o.hasMarkers(b)&&(M(b,"marker")&&k(T,b,{vals:b.marker.color,containerStr:"marker",cLetter:"c"}),M(b,"marker.line")&&k(T,b,{vals:b.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(ee){"use strict";ee.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(ee,z,e){"use strict";var M=e(16356),k=e(96376).setGroupPositions;function o(T,b,h,s,t,i,n){t[s]=!0;var r={i:null,gap:!0,s:0};if(r[n]=h,T.splice(b,0,r),b&&h===T[b-1][n]){var a=T[b-1];r.s=a.s,r.i=a.i,r.gap=a.gap}else i&&(r.s=function(l,u,d,c){var x=l[u-1],g=l[u+1];return g?x?x.s+(g.s-x.s)*(d-x[c])/(g[c]-x[c]):g.s:x.s}(T,b,h,n));b||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}ee.exports=function(T,b){T._fullLayout.scattermode==="group"&&function(U,V){for(var te=V.xaxis,J=V.yaxis,K=U._fullLayout,X=U._fullData,Z=U.calcdata,$=[],re=[],oe=0;oe<X.length;oe++){var ie=X[oe];ie.visible===!0&&ie.type==="scatter"&&ie.xaxis===te._id&&ie.yaxis===J._id&&(ie.orientation==="h"?$.push(Z[oe]):ie.orientation==="v"&&re.push(Z[oe]))}var ue={mode:K.scattermode,gap:K.scattergap};k(U,te,J,re,ue),k(U,J,te,$,ue)}(T,b);var h=b.xaxis,s=b.yaxis,t=h._id+s._id,i=T._fullLayout._scatterStackOpts[t];if(i){var n,r,a,l,u,d,c,x,g,p,v,m,y,_,f,S=T.calcdata;for(var w in i){var E=(p=i[w]).traceIndices;if(E.length){for(v=p.stackgaps==="interpolate",m=p.groupnorm,p.orientation==="v"?(y="x",_="y"):(y="y",_="x"),f=new Array(E.length),n=0;n<f.length;n++)f[n]=!1;d=S[E[0]];var P=new Array(d.length);for(n=0;n<d.length;n++)P[n]=d[n][y];for(n=1;n<E.length;n++){for(u=S[E[n]],r=a=0;r<u.length;r++){for(c=u[r][y];c>P[a]&&a<P.length;a++)o(u,r,P[a],n,f,v,y),r++;if(c!==P[a]){for(l=0;l<n;l++)o(S[E[l]],a,c,l,f,v,y);P.splice(a,0,c)}a++}for(;a<P.length;a++)o(u,r,P[a],n,f,v,y),r++}var C=P.length;for(r=0;r<d.length;r++){for(x=d[r][_]=d[r].s,n=1;n<E.length;n++)(u=S[E[n]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=C,x+=u[r].s,u[r][_]=x;if(m)for(g=(m==="fraction"?x:x/100)||1,n=0;n<E.length;n++){var O=S[E[n]][r];O[_]/=g,O.sNorm=O.s/g}}for(n=0;n<E.length;n++){var R=(u=S[E[n]])[0].trace,j=M.calcMarkerSize(R,R._rawLength),D=Array.isArray(j);if(j&&f[n]||D){var N=j;for(j=new Array(C),r=0;r<C;r++)j[r]=u[r].gap?0:D?N[u[r].i]:N}var W=new Array(C),F=new Array(C);for(r=0;r<C;r++)W[r]=u[r].x,F[r]=u[r].y;M.calcAxisExpansion(T,R,h,s,W,F,j),u[0].t.orientation=p.orientation}}}}}},35036:function(ee,z,e){"use strict";var M=e(3400),k=e(20011),o=e(52904);ee.exports=function(T,b){var h,s,t;function i(u){return M.coerce(s._input,s,o,u)}if(b.scattermode==="group")for(t=0;t<T.length;t++)(s=T[t]).type==="scatter"&&(h=s._input,k(h,s,b,i));for(t=0;t<T.length;t++){var n=T[t];if(n.type==="scatter"){var r=n.fill;if(r!=="none"&&r!=="toself"&&(n.opacity=void 0,r==="tonexty"||r==="tonextx"))for(var a=t-1;a>=0;a--){var l=T[a];if(l.type==="scatter"&&l.xaxis===n.xaxis&&l.yaxis===n.yaxis){l.opacity=void 0;break}}}}}},18800:function(ee,z,e){"use strict";var M=e(3400),k=e(24040),o=e(52904),T=e(88200),b=e(43028),h=e(43980),s=e(31147),t=e(43912),i=e(74428),n=e(66828),r=e(11731),a=e(124),l=e(70840),u=e(3400).coercePattern;ee.exports=function(d,c,x,g){function p(E,P){return M.coerce(d,c,o,E,P)}var v=h(d,c,g,p);if(v||(c.visible=!1),c.visible){s(d,c,g,p),p("xhoverformat"),p("yhoverformat");var m=t(d,c,g,p);g.scattermode==="group"&&c.orientation===void 0&&p("orientation","v");var y=!m&&v<T.PTS_LINESONLY?"lines+markers":"lines";p("text"),p("hovertext"),p("mode",y),b.hasMarkers(c)&&i(d,c,x,g,p,{gradient:!0}),b.hasLines(c)&&(n(d,c,x,g,p,{backoff:!0}),r(d,c,p),p("connectgaps"),p("line.simplify")),b.hasText(c)&&(p("texttemplate"),a(d,c,g,p));var _=[];(b.hasMarkers(c)||b.hasText(c))&&(p("cliponaxis"),p("marker.maxdisplayed"),_.push("points")),p("fill",m?m.fillDflt:"none"),c.fill!=="none"&&(l(d,c,x,p,{moduleHasFillgradient:!0}),b.hasLines(c)||r(d,c,p),u(p,"fillpattern",c.fillcolor,!1));var f=(c.line||{}).color,S=(c.marker||{}).color;c.fill!=="tonext"&&c.fill!=="toself"||_.push("fills"),p("hoveron",_.join("+")||"points"),c.hoveron!=="fills"&&p("hovertemplate");var w=k.getComponentMethod("errorbars","supplyDefaults");w(d,c,f||S||x,{axis:"y"}),w(d,c,f||S||x,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(c,p)}}},98304:function(ee){"use strict";ee.exports=function(z){return{valType:"color",editType:"style",anim:!0}}},70840:function(ee,z,e){"use strict";var M=e(76308),k=e(3400).isArrayOrTypedArray;ee.exports=function(o,T,b,h,s){s||(s={});var t,i=!1;if(T.marker){var n=T.marker.color,r=(T.marker.line||{}).color;n&&!k(n)?i=n:r&&!k(r)&&(i=r)}if(s.moduleHasFillgradient&&h("fillgradient.type")!=="none"){h("fillgradient.start"),h("fillgradient.stop");var a=h("fillgradient.colorscale");a&&(t=function(l){for(var u=M.interpolate(l[0][1],l[1][1],.5),d=2;d<l.length;d++){var c=M.interpolate(l[d-1][1],l[d][1],.5);u=M.interpolate(u,c,l[d-1][0]/l[d][0])}return u}(a))}h("fillcolor",M.addOpacity((T.line||{}).color||i||t||b,.5))}},76688:function(ee,z,e){"use strict";var M=e(54460);ee.exports=function(k,o,T){var b={},h={_fullLayout:T},s=M.getFromTrace(h,o,"x"),t=M.getFromTrace(h,o,"y"),i=k.orig_x;i===void 0&&(i=k.x);var n=k.orig_y;return n===void 0&&(n=k.y),b.xLabel=M.tickText(s,s.c2l(i),!0).text,b.yLabel=M.tickText(t,t.c2l(n),!0).text,b}},44928:function(ee,z,e){"use strict";var M=e(76308),k=e(43028);ee.exports=function(o,T){var b,h;if(o.mode==="lines")return(b=o.line.color)&&M.opacity(b)?b:o.fillcolor;if(o.mode==="none")return o.fill?o.fillcolor:"";var s=T.mcc||(o.marker||{}).color,t=T.mlcc||((o.marker||{}).line||{}).color;return(h=s&&M.opacity(s)?s:t&&M.opacity(t)&&(T.mlw||((o.marker||{}).line||{}).width)?t:"")?M.opacity(h)<.3?M.addOpacity(h,.3):h:(b=(o.line||{}).color)&&M.opacity(b)&&k.hasLines(o)&&o.line.width?b:o.fillcolor}},20011:function(ee,z,e){"use strict";var M=e(71888).getAxisGroup;ee.exports=function(k,o,T,b){var h=o.orientation,s=o[{v:"x",h:"y"}[h]+"axis"],t=M(T,s)+h,i=T._alignmentOpts||{},n=b("alignmentgroup"),r=i[t];r||(r=i[t]={});var a=r[n];a?a.traces.push(o):a=r[n]={traces:[o],alignmentIndex:Object.keys(r).length,offsetGroups:{}};var l=b("offsetgroup"),u=a.offsetGroups,d=u[l];l&&(d||(d=u[l]={offsetIndex:Object.keys(u).length}),o._offsetIndex=d.offsetIndex)}},98723:function(ee,z,e){"use strict";var M=e(3400),k=e(93024),o=e(24040),T=e(44928),b=e(76308),h=M.fillText;ee.exports=function(s,t,i,n){var r=s.cd,a=r[0].trace,l=s.xa,u=s.ya,d=l.c2p(t),c=u.c2p(i),x=[d,c],g=a.hoveron||"",p=a.mode.indexOf("markers")!==-1?3:.5,v=!!a.xperiodalignment,m=!!a.yperiodalignment;if(g.indexOf("points")!==-1){var y=function(W){var F=Math.max(p,W.mrc||0),U=l.c2p(W.x)-d,V=u.c2p(W.y)-c;return Math.max(Math.sqrt(U*U+V*V)-F,1-p/F)},_=k.getDistanceFunction(n,function(W){if(v){var F=l.c2p(W.xStart),U=l.c2p(W.xEnd);return d>=Math.min(F,U)&&d<=Math.max(F,U)?0:1/0}var V=Math.max(3,W.mrc||0),te=1-1/V,J=Math.abs(l.c2p(W.x)-d);return J<V?te*J/V:J-V+te},function(W){if(m){var F=u.c2p(W.yStart),U=u.c2p(W.yEnd);return c>=Math.min(F,U)&&c<=Math.max(F,U)?0:1/0}var V=Math.max(3,W.mrc||0),te=1-1/V,J=Math.abs(u.c2p(W.y)-c);return J<V?te*J/V:J-V+te},y);if(k.getClosest(r,_,s),s.index!==!1){var f=r[s.index],S=l.c2p(f.x,!0),w=u.c2p(f.y,!0),E=f.mrc||1;s.index=f.i;var P=r[0].t.orientation,C=P&&(f.sNorm||f.s),O=P==="h"?C:f.orig_x!==void 0?f.orig_x:f.x,R=P==="v"?C:f.orig_y!==void 0?f.orig_y:f.y;return M.extendFlat(s,{color:T(a,f),x0:S-E,x1:S+E,xLabelVal:O,y0:w-E,y1:w+E,yLabelVal:R,spikeDistance:y(f),hovertemplate:a.hovertemplate}),h(f,a,s),o.getComponentMethod("errorbars","hoverInfo")(f,a,s),[s]}}function j(W){if(!W)return!1;var F=W.node();try{var U=new DOMPoint(x[0],x[1]);return F.isPointInFill(U)}catch(te){var V=F.ownerSVGElement.createSVGPoint();return V.x=x[0],V.y=x[1],F.isPointInFill(V)}}if(g.indexOf("fills")!==-1&&a._fillElement&&j(a._fillElement)&&!j(a._fillExclusionElement)){var D=function(W){var F,U,V,te,J,K,X,Z,$,re=[],oe=1/0,ie=-1/0,ue=1/0,me=-1/0;for(F=0;F<W.length;F++){var be=W[F];be.contains(x)&&(re.push(be),ue=Math.min(ue,be.ymin),me=Math.max(me,be.ymax))}if(re.length===0)return null;for(U=((ue=Math.max(ue,0))+(me=Math.min(me,u._length)))/2,F=0;F<re.length;F++)for(te=re[F].pts,V=1;V<te.length;V++)(Z=te[V-1][1])>U!=($=te[V][1])>=U&&(K=te[V-1][0],X=te[V][0],$-Z&&(J=K+(X-K)*(U-Z)/($-Z),oe=Math.min(oe,J),ie=Math.max(ie,J)));return{x0:oe=Math.max(oe,0),x1:ie=Math.min(ie,l._length),y0:U,y1:U}}(a._polygons);D===null&&(D={x0:x[0],x1:x[0],y0:x[1],y1:x[1]});var N=b.defaultLine;return b.opacity(a.fillcolor)?N=a.fillcolor:b.opacity((a.line||{}).color)&&(N=a.line.color),M.extendFlat(s,{distance:s.maxHoverDistance,x0:D.x0,x1:D.x1,y0:D.y0,y1:D.y1,color:N,hovertemplate:!1}),delete s.index,a.text&&!M.isArrayOrTypedArray(a.text)?s.text=String(a.text):s.text=a.name,[s]}}},65875:function(ee,z,e){"use strict";var M=e(43028);ee.exports={hasLines:M.hasLines,hasMarkers:M.hasMarkers,hasText:M.hasText,isBubble:M.isBubble,attributes:e(52904),layoutAttributes:e(55308),supplyDefaults:e(18800),crossTraceDefaults:e(35036),supplyLayoutDefaults:e(59748),calc:e(16356).calc,crossTraceCalc:e(96664),arraysToCalcdata:e(20148),plot:e(96504),colorbar:e(5528),formatLabels:e(76688),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(98723),selectPoints:e(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(ee){"use strict";ee.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(ee,z,e){"use strict";var M=e(3400),k=e(55308);ee.exports=function(o,T){var b,h=T.barmode==="group";T.scattermode==="group"&&(b=h?T.bargap:.2,M.coerce(o,T,k,"scattergap",b))}},66828:function(ee,z,e){"use strict";var M=e(3400).isArrayOrTypedArray,k=e(94288).hasColorscale,o=e(27260);ee.exports=function(T,b,h,s,t,i){i||(i={});var n=(T.marker||{}).color;n&&n._inputArray&&(n=n._inputArray),t("line.color",h),k(T,"line")?o(T,b,s,t,{prefix:"line.",cLetter:"c"}):t("line.color",!M(n)&&n||h),t("line.width"),i.noDash||t("line.dash"),i.backoff&&t("line.backoff")}},52340:function(ee,z,e){"use strict";var M=e(43616),k=e(39032),o=k.BADNUM,T=k.LOG_CLIP,b=T+.5,h=T-.5,s=e(3400),t=s.segmentsIntersect,i=s.constrain,n=e(88200);ee.exports=function(r,a){var l,u,d,c,x,g,p,v,m,y,_,f,S,w,E,P,C,O,R=a.trace||{},j=a.xaxis,D=a.yaxis,N=j.type==="log",W=D.type==="log",F=j._length,U=D._length,V=a.backoff,te=R.marker,J=a.connectGaps,K=a.baseTolerance,X=a.shape,Z=X==="linear",$=R.fill&&R.fill!=="none",re=[],oe=n.minTolerance,ie=r.length,ue=new Array(ie),me=0;function be(Ct){var He=r[Ct];if(!He)return!1;var We=a.linearized?j.l2p(He.x):j.c2p(He.x),Be=a.linearized?D.l2p(He.y):D.c2p(He.y);if(We===o){if(N&&(We=j.c2p(He.x,!0)),We===o)return!1;W&&Be===o&&(We*=Math.abs(j._m*U*(j._m>0?b:h)/(D._m*F*(D._m>0?b:h)))),We*=1e3}if(Be===o){if(W&&(Be=D.c2p(He.y,!0)),Be===o)return!1;Be*=1e3}return[We,Be]}function ge(Ct,He,We,Be){var Ge=We-Ct,at=Be-He,nt=.5-Ct,Re=.5-He,Fe=Ge*Ge+at*at,rt=Ge*nt+at*Re;if(rt>0&&rt<Fe){var Ye=nt*at-Re*Ge;if(Ye*Ye<Fe)return!0}}function de(Ct,He){var We=Ct[0]/F,Be=Ct[1]/U,Ge=Math.max(0,-We,We-1,-Be,Be-1);return Ge&&C!==void 0&&ge(We,Be,C,O)&&(Ge=0),Ge&&He&&ge(We,Be,He[0]/F,He[1]/U)&&(Ge=0),(1+n.toleranceGrowth*Ge)*K}function ve(Ct,He){var We=Ct[0]-He[0],Be=Ct[1]-He[1];return Math.sqrt(We*We+Be*Be)}var pe,_e,Te,le,ae,he,Se,ke=n.maxScreensAway,Me=-F*ke,Ee=F*(1+ke),De=-U*ke,fe=U*(1+ke),xe=[[Me,De,Ee,De],[Ee,De,Ee,fe],[Ee,fe,Me,fe],[Me,fe,Me,De]];function we(Ct){if(Ct[0]<Me||Ct[0]>Ee||Ct[1]<De||Ct[1]>fe)return[i(Ct[0],Me,Ee),i(Ct[1],De,fe)]}function Oe(Ct,He){return Ct[0]===He[0]&&(Ct[0]===Me||Ct[0]===Ee)||Ct[1]===He[1]&&(Ct[1]===De||Ct[1]===fe)||void 0}function ze(Ct,He,We){return function(Be,Ge){var at=we(Be),nt=we(Ge),Re=[];if(at&&nt&&Oe(at,nt))return Re;at&&Re.push(at),nt&&Re.push(nt);var Fe=2*s.constrain((Be[Ct]+Ge[Ct])/2,He,We)-((at||Be)[Ct]+(nt||Ge)[Ct]);return Fe&&((at&&nt?Fe>0==at[Ct]>nt[Ct]?at:nt:at||nt)[Ct]+=Fe),Re}}function Pe(Ct){var He=Ct[0],We=Ct[1],Be=He===ue[me-1][0],Ge=We===ue[me-1][1];if(!Be||!Ge)if(me>1){var at=He===ue[me-2][0],nt=We===ue[me-2][1];Be&&(He===Me||He===Ee)&&at?nt?me--:ue[me-1]=Ct:Ge&&(We===De||We===fe)&&nt?at?me--:ue[me-1]=Ct:ue[me++]=Ct}else ue[me++]=Ct}function Ue(Ct){ue[me-1][0]!==Ct[0]&&ue[me-1][1]!==Ct[1]&&Pe([Te,le]),Pe(Ct),ae=null,Te=le=0}X==="linear"||X==="spline"?Se=function(Ct,He){for(var We=[],Be=0,Ge=0;Ge<4;Ge++){var at=xe[Ge],nt=t(Ct[0],Ct[1],He[0],He[1],at[0],at[1],at[2],at[3]);nt&&(!Be||Math.abs(nt.x-We[0][0])>1||Math.abs(nt.y-We[0][1])>1)&&(nt=[nt.x,nt.y],Be&&ve(nt,Ct)<ve(We[0],Ct)?We.unshift(nt):We.push(nt),Be++)}return We}:X==="hv"||X==="vh"?Se=function(Ct,He){var We=[],Be=we(Ct),Ge=we(He);return Be&&Ge&&Oe(Be,Ge)||(Be&&We.push(Be),Ge&&We.push(Ge)),We}:X==="hvh"?Se=ze(0,Me,Ee):X==="vhv"&&(Se=ze(1,De,fe));var Ve=s.isArrayOrTypedArray(te);function Ze(Ct){if(Ct&&V&&(Ct.i=l,Ct.d=r,Ct.trace=R,Ct.marker=Ve?te[Ct.i]:te,Ct.backoff=V),C=Ct[0]/F,O=Ct[1]/U,pe=Ct[0]<Me?Me:Ct[0]>Ee?Ee:0,_e=Ct[1]<De?De:Ct[1]>fe?fe:0,pe||_e){if(me)if(ae){var He=Se(ae,Ct);He.length>1&&(Ue(He[0]),ue[me++]=He[1])}else he=Se(ue[me-1],Ct)[0],ue[me++]=he;else ue[me++]=[pe||Ct[0],_e||Ct[1]];var We=ue[me-1];pe&&_e&&(We[0]!==pe||We[1]!==_e)?(ae&&(Te!==pe&&le!==_e?Pe(Te&&le?(Be=ae,at=(Ge=Ct)[0]-Be[0],nt=(Ge[1]-Be[1])/at,(Be[1]*Ge[0]-Ge[1]*Be[0])/at>0?[nt>0?Me:Ee,fe]:[nt>0?Ee:Me,De]):[Te||pe,le||_e]):Te&&le&&Pe([Te,le])),Pe([pe,_e])):Te-pe&&le-_e&&Pe([pe||Te,_e||le]),ae=Ct,Te=pe,le=_e}else ae&&Ue(Se(ae,Ct)[0]),ue[me++]=Ct;var Be,Ge,at,nt}for(l=0;l<ie;l++)if(u=be(l)){for(me=0,ae=null,Ze(u),l++;l<ie;l++){if(!(c=be(l))){if(J)continue;break}if(Z&&a.simplify){var it=be(l+1);if(y=ve(c,u),$&&(me===0||me===ie-1)||!(y<de(c,it)*oe)){for(v=[(c[0]-u[0])/y,(c[1]-u[1])/y],x=u,_=y,f=w=E=0,p=!1,d=c,l++;l<r.length;l++){if(g=it,it=be(l+1),!g){if(J)continue;break}if(P=(m=[g[0]-u[0],g[1]-u[1]])[0]*v[1]-m[1]*v[0],w=Math.min(w,P),(E=Math.max(E,P))-w>de(g,it))break;d=g,(S=m[0]*v[0]+m[1]*v[1])>_?(_=S,c=g,p=!1):S<f&&(f=S,x=g,p=!0)}if(p?(Ze(c),d!==x&&Ze(x)):(x!==u&&Ze(x),d!==c&&Ze(c)),Ze(d),l>=r.length||!g)break;Ze(g),u=g}}else Ze(c)}ae&&Pe([Te||ae[0],le||ae[1]]),re.push(ue.slice(0,me))}var tt=X.slice(X.length-1);if(V&&tt!=="h"&&tt!=="v"){for(var dt=!1,yt=-1,vt=[],et=0;et<re.length;et++)for(var Qe=0;Qe<re[et].length-1;Qe++){var wt=re[et][Qe],It=re[et][Qe+1],Dt=M.applyBackoff(It,wt);Dt[0]===It[0]&&Dt[1]===It[1]||(dt=!0),vt[yt+1]||(vt[++yt]=[wt,[Dt[0],Dt[1]]])}return dt?vt:re}return re}},11731:function(ee){"use strict";ee.exports=function(z,e,M){M("line.shape")==="spline"&&M("line.smoothing")}},14328:function(ee){"use strict";var z={tonextx:1,tonexty:1,tonext:1};ee.exports=function(e,M,k){var o,T,b,h,s,t={},i=!1,n=-1,r=0,a=-1;for(T=0;T<k.length;T++)(b=(o=k[T][0].trace).stackgroup||"")?b in t?s=t[b]:(s=t[b]=r,r++):o.fill in z&&a>=0?s=a:(s=a=r,r++),s<n&&(i=!0),o._groupIndex=n=s;var l=k.slice();i&&l.sort(function(d,c){var x=d[0].trace,g=c[0].trace;return x._groupIndex-g._groupIndex||x.index-g.index});var u={};for(T=0;T<l.length;T++)b=(o=l[T][0].trace).stackgroup||"",o.visible===!0?(o._nexttrace=null,o.fill in z&&(h=u[b],o._prevtrace=h||null,h&&(h._nexttrace=o)),o._ownfill=o.fill&&(o.fill.substr(0,6)==="tozero"||o.fill==="toself"||o.fill.substr(0,2)==="to"&&!o._prevtrace),u[b]=o):o._prevtrace=o._nexttrace=o._ownfill=null;return l}},7152:function(ee,z,e){"use strict";var M=e(38248);ee.exports=function(k,o){o||(o=2);var T=k.marker,b=T.sizeref||1,h=T.sizemin||0,s=T.sizemode==="area"?function(t){return Math.sqrt(t/b)}:function(t){return t/b};return function(t){var i=s(t/o);return M(i)&&i>0?Math.max(i,h):0}}},5528:function(ee){"use strict";ee.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(ee,z,e){"use strict";var M=e(76308),k=e(94288).hasColorscale,o=e(27260),T=e(43028);ee.exports=function(b,h,s,t,i,n){var r=T.isBubble(b),a=(b.line||{}).color;n=n||{},a&&(s=a),i("marker.symbol"),i("marker.opacity",r?.7:1),i("marker.size"),n.noAngle||(i("marker.angle"),n.noAngleRef||i("marker.angleref"),n.noStandOff||i("marker.standoff")),i("marker.color",s),k(b,"marker")&&o(b,h,t,i,{prefix:"marker.",cLetter:"c"}),n.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),n.noLine||(i("marker.line.color",a&&!Array.isArray(a)&&h.marker.color!==a?a:r?M.background:M.defaultLine),k(b,"marker.line")&&o(b,h,t,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",r?1:0)),r&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),n.gradient&&i("marker.gradient.type")!=="none"&&i("marker.gradient.color")}},31147:function(ee,z,e){"use strict";var M=e(3400).dateTick0,k=e(39032).ONEWEEK;function o(T,b){return M(b,T%k==0?1:0)}ee.exports=function(T,b,h,s,t){if(t||(t={x:!0,y:!0}),t.x){var i=s("xperiod");i&&(s("xperiod0",o(i,b.xcalendar)),s("xperiodalignment"))}if(t.y){var n=s("yperiod");n&&(s("yperiod0",o(n,b.ycalendar)),s("yperiodalignment"))}}},96504:function(ee,z,e){"use strict";var M=e(33428),k=e(24040),o=e(3400),T=o.ensureSingle,b=o.identity,h=e(43616),s=e(43028),t=e(52340),i=e(14328),n=e(92065).tester;function r(a,l,u,d,c,x,g){var p,v=a._context.staticPlot;(function(Pe,Ue,Ve,Ze,it){var tt=Ve.xaxis,dt=Ve.yaxis,yt=M.extent(o.simpleMap(tt.range,tt.r2c)),vt=M.extent(o.simpleMap(dt.range,dt.r2c)),et=Ze[0].trace;if(s.hasMarkers(et)){var Qe=et.marker.maxdisplayed;if(Qe!==0){var wt=Ze.filter(function(He){return He.x>=yt[0]&&He.x<=yt[1]&&He.y>=vt[0]&&He.y<=vt[1]}),It=Math.ceil(wt.length/Qe),Dt=0;it.forEach(function(He,We){var Be=He[0].trace;s.hasMarkers(Be)&&Be.marker.maxdisplayed>0&&We<Ue&&Dt++});var Ct=Math.round(Dt*It/3+Math.floor(Dt/3)*It/7.1);Ze.forEach(function(He){delete He.vis}),wt.forEach(function(He,We){Math.round((We+Ct)%It)===0&&(He.vis=!0)})}}})(0,l,u,d,c);var m=!!g&&g.duration>0;function y(Pe){return m?Pe.transition():Pe}var _=u.xaxis,f=u.yaxis,S=d[0].trace,w=S.line,E=M.select(x),P=T(E,"g","errorbars"),C=T(E,"g","lines"),O=T(E,"g","points"),R=T(E,"g","text");if(k.getComponentMethod("errorbars","plot")(a,P,u,g),S.visible===!0){var j,D;y(E).style("opacity",S.opacity);var N,W,F=S.fill.charAt(S.fill.length-1);F!=="x"&&F!=="y"&&(F=""),F==="y"?(N=1,W=f.c2p(0,!0)):F==="x"&&(N=0,W=_.c2p(0,!0)),d[0][u.isRangePlot?"nodeRangePlot3":"node3"]=E;var U,V,te="",J=[],K=S._prevtrace,X=null,Z=null;K&&(te=K._prevRevpath||"",D=K._nextFill,J=K._ownPolygons,X=K._fillsegments,Z=K._fillElement);var $,re,oe,ie,ue,me,be="",ge="",de=[];S._polygons=[];var ve=[],pe=[],_e=o.noop;if(j=S._ownFill,s.hasLines(S)||S.fill!=="none"){D&&D.datum(d),["hv","vh","hvh","vhv"].indexOf(w.shape)!==-1?($=h.steps(w.shape),re=h.steps(w.shape.split("").reverse().join(""))):$=re=w.shape==="spline"?function(Pe){var Ue=Pe[Pe.length-1];return Pe.length>1&&Pe[0][0]===Ue[0]&&Pe[0][1]===Ue[1]?h.smoothclosed(Pe.slice(1),w.smoothing):h.smoothopen(Pe,w.smoothing)}:function(Pe){return"M"+Pe.join("L")},oe=function(Pe){return re(Pe.reverse())},pe=t(d,{xaxis:_,yaxis:f,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,backoff:w.backoff,simplify:w.simplify,fill:S.fill}),ve=new Array(pe.length);var Te=0;for(p=0;p<pe.length;p++){var le,ae=pe[p];le&&F?le.push.apply(le,ae):(le=ae.slice(),ve[Te]=le,Te++)}S._fillElement=null,S._fillExclusionElement=Z,S._fillsegments=ve.slice(0,Te),ve=S._fillsegments,pe.length&&(ie=pe[0][0].slice(),me=(ue=pe[pe.length-1])[ue.length-1].slice()),_e=function(Pe){return function(Ue){if(U=$(Ue),V=oe(Ue),be?F?(be+="L"+U.substr(1),ge=V+"L"+ge.substr(1)):(be+="Z"+U,ge=V+"Z"+ge):(be=U,ge=V),s.hasLines(S)){var Ve=M.select(this);if(Ve.datum(d),Pe)y(Ve.style("opacity",0).attr("d",U).call(h.lineGroupStyle)).style("opacity",1);else{var Ze=y(Ve);Ze.attr("d",U),h.singleLineStyle(d,Ze)}}}}}var he=C.selectAll(".js-line").data(pe);y(he.exit()).style("opacity",0).remove(),he.each(_e(!1)),he.enter().append("path").classed("js-line",!0).style("vector-effect",v?"none":"non-scaling-stroke").call(h.lineGroupStyle).each(_e(!0)),h.setClipUrl(he,u.layerClipId,a);var Se=function(){var Pe=new Array(ve.length);for(p=0;p<ve.length;p++)Pe[p]=n(ve[p]);return Pe},ke=function(Pe){var Ue,Ve;if(Pe&&Pe.length!==0){for(Ue=new Array(Pe.length-1+ve.length),Ve=0;Ve<Pe.length-1;Ve++)Ue[Ve]=n(Pe[Ve]);var Ze=Pe[Pe.length-1].slice();for(Ze.reverse(),Ve=0;Ve<ve.length;Ve++)Ue[Pe.length-1+Ve]=n(ve[Ve].concat(Ze))}else for(Ue=new Array(ve.length),Ve=0;Ve<ve.length;Ve++){var it=ve[Ve][0].slice(),tt=ve[Ve][ve[Ve].length-1].slice();it[N]=tt[N]=W;var dt=[tt,it].concat(ve[Ve]);Ue[Ve]=n(dt)}return Ue};pe.length?(j?(j.datum(d),ie&&me&&(F?(ie[N]=me[N]=W,y(j).attr("d","M"+me+"L"+ie+"L"+be.substr(1)).call(h.singleFillStyle,a),de=ke(null)):(y(j).attr("d",be+"Z").call(h.singleFillStyle,a),de=Se())),S._polygons=de,S._fillElement=j):D&&(S.fill.substr(0,6)==="tonext"&&be&&te?(S.fill==="tonext"?(y(D).attr("d",be+"Z"+te+"Z").call(h.singleFillStyle,a),de=Se(),S._polygons=de.concat(J)):(y(D).attr("d",be+"L"+te.substr(1)+"Z").call(h.singleFillStyle,a),de=ke(X),S._polygons=de),S._fillElement=D):Ee(D)),S._prevRevpath=ge):(j?Ee(j):D&&Ee(D),S._prevRevpath=null),S._ownPolygons=de,O.datum(d),R.datum(d),function(Pe,Ue,Ve){var Ze,it=Ve[0].trace,tt=s.hasMarkers(it),dt=s.hasText(it),yt=Oe(it),vt=ze,et=ze;if(tt||dt){var Qe=b,wt=it.stackgroup,It=wt&&a._fullLayout._scatterStackOpts[_._id+f._id][wt].stackgaps==="infer zero";it.marker.maxdisplayed||it._needsCull?Qe=It?fe:De:wt&&!It&&(Qe=xe),tt&&(vt=Qe),dt&&(et=Qe)}var Dt,Ct=(Ze=Pe.selectAll("path.point").data(vt,yt)).enter().append("path").classed("point",!0);m&&Ct.call(h.pointStyle,it,a).call(h.translatePoints,_,f).style("opacity",0).transition().style("opacity",1),Ze.order(),tt&&(Dt=h.makePointStyleFns(it)),Ze.each(function(He){var We=M.select(this),Be=y(We);h.translatePoint(He,Be,_,f)?(h.singlePointStyle(He,Be,it,Dt,a),u.layerClipId&&h.hideOutsideRangePoint(He,Be,_,f,it.xcalendar,it.ycalendar),it.customdata&&We.classed("plotly-customdata",He.data!==null&&He.data!==void 0)):Be.remove()}),m?Ze.exit().transition().style("opacity",0).remove():Ze.exit().remove(),(Ze=Ue.selectAll("g").data(et,yt)).enter().append("g").classed("textpoint",!0).append("text"),Ze.order(),Ze.each(function(He){var We=M.select(this),Be=y(We.select("text"));h.translatePoint(He,Be,_,f)?u.layerClipId&&h.hideOutsideRangePoint(He,We,_,f,it.xcalendar,it.ycalendar):We.remove()}),Ze.selectAll("text").call(h.textPointStyle,it,a).each(function(He){var We=_.c2p(He.x),Be=f.c2p(He.y);M.select(this).selectAll("tspan.line").each(function(){y(M.select(this)).attr({x:We,y:Be})})}),Ze.exit().remove()}(O,R,d);var Me=S.cliponaxis===!1?null:u.layerClipId;h.setClipUrl(O,Me,a),h.setClipUrl(R,Me,a)}function Ee(Pe){y(Pe).attr("d","M0,0Z")}function De(Pe){return Pe.filter(function(Ue){return!Ue.gap&&Ue.vis})}function fe(Pe){return Pe.filter(function(Ue){return Ue.vis})}function xe(Pe){return Pe.filter(function(Ue){return!Ue.gap})}function we(Pe){return Pe.id}function Oe(Pe){if(Pe.ids)return we}function ze(){return!1}}ee.exports=function(a,l,u,d,c,x){var g,p,v=!c,m=!!c&&c.duration>0,y=i(a,l,u);(g=d.selectAll("g.trace").data(y,function(_){return _[0].trace.uid})).enter().append("g").attr("class",function(_){return"trace scatter trace"+_[0].trace.uid}).style("stroke-miterlimit",2),g.order(),function(_,f,S){f.each(function(w){var E=T(M.select(this),"g","fills");h.setClipUrl(E,S.layerClipId,_);var P=w[0].trace,C=[];P._ownfill&&C.push("_ownFill"),P._nexttrace&&C.push("_nextFill");var O=E.selectAll("g").data(C,b);O.enter().append("g"),O.exit().each(function(R){P[R]=null}).remove(),O.order().each(function(R){P[R]=T(M.select(this),"path","js-fill")})})}(a,g,l),m?(x&&(p=x()),M.transition().duration(c.duration).ease(c.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()}).each(function(){d.selectAll("g.trace").each(function(_,f){r(a,f,l,_,y,this,c)})})):g.each(function(_,f){r(a,f,l,_,y,this,c)}),v&&g.exit().remove(),d.selectAll("path:not([d])").remove()}},91560:function(ee,z,e){"use strict";var M=e(43028);ee.exports=function(k,o){var T,b,h,s,t=k.cd,i=k.xaxis,n=k.yaxis,r=[],a=t[0].trace;if(!M.hasMarkers(a)&&!M.hasText(a))return[];if(o===!1)for(T=0;T<t.length;T++)t[T].selected=0;else for(T=0;T<t.length;T++)b=t[T],h=i.c2p(b.x),s=n.c2p(b.y),b.i!==null&&o.contains([h,s],!1,T,k)?(r.push({pointNumber:b.i,x:i.c2d(b.x),y:n.c2d(b.y)}),b.selected=1):b.selected=0;return r}},43912:function(ee){"use strict";var z=["orientation","groupnorm","stackgaps"];ee.exports=function(e,M,k,o){var T=k._scatterStackOpts,b=o("stackgroup");if(b){var h=M.xaxis+M.yaxis,s=T[h];s||(s=T[h]={});var t=s[b],i=!1;t?t.traces.push(M):(t=s[b]={traceIndices:[],traces:[M]},i=!0);for(var n={orientation:M.x&&!M.y?"h":"v"},r=0;r<z.length;r++){var a=z[r],l=a+"Found";if(!t[l]){var u=e[a]!==void 0,d=a==="orientation";if((u||i)&&(t[a]=o(a,n[a]),d&&(t.fillDflt=t[a]==="h"?"tonextx":"tonexty"),u&&(t[l]=!0,!i&&(delete t.traces[0][a],d))))for(var c=0;c<t.traces.length-1;c++){var x=t.traces[c];x._input.fill!==x.fill&&(x.fill=t.fillDflt)}}}return t}}},49224:function(ee,z,e){"use strict";var M=e(33428),k=e(43616),o=e(24040);function T(h,s,t){k.pointStyle(h.selectAll("path.point"),s,t)}function b(h,s,t){k.textPointStyle(h.selectAll("text"),s,t)}ee.exports={style:function(h){var s=M.select(h).selectAll("g.trace.scatter");s.style("opacity",function(t){return t[0].trace.opacity}),s.selectAll("g.points").each(function(t){T(M.select(this),t.trace||t[0].trace,h)}),s.selectAll("g.text").each(function(t){b(M.select(this),t.trace||t[0].trace,h)}),s.selectAll("g.trace path.js-line").call(k.lineGroupStyle),s.selectAll("g.trace path.js-fill").call(k.fillGroupStyle,h,!1),o.getComponentMethod("errorbars","style")(s)},stylePoints:T,styleText:b,styleOnSelect:function(h,s,t){var i=s[0].trace;i.selectedpoints?(k.selectedPointStyle(t.selectAll("path.point"),i),k.selectedTextStyle(t.selectAll("text"),i)):(T(t,i,h),b(t,i,h))}}},43028:function(ee,z,e){"use strict";var M=e(3400),k=e(38116).isTypedArraySpec;ee.exports={hasLines:function(o){return o.visible&&o.mode&&o.mode.indexOf("lines")!==-1},hasMarkers:function(o){return o.visible&&(o.mode&&o.mode.indexOf("markers")!==-1||o.type==="splom")},hasText:function(o){return o.visible&&o.mode&&o.mode.indexOf("text")!==-1},isBubble:function(o){var T=o.marker;return M.isPlainObject(T)&&(M.isArrayOrTypedArray(T.size)||k(T.size))}}},124:function(ee,z,e){"use strict";var M=e(3400);ee.exports=function(k,o,T,b,h){h=h||{},b("textposition"),M.coerceFont(b,"textfont",h.font||T.font),h.noSelect||(b("selected.textfont.color"),b("unselected.textfont.color"))}},43980:function(ee,z,e){"use strict";var M=e(3400),k=e(24040);ee.exports=function(o,T,b,h){var s,t=h("x"),i=h("y");if(k.getComponentMethod("calendars","handleTraceDefaults")(o,T,["x","y"],b),t){var n=M.minRowLength(t);i?s=Math.min(n,M.minRowLength(i)):(s=n,h("y0"),h("dy"))}else{if(!i)return 0;s=M.minRowLength(i),h("x0"),h("dx")}return T._length=s,s}},91592:function(ee,z,e){"use strict";var M=e(52904),k=e(49084),o=e(29736).axisHoverFormat,T=e(21776).Ks,b=e(21776).Gw,h=e(45464),s=e(99168),t=e(87792),i=e(92880).extendFlat,n=e(67824).overrideAll,r=e(95376),a=M.line,l=M.marker,u=l.line,d=i({width:a.width,dash:{valType:"enumerated",values:r(s),dflt:"solid"}},k("line")),c=ee.exports=n({x:M.x,y:M.y,z:{valType:"data_array"},text:i({},M.text,{}),texttemplate:b({},{}),hovertext:i({},M.hovertext,{}),hovertemplate:T(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),mode:i({},M.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:M.connectgaps,line:d,marker:i({symbol:{valType:"enumerated",values:r(t),dflt:"circle",arrayOk:!0},size:i({},l.size,{dflt:8}),sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:i({},l.opacity,{arrayOk:!1}),colorbar:l.colorbar,line:i({width:i({},u.width,{arrayOk:!1})},k("marker.line"))},k("marker")),textposition:i({},M.textposition,{dflt:"top center"}),textfont:{color:M.textfont.color,size:M.textfont.size,family:i({},M.textfont.family,{arrayOk:!1})},opacity:h.opacity,hoverinfo:i({},h.hoverinfo)},"calc","nested");c.x.editType=c.y.editType=c.z.editType="calc+clearAxisTypes"},41484:function(ee,z,e){"use strict";var M=e(20148),k=e(90136);ee.exports=function(o,T){var b=[{x:!1,y:!1,trace:T,t:{}}];return M(b,T),k(o,T),b}},45156:function(ee,z,e){"use strict";var M=e(24040);function k(o,T,b,h){if(!T||!T.visible)return null;for(var s=M.getComponentMethod("errorbars","makeComputeError")(T),t=new Array(o.length),i=0;i<o.length;i++){var n=s(+o[i],i);if(h.type==="log"){var r=h.c2l(o[i]),a=o[i]-n[0],l=o[i]+n[1];if(t[i]=[(h.c2l(a,!0)-r)*b,(h.c2l(l,!0)-r)*b],a>0){var u=h.c2l(a);h._lowerLogErrorBound||(h._lowerLogErrorBound=u),h._lowerErrorBound=Math.min(h._lowerLogErrorBound,u)}}else t[i]=[-n[0]*b,n[1]*b]}return t}ee.exports=function(o,T,b){var h=[k(o.x,o.error_x,T[0],b.xaxis),k(o.y,o.error_y,T[1],b.yaxis),k(o.z,o.error_z,T[2],b.zaxis)],s=function(l){for(var u=0;u<l.length;u++)if(l[u])return l[u].length;return 0}(h);if(s===0)return null;for(var t=new Array(s),i=0;i<s;i++){for(var n=[[0,0,0],[0,0,0]],r=0;r<3;r++)if(h[r])for(var a=0;a<2;a++)n[a][r]=h[r][i][a];t[i]=n}return t}},41064:function(ee,z,e){"use strict";var M=e(67792).gl_line3d,k=e(67792).gl_scatter3d,o=e(67792).gl_error3d,T=e(67792).gl_mesh3d,b=e(67792).delaunay_triangulate,h=e(3400),s=e(43080),t=e(33040).formatColor,i=e(7152),n=e(99168),r=e(87792),a=e(54460),l=e(10624).appendArrayPointValue,u=e(45156);function d(f,S){this.scene=f,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=d.prototype;function x(f){return f==null?0:f.indexOf("left")>-1?-1:f.indexOf("right")>-1?1:0}function g(f){return f==null?0:f.indexOf("top")>-1?-1:f.indexOf("bottom")>-1?1:0}function p(f,S){return S(4*f)}function v(f){return r[f]}function m(f,S,w,E,P){var C=null;if(h.isArrayOrTypedArray(f)){C=[];for(var O=0;O<S;O++)f[O]===void 0?C[O]=E:C[O]=w(f[O],P)}else C=w(f,h.identity);return C}function y(f){if(h.isArrayOrTypedArray(f)){var S=f[0];return h.isArrayOrTypedArray(S)&&(f=S),"rgb("+f.slice(0,3).map(function(w){return Math.round(255*w)})+")"}return null}function _(f){return h.isArrayOrTypedArray(f)?f.length===4&&typeof f[0]=="number"?y(f):f.map(y):null}c.handlePick=function(f){if(f.object&&(f.object===this.linePlot||f.object===this.delaunayMesh||f.object===this.textMarkers||f.object===this.scatterPlot)){var S=f.index=f.data.index;return f.object.highlight&&f.object.highlight(null),this.scatterPlot&&(f.object=this.scatterPlot,this.scatterPlot.highlight(f.data)),f.textLabel="",this.textLabels&&(h.isArrayOrTypedArray(this.textLabels)?(this.textLabels[S]||this.textLabels[S]===0)&&(f.textLabel=this.textLabels[S]):f.textLabel=this.textLabels),f.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},c.update=function(f){var S,w,E,P,C=this.scene.glplot.gl,O=n.solid;this.data=f;var R=function(N,W){var F,U,V,te,J,K,X=[],Z=N.fullSceneLayout,$=N.dataScale,re=Z.xaxis,oe=Z.yaxis,ie=Z.zaxis,ue=W.marker,me=W.line,be=W.x||[],ge=W.y||[],de=W.z||[],ve=be.length,pe=W.xcalendar,_e=W.ycalendar,Te=W.zcalendar;for(J=0;J<ve;J++)F=re.d2l(be[J],0,pe)*$[0],U=oe.d2l(ge[J],0,_e)*$[1],V=ie.d2l(de[J],0,Te)*$[2],X[J]=[F,U,V];if(Array.isArray(W.text))K=W.text;else if(h.isTypedArray(W.text))K=Array.from(W.text);else if(W.text!==void 0)for(K=new Array(ve),J=0;J<ve;J++)K[J]=W.text;function le(Ue,Ve){var Ze=Z[Ue];return a.tickText(Ze,Ze.d2l(Ve),!0).text}var ae=W.texttemplate;if(ae){var he=N.fullLayout._d3locale,Se=Array.isArray(ae),ke=Se?Math.min(ae.length,ve):ve,Me=Se?function(Ue){return ae[Ue]}:function(){return ae};for(K=new Array(ke),J=0;J<ke;J++){var Ee={x:be[J],y:ge[J],z:de[J]},De={xLabel:le("xaxis",be[J]),yLabel:le("yaxis",ge[J]),zLabel:le("zaxis",de[J])},fe={};l(fe,W,J);var xe=W._meta||{};K[J]=h.texttemplateString(Me(J),De,he,fe,Ee,xe)}}if(te={position:X,mode:W.mode,text:K},"line"in W&&(te.lineColor=t(me,1,ve),te.lineWidth=me.width,te.lineDashes=me.dash),"marker"in W){var we=i(W);te.scatterColor=t(ue,1,ve),te.scatterSize=m(ue.size,ve,p,20,we),te.scatterMarker=m(ue.symbol,ve,v,"\u25CF"),te.scatterLineWidth=ue.line.width,te.scatterLineColor=t(ue.line,1,ve),te.scatterAngle=0}"textposition"in W&&(te.textOffset=function(Ue){var Ve=[0,0];if(Array.isArray(Ue))for(var Ze=0;Ze<Ue.length;Ze++)Ve[Ze]=[0,0],Ue[Ze]&&(Ve[Ze][0]=x(Ue[Ze]),Ve[Ze][1]=g(Ue[Ze]));else Ve[0]=x(Ue),Ve[1]=g(Ue);return Ve}(W.textposition),te.textColor=t(W.textfont,1,ve),te.textSize=m(W.textfont.size,ve,h.identity,12),te.textFont=W.textfont.family,te.textAngle=0);var Oe=["x","y","z"];for(te.project=[!1,!1,!1],te.projectScale=[1,1,1],te.projectOpacity=[1,1,1],J=0;J<3;++J){var ze=W.projection[Oe[J]];(te.project[J]=ze.show)&&(te.projectOpacity[J]=ze.opacity,te.projectScale[J]=ze.scale)}te.errorBounds=u(W,$,Z);var Pe=function(Ue){for(var Ve=[0,0,0],Ze=[[0,0,0],[0,0,0],[0,0,0]],it=[1,1,1],tt=0;tt<3;tt++){var dt=Ue[tt];dt&&dt.copy_zstyle!==!1&&Ue[2].visible!==!1&&(dt=Ue[2]),dt&&dt.visible&&(Ve[tt]=dt.width/2,Ze[tt]=s(dt.color),it[tt]=dt.thickness)}return{capSize:Ve,color:Ze,lineWidth:it}}([W.error_x,W.error_y,W.error_z]);return te.errorColor=Pe.color,te.errorLineWidth=Pe.lineWidth,te.errorCapSize=Pe.capSize,te.delaunayAxis=W.surfaceaxis,te.delaunayColor=s(W.surfacecolor),te}(this.scene,f);"mode"in R&&(this.mode=R.mode),"lineDashes"in R&&R.lineDashes in n&&(O=n[R.lineDashes]),this.color=_(R.scatterColor)||_(R.lineColor),this.dataPoints=R.position,S={gl:this.scene.glplot.gl,position:R.position,color:R.lineColor,lineWidth:R.lineWidth||1,dashes:O[0],dashScale:O[1],opacity:f.opacity,connectGaps:f.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(S):(this.linePlot=M(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var j=f.opacity;if(f.marker&&f.marker.opacity!==void 0&&(j*=f.marker.opacity),w={gl:this.scene.glplot.gl,position:R.position,color:R.scatterColor,size:R.scatterSize,glyph:R.scatterMarker,opacity:j,orthographic:!0,lineWidth:R.scatterLineWidth,lineColor:R.scatterLineColor,project:R.project,projectScale:R.projectScale,projectOpacity:R.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(w):(this.scatterPlot=k(w),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),P={gl:this.scene.glplot.gl,position:R.position,glyph:R.text,color:R.textColor,size:R.textSize,angle:R.textAngle,alignment:R.textOffset,font:R.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:f.opacity},this.textLabels=f.hovertext||f.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(P):(this.textMarkers=k(P),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:R.position,color:R.errorColor,error:R.errorBounds,lineWidth:R.errorLineWidth,capSize:R.errorCapSize,opacity:f.opacity},this.errorBars?R.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):R.errorBounds&&(this.errorBars=o(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),R.delaunayAxis>=0){var D=function(N,W,F){var U,V=(F+1)%3,te=(F+2)%3,J=[],K=[];for(U=0;U<N.length;++U){var X=N[U];!isNaN(X[V])&&isFinite(X[V])&&!isNaN(X[te])&&isFinite(X[te])&&(J.push([X[V],X[te]]),K.push(U))}var Z=b(J);for(U=0;U<Z.length;++U)for(var $=Z[U],re=0;re<$.length;++re)$[re]=K[$[re]];return{positions:N,cells:Z,meshColor:W}}(R.position,R.delaunayColor,R.delaunayAxis);D.opacity=f.opacity,this.delaunayMesh?this.delaunayMesh.update(D):(D.gl=C,this.delaunayMesh=T(D),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},ee.exports=function(f,S){var w=new d(f,S.uid);return w.update(S),w}},83484:function(ee,z,e){"use strict";var M=e(24040),k=e(3400),o=e(43028),T=e(74428),b=e(66828),h=e(124),s=e(91592);ee.exports=function(t,i,n,r){function a(v,m){return k.coerce(t,i,s,v,m)}var l=function(v,m,y,_){var f=0,S=y("x"),w=y("y"),E=y("z");return M.getComponentMethod("calendars","handleTraceDefaults")(v,m,["x","y","z"],_),S&&w&&E&&(f=Math.min(S.length,w.length,E.length),m._length=m._xlength=m._ylength=m._zlength=f),f}(t,i,a,r);if(l){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),o.hasMarkers(i)&&T(t,i,n,r,a,{noSelect:!0,noAngle:!0}),o.hasLines(i)&&(a("connectgaps"),b(t,i,n,r,a)),o.hasText(i)&&(a("texttemplate"),h(t,i,r,a,{noSelect:!0}));var u=(i.line||{}).color,d=(i.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",u||d);for(var c=["x","y","z"],x=0;x<3;++x){var g="projection."+c[x];a(g+".show")&&(a(g+".opacity"),a(g+".scale"))}var p=M.getComponentMethod("errorbars","supplyDefaults");p(t,i,u||d||n,{axis:"z"}),p(t,i,u||d||n,{axis:"y",inherit:"z"}),p(t,i,u||d||n,{axis:"x",inherit:"z"})}else i.visible=!1}},3296:function(ee,z,e){"use strict";ee.exports={plot:e(41064),attributes:e(91592),markerSymbols:e(87792),supplyDefaults:e(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e(41484),moduleType:"trace",name:"scatter3d",basePlotModule:e(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(ee,z,e){"use strict";var M=e(98304),k=e(52904),o=e(45464),T=e(21776).Ks,b=e(21776).Gw,h=e(49084),s=e(92880).extendFlat,t=k.marker,i=k.line,n=t.line;ee.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:s({},k.mode,{dflt:"markers"}),text:s({},k.text,{}),texttemplate:b({editType:"plot"},{keys:["a","b","text"]}),hovertext:s({},k.hovertext,{}),line:{color:i.color,width:i.width,dash:i.dash,backoff:i.backoff,shape:s({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:k.connectgaps,fill:s({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M(),marker:s({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,angle:t.angle,angleref:t.angleref,standoff:t.standoff,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:s({width:n.width,editType:"calc"},h("marker.line")),gradient:t.gradient,editType:"calc"},h("marker")),textfont:k.textfont,textposition:k.textposition,selected:k.selected,unselected:k.unselected,hoverinfo:s({},o.hoverinfo,{flags:["a","b","text","name"]}),hoveron:k.hoveron,hovertemplate:T()}},48228:function(ee,z,e){"use strict";var M=e(38248),k=e(90136),o=e(20148),T=e(4500),b=e(16356).calcMarkerSize,h=e(50948);ee.exports=function(s,t){var i=t._carpetTrace=h(s,t);if(i&&i.visible&&i.visible!=="legendonly"){var n;t.xaxis=i.xaxis,t.yaxis=i.yaxis;var r,a,l=t._length,u=new Array(l),d=!1;for(n=0;n<l;n++)if(r=t.a[n],a=t.b[n],M(r)&&M(a)){var c=i.ab2xy(+r,+a,!0),x=i.isVisible(+r,+a);x||(d=!0),u[n]={x:c[0],y:c[1],a:r,b:a,vis:x}}else u[n]={x:!1,y:!1};return t._needsCull=d,u[0].carpet=i,u[0].trace=t,b(t,l),k(s,t),o(u,t),T(u,t),u}}},6176:function(ee,z,e){"use strict";var M=e(3400),k=e(88200),o=e(43028),T=e(74428),b=e(66828),h=e(11731),s=e(124),t=e(70840),i=e(90372);ee.exports=function(n,r,a,l){function u(p,v){return M.coerce(n,r,i,p,v)}u("carpet"),r.xaxis="x",r.yaxis="y";var d=u("a"),c=u("b"),x=Math.min(d.length,c.length);if(x){r._length=x,u("text"),u("texttemplate"),u("hovertext"),u("mode",x<k.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(r)&&T(n,r,a,l,u,{gradient:!0}),o.hasLines(r)&&(b(n,r,a,l,u,{backoff:!0}),h(n,r,u),u("connectgaps")),o.hasText(r)&&s(n,r,l,u);var g=[];(o.hasMarkers(r)||o.hasText(r))&&(u("marker.maxdisplayed"),g.push("points")),u("fill"),r.fill!=="none"&&(t(n,r,a,u),o.hasLines(r)||h(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||g.push("fills"),u("hoveron",g.join("+")||"points")!=="fills"&&u("hovertemplate"),M.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},89307:function(ee){"use strict";ee.exports=function(z,e,M,k,o){var T=k[o];return z.a=T.a,z.b=T.b,z.y=T.y,z}},52364:function(ee){"use strict";ee.exports=function(z,e){var M={},k=e._carpet,o=k.ab2ij([z.a,z.b]),T=Math.floor(o[0]),b=o[0]-T,h=Math.floor(o[1]),s=o[1]-h,t=k.evalxy([],T,h,b,s);return M.yLabel=t[1].toFixed(3),M}},58960:function(ee,z,e){"use strict";var M=e(98723),k=e(3400).fillText;ee.exports=function(o,T,b,h){var s=M(o,T,b,h);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0){var i=1-t.y0/o.ya._length,n=o.xa._length,r=n*i/2,a=n-r;return t.x0=Math.max(Math.min(t.x0,a),r),t.x1=Math.max(Math.min(t.x1,a),r),s}var l=t.cd[t.index];t.a=l.a,t.b=l.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var u=t.trace,d=u._carpet,c=u._module.formatLabels(l,u);t.yLabel=c.yLabel,delete t.text;var x=[];if(!u.hovertemplate){var g=(l.hi||u.hoverinfo).split("+");g.indexOf("all")!==-1&&(g=["a","b","text"]),g.indexOf("a")!==-1&&p(d.aaxis,l.a),g.indexOf("b")!==-1&&p(d.baxis,l.b),x.push("y: "+t.yLabel),g.indexOf("text")!==-1&&k(l,u,x),t.extraText=x.join("<br>")}return s}function p(v,m){var y;y=v.labelprefix&&v.labelprefix.length>0?v.labelprefix.replace(/ = $/,""):v._hovertitle,x.push(y+": "+m.toFixed(3)+v.labelsuffix)}}},4184:function(ee,z,e){"use strict";ee.exports={attributes:e(90372),supplyDefaults:e(6176),colorbar:e(5528),formatLabels:e(52364),calc:e(48228),plot:e(20036),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(58960),selectPoints:e(91560),eventData:e(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:e(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(ee,z,e){"use strict";var M=e(96504),k=e(54460),o=e(43616);ee.exports=function(T,b,h,s){var t,i,n,r=h[0][0].carpet,a=k.getFromId(T,r.xaxis||"x"),l=k.getFromId(T,r.yaxis||"y"),u={xaxis:a,yaxis:l,plot:b.plot};for(t=0;t<h.length;t++)(i=h[t][0].trace)._xA=a,i._yA=l;for(M(T,u,h,s),t=0;t<h.length;t++)i=h[t][0].trace,n=s.selectAll("g.trace"+i.uid+" .js-line"),o.setClipUrl(n,h[t][0].carpet._clipPathId,T)}},6096:function(ee,z,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(52904),b=e(45464),h=e(49084),s=e(98192).u,t=e(92880).extendFlat,i=e(67824).overrideAll,n=T.marker,r=T.line,a=n.line;ee.exports=i({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},T.hovertext,{}),textfont:T.textfont,textposition:T.textposition,line:{color:r.color,width:r.width,dash:s},connectgaps:T.connectgaps,marker:t({symbol:n.symbol,opacity:n.opacity,angle:n.angle,angleref:t({},n.angleref,{values:["previous","up","north"]}),standoff:n.standoff,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:t({width:a.width},h("marker.line")),gradient:n.gradient},h("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:o(),selected:T.selected,unselected:T.unselected,hoverinfo:t({},b.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:M()},"calc","nested")},25212:function(ee,z,e){"use strict";var M=e(38248),k=e(39032).BADNUM,o=e(90136),T=e(20148),b=e(4500),h=e(3400).isArrayOrTypedArray,s=e(3400)._;function t(i){return i&&typeof i=="string"}ee.exports=function(i,n){var r,a=h(n.locations),l=a?n.locations.length:n._length,u=new Array(l);r=n.geojson?function(v){return t(v)||M(v)}:t;for(var d=0;d<l;d++){var c=u[d]={};if(a){var x=n.locations[d];c.loc=r(x)?x:null}else{var g=n.lon[d],p=n.lat[d];M(g)&&M(p)?c.lonlat=[+g,+p]:c.lonlat=[k,k]}}return T(u,n),o(i,n),b(u,n),l&&(u[0].t={labels:{lat:s(i,"lat:")+" ",lon:s(i,"lon:")+" "}}),u}},86188:function(ee,z,e){"use strict";var M=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(124),h=e(70840),s=e(6096);ee.exports=function(t,i,n,r){function a(p,v){return M.coerce(t,i,s,p,v)}var l,u=a("locations");if(u&&u.length){var d,c=a("geojson");(typeof c=="string"&&c!==""||M.isPlainObject(c))&&(d="geojson-id"),a("locationmode",d)==="geojson-id"&&a("featureidkey"),l=u.length}else{var x=a("lon")||[],g=a("lat")||[];l=Math.min(x.length,g.length)}l?(i._length=l,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),k.hasMarkers(i)&&o(t,i,n,r,a,{gradient:!0}),k.hasLines(i)&&(T(t,i,n,r,a),a("connectgaps")),k.hasText(i)&&(a("texttemplate"),b(t,i,r,a)),a("fill"),i.fill!=="none"&&h(t,i,n,a),M.coerceSelectionMarkerOpacity(i,a)):i.visible=!1}},58544:function(ee){"use strict";ee.exports=function(z,e,M,k,o){z.lon=e.lon,z.lat=e.lat,z.location=e.loc?e.loc:null;var T=k[o];return T.fIn&&T.fIn.properties&&(z.properties=T.fIn.properties),z}},56696:function(ee,z,e){"use strict";var M=e(54460);ee.exports=function(k,o,T){var b={},h=T[o.geo]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=M.tickText(h,h.c2l(s[0]),!0).text,b.latLabel=M.tickText(h,h.c2l(s[1]),!0).text,b}},64292:function(ee,z,e){"use strict";var M=e(93024),k=e(39032).BADNUM,o=e(44928),T=e(3400).fillText,b=e(6096);ee.exports=function(h,s,t){var i=h.cd,n=i[0].trace,r=h.xa,a=h.ya,l=h.subplot,u=l.projection.isLonLatOverEdges,d=l.project;if(M.getClosest(i,function(y){var _=y.lonlat;if(_[0]===k||u(_))return 1/0;var f=d(_),S=d([s,t]),w=Math.abs(f[0]-S[0]),E=Math.abs(f[1]-S[1]),P=Math.max(3,y.mrc||0);return Math.max(Math.sqrt(w*w+E*E)-P,1-3/P)},h),h.index!==!1){var c=i[h.index],x=c.lonlat,g=[r.c2p(x),a.c2p(x)],p=c.mrc||1;h.x0=g[0]-p,h.x1=g[0]+p,h.y0=g[1]-p,h.y1=g[1]+p,h.loc=c.loc,h.lon=x[0],h.lat=x[1];var v={};v[n.geo]={_subplot:l};var m=n._module.formatLabels(c,n,v);return h.lonLabel=m.lonLabel,h.latLabel=m.latLabel,h.color=o(n,c),h.extraText=function(y,_,f,S){if(!y.hovertemplate){var w=_.hi||y.hoverinfo,E=w==="all"?b.hoverinfo.flags:w.split("+"),P=E.indexOf("location")!==-1&&Array.isArray(y.locations),C=E.indexOf("lon")!==-1,O=E.indexOf("lat")!==-1,R=E.indexOf("text")!==-1,j=[];return P?j.push(_.loc):C&&O?j.push("("+D(f.latLabel)+", "+D(f.lonLabel)+")"):C?j.push(S.lon+D(f.lonLabel)):O&&j.push(S.lat+D(f.latLabel)),R&&T(_,y,j),j.join("<br>")}function D(N){return N+"\xB0"}}(n,c,h,i[0].t.labels),h.hovertemplate=n.hovertemplate,[h]}}},36952:function(ee,z,e){"use strict";ee.exports={attributes:e(6096),supplyDefaults:e(86188),colorbar:e(5528),formatLabels:e(56696),calc:e(25212),calcGeoJSON:e(48691).calcGeoJSON,plot:e(48691).plot,style:e(25064),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(64292),eventData:e(58544),selectPoints:e(8796),moduleType:"trace",name:"scattergeo",basePlotModule:e(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(59972).getTopojsonFeatures,T=e(44808),b=e(27144),h=e(19280).findExtremes,s=e(39032).BADNUM,t=e(16356).calcMarkerSize,i=e(43028),n=e(25064);ee.exports={calcGeoJSON:function(r,a){var l,u,d=r[0].trace,c=a[d.geo],x=c._subplot,g=d._length;if(k.isArrayOrTypedArray(d.locations)){var p=d.locationmode,v=p==="geojson-id"?b.extractTraceFeature(r):o(d,x.topojson);for(l=0;l<g;l++){u=r[l];var m=p==="geojson-id"?u.fOut:b.locationToFeature(p,u.loc,v);u.lonlat=m?m.properties.ct:[s,s]}}var y,_,f={padded:!0};if(c.fitbounds==="geojson"&&d.locationmode==="geojson-id"){var S=b.computeBbox(b.getTraceGeojson(d));y=[S[0],S[2]],_=[S[1],S[3]]}else{for(y=new Array(g),_=new Array(g),l=0;l<g;l++)u=r[l],y[l]=u.lonlat[0],_[l]=u.lonlat[1];f.ppad=t(d,g)}d._extremes.lon=h(c.lonaxis._ax,y,f),d._extremes.lat=h(c.lataxis._ax,_,f)},plot:function(r,a,l){var u=a.layers.frontplot.select(".scatterlayer"),d=k.makeTraceGroups(u,l,"trace scattergeo");function c(x,g){x.lonlat[0]===s&&M.select(g).remove()}d.selectAll("*").remove(),d.each(function(x){var g=M.select(this),p=x[0].trace;if(i.hasLines(p)||p.fill!=="none"){var v=T.calcTraceToLineCoords(x),m=p.fill!=="none"?T.makePolygon(v):T.makeLine(v);g.selectAll("path.js-line").data([{geojson:m,trace:p}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(p)&&g.selectAll("path.point").data(k.identity).enter().append("path").classed("point",!0).each(function(y){c(y,this)}),i.hasText(p)&&g.selectAll("g").data(k.identity).enter().append("g").append("text").each(function(y){c(y,this)}),n(r,x)})}}},8796:function(ee,z,e){"use strict";var M=e(43028),k=e(39032).BADNUM;ee.exports=function(o,T){var b,h,s,t,i,n=o.cd,r=o.xaxis,a=o.yaxis,l=[],u=n[0].trace;if(!M.hasMarkers(u)&&!M.hasText(u))return[];if(T===!1)for(i=0;i<n.length;i++)n[i].selected=0;else for(i=0;i<n.length;i++)(h=(b=n[i]).lonlat)[0]!==k&&(s=r.c2p(h),t=a.c2p(h),T.contains([s,t],null,i,o)?(l.push({pointNumber:i,lon:h[0],lat:h[1]}),b.selected=1):b.selected=0);return l}},25064:function(ee,z,e){"use strict";var M=e(33428),k=e(43616),o=e(76308),T=e(49224),b=T.stylePoints,h=T.styleText;ee.exports=function(s,t){t&&function(i,n){var r=n[0].trace,a=n[0].node3;a.style("opacity",n[0].trace.opacity),b(a,r,i),h(a,r,i),a.selectAll("path.js-line").style("fill","none").each(function(l){var u=M.select(this),d=l.trace,c=d.line||{};u.call(o.stroke,c.color).call(k.dashLine,c.dash||"",c.width||0),d.fill!=="none"&&u.call(o.fill,d.fillcolor)})}(s,t)}},2876:function(ee,z,e){"use strict";var M=e(45464),k=e(98304),o=e(52904),T=e(29736).axisHoverFormat,b=e(49084),h=e(95376),s=e(92880).extendFlat,t=e(67824).overrideAll,i=e(67072).DASHES,n=o.line,r=o.marker,a=r.line,l=ee.exports=t({x:o.x,x0:o.x0,dx:o.dx,y:o.y,y0:o.y0,dy:o.dy,xperiod:o.xperiod,yperiod:o.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:o.xperiodalignment,yperiodalignment:o.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),text:o.text,hovertext:o.hovertext,textposition:o.textposition,textfont:o.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:h(i),dflt:"solid"}},marker:s({},b("marker"),{symbol:r.symbol,angle:r.angle,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:s({},b("marker.line"),{width:a.width})}),connectgaps:o.connectgaps,fill:s({},o.fill,{dflt:"none"}),fillcolor:k(),selected:{marker:o.selected.marker,textfont:o.selected.textfont},unselected:{marker:o.unselected.marker,textfont:o.unselected.textfont},opacity:M.opacity},"calc","nested");l.x.editType=l.y.editType=l.x0.editType=l.y0.editType="calc+clearAxisTypes",l.hovertemplate=o.hovertemplate,l.texttemplate=o.texttemplate},64628:function(ee,z,e){"use strict";var M=e(41272);ee.exports={moduleType:"trace",name:"scattergl",basePlotModule:e(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e(2876),supplyDefaults:e(80220),crossTraceDefaults:e(35036),colorbar:e(5528),formatLabels:e(99396),calc:e(24856),hoverPoints:M.hoverPoints,selectPoints:e(73224),meta:{}}},24856:function(ee,z,e){"use strict";var M=e(3108),k=e(3400),o=e(79811),T=e(19280).findExtremes,b=e(1220),h=e(16356),s=h.calcMarkerSize,t=h.calcAxisExpansion,i=h.setFirstScatter,n=e(90136),r=e(84236),a=e(74588),l=e(39032).BADNUM,u=e(67072).TOO_MANY_POINTS;function d(c,x,g){var p=c._extremes[x._id],v=T(x,g._bnds,{padded:!0});p.min=p.min.concat(v.min),p.max=p.max.concat(v.max)}ee.exports=function(c,x){var g,p=c._fullLayout,v=x._xA=o.getFromId(c,x.xaxis,"x"),m=x._yA=o.getFromId(c,x.yaxis,"y"),y=p._plots[x.xaxis+x.yaxis],_=x._length,f=_>=u,S=2*_,w={},E=v.makeCalcdata(x,"x"),P=m.makeCalcdata(x,"y"),C=b(x,v,"x",E),O=b(x,m,"y",P),R=C.vals,j=O.vals;x._x=R,x._y=j,x.xperiodalignment&&(x._origX=E,x._xStarts=C.starts,x._xEnds=C.ends),x.yperiodalignment&&(x._origY=P,x._yStarts=O.starts,x._yEnds=O.ends);var D=new Array(S),N=new Array(_);for(g=0;g<_;g++)D[2*g]=R[g]===l?NaN:R[g],D[2*g+1]=j[g]===l?NaN:j[g],N[g]=g;if(v.type==="log")for(g=0;g<S;g+=2)D[g]=v.c2l(D[g]);if(m.type==="log")for(g=1;g<S;g+=2)D[g]=m.c2l(D[g]);f&&v.type!=="log"&&m.type!=="log"?w.tree=M(D):w.ids=N,n(c,x);var W,F=function(V,te,J,K,X,Z){var $=r.style(V,J);if($.marker&&($.marker.positions=K),$.line&&K.length>1&&k.extendFlat($.line,r.linePositions(V,J,K)),$.errorX||$.errorY){var re=r.errorBarPositions(V,J,K,X,Z);$.errorX&&k.extendFlat($.errorX,re.x),$.errorY&&k.extendFlat($.errorY,re.y)}return $.text&&(k.extendFlat($.text,{positions:K},r.textPosition(V,J,$.text,$.marker)),k.extendFlat($.textSel,{positions:K},r.textPosition(V,J,$.text,$.markerSel)),k.extendFlat($.textUnsel,{positions:K},r.textPosition(V,J,$.text,$.markerUnsel))),$}(c,0,x,D,R,j),U=a(c,y);return i(p,x),f?F.marker&&(W=F.marker.sizeAvg||Math.max(F.marker.size,3)):W=s(x,_),t(c,x,v,m,R,j,W),F.errorX&&d(x,v,F.errorX),F.errorY&&d(x,m,F.errorY),F.fill&&!U.fill2d&&(U.fill2d=!0),F.marker&&!U.scatter2d&&(U.scatter2d=!0),F.line&&!U.line2d&&(U.line2d=!0),!F.errorX&&!F.errorY||U.error2d||(U.error2d=!0),F.text&&!U.glText&&(U.glText=!0),F.marker&&(F.marker.snap=_),U.lineOptions.push(F.line),U.errorXOptions.push(F.errorX),U.errorYOptions.push(F.errorY),U.fillOptions.push(F.fill),U.markerOptions.push(F.marker),U.markerSelectedOptions.push(F.markerSel),U.markerUnselectedOptions.push(F.markerUnsel),U.textOptions.push(F.text),U.textSelectedOptions.push(F.textSel),U.textUnselectedOptions.push(F.textUnsel),U.selectBatch.push([]),U.unselectBatch.push([]),w._scene=U,w.index=U.count,w.x=R,w.y=j,w.positions=D,U.count++,[{x:!1,y:!1,t:w,trace:x}]}},67072:function(ee){"use strict";ee.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(ee,z,e){"use strict";var M=e(38248),k=e(20472),o=e(72160),T=e(24040),b=e(3400),h=b.isArrayOrTypedArray,s=e(43616),t=e(79811),i=e(33040).formatColor,n=e(43028),r=e(7152),a=e(80088),l=e(67072),u=e(13448).DESELECTDIM,d={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},c=e(10624).appendArrayPointValue;function x(P,C){var O,R=P._fullLayout,j=C._length,D=C.textfont,N=C.textposition,W=h(N)?N:[N],F=D.color,U=D.size,V=D.family,te={},J=P._context.plotGlPixelRatio,K=C.texttemplate;if(K){te.text=[];var X=R._d3locale,Z=Array.isArray(K),$=Z?Math.min(K.length,j):j,re=Z?function(de){return K[de]}:function(){return K};for(O=0;O<$;O++){var oe={i:O},ie=C._module.formatLabels(oe,C,R),ue={};c(ue,C,O);var me=C._meta||{};te.text.push(b.texttemplateString(re(O),ie,X,ue,oe,me))}}else h(C.text)&&C.text.length<j?te.text=C.text.slice():te.text=C.text;if(h(te.text))for(O=te.text.length;O<j;O++)te.text[O]="";for(te.opacity=C.opacity,te.font={},te.align=[],te.baseline=[],O=0;O<W.length;O++){var be=W[O].split(/\s+/);switch(be[1]){case"left":te.align.push("right");break;case"right":te.align.push("left");break;default:te.align.push(be[1])}switch(be[0]){case"top":te.baseline.push("bottom");break;case"bottom":te.baseline.push("top");break;default:te.baseline.push(be[0])}}if(h(F))for(te.color=new Array(j),O=0;O<j;O++)te.color[O]=F[O];else te.color=F;if(h(U)||h(V))for(te.font=new Array(j),O=0;O<j;O++){var ge=te.font[O]={};ge.size=(b.isTypedArray(U)?U[O]:h(U)?M(U[O])?U[O]:0:U)*J,ge.family=h(V)?V[O]:V}else te.font={size:U*J,family:V};return te}function g(P,C){var O,R,j=C._length,D=C.marker,N={},W=h(D.symbol),F=h(D.angle),U=h(D.color),V=h(D.line.color),te=h(D.opacity),J=h(D.size),K=h(D.line.width);if(W||(R=a.isOpenSymbol(D.symbol)),W||U||V||te||F){N.symbols=new Array(j),N.angles=new Array(j),N.colors=new Array(j),N.borderColors=new Array(j);var X=D.symbol,Z=D.angle,$=i(D,D.opacity,j),re=i(D.line,D.opacity,j);if(!h(re[0])){var oe=re;for(re=Array(j),O=0;O<j;O++)re[O]=oe}if(!h($[0])){var ie=$;for($=Array(j),O=0;O<j;O++)$[O]=ie}if(!h(X)){var ue=X;for(X=Array(j),O=0;O<j;O++)X[O]=ue}if(!h(Z)){var me=Z;for(Z=Array(j),O=0;O<j;O++)Z[O]=me}for(N.symbols=X,N.angles=Z,N.colors=$,N.borderColors=re,O=0;O<j;O++)W&&(R=a.isOpenSymbol(D.symbol[O])),R&&(re[O]=$[O].slice(),$[O]=$[O].slice(),$[O][3]=0);for(N.opacity=C.opacity,N.markers=new Array(j),O=0;O<j;O++)N.markers[O]=E({mx:N.symbols[O],ma:N.angles[O]},C)}else R?(N.color=o(D.color,"uint8"),N.color[3]=0,N.borderColor=o(D.color,"uint8")):(N.color=o(D.color,"uint8"),N.borderColor=o(D.line.color,"uint8")),N.opacity=C.opacity*D.opacity,N.marker=E({mx:D.symbol,ma:D.angle},C);var be,ge=r(C,1);if(J||K){var de,ve=N.sizes=new Array(j),pe=N.borderSizes=new Array(j),_e=0;if(J){for(O=0;O<j;O++)ve[O]=ge(D.size[O]),_e+=ve[O];de=_e/j}else for(be=ge(D.size),O=0;O<j;O++)ve[O]=be;if(K)for(O=0;O<j;O++)pe[O]=D.line.width[O];else for(be=D.line.width,O=0;O<j;O++)pe[O]=be;N.sizeAvg=de}else N.size=ge(D&&D.size||10),N.borderSizes=ge(D.line.width);return N}function p(P,C,O){var R=C.marker,j={};return O&&(O.marker&&O.marker.symbol?j=g(0,b.extendFlat({},R,O.marker)):O.marker&&(O.marker.size&&(j.size=O.marker.size),O.marker.color&&(j.colors=O.marker.color),O.marker.opacity!==void 0&&(j.opacity=O.marker.opacity))),j}function v(P,C,O){var R={};if(!O)return R;if(O.textfont){var j={opacity:1,text:C.text,texttemplate:C.texttemplate,textposition:C.textposition,textfont:b.extendFlat({},C.textfont)};O.textfont&&b.extendFlat(j.textfont,O.textfont),R=x(P,j)}return R}function m(P,C,O){var R={capSize:2*C.width*O,lineWidth:C.thickness*O,color:C.color};return C.copy_ystyle&&(R=P.error_y),R}var y=l.SYMBOL_SDF_SIZE,_=l.SYMBOL_SIZE,f=l.SYMBOL_STROKE,S={},w=s.symbolFuncs[0](.05*_);function E(P,C){var O,R,j=P.mx;if(j==="circle")return null;var D=s.symbolNumber(j),N=s.symbolFuncs[D%100],W=!!s.symbolNoDot[D%100],F=!!s.symbolNoFill[D%100],U=a.isDotSymbol(j);if(P.ma&&(j+="_"+P.ma),S[j])return S[j];var V=s.getMarkerAngle(P,C);return O=U&&!W?N(1.1*_,V)+w:N(_,V),R=k(O,{w:y,h:y,viewBox:[-_,-_,_,_],stroke:F?f:-f}),S[j]=R,R||null}ee.exports={style:function(P,C){var O,R={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},j=P._context.plotGlPixelRatio;if(C.visible!==!0)return R;if(n.hasText(C)&&(R.text=x(P,C),R.textSel=v(P,C,C.selected),R.textUnsel=v(P,C,C.unselected)),n.hasMarkers(C)&&(R.marker=g(0,C),R.markerSel=p(0,C,C.selected),R.markerUnsel=p(0,C,C.unselected),!C.unselected&&h(C.marker.opacity))){var D=C.marker.opacity;for(R.markerUnsel.opacity=new Array(D.length),O=0;O<D.length;O++)R.markerUnsel.opacity[O]=u*D[O]}if(n.hasLines(C)){R.line={overlay:!0,thickness:C.line.width*j,color:C.line.color,opacity:C.opacity};var N=(l.DASHES[C.line.dash]||[1]).slice();for(O=0;O<N.length;++O)N[O]*=C.line.width*j;R.line.dashes=N}return C.error_x&&C.error_x.visible&&(R.errorX=m(C,C.error_x,j)),C.error_y&&C.error_y.visible&&(R.errorY=m(C,C.error_y,j)),C.fill&&C.fill!=="none"&&(R.fill={closed:!0,fill:C.fillcolor,thickness:0}),R},markerStyle:g,markerSelection:p,linePositions:function(P,C,O){var R,j,D=O.length,N=D/2;if(n.hasLines(C)&&N)if(C.line.shape==="hv"){for(R=[],j=0;j<N-1;j++)isNaN(O[2*j])||isNaN(O[2*j+1])?R.push(NaN,NaN,NaN,NaN):(R.push(O[2*j],O[2*j+1]),isNaN(O[2*j+2])||isNaN(O[2*j+3])?R.push(NaN,NaN):R.push(O[2*j+2],O[2*j+1]));R.push(O[D-2],O[D-1])}else if(C.line.shape==="hvh"){for(R=[],j=0;j<N-1;j++)if(isNaN(O[2*j])||isNaN(O[2*j+1])||isNaN(O[2*j+2])||isNaN(O[2*j+3]))isNaN(O[2*j])||isNaN(O[2*j+1])?R.push(NaN,NaN):R.push(O[2*j],O[2*j+1]),R.push(NaN,NaN);else{var W=(O[2*j]+O[2*j+2])/2;R.push(O[2*j],O[2*j+1],W,O[2*j+1],W,O[2*j+3])}R.push(O[D-2],O[D-1])}else if(C.line.shape==="vhv"){for(R=[],j=0;j<N-1;j++)if(isNaN(O[2*j])||isNaN(O[2*j+1])||isNaN(O[2*j+2])||isNaN(O[2*j+3]))isNaN(O[2*j])||isNaN(O[2*j+1])?R.push(NaN,NaN):R.push(O[2*j],O[2*j+1]),R.push(NaN,NaN);else{var F=(O[2*j+1]+O[2*j+3])/2;R.push(O[2*j],O[2*j+1],O[2*j],F,O[2*j+2],F)}R.push(O[D-2],O[D-1])}else if(C.line.shape==="vh"){for(R=[],j=0;j<N-1;j++)isNaN(O[2*j])||isNaN(O[2*j+1])?R.push(NaN,NaN,NaN,NaN):(R.push(O[2*j],O[2*j+1]),isNaN(O[2*j+2])||isNaN(O[2*j+3])?R.push(NaN,NaN):R.push(O[2*j],O[2*j+3]));R.push(O[D-2],O[D-1])}else R=O;var U=!1;for(j=0;j<R.length;j++)if(isNaN(R[j])){U=!0;break}var V=U||R.length>l.TOO_MANY_POINTS||n.hasMarkers(C)?"rect":"round";if(U&&C.connectgaps){var te=R[0],J=R[1];for(j=0;j<R.length;j+=2)isNaN(R[j])||isNaN(R[j+1])?(R[j]=te,R[j+1]=J):(te=R[j],J=R[j+1])}return{join:V,positions:R}},errorBarPositions:function(P,C,O,R,j){var D=T.getComponentMethod("errorbars","makeComputeError"),N=t.getFromId(P,C.xaxis,"x"),W=t.getFromId(P,C.yaxis,"y"),F=O.length/2,U={};function V(te,J){var K=J._id.charAt(0),X=C["error_"+K];if(X&&X.visible&&(J.type==="linear"||J.type==="log")){for(var Z=D(X),$={x:0,y:1}[K],re={x:[0,1,2,3],y:[2,3,0,1]}[K],oe=new Float64Array(4*F),ie=1/0,ue=-1/0,me=0,be=0;me<F;me++,be+=4){var ge=te[me];if(M(ge)){var de=O[2*me+$],ve=Z(ge,me),pe=ve[0],_e=ve[1];if(M(pe)&&M(_e)){var Te=ge-pe,le=ge+_e;oe[be+re[0]]=de-J.c2l(Te),oe[be+re[1]]=J.c2l(le)-de,oe[be+re[2]]=0,oe[be+re[3]]=0,ie=Math.min(ie,ge-pe),ue=Math.max(ue,ge+_e)}}}U[K]={positions:O,errors:oe,_bnds:[ie,ue]}}}return V(R,N),V(j,W),U},textPosition:function(P,C,O,R){var j,D=C._length,N={};if(n.hasMarkers(C)){var W=O.font,F=O.align,U=O.baseline;for(N.offset=new Array(D),j=0;j<D;j++){var V=R.sizes?R.sizes[j]:R.size,te=h(W)?W[j].size:W.size,J=h(F)?F.length>1?F[j]:F[0]:F,K=h(U)?U.length>1?U[j]:U[0]:U,X=d[J],Z=d[K],$=V?V/.8+1:0,re=-Z*$-.5*Z;N.offset[j]=[X*$/te,re/te]}}return N}}},80220:function(ee,z,e){"use strict";var M=e(3400),k=e(24040),o=e(80088),T=e(2876),b=e(88200),h=e(43028),s=e(43980),t=e(31147),i=e(74428),n=e(66828),r=e(70840),a=e(124);ee.exports=function(l,u,d,c){function x(S,w){return M.coerce(l,u,T,S,w)}var g=!!l.marker&&o.isOpenSymbol(l.marker.symbol),p=h.isBubble(l),v=s(l,u,c,x);if(v){t(l,u,c,x),x("xhoverformat"),x("yhoverformat");var m=v<b.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",m),h.hasMarkers(u)&&(i(l,u,d,c,x,{noAngleRef:!0,noStandOff:!0}),x("marker.line.width",g||p?1:0)),h.hasLines(u)&&(x("connectgaps"),n(l,u,d,c,x),x("line.shape")),h.hasText(u)&&(x("texttemplate"),a(l,u,c,x));var y=(u.line||{}).color,_=(u.marker||{}).color;x("fill"),u.fill!=="none"&&r(l,u,d,x);var f=k.getComponentMethod("errorbars","supplyDefaults");f(l,u,y||_||d,{axis:"y"}),f(l,u,y||_||d,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(u,x)}else u.visible=!1}},26768:function(ee,z,e){"use strict";var M=e(3400),k=e(76308),o=e(13448).DESELECTDIM;ee.exports={styleTextSelection:function(T){var b,h,s=T[0],t=s.trace,i=s.t,n=i._scene,r=i.index,a=n.selectBatch[r],l=n.unselectBatch[r],u=n.textOptions[r],d=n.textSelectedOptions[r]||{},c=n.textUnselectedOptions[r]||{},x=M.extendFlat({},u);if(a.length||l.length){var g=d.color,p=c.color,v=u.color,m=M.isArrayOrTypedArray(v);for(x.color=new Array(t._length),b=0;b<a.length;b++)h=a[b],x.color[h]=g||(m?v[h]:v);for(b=0;b<l.length;b++){h=l[b];var y=m?v[h]:v;x.color[h]=p||(g?y:k.addOpacity(y,o))}}n.glText[r].update(x)}}},99396:function(ee,z,e){"use strict";var M=e(76688);ee.exports=function(k,o,T){var b=k.i;return"x"in k||(k.x=o._x[b]),"y"in k||(k.y=o._y[b]),M(k,o,T)}},80088:function(ee,z,e){"use strict";var M=e(67072);z.isOpenSymbol=function(k){return typeof k=="string"?M.OPEN_RE.test(k):k%200>100},z.isDotSymbol=function(k){return typeof k=="string"?M.DOT_RE.test(k):k>200}},41272:function(ee,z,e){"use strict";var M=e(24040),k=e(3400),o=e(44928);function T(b,h,s,t){var i=b.xa,n=b.ya,r=b.distance,a=b.dxy,l=b.index,u={pointNumber:l,x:h[l],y:s[l]};u.tx=k.isArrayOrTypedArray(t.text)?t.text[l]:t.text,u.htx=Array.isArray(t.hovertext)?t.hovertext[l]:t.hovertext,u.data=Array.isArray(t.customdata)?t.customdata[l]:t.customdata,u.tp=Array.isArray(t.textposition)?t.textposition[l]:t.textposition;var d=t.textfont;d&&(u.ts=k.isArrayOrTypedArray(d.size)?d.size[l]:d.size,u.tc=Array.isArray(d.color)?d.color[l]:d.color,u.tf=Array.isArray(d.family)?d.family[l]:d.family);var c=t.marker;c&&(u.ms=k.isArrayOrTypedArray(c.size)?c.size[l]:c.size,u.mo=k.isArrayOrTypedArray(c.opacity)?c.opacity[l]:c.opacity,u.mx=k.isArrayOrTypedArray(c.symbol)?c.symbol[l]:c.symbol,u.ma=k.isArrayOrTypedArray(c.angle)?c.angle[l]:c.angle,u.mc=k.isArrayOrTypedArray(c.color)?c.color[l]:c.color);var x=c&&c.line;x&&(u.mlc=Array.isArray(x.color)?x.color[l]:x.color,u.mlw=k.isArrayOrTypedArray(x.width)?x.width[l]:x.width);var g=c&&c.gradient;g&&g.type!=="none"&&(u.mgt=Array.isArray(g.type)?g.type[l]:g.type,u.mgc=Array.isArray(g.color)?g.color[l]:g.color);var p=i.c2p(u.x,!0),v=n.c2p(u.y,!0),m=u.mrc||1,y=t.hoverlabel;y&&(u.hbg=Array.isArray(y.bgcolor)?y.bgcolor[l]:y.bgcolor,u.hbc=Array.isArray(y.bordercolor)?y.bordercolor[l]:y.bordercolor,u.hts=k.isArrayOrTypedArray(y.font.size)?y.font.size[l]:y.font.size,u.htc=Array.isArray(y.font.color)?y.font.color[l]:y.font.color,u.htf=Array.isArray(y.font.family)?y.font.family[l]:y.font.family,u.hnl=k.isArrayOrTypedArray(y.namelength)?y.namelength[l]:y.namelength);var _=t.hoverinfo;_&&(u.hi=Array.isArray(_)?_[l]:_);var f=t.hovertemplate;f&&(u.ht=Array.isArray(f)?f[l]:f);var S={};S[b.index]=u;var w=t._origX,E=t._origY,P=k.extendFlat({},b,{color:o(t,u),x0:p-m,x1:p+m,xLabelVal:w?w[l]:u.x,y0:v-m,y1:v+m,yLabelVal:E?E[l]:u.y,cd:S,distance:r,spikeDistance:a,hovertemplate:u.ht});return u.htx?P.text=u.htx:u.tx?P.text=u.tx:t.text&&(P.text=t.text),k.fillText(u,t,P),M.getComponentMethod("errorbars","hoverInfo")(u,t,P),P}ee.exports={hoverPoints:function(b,h,s,t){var i,n,r,a,l,u,d,c,x,g,p=b.cd,v=p[0].t,m=p[0].trace,y=b.xa,_=b.ya,f=v.x,S=v.y,w=y.c2p(h),E=_.c2p(s),P=b.distance;if(v.tree){var C=y.p2c(w-P),O=y.p2c(w+P),R=_.p2c(E-P),j=_.p2c(E+P);i=t==="x"?v.tree.range(Math.min(C,O),Math.min(_._rl[0],_._rl[1]),Math.max(C,O),Math.max(_._rl[0],_._rl[1])):v.tree.range(Math.min(C,O),Math.min(R,j),Math.max(C,O),Math.max(R,j))}else i=v.ids;var D=P;if(t==="x"){var N=!!m.xperiodalignment,W=!!m.yperiodalignment;for(u=0;u<i.length;u++){if(a=f[n=i[u]],d=Math.abs(y.c2p(a)-w),N){var F=y.c2p(m._xStarts[n]),U=y.c2p(m._xEnds[n]);d=w>=Math.min(F,U)&&w<=Math.max(F,U)?0:1/0}if(d<D){if(D=d,l=S[n],c=_.c2p(l)-E,W){var V=_.c2p(m._yStarts[n]),te=_.c2p(m._yEnds[n]);c=E>=Math.min(V,te)&&E<=Math.max(V,te)?0:1/0}g=Math.sqrt(d*d+c*c),r=i[u]}}}else for(u=i.length-1;u>-1;u--)a=f[n=i[u]],l=S[n],d=y.c2p(a)-w,c=_.c2p(l)-E,(x=Math.sqrt(d*d+c*c))<D&&(D=g=x,r=n);return b.index=r,b.distance=D,b.dxy=g,r===void 0?[b]:[T(b,f,S,m)]},calcHover:T}},38983:function(ee,z,e){"use strict";var M=e(64628);M.plot=e(89876),ee.exports=M},89876:function(ee,z,e){"use strict";var M=e(38540),k=e(13472),o=e(24544),T=e(23352),b=e(3400),h=e(72760).selectMode,s=e(5048),t=e(43028),i=e(14328),n=e(26768).styleTextSelection,r={};function a(l,u,d,c){var x=l._size,g=l.width*c,p=l.height*c,v=x.l*c,m=x.b*c,y=x.r*c,_=x.t*c,f=x.w*c,S=x.h*c;return[v+u.domain[0]*f,m+d.domain[0]*S,g-y-(1-u.domain[1])*f,p-_-(1-d.domain[1])*S]}(ee.exports=function(l,u,d){if(d.length){var c,x,g=l._fullLayout,p=u._scene,v=u.xaxis,m=u.yaxis;if(p)if(s(l,["ANGLE_instanced_arrays","OES_element_index_uint"],r)){var y=p.count,_=g._glcanvas.data()[0].regl;if(i(l,u,d),p.dirty){if(!p.line2d&&!p.error2d||p.scatter2d||p.fill2d||p.glText||_.clear({}),p.error2d===!0&&(p.error2d=o(_)),p.line2d===!0&&(p.line2d=k(_)),p.scatter2d===!0&&(p.scatter2d=M(_)),p.fill2d===!0&&(p.fill2d=k(_)),p.glText===!0)for(p.glText=new Array(y),c=0;c<y;c++)p.glText[c]=new T(_);if(p.glText){if(y>p.glText.length){var f=y-p.glText.length;for(c=0;c<f;c++)p.glText.push(new T(_))}else if(y<p.glText.length){var S=p.glText.length-y;p.glText.splice(y,S).forEach(function(re){re.destroy()})}for(c=0;c<y;c++)p.glText[c].update(p.textOptions[c])}if(p.line2d&&(p.line2d.update(p.lineOptions),p.lineOptions=p.lineOptions.map(function(re){if(re&&re.positions){for(var oe=re.positions,ie=0;ie<oe.length&&(isNaN(oe[ie])||isNaN(oe[ie+1]));)ie+=2;for(var ue=oe.length-2;ue>ie&&(isNaN(oe[ue])||isNaN(oe[ue+1]));)ue-=2;re.positions=oe.slice(ie,ue+2)}return re}),p.line2d.update(p.lineOptions)),p.error2d){var w=(p.errorXOptions||[]).concat(p.errorYOptions||[]);p.error2d.update(w)}p.scatter2d&&p.scatter2d.update(p.markerOptions),p.fillOrder=b.repeat(null,y),p.fill2d&&(p.fillOptions=p.fillOptions.map(function(re,oe){var ie=d[oe];if(re&&ie&&ie[0]&&ie[0].trace){var ue,me,be=ie[0],ge=be.trace,de=be.t,ve=p.lineOptions[oe],pe=[];ge._ownfill&&pe.push(oe),ge._nexttrace&&pe.push(oe+1),pe.length&&(p.fillOrder[oe]=pe);var _e,Te,le=[],ae=ve&&ve.positions||de.positions;if(ge.fill==="tozeroy"){for(_e=0;_e<ae.length&&isNaN(ae[_e+1]);)_e+=2;for(Te=ae.length-2;Te>_e&&isNaN(ae[Te+1]);)Te-=2;ae[_e+1]!==0&&(le=[ae[_e],0]),le=le.concat(ae.slice(_e,Te+2)),ae[Te+1]!==0&&(le=le.concat([ae[Te],0]))}else if(ge.fill==="tozerox"){for(_e=0;_e<ae.length&&isNaN(ae[_e]);)_e+=2;for(Te=ae.length-2;Te>_e&&isNaN(ae[Te]);)Te-=2;ae[_e]!==0&&(le=[0,ae[_e+1]]),le=le.concat(ae.slice(_e,Te+2)),ae[Te]!==0&&(le=le.concat([0,ae[Te+1]]))}else if(ge.fill==="toself"||ge.fill==="tonext"){for(le=[],ue=0,re.splitNull=!0,me=0;me<ae.length;me+=2)(isNaN(ae[me])||isNaN(ae[me+1]))&&((le=le.concat(ae.slice(ue,me))).push(ae[ue],ae[ue+1]),le.push(null,null),ue=me+2);le=le.concat(ae.slice(ue)),ue&&le.push(ae[ue],ae[ue+1])}else{var he=ge._nexttrace;if(he){var Se=p.lineOptions[oe+1];if(Se){var ke=Se.positions;if(ge.fill==="tonexty"){for(le=ae.slice(),oe=Math.floor(ke.length/2);oe--;){var Me=ke[2*oe],Ee=ke[2*oe+1];isNaN(Me)||isNaN(Ee)||le.push(Me,Ee)}re.fill=he.fillcolor}}}}if(ge._prevtrace&&ge._prevtrace.fill==="tonext"){var De=p.lineOptions[oe-1].positions,fe=le.length/2,xe=[ue=fe];for(me=0;me<De.length;me+=2)(isNaN(De[me])||isNaN(De[me+1]))&&(xe.push(me/2+fe+1),ue=me+2);le=le.concat(De),re.hole=xe}return re.fillmode=ge.fill,re.opacity=ge.opacity,re.positions=le,re}}),p.fill2d.update(p.fillOptions))}var E=g.dragmode,P=h(E),C=g.clickmode.indexOf("select")>-1;for(c=0;c<y;c++){var O=d[c][0],R=O.trace,j=O.t,D=j.index,N=R._length,W=j.x,F=j.y;if(R.selectedpoints||P||C){if(P||(P=!0),R.selectedpoints){var U=p.selectBatch[D]=b.selIndices2selPoints(R),V={};for(x=0;x<U.length;x++)V[U[x]]=1;var te=[];for(x=0;x<N;x++)V[x]||te.push(x);p.unselectBatch[D]=te}var J=j.xpx=new Array(N),K=j.ypx=new Array(N);for(x=0;x<N;x++)J[x]=v.c2p(W[x]),K[x]=m.c2p(F[x])}else j.xpx=j.ypx=null}if(P){if(p.select2d||(p.select2d=M(g._glcanvas.data()[1].regl)),p.scatter2d){var X=new Array(y);for(c=0;c<y;c++)X[c]=p.selectBatch[c].length||p.unselectBatch[c].length?p.markerUnselectedOptions[c]:{};p.scatter2d.update(X)}p.select2d&&(p.select2d.update(p.markerOptions),p.select2d.update(p.markerSelectedOptions)),p.glText&&d.forEach(function(re){var oe=((re||[])[0]||{}).trace||{};t.hasText(oe)&&n(re)})}else p.scatter2d&&p.scatter2d.update(p.markerOptions);var Z={viewport:a(g,v,m,l._context.plotGlPixelRatio),range:[(v._rl||v.range)[0],(m._rl||m.range)[0],(v._rl||v.range)[1],(m._rl||m.range)[1]]},$=b.repeat(Z,p.count);p.fill2d&&p.fill2d.update($),p.line2d&&p.line2d.update($),p.error2d&&p.error2d.update($.concat($)),p.scatter2d&&p.scatter2d.update($),p.select2d&&p.select2d.update($),p.glText&&p.glText.forEach(function(re){re.update(Z)})}else p.init()}}).reglPrecompiled=r},74588:function(ee,z,e){"use strict";var M=e(3400);ee.exports=function(k,o){var T=o._scene,b={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},h={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return o._scene||((T=o._scene={}).init=function(){M.extendFlat(T,h,b)},T.init(),T.update=function(s){var t=M.repeat(s,T.count);if(T.fill2d&&T.fill2d.update(t),T.scatter2d&&T.scatter2d.update(t),T.line2d&&T.line2d.update(t),T.error2d&&T.error2d.update(t.concat(t)),T.select2d&&T.select2d.update(t),T.glText)for(var i=0;i<T.count;i++)T.glText[i].update(s)},T.draw=function(){for(var s=T.count,t=T.fill2d,i=T.error2d,n=T.line2d,r=T.scatter2d,a=T.glText,l=T.select2d,u=T.selectBatch,d=T.unselectBatch,c=0;c<s;c++){if(t&&T.fillOrder[c]&&t.draw(T.fillOrder[c]),n&&T.lineOptions[c]&&n.draw(c),i&&(T.errorXOptions[c]&&i.draw(c),T.errorYOptions[c]&&i.draw(c+s)),r&&T.markerOptions[c])if(d[c].length){var x=M.repeat([],T.count);x[c]=d[c],r.draw(x)}else u[c].length||r.draw(c);a[c]&&T.textOptions[c]&&a[c].render()}l&&l.draw(u),T.dirty=!1},T.destroy=function(){T.fill2d&&T.fill2d.destroy&&T.fill2d.destroy(),T.scatter2d&&T.scatter2d.destroy&&T.scatter2d.destroy(),T.error2d&&T.error2d.destroy&&T.error2d.destroy(),T.line2d&&T.line2d.destroy&&T.line2d.destroy(),T.select2d&&T.select2d.destroy&&T.select2d.destroy(),T.glText&&T.glText.forEach(function(s){s.destroy&&s.destroy()}),T.lineOptions=null,T.fillOptions=null,T.markerOptions=null,T.markerSelectedOptions=null,T.markerUnselectedOptions=null,T.errorXOptions=null,T.errorYOptions=null,T.textOptions=null,T.textSelectedOptions=null,T.textUnselectedOptions=null,T.selectBatch=null,T.unselectBatch=null,o._scene=null}),T.dirty||M.extendFlat(T,b),T}},73224:function(ee,z,e){"use strict";var M=e(43028),k=e(26768).styleTextSelection;ee.exports=function(o,T){var b=o.cd,h=o.xaxis,s=o.yaxis,t=[],i=b[0].trace,n=b[0].t,r=i._length,a=n.x,l=n.y,u=n._scene,d=n.index;if(!u)return t;var c=M.hasText(i),x=M.hasMarkers(i),g=!x&&!c;if(i.visible!==!0||g)return t;var p=[],v=[];if(T!==!1&&!T.degenerate)for(var m=0;m<r;m++)T.contains([n.xpx[m],n.ypx[m]],!1,m,o)?(p.push(m),t.push({pointNumber:m,x:h.c2d(a[m]),y:s.c2d(l[m])})):v.push(m);if(x){var y=u.scatter2d;if(p.length||v.length){if(!u.selectBatch[d].length&&!u.unselectBatch[d].length){var _=new Array(u.count);_[d]=u.markerUnselectedOptions[d],y.update.apply(y,_)}}else{var f=new Array(u.count);f[d]=u.markerOptions[d],y.update.apply(y,f)}}return u.selectBatch[d]=p,u.unselectBatch[d]=v,c&&k(b),t}},31512:function(ee,z,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(6096),b=e(52904),h=e(5232),s=e(45464),t=e(49084),i=e(92880).extendFlat,n=e(67824).overrideAll,r=e(5232),a=T.line,l=T.marker;ee.exports=n({lon:T.lon,lat:T.lat,cluster:{enabled:{valType:"boolean"},maxzoom:i({},r.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:i({},l.opacity,{dflt:1})},mode:i({},b.mode,{dflt:"markers"}),text:i({},b.text,{}),texttemplate:k({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:i({},b.hovertext,{}),line:{color:a.color,width:a.width},connectgaps:b.connectgaps,marker:i({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},t("marker")),fill:T.fill,fillcolor:o(),textfont:h.layers.symbol.textfont,textposition:h.layers.symbol.textposition,below:{valType:"string"},selected:{marker:b.selected.marker},unselected:{marker:b.unselected.marker},hoverinfo:i({},s.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:M()},"calc","nested")},59392:function(ee,z,e){"use strict";var M=e(38248),k=e(3400),o=e(39032).BADNUM,T=e(44808),b=e(8932),h=e(43616),s=e(7152),t=e(43028),i=e(89032),n=e(10624).appendArrayPointValue,r=e(72736).NEWLINES,a=e(72736).BR_TAG_ALL;function l(g){return{type:g,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function u(g,p){return k.isArrayOrTypedArray(g)?p?function(v){return M(g[v])?+g[v]:0}:function(v){return g[v]}:g?function(){return g}:d}function d(){return""}function c(g){return g[0]===o}function x(g,p){var v;if(k.isArrayOrTypedArray(g)&&k.isArrayOrTypedArray(p)){v=["step",["get","point_count"],g[0]];for(var m=1;m<g.length;m++)v.push(p[m-1],g[m])}else v=g;return v}ee.exports=function(g,p){var v,m=p[0].trace,y=m.visible===!0&&m._length!==0,_=m.fill!=="none",f=t.hasLines(m),S=t.hasMarkers(m),w=t.hasText(m),E=S&&m.marker.symbol==="circle",P=S&&m.marker.symbol!=="circle",C=m.cluster&&m.cluster.enabled,O=l("fill"),R=l("line"),j=l("circle"),D=l("symbol"),N={fill:O,line:R,circle:j,symbol:D};if(!y)return N;if((_||f)&&(v=T.calcTraceToLineCoords(p)),_&&(O.geojson=T.makePolygon(v),O.layout.visibility="visible",k.extendFlat(O.paint,{"fill-color":m.fillcolor})),f&&(R.geojson=T.makeLine(v),R.layout.visibility="visible",k.extendFlat(R.paint,{"line-width":m.line.width,"line-color":m.line.color,"line-opacity":m.opacity})),E){var W=function(V){var te,J,K,X,Z=V[0].trace,$=Z.marker,re=Z.selectedpoints,oe=k.isArrayOrTypedArray($.color),ie=k.isArrayOrTypedArray($.size),ue=k.isArrayOrTypedArray($.opacity);function me(le){return Z.opacity*le}oe&&(J=b.hasColorscale(Z,"marker")?b.makeColorScaleFuncFromTrace($):k.identity),ie&&(K=s(Z)),ue&&(X=function(le){return me(M(le)?+k.constrain(le,0,1):0)});var be,ge,de=[];for(te=0;te<V.length;te++){var ve=V[te],pe=ve.lonlat;if(!c(pe)){var _e={};J&&(_e.mcc=ve.mcc=J(ve.mc)),K&&(_e.mrc=ve.mrc=K(ve.ms)),X&&(_e.mo=X(ve.mo)),re&&(_e.selected=ve.selected||0),de.push({type:"Feature",id:te+1,geometry:{type:"Point",coordinates:pe},properties:_e})}}if(re)for(be=h.makeSelectedPointStyleFns(Z),te=0;te<de.length;te++){var Te=de[te].properties;be.selectedOpacityFn&&(Te.mo=me(be.selectedOpacityFn(Te))),be.selectedColorFn&&(Te.mcc=be.selectedColorFn(Te)),be.selectedSizeFn&&(Te.mrc=be.selectedSizeFn(Te))}return{geojson:{type:"FeatureCollection",features:de},mcc:oe||be&&be.selectedColorFn?{type:"identity",property:"mcc"}:$.color,mrc:ie||be&&be.selectedSizeFn?{type:"identity",property:"mrc"}:(ge=$.size,ge/2),mo:ue||be&&be.selectedOpacityFn?{type:"identity",property:"mo"}:me($.opacity)}}(p);j.geojson=W.geojson,j.layout.visibility="visible",C&&(j.filter=["!",["has","point_count"]],N.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":x(m.cluster.color,m.cluster.step),"circle-radius":x(m.cluster.size,m.cluster.step),"circle-opacity":x(m.cluster.opacity,m.cluster.step)}},N.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),k.extendFlat(j.paint,{"circle-color":W.mcc,"circle-radius":W.mrc,"circle-opacity":W.mo})}if(E&&C&&(j.filter=["!",["has","point_count"]]),(P||w)&&(D.geojson=function(V,te){for(var J=te._fullLayout,K=V[0].trace,X=K.marker||{},Z=X.symbol,$=X.angle,re=Z!=="circle"?u(Z):d,oe=$!=="auto"?u($,!0):d,ie=t.hasText(K)?u(K.text):d,ue=[],me=0;me<V.length;me++){var be=V[me];if(!c(be.lonlat)){var ge,de=K.texttemplate;if(de){var ve=Array.isArray(de)?de[me]||"":de,pe=K._module.formatLabels(be,K,J),_e={};n(_e,K,be.i);var Te=K._meta||{};ge=k.texttemplateString(ve,pe,J._d3locale,_e,be,Te)}else ge=ie(me);ge&&(ge=ge.replace(r,"").replace(a,`
`)),ue.push({type:"Feature",geometry:{type:"Point",coordinates:be.lonlat},properties:{symbol:re(me),angle:oe(me),text:ge}})}}return{type:"FeatureCollection",features:ue}}(p,g),k.extendFlat(D.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(k.extendFlat(D.layout,{"icon-size":m.marker.size/10}),"angle"in m.marker&&m.marker.angle!=="auto"&&k.extendFlat(D.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),D.layout["icon-allow-overlap"]=m.marker.allowoverlap,k.extendFlat(D.paint,{"icon-opacity":m.opacity*m.marker.opacity,"icon-color":m.marker.color})),w)){var F=(m.marker||{}).size,U=i(m.textposition,F);k.extendFlat(D.layout,{"text-size":m.textfont.size,"text-anchor":U.anchor,"text-offset":U.offset,"text-font":m.textfont.family.split(", ")}),k.extendFlat(D.paint,{"text-color":m.textfont.color,"text-opacity":m.opacity})}return N}},15752:function(ee,z,e){"use strict";var M=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(124),h=e(70840),s=e(31512),t=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];ee.exports=function(i,n,r,a){function l(y,_){return M.coerce(i,n,s,y,_)}function u(y,_){return M.coerce2(i,n,s,y,_)}var d=function(y,_,f){var S=f("lon")||[],w=f("lat")||[],E=Math.min(S.length,w.length);return _._length=E,E}(0,n,l);if(d){if(l("text"),l("texttemplate"),l("hovertext"),l("hovertemplate"),l("mode"),l("below"),k.hasMarkers(n)){o(i,n,r,a,l,{noLine:!0,noAngle:!0}),l("marker.allowoverlap"),l("marker.angle");var c=n.marker;c.symbol!=="circle"&&(M.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),M.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}k.hasLines(n)&&(T(i,n,r,a,l,{noDash:!0}),l("connectgaps"));var x=u("cluster.maxzoom"),g=u("cluster.step"),p=u("cluster.color",n.marker&&n.marker.color||r),v=u("cluster.size"),m=u("cluster.opacity");l("cluster.enabled",x!==!1||g!==!1||p!==!1||v!==!1||m!==!1),k.hasText(n)&&b(i,n,a,l,{noSelect:!0,font:{family:t.indexOf(a.font.family)!==-1?a.font.family:"Open Sans Regular",size:a.font.size,color:a.font.color}}),l("fill"),n.fill!=="none"&&h(i,n,r,l),M.coerceSelectionMarkerOpacity(n,l)}else n.visible=!1}},37920:function(ee){"use strict";ee.exports=function(z,e){return z.lon=e.lon,z.lat=e.lat,z}},11960:function(ee,z,e){"use strict";var M=e(54460);ee.exports=function(k,o,T){var b={},h=T[o.subplot]._subplot.mockAxis,s=k.lonlat;return b.lonLabel=M.tickText(h,h.c2l(s[0]),!0).text,b.latLabel=M.tickText(h,h.c2l(s[1]),!0).text,b}},63312:function(ee,z,e){"use strict";var M=e(93024),k=e(3400),o=e(44928),T=k.fillText,b=e(39032).BADNUM,h=e(47552).traceLayerPrefix;function s(t,i,n){if(!t.hovertemplate){var r=(i.hi||t.hoverinfo).split("+"),a=r.indexOf("all")!==-1,l=r.indexOf("lon")!==-1,u=r.indexOf("lat")!==-1,d=i.lonlat,c=[];return a||l&&u?c.push("("+x(d[1])+", "+x(d[0])+")"):l?c.push(n.lon+x(d[0])):u&&c.push(n.lat+x(d[1])),(a||r.indexOf("text")!==-1)&&T(i,t,c),c.join("<br>")}function x(g){return g+"\xB0"}}ee.exports={hoverPoints:function(t,i,n){var r=t.cd,a=r[0].trace,l=t.xa,u=t.ya,d=t.subplot,c=[],x=h+a.uid+"-circle",g=a.cluster&&a.cluster.enabled;if(g){var p=d.map.queryRenderedFeatures(null,{layers:[x]});c=p.map(function(O){return O.id})}var v=360*(i>=0?Math.floor((i+180)/360):Math.ceil((i-180)/360)),m=i-v;if(M.getClosest(r,function(O){var R=O.lonlat;if(R[0]===b||g&&c.indexOf(O.i+1)===-1)return 1/0;var j=k.modHalf(R[0],360),D=R[1],N=d.project([j,D]),W=N.x-l.c2p([m,D]),F=N.y-u.c2p([j,n]),U=Math.max(3,O.mrc||0);return Math.max(Math.sqrt(W*W+F*F)-U,1-3/U)},t),t.index!==!1){var y=r[t.index],_=y.lonlat,f=[k.modHalf(_[0],360)+v,_[1]],S=l.c2p(f),w=u.c2p(f),E=y.mrc||1;t.x0=S-E,t.x1=S+E,t.y0=w-E,t.y1=w+E;var P={};P[a.subplot]={_subplot:d};var C=a._module.formatLabels(y,a,P);return t.lonLabel=C.lonLabel,t.latLabel=C.latLabel,t.color=o(a,y),t.extraText=s(a,y,r[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}},getExtraText:s}},11572:function(ee,z,e){"use strict";ee.exports={attributes:e(31512),supplyDefaults:e(15752),colorbar:e(5528),formatLabels:e(11960),calc:e(25212),plot:e(9660),hoverPoints:e(63312).hoverPoints,eventData:e(37920),selectPoints:e(404),styleOnSelect:function(M,k){k&&k[0].trace._glTrace.update(k)},moduleType:"trace",name:"scattermapbox",basePlotModule:e(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(ee,z,e){"use strict";var M=e(3400),k=e(59392),o=e(47552).traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function b(s,t,i,n){this.type="scattermapbox",this.subplot=s,this.uid=t,this.clusterEnabled=i,this.isHidden=n,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:o+t+"-fill",line:o+t+"-line",circle:o+t+"-circle",symbol:o+t+"-symbol",cluster:o+t+"-cluster",clusterCount:o+t+"-cluster-count"},this.below=null}var h=b.prototype;h.addSource=function(s,t,i){var n={type:"geojson",data:t.geojson};i&&i.enabled&&M.extendFlat(n,{cluster:!0,clusterMaxZoom:i.maxzoom});var r=this.subplot.map.getSource(this.sourceIds[s]);r?r.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[s],n)},h.setSourceData=function(s,t){this.subplot.map.getSource(this.sourceIds[s]).setData(t.geojson)},h.addLayer=function(s,t,i){var n={type:t.type,id:this.layerIds[s],source:this.sourceIds[s],layout:t.layout,paint:t.paint};t.filter&&(n.filter=t.filter);for(var r,a=this.layerIds[s],l=this.subplot.getMapLayers(),u=0;u<l.length;u++)if(l[u].id===a){r=!0;break}r?(this.subplot.setOptions(a,"setLayoutProperty",n.layout),n.layout.visibility==="visible"&&this.subplot.setOptions(a,"setPaintProperty",n.paint)):this.subplot.addLayer(n,i)},h.update=function(s){var t=s[0].trace,i=this.subplot,n=i.map,r=k(i.gd,s),a=i.belowLookup["trace-"+this.uid],l=!(!t.cluster||!t.cluster.enabled),u=!!this.clusterEnabled,d=this;function c(m){u?function(y){for(var _=T.cluster,f=_.length-1;f>=0;f--){var S=_[f];n.removeLayer(d.layerIds[S])}y||n.removeSource(d.sourceIds.circle)}(m):function(y){for(var _=T.nonCluster,f=_.length-1;f>=0;f--){var S=_[f];n.removeLayer(d.layerIds[S]),y||n.removeSource(d.sourceIds[S])}}(m)}function x(m){l?function(y){y||d.addSource("circle",r.circle,t.cluster);for(var _=T.cluster,f=0;f<_.length;f++){var S=_[f],w=r[S];d.addLayer(S,w,a)}}(m):function(y){for(var _=T.nonCluster,f=0;f<_.length;f++){var S=_[f],w=r[S];y||d.addSource(S,w),d.addLayer(S,w,a)}}(m)}function g(){for(var m=l?T.cluster:T.nonCluster,y=0;y<m.length;y++){var _=m[y],f=r[_];f&&(i.setOptions(d.layerIds[_],"setLayoutProperty",f.layout),f.layout.visibility==="visible"&&(_!=="cluster"&&d.setSourceData(_,f),i.setOptions(d.layerIds[_],"setPaintProperty",f.paint)))}}var p=this.isHidden,v=t.visible!==!0;v?p||c():p?v||x():u!==l?(c(),x()):(this.below!==a&&(c(!0),x(!0)),g()),this.clusterEnabled=l,this.isHidden=v,this.below=a,s[0].trace._glTrace=this},h.dispose=function(){for(var s=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,i=t.length-1;i>=0;i--){var n=t[i];s.removeLayer(this.layerIds[n]),s.removeSource(this.sourceIds[n])}},ee.exports=function(s,t){var i,n,r,a=t[0].trace,l=a.cluster&&a.cluster.enabled,u=a.visible!==!0,d=new b(s,a.uid,l,u),c=k(s.gd,t),x=d.below=s.belowLookup["trace-"+a.uid];if(l)for(d.addSource("circle",c.circle,a.cluster),i=0;i<T.cluster.length;i++)r=c[n=T.cluster[i]],d.addLayer(n,r,x);else for(i=0;i<T.nonCluster.length;i++)r=c[n=T.nonCluster[i]],d.addSource(n,r,a.cluster),d.addLayer(n,r,x);return t[0].trace._glTrace=d,d}},404:function(ee,z,e){"use strict";var M=e(3400),k=e(43028),o=e(39032).BADNUM;ee.exports=function(T,b){var h,s=T.cd,t=T.xaxis,i=T.yaxis,n=[],r=s[0].trace;if(!k.hasMarkers(r))return[];if(b===!1)for(h=0;h<s.length;h++)s[h].selected=0;else for(h=0;h<s.length;h++){var a=s[h],l=a.lonlat;if(l[0]!==o){var u=[M.modHalf(l[0],360),l[1]],d=[t.c2p(u),i.c2p(u)];b.contains(d,null,h,T)?(n.push({pointNumber:h,lon:l[0],lat:l[1]}),a.selected=1):a.selected=0}}return n}},8319:function(ee,z,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(92880).extendFlat,T=e(98304),b=e(52904),h=e(45464),s=b.line;ee.exports={mode:b.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:b.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:o({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:o({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:o({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:o({},h.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:b.hoveron,hovertemplate:M(),selected:b.selected,unselected:b.unselected}},58320:function(ee,z,e){"use strict";var M=e(38248),k=e(39032).BADNUM,o=e(54460),T=e(90136),b=e(20148),h=e(4500),s=e(16356).calcMarkerSize;ee.exports=function(t,i){for(var n=t._fullLayout,r=i.subplot,a=n[r].radialaxis,l=n[r].angularaxis,u=a.makeCalcdata(i,"r"),d=l.makeCalcdata(i,"theta"),c=i._length,x=new Array(c),g=0;g<c;g++){var p=u[g],v=d[g],m=x[g]={};M(p)&&M(v)?(m.r=p,m.theta=v):m.r=k}var y=s(i,c);return i._extremes.x=o.findExtremes(a,u,{ppad:y}),T(t,i),b(x,i),h(x,i),x}},85968:function(ee,z,e){"use strict";var M=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(11731),h=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,i=e(8319);function n(r,a,l,u){var d,c=u("r"),x=u("theta");if(M.isTypedArray(c)&&(a.r=c=Array.from(c)),M.isTypedArray(x)&&(a.theta=x=Array.from(x)),c)x?d=Math.min(c.length,x.length):(d=c.length,u("theta0"),u("dtheta"));else{if(!x)return 0;d=a.theta.length,u("r0"),u("dr")}return a._length=d,d}ee.exports={handleRThetaDefaults:n,supplyDefaults:function(r,a,l,u){function d(g,p){return M.coerce(r,a,i,g,p)}var c=n(0,a,0,d);if(c){d("thetaunit"),d("mode",c<t?"lines+markers":"lines"),d("text"),d("hovertext"),a.hoveron!=="fills"&&d("hovertemplate"),k.hasMarkers(a)&&o(r,a,l,u,d,{gradient:!0}),k.hasLines(a)&&(T(r,a,l,u,d,{backoff:!0}),b(r,a,d),d("connectgaps")),k.hasText(a)&&(d("texttemplate"),h(r,a,u,d));var x=[];(k.hasMarkers(a)||k.hasText(a))&&(d("cliponaxis"),d("marker.maxdisplayed"),x.push("points")),d("fill"),a.fill!=="none"&&(s(r,a,l,d),k.hasLines(a)||b(r,a,d)),a.fill!=="tonext"&&a.fill!=="toself"||x.push("fills"),d("hoveron",x.join("+")||"points"),M.coerceSelectionMarkerOpacity(a,d)}else a.visible=!1}}},22852:function(ee,z,e){"use strict";var M=e(3400),k=e(54460);ee.exports=function(o,T,b){var h,s,t={},i=b[T.subplot]._subplot;i?(h=i.radialAxis,s=i.angularAxis):(h=(i=b[T.subplot]).radialaxis,s=i.angularaxis);var n=h.c2l(o.r);t.rLabel=k.tickText(h,n,!0).text;var r=s.thetaunit==="degrees"?M.rad2deg(o.theta):o.theta;return t.thetaLabel=k.tickText(s,r,!0).text,t}},8504:function(ee,z,e){"use strict";var M=e(98723);function k(o,T,b,h){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="r",t._hovertitle="\u03B8";var i={};i[T.subplot]={_subplot:b};var n=T._module.formatLabels(o,T,i);h.rLabel=n.rLabel,h.thetaLabel=n.thetaLabel;var r=o.hi||T.hoverinfo,a=[];function l(d,c){a.push(d._hovertitle+": "+c)}if(!T.hovertemplate){var u=r.split("+");u.indexOf("all")!==-1&&(u=["r","theta","text"]),u.indexOf("r")!==-1&&l(s,h.rLabel),u.indexOf("theta")!==-1&&l(t,h.thetaLabel),u.indexOf("text")!==-1&&h.text&&(a.push(h.text),delete h.text),h.extraText=a.join("<br>")}}ee.exports={hoverPoints:function(o,T,b,h){var s=M(o,T,b,h);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var i=o.subplot,n=t.cd[t.index],r=t.trace;if(i.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(n,r,i,t),t.hovertemplate=r.hovertemplate,s}},makeHoverPointText:k}},76924:function(ee,z,e){"use strict";ee.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:e(8319),supplyDefaults:e(85968).supplyDefaults,colorbar:e(5528),formatLabels:e(22852),calc:e(58320),plot:e(43456),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(8504).hoverPoints,selectPoints:e(91560),meta:{}}},43456:function(ee,z,e){"use strict";var M=e(96504),k=e(39032).BADNUM;ee.exports=function(o,T,b){for(var h=T.layers.frontplot.select("g.scatterlayer"),s=T.xaxis,t=T.yaxis,i={xaxis:s,yaxis:t,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},n=T.radialAxis,r=T.angularAxis,a=0;a<b.length;a++)for(var l=b[a],u=0;u<l.length;u++){u===0&&(l[0].trace._xA=s,l[0].trace._yA=t);var d=l[u],c=d.r;if(c===k)d.x=d.y=k;else{var x=n.c2g(c),g=r.c2g(d.theta);d.x=x*Math.cos(g),d.y=x*Math.sin(g)}}M(o,i,b,h)}},24396:function(ee,z,e){"use strict";var M=e(8319),k=e(2876),o=e(21776).Gw;ee.exports={mode:M.mode,r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,text:M.text,texttemplate:o({editType:"plot"},{keys:["r","theta","text"]}),hovertext:M.hovertext,hovertemplate:M.hovertemplate,line:{color:k.line.color,width:k.line.width,dash:k.line.dash,editType:"calc"},connectgaps:k.connectgaps,marker:k.marker,fill:k.fill,fillcolor:k.fillcolor,textposition:k.textposition,textfont:k.textfont,hoverinfo:M.hoverinfo,selected:M.selected,unselected:M.unselected}},27160:function(ee,z,e){"use strict";ee.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e(24396),supplyDefaults:e(98608),colorbar:e(5528),formatLabels:e(94120),calc:e(66720),hoverPoints:e(1600).hoverPoints,selectPoints:e(73224),meta:{}}},66720:function(ee,z,e){"use strict";var M=e(90136),k=e(16356).calcMarkerSize,o=e(84236),T=e(54460),b=e(67072).TOO_MANY_POINTS;ee.exports=function(h,s){var t=h._fullLayout,i=s.subplot,n=t[i].radialaxis,r=t[i].angularaxis,a=s._r=n.makeCalcdata(s,"r"),l=s._theta=r.makeCalcdata(s,"theta"),u=s._length,d={};u<a.length&&(a=a.slice(0,u)),u<l.length&&(l=l.slice(0,u)),d.r=a,d.theta=l,M(h,s);var c,x=d.opts=o.style(h,s);return u<b?c=k(s,u):x.marker&&(c=2*(x.marker.sizeAvg||Math.max(x.marker.size,3))),s._extremes.x=T.findExtremes(n,a,{ppad:c}),[{x:!1,y:!1,t:d,trace:s}]}},98608:function(ee,z,e){"use strict";var M=e(3400),k=e(43028),o=e(85968).handleRThetaDefaults,T=e(74428),b=e(66828),h=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,i=e(24396);ee.exports=function(n,r,a,l){function u(c,x){return M.coerce(n,r,i,c,x)}var d=o(n,r,l,u);d?(u("thetaunit"),u("mode",d<t?"lines+markers":"lines"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),k.hasMarkers(r)&&T(n,r,a,l,u,{noAngleRef:!0,noStandOff:!0}),k.hasLines(r)&&(b(n,r,a,l,u),u("connectgaps")),k.hasText(r)&&(u("texttemplate"),h(n,r,l,u)),u("fill"),r.fill!=="none"&&s(n,r,a,u),M.coerceSelectionMarkerOpacity(r,u)):r.visible=!1}},94120:function(ee,z,e){"use strict";var M=e(22852);ee.exports=function(k,o,T){var b=k.i;return"r"in k||(k.r=o._r[b]),"theta"in k||(k.theta=o._theta[b]),M(k,o,T)}},1600:function(ee,z,e){"use strict";var M=e(41272),k=e(8504).makeHoverPointText;ee.exports={hoverPoints:function(o,T,b,h){var s=o.cd[0].t,t=s.r,i=s.theta,n=M.hoverPoints(o,T,b,h);if(n&&n[0].index!==!1){var r=n[0];if(r.index===void 0)return n;var a=o.subplot,l=r.cd[r.index],u=r.trace;if(l.r=t[r.index],l.theta=i[r.index],a.isPtInside(l))return r.xLabelVal=void 0,r.yLabelVal=void 0,k(l,u,a,r),n}}}},62944:function(ee,z,e){"use strict";var M=e(27160);M.plot=e(56512),ee.exports=M},56512:function(ee,z,e){"use strict";var M=e(3108),k=e(38248),o=e(89876),T=e(74588),b=e(84236),h=e(3400),s=e(67072).TOO_MANY_POINTS;ee.exports=function(t,i,n){if(n.length){var r=i.radialAxis,a=i.angularAxis,l=T(t,i);return n.forEach(function(u){if(u&&u[0]&&u[0].trace){var d,c=u[0],x=c.trace,g=c.t,p=x._length,v=g.r,m=g.theta,y=g.opts,_=v.slice(),f=m.slice();for(d=0;d<v.length;d++)i.isPtInside({r:v[d],theta:m[d]})||(_[d]=NaN,f[d]=NaN);var S=new Array(2*p),w=Array(p),E=Array(p);for(d=0;d<p;d++){var P,C,O=_[d];if(k(O)){var R=r.c2g(O),j=a.c2g(f[d],x.thetaunit);P=R*Math.cos(j),C=R*Math.sin(j)}else P=C=NaN;w[d]=S[2*d]=P,E[d]=S[2*d+1]=C}g.tree=M(S),y.marker&&p>=s&&(y.marker.cluster=g.tree),y.marker&&(y.markerSel.positions=y.markerUnsel.positions=y.marker.positions=S),y.line&&S.length>1&&h.extendFlat(y.line,b.linePositions(t,x,S)),y.text&&(h.extendFlat(y.text,{positions:S},b.textPosition(t,x,y.text,y.marker)),h.extendFlat(y.textSel,{positions:S},b.textPosition(t,x,y.text,y.markerSel)),h.extendFlat(y.textUnsel,{positions:S},b.textPosition(t,x,y.text,y.markerUnsel))),y.fill&&!l.fill2d&&(l.fill2d=!0),y.marker&&!l.scatter2d&&(l.scatter2d=!0),y.line&&!l.line2d&&(l.line2d=!0),y.text&&!l.glText&&(l.glText=!0),l.lineOptions.push(y.line),l.fillOptions.push(y.fill),l.markerOptions.push(y.marker),l.markerSelectedOptions.push(y.markerSel),l.markerUnselectedOptions.push(y.markerUnsel),l.textOptions.push(y.text),l.textSelectedOptions.push(y.textSel),l.textUnselectedOptions.push(y.textUnsel),l.selectBatch.push([]),l.unselectBatch.push([]),g.x=w,g.y=E,g.rawx=w,g.rawy=E,g.r=v,g.theta=m,g.positions=S,g._scene=l,g.index=l.count,l.count++}}),o(t,i,n)}},ee.exports.reglPrecompiled={}},69496:function(ee,z,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(92880).extendFlat,T=e(98304),b=e(52904),h=e(45464),s=b.line;ee.exports={mode:b.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:k({editType:"plot"},{keys:["real","imag","text"]}),hovertext:b.hovertext,line:{color:s.color,width:s.width,dash:s.dash,backoff:s.backoff,shape:o({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:o({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:o({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T(),hoverinfo:o({},h.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:b.hoveron,hovertemplate:M(),selected:b.selected,unselected:b.unselected}},47507:function(ee,z,e){"use strict";var M=e(38248),k=e(39032).BADNUM,o=e(90136),T=e(20148),b=e(4500),h=e(16356).calcMarkerSize;ee.exports=function(s,t){for(var i=s._fullLayout,n=t.subplot,r=i[n].realaxis,a=i[n].imaginaryaxis,l=r.makeCalcdata(t,"real"),u=a.makeCalcdata(t,"imag"),d=t._length,c=new Array(d),x=0;x<d;x++){var g=l[x],p=u[x],v=c[x]={};M(g)&&M(p)?(v.real=g,v.imag=p):v.real=k}return h(t,d),o(s,t),T(c,t),b(c,t),c}},76716:function(ee,z,e){"use strict";var M=e(3400),k=e(43028),o=e(74428),T=e(66828),b=e(11731),h=e(124),s=e(70840),t=e(88200).PTS_LINESONLY,i=e(69496);ee.exports=function(n,r,a,l){function u(x,g){return M.coerce(n,r,i,x,g)}var d=function(x,g,p,v){var m,y=v("real"),_=v("imag");return y&&_&&(m=Math.min(y.length,_.length)),M.isTypedArray(y)&&(g.real=y=Array.from(y)),M.isTypedArray(_)&&(g.imag=_=Array.from(_)),g._length=m,m}(0,r,0,u);if(d){u("mode",d<t?"lines+markers":"lines"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),k.hasMarkers(r)&&o(n,r,a,l,u,{gradient:!0}),k.hasLines(r)&&(T(n,r,a,l,u,{backoff:!0}),b(n,r,u),u("connectgaps")),k.hasText(r)&&(u("texttemplate"),h(n,r,l,u));var c=[];(k.hasMarkers(r)||k.hasText(r))&&(u("cliponaxis"),u("marker.maxdisplayed"),c.push("points")),u("fill"),r.fill!=="none"&&(s(n,r,a,u),k.hasLines(r)||b(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||c.push("fills"),u("hoveron",c.join("+")||"points"),M.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},49504:function(ee,z,e){"use strict";var M=e(54460);ee.exports=function(k,o,T){var b={},h=T[o.subplot]._subplot;return b.realLabel=M.tickText(h.radialAxis,k.real,!0).text,b.imagLabel=M.tickText(h.angularAxis,k.imag,!0).text,b}},25292:function(ee,z,e){"use strict";var M=e(98723);function k(o,T,b,h){var s=b.radialAxis,t=b.angularAxis;s._hovertitle="real",t._hovertitle="imag";var i={};i[T.subplot]={_subplot:b};var n=T._module.formatLabels(o,T,i);h.realLabel=n.realLabel,h.imagLabel=n.imagLabel;var r=o.hi||T.hoverinfo,a=[];function l(d,c){a.push(d._hovertitle+": "+c)}if(!T.hovertemplate){var u=r.split("+");u.indexOf("all")!==-1&&(u=["real","imag","text"]),u.indexOf("real")!==-1&&l(s,h.realLabel),u.indexOf("imag")!==-1&&l(t,h.imagLabel),u.indexOf("text")!==-1&&h.text&&(a.push(h.text),delete h.text),h.extraText=a.join("<br>")}}ee.exports={hoverPoints:function(o,T,b,h){var s=M(o,T,b,h);if(s&&s[0].index!==!1){var t=s[0];if(t.index===void 0)return s;var i=o.subplot,n=t.cd[t.index],r=t.trace;if(i.isPtInside(n))return t.xLabelVal=void 0,t.yLabelVal=void 0,k(n,r,i,t),t.hovertemplate=r.hovertemplate,s}},makeHoverPointText:k}},95443:function(ee,z,e){"use strict";ee.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:e(69496),supplyDefaults:e(76716),colorbar:e(5528),formatLabels:e(49504),calc:e(47507),plot:e(34927),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(25292).hoverPoints,selectPoints:e(91560),meta:{}}},34927:function(ee,z,e){"use strict";var M=e(96504),k=e(39032).BADNUM,o=e(36416).smith;ee.exports=function(T,b,h){for(var s=b.layers.frontplot.select("g.scatterlayer"),t=b.xaxis,i=b.yaxis,n={xaxis:t,yaxis:i,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},r=0;r<h.length;r++)for(var a=h[r],l=0;l<a.length;l++){l===0&&(a[0].trace._xA=t,a[0].trace._yA=i);var u=a[l],d=u.real;if(d===k)u.x=u.y=k;else{var c=o([d,u.imag]);u.x=c[0],u.y=c[1]}}M(T,n,h,s)}},5896:function(ee,z,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(98304),T=e(52904),b=e(45464),h=e(49084),s=e(98192).u,t=e(92880).extendFlat,i=T.marker,n=T.line,r=i.line;ee.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},T.mode,{dflt:"markers"}),text:t({},T.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},T.hovertext,{}),line:{color:n.color,width:n.width,dash:s,backoff:n.backoff,shape:t({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:T.connectgaps,cliponaxis:T.cliponaxis,fill:t({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:o(),marker:t({symbol:i.symbol,opacity:i.opacity,angle:i.angle,angleref:i.angleref,standoff:i.standoff,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:t({width:r.width,editType:"calc"},h("marker.line")),gradient:i.gradient,editType:"calc"},h("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:t({},b.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:T.hoveron,hovertemplate:M()}},34335:function(ee,z,e){"use strict";var M=e(38248),k=e(90136),o=e(20148),T=e(4500),b=e(16356).calcMarkerSize,h=["a","b","c"],s={a:["b","c"],b:["a","c"],c:["a","b"]};ee.exports=function(t,i){var n,r,a,l,u,d,c=t._fullLayout[i.subplot].sum,x=i.sum||c,g={a:i.a,b:i.b,c:i.c};for(n=0;n<h.length;n++)if(!g[a=h[n]]){for(u=g[s[a][0]],d=g[s[a][1]],l=new Array(u.length),r=0;r<u.length;r++)l[r]=x-u[r]-d[r];g[a]=l}var p,v,m,y,_,f,S=i._length,w=new Array(S);for(n=0;n<S;n++)p=g.a[n],v=g.b[n],m=g.c[n],M(p)&&M(v)&&M(m)?((y=c/((p=+p)+(v=+v)+(m=+m)))!=1&&(p*=y,v*=y,m*=y),f=p,_=m-v,w[n]={x:_,y:f,a:p,b:v,c:m}):w[n]={x:!1,y:!1};return b(i,S),k(t,i),o(w,i),T(w,i),w}},84256:function(ee,z,e){"use strict";var M=e(3400),k=e(88200),o=e(43028),T=e(74428),b=e(66828),h=e(11731),s=e(124),t=e(70840),i=e(5896);ee.exports=function(n,r,a,l){function u(v,m){return M.coerce(n,r,i,v,m)}var d,c=u("a"),x=u("b"),g=u("c");if(c?(d=c.length,x?(d=Math.min(d,x.length),g&&(d=Math.min(d,g.length))):d=g?Math.min(d,g.length):0):x&&g&&(d=Math.min(x.length,g.length)),d){r._length=d,u("sum"),u("text"),u("hovertext"),r.hoveron!=="fills"&&u("hovertemplate"),u("mode",d<k.PTS_LINESONLY?"lines+markers":"lines"),o.hasMarkers(r)&&T(n,r,a,l,u,{gradient:!0}),o.hasLines(r)&&(b(n,r,a,l,u,{backoff:!0}),h(n,r,u),u("connectgaps")),o.hasText(r)&&(u("texttemplate"),s(n,r,l,u));var p=[];(o.hasMarkers(r)||o.hasText(r))&&(u("cliponaxis"),u("marker.maxdisplayed"),p.push("points")),u("fill"),r.fill!=="none"&&(t(n,r,a,u),o.hasLines(r)||h(n,r,u)),r.fill!=="tonext"&&r.fill!=="toself"||p.push("fills"),u("hoveron",p.join("+")||"points"),M.coerceSelectionMarkerOpacity(r,u)}else r.visible=!1}},97476:function(ee){"use strict";ee.exports=function(z,e,M,k,o){if(e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),k[o]){var T=k[o];z.a=T.a,z.b=T.b,z.c=T.c}else z.a=e.a,z.b=e.b,z.c=e.c;return z}},90404:function(ee,z,e){"use strict";var M=e(54460);ee.exports=function(k,o,T){var b={},h=T[o.subplot]._subplot;return b.aLabel=M.tickText(h.aaxis,k.a,!0).text,b.bLabel=M.tickText(h.baxis,k.b,!0).text,b.cLabel=M.tickText(h.caxis,k.c,!0).text,b}},26596:function(ee,z,e){"use strict";var M=e(98723);ee.exports=function(k,o,T,b){var h=M(k,o,T,b);if(h&&h[0].index!==!1){var s=h[0];if(s.index===void 0){var t=1-s.y0/k.ya._length,i=k.xa._length,n=i*t/2,r=i-n;return s.x0=Math.max(Math.min(s.x0,r),n),s.x1=Math.max(Math.min(s.x1,r),n),h}var a=s.cd[s.index],l=s.trace,u=s.subplot;s.a=a.a,s.b=a.b,s.c=a.c,s.xLabelVal=void 0,s.yLabelVal=void 0;var d={};d[l.subplot]={_subplot:u};var c=l._module.formatLabels(a,l,d);s.aLabel=c.aLabel,s.bLabel=c.bLabel,s.cLabel=c.cLabel;var x=a.hi||l.hoverinfo,g=[];if(!l.hovertemplate){var p=x.split("+");p.indexOf("all")!==-1&&(p=["a","b","c"]),p.indexOf("a")!==-1&&v(u.aaxis,s.aLabel),p.indexOf("b")!==-1&&v(u.baxis,s.bLabel),p.indexOf("c")!==-1&&v(u.caxis,s.cLabel)}return s.extraText=g.join("<br>"),s.hovertemplate=l.hovertemplate,h}function v(m,y){g.push(m._hovertitle+": "+y)}}},34864:function(ee,z,e){"use strict";ee.exports={attributes:e(5896),supplyDefaults:e(84256),colorbar:e(5528),formatLabels:e(90404),calc:e(34335),plot:e(88776),style:e(49224).style,styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(26596),selectPoints:e(91560),eventData:e(97476),moduleType:"trace",name:"scatterternary",basePlotModule:e(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(ee,z,e){"use strict";var M=e(96504);ee.exports=function(k,o,T){var b=o.plotContainer;b.select(".scatterlayer").selectAll("*").remove();for(var h=o.xaxis,s=o.yaxis,t={xaxis:h,yaxis:s,plot:b,layerClipId:o._hasClipOnAxisFalse?o.clipIdRelative:null},i=o.layers.frontplot.select("g.scatterlayer"),n=0;n<T.length;n++){var r=T[n];r.length&&(r[0].trace._xA=h,r[0].trace._yA=s)}M(k,t,T,i)}},44524:function(ee,z,e){"use strict";var M=e(52904),k=e(49084),o=e(29736).axisHoverFormat,T=e(21776).Ks,b=e(2876),h=e(33816).idRegex,s=e(31780).templatedArray,t=e(92880).extendFlat,i=M.marker,n=i.line,r=t(k("marker.line",{editTypeOverride:"calc"}),{width:t({},n.width,{editType:"calc"}),editType:"calc"}),a=t(k("marker"),{symbol:i.symbol,angle:i.angle,size:t({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:r,editType:"calc"});function l(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:h[u],editType:"plot"}}}a.color.editType=a.cmin.editType=a.cmax.editType="style",ee.exports={dimensions:s("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:t({},b.text,{}),hovertext:t({},b.hovertext,{}),hovertemplate:T(),xhoverformat:o("x"),yhoverformat:o("y"),marker:a,xaxes:l("x"),yaxes:l("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:b.selected.marker,editType:"calc"},unselected:{marker:b.unselected.marker,editType:"calc"},opacity:b.opacity}},28888:function(ee,z,e){"use strict";var M=e(24040),k=e(12704);ee.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e(44524),supplyDefaults:e(69544),colorbar:e(5528),calc:e(66821),plot:e(54840),hoverPoints:e(72248).hoverPoints,selectPoints:e(62500),editStyle:e(83156),meta:{}},M.register(k)},99332:function(ee,z,e){"use strict";var M=e(13472),k=e(24040),o=e(5048),T=e(84888)._M,b=e(57952),h=e(79811).getFromId,s=e(54460).shouldShowZeroLine,t="splom",i={};function n(a,l,u){for(var d=u.matrixOptions.data.length,c=l._visibleDims,x=u.viewOpts.ranges=new Array(d),g=0;g<c.length;g++){var p=c[g],v=x[g]=new Array(4),m=h(a,l._diag[p][0]);m&&(v[0]=m.r2l(m.range[0]),v[2]=m.r2l(m.range[1]));var y=h(a,l._diag[p][1]);y&&(v[1]=y.r2l(y.range[0]),v[3]=y.r2l(y.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:x},{ranges:x}):u.matrix.update({ranges:x})}function r(a){var l=a._fullLayout,u=l._glcanvas.data()[0].regl,d=l._splomGrid;d||(d=l._splomGrid=M(u)),d.update(function(c){var x,g=c._context.plotGlPixelRatio,p=c._fullLayout,v=p._size,m=[0,0,p.width*g,p.height*g],y={};function _(V,te,J,K,X,Z){J*=g,K*=g,X*=g,Z*=g;var $=te[V+"color"],re=te[V+"width"],oe=String($+re);oe in y?y[oe].data.push(NaN,NaN,J,K,X,Z):y[oe]={data:[J,K,X,Z],join:"rect",thickness:re*g,color:$,viewport:m,range:m,overlay:!1}}for(x in p._splomSubplots){var f,S,w=p._plots[x],E=w.xaxis,P=w.yaxis,C=E._gridVals,O=P._gridVals,R=E._offset,j=E._length,D=P._length,N=v.b+P.domain[0]*v.h,W=-P._m,F=-W*P.r2l(P.range[0],P.calendar);if(E.showgrid)for(x=0;x<C.length;x++)f=R+E.l2p(C[x].x),_("grid",E,f,N,f,N+D);if(P.showgrid)for(x=0;x<O.length;x++)_("grid",P,R,S=N+F+W*O[x].x,R+j,S);s(c,E,P)&&(f=R+E.l2p(0),_("zeroline",E,f,N,f,N+D)),s(c,P,E)&&_("zeroline",P,R,S=N+F+0,R+j,S)}var U=[];for(x in y)U.push(y[x]);return U}(a))}ee.exports={name:t,attr:b.attr,attrRegex:b.attrRegex,layoutAttributes:b.layoutAttributes,supplyLayoutDefaults:b.supplyLayoutDefaults,drawFramework:b.drawFramework,plot:function(a){var l=a._fullLayout,u=k.getModule(t),d=T(a.calcdata,u)[0];o(a,["ANGLE_instanced_arrays","OES_element_index_uint"],i)&&(l._hasOnlyLargeSploms&&r(a),u.plot(a,{},d))},drag:function(a){var l=a.calcdata,u=a._fullLayout;u._hasOnlyLargeSploms&&r(a);for(var d=0;d<l.length;d++){var c=l[d][0].trace,x=u._splomScenes[c.uid];c.type==="splom"&&x&&x.matrix&&n(a,c,x)}},updateGrid:r,clean:function(a,l,u,d){var c,x={};if(d._splomScenes){for(c=0;c<a.length;c++){var g=a[c];g.type==="splom"&&(x[g.uid]=1)}for(c=0;c<u.length;c++){var p=u[c];if(!x[p.uid]){var v=d._splomScenes[p.uid];v&&v.destroy&&v.destroy(),d._splomScenes[p.uid]=null,delete d._splomScenes[p.uid]}}}Object.keys(d._splomScenes||{}).length===0&&delete d._splomScenes,d._splomGrid&&!l._hasOnlyLargeSploms&&d._hasOnlyLargeSploms&&(d._splomGrid.destroy(),d._splomGrid=null,delete d._splomGrid),b.clean(a,l,u,d)},updateFx:b.updateFx,toSVG:b.toSVG,reglPrecompiled:i}},66821:function(ee,z,e){"use strict";var M=e(3400),k=e(79811),o=e(16356).calcMarkerSize,T=e(16356).calcAxisExpansion,b=e(90136),h=e(84236).markerSelection,s=e(84236).markerStyle,t=e(72308),i=e(39032).BADNUM,n=e(67072).TOO_MANY_POINTS;ee.exports=function(r,a){var l,u,d,c,x,g,p=a.dimensions,v=a._length,m={},y=m.cdata=[],_=m.data=[],f=a._visibleDims=[];function S(E,P){for(var C=E.makeCalcdata({v:P.values,vcalendar:a.calendar},"v"),O=0;O<C.length;O++)C[O]=C[O]===i?NaN:C[O];y.push(C),_.push(E.type==="log"?M.simpleMap(C,E.c2l):C)}for(l=0;l<p.length;l++)if((d=p[l]).visible){if(c=k.getFromId(r,a._diag[l][0]),x=k.getFromId(r,a._diag[l][1]),c&&x&&c.type!==x.type){M.log("Skipping splom dimension "+l+" with conflicting axis types");continue}c?(S(c,d),x&&x.type==="category"&&(x._categories=c._categories.slice())):S(x,d),f.push(l)}for(b(r,a),M.extendFlat(m,s(r,a)),g=y.length*v>n?m.sizeAvg||Math.max(m.size,3):o(a,v),u=0;u<f.length;u++)d=p[l=f[u]],c=k.getFromId(r,a._diag[l][0])||{},x=k.getFromId(r,a._diag[l][1])||{},T(r,a,c,x,y[u],y[u],g);var w=t(r,a);return w.matrix||(w.matrix=!0),w.matrixOptions=m,w.selectedOptions=h(r,a,a.selected),w.unselectedOptions=h(r,a,a.unselected),[{x:!1,y:!1,t:{},trace:a}]}},69544:function(ee,z,e){"use strict";var M=e(3400),k=e(51272),o=e(44524),T=e(43028),b=e(74428),h=e(26284),s=e(80088).isOpenSymbol;function t(i,n){function r(l,u){return M.coerce(i,n,o.dimensions,l,u)}r("label");var a=r("values");a&&a.length?r("visible"):n.visible=!1,r("axis.type"),r("axis.matches")}ee.exports=function(i,n,r,a){function l(v,m){return M.coerce(i,n,o,v,m)}var u=k(i,n,{name:"dimensions",handleItemDefaults:t}),d=l("diagonal.visible"),c=l("showupperhalf"),x=l("showlowerhalf");if(h(n,u,"values")&&(d||c||x)){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),b(i,n,r,a,l,{noAngleRef:!0,noStandOff:!0});var g=s(n.marker.symbol),p=T.isBubble(n);l("marker.line.width",g||p?1:0),function(v,m,y,_){var f,S,w=m.dimensions,E=w.length,P=m.showupperhalf,C=m.showlowerhalf,O=m.diagonal.visible,R=new Array(E),j=new Array(E);for(f=0;f<E;f++){var D=f?f+1:"";R[f]="x"+D,j[f]="y"+D}var N=_("xaxes",R),W=_("yaxes",j),F=m._diag=new Array(E);m._xaxes={},m._yaxes={};var U=[],V=[];function te(ue,me,be,ge){if(ue){var de=ue.charAt(0),ve=y._splomAxes[de];if(m["_"+de+"axes"][ue]=1,ge.push(ue),!(ue in ve)){var pe=ve[ue]={};be&&(pe.label=be.label||"",be.visible&&be.axis&&(be.axis.type&&(pe.type=be.axis.type),be.axis.matches&&(pe.matches=me)))}}}var J=!O&&!C,K=!O&&!P;for(m._axesDim={},f=0;f<E;f++){var X=w[f],Z=f===0,$=f===E-1,re=Z&&J||$&&K?void 0:N[f],oe=Z&&K||$&&J?void 0:W[f];te(re,oe,X,U),te(oe,re,X,V),F[f]=[re,oe],m._axesDim[re]=f,m._axesDim[oe]=f}for(f=0;f<U.length;f++)for(S=0;S<V.length;S++){var ie=U[f]+V[S];f>S&&P||f<S&&C?y._splomSubplots[ie]=1:f!==S||!O&&C&&P||(y._splomSubplots[ie]=1)}(!C||!O&&P&&C)&&(y._splomGridDflt.xside="bottom",y._splomGridDflt.yside="left")}(0,n,a,l),M.coerceSelectionMarkerOpacity(n,l)}else n.visible=!1}},83156:function(ee,z,e){"use strict";var M=e(3400),k=e(90136),o=e(84236).markerStyle;ee.exports=function(T,b){var h=b.trace,s=T._fullLayout._splomScenes[h.uid];if(s){k(T,h),M.extendFlat(s.matrixOptions,o(T,h));var t=M.extendFlat({},s.matrixOptions,s.viewOpts);s.matrix.update(t,null)}}},50328:function(ee,z){"use strict";z.getDimIndex=function(e,M){for(var k=M._id,o={x:0,y:1}[k.charAt(0)],T=e._visibleDims,b=0;b<T.length;b++){var h=T[b];if(e._diag[h][o]===k)return b}return!1}},72248:function(ee,z,e){"use strict";var M=e(50328),k=e(41272).calcHover;ee.exports={hoverPoints:function(o,T,b){var h=o.cd[0].trace,s=o.scene.matrixOptions.cdata,t=o.xa,i=o.ya,n=t.c2p(T),r=i.c2p(b),a=o.distance,l=M.getDimIndex(h,t),u=M.getDimIndex(h,i);if(l===!1||u===!1)return[o];for(var d,c,x=s[l],g=s[u],p=a,v=0;v<x.length;v++){var m=x[v],y=g[v],_=t.c2p(m)-n,f=i.c2p(y)-r,S=Math.sqrt(_*_+f*f);S<p&&(p=c=S,d=v)}return o.index=d,o.distance=p,o.dxy=c,d===void 0?[o]:[k(o,x,g,h)]}}},97924:function(ee,z,e){"use strict";var M=e(28888);M.basePlotModule=e(99332),ee.exports=M},54840:function(ee,z,e){"use strict";var M=e(55795),k=e(3400),o=e(79811),T=e(72760).selectMode;function b(h,s){var t,i,n,r,a,l=h._fullLayout,u=l._size,d=s.trace,c=s.t,x=l._splomScenes[d.uid],g=x.matrixOptions,p=g.cdata,v=l._glcanvas.data()[0].regl,m=l.dragmode;if(p.length!==0){g.lower=d.showupperhalf,g.upper=d.showlowerhalf,g.diagonal=d.diagonal.visible;var y=d._visibleDims,_=p.length,f=x.viewOpts={};for(f.ranges=new Array(_),f.domains=new Array(_),a=0;a<y.length;a++){n=y[a];var S=f.ranges[a]=new Array(4),w=f.domains[a]=new Array(4);(t=o.getFromId(h,d._diag[n][0]))&&(S[0]=t._rl[0],S[2]=t._rl[1],w[0]=t.domain[0],w[2]=t.domain[1]),(i=o.getFromId(h,d._diag[n][1]))&&(S[1]=i._rl[0],S[3]=i._rl[1],w[1]=i.domain[0],w[3]=i.domain[1])}var E=h._context.plotGlPixelRatio,P=u.l*E,C=u.b*E,O=u.w*E,R=u.h*E;f.viewport=[P,C,O+P,R+C],x.matrix===!0&&(x.matrix=M(v));var j=l.clickmode.indexOf("select")>-1,D=!0;if(T(m)||d.selectedpoints||j){var N=d._length;if(d.selectedpoints){x.selectBatch=d.selectedpoints;var W=d.selectedpoints,F={};for(n=0;n<W.length;n++)F[W[n]]=!0;var U=[];for(n=0;n<N;n++)F[n]||U.push(n);x.unselectBatch=U}var V=c.xpx=new Array(_),te=c.ypx=new Array(_);for(a=0;a<y.length;a++){if(n=y[a],t=o.getFromId(h,d._diag[n][0]))for(V[a]=new Array(N),r=0;r<N;r++)V[a][r]=t.c2p(p[a][r]);if(i=o.getFromId(h,d._diag[n][1]))for(te[a]=new Array(N),r=0;r<N;r++)te[a][r]=i.c2p(p[a][r])}if(x.selectBatch.length||x.unselectBatch.length){var J=k.extendFlat({},g,x.unselectedOptions,f),K=k.extendFlat({},g,x.selectedOptions,f);x.matrix.update(J,K),D=!1}}else c.xpx=c.ypx=null;if(D){var X=k.extendFlat({},g,f);x.matrix.update(X,null)}}}ee.exports=function(h,s,t){if(t.length)for(var i=0;i<t.length;i++)b(h,t[i][0])}},72308:function(ee,z,e){"use strict";var M=e(3400);ee.exports=function(k,o){var T=k._fullLayout,b=o.uid,h=T._splomScenes;h||(h=T._splomScenes={});var s={dirty:!0,selectBatch:[],unselectBatch:[]},t=h[o.uid];return t||((t=h[b]=M.extendFlat({},s,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){t.matrix&&t.matrix.draw&&(t.selectBatch.length||t.unselectBatch.length?t.matrix.draw(t.unselectBatch,t.selectBatch):t.matrix.draw()),t.dirty=!1},t.destroy=function(){t.matrix&&t.matrix.destroy&&t.matrix.destroy(),t.matrixOptions=null,t.selectBatch=null,t.unselectBatch=null,t=null}),t.dirty||M.extendFlat(t,s),t}},62500:function(ee,z,e){"use strict";var M=e(3400),k=M.pushUnique,o=e(43028),T=e(50328);ee.exports=function(b,h){var s=b.cd,t=s[0].trace,i=s[0].t,n=b.scene,r=n.matrixOptions.cdata,a=b.xaxis,l=b.yaxis,u=[];if(!n)return u;var d=!o.hasMarkers(t)&&!o.hasText(t);if(t.visible!==!0||d)return u;var c=T.getDimIndex(t,a),x=T.getDimIndex(t,l);if(c===!1||x===!1)return u;var g=i.xpx[c],p=i.ypx[x],v=r[c],m=r[x],y=(b.scene.selectBatch||[]).slice(),_=[];if(h!==!1&&!h.degenerate)for(var f=0;f<v.length;f++)h.contains([g[f],p[f]],null,f,b)?(u.push({pointNumber:f,x:v[f],y:m[f]}),k(y,f)):y.indexOf(f)!==-1?k(y,f):_.push(f);var S=n.matrixOptions;return y.length||_.length?n.selectBatch.length||n.unselectBatch.length||n.matrix.update(n.unselectedOptions,M.extendFlat({},S,n.selectedOptions,n.viewOpts)):n.matrix.update(S,null),n.selectBatch=y,n.unselectBatch=_,u}},90167:function(ee,z,e){"use strict";var M=e(49084),k=e(29736).axisHoverFormat,o=e(21776).Ks,T=e(52948),b=e(45464),h=e(92880).extendFlat,s={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:k("u",1),vhoverformat:k("v",1),whoverformat:k("w",1),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),showlegend:h({},b.showlegend,{dflt:!1})};h(s,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(t){s[t]=T[t]}),s.hoverinfo=h({},b.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),s.transforms=void 0,ee.exports=s},3832:function(ee,z,e){"use strict";var M=e(3400),k=e(47128);function o(h){var s,t,i,n,r,a,l,u,d,c,x,g,p=h._x,v=h._y,m=h._z,y=h._len,_=-1/0,f=1/0,S=-1/0,w=1/0,E=-1/0,P=1/0,C="";for(y&&(l=p[0],d=v[0],x=m[0]),y>1&&(u=p[y-1],c=v[y-1],g=m[y-1]),s=0;s<y;s++)_=Math.max(_,p[s]),f=Math.min(f,p[s]),S=Math.max(S,v[s]),w=Math.min(w,v[s]),E=Math.max(E,m[s]),P=Math.min(P,m[s]),n||p[s]===l||(n=!0,C+="x"),r||v[s]===d||(r=!0,C+="y"),a||m[s]===x||(a=!0,C+="z");n||(C+="x"),r||(C+="y"),a||(C+="z");var O=T(h._x),R=T(h._y),j=T(h._z);C=(C=(C=C.replace("x",(l>u?"-":"+")+"x")).replace("y",(d>c?"-":"+")+"y")).replace("z",(x>g?"-":"+")+"z");var D=function(){y=0,O=[],R=[],j=[]};(!y||y<O.length*R.length*j.length)&&D();var N=function(de){return de==="x"?p:de==="y"?v:m},W=function(de){return de==="x"?O:de==="y"?R:j},F=function(de){return de[y-1]<de[0]?-1:1},U=N(C[1]),V=N(C[3]),te=N(C[5]),J=W(C[1]).length,K=W(C[3]).length,X=W(C[5]).length,Z=!1,$=function(de,ve,pe){return J*(K*de+ve)+pe},re=F(N(C[1])),oe=F(N(C[3])),ie=F(N(C[5]));for(s=0;s<X-1;s++){for(t=0;t<K-1;t++){for(i=0;i<J-1;i++){var ue=$(s,t,i),me=$(s,t,i+1),be=$(s,t+1,i),ge=$(s+1,t,i);if(U[ue]*re<U[me]*re&&V[ue]*oe<V[be]*oe&&te[ue]*ie<te[ge]*ie||(Z=!0),Z)break}if(Z)break}if(Z)break}return Z&&(M.warn("Encountered arbitrary coordinates! Unable to input data grid."),D()),{xMin:f,yMin:w,zMin:P,xMax:_,yMax:S,zMax:E,Xs:O,Ys:R,Zs:j,len:y,fill:C}}function T(h){return M.distinctVals(h).vals}function b(h,s){if(s===void 0&&(s=h.length),M.isTypedArray(h))return h.subarray(0,s);for(var t=[],i=0;i<s;i++)t[i]=+h[i];return t}ee.exports={calc:function(h,s){s._len=Math.min(s.u.length,s.v.length,s.w.length,s.x.length,s.y.length,s.z.length),s._u=b(s.u,s._len),s._v=b(s.v,s._len),s._w=b(s.w,s._len),s._x=b(s.x,s._len),s._y=b(s.y,s._len),s._z=b(s.z,s._len);var t=o(s);s._gridFill=t.fill,s._Xs=t.Xs,s._Ys=t.Ys,s._Zs=t.Zs,s._len=t.len;var i,n,r,a=0;s.starts&&(i=b(s.starts.x||[]),n=b(s.starts.y||[]),r=b(s.starts.z||[]),a=Math.min(i.length,n.length,r.length)),s._startsX=i||[],s._startsY=n||[],s._startsZ=r||[];var l,u=0,d=1/0;for(l=0;l<s._len;l++){var c=s._u[l],x=s._v[l],g=s._w[l],p=Math.sqrt(c*c+x*x+g*g);u=Math.max(u,p),d=Math.min(d,p)}for(k(h,s,{vals:[d,u],containerStr:"",cLetter:"c"}),l=0;l<a;l++){var v=i[l];t.xMax=Math.max(t.xMax,v),t.xMin=Math.min(t.xMin,v);var m=n[l];t.yMax=Math.max(t.yMax,m),t.yMin=Math.min(t.yMin,m);var y=r[l];t.zMax=Math.max(t.zMax,y),t.zMin=Math.min(t.zMin,y)}s._slen=a,s._normMax=u,s._xbnds=[t.xMin,t.xMax],s._ybnds=[t.yMin,t.yMax],s._zbnds=[t.zMin,t.zMax]},filter:b,processGrid:o}},25668:function(ee,z,e){"use strict";var M=e(67792).gl_streamtube3d,k=M.createTubeMesh,o=e(3400),T=e(33040).parseColorScale,b=e(8932).extractOpts,h=e(52094),s={xaxis:0,yaxis:1,zaxis:2};function t(l,u){this.scene=l,this.uid=u,this.mesh=null,this.data=null}var i=t.prototype;function n(l){var u=l.length;return u>2?l.slice(1,u-1):u===2?[(l[0]+l[1])/2]:l}function r(l){var u=l.length;return u===1?[.5,.5]:[l[1]-l[0],l[u-1]-l[u-2]]}function a(l,u){var d=l.fullSceneLayout,c=l.dataScale,x=u._len,g={};function p(J,K){var X=d[K],Z=c[s[K]];return o.simpleMap(J,function($){return X.d2l($)*Z})}if(g.vectors=h(p(u._u,"xaxis"),p(u._v,"yaxis"),p(u._w,"zaxis"),x),!x)return{positions:[],cells:[]};var v=p(u._Xs,"xaxis"),m=p(u._Ys,"yaxis"),y=p(u._Zs,"zaxis");if(g.meshgrid=[v,m,y],g.gridFill=u._gridFill,u._slen)g.startingPositions=h(p(u._startsX,"xaxis"),p(u._startsY,"yaxis"),p(u._startsZ,"zaxis"));else{for(var _=m[0],f=n(v),S=n(y),w=new Array(f.length*S.length),E=0,P=0;P<f.length;P++)for(var C=0;C<S.length;C++)w[E++]=[f[P],_,S[C]];g.startingPositions=w}g.colormap=T(u),g.tubeSize=u.sizeref,g.maxLength=u.maxdisplayed;var O=p(u._xbnds,"xaxis"),R=p(u._ybnds,"yaxis"),j=p(u._zbnds,"zaxis"),D=r(v),N=r(m),W=r(y),F=[[O[0]-D[0],R[0]-N[0],j[0]-W[0]],[O[1]+D[1],R[1]+N[1],j[1]+W[1]]],U=M(g,F),V=b(u);U.vertexIntensityBounds=[V.min/u._normMax,V.max/u._normMax];var te=u.lightposition;return U.lightPosition=[te.x,te.y,te.z],U.ambient=u.lighting.ambient,U.diffuse=u.lighting.diffuse,U.specular=u.lighting.specular,U.roughness=u.lighting.roughness,U.fresnel=u.lighting.fresnel,U.opacity=u.opacity,u._pad=U.tubeScale*u.sizeref*2,U}i.handlePick=function(l){var u=this.scene.fullSceneLayout,d=this.scene.dataScale;function c(p,v){var m=u[v],y=d[s[v]];return m.l2c(p)/y}if(l.object===this.mesh){var x=l.data.position,g=l.data.velocity;return l.traceCoordinate=[c(x[0],"xaxis"),c(x[1],"yaxis"),c(x[2],"zaxis"),c(g[0],"xaxis"),c(g[1],"yaxis"),c(g[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(l){this.data=l;var u=a(this.scene,l);this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(l,u){var d=l.glplot.gl,c=a(l,u),x=k(d,c),g=new t(l,u.uid);return g.mesh=x,g.data=u,x._trace=g,l.glplot.add(x),g}},54304:function(ee,z,e){"use strict";var M=e(3400),k=e(27260),o=e(90167);ee.exports=function(T,b,h,s){function t(d,c){return M.coerce(T,b,o,d,c)}var i=t("u"),n=t("v"),r=t("w"),a=t("x"),l=t("y"),u=t("z");i&&i.length&&n&&n.length&&r&&r.length&&a&&a.length&&l&&l.length&&u&&u.length?(t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),k(T,b,s,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),b._length=null):b.visible=!1}},15436:function(ee,z,e){"use strict";ee.exports={moduleType:"trace",name:"streamtube",basePlotModule:e(12536),categories:["gl3d","showLegend"],attributes:e(90167),supplyDefaults:e(54304),colorbar:{min:"cmin",max:"cmax"},calc:e(3832).calc,plot:e(25668),eventData:function(M,k){return M.tubex=M.x,M.tubey=M.y,M.tubez=M.z,M.tubeu=k.traceCoordinate[3],M.tubev=k.traceCoordinate[4],M.tubew=k.traceCoordinate[5],M.norm=k.traceCoordinate[6],M.divergence=k.traceCoordinate[7],delete M.x,delete M.y,delete M.z,M},meta:{}}},424:function(ee,z,e){"use strict";var M=e(45464),k=e(21776).Ks,o=e(21776).Gw,T=e(49084),b=e(86968).u,h=e(74996),s=e(27328),t=e(92880).extendFlat,i=e(98192).c;ee.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:t({colors:{valType:"data_array",editType:"calc"},line:{color:t({},h.marker.line.color,{dflt:null}),width:t({},h.marker.line.width,{dflt:1}),editType:"calc"},pattern:i,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:h.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:o({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:h.hovertext,hoverinfo:t({},M.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:k({},{keys:s.eventDataKeys}),textfont:h.textfont,insidetextorientation:h.insidetextorientation,insidetextfont:h.insidetextfont,outsidetextfont:t({},h.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:h.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:b({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(ee,z,e){"use strict";var M=e(7316);z.name="sunburst",z.plot=function(k,o,T,b){M.plotBasePlot(z.name,k,o,T,b)},z.clean=function(k,o,T,b){M.cleanBasePlot(z.name,k,o,T,b)}},3776:function(ee,z,e){"use strict";var M=e(74148),k=e(38248),o=e(3400),T=e(8932).makeColorScaleFuncFromTrace,b=e(45768).makePullColorFn,h=e(45768).generateExtendedColors,s=e(8932).calc,t=e(39032).ALMOST_EQUAL,i={},n={},r={};function a(l,u,d){var c=0,x=l.children;if(x){for(var g=x.length,p=0;p<g;p++)c+=a(x[p],u,d);d.branches&&c++}else d.leaves&&c++;return l.value=l.data.data.value=c,u._values||(u._values=[]),u._values[l.data.data.i]=c,c}z.calc=function(l,u){var d,c,x,g,p,v,m=l._fullLayout,y=u.ids,_=o.isArrayOrTypedArray(y),f=u.labels,S=u.parents,w=u.values,E=o.isArrayOrTypedArray(w),P=[],C={},O={},R=function(ie){return ie||typeof ie=="number"},j=function(ie){return!E||k(w[ie])&&w[ie]>=0};_?(d=Math.min(y.length,S.length),c=function(ie){return R(y[ie])&&j(ie)},x=function(ie){return String(y[ie])}):(d=Math.min(f.length,S.length),c=function(ie){return R(f[ie])&&j(ie)},x=function(ie){return String(f[ie])}),E&&(d=Math.min(d,w.length));for(var D=0;D<d;D++)if(c(D)){var N=x(D),W=R(S[D])?String(S[D]):"",F={i:D,id:N,pid:W,label:R(f[D])?String(f[D]):""};E&&(F.v=+w[D]),P.push(F),p=N,C[g=W]?C[g].push(p):C[g]=[p],O[p]=1}if(C[""]){if(C[""].length>1){for(var U=o.randstr(),V=0;V<P.length;V++)P[V].pid===""&&(P[V].pid=U);P.unshift({hasMultipleRoots:!0,id:U,pid:"",label:""})}}else{var te,J=[];for(te in C)O[te]||J.push(te);if(J.length!==1)return o.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",J.join(", ")].join(" "));te=J[0],P.unshift({hasImpliedRoot:!0,id:te,pid:"",label:te})}try{v=M.stratify().id(function(ie){return ie.id}).parentId(function(ie){return ie.pid})(P)}catch(ie){return o.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",ie.message].join(" "))}var K=M.hierarchy(v),X=!1;if(E)switch(u.branchvalues){case"remainder":K.sum(function(ie){return ie.data.v});break;case"total":K.each(function(ie){var ue=ie.data.data,me=ue.v;if(ie.children){var be=ie.children.reduce(function(ge,de){return ge+de.data.data.v},0);if((ue.hasImpliedRoot||ue.hasMultipleRoots)&&(me=be),me<be*t)return X=!0,o.warn(["Total value for node",ie.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,me,`
children sum =`,be].join(" "))}ie.value=me})}else a(K,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!X){var Z,$;u.sort&&K.sort(function(ie,ue){return ue.value-ie.value});var re=u.marker.colors||[],oe=!!re.length;return u._hasColorscale?(oe||(re=E?u.values:u._values),s(l,u,{vals:re,containerStr:"marker",cLetter:"c"}),$=T(u.marker)):Z=b(m["_"+u.type+"colormap"]),K.each(function(ie){var ue=ie.data.data;ue.color=u._hasColorscale?$(re[ue.i]):Z(re[ue.i],ue.id)}),P[0].hierarchy=K,P}},z._runCrossTraceCalc=function(l,u){var d=u._fullLayout,c=u.calcdata,x=d[l+"colorway"],g=d["_"+l+"colormap"];d["extend"+l+"colors"]&&(x=h(x,l==="icicle"?r:l==="treemap"?n:i));var p,v=0;function m(f){var S=f.data.data,w=S.id;S.color===!1&&(g[w]?S.color=g[w]:f.parent?f.parent.parent?S.color=f.parent.data.data.color:(g[w]=S.color=x[v%x.length],v++):S.color=p)}for(var y=0;y<c.length;y++){var _=c[y][0];_.trace.type===l&&_.hierarchy&&(p=_.trace.root.color,_.hierarchy.each(m))}},z.crossTraceCalc=function(l){return z._runCrossTraceCalc("sunburst",l)}},27328:function(ee){"use strict";ee.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(ee,z,e){"use strict";var M=e(3400),k=e(424),o=e(86968).Q,T=e(31508).handleText,b=e(74174).handleMarkerDefaults,h=e(8932),s=h.hasColorscale,t=h.handleDefaults;ee.exports=function(i,n,r,a){function l(p,v){return M.coerce(i,n,k,p,v)}var u=l("labels"),d=l("parents");if(u&&u.length&&d&&d.length){var c=l("values");c&&c.length?l("branchvalues"):l("count"),l("level"),l("maxdepth"),b(i,n,a,l);var x=n._hasColorscale=s(i,"marker","colors")||(i.marker||{}).coloraxis;x&&t(i,n,a,l,{prefix:"marker.",cLetter:"c"}),l("leaf.opacity",x?1:.7);var g=l("text");l("texttemplate"),n.texttemplate||l("textinfo",M.isArrayOrTypedArray(g)?"text+label":"label"),l("hovertext"),l("hovertemplate"),T(i,n,a,l,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),l("insidetextorientation"),l("sort"),l("rotation"),l("root.color"),o(n,a,l),n._length=null}else n.visible=!1}},60404:function(ee,z,e){"use strict";var M=e(43616),k=e(76308);ee.exports=function(o,T,b,h,s){var t=T.data.data,i=t.i,n=s||t.color;if(i>=0){T.i=t.i;var r=b.marker;r.pattern&&r.colors&&r.pattern.shape||(r.color=n,T.color=n),M.pointStyle(o,b,h,T)}else k.fill(o,n)}},45716:function(ee,z,e){"use strict";var M=e(33428),k=e(24040),o=e(10624).appendArrayPointValue,T=e(93024),b=e(3400),h=e(95924),s=e(78176),t=e(69656).formatPieValue;function i(n,r,a){for(var l=n.data.data,u={curveNumber:r.index,pointNumber:l.i,data:r._input,fullData:r},d=0;d<a.length;d++){var c=a[d];c in n&&(u[c]=n[c])}return"parentString"in n&&!s.isHierarchyRoot(n)&&(u.parent=n.parentString),o(u,r,l.i),u}ee.exports=function(n,r,a,l,u){var d=l[0],c=d.trace,x=d.hierarchy,g=c.type==="sunburst",p=c.type==="treemap"||c.type==="icicle";"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1),n.on("mouseover",function(v){var m=a._fullLayout;if(!a._dragging&&m.hovermode!==!1){var y,_=a._fullData[c.index],f=v.data.data,S=f.i,w=s.isHierarchyRoot(v),E=s.getParent(x,v),P=s.getValue(v),C=function(re){return b.castOption(_,S,re)},O=C("hovertemplate"),R=T.castHoverinfo(_,m,S),j=m.separators;if(O||R&&R!=="none"&&R!=="skip"){var D,N;g&&(D=d.cx+v.pxmid[0]*(1-v.rInscribed),N=d.cy+v.pxmid[1]*(1-v.rInscribed)),p&&(D=v._hoverX,N=v._hoverY);var W,F={},U=[],V=[],te=function(re){return U.indexOf(re)!==-1};R&&(U=R==="all"?_._module.attributes.hoverinfo.flags:R.split("+")),F.label=f.label,te("label")&&F.label&&V.push(F.label),f.hasOwnProperty("v")&&(F.value=f.v,F.valueLabel=t(F.value,j),te("value")&&V.push(F.valueLabel)),F.currentPath=v.currentPath=s.getPath(v.data),te("current path")&&!w&&V.push(F.currentPath);var J=[],K=function(){J.indexOf(W)===-1&&(V.push(W),J.push(W))};F.percentParent=v.percentParent=P/s.getValue(E),F.parent=v.parentString=s.getPtLabel(E),te("percent parent")&&(W=s.formatPercent(F.percentParent,j)+" of "+F.parent,K()),F.percentEntry=v.percentEntry=P/s.getValue(r),F.entry=v.entry=s.getPtLabel(r),!te("percent entry")||w||v.onPathbar||(W=s.formatPercent(F.percentEntry,j)+" of "+F.entry,K()),F.percentRoot=v.percentRoot=P/s.getValue(x),F.root=v.root=s.getPtLabel(x),te("percent root")&&!w&&(W=s.formatPercent(F.percentRoot,j)+" of "+F.root,K()),F.text=C("hovertext")||C("text"),te("text")&&(W=F.text,b.isValidTextValue(W)&&V.push(W)),y=[i(v,_,u.eventDataKeys)];var X={trace:_,y:N,_x0:v._x0,_x1:v._x1,_y0:v._y0,_y1:v._y1,text:V.join("<br>"),name:O||te("name")?_.name:void 0,color:C("hoverlabel.bgcolor")||f.color,borderColor:C("hoverlabel.bordercolor"),fontFamily:C("hoverlabel.font.family"),fontSize:C("hoverlabel.font.size"),fontColor:C("hoverlabel.font.color"),nameLength:C("hoverlabel.namelength"),textAlign:C("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:F,eventData:y};g&&(X.x0=D-v.rInscribed*v.rpx1,X.x1=D+v.rInscribed*v.rpx1,X.idealAlign=v.pxmid[0]<0?"left":"right"),p&&(X.x=D,X.idealAlign=D<0?"left":"right");var Z=[];T.loneHover(X,{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:a,inOut_bbox:Z}),y[0].bbox=Z[0],c._hasHoverLabel=!0}if(p){var $=n.select("path.surface");u.styleOne($,v,_,a,{hovered:!0})}c._hasHoverEvent=!0,a.emit("plotly_hover",{points:y||[i(v,_,u.eventDataKeys)],event:M.event})}}),n.on("mouseout",function(v){var m=a._fullLayout,y=a._fullData[c.index],_=M.select(this).datum();if(c._hasHoverEvent&&(v.originalEvent=M.event,a.emit("plotly_unhover",{points:[i(_,y,u.eventDataKeys)],event:M.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(T.loneUnhover(m._hoverlayer.node()),c._hasHoverLabel=!1),p){var f=n.select("path.surface");u.styleOne(f,_,y,a,{hovered:!1})}}),n.on("click",function(v){var m=a._fullLayout,y=a._fullData[c.index],_=g&&(s.isHierarchyRoot(v)||s.isLeaf(v)),f=s.getPtId(v),S=s.isEntry(v)?s.findEntryWithChild(x,f):s.findEntryWithLevel(x,f),w=s.getPtId(S),E={points:[i(v,y,u.eventDataKeys)],event:M.event};_||(E.nextLevel=w);var P=h.triggerHandler(a,"plotly_"+c.type+"click",E);if(P!==!1&&m.hovermode&&(a._hoverdata=[i(v,y,u.eventDataKeys)],T.click(a,M.event)),!_&&P!==!1&&!a._dragging&&!a._transitioning){k.call("_storeDirectGUIEdit",y,m._tracePreGUI[y.uid],{level:y.level});var C={data:[{level:w}],traces:[c.index]},O={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(m._hoverlayer.node()),k.call("animate",a,C,O)}})}},78176:function(ee,z,e){"use strict";var M=e(3400),k=e(76308),o=e(93972),T=e(69656);function b(h){return h.data.data.pid}z.findEntryWithLevel=function(h,s){var t;return s&&h.eachAfter(function(i){if(z.getPtId(i)===s)return t=i.copy()}),t||h},z.findEntryWithChild=function(h,s){var t;return h.eachAfter(function(i){for(var n=i.children||[],r=0;r<n.length;r++){var a=n[r];if(z.getPtId(a)===s)return t=i.copy()}}),t||h},z.isEntry=function(h){return!h.parent},z.isLeaf=function(h){return!h.children},z.getPtId=function(h){return h.data.data.id},z.getPtLabel=function(h){return h.data.data.label},z.getValue=function(h){return h.value},z.isHierarchyRoot=function(h){return b(h)===""},z.setSliceCursor=function(h,s,t){var i=t.isTransitioning;if(!i){var n=h.datum();i=t.hideOnRoot&&z.isHierarchyRoot(n)||t.hideOnLeaves&&z.isLeaf(n)}o(h,i?null:"pointer")},z.getInsideTextFontKey=function(h,s,t,i,n){var r=(n||{}).onPathbar?"pathbar.textfont":"insidetextfont",a=t.data.data.i;return M.castOption(s,a,r+"."+h)||M.castOption(s,a,"textfont."+h)||i.size},z.getOutsideTextFontKey=function(h,s,t,i){var n=t.data.data.i;return M.castOption(s,n,"outsidetextfont."+h)||M.castOption(s,n,"textfont."+h)||i.size},z.isOutsideText=function(h,s){return!h._hasColorscale&&z.isHierarchyRoot(s)},z.determineTextFont=function(h,s,t,i){return z.isOutsideText(h,s)?function(n,r,a){return{color:z.getOutsideTextFontKey("color",n,r,a),family:z.getOutsideTextFontKey("family",n,r,a),size:z.getOutsideTextFontKey("size",n,r,a)}}(h,s,t):function(n,r,a,l){var u=(l||{}).onPathbar,d=r.data.data,c=d.i,x=M.castOption(n,c,(u?"pathbar.textfont":"insidetextfont")+".color");return!x&&n._input.textfont&&(x=M.castOption(n._input,c,"textfont.color")),{color:x||k.contrast(d.color),family:z.getInsideTextFontKey("family",n,r,a,l),size:z.getInsideTextFontKey("size",n,r,a,l)}}(h,s,t,i)},z.hasTransition=function(h){return!!(h&&h.duration>0)},z.getMaxDepth=function(h){return h.maxdepth>=0?h.maxdepth:1/0},z.isHeader=function(h,s){return!(z.isLeaf(h)||h.depth===s._maxDepth-1)},z.getParent=function(h,s){return z.findEntryWithLevel(h,b(s))},z.listPath=function(h,s){var t=h.parent;if(!t)return[];var i=s?[t.data[s]]:[t];return z.listPath(t,s).concat(i)},z.getPath=function(h){return z.listPath(h,"label").join("/")+"/"},z.formatValue=T.formatPieValue,z.formatPercent=function(h,s){var t=M.formatPercent(h,0);return t==="0%"&&(t=T.formatPiePercent(h,s)),t}},5621:function(ee,z,e){"use strict";ee.exports={moduleType:"trace",name:"sunburst",basePlotModule:e(54904),categories:[],animatable:!0,attributes:e(424),layoutAttributes:e(84920),supplyDefaults:e(25244),supplyLayoutDefaults:e(28732),calc:e(3776).calc,crossTraceCalc:e(3776).crossTraceCalc,plot:e(96488).plot,style:e(85676).style,colorbar:e(5528),meta:{}}},84920:function(ee){"use strict";ee.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(ee,z,e){"use strict";var M=e(3400),k=e(84920);ee.exports=function(o,T){function b(h,s){return M.coerce(o,T,k,h,s)}b("sunburstcolorway",T.colorway),b("extendsunburstcolors")}},96488:function(ee,z,e){"use strict";var M=e(33428),k=e(74148),o=e(67756).qy,T=e(43616),b=e(3400),h=e(72736),s=e(82744),t=s.recordMinTextSize,i=s.clearMinTextSize,n=e(37820),r=e(69656).getRotationAngle,a=n.computeTransform,l=n.transformInsideText,u=e(85676).styleOne,d=e(60100).resizeText,c=e(45716),x=e(27328),g=e(78176);function p(m,y,_,f){var S=m._context.staticPlot,w=m._fullLayout,E=!w.uniformtext.mode&&g.hasTransition(f),P=M.select(_).selectAll("g.slice"),C=y[0],O=C.trace,R=C.hierarchy,j=g.findEntryWithLevel(R,O.level),D=g.getMaxDepth(O),N=w._size,W=O.domain,F=N.w*(W.x[1]-W.x[0]),U=N.h*(W.y[1]-W.y[0]),V=.5*Math.min(F,U),te=C.cx=N.l+N.w*(W.x[1]+W.x[0])/2,J=C.cy=N.t+N.h*(1-W.y[0])-U/2;if(!j)return P.remove();var K=null,X={};E&&P.each(function(ae){X[g.getPtId(ae)]={rpx0:ae.rpx0,rpx1:ae.rpx1,x0:ae.x0,x1:ae.x1,transform:ae.transform},!K&&g.isEntry(ae)&&(K=ae)});var Z=function(ae){return k.partition().size([2*Math.PI,ae.height+1])(ae)}(j).descendants(),$=j.height+1,re=0,oe=D;C.hasMultipleRoots&&g.isHierarchyRoot(j)&&(Z=Z.slice(1),$-=1,re=1,oe+=1),Z=Z.filter(function(ae){return ae.y1<=oe});var ie=r(O.rotation);ie&&Z.forEach(function(ae){ae.x0+=ie,ae.x1+=ie});var ue=Math.min($,D),me=function(ae){return(ae-re)/ue*V},be=function(ae,he){return[ae*Math.cos(he),-ae*Math.sin(he)]},ge=function(ae){return b.pathAnnulus(ae.rpx0,ae.rpx1,ae.x0,ae.x1,te,J)},de=function(ae){return te+v(ae)[0]*(ae.transform.rCenter||0)+(ae.transform.x||0)},ve=function(ae){return J+v(ae)[1]*(ae.transform.rCenter||0)+(ae.transform.y||0)};(P=P.data(Z,g.getPtId)).enter().append("g").classed("slice",!0),E?P.exit().transition().each(function(){var ae=M.select(this);ae.select("path.surface").transition().attrTween("d",function(he){var Se=function(ke){var Me,Ee=g.getPtId(ke),De=X[Ee],fe=X[g.getPtId(j)];if(fe){var xe=(ke.x1>fe.x1?2*Math.PI:0)+ie;Me=ke.rpx1<fe.rpx1?{x0:ke.x0,x1:ke.x1,rpx0:0,rpx1:0}:{x0:xe,x1:xe,rpx0:ke.rpx0,rpx1:ke.rpx1}}else{var we,Oe=g.getPtId(ke.parent);P.each(function(Ze){if(g.getPtId(Ze)===Oe)return we=Ze});var ze,Pe=we.children;Pe.forEach(function(Ze,it){if(g.getPtId(Ze)===Ee)return ze=it});var Ue=Pe.length,Ve=o(we.x0,we.x1);Me={rpx0:V,rpx1:V,x0:Ve(ze/Ue),x1:Ve((ze+1)/Ue)}}return o(De,Me)}(he);return function(ke){return ge(Se(ke))}}),ae.select("g.slicetext").attr("opacity",0)}).remove():P.exit().remove(),P.order();var pe=null;if(E&&K){var _e=g.getPtId(K);P.each(function(ae){pe===null&&g.getPtId(ae)===_e&&(pe=ae.x1)})}var Te=P;function le(ae){var he=ae.parent,Se=X[g.getPtId(he)],ke={};if(Se){var Me=he.children,Ee=Me.indexOf(ae),De=Me.length,fe=o(Se.x0,Se.x1);ke.x0=fe(Ee/De),ke.x1=fe(Ee/De)}else ke.x0=ke.x1=0;return ke}E&&(Te=Te.transition().each("end",function(){var ae=M.select(this);g.setSliceCursor(ae,m,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Te.each(function(ae){var he=M.select(this),Se=b.ensureSingle(he,"path","surface",function(xe){xe.style("pointer-events",S?"none":"all")});ae.rpx0=me(ae.y0),ae.rpx1=me(ae.y1),ae.xmid=(ae.x0+ae.x1)/2,ae.pxmid=be(ae.rpx1,ae.xmid),ae.midangle=-(ae.xmid-Math.PI/2),ae.startangle=-(ae.x0-Math.PI/2),ae.stopangle=-(ae.x1-Math.PI/2),ae.halfangle=.5*Math.min(b.angleDelta(ae.x0,ae.x1)||Math.PI,Math.PI),ae.ring=1-ae.rpx0/ae.rpx1,ae.rInscribed=function(xe){return xe.rpx0===0&&b.isFullCircle([xe.x0,xe.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(xe.halfangle)),xe.ring/2))}(ae),E?Se.transition().attrTween("d",function(xe){var we=function(Oe){var ze,Pe=X[g.getPtId(Oe)],Ue={x0:Oe.x0,x1:Oe.x1,rpx0:Oe.rpx0,rpx1:Oe.rpx1};if(Pe)ze=Pe;else if(K)if(Oe.parent)if(pe){var Ve=(Oe.x1>pe?2*Math.PI:0)+ie;ze={x0:Ve,x1:Ve}}else ze={rpx0:V,rpx1:V},b.extendFlat(ze,le(Oe));else ze={rpx0:0,rpx1:0};else ze={x0:ie,x1:ie};return o(ze,Ue)}(xe);return function(Oe){return ge(we(Oe))}}):Se.attr("d",ge),he.call(c,j,m,y,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(g.setSliceCursor,m,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:m._transitioning}),Se.call(u,ae,O,m);var ke=b.ensureSingle(he,"g","slicetext"),Me=b.ensureSingle(ke,"text","",function(xe){xe.attr("data-notex",1)}),Ee=b.ensureUniformFontSize(m,g.determineTextFont(O,ae,w.font));Me.text(z.formatSliceLabel(ae,j,O,y,w)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Ee).call(h.convertToTspans,m);var De=T.bBox(Me.node());ae.transform=l(De,ae,C),ae.transform.targetX=de(ae),ae.transform.targetY=ve(ae);var fe=function(xe,we){var Oe=xe.transform;return a(Oe,we),Oe.fontSize=Ee.size,t(O.type,Oe,w),b.getTextTransform(Oe)};E?Me.transition().attrTween("transform",function(xe){var we=function(Oe){var ze,Pe=X[g.getPtId(Oe)],Ue=Oe.transform;if(Pe)ze=Pe;else if(ze={rpx1:Oe.rpx1,transform:{textPosAngle:Ue.textPosAngle,scale:0,rotate:Ue.rotate,rCenter:Ue.rCenter,x:Ue.x,y:Ue.y}},K)if(Oe.parent)if(pe){var Ve=Oe.x1>pe?2*Math.PI:0;ze.x0=ze.x1=Ve}else b.extendFlat(ze,le(Oe));else ze.x0=ze.x1=ie;else ze.x0=ze.x1=ie;var Ze=o(ze.transform.textPosAngle,Oe.transform.textPosAngle),it=o(ze.rpx1,Oe.rpx1),tt=o(ze.x0,Oe.x0),dt=o(ze.x1,Oe.x1),yt=o(ze.transform.scale,Ue.scale),vt=o(ze.transform.rotate,Ue.rotate),et=Ue.rCenter===0?3:ze.transform.rCenter===0?1/3:1,Qe=o(ze.transform.rCenter,Ue.rCenter);return function(wt){var It=it(wt),Dt=tt(wt),Ct=dt(wt),He=function(Be){return Qe(Math.pow(Be,et))}(wt),We={pxmid:be(It,(Dt+Ct)/2),rpx1:It,transform:{textPosAngle:Ze(wt),rCenter:He,x:Ue.x,y:Ue.y}};return t(O.type,Ue,w),{transform:{targetX:de(We),targetY:ve(We),scale:yt(wt),rotate:vt(wt),rCenter:He}}}}(xe);return function(Oe){return fe(we(Oe),De)}}):Me.attr("transform",fe(ae,De))})}function v(m){return y=m.rpx1,_=m.transform.textPosAngle,[y*Math.sin(_),-y*Math.cos(_)];var y,_}z.plot=function(m,y,_,f){var S,w,E=m._fullLayout,P=E._sunburstlayer,C=!_,O=!E.uniformtext.mode&&g.hasTransition(_);i("sunburst",E),(S=P.selectAll("g.trace.sunburst").data(y,function(R){return R[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),O?(f&&(w=f()),M.transition().duration(_.duration).ease(_.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){P.selectAll("g.trace").each(function(R){p(m,R,this,_)})})):(S.each(function(R){p(m,R,this,_)}),E.uniformtext.mode&&d(m,E._sunburstlayer.selectAll(".trace"),"sunburst")),C&&S.exit().remove()},z.formatSliceLabel=function(m,y,_,f,S){var w=_.texttemplate,E=_.textinfo;if(!(w||E&&E!=="none"))return"";var P=S.separators,C=f[0],O=m.data.data,R=C.hierarchy,j=g.isHierarchyRoot(m),D=g.getParent(R,m),N=g.getValue(m);if(!w){var W,F=E.split("+"),U=function(oe){return F.indexOf(oe)!==-1},V=[];if(U("label")&&O.label&&V.push(O.label),O.hasOwnProperty("v")&&U("value")&&V.push(g.formatValue(O.v,P)),!j){U("current path")&&V.push(g.getPath(m.data));var te=0;U("percent parent")&&te++,U("percent entry")&&te++,U("percent root")&&te++;var J=te>1;if(te){var K,X=function(oe){W=g.formatPercent(K,P),J&&(W+=" of "+oe),V.push(W)};U("percent parent")&&!j&&(K=N/g.getValue(D),X("parent")),U("percent entry")&&(K=N/g.getValue(y),X("entry")),U("percent root")&&(K=N/g.getValue(R),X("root"))}}return U("text")&&(W=b.castOption(_,O.i,"text"),b.isValidTextValue(W)&&V.push(W)),V.join("<br>")}var Z=b.castOption(_,O.i,"texttemplate");if(!Z)return"";var $={};O.label&&($.label=O.label),O.hasOwnProperty("v")&&($.value=O.v,$.valueLabel=g.formatValue(O.v,P)),$.currentPath=g.getPath(m.data),j||($.percentParent=N/g.getValue(D),$.percentParentLabel=g.formatPercent($.percentParent,P),$.parent=g.getPtLabel(D)),$.percentEntry=N/g.getValue(y),$.percentEntryLabel=g.formatPercent($.percentEntry,P),$.entry=g.getPtLabel(y),$.percentRoot=N/g.getValue(R),$.percentRootLabel=g.formatPercent($.percentRoot,P),$.root=g.getPtLabel(R),O.hasOwnProperty("color")&&($.color=O.color);var re=b.castOption(_,O.i,"text");return(b.isValidTextValue(re)||re==="")&&($.text=re),$.customdata=b.castOption(_,O.i,"customdata"),b.texttemplateString(Z,$,S._d3locale,$,_._meta||{})}},85676:function(ee,z,e){"use strict";var M=e(33428),k=e(76308),o=e(3400),T=e(82744).resizeText,b=e(60404);function h(s,t,i,n){var r=t.data.data,a=!t.children,l=r.i,u=o.castOption(i,l,"marker.line.color")||k.defaultLine,d=o.castOption(i,l,"marker.line.width")||0;s.call(b,t,i,n).style("stroke-width",d).call(k.stroke,u).style("opacity",a?i.leaf.opacity:null)}ee.exports={style:function(s){var t=s._fullLayout._sunburstlayer.selectAll(".trace");T(s,t,"sunburst"),t.each(function(i){var n=M.select(this),r=i[0].trace;n.style("opacity",r.opacity),n.selectAll("path.surface").each(function(a){M.select(this).call(h,a,r,s)})})},styleOne:h}},16716:function(ee,z,e){"use strict";var M=e(76308),k=e(49084),o=e(29736).axisHoverFormat,T=e(21776).Ks,b=e(45464),h=e(92880).extendFlat,s=e(67824).overrideAll;function t(n){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:M.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:M.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=ee.exports=s(h({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},k("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:h({},k.zauto,{}),zmin:h({},k.zmin,{}),zmax:h({},k.zmax,{})},hoverinfo:h({},b.hoverinfo),showlegend:h({},b.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},56576:function(ee,z,e){"use strict";var M=e(47128);ee.exports=function(k,o){o.surfacecolor?M(k,o,{vals:o.surfacecolor,containerStr:"",cLetter:"c"}):M(k,o,{vals:o.z,containerStr:"",cLetter:"c"})}},79164:function(ee,z,e){"use strict";var M=e(67792).gl_surface3d,k=e(67792).ndarray,o=e(67792).ndarray_linear_interpolate.d2,T=e(70448),b=e(11240),h=e(3400).isArrayOrTypedArray,s=e(33040).parseColorScale,t=e(43080),i=e(8932).extractOpts;function n(_,f,S){this.scene=_,this.uid=S,this.surface=f,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var r=n.prototype;r.getXat=function(_,f,S,w){var E=h(this.data.x)?h(this.data.x[0])?this.data.x[f][_]:this.data.x[_]:_;return S===void 0?E:w.d2l(E,0,S)},r.getYat=function(_,f,S,w){var E=h(this.data.y)?h(this.data.y[0])?this.data.y[f][_]:this.data.y[f]:f;return S===void 0?E:w.d2l(E,0,S)},r.getZat=function(_,f,S,w){var E=this.data.z[f][_];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[f][_]),S===void 0?E:w.d2l(E,0,S)},r.handlePick=function(_){if(_.object===this.surface){var f=(_.data.index[0]-1)/this.dataScaleX-1,S=(_.data.index[1]-1)/this.dataScaleY-1,w=Math.max(Math.min(Math.round(f),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);_.index=[w,E],_.traceCoordinate=[this.getXat(w,E),this.getYat(w,E),this.getZat(w,E)],_.dataCoordinate=[this.getXat(w,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(w,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(w,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++)_.dataCoordinate[P]!=null&&(_.dataCoordinate[P]*=this.scene.dataScale[P]);var C=this.data.hovertext||this.data.text;return h(C)&&C[E]&&C[E][w]!==void 0?_.textLabel=C[E][w]:_.textLabel=C||"",_.data.dataCoordinate=_.dataCoordinate.slice(),this.surface.highlight(_.data),this.scene.glplot.spikes.position=_.dataCoordinate,!0}};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(_,f){if(_<f)return 0;for(var S=0;Math.floor(_%f)===0;)_/=f,S++;return S}function u(_){for(var f=[],S=0;S<a.length;S++){var w=a[S];f.push(l(_,w))}return f}function d(_){for(var f=u(_),S=_,w=0;w<a.length;w++)if(f[w]>0){S=a[w];break}return S}function c(_,f){if(!(_<1||f<1)){for(var S=u(_),w=u(f),E=1,P=0;P<a.length;P++)E*=Math.pow(a[P],Math.max(S[P],w[P]));return E}}r.calcXnums=function(_){var f,S=[];for(f=1;f<_;f++){var w=this.getXat(f-1,0),E=this.getXat(f,0);S[f-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var P=0;for(f=1;f<_;f++)P+=S[f-1];for(f=1;f<_;f++)S[f-1]===0?S[f-1]=1:S[f-1]=Math.round(P/S[f-1]);return S},r.calcYnums=function(_){var f,S=[];for(f=1;f<_;f++){var w=this.getYat(0,f-1),E=this.getYat(0,f);S[f-1]=E!==w&&w!=null&&E!=null?Math.abs(E-w):0}var P=0;for(f=1;f<_;f++)P+=S[f-1];for(f=1;f<_;f++)S[f-1]===0?S[f-1]=1:S[f-1]=Math.round(P/S[f-1]);return S};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],g=x[9],p=x[13];function v(_,f,S){var w=S[8]+S[2]*f[0]+S[5]*f[1];return _[0]=(S[6]+S[0]*f[0]+S[3]*f[1])/w,_[1]=(S[7]+S[1]*f[0]+S[4]*f[1])/w,_}function m(_,f,S){return function(w,E,P,C){for(var O=[0,0],R=w.shape[0],j=w.shape[1],D=0;D<R;D++)for(var N=0;N<j;N++)P(O,[D,N],C),w.set(D,N,o(E,O[0],O[1]))}(_,f,v,S),_}function y(_,f){for(var S=!1,w=0;w<_.length;w++)if(f===_[w]){S=!0;break}S===!1&&_.push(f)}r.estimateScale=function(_,f){for(var S=1+function(E){if(E.length!==0){for(var P=1,C=0;C<E.length;C++)P=c(P,E[C]);return P}}(f===0?this.calcXnums(_):this.calcYnums(_));S<g;)S*=2;for(;S>p;)S--,S/=d(S),++S<g&&(S=p);var w=Math.round(S/_);return w>1?w:1},r.refineCoords=function(_){for(var f=this.dataScaleX,S=this.dataScaleY,w=_[0].shape[0],E=_[0].shape[1],P=0|Math.floor(_[0].shape[0]*f+1),C=0|Math.floor(_[0].shape[1]*S+1),O=1+w+1,R=1+E+1,j=k(new Float32Array(O*R),[O,R]),D=[1/f,0,0,0,1/S,0,0,0,1],N=0;N<_.length;++N){this.surface.padField(j,_[N]);var W=k(new Float32Array(P*C),[P,C]);m(W,j,D),_[N]=W}},r.setContourLevels=function(){var _,f,S,w=[[],[],[]],E=[!1,!1,!1],P=!1;for(_=0;_<3;++_)if(this.showContour[_]&&(P=!0,this.contourSize[_]>0&&this.contourStart[_]!==null&&this.contourEnd[_]!==null&&this.contourEnd[_]>this.contourStart[_]))for(E[_]=!0,f=this.contourStart[_];f<this.contourEnd[_];f+=this.contourSize[_])S=f*this.scene.dataScale[_],y(w[_],S);if(P){var C=[[],[],[]];for(_=0;_<3;++_)this.showContour[_]&&(C[_]=E[_]?w[_]:this.scene.contourLevels[_]);this.surface.update({levels:C})}},r.update=function(_){var f,S,w,E,P=this.scene,C=P.fullSceneLayout,O=this.surface,R=s(_),j=P.dataScale,D=_.z[0].length,N=_._ylength,W=P.contourLevels;this.data=_;var F=[];for(f=0;f<3;f++)for(F[f]=[],S=0;S<D;S++)F[f][S]=[];for(S=0;S<D;S++)for(w=0;w<N;w++)F[0][S][w]=this.getXat(S,w,_.xcalendar,C.xaxis),F[1][S][w]=this.getYat(S,w,_.ycalendar,C.yaxis),F[2][S][w]=this.getZat(S,w,_.zcalendar,C.zaxis);if(_.connectgaps)for(_._emptypoints=b(F[2]),T(F[2],_._emptypoints),_._interpolatedZ=[],S=0;S<D;S++)for(_._interpolatedZ[S]=[],w=0;w<N;w++)_._interpolatedZ[S][w]=F[2][S][w];for(f=0;f<3;f++)for(S=0;S<D;S++)for(w=0;w<N;w++)(E=F[f][S][w])==null?F[f][S][w]=NaN:E=F[f][S][w]*=j[f];for(f=0;f<3;f++)for(S=0;S<D;S++)for(w=0;w<N;w++)(E=F[f][S][w])!=null&&(this.minValues[f]>E&&(this.minValues[f]=E),this.maxValues[f]<E&&(this.maxValues[f]=E));for(f=0;f<3;f++)this.objectOffset[f]=.5*(this.minValues[f]+this.maxValues[f]);for(f=0;f<3;f++)for(S=0;S<D;S++)for(w=0;w<N;w++)(E=F[f][S][w])!=null&&(F[f][S][w]-=this.objectOffset[f]);var U=[k(new Float32Array(D*N),[D,N]),k(new Float32Array(D*N),[D,N]),k(new Float32Array(D*N),[D,N])];for(f=0;f<3;f++)for(S=0;S<D;S++)for(w=0;w<N;w++)U[f].set(S,w,F[f][S][w]);F=[];var V={colormap:R,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!_.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:_.opacityscale,opacity:_.opacity},te=i(_);if(V.intensityBounds=[te.min,te.max],_.surfacecolor){var J=k(new Float32Array(D*N),[D,N]);for(S=0;S<D;S++)for(w=0;w<N;w++)J.set(S,w,_.surfacecolor[w][S]);U.push(J)}else V.intensityBounds[0]*=j[2],V.intensityBounds[1]*=j[2];(p<U[0].shape[0]||p<U[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(U[0].shape[0],0),this.dataScaleY=this.estimateScale(U[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(U)),_.surfacecolor&&(V.intensity=U.pop());var K=[!0,!0,!0],X=["x","y","z"];for(f=0;f<3;++f){var Z=_.contours[X[f]];K[f]=Z.highlight,V.showContour[f]=Z.show||Z.highlight,V.showContour[f]&&(V.contourProject[f]=[Z.project.x,Z.project.y,Z.project.z],Z.show?(this.showContour[f]=!0,V.levels[f]=W[f],O.highlightColor[f]=V.contourColor[f]=t(Z.color),Z.usecolormap?O.highlightTint[f]=V.contourTint[f]=0:O.highlightTint[f]=V.contourTint[f]=1,V.contourWidth[f]=Z.width,this.contourStart[f]=Z.start,this.contourEnd[f]=Z.end,this.contourSize[f]=Z.size):(this.showContour[f]=!1,this.contourStart[f]=null,this.contourEnd[f]=null,this.contourSize[f]=0),Z.highlight&&(V.dynamicColor[f]=t(Z.highlightcolor),V.dynamicWidth[f]=Z.highlightwidth))}(function($){var re=$[0].rgb,oe=$[$.length-1].rgb;return re[0]===oe[0]&&re[1]===oe[1]&&re[2]===oe[2]&&re[3]===oe[3]})(R)&&(V.vertexColor=!0),V.objectOffset=this.objectOffset,V.coords=U,O.update(V),O.visible=_.visible,O.enableDynamic=K,O.enableHighlight=K,O.snapToData=!0,"lighting"in _&&(O.ambientLight=_.lighting.ambient,O.diffuseLight=_.lighting.diffuse,O.specularLight=_.lighting.specular,O.roughness=_.lighting.roughness,O.fresnel=_.lighting.fresnel),"lightposition"in _&&(O.lightPosition=[_.lightposition.x,_.lightposition.y,_.lightposition.z])},r.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},ee.exports=function(_,f){var S=_.glplot.gl,w=M({gl:S}),E=new n(_,w,f.uid);return w._trace=E,E.update(f),_.glplot.add(w),E}},60192:function(ee,z,e){"use strict";var M=e(24040),k=e(3400),o=e(27260),T=e(16716);function b(s,t,i,n){var r=n("opacityscale");r==="max"?t.opacityscale=[[0,.1],[1,1]]:r==="min"?t.opacityscale=[[0,1],[1,.1]]:r==="extremes"?t.opacityscale=function(a,l){for(var u=[],d=0;d<32;d++){var c=d/31,x=.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2));u.push([c,Math.max(0,Math.min(1,x))])}return u}():function(a){var l=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var u=0;u<a.length;u++){var d=a[u];if(d.length!==2||+d[0]<l)return!1;l=+d[0]}return!0}(r)||(t.opacityscale=void 0)}function h(s,t,i){t in s&&!(i in s)&&(s[i]=s[t])}ee.exports={supplyDefaults:function(s,t,i,n){var r,a;function l(y,_){return k.coerce(s,t,T,y,_)}var u=l("x"),d=l("y"),c=l("z");if(!c||!c.length||u&&u.length<1||d&&d.length<1)t.visible=!1;else{t._xlength=Array.isArray(u)&&k.isArrayOrTypedArray(u[0])?c.length:c[0].length,t._ylength=c.length,M.getComponentMethod("calendars","handleTraceDefaults")(s,t,["x","y","z"],n),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(y){l(y)});var x=l("surfacecolor"),g=["x","y","z"];for(r=0;r<3;++r){var p="contours."+g[r],v=l(p+".show"),m=l(p+".highlight");if(v||m)for(a=0;a<3;++a)l(p+".project."+g[a]);v&&(l(p+".color"),l(p+".width"),l(p+".usecolormap")),m&&(l(p+".highlightcolor"),l(p+".highlightwidth")),l(p+".start"),l(p+".end"),l(p+".size")}x||(h(s,"zmin","cmin"),h(s,"zmax","cmax"),h(s,"zauto","cauto")),o(s,t,n,l,{prefix:"",cLetter:"c"}),b(0,t,0,l),t._length=null}},opacityscaleDefaults:b}},91304:function(ee,z,e){"use strict";ee.exports={attributes:e(16716),supplyDefaults:e(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e(56576),plot:e(79164),moduleType:"trace",name:"surface",basePlotModule:e(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(ee,z,e){"use strict";var M=e(13916),k=e(92880).extendFlat,o=e(67824).overrideAll,T=e(25376),b=e(86968).u,h=e(29736).descriptionOnlyNumbers;(ee.exports=o({domain:b({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:h("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:h("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:k({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:k({},T({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},85852:function(ee,z,e){"use strict";var M=e(84888)._M,k=e(24752),o="table";z.name=o,z.plot=function(T){var b=M(T.calcdata,o)[0];b.length&&k(T,b)},z.clean=function(T,b,h,s){var t=s._has&&s._has(o),i=b._has&&b._has(o);t&&!i&&s._paperdiv.selectAll(".table").remove()}},39312:function(ee,z,e){"use strict";var M=e(71688).wrap;ee.exports=function(){return M({})}},23536:function(ee){"use strict";ee.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(ee,z,e){"use strict";var M=e(23536),k=e(92880).extendFlat,o=e(38248),T=e(38116).isTypedArray,b=e(38116).isArrayOrTypedArray;function h(l){if(b(l)){for(var u=0,d=0;d<l.length;d++)u=Math.max(u,h(l[d]));return u}return l}function s(l,u){return l+u}function t(l){var u,d=l.slice(),c=1/0,x=0;for(u=0;u<d.length;u++)T(d[u])?d[u]=Array.from(d[u]):b(d[u])||(d[u]=[d[u]]),c=Math.min(c,d[u].length),x=Math.max(x,d[u].length);if(c!==x)for(u=0;u<d.length;u++){var g=x-d[u].length;g&&(d[u]=d[u].concat(i(g)))}return d}function i(l){for(var u=new Array(l),d=0;d<l;d++)u[d]="";return u}function n(l){return l.calcdata.columns.reduce(function(u,d){return d.xIndex<l.xIndex?u+d.columnWidth:u},0)}function r(l,u){return Object.keys(l).map(function(d){return k({},l[d],{auxiliaryBlocks:u})})}function a(l,u){for(var d,c={},x=0,g=0,p={firstRowIndex:null,lastRowIndex:null,rows:[]},v=0,m=0,y=0;y<l.length;y++)d=l[y],p.rows.push({rowIndex:y,rowHeight:d}),((g+=d)>=u||y===l.length-1)&&(c[x]=p,p.key=m++,p.firstRowIndex=v,p.lastRowIndex=y,p={firstRowIndex:null,lastRowIndex:null,rows:[]},x+=g,v=y+1,g=0);return c}ee.exports=function(l,u){var d=t(u.cells.values),c=function(N){return N.slice(u.header.values.length,N.length)},x=t(u.header.values);x.length&&!x[0].length&&(x[0]=[""],x=t(x));var g=x.concat(c(d).map(function(){return i((x[0]||[""]).length)})),p=u.domain,v=Math.floor(l._fullLayout._size.w*(p.x[1]-p.x[0])),m=Math.floor(l._fullLayout._size.h*(p.y[1]-p.y[0])),y=u.header.values.length?g[0].map(function(){return u.header.height}):[M.emptyHeaderHeight],_=d.length?d[0].map(function(){return u.cells.height}):[],f=y.reduce(s,0),S=a(_,m-f+M.uplift),w=r(a(y,f),[]),E=r(S,w),P={},C=u._fullInput.columnorder;b(C)&&(C=Array.from(C)),C=C.concat(c(d.map(function(N,W){return W})));var O=g.map(function(N,W){var F=b(u.columnwidth)?u.columnwidth[Math.min(W,u.columnwidth.length-1)]:u.columnwidth;return o(F)?Number(F):1}),R=O.reduce(s,0);O=O.map(function(N){return N/R*v});var j=Math.max(h(u.header.line.width),h(u.cells.line.width)),D={key:u.uid+l._context.staticPlot,translateX:p.x[0]*l._fullLayout._size.w,translateY:l._fullLayout._size.h*(1-p.y[1]),size:l._fullLayout._size,width:v,maxLineWidth:j,height:m,columnOrder:C,groupHeight:m,rowBlocks:E,headerRowBlocks:w,scrollY:0,cells:k({},u.cells,{values:d}),headerCells:k({},u.header,{values:g}),gdColumns:g.map(function(N){return N[0]}),gdColumnsOriginalOrder:g.map(function(N){return N[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:g.map(function(N,W){var F=P[N];return P[N]=(F||0)+1,{key:N+"__"+P[N],label:N,specIndex:W,xIndex:C[W],xScale:n,x:void 0,calcdata:void 0,columnWidth:O[W]}})};return D.columns.forEach(function(N){N.calcdata=D,N.x=n(N)}),D}},53056:function(ee,z,e){"use strict";var M=e(92880).extendFlat;z.splitToPanels=function(k){var o=[0,0],T=M({},k,{key:"header",type:"header",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:M({},k.calcdata,{cells:k.calcdata.headerCells})});return[M({},k,{key:"cells1",type:"cells",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),M({},k,{key:"cells2",type:"cells",page:1,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks}),T]},z.splitToCells=function(k){var o=function(T){var b=T.rowBlocks[T.page],h=b?b.rows[0].rowIndex:0;return[h,b?h+b.rows.length:0]}(k);return(k.values||[]).slice(o[0],o[1]).map(function(T,b){return{keyWithinBlock:b+(typeof T=="string"&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:o[0]+b,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:T}})}},53212:function(ee,z,e){"use strict";var M=e(3400),k=e(60520),o=e(86968).Q;ee.exports=function(T,b,h,s){function t(i,n){return M.coerce(T,b,k,i,n)}o(b,s,t),t("columnwidth"),t("header.values"),t("header.format"),t("header.align"),t("header.prefix"),t("header.suffix"),t("header.height"),t("header.line.width"),t("header.line.color"),t("header.fill.color"),M.coerceFont(t,"header.font",M.extendFlat({},s.font)),function(i,n){for(var r=i.columnorder||[],a=i.header.values.length,l=r.slice(0,a),u=l.slice().sort(function(x,g){return x-g}),d=l.map(function(x){return u.indexOf(x)}),c=d.length;c<a;c++)d.push(c);n("columnorder",d)}(b,t),t("cells.values"),t("cells.format"),t("cells.align"),t("cells.prefix"),t("cells.suffix"),t("cells.height"),t("cells.line.width"),t("cells.line.color"),t("cells.fill.color"),M.coerceFont(t,"cells.font",M.extendFlat({},s.font)),b._length=null}},41724:function(ee,z,e){"use strict";ee.exports={attributes:e(60520),supplyDefaults:e(53212),calc:e(39312),plot:e(24752),moduleType:"trace",name:"table",basePlotModule:e(85852),categories:["noOpacity"],meta:{}}},24752:function(ee,z,e){"use strict";var M=e(23536),k=e(33428),o=e(3400),T=o.numberFormat,b=e(71688),h=e(43616),s=e(72736),t=e(3400).raiseToTop,i=e(3400).strTranslate,n=e(3400).cancelTransition,r=e(55992),a=e(53056),l=e(76308);function u(V){return Math.ceil(V.calcdata.maxLineWidth/2)}function d(V,te){return"clip"+V._fullLayout._uid+"_scrollAreaBottomClip_"+te.key}function c(V,te){return"clip"+V._fullLayout._uid+"_columnBoundaryClippath_"+te.calcdata.key+"_"+te.specIndex}function x(V){return[].concat.apply([],V.map(function(te){return te})).map(function(te){return te.__data__})}function g(V,te,J){var K=V.selectAll("."+M.cn.scrollbarKit).data(b.repeat,b.keyFun);K.enter().append("g").classed(M.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),K.each(function(oe){var ie=oe.scrollbarState;ie.totalHeight=function(ue){var me=ue.rowBlocks;return N(me,me.length-1)+(me.length?W(me[me.length-1],1/0):1)}(oe),ie.scrollableAreaHeight=oe.groupHeight-w(oe),ie.currentlyVisibleHeight=Math.min(ie.totalHeight,ie.scrollableAreaHeight),ie.ratio=ie.currentlyVisibleHeight/ie.totalHeight,ie.barLength=Math.max(ie.ratio*ie.currentlyVisibleHeight,M.goldenRatio*M.scrollbarWidth),ie.barWiggleRoom=ie.currentlyVisibleHeight-ie.barLength,ie.wiggleRoom=Math.max(0,ie.totalHeight-ie.scrollableAreaHeight),ie.topY=ie.barWiggleRoom===0?0:oe.scrollY/ie.wiggleRoom*ie.barWiggleRoom,ie.bottomY=ie.topY+ie.barLength,ie.dragMultiplier=ie.wiggleRoom/ie.barWiggleRoom}).attr("transform",function(oe){var ie=oe.width+M.scrollbarWidth/2+M.scrollbarOffset;return i(ie,w(oe))});var X=K.selectAll("."+M.cn.scrollbar).data(b.repeat,b.keyFun);X.enter().append("g").classed(M.cn.scrollbar,!0);var Z=X.selectAll("."+M.cn.scrollbarSlider).data(b.repeat,b.keyFun);Z.enter().append("g").classed(M.cn.scrollbarSlider,!0),Z.attr("transform",function(oe){return i(0,oe.scrollbarState.topY||0)});var $=Z.selectAll("."+M.cn.scrollbarGlyph).data(b.repeat,b.keyFun);$.enter().append("line").classed(M.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",M.scrollbarWidth).attr("stroke-linecap","round").attr("y1",M.scrollbarWidth/2),$.attr("y2",function(oe){return oe.scrollbarState.barLength-M.scrollbarWidth/2}).attr("stroke-opacity",function(oe){return oe.columnDragInProgress||!oe.scrollbarState.barWiggleRoom||J?0:.4}),$.transition().delay(0).duration(0),$.transition().delay(M.scrollbarHideDelay).duration(M.scrollbarHideDuration).attr("stroke-opacity",0);var re=X.selectAll("."+M.cn.scrollbarCaptureZone).data(b.repeat,b.keyFun);re.enter().append("line").classed(M.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",M.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(oe){var ie=k.event.y,ue=this.getBoundingClientRect(),me=oe.scrollbarState,be=ie-ue.top,ge=k.scale.linear().domain([0,me.scrollableAreaHeight]).range([0,me.totalHeight]).clamp(!0);me.topY<=be&&be<=me.bottomY||P(te,V,null,ge(be-me.barLength/2))(oe)}).call(k.behavior.drag().origin(function(oe){return k.event.stopPropagation(),oe.scrollbarState.scrollbarScrollInProgress=!0,oe}).on("drag",P(te,V)).on("dragend",function(){})),re.attr("y2",function(oe){return oe.scrollbarState.scrollableAreaHeight}),te._context.staticPlot&&($.remove(),re.remove())}function p(V,te,J,K){var X=function(ie){var ue=ie.selectAll("."+M.cn.columnCells).data(b.repeat,b.keyFun);return ue.enter().append("g").classed(M.cn.columnCells,!0),ue.exit().remove(),ue}(J),Z=function(ie){var ue=ie.selectAll("."+M.cn.columnCell).data(a.splitToCells,function(me){return me.keyWithinBlock});return ue.enter().append("g").classed(M.cn.columnCell,!0),ue.exit().remove(),ue}(X);(function(ie){ie.each(function(ue,me){var be=ue.calcdata.cells.font,ge=ue.column.specIndex,de={size:y(be.size,ge,me),color:y(be.color,ge,me),family:y(be.family,ge,me)};ue.rowNumber=ue.key,ue.align=y(ue.calcdata.cells.align,ge,me),ue.cellBorderWidth=y(ue.calcdata.cells.line.width,ge,me),ue.font=de})})(Z);var $=function(ie){var ue=ie.selectAll("."+M.cn.cellRect).data(b.repeat,function(me){return me.keyWithinBlock});return ue.enter().append("rect").classed(M.cn.cellRect,!0),ue}(Z);(function(ie){ie.attr("width",function(ue){return ue.column.columnWidth}).attr("stroke-width",function(ue){return ue.cellBorderWidth}).each(function(ue){var me=k.select(this);l.stroke(me,y(ue.calcdata.cells.line.color,ue.column.specIndex,ue.rowNumber)),l.fill(me,y(ue.calcdata.cells.fill.color,ue.column.specIndex,ue.rowNumber))})})($);var re=function(ie){var ue=ie.selectAll("."+M.cn.cellTextHolder).data(b.repeat,function(me){return me.keyWithinBlock});return ue.enter().append("g").classed(M.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ue}(Z),oe=function(ie){var ue=ie.selectAll("."+M.cn.cellText).data(b.repeat,function(me){return me.keyWithinBlock});return ue.enter().append("text").classed(M.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){k.event.stopPropagation()}),ue}(re);(function(ie){ie.each(function(ue){h.font(k.select(this),ue.font)})})(oe),v(oe,te,K,V),D(Z)}function v(V,te,J,K){V.text(function(X){var Z=X.column.specIndex,$=X.rowNumber,re=X.value,oe=typeof re=="string",ie=oe&&re.match(/<br>/i),ue=!oe||ie;X.mayHaveMarkup=oe&&re.match(/[<&>]/);var me,be=typeof(me=re)=="string"&&me.match(M.latexCheck);X.latex=be;var ge,de,ve=be?"":y(X.calcdata.cells.prefix,Z,$)||"",pe=be?"":y(X.calcdata.cells.suffix,Z,$)||"",_e=be?null:y(X.calcdata.cells.format,Z,$)||null,Te=ve+(_e?T(_e)(X.value):X.value)+pe;if(X.wrappingNeeded=!X.wrapped&&!ue&&!be&&(ge=m(Te)),X.cellHeightMayIncrease=ie||be||X.mayHaveMarkup||(ge===void 0?m(Te):ge),X.needsConvertToTspans=X.mayHaveMarkup||X.wrappingNeeded||X.latex,X.wrappingNeeded){var le=(M.wrapSplitCharacter===" "?Te.replace(/<a href=/gi,"<a_href="):Te).split(M.wrapSplitCharacter),ae=M.wrapSplitCharacter===" "?le.map(function(he){return he.replace(/<a_href=/gi,"<a href=")}):le;X.fragments=ae.map(function(he){return{text:he,width:null}}),X.fragments.push({fragment:M.wrapSpacer,width:null}),de=ae.join(M.lineBreaker)+M.lineBreaker+M.wrapSpacer}else delete X.fragments,de=Te;return de}).attr("dy",function(X){return X.needsConvertToTspans?0:"0.75em"}).each(function(X){var Z=this,$=k.select(Z),re=X.wrappingNeeded?O:R;X.needsConvertToTspans?s.convertToTspans($,K,re(J,Z,te,K,X)):k.select(Z.parentNode).attr("transform",function(oe){return i(j(oe),M.cellPad)}).attr("text-anchor",function(oe){return{left:"start",center:"middle",right:"end"}[oe.align]})})}function m(V){return V.indexOf(M.wrapSplitCharacter)!==-1}function y(V,te,J){if(o.isArrayOrTypedArray(V)){var K=V[Math.min(te,V.length-1)];return o.isArrayOrTypedArray(K)?K[Math.min(J,K.length-1)]:K}return V}function _(V,te,J){V.transition().ease(M.releaseTransitionEase).duration(M.releaseTransitionDuration).attr("transform",i(te.x,J))}function f(V){return V.type==="cells"}function S(V){return V.type==="header"}function w(V){return(V.rowBlocks.length?V.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(te,J){return te+W(J,1/0)},0)}function E(V,te,J){var K=x(te)[0];if(K!==void 0){var X=K.rowBlocks,Z=K.calcdata,$=N(X,X.length),re=K.calcdata.groupHeight-w(K),oe=Z.scrollY=Math.max(0,Math.min($-re,Z.scrollY)),ie=function(ue,me,be){for(var ge=[],de=0,ve=0;ve<ue.length;ve++){for(var pe=ue[ve],_e=pe.rows,Te=0,le=0;le<_e.length;le++)Te+=_e[le].rowHeight;pe.allRowsHeight=Te,me<de+Te&&me+be>de&&ge.push(ve),de+=Te}return ge}(X,oe,re);ie.length===1&&(ie[0]===X.length-1?ie.unshift(ie[0]-1):ie.push(ie[0]+1)),ie[0]%2&&ie.reverse(),te.each(function(ue,me){ue.page=ie[me],ue.scrollY=oe}),te.attr("transform",function(ue){var me=N(ue.rowBlocks,ue.page)-ue.scrollY;return i(0,me)}),V&&(C(V,J,te,ie,K.prevPages,K,0),C(V,J,te,ie,K.prevPages,K,1),g(J,V))}}function P(V,te,J,K){return function(X){var Z=X.calcdata?X.calcdata:X,$=te.filter(function(ue){return Z.key===ue.key}),re=J||Z.scrollbarState.dragMultiplier,oe=Z.scrollY;Z.scrollY=K===void 0?Z.scrollY+re*k.event.dy:K;var ie=$.selectAll("."+M.cn.yColumn).selectAll("."+M.cn.columnBlock).filter(f);return E(V,ie,$),Z.scrollY===oe}}function C(V,te,J,K,X,Z,$){K[$]!==X[$]&&(clearTimeout(Z.currentRepaint[$]),Z.currentRepaint[$]=setTimeout(function(){var re=J.filter(function(oe,ie){return ie===$&&K[ie]!==X[ie]});p(V,te,re,J),X[$]=K[$]}))}function O(V,te,J,K){return function(){var X=k.select(te.parentNode);X.each(function(Z){var $=Z.fragments;X.selectAll("tspan.line").each(function(de,ve){$[ve].width=this.getComputedTextLength()});var re,oe,ie=$[$.length-1].width,ue=$.slice(0,-1),me=[],be=0,ge=Z.column.columnWidth-2*M.cellPad;for(Z.value="";ue.length;)be+(oe=(re=ue.shift()).width+ie)>ge&&(Z.value+=me.join(M.wrapSpacer)+M.lineBreaker,me=[],be=0),me.push(re.text),be+=oe;be&&(Z.value+=me.join(M.wrapSpacer)),Z.wrapped=!0}),X.selectAll("tspan.line").remove(),v(X.select("."+M.cn.cellText),J,V,K),k.select(te.parentNode.parentNode).call(D)}}function R(V,te,J,K,X){return function(){if(!X.settledY){var Z=k.select(te.parentNode),$=U(X),re=X.key-$.firstRowIndex,oe=$.rows[re].rowHeight,ie=X.cellHeightMayIncrease?te.parentNode.getBoundingClientRect().height+2*M.cellPad:oe,ue=Math.max(ie,oe);ue-$.rows[re].rowHeight&&($.rows[re].rowHeight=ue,V.selectAll("."+M.cn.columnCell).call(D),E(null,V.filter(f),0),g(J,K,!0)),Z.attr("transform",function(){var me=this,be=me.parentNode.getBoundingClientRect(),ge=k.select(me.parentNode).select("."+M.cn.cellRect).node().getBoundingClientRect(),de=me.transform.baseVal.consolidate(),ve=ge.top-be.top+(de?de.matrix.f:M.cellPad);return i(j(X,k.select(me.parentNode).select("."+M.cn.cellTextHolder).node().getBoundingClientRect().width),ve)}),X.settledY=!0}}}function j(V,te){switch(V.align){case"left":default:return M.cellPad;case"right":return V.column.columnWidth-(te||0)-M.cellPad;case"center":return(V.column.columnWidth-(te||0))/2}}function D(V){V.attr("transform",function(te){var J=te.rowBlocks[0].auxiliaryBlocks.reduce(function(X,Z){return X+W(Z,1/0)},0),K=W(U(te),te.key);return i(0,K+J)}).selectAll("."+M.cn.cellRect).attr("height",function(te){return(J=U(te),K=te.key,J.rows[K-J.firstRowIndex]).rowHeight;var J,K})}function N(V,te){for(var J=0,K=te-1;K>=0;K--)J+=F(V[K]);return J}function W(V,te){for(var J=0,K=0;K<V.rows.length&&V.rows[K].rowIndex<te;K++)J+=V.rows[K].rowHeight;return J}function F(V){var te=V.allRowsHeight;if(te!==void 0)return te;for(var J=0,K=0;K<V.rows.length;K++)J+=V.rows[K].rowHeight;return V.allRowsHeight=J,J}function U(V){return V.rowBlocks[V.page]}ee.exports=function(V,te){var J=!V._context.staticPlot,K=V._fullLayout._paper.selectAll("."+M.cn.table).data(te.map(function(pe){var _e=b.unwrap(pe).trace;return r(V,_e)}),b.keyFun);K.exit().remove(),K.enter().append("g").classed(M.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),K.attr("width",function(pe){return pe.width+pe.size.l+pe.size.r}).attr("height",function(pe){return pe.height+pe.size.t+pe.size.b}).attr("transform",function(pe){return i(pe.translateX,pe.translateY)});var X=K.selectAll("."+M.cn.tableControlView).data(b.repeat,b.keyFun),Z=X.enter().append("g").classed(M.cn.tableControlView,!0).style("box-sizing","content-box");if(J){var $="onwheel"in document?"wheel":"mousewheel";Z.on("mousemove",function(pe){X.filter(function(_e){return pe===_e}).call(g,V)}).on($,function(pe){if(!pe.scrollbarState.wheeling){pe.scrollbarState.wheeling=!0;var _e=pe.scrollY+k.event.deltaY;P(V,X,null,_e)(pe)||(k.event.stopPropagation(),k.event.preventDefault()),pe.scrollbarState.wheeling=!1}}).call(g,V,!0)}X.attr("transform",function(pe){return i(pe.size.l,pe.size.t)});var re=X.selectAll("."+M.cn.scrollBackground).data(b.repeat,b.keyFun);re.enter().append("rect").classed(M.cn.scrollBackground,!0).attr("fill","none"),re.attr("width",function(pe){return pe.width}).attr("height",function(pe){return pe.height}),X.each(function(pe){h.setClipUrl(k.select(this),d(V,pe),V)});var oe=X.selectAll("."+M.cn.yColumn).data(function(pe){return pe.columns},b.keyFun);oe.enter().append("g").classed(M.cn.yColumn,!0),oe.exit().remove(),oe.attr("transform",function(pe){return i(pe.x,0)}),J&&oe.call(k.behavior.drag().origin(function(pe){return _(k.select(this),pe,-M.uplift),t(this),pe.calcdata.columnDragInProgress=!0,g(X.filter(function(_e){return pe.calcdata.key===_e.key}),V),pe}).on("drag",function(pe){var _e=k.select(this),Te=function(le){return(pe===le?k.event.x:le.x)+le.columnWidth/2};pe.x=Math.max(-M.overdrag,Math.min(pe.calcdata.width+M.overdrag-pe.columnWidth,k.event.x)),x(oe).filter(function(le){return le.calcdata.key===pe.calcdata.key}).sort(function(le,ae){return Te(le)-Te(ae)}).forEach(function(le,ae){le.xIndex=ae,le.x=pe===le?le.x:le.xScale(le)}),oe.filter(function(le){return pe!==le}).transition().ease(M.transitionEase).duration(M.transitionDuration).attr("transform",function(le){return i(le.x,0)}),_e.call(n).attr("transform",i(pe.x,-M.uplift))}).on("dragend",function(pe){var _e=k.select(this),Te=pe.calcdata;pe.x=pe.xScale(pe),pe.calcdata.columnDragInProgress=!1,_(_e,pe,0),function(le,ae,he){var Se=ae.gdColumnsOriginalOrder;ae.gdColumns.sort(function(ke,Me){return he[Se.indexOf(ke)]-he[Se.indexOf(Me)]}),ae.columnorder=he,le.emit("plotly_restyle")}(V,Te,Te.columns.map(function(le){return le.xIndex}))})),oe.each(function(pe){h.setClipUrl(k.select(this),c(V,pe),V)});var ie=oe.selectAll("."+M.cn.columnBlock).data(a.splitToPanels,b.keyFun);ie.enter().append("g").classed(M.cn.columnBlock,!0).attr("id",function(pe){return pe.key}),ie.style("cursor",function(pe){return pe.dragHandle?"ew-resize":pe.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ue=ie.filter(S),me=ie.filter(f);J&&me.call(k.behavior.drag().origin(function(pe){return k.event.stopPropagation(),pe}).on("drag",P(V,X,-1)).on("dragend",function(){})),p(V,X,ue,ie),p(V,X,me,ie);var be=X.selectAll("."+M.cn.scrollAreaClip).data(b.repeat,b.keyFun);be.enter().append("clipPath").classed(M.cn.scrollAreaClip,!0).attr("id",function(pe){return d(V,pe)});var ge=be.selectAll("."+M.cn.scrollAreaClipRect).data(b.repeat,b.keyFun);ge.enter().append("rect").classed(M.cn.scrollAreaClipRect,!0).attr("x",-M.overdrag).attr("y",-M.uplift).attr("fill","none"),ge.attr("width",function(pe){return pe.width+2*M.overdrag}).attr("height",function(pe){return pe.height+M.uplift}),oe.selectAll("."+M.cn.columnBoundary).data(b.repeat,b.keyFun).enter().append("g").classed(M.cn.columnBoundary,!0);var de=oe.selectAll("."+M.cn.columnBoundaryClippath).data(b.repeat,b.keyFun);de.enter().append("clipPath").classed(M.cn.columnBoundaryClippath,!0),de.attr("id",function(pe){return c(V,pe)});var ve=de.selectAll("."+M.cn.columnBoundaryRect).data(b.repeat,b.keyFun);ve.enter().append("rect").classed(M.cn.columnBoundaryRect,!0).attr("fill","none"),ve.attr("width",function(pe){return pe.columnWidth+2*u(pe)}).attr("height",function(pe){return pe.calcdata.height+2*u(pe)+M.uplift}).attr("x",function(pe){return-u(pe)}).attr("y",function(pe){return-u(pe)}),E(null,me,X)}},40516:function(ee,z,e){"use strict";var M=e(21776).Ks,k=e(21776).Gw,o=e(49084),T=e(86968).u,b=e(74996),h=e(424),s=e(32984),t=e(92880).extendFlat,i=e(98192).c;ee.exports={labels:h.labels,parents:h.parents,values:h.values,branchvalues:h.branchvalues,count:h.count,level:h.level,maxdepth:h.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:t({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:h.marker.colors,pattern:i,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:h.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:t({},b.textfont,{}),editType:"calc"},text:b.text,textinfo:h.textinfo,texttemplate:k({editType:"plot"},{keys:s.eventDataKeys.concat(["label","value"])}),hovertext:b.hovertext,hoverinfo:h.hoverinfo,hovertemplate:M({},{keys:s.eventDataKeys}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:t({},b.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:b.sort,root:h.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},79516:function(ee,z,e){"use strict";var M=e(7316);z.name="treemap",z.plot=function(k,o,T,b){M.plotBasePlot(z.name,k,o,T,b)},z.clean=function(k,o,T,b){M.cleanBasePlot(z.name,k,o,T,b)}},97840:function(ee,z,e){"use strict";var M=e(3776);z.r=function(k,o){return M.calc(k,o)},z.q=function(k){return M._runCrossTraceCalc("treemap",k)}},32984:function(ee){"use strict";ee.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(ee,z,e){"use strict";var M=e(3400),k=e(40516),o=e(76308),T=e(86968).Q,b=e(31508).handleText,h=e(78048).TEXTPAD,s=e(74174).handleMarkerDefaults,t=e(8932),i=t.hasColorscale,n=t.handleDefaults;ee.exports=function(r,a,l,u){function d(_,f){return M.coerce(r,a,k,_,f)}var c=d("labels"),x=d("parents");if(c&&c.length&&x&&x.length){var g=d("values");g&&g.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.packing")==="squarify"&&d("tiling.squarifyratio"),d("tiling.flip"),d("tiling.pad");var p=d("text");d("texttemplate"),a.texttemplate||d("textinfo",M.isArrayOrTypedArray(p)?"text+label":"label"),d("hovertext"),d("hovertemplate");var v=d("pathbar.visible");b(r,a,u,d,"auto",{hasPathbar:v,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var m=a.textposition.indexOf("bottom")!==-1;s(r,a,u,d),(a._hasColorscale=i(r,"marker","colors")||(r.marker||{}).coloraxis)?n(r,a,u,d,{prefix:"marker.",cLetter:"c"}):d("marker.depthfade",!(a.marker.colors||[]).length);var y=2*a.textfont.size;d("marker.pad.t",m?y/4:y),d("marker.pad.l",y/4),d("marker.pad.r",y/4),d("marker.pad.b",m?y:y/4),d("marker.cornerradius"),a._hovered={marker:{line:{width:2,color:o.contrast(u.paper_bgcolor)}}},v&&(d("pathbar.thickness",a.pathbar.textfont.size+2*h),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),T(a,u,d),a._length=null}else a.visible=!1}},95808:function(ee,z,e){"use strict";var M=e(33428),k=e(78176),o=e(82744).clearMinTextSize,T=e(60100).resizeText,b=e(52960);ee.exports=function(h,s,t,i,n){var r,a,l=n.type,u=n.drawDescendants,d=h._fullLayout,c=d["_"+l+"layer"],x=!t;o(l,d),(r=c.selectAll("g.trace."+l).data(s,function(g){return g[0].trace.uid})).enter().append("g").classed("trace",!0).classed(l,!0),r.order(),!d.uniformtext.mode&&k.hasTransition(t)?(i&&(a=i()),M.transition().duration(t.duration).ease(t.easing).each("end",function(){a&&a()}).each("interrupt",function(){a&&a()}).each(function(){c.selectAll("g.trace").each(function(g){b(h,g,this,t,u)})})):(r.each(function(g){b(h,g,this,t,u)}),d.uniformtext.mode&&T(h,c.selectAll(".trace"),l)),x&&r.exit().remove()}},27336:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(72736),b=e(13832),h=e(66192).styleOne,s=e(32984),t=e(78176),i=e(45716),n=!0;ee.exports=function(r,a,l,u,d){var c=d.barDifY,x=d.width,g=d.height,p=d.viewX,v=d.viewY,m=d.pathSlice,y=d.toMoveInsideSlice,_=d.strTransform,f=d.hasTransition,S=d.handleSlicesExit,w=d.makeUpdateSliceInterpolator,E=d.makeUpdateTextInterpolator,P={},C=r._context.staticPlot,O=r._fullLayout,R=a[0],j=R.trace,D=R.hierarchy,N=x/j._entryDepth,W=t.listPath(l.data,"id"),F=b(D.copy(),[x,g],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(F=F.filter(function(V){var te=W.indexOf(V.data.id);return te!==-1&&(V.x0=N*te,V.x1=N*(te+1),V.y0=c,V.y1=c+g,V.onPathbar=!0,!0)})).reverse(),(u=u.data(F,t.getPtId)).enter().append("g").classed("pathbar",!0),S(u,n,P,[x,g],m),u.order();var U=u;f&&(U=U.transition().each("end",function(){var V=M.select(this);t.setSliceCursor(V,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(V){V._x0=p(V.x0),V._x1=p(V.x1),V._y0=v(V.y0),V._y1=v(V.y1),V._hoverX=p(V.x1-Math.min(x,g)/2),V._hoverY=v(V.y1-g/2);var te=M.select(this),J=k.ensureSingle(te,"path","surface",function($){$.style("pointer-events",C?"none":"all")});f?J.transition().attrTween("d",function($){var re=w($,n,P,[x,g]);return function(oe){return m(re(oe))}}):J.attr("d",m),te.call(i,l,r,a,{styleOne:h,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,r,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:r._transitioning}),J.call(h,V,j,r,{hovered:!1}),V._text=(t.getPtLabel(V)||"").split("<br>").join(" ")||"";var K=k.ensureSingle(te,"g","slicetext"),X=k.ensureSingle(K,"text","",function($){$.attr("data-notex",1)}),Z=k.ensureUniformFontSize(r,t.determineTextFont(j,V,O.font,{onPathbar:!0}));X.text(V._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(o.font,Z).call(T.convertToTspans,r),V.textBB=o.bBox(X.node()),V.transform=y(V,{fontSize:Z.size,onPathbar:!0}),V.transform.fontSize=Z.size,f?X.transition().attrTween("transform",function($){var re=E($,n,P,[x,g]);return function(oe){return _(re(oe))}}):X.attr("transform",_(V))})}},76477:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(72736),b=e(13832),h=e(66192).styleOne,s=e(32984),t=e(78176),i=e(45716),n=e(96488).formatSliceLabel,r=!1;ee.exports=function(a,l,u,d,c){var x=c.width,g=c.height,p=c.viewX,v=c.viewY,m=c.pathSlice,y=c.toMoveInsideSlice,_=c.strTransform,f=c.hasTransition,S=c.handleSlicesExit,w=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,P=c.prevEntry,C=a._context.staticPlot,O=a._fullLayout,R=l[0].trace,j=R.textposition.indexOf("left")!==-1,D=R.textposition.indexOf("right")!==-1,N=R.textposition.indexOf("bottom")!==-1,W=!N&&!R.marker.pad.t||N&&!R.marker.pad.b,F=b(u,[x,g],{packing:R.tiling.packing,squarifyratio:R.tiling.squarifyratio,flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1,pad:{inner:R.tiling.pad,top:R.marker.pad.t,left:R.marker.pad.l,right:R.marker.pad.r,bottom:R.marker.pad.b}}).descendants(),U=1/0,V=-1/0;F.forEach(function(Z){var $=Z.depth;$>=R._maxDepth?(Z.x0=Z.x1=(Z.x0+Z.x1)/2,Z.y0=Z.y1=(Z.y0+Z.y1)/2):(U=Math.min(U,$),V=Math.max(V,$))}),d=d.data(F,t.getPtId),R._maxVisibleLayers=isFinite(V)?V-U+1:0,d.enter().append("g").classed("slice",!0),S(d,r,{},[x,g],m),d.order();var te=null;if(f&&P){var J=t.getPtId(P);d.each(function(Z){te===null&&t.getPtId(Z)===J&&(te={x0:Z.x0,x1:Z.x1,y0:Z.y0,y1:Z.y1})})}var K=function(){return te||{x0:0,x1:x,y0:0,y1:g}},X=d;return f&&(X=X.transition().each("end",function(){var Z=M.select(this);t.setSliceCursor(Z,a,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),X.each(function(Z){var $=t.isHeader(Z,R);Z._x0=p(Z.x0),Z._x1=p(Z.x1),Z._y0=v(Z.y0),Z._y1=v(Z.y1),Z._hoverX=p(Z.x1-R.marker.pad.r),Z._hoverY=v(N?Z.y1-R.marker.pad.b/2:Z.y0+R.marker.pad.t/2);var re=M.select(this),oe=k.ensureSingle(re,"path","surface",function(de){de.style("pointer-events",C?"none":"all")});f?oe.transition().attrTween("d",function(de){var ve=w(de,r,K(),[x,g]);return function(pe){return m(ve(pe))}}):oe.attr("d",m),re.call(i,u,a,l,{styleOne:h,eventDataKeys:s.eventDataKeys,transitionTime:s.CLICK_TRANSITION_TIME,transitionEasing:s.CLICK_TRANSITION_EASING}).call(t.setSliceCursor,a,{isTransitioning:a._transitioning}),oe.call(h,Z,R,a,{hovered:!1}),Z.x0===Z.x1||Z.y0===Z.y1?Z._text="":Z._text=$?W?"":t.getPtLabel(Z)||"":n(Z,u,R,l,O)||"";var ie=k.ensureSingle(re,"g","slicetext"),ue=k.ensureSingle(ie,"text","",function(de){de.attr("data-notex",1)}),me=k.ensureUniformFontSize(a,t.determineTextFont(R,Z,O.font)),be=Z._text||" ",ge=$&&be.indexOf("<br>")===-1;ue.text(be).classed("slicetext",!0).attr("text-anchor",D?"end":j||ge?"start":"middle").call(o.font,me).call(T.convertToTspans,a),Z.textBB=o.bBox(ue.node()),Z.transform=y(Z,{fontSize:me.size,isHeader:$}),Z.transform.fontSize=me.size,f?ue.transition().attrTween("transform",function(de){var ve=E(de,r,K(),[x,g]);return function(pe){return _(ve(pe))}}):ue.attr("transform",_(Z))}),te}},83024:function(ee){"use strict";ee.exports=function z(e,M,k){var o;k.swapXY&&(o=e.x0,e.x0=e.y0,e.y0=o,o=e.x1,e.x1=e.y1,e.y1=o),k.flipX&&(o=e.x0,e.x0=M[0]-e.x1,e.x1=M[0]-o),k.flipY&&(o=e.y0,e.y0=M[1]-e.y1,e.y1=M[1]-o);var T=e.children;if(T)for(var b=0;b<T.length;b++)z(T[b],M,k)}},31991:function(ee,z,e){"use strict";ee.exports={moduleType:"trace",name:"treemap",basePlotModule:e(79516),categories:[],animatable:!0,attributes:e(40516),layoutAttributes:e(45392),supplyDefaults:e(34092),supplyLayoutDefaults:e(77480),calc:e(97840).r,crossTraceCalc:e(97840).q,plot:e(53264),style:e(66192).style,colorbar:e(5528),meta:{}}},45392:function(ee){"use strict";ee.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(ee,z,e){"use strict";var M=e(3400),k=e(45392);ee.exports=function(o,T){function b(h,s){return M.coerce(o,T,k,h,s)}b("treemapcolorway",T.colorway),b("extendtreemapcolors")}},13832:function(ee,z,e){"use strict";var M=e(74148),k=e(83024);ee.exports=function(o,T,b){var h,s=b.flipX,t=b.flipY,i=b.packing==="dice-slice",n=b.pad[t?"bottom":"top"],r=b.pad[s?"right":"left"],a=b.pad[s?"left":"right"],l=b.pad[t?"top":"bottom"];i&&(h=r,r=n,n=h,h=a,a=l,l=h);var u=M.treemap().tile(function(d,c){switch(d){case"squarify":return M.treemapSquarify.ratio(c);case"binary":return M.treemapBinary;case"dice":return M.treemapDice;case"slice":return M.treemapSlice;default:return M.treemapSliceDice}}(b.packing,b.squarifyratio)).paddingInner(b.pad.inner).paddingLeft(r).paddingRight(a).paddingTop(n).paddingBottom(l).size(i?[T[1],T[0]]:T)(o);return(i||s||t)&&k(u,T,{swapXY:i,flipX:s,flipY:t}),u}},53264:function(ee,z,e){"use strict";var M=e(95808),k=e(76477);ee.exports=function(o,T,b,h){return M(o,T,b,h,{type:"treemap",drawDescendants:k})}},52960:function(ee,z,e){"use strict";var M=e(33428),k=e(67756).qy,o=e(78176),T=e(3400),b=e(78048).TEXTPAD,h=e(98184).toMoveInsideBar,s=e(82744).recordMinTextSize,t=e(32984),i=e(27336);function n(r){return o.isHierarchyRoot(r)?"":o.getPtId(r)}ee.exports=function(r,a,l,u,d){var c=r._fullLayout,x=a[0],g=x.trace,p=g.type==="icicle",v=x.hierarchy,m=o.findEntryWithLevel(v,g.level),y=M.select(l),_=y.selectAll("g.pathbar"),f=y.selectAll("g.slice");if(!m)return _.remove(),void f.remove();var S=o.isHierarchyRoot(m),w=!c.uniformtext.mode&&o.hasTransition(u),E=o.getMaxDepth(g),P=c._size,C=g.domain,O=P.w*(C.x[1]-C.x[0]),R=P.h*(C.y[1]-C.y[0]),j=O,D=g.pathbar.thickness,N=g.marker.line.width+t.gapWithPathbar,W=g.pathbar.visible?g.pathbar.side.indexOf("bottom")>-1?R+N:-(D+N):0,F={x0:j,x1:j,y0:W,y1:W+D},U=function(we,Oe,ze){var Pe=g.tiling.pad,Ue=function(tt){return tt-Pe<=Oe.x0},Ve=function(tt){return tt+Pe>=Oe.x1},Ze=function(tt){return tt-Pe<=Oe.y0},it=function(tt){return tt+Pe>=Oe.y1};return we.x0===Oe.x0&&we.x1===Oe.x1&&we.y0===Oe.y0&&we.y1===Oe.y1?{x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1}:{x0:Ue(we.x0-Pe)?0:Ve(we.x0-Pe)?ze[0]:we.x0,x1:Ue(we.x1+Pe)?0:Ve(we.x1+Pe)?ze[0]:we.x1,y0:Ze(we.y0-Pe)?0:it(we.y0-Pe)?ze[1]:we.y0,y1:Ze(we.y1+Pe)?0:it(we.y1+Pe)?ze[1]:we.y1}},V=null,te={},J={},K=null,X=function(we,Oe){return Oe?te[n(we)]:J[n(we)]};x.hasMultipleRoots&&S&&E++,g._maxDepth=E,g._backgroundColor=c.paper_bgcolor,g._entryDepth=m.data.depth,g._atRootLevel=S;var Z=-O/2+P.l+P.w*(C.x[1]+C.x[0])/2,$=-R/2+P.t+P.h*(1-(C.y[1]+C.y[0])/2),re=function(we){return Z+we},oe=function(we){return $+we},ie=oe(0),ue=re(0),me=function(we){return ue+we},be=function(we){return ie+we};function ge(we,Oe){return we+","+Oe}var de=me(0),ve=function(we){we.x=Math.max(de,we.x)},pe=g.pathbar.edgeshape,_e=g[p?"tiling":"marker"].pad,Te=function(we){return g.textposition.indexOf(we)!==-1},le=Te("top"),ae=Te("left"),he=Te("right"),Se=Te("bottom"),ke=function(we,Oe){var ze=we.x0,Pe=we.x1,Ue=we.y0,Ve=we.y1,Ze=we.textBB,it=le||Oe.isHeader&&!Se?"start":Se?"end":"middle",tt=Te("right"),dt=Te("left")||Oe.onPathbar?-1:tt?1:0;if(Oe.isHeader){if((ze+=(p?_e:_e.l)-b)>=(Pe-=(p?_e:_e.r)-b)){var yt=(ze+Pe)/2;ze=yt,Pe=yt}var vt;Se?Ue<(vt=Ve-(p?_e:_e.b))&&vt<Ve&&(Ue=vt):Ue<(vt=Ue+(p?_e:_e.t))&&vt<Ve&&(Ve=vt)}var et=h(ze,Pe,Ue,Ve,Ze,{isHorizontal:!1,constrained:!0,angle:0,anchor:it,leftToRight:dt});return et.fontSize=Oe.fontSize,et.targetX=re(et.targetX),et.targetY=oe(et.targetY),isNaN(et.targetX)||isNaN(et.targetY)?{}:(ze!==Pe&&Ue!==Ve&&s(g.type,et,c),{scale:et.scale,rotate:et.rotate,textX:et.textX,textY:et.textY,anchorX:et.anchorX,anchorY:et.anchorY,targetX:et.targetX,targetY:et.targetY})},Me=function(we,Oe){for(var ze,Pe=0,Ue=we;!ze&&Pe<E;)Pe++,(Ue=Ue.parent)?ze=X(Ue,Oe):Pe=E;return ze||{}},Ee=function(we,Oe,ze,Pe,Ue){var Ve,Ze=X(we,Oe);if(Ze)Ve=Ze;else if(Oe)Ve=F;else if(V)if(we.parent){var it=K||ze;it&&!Oe?Ve=U(we,it,Pe):(Ve={},T.extendFlat(Ve,Me(we,Oe)))}else Ve=T.extendFlat({},we),p&&(Ue.orientation==="h"?Ue.flipX?Ve.x0=we.x1:Ve.x1=0:Ue.flipY?Ve.y0=we.y1:Ve.y1=0);else Ve={};return k(Ve,{x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1})},De=function(we,Oe,ze,Pe){var Ue=X(we,Oe),Ve={},Ze=function(tt,dt,yt,vt){if(dt)return te[n(v)]||F;var et=J[g.level]||yt;return function(Qe){return Qe.data.depth-m.data.depth<E}(tt)?U(tt,et,vt):{}}(we,Oe,ze,Pe);T.extendFlat(Ve,{transform:ke({x0:Ze.x0,x1:Ze.x1,y0:Ze.y0,y1:Ze.y1,textBB:we.textBB,_text:we._text},{isHeader:o.isHeader(we,g)})}),Ue?Ve=Ue:we.parent&&T.extendFlat(Ve,Me(we,Oe));var it=we.transform;return we.x0!==we.x1&&we.y0!==we.y1&&s(g.type,it,c),k(Ve,{transform:{scale:it.scale,rotate:it.rotate,textX:it.textX,textY:it.textY,anchorX:it.anchorX,anchorY:it.anchorY,targetX:it.targetX,targetY:it.targetY}})},fe=function(we,Oe,ze,Pe,Ue){var Ve=Pe[0],Ze=Pe[1];w?we.exit().transition().each(function(){var it=M.select(this);it.select("path.surface").transition().attrTween("d",function(tt){var dt=function(yt,vt,et,Qe){var wt,It=X(yt,vt);if(vt)wt=F;else{var Dt=X(m,vt);wt=Dt?U(yt,Dt,Qe):{}}return k(It,wt)}(tt,Oe,0,[Ve,Ze]);return function(yt){return Ue(dt(yt))}}),it.select("g.slicetext").attr("opacity",0)}).remove():we.exit().remove()},xe=function(we){var Oe=we.transform;return we.x0!==we.x1&&we.y0!==we.y1&&s(g.type,Oe,c),T.getTextTransform({textX:Oe.textX,textY:Oe.textY,anchorX:Oe.anchorX,anchorY:Oe.anchorY,targetX:Oe.targetX,targetY:Oe.targetY,scale:Oe.scale,rotate:Oe.rotate})};w&&(_.each(function(we){te[n(we)]={x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1},we.transform&&(te[n(we)].transform={textX:we.transform.textX,textY:we.transform.textY,anchorX:we.transform.anchorX,anchorY:we.transform.anchorY,targetX:we.transform.targetX,targetY:we.transform.targetY,scale:we.transform.scale,rotate:we.transform.rotate})}),f.each(function(we){J[n(we)]={x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1},we.transform&&(J[n(we)].transform={textX:we.transform.textX,textY:we.transform.textY,anchorX:we.transform.anchorX,anchorY:we.transform.anchorY,targetX:we.transform.targetX,targetY:we.transform.targetY,scale:we.transform.scale,rotate:we.transform.rotate}),!V&&o.isEntry(we)&&(V=we)})),K=d(r,a,m,f,{width:O,height:R,viewX:re,viewY:oe,pathSlice:function(we){var Oe=re(we.x0),ze=re(we.x1),Pe=oe(we.y0),Ue=oe(we.y1),Ve=ze-Oe,Ze=Ue-Pe;if(!Ve||!Ze)return"";var it=g.marker.cornerradius||0,tt=Math.min(it,Ve/2,Ze/2);tt&&we.data&&we.data.data&&we.data.data.label&&(le&&(tt=Math.min(tt,_e.t)),ae&&(tt=Math.min(tt,_e.l)),he&&(tt=Math.min(tt,_e.r)),Se&&(tt=Math.min(tt,_e.b)));var dt=function(yt,vt){return tt?"a"+ge(tt,tt)+" 0 0 1 "+ge(yt,vt):""};return"M"+ge(Oe,Pe+tt)+dt(tt,-tt)+"L"+ge(ze-tt,Pe)+dt(tt,tt)+"L"+ge(ze,Ue-tt)+dt(-tt,tt)+"L"+ge(Oe+tt,Ue)+dt(-tt,-tt)+"Z"},toMoveInsideSlice:ke,prevEntry:V,makeUpdateSliceInterpolator:Ee,makeUpdateTextInterpolator:De,handleSlicesExit:fe,hasTransition:w,strTransform:xe}),g.pathbar.visible?i(r,a,m,_,{barDifY:W,width:j,height:D,viewX:me,viewY:be,pathSlice:function(we){var Oe=me(Math.max(Math.min(we.x0,we.x0),0)),ze=me(Math.min(Math.max(we.x1,we.x1),j)),Pe=be(we.y0),Ue=be(we.y1),Ve=D/2,Ze={},it={};Ze.x=Oe,it.x=ze,Ze.y=it.y=(Pe+Ue)/2;var tt={x:Oe,y:Pe},dt={x:ze,y:Pe},yt={x:ze,y:Ue},vt={x:Oe,y:Ue};return pe===">"?(tt.x-=Ve,dt.x-=Ve,yt.x-=Ve,vt.x-=Ve):pe==="/"?(yt.x-=Ve,vt.x-=Ve,Ze.x-=Ve/2,it.x-=Ve/2):pe==="\\"?(tt.x-=Ve,dt.x-=Ve,Ze.x-=Ve/2,it.x-=Ve/2):pe==="<"&&(Ze.x-=Ve,it.x-=Ve),ve(tt),ve(vt),ve(Ze),ve(dt),ve(yt),ve(it),"M"+ge(tt.x,tt.y)+"L"+ge(dt.x,dt.y)+"L"+ge(it.x,it.y)+"L"+ge(yt.x,yt.y)+"L"+ge(vt.x,vt.y)+"L"+ge(Ze.x,Ze.y)+"Z"},toMoveInsideSlice:ke,makeUpdateSliceInterpolator:Ee,makeUpdateTextInterpolator:De,handleSlicesExit:fe,hasTransition:w,strTransform:xe}):_.remove()}},66192:function(ee,z,e){"use strict";var M=e(33428),k=e(76308),o=e(3400),T=e(78176),b=e(82744).resizeText,h=e(60404);function s(t,i,n,r,a){var l,u,d=(a||{}).hovered,c=i.data.data,x=c.i,g=c.color,p=T.isHierarchyRoot(i),v=1;if(d)l=n._hovered.marker.line.color,u=n._hovered.marker.line.width;else if(p&&g===n.root.color)v=100,l="rgba(0,0,0,0)",u=0;else if(l=o.castOption(n,x,"marker.line.color")||k.defaultLine,u=o.castOption(n,x,"marker.line.width")||0,!n._hasColorscale&&!i.onPathbar){var m=n.marker.depthfade;if(m){var y,_=k.combine(k.addOpacity(n._backgroundColor,.75),g);if(m===!0){var f=T.getMaxDepth(n);y=isFinite(f)?T.isLeaf(i)?0:n._maxVisibleLayers-(i.data.depth-n._entryDepth):i.data.height+1}else y=i.data.depth-n._entryDepth,n._atRootLevel||y++;if(y>0)for(var S=0;S<y;S++){var w=.5*S/y;g=k.combine(k.addOpacity(_,w),g)}}}t.call(h,i,n,r,g).style("stroke-width",u).call(k.stroke,l).style("opacity",v)}ee.exports={style:function(t){var i=t._fullLayout._treemaplayer.selectAll(".trace");b(t,i,"treemap"),i.each(function(n){var r=M.select(this),a=n[0].trace;r.style("opacity",a.opacity),r.selectAll("path.surface").each(function(l){M.select(this).call(s,l,a,t,{hovered:!1})})})},styleOne:s}},13988:function(ee,z,e){"use strict";var M=e(63188),k=e(92880).extendFlat,o=e(29736).axisHoverFormat;ee.exports={y:M.y,x:M.x,x0:M.x0,y0:M.y0,xhoverformat:o("x"),yhoverformat:o("y"),name:k({},M.name,{}),orientation:k({},M.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,points:k({},M.boxpoints,{}),jitter:k({},M.jitter,{}),pointpos:k({},M.pointpos,{}),width:k({},M.width,{}),marker:M.marker,text:M.text,hovertext:M.hovertext,hovertemplate:M.hovertemplate,quartilemethod:M.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},67064:function(ee,z,e){"use strict";var M=e(3400),k=e(54460),o=e(62555),T=e(63800),b=e(39032).BADNUM;function h(t,i,n){var r=i.max-i.min;if(!r)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,r/1e4);var a=n.length,l=M.stdev(n,a-1,i.mean);return Math.max(function(u,d,c){return 1.059*Math.min(d,c/1.349)*Math.pow(u,-.2)}(a,l,i.q3-i.q1),r/100)}function s(t,i,n,r){var a,l=t.spanmode,u=t.span||[],d=[i.min,i.max],c=[i.min-2*r,i.max+2*r];function x(p){var v=u[p],m=n.type==="multicategory"?n.r2c(v):n.d2c(v,0,t[i.valLetter+"calendar"]);return m===b?c[p]:m}var g={type:"linear",range:a=l==="soft"?c:l==="hard"?d:[x(0),x(1)]};return k.setConvert(g),g.cleanRange(),a}ee.exports=function(t,i){var n=o(t,i);if(n[0].t.empty)return n;for(var r=t._fullLayout,a=k.getFromId(t,i[i.orientation==="h"?"xaxis":"yaxis"]),l=1/0,u=-1/0,d=0,c=0,x=0;x<n.length;x++){var g=n[x],p=g.pts.map(T.extractVal),v=g.bandwidth=h(i,g,p),m=g.span=s(i,g,a,v);if(g.min===g.max&&v===0)m=g.span=[g.min,g.max],g.density=[{v:1,t:m[0]}],g.bandwidth=v,d=Math.max(d,1);else{var y=m[1]-m[0],_=Math.ceil(y/(v/3)),f=y/_;if(!isFinite(f)||!isFinite(_))return M.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var S=T.makeKDE(g,i,p);g.density=new Array(_);for(var w=0,E=m[0];E<m[1]+f/2;w++,E+=f){var P=S(E);g.density[w]={v:P,t:E},d=Math.max(d,P)}}c=Math.max(c,p.length),l=Math.min(l,m[0]),u=Math.max(u,m[1])}var C=k.findExtremes(a,[l,u],{padded:!0});if(i._extremes[a._id]=C,i.width)n[0].t.maxKDE=d;else{var O=r._violinScaleGroupStats,R=i.scalegroup,j=O[R];j?(j.maxKDE=Math.max(j.maxKDE,d),j.maxCount=Math.max(j.maxCount,c)):O[R]={maxKDE:d,maxCount:c}}return n[0].t.labels.kde=M._(t,"kde:"),n}},14348:function(ee,z,e){"use strict";var M=e(96404).setPositionOffset,k=["v","h"];ee.exports=function(o,T){for(var b=o.calcdata,h=T.xaxis,s=T.yaxis,t=0;t<k.length;t++){for(var i=k[t],n=i==="h"?s:h,r=[],a=0;a<b.length;a++){var l=b[a],u=l[0].t,d=l[0].trace;d.visible!==!0||d.type!=="violin"||u.empty||d.orientation!==i||d.xaxis!==h._id||d.yaxis!==s._id||r.push(a)}M("violin",o,r,n)}}},36240:function(ee,z,e){"use strict";var M=e(3400),k=e(76308),o=e(90624),T=e(13988);ee.exports=function(b,h,s,t){function i(y,_){return M.coerce(b,h,T,y,_)}function n(y,_){return M.coerce2(b,h,T,y,_)}if(o.handleSampleDefaults(b,h,i,t),h.visible!==!1){i("bandwidth"),i("side"),i("width")||(i("scalegroup",h.name),i("scalemode"));var r,a=i("span");Array.isArray(a)&&(r="manual"),i("spanmode",r);var l=i("line.color",(b.marker||{}).color||s),u=i("line.width"),d=i("fillcolor",k.addOpacity(h.line.color,.5));o.handlePointsDefaults(b,h,i,{prefix:""});var c=n("box.width"),x=n("box.fillcolor",d),g=n("box.line.color",l),p=n("box.line.width",u);i("box.visible",Boolean(c||x||g||p))||(h.box={visible:!1});var v=n("meanline.color",l),m=n("meanline.width",u);i("meanline.visible",Boolean(v||m))||(h.meanline={visible:!1}),i("quartilemethod")}}},63800:function(ee,z,e){"use strict";var M=e(3400),k=function(o){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*o*o)};z.makeKDE=function(o,T,b){var h=b.length,s=k,t=o.bandwidth,i=1/(h*t);return function(n){for(var r=0,a=0;a<h;a++)r+=s((n-b[a])/t);return i*r}},z.getPositionOnKdePath=function(o,T,b){var h,s;T.orientation==="h"?(h="y",s="x"):(h="x",s="y");var t=M.findPointOnPath(o.path,b,s,{pathLength:o.pathLength}),i=o.posCenterPx,n=t[h];return[n,T.side==="both"?2*i-n:i]},z.getKdeValue=function(o,T,b){var h=o.pts.map(z.extractVal);return z.makeKDE(o,T,h)(b)/o.posDensityScale},z.extractVal=function(o){return o.v}},78e3:function(ee,z,e){"use strict";var M=e(76308),k=e(3400),o=e(54460),T=e(27576),b=e(63800);ee.exports=function(h,s,t,i,n){n||(n={});var r,a,l=n.hoverLayer,u=h.cd,d=u[0].trace,c=d.hoveron,x=c.indexOf("violins")!==-1,g=c.indexOf("kde")!==-1,p=[];if(x||g){var v=T.hoverOnBoxes(h,s,t,i);if(g&&v.length>0){var m,y,_,f,S,w=h.xa,E=h.ya;d.orientation==="h"?(S=s,m="y",_=E,y="x",f=w):(S=t,m="x",_=w,y="y",f=E);var P=u[h.index];if(S>=P.span[0]&&S<=P.span[1]){var C=k.extendFlat({},h),O=f.c2p(S,!0),R=b.getKdeValue(P,d,S),j=b.getPositionOnKdePath(P,d,O),D=_._offset,N=_._length;C[m+"0"]=j[0],C[m+"1"]=j[1],C[y+"0"]=C[y+"1"]=O,C[y+"Label"]=y+": "+o.hoverLabelText(f,S,d[y+"hoverformat"])+", "+u[0].t.labels.kde+" "+R.toFixed(3);for(var W=0,F=0;F<v.length;F++)if(v[F].attr==="med"){W=F;break}C.spikeDistance=v[W].spikeDistance;var U=m+"Spike";C[U]=v[W][U],v[W].spikeDistance=void 0,v[W][U]=void 0,C.hovertemplate=!1,p.push(C),(a={})[m+"1"]=k.constrain(D+j[0],D,D+N),a[m+"2"]=k.constrain(D+j[1],D,D+N),a[y+"1"]=a[y+"2"]=f._offset+O}}x&&(p=p.concat(v))}c.indexOf("points")!==-1&&(r=T.hoverOnPoints(h,s,t));var V=l.selectAll(".violinline-"+d.uid).data(a?[0]:[]);return V.enter().append("line").classed("violinline-"+d.uid,!0).attr("stroke-width",1.5),V.exit().remove(),V.attr(a).call(M.stroke,h.color),i==="closest"?r?[r]:p:(r&&p.push(r),p)}},22869:function(ee,z,e){"use strict";ee.exports={attributes:e(13988),layoutAttributes:e(98228),supplyDefaults:e(36240),crossTraceDefaults:e(90624).crossTraceDefaults,supplyLayoutDefaults:e(8939),calc:e(67064),crossTraceCalc:e(14348),plot:e(5140),style:e(95908),styleOnSelect:e(49224).styleOnSelect,hoverPoints:e(78e3),selectPoints:e(8264),moduleType:"trace",name:"violin",basePlotModule:e(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(ee,z,e){"use strict";var M=e(16560),k=e(3400).extendFlat;ee.exports={violinmode:k({},M.boxmode,{}),violingap:k({},M.boxgap,{}),violingroupgap:k({},M.boxgroupgap,{})}},8939:function(ee,z,e){"use strict";var M=e(3400),k=e(98228),o=e(68832);ee.exports=function(T,b,h){o._supply(T,b,h,function(s,t){return M.coerce(T,b,k,s,t)},"violin")}},5140:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(18728),b=e(52340),h=e(63800);ee.exports=function(s,t,i,n){var r=s._context.staticPlot,a=s._fullLayout,l=t.xaxis,u=t.yaxis;function d(c,x){var g=b(c,{xaxis:l,yaxis:u,trace:x,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return o.smoothopen(g[0],1)}k.makeTraceGroups(n,i,"trace violins").each(function(c){var x=M.select(this),g=c[0],p=g.t,v=g.trace;if(v.visible!==!0||p.empty)x.remove();else{var m=p.bPos,y=p.bdPos,_=t[p.valLetter+"axis"],f=t[p.posLetter+"axis"],S=v.side==="both",w=S||v.side==="positive",E=S||v.side==="negative",P=x.selectAll("path.violin").data(k.identity);P.enter().append("path").style("vector-effect",r?"none":"non-scaling-stroke").attr("class","violin"),P.exit().remove(),P.each(function(F){var U,V,te,J,K,X,Z,$,re=M.select(this),oe=F.density,ie=oe.length,ue=f.c2l(F.pos+m,!0),me=f.l2p(ue);if(v.width)U=p.maxKDE/y;else{var be=a._violinScaleGroupStats[v.scalegroup];U=v.scalemode==="count"?be.maxKDE/y*(be.maxCount/F.pts.length):be.maxKDE/y}if(w){for(Z=new Array(ie),K=0;K<ie;K++)($=Z[K]={})[p.posLetter]=ue+oe[K].v/U,$[p.valLetter]=_.c2l(oe[K].t,!0);V=d(Z,v)}if(E){for(Z=new Array(ie),X=0,K=ie-1;X<ie;X++,K--)($=Z[X]={})[p.posLetter]=ue-oe[K].v/U,$[p.valLetter]=_.c2l(oe[K].t,!0);te=d(Z,v)}if(S)J=V+"L"+te.substr(1)+"Z";else{var ge=[me,_.c2p(oe[0].t)],de=[me,_.c2p(oe[ie-1].t)];v.orientation==="h"&&(ge.reverse(),de.reverse()),J=w?"M"+ge+"L"+V.substr(1)+"L"+de:"M"+de+"L"+te.substr(1)+"L"+ge}re.attr("d",J),F.posCenterPx=me,F.posDensityScale=U*y,F.path=re.node(),F.pathLength=F.path.getTotalLength()/(S?2:1)});var C,O,R,j=v.box,D=j.width,N=(j.line||{}).width;S?(C=y*D,O=0):w?(C=[0,y*D/2],O=N*{x:1,y:-1}[p.posLetter]):(C=[y*D/2,0],O=N*{x:-1,y:1}[p.posLetter]),T.plotBoxAndWhiskers(x,{pos:f,val:_},v,{bPos:m,bdPos:C,bPosPxOffset:O}),T.plotBoxMean(x,{pos:f,val:_},v,{bPos:m,bdPos:C,bPosPxOffset:O}),!v.box.visible&&v.meanline.visible&&(R=k.identity);var W=x.selectAll("path.meanline").data(R||[]);W.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",r?"none":"non-scaling-stroke"),W.exit().remove(),W.each(function(F){var U=_.c2p(F.mean,!0),V=h.getPositionOnKdePath(F,v,U);M.select(this).attr("d",v.orientation==="h"?"M"+U+","+V[0]+"V"+V[1]:"M"+V[0]+","+U+"H"+V[1])}),T.plotPoints(x,{x:l,y:u},v,p)}})}},95908:function(ee,z,e){"use strict";var M=e(33428),k=e(76308),o=e(49224).stylePoints;ee.exports=function(T){var b=M.select(T).selectAll("g.trace.violins");b.style("opacity",function(h){return h[0].trace.opacity}),b.each(function(h){var s=h[0].trace,t=M.select(this),i=s.box||{},n=i.line||{},r=s.meanline||{},a=r.width;t.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(k.stroke,s.line.color).call(k.fill,s.fillcolor),t.selectAll("path.box").style("stroke-width",n.width+"px").call(k.stroke,n.color).call(k.fill,i.fillcolor);var l={"stroke-width":a+"px","stroke-dasharray":2*a+"px,"+a+"px"};t.selectAll("path.mean").style(l).call(k.stroke,r.color),t.selectAll("path.meanline").style(l).call(k.stroke,r.color),o(t,s,T)})}},58168:function(ee,z,e){"use strict";var M=e(49084),k=e(50048),o=e(16716),T=e(45464),b=e(92880).extendFlat,h=e(67824).overrideAll,s=ee.exports=h(b({x:k.x,y:k.y,z:k.z,value:k.value,isomin:k.isomin,isomax:k.isomax,surface:k.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:k.slices,caps:k.caps,text:k.text,hovertext:k.hovertext,xhoverformat:k.xhoverformat,yhoverformat:k.yhoverformat,zhoverformat:k.zhoverformat,valuehoverformat:k.valuehoverformat,hovertemplate:k.hovertemplate},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:k.colorbar,opacity:k.opacity,opacityscale:o.opacityscale,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:b({},T.hoverinfo),showlegend:b({},T.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},91976:function(ee,z,e){"use strict";var M=e(67792).gl_mesh3d,k=e(33040).parseColorScale,o=e(3400).isArrayOrTypedArray,T=e(43080),b=e(8932).extractOpts,h=e(52094),s=e(31460).findNearestOnAxis,t=e(31460).generateIsoMeshes;function i(r,a,l){this.scene=r,this.uid=l,this.mesh=a,this.name="",this.data=null,this.showContour=!1}var n=i.prototype;n.handlePick=function(r){if(r.object===this.mesh){var a=r.data.index,l=this.data._meshX[a],u=this.data._meshY[a],d=this.data._meshZ[a],c=this.data._Ys.length,x=this.data._Zs.length,g=s(l,this.data._Xs).id,p=s(u,this.data._Ys).id,v=s(d,this.data._Zs).id,m=r.index=v+x*p+x*c*g;r.traceCoordinate=[this.data._meshX[m],this.data._meshY[m],this.data._meshZ[m],this.data._value[m]];var y=this.data.hovertext||this.data.text;return o(y)&&y[m]!==void 0?r.textLabel=y[m]:y&&(r.textLabel=y),!0}},n.update=function(r){var a=this.scene,l=a.fullSceneLayout;function u(x,g,p,v){return g.map(function(m){return x.d2l(m,0,v)*p})}this.data=t(r);var d={positions:h(u(l.xaxis,r._meshX,a.dataScale[0],r.xcalendar),u(l.yaxis,r._meshY,a.dataScale[1],r.ycalendar),u(l.zaxis,r._meshZ,a.dataScale[2],r.zcalendar)),cells:h(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:T(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},c=b(r);d.vertexIntensity=r._meshIntensity,d.vertexIntensityBounds=[c.min,c.max],d.colormap=k(r),this.mesh.update(d)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ee.exports=function(r,a){var l=r.glplot.gl,u=M({gl:l}),d=new i(r,u,a.uid);return u._trace=d,d.update(a),r.glplot.add(u),d}},12448:function(ee,z,e){"use strict";var M=e(3400),k=e(58168),o=e(70548).supplyIsoDefaults,T=e(60192).opacityscaleDefaults;ee.exports=function(b,h,s,t){function i(n,r){return M.coerce(b,h,k,n,r)}o(b,h,s,t,i),T(b,h,t,i)}},67776:function(ee,z,e){"use strict";ee.exports={attributes:e(58168),supplyDefaults:e(12448),calc:e(62624),colorbar:{min:"cmin",max:"cmax"},plot:e(91976),moduleType:"trace",name:"volume",basePlotModule:e(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(ee,z,e){"use strict";var M=e(20832),k=e(52904).line,o=e(45464),T=e(29736).axisHoverFormat,b=e(21776).Ks,h=e(21776).Gw,s=e(10213),t=e(92880).extendFlat,i=e(76308);function n(r){return{marker:{color:t({},M.marker.color,{arrayOk:!1,editType:"style"}),line:{color:t({},M.marker.line.color,{arrayOk:!1,editType:"style"}),width:t({},M.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}ee.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:M.hovertext,hovertemplate:b({},{keys:s.eventDataKeys}),hoverinfo:t({},o.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:h({editType:"plot"},{keys:s.eventDataKeys.concat(["label"])}),text:M.text,textposition:M.textposition,insidetextanchor:M.insidetextanchor,textangle:M.textangle,textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:M.orientation,offset:M.offset,width:M.width,increasing:n(),decreasing:n(),totals:n(),connector:{line:{color:t({},k.color,{dflt:i.defaultLine}),width:t({},k.width,{editType:"plot"}),dash:k.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup}},73540:function(ee,z,e){"use strict";var M=e(54460),k=e(1220),o=e(3400).mergeArray,T=e(4500),b=e(39032).BADNUM;function h(t){return t==="a"||t==="absolute"}function s(t){return t==="t"||t==="total"}ee.exports=function(t,i){var n,r,a,l,u,d,c=M.getFromId(t,i.xaxis||"x"),x=M.getFromId(t,i.yaxis||"y");i.orientation==="h"?(n=c.makeCalcdata(i,"x"),a=x.makeCalcdata(i,"y"),l=k(i,x,"y",a),u=!!i.yperiodalignment,d="y"):(n=x.makeCalcdata(i,"y"),a=c.makeCalcdata(i,"x"),l=k(i,c,"x",a),u=!!i.xperiodalignment,d="x"),r=l.vals;for(var g,p=Math.min(r.length,n.length),v=new Array(p),m=0,y=!1,_=0;_<p;_++){var f=n[_]||0,S=!1;(n[_]!==b||s(i.measure[_])||h(i.measure[_]))&&_+1<p&&(n[_+1]!==b||s(i.measure[_+1])||h(i.measure[_+1]))&&(S=!0);var w=v[_]={i:_,p:r[_],s:f,rawS:f,cNext:S};h(i.measure[_])?(m=w.s,w.isSum=!0,w.dir="totals",w.s=m):s(i.measure[_])?(w.isSum=!0,w.dir="totals",w.s=m):(w.isSum=!1,w.dir=w.rawS<0?"decreasing":"increasing",g=w.s,w.s=m+g,m+=g),w.dir==="totals"&&(y=!0),u&&(v[_].orig_p=a[_],v[_][d+"End"]=l.ends[_],v[_][d+"Start"]=l.starts[_]),i.ids&&(w.id=String(i.ids[_])),w.v=(i.base||0)+m}return v.length&&(v[0].hasTotals=y),o(i.text,v,"tx"),o(i.hovertext,v,"htx"),T(v,i),v}},10213:function(ee){"use strict";ee.exports={eventDataKeys:["initial","delta","final"]}},50152:function(ee,z,e){"use strict";var M=e(96376).setGroupPositions;ee.exports=function(k,o){var T,b,h=k._fullLayout,s=k._fullData,t=k.calcdata,i=o.xaxis,n=o.yaxis,r=[],a=[],l=[];for(b=0;b<s.length;b++){var u=s[b];u.visible===!0&&u.xaxis===i._id&&u.yaxis===n._id&&u.type==="waterfall"&&(T=t[b],u.orientation==="h"?l.push(T):a.push(T),r.push(T))}var d={mode:h.waterfallmode,norm:h.waterfallnorm,gap:h.waterfallgap,groupgap:h.waterfallgroupgap};for(M(k,i,n,a,d),M(k,n,i,l,d),b=0;b<r.length;b++){T=r[b];for(var c=0;c<T.length;c++){var x=T[c];x.isSum===!1&&(x.s0+=c===0?0:T[c-1].s),c+1<T.length&&(T[c].nextP0=T[c+1].p0,T[c].nextS0=T[c+1].s0)}}}},24224:function(ee,z,e){"use strict";var M=e(3400),k=e(20011),o=e(31508).handleText,T=e(43980),b=e(31147),h=e(65776),s=e(76308),t=e(48164),i=t.INCREASING.COLOR,n=t.DECREASING.COLOR;function r(a,l,u){a(l+".marker.color",u),a(l+".marker.line.color",s.defaultLine),a(l+".marker.line.width")}ee.exports={supplyDefaults:function(a,l,u,d){function c(g,p){return M.coerce(a,l,h,g,p)}if(T(a,l,d,c)){b(a,l,d,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",l.x&&!l.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var x=c("textposition");o(a,l,d,c,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l.textposition!=="none"&&(c("texttemplate"),l.texttemplate||c("textinfo")),r(c,"increasing",i),r(c,"decreasing",n),r(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))}else l.visible=!1},crossTraceDefaults:function(a,l){var u,d;function c(g){return M.coerce(d._input,d,h,g)}if(l.waterfallmode==="group")for(var x=0;x<a.length;x++)u=(d=a[x])._input,k(u,d,l,c)}}},53256:function(ee){"use strict";ee.exports=function(z,e){return z.x="xVal"in e?e.xVal:e.x,z.y="yVal"in e?e.yVal:e.y,"initial"in e&&(z.initial=e.initial),"delta"in e&&(z.delta=e.delta),"final"in e&&(z.final=e.final),e.xa&&(z.xaxis=e.xa),e.ya&&(z.yaxis=e.ya),z}},94196:function(ee,z,e){"use strict";var M=e(54460).hoverLabelText,k=e(76308).opacity,o=e(63400).hoverOnBars,T=e(48164),b=T.INCREASING.SYMBOL,h=T.DECREASING.SYMBOL;ee.exports=function(s,t,i,n,r){var a=o(s,t,i,n,r);if(a){var l=a.cd,u=l[0].trace,d=u.orientation==="h",c=d?"x":"y",x=d?s.xa:s.ya,g=l[a.index],p=g.isSum?g.b+g.s:g.rawS;a.initial=g.b+g.s-p,a.delta=p,a.final=a.initial+a.delta;var v=w(Math.abs(a.delta));a.deltaLabel=p<0?"("+v+")":v,a.finalLabel=w(a.final),a.initialLabel=w(a.initial);var m=g.hi||u.hoverinfo,y=[];if(m&&m!=="none"&&m!=="skip"){var _=m==="all",f=m.split("+"),S=function(E){return _||f.indexOf(E)!==-1};g.isSum||(!S("final")||S(d?"x":"y")||y.push(a.finalLabel),S("delta")&&(p<0?y.push(a.deltaLabel+" "+h):y.push(a.deltaLabel+" "+b)),S("initial")&&y.push("Initial: "+a.initialLabel))}return y.length&&(a.extraText=y.join("<br>")),a.color=function(E,P){var C=E[P.dir].marker,O=C.color,R=C.line.color,j=C.line.width;return k(O)?O:k(R)&&j?R:void 0}(u,g),[a]}function w(E){return M(x,E,u[c+"hoverformat"])}}},95952:function(ee,z,e){"use strict";ee.exports={attributes:e(65776),layoutAttributes:e(91352),supplyDefaults:e(24224).supplyDefaults,crossTraceDefaults:e(24224).crossTraceDefaults,supplyLayoutDefaults:e(59464),calc:e(73540),crossTraceCalc:e(50152),plot:e(64488),style:e(12252).style,hoverPoints:e(94196),eventData:e(53256),selectPoints:e(45784),moduleType:"trace",name:"waterfall",basePlotModule:e(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(ee){"use strict";ee.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(ee,z,e){"use strict";var M=e(3400),k=e(91352);ee.exports=function(o,T,b){var h=!1;function s(n,r){return M.coerce(o,T,k,n,r)}for(var t=0;t<b.length;t++){var i=b[t];if(i.visible&&i.type==="waterfall"){h=!0;break}}h&&(s("waterfallmode"),s("waterfallgap",.2),s("waterfallgroupgap"))}},64488:function(ee,z,e){"use strict";var M=e(33428),k=e(3400),o=e(43616),T=e(39032).BADNUM,b=e(98184),h=e(82744).clearMinTextSize;ee.exports=function(s,t,i,n){var r=s._fullLayout;h("waterfall",r),b.plot(s,t,i,n,{mode:r.waterfallmode,norm:r.waterfallmode,gap:r.waterfallgap,groupgap:r.waterfallgroupgap}),function(a,l,u,d){var c=l.xaxis,x=l.yaxis;k.makeTraceGroups(d,u,"trace bars").each(function(g){var p=M.select(this),v=g[0].trace,m=k.ensureSingle(p,"g","lines");if(v.connector&&v.connector.visible){var y=v.orientation==="h",_=v.connector.mode,f=m.selectAll("g.line").data(k.identity);f.enter().append("g").classed("line",!0),f.exit().remove();var S=f.size();f.each(function(w,E){if(E===S-1||w.cNext){var P=function(j,D,N,W){var F=[],U=[],V=W?D:N,te=W?N:D;return F[0]=V.c2p(j.s0,!0),U[0]=te.c2p(j.p0,!0),F[1]=V.c2p(j.s1,!0),U[1]=te.c2p(j.p1,!0),F[2]=V.c2p(j.nextS0,!0),U[2]=te.c2p(j.nextP0,!0),W?[F,U]:[U,F]}(w,c,x,y),C=P[0],O=P[1],R="";C[0]!==T&&O[0]!==T&&C[1]!==T&&O[1]!==T&&(_==="spanning"&&!w.isSum&&E>0&&(R+=y?"M"+C[0]+","+O[1]+"V"+O[0]:"M"+C[1]+","+O[0]+"H"+C[0]),_!=="between"&&(w.isSum||E<S-1)&&(R+=y?"M"+C[1]+","+O[0]+"V"+O[1]:"M"+C[0]+","+O[1]+"H"+C[1]),C[2]!==T&&O[2]!==T&&(R+=y?"M"+C[1]+","+O[1]+"V"+O[2]:"M"+C[1]+","+O[1]+"H"+C[2])),R===""&&(R="M0,0Z"),k.ensureSingle(M.select(this),"path").attr("d",R).call(o.setClipUrl,l.layerClipId,a)}})}else m.remove()})}(s,t,i,n)}},12252:function(ee,z,e){"use strict";var M=e(33428),k=e(43616),o=e(76308),T=e(13448).DESELECTDIM,b=e(60100),h=e(82744).resizeText,s=b.styleTextPoints;ee.exports={style:function(t,i,n){var r=n||M.select(t).selectAll("g.waterfalllayer").selectAll("g.trace");h(t,r,"waterfall"),r.style("opacity",function(a){return a[0].trace.opacity}),r.each(function(a){var l=M.select(this),u=a[0].trace;l.selectAll(".point > path").each(function(d){if(!d.isBlank){var c=u[d.dir].marker;M.select(this).call(o.fill,c.color).call(o.stroke,c.line.color).call(k.dashLine,c.line.dash,c.line.width).style("opacity",u.selectedpoints&&!d.selected?T:1)}}),s(l,u,t),l.selectAll(".lines").each(function(){var d=u.connector.line;k.lineGroupStyle(M.select(this).selectAll("path"),d.width,d.color,d.dash)})})}}},84224:function(ee,z,e){"use strict";var M=e(54460),k=e(3400),o=e(73060),T=e(60468).W,b=e(39032).BADNUM;z.moduleType="transform",z.name="aggregate";var h=z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},s=h.aggregations;function t(a,l,u,d){if(d.enabled){for(var c=d.target,x=k.nestedProperty(l,c),g=x.get(),p=function(y,_){var f=y.func,S=_.d2c,w=_.c2d;switch(f){case"count":return i;case"first":return n;case"last":return r;case"sum":return function(E,P){for(var C=0,O=0;O<P.length;O++){var R=S(E[P[O]]);R!==b&&(C+=R)}return w(C)};case"avg":return function(E,P){for(var C=0,O=0,R=0;R<P.length;R++){var j=S(E[P[R]]);j!==b&&(C+=j,O++)}return O?w(C/O):b};case"min":return function(E,P){for(var C=1/0,O=0;O<P.length;O++){var R=S(E[P[O]]);R!==b&&(C=Math.min(C,R))}return C===1/0?b:w(C)};case"max":return function(E,P){for(var C=-1/0,O=0;O<P.length;O++){var R=S(E[P[O]]);R!==b&&(C=Math.max(C,R))}return C===-1/0?b:w(C)};case"range":return function(E,P){for(var C=1/0,O=-1/0,R=0;R<P.length;R++){var j=S(E[P[R]]);j!==b&&(C=Math.min(C,j),O=Math.max(O,j))}return O===-1/0||C===1/0?b:w(O-C)};case"change":return function(E,P){var C=S(E[P[0]]),O=S(E[P[P.length-1]]);return C===b||O===b?b:w(O-C)};case"median":return function(E,P){for(var C=[],O=0;O<P.length;O++){var R=S(E[P[O]]);R!==b&&C.push(R)}if(!C.length)return b;C.sort(k.sorterAsc);var j=(C.length-1)/2;return w((C[Math.floor(j)]+C[Math.ceil(j)])/2)};case"mode":return function(E,P){for(var C={},O=0,R=b,j=0;j<P.length;j++){var D=S(E[P[j]]);if(D!==b){var N=C[D]=(C[D]||0)+1;N>O&&(O=N,R=D)}}return O?w(R):b};case"rms":return function(E,P){for(var C=0,O=0,R=0;R<P.length;R++){var j=S(E[P[R]]);j!==b&&(C+=j*j,O++)}return O?w(Math.sqrt(C/O)):b};case"stddev":return function(E,P){var C,O=0,R=0,j=1,D=b;for(C=0;C<P.length&&D===b;C++)D=S(E[P[C]]);if(D===b)return b;for(;C<P.length;C++){var N=S(E[P[C]]);if(N!==b){var W=N-D;O+=W,R+=W*W,j++}}var F=y.funcmode==="sample"?j-1:j;return F?Math.sqrt((R-O*O/j)/F):0}}}(d,M.getDataConversions(a,l,c,g)),v=new Array(u.length),m=0;m<u.length;m++)v[m]=p(g,u[m]);x.set(v),d.func==="count"&&k.pushUnique(l._arrayAttrs,c)}}function i(a,l){return l.length}function n(a,l){return a[l[0]]}function r(a,l){return a[l[l.length-1]]}z.supplyDefaults=function(a,l){var u,d={};function c(w,E){return k.coerce(a,d,h,w,E)}if(!c("enabled"))return d;var x=o.findArrayAttributes(l),g={};for(u=0;u<x.length;u++)g[x[u]]=1;var p=c("groups");if(!Array.isArray(p)){if(!g[p])return d.enabled=!1,d;g[p]=0}var v,m=a.aggregations||[],y=d.aggregations=new Array(m.length);function _(w,E){return k.coerce(m[u],v,s,w,E)}for(u=0;u<m.length;u++){v={_index:u};var f=_("target"),S=_("func");_("enabled")&&f&&(g[f]||S==="count"&&g[f]===void 0)?(S==="stddev"&&_("funcmode"),g[f]=0,y[u]=v):y[u]={enabled:!1,_index:u}}for(u=0;u<x.length;u++)g[x[u]]&&y.push({target:x[u],func:s.func.dflt,enabled:!0,_index:-1});return d},z.calcTransform=function(a,l,u){if(u.enabled){var d=u.groups,c=k.getTargetArray(l,{target:d});if(c){var x,g,p,v,m={},y={},_=[],f=T(l.transforms,u),S=c.length;for(l._length&&(S=Math.min(S,l._length)),x=0;x<S;x++)(p=m[g=c[x]])===void 0?(m[g]=_.length,v=[x],_.push(v),y[m[g]]=f(x)):(_[p].push(x),y[m[g]]=(y[m[g]]||[]).concat(f(x)));u._indexToPoints=y;var w=u.aggregations;for(x=0;x<w.length;x++)t(a,l,_,w[x]);typeof d=="string"&&t(a,l,_,{target:d,func:"first",enabled:!0}),l._length=_.length}}}},76744:function(ee,z,e){"use strict";var M=e(3400),k=e(24040),o=e(54460),T=e(60468).W,b=e(69104),h=b.COMPARISON_OPS,s=b.INTERVAL_OPS,t=b.SET_OPS;z.moduleType="transform",z.name="filter",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(h).concat(s).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},z.supplyDefaults=function(i){var n={};function r(u,d){return M.coerce(i,n,z.attributes,u,d)}if(r("enabled")){var a=r("target");if(M.isArrayOrTypedArray(a)&&a.length===0)return n.enabled=!1,n;r("preservegaps"),r("operation"),r("value");var l=k.getComponentMethod("calendars","handleDefaults");l(i,n,"valuecalendar",null),l(i,n,"targetcalendar",null)}return n},z.calcTransform=function(i,n,r){if(r.enabled){var a=M.getTargetArray(n,r);if(a){var l=r.target,u=a.length;n._length&&(u=Math.min(u,n._length));var d=r.targetcalendar,c=n._arrayAttrs,x=r.preservegaps;if(typeof l=="string"){var g=M.nestedProperty(n,l+"calendar").get();g&&(d=g)}var p,v,m=function(P,C,O){var R=P.operation,j=P.value,D=M.isArrayOrTypedArray(j);function N(V){return V.indexOf(R)!==-1}var W,F=function(V){return C(V,0,P.valuecalendar)},U=function(V){return C(V,0,O)};switch(N(h)?W=F(D?j[0]:j):N(s)?W=D?[F(j[0]),F(j[1])]:[F(j),F(j)]:N(t)&&(W=D?j.map(F):[F(j)]),R){case"=":return function(V){return U(V)===W};case"!=":return function(V){return U(V)!==W};case"<":return function(V){return U(V)<W};case"<=":return function(V){return U(V)<=W};case">":return function(V){return U(V)>W};case">=":return function(V){return U(V)>=W};case"[]":return function(V){var te=U(V);return te>=W[0]&&te<=W[1]};case"()":return function(V){var te=U(V);return te>W[0]&&te<W[1]};case"[)":return function(V){var te=U(V);return te>=W[0]&&te<W[1]};case"(]":return function(V){var te=U(V);return te>W[0]&&te<=W[1]};case"][":return function(V){var te=U(V);return te<=W[0]||te>=W[1]};case")(":return function(V){var te=U(V);return te<W[0]||te>W[1]};case"](":return function(V){var te=U(V);return te<=W[0]||te>W[1]};case")[":return function(V){var te=U(V);return te<W[0]||te>=W[1]};case"{}":return function(V){return W.indexOf(U(V))!==-1};case"}{":return function(V){return W.indexOf(U(V))===-1}}}(r,o.getDataToCoordFunc(i,n,l,a),d),y={},_={},f=0;x?(p=function(P){y[P.astr]=M.extendDeep([],P.get()),P.set(new Array(u))},v=function(P,C){var O=y[P.astr][C];P.get()[C]=O}):(p=function(P){y[P.astr]=M.extendDeep([],P.get()),P.set([])},v=function(P,C){var O=y[P.astr][C];P.get().push(O)}),E(p);for(var S=T(n.transforms,r),w=0;w<u;w++)m(a[w])?(E(v,w),_[f++]=S(w)):x&&f++;r._indexToPoints=_,n._length=f}}function E(P,C){for(var O=0;O<c.length;O++)P(M.nestedProperty(n,c[O]),C)}}},32028:function(ee,z,e){"use strict";var M=e(3400),k=e(73060),o=e(7316),T=e(60468).W;function b(h,s){var t,i,n,r,a,l,u,d,c,x,g=s.transform,p=s.transformIndex,v=h.transforms[p].groups,m=T(h.transforms,g);if(!M.isArrayOrTypedArray(v)||v.length===0)return[h];var y=M.filterUnique(v),_=new Array(y.length),f=v.length,S=k.findArrayAttributes(h),w=g.styles||[],E={};for(t=0;t<w.length;t++)E[w[t].target]=w[t].value;g.styles&&(x=M.keyedContainer(g,"styles","target","value.name"));var P={},C={};for(t=0;t<y.length;t++){P[l=y[t]]=t,C[l]=0,(u=_[t]=M.extendDeepNoArrays({},h))._group=l,u.transforms[p]._indexToPoints={};var O=null;for(x&&(O=x.get(l)),u.name=O||O===""?O:M.templateString(g.nameformat,{trace:h.name,group:l}),d=u.transforms,u.transforms=[],i=0;i<d.length;i++)u.transforms[i]=M.extendDeepNoArrays({},d[i]);for(i=0;i<S.length;i++)M.nestedProperty(u,S[i]).set([])}for(n=0;n<S.length;n++){for(r=S[n],i=0,c=[];i<y.length;i++)c[i]=M.nestedProperty(_[i],r).get();for(a=M.nestedProperty(h,r).get(),i=0;i<f;i++)c[P[v[i]]].push(a[i])}for(i=0;i<f;i++)(u=_[P[v[i]]]).transforms[p]._indexToPoints[C[v[i]]]=m(i),C[v[i]]++;for(t=0;t<y.length;t++)l=y[t],u=_[t],o.clearExpandedTraceDefaultColors(u),u=M.extendDeepNoArrays(u,E[l]||{});return _}z.moduleType="transform",z.name="groupby",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},z.supplyDefaults=function(h,s,t){var i,n={};function r(c,x){return M.coerce(h,n,z.attributes,c,x)}if(!r("enabled"))return n;r("groups"),r("nameformat",t._dataLength>1?"%{group} (%{trace})":"%{group}");var a=h.styles,l=n.styles=[];if(a)for(i=0;i<a.length;i++){var u=l[i]={};M.coerce(a[i],l[i],z.attributes.styles,"target");var d=M.coerce(a[i],l[i],z.attributes.styles,"value");M.isPlainObject(d)?u.value=M.extendDeep({},d):d&&delete u.value}return n},z.transform=function(h,s){var t,i,n,r=[];for(i=0;i<h.length;i++)for(t=b(h[i],s),n=0;n<t.length;n++)r.push(t[n]);return r}},60468:function(ee,z){"use strict";z.W=function(e,M){for(var k,o,T=0;T<e.length&&(k=e[T])!==M;T++)k._indexToPoints&&k.enabled!==!1&&(o=k._indexToPoints);var b=o?function(h){return o[h]}:function(h){return[h]};return b}},76272:function(ee,z,e){"use strict";var M=e(3400),k=e(54460),o=e(60468).W,T=e(39032).BADNUM;z.moduleType="transform",z.name="sort",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},z.supplyDefaults=function(b){var h={};function s(t,i){return M.coerce(b,h,z.attributes,t,i)}return s("enabled")&&(s("target"),s("order")),h},z.calcTransform=function(b,h,s){if(s.enabled){var t=M.getTargetArray(h,s);if(t){var i=s.target,n=t.length;h._length&&(n=Math.min(n,h._length));var r,a,l=h._arrayAttrs,u=function(v,m,y,_){var f,S=new Array(_),w=new Array(_);for(f=0;f<_;f++)S[f]={v:m[f],i:f};for(S.sort(function(E,P){switch(E.order){case"ascending":return function(C,O){var R=P(C.v),j=P(O.v);return R===T?1:j===T?-1:R-j};case"descending":return function(C,O){var R=P(C.v),j=P(O.v);return R===T?1:j===T?-1:j-R}}}(v,y)),f=0;f<_;f++)w[f]=S[f].i;return w}(s,t,k.getDataToCoordFunc(b,h,i,t),n),d=o(h.transforms,s),c={};for(r=0;r<l.length;r++){var x=M.nestedProperty(h,l[r]),g=x.get(),p=new Array(n);for(a=0;a<n;a++)p[a]=g[u[a]];x.set(p)}for(a=0;a<n;a++)c[a]=d(u[a]);s._indexToPoints=c,h._length=n}}}},25788:function(ee,z){"use strict";z.version="2.30.1"},67792:function(ee,z,e){var M,k=e(4168);M=function(){return function(){var o={7386:function(h,s,t){h.exports={alpha_shape:t(2350),convex_hull:t(5537),delaunay_triangulate:t(4419),gl_cone3d:t(1140),gl_error3d:t(3110),gl_heatmap2d:t(6386),gl_line3d:t(6086),gl_mesh3d:t(8116),gl_plot2d:t(2117),gl_plot3d:t(1059),gl_pointcloud2d:t(8271),gl_scatter3d:t(2182),gl_select_box:t(6623),gl_spikes2d:t(3050),gl_streamtube3d:t(7307),gl_surface3d:t(3754),ndarray:t(5050),ndarray_linear_interpolate:t(3581)}},2146:function(h,s,t){"use strict";function i(fe,xe){for(var we=0;we<xe.length;we++){var Oe=xe[we];Oe.enumerable=Oe.enumerable||!1,Oe.configurable=!0,"value"in Oe&&(Oe.writable=!0),Object.defineProperty(fe,Oe.key,Oe)}}function n(fe,xe){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(we,Oe){return we.__proto__=Oe,we},n(fe,xe)}function r(fe){if(fe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe}function a(fe){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(xe){return xe.__proto__||Object.getPrototypeOf(xe)},a(fe)}function l(fe){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xe){return typeof xe}:function(xe){return xe&&typeof Symbol=="function"&&xe.constructor===Symbol&&xe!==Symbol.prototype?"symbol":typeof xe},l(fe)}var u=t(3910),d=t(3187),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.lW=p,s.h2=50;var x=2147483647;function g(fe){if(fe>x)throw new RangeError('The value "'+fe+'" is invalid for option "size"');var xe=new Uint8Array(fe);return Object.setPrototypeOf(xe,p.prototype),xe}function p(fe,xe,we){if(typeof fe=="number"){if(typeof xe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(fe)}return v(fe,xe,we)}function v(fe,xe,we){if(typeof fe=="string")return function(Pe,Ue){if(typeof Ue=="string"&&Ue!==""||(Ue="utf8"),!p.isEncoding(Ue))throw new TypeError("Unknown encoding: "+Ue);var Ve=0|w(Pe,Ue),Ze=g(Ve),it=Ze.write(Pe,Ue);return it!==Ve&&(Ze=Ze.slice(0,it)),Ze}(fe,xe);if(ArrayBuffer.isView(fe))return function(Pe){if(Se(Pe,Uint8Array)){var Ue=new Uint8Array(Pe);return f(Ue.buffer,Ue.byteOffset,Ue.byteLength)}return _(Pe)}(fe);if(fe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(fe));if(Se(fe,ArrayBuffer)||fe&&Se(fe.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Se(fe,SharedArrayBuffer)||fe&&Se(fe.buffer,SharedArrayBuffer)))return f(fe,xe,we);if(typeof fe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Oe=fe.valueOf&&fe.valueOf();if(Oe!=null&&Oe!==fe)return p.from(Oe,xe,we);var ze=function(Pe){if(p.isBuffer(Pe)){var Ue=0|S(Pe.length),Ve=g(Ue);return Ve.length===0||Pe.copy(Ve,0,0,Ue),Ve}return Pe.length!==void 0?typeof Pe.length!="number"||ke(Pe.length)?g(0):_(Pe):Pe.type==="Buffer"&&Array.isArray(Pe.data)?_(Pe.data):void 0}(fe);if(ze)return ze;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof fe[Symbol.toPrimitive]=="function")return p.from(fe[Symbol.toPrimitive]("string"),xe,we);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(fe))}function m(fe){if(typeof fe!="number")throw new TypeError('"size" argument must be of type number');if(fe<0)throw new RangeError('The value "'+fe+'" is invalid for option "size"')}function y(fe){return m(fe),g(fe<0?0:0|S(fe))}function _(fe){for(var xe=fe.length<0?0:0|S(fe.length),we=g(xe),Oe=0;Oe<xe;Oe+=1)we[Oe]=255&fe[Oe];return we}function f(fe,xe,we){if(xe<0||fe.byteLength<xe)throw new RangeError('"offset" is outside of buffer bounds');if(fe.byteLength<xe+(we||0))throw new RangeError('"length" is outside of buffer bounds');var Oe;return Oe=xe===void 0&&we===void 0?new Uint8Array(fe):we===void 0?new Uint8Array(fe,xe):new Uint8Array(fe,xe,we),Object.setPrototypeOf(Oe,p.prototype),Oe}function S(fe){if(fe>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return 0|fe}function w(fe,xe){if(p.isBuffer(fe))return fe.length;if(ArrayBuffer.isView(fe)||Se(fe,ArrayBuffer))return fe.byteLength;if(typeof fe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+l(fe));var we=fe.length,Oe=arguments.length>2&&arguments[2]===!0;if(!Oe&&we===0)return 0;for(var ze=!1;;)switch(xe){case"ascii":case"latin1":case"binary":return we;case"utf8":case"utf-8":return le(fe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*we;case"hex":return we>>>1;case"base64":return ae(fe).length;default:if(ze)return Oe?-1:le(fe).length;xe=(""+xe).toLowerCase(),ze=!0}}function E(fe,xe,we){var Oe=!1;if((xe===void 0||xe<0)&&(xe=0),xe>this.length||((we===void 0||we>this.length)&&(we=this.length),we<=0)||(we>>>=0)<=(xe>>>=0))return"";for(fe||(fe="utf8");;)switch(fe){case"hex":return K(this,xe,we);case"utf8":case"utf-8":return U(this,xe,we);case"ascii":return te(this,xe,we);case"latin1":case"binary":return J(this,xe,we);case"base64":return F(this,xe,we);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,xe,we);default:if(Oe)throw new TypeError("Unknown encoding: "+fe);fe=(fe+"").toLowerCase(),Oe=!0}}function P(fe,xe,we){var Oe=fe[xe];fe[xe]=fe[we],fe[we]=Oe}function C(fe,xe,we,Oe,ze){if(fe.length===0)return-1;if(typeof we=="string"?(Oe=we,we=0):we>2147483647?we=2147483647:we<-2147483648&&(we=-2147483648),ke(we=+we)&&(we=ze?0:fe.length-1),we<0&&(we=fe.length+we),we>=fe.length){if(ze)return-1;we=fe.length-1}else if(we<0){if(!ze)return-1;we=0}if(typeof xe=="string"&&(xe=p.from(xe,Oe)),p.isBuffer(xe))return xe.length===0?-1:O(fe,xe,we,Oe,ze);if(typeof xe=="number")return xe&=255,typeof Uint8Array.prototype.indexOf=="function"?ze?Uint8Array.prototype.indexOf.call(fe,xe,we):Uint8Array.prototype.lastIndexOf.call(fe,xe,we):O(fe,[xe],we,Oe,ze);throw new TypeError("val must be string, number or Buffer")}function O(fe,xe,we,Oe,ze){var Pe,Ue=1,Ve=fe.length,Ze=xe.length;if(Oe!==void 0&&((Oe=String(Oe).toLowerCase())==="ucs2"||Oe==="ucs-2"||Oe==="utf16le"||Oe==="utf-16le")){if(fe.length<2||xe.length<2)return-1;Ue=2,Ve/=2,Ze/=2,we/=2}function it(vt,et){return Ue===1?vt[et]:vt.readUInt16BE(et*Ue)}if(ze){var tt=-1;for(Pe=we;Pe<Ve;Pe++)if(it(fe,Pe)===it(xe,tt===-1?0:Pe-tt)){if(tt===-1&&(tt=Pe),Pe-tt+1===Ze)return tt*Ue}else tt!==-1&&(Pe-=Pe-tt),tt=-1}else for(we+Ze>Ve&&(we=Ve-Ze),Pe=we;Pe>=0;Pe--){for(var dt=!0,yt=0;yt<Ze;yt++)if(it(fe,Pe+yt)!==it(xe,yt)){dt=!1;break}if(dt)return Pe}return-1}function R(fe,xe,we,Oe){we=Number(we)||0;var ze=fe.length-we;Oe?(Oe=Number(Oe))>ze&&(Oe=ze):Oe=ze;var Pe,Ue=xe.length;for(Oe>Ue/2&&(Oe=Ue/2),Pe=0;Pe<Oe;++Pe){var Ve=parseInt(xe.substr(2*Pe,2),16);if(ke(Ve))return Pe;fe[we+Pe]=Ve}return Pe}function j(fe,xe,we,Oe){return he(le(xe,fe.length-we),fe,we,Oe)}function D(fe,xe,we,Oe){return he(function(ze){for(var Pe=[],Ue=0;Ue<ze.length;++Ue)Pe.push(255&ze.charCodeAt(Ue));return Pe}(xe),fe,we,Oe)}function N(fe,xe,we,Oe){return he(ae(xe),fe,we,Oe)}function W(fe,xe,we,Oe){return he(function(ze,Pe){for(var Ue,Ve,Ze,it=[],tt=0;tt<ze.length&&!((Pe-=2)<0);++tt)Ve=(Ue=ze.charCodeAt(tt))>>8,Ze=Ue%256,it.push(Ze),it.push(Ve);return it}(xe,fe.length-we),fe,we,Oe)}function F(fe,xe,we){return xe===0&&we===fe.length?u.fromByteArray(fe):u.fromByteArray(fe.slice(xe,we))}function U(fe,xe,we){we=Math.min(fe.length,we);for(var Oe=[],ze=xe;ze<we;){var Pe=fe[ze],Ue=null,Ve=Pe>239?4:Pe>223?3:Pe>191?2:1;if(ze+Ve<=we){var Ze=void 0,it=void 0,tt=void 0,dt=void 0;switch(Ve){case 1:Pe<128&&(Ue=Pe);break;case 2:(192&(Ze=fe[ze+1]))==128&&(dt=(31&Pe)<<6|63&Ze)>127&&(Ue=dt);break;case 3:Ze=fe[ze+1],it=fe[ze+2],(192&Ze)==128&&(192&it)==128&&(dt=(15&Pe)<<12|(63&Ze)<<6|63&it)>2047&&(dt<55296||dt>57343)&&(Ue=dt);break;case 4:Ze=fe[ze+1],it=fe[ze+2],tt=fe[ze+3],(192&Ze)==128&&(192&it)==128&&(192&tt)==128&&(dt=(15&Pe)<<18|(63&Ze)<<12|(63&it)<<6|63&tt)>65535&&dt<1114112&&(Ue=dt)}}Ue===null?(Ue=65533,Ve=1):Ue>65535&&(Ue-=65536,Oe.push(Ue>>>10&1023|55296),Ue=56320|1023&Ue),Oe.push(Ue),ze+=Ve}return function(yt){var vt=yt.length;if(vt<=V)return String.fromCharCode.apply(String,yt);for(var et="",Qe=0;Qe<vt;)et+=String.fromCharCode.apply(String,yt.slice(Qe,Qe+=V));return et}(Oe)}p.TYPED_ARRAY_SUPPORT=function(){try{var fe=new Uint8Array(1),xe={foo:function(){return 42}};return Object.setPrototypeOf(xe,Uint8Array.prototype),Object.setPrototypeOf(fe,xe),fe.foo()===42}catch(we){return!1}}(),p.TYPED_ARRAY_SUPPORT||typeof console=="undefined"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(fe,xe,we){return v(fe,xe,we)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(fe,xe,we){return function(Oe,ze,Pe){return m(Oe),Oe<=0?g(Oe):ze!==void 0?typeof Pe=="string"?g(Oe).fill(ze,Pe):g(Oe).fill(ze):g(Oe)}(fe,xe,we)},p.allocUnsafe=function(fe){return y(fe)},p.allocUnsafeSlow=function(fe){return y(fe)},p.isBuffer=function(fe){return fe!=null&&fe._isBuffer===!0&&fe!==p.prototype},p.compare=function(fe,xe){if(Se(fe,Uint8Array)&&(fe=p.from(fe,fe.offset,fe.byteLength)),Se(xe,Uint8Array)&&(xe=p.from(xe,xe.offset,xe.byteLength)),!p.isBuffer(fe)||!p.isBuffer(xe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(fe===xe)return 0;for(var we=fe.length,Oe=xe.length,ze=0,Pe=Math.min(we,Oe);ze<Pe;++ze)if(fe[ze]!==xe[ze]){we=fe[ze],Oe=xe[ze];break}return we<Oe?-1:Oe<we?1:0},p.isEncoding=function(fe){switch(String(fe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(fe,xe){if(!Array.isArray(fe))throw new TypeError('"list" argument must be an Array of Buffers');if(fe.length===0)return p.alloc(0);var we;if(xe===void 0)for(xe=0,we=0;we<fe.length;++we)xe+=fe[we].length;var Oe=p.allocUnsafe(xe),ze=0;for(we=0;we<fe.length;++we){var Pe=fe[we];if(Se(Pe,Uint8Array))ze+Pe.length>Oe.length?(p.isBuffer(Pe)||(Pe=p.from(Pe)),Pe.copy(Oe,ze)):Uint8Array.prototype.set.call(Oe,Pe,ze);else{if(!p.isBuffer(Pe))throw new TypeError('"list" argument must be an Array of Buffers');Pe.copy(Oe,ze)}ze+=Pe.length}return Oe},p.byteLength=w,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var fe=this.length;if(fe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var xe=0;xe<fe;xe+=2)P(this,xe,xe+1);return this},p.prototype.swap32=function(){var fe=this.length;if(fe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var xe=0;xe<fe;xe+=4)P(this,xe,xe+3),P(this,xe+1,xe+2);return this},p.prototype.swap64=function(){var fe=this.length;if(fe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var xe=0;xe<fe;xe+=8)P(this,xe,xe+7),P(this,xe+1,xe+6),P(this,xe+2,xe+5),P(this,xe+3,xe+4);return this},p.prototype.toString=function(){var fe=this.length;return fe===0?"":arguments.length===0?U(this,0,fe):E.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(fe){if(!p.isBuffer(fe))throw new TypeError("Argument must be a Buffer");return this===fe||p.compare(this,fe)===0},p.prototype.inspect=function(){var fe="",xe=s.h2;return fe=this.toString("hex",0,xe).replace(/(.{2})/g,"$1 ").trim(),this.length>xe&&(fe+=" ... "),"<Buffer "+fe+">"},c&&(p.prototype[c]=p.prototype.inspect),p.prototype.compare=function(fe,xe,we,Oe,ze){if(Se(fe,Uint8Array)&&(fe=p.from(fe,fe.offset,fe.byteLength)),!p.isBuffer(fe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+l(fe));if(xe===void 0&&(xe=0),we===void 0&&(we=fe?fe.length:0),Oe===void 0&&(Oe=0),ze===void 0&&(ze=this.length),xe<0||we>fe.length||Oe<0||ze>this.length)throw new RangeError("out of range index");if(Oe>=ze&&xe>=we)return 0;if(Oe>=ze)return-1;if(xe>=we)return 1;if(this===fe)return 0;for(var Pe=(ze>>>=0)-(Oe>>>=0),Ue=(we>>>=0)-(xe>>>=0),Ve=Math.min(Pe,Ue),Ze=this.slice(Oe,ze),it=fe.slice(xe,we),tt=0;tt<Ve;++tt)if(Ze[tt]!==it[tt]){Pe=Ze[tt],Ue=it[tt];break}return Pe<Ue?-1:Ue<Pe?1:0},p.prototype.includes=function(fe,xe,we){return this.indexOf(fe,xe,we)!==-1},p.prototype.indexOf=function(fe,xe,we){return C(this,fe,xe,we,!0)},p.prototype.lastIndexOf=function(fe,xe,we){return C(this,fe,xe,we,!1)},p.prototype.write=function(fe,xe,we,Oe){if(xe===void 0)Oe="utf8",we=this.length,xe=0;else if(we===void 0&&typeof xe=="string")Oe=xe,we=this.length,xe=0;else{if(!isFinite(xe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");xe>>>=0,isFinite(we)?(we>>>=0,Oe===void 0&&(Oe="utf8")):(Oe=we,we=void 0)}var ze=this.length-xe;if((we===void 0||we>ze)&&(we=ze),fe.length>0&&(we<0||xe<0)||xe>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");for(var Pe=!1;;)switch(Oe){case"hex":return R(this,fe,xe,we);case"utf8":case"utf-8":return j(this,fe,xe,we);case"ascii":case"latin1":case"binary":return D(this,fe,xe,we);case"base64":return N(this,fe,xe,we);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,fe,xe,we);default:if(Pe)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),Pe=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var V=4096;function te(fe,xe,we){var Oe="";we=Math.min(fe.length,we);for(var ze=xe;ze<we;++ze)Oe+=String.fromCharCode(127&fe[ze]);return Oe}function J(fe,xe,we){var Oe="";we=Math.min(fe.length,we);for(var ze=xe;ze<we;++ze)Oe+=String.fromCharCode(fe[ze]);return Oe}function K(fe,xe,we){var Oe=fe.length;(!xe||xe<0)&&(xe=0),(!we||we<0||we>Oe)&&(we=Oe);for(var ze="",Pe=xe;Pe<we;++Pe)ze+=Me[fe[Pe]];return ze}function X(fe,xe,we){for(var Oe=fe.slice(xe,we),ze="",Pe=0;Pe<Oe.length-1;Pe+=2)ze+=String.fromCharCode(Oe[Pe]+256*Oe[Pe+1]);return ze}function Z(fe,xe,we){if(fe%1!=0||fe<0)throw new RangeError("offset is not uint");if(fe+xe>we)throw new RangeError("Trying to access beyond buffer length")}function $(fe,xe,we,Oe,ze,Pe){if(!p.isBuffer(fe))throw new TypeError('"buffer" argument must be a Buffer instance');if(xe>ze||xe<Pe)throw new RangeError('"value" argument is out of bounds');if(we+Oe>fe.length)throw new RangeError("Index out of range")}function re(fe,xe,we,Oe,ze){ve(xe,Oe,ze,fe,we,7);var Pe=Number(xe&BigInt(4294967295));fe[we++]=Pe,Pe>>=8,fe[we++]=Pe,Pe>>=8,fe[we++]=Pe,Pe>>=8,fe[we++]=Pe;var Ue=Number(xe>>BigInt(32)&BigInt(4294967295));return fe[we++]=Ue,Ue>>=8,fe[we++]=Ue,Ue>>=8,fe[we++]=Ue,Ue>>=8,fe[we++]=Ue,we}function oe(fe,xe,we,Oe,ze){ve(xe,Oe,ze,fe,we,7);var Pe=Number(xe&BigInt(4294967295));fe[we+7]=Pe,Pe>>=8,fe[we+6]=Pe,Pe>>=8,fe[we+5]=Pe,Pe>>=8,fe[we+4]=Pe;var Ue=Number(xe>>BigInt(32)&BigInt(4294967295));return fe[we+3]=Ue,Ue>>=8,fe[we+2]=Ue,Ue>>=8,fe[we+1]=Ue,Ue>>=8,fe[we]=Ue,we+8}function ie(fe,xe,we,Oe,ze,Pe){if(we+Oe>fe.length)throw new RangeError("Index out of range");if(we<0)throw new RangeError("Index out of range")}function ue(fe,xe,we,Oe,ze){return xe=+xe,we>>>=0,ze||ie(fe,0,we,4),d.write(fe,xe,we,Oe,23,4),we+4}function me(fe,xe,we,Oe,ze){return xe=+xe,we>>>=0,ze||ie(fe,0,we,8),d.write(fe,xe,we,Oe,52,8),we+8}p.prototype.slice=function(fe,xe){var we=this.length;(fe=~~fe)<0?(fe+=we)<0&&(fe=0):fe>we&&(fe=we),(xe=xe===void 0?we:~~xe)<0?(xe+=we)<0&&(xe=0):xe>we&&(xe=we),xe<fe&&(xe=fe);var Oe=this.subarray(fe,xe);return Object.setPrototypeOf(Oe,p.prototype),Oe},p.prototype.readUintLE=p.prototype.readUIntLE=function(fe,xe,we){fe>>>=0,xe>>>=0,we||Z(fe,xe,this.length);for(var Oe=this[fe],ze=1,Pe=0;++Pe<xe&&(ze*=256);)Oe+=this[fe+Pe]*ze;return Oe},p.prototype.readUintBE=p.prototype.readUIntBE=function(fe,xe,we){fe>>>=0,xe>>>=0,we||Z(fe,xe,this.length);for(var Oe=this[fe+--xe],ze=1;xe>0&&(ze*=256);)Oe+=this[fe+--xe]*ze;return Oe},p.prototype.readUint8=p.prototype.readUInt8=function(fe,xe){return fe>>>=0,xe||Z(fe,1,this.length),this[fe]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(fe,xe){return fe>>>=0,xe||Z(fe,2,this.length),this[fe]|this[fe+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(fe,xe){return fe>>>=0,xe||Z(fe,2,this.length),this[fe]<<8|this[fe+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(fe,xe){return fe>>>=0,xe||Z(fe,4,this.length),(this[fe]|this[fe+1]<<8|this[fe+2]<<16)+16777216*this[fe+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(fe,xe){return fe>>>=0,xe||Z(fe,4,this.length),16777216*this[fe]+(this[fe+1]<<16|this[fe+2]<<8|this[fe+3])},p.prototype.readBigUInt64LE=Ee(function(fe){pe(fe>>>=0,"offset");var xe=this[fe],we=this[fe+7];xe!==void 0&&we!==void 0||_e(fe,this.length-8);var Oe=xe+this[++fe]*Math.pow(2,8)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,24),ze=this[++fe]+this[++fe]*Math.pow(2,8)+this[++fe]*Math.pow(2,16)+we*Math.pow(2,24);return BigInt(Oe)+(BigInt(ze)<<BigInt(32))}),p.prototype.readBigUInt64BE=Ee(function(fe){pe(fe>>>=0,"offset");var xe=this[fe],we=this[fe+7];xe!==void 0&&we!==void 0||_e(fe,this.length-8);var Oe=xe*Math.pow(2,24)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,8)+this[++fe],ze=this[++fe]*Math.pow(2,24)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,8)+we;return(BigInt(Oe)<<BigInt(32))+BigInt(ze)}),p.prototype.readIntLE=function(fe,xe,we){fe>>>=0,xe>>>=0,we||Z(fe,xe,this.length);for(var Oe=this[fe],ze=1,Pe=0;++Pe<xe&&(ze*=256);)Oe+=this[fe+Pe]*ze;return Oe>=(ze*=128)&&(Oe-=Math.pow(2,8*xe)),Oe},p.prototype.readIntBE=function(fe,xe,we){fe>>>=0,xe>>>=0,we||Z(fe,xe,this.length);for(var Oe=xe,ze=1,Pe=this[fe+--Oe];Oe>0&&(ze*=256);)Pe+=this[fe+--Oe]*ze;return Pe>=(ze*=128)&&(Pe-=Math.pow(2,8*xe)),Pe},p.prototype.readInt8=function(fe,xe){return fe>>>=0,xe||Z(fe,1,this.length),128&this[fe]?-1*(255-this[fe]+1):this[fe]},p.prototype.readInt16LE=function(fe,xe){fe>>>=0,xe||Z(fe,2,this.length);var we=this[fe]|this[fe+1]<<8;return 32768&we?4294901760|we:we},p.prototype.readInt16BE=function(fe,xe){fe>>>=0,xe||Z(fe,2,this.length);var we=this[fe+1]|this[fe]<<8;return 32768&we?4294901760|we:we},p.prototype.readInt32LE=function(fe,xe){return fe>>>=0,xe||Z(fe,4,this.length),this[fe]|this[fe+1]<<8|this[fe+2]<<16|this[fe+3]<<24},p.prototype.readInt32BE=function(fe,xe){return fe>>>=0,xe||Z(fe,4,this.length),this[fe]<<24|this[fe+1]<<16|this[fe+2]<<8|this[fe+3]},p.prototype.readBigInt64LE=Ee(function(fe){pe(fe>>>=0,"offset");var xe=this[fe],we=this[fe+7];xe!==void 0&&we!==void 0||_e(fe,this.length-8);var Oe=this[fe+4]+this[fe+5]*Math.pow(2,8)+this[fe+6]*Math.pow(2,16)+(we<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(xe+this[++fe]*Math.pow(2,8)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,24))}),p.prototype.readBigInt64BE=Ee(function(fe){pe(fe>>>=0,"offset");var xe=this[fe],we=this[fe+7];xe!==void 0&&we!==void 0||_e(fe,this.length-8);var Oe=(xe<<24)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,8)+this[++fe];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++fe]*Math.pow(2,24)+this[++fe]*Math.pow(2,16)+this[++fe]*Math.pow(2,8)+we)}),p.prototype.readFloatLE=function(fe,xe){return fe>>>=0,xe||Z(fe,4,this.length),d.read(this,fe,!0,23,4)},p.prototype.readFloatBE=function(fe,xe){return fe>>>=0,xe||Z(fe,4,this.length),d.read(this,fe,!1,23,4)},p.prototype.readDoubleLE=function(fe,xe){return fe>>>=0,xe||Z(fe,8,this.length),d.read(this,fe,!0,52,8)},p.prototype.readDoubleBE=function(fe,xe){return fe>>>=0,xe||Z(fe,8,this.length),d.read(this,fe,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(fe,xe,we,Oe){fe=+fe,xe>>>=0,we>>>=0,Oe||$(this,fe,xe,we,Math.pow(2,8*we)-1,0);var ze=1,Pe=0;for(this[xe]=255&fe;++Pe<we&&(ze*=256);)this[xe+Pe]=fe/ze&255;return xe+we},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(fe,xe,we,Oe){fe=+fe,xe>>>=0,we>>>=0,Oe||$(this,fe,xe,we,Math.pow(2,8*we)-1,0);var ze=we-1,Pe=1;for(this[xe+ze]=255&fe;--ze>=0&&(Pe*=256);)this[xe+ze]=fe/Pe&255;return xe+we},p.prototype.writeUint8=p.prototype.writeUInt8=function(fe,xe,we){return fe=+fe,xe>>>=0,we||$(this,fe,xe,1,255,0),this[xe]=255&fe,xe+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(fe,xe,we){return fe=+fe,xe>>>=0,we||$(this,fe,xe,2,65535,0),this[xe]=255&fe,this[xe+1]=fe>>>8,xe+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(fe,xe,we){return fe=+fe,xe>>>=0,we||$(this,fe,xe,2,65535,0),this[xe]=fe>>>8,this[xe+1]=255&fe,xe+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(fe,xe,we){return fe=+fe,xe>>>=0,we||$(this,fe,xe,4,4294967295,0),this[xe+3]=fe>>>24,this[xe+2]=fe>>>16,this[xe+1]=fe>>>8,this[xe]=255&fe,xe+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(fe,xe,we){return fe=+fe,xe>>>=0,we||$(this,fe,xe,4,4294967295,0),this[xe]=fe>>>24,this[xe+1]=fe>>>16,this[xe+2]=fe>>>8,this[xe+3]=255&fe,xe+4},p.prototype.writeBigUInt64LE=Ee(function(fe){return re(this,fe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=Ee(function(fe){return oe(this,fe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(fe,xe,we,Oe){if(fe=+fe,xe>>>=0,!Oe){var ze=Math.pow(2,8*we-1);$(this,fe,xe,we,ze-1,-ze)}var Pe=0,Ue=1,Ve=0;for(this[xe]=255&fe;++Pe<we&&(Ue*=256);)fe<0&&Ve===0&&this[xe+Pe-1]!==0&&(Ve=1),this[xe+Pe]=(fe/Ue>>0)-Ve&255;return xe+we},p.prototype.writeIntBE=function(fe,xe,we,Oe){if(fe=+fe,xe>>>=0,!Oe){var ze=Math.pow(2,8*we-1);$(this,fe,xe,we,ze-1,-ze)}var Pe=we-1,Ue=1,Ve=0;for(this[xe+Pe]=255&fe;--Pe>=0&&(Ue*=256);)fe<0&&Ve===0&&this[xe+Pe+1]!==0&&(Ve=1),this[xe+Pe]=(fe/Ue>>0)-Ve&255;return xe+we},p.prototype.writeInt8=function(fe,xe,we){return fe=+fe,xe>>>=0,we||$(this,fe,xe,1,127,-128),fe<0&&(fe=255+fe+1),this[xe]=255&fe,xe+1},p.prototype.writeInt16LE=function(fe,xe,we){return fe=+fe,xe>>>=0,we||$(this,fe,xe,2,32767,-32768),this[xe]=255&fe,this[xe+1]=fe>>>8,xe+2},p.prototype.writeInt16BE=function(fe,xe,we){return fe=+fe,xe>>>=0,we||$(this,fe,xe,2,32767,-32768),this[xe]=fe>>>8,this[xe+1]=255&fe,xe+2},p.prototype.writeInt32LE=function(fe,xe,we){return fe=+fe,xe>>>=0,we||$(this,fe,xe,4,2147483647,-2147483648),this[xe]=255&fe,this[xe+1]=fe>>>8,this[xe+2]=fe>>>16,this[xe+3]=fe>>>24,xe+4},p.prototype.writeInt32BE=function(fe,xe,we){return fe=+fe,xe>>>=0,we||$(this,fe,xe,4,2147483647,-2147483648),fe<0&&(fe=4294967295+fe+1),this[xe]=fe>>>24,this[xe+1]=fe>>>16,this[xe+2]=fe>>>8,this[xe+3]=255&fe,xe+4},p.prototype.writeBigInt64LE=Ee(function(fe){return re(this,fe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=Ee(function(fe){return oe(this,fe,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(fe,xe,we){return ue(this,fe,xe,!0,we)},p.prototype.writeFloatBE=function(fe,xe,we){return ue(this,fe,xe,!1,we)},p.prototype.writeDoubleLE=function(fe,xe,we){return me(this,fe,xe,!0,we)},p.prototype.writeDoubleBE=function(fe,xe,we){return me(this,fe,xe,!1,we)},p.prototype.copy=function(fe,xe,we,Oe){if(!p.isBuffer(fe))throw new TypeError("argument should be a Buffer");if(we||(we=0),Oe||Oe===0||(Oe=this.length),xe>=fe.length&&(xe=fe.length),xe||(xe=0),Oe>0&&Oe<we&&(Oe=we),Oe===we||fe.length===0||this.length===0)return 0;if(xe<0)throw new RangeError("targetStart out of bounds");if(we<0||we>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),fe.length-xe<Oe-we&&(Oe=fe.length-xe+we);var ze=Oe-we;return this===fe&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(xe,we,Oe):Uint8Array.prototype.set.call(fe,this.subarray(we,Oe),xe),ze},p.prototype.fill=function(fe,xe,we,Oe){if(typeof fe=="string"){if(typeof xe=="string"?(Oe=xe,xe=0,we=this.length):typeof we=="string"&&(Oe=we,we=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!p.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(fe.length===1){var ze=fe.charCodeAt(0);(Oe==="utf8"&&ze<128||Oe==="latin1")&&(fe=ze)}}else typeof fe=="number"?fe&=255:typeof fe=="boolean"&&(fe=Number(fe));if(xe<0||this.length<xe||this.length<we)throw new RangeError("Out of range index");if(we<=xe)return this;var Pe;if(xe>>>=0,we=we===void 0?this.length:we>>>0,fe||(fe=0),typeof fe=="number")for(Pe=xe;Pe<we;++Pe)this[Pe]=fe;else{var Ue=p.isBuffer(fe)?fe:p.from(fe,Oe),Ve=Ue.length;if(Ve===0)throw new TypeError('The value "'+fe+'" is invalid for argument "value"');for(Pe=0;Pe<we-xe;++Pe)this[Pe+xe]=Ue[Pe%Ve]}return this};var be={};function ge(fe,xe,we){be[fe]=function(Oe){(function(tt,dt){if(typeof dt!="function"&&dt!==null)throw new TypeError("Super expression must either be null or a function");tt.prototype=Object.create(dt&&dt.prototype,{constructor:{value:tt,writable:!0,configurable:!0}}),Object.defineProperty(tt,"prototype",{writable:!1}),dt&&n(tt,dt)})(it,Oe);var ze,Pe,Ue,Ve,Ze=(Ue=it,Ve=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}(),function(){var tt,dt=a(Ue);if(Ve){var yt=a(this).constructor;tt=Reflect.construct(dt,arguments,yt)}else tt=dt.apply(this,arguments);return function(vt,et){if(et&&(l(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r(vt)}(this,tt)});function it(){var tt;return function(dt,yt){if(!(dt instanceof yt))throw new TypeError("Cannot call a class as a function")}(this,it),tt=Ze.call(this),Object.defineProperty(r(tt),"message",{value:xe.apply(r(tt),arguments),writable:!0,configurable:!0}),tt.name="".concat(tt.name," [").concat(fe,"]"),tt.stack,delete tt.name,tt}return ze=it,(Pe=[{key:"code",get:function(){return fe},set:function(tt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:tt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(fe,"]: ").concat(this.message)}}])&&i(ze.prototype,Pe),Object.defineProperty(ze,"prototype",{writable:!1}),it}(we)}function de(fe){for(var xe="",we=fe.length,Oe=fe[0]==="-"?1:0;we>=Oe+4;we-=3)xe="_".concat(fe.slice(we-3,we)).concat(xe);return"".concat(fe.slice(0,we)).concat(xe)}function ve(fe,xe,we,Oe,ze,Pe){if(fe>we||fe<xe){var Ue,Ve=typeof xe=="bigint"?"n":"";throw Ue=Pe>3?xe===0||xe===BigInt(0)?">= 0".concat(Ve," and < 2").concat(Ve," ** ").concat(8*(Pe+1)).concat(Ve):">= -(2".concat(Ve," ** ").concat(8*(Pe+1)-1).concat(Ve,") and < 2 ** ")+"".concat(8*(Pe+1)-1).concat(Ve):">= ".concat(xe).concat(Ve," and <= ").concat(we).concat(Ve),new be.ERR_OUT_OF_RANGE("value",Ue,fe)}(function(Ze,it,tt){pe(it,"offset"),Ze[it]!==void 0&&Ze[it+tt]!==void 0||_e(it,Ze.length-(tt+1))})(Oe,ze,Pe)}function pe(fe,xe){if(typeof fe!="number")throw new be.ERR_INVALID_ARG_TYPE(xe,"number",fe)}function _e(fe,xe,we){throw Math.floor(fe)!==fe?(pe(fe,we),new be.ERR_OUT_OF_RANGE(we||"offset","an integer",fe)):xe<0?new be.ERR_BUFFER_OUT_OF_BOUNDS:new be.ERR_OUT_OF_RANGE(we||"offset",">= ".concat(we?1:0," and <= ").concat(xe),fe)}ge("ERR_BUFFER_OUT_OF_BOUNDS",function(fe){return fe?"".concat(fe," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(fe,xe){return'The "'.concat(fe,'" argument must be of type number. Received type ').concat(l(xe))},TypeError),ge("ERR_OUT_OF_RANGE",function(fe,xe,we){var Oe='The value of "'.concat(fe,'" is out of range.'),ze=we;return Number.isInteger(we)&&Math.abs(we)>Math.pow(2,32)?ze=de(String(we)):typeof we=="bigint"&&(ze=String(we),(we>Math.pow(BigInt(2),BigInt(32))||we<-Math.pow(BigInt(2),BigInt(32)))&&(ze=de(ze)),ze+="n"),Oe+" It must be ".concat(xe,". Received ").concat(ze)},RangeError);var Te=/[^+/0-9A-Za-z-_]/g;function le(fe,xe){var we;xe=xe||1/0;for(var Oe=fe.length,ze=null,Pe=[],Ue=0;Ue<Oe;++Ue){if((we=fe.charCodeAt(Ue))>55295&&we<57344){if(!ze){if(we>56319){(xe-=3)>-1&&Pe.push(239,191,189);continue}if(Ue+1===Oe){(xe-=3)>-1&&Pe.push(239,191,189);continue}ze=we;continue}if(we<56320){(xe-=3)>-1&&Pe.push(239,191,189),ze=we;continue}we=65536+(ze-55296<<10|we-56320)}else ze&&(xe-=3)>-1&&Pe.push(239,191,189);if(ze=null,we<128){if((xe-=1)<0)break;Pe.push(we)}else if(we<2048){if((xe-=2)<0)break;Pe.push(we>>6|192,63&we|128)}else if(we<65536){if((xe-=3)<0)break;Pe.push(we>>12|224,we>>6&63|128,63&we|128)}else{if(!(we<1114112))throw new Error("Invalid code point");if((xe-=4)<0)break;Pe.push(we>>18|240,we>>12&63|128,we>>6&63|128,63&we|128)}}return Pe}function ae(fe){return u.toByteArray(function(xe){if((xe=(xe=xe.split("=")[0]).trim().replace(Te,"")).length<2)return"";for(;xe.length%4!=0;)xe+="=";return xe}(fe))}function he(fe,xe,we,Oe){var ze;for(ze=0;ze<Oe&&!(ze+we>=xe.length||ze>=fe.length);++ze)xe[ze+we]=fe[ze];return ze}function Se(fe,xe){return fe instanceof xe||fe!=null&&fe.constructor!=null&&fe.constructor.name!=null&&fe.constructor.name===xe.name}function ke(fe){return fe!=fe}var Me=function(){for(var fe="0123456789abcdef",xe=new Array(256),we=0;we<16;++we)for(var Oe=16*we,ze=0;ze<16;++ze)xe[Oe+ze]=fe[we]+fe[ze];return xe}();function Ee(fe){return typeof BigInt=="undefined"?De:fe}function De(){throw new Error("BigInt not supported")}},2321:function(h){"use strict";h.exports=n,h.exports.isMobile=n,h.exports.default=n;var s=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,i=/android|ipad|playbook|silk/i;function n(r){r||(r={});var a=r.ua;if(a||typeof navigator=="undefined"||(a=navigator.userAgent),a&&a.headers&&typeof a.headers["user-agent"]=="string"&&(a=a.headers["user-agent"]),typeof a!="string")return!1;var l=s.test(a)&&!t.test(a)||!!r.tablet&&i.test(a);return!l&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&a.indexOf("Macintosh")!==-1&&a.indexOf("Safari")!==-1&&(l=!0),l}},3910:function(h,s){"use strict";s.byteLength=function(d){var c=l(d),x=c[0],g=c[1];return 3*(x+g)/4-g},s.toByteArray=function(d){var c,x,g=l(d),p=g[0],v=g[1],m=new n(function(f,S,w){return 3*(S+w)/4-w}(0,p,v)),y=0,_=v>0?p-4:p;for(x=0;x<_;x+=4)c=i[d.charCodeAt(x)]<<18|i[d.charCodeAt(x+1)]<<12|i[d.charCodeAt(x+2)]<<6|i[d.charCodeAt(x+3)],m[y++]=c>>16&255,m[y++]=c>>8&255,m[y++]=255&c;return v===2&&(c=i[d.charCodeAt(x)]<<2|i[d.charCodeAt(x+1)]>>4,m[y++]=255&c),v===1&&(c=i[d.charCodeAt(x)]<<10|i[d.charCodeAt(x+1)]<<4|i[d.charCodeAt(x+2)]>>2,m[y++]=c>>8&255,m[y++]=255&c),m},s.fromByteArray=function(d){for(var c,x=d.length,g=x%3,p=[],v=16383,m=0,y=x-g;m<y;m+=v)p.push(u(d,m,m+v>y?y:m+v));return g===1?(c=d[x-1],p.push(t[c>>2]+t[c<<4&63]+"==")):g===2&&(c=(d[x-2]<<8)+d[x-1],p.push(t[c>>10]+t[c>>4&63]+t[c<<2&63]+"=")),p.join("")};for(var t=[],i=[],n=typeof Uint8Array!="undefined"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)t[a]=r[a],i[r.charCodeAt(a)]=a;function l(d){var c=d.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=d.indexOf("=");return x===-1&&(x=c),[x,x===c?0:4-x%4]}function u(d,c,x){for(var g,p,v=[],m=c;m<x;m+=3)g=(d[m]<<16&16711680)+(d[m+1]<<8&65280)+(255&d[m+2]),v.push(t[(p=g)>>18&63]+t[p>>12&63]+t[p>>6&63]+t[63&p]);return v.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},3187:function(h,s){s.read=function(t,i,n,r,a){var l,u,d=8*a-r-1,c=(1<<d)-1,x=c>>1,g=-7,p=n?a-1:0,v=n?-1:1,m=t[i+p];for(p+=v,l=m&(1<<-g)-1,m>>=-g,g+=d;g>0;l=256*l+t[i+p],p+=v,g-=8);for(u=l&(1<<-g)-1,l>>=-g,g+=r;g>0;u=256*u+t[i+p],p+=v,g-=8);if(l===0)l=1-x;else{if(l===c)return u?NaN:1/0*(m?-1:1);u+=Math.pow(2,r),l-=x}return(m?-1:1)*u*Math.pow(2,l-r)},s.write=function(t,i,n,r,a,l){var u,d,c,x=8*l-a-1,g=(1<<x)-1,p=g>>1,v=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:l-1,y=r?1:-1,_=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(d=isNaN(i)?1:0,u=g):(u=Math.floor(Math.log(i)/Math.LN2),i*(c=Math.pow(2,-u))<1&&(u--,c*=2),(i+=u+p>=1?v/c:v*Math.pow(2,1-p))*c>=2&&(u++,c/=2),u+p>=g?(d=0,u=g):u+p>=1?(d=(i*c-1)*Math.pow(2,a),u+=p):(d=i*Math.pow(2,p-1)*Math.pow(2,a),u=0));a>=8;t[n+m]=255&d,m+=y,d/=256,a-=8);for(u=u<<a|d,x+=a;x>0;t[n+m]=255&u,m+=y,u/=256,x-=8);t[n+m-y]|=128*_}},1152:function(h,s,t){"use strict";h.exports=function(u){var d=(u=u||{}).eye||[0,0,1],c=u.center||[0,0,0],x=u.up||[0,1,0],g=u.distanceLimits||[0,1/0],p=u.mode||"turntable",v=i(),m=n(),y=r();return v.setDistanceLimits(g[0],g[1]),v.lookAt(0,d,c,x),m.setDistanceLimits(g[0],g[1]),m.lookAt(0,d,c,x),y.setDistanceLimits(g[0],g[1]),y.lookAt(0,d,c,x),new a({turntable:v,orbit:m,matrix:y},p)};var i=t(3440),n=t(7774),r=t(9298);function a(u,d){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(c){return u[c]}),this._mode=d,this._active=u[d],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var l=a.prototype;l.flush=function(u){for(var d=this._controllerList,c=0;c<d.length;++c)d[c].flush(u)},l.idle=function(u){for(var d=this._controllerList,c=0;c<d.length;++c)d[c].idle(u)},l.lookAt=function(u,d,c,x){for(var g=this._controllerList,p=0;p<g.length;++p)g[p].lookAt(u,d,c,x)},l.rotate=function(u,d,c,x){for(var g=this._controllerList,p=0;p<g.length;++p)g[p].rotate(u,d,c,x)},l.pan=function(u,d,c,x){for(var g=this._controllerList,p=0;p<g.length;++p)g[p].pan(u,d,c,x)},l.translate=function(u,d,c,x){for(var g=this._controllerList,p=0;p<g.length;++p)g[p].translate(u,d,c,x)},l.setMatrix=function(u,d){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setMatrix(u,d)},l.setDistanceLimits=function(u,d){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistanceLimits(u,d)},l.setDistance=function(u,d){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistance(u,d)},l.recalcMatrix=function(u){this._active.recalcMatrix(u)},l.getDistance=function(u){return this._active.getDistance(u)},l.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},l.lastT=function(){return this._active.lastT()},l.setMode=function(u){if(u!==this._mode){var d=this._controllerNames.indexOf(u);if(!(d<0)){var c=this._active,x=this._controllerList[d],g=Math.max(c.lastT(),x.lastT());c.recalcMatrix(g),x.setMatrix(g,c.computedMatrix),this._active=x,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},l.getMode=function(){return this._mode}},8126:function(h,s,t){"use strict";var i=typeof WeakMap=="undefined"?t(5346):WeakMap,n=t(5827),r=t(2944),a=new i;h.exports=function(l){var u=a.get(l),d=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!d||!l.isBuffer(d)){var c=n(l,new Float32Array([-1,-1,-1,4,4,-1]));(u=r(l,[{buffer:c,type:l.FLOAT,size:2}]))._triangleBuffer=c,a.set(l,u)}u.bind(),l.drawArrays(l.TRIANGLES,0,3),u.unbind()}},8008:function(h,s,t){var i=t(4930);h.exports=function(n,r,a){r=typeof r=="number"?r:1,a=a||": ";var l=n.split(/\r?\n/),u=String(l.length+r-1).length;return l.map(function(d,c){var x=c+r,g=String(x).length;return i(x,u-g)+a+d}).join(`
`)}},2153:function(h,s,t){"use strict";h.exports=function(r){var a=r.length;if(a===0)return[];if(a===1)return[0];for(var l=r[0].length,u=[r[0]],d=[0],c=1;c<a;++c)if(u.push(r[c]),n(u,l)){if(d.push(c),d.length===l+1)return d}else u.pop();return d};var i=t(417);function n(r,a){for(var l=new Array(a+1),u=0;u<r.length;++u)l[u]=r[u];for(u=0;u<=r.length;++u){for(var d=r.length;d<=a;++d){for(var c=new Array(a),x=0;x<a;++x)c[x]=Math.pow(d+1-u,x);l[d]=c}if(i.apply(void 0,l))return!0}return!1}},4653:function(h,s,t){"use strict";h.exports=function(r,a){return i(a).filter(function(l){for(var u=new Array(l.length),d=0;d<l.length;++d)u[d]=a[l[d]];return n(u)*r<1})};var i=t(4419),n=t(1778)},2350:function(h,s,t){h.exports=function(r,a){return n(i(r,a))};var i=t(4653),n=t(8691)},7896:function(h){h.exports=function(s){return atob(s)}},957:function(h,s,t){"use strict";h.exports=function(r,a){for(var l=a.length,u=new Array(l+1),d=0;d<l;++d){for(var c=new Array(l+1),x=0;x<=l;++x)c[x]=r[x][d];u[d]=c}for(u[l]=new Array(l+1),d=0;d<=l;++d)u[l][d]=1;var g=new Array(l+1);for(d=0;d<l;++d)g[d]=a[d];g[l]=1;var p=i(u,g),v=n(p[l+1]);v===0&&(v=1);var m=new Array(l+1);for(d=0;d<=l;++d)m[d]=n(p[d])/v;return m};var i=t(6606);function n(r){for(var a=0,l=0;l<r.length;++l)a+=r[l];return a}},1539:function(h,s,t){"use strict";var i=t(8524);h.exports=function(n,r){return i(n[0].mul(r[1]).add(r[0].mul(n[1])),n[1].mul(r[1]))}},8846:function(h){"use strict";h.exports=function(s,t){return s[0].mul(t[1]).cmp(t[0].mul(s[1]))}},9189:function(h,s,t){"use strict";var i=t(8524);h.exports=function(n,r){return i(n[0].mul(r[1]),n[1].mul(r[0]))}},5125:function(h,s,t){"use strict";var i=t(234),n=t(3218),r=t(5514),a=t(2813),l=t(8524),u=t(9189);h.exports=function d(c,x){if(i(c))return x?u(c,d(x)):[c[0].clone(),c[1].clone()];var g,p,v=0;if(n(c))g=c.clone();else if(typeof c=="string")g=a(c);else{if(c===0)return[r(0),r(1)];if(c===Math.floor(c))g=r(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),v-=256;g=r(c)}}if(i(x))g.mul(x[1]),p=x[0].clone();else if(n(x))p=x.clone();else if(typeof x=="string")p=a(x);else if(x)if(x===Math.floor(x))p=r(x);else{for(;x!==Math.floor(x);)x*=Math.pow(2,256),v+=256;p=r(x)}else p=r(1);return v>0?g=g.ushln(v):v<0&&(p=p.ushln(-v)),l(g,p)}},234:function(h,s,t){"use strict";var i=t(3218);h.exports=function(n){return Array.isArray(n)&&n.length===2&&i(n[0])&&i(n[1])}},4275:function(h,s,t){"use strict";var i=t(1928);h.exports=function(n){return n.cmp(new i(0))}},9958:function(h,s,t){"use strict";var i=t(4275);h.exports=function(n){var r=n.length,a=n.words,l=0;if(r===1)l=a[0];else if(r===2)l=a[0]+67108864*a[1];else for(var u=0;u<r;u++)l+=a[u]*Math.pow(67108864,u);return i(n)*l}},1112:function(h,s,t){"use strict";var i=t(8362),n=t(2288).countTrailingZeros;h.exports=function(r){var a=n(i.lo(r));if(a<32)return a;var l=n(i.hi(r));return l>20?52:l+32}},3218:function(h,s,t){"use strict";t(1928),h.exports=function(i){return i&&typeof i=="object"&&Boolean(i.words)}},5514:function(h,s,t){"use strict";var i=t(1928),n=t(8362);h.exports=function(r){var a=n.exponent(r);return a<52?new i(r):new i(r*Math.pow(2,52-a)).ushln(a-52)}},8524:function(h,s,t){"use strict";var i=t(5514),n=t(4275);h.exports=function(r,a){var l=n(r),u=n(a);if(l===0)return[i(0),i(1)];if(u===0)return[i(0),i(0)];u<0&&(r=r.neg(),a=a.neg());var d=r.gcd(a);return d.cmpn(1)?[r.div(d),a.div(d)]:[r,a]}},2813:function(h,s,t){"use strict";var i=t(1928);h.exports=function(n){return new i(n)}},3962:function(h,s,t){"use strict";var i=t(8524);h.exports=function(n,r){return i(n[0].mul(r[0]),n[1].mul(r[1]))}},4951:function(h,s,t){"use strict";var i=t(4275);h.exports=function(n){return i(n[0])*i(n[1])}},4354:function(h,s,t){"use strict";var i=t(8524);h.exports=function(n,r){return i(n[0].mul(r[1]).sub(n[1].mul(r[0])),n[1].mul(r[1]))}},7999:function(h,s,t){"use strict";var i=t(9958),n=t(1112);h.exports=function(r){var a=r[0],l=r[1];if(a.cmpn(0)===0)return 0;var u=a.abs().divmod(l.abs()),d=u.div,c=i(d),x=u.mod,g=a.negative!==l.negative?-1:1;if(x.cmpn(0)===0)return g*c;if(c){var p=n(c)+4;return g*(c+(m=i(x.ushln(p).divRound(l)))*Math.pow(2,-p))}var v=l.bitLength()-x.bitLength()+53,m=i(x.ushln(v).divRound(l));return v<1023?g*m*Math.pow(2,-v):g*(m*=Math.pow(2,-1023))*Math.pow(2,1023-v)}},5070:function(h){"use strict";function s(l,u,d,c,x){for(var g=x+1;c<=x;){var p=c+x>>>1,v=l[p];(d!==void 0?d(v,u):v-u)>=0?(g=p,x=p-1):c=p+1}return g}function t(l,u,d,c,x){for(var g=x+1;c<=x;){var p=c+x>>>1,v=l[p];(d!==void 0?d(v,u):v-u)>0?(g=p,x=p-1):c=p+1}return g}function i(l,u,d,c,x){for(var g=c-1;c<=x;){var p=c+x>>>1,v=l[p];(d!==void 0?d(v,u):v-u)<0?(g=p,c=p+1):x=p-1}return g}function n(l,u,d,c,x){for(var g=c-1;c<=x;){var p=c+x>>>1,v=l[p];(d!==void 0?d(v,u):v-u)<=0?(g=p,c=p+1):x=p-1}return g}function r(l,u,d,c,x){for(;c<=x;){var g=c+x>>>1,p=l[g],v=d!==void 0?d(p,u):p-u;if(v===0)return g;v<=0?c=g+1:x=g-1}return-1}function a(l,u,d,c,x,g){return typeof d=="function"?g(l,u,d,c===void 0?0:0|c,x===void 0?l.length-1:0|x):g(l,u,void 0,d===void 0?0:0|d,c===void 0?l.length-1:0|c)}h.exports={ge:function(l,u,d,c,x){return a(l,u,d,c,x,s)},gt:function(l,u,d,c,x){return a(l,u,d,c,x,t)},lt:function(l,u,d,c,x){return a(l,u,d,c,x,i)},le:function(l,u,d,c,x){return a(l,u,d,c,x,n)},eq:function(l,u,d,c,x){return a(l,u,d,c,x,r)}}},2288:function(h,s){"use strict";function t(n){var r=32;return(n&=-n)&&r--,65535&n&&(r-=16),16711935&n&&(r-=8),252645135&n&&(r-=4),858993459&n&&(r-=2),1431655765&n&&(r-=1),r}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(n){return(n>0)-(n<0)},s.abs=function(n){var r=n>>31;return(n^r)-r},s.min=function(n,r){return r^(n^r)&-(n<r)},s.max=function(n,r){return n^(n^r)&-(n<r)},s.isPow2=function(n){return!(n&n-1||!n)},s.log2=function(n){var r,a;return r=(n>65535)<<4,r|=a=((n>>>=r)>255)<<3,r|=a=((n>>>=a)>15)<<2,(r|=a=((n>>>=a)>3)<<1)|(n>>>=a)>>1},s.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},s.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,1+((n|=n>>>8)|n>>>16)},s.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},s.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var i=new Array(256);(function(n){for(var r=0;r<256;++r){var a=r,l=r,u=7;for(a>>>=1;a;a>>>=1)l<<=1,l|=1&a,--u;n[r]=l<<u&255}})(i),s.reverse=function(n){return i[255&n]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},s.interleave2=function(n,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},s.deinterleave2=function(n,r){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>r&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},s.interleave3=function(n,r,a){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(n,r){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>r&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},s.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>t(n)+1}},1928:function(h,s,t){(function(i,n){"use strict";function r(D,N){if(!D)throw new Error(N||"Assertion failed")}function a(D,N){D.super_=N;var W=function(){};W.prototype=N.prototype,D.prototype=new W,D.prototype.constructor=D}function l(D,N,W){if(l.isBN(D))return D;this.negative=0,this.words=null,this.length=0,this.red=null,D!==null&&(N!=="le"&&N!=="be"||(W=N,N=10),this._init(D||0,N||10,W||"be"))}var u;typeof i=="object"?i.exports=l:n.BN=l,l.BN=l,l.wordSize=26;try{u=typeof window!="undefined"&&window.Buffer!==void 0?window.Buffer:t(6601).Buffer}catch(D){}function d(D,N){var W=D.charCodeAt(N);return W>=65&&W<=70?W-55:W>=97&&W<=102?W-87:W-48&15}function c(D,N,W){var F=d(D,W);return W-1>=N&&(F|=d(D,W-1)<<4),F}function x(D,N,W,F){for(var U=0,V=Math.min(D.length,W),te=N;te<V;te++){var J=D.charCodeAt(te)-48;U*=F,U+=J>=49?J-49+10:J>=17?J-17+10:J}return U}l.isBN=function(D){return D instanceof l||D!==null&&typeof D=="object"&&D.constructor.wordSize===l.wordSize&&Array.isArray(D.words)},l.max=function(D,N){return D.cmp(N)>0?D:N},l.min=function(D,N){return D.cmp(N)<0?D:N},l.prototype._init=function(D,N,W){if(typeof D=="number")return this._initNumber(D,N,W);if(typeof D=="object")return this._initArray(D,N,W);N==="hex"&&(N=16),r(N===(0|N)&&N>=2&&N<=36);var F=0;(D=D.toString().replace(/\s+/g,""))[0]==="-"&&(F++,this.negative=1),F<D.length&&(N===16?this._parseHex(D,F,W):(this._parseBase(D,N,F),W==="le"&&this._initArray(this.toArray(),N,W)))},l.prototype._initNumber=function(D,N,W){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[67108863&D],this.length=1):D<4503599627370496?(this.words=[67108863&D,D/67108864&67108863],this.length=2):(r(D<9007199254740992),this.words=[67108863&D,D/67108864&67108863,1],this.length=3),W==="le"&&this._initArray(this.toArray(),N,W)},l.prototype._initArray=function(D,N,W){if(r(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var U,V,te=0;if(W==="be")for(F=D.length-1,U=0;F>=0;F-=3)V=D[F]|D[F-1]<<8|D[F-2]<<16,this.words[U]|=V<<te&67108863,this.words[U+1]=V>>>26-te&67108863,(te+=24)>=26&&(te-=26,U++);else if(W==="le")for(F=0,U=0;F<D.length;F+=3)V=D[F]|D[F+1]<<8|D[F+2]<<16,this.words[U]|=V<<te&67108863,this.words[U+1]=V>>>26-te&67108863,(te+=24)>=26&&(te-=26,U++);return this.strip()},l.prototype._parseHex=function(D,N,W){this.length=Math.ceil((D.length-N)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var U,V=0,te=0;if(W==="be")for(F=D.length-1;F>=N;F-=2)U=c(D,N,F)<<V,this.words[te]|=67108863&U,V>=18?(V-=18,te+=1,this.words[te]|=U>>>26):V+=8;else for(F=(D.length-N)%2==0?N+1:N;F<D.length;F+=2)U=c(D,N,F)<<V,this.words[te]|=67108863&U,V>=18?(V-=18,te+=1,this.words[te]|=U>>>26):V+=8;this.strip()},l.prototype._parseBase=function(D,N,W){this.words=[0],this.length=1;for(var F=0,U=1;U<=67108863;U*=N)F++;F--,U=U/N|0;for(var V=D.length-W,te=V%F,J=Math.min(V,V-te)+W,K=0,X=W;X<J;X+=F)K=x(D,X,X+F,N),this.imuln(U),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K);if(te!==0){var Z=1;for(K=x(D,X,D.length,N),X=0;X<te;X++)Z*=N;this.imuln(Z),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K)}this.strip()},l.prototype.copy=function(D){D.words=new Array(this.length);for(var N=0;N<this.length;N++)D.words[N]=this.words[N];D.length=this.length,D.negative=this.negative,D.red=this.red},l.prototype.clone=function(){var D=new l(null);return this.copy(D),D},l.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(D,N,W){W.negative=N.negative^D.negative;var F=D.length+N.length|0;W.length=F,F=F-1|0;var U=0|D.words[0],V=0|N.words[0],te=U*V,J=67108863&te,K=te/67108864|0;W.words[0]=J;for(var X=1;X<F;X++){for(var Z=K>>>26,$=67108863&K,re=Math.min(X,N.length-1),oe=Math.max(0,X-D.length+1);oe<=re;oe++){var ie=X-oe|0;Z+=(te=(U=0|D.words[ie])*(V=0|N.words[oe])+$)/67108864|0,$=67108863&te}W.words[X]=0|$,K=0|Z}return K!==0?W.words[X]=0|K:W.length--,W.strip()}l.prototype.toString=function(D,N){var W;if(N=0|N||1,(D=D||10)===16||D==="hex"){W="";for(var F=0,U=0,V=0;V<this.length;V++){var te=this.words[V],J=(16777215&(te<<F|U)).toString(16);W=(U=te>>>24-F&16777215)!=0||V!==this.length-1?g[6-J.length]+J+W:J+W,(F+=2)>=26&&(F-=26,V--)}for(U!==0&&(W=U.toString(16)+W);W.length%N!=0;)W="0"+W;return this.negative!==0&&(W="-"+W),W}if(D===(0|D)&&D>=2&&D<=36){var K=p[D],X=v[D];W="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var $=Z.modn(X).toString(D);W=(Z=Z.idivn(X)).isZero()?$+W:g[K-$.length]+$+W}for(this.isZero()&&(W="0"+W);W.length%N!=0;)W="0"+W;return this.negative!==0&&(W="-"+W),W}r(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=67108864*this.words[1]:this.length===3&&this.words[2]===1?D+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(D,N){return r(u!==void 0),this.toArrayLike(u,D,N)},l.prototype.toArray=function(D,N){return this.toArrayLike(Array,D,N)},l.prototype.toArrayLike=function(D,N,W){var F=this.byteLength(),U=W||Math.max(1,F);r(F<=U,"byte array longer than desired length"),r(U>0,"Requested array length <= 0"),this.strip();var V,te,J=N==="le",K=new D(U),X=this.clone();if(J){for(te=0;!X.isZero();te++)V=X.andln(255),X.iushrn(8),K[te]=V;for(;te<U;te++)K[te]=0}else{for(te=0;te<U-F;te++)K[te]=0;for(te=0;!X.isZero();te++)V=X.andln(255),X.iushrn(8),K[U-te-1]=V}return K},Math.clz32?l.prototype._countBits=function(D){return 32-Math.clz32(D)}:l.prototype._countBits=function(D){var N=D,W=0;return N>=4096&&(W+=13,N>>>=13),N>=64&&(W+=7,N>>>=7),N>=8&&(W+=4,N>>>=4),N>=2&&(W+=2,N>>>=2),W+N},l.prototype._zeroBits=function(D){if(D===0)return 26;var N=D,W=0;return(8191&N)==0&&(W+=13,N>>>=13),(127&N)==0&&(W+=7,N>>>=7),(15&N)==0&&(W+=4,N>>>=4),(3&N)==0&&(W+=2,N>>>=2),(1&N)==0&&W++,W},l.prototype.bitLength=function(){var D=this.words[this.length-1],N=this._countBits(D);return 26*(this.length-1)+N},l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,N=0;N<this.length;N++){var W=this._zeroBits(this.words[N]);if(D+=W,W!==26)break}return D},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},l.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var N=0;N<D.length;N++)this.words[N]=this.words[N]|D.words[N];return this.strip()},l.prototype.ior=function(D){return r((this.negative|D.negative)==0),this.iuor(D)},l.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},l.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},l.prototype.iuand=function(D){var N;N=this.length>D.length?D:this;for(var W=0;W<N.length;W++)this.words[W]=this.words[W]&D.words[W];return this.length=N.length,this.strip()},l.prototype.iand=function(D){return r((this.negative|D.negative)==0),this.iuand(D)},l.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},l.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},l.prototype.iuxor=function(D){var N,W;this.length>D.length?(N=this,W=D):(N=D,W=this);for(var F=0;F<W.length;F++)this.words[F]=N.words[F]^W.words[F];if(this!==N)for(;F<N.length;F++)this.words[F]=N.words[F];return this.length=N.length,this.strip()},l.prototype.ixor=function(D){return r((this.negative|D.negative)==0),this.iuxor(D)},l.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},l.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},l.prototype.inotn=function(D){r(typeof D=="number"&&D>=0);var N=0|Math.ceil(D/26),W=D%26;this._expand(N),W>0&&N--;for(var F=0;F<N;F++)this.words[F]=67108863&~this.words[F];return W>0&&(this.words[F]=~this.words[F]&67108863>>26-W),this.strip()},l.prototype.notn=function(D){return this.clone().inotn(D)},l.prototype.setn=function(D,N){r(typeof D=="number"&&D>=0);var W=D/26|0,F=D%26;return this._expand(W+1),this.words[W]=N?this.words[W]|1<<F:this.words[W]&~(1<<F),this.strip()},l.prototype.iadd=function(D){var N,W,F;if(this.negative!==0&&D.negative===0)return this.negative=0,N=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,N=this.isub(D),D.negative=1,N._normSign();this.length>D.length?(W=this,F=D):(W=D,F=this);for(var U=0,V=0;V<F.length;V++)N=(0|W.words[V])+(0|F.words[V])+U,this.words[V]=67108863&N,U=N>>>26;for(;U!==0&&V<W.length;V++)N=(0|W.words[V])+U,this.words[V]=67108863&N,U=N>>>26;if(this.length=W.length,U!==0)this.words[this.length]=U,this.length++;else if(W!==this)for(;V<W.length;V++)this.words[V]=W.words[V];return this},l.prototype.add=function(D){var N;return D.negative!==0&&this.negative===0?(D.negative=0,N=this.sub(D),D.negative^=1,N):D.negative===0&&this.negative!==0?(this.negative=0,N=D.sub(this),this.negative=1,N):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},l.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var N=this.iadd(D);return D.negative=1,N._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var W,F,U=this.cmp(D);if(U===0)return this.negative=0,this.length=1,this.words[0]=0,this;U>0?(W=this,F=D):(W=D,F=this);for(var V=0,te=0;te<F.length;te++)V=(N=(0|W.words[te])-(0|F.words[te])+V)>>26,this.words[te]=67108863&N;for(;V!==0&&te<W.length;te++)V=(N=(0|W.words[te])+V)>>26,this.words[te]=67108863&N;if(V===0&&te<W.length&&W!==this)for(;te<W.length;te++)this.words[te]=W.words[te];return this.length=Math.max(this.length,te),W!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(D){return this.clone().isub(D)};var y=function(D,N,W){var F,U,V,te=D.words,J=N.words,K=W.words,X=0,Z=0|te[0],$=8191&Z,re=Z>>>13,oe=0|te[1],ie=8191&oe,ue=oe>>>13,me=0|te[2],be=8191&me,ge=me>>>13,de=0|te[3],ve=8191&de,pe=de>>>13,_e=0|te[4],Te=8191&_e,le=_e>>>13,ae=0|te[5],he=8191&ae,Se=ae>>>13,ke=0|te[6],Me=8191&ke,Ee=ke>>>13,De=0|te[7],fe=8191&De,xe=De>>>13,we=0|te[8],Oe=8191&we,ze=we>>>13,Pe=0|te[9],Ue=8191&Pe,Ve=Pe>>>13,Ze=0|J[0],it=8191&Ze,tt=Ze>>>13,dt=0|J[1],yt=8191&dt,vt=dt>>>13,et=0|J[2],Qe=8191&et,wt=et>>>13,It=0|J[3],Dt=8191&It,Ct=It>>>13,He=0|J[4],We=8191&He,Be=He>>>13,Ge=0|J[5],at=8191&Ge,nt=Ge>>>13,Re=0|J[6],Fe=8191&Re,rt=Re>>>13,Ye=0|J[7],ct=8191&Ye,pt=Ye>>>13,gt=0|J[8],ut=8191&gt,Mt=gt>>>13,xt=0|J[9],mt=8191&xt,Et=xt>>>13;W.negative=D.negative^N.negative,W.length=19;var Lt=(X+(F=Math.imul($,it))|0)+((8191&(U=(U=Math.imul($,tt))+Math.imul(re,it)|0))<<13)|0;X=((V=Math.imul(re,tt))+(U>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,F=Math.imul(ie,it),U=(U=Math.imul(ie,tt))+Math.imul(ue,it)|0,V=Math.imul(ue,tt);var zt=(X+(F=F+Math.imul($,yt)|0)|0)+((8191&(U=(U=U+Math.imul($,vt)|0)+Math.imul(re,yt)|0))<<13)|0;X=((V=V+Math.imul(re,vt)|0)+(U>>>13)|0)+(zt>>>26)|0,zt&=67108863,F=Math.imul(be,it),U=(U=Math.imul(be,tt))+Math.imul(ge,it)|0,V=Math.imul(ge,tt),F=F+Math.imul(ie,yt)|0,U=(U=U+Math.imul(ie,vt)|0)+Math.imul(ue,yt)|0,V=V+Math.imul(ue,vt)|0;var Wt=(X+(F=F+Math.imul($,Qe)|0)|0)+((8191&(U=(U=U+Math.imul($,wt)|0)+Math.imul(re,Qe)|0))<<13)|0;X=((V=V+Math.imul(re,wt)|0)+(U>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,F=Math.imul(ve,it),U=(U=Math.imul(ve,tt))+Math.imul(pe,it)|0,V=Math.imul(pe,tt),F=F+Math.imul(be,yt)|0,U=(U=U+Math.imul(be,vt)|0)+Math.imul(ge,yt)|0,V=V+Math.imul(ge,vt)|0,F=F+Math.imul(ie,Qe)|0,U=(U=U+Math.imul(ie,wt)|0)+Math.imul(ue,Qe)|0,V=V+Math.imul(ue,wt)|0;var rn=(X+(F=F+Math.imul($,Dt)|0)|0)+((8191&(U=(U=U+Math.imul($,Ct)|0)+Math.imul(re,Dt)|0))<<13)|0;X=((V=V+Math.imul(re,Ct)|0)+(U>>>13)|0)+(rn>>>26)|0,rn&=67108863,F=Math.imul(Te,it),U=(U=Math.imul(Te,tt))+Math.imul(le,it)|0,V=Math.imul(le,tt),F=F+Math.imul(ve,yt)|0,U=(U=U+Math.imul(ve,vt)|0)+Math.imul(pe,yt)|0,V=V+Math.imul(pe,vt)|0,F=F+Math.imul(be,Qe)|0,U=(U=U+Math.imul(be,wt)|0)+Math.imul(ge,Qe)|0,V=V+Math.imul(ge,wt)|0,F=F+Math.imul(ie,Dt)|0,U=(U=U+Math.imul(ie,Ct)|0)+Math.imul(ue,Dt)|0,V=V+Math.imul(ue,Ct)|0;var Ut=(X+(F=F+Math.imul($,We)|0)|0)+((8191&(U=(U=U+Math.imul($,Be)|0)+Math.imul(re,We)|0))<<13)|0;X=((V=V+Math.imul(re,Be)|0)+(U>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,F=Math.imul(he,it),U=(U=Math.imul(he,tt))+Math.imul(Se,it)|0,V=Math.imul(Se,tt),F=F+Math.imul(Te,yt)|0,U=(U=U+Math.imul(Te,vt)|0)+Math.imul(le,yt)|0,V=V+Math.imul(le,vt)|0,F=F+Math.imul(ve,Qe)|0,U=(U=U+Math.imul(ve,wt)|0)+Math.imul(pe,Qe)|0,V=V+Math.imul(pe,wt)|0,F=F+Math.imul(be,Dt)|0,U=(U=U+Math.imul(be,Ct)|0)+Math.imul(ge,Dt)|0,V=V+Math.imul(ge,Ct)|0,F=F+Math.imul(ie,We)|0,U=(U=U+Math.imul(ie,Be)|0)+Math.imul(ue,We)|0,V=V+Math.imul(ue,Be)|0;var Vt=(X+(F=F+Math.imul($,at)|0)|0)+((8191&(U=(U=U+Math.imul($,nt)|0)+Math.imul(re,at)|0))<<13)|0;X=((V=V+Math.imul(re,nt)|0)+(U>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,F=Math.imul(Me,it),U=(U=Math.imul(Me,tt))+Math.imul(Ee,it)|0,V=Math.imul(Ee,tt),F=F+Math.imul(he,yt)|0,U=(U=U+Math.imul(he,vt)|0)+Math.imul(Se,yt)|0,V=V+Math.imul(Se,vt)|0,F=F+Math.imul(Te,Qe)|0,U=(U=U+Math.imul(Te,wt)|0)+Math.imul(le,Qe)|0,V=V+Math.imul(le,wt)|0,F=F+Math.imul(ve,Dt)|0,U=(U=U+Math.imul(ve,Ct)|0)+Math.imul(pe,Dt)|0,V=V+Math.imul(pe,Ct)|0,F=F+Math.imul(be,We)|0,U=(U=U+Math.imul(be,Be)|0)+Math.imul(ge,We)|0,V=V+Math.imul(ge,Be)|0,F=F+Math.imul(ie,at)|0,U=(U=U+Math.imul(ie,nt)|0)+Math.imul(ue,at)|0,V=V+Math.imul(ue,nt)|0;var en=(X+(F=F+Math.imul($,Fe)|0)|0)+((8191&(U=(U=U+Math.imul($,rt)|0)+Math.imul(re,Fe)|0))<<13)|0;X=((V=V+Math.imul(re,rt)|0)+(U>>>13)|0)+(en>>>26)|0,en&=67108863,F=Math.imul(fe,it),U=(U=Math.imul(fe,tt))+Math.imul(xe,it)|0,V=Math.imul(xe,tt),F=F+Math.imul(Me,yt)|0,U=(U=U+Math.imul(Me,vt)|0)+Math.imul(Ee,yt)|0,V=V+Math.imul(Ee,vt)|0,F=F+Math.imul(he,Qe)|0,U=(U=U+Math.imul(he,wt)|0)+Math.imul(Se,Qe)|0,V=V+Math.imul(Se,wt)|0,F=F+Math.imul(Te,Dt)|0,U=(U=U+Math.imul(Te,Ct)|0)+Math.imul(le,Dt)|0,V=V+Math.imul(le,Ct)|0,F=F+Math.imul(ve,We)|0,U=(U=U+Math.imul(ve,Be)|0)+Math.imul(pe,We)|0,V=V+Math.imul(pe,Be)|0,F=F+Math.imul(be,at)|0,U=(U=U+Math.imul(be,nt)|0)+Math.imul(ge,at)|0,V=V+Math.imul(ge,nt)|0,F=F+Math.imul(ie,Fe)|0,U=(U=U+Math.imul(ie,rt)|0)+Math.imul(ue,Fe)|0,V=V+Math.imul(ue,rt)|0;var Ln=(X+(F=F+Math.imul($,ct)|0)|0)+((8191&(U=(U=U+Math.imul($,pt)|0)+Math.imul(re,ct)|0))<<13)|0;X=((V=V+Math.imul(re,pt)|0)+(U>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,F=Math.imul(Oe,it),U=(U=Math.imul(Oe,tt))+Math.imul(ze,it)|0,V=Math.imul(ze,tt),F=F+Math.imul(fe,yt)|0,U=(U=U+Math.imul(fe,vt)|0)+Math.imul(xe,yt)|0,V=V+Math.imul(xe,vt)|0,F=F+Math.imul(Me,Qe)|0,U=(U=U+Math.imul(Me,wt)|0)+Math.imul(Ee,Qe)|0,V=V+Math.imul(Ee,wt)|0,F=F+Math.imul(he,Dt)|0,U=(U=U+Math.imul(he,Ct)|0)+Math.imul(Se,Dt)|0,V=V+Math.imul(Se,Ct)|0,F=F+Math.imul(Te,We)|0,U=(U=U+Math.imul(Te,Be)|0)+Math.imul(le,We)|0,V=V+Math.imul(le,Be)|0,F=F+Math.imul(ve,at)|0,U=(U=U+Math.imul(ve,nt)|0)+Math.imul(pe,at)|0,V=V+Math.imul(pe,nt)|0,F=F+Math.imul(be,Fe)|0,U=(U=U+Math.imul(be,rt)|0)+Math.imul(ge,Fe)|0,V=V+Math.imul(ge,rt)|0,F=F+Math.imul(ie,ct)|0,U=(U=U+Math.imul(ie,pt)|0)+Math.imul(ue,ct)|0,V=V+Math.imul(ue,pt)|0;var An=(X+(F=F+Math.imul($,ut)|0)|0)+((8191&(U=(U=U+Math.imul($,Mt)|0)+Math.imul(re,ut)|0))<<13)|0;X=((V=V+Math.imul(re,Mt)|0)+(U>>>13)|0)+(An>>>26)|0,An&=67108863,F=Math.imul(Ue,it),U=(U=Math.imul(Ue,tt))+Math.imul(Ve,it)|0,V=Math.imul(Ve,tt),F=F+Math.imul(Oe,yt)|0,U=(U=U+Math.imul(Oe,vt)|0)+Math.imul(ze,yt)|0,V=V+Math.imul(ze,vt)|0,F=F+Math.imul(fe,Qe)|0,U=(U=U+Math.imul(fe,wt)|0)+Math.imul(xe,Qe)|0,V=V+Math.imul(xe,wt)|0,F=F+Math.imul(Me,Dt)|0,U=(U=U+Math.imul(Me,Ct)|0)+Math.imul(Ee,Dt)|0,V=V+Math.imul(Ee,Ct)|0,F=F+Math.imul(he,We)|0,U=(U=U+Math.imul(he,Be)|0)+Math.imul(Se,We)|0,V=V+Math.imul(Se,Be)|0,F=F+Math.imul(Te,at)|0,U=(U=U+Math.imul(Te,nt)|0)+Math.imul(le,at)|0,V=V+Math.imul(le,nt)|0,F=F+Math.imul(ve,Fe)|0,U=(U=U+Math.imul(ve,rt)|0)+Math.imul(pe,Fe)|0,V=V+Math.imul(pe,rt)|0,F=F+Math.imul(be,ct)|0,U=(U=U+Math.imul(be,pt)|0)+Math.imul(ge,ct)|0,V=V+Math.imul(ge,pt)|0,F=F+Math.imul(ie,ut)|0,U=(U=U+Math.imul(ie,Mt)|0)+Math.imul(ue,ut)|0,V=V+Math.imul(ue,Mt)|0;var hn=(X+(F=F+Math.imul($,mt)|0)|0)+((8191&(U=(U=U+Math.imul($,Et)|0)+Math.imul(re,mt)|0))<<13)|0;X=((V=V+Math.imul(re,Et)|0)+(U>>>13)|0)+(hn>>>26)|0,hn&=67108863,F=Math.imul(Ue,yt),U=(U=Math.imul(Ue,vt))+Math.imul(Ve,yt)|0,V=Math.imul(Ve,vt),F=F+Math.imul(Oe,Qe)|0,U=(U=U+Math.imul(Oe,wt)|0)+Math.imul(ze,Qe)|0,V=V+Math.imul(ze,wt)|0,F=F+Math.imul(fe,Dt)|0,U=(U=U+Math.imul(fe,Ct)|0)+Math.imul(xe,Dt)|0,V=V+Math.imul(xe,Ct)|0,F=F+Math.imul(Me,We)|0,U=(U=U+Math.imul(Me,Be)|0)+Math.imul(Ee,We)|0,V=V+Math.imul(Ee,Be)|0,F=F+Math.imul(he,at)|0,U=(U=U+Math.imul(he,nt)|0)+Math.imul(Se,at)|0,V=V+Math.imul(Se,nt)|0,F=F+Math.imul(Te,Fe)|0,U=(U=U+Math.imul(Te,rt)|0)+Math.imul(le,Fe)|0,V=V+Math.imul(le,rt)|0,F=F+Math.imul(ve,ct)|0,U=(U=U+Math.imul(ve,pt)|0)+Math.imul(pe,ct)|0,V=V+Math.imul(pe,pt)|0,F=F+Math.imul(be,ut)|0,U=(U=U+Math.imul(be,Mt)|0)+Math.imul(ge,ut)|0,V=V+Math.imul(ge,Mt)|0;var Xt=(X+(F=F+Math.imul(ie,mt)|0)|0)+((8191&(U=(U=U+Math.imul(ie,Et)|0)+Math.imul(ue,mt)|0))<<13)|0;X=((V=V+Math.imul(ue,Et)|0)+(U>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,F=Math.imul(Ue,Qe),U=(U=Math.imul(Ue,wt))+Math.imul(Ve,Qe)|0,V=Math.imul(Ve,wt),F=F+Math.imul(Oe,Dt)|0,U=(U=U+Math.imul(Oe,Ct)|0)+Math.imul(ze,Dt)|0,V=V+Math.imul(ze,Ct)|0,F=F+Math.imul(fe,We)|0,U=(U=U+Math.imul(fe,Be)|0)+Math.imul(xe,We)|0,V=V+Math.imul(xe,Be)|0,F=F+Math.imul(Me,at)|0,U=(U=U+Math.imul(Me,nt)|0)+Math.imul(Ee,at)|0,V=V+Math.imul(Ee,nt)|0,F=F+Math.imul(he,Fe)|0,U=(U=U+Math.imul(he,rt)|0)+Math.imul(Se,Fe)|0,V=V+Math.imul(Se,rt)|0,F=F+Math.imul(Te,ct)|0,U=(U=U+Math.imul(Te,pt)|0)+Math.imul(le,ct)|0,V=V+Math.imul(le,pt)|0,F=F+Math.imul(ve,ut)|0,U=(U=U+Math.imul(ve,Mt)|0)+Math.imul(pe,ut)|0,V=V+Math.imul(pe,Mt)|0;var ln=(X+(F=F+Math.imul(be,mt)|0)|0)+((8191&(U=(U=U+Math.imul(be,Et)|0)+Math.imul(ge,mt)|0))<<13)|0;X=((V=V+Math.imul(ge,Et)|0)+(U>>>13)|0)+(ln>>>26)|0,ln&=67108863,F=Math.imul(Ue,Dt),U=(U=Math.imul(Ue,Ct))+Math.imul(Ve,Dt)|0,V=Math.imul(Ve,Ct),F=F+Math.imul(Oe,We)|0,U=(U=U+Math.imul(Oe,Be)|0)+Math.imul(ze,We)|0,V=V+Math.imul(ze,Be)|0,F=F+Math.imul(fe,at)|0,U=(U=U+Math.imul(fe,nt)|0)+Math.imul(xe,at)|0,V=V+Math.imul(xe,nt)|0,F=F+Math.imul(Me,Fe)|0,U=(U=U+Math.imul(Me,rt)|0)+Math.imul(Ee,Fe)|0,V=V+Math.imul(Ee,rt)|0,F=F+Math.imul(he,ct)|0,U=(U=U+Math.imul(he,pt)|0)+Math.imul(Se,ct)|0,V=V+Math.imul(Se,pt)|0,F=F+Math.imul(Te,ut)|0,U=(U=U+Math.imul(Te,Mt)|0)+Math.imul(le,ut)|0,V=V+Math.imul(le,Mt)|0;var nn=(X+(F=F+Math.imul(ve,mt)|0)|0)+((8191&(U=(U=U+Math.imul(ve,Et)|0)+Math.imul(pe,mt)|0))<<13)|0;X=((V=V+Math.imul(pe,Et)|0)+(U>>>13)|0)+(nn>>>26)|0,nn&=67108863,F=Math.imul(Ue,We),U=(U=Math.imul(Ue,Be))+Math.imul(Ve,We)|0,V=Math.imul(Ve,Be),F=F+Math.imul(Oe,at)|0,U=(U=U+Math.imul(Oe,nt)|0)+Math.imul(ze,at)|0,V=V+Math.imul(ze,nt)|0,F=F+Math.imul(fe,Fe)|0,U=(U=U+Math.imul(fe,rt)|0)+Math.imul(xe,Fe)|0,V=V+Math.imul(xe,rt)|0,F=F+Math.imul(Me,ct)|0,U=(U=U+Math.imul(Me,pt)|0)+Math.imul(Ee,ct)|0,V=V+Math.imul(Ee,pt)|0,F=F+Math.imul(he,ut)|0,U=(U=U+Math.imul(he,Mt)|0)+Math.imul(Se,ut)|0,V=V+Math.imul(Se,Mt)|0;var cn=(X+(F=F+Math.imul(Te,mt)|0)|0)+((8191&(U=(U=U+Math.imul(Te,Et)|0)+Math.imul(le,mt)|0))<<13)|0;X=((V=V+Math.imul(le,Et)|0)+(U>>>13)|0)+(cn>>>26)|0,cn&=67108863,F=Math.imul(Ue,at),U=(U=Math.imul(Ue,nt))+Math.imul(Ve,at)|0,V=Math.imul(Ve,nt),F=F+Math.imul(Oe,Fe)|0,U=(U=U+Math.imul(Oe,rt)|0)+Math.imul(ze,Fe)|0,V=V+Math.imul(ze,rt)|0,F=F+Math.imul(fe,ct)|0,U=(U=U+Math.imul(fe,pt)|0)+Math.imul(xe,ct)|0,V=V+Math.imul(xe,pt)|0,F=F+Math.imul(Me,ut)|0,U=(U=U+Math.imul(Me,Mt)|0)+Math.imul(Ee,ut)|0,V=V+Math.imul(Ee,Mt)|0;var Tn=(X+(F=F+Math.imul(he,mt)|0)|0)+((8191&(U=(U=U+Math.imul(he,Et)|0)+Math.imul(Se,mt)|0))<<13)|0;X=((V=V+Math.imul(Se,Et)|0)+(U>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,F=Math.imul(Ue,Fe),U=(U=Math.imul(Ue,rt))+Math.imul(Ve,Fe)|0,V=Math.imul(Ve,rt),F=F+Math.imul(Oe,ct)|0,U=(U=U+Math.imul(Oe,pt)|0)+Math.imul(ze,ct)|0,V=V+Math.imul(ze,pt)|0,F=F+Math.imul(fe,ut)|0,U=(U=U+Math.imul(fe,Mt)|0)+Math.imul(xe,ut)|0,V=V+Math.imul(xe,Mt)|0;var Mn=(X+(F=F+Math.imul(Me,mt)|0)|0)+((8191&(U=(U=U+Math.imul(Me,Et)|0)+Math.imul(Ee,mt)|0))<<13)|0;X=((V=V+Math.imul(Ee,Et)|0)+(U>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,F=Math.imul(Ue,ct),U=(U=Math.imul(Ue,pt))+Math.imul(Ve,ct)|0,V=Math.imul(Ve,pt),F=F+Math.imul(Oe,ut)|0,U=(U=U+Math.imul(Oe,Mt)|0)+Math.imul(ze,ut)|0,V=V+Math.imul(ze,Mt)|0;var zn=(X+(F=F+Math.imul(fe,mt)|0)|0)+((8191&(U=(U=U+Math.imul(fe,Et)|0)+Math.imul(xe,mt)|0))<<13)|0;X=((V=V+Math.imul(xe,Et)|0)+(U>>>13)|0)+(zn>>>26)|0,zn&=67108863,F=Math.imul(Ue,ut),U=(U=Math.imul(Ue,Mt))+Math.imul(Ve,ut)|0,V=Math.imul(Ve,Mt);var In=(X+(F=F+Math.imul(Oe,mt)|0)|0)+((8191&(U=(U=U+Math.imul(Oe,Et)|0)+Math.imul(ze,mt)|0))<<13)|0;X=((V=V+Math.imul(ze,Et)|0)+(U>>>13)|0)+(In>>>26)|0,In&=67108863;var Pn=(X+(F=Math.imul(Ue,mt))|0)+((8191&(U=(U=Math.imul(Ue,Et))+Math.imul(Ve,mt)|0))<<13)|0;return X=((V=Math.imul(Ve,Et))+(U>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,K[0]=Lt,K[1]=zt,K[2]=Wt,K[3]=rn,K[4]=Ut,K[5]=Vt,K[6]=en,K[7]=Ln,K[8]=An,K[9]=hn,K[10]=Xt,K[11]=ln,K[12]=nn,K[13]=cn,K[14]=Tn,K[15]=Mn,K[16]=zn,K[17]=In,K[18]=Pn,X!==0&&(K[19]=X,W.length++),W};function _(D,N,W){return new f().mulp(D,N,W)}function f(D,N){this.x=D,this.y=N}Math.imul||(y=m),l.prototype.mulTo=function(D,N){var W,F=this.length+D.length;return W=this.length===10&&D.length===10?y(this,D,N):F<63?m(this,D,N):F<1024?function(U,V,te){te.negative=V.negative^U.negative,te.length=U.length+V.length;for(var J=0,K=0,X=0;X<te.length-1;X++){var Z=K;K=0;for(var $=67108863&J,re=Math.min(X,V.length-1),oe=Math.max(0,X-U.length+1);oe<=re;oe++){var ie=X-oe,ue=(0|U.words[ie])*(0|V.words[oe]),me=67108863&ue;$=67108863&(me=me+$|0),K+=(Z=(Z=Z+(ue/67108864|0)|0)+(me>>>26)|0)>>>26,Z&=67108863}te.words[X]=$,J=Z,Z=K}return J!==0?te.words[X]=J:te.length--,te.strip()}(this,D,N):_(this,D,N),W},f.prototype.makeRBT=function(D){for(var N=new Array(D),W=l.prototype._countBits(D)-1,F=0;F<D;F++)N[F]=this.revBin(F,W,D);return N},f.prototype.revBin=function(D,N,W){if(D===0||D===W-1)return D;for(var F=0,U=0;U<N;U++)F|=(1&D)<<N-U-1,D>>=1;return F},f.prototype.permute=function(D,N,W,F,U,V){for(var te=0;te<V;te++)F[te]=N[D[te]],U[te]=W[D[te]]},f.prototype.transform=function(D,N,W,F,U,V){this.permute(V,D,N,W,F,U);for(var te=1;te<U;te<<=1)for(var J=te<<1,K=Math.cos(2*Math.PI/J),X=Math.sin(2*Math.PI/J),Z=0;Z<U;Z+=J)for(var $=K,re=X,oe=0;oe<te;oe++){var ie=W[Z+oe],ue=F[Z+oe],me=W[Z+oe+te],be=F[Z+oe+te],ge=$*me-re*be;be=$*be+re*me,me=ge,W[Z+oe]=ie+me,F[Z+oe]=ue+be,W[Z+oe+te]=ie-me,F[Z+oe+te]=ue-be,oe!==J&&(ge=K*$-X*re,re=K*re+X*$,$=ge)}},f.prototype.guessLen13b=function(D,N){var W=1|Math.max(N,D),F=1&W,U=0;for(W=W/2|0;W;W>>>=1)U++;return 1<<U+1+F},f.prototype.conjugate=function(D,N,W){if(!(W<=1))for(var F=0;F<W/2;F++){var U=D[F];D[F]=D[W-F-1],D[W-F-1]=U,U=N[F],N[F]=-N[W-F-1],N[W-F-1]=-U}},f.prototype.normalize13b=function(D,N){for(var W=0,F=0;F<N/2;F++){var U=8192*Math.round(D[2*F+1]/N)+Math.round(D[2*F]/N)+W;D[F]=67108863&U,W=U<67108864?0:U/67108864|0}return D},f.prototype.convert13b=function(D,N,W,F){for(var U=0,V=0;V<N;V++)U+=0|D[V],W[2*V]=8191&U,U>>>=13,W[2*V+1]=8191&U,U>>>=13;for(V=2*N;V<F;++V)W[V]=0;r(U===0),r((-8192&U)==0)},f.prototype.stub=function(D){for(var N=new Array(D),W=0;W<D;W++)N[W]=0;return N},f.prototype.mulp=function(D,N,W){var F=2*this.guessLen13b(D.length,N.length),U=this.makeRBT(F),V=this.stub(F),te=new Array(F),J=new Array(F),K=new Array(F),X=new Array(F),Z=new Array(F),$=new Array(F),re=W.words;re.length=F,this.convert13b(D.words,D.length,te,F),this.convert13b(N.words,N.length,X,F),this.transform(te,V,J,K,F,U),this.transform(X,V,Z,$,F,U);for(var oe=0;oe<F;oe++){var ie=J[oe]*Z[oe]-K[oe]*$[oe];K[oe]=J[oe]*$[oe]+K[oe]*Z[oe],J[oe]=ie}return this.conjugate(J,K,F),this.transform(J,K,re,V,F,U),this.conjugate(re,V,F),this.normalize13b(re,F),W.negative=D.negative^N.negative,W.length=D.length+N.length,W.strip()},l.prototype.mul=function(D){var N=new l(null);return N.words=new Array(this.length+D.length),this.mulTo(D,N)},l.prototype.mulf=function(D){var N=new l(null);return N.words=new Array(this.length+D.length),_(this,D,N)},l.prototype.imul=function(D){return this.clone().mulTo(D,this)},l.prototype.imuln=function(D){r(typeof D=="number"),r(D<67108864);for(var N=0,W=0;W<this.length;W++){var F=(0|this.words[W])*D,U=(67108863&F)+(67108863&N);N>>=26,N+=F/67108864|0,N+=U>>>26,this.words[W]=67108863&U}return N!==0&&(this.words[W]=N,this.length++),this},l.prototype.muln=function(D){return this.clone().imuln(D)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(D){var N=function(V){for(var te=new Array(V.bitLength()),J=0;J<te.length;J++){var K=J/26|0,X=J%26;te[J]=(V.words[K]&1<<X)>>>X}return te}(D);if(N.length===0)return new l(1);for(var W=this,F=0;F<N.length&&N[F]===0;F++,W=W.sqr());if(++F<N.length)for(var U=W.sqr();F<N.length;F++,U=U.sqr())N[F]!==0&&(W=W.mul(U));return W},l.prototype.iushln=function(D){r(typeof D=="number"&&D>=0);var N,W=D%26,F=(D-W)/26,U=67108863>>>26-W<<26-W;if(W!==0){var V=0;for(N=0;N<this.length;N++){var te=this.words[N]&U,J=(0|this.words[N])-te<<W;this.words[N]=J|V,V=te>>>26-W}V&&(this.words[N]=V,this.length++)}if(F!==0){for(N=this.length-1;N>=0;N--)this.words[N+F]=this.words[N];for(N=0;N<F;N++)this.words[N]=0;this.length+=F}return this.strip()},l.prototype.ishln=function(D){return r(this.negative===0),this.iushln(D)},l.prototype.iushrn=function(D,N,W){var F;r(typeof D=="number"&&D>=0),F=N?(N-N%26)/26:0;var U=D%26,V=Math.min((D-U)/26,this.length),te=67108863^67108863>>>U<<U,J=W;if(F-=V,F=Math.max(0,F),J){for(var K=0;K<V;K++)J.words[K]=this.words[K];J.length=V}if(V!==0)if(this.length>V)for(this.length-=V,K=0;K<this.length;K++)this.words[K]=this.words[K+V];else this.words[0]=0,this.length=1;var X=0;for(K=this.length-1;K>=0&&(X!==0||K>=F);K--){var Z=0|this.words[K];this.words[K]=X<<26-U|Z>>>U,X=Z&te}return J&&X!==0&&(J.words[J.length++]=X),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(D,N,W){return r(this.negative===0),this.iushrn(D,N,W)},l.prototype.shln=function(D){return this.clone().ishln(D)},l.prototype.ushln=function(D){return this.clone().iushln(D)},l.prototype.shrn=function(D){return this.clone().ishrn(D)},l.prototype.ushrn=function(D){return this.clone().iushrn(D)},l.prototype.testn=function(D){r(typeof D=="number"&&D>=0);var N=D%26,W=(D-N)/26,F=1<<N;return!(this.length<=W||!(this.words[W]&F))},l.prototype.imaskn=function(D){r(typeof D=="number"&&D>=0);var N=D%26,W=(D-N)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=W)return this;if(N!==0&&W++,this.length=Math.min(W,this.length),N!==0){var F=67108863^67108863>>>N<<N;this.words[this.length-1]&=F}return this.strip()},l.prototype.maskn=function(D){return this.clone().imaskn(D)},l.prototype.iaddn=function(D){return r(typeof D=="number"),r(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(0|this.words[0])<D?(this.words[0]=D-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},l.prototype._iaddn=function(D){this.words[0]+=D;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},l.prototype.isubn=function(D){if(r(typeof D=="number"),r(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},l.prototype.addn=function(D){return this.clone().iaddn(D)},l.prototype.subn=function(D){return this.clone().isubn(D)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(D,N,W){var F,U,V=D.length+W;this._expand(V);var te=0;for(F=0;F<D.length;F++){U=(0|this.words[F+W])+te;var J=(0|D.words[F])*N;te=((U-=67108863&J)>>26)-(J/67108864|0),this.words[F+W]=67108863&U}for(;F<this.length-W;F++)te=(U=(0|this.words[F+W])+te)>>26,this.words[F+W]=67108863&U;if(te===0)return this.strip();for(r(te===-1),te=0,F=0;F<this.length;F++)te=(U=-(0|this.words[F])+te)>>26,this.words[F]=67108863&U;return this.negative=1,this.strip()},l.prototype._wordDiv=function(D,N){var W=(this.length,D.length),F=this.clone(),U=D,V=0|U.words[U.length-1];(W=26-this._countBits(V))!=0&&(U=U.ushln(W),F.iushln(W),V=0|U.words[U.length-1]);var te,J=F.length-U.length;if(N!=="mod"){(te=new l(null)).length=J+1,te.words=new Array(te.length);for(var K=0;K<te.length;K++)te.words[K]=0}var X=F.clone()._ishlnsubmul(U,1,J);X.negative===0&&(F=X,te&&(te.words[J]=1));for(var Z=J-1;Z>=0;Z--){var $=67108864*(0|F.words[U.length+Z])+(0|F.words[U.length+Z-1]);for($=Math.min($/V|0,67108863),F._ishlnsubmul(U,$,Z);F.negative!==0;)$--,F.negative=0,F._ishlnsubmul(U,1,Z),F.isZero()||(F.negative^=1);te&&(te.words[Z]=$)}return te&&te.strip(),F.strip(),N!=="div"&&W!==0&&F.iushrn(W),{div:te||null,mod:F}},l.prototype.divmod=function(D,N,W){return r(!D.isZero()),this.isZero()?{div:new l(0),mod:new l(0)}:this.negative!==0&&D.negative===0?(V=this.neg().divmod(D,N),N!=="mod"&&(F=V.div.neg()),N!=="div"&&(U=V.mod.neg(),W&&U.negative!==0&&U.iadd(D)),{div:F,mod:U}):this.negative===0&&D.negative!==0?(V=this.divmod(D.neg(),N),N!=="mod"&&(F=V.div.neg()),{div:F,mod:V.mod}):(this.negative&D.negative)!=0?(V=this.neg().divmod(D.neg(),N),N!=="div"&&(U=V.mod.neg(),W&&U.negative!==0&&U.isub(D)),{div:V.div,mod:U}):D.length>this.length||this.cmp(D)<0?{div:new l(0),mod:this}:D.length===1?N==="div"?{div:this.divn(D.words[0]),mod:null}:N==="mod"?{div:null,mod:new l(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new l(this.modn(D.words[0]))}:this._wordDiv(D,N);var F,U,V},l.prototype.div=function(D){return this.divmod(D,"div",!1).div},l.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},l.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},l.prototype.divRound=function(D){var N=this.divmod(D);if(N.mod.isZero())return N.div;var W=N.div.negative!==0?N.mod.isub(D):N.mod,F=D.ushrn(1),U=D.andln(1),V=W.cmp(F);return V<0||U===1&&V===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},l.prototype.modn=function(D){r(D<=67108863);for(var N=67108864%D,W=0,F=this.length-1;F>=0;F--)W=(N*W+(0|this.words[F]))%D;return W},l.prototype.idivn=function(D){r(D<=67108863);for(var N=0,W=this.length-1;W>=0;W--){var F=(0|this.words[W])+67108864*N;this.words[W]=F/D|0,N=F%D}return this.strip()},l.prototype.divn=function(D){return this.clone().idivn(D)},l.prototype.egcd=function(D){r(D.negative===0),r(!D.isZero());var N=this,W=D.clone();N=N.negative!==0?N.umod(D):N.clone();for(var F=new l(1),U=new l(0),V=new l(0),te=new l(1),J=0;N.isEven()&&W.isEven();)N.iushrn(1),W.iushrn(1),++J;for(var K=W.clone(),X=N.clone();!N.isZero();){for(var Z=0,$=1;(N.words[0]&$)==0&&Z<26;++Z,$<<=1);if(Z>0)for(N.iushrn(Z);Z-- >0;)(F.isOdd()||U.isOdd())&&(F.iadd(K),U.isub(X)),F.iushrn(1),U.iushrn(1);for(var re=0,oe=1;(W.words[0]&oe)==0&&re<26;++re,oe<<=1);if(re>0)for(W.iushrn(re);re-- >0;)(V.isOdd()||te.isOdd())&&(V.iadd(K),te.isub(X)),V.iushrn(1),te.iushrn(1);N.cmp(W)>=0?(N.isub(W),F.isub(V),U.isub(te)):(W.isub(N),V.isub(F),te.isub(U))}return{a:V,b:te,gcd:W.iushln(J)}},l.prototype._invmp=function(D){r(D.negative===0),r(!D.isZero());var N=this,W=D.clone();N=N.negative!==0?N.umod(D):N.clone();for(var F,U=new l(1),V=new l(0),te=W.clone();N.cmpn(1)>0&&W.cmpn(1)>0;){for(var J=0,K=1;(N.words[0]&K)==0&&J<26;++J,K<<=1);if(J>0)for(N.iushrn(J);J-- >0;)U.isOdd()&&U.iadd(te),U.iushrn(1);for(var X=0,Z=1;(W.words[0]&Z)==0&&X<26;++X,Z<<=1);if(X>0)for(W.iushrn(X);X-- >0;)V.isOdd()&&V.iadd(te),V.iushrn(1);N.cmp(W)>=0?(N.isub(W),U.isub(V)):(W.isub(N),V.isub(U))}return(F=N.cmpn(1)===0?U:V).cmpn(0)<0&&F.iadd(D),F},l.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var N=this.clone(),W=D.clone();N.negative=0,W.negative=0;for(var F=0;N.isEven()&&W.isEven();F++)N.iushrn(1),W.iushrn(1);for(;;){for(;N.isEven();)N.iushrn(1);for(;W.isEven();)W.iushrn(1);var U=N.cmp(W);if(U<0){var V=N;N=W,W=V}else if(U===0||W.cmpn(1)===0)break;N.isub(W)}return W.iushln(F)},l.prototype.invm=function(D){return this.egcd(D).a.umod(D)},l.prototype.isEven=function(){return(1&this.words[0])==0},l.prototype.isOdd=function(){return(1&this.words[0])==1},l.prototype.andln=function(D){return this.words[0]&D},l.prototype.bincn=function(D){r(typeof D=="number");var N=D%26,W=(D-N)/26,F=1<<N;if(this.length<=W)return this._expand(W+1),this.words[W]|=F,this;for(var U=F,V=W;U!==0&&V<this.length;V++){var te=0|this.words[V];U=(te+=U)>>>26,te&=67108863,this.words[V]=te}return U!==0&&(this.words[V]=U,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(D){var N,W=D<0;if(this.negative!==0&&!W)return-1;if(this.negative===0&&W)return 1;if(this.strip(),this.length>1)N=1;else{W&&(D=-D),r(D<=67108863,"Number is too big");var F=0|this.words[0];N=F===D?0:F<D?-1:1}return this.negative!==0?0|-N:N},l.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var N=this.ucmp(D);return this.negative!==0?0|-N:N},l.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var N=0,W=this.length-1;W>=0;W--){var F=0|this.words[W],U=0|D.words[W];if(F!==U){F<U?N=-1:F>U&&(N=1);break}}return N},l.prototype.gtn=function(D){return this.cmpn(D)===1},l.prototype.gt=function(D){return this.cmp(D)===1},l.prototype.gten=function(D){return this.cmpn(D)>=0},l.prototype.gte=function(D){return this.cmp(D)>=0},l.prototype.ltn=function(D){return this.cmpn(D)===-1},l.prototype.lt=function(D){return this.cmp(D)===-1},l.prototype.lten=function(D){return this.cmpn(D)<=0},l.prototype.lte=function(D){return this.cmp(D)<=0},l.prototype.eqn=function(D){return this.cmpn(D)===0},l.prototype.eq=function(D){return this.cmp(D)===0},l.red=function(D){return new R(D)},l.prototype.toRed=function(D){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},l.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(D){return this.red=D,this},l.prototype.forceRed=function(D){return r(!this.red,"Already a number in reduction context"),this._forceRed(D)},l.prototype.redAdd=function(D){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},l.prototype.redIAdd=function(D){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},l.prototype.redSub=function(D){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},l.prototype.redISub=function(D){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},l.prototype.redShl=function(D){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},l.prototype.redMul=function(D){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},l.prototype.redIMul=function(D){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},l.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(D){return r(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var S={k256:null,p224:null,p192:null,p25519:null};function w(D,N){this.name=D,this.p=new l(N,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function O(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function R(D){if(typeof D=="string"){var N=l._prime(D);this.m=N.p,this.prime=N}else r(D.gtn(1),"modulus must be greater than 1"),this.m=D,this.prime=null}function j(D){R.call(this,D),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var D=new l(null);return D.words=new Array(Math.ceil(this.n/13)),D},w.prototype.ireduce=function(D){var N,W=D;do this.split(W,this.tmp),N=(W=(W=this.imulK(W)).iadd(this.tmp)).bitLength();while(N>this.n);var F=N<this.n?-1:W.ucmp(this.p);return F===0?(W.words[0]=0,W.length=1):F>0?W.isub(this.p):W.strip!==void 0?W.strip():W._strip(),W},w.prototype.split=function(D,N){D.iushrn(this.n,0,N)},w.prototype.imulK=function(D){return D.imul(this.k)},a(E,w),E.prototype.split=function(D,N){for(var W=4194303,F=Math.min(D.length,9),U=0;U<F;U++)N.words[U]=D.words[U];if(N.length=F,D.length<=9)return D.words[0]=0,void(D.length=1);var V=D.words[9];for(N.words[N.length++]=V&W,U=10;U<D.length;U++){var te=0|D.words[U];D.words[U-10]=(te&W)<<4|V>>>22,V=te}V>>>=22,D.words[U-10]=V,V===0&&D.length>10?D.length-=10:D.length-=9},E.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var N=0,W=0;W<D.length;W++){var F=0|D.words[W];N+=977*F,D.words[W]=67108863&N,N=64*F+(N/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D},a(P,w),a(C,w),a(O,w),O.prototype.imulK=function(D){for(var N=0,W=0;W<D.length;W++){var F=19*(0|D.words[W])+N,U=67108863&F;F>>>=26,D.words[W]=U,N=F}return N!==0&&(D.words[D.length++]=N),D},l._prime=function(D){if(S[D])return S[D];var N;if(D==="k256")N=new E;else if(D==="p224")N=new P;else if(D==="p192")N=new C;else{if(D!=="p25519")throw new Error("Unknown prime "+D);N=new O}return S[D]=N,N},R.prototype._verify1=function(D){r(D.negative===0,"red works only with positives"),r(D.red,"red works only with red numbers")},R.prototype._verify2=function(D,N){r((D.negative|N.negative)==0,"red works only with positives"),r(D.red&&D.red===N.red,"red works only with red numbers")},R.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},R.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},R.prototype.add=function(D,N){this._verify2(D,N);var W=D.add(N);return W.cmp(this.m)>=0&&W.isub(this.m),W._forceRed(this)},R.prototype.iadd=function(D,N){this._verify2(D,N);var W=D.iadd(N);return W.cmp(this.m)>=0&&W.isub(this.m),W},R.prototype.sub=function(D,N){this._verify2(D,N);var W=D.sub(N);return W.cmpn(0)<0&&W.iadd(this.m),W._forceRed(this)},R.prototype.isub=function(D,N){this._verify2(D,N);var W=D.isub(N);return W.cmpn(0)<0&&W.iadd(this.m),W},R.prototype.shl=function(D,N){return this._verify1(D),this.imod(D.ushln(N))},R.prototype.imul=function(D,N){return this._verify2(D,N),this.imod(D.imul(N))},R.prototype.mul=function(D,N){return this._verify2(D,N),this.imod(D.mul(N))},R.prototype.isqr=function(D){return this.imul(D,D.clone())},R.prototype.sqr=function(D){return this.mul(D,D)},R.prototype.sqrt=function(D){if(D.isZero())return D.clone();var N=this.m.andln(3);if(r(N%2==1),N===3){var W=this.m.add(new l(1)).iushrn(2);return this.pow(D,W)}for(var F=this.m.subn(1),U=0;!F.isZero()&&F.andln(1)===0;)U++,F.iushrn(1);r(!F.isZero());var V=new l(1).toRed(this),te=V.redNeg(),J=this.m.subn(1).iushrn(1),K=this.m.bitLength();for(K=new l(2*K*K).toRed(this);this.pow(K,J).cmp(te)!==0;)K.redIAdd(te);for(var X=this.pow(K,F),Z=this.pow(D,F.addn(1).iushrn(1)),$=this.pow(D,F),re=U;$.cmp(V)!==0;){for(var oe=$,ie=0;oe.cmp(V)!==0;ie++)oe=oe.redSqr();r(ie<re);var ue=this.pow(X,new l(1).iushln(re-ie-1));Z=Z.redMul(ue),X=ue.redSqr(),$=$.redMul(X),re=ie}return Z},R.prototype.invm=function(D){var N=D._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},R.prototype.pow=function(D,N){if(N.isZero())return new l(1).toRed(this);if(N.cmpn(1)===0)return D.clone();var W=new Array(16);W[0]=new l(1).toRed(this),W[1]=D;for(var F=2;F<W.length;F++)W[F]=this.mul(W[F-1],D);var U=W[0],V=0,te=0,J=N.bitLength()%26;for(J===0&&(J=26),F=N.length-1;F>=0;F--){for(var K=N.words[F],X=J-1;X>=0;X--){var Z=K>>X&1;U!==W[0]&&(U=this.sqr(U)),Z!==0||V!==0?(V<<=1,V|=Z,(++te==4||F===0&&X===0)&&(U=this.mul(U,W[V]),te=0,V=0)):te=0}J=26}return U},R.prototype.convertTo=function(D){var N=D.umod(this.m);return N===D?N.clone():N},R.prototype.convertFrom=function(D){var N=D.clone();return N.red=null,N},l.mont=function(D){return new j(D)},a(j,R),j.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},j.prototype.convertFrom=function(D){var N=this.imod(D.mul(this.rinv));return N.red=null,N},j.prototype.imul=function(D,N){if(D.isZero()||N.isZero())return D.words[0]=0,D.length=1,D;var W=D.imul(N),F=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=W.isub(F).iushrn(this.shift),V=U;return U.cmp(this.m)>=0?V=U.isub(this.m):U.cmpn(0)<0&&(V=U.iadd(this.m)),V._forceRed(this)},j.prototype.mul=function(D,N){if(D.isZero()||N.isZero())return new l(0)._forceRed(this);var W=D.mul(N),F=W.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),U=W.isub(F).iushrn(this.shift),V=U;return U.cmp(this.m)>=0?V=U.isub(this.m):U.cmpn(0)<0&&(V=U.iadd(this.m)),V._forceRed(this)},j.prototype.invm=function(D){return this.imod(D._invmp(this.m).mul(this.r2))._forceRed(this)}})(h=t.nmd(h),this)},2692:function(h){"use strict";h.exports=function(s){var t,i,n,r=s.length,a=0;for(t=0;t<r;++t)a+=s[t].length;var l=new Array(a),u=0;for(t=0;t<r;++t){var d=s[t],c=d.length;for(i=0;i<c;++i){var x=l[u++]=new Array(c-1),g=0;for(n=0;n<c;++n)n!==i&&(x[g++]=d[n]);if(1&i){var p=x[1];x[1]=x[0],x[0]=p}}}return l}},2569:function(h,s,t){"use strict";h.exports=function(x,g,p){switch(arguments.length){case 1:return i=[],d(v=x,v,c,!0),i;case 2:return typeof g=="function"?d(x,x,g,!0):function(m,y){return i=[],d(m,y,c,!1),i}(x,g);case 3:return d(x,g,p,!1);default:throw new Error("box-intersect: Invalid arguments")}var v};var i,n=t(5306),r=t(1390),a=t(2337);function l(x,g){for(var p=0;p<x;++p)if(!(g[p]<=g[p+x]))return!0;return!1}function u(x,g,p,v){for(var m=0,y=0,_=0,f=x.length;_<f;++_){var S=x[_];if(!l(g,S)){for(var w=0;w<2*g;++w)p[m++]=S[w];v[y++]=_}}return y}function d(x,g,p,v){var m=x.length,y=g.length;if(!(m<=0||y<=0)){var _=x[0].length>>>1;if(!(_<=0)){var f,S=n.mallocDouble(2*_*m),w=n.mallocInt32(m);if((m=u(x,_,S,w))>0){if(_===1&&v)r.init(m),f=r.sweepComplete(_,p,0,m,S,w,0,m,S,w);else{var E=n.mallocDouble(2*_*y),P=n.mallocInt32(y);(y=u(g,_,E,P))>0&&(r.init(m+y),f=_===1?r.sweepBipartite(_,p,0,m,S,w,0,y,E,P):a(_,p,v,m,S,w,y,E,P),n.free(E),n.free(P))}n.free(S),n.free(w)}return f}}}function c(x,g){i.push([x,g])}},7333:function(h,s){"use strict";function t(i){return i?function(n,r,a,l,u,d,c,x,g,p,v){return u-l>g-x?function(m,y,_,f,S,w,E,P,C,O,R){for(var j=2*m,D=f,N=j*f;D<S;++D,N+=j){var W=w[y+N],F=w[y+N+m],U=E[D];e:for(var V=P,te=j*P;V<C;++V,te+=j){var J=O[y+te],K=O[y+te+m],X=R[V];if(!(K<W||F<J)){for(var Z=y+1;Z<m;++Z){var $=w[Z+N],re=w[Z+m+N],oe=O[Z+te],ie=O[Z+m+te];if(re<oe||ie<$)continue e}var ue=_(U,X);if(ue!==void 0)return ue}}}}(n,r,a,l,u,d,c,x,g,p,v):function(m,y,_,f,S,w,E,P,C,O,R){for(var j=2*m,D=P,N=j*P;D<C;++D,N+=j){var W=O[y+N],F=O[y+N+m],U=R[D];e:for(var V=f,te=j*f;V<S;++V,te+=j){var J=w[y+te],K=w[y+te+m],X=E[V];if(!(F<J||K<W)){for(var Z=y+1;Z<m;++Z){var $=w[Z+te],re=w[Z+m+te],oe=O[Z+N],ie=O[Z+m+N];if(re<oe||ie<$)continue e}var ue=_(X,U);if(ue!==void 0)return ue}}}}(n,r,a,l,u,d,c,x,g,p,v)}:function(n,r,a,l,u,d,c,x,g,p,v,m){return d-u>p-g?l?function(y,_,f,S,w,E,P,C,O,R,j){for(var D=2*y,N=S,W=D*S;N<w;++N,W+=D){var F=E[_+W],U=E[_+W+y],V=P[N];e:for(var te=C,J=D*C;te<O;++te,J+=D){var K=R[_+J],X=j[te];if(!(K<=F||U<K)){for(var Z=_+1;Z<y;++Z){var $=E[Z+W],re=E[Z+y+W],oe=R[Z+J],ie=R[Z+y+J];if(re<oe||ie<$)continue e}var ue=f(X,V);if(ue!==void 0)return ue}}}}(n,r,a,u,d,c,x,g,p,v,m):function(y,_,f,S,w,E,P,C,O,R,j){for(var D=2*y,N=S,W=D*S;N<w;++N,W+=D){var F=E[_+W],U=E[_+W+y],V=P[N];e:for(var te=C,J=D*C;te<O;++te,J+=D){var K=R[_+J],X=j[te];if(!(K<F||U<K)){for(var Z=_+1;Z<y;++Z){var $=E[Z+W],re=E[Z+y+W],oe=R[Z+J],ie=R[Z+y+J];if(re<oe||ie<$)continue e}var ue=f(V,X);if(ue!==void 0)return ue}}}}(n,r,a,u,d,c,x,g,p,v,m):l?function(y,_,f,S,w,E,P,C,O,R,j){for(var D=2*y,N=C,W=D*C;N<O;++N,W+=D){var F=R[_+W],U=j[N];e:for(var V=S,te=D*S;V<w;++V,te+=D){var J=E[_+te],K=E[_+te+y],X=P[V];if(!(F<=J||K<F)){for(var Z=_+1;Z<y;++Z){var $=E[Z+te],re=E[Z+y+te],oe=R[Z+W],ie=R[Z+y+W];if(re<oe||ie<$)continue e}var ue=f(U,X);if(ue!==void 0)return ue}}}}(n,r,a,u,d,c,x,g,p,v,m):function(y,_,f,S,w,E,P,C,O,R,j){for(var D=2*y,N=C,W=D*C;N<O;++N,W+=D){var F=R[_+W],U=j[N];e:for(var V=S,te=D*S;V<w;++V,te+=D){var J=E[_+te],K=E[_+te+y],X=P[V];if(!(F<J||K<F)){for(var Z=_+1;Z<y;++Z){var $=E[Z+te],re=E[Z+y+te],oe=R[Z+W],ie=R[Z+y+W];if(re<oe||ie<$)continue e}var ue=f(X,U);if(ue!==void 0)return ue}}}}(n,r,a,u,d,c,x,g,p,v,m)}}s.partial=t(!1),s.full=t(!0)},2337:function(h,s,t){"use strict";h.exports=function(D,N,W,F,U,V,te,J,K){(function(ze,Pe){var Ue=8*n.log2(Pe+1)*(ze+1)|0,Ve=n.nextPow2(w*Ue);P.length<Ve&&(i.free(P),P=i.mallocInt32(Ve));var Ze=n.nextPow2(E*Ue);C.length<Ze&&(i.free(C),C=i.mallocDouble(Ze))})(D,F+te);var X,Z=0,$=2*D;for(O(Z++,0,0,F,0,te,W?16:0,-1/0,1/0),W||O(Z++,0,0,te,0,F,1,-1/0,1/0);Z>0;){var re=(Z-=1)*w,oe=P[re],ie=P[re+1],ue=P[re+2],me=P[re+3],be=P[re+4],ge=P[re+5],de=Z*E,ve=C[de],pe=C[de+1],_e=1&ge,Te=!!(16&ge),le=U,ae=V,he=J,Se=K;if(_e&&(le=J,ae=K,he=U,Se=V),!(2&ge&&ie>=(ue=y(D,oe,ie,ue,le,ae,pe))||4&ge&&(ie=_(D,oe,ie,ue,le,ae,ve))>=ue)){var ke=ue-ie,Me=be-me;if(Te){if(D*ke*(ke+Me)<p){if((X=u.scanComplete(D,oe,N,ie,ue,le,ae,me,be,he,Se))!==void 0)return X;continue}}else{if(D*Math.min(ke,Me)<x){if((X=a(D,oe,N,_e,ie,ue,le,ae,me,be,he,Se))!==void 0)return X;continue}if(D*ke*Me<g){if((X=u.scanBipartite(D,oe,N,_e,ie,ue,le,ae,me,be,he,Se))!==void 0)return X;continue}}var Ee=v(D,oe,ie,ue,le,ae,ve,pe);if(ie<Ee)if(D*(Ee-ie)<x){if((X=l(D,oe+1,N,ie,Ee,le,ae,me,be,he,Se))!==void 0)return X}else if(oe===D-2){if((X=_e?u.sweepBipartite(D,N,me,be,he,Se,ie,Ee,le,ae):u.sweepBipartite(D,N,ie,Ee,le,ae,me,be,he,Se))!==void 0)return X}else O(Z++,oe+1,ie,Ee,me,be,_e,-1/0,1/0),O(Z++,oe+1,me,be,ie,Ee,1^_e,-1/0,1/0);if(Ee<ue){var De=d(D,oe,me,be,he,Se),fe=he[$*De+oe],xe=m(D,oe,De,be,he,Se,fe);if(xe<be&&O(Z++,oe,Ee,ue,xe,be,(4|_e)+(Te?16:0),fe,pe),me<De&&O(Z++,oe,Ee,ue,me,De,(2|_e)+(Te?16:0),ve,fe),De+1===xe){if((X=Te?j(D,oe,N,Ee,ue,le,ae,De,he,Se[De]):R(D,oe,N,_e,Ee,ue,le,ae,De,he,Se[De]))!==void 0)return X}else if(De<xe){var we;if(Te){if(Ee<(we=f(D,oe,Ee,ue,le,ae,fe))){var Oe=m(D,oe,Ee,we,le,ae,fe);if(oe===D-2){if(Ee<Oe&&(X=u.sweepComplete(D,N,Ee,Oe,le,ae,De,xe,he,Se))!==void 0||Oe<we&&(X=u.sweepBipartite(D,N,Oe,we,le,ae,De,xe,he,Se))!==void 0)return X}else Ee<Oe&&O(Z++,oe+1,Ee,Oe,De,xe,16,-1/0,1/0),Oe<we&&(O(Z++,oe+1,Oe,we,De,xe,0,-1/0,1/0),O(Z++,oe+1,De,xe,Oe,we,1,-1/0,1/0))}}else Ee<(we=_e?S(D,oe,Ee,ue,le,ae,fe):f(D,oe,Ee,ue,le,ae,fe))&&(oe===D-2?X=_e?u.sweepBipartite(D,N,De,xe,he,Se,Ee,we,le,ae):u.sweepBipartite(D,N,Ee,we,le,ae,De,xe,he,Se):(O(Z++,oe+1,Ee,we,De,xe,_e,-1/0,1/0),O(Z++,oe+1,De,xe,Ee,we,1^_e,-1/0,1/0)))}}}}};var i=t(5306),n=t(2288),r=t(7333),a=r.partial,l=r.full,u=t(1390),d=t(2464),c=t(122),x=128,g=1<<22,p=1<<22,v=c("!(lo>=p0)&&!(p1>=hi)"),m=c("lo===p0"),y=c("lo<p0"),_=c("hi<=p0"),f=c("lo<=p0&&p0<=hi"),S=c("lo<p0&&p0<=hi"),w=6,E=2,P=i.mallocInt32(1024),C=i.mallocDouble(1024);function O(D,N,W,F,U,V,te,J,K){var X=w*D;P[X]=N,P[X+1]=W,P[X+2]=F,P[X+3]=U,P[X+4]=V,P[X+5]=te;var Z=E*D;C[Z]=J,C[Z+1]=K}function R(D,N,W,F,U,V,te,J,K,X,Z){var $=2*D,re=K*$,oe=X[re+N];e:for(var ie=U,ue=U*$;ie<V;++ie,ue+=$){var me=te[ue+N],be=te[ue+N+D];if(!(oe<me||be<oe||F&&oe===me)){for(var ge,de=J[ie],ve=N+1;ve<D;++ve){me=te[ue+ve],be=te[ue+ve+D];var pe=X[re+ve],_e=X[re+ve+D];if(be<pe||_e<me)continue e}if((ge=F?W(Z,de):W(de,Z))!==void 0)return ge}}}function j(D,N,W,F,U,V,te,J,K,X){var Z=2*D,$=J*Z,re=K[$+N];e:for(var oe=F,ie=F*Z;oe<U;++oe,ie+=Z){var ue=te[oe];if(ue!==X){var me=V[ie+N],be=V[ie+N+D];if(!(re<me||be<re)){for(var ge=N+1;ge<D;++ge){me=V[ie+ge],be=V[ie+ge+D];var de=K[$+ge],ve=K[$+ge+D];if(be<de||ve<me)continue e}var pe=W(ue,X);if(pe!==void 0)return pe}}}}},2464:function(h,s,t){"use strict";h.exports=function(a,l,u,d,c,x){if(d<=u+1)return u;for(var g=u,p=d,v=d+u>>>1,m=2*a,y=v,_=c[m*v+l];g<p;){if(p-g<n){r(a,l,g,p,c,x),_=c[m*v+l];break}var f=p-g,S=Math.random()*f+g|0,w=c[m*S+l],E=Math.random()*f+g|0,P=c[m*E+l],C=Math.random()*f+g|0,O=c[m*C+l];w<=P?O>=P?(y=E,_=P):w>=O?(y=S,_=w):(y=C,_=O):P>=O?(y=E,_=P):O>=w?(y=S,_=w):(y=C,_=O);for(var R=m*(p-1),j=m*y,D=0;D<m;++D,++R,++j){var N=c[R];c[R]=c[j],c[j]=N}var W=x[p-1];for(x[p-1]=x[y],x[y]=W,R=m*(p-1),j=m*(y=i(a,l,g,p-1,c,x,_)),D=0;D<m;++D,++R,++j)N=c[R],c[R]=c[j],c[j]=N;if(W=x[p-1],x[p-1]=x[y],x[y]=W,v<y){for(p=y-1;g<p&&c[m*(p-1)+l]===_;)p-=1;p+=1}else{if(!(y<v))break;for(g=y+1;g<p&&c[m*g+l]===_;)g+=1}}return i(a,l,u,v,c,x,c[m*v+l])};var i=t(122)("lo<p0"),n=8;function r(a,l,u,d,c,x){for(var g=2*a,p=g*(u+1)+l,v=u+1;v<d;++v,p+=g)for(var m=c[p],y=v,_=g*(v-1);y>u&&c[_+l]>m;--y,_-=g){for(var f=_,S=_+g,w=0;w<g;++w,++f,++S){var E=c[f];c[f]=c[S],c[S]=E}var P=x[y];x[y]=x[y-1],x[y-1]=P}}},122:function(h){"use strict";h.exports=function(t){return s[t]};var s={"lo===p0":function(t,i,n,r,a,l,u){for(var d=2*t,c=d*n,x=c,g=n,p=i,v=n;r>v;++v,c+=d)if(a[c+p]===u)if(g===v)g+=1,x+=d;else{for(var m=0;d>m;++m){var y=a[c+m];a[c+m]=a[x],a[x++]=y}var _=l[v];l[v]=l[g],l[g++]=_}return g},"lo<p0":function(t,i,n,r,a,l,u){for(var d=2*t,c=d*n,x=c,g=n,p=i,v=n;r>v;++v,c+=d)if(a[c+p]<u)if(g===v)g+=1,x+=d;else{for(var m=0;d>m;++m){var y=a[c+m];a[c+m]=a[x],a[x++]=y}var _=l[v];l[v]=l[g],l[g++]=_}return g},"lo<=p0":function(t,i,n,r,a,l,u){for(var d=2*t,c=d*n,x=c,g=n,p=t+i,v=n;r>v;++v,c+=d)if(a[c+p]<=u)if(g===v)g+=1,x+=d;else{for(var m=0;d>m;++m){var y=a[c+m];a[c+m]=a[x],a[x++]=y}var _=l[v];l[v]=l[g],l[g++]=_}return g},"hi<=p0":function(t,i,n,r,a,l,u){for(var d=2*t,c=d*n,x=c,g=n,p=t+i,v=n;r>v;++v,c+=d)if(a[c+p]<=u)if(g===v)g+=1,x+=d;else{for(var m=0;d>m;++m){var y=a[c+m];a[c+m]=a[x],a[x++]=y}var _=l[v];l[v]=l[g],l[g++]=_}return g},"lo<p0&&p0<=hi":function(t,i,n,r,a,l,u){for(var d=2*t,c=d*n,x=c,g=n,p=i,v=t+i,m=n;r>m;++m,c+=d){var y=a[c+p],_=a[c+v];if(y<u&&u<=_)if(g===m)g+=1,x+=d;else{for(var f=0;d>f;++f){var S=a[c+f];a[c+f]=a[x],a[x++]=S}var w=l[m];l[m]=l[g],l[g++]=w}}return g},"lo<=p0&&p0<=hi":function(t,i,n,r,a,l,u){for(var d=2*t,c=d*n,x=c,g=n,p=i,v=t+i,m=n;r>m;++m,c+=d){var y=a[c+p],_=a[c+v];if(y<=u&&u<=_)if(g===m)g+=1,x+=d;else{for(var f=0;d>f;++f){var S=a[c+f];a[c+f]=a[x],a[x++]=S}var w=l[m];l[m]=l[g],l[g++]=w}}return g},"!(lo>=p0)&&!(p1>=hi)":function(t,i,n,r,a,l,u,d){for(var c=2*t,x=c*n,g=x,p=n,v=i,m=t+i,y=n;r>y;++y,x+=c){var _=a[x+v],f=a[x+m];if(!(_>=u||d>=f))if(p===y)p+=1,g+=c;else{for(var S=0;c>S;++S){var w=a[x+S];a[x+S]=a[g],a[g++]=w}var E=l[y];l[y]=l[p],l[p++]=E}}return p}}},309:function(h){"use strict";h.exports=function(c,x){x<=4*s?t(0,x-1,c):d(0,x-1,c)};var s=32;function t(c,x,g){for(var p=2*(c+1),v=c+1;v<=x;++v){for(var m=g[p++],y=g[p++],_=v,f=p-2;_-- >c;){var S=g[f-2],w=g[f-1];if(S<m||S===m&&w<y)break;g[f]=S,g[f+1]=w,f-=2}g[f]=m,g[f+1]=y}}function i(c,x,g){x*=2;var p=g[c*=2],v=g[c+1];g[c]=g[x],g[c+1]=g[x+1],g[x]=p,g[x+1]=v}function n(c,x,g){x*=2,g[c*=2]=g[x],g[c+1]=g[x+1]}function r(c,x,g,p){x*=2,g*=2;var v=p[c*=2],m=p[c+1];p[c]=p[x],p[c+1]=p[x+1],p[x]=p[g],p[x+1]=p[g+1],p[g]=v,p[g+1]=m}function a(c,x,g,p,v){x*=2,v[c*=2]=v[x],v[x]=g,v[c+1]=v[x+1],v[x+1]=p}function l(c,x,g){x*=2;var p=g[c*=2],v=g[x];return!(p<v)&&(p!==v||g[c+1]>g[x+1])}function u(c,x,g,p){var v=p[c*=2];return v<x||v===x&&p[c+1]<g}function d(c,x,g){var p=(x-c+1)/6|0,v=c+p,m=x-p,y=c+x>>1,_=y-p,f=y+p,S=v,w=_,E=y,P=f,C=m,O=c+1,R=x-1,j=0;l(S,w,g)&&(j=S,S=w,w=j),l(P,C,g)&&(j=P,P=C,C=j),l(S,E,g)&&(j=S,S=E,E=j),l(w,E,g)&&(j=w,w=E,E=j),l(S,P,g)&&(j=S,S=P,P=j),l(E,P,g)&&(j=E,E=P,P=j),l(w,C,g)&&(j=w,w=C,C=j),l(w,E,g)&&(j=w,w=E,E=j),l(P,C,g)&&(j=P,P=C,C=j);for(var D=g[2*w],N=g[2*w+1],W=g[2*P],F=g[2*P+1],U=2*S,V=2*E,te=2*C,J=2*v,K=2*y,X=2*m,Z=0;Z<2;++Z){var $=g[U+Z],re=g[V+Z],oe=g[te+Z];g[J+Z]=$,g[K+Z]=re,g[X+Z]=oe}n(_,c,g),n(f,x,g);for(var ie=O;ie<=R;++ie)if(u(ie,D,N,g))ie!==O&&i(ie,O,g),++O;else if(!u(ie,W,F,g))for(;;){if(u(R,W,F,g)){u(R,D,N,g)?(r(ie,O,R,g),++O,--R):(i(ie,R,g),--R);break}if(--R<ie)break}a(c,O-1,D,N,g),a(x,R+1,W,F,g),O-2-c<=s?t(c,O-2,g):d(c,O-2,g),x-(R+2)<=s?t(R+2,x,g):d(R+2,x,g),R-O<=s?t(O,R,g):d(O,R,g)}},1390:function(h,s,t){"use strict";h.exports={init:function(_){var f=n.nextPow2(_);u.length<f&&(i.free(u),u=i.mallocInt32(f)),d.length<f&&(i.free(d),d=i.mallocInt32(f)),c.length<f&&(i.free(c),c=i.mallocInt32(f)),x.length<f&&(i.free(x),x=i.mallocInt32(f)),g.length<f&&(i.free(g),g=i.mallocInt32(f)),p.length<f&&(i.free(p),p=i.mallocInt32(f));var S=8*f;v.length<S&&(i.free(v),v=i.mallocDouble(S))},sweepBipartite:function(_,f,S,w,E,P,C,O,R,j){for(var D=0,N=2*_,W=_-1,F=N-1,U=S;U<w;++U){var V=P[U],te=N*U;v[D++]=E[te+W],v[D++]=-(V+1),v[D++]=E[te+F],v[D++]=V}for(U=C;U<O;++U){V=j[U]+a;var J=N*U;v[D++]=R[J+W],v[D++]=-V,v[D++]=R[J+F],v[D++]=V}var K=D>>>1;r(v,K);var X=0,Z=0;for(U=0;U<K;++U){var $=0|v[2*U+1];if($>=a)m(c,x,Z--,$=$-a|0);else if($>=0)m(u,d,X--,$);else if($<=-a){$=-$-a|0;for(var re=0;re<X;++re)if((oe=f(u[re],$))!==void 0)return oe;y(c,x,Z++,$)}else{for($=-$-1|0,re=0;re<Z;++re){var oe;if((oe=f($,c[re]))!==void 0)return oe}y(u,d,X++,$)}}},sweepComplete:function(_,f,S,w,E,P,C,O,R,j){for(var D=0,N=2*_,W=_-1,F=N-1,U=S;U<w;++U){var V=P[U]+1<<1,te=N*U;v[D++]=E[te+W],v[D++]=-V,v[D++]=E[te+F],v[D++]=V}for(U=C;U<O;++U){V=j[U]+1<<1;var J=N*U;v[D++]=R[J+W],v[D++]=1|-V,v[D++]=R[J+F],v[D++]=1|V}var K=D>>>1;r(v,K);var X=0,Z=0,$=0;for(U=0;U<K;++U){var re=0|v[2*U+1],oe=1&re;if(U<K-1&&re>>1==v[2*U+3]>>1&&(oe=2,U+=1),re<0){for(var ie=-(re>>1)-1,ue=0;ue<$;++ue)if((me=f(g[ue],ie))!==void 0)return me;if(oe!==0){for(ue=0;ue<X;++ue)if((me=f(u[ue],ie))!==void 0)return me}if(oe!==1)for(ue=0;ue<Z;++ue){var me;if((me=f(c[ue],ie))!==void 0)return me}oe===0?y(u,d,X++,ie):oe===1?y(c,x,Z++,ie):oe===2&&y(g,p,$++,ie)}else ie=(re>>1)-1,oe===0?m(u,d,X--,ie):oe===1?m(c,x,Z--,ie):oe===2&&m(g,p,$--,ie)}},scanBipartite:function(_,f,S,w,E,P,C,O,R,j,D,N){var W=0,F=2*_,U=f,V=f+_,te=1,J=1;w?J=a:te=a;for(var K=E;K<P;++K){var X=K+te,Z=F*K;v[W++]=C[Z+U],v[W++]=-X,v[W++]=C[Z+V],v[W++]=X}for(K=R;K<j;++K){X=K+J;var $=F*K;v[W++]=D[$+U],v[W++]=-X}var re=W>>>1;r(v,re);var oe=0;for(K=0;K<re;++K){var ie=0|v[2*K+1];if(ie<0){var ue=!1;if((X=-ie)>=a?(ue=!w,X-=a):(ue=!!w,X-=1),ue)y(u,d,oe++,X);else{var me=N[X],be=F*X,ge=D[be+f+1],de=D[be+f+1+_];e:for(var ve=0;ve<oe;++ve){var pe=u[ve],_e=F*pe;if(!(de<C[_e+f+1]||C[_e+f+1+_]<ge)){for(var Te=f+2;Te<_;++Te)if(D[be+Te+_]<C[_e+Te]||C[_e+Te+_]<D[be+Te])continue e;var le,ae=O[pe];if((le=w?S(me,ae):S(ae,me))!==void 0)return le}}}}else m(u,d,oe--,ie-te)}},scanComplete:function(_,f,S,w,E,P,C,O,R,j,D){for(var N=0,W=2*_,F=f,U=f+_,V=w;V<E;++V){var te=V+a,J=W*V;v[N++]=P[J+F],v[N++]=-te,v[N++]=P[J+U],v[N++]=te}for(V=O;V<R;++V){te=V+1;var K=W*V;v[N++]=j[K+F],v[N++]=-te}var X=N>>>1;r(v,X);var Z=0;for(V=0;V<X;++V){var $=0|v[2*V+1];if($<0)if((te=-$)>=a)u[Z++]=te-a;else{var re=D[te-=1],oe=W*te,ie=j[oe+f+1],ue=j[oe+f+1+_];e:for(var me=0;me<Z;++me){var be=u[me],ge=C[be];if(ge===re)break;var de=W*be;if(!(ue<P[de+f+1]||P[de+f+1+_]<ie)){for(var ve=f+2;ve<_;++ve)if(j[oe+ve+_]<P[de+ve]||P[de+ve+_]<j[oe+ve])continue e;var pe=S(ge,re);if(pe!==void 0)return pe}}}else{for(te=$-a,me=Z-1;me>=0;--me)if(u[me]===te){for(ve=me+1;ve<Z;++ve)u[ve-1]=u[ve];break}--Z}}}};var i=t(5306),n=t(2288),r=t(309),a=1<<28,l=1024,u=i.mallocInt32(l),d=i.mallocInt32(l),c=i.mallocInt32(l),x=i.mallocInt32(l),g=i.mallocInt32(l),p=i.mallocInt32(l),v=i.mallocDouble(8192);function m(_,f,S,w){var E=f[w],P=_[S-1];_[E]=P,f[P]=E}function y(_,f,S,w){_[S]=w,f[w]=S}},7761:function(h,s,t){"use strict";var i=t(9971),n=t(743),r=t(2161),a=t(7098);function l(c){return[Math.min(c[0],c[1]),Math.max(c[0],c[1])]}function u(c,x){return c[0]-x[0]||c[1]-x[1]}function d(c,x,g){return x in c?c[x]:g}h.exports=function(c,x,g){Array.isArray(x)?(g=g||{},x=x||[]):(g=x||{},x=[]);var p=!!d(g,"delaunay",!0),v=!!d(g,"interior",!0),m=!!d(g,"exterior",!0),y=!!d(g,"infinity",!1);if(!v&&!m||c.length===0)return[];var _=i(c,x);if(p||v!==m||y){for(var f=n(c.length,function(E){return E.map(l).sort(u)}(x)),S=0;S<_.length;++S){var w=_[S];f.addTriangle(w[0],w[1],w[2])}return p&&r(c,f),m?v?y?a(f,0,y):f.cells():a(f,1,y):a(f,-1)}return _}},2161:function(h,s,t){"use strict";var i=t(2227)[4];function n(r,a,l,u,d,c){var x=a.opposite(u,d);if(!(x<0)){if(d<u){var g=u;u=d,d=g,g=c,c=x,x=g}a.isConstraint(u,d)||i(r[u],r[d],r[c],r[x])<0&&l.push(u,d)}}t(5070),h.exports=function(r,a){for(var l=[],u=r.length,d=a.stars,c=0;c<u;++c)for(var x=d[c],g=1;g<x.length;g+=2)if(!((y=x[g])<c||a.isConstraint(c,y))){for(var p=x[g-1],v=-1,m=1;m<x.length;m+=2)if(x[m-1]===y){v=x[m];break}v<0||i(r[c],r[y],r[p],r[v])<0&&l.push(c,y)}for(;l.length>0;){for(var y=l.pop(),_=(p=-1,v=-1,x=d[c=l.pop()],1);_<x.length;_+=2){var f=x[_-1],S=x[_];f===y?v=S:S===y&&(p=f)}p<0||v<0||i(r[c],r[y],r[p],r[v])>=0||(a.flip(c,y),n(r,a,l,p,c,v),n(r,a,l,c,v,p),n(r,a,l,v,y,p),n(r,a,l,y,p,v))}}},7098:function(h,s,t){"use strict";var i,n=t(5070);function r(l,u,d,c,x,g,p){this.cells=l,this.neighbor=u,this.flags=c,this.constraint=d,this.active=x,this.next=g,this.boundary=p}function a(l,u){return l[0]-u[0]||l[1]-u[1]||l[2]-u[2]}h.exports=function(l,u,d){var c=function(C,O){for(var R=C.cells(),j=R.length,D=0;D<j;++D){var N=($=R[D])[0],W=$[1],F=$[2];W<F?W<N&&($[0]=W,$[1]=F,$[2]=N):F<N&&($[0]=F,$[1]=N,$[2]=W)}R.sort(a);var U=new Array(j);for(D=0;D<U.length;++D)U[D]=0;var V=[],te=[],J=new Array(3*j),K=new Array(3*j),X=null;O&&(X=[]);var Z=new r(R,J,K,U,V,te,X);for(D=0;D<j;++D)for(var $=R[D],re=0;re<3;++re){N=$[re],W=$[(re+1)%3];var oe=J[3*D+re]=Z.locate(W,N,C.opposite(W,N)),ie=K[3*D+re]=C.isConstraint(N,W);oe<0&&(ie?te.push(D):(V.push(D),U[D]=1),O&&X.push([W,N,-1]))}return Z}(l,d);if(u===0)return d?c.cells.concat(c.boundary):c.cells;for(var x=1,g=c.active,p=c.next,v=c.flags,m=c.cells,y=c.constraint,_=c.neighbor;g.length>0||p.length>0;){for(;g.length>0;){var f=g.pop();if(v[f]!==-x){v[f]=x,m[f];for(var S=0;S<3;++S){var w=_[3*f+S];w>=0&&v[w]===0&&(y[3*f+S]?p.push(w):(g.push(w),v[w]=x))}}}var E=p;p=g,g=E,p.length=0,x=-x}var P=function(C,O,R){for(var j=0,D=0;D<C.length;++D)O[D]===R&&(C[j++]=C[D]);return C.length=j,C}(m,v,u);return d?P.concat(c.boundary):P},r.prototype.locate=(i=[0,0,0],function(l,u,d){var c=l,x=u,g=d;return u<d?u<l&&(c=u,x=d,g=l):d<l&&(c=d,x=l,g=u),c<0?-1:(i[0]=c,i[1]=x,i[2]=g,n.eq(this.cells,i,a))})},9971:function(h,s,t){"use strict";var i=t(5070),n=t(417)[3];function r(p,v,m,y,_){this.a=p,this.b=v,this.idx=m,this.lowerIds=y,this.upperIds=_}function a(p,v,m,y){this.a=p,this.b=v,this.type=m,this.idx=y}function l(p,v){var m=p.a[0]-v.a[0]||p.a[1]-v.a[1]||p.type-v.type;return m||(p.type!==0&&(m=n(p.a,p.b,v.b))?m:p.idx-v.idx)}function u(p,v){return n(p.a,p.b,v)}function d(p,v,m,y,_){for(var f=i.lt(v,y,u),S=i.gt(v,y,u),w=f;w<S;++w){for(var E=v[w],P=E.lowerIds,C=P.length;C>1&&n(m[P[C-2]],m[P[C-1]],y)>0;)p.push([P[C-1],P[C-2],_]),C-=1;P.length=C,P.push(_);var O=E.upperIds;for(C=O.length;C>1&&n(m[O[C-2]],m[O[C-1]],y)<0;)p.push([O[C-2],O[C-1],_]),C-=1;O.length=C,O.push(_)}}function c(p,v){var m;return(m=p.a[0]<v.a[0]?n(p.a,p.b,v.a):n(v.b,v.a,p.a))?m:(m=v.b[0]<p.b[0]?n(p.a,p.b,v.b):n(v.b,v.a,p.b))||p.idx-v.idx}function x(p,v,m){var y=i.le(p,m,c),_=p[y],f=_.upperIds,S=f[f.length-1];_.upperIds=[S],p.splice(y+1,0,new r(m.a,m.b,m.idx,[S],f))}function g(p,v,m){var y=m.a;m.a=m.b,m.b=y;var _=i.eq(p,m,c),f=p[_];p[_-1].upperIds=f.upperIds,p.splice(_,1)}h.exports=function(p,v){for(var m=p.length,y=v.length,_=[],f=0;f<m;++f)_.push(new a(p[f],null,0,f));for(f=0;f<y;++f){var S=v[f],w=p[S[0]],E=p[S[1]];w[0]<E[0]?_.push(new a(w,E,2,f),new a(E,w,1,f)):w[0]>E[0]&&_.push(new a(E,w,2,f),new a(w,E,1,f))}_.sort(l);for(var P=_[0].a[0]-(1+Math.abs(_[0].a[0]))*Math.pow(2,-52),C=[new r([P,1],[P,0],-1,[],[],[],[])],O=[],R=(f=0,_.length);f<R;++f){var j=_[f],D=j.type;D===0?d(O,C,p,j.a,j.idx):D===2?x(C,0,j):g(C,0,j)}return O}},743:function(h,s,t){"use strict";var i=t(5070);function n(l,u){this.stars=l,this.edges=u}h.exports=function(l,u){for(var d=new Array(l),c=0;c<l;++c)d[c]=[];return new n(d,u)};var r=n.prototype;function a(l,u,d){for(var c=1,x=l.length;c<x;c+=2)if(l[c-1]===u&&l[c]===d)return l[c-1]=l[x-2],l[c]=l[x-1],void(l.length=x-2)}r.isConstraint=function(){var l=[0,0];function u(d,c){return d[0]-c[0]||d[1]-c[1]}return function(d,c){return l[0]=Math.min(d,c),l[1]=Math.max(d,c),i.eq(this.edges,l,u)>=0}}(),r.removeTriangle=function(l,u,d){var c=this.stars;a(c[l],u,d),a(c[u],d,l),a(c[d],l,u)},r.addTriangle=function(l,u,d){var c=this.stars;c[l].push(u,d),c[u].push(d,l),c[d].push(l,u)},r.opposite=function(l,u){for(var d=this.stars[u],c=1,x=d.length;c<x;c+=2)if(d[c]===l)return d[c-1];return-1},r.flip=function(l,u){var d=this.opposite(l,u),c=this.opposite(u,l);this.removeTriangle(l,u,d),this.removeTriangle(u,l,c),this.addTriangle(l,c,d),this.addTriangle(u,d,c)},r.edges=function(){for(var l=this.stars,u=[],d=0,c=l.length;d<c;++d)for(var x=l[d],g=0,p=x.length;g<p;g+=2)u.push([x[g],x[g+1]]);return u},r.cells=function(){for(var l=this.stars,u=[],d=0,c=l.length;d<c;++d)for(var x=l[d],g=0,p=x.length;g<p;g+=2){var v=x[g],m=x[g+1];d<Math.min(v,m)&&u.push([d,v,m])}return u}},9887:function(h){"use strict";h.exports=function(s){for(var t=1,i=1;i<s.length;++i)for(var n=0;n<i;++n)if(s[i]<s[n])t=-t;else if(s[n]===s[i])return 0;return t}},9243:function(h,s,t){"use strict";var i=t(3094),n=t(6606);function r(u,d){for(var c=0,x=u.length,g=0;g<x;++g)c+=u[g]*d[g];return c}function a(u){var d=u.length;if(d===0)return[];u[0].length;var c=i([u.length+1,u.length+1],1),x=i([u.length+1],1);c[d][d]=0;for(var g=0;g<d;++g){for(var p=0;p<=g;++p)c[p][g]=c[g][p]=2*r(u[g],u[p]);x[g]=r(u[g],u[g])}var v=n(c,x),m=0,y=v[d+1];for(g=0;g<y.length;++g)m+=y[g];var _=new Array(d);for(g=0;g<d;++g){y=v[g];var f=0;for(p=0;p<y.length;++p)f+=y[p];_[g]=f/m}return _}function l(u){if(u.length===0)return[];for(var d=u[0].length,c=i([d]),x=a(u),g=0;g<u.length;++g)for(var p=0;p<d;++p)c[p]+=u[g][p]*x[g];return c}l.barycenetric=a,h.exports=l},1778:function(h,s,t){h.exports=function(n){for(var r=i(n),a=0,l=0;l<n.length;++l)for(var u=n[l],d=0;d<r.length;++d)a+=Math.pow(u[d]-r[d],2);return Math.sqrt(a/n.length)};var i=t(9243)},197:function(h,s,t){"use strict";h.exports=function(S,w,E){var P;if(E){P=w;for(var C=new Array(w.length),O=0;O<w.length;++O){var R=w[O];C[O]=[R[0],R[1],E[O]]}w=C}for(var j=function(D,N,W){var F=v(D,[],p(D));return _(N,F,W),!!F}(S,w,!!E);f(S,w,!!E);)j=!0;if(E&&j)for(P.length=0,E.length=0,O=0;O<w.length;++O)R=w[O],P.push([R[0],R[1]]),E.push(R[2]);return j};var i=t(1731),n=t(2569),r=t(4434),a=t(5125),l=t(8846),u=t(7999),d=t(2826),c=t(8551),x=t(5528);function g(S){var w=u(S);return[c(w,-1/0),c(w,1/0)]}function p(S){for(var w=new Array(S.length),E=0;E<S.length;++E){var P=S[E];w[E]=[c(P[0],-1/0),c(P[1],-1/0),c(P[0],1/0),c(P[1],1/0)]}return w}function v(S,w,E){for(var P=w.length,C=new i(P),O=[],R=0;R<w.length;++R){var j=w[R],D=g(j[0]),N=g(j[1]);O.push([c(D[0],-1/0),c(N[0],-1/0),c(D[1],1/0),c(N[1],1/0)])}n(O,function(te,J){C.link(te,J)});var W=!0,F=new Array(P);for(R=0;R<P;++R)(V=C.find(R))!==R&&(W=!1,S[V]=[Math.min(S[R][0],S[V][0]),Math.min(S[R][1],S[V][1])]);if(W)return null;var U=0;for(R=0;R<P;++R){var V;(V=C.find(R))===R?(F[R]=U,S[U++]=S[R]):F[R]=-1}for(S.length=U,R=0;R<P;++R)F[R]<0&&(F[R]=F[C.find(R)]);return F}function m(S,w){return S[0]-w[0]||S[1]-w[1]}function y(S,w){return S[0]-w[0]||S[1]-w[1]||(S[2]<w[2]?-1:S[2]>w[2]?1:0)}function _(S,w,E){if(S.length!==0){if(w)for(var P=0;P<S.length;++P){var C=w[(R=S[P])[0]],O=w[R[1]];R[0]=Math.min(C,O),R[1]=Math.max(C,O)}else for(P=0;P<S.length;++P){var R;C=(R=S[P])[0],O=R[1],R[0]=Math.min(C,O),R[1]=Math.max(C,O)}E?S.sort(y):S.sort(m);var j=1;for(P=1;P<S.length;++P){var D=S[P-1],N=S[P];(N[0]!==D[0]||N[1]!==D[1]||E&&N[2]!==D[2])&&(S[j++]=N)}S.length=j}}function f(S,w,E){var P=function(D,N){for(var W=new Array(N.length),F=0;F<N.length;++F){var U=N[F],V=D[U[0]],te=D[U[1]];W[F]=[c(Math.min(V[0],te[0]),-1/0),c(Math.min(V[1],te[1]),-1/0),c(Math.max(V[0],te[0]),1/0),c(Math.max(V[1],te[1]),1/0)]}return W}(S,w),C=function(D,N,W){var F=[];return n(W,function(U,V){var te=N[U],J=N[V];if(te[0]!==J[0]&&te[0]!==J[1]&&te[1]!==J[0]&&te[1]!==J[1]){var K=D[te[0]],X=D[te[1]],Z=D[J[0]],$=D[J[1]];r(K,X,Z,$)&&F.push([U,V])}}),F}(S,w,P),O=function(D,N,W,F){var U=[];return n(W,F,function(V,te){var J=N[V];if(J[0]!==te&&J[1]!==te){var K=D[te],X=D[J[0]],Z=D[J[1]];r(X,Z,K,K)&&U.push([V,te])}}),U}(S,w,P,p(S)),R=function(D,N,W,F,U){var V,te,J=D.map(function(le){return[a(le[0]),a(le[1])]});for(V=0;V<W.length;++V){var K=W[V];te=K[0];var X=K[1],Z=N[te],$=N[X],re=x(d(D[Z[0]]),d(D[Z[1]]),d(D[$[0]]),d(D[$[1]]));if(re){var oe=D.length;D.push([u(re[0]),u(re[1])]),J.push(re),F.push([te,oe],[X,oe])}}for(F.sort(function(le,ae){if(le[0]!==ae[0])return le[0]-ae[0];var he=J[le[1]],Se=J[ae[1]];return l(he[0],Se[0])||l(he[1],Se[1])}),V=F.length-1;V>=0;--V){var ie=N[te=(_e=F[V])[0]],ue=ie[0],me=ie[1],be=D[ue],ge=D[me];if((be[0]-ge[0]||be[1]-ge[1])<0){var de=ue;ue=me,me=de}ie[0]=ue;var ve,pe=ie[1]=_e[1];for(U&&(ve=ie[2]);V>0&&F[V-1][0]===te;){var _e,Te=(_e=F[--V])[1];U?N.push([pe,Te,ve]):N.push([pe,Te]),pe=Te}U?N.push([pe,me,ve]):N.push([pe,me])}return J}(S,w,C,O,E),j=v(S,R);return _(w,j,E),!!j||C.length>0||O.length>0}},5528:function(h,s,t){"use strict";h.exports=function(x,g,p,v){var m=l(g,x),y=l(v,p),_=c(m,y);if(a(_)===0)return null;var f=c(y,l(x,p)),S=n(f,_),w=d(m,S);return u(x,w)};var i=t(3962),n=t(9189),r=t(4354),a=t(4951),l=t(6695),u=t(7584),d=t(4469);function c(x,g){return r(i(x[0],g[1]),i(x[1],g[0]))}},5692:function(h){h.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(h,s,t){"use strict";var i=t(5692),n=t(3578);function r(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function a(u){for(var d,c="#",x=0;x<3;++x)c+=("00"+(d=(d=u[x]).toString(16))).substr(d.length);return c}function l(u){return"rgba("+u.join(",")+")"}h.exports=function(u){var d,c,x,g,p,v,m,y,_,f;if(u||(u={}),y=(u.nshades||72)-1,m=u.format||"hex",(v=u.colormap)||(v="jet"),typeof v=="string"){if(v=v.toLowerCase(),!i[v])throw Error(v+" not a supported colorscale");p=i[v]}else{if(!Array.isArray(v))throw Error("unsupported colormap option",v);p=v.slice()}if(p.length>y+1)throw new Error(v+" map requires nshades to be at least size "+p.length);_=Array.isArray(u.alpha)?u.alpha.length!==2?[1,1]:u.alpha.slice():typeof u.alpha=="number"?[u.alpha,u.alpha]:[1,1],d=p.map(function(C){return Math.round(C.index*y)}),_[0]=Math.min(Math.max(_[0],0),1),_[1]=Math.min(Math.max(_[1],0),1);var S=p.map(function(C,O){var R=p[O].index,j=p[O].rgb.slice();return j.length===4&&j[3]>=0&&j[3]<=1||(j[3]=_[0]+(_[1]-_[0])*R),j}),w=[];for(f=0;f<d.length-1;++f){g=d[f+1]-d[f],c=S[f],x=S[f+1];for(var E=0;E<g;E++){var P=E/g;w.push([Math.round(n(c[0],x[0],P)),Math.round(n(c[1],x[1],P)),Math.round(n(c[2],x[2],P)),n(c[3],x[3],P)])}}return w.push(p[p.length-1].rgb.concat(_[1])),m==="hex"?w=w.map(a):m==="rgbaString"?w=w.map(l):m==="float"&&(w=w.map(r)),w}},9398:function(h,s,t){"use strict";h.exports=function(d,c,x,g){var p=i(c,x,g);if(p===0){var v=n(i(d,c,x)),m=n(i(d,c,g));if(v===m){if(v===0){var y=u(d,c,x);return y===u(d,c,g)?0:y?1:-1}return 0}return m===0?v>0||u(d,c,g)?-1:1:v===0?m>0||u(d,c,x)?1:-1:n(m-v)}var _=i(d,c,x);return _>0?p>0&&i(d,c,g)>0?1:-1:_<0?p>0||i(d,c,g)>0?1:-1:i(d,c,g)>0||u(d,c,x)?1:-1};var i=t(417),n=t(7538),r=t(87),a=t(2019),l=t(9662);function u(d,c,x){var g=r(d[0],-c[0]),p=r(d[1],-c[1]),v=r(x[0],-c[0]),m=r(x[1],-c[1]),y=l(a(g,v),a(p,m));return y[y.length-1]>=0}},7538:function(h){"use strict";h.exports=function(s){return s<0?-1:s>0?1:0}},9209:function(h){h.exports=function(i,n){var r=i.length,a=i.length-n.length;if(a)return a;switch(r){case 0:return 0;case 1:return i[0]-n[0];case 2:return i[0]+i[1]-n[0]-n[1]||s(i[0],i[1])-s(n[0],n[1]);case 3:var l=i[0]+i[1],u=n[0]+n[1];if(a=l+i[2]-(u+n[2]))return a;var d=s(i[0],i[1]),c=s(n[0],n[1]);return s(d,i[2])-s(c,n[2])||s(d+i[2],l)-s(c+n[2],u);case 4:var x=i[0],g=i[1],p=i[2],v=i[3],m=n[0],y=n[1],_=n[2],f=n[3];return x+g+p+v-(m+y+_+f)||s(x,g,p,v)-s(m,y,_,f,m)||s(x+g,x+p,x+v,g+p,g+v,p+v)-s(m+y,m+_,m+f,y+_,y+f,_+f)||s(x+g+p,x+g+v,x+p+v,g+p+v)-s(m+y+_,m+y+f,m+_+f,y+_+f);default:for(var S=i.slice().sort(t),w=n.slice().sort(t),E=0;E<r;++E)if(a=S[E]-w[E])return a;return 0}};var s=Math.min;function t(i,n){return i-n}},1284:function(h,s,t){"use strict";var i=t(9209),n=t(9887);h.exports=function(r,a){return i(r,a)||n(r)-n(a)}},5537:function(h,s,t){"use strict";var i=t(8950),n=t(8722),r=t(3332);h.exports=function(a){var l=a.length;if(l===0)return[];if(l===1)return[[0]];var u=a[0].length;return u===0?[]:u===1?i(a):u===2?n(a):r(a,u)}},8950:function(h){"use strict";h.exports=function(s){for(var t=0,i=0,n=1;n<s.length;++n)s[n][0]<s[t][0]&&(t=n),s[n][0]>s[i][0]&&(i=n);return t<i?[[t],[i]]:t>i?[[i],[t]]:[[t]]}},8722:function(h,s,t){"use strict";h.exports=function(n){var r=i(n),a=r.length;if(a<=2)return[];for(var l=new Array(a),u=r[a-1],d=0;d<a;++d){var c=r[d];l[d]=[u,c],u=c}return l};var i=t(3266)},3332:function(h,s,t){"use strict";h.exports=function(r,a){try{return i(r,!0)}catch(d){var l=n(r);if(l.length<=a)return[];var u=function(c,x){for(var g=c.length,p=new Array(g),v=0;v<x.length;++v)p[v]=c[x[v]];var m=x.length;for(v=0;v<g;++v)x.indexOf(v)<0&&(p[m++]=c[v]);return p}(r,l);return function(c,x){for(var g=c.length,p=x.length,v=0;v<g;++v)for(var m=c[v],y=0;y<m.length;++y){var _=m[y];if(_<p)m[y]=x[_];else{_-=p;for(var f=0;f<p;++f)_>=x[f]&&(_+=1);m[y]=_}}return c}(i(u,!0),l)}};var i=t(2183),n=t(2153)},9680:function(h){"use strict";h.exports=function(s,t,i,n,r,a){var l=r-1,u=r*r,d=l*l,c=(1+2*r)*d,x=r*d,g=u*(3-2*r),p=u*l;if(s.length){a||(a=new Array(s.length));for(var v=s.length-1;v>=0;--v)a[v]=c*s[v]+x*t[v]+g*i[v]+p*n[v];return a}return c*s+x*t+g*i+p*n},h.exports.derivative=function(s,t,i,n,r,a){var l=6*r*r-6*r,u=3*r*r-4*r+1,d=-6*r*r+6*r,c=3*r*r-2*r;if(s.length){a||(a=new Array(s.length));for(var x=s.length-1;x>=0;--x)a[x]=l*s[x]+u*t[x]+d*i[x]+c*n[x];return a}return l*s+u*t+d*i[x]+c*n}},4419:function(h,s,t){"use strict";var i=t(2183),n=t(1215);function r(l,u){this.point=l,this.index=u}function a(l,u){for(var d=l.point,c=u.point,x=d.length,g=0;g<x;++g){var p=c[g]-d[g];if(p)return p}return 0}h.exports=function(l,u){var d=l.length;if(d===0)return[];var c=l[0].length;if(c<1)return[];if(c===1)return function(R,j,D){if(R===1)return D?[[-1,0]]:[];var N=j.map(function(te,J){return[te[0],J]});N.sort(function(te,J){return te[0]-J[0]});for(var W=new Array(R-1),F=1;F<R;++F){var U=N[F-1],V=N[F];W[F-1]=[U[1],V[1]]}return D&&W.push([-1,W[0][1]],[W[R-1][1],-1]),W}(d,l,u);for(var x=new Array(d),g=1,p=0;p<d;++p){for(var v=l[p],m=new Array(c+1),y=0,_=0;_<c;++_){var f=v[_];m[_]=f,y+=f*f}m[c]=y,x[p]=new r(m,p),g=Math.max(y,g)}n(x,a),d=x.length;var S=new Array(d+c+1),w=new Array(d+c+1),E=(c+1)*(c+1)*g,P=new Array(c+1);for(p=0;p<=c;++p)P[p]=0;for(P[c]=E,S[0]=P.slice(),w[0]=-1,p=0;p<=c;++p)(m=P.slice())[p]=1,S[p+1]=m,w[p+1]=-1;for(p=0;p<d;++p){var C=x[p];S[p+c+1]=C.point,w[p+c+1]=C.index}var O=i(S,!1);if(O=u?O.filter(function(R){for(var j=0,D=0;D<=c;++D){var N=w[R[D]];if(N<0&&++j>=2)return!1;R[D]=N}return!0}):O.filter(function(R){for(var j=0;j<=c;++j){var D=w[R[j]];if(D<0)return!1;R[j]=D}return!0}),1&c)for(p=0;p<O.length;++p)m=(C=O[p])[0],C[0]=C[1],C[1]=m;return O}},8362:function(h){var s=!1;if(typeof Float64Array!="undefined"){var t=new Float64Array(1),i=new Uint32Array(t.buffer);t[0]=1,s=!0,i[1]===1072693248?(h.exports=function(r){return t[0]=r,[i[0],i[1]]},h.exports.pack=function(r,a){return i[0]=r,i[1]=a,t[0]},h.exports.lo=function(r){return t[0]=r,i[0]},h.exports.hi=function(r){return t[0]=r,i[1]}):i[0]===1072693248?(h.exports=function(r){return t[0]=r,[i[1],i[0]]},h.exports.pack=function(r,a){return i[1]=r,i[0]=a,t[0]},h.exports.lo=function(r){return t[0]=r,i[1]},h.exports.hi=function(r){return t[0]=r,i[0]}):s=!1}if(!s){var n=new Buffer(8);h.exports=function(r){return n.writeDoubleLE(r,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},h.exports.pack=function(r,a){return n.writeUInt32LE(r,0,!0),n.writeUInt32LE(a,4,!0),n.readDoubleLE(0,!0)},h.exports.lo=function(r){return n.writeDoubleLE(r,0,!0),n.readUInt32LE(0,!0)},h.exports.hi=function(r){return n.writeDoubleLE(r,0,!0),n.readUInt32LE(4,!0)}}h.exports.sign=function(r){return h.exports.hi(r)>>>31},h.exports.exponent=function(r){return(h.exports.hi(r)<<1>>>21)-1023},h.exports.fraction=function(r){var a=h.exports.lo(r),l=h.exports.hi(r),u=1048575&l;return 2146435072&l&&(u+=1048576),[a,u]},h.exports.denormalized=function(r){return!(2146435072&h.exports.hi(r))}},3094:function(h){"use strict";function s(t,i,n){var r=0|t[n];if(r<=0)return[];var a,l=new Array(r);if(n===t.length-1)for(a=0;a<r;++a)l[a]=i;else for(a=0;a<r;++a)l[a]=s(t,i,n+1);return l}h.exports=function(t,i){switch(i===void 0&&(i=0),typeof t){case"number":if(t>0)return function(n,r){var a,l;for(a=new Array(n),l=0;l<n;++l)a[l]=r;return a}(0|t,i);break;case"object":if(typeof t.length=="number")return s(t,i,0)}return[]}},8348:function(h,s,t){"use strict";h.exports=function(n,r){var a=n.length;if(typeof r!="number"){r=0;for(var l=0;l<a;++l){var u=n[l];r=Math.max(r,u[0],u[1])}r=1+(0|r)}r|=0;var d=new Array(r);for(l=0;l<r;++l)d[l]=[];for(l=0;l<a;++l)d[(u=n[l])[0]].push(u[1]),d[u[1]].push(u[0]);for(var c=0;c<r;++c)i(d[c],function(x,g){return x-g});return d};var i=t(1215)},5795:function(h){"use strict";h.exports=function(s,t,i){var n=t||0,r=i||1;return[[s[12]+s[0],s[13]+s[1],s[14]+s[2],s[15]+s[3]],[s[12]-s[0],s[13]-s[1],s[14]-s[2],s[15]-s[3]],[s[12]+s[4],s[13]+s[5],s[14]+s[6],s[15]+s[7]],[s[12]-s[4],s[13]-s[5],s[14]-s[6],s[15]-s[7]],[n*s[12]+s[8],n*s[13]+s[9],n*s[14]+s[10],n*s[15]+s[11]],[r*s[12]-s[8],r*s[13]-s[9],r*s[14]-s[10],r*s[15]-s[11]]]}},8444:function(h,s,t){"use strict";h.exports=function(d,c,x){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return typeof d=="number"?new a(g=u(d),g,0):new a(d,u(d.length),0);case 2:var g;if(typeof c=="number")return new a(d,g=u(d.length),+c);x=0;case 3:if(d.length!==c.length)throw new Error("state and velocity lengths must match");return new a(d,c,x)}};var i=t(9680),n=t(5070);function r(d,c,x){return Math.min(c,Math.max(d,x))}function a(d,c,x){this.dimension=d.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var g=0;g<this.dimension;++g)this.bounds[0][g]=-1/0,this.bounds[1][g]=1/0;this._state=d.slice().reverse(),this._velocity=c.slice().reverse(),this._time=[x],this._scratch=[d.slice(),d.slice(),d.slice(),d.slice(),d.slice()]}var l=a.prototype;function u(d){for(var c=new Array(d),x=0;x<d;++x)c[x]=0;return c}l.flush=function(d){var c=n.gt(this._time,d)-1;c<=0||(this._time.splice(0,c),this._state.splice(0,c*this.dimension),this._velocity.splice(0,c*this.dimension))},l.curve=function(d){var c=this._time,x=c.length,g=n.le(c,d),p=this._scratch[0],v=this._state,m=this._velocity,y=this.dimension,_=this.bounds;if(g<0)for(var f=y-1,S=0;S<y;++S,--f)p[S]=v[f];else if(g>=x-1){f=v.length-1;var w=d-c[x-1];for(S=0;S<y;++S,--f)p[S]=v[f]+w*m[f]}else{f=y*(g+1)-1;var E=c[g],P=c[g+1]-E||1,C=this._scratch[1],O=this._scratch[2],R=this._scratch[3],j=this._scratch[4],D=!0;for(S=0;S<y;++S,--f)C[S]=v[f],R[S]=m[f]*P,O[S]=v[f+y],j[S]=m[f+y]*P,D=D&&C[S]===O[S]&&R[S]===j[S]&&R[S]===0;if(D)for(S=0;S<y;++S)p[S]=C[S];else i(C,R,O,j,(d-E)/P,p)}var N=_[0],W=_[1];for(S=0;S<y;++S)p[S]=r(N[S],W[S],p[S]);return p},l.dcurve=function(d){var c=this._time,x=c.length,g=n.le(c,d),p=this._scratch[0],v=this._state,m=this._velocity,y=this.dimension;if(g>=x-1)for(var _=v.length-1,f=(c[x-1],0);f<y;++f,--_)p[f]=m[_];else{_=y*(g+1)-1;var S=c[g],w=c[g+1]-S||1,E=this._scratch[1],P=this._scratch[2],C=this._scratch[3],O=this._scratch[4],R=!0;for(f=0;f<y;++f,--_)E[f]=v[_],C[f]=m[_]*w,P[f]=v[_+y],O[f]=m[_+y]*w,R=R&&E[f]===P[f]&&C[f]===O[f]&&C[f]===0;if(R)for(f=0;f<y;++f)p[f]=0;else for(i.derivative(E,C,P,O,(d-S)/w,p),f=0;f<y;++f)p[f]/=w}return p},l.lastT=function(){var d=this._time;return d[d.length-1]},l.stable=function(){for(var d=this._velocity,c=d.length,x=this.dimension-1;x>=0;--x)if(d[--c])return!1;return!0},l.jump=function(d){var c=this.lastT(),x=this.dimension;if(!(d<c||arguments.length!==x+1)){var g=this._state,p=this._velocity,v=g.length-this.dimension,m=this.bounds,y=m[0],_=m[1];this._time.push(c,d);for(var f=0;f<2;++f)for(var S=0;S<x;++S)g.push(g[v++]),p.push(0);for(this._time.push(d),S=x;S>0;--S)g.push(r(y[S-1],_[S-1],arguments[S])),p.push(0)}},l.push=function(d){var c=this.lastT(),x=this.dimension;if(!(d<c||arguments.length!==x+1)){var g=this._state,p=this._velocity,v=g.length-this.dimension,m=d-c,y=this.bounds,_=y[0],f=y[1],S=m>1e-6?1/m:0;this._time.push(d);for(var w=x;w>0;--w){var E=r(_[w-1],f[w-1],arguments[w]);g.push(E),p.push((E-g[v++])*S)}}},l.set=function(d){var c=this.dimension;if(!(d<this.lastT()||arguments.length!==c+1)){var x=this._state,g=this._velocity,p=this.bounds,v=p[0],m=p[1];this._time.push(d);for(var y=c;y>0;--y)x.push(r(v[y-1],m[y-1],arguments[y])),g.push(0)}},l.move=function(d){var c=this.lastT(),x=this.dimension;if(!(d<=c||arguments.length!==x+1)){var g=this._state,p=this._velocity,v=g.length-this.dimension,m=this.bounds,y=m[0],_=m[1],f=d-c,S=f>1e-6?1/f:0;this._time.push(d);for(var w=x;w>0;--w){var E=arguments[w];g.push(r(y[w-1],_[w-1],g[v++]+E)),p.push(E*S)}}},l.idle=function(d){var c=this.lastT();if(!(d<c)){var x=this.dimension,g=this._state,p=this._velocity,v=g.length-x,m=this.bounds,y=m[0],_=m[1],f=d-c;this._time.push(d);for(var S=x-1;S>=0;--S)g.push(r(y[S],_[S],g[v]+f*p[v])),p.push(0),v+=1}}},7080:function(h){"use strict";function s(v,m,y,_,f,S){this._color=v,this.key=m,this.value=y,this.left=_,this.right=f,this._count=S}function t(v){return new s(v._color,v.key,v.value,v.left,v.right,v._count)}function i(v,m){return new s(v,m.key,m.value,m.left,m.right,m._count)}function n(v){v._count=1+(v.left?v.left._count:0)+(v.right?v.right._count:0)}function r(v,m){this._compare=v,this.root=m}h.exports=function(v){return new r(v||p,null)};var a=r.prototype;function l(v,m){var y;return m.left&&(y=l(v,m.left))?y:(y=v(m.key,m.value))||(m.right?l(v,m.right):void 0)}function u(v,m,y,_){if(m(v,_.key)<=0){var f;if(_.left&&(f=u(v,m,y,_.left))||(f=y(_.key,_.value)))return f}if(_.right)return u(v,m,y,_.right)}function d(v,m,y,_,f){var S,w=y(v,f.key),E=y(m,f.key);if(w<=0&&(f.left&&(S=d(v,m,y,_,f.left))||E>0&&(S=_(f.key,f.value))))return S;if(E>0&&f.right)return d(v,m,y,_,f.right)}function c(v,m){this.tree=v,this._stack=m}Object.defineProperty(a,"keys",{get:function(){var v=[];return this.forEach(function(m,y){v.push(m)}),v}}),Object.defineProperty(a,"values",{get:function(){var v=[];return this.forEach(function(m,y){v.push(y)}),v}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(v,m){for(var y=this._compare,_=this.root,f=[],S=[];_;){var w=y(v,_.key);f.push(_),S.push(w),_=w<=0?_.left:_.right}f.push(new s(0,v,m,null,null,1));for(var E=f.length-2;E>=0;--E)_=f[E],S[E]<=0?f[E]=new s(_._color,_.key,_.value,f[E+1],_.right,_._count+1):f[E]=new s(_._color,_.key,_.value,_.left,f[E+1],_._count+1);for(E=f.length-1;E>1;--E){var P=f[E-1];if(_=f[E],P._color===1||_._color===1)break;var C=f[E-2];if(C.left===P)if(P.left===_){if(!(O=C.right)||O._color!==0){C._color=0,C.left=P.right,P._color=1,P.right=C,f[E-2]=P,f[E-1]=_,n(C),n(P),E>=3&&((R=f[E-3]).left===C?R.left=P:R.right=P);break}P._color=1,C.right=i(1,O),C._color=0,E-=1}else{if(!(O=C.right)||O._color!==0){P.right=_.left,C._color=0,C.left=_.right,_._color=1,_.left=P,_.right=C,f[E-2]=_,f[E-1]=P,n(C),n(P),n(_),E>=3&&((R=f[E-3]).left===C?R.left=_:R.right=_);break}P._color=1,C.right=i(1,O),C._color=0,E-=1}else if(P.right===_){if(!(O=C.left)||O._color!==0){C._color=0,C.right=P.left,P._color=1,P.left=C,f[E-2]=P,f[E-1]=_,n(C),n(P),E>=3&&((R=f[E-3]).right===C?R.right=P:R.left=P);break}P._color=1,C.left=i(1,O),C._color=0,E-=1}else{var O;if(!(O=C.left)||O._color!==0){var R;P.left=_.right,C._color=0,C.right=_.left,_._color=1,_.right=P,_.left=C,f[E-2]=_,f[E-1]=P,n(C),n(P),n(_),E>=3&&((R=f[E-3]).right===C?R.right=_:R.left=_);break}P._color=1,C.left=i(1,O),C._color=0,E-=1}}return f[0]._color=1,new r(y,f[0])},a.forEach=function(v,m,y){if(this.root)switch(arguments.length){case 1:return l(v,this.root);case 2:return u(m,this._compare,v,this.root);case 3:return this._compare(m,y)>=0?void 0:d(m,y,this._compare,v,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var v=[],m=this.root;m;)v.push(m),m=m.left;return new c(this,v)}}),Object.defineProperty(a,"end",{get:function(){for(var v=[],m=this.root;m;)v.push(m),m=m.right;return new c(this,v)}}),a.at=function(v){if(v<0)return new c(this,[]);for(var m=this.root,y=[];;){if(y.push(m),m.left){if(v<m.left._count){m=m.left;continue}v-=m.left._count}if(!v)return new c(this,y);if(v-=1,!m.right||v>=m.right._count)break;m=m.right}return new c(this,[])},a.ge=function(v){for(var m=this._compare,y=this.root,_=[],f=0;y;){var S=m(v,y.key);_.push(y),S<=0&&(f=_.length),y=S<=0?y.left:y.right}return _.length=f,new c(this,_)},a.gt=function(v){for(var m=this._compare,y=this.root,_=[],f=0;y;){var S=m(v,y.key);_.push(y),S<0&&(f=_.length),y=S<0?y.left:y.right}return _.length=f,new c(this,_)},a.lt=function(v){for(var m=this._compare,y=this.root,_=[],f=0;y;){var S=m(v,y.key);_.push(y),S>0&&(f=_.length),y=S<=0?y.left:y.right}return _.length=f,new c(this,_)},a.le=function(v){for(var m=this._compare,y=this.root,_=[],f=0;y;){var S=m(v,y.key);_.push(y),S>=0&&(f=_.length),y=S<0?y.left:y.right}return _.length=f,new c(this,_)},a.find=function(v){for(var m=this._compare,y=this.root,_=[];y;){var f=m(v,y.key);if(_.push(y),f===0)return new c(this,_);y=f<=0?y.left:y.right}return new c(this,[])},a.remove=function(v){var m=this.find(v);return m?m.remove():this},a.get=function(v){for(var m=this._compare,y=this.root;y;){var _=m(v,y.key);if(_===0)return y.value;y=_<=0?y.left:y.right}};var x=c.prototype;function g(v,m){v.key=m.key,v.value=m.value,v.left=m.left,v.right=m.right,v._color=m._color,v._count=m._count}function p(v,m){return v<m?-1:v>m?1:0}Object.defineProperty(x,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(x,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),x.clone=function(){return new c(this.tree,this._stack.slice())},x.remove=function(){var v=this._stack;if(v.length===0)return this.tree;var m=new Array(v.length),y=v[v.length-1];m[m.length-1]=new s(y._color,y.key,y.value,y.left,y.right,y._count);for(var _=v.length-2;_>=0;--_)(y=v[_]).left===v[_+1]?m[_]=new s(y._color,y.key,y.value,m[_+1],y.right,y._count):m[_]=new s(y._color,y.key,y.value,y.left,m[_+1],y._count);if((y=m[m.length-1]).left&&y.right){var f=m.length;for(y=y.left;y.right;)m.push(y),y=y.right;var S=m[f-1];for(m.push(new s(y._color,S.key,S.value,y.left,y.right,y._count)),m[f-1].key=y.key,m[f-1].value=y.value,_=m.length-2;_>=f;--_)y=m[_],m[_]=new s(y._color,y.key,y.value,y.left,m[_+1],y._count);m[f-1].left=m[f]}if((y=m[m.length-1])._color===0){var w=m[m.length-2];for(w.left===y?w.left=null:w.right===y&&(w.right=null),m.pop(),_=0;_<m.length;++_)m[_]._count--;return new r(this.tree._compare,m[0])}if(y.left||y.right){for(y.left?g(y,y.left):y.right&&g(y,y.right),y._color=1,_=0;_<m.length-1;++_)m[_]._count--;return new r(this.tree._compare,m[0])}if(m.length===1)return new r(this.tree._compare,null);for(_=0;_<m.length;++_)m[_]._count--;var E=m[m.length-2];return function(P){for(var C,O,R,j,D=P.length-1;D>=0;--D){if(C=P[D],D===0)return void(C._color=1);if((O=P[D-1]).left===C){if((R=O.right).right&&R.right._color===0)return j=(R=O.right=t(R)).right=t(R.right),O.right=R.left,R.left=O,R.right=j,R._color=O._color,C._color=1,O._color=1,j._color=1,n(O),n(R),D>1&&((N=P[D-2]).left===O?N.left=R:N.right=R),void(P[D-1]=R);if(R.left&&R.left._color===0)return j=(R=O.right=t(R)).left=t(R.left),O.right=j.left,R.left=j.right,j.left=O,j.right=R,j._color=O._color,O._color=1,R._color=1,C._color=1,n(O),n(R),n(j),D>1&&((N=P[D-2]).left===O?N.left=j:N.right=j),void(P[D-1]=j);if(R._color===1){if(O._color===0)return O._color=1,void(O.right=i(0,R));O.right=i(0,R);continue}R=t(R),O.right=R.left,R.left=O,R._color=O._color,O._color=0,n(O),n(R),D>1&&((N=P[D-2]).left===O?N.left=R:N.right=R),P[D-1]=R,P[D]=O,D+1<P.length?P[D+1]=C:P.push(C),D+=2}else{if((R=O.left).left&&R.left._color===0)return j=(R=O.left=t(R)).left=t(R.left),O.left=R.right,R.right=O,R.left=j,R._color=O._color,C._color=1,O._color=1,j._color=1,n(O),n(R),D>1&&((N=P[D-2]).right===O?N.right=R:N.left=R),void(P[D-1]=R);if(R.right&&R.right._color===0)return j=(R=O.left=t(R)).right=t(R.right),O.left=j.right,R.right=j.left,j.right=O,j.left=R,j._color=O._color,O._color=1,R._color=1,C._color=1,n(O),n(R),n(j),D>1&&((N=P[D-2]).right===O?N.right=j:N.left=j),void(P[D-1]=j);if(R._color===1){if(O._color===0)return O._color=1,void(O.left=i(0,R));O.left=i(0,R);continue}var N;R=t(R),O.left=R.right,R.right=O,R._color=O._color,O._color=0,n(O),n(R),D>1&&((N=P[D-2]).right===O?N.right=R:N.left=R),P[D-1]=R,P[D]=O,D+1<P.length?P[D+1]=C:P.push(C),D+=2}}}(m),E.left===y?E.left=null:E.right=null,new r(this.tree._compare,m[0])},Object.defineProperty(x,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(x,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(x,"index",{get:function(){var v=0,m=this._stack;if(m.length===0){var y=this.tree.root;return y?y._count:0}m[m.length-1].left&&(v=m[m.length-1].left._count);for(var _=m.length-2;_>=0;--_)m[_+1]===m[_].right&&(++v,m[_].left&&(v+=m[_].left._count));return v},enumerable:!0}),x.next=function(){var v=this._stack;if(v.length!==0){var m=v[v.length-1];if(m.right)for(m=m.right;m;)v.push(m),m=m.left;else for(v.pop();v.length>0&&v[v.length-1].right===m;)m=v[v.length-1],v.pop()}},Object.defineProperty(x,"hasNext",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].right)return!0;for(var m=v.length-1;m>0;--m)if(v[m-1].left===v[m])return!0;return!1}}),x.update=function(v){var m=this._stack;if(m.length===0)throw new Error("Can't update empty node!");var y=new Array(m.length),_=m[m.length-1];y[y.length-1]=new s(_._color,_.key,v,_.left,_.right,_._count);for(var f=m.length-2;f>=0;--f)(_=m[f]).left===m[f+1]?y[f]=new s(_._color,_.key,_.value,y[f+1],_.right,_._count):y[f]=new s(_._color,_.key,_.value,_.left,y[f+1],_._count);return new r(this.tree._compare,y[0])},x.prev=function(){var v=this._stack;if(v.length!==0){var m=v[v.length-1];if(m.left)for(m=m.left;m;)v.push(m),m=m.right;else for(v.pop();v.length>0&&v[v.length-1].left===m;)m=v[v.length-1],v.pop()}},Object.defineProperty(x,"hasPrev",{get:function(){var v=this._stack;if(v.length===0)return!1;if(v[v.length-1].left)return!0;for(var m=v.length-1;m>0;--m)if(v[m-1].right===v[m])return!0;return!1}})},7453:function(h,s,t){"use strict";h.exports=function(w,E){var P=new c(w);return P.update(E),P};var i=t(9557),n=t(1681),r=t(1011),a=t(2864),l=t(8468),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function d(w,E){return w[0]=E[0],w[1]=E[1],w[2]=E[2],w}function c(w){this.gl=w,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=r(w)}var x=c.prototype;function g(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}x.update=function(w){function E(te,J,K){if(K in w){var X,Z=w[K],$=this[K];(te?Array.isArray(Z)&&Array.isArray(Z[0]):Array.isArray(Z))?this[K]=X=[J(Z[0]),J(Z[1]),J(Z[2])]:this[K]=X=[J(Z),J(Z),J(Z)];for(var re=0;re<3;++re)if(X[re]!==$[re])return!0}return!1}w=w||{};var P,C=E.bind(this,!1,Number),O=E.bind(this,!1,Boolean),R=E.bind(this,!1,String),j=E.bind(this,!0,function(te){if(Array.isArray(te)){if(te.length===3)return[+te[0],+te[1],+te[2],1];if(te.length===4)return[+te[0],+te[1],+te[2],+te[3]]}return[0,0,0,1]}),D=!1,N=!1;if("bounds"in w)for(var W=w.bounds,F=0;F<2;++F)for(var U=0;U<3;++U)W[F][U]!==this.bounds[F][U]&&(N=!0),this.bounds[F][U]=W[F][U];if("ticks"in w)for(P=w.ticks,D=!0,this.autoTicks=!1,F=0;F<3;++F)this.tickSpacing[F]=0;else C("tickSpacing")&&(this.autoTicks=!0,N=!0);if(this._firstInit&&("ticks"in w||"tickSpacing"in w||(this.autoTicks=!0),N=!0,D=!0,this._firstInit=!1),N&&this.autoTicks&&(P=l.create(this.bounds,this.tickSpacing),D=!0),D){for(F=0;F<3;++F)P[F].sort(function(te,J){return te.x-J.x});l.equal(P,this.ticks)?D=!1:this.ticks=P}O("tickEnable"),R("tickFont")&&(D=!0),C("tickSize"),C("tickAngle"),C("tickPad"),j("tickColor");var V=R("labels");R("labelFont")&&(V=!0),O("labelEnable"),C("labelSize"),C("labelPad"),j("labelColor"),O("lineEnable"),O("lineMirror"),C("lineWidth"),j("lineColor"),O("lineTickEnable"),O("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),j("lineTickColor"),O("gridEnable"),C("gridWidth"),j("gridColor"),O("zeroEnable"),j("zeroLineColor"),C("zeroLineWidth"),O("backgroundEnable"),j("backgroundColor"),this._text?this._text&&(V||D)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&D&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};var p=[new g,new g,new g];function v(w,E,P,C,O){for(var R=w.primalOffset,j=w.primalMinor,D=w.mirrorOffset,N=w.mirrorMinor,W=C[E],F=0;F<3;++F)if(E!==F){var U=R,V=D,te=j,J=N;W&1<<F&&(U=D,V=R,te=N,J=j),U[F]=P[0][F],V[F]=P[1][F],O[F]>0?(te[F]=-1,J[F]=0):(te[F]=0,J[F]=1)}}var m=[0,0,0],y={model:u,view:u,projection:u,_ortho:!1};x.isOpaque=function(){return!0},x.isTransparent=function(){return!1},x.drawTransparent=function(w){};var _=[0,0,0],f=[0,0,0],S=[0,0,0];x.draw=function(w){w=w||y;for(var E=this.gl,P=w.model||u,C=w.view||u,O=w.projection||u,R=this.bounds,j=w._ortho||!1,D=a(P,C,O,R,j),N=D.cubeEdges,W=D.axis,F=C[12],U=C[13],V=C[14],te=C[15],J=(j?2:1)*this.pixelRatio*(O[3]*F+O[7]*U+O[11]*V+O[15]*te)/E.drawingBufferHeight,K=0;K<3;++K)this.lastCubeProps.cubeEdges[K]=N[K],this.lastCubeProps.axis[K]=W[K];var X=p;for(K=0;K<3;++K)v(p[K],K,this.bounds,N,W);E=this.gl;var Z,$,re,oe=m;for(K=0;K<3;++K)this.backgroundEnable[K]?oe[K]=W[K]:oe[K]=0;for(this._background.draw(P,C,O,R,oe,this.backgroundColor),this._lines.bind(P,C,O,this),K=0;K<3;++K){var ie=[0,0,0];W[K]>0?ie[K]=R[1][K]:ie[K]=R[0][K];for(var ue=0;ue<2;++ue){var me=(K+1+ue)%3,be=(K+1+(1^ue))%3;this.gridEnable[me]&&this._lines.drawGrid(me,be,this.bounds,ie,this.gridColor[me],this.gridWidth[me]*this.pixelRatio)}for(ue=0;ue<2;++ue)me=(K+1+ue)%3,be=(K+1+(1^ue))%3,this.zeroEnable[be]&&Math.min(R[0][be],R[1][be])<=0&&Math.max(R[0][be],R[1][be])>=0&&this._lines.drawZero(me,be,this.bounds,ie,this.zeroLineColor[be],this.zeroLineWidth[be]*this.pixelRatio)}for(K=0;K<3;++K){this.lineEnable[K]&&this._lines.drawAxisLine(K,this.bounds,X[K].primalOffset,this.lineColor[K],this.lineWidth[K]*this.pixelRatio),this.lineMirror[K]&&this._lines.drawAxisLine(K,this.bounds,X[K].mirrorOffset,this.lineColor[K],this.lineWidth[K]*this.pixelRatio);var ge=d(_,X[K].primalMinor),de=d(f,X[K].mirrorMinor),ve=this.lineTickLength;for(ue=0;ue<3;++ue){var pe=J/P[5*ue];ge[ue]*=ve[ue]*pe,de[ue]*=ve[ue]*pe}this.lineTickEnable[K]&&this._lines.drawAxisTicks(K,X[K].primalOffset,ge,this.lineTickColor[K],this.lineTickWidth[K]*this.pixelRatio),this.lineTickMirror[K]&&this._lines.drawAxisTicks(K,X[K].mirrorOffset,de,this.lineTickColor[K],this.lineTickWidth[K]*this.pixelRatio)}function _e(ke){(re=[0,0,0])[ke]=1}function Te(ke,Me,Ee){var De=(ke+1)%3,fe=(ke+2)%3,xe=Me[De],we=Me[fe],Oe=Ee[De],ze=Ee[fe];xe>0&&ze>0||xe>0&&ze<0||xe<0&&ze>0||xe<0&&ze<0?_e(De):(we>0&&Oe>0||we>0&&Oe<0||we<0&&Oe>0||we<0&&Oe<0)&&_e(fe)}for(this._lines.unbind(),this._text.bind(P,C,O,this.pixelRatio),K=0;K<3;++K){var le=X[K].primalMinor,ae=X[K].mirrorMinor,he=d(S,X[K].primalOffset);for(ue=0;ue<3;++ue)this.lineTickEnable[K]&&(he[ue]+=J*le[ue]*Math.max(this.lineTickLength[ue],0)/P[5*ue]);var Se=[0,0,0];if(Se[K]=1,this.tickEnable[K]){for(this.tickAngle[K]===-3600?(this.tickAngle[K]=0,this.tickAlign[K]="auto"):this.tickAlign[K]=-1,$=1,(Z=[this.tickAlign[K],.5,$])[0]==="auto"?Z[0]=0:Z[0]=parseInt(""+Z[0]),re=[0,0,0],Te(K,le,ae),ue=0;ue<3;++ue)he[ue]+=J*le[ue]*this.tickPad[ue]/P[5*ue];this._text.drawTicks(K,this.tickSize[K],this.tickAngle[K],he,this.tickColor[K],Se,re,Z)}if(this.labelEnable[K]){for($=0,re=[0,0,0],this.labels[K].length>4&&(_e(K),$=1),(Z=[this.labelAlign[K],.5,$])[0]==="auto"?Z[0]=0:Z[0]=parseInt(""+Z[0]),ue=0;ue<3;++ue)he[ue]+=J*le[ue]*this.labelPad[ue]/P[5*ue];he[K]+=.5*(R[0][K]+R[1][K]),this._text.drawLabel(K,this.labelSize[K],this.labelAngle[K],he,this.labelColor[K],[0,0,0],re,Z)}}this._text.unbind()},x.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(h,s,t){"use strict";h.exports=function(u){for(var d=[],c=[],x=0,g=0;g<3;++g)for(var p=(g+1)%3,v=(g+2)%3,m=[0,0,0],y=[0,0,0],_=-1;_<=1;_+=2){c.push(x,x+2,x+1,x+1,x+2,x+3),m[g]=_,y[g]=_;for(var f=-1;f<=1;f+=2){m[p]=f;for(var S=-1;S<=1;S+=2)m[v]=S,d.push(m[0],m[1],m[2],y[0],y[1],y[2]),x+=1}var w=p;p=v,v=w}var E=i(u,new Float32Array(d)),P=i(u,new Uint16Array(c),u.ELEMENT_ARRAY_BUFFER),C=n(u,[{buffer:E,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:u.FLOAT,size:3,offset:12,stride:24}],P),O=r(u);return O.attributes.position.location=0,O.attributes.normal.location=1,new a(u,E,C,O)};var i=t(5827),n=t(2944),r=t(1943).bg;function a(u,d,c,x){this.gl=u,this.buffer=d,this.vao=c,this.shader=x}var l=a.prototype;l.draw=function(u,d,c,x,g,p){for(var v=!1,m=0;m<3;++m)v=v||g[m];if(v){var y=this.gl;y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:d,projection:c,bounds:x,enable:g,colors:p},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),y.disable(y.POLYGON_OFFSET_FILL)}},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(h,s,t){"use strict";h.exports=function(f,S,w,E,P){n(l,S,f),n(l,w,l);for(var C=0,O=0;O<2;++O){c[2]=E[O][2];for(var R=0;R<2;++R){c[1]=E[R][1];for(var j=0;j<2;++j)c[0]=E[j][0],g(u[C],c,l),C+=1}}var D=-1;for(O=0;O<8;++O){for(var N=u[O][3],W=0;W<3;++W)d[O][W]=u[O][W]/N;P&&(d[O][2]*=-1),N<0&&(D<0||d[O][2]<d[D][2])&&(D=O)}if(D<0){D=0;for(var F=0;F<3;++F){for(var U=(F+2)%3,V=(F+1)%3,te=-1,J=-1,K=0;K<2;++K){var X=($=K<<F)+(K<<U)+(1-K<<V),Z=$+(1-K<<U)+(K<<V);a(d[$],d[X],d[Z],x)<0||(K?te=1:J=1)}if(te<0||J<0)J>te&&(D|=1<<F);else{for(K=0;K<2;++K){X=($=K<<F)+(K<<U)+(1-K<<V),Z=$+(1-K<<U)+(K<<V);var $,re=v([u[$],u[X],u[Z],u[$+(1<<U)+(1<<V)]]);K?te=re:J=re}J>te&&(D|=1<<F)}}}var oe=7^D,ie=-1;for(O=0;O<8;++O)O!==D&&O!==oe&&(ie<0||d[ie][1]>d[O][1])&&(ie=O);var ue=-1;for(O=0;O<3;++O)(be=ie^1<<O)!==D&&be!==oe&&(ue<0&&(ue=be),(V=d[be])[0]<d[ue][0]&&(ue=be));var me=-1;for(O=0;O<3;++O){var be;(be=ie^1<<O)!==D&&be!==oe&&be!==ue&&(me<0&&(me=be),(V=d[be])[0]>d[me][0]&&(me=be))}var ge=m;ge[0]=ge[1]=ge[2]=0,ge[i.log2(ue^ie)]=ie&ue,ge[i.log2(ie^me)]=ie&me;var de=7^me;de===D||de===oe?(de=7^ue,ge[i.log2(me^de)]=de&me):ge[i.log2(ue^de)]=de&ue;var ve=y,pe=D;for(F=0;F<3;++F)ve[F]=pe&1<<F?-1:1;return _};var i=t(2288),n=t(104),r=t(4670),a=t(417),l=new Array(16),u=new Array(8),d=new Array(8),c=new Array(3),x=[0,0,0];function g(f,S,w){for(var E=0;E<4;++E){f[E]=w[12+E];for(var P=0;P<3;++P)f[E]+=S[P]*w[4*P+E]}}(function(){for(var f=0;f<8;++f)u[f]=[1,1,1,1],d[f]=[1,1,1]})();var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function v(f){for(var S=0;S<p.length;++S)if((f=r.positive(f,p[S])).length<3)return 0;var w=f[0],E=w[0]/w[3],P=w[1]/w[3],C=0;for(S=1;S+1<f.length;++S){var O=f[S],R=f[S+1],j=O[0]/O[3]-E,D=O[1]/O[3]-P,N=R[0]/R[3]-E,W=R[1]/R[3]-P;C+=Math.abs(j*W-D*N)}return C}var m=[1,1,1],y=[0,0,0],_={cubeEdges:m,axis:y}},1681:function(h,s,t){"use strict";h.exports=function(m,y,_){var f=[],S=[0,0,0],w=[0,0,0],E=[0,0,0],P=[0,0,0];f.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var O=f.length/3|0,R=0;R<_[C].length;++R){var j=+_[C][R].x;f.push(j,0,1,j,1,1,j,0,-1,j,0,-1,j,1,1,j,1,-1)}var D=f.length/3|0;S[C]=O,w[C]=D-O,O=f.length/3|0;for(var N=0;N<_[C].length;++N)j=+_[C][N].x,f.push(j,0,1,j,1,1,j,0,-1,j,0,-1,j,1,1,j,1,-1);D=f.length/3|0,E[C]=O,P[C]=D-O}var W=i(m,new Float32Array(f)),F=n(m,[{buffer:W,type:m.FLOAT,size:3,stride:0,offset:0}]),U=r(m);return U.attributes.position.location=0,new p(m,W,F,U,w,S,P,E)};var i=t(5827),n=t(2944),r=t(1943).j,a=[0,0,0],l=[0,0,0],u=[0,0,0],d=[0,0,0],c=[1,1];function x(m){return m[0]=m[1]=m[2]=0,m}function g(m,y){return m[0]=y[0],m[1]=y[1],m[2]=y[2],m}function p(m,y,_,f,S,w,E,P){this.gl=m,this.vertBuffer=y,this.vao=_,this.shader=f,this.tickCount=S,this.tickOffset=w,this.gridCount=E,this.gridOffset=P}var v=p.prototype;v.bind=function(m,y,_){this.shader.bind(),this.shader.uniforms.model=m,this.shader.uniforms.view=y,this.shader.uniforms.projection=_,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},v.unbind=function(){this.vao.unbind()},v.drawAxisLine=function(m,y,_,f,S){var w=x(l);this.shader.uniforms.majorAxis=l,w[m]=y[1][m]-y[0][m],this.shader.uniforms.minorAxis=w;var E,P=g(d,_);P[m]+=y[0][m],this.shader.uniforms.offset=P,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=f,(E=x(u))[(m+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=x(u))[(m+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},v.drawAxisTicks=function(m,y,_,f,S){if(this.tickCount[m]){var w=x(a);w[m]=1,this.shader.uniforms.majorAxis=w,this.shader.uniforms.offset=y,this.shader.uniforms.minorAxis=_,this.shader.uniforms.color=f,this.shader.uniforms.lineWidth=S;var E=x(u);E[m]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[m],this.tickOffset[m])}},v.drawGrid=function(m,y,_,f,S,w){if(this.gridCount[m]){var E=x(l);E[y]=_[1][y]-_[0][y],this.shader.uniforms.minorAxis=E;var P=g(d,f);P[y]+=_[0][y],this.shader.uniforms.offset=P;var C=x(a);C[m]=1,this.shader.uniforms.majorAxis=C;var O=x(u);O[m]=1,this.shader.uniforms.screenAxis=O,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[m],this.gridOffset[m])}},v.drawZero=function(m,y,_,f,S,w){var E=x(l);this.shader.uniforms.majorAxis=E,E[m]=_[1][m]-_[0][m],this.shader.uniforms.minorAxis=E;var P=g(d,f);P[m]+=_[0][m],this.shader.uniforms.offset=P;var C=x(u);C[y]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},v.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(h,s,t){"use strict";var i=t(6832),n=t(5158),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.j=function(x){return n(x,r,a,null,[{name:"position",type:"vec3"}])};var l=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),u=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);s.f=function(x){return n(x,l,u,null,[{name:"position",type:"vec3"}])};var d=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),c=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);s.bg=function(x){return n(x,d,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(h,s,t){"use strict";h.exports=function(g,p,v,m,y,_){var f=i(g),S=n(g,[{buffer:f,size:3}]),w=a(g);w.attributes.position.location=0;var E=new d(g,w,f,S);return E.update(p,v,m,y,_),E};var i=t(5827),n=t(2944),r=t(875),a=t(1943).f,l=window||k.global||{},u=l.__TEXT_CACHE||{};function d(g,p,v,m){this.gl=g,this.shader=p,this.buffer=v,this.vao=m,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}l.__TEXT_CACHE={};var c=d.prototype,x=[0,0];c.bind=function(g,p,v,m){this.vao.bind(),this.shader.bind();var y=this.shader.uniforms;y.model=g,y.view=p,y.projection=v,y.pixelScale=m,x[0]=this.gl.drawingBufferWidth,x[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=x},c.unbind=function(){this.vao.unbind()},c.update=function(g,p,v,m,y){var _=[];function f(j,D,N,W,F,U){var V=u[N];V||(V=u[N]={});var te=V[D];te||(te=V[D]=function(ue,me){try{return r(ue,me)}catch(be){return console.warn('error vectorizing text:"'+ue+'" error:',be),{cells:[],positions:[]}}}(D,{triangles:!0,font:N,textAlign:"center",textBaseline:"middle",lineSpacing:F,styletags:U}));for(var J=(W||12)/12,K=te.positions,X=te.cells,Z=0,$=X.length;Z<$;++Z)for(var re=X[Z],oe=2;oe>=0;--oe){var ie=K[re[oe]];_.push(J*ie[0],-J*ie[1],j)}}for(var S=[0,0,0],w=[0,0,0],E=[0,0,0],P=[0,0,0],C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){E[O]=_.length/3|0,f(.5*(g[0][O]+g[1][O]),p[O],v[O],12,1.25,C),P[O]=(_.length/3|0)-E[O],S[O]=_.length/3|0;for(var R=0;R<m[O].length;++R)m[O][R].text&&f(m[O][R].x,m[O][R].text,m[O][R].font||y,m[O][R].fontSize||12,1.25,C);w[O]=(_.length/3|0)-S[O]}this.buffer.update(_),this.tickOffset=S,this.tickCount=w,this.labelOffset=E,this.labelCount=P},c.drawTicks=function(g,p,v,m,y,_,f,S){this.tickCount[g]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=y,this.shader.uniforms.angle=v,this.shader.uniforms.scale=p,this.shader.uniforms.offset=m,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g]))},c.drawLabel=function(g,p,v,m,y,_,f,S){this.labelCount[g]&&(this.shader.uniforms.axis=_,this.shader.uniforms.color=y,this.shader.uniforms.angle=v,this.shader.uniforms.scale=p,this.shader.uniforms.offset=m,this.shader.uniforms.alignDir=f,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[g],this.labelOffset[g]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(h,s){"use strict";function t(i,n){var r=i+"",a=r.indexOf("."),l=0;a>=0&&(l=r.length-a-1);var u=Math.pow(10,l),d=Math.round(i*n*u),c=d+"";if(c.indexOf("e")>=0)return c;var x=d/u,g=d%u;d<0?(x=0|-Math.ceil(x),g=0|-g):(x=0|Math.floor(x),g|=0);var p=""+x;if(d<0&&(p="-"+p),l){for(var v=""+g;v.length<l;)v="0"+v;return p+"."+v}return p}s.create=function(i,n){for(var r=[],a=0;a<3;++a){for(var l=[],u=(i[0][a],i[1][a],0);u*n[a]<=i[1][a];++u)l.push({x:u*n[a],text:t(n[a],u)});for(u=-1;u*n[a]>=i[0][a];--u)l.push({x:u*n[a],text:t(n[a],u)});r.push(l)}return r},s.equal=function(i,n){for(var r=0;r<3;++r){if(i[r].length!==n[r].length)return!1;for(var a=0;a<i[r].length;++a){var l=i[r][a],u=n[r][a];if(l.x!==u.x||l.text!==u.text||l.font!==u.font||l.fontColor!==u.fontColor||l.fontSize!==u.fontSize||l.dx!==u.dx||l.dy!==u.dy)return!1}}return!0}},2771:function(h,s,t){"use strict";h.exports=function(_,f,S,w,E){var P=f.model||d,C=f.view||d,O=f.projection||d,R=f._ortho||!1,j=_.bounds,D=(E=E||r(P,C,O,j,R)).axis;a(c,C,P),a(c,O,c);for(var N=m,W=0;W<3;++W)N[W].lo=1/0,N[W].hi=-1/0,N[W].pixelsPerDataUnit=1/0;var F=i(l(c,c));l(c,c);for(var U=0;U<3;++U){var V=(U+1)%3,te=(U+2)%3,J=y;e:for(W=0;W<2;++W){var K=[];if(D[U]<0!=!!W){J[U]=j[W][U];for(var X=0;X<2;++X){J[V]=j[X^W][V];for(var Z=0;Z<2;++Z)J[te]=j[Z^X^W][te],K.push(J.slice())}var $=R?5:4;for(X=$;X===$;++X){if(K.length===0)continue e;K=n.positive(K,F[X])}for(X=0;X<K.length;++X){te=K[X];var re=v(y,c,te,S,w);for(Z=0;Z<3;++Z)N[Z].lo=Math.min(N[Z].lo,te[Z]),N[Z].hi=Math.max(N[Z].hi,te[Z]),Z!==U&&(N[Z].pixelsPerDataUnit=Math.min(N[Z].pixelsPerDataUnit,Math.abs(re[Z])))}}}}return N};var i=t(5795),n=t(4670),r=t(2864),a=t(104),l=t(2142),u=t(6342),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function x(_,f,S){this.lo=_,this.hi=f,this.pixelsPerDataUnit=S}var g=[0,0,0,1],p=[0,0,0,1];function v(_,f,S,w,E){for(var P=0;P<3;++P){for(var C=g,O=p,R=0;R<3;++R)O[R]=C[R]=S[R];O[3]=C[3]=1,O[P]+=1,u(O,O,f),O[3]<0&&(_[P]=1/0),C[P]-=1,u(C,C,f),C[3]<0&&(_[P]=1/0);var j=(C[0]/C[3]-O[0]/O[3])*w,D=(C[1]/C[3]-O[1]/O[3])*E;_[P]=.25*Math.sqrt(j*j+D*D)}return _}var m=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],y=[0,0,0]},5827:function(h,s,t){"use strict";var i=t(5306),n=t(7498),r=t(5050),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function l(x,g,p,v,m){this.gl=x,this.type=g,this.handle=p,this.length=v,this.usage=m}var u=l.prototype;function d(x,g,p,v,m,y){var _=m.length*m.BYTES_PER_ELEMENT;if(y<0)return x.bufferData(g,m,v),_;if(_+y>p)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return x.bufferSubData(g,y,m),p}function c(x,g){for(var p=i.malloc(x.length,g),v=x.length,m=0;m<v;++m)p[m]=x[m];return p}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(x,g){if(typeof g!="number"&&(g=-1),this.bind(),typeof x=="object"&&x.shape!==void 0){var p=x.dtype;if(a.indexOf(p)<0&&(p="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(p=gl.getExtension("OES_element_index_uint")&&p!=="uint16"?"uint32":"uint16"),p===x.dtype&&function(_,f){for(var S=1,w=f.length-1;w>=0;--w){if(f[w]!==S)return!1;S*=_[w]}return!0}(x.shape,x.stride))x.offset===0&&x.data.length===x.shape[0]?this.length=d(this.gl,this.type,this.length,this.usage,x.data,g):this.length=d(this.gl,this.type,this.length,this.usage,x.data.subarray(x.offset,x.shape[0]),g);else{var v=i.malloc(x.size,p),m=r(v,x.shape);n.assign(m,x),this.length=d(this.gl,this.type,this.length,this.usage,g<0?v:v.subarray(0,x.size),g),i.free(v)}}else if(Array.isArray(x)){var y;y=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(x,"uint16"):c(x,"float32"),this.length=d(this.gl,this.type,this.length,this.usage,g<0?y:y.subarray(0,x.length),g),i.free(y)}else if(typeof x=="object"&&typeof x.length=="number")this.length=d(this.gl,this.type,this.length,this.usage,x,g);else{if(typeof x!="number"&&x!==void 0)throw new Error("gl-buffer: Invalid data type");if(g>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(x|=0)<=0&&(x=1),this.gl.bufferData(this.type,0|x,this.usage),this.length=x}},h.exports=function(x,g,p,v){if(p=p||x.ARRAY_BUFFER,v=v||x.DYNAMIC_DRAW,p!==x.ARRAY_BUFFER&&p!==x.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(v!==x.DYNAMIC_DRAW&&v!==x.STATIC_DRAW&&v!==x.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var m=x.createBuffer(),y=new l(x,p,m,0,v);return y.update(g),y}},1140:function(h,s,t){"use strict";var i=t(2858);h.exports=function(r,a){var l=r.positions,u=r.vectors,d={positions:[],vertexIntensity:[],vertexIntensityBounds:r.vertexIntensityBounds,vectors:[],cells:[],coneOffset:r.coneOffset,colormap:r.colormap};if(r.positions.length===0)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),d;for(var c=0,x=1/0,g=-1/0,p=1/0,v=-1/0,m=1/0,y=-1/0,_=null,f=null,S=[],w=1/0,E=!1,P=0;P<l.length;P++){var C=l[P];x=Math.min(C[0],x),g=Math.max(C[0],g),p=Math.min(C[1],p),v=Math.max(C[1],v),m=Math.min(C[2],m),y=Math.max(C[2],y);var O=u[P];if(i.length(O)>c&&(c=i.length(O)),P){var R=2*i.distance(_,C)/(i.length(f)+i.length(O));R?(w=Math.min(w,R),E=!1):E=!0}E||(_=C,f=O),S.push(O)}var j=[x,p,m],D=[g,v,y];a&&(a[0]=j,a[1]=D),c===0&&(c=1);var N=1/c;isFinite(w)||(w=1),d.vectorScale=w;var W=r.coneSize||.5;r.absoluteConeSize&&(W=r.absoluteConeSize*N),d.coneScale=W,P=0;for(var F=0;P<l.length;P++)for(var U=(C=l[P])[0],V=C[1],te=C[2],J=S[P],K=i.length(J)*N,X=0;X<8;X++){d.positions.push([U,V,te,F++]),d.positions.push([U,V,te,F++]),d.positions.push([U,V,te,F++]),d.positions.push([U,V,te,F++]),d.positions.push([U,V,te,F++]),d.positions.push([U,V,te,F++]),d.vectors.push(J),d.vectors.push(J),d.vectors.push(J),d.vectors.push(J),d.vectors.push(J),d.vectors.push(J),d.vertexIntensity.push(K,K,K),d.vertexIntensity.push(K,K,K);var Z=d.positions.length;d.cells.push([Z-6,Z-5,Z-4],[Z-3,Z-2,Z-1])}return d};var n=t(7234);h.exports.createMesh=t(5028),h.exports.createConeMesh=function(r,a){return h.exports.createMesh(r,a,{shaders:n,traceType:"cone"})}},5028:function(h,s,t){"use strict";var i=t(5158),n=t(5827),r=t(2944),a=t(8931),l=t(104),u=t(7437),d=t(5050),c=t(9156),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(v,m,y,_,f,S,w,E,P,C,O){this.gl=v,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=m,this.dirty=!0,this.triShader=y,this.pickShader=_,this.trianglePositions=f,this.triangleVectors=S,this.triangleColors=E,this.triangleUVs=P,this.triangleIds=w,this.triangleVAO=C,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=O,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var p=g.prototype;p.isOpaque=function(){return this.opacity>=1},p.isTransparent=function(){return this.opacity<1},p.pickSlots=1,p.setPickBase=function(v){this.pickId=v},p.update=function(v){v=v||{};var m=this.gl;this.dirty=!0,"lightPosition"in v&&(this.lightPosition=v.lightPosition),"opacity"in v&&(this.opacity=v.opacity),"ambient"in v&&(this.ambientLight=v.ambient),"diffuse"in v&&(this.diffuseLight=v.diffuse),"specular"in v&&(this.specularLight=v.specular),"roughness"in v&&(this.roughness=v.roughness),"fresnel"in v&&(this.fresnel=v.fresnel),v.tubeScale!==void 0&&(this.tubeScale=v.tubeScale),v.vectorScale!==void 0&&(this.vectorScale=v.vectorScale),v.coneScale!==void 0&&(this.coneScale=v.coneScale),v.coneOffset!==void 0&&(this.coneOffset=v.coneOffset),v.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=m.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=m.LINEAR,this.texture.setPixels(function(re){for(var oe=c({colormap:re,nshades:256,format:"rgba"}),ie=new Uint8Array(1024),ue=0;ue<256;++ue){for(var me=oe[ue],be=0;be<3;++be)ie[4*ue+be]=me[be];ie[4*ue+3]=255*me[3]}return d(ie,[256,256,4],[4,0,1])}(v.colormap)),this.texture.generateMipmap());var y=v.cells,_=v.positions,f=v.vectors;if(_&&y&&f){var S=[],w=[],E=[],P=[],C=[];this.cells=y,this.positions=_,this.vectors=f;var O=v.meshColor||[1,1,1,1],R=v.vertexIntensity,j=1/0,D=-1/0;if(R)if(v.vertexIntensityBounds)j=+v.vertexIntensityBounds[0],D=+v.vertexIntensityBounds[1];else for(var N=0;N<R.length;++N){var W=R[N];j=Math.min(j,W),D=Math.max(D,W)}else for(N=0;N<_.length;++N)W=_[N][2],j=Math.min(j,W),D=Math.max(D,W);for(this.intensity=R||function(re){for(var oe=re.length,ie=new Array(oe),ue=0;ue<oe;++ue)ie[ue]=re[ue][2];return ie}(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=0;N<_.length;++N)for(var F=_[N],U=0;U<3;++U)!isNaN(F[U])&&isFinite(F[U])&&(this.bounds[0][U]=Math.min(this.bounds[0][U],F[U]),this.bounds[1][U]=Math.max(this.bounds[1][U],F[U]));var V=0;e:for(N=0;N<y.length;++N){var te=y[N];if(te.length===3){for(U=0;U<3;++U){F=_[K=te[U]];for(var J=0;J<3;++J)if(isNaN(F[J])||!isFinite(F[J]))continue e}for(U=0;U<3;++U){var K;F=_[K=te[2-U]],S.push(F[0],F[1],F[2],F[3]);var X=f[K];w.push(X[0],X[1],X[2],X[3]||0);var Z,$=O;$.length===3?E.push($[0],$[1],$[2],1):E.push($[0],$[1],$[2],$[3]),Z=R?[(R[K]-j)/(D-j),0]:[(F[2]-j)/(D-j),0],P.push(Z[0],Z[1]),C.push(N)}V+=1}}this.triangleCount=V,this.trianglePositions.update(S),this.triangleVectors.update(w),this.triangleColors.update(E),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(C))}},p.drawTransparent=p.draw=function(v){v=v||{};for(var m=this.gl,y=v.model||x,_=v.view||x,f=v.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);var E={model:y,view:_,projection:f,inverseModel:x.slice(),clipBounds:S,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=u(E.inverseModel,E.model),m.disable(m.CULL_FACE),this.texture.bind(0);var P=new Array(16);for(l(P,E.view,E.model),l(P,E.projection,P),u(P,P),w=0;w<3;++w)E.eyePosition[w]=P[12+w]/P[15];var C=P[15];for(w=0;w<3;++w)C+=this.lightPosition[w]*P[4*w+3];for(w=0;w<3;++w){for(var O=P[12+w],R=0;R<3;++R)O+=P[4*R+w]*this.lightPosition[R];E.lightPosition[w]=O/C}if(this.triangleCount>0){var j=this.triShader;j.bind(),j.uniforms=E,this.triangleVAO.bind(),m.drawArrays(m.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},p.drawPick=function(v){v=v||{};for(var m=this.gl,y=v.model||x,_=v.view||x,f=v.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(S[0][w],this.clipBounds[0][w]),S[1][w]=Math.min(S[1][w],this.clipBounds[1][w]);this._model=[].slice.call(y),this._view=[].slice.call(_),this._projection=[].slice.call(f),this._resolution=[m.drawingBufferWidth,m.drawingBufferHeight];var E={model:y,view:_,projection:f,clipBounds:S,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),m.drawArrays(m.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},p.pick=function(v){if(!v||v.id!==this.pickId)return null;var m=v.value[0]+256*v.value[1]+65536*v.value[2],y=this.cells[m],_=this.positions[y[1]].slice(0,3),f={position:_,dataCoordinate:_,index:Math.floor(y[1]/48)};return this.traceType==="cone"?f.index=Math.floor(y[1]/48):this.traceType==="streamtube"&&(f.intensity=this.intensity[y[1]],f.velocity=this.vectors[y[1]].slice(0,3),f.divergence=this.vectors[y[1]][3],f.index=m),f},p.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},h.exports=function(v,m,y){var _=y.shaders;arguments.length===1&&(v=(m=v).gl);var f=function(D,N){var W=i(D,N.meshShader.vertex,N.meshShader.fragment,null,N.meshShader.attributes);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W.attributes.vector.location=4,W}(v,_),S=function(D,N){var W=i(D,N.pickShader.vertex,N.pickShader.fragment,null,N.pickShader.attributes);return W.attributes.position.location=0,W.attributes.id.location=1,W.attributes.vector.location=4,W}(v,_),w=a(v,d(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap(),w.minFilter=v.LINEAR_MIPMAP_LINEAR,w.magFilter=v.LINEAR;var E=n(v),P=n(v),C=n(v),O=n(v),R=n(v),j=new g(v,w,f,S,E,P,R,C,O,r(v,[{buffer:E,type:v.FLOAT,size:4},{buffer:R,type:v.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:C,type:v.FLOAT,size:4},{buffer:O,type:v.FLOAT,size:2},{buffer:P,type:v.FLOAT,size:4}]),y.traceType||"cone");return j.update(m),j}},7234:function(h,s,t){var i=t(6832),n=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},s.pickShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(h){h.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(h,s,t){var i=t(1950);h.exports=function(n){return i[n]}},3110:function(h,s,t){"use strict";h.exports=function(g){var p=g.gl,v=i(p),m=n(p,[{buffer:v,type:p.FLOAT,size:3,offset:0,stride:40},{buffer:v,type:p.FLOAT,size:4,offset:12,stride:40},{buffer:v,type:p.FLOAT,size:3,offset:28,stride:40}]),y=r(p);y.attributes.position.location=0,y.attributes.color.location=1,y.attributes.offset.location=2;var _=new l(p,v,m,y);return _.update(g),_};var i=t(5827),n=t(2944),r=t(7667),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(g,p,v,m){this.gl=g,this.shader=m,this.buffer=p,this.vao=v,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=l.prototype;function d(g,p){for(var v=0;v<3;++v)g[0][v]=Math.min(g[0][v],p[v]),g[1][v]=Math.max(g[1][v],p[v])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(g){var p=this.gl,v=this.shader.uniforms;this.shader.bind();var m=v.view=g.view||a,y=v.projection=g.projection||a;v.model=g.model||a,v.clipBounds=this.clipBounds,v.opacity=this.opacity;var _=m[12],f=m[13],S=m[14],w=m[15],E=(g._ortho?2:1)*this.pixelRatio*(y[3]*_+y[7]*f+y[11]*S+y[15]*w)/p.drawingBufferHeight;this.vao.bind();for(var P=0;P<3;++P)p.lineWidth(this.lineWidth[P]*this.pixelRatio),v.capSize=this.capSize[P]*E,this.lineCount[P]&&p.drawArrays(p.LINES,this.lineOffset[P],this.lineCount[P]);this.vao.unbind()};var c=function(){for(var g=new Array(3),p=0;p<3;++p){for(var v=[],m=1;m<=2;++m)for(var y=-1;y<=1;y+=2){var _=[0,0,0];_[(m+p)%3]=y,v.push(_)}g[p]=v}return g}();function x(g,p,v,m){for(var y=c[m],_=0;_<y.length;++_){var f=y[_];g.push(p[0],p[1],p[2],v[0],v[1],v[2],v[3],f[0],f[1],f[2])}return y.length}u.update=function(g){"lineWidth"in(g=g||{})&&(this.lineWidth=g.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in g&&(this.capSize=g.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in g&&(this.opacity=+g.opacity,this.opacity<1&&(this.hasAlpha=!0));var p=g.color||[[0,0,0],[0,0,0],[0,0,0]],v=g.position,m=g.error;if(Array.isArray(p[0])||(p=[p,p,p]),v&&m){var y=[],_=v.length,f=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=f;e:for(var w=0;w<_;++w){for(var E=v[w],P=0;P<3;++P)if(isNaN(E[P])||!isFinite(E[P]))continue e;var C,O=m[w],R=p[S];Array.isArray(R[0])&&(R=p[w]),R.length===3?R=[R[0],R[1],R[2],1]:R.length===4&&(R=[R[0],R[1],R[2],R[3]],!this.hasAlpha&&R[3]<1&&(this.hasAlpha=!0)),isNaN(O[0][S])||isNaN(O[1][S])||(O[0][S]<0&&((C=E.slice())[S]+=O[0][S],y.push(E[0],E[1],E[2],R[0],R[1],R[2],R[3],0,0,0,C[0],C[1],C[2],R[0],R[1],R[2],R[3],0,0,0),d(this.bounds,C),f+=2+x(y,C,R,S)),O[1][S]>0&&((C=E.slice())[S]+=O[1][S],y.push(E[0],E[1],E[2],R[0],R[1],R[2],R[3],0,0,0,C[0],C[1],C[2],R[0],R[1],R[2],R[3],0,0,0),d(this.bounds,C),f+=2+x(y,C,R,S)))}this.lineCount[S]=f-this.lineOffset[S]}this.buffer.update(y)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(h,s,t){"use strict";var i=t(6832),n=t(5158),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);h.exports=function(l){return n(l,r,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(h,s,t){"use strict";var i=t(8931);h.exports=function(_,f,S,w){n||(n=_.FRAMEBUFFER_UNSUPPORTED,r=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,l=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=_.getExtension("WEBGL_draw_buffers");if(!u&&E&&function(N,W){var F=N.getParameter(W.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(F+1);for(var U=0;U<=F;++U){for(var V=new Array(F),te=0;te<U;++te)V[te]=N.COLOR_ATTACHMENT0+te;for(te=U;te<F;++te)V[te]=N.NONE;u[U]=V}}(_,E),Array.isArray(f)&&(w=S,S=0|f[1],f=0|f[0]),typeof f!="number")throw new Error("gl-fbo: Missing shape parameter");var P=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(f<0||f>P||S<0||S>P)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(w=w||{})){if((C=Math.max(0|w.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>_.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var O=_.UNSIGNED_BYTE,R=_.getExtension("OES_texture_float");if(w.float&&C>0){if(!R)throw new Error("gl-fbo: Context does not support floating point textures");O=_.FLOAT}else w.preferFloat&&C>0&&R&&(O=_.FLOAT);var j=!0;"depth"in w&&(j=!!w.depth);var D=!1;return"stencil"in w&&(D=!!w.stencil),new v(_,f,S,O,C,j,D,E)};var n,r,a,l,u=null;function d(_){return[_.getParameter(_.FRAMEBUFFER_BINDING),_.getParameter(_.RENDERBUFFER_BINDING),_.getParameter(_.TEXTURE_BINDING_2D)]}function c(_,f){_.bindFramebuffer(_.FRAMEBUFFER,f[0]),_.bindRenderbuffer(_.RENDERBUFFER,f[1]),_.bindTexture(_.TEXTURE_2D,f[2])}function x(_){switch(_){case n:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case l:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function g(_,f,S,w,E,P){if(!w)return null;var C=i(_,f,S,E,w);return C.magFilter=_.NEAREST,C.minFilter=_.NEAREST,C.mipSamples=1,C.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,P,_.TEXTURE_2D,C.handle,0),C}function p(_,f,S,w,E){var P=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,P),_.renderbufferStorage(_.RENDERBUFFER,w,f,S),_.framebufferRenderbuffer(_.FRAMEBUFFER,E,_.RENDERBUFFER,P),P}function v(_,f,S,w,E,P,C,O){this.gl=_,this._shape=[0|f,0|S],this._destroyed=!1,this._ext=O,this.color=new Array(E);for(var R=0;R<E;++R)this.color[R]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=w,this._useDepth=P,this._useStencil=C;var j=this,D=[0|f,0|S];Object.defineProperties(D,{0:{get:function(){return j._shape[0]},set:function(N){return j.width=N}},1:{get:function(){return j._shape[1]},set:function(N){return j.height=N}}}),this._shapeVector=D,function(N){var W=d(N.gl),F=N.gl,U=N.handle=F.createFramebuffer(),V=N._shape[0],te=N._shape[1],J=N.color.length,K=N._ext,X=N._useStencil,Z=N._useDepth,$=N._colorType;F.bindFramebuffer(F.FRAMEBUFFER,U);for(var re=0;re<J;++re)N.color[re]=g(F,V,te,$,F.RGBA,F.COLOR_ATTACHMENT0+re);J===0?(N._color_rb=p(F,V,te,F.RGBA4,F.COLOR_ATTACHMENT0),K&&K.drawBuffersWEBGL(u[0])):J>1&&K.drawBuffersWEBGL(u[J]);var oe=F.getExtension("WEBGL_depth_texture");oe?X?N.depth=g(F,V,te,oe.UNSIGNED_INT_24_8_WEBGL,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):Z&&(N.depth=g(F,V,te,F.UNSIGNED_SHORT,F.DEPTH_COMPONENT,F.DEPTH_ATTACHMENT)):Z&&X?N._depth_rb=p(F,V,te,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):Z?N._depth_rb=p(F,V,te,F.DEPTH_COMPONENT16,F.DEPTH_ATTACHMENT):X&&(N._depth_rb=p(F,V,te,F.STENCIL_INDEX,F.STENCIL_ATTACHMENT));var ie=F.checkFramebufferStatus(F.FRAMEBUFFER);if(ie!==F.FRAMEBUFFER_COMPLETE){for(N._destroyed=!0,F.bindFramebuffer(F.FRAMEBUFFER,null),F.deleteFramebuffer(N.handle),N.handle=null,N.depth&&(N.depth.dispose(),N.depth=null),N._depth_rb&&(F.deleteRenderbuffer(N._depth_rb),N._depth_rb=null),re=0;re<N.color.length;++re)N.color[re].dispose(),N.color[re]=null;N._color_rb&&(F.deleteRenderbuffer(N._color_rb),N._color_rb=null),c(F,W),x(ie)}c(F,W)}(this)}var m=v.prototype;function y(_,f,S){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(_._shape[0]!==f||_._shape[1]!==S){var w=_.gl,E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(f<0||f>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=f,_._shape[1]=S;for(var P=d(w),C=0;C<_.color.length;++C)_.color[C].shape=_._shape;_._color_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._color_rb),w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&w.renderbufferStorage(w.RENDERBUFFER,w.STENCIL_INDEX,_._shape[0],_._shape[1])),w.bindFramebuffer(w.FRAMEBUFFER,_.handle);var O=w.checkFramebufferStatus(w.FRAMEBUFFER);O!==w.FRAMEBUFFER_COMPLETE&&(_.dispose(),c(w,P),x(O)),c(w,P)}}Object.defineProperties(m,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[0|_,0|_]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var f=0|_[0],S=0|_[1];return y(this,f,S),[f,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return y(this,_|=0,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _|=0,y(this,this._shape[0],_),_},enumerable:!1}}),m.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},m.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var f=0;f<this.color.length;++f)this.color[f].dispose(),this.color[f]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(h,s,t){var i=t(8974).sprintf,n=t(6603),r=t(9365),a=t(8008);h.exports=function(l,u,d){"use strict";var c=r(u)||"of unknown name (see npm glsl-shader-name)",x="unknown type";d!==void 0&&(x=d===n.FRAGMENT_SHADER?"fragment":"vertex");for(var g=i(`Error compiling %s shader %s:
`,x,c),p=i("%s%s",g,l),v=l.split(`
`),m={},y=0;y<v.length;y++){var _=v[y];if(_!==""&&_!=="\0"){var f=parseInt(_.split(":")[2]);if(isNaN(f))throw new Error(i("Could not parse error: %s",_));m[f]=_}}var S=a(u).split(`
`);for(y=0;y<S.length;y++)if((m[y+3]||m[y+2]||m[y+1])&&(g+=S[y]+`
`,m[y+1])){var w=m[y+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),g+=i(`^^^ %s

`,w)}return{long:g.trim(),short:p.trim()}}},6386:function(h,s,t){"use strict";h.exports=function(p,v){var m=p.gl,y=new d(p,a(m,u.vertex,u.fragment),a(m,u.pickVertex,u.pickFragment),l(m),l(m),l(m),l(m));return y.update(v),p.addObject(y),y};var i=t(5070),n=t(9560),r=t(5306),a=t(5158),l=t(5827),u=t(1292);function d(p,v,m,y,_,f,S){this.plot=p,this.shader=v,this.pickShader=m,this.positionBuffer=y,this.weightBuffer=_,this.colorBuffer=f,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var c,x=d.prototype,g=[0,0,1,0,0,1,1,0,1,1,0,1];x.draw=(c=[1,0,0,0,1,0,0,0,1],function(){var p=this.plot,v=this.shader,m=this.bounds,y=this.numVertices;if(!(y<=0)){var _=p.gl,f=p.dataBox,S=m[2]-m[0],w=m[3]-m[1],E=f[2]-f[0],P=f[3]-f[1];c[0]=2*S/E,c[4]=2*w/P,c[6]=2*(m[0]-f[0])/E-1,c[7]=2*(m[1]-f[1])/P-1,v.bind();var C=v.uniforms;C.viewTransform=c,C.shape=this.shape;var O=v.attributes;this.positionBuffer.bind(),O.position.pointer(),this.weightBuffer.bind(),O.weight.pointer(_.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),O.color.pointer(_.UNSIGNED_BYTE,!0),_.drawArrays(_.TRIANGLES,0,y)}}),x.drawPick=function(){var p=[1,0,0,0,1,0,0,0,1],v=[0,0,0,0];return function(m){var y=this.plot,_=this.pickShader,f=this.bounds,S=this.numVertices;if(!(S<=0)){var w=y.gl,E=y.dataBox,P=f[2]-f[0],C=f[3]-f[1],O=E[2]-E[0],R=E[3]-E[1];p[0]=2*P/O,p[4]=2*C/R,p[6]=2*(f[0]-E[0])/O-1,p[7]=2*(f[1]-E[1])/R-1;for(var j=0;j<4;++j)v[j]=m>>8*j&255;this.pickOffset=m,_.bind();var D=_.uniforms;D.viewTransform=p,D.pickOffset=v,D.shape=this.shape;var N=_.attributes;return this.positionBuffer.bind(),N.position.pointer(),this.weightBuffer.bind(),N.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),N.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,S),m+this.shape[0]*this.shape[1]}}}(),x.pick=function(p,v,m){var y=this.pickOffset,_=this.shape[0]*this.shape[1];if(m<y||m>=y+_)return null;var f=m-y,S=this.xData,w=this.yData;return{object:this,pointId:f,dataCoord:[S[f%this.shape[0]],w[f/this.shape[0]|0]]}},x.update=function(p){var v=(p=p||{}).shape||[0,0],m=p.x||n(v[0]),y=p.y||n(v[1]),_=p.z||new Float32Array(v[0]*v[1]),f=p.zsmooth!==!1;this.xData=m,this.yData=y;var S,w,E,P,C=p.colorLevels||[0],O=p.colorValues||[0,0,0,1],R=C.length,j=this.bounds;f?(S=j[0]=m[0],w=j[1]=y[0],E=j[2]=m[m.length-1],P=j[3]=y[y.length-1]):(S=j[0]=m[0]+(m[1]-m[0])/2,w=j[1]=y[0]+(y[1]-y[0])/2,E=j[2]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2,P=j[3]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2);var D=1/(E-S),N=1/(P-w),W=v[0],F=v[1];this.shape=[W,F];var U=(f?(W-1)*(F-1):W*F)*(g.length>>>1);this.numVertices=U;for(var V=r.mallocUint8(4*U),te=r.mallocFloat32(2*U),J=r.mallocUint8(2*U),K=r.mallocUint32(U),X=0,Z=f?W-1:W,$=f?F-1:F,re=0;re<$;++re){var oe,ie;f?(oe=N*(y[re]-w),ie=N*(y[re+1]-w)):(oe=re<F-1?N*(y[re]-(y[re+1]-y[re])/2-w):N*(y[re]-(y[re]-y[re-1])/2-w),ie=re<F-1?N*(y[re]+(y[re+1]-y[re])/2-w):N*(y[re]+(y[re]-y[re-1])/2-w));for(var ue=0;ue<Z;++ue){var me,be;f?(me=D*(m[ue]-S),be=D*(m[ue+1]-S)):(me=ue<W-1?D*(m[ue]-(m[ue+1]-m[ue])/2-S):D*(m[ue]-(m[ue]-m[ue-1])/2-S),be=ue<W-1?D*(m[ue]+(m[ue+1]-m[ue])/2-S):D*(m[ue]+(m[ue]-m[ue-1])/2-S));for(var ge=0;ge<g.length;ge+=2){var de,ve,pe,_e,Te=g[ge],le=g[ge+1],ae=_[f?(re+le)*W+(ue+Te):re*W+ue],he=i.le(C,ae);if(he<0)de=O[0],ve=O[1],pe=O[2],_e=O[3];else if(he===R-1)de=O[4*R-4],ve=O[4*R-3],pe=O[4*R-2],_e=O[4*R-1];else{var Se=(ae-C[he])/(C[he+1]-C[he]),ke=1-Se,Me=4*he,Ee=4*(he+1);de=ke*O[Me]+Se*O[Ee],ve=ke*O[Me+1]+Se*O[Ee+1],pe=ke*O[Me+2]+Se*O[Ee+2],_e=ke*O[Me+3]+Se*O[Ee+3]}V[4*X]=255*de,V[4*X+1]=255*ve,V[4*X+2]=255*pe,V[4*X+3]=255*_e,te[2*X]=.5*me+.5*be,te[2*X+1]=.5*oe+.5*ie,J[2*X]=Te,J[2*X+1]=le,K[X]=re*W+ue,X+=1}}}this.positionBuffer.update(te),this.weightBuffer.update(J),this.colorBuffer.update(V),this.idBuffer.update(K),r.free(te),r.free(V),r.free(J),r.free(K)},x.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(h,s,t){"use strict";var i=t(6832);h.exports={fragment:i([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},248:function(h,s,t){var i=t(6832),n=t(5158),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];s.createShader=function(d){return n(d,r,a,null,u)},s.createPickShader=function(d){return n(d,r,l,null,u)}},6086:function(h,s,t){"use strict";h.exports=function(S){var w=S.gl||S.scene&&S.scene.gl,E=x(w);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var P=g(w);P.attributes.position.location=0,P.attributes.nextPosition.location=1,P.attributes.arcLength.location=2,P.attributes.lineWidth.location=3,P.attributes.color.location=4;for(var C=i(w),O=n(w,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),R=d(new Array(1024),[256,1,4]),j=0;j<1024;++j)R.data[j]=255;var D=r(w,R);D.wrap=w.REPEAT;var N=new _(w,E,P,C,O,D);return N.update(S),N};var i=t(5827),n=t(2944),r=t(8931),a=new Uint8Array(4),l=new Float32Array(a.buffer),u=t(5070),d=t(5050),c=t(248),x=c.createShader,g=c.createPickShader,p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(S,w){for(var E=0,P=0;P<3;++P){var C=S[P]-w[P];E+=C*C}return Math.sqrt(E)}function m(S){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)w[0][E]=Math.max(S[0][E],w[0][E]),w[1][E]=Math.min(S[1][E],w[1][E]);return w}function y(S,w,E,P){this.arcLength=S,this.position=w,this.index=E,this.dataCoordinate=P}function _(S,w,E,P,C,O){this.gl=S,this.shader=w,this.pickShader=E,this.buffer=P,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=O,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var f=_.prototype;f.isTransparent=function(){return this.hasAlpha},f.isOpaque=function(){return!this.hasAlpha},f.pickSlots=1,f.setPickBase=function(S){this.pickId=S},f.drawTransparent=f.draw=function(S){if(this.vertexCount){var w=this.gl,E=this.shader,P=this.vao;E.bind(),E.uniforms={model:S.model||p,view:S.view||p,projection:S.projection||p,clipBounds:m(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(w.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},f.drawPick=function(S){if(this.vertexCount){var w=this.gl,E=this.pickShader,P=this.vao;E.bind(),E.uniforms={model:S.model||p,view:S.view||p,projection:S.projection||p,pickId:this.pickId,clipBounds:m(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(w.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},f.update=function(S){var w,E;this.dirty=!0;var P=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],O=[],R=[],j=0,D=0,N=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],W=S.position||S.positions;if(W){var F=S.color||S.colors||[0,0,0,1],U=S.lineWidth||1,V=!1;e:for(w=1;w<W.length;++w){var te,J,K,X=W[w-1],Z=W[w];for(O.push(j),R.push(X.slice()),E=0;E<3;++E){if(isNaN(X[E])||isNaN(Z[E])||!isFinite(X[E])||!isFinite(Z[E])){if(!P&&C.length>0){for(var $=0;$<24;++$)C.push(C[C.length-12]);D+=2,V=!0}continue e}N[0][E]=Math.min(N[0][E],X[E],Z[E]),N[1][E]=Math.max(N[1][E],X[E],Z[E])}Array.isArray(F[0])?(te=F.length>w-1?F[w-1]:F.length>0?F[F.length-1]:[0,0,0,1],J=F.length>w?F[w]:F.length>0?F[F.length-1]:[0,0,0,1]):te=J=F,te.length===3&&(te=[te[0],te[1],te[2],1]),J.length===3&&(J=[J[0],J[1],J[2],1]),!this.hasAlpha&&te[3]<1&&(this.hasAlpha=!0),K=Array.isArray(U)?U.length>w-1?U[w-1]:U.length>0?U[U.length-1]:[0,0,0,1]:U;var re=j;if(j+=v(X,Z),V){for(E=0;E<2;++E)C.push(X[0],X[1],X[2],Z[0],Z[1],Z[2],re,K,te[0],te[1],te[2],te[3]);D+=2,V=!1}C.push(X[0],X[1],X[2],Z[0],Z[1],Z[2],re,K,te[0],te[1],te[2],te[3],X[0],X[1],X[2],Z[0],Z[1],Z[2],re,-K,te[0],te[1],te[2],te[3],Z[0],Z[1],Z[2],X[0],X[1],X[2],j,-K,J[0],J[1],J[2],J[3],Z[0],Z[1],Z[2],X[0],X[1],X[2],j,K,J[0],J[1],J[2],J[3]),D+=4}}if(this.buffer.update(C),O.push(j),R.push(W[W.length-1].slice()),this.bounds=N,this.vertexCount=D,this.points=R,this.arcLength=O,"dashes"in S){var oe=S.dashes.slice();for(oe.unshift(0),w=1;w<oe.length;++w)oe[w]=oe[w-1]+oe[w];var ie=d(new Array(1024),[256,1,4]);for(w=0;w<256;++w){for(E=0;E<4;++E)ie.set(w,0,E,0);1&u.le(oe,oe[oe.length-1]*w/255)?ie.set(w,0,0,0):ie.set(w,0,0,255)}this.texture.setPixels(ie)}},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},f.pick=function(S){if(!S||S.id!==this.pickId)return null;var w=function(W,F,U,V){return a[0]=0,a[1]=U,a[2]=F,a[3]=W,l[0]}(S.value[0],S.value[1],S.value[2]),E=u.le(this.arcLength,w);if(E<0)return null;if(E===this.arcLength.length-1)return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var P=this.points[E],C=this.points[Math.min(E+1,this.points.length-1)],O=(w-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),R=1-O,j=[0,0,0],D=0;D<3;++D)j[D]=R*P[D]+O*C[D];var N=Math.min(O<.5?E:E+1,this.points.length-1);return new y(w,j,N,this.points[N])}},7332:function(h){h.exports=function(s){var t=new Float32Array(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t}},9823:function(h){h.exports=function(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7787:function(h){h.exports=function(s){var t=s[0],i=s[1],n=s[2],r=s[3],a=s[4],l=s[5],u=s[6],d=s[7],c=s[8],x=s[9],g=s[10],p=s[11],v=s[12],m=s[13],y=s[14],_=s[15];return(t*l-i*a)*(g*_-p*y)-(t*u-n*a)*(x*_-p*m)+(t*d-r*a)*(x*y-g*m)+(i*u-n*l)*(c*_-p*v)-(i*d-r*l)*(c*y-g*v)+(n*d-r*u)*(c*m-x*v)}},5950:function(h){h.exports=function(s,t){var i=t[0],n=t[1],r=t[2],a=t[3],l=i+i,u=n+n,d=r+r,c=i*l,x=n*l,g=n*u,p=r*l,v=r*u,m=r*d,y=a*l,_=a*u,f=a*d;return s[0]=1-g-m,s[1]=x+f,s[2]=p-_,s[3]=0,s[4]=x-f,s[5]=1-c-m,s[6]=v+y,s[7]=0,s[8]=p+_,s[9]=v-y,s[10]=1-c-g,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7280:function(h){h.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=t[3],u=n+n,d=r+r,c=a+a,x=n*u,g=n*d,p=n*c,v=r*d,m=r*c,y=a*c,_=l*u,f=l*d,S=l*c;return s[0]=1-(v+y),s[1]=g+S,s[2]=p-f,s[3]=0,s[4]=g-S,s[5]=1-(x+y),s[6]=m+_,s[7]=0,s[8]=p+f,s[9]=m-_,s[10]=1-(x+v),s[11]=0,s[12]=i[0],s[13]=i[1],s[14]=i[2],s[15]=1,s}},9947:function(h){h.exports=function(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},7437:function(h){h.exports=function(s,t){var i=t[0],n=t[1],r=t[2],a=t[3],l=t[4],u=t[5],d=t[6],c=t[7],x=t[8],g=t[9],p=t[10],v=t[11],m=t[12],y=t[13],_=t[14],f=t[15],S=i*u-n*l,w=i*d-r*l,E=i*c-a*l,P=n*d-r*u,C=n*c-a*u,O=r*c-a*d,R=x*y-g*m,j=x*_-p*m,D=x*f-v*m,N=g*_-p*y,W=g*f-v*y,F=p*f-v*_,U=S*F-w*W+E*N+P*D-C*j+O*R;return U?(U=1/U,s[0]=(u*F-d*W+c*N)*U,s[1]=(r*W-n*F-a*N)*U,s[2]=(y*O-_*C+f*P)*U,s[3]=(p*C-g*O-v*P)*U,s[4]=(d*D-l*F-c*j)*U,s[5]=(i*F-r*D+a*j)*U,s[6]=(_*E-m*O-f*w)*U,s[7]=(x*O-p*E+v*w)*U,s[8]=(l*W-u*D+c*R)*U,s[9]=(n*D-i*W-a*R)*U,s[10]=(m*C-y*E+f*S)*U,s[11]=(g*E-x*C-v*S)*U,s[12]=(u*j-l*N-d*R)*U,s[13]=(i*N-n*j+r*R)*U,s[14]=(y*w-m*P-_*S)*U,s[15]=(x*P-g*w+p*S)*U,s):null}},3012:function(h,s,t){var i=t(9947);h.exports=function(n,r,a,l){var u,d,c,x,g,p,v,m,y,_,f=r[0],S=r[1],w=r[2],E=l[0],P=l[1],C=l[2],O=a[0],R=a[1],j=a[2];return Math.abs(f-O)<1e-6&&Math.abs(S-R)<1e-6&&Math.abs(w-j)<1e-6?i(n):(v=f-O,m=S-R,y=w-j,u=P*(y*=_=1/Math.sqrt(v*v+m*m+y*y))-C*(m*=_),d=C*(v*=_)-E*y,c=E*m-P*v,(_=Math.sqrt(u*u+d*d+c*c))?(u*=_=1/_,d*=_,c*=_):(u=0,d=0,c=0),x=m*c-y*d,g=y*u-v*c,p=v*d-m*u,(_=Math.sqrt(x*x+g*g+p*p))?(x*=_=1/_,g*=_,p*=_):(x=0,g=0,p=0),n[0]=u,n[1]=x,n[2]=v,n[3]=0,n[4]=d,n[5]=g,n[6]=m,n[7]=0,n[8]=c,n[9]=p,n[10]=y,n[11]=0,n[12]=-(u*f+d*S+c*w),n[13]=-(x*f+g*S+p*w),n[14]=-(v*f+m*S+y*w),n[15]=1,n)}},104:function(h){h.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=t[3],u=t[4],d=t[5],c=t[6],x=t[7],g=t[8],p=t[9],v=t[10],m=t[11],y=t[12],_=t[13],f=t[14],S=t[15],w=i[0],E=i[1],P=i[2],C=i[3];return s[0]=w*n+E*u+P*g+C*y,s[1]=w*r+E*d+P*p+C*_,s[2]=w*a+E*c+P*v+C*f,s[3]=w*l+E*x+P*m+C*S,w=i[4],E=i[5],P=i[6],C=i[7],s[4]=w*n+E*u+P*g+C*y,s[5]=w*r+E*d+P*p+C*_,s[6]=w*a+E*c+P*v+C*f,s[7]=w*l+E*x+P*m+C*S,w=i[8],E=i[9],P=i[10],C=i[11],s[8]=w*n+E*u+P*g+C*y,s[9]=w*r+E*d+P*p+C*_,s[10]=w*a+E*c+P*v+C*f,s[11]=w*l+E*x+P*m+C*S,w=i[12],E=i[13],P=i[14],C=i[15],s[12]=w*n+E*u+P*g+C*y,s[13]=w*r+E*d+P*p+C*_,s[14]=w*a+E*c+P*v+C*f,s[15]=w*l+E*x+P*m+C*S,s}},5268:function(h){h.exports=function(s,t,i,n,r,a,l){var u=1/(t-i),d=1/(n-r),c=1/(a-l);return s[0]=-2*u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*d,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*c,s[11]=0,s[12]=(t+i)*u,s[13]=(r+n)*d,s[14]=(l+a)*c,s[15]=1,s}},1120:function(h){h.exports=function(s,t,i,n,r){var a=1/Math.tan(t/2),l=1/(n-r);return s[0]=a/i,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(r+n)*l,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*r*n*l,s[15]=0,s}},4422:function(h){h.exports=function(s,t,i,n){var r,a,l,u,d,c,x,g,p,v,m,y,_,f,S,w,E,P,C,O,R,j,D,N,W=n[0],F=n[1],U=n[2],V=Math.sqrt(W*W+F*F+U*U);return Math.abs(V)<1e-6?null:(W*=V=1/V,F*=V,U*=V,r=Math.sin(i),l=1-(a=Math.cos(i)),u=t[0],d=t[1],c=t[2],x=t[3],g=t[4],p=t[5],v=t[6],m=t[7],y=t[8],_=t[9],f=t[10],S=t[11],w=W*W*l+a,E=F*W*l+U*r,P=U*W*l-F*r,C=W*F*l-U*r,O=F*F*l+a,R=U*F*l+W*r,j=W*U*l+F*r,D=F*U*l-W*r,N=U*U*l+a,s[0]=u*w+g*E+y*P,s[1]=d*w+p*E+_*P,s[2]=c*w+v*E+f*P,s[3]=x*w+m*E+S*P,s[4]=u*C+g*O+y*R,s[5]=d*C+p*O+_*R,s[6]=c*C+v*O+f*R,s[7]=x*C+m*O+S*R,s[8]=u*j+g*D+y*N,s[9]=d*j+p*D+_*N,s[10]=c*j+v*D+f*N,s[11]=x*j+m*D+S*N,t!==s&&(s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s)}},6109:function(h){h.exports=function(s,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[4],l=t[5],u=t[6],d=t[7],c=t[8],x=t[9],g=t[10],p=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=a*r+c*n,s[5]=l*r+x*n,s[6]=u*r+g*n,s[7]=d*r+p*n,s[8]=c*r-a*n,s[9]=x*r-l*n,s[10]=g*r-u*n,s[11]=p*r-d*n,s}},7115:function(h){h.exports=function(s,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[0],l=t[1],u=t[2],d=t[3],c=t[8],x=t[9],g=t[10],p=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*r-c*n,s[1]=l*r-x*n,s[2]=u*r-g*n,s[3]=d*r-p*n,s[8]=a*n+c*r,s[9]=l*n+x*r,s[10]=u*n+g*r,s[11]=d*n+p*r,s}},5240:function(h){h.exports=function(s,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[0],l=t[1],u=t[2],d=t[3],c=t[4],x=t[5],g=t[6],p=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=a*r+c*n,s[1]=l*r+x*n,s[2]=u*r+g*n,s[3]=d*r+p*n,s[4]=c*r-a*n,s[5]=x*r-l*n,s[6]=g*r-u*n,s[7]=p*r-d*n,s}},3668:function(h){h.exports=function(s,t,i){var n=i[0],r=i[1],a=i[2];return s[0]=t[0]*n,s[1]=t[1]*n,s[2]=t[2]*n,s[3]=t[3]*n,s[4]=t[4]*r,s[5]=t[5]*r,s[6]=t[6]*r,s[7]=t[7]*r,s[8]=t[8]*a,s[9]=t[9]*a,s[10]=t[10]*a,s[11]=t[11]*a,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s}},998:function(h){h.exports=function(s,t,i){var n,r,a,l,u,d,c,x,g,p,v,m,y=i[0],_=i[1],f=i[2];return t===s?(s[12]=t[0]*y+t[4]*_+t[8]*f+t[12],s[13]=t[1]*y+t[5]*_+t[9]*f+t[13],s[14]=t[2]*y+t[6]*_+t[10]*f+t[14],s[15]=t[3]*y+t[7]*_+t[11]*f+t[15]):(n=t[0],r=t[1],a=t[2],l=t[3],u=t[4],d=t[5],c=t[6],x=t[7],g=t[8],p=t[9],v=t[10],m=t[11],s[0]=n,s[1]=r,s[2]=a,s[3]=l,s[4]=u,s[5]=d,s[6]=c,s[7]=x,s[8]=g,s[9]=p,s[10]=v,s[11]=m,s[12]=n*y+u*_+g*f+t[12],s[13]=r*y+d*_+p*f+t[13],s[14]=a*y+c*_+v*f+t[14],s[15]=l*y+x*_+m*f+t[15]),s}},2142:function(h){h.exports=function(s,t){if(s===t){var i=t[1],n=t[2],r=t[3],a=t[6],l=t[7],u=t[11];s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=i,s[6]=t[9],s[7]=t[13],s[8]=n,s[9]=a,s[11]=t[14],s[12]=r,s[13]=l,s[14]=u}else s[0]=t[0],s[1]=t[4],s[2]=t[8],s[3]=t[12],s[4]=t[1],s[5]=t[5],s[6]=t[9],s[7]=t[13],s[8]=t[2],s[9]=t[6],s[10]=t[10],s[11]=t[14],s[12]=t[3],s[13]=t[7],s[14]=t[11],s[15]=t[15];return s}},4340:function(h,s,t){"use strict";var i=t(957),n=t(7309);function r(u,d){for(var c=[0,0,0,0],x=0;x<4;++x)for(var g=0;g<4;++g)c[g]+=u[4*x+g]*d[x];return c}function a(u,d,c,x,g){for(var p=r(x,r(c,r(d,[u[0],u[1],u[2],1]))),v=0;v<3;++v)p[v]/=p[3];return[.5*g[0]*(1+p[0]),.5*g[1]*(1-p[1])]}function l(u,d){for(var c=[0,0,0],x=0;x<u.length;++x)for(var g=u[x],p=d[x],v=0;v<3;++v)c[v]+=p*g[v];return c}h.exports=function(u,d,c,x,g,p){if(u.length===1)return[0,u[0].slice()];for(var v=new Array(u.length),m=0;m<u.length;++m)v[m]=a(u[m],c,x,g,p);var y=0,_=1/0;for(m=0;m<v.length;++m){for(var f=0,S=0;S<2;++S)f+=Math.pow(v[m][S]-d[S],2);f<_&&(_=f,y=m)}var w=function(P,C){if(P.length===2){for(var O=0,R=0,j=0;j<2;++j)O+=Math.pow(C[j]-P[0][j],2),R+=Math.pow(C[j]-P[1][j],2);return(O=Math.sqrt(O))+(R=Math.sqrt(R))<1e-6?[1,0]:[R/(O+R),O/(R+O)]}if(P.length===3){var D=[0,0];return n(P[0],P[1],P[2],C,D),i(P,D)}return[]}(v,d),E=0;for(m=0;m<3;++m){if(w[m]<-.001||w[m]>1.0001)return null;E+=w[m]}return Math.abs(E-1)>.001?null:[y,l(u,w),w]}},2056:function(h,s,t){var i=t(6832),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),r=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),d=i([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),x=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),g=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),p=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),v=i([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);s.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.wireShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},s.pointShader={vertex:u,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},s.pickShader={vertex:c,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},s.pointPickShader={vertex:g,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},s.contourShader={vertex:p,fragment:v,attributes:[{name:"position",type:"vec3"}]}},8116:function(h,s,t){"use strict";var i=t(5158),n=t(5827),r=t(2944),a=t(8931),l=t(115),u=t(104),d=t(7437),c=t(5050),x=t(9156),g=t(7212),p=t(5306),v=t(2056),m=t(4340),y=v.meshShader,_=v.wireShader,f=v.pointShader,S=v.pickShader,w=v.pointPickShader,E=v.contourShader,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(F,U,V,te,J,K,X,Z,$,re,oe,ie,ue,me,be,ge,de,ve,pe,_e,Te,le,ae,he,Se,ke,Me){this.gl=F,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=U,this.dirty=!0,this.triShader=V,this.lineShader=te,this.pointShader=J,this.pickShader=K,this.pointPickShader=X,this.contourShader=Z,this.trianglePositions=$,this.triangleColors=oe,this.triangleNormals=ue,this.triangleUVs=ie,this.triangleIds=re,this.triangleVAO=me,this.triangleCount=0,this.lineWidth=1,this.edgePositions=be,this.edgeColors=de,this.edgeUVs=ve,this.edgeIds=ge,this.edgeVAO=pe,this.edgeCount=0,this.pointPositions=_e,this.pointColors=le,this.pointUVs=ae,this.pointSizes=he,this.pointIds=Te,this.pointVAO=Se,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=ke,this.contourVAO=Me,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=P,this._view=P,this._projection=P,this._resolution=[1,1]}var O=C.prototype;function R(F,U){if(!U||!U.length)return 1;for(var V=0;V<U.length;++V){if(U.length<2)return 1;if(U[V][0]===F)return U[V][1];if(U[V][0]>F&&V>0){var te=(U[V][0]-F)/(U[V][0]-U[V-1][0]);return U[V][1]*(1-te)+te*U[V-1][1]}}return 1}function j(F){var U=i(F,f.vertex,f.fragment);return U.attributes.position.location=0,U.attributes.color.location=2,U.attributes.uv.location=3,U.attributes.pointSize.location=4,U}function D(F){var U=i(F,S.vertex,S.fragment);return U.attributes.position.location=0,U.attributes.id.location=1,U}function N(F){var U=i(F,w.vertex,w.fragment);return U.attributes.position.location=0,U.attributes.id.location=1,U.attributes.pointSize.location=4,U}function W(F){var U=i(F,E.vertex,E.fragment);return U.attributes.position.location=0,U}O.isOpaque=function(){return!this.hasAlpha},O.isTransparent=function(){return this.hasAlpha},O.pickSlots=1,O.setPickBase=function(F){this.pickId=F},O.highlight=function(F){if(F&&this.contourEnable){for(var U=g(this.cells,this.intensity,F.intensity),V=U.cells,te=U.vertexIds,J=U.vertexWeights,K=V.length,X=p.mallocFloat32(6*K),Z=0,$=0;$<K;++$)for(var re=V[$],oe=0;oe<2;++oe){var ie=re[0];re.length===2&&(ie=re[oe]);for(var ue=te[ie][0],me=te[ie][1],be=J[ie],ge=1-be,de=this.positions[ue],ve=this.positions[me],pe=0;pe<3;++pe)X[Z++]=be*de[pe]+ge*ve[pe]}this.contourCount=Z/3|0,this.contourPositions.update(X.subarray(0,Z)),p.free(X)}else this.contourCount=0},O.update=function(F){F=F||{};var U=this.gl;this.dirty=!0,"contourEnable"in F&&(this.contourEnable=F.contourEnable),"contourColor"in F&&(this.contourColor=F.contourColor),"lineWidth"in F&&(this.lineWidth=F.lineWidth),"lightPosition"in F&&(this.lightPosition=F.lightPosition),this.hasAlpha=!1,"opacity"in F&&(this.opacity=F.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in F&&(this.opacityscale=F.opacityscale,this.hasAlpha=!0),"ambient"in F&&(this.ambientLight=F.ambient),"diffuse"in F&&(this.diffuseLight=F.diffuse),"specular"in F&&(this.specularLight=F.specular),"roughness"in F&&(this.roughness=F.roughness),"fresnel"in F&&(this.fresnel=F.fresnel),F.texture?(this.texture.dispose(),this.texture=a(U,F.texture)):F.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=U.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=U.LINEAR,this.texture.setPixels(function(It,Dt){for(var Ct=x({colormap:It,nshades:256,format:"rgba"}),He=new Uint8Array(1024),We=0;We<256;++We){for(var Be=Ct[We],Ge=0;Ge<3;++Ge)He[4*We+Ge]=Be[Ge];He[4*We+3]=Dt?255*R(We/255,Dt):255*Be[3]}return c(He,[256,256,4],[4,0,1])}(F.colormap,this.opacityscale)),this.texture.generateMipmap());var V=F.cells,te=F.positions;if(te&&V){var J=[],K=[],X=[],Z=[],$=[],re=[],oe=[],ie=[],ue=[],me=[],be=[],ge=[],de=[],ve=[];this.cells=V,this.positions=te;var pe=F.vertexNormals,_e=F.cellNormals,Te=F.vertexNormalsEpsilon===void 0?1e-6:F.vertexNormalsEpsilon,le=F.faceNormalsEpsilon===void 0?1e-6:F.faceNormalsEpsilon;F.useFacetNormals&&!_e&&(_e=l.faceNormals(V,te,le)),_e||pe||(pe=l.vertexNormals(V,te,Te));var ae=F.vertexColors,he=F.cellColors,Se=F.meshColor||[1,1,1,1],ke=F.vertexUVs,Me=F.vertexIntensity,Ee=F.cellUVs,De=F.cellIntensity,fe=1/0,xe=-1/0;if(!ke&&!Ee)if(Me)if(F.vertexIntensityBounds)fe=+F.vertexIntensityBounds[0],xe=+F.vertexIntensityBounds[1];else for(var we=0;we<Me.length;++we){var Oe=Me[we];fe=Math.min(fe,Oe),xe=Math.max(xe,Oe)}else if(De)if(F.cellIntensityBounds)fe=+F.cellIntensityBounds[0],xe=+F.cellIntensityBounds[1];else for(we=0;we<De.length;++we)Oe=De[we],fe=Math.min(fe,Oe),xe=Math.max(xe,Oe);else for(we=0;we<te.length;++we)Oe=te[we][2],fe=Math.min(fe,Oe),xe=Math.max(xe,Oe);this.intensity=Me||De||function(It){for(var Dt=It.length,Ct=new Array(Dt),He=0;He<Dt;++He)Ct[He]=It[He][2];return Ct}(te),this.pickVertex=!(De||he);var ze=F.pointSizes,Pe=F.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],we=0;we<te.length;++we)for(var Ue=te[we],Ve=0;Ve<3;++Ve)!isNaN(Ue[Ve])&&isFinite(Ue[Ve])&&(this.bounds[0][Ve]=Math.min(this.bounds[0][Ve],Ue[Ve]),this.bounds[1][Ve]=Math.max(this.bounds[1][Ve],Ue[Ve]));var Ze=0,it=0,tt=0;e:for(we=0;we<V.length;++we){var dt=V[we];switch(dt.length){case 1:for(Ue=te[vt=dt[0]],Ve=0;Ve<3;++Ve)if(isNaN(Ue[Ve])||!isFinite(Ue[Ve]))continue e;me.push(Ue[0],Ue[1],Ue[2]),et=ae?ae[vt]:he?he[we]:Se,this.opacityscale&&Me?K.push(et[0],et[1],et[2],this.opacity*R((Me[vt]-fe)/(xe-fe),this.opacityscale)):et.length===3?be.push(et[0],et[1],et[2],this.opacity):(be.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)),Qe=ke?ke[vt]:Me?[(Me[vt]-fe)/(xe-fe),0]:Ee?Ee[we]:De?[(De[we]-fe)/(xe-fe),0]:[(Ue[2]-fe)/(xe-fe),0],ge.push(Qe[0],Qe[1]),ze?de.push(ze[vt]):de.push(Pe),ve.push(we),tt+=1;break;case 2:for(Ve=0;Ve<2;++Ve){Ue=te[vt=dt[Ve]];for(var yt=0;yt<3;++yt)if(isNaN(Ue[yt])||!isFinite(Ue[yt]))continue e}for(Ve=0;Ve<2;++Ve)Ue=te[vt=dt[Ve]],re.push(Ue[0],Ue[1],Ue[2]),et=ae?ae[vt]:he?he[we]:Se,this.opacityscale&&Me?K.push(et[0],et[1],et[2],this.opacity*R((Me[vt]-fe)/(xe-fe),this.opacityscale)):et.length===3?oe.push(et[0],et[1],et[2],this.opacity):(oe.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)),Qe=ke?ke[vt]:Me?[(Me[vt]-fe)/(xe-fe),0]:Ee?Ee[we]:De?[(De[we]-fe)/(xe-fe),0]:[(Ue[2]-fe)/(xe-fe),0],ie.push(Qe[0],Qe[1]),ue.push(we);it+=1;break;case 3:for(Ve=0;Ve<3;++Ve)for(Ue=te[vt=dt[Ve]],yt=0;yt<3;++yt)if(isNaN(Ue[yt])||!isFinite(Ue[yt]))continue e;for(Ve=0;Ve<3;++Ve){var vt,et,Qe,wt;Ue=te[vt=dt[2-Ve]],J.push(Ue[0],Ue[1],Ue[2]),(et=ae?ae[vt]:he?he[we]:Se)?this.opacityscale&&Me?K.push(et[0],et[1],et[2],this.opacity*R((Me[vt]-fe)/(xe-fe),this.opacityscale)):et.length===3?K.push(et[0],et[1],et[2],this.opacity):(K.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)):K.push(.5,.5,.5,1),Qe=ke?ke[vt]:Me?[(Me[vt]-fe)/(xe-fe),0]:Ee?Ee[we]:De?[(De[we]-fe)/(xe-fe),0]:[(Ue[2]-fe)/(xe-fe),0],Z.push(Qe[0],Qe[1]),wt=pe?pe[vt]:_e[we],X.push(wt[0],wt[1],wt[2]),$.push(we)}Ze+=1}}this.pointCount=tt,this.edgeCount=it,this.triangleCount=Ze,this.pointPositions.update(me),this.pointColors.update(be),this.pointUVs.update(ge),this.pointSizes.update(de),this.pointIds.update(new Uint32Array(ve)),this.edgePositions.update(re),this.edgeColors.update(oe),this.edgeUVs.update(ie),this.edgeIds.update(new Uint32Array(ue)),this.trianglePositions.update(J),this.triangleColors.update(K),this.triangleUVs.update(Z),this.triangleNormals.update(X),this.triangleIds.update(new Uint32Array($))}},O.drawTransparent=O.draw=function(F){F=F||{};for(var U=this.gl,V=F.model||P,te=F.view||P,J=F.projection||P,K=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],X=0;X<3;++X)K[0][X]=Math.max(K[0][X],this.clipBounds[0][X]),K[1][X]=Math.min(K[1][X],this.clipBounds[1][X]);var Z={model:V,view:te,projection:J,inverseModel:P.slice(),clipBounds:K,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Z.inverseModel=d(Z.inverseModel,Z.model),U.disable(U.CULL_FACE),this.texture.bind(0);var $=new Array(16);for(u($,Z.view,Z.model),u($,Z.projection,$),d($,$),X=0;X<3;++X)Z.eyePosition[X]=$[12+X]/$[15];var re,oe=$[15];for(X=0;X<3;++X)oe+=this.lightPosition[X]*$[4*X+3];for(X=0;X<3;++X){for(var ie=$[12+X],ue=0;ue<3;++ue)ie+=$[4*ue+X]*this.lightPosition[ue];Z.lightPosition[X]=ie/oe}this.triangleCount>0&&((re=this.triShader).bind(),re.uniforms=Z,this.triangleVAO.bind(),U.drawArrays(U.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((re=this.lineShader).bind(),re.uniforms=Z,this.edgeVAO.bind(),U.lineWidth(this.lineWidth*this.pixelRatio),U.drawArrays(U.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((re=this.pointShader).bind(),re.uniforms=Z,this.pointVAO.bind(),U.drawArrays(U.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((re=this.contourShader).bind(),re.uniforms=Z,this.contourVAO.bind(),U.drawArrays(U.LINES,0,this.contourCount),this.contourVAO.unbind())},O.drawPick=function(F){F=F||{};for(var U=this.gl,V=F.model||P,te=F.view||P,J=F.projection||P,K=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],X=0;X<3;++X)K[0][X]=Math.max(K[0][X],this.clipBounds[0][X]),K[1][X]=Math.min(K[1][X],this.clipBounds[1][X]);this._model=[].slice.call(V),this._view=[].slice.call(te),this._projection=[].slice.call(J),this._resolution=[U.drawingBufferWidth,U.drawingBufferHeight];var Z,$={model:V,view:te,projection:J,clipBounds:K,pickId:this.pickId/255};(Z=this.pickShader).bind(),Z.uniforms=$,this.triangleCount>0&&(this.triangleVAO.bind(),U.drawArrays(U.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),U.lineWidth(this.lineWidth*this.pixelRatio),U.drawArrays(U.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((Z=this.pointPickShader).bind(),Z.uniforms=$,this.pointVAO.bind(),U.drawArrays(U.POINTS,0,this.pointCount),this.pointVAO.unbind())},O.pick=function(F){if(!F||F.id!==this.pickId)return null;for(var U=F.value[0]+256*F.value[1]+65536*F.value[2],V=this.cells[U],te=this.positions,J=new Array(V.length),K=0;K<V.length;++K)J[K]=te[V[K]];var X=F.coord[0],Z=F.coord[1];if(!this.pickVertex){var $=this.positions[V[0]],re=this.positions[V[1]],oe=this.positions[V[2]],ie=[($[0]+re[0]+oe[0])/3,($[1]+re[1]+oe[1])/3,($[2]+re[2]+oe[2])/3];return{_cellCenter:!0,position:[X,Z],index:U,cell:V,cellId:U,intensity:this.intensity[U],dataCoordinate:ie}}var ue=m(J,[X*this.pixelRatio,this._resolution[1]-Z*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ue)return null;var me=ue[2],be=0;for(K=0;K<V.length;++K)be+=me[K]*this.intensity[V[K]];return{position:ue[1],index:V[ue[0]],cell:V,cellId:U,intensity:be,dataCoordinate:this.positions[V[ue[0]]]}},O.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},h.exports=function(F,U){if(arguments.length===1&&(F=(U=F).gl),!(F.getExtension("OES_standard_derivatives")||F.getExtension("MOZ_OES_standard_derivatives")||F.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var V=function(De){var fe=i(De,y.vertex,y.fragment);return fe.attributes.position.location=0,fe.attributes.color.location=2,fe.attributes.uv.location=3,fe.attributes.normal.location=4,fe}(F),te=function(De){var fe=i(De,_.vertex,_.fragment);return fe.attributes.position.location=0,fe.attributes.color.location=2,fe.attributes.uv.location=3,fe}(F),J=j(F),K=D(F),X=N(F),Z=W(F),$=a(F,c(new Uint8Array([255,255,255,255]),[1,1,4]));$.generateMipmap(),$.minFilter=F.LINEAR_MIPMAP_LINEAR,$.magFilter=F.LINEAR;var re=n(F),oe=n(F),ie=n(F),ue=n(F),me=n(F),be=r(F,[{buffer:re,type:F.FLOAT,size:3},{buffer:me,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:oe,type:F.FLOAT,size:4},{buffer:ie,type:F.FLOAT,size:2},{buffer:ue,type:F.FLOAT,size:3}]),ge=n(F),de=n(F),ve=n(F),pe=n(F),_e=r(F,[{buffer:ge,type:F.FLOAT,size:3},{buffer:pe,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:de,type:F.FLOAT,size:4},{buffer:ve,type:F.FLOAT,size:2}]),Te=n(F),le=n(F),ae=n(F),he=n(F),Se=n(F),ke=r(F,[{buffer:Te,type:F.FLOAT,size:3},{buffer:Se,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:le,type:F.FLOAT,size:4},{buffer:ae,type:F.FLOAT,size:2},{buffer:he,type:F.FLOAT,size:1}]),Me=n(F),Ee=new C(F,$,V,te,J,K,X,Z,re,me,oe,ie,ue,be,ge,pe,de,ve,_e,Te,Se,le,ae,he,ke,Me,r(F,[{buffer:Me,type:F.FLOAT,size:3}]));return Ee.update(U),Ee}},4554:function(h,s,t){"use strict";h.exports=function(c){var x=c.gl;return new a(c,i(x,[0,0,0,1,1,0,1,1]),n(x,r.boxVert,r.lineFrag))};var i=t(5827),n=t(5158),r=t(2709);function a(c,x,g){this.plot=c,this.vbo=x,this.shader=g}var l,u,d=a.prototype;d.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},d.drawBox=(l=[0,0],u=[0,0],function(c,x,g,p,v){var m=this.plot,y=this.shader,_=m.gl;l[0]=c,l[1]=x,u[0]=g,u[1]=p,y.uniforms.lo=l,y.uniforms.hi=u,y.uniforms.color=v,_.drawArrays(_.TRIANGLE_STRIP,0,4)}),d.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(h,s,t){"use strict";h.exports=function(m){var y=m.gl;return new l(m,i(y),n(y,a.gridVert,a.gridFrag),n(y,a.tickVert,a.gridFrag))};var i=t(5827),n=t(5158),r=t(5070),a=t(2709);function l(m,y,_,f){this.plot=m,this.vbo=y,this.shader=_,this.tickShader=f,this.ticks=[[],[]]}function u(m,y){return m-y}var d,c,x,g,p,v=l.prototype;v.draw=(d=[0,0],c=[0,0],x=[0,0],function(){for(var m=this.plot,y=this.vbo,_=this.shader,f=this.ticks,S=m.gl,w=m._tickBounds,E=m.dataBox,P=m.viewBox,C=m.gridLineWidth,O=m.gridLineColor,R=m.gridLineEnable,j=m.pixelRatio,D=0;D<2;++D){var N=w[D],W=w[D+2]-N,F=.5*(E[D+2]+E[D]),U=E[D+2]-E[D];c[D]=2*W/U,d[D]=2*(N-F)/U}_.bind(),y.bind(),_.attributes.dataCoord.pointer(),_.uniforms.dataShift=d,_.uniforms.dataScale=c;var V=0;for(D=0;D<2;++D){x[0]=x[1]=0,x[D]=1,_.uniforms.dataAxis=x,_.uniforms.lineWidth=C[D]/(P[D+2]-P[D])*j,_.uniforms.color=O[D];var te=6*f[D].length;R[D]&&te&&S.drawArrays(S.TRIANGLES,V,te),V+=te}}),v.drawTickMarks=function(){var m=[0,0],y=[0,0],_=[1,0],f=[0,1],S=[0,0],w=[0,0];return function(){for(var E=this.plot,P=this.vbo,C=this.tickShader,O=this.ticks,R=E.gl,j=E._tickBounds,D=E.dataBox,N=E.viewBox,W=E.pixelRatio,F=E.screenBox,U=F[2]-F[0],V=F[3]-F[1],te=N[2]-N[0],J=N[3]-N[1],K=0;K<2;++K){var X=j[K],Z=j[K+2]-X,$=.5*(D[K+2]+D[K]),re=D[K+2]-D[K];y[K]=2*Z/re,m[K]=2*(X-$)/re}y[0]*=te/U,m[0]*=te/U,y[1]*=J/V,m[1]*=J/V,C.bind(),P.bind(),C.attributes.dataCoord.pointer();var oe=C.uniforms;oe.dataShift=m,oe.dataScale=y;var ie=E.tickMarkLength,ue=E.tickMarkWidth,me=E.tickMarkColor,be=6*O[0].length,ge=Math.min(r.ge(O[0],(D[0]-j[0])/(j[2]-j[0]),u),O[0].length),de=Math.min(r.gt(O[0],(D[2]-j[0])/(j[2]-j[0]),u),O[0].length),ve=0+6*ge,pe=6*Math.max(0,de-ge),_e=Math.min(r.ge(O[1],(D[1]-j[1])/(j[3]-j[1]),u),O[1].length),Te=Math.min(r.gt(O[1],(D[3]-j[1])/(j[3]-j[1]),u),O[1].length),le=be+6*_e,ae=6*Math.max(0,Te-_e);S[0]=2*(N[0]-ie[1])/U-1,S[1]=(N[3]+N[1])/V-1,w[0]=ie[1]*W/U,w[1]=ue[1]*W/V,ae&&(oe.color=me[1],oe.tickScale=w,oe.dataAxis=f,oe.screenOffset=S,R.drawArrays(R.TRIANGLES,le,ae)),S[0]=(N[2]+N[0])/U-1,S[1]=2*(N[1]-ie[0])/V-1,w[0]=ue[0]*W/U,w[1]=ie[0]*W/V,pe&&(oe.color=me[0],oe.tickScale=w,oe.dataAxis=_,oe.screenOffset=S,R.drawArrays(R.TRIANGLES,ve,pe)),S[0]=2*(N[2]+ie[3])/U-1,S[1]=(N[3]+N[1])/V-1,w[0]=ie[3]*W/U,w[1]=ue[3]*W/V,ae&&(oe.color=me[3],oe.tickScale=w,oe.dataAxis=f,oe.screenOffset=S,R.drawArrays(R.TRIANGLES,le,ae)),S[0]=(N[2]+N[0])/U-1,S[1]=2*(N[3]+ie[2])/V-1,w[0]=ue[2]*W/U,w[1]=ie[2]*W/V,pe&&(oe.color=me[2],oe.tickScale=w,oe.dataAxis=_,oe.screenOffset=S,R.drawArrays(R.TRIANGLES,ve,pe))}}(),v.update=(g=[1,1,-1,-1,1,-1],p=[1,-1,1,1,-1,-1],function(m){for(var y=m.ticks,_=m.bounds,f=new Float32Array(18*(y[0].length+y[1].length)),S=(this.plot.zeroLineEnable,0),w=[[],[]],E=0;E<2;++E)for(var P=w[E],C=y[E],O=_[E],R=_[E+2],j=0;j<C.length;++j){var D=(C[j].x-O)/(R-O);P.push(D);for(var N=0;N<6;++N)f[S++]=D,f[S++]=g[N],f[S++]=p[N]}this.ticks=w,this.vbo.update(f)}),v.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(h,s,t){"use strict";h.exports=function(c){var x=c.gl;return new a(c,i(x,[-1,-1,-1,1,1,-1,1,1]),n(x,r.lineVert,r.lineFrag))};var i=t(5827),n=t(5158),r=t(2709);function a(c,x,g){this.plot=c,this.vbo=x,this.shader=g}var l,u,d=a.prototype;d.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},d.drawLine=(l=[0,0],u=[0,0],function(c,x,g,p,v,m){var y=this.plot,_=this.shader,f=y.gl;l[0]=c,l[1]=x,u[0]=g,u[1]=p,_.uniforms.start=l,_.uniforms.end=u,_.uniforms.width=v*y.pixelRatio,_.uniforms.color=m,f.drawArrays(f.TRIANGLE_STRIP,0,4)}),d.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(h,s,t){"use strict";var i=t(6832),n=i([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);h.exports={lineVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:n,textVert:i([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:n,gridVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:n,boxVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},5613:function(h,s,t){"use strict";h.exports=function(y){var _=y.gl;return new u(y,i(_),n(_,l.textVert,l.textFrag))};var i=t(5827),n=t(5158),r=t(6946),a=t(5070),l=t(2709);function u(y,_,f){this.plot=y,this.vbo=_,this.shader=f,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var d,c,x,g,p,v,m=u.prototype;m.drawTicks=(d=[0,0],c=[0,0],x=[0,0],function(y){var _=this.plot,f=this.shader,S=this.tickX[y],w=this.tickOffset[y],E=_.gl,P=_.viewBox,C=_.dataBox,O=_.screenBox,R=_.pixelRatio,j=_.tickEnable,D=_.tickPad,N=_.tickColor,W=_.tickAngle,F=_.labelEnable,U=_.labelPad,V=_.labelColor,te=_.labelAngle,J=this.labelOffset[y],K=this.labelCount[y],X=a.lt(S,C[y]),Z=a.le(S,C[y+2]);d[0]=d[1]=0,d[y]=1,c[y]=(P[2+y]+P[y])/(O[2+y]-O[y])-1;var $=2/O[2+(1^y)]-O[1^y];c[1^y]=$*P[1^y]-1,j[y]&&(c[1^y]-=$*R*D[y],X<Z&&w[Z]>w[X]&&(f.uniforms.dataAxis=d,f.uniforms.screenOffset=c,f.uniforms.color=N[y],f.uniforms.angle=W[y],E.drawArrays(E.TRIANGLES,w[X],w[Z]-w[X]))),F[y]&&K&&(c[1^y]-=$*R*U[y],f.uniforms.dataAxis=x,f.uniforms.screenOffset=c,f.uniforms.color=V[y],f.uniforms.angle=te[y],E.drawArrays(E.TRIANGLES,J,K)),c[1^y]=$*P[2+(1^y)]-1,j[y+2]&&(c[1^y]+=$*R*D[y+2],X<Z&&w[Z]>w[X]&&(f.uniforms.dataAxis=d,f.uniforms.screenOffset=c,f.uniforms.color=N[y+2],f.uniforms.angle=W[y+2],E.drawArrays(E.TRIANGLES,w[X],w[Z]-w[X]))),F[y+2]&&K&&(c[1^y]+=$*R*U[y+2],f.uniforms.dataAxis=x,f.uniforms.screenOffset=c,f.uniforms.color=V[y+2],f.uniforms.angle=te[y+2],E.drawArrays(E.TRIANGLES,J,K))}),m.drawTitle=function(){var y=[0,0],_=[0,0];return function(){var f=this.plot,S=this.shader,w=f.gl,E=f.screenBox,P=f.titleCenter,C=f.titleAngle,O=f.titleColor,R=f.pixelRatio;if(this.titleCount){for(var j=0;j<2;++j)_[j]=2*(P[j]*R-E[j])/(E[2+j]-E[j])-1;S.bind(),S.uniforms.dataAxis=y,S.uniforms.screenOffset=_,S.uniforms.angle=C,S.uniforms.color=O,w.drawArrays(w.TRIANGLES,this.titleOffset,this.titleCount)}}}(),m.bind=(g=[0,0],p=[0,0],v=[0,0],function(){var y=this.plot,_=this.shader,f=y._tickBounds,S=y.dataBox,w=y.screenBox,E=y.viewBox;_.bind();for(var P=0;P<2;++P){var C=f[P],O=f[P+2]-C,R=.5*(S[P+2]+S[P]),j=S[P+2]-S[P],D=E[P],N=E[P+2]-D,W=w[P],F=w[P+2]-W;p[P]=2*O/j*N/F,g[P]=2*(C-R)/j*N/F}v[1]=2*y.pixelRatio/(w[3]-w[1]),v[0]=v[1]*(w[3]-w[1])/(w[2]-w[0]),_.uniforms.dataScale=p,_.uniforms.dataShift=g,_.uniforms.textScale=v,this.vbo.bind(),_.attributes.textCoordinate.pointer()}),m.update=function(y){var _,f,S,w,E,P=[],C=y.ticks,O=y.bounds;for(E=0;E<2;++E){var R=[Math.floor(P.length/3)],j=[-1/0],D=C[E];for(_=0;_<D.length;++_){var N=D[_],W=N.x,F=N.text,U=N.font||"sans-serif";w=N.fontSize||12;for(var V=1/(O[E+2]-O[E]),te=O[E],J=F.split(`
`),K=0;K<J.length;K++)for(S=r(U,J[K]).data,f=0;f<S.length;f+=2)P.push(S[f]*w,-S[f+1]*w-K*w*1.2,(W-te)*V);R.push(Math.floor(P.length/3)),j.push(W)}this.tickOffset[E]=R,this.tickX[E]=j}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(P.length/3),S=r(y.labelFont[E],y.labels[E],{textAlign:"center"}).data,w=y.labelSize[E],_=0;_<S.length;_+=2)P.push(S[_]*w,-S[_+1]*w,0);this.labelCount[E]=Math.floor(P.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(P.length/3),S=r(y.titleFont,y.title).data,w=y.titleSize,_=0;_<S.length;_+=2)P.push(S[_]*w,-S[_+1]*w,0);this.titleCount=Math.floor(P.length/3)-this.titleOffset,this.vbo.update(P)},m.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(h,s,t){"use strict";h.exports=function(g){var p=g.gl,v=new u(p,i(p,[p.drawingBufferWidth,p.drawingBufferHeight]));return v.grid=n(v),v.text=r(v),v.line=a(v),v.box=l(v),v.update(g),v};var i=t(2611),n=t(3016),r=t(5613),a=t(1154),l=t(4554);function u(g,p){this.gl=g,this.pickBuffer=p,this.screenBox=[0,0,g.drawingBufferWidth,g.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var d=u.prototype;function c(g){for(var p=g.slice(),v=0;v<p.length;++v)p[v]=p[v].slice();return p}function x(g,p){return g.x-p.x}d.setDirty=function(){this.dirty=this.pickDirty=!0},d.setOverlayDirty=function(){this.dirty=!0},d.nextDepthValue=function(){return this._depthCounter++/65536},d.draw=function(){var g=this.gl,p=this.screenBox,v=this.viewBox,m=this.dataBox,y=this.pixelRatio,_=this.grid,f=this.line,S=this.text,w=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,g.bindFramebuffer(g.FRAMEBUFFER,null),g.enable(g.SCISSOR_TEST),g.disable(g.DEPTH_TEST),g.depthFunc(g.LESS),g.depthMask(!1),g.enable(g.BLEND),g.blendEquation(g.FUNC_ADD,g.FUNC_ADD),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),this.borderColor){g.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]);var E=this.borderColor;g.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT)}g.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]),g.viewport(v[0],v[1],v[2]-v[0],v[3]-v[1]);var P=this.backgroundColor;g.clearColor(P[0]*P[3],P[1]*P[3],P[2]*P[3],P[3]),g.clear(g.COLOR_BUFFER_BIT),_.draw();var C=this.zeroLineEnable,O=this.zeroLineColor,R=this.zeroLineWidth;if(C[0]||C[1]){f.bind();for(var j=0;j<2;++j)if(C[j]&&m[j]<=0&&m[j+2]>=0){var D=p[j]-m[j]*(p[j+2]-p[j])/(m[j+2]-m[j]);j===0?f.drawLine(D,p[1],D,p[3],R[j],O[j]):f.drawLine(p[0],D,p[2],D,R[j],O[j])}}for(j=0;j<w.length;++j)w[j].draw();g.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]),g.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),this.grid.drawTickMarks(),f.bind();var N=this.borderLineEnable,W=this.borderLineWidth,F=this.borderLineColor;for(N[1]&&f.drawLine(v[0],v[1]-.5*W[1]*y,v[0],v[3]+.5*W[3]*y,W[1],F[1]),N[0]&&f.drawLine(v[0]-.5*W[0]*y,v[1],v[2]+.5*W[2]*y,v[1],W[0],F[0]),N[3]&&f.drawLine(v[2],v[1]-.5*W[1]*y,v[2],v[3]+.5*W[3]*y,W[3],F[3]),N[2]&&f.drawLine(v[0]-.5*W[0]*y,v[3],v[2]+.5*W[2]*y,v[3],W[2],F[2]),S.bind(),j=0;j<2;++j)S.drawTicks(j);this.titleEnable&&S.drawTitle();var U=this.overlays;for(j=0;j<U.length;++j)U[j].draw();g.disable(g.SCISSOR_TEST),g.disable(g.BLEND),g.depthMask(!0)}},d.drawPick=function(){if(!this.static){var g=this.pickBuffer;this.gl,this._pickTimeout=null,g.begin();for(var p=1,v=this.objects,m=0;m<v.length;++m)p=v[m].drawPick(p);g.end()}},d.pick=function(g,p){if(!this.static){var v=this.pixelRatio,m=this.pickPixelRatio,y=this.viewBox,_=0|Math.round((g-y[0]/v)*m),f=0|Math.round((p-y[1]/v)*m),S=this.pickBuffer.query(_,f,this.pickRadius);if(!S)return null;for(var w=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,P=0;P<E.length;++P){var C=E[P].pick(_,f,w);if(C)return C}return null}},d.setScreenBox=function(g){var p=this.screenBox,v=this.pixelRatio;p[0]=0|Math.round(g[0]*v),p[1]=0|Math.round(g[1]*v),p[2]=0|Math.round(g[2]*v),p[3]=0|Math.round(g[3]*v),this.setDirty()},d.setDataBox=function(g){var p=this.dataBox;(p[0]!==g[0]||p[1]!==g[1]||p[2]!==g[2]||p[3]!==g[3])&&(p[0]=g[0],p[1]=g[1],p[2]=g[2],p[3]=g[3],this.setDirty())},d.setViewBox=function(g){var p=this.pixelRatio,v=this.viewBox;v[0]=0|Math.round(g[0]*p),v[1]=0|Math.round(g[1]*p),v[2]=0|Math.round(g[2]*p),v[3]=0|Math.round(g[3]*p);var m=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((g[2]-g[0])*m),0|Math.round((g[3]-g[1])*m)],this.setDirty()},d.update=function(g){g=g||{};var p=this.gl;this.pixelRatio=g.pixelRatio||1;var v=this.pixelRatio;this.pickPixelRatio=Math.max(v,1),this.setScreenBox(g.screenBox||[0,0,p.drawingBufferWidth/v,p.drawingBufferHeight/v]),this.screenBox,this.setViewBox(g.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/v,.125*(this.screenBox[3]-this.screenBox[1])/v,.875*(this.screenBox[2]-this.screenBox[0])/v,.875*(this.screenBox[3]-this.screenBox[1])/v]);var m=this.viewBox,y=(m[2]-m[0])/(m[3]-m[1]);this.setDataBox(g.dataBox||[-10,-10/y,10,10/y]),this.borderColor=g.borderColor!==!1&&(g.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(g.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(g.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(g.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(g.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(g.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(g.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(g.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(g.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(g.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(g.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(g.titleCenter||[.5*(m[0]+m[2])/v,(m[3]+120)/v]).slice(),this.titleEnable=!("titleEnable"in g)||!!g.titleEnable,this.titleAngle=g.titleAngle||0,this.titleColor=(g.titleColor||[0,0,0,1]).slice(),this.labelPad=(g.labelPad||[15,15,15,15]).slice(),this.labelAngle=(g.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(g.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(g.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(g.tickPad||[15,15,15,15]).slice(),this.tickAngle=(g.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(g.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(g.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(g.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(g.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(g.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var _=g.ticks||[[],[]],f=this._tickBounds;f[0]=f[1]=1/0,f[2]=f[3]=-1/0;for(var S=0;S<2;++S){var w=_[S].slice(0);w.length!==0&&(w.sort(x),f[S]=Math.min(f[S],w[0].x),f[S+2]=Math.max(f[S+2],w[w.length-1].x))}this.grid.update({bounds:f,ticks:_}),this.text.update({bounds:f,ticks:_,labels:g.labels||["x","y"],labelSize:g.labelSize||[12,12],labelFont:g.labelFont||["sans-serif","sans-serif"],title:g.title||"",titleSize:g.titleSize||18,titleFont:g.titleFont||"sans-serif"}),this.static=!!g.static,this.setDirty()},d.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var g=this.objects.length-1;g>=0;--g)this.objects[g].dispose();for(this.objects.length=0,g=this.overlays.length-1;g>=0;--g)this.overlays[g].dispose();this.overlays.length=0,this.gl=null},d.addObject=function(g){this.objects.indexOf(g)<0&&(this.objects.push(g),this.setDirty())},d.removeObject=function(g){for(var p=this.objects,v=0;v<p.length;++v)if(p[v]===g){p.splice(v,1),this.setDirty();break}},d.addOverlay=function(g){this.overlays.indexOf(g)<0&&(this.overlays.push(g),this.setOverlayDirty())},d.removeOverlay=function(g){for(var p=this.overlays,v=0;v<p.length;++v)if(p[v]===g){p.splice(v,1),this.setOverlayDirty();break}}},4296:function(h,s,t){"use strict";h.exports=function(d,c){d=d||document.body;var x=[.01,1/0];"distanceLimits"in(c=c||{})&&(x[0]=c.distanceLimits[0],x[1]=c.distanceLimits[1]),"zoomMin"in c&&(x[0]=c.zoomMin),"zoomMax"in c&&(x[1]=c.zoomMax);var g=n({center:c.center||[0,0,0],up:c.up||[0,1,0],eye:c.eye||[0,0,10],mode:c.mode||"orbit",distanceLimits:x}),p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v=0,m=d.clientWidth,y=d.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:g,element:d,delay:c.delay||16,rotateSpeed:c.rotateSpeed||1,zoomSpeed:c.zoomSpeed||1,translateSpeed:c.translateSpeed||1,flipX:!!c.flipX,flipY:!!c.flipY,modes:g.modes,_ortho:c._ortho||c.projection&&c.projection.type==="orthographic"||!1,tick:function(){var f=i(),S=this.delay,w=f-2*S;g.idle(f-S),g.recalcMatrix(w),g.flush(f-(100+2*S));for(var E=!0,P=g.computedMatrix,C=0;C<16;++C)E=E&&p[C]===P[C],p[C]=P[C];var O=d.clientWidth===m&&d.clientHeight===y;return m=d.clientWidth,y=d.clientHeight,E?!O:(v=Math.exp(g.computedRadius[0]),!0)},lookAt:function(f,S,w){g.lookAt(g.lastT(),f,S,w)},rotate:function(f,S,w){g.rotate(g.lastT(),f,S,w)},pan:function(f,S,w){g.pan(g.lastT(),f,S,w)},translate:function(f,S,w){g.translate(g.lastT(),f,S,w)}};return Object.defineProperties(_,{matrix:{get:function(){return g.computedMatrix},set:function(f){return g.setMatrix(g.lastT(),f),g.computedMatrix},enumerable:!0},mode:{get:function(){return g.getMode()},set:function(f){var S=g.computedUp.slice(),w=g.computedEye.slice(),E=g.computedCenter.slice();if(g.setMode(f),f==="turntable"){var P=i();g._active.lookAt(P,w,E,S),g._active.lookAt(P+500,w,E,[0,0,1]),g._active.flush(P)}return g.getMode()},enumerable:!0},center:{get:function(){return g.computedCenter},set:function(f){return g.lookAt(g.lastT(),null,f),g.computedCenter},enumerable:!0},eye:{get:function(){return g.computedEye},set:function(f){return g.lookAt(g.lastT(),f),g.computedEye},enumerable:!0},up:{get:function(){return g.computedUp},set:function(f){return g.lookAt(g.lastT(),null,null,f),g.computedUp},enumerable:!0},distance:{get:function(){return v},set:function(f){return g.setDistance(g.lastT(),f),f},enumerable:!0},distanceLimits:{get:function(){return g.getDistanceLimits(x)},set:function(f){return g.setDistanceLimits(f),f},enumerable:!0}}),d.addEventListener("contextmenu",function(f){return f.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){function f(S,w,E,P){var C=_.keyBindingMode;if(C!==!1){var O=C==="rotate",R=C==="pan",j=C==="zoom",D=!!P.control,N=!!P.alt,W=!!P.shift,F=!!(1&S),U=!!(2&S),V=!!(4&S),te=1/d.clientHeight,J=te*(w-_._lastX),K=te*(E-_._lastY),X=_.flipX?1:-1,Z=_.flipY?1:-1,$=Math.PI*_.rotateSpeed,re=i();if(_._lastX!==-1&&_._lastY!==-1&&((O&&F&&!D&&!N&&!W||F&&!D&&!N&&W)&&g.rotate(re,X*$*J,-Z*$*K,0),(R&&F&&!D&&!N&&!W||U||F&&D&&!N&&!W)&&g.pan(re,-_.translateSpeed*J*v,_.translateSpeed*K*v,0),j&&F&&!D&&!N&&!W||V||F&&!D&&N&&!W)){var oe=-_.zoomSpeed*K/window.innerHeight*(re-g.lastT())*100;g.pan(re,0,0,v*(Math.exp(oe)-1))}return _._lastX=w,_._lastY=E,_._lastMods=P,!0}}_.mouseListener=r(d,f),d.addEventListener("touchstart",function(S){var w=l(S.changedTouches[0],d);f(0,w[0],w[1],_._lastMods),f(1,w[0],w[1],_._lastMods)},!!u&&{passive:!0}),d.addEventListener("touchmove",function(S){var w=l(S.changedTouches[0],d);f(1,w[0],w[1],_._lastMods),S.preventDefault()},!!u&&{passive:!1}),d.addEventListener("touchend",function(S){f(0,_._lastX,_._lastY,_._lastMods)},!!u&&{passive:!0}),_.wheelListener=a(d,function(S,w){if(_.keyBindingMode!==!1&&_.enableWheel){var E=_.flipX?1:-1,P=_.flipY?1:-1,C=i();if(Math.abs(S)>Math.abs(w))g.rotate(C,0,0,-S*E*Math.PI*_.rotateSpeed/window.innerWidth);else if(!_._ortho){var O=-_.zoomSpeed*P*w/window.innerHeight*(C-g.lastT())/20;g.pan(C,0,0,v*(Math.exp(O)-1))}}},!0)},_.enableMouseListeners(),_};var i=t(8161),n=t(1152),r=t(6145),a=t(6475),l=t(2565),u=t(5233)},8245:function(h,s,t){var i=t(6832),n=t(5158),r=i([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),a=i([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);h.exports=function(l){return n(l,r,a,null,[{name:"position",type:"vec2"}])}},1059:function(h,s,t){"use strict";var i=t(4296),n=t(7453),r=t(2771),a=t(6496),l=t(2611),u=t(4234),d=t(8126),c=t(6145),x=t(1120),g=t(5268),p=t(8245),v=t(2321)({tablet:!0,featureDetect:!0});function m(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function y(f){var S=Math.round(Math.log(Math.abs(f))/Math.log(10));if(S<0){var w=Math.round(Math.pow(10,-S));return Math.ceil(f*w)/w}return S>0?(w=Math.round(Math.pow(10,S)),Math.ceil(f/w)*w):Math.ceil(f)}function _(f){return typeof f!="boolean"||f}h.exports={createScene:function(f){(f=f||{}).camera=f.camera||{};var S=f.canvas;S||(S=document.createElement("canvas"),f.container?f.container.appendChild(S):document.body.appendChild(S));var w=f.gl;if(w||(f.glOptions&&(v=!!f.glOptions.preserveDrawingBuffer),w=function(pe,_e){var Te=null;try{(Te=pe.getContext("webgl",_e))||(Te=pe.getContext("experimental-webgl",_e))}catch(le){return null}return Te}(S,f.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:v})),!w)throw new Error("webgl not supported");var E=f.bounds||[[-10,-10,-10],[10,10,10]],P=new m,C=u(w,w.drawingBufferWidth,w.drawingBufferHeight,{preferFloat:!v}),O=p(w),R=f.cameraObject&&f.cameraObject._ortho===!0||f.camera.projection&&f.camera.projection.type==="orthographic"||!1,j={eye:f.camera.eye||[2,0,0],center:f.camera.center||[0,0,0],up:f.camera.up||[0,1,0],zoomMin:f.camera.zoomMax||.1,zoomMax:f.camera.zoomMin||100,mode:f.camera.mode||"turntable",_ortho:R},D=f.axes||{},N=n(w,D);N.enable=!D.disable;var W=f.spikes||{},F=a(w,W),U=[],V=[],te=[],J=[],K=!0,X=!0,Z={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},$=(X=!0,[w.drawingBufferWidth,w.drawingBufferHeight]),re=f.cameraObject||i(S,j),oe={gl:w,contextLost:!1,pixelRatio:f.pixelRatio||1,canvas:S,selection:P,camera:re,axes:N,axesPixels:null,spikes:F,bounds:E,objects:U,shape:$,aspect:f.aspectRatio||[1,1,1],pickRadius:f.pickRadius||10,zNear:f.zNear||.01,zFar:f.zFar||1e3,fovy:f.fovy||Math.PI/4,clearColor:f.clearColor||[0,0,0,0],autoResize:_(f.autoResize),autoBounds:_(f.autoBounds),autoScale:!!f.autoScale,autoCenter:_(f.autoCenter),clipToBounds:_(f.clipToBounds),snapToData:!!f.snapToData,onselect:f.onselect||null,onrender:f.onrender||null,onclick:f.onclick||null,cameraParams:Z,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(pe){this.aspect[0]=pe.x,this.aspect[1]=pe.y,this.aspect[2]=pe.z,X=!0},setBounds:function(pe,_e){this.bounds[0][pe]=_e.min,this.bounds[1][pe]=_e.max},setClearColor:function(pe){this.clearColor=pe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ie=[w.drawingBufferWidth/oe.pixelRatio|0,w.drawingBufferHeight/oe.pixelRatio|0];function ue(){if(!oe._stopped&&oe.autoResize){var pe=S.parentNode,_e=1,Te=1;pe&&pe!==document.body?(_e=pe.clientWidth,Te=pe.clientHeight):(_e=window.innerWidth,Te=window.innerHeight);var le=0|Math.ceil(_e*oe.pixelRatio),ae=0|Math.ceil(Te*oe.pixelRatio);if(le!==S.width||ae!==S.height){S.width=le,S.height=ae;var he=S.style;he.position=he.position||"absolute",he.left="0px",he.top="0px",he.width=_e+"px",he.height=Te+"px",K=!0}}}function me(){for(var pe=U.length,_e=J.length,Te=0;Te<_e;++Te)te[Te]=0;e:for(Te=0;Te<pe;++Te){var le=U[Te],ae=le.pickSlots;if(ae){for(var he=0;he<_e;++he)if(te[he]+ae<255){V[Te]=he,le.setPickBase(te[he]+1),te[he]+=ae;continue e}var Se=l(w,$);V[Te]=_e,J.push(Se),te.push(ae),le.setPickBase(1),_e+=1}else V[Te]=-1}for(;_e>0&&te[_e-1]===0;)te.pop(),J.pop().dispose()}function be(){if(oe.contextLost)return!0;w.isContextLost()&&(oe.contextLost=!0,oe.mouseListener.enabled=!1,oe.selection.object=null,oe.oncontextloss&&oe.oncontextloss())}oe.autoResize&&ue(),window.addEventListener("resize",ue),oe.update=function(pe){oe._stopped||(pe=pe||{},K=!0,X=!0)},oe.add=function(pe){oe._stopped||(pe.axes=N,U.push(pe),V.push(-1),K=!0,X=!0,me())},oe.remove=function(pe){if(!oe._stopped){var _e=U.indexOf(pe);_e<0||(U.splice(_e,1),V.pop(),K=!0,X=!0,me())}},oe.dispose=function(){if(!oe._stopped&&(oe._stopped=!0,window.removeEventListener("resize",ue),S.removeEventListener("webglcontextlost",be),oe.mouseListener.enabled=!1,!oe.contextLost)){N.dispose(),F.dispose();for(var pe=0;pe<U.length;++pe)U[pe].dispose();for(C.dispose(),pe=0;pe<J.length;++pe)J[pe].dispose();O.dispose(),w=null,N=null,F=null,U=[]}},oe._mouseRotating=!1,oe._prevButtons=0,oe.enableMouseListeners=function(){oe.mouseListener=c(S,function(pe,_e,Te){if(!oe._stopped){var le=J.length,ae=U.length,he=P.object;P.distance=1/0,P.mouse[0]=_e,P.mouse[1]=Te,P.object=null,P.screen=null,P.dataCoordinate=P.dataPosition=null;var Se=!1;if(pe&&oe._prevButtons)oe._mouseRotating=!0;else{oe._mouseRotating&&(X=!0),oe._mouseRotating=!1;for(var ke=0;ke<le;++ke){var Me=J[ke].query(_e,ie[1]-Te-1,oe.pickRadius);if(Me){if(Me.distance>P.distance)continue;for(var Ee=0;Ee<ae;++Ee){var De=U[Ee];if(V[Ee]===ke){var fe=De.pick(Me);fe&&(P.buttons=pe,P.screen=Me.coord,P.distance=Me.distance,P.object=De,P.index=fe.distance,P.dataPosition=fe.position,P.dataCoordinate=fe.dataCoordinate,P.data=fe,Se=!0)}}}}}he&&he!==P.object&&(he.highlight&&he.highlight(null),K=!0),P.object&&(P.object.highlight&&P.object.highlight(P.data),K=!0),(Se=Se||P.object!==he)&&oe.onselect&&oe.onselect(P),1&pe&&!(1&oe._prevButtons)&&oe.onclick&&oe.onclick(P),oe._prevButtons=pe}})},S.addEventListener("webglcontextlost",be);var ge=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],de=[ge[0].slice(),ge[1].slice()];function ve(){if(!be()){ue();var pe=oe.camera.tick();Z.view=oe.camera.matrix,K=K||pe,X=X||pe,N.pixelRatio=oe.pixelRatio,F.pixelRatio=oe.pixelRatio;var _e=U.length,Te=ge[0],le=ge[1];Te[0]=Te[1]=Te[2]=1/0,le[0]=le[1]=le[2]=-1/0;for(var ae=0;ae<_e;++ae){(Pe=U[ae]).pixelRatio=oe.pixelRatio,Pe.axes=oe.axes,K=K||!!Pe.dirty,X=X||!!Pe.dirty;var he=Pe.bounds;if(he)for(var Se=he[0],ke=he[1],Me=0;Me<3;++Me)Te[Me]=Math.min(Te[Me],Se[Me]),le[Me]=Math.max(le[Me],ke[Me])}var Ee=oe.bounds;if(oe.autoBounds)for(Me=0;Me<3;++Me){if(le[Me]<Te[Me])Te[Me]=-1,le[Me]=1;else{Te[Me]===le[Me]&&(Te[Me]-=1,le[Me]+=1);var De=.05*(le[Me]-Te[Me]);Te[Me]=Te[Me]-De,le[Me]=le[Me]+De}Ee[0][Me]=Te[Me],Ee[1][Me]=le[Me]}var fe=!1;for(Me=0;Me<3;++Me)fe=fe||de[0][Me]!==Ee[0][Me]||de[1][Me]!==Ee[1][Me],de[0][Me]=Ee[0][Me],de[1][Me]=Ee[1][Me];if(X=X||fe,K=K||fe){if(fe){var xe=[0,0,0];for(ae=0;ae<3;++ae)xe[ae]=y((Ee[1][ae]-Ee[0][ae])/10);N.autoTicks?N.update({bounds:Ee,tickSpacing:xe}):N.update({bounds:Ee})}var we=w.drawingBufferWidth,Oe=w.drawingBufferHeight;for($[0]=we,$[1]=Oe,ie[0]=0|Math.max(we/oe.pixelRatio,1),ie[1]=0|Math.max(Oe/oe.pixelRatio,1),function(Ue,Ve){var Ze=Ue.bounds,it=Ue.cameraParams,tt=it.projection,dt=it.model,yt=Ue.gl.drawingBufferWidth,vt=Ue.gl.drawingBufferHeight,et=Ue.zNear,Qe=Ue.zFar,wt=Ue.fovy,It=yt/vt;Ve?(g(tt,-It,It,-1,1,et,Qe),it._ortho=!0):(x(tt,wt,It,et,Qe),it._ortho=!1);for(var Dt=0;Dt<16;++Dt)dt[Dt]=0;dt[15]=1;var Ct=0;for(Dt=0;Dt<3;++Dt)Ct=Math.max(Ct,Ze[1][Dt]-Ze[0][Dt]);for(Dt=0;Dt<3;++Dt)Ue.autoScale?dt[5*Dt]=Ue.aspect[Dt]/(Ze[1][Dt]-Ze[0][Dt]):dt[5*Dt]=1/Ct,Ue.autoCenter&&(dt[12+Dt]=.5*-dt[5*Dt]*(Ze[0][Dt]+Ze[1][Dt]))}(oe,R),ae=0;ae<_e;++ae)(Pe=U[ae]).axesBounds=Ee,oe.clipToBounds&&(Pe.clipBounds=Ee);P.object&&(oe.snapToData?F.position=P.dataCoordinate:F.position=P.dataPosition,F.bounds=Ee),X&&(X=!1,function(){if(!be()){w.colorMask(!0,!0,!0,!0),w.depthMask(!0),w.disable(w.BLEND),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL);for(var Ue=U.length,Ve=J.length,Ze=0;Ze<Ve;++Ze){var it=J[Ze];it.shape=ie,it.begin();for(var tt=0;tt<Ue;++tt)if(V[tt]===Ze){var dt=U[tt];dt.drawPick&&(dt.pixelRatio=1,dt.drawPick(Z))}it.end()}}}()),oe.axesPixels=r(oe.axes,Z,we,Oe),oe.onrender&&oe.onrender(),w.bindFramebuffer(w.FRAMEBUFFER,null),w.viewport(0,0,we,Oe),oe.clearRGBA(),w.depthMask(!0),w.colorMask(!0,!0,!0,!0),w.enable(w.DEPTH_TEST),w.depthFunc(w.LEQUAL),w.disable(w.BLEND),w.disable(w.CULL_FACE);var ze=!1;for(N.enable&&(ze=ze||N.isTransparent(),N.draw(Z)),F.axes=N,P.object&&F.draw(Z),w.disable(w.CULL_FACE),ae=0;ae<_e;++ae)(Pe=U[ae]).axes=N,Pe.pixelRatio=oe.pixelRatio,Pe.isOpaque&&Pe.isOpaque()&&Pe.draw(Z),Pe.isTransparent&&Pe.isTransparent()&&(ze=!0);if(ze){for(C.shape=$,C.bind(),w.clear(w.DEPTH_BUFFER_BIT),w.colorMask(!1,!1,!1,!1),w.depthMask(!0),w.depthFunc(w.LESS),N.enable&&N.isTransparent()&&N.drawTransparent(Z),ae=0;ae<_e;++ae)(Pe=U[ae]).isOpaque&&Pe.isOpaque()&&Pe.draw(Z);for(w.enable(w.BLEND),w.blendEquation(w.FUNC_ADD),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.colorMask(!0,!0,!0,!0),w.depthMask(!1),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),N.isTransparent()&&N.drawTransparent(Z),ae=0;ae<_e;++ae){var Pe;(Pe=U[ae]).isTransparent&&Pe.isTransparent()&&Pe.drawTransparent(Z)}w.bindFramebuffer(w.FRAMEBUFFER,null),w.blendFunc(w.ONE,w.ONE_MINUS_SRC_ALPHA),w.disable(w.DEPTH_TEST),O.bind(),C.color[0].bind(0),O.uniforms.accumBuffer=0,d(w),w.disable(w.BLEND)}for(K=!1,ae=0;ae<_e;++ae)U[ae].dirty=!1}}}return oe.enableMouseListeners(),function pe(){oe._stopped||oe.contextLost||(ve(),requestAnimationFrame(pe))}(),oe.redraw=function(){oe._stopped||(K=!0,ve())},oe},createCamera:i}},8023:function(h,s,t){var i=t(6832);s.pointVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),s.pointFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),s.pickVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),s.pickFragment=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},8271:function(h,s,t){"use strict";var i=t(5158),n=t(5827),r=t(5306),a=t(8023);function l(x,g,p,v,m){this.plot=x,this.offsetBuffer=g,this.pickBuffer=p,this.shader=v,this.pickShader=m,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}h.exports=function(x,g){var p=x.gl,v=new l(x,n(p),n(p),i(p,a.pointVertex,a.pointFragment),i(p,a.pickVertex,a.pickFragment));return v.update(g),x.addObject(v),v};var u,d,c=l.prototype;c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},c.update=function(x){var g;function p(w,E){return w in x?x[w]:E}x=x||{},this.sizeMin=p("sizeMin",.5),this.sizeMax=p("sizeMax",20),this.color=p("color",[1,0,0,1]).slice(),this.areaRatio=p("areaRatio",1),this.borderColor=p("borderColor",[0,0,0,1]).slice(),this.blend=p("blend",!1);var v=x.positions.length>>>1,m=x.positions instanceof Float32Array,y=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=v,_=x.positions,f=m?_:r.mallocFloat32(_.length),S=y?x.idToIndex:r.mallocInt32(v);if(m||f.set(_),!y)for(f.set(_),g=0;g<v;g++)S[g]=g;this.points=_,this.offsetBuffer.update(f),this.pickBuffer.update(S),m||r.free(f),y||r.free(S),this.pointCount=v,this.pickOffset=0},c.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0],function(x){var g=x!==void 0,p=g?this.pickShader:this.shader,v=this.plot.gl,m=this.plot.dataBox;if(this.pointCount===0)return x;var y=m[2]-m[0],_=m[3]-m[1],f=function(P,C){var O,R=0,j=P.length>>>1;for(O=0;O<j;O++){var D=P[2*O],N=P[2*O+1];D>=C[0]&&D<=C[2]&&N>=C[1]&&N<=C[3]&&R++}return R}(this.points,m),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(f,.33333)));u[0]=2/y,u[4]=2/_,u[6]=-2*m[0]/y-1,u[7]=-2*m[1]/_-1,this.offsetBuffer.bind(),p.bind(),p.attributes.position.pointer(),p.uniforms.matrix=u,p.uniforms.color=this.color,p.uniforms.borderColor=this.borderColor,p.uniforms.pointCloud=S<5,p.uniforms.pointSize=S,p.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),g&&(d[0]=255&x,d[1]=x>>8&255,d[2]=x>>16&255,d[3]=x>>24&255,this.pickBuffer.bind(),p.attributes.pickId.pointer(v.UNSIGNED_BYTE),p.uniforms.pickOffset=d,this.pickOffset=x);var w=v.getParameter(v.BLEND),E=v.getParameter(v.DITHER);return w&&!this.blend&&v.disable(v.BLEND),E&&v.disable(v.DITHER),v.drawArrays(v.POINTS,0,this.pointCount),w&&!this.blend&&v.enable(v.BLEND),E&&v.enable(v.DITHER),x+this.pointCount}),c.draw=c.unifiedDraw,c.drawPick=c.unifiedDraw,c.pick=function(x,g,p){var v=this.pickOffset,m=this.pointCount;if(p<v||p>=v+m)return null;var y=p-v,_=this.points;return{object:this,pointId:y,dataCoord:[_[2*y],_[2*y+1]]}}},6093:function(h){h.exports=function(s,t,i,n){var r,a,l,u,d,c=t[0],x=t[1],g=t[2],p=t[3],v=i[0],m=i[1],y=i[2],_=i[3];return(a=c*v+x*m+g*y+p*_)<0&&(a=-a,v=-v,m=-m,y=-y,_=-_),1-a>1e-6?(r=Math.acos(a),l=Math.sin(r),u=Math.sin((1-n)*r)/l,d=Math.sin(n*r)/l):(u=1-n,d=n),s[0]=u*c+d*v,s[1]=u*x+d*m,s[2]=u*g+d*y,s[3]=u*p+d*_,s}},8240:function(h){"use strict";h.exports=function(s){return s||s===0?s.toString():""}},4123:function(h,s,t){"use strict";var i=t(875);h.exports=function(r,a,l){var u=n[a];if(u||(u=n[a]={}),r in u)return u[r];var d={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},c=i(r,d);d.triangles=!1;var x,g,p=i(r,d);if(l&&l!==1){for(x=0;x<c.positions.length;++x)for(g=0;g<c.positions[x].length;++g)c.positions[x][g]/=l;for(x=0;x<p.positions.length;++x)for(g=0;g<p.positions[x].length;++g)p.positions[x][g]/=l}var v=[[1/0,1/0],[-1/0,-1/0]],m=p.positions.length;for(x=0;x<m;++x){var y=p.positions[x];for(g=0;g<2;++g)v[0][g]=Math.min(v[0][g],y[g]),v[1][g]=Math.max(v[1][g],y[g])}return u[r]=[c,p,v]};var n={}},9282:function(h,s,t){var i=t(5158),n=t(6832),r=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),a=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),d=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:r,fragment:u,attributes:c},g={vertex:a,fragment:u,attributes:c},p={vertex:l,fragment:u,attributes:c},v={vertex:r,fragment:d,attributes:c},m={vertex:a,fragment:d,attributes:c},y={vertex:l,fragment:d,attributes:c};function _(f,S){var w=i(f,S),E=w.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,w}s.createPerspective=function(f){return _(f,x)},s.createOrtho=function(f){return _(f,g)},s.createProject=function(f){return _(f,p)},s.createPickPerspective=function(f){return _(f,v)},s.createPickOrtho=function(f){return _(f,m)},s.createPickProject=function(f){return _(f,y)}},2182:function(h,s,t){"use strict";var i=t(3596),n=t(5827),r=t(2944),a=t(5306),l=t(104),u=t(9282),d=t(4123),c=t(8240),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(V,te){var J=V[0],K=V[1],X=V[2],Z=V[3];return V[0]=te[0]*J+te[4]*K+te[8]*X+te[12]*Z,V[1]=te[1]*J+te[5]*K+te[9]*X+te[13]*Z,V[2]=te[2]*J+te[6]*K+te[10]*X+te[14]*Z,V[3]=te[3]*J+te[7]*K+te[11]*X+te[15]*Z,V}function p(V,te,J,K){return g(K,K),g(K,K),g(K,K)}function v(V,te){this.index=V,this.dataCoordinate=this.position=te}function m(V){return V===!0||V>1?1:V}function y(V,te,J,K,X,Z,$,re,oe,ie,ue,me){this.gl=V,this.pixelRatio=1,this.shader=te,this.orthoShader=J,this.projectShader=K,this.pointBuffer=X,this.colorBuffer=Z,this.glyphBuffer=$,this.idBuffer=re,this.vao=oe,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ie,this.pickOrthoShader=ue,this.pickProjectShader=me,this.points=[],this._selectResult=new v(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}h.exports=function(V){var te=V.gl,J=u.createPerspective(te),K=u.createOrtho(te),X=u.createProject(te),Z=u.createPickPerspective(te),$=u.createPickOrtho(te),re=u.createPickProject(te),oe=n(te),ie=n(te),ue=n(te),me=n(te),be=new y(te,J,K,X,oe,ie,ue,me,r(te,[{buffer:oe,size:3,type:te.FLOAT},{buffer:ie,size:4,type:te.FLOAT},{buffer:ue,size:2,type:te.FLOAT},{buffer:me,size:4,type:te.UNSIGNED_BYTE,normalized:!0}]),Z,$,re);return be.update(V),be};var _=y.prototype;_.pickSlots=1,_.setPickBase=function(V){this.pickId=V},_.isTransparent=function(){if(this.hasAlpha)return!0;for(var V=0;V<3;++V)if(this.axesProject[V]&&this.projectHasAlpha)return!0;return!1},_.isOpaque=function(){if(!this.hasAlpha)return!0;for(var V=0;V<3;++V)if(this.axesProject[V]&&!this.projectHasAlpha)return!0;return!1};var f=[0,0],S=[0,0,0],w=[0,0,0],E=[0,0,0,1],P=[0,0,0,1],C=x.slice(),O=[0,0,0],R=[[0,0,0],[0,0,0]];function j(V){return V[0]=V[1]=V[2]=0,V}function D(V,te){return V[0]=te[0],V[1]=te[1],V[2]=te[2],V[3]=1,V}function N(V,te,J,K){return V[0]=te[0],V[1]=te[1],V[2]=te[2],V[J]=K,V}var W=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function F(V,te,J,K,X,Z,$){var re=J.gl;if((Z===J.projectHasAlpha||$)&&function(ie,ue,me,be){var ge,de=ue.axesProject,ve=ue.gl,pe=ie.uniforms,_e=me.model||x,Te=me.view||x,le=me.projection||x,ae=ue.axesBounds,he=function(Ze){for(var it=R,tt=0;tt<2;++tt)for(var dt=0;dt<3;++dt)it[tt][dt]=Math.max(Math.min(Ze[tt][dt],1e8),-1e8);return it}(ue.clipBounds);ge=ue.axes&&ue.axes.lastCubeProps?ue.axes.lastCubeProps.axis:[1,1,1],f[0]=2/ve.drawingBufferWidth,f[1]=2/ve.drawingBufferHeight,ie.bind(),pe.view=Te,pe.projection=le,pe.screenSize=f,pe.highlightId=ue.highlightId,pe.highlightScale=ue.highlightScale,pe.clipBounds=he,pe.pickGroup=ue.pickId/255,pe.pixelRatio=be;for(var Se=0;Se<3;++Se)if(de[Se]){pe.scale=ue.projectScale[Se],pe.opacity=ue.projectOpacity[Se];for(var ke=C,Me=0;Me<16;++Me)ke[Me]=0;for(Me=0;Me<4;++Me)ke[5*Me]=1;ke[5*Se]=0,ge[Se]<0?ke[12+Se]=ae[0][Se]:ke[12+Se]=ae[1][Se],l(ke,_e,ke),pe.model=ke;var Ee=(Se+1)%3,De=(Se+2)%3,fe=j(S),xe=j(w);fe[Ee]=1,xe[De]=1;var we=p(0,0,0,D(E,fe)),Oe=p(0,0,0,D(P,xe));if(Math.abs(we[1])>Math.abs(Oe[1])){var ze=we;we=Oe,Oe=ze,ze=fe,fe=xe,xe=ze;var Pe=Ee;Ee=De,De=Pe}we[0]<0&&(fe[Ee]=-1),Oe[1]>0&&(xe[De]=-1);var Ue=0,Ve=0;for(Me=0;Me<4;++Me)Ue+=Math.pow(_e[4*Ee+Me],2),Ve+=Math.pow(_e[4*De+Me],2);fe[Ee]/=Math.sqrt(Ue),xe[De]/=Math.sqrt(Ve),pe.axes[0]=fe,pe.axes[1]=xe,pe.fragClipBounds[0]=N(O,he[0],Se,-1e8),pe.fragClipBounds[1]=N(O,he[1],Se,1e8),ue.vao.bind(),ue.vao.draw(ve.TRIANGLES,ue.vertexCount),ue.lineWidth>0&&(ve.lineWidth(ue.lineWidth*be),ue.vao.draw(ve.LINES,ue.lineVertexCount,ue.vertexCount)),ue.vao.unbind()}}(te,J,K,X),Z===J.hasAlpha||$){V.bind();var oe=V.uniforms;oe.model=K.model||x,oe.view=K.view||x,oe.projection=K.projection||x,f[0]=2/re.drawingBufferWidth,f[1]=2/re.drawingBufferHeight,oe.screenSize=f,oe.highlightId=J.highlightId,oe.highlightScale=J.highlightScale,oe.fragClipBounds=W,oe.clipBounds=J.axes.bounds,oe.opacity=J.opacity,oe.pickGroup=J.pickId/255,oe.pixelRatio=X,J.vao.bind(),J.vao.draw(re.TRIANGLES,J.vertexCount),J.lineWidth>0&&(re.lineWidth(J.lineWidth*X),J.vao.draw(re.LINES,J.lineVertexCount,J.vertexCount)),J.vao.unbind()}}function U(V,te,J,K){var X;X=Array.isArray(V)?te<V.length?V[te]:void 0:V,X=c(X);var Z=!0;i(X)&&(X="\u25BC",Z=!1);var $=d(X,J,K);return{mesh:$[0],lines:$[1],bounds:$[2],visible:Z}}_.draw=function(V){F(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,V,this.pixelRatio,!1,!1)},_.drawTransparent=function(V){F(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,V,this.pixelRatio,!0,!1)},_.drawPick=function(V){F(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,V,1,!0,!0)},_.pick=function(V){if(!V||V.id!==this.pickId)return null;var te=V.value[2]+(V.value[1]<<8)+(V.value[0]<<16);if(te>=this.pointCount||te<0)return null;var J=this.points[te],K=this._selectResult;K.index=te;for(var X=0;X<3;++X)K.position[X]=K.dataCoordinate[X]=J[X];return K},_.highlight=function(V){if(V){var te=V.index,J=255&te,K=te>>8&255,X=te>>16&255;this.highlightId=[J/255,K/255,X/255,0]}else this.highlightId=[1,1,1,1]},_.update=function(V){if("perspective"in(V=V||{})&&(this.useOrtho=!V.perspective),"orthographic"in V&&(this.useOrtho=!!V.orthographic),"lineWidth"in V&&(this.lineWidth=V.lineWidth),"project"in V)if(Array.isArray(V.project))this.axesProject=V.project;else{var te=!!V.project;this.axesProject=[te,te,te]}if("projectScale"in V)if(Array.isArray(V.projectScale))this.projectScale=V.projectScale.slice();else{var J=+V.projectScale;this.projectScale=[J,J,J]}if(this.projectHasAlpha=!1,"projectOpacity"in V){Array.isArray(V.projectOpacity)?this.projectOpacity=V.projectOpacity.slice():(J=+V.projectOpacity,this.projectOpacity=[J,J,J]);for(var K=0;K<3;++K)this.projectOpacity[K]=m(this.projectOpacity[K]),this.projectOpacity[K]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in V&&(this.opacity=m(V.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var X,Z,$=V.position,re=V.font||"normal",oe=V.alignment||[0,0];if(oe.length===2)X=oe[0],Z=oe[1];else for(X=[],Z=[],K=0;K<oe.length;++K)X[K]=oe[K][0],Z[K]=oe[K][1];var ie=[1/0,1/0,1/0],ue=[-1/0,-1/0,-1/0],me=V.glyph,be=V.color,ge=V.size,de=V.angle,ve=V.lineColor,pe=-1,_e=0,Te=0,le=0;if($.length){le=$.length;e:for(K=0;K<le;++K){for(var ae=$[K],he=0;he<3;++he)if(isNaN(ae[he])||!isFinite(ae[he]))continue e;var Se=(it=U(me,K,re,this.pixelRatio)).mesh,ke=it.lines,Me=it.bounds;_e+=3*Se.cells.length,Te+=2*ke.edges.length}}var Ee=_e+Te,De=a.mallocFloat(3*Ee),fe=a.mallocFloat(4*Ee),xe=a.mallocFloat(2*Ee),we=a.mallocUint32(Ee);if(Ee>0){var Oe=0,ze=_e,Pe=[0,0,0,1],Ue=[0,0,0,1],Ve=Array.isArray(be)&&Array.isArray(be[0]),Ze=Array.isArray(ve)&&Array.isArray(ve[0]);e:for(K=0;K<le;++K){for(pe+=1,ae=$[K],he=0;he<3;++he){if(isNaN(ae[he])||!isFinite(ae[he]))continue e;ue[he]=Math.max(ue[he],ae[he]),ie[he]=Math.min(ie[he],ae[he])}Se=(it=U(me,K,re,this.pixelRatio)).mesh,ke=it.lines,Me=it.bounds;var it,tt=it.visible;if(tt)if(Array.isArray(be)){if((dt=Ve?K<be.length?be[K]:[0,0,0,0]:be).length===3){for(he=0;he<3;++he)Pe[he]=dt[he];Pe[3]=1}else if(dt.length===4){for(he=0;he<4;++he)Pe[he]=dt[he];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else Pe[0]=Pe[1]=Pe[2]=0,Pe[3]=1;else Pe=[1,1,1,0];if(tt)if(Array.isArray(ve)){var dt;if((dt=Ze?K<ve.length?ve[K]:[0,0,0,0]:ve).length===3){for(he=0;he<3;++he)Ue[he]=dt[he];Ue[he]=1}else if(dt.length===4){for(he=0;he<4;++he)Ue[he]=dt[he];!this.hasAlpha&&dt[3]<1&&(this.hasAlpha=!0)}}else Ue[0]=Ue[1]=Ue[2]=0,Ue[3]=1;else Ue=[1,1,1,0];var yt=.5;tt?Array.isArray(ge)?yt=K<ge.length?+ge[K]:12:ge?yt=+ge:this.useOrtho&&(yt=12):yt=0;var vt=0;Array.isArray(de)?vt=K<de.length?+de[K]:0:de&&(vt=+de);var et=Math.cos(vt),Qe=Math.sin(vt);for(ae=$[K],he=0;he<3;++he)ue[he]=Math.max(ue[he],ae[he]),ie[he]=Math.min(ie[he],ae[he]);var wt=X,It=Z;wt=0,Array.isArray(X)?wt=K<X.length?X[K]:0:X&&(wt=X),It=0,Array.isArray(Z)?It=K<Z.length?Z[K]:0:Z&&(It=Z);var Dt=[wt*=wt>0?1-Me[0][0]:wt<0?1+Me[1][0]:1,It*=It>0?1-Me[0][1]:It<0?1+Me[1][1]:1],Ct=Se.cells||[],He=Se.positions||[];for(he=0;he<Ct.length;++he)for(var We=Ct[he],Be=0;Be<3;++Be){for(var Ge=0;Ge<3;++Ge)De[3*Oe+Ge]=ae[Ge];for(Ge=0;Ge<4;++Ge)fe[4*Oe+Ge]=Pe[Ge];we[Oe]=pe;var at=He[We[Be]];xe[2*Oe]=yt*(et*at[0]-Qe*at[1]+Dt[0]),xe[2*Oe+1]=yt*(Qe*at[0]+et*at[1]+Dt[1]),Oe+=1}for(Ct=ke.edges,He=ke.positions,he=0;he<Ct.length;++he)for(We=Ct[he],Be=0;Be<2;++Be){for(Ge=0;Ge<3;++Ge)De[3*ze+Ge]=ae[Ge];for(Ge=0;Ge<4;++Ge)fe[4*ze+Ge]=Ue[Ge];we[ze]=pe,at=He[We[Be]],xe[2*ze]=yt*(et*at[0]-Qe*at[1]+Dt[0]),xe[2*ze+1]=yt*(Qe*at[0]+et*at[1]+Dt[1]),ze+=1}}}this.bounds=[ie,ue],this.points=$,this.pointCount=$.length,this.vertexCount=_e,this.lineVertexCount=Te,this.pointBuffer.update(De),this.colorBuffer.update(fe),this.glyphBuffer.update(xe),this.idBuffer.update(we),a.free(De),a.free(fe),a.free(xe),a.free(we)},_.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(h,s,t){"use strict";var i=t(6832);s.boxVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),s.boxFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},6623:function(h,s,t){"use strict";var i=t(5158),n=t(5827),r=t(1884);function a(u,d,c){this.plot=u,this.boxBuffer=d,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}h.exports=function(u,d){var c=u.gl,x=new a(u,n(c,[0,0,0,1,1,0,1,1]),i(c,r.boxVertex,r.boxFragment));return x.update(d),u.addOverlay(x),x};var l=a.prototype;l.draw=function(){if(this.enabled){var u=this.plot,d=this.selectBox,c=this.borderWidth,x=(this.innerFill,this.innerColor),g=(this.outerFill,this.outerColor),p=this.borderColor,v=u.box,m=u.screenBox,y=u.dataBox,_=u.viewBox,f=u.pixelRatio,S=(d[0]-y[0])*(_[2]-_[0])/(y[2]-y[0])+_[0],w=(d[1]-y[1])*(_[3]-_[1])/(y[3]-y[1])+_[1],E=(d[2]-y[0])*(_[2]-_[0])/(y[2]-y[0])+_[0],P=(d[3]-y[1])*(_[3]-_[1])/(y[3]-y[1])+_[1];if(S=Math.max(S,_[0]),w=Math.max(w,_[1]),E=Math.min(E,_[2]),P=Math.min(P,_[3]),!(E<S||P<w)){v.bind();var C=m[2]-m[0],O=m[3]-m[1];if(this.outerFill&&(v.drawBox(0,0,C,w,g),v.drawBox(0,w,S,P,g),v.drawBox(0,P,C,O,g),v.drawBox(E,w,C,P,g)),this.innerFill&&v.drawBox(S,w,E,P,x),c>0){var R=c*f;v.drawBox(S-R,w-R,E+R,w+R,p),v.drawBox(S-R,P-R,E+R,P+R,p),v.drawBox(S-R,w-R,S+R,P+R,p),v.drawBox(E-R,w-R,E+R,P+R,p)}}}},l.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},l.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(h,s,t){"use strict";h.exports=function(c,x){var g=x[0],p=x[1];return new u(c,i(c,g,p,{}),n.mallocUint8(g*p*4))};var i=t(4234),n=t(5306),r=t(5050),a=t(2288).nextPow2;function l(c,x,g,p,v){this.coord=[c,x],this.id=g,this.value=p,this.distance=v}function u(c,x,g){this.gl=c,this.fbo=x,this.buffer=g,this._readTimeout=null;var p=this;this._readCallback=function(){p.gl&&(x.bind(),c.readPixels(0,0,x.shape[0],x.shape[1],c.RGBA,c.UNSIGNED_BYTE,p.buffer),p._readTimeout=null)}}var d=u.prototype;Object.defineProperty(d,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(c){if(this.gl){this.fbo.shape=c;var x=this.fbo.shape[0],g=this.fbo.shape[1];if(g*x*4>this.buffer.length){n.free(this.buffer);for(var p=this.buffer=n.mallocUint8(a(g*x*4)),v=0;v<g*x*4;++v)p[v]=255}return c}}}),d.begin=function(){var c=this.gl;this.shape,c&&(this.fbo.bind(),c.clearColor(1,1,1,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT))},d.end=function(){var c=this.gl;c&&(c.bindFramebuffer(c.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},d.query=function(c,x,g){if(!this.gl)return null;var p=this.fbo.shape.slice();c|=0,x|=0,typeof g!="number"&&(g=1);var v=0|Math.min(Math.max(c-g,0),p[0]),m=0|Math.min(Math.max(c+g,0),p[0]),y=0|Math.min(Math.max(x-g,0),p[1]),_=0|Math.min(Math.max(x+g,0),p[1]);if(m<=v||_<=y)return null;var f=[m-v,_-y],S=r(this.buffer,[f[0],f[1],4],[4,4*p[0],1],4*(v+p[0]*y)),w=function(C,O,R){for(var j=1e8,D=-1,N=-1,W=C.shape[0],F=C.shape[1],U=0;U<W;U++)for(var V=0;V<F;V++){var te=C.get(U,V,0),J=C.get(U,V,1),K=C.get(U,V,2),X=C.get(U,V,3);if(te<255||J<255||K<255||X<255){var Z=O-U,$=R-V,re=Z*Z+$*$;re<j&&(j=re,D=U,N=V)}}return[D,N,j]}(S.hi(f[0],f[1],1),g,g),E=w[0],P=w[1];return E<0||Math.pow(this.radius,2)<w[2]?null:new l(E+v|0,P+y|0,S.get(E,P,0),[S.get(E,P,1),S.get(E,P,2),S.get(E,P,3)],Math.sqrt(w[2]))},d.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(h,s,t){"use strict";var i=t(9016),n=t(4280),r=t(3984),a=t(1628),l=t(2631),u=t(9068);function d(g){this.gl=g,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=d.prototype;function x(g,p){return g.name<p.name?-1:1}c.bind=function(){var g;this.program||this._relink();var p=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),v=this.gl.lastAttribCount;if(p>v)for(g=v;g<p;g++)this.gl.enableVertexAttribArray(g);else if(v>p)for(g=p;g<v;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=p,this.gl.useProgram(this.program)},c.dispose=function(){for(var g=this.gl.lastAttribCount,p=0;p<g;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(g,p,v,m){if(!p||arguments.length===1){var y=g;g=y.vertex,p=y.fragment,v=y.uniforms,m=y.attributes}var _=this,f=_.gl,S=_._vref;_._vref=a.shader(f,f.VERTEX_SHADER,g),S&&S.dispose(),_.vertShader=_._vref.shader;var w=this._fref;if(_._fref=a.shader(f,f.FRAGMENT_SHADER,p),w&&w.dispose(),_.fragShader=_._fref.shader,!v||!m){var E=f.createProgram();if(f.attachShader(E,_.fragShader),f.attachShader(E,_.vertShader),f.linkProgram(E),!f.getProgramParameter(E,f.LINK_STATUS)){var P=f.getProgramInfoLog(E);throw new u(P,"Error linking program:"+P)}v=v||l.uniforms(f,E),m=m||l.attributes(f,E),f.deleteProgram(E)}(m=m.slice()).sort(x);var C,O=[],R=[],j=[];for(C=0;C<m.length;++C){var D=m[C];if(D.type.indexOf("mat")>=0){for(var N=0|D.type.charAt(D.type.length-1),W=new Array(N),F=0;F<N;++F)W[F]=j.length,R.push(D.name+"["+F+"]"),typeof D.location=="number"?j.push(D.location+F):Array.isArray(D.location)&&D.location.length===N&&typeof D.location[F]=="number"?j.push(0|D.location[F]):j.push(-1);O.push({name:D.name,type:D.type,locations:W})}else O.push({name:D.name,type:D.type,locations:[j.length]}),R.push(D.name),typeof D.location=="number"?j.push(0|D.location):j.push(-1)}var U=0;for(C=0;C<j.length;++C)if(j[C]<0){for(;j.indexOf(U)>=0;)U+=1;j[C]=U}var V=new Array(v.length);function te(){_.program=a.program(f,_._vref,_._fref,R,j);for(var J=0;J<v.length;++J)V[J]=f.getUniformLocation(_.program,v[J].name)}te(),_._relink=te,_.types={uniforms:r(v),attributes:r(m)},_.attributes=n(f,_,O,j),Object.defineProperty(_,"uniforms",i(f,_,v,V))},h.exports=function(g,p,v,m,y){var _=new d(g);return _.update(p,v,m,y),_}},9068:function(h){function s(t,i,n){this.shortMessage=i||"",this.longMessage=n||"",this.rawError=t||"",this.message="gl-shader: "+(i||t||"")+(n?`
`+n:""),this.stack=new Error().stack}s.prototype=new Error,s.prototype.name="GLError",s.prototype.constructor=s,h.exports=s},4280:function(h,s,t){"use strict";h.exports=function(d,c,x,g){for(var p={},v=0,m=x.length;v<m;++v){var y=x[v],_=y.name,f=y.type,S=y.locations;switch(f){case"bool":case"int":case"float":l(d,c,S[0],g,1,p,_);break;default:if(f.indexOf("vec")>=0){if((w=f.charCodeAt(f.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+_+": "+f);l(d,c,S[0],g,w,p,_)}else{if(!(f.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+_+": "+f);var w;if((w=f.charCodeAt(f.length-1)-48)<2||w>4)throw new i("","Invalid data type for attribute "+_+": "+f);u(d,c,S,g,w,p,_)}}}return p};var i=t(9068);function n(d,c,x,g,p,v){this._gl=d,this._wrapper=c,this._index=x,this._locations=g,this._dimension=p,this._constFunc=v}var r=n.prototype;r.pointer=function(d,c,x,g){var p=this,v=p._gl,m=p._locations[p._index];v.vertexAttribPointer(m,p._dimension,d||v.FLOAT,!!c,x||0,g||0),v.enableVertexAttribArray(m)},r.set=function(d,c,x,g){return this._constFunc(this._locations[this._index],d,c,x,g)},Object.defineProperty(r,"location",{get:function(){return this._locations[this._index]},set:function(d){return d!==this._locations[this._index]&&(this._locations[this._index]=0|d,this._wrapper.program=null),0|d}});var a=[function(d,c,x){return x.length===void 0?d.vertexAttrib1f(c,x):d.vertexAttrib1fv(c,x)},function(d,c,x,g){return x.length===void 0?d.vertexAttrib2f(c,x,g):d.vertexAttrib2fv(c,x)},function(d,c,x,g,p){return x.length===void 0?d.vertexAttrib3f(c,x,g,p):d.vertexAttrib3fv(c,x)},function(d,c,x,g,p,v){return x.length===void 0?d.vertexAttrib4f(c,x,g,p,v):d.vertexAttrib4fv(c,x)}];function l(d,c,x,g,p,v,m){var y=a[p],_=new n(d,c,x,g,p,y);Object.defineProperty(v,m,{set:function(f){return d.disableVertexAttribArray(g[x]),y(d,g[x],f),f},get:function(){return _},enumerable:!0})}function u(d,c,x,g,p,v,m){for(var y=new Array(p),_=new Array(p),f=0;f<p;++f)l(d,c,x[f],g,p,y,f),_[f]=y[f];Object.defineProperty(y,"location",{set:function(E){if(Array.isArray(E))for(var P=0;P<p;++P)_[P].location=E[P];else for(P=0;P<p;++P)_[P].location=E+P;return E},get:function(){for(var E=new Array(p),P=0;P<p;++P)E[P]=g[x[P]];return E},enumerable:!0}),y.pointer=function(E,P,C,O){E=E||d.FLOAT,P=!!P,C=C||p*p,O=O||0;for(var R=0;R<p;++R){var j=g[x[R]];d.vertexAttribPointer(j,p,E,P,C,O+R*p),d.enableVertexAttribArray(j)}};var S=new Array(p),w=d["vertexAttrib"+p+"fv"];Object.defineProperty(v,m,{set:function(E){for(var P=0;P<p;++P){var C=g[x[P]];if(d.disableVertexAttribArray(C),Array.isArray(E[0]))w.call(d,C,E[P]);else{for(var O=0;O<p;++O)S[O]=E[p*P+O];w.call(d,C,S)}}return E},get:function(){return y},enumerable:!0})}},9016:function(h,s,t){"use strict";var i=t(3984),n=t(9068);function r(l){return function(){return l}}function a(l,u){for(var d=new Array(l),c=0;c<l;++c)d[c]=u;return d}h.exports=function(l,u,d,c){function x(y){return function(_){for(var f=g("",y),S=0;S<f.length;++S){var w=f[S],E=w[0],P=w[1];if(c[P]){var C=_;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var O=E;if(E.indexOf(".")===0&&(O=E.slice(1)),O.indexOf("]")===O.length-1){var R=O.indexOf("["),j=O.slice(0,R),D=O.slice(R+1,O.length-1);C=j?_[j][D]:_[D]}else C=_[O]}var N,W=d[P].type;switch(W){case"bool":case"int":case"sampler2D":case"samplerCube":l.uniform1i(c[P],C);break;case"float":l.uniform1f(c[P],C);break;default:var F=W.indexOf("vec");if(!(0<=F&&F<=1&&W.length===4+F)){if(W.indexOf("mat")===0&&W.length===4){if((N=W.charCodeAt(W.length-1)-48)<2||N>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+W);l["uniformMatrix"+N+"fv"](c[P],!1,C);break}throw new n("","Unknown uniform data type for "+name+": "+W)}if((N=W.charCodeAt(W.length-1)-48)<2||N>4)throw new n("","Invalid data type");switch(W.charAt(0)){case"b":case"i":l["uniform"+N+"iv"](c[P],C);break;case"v":l["uniform"+N+"fv"](c[P],C);break;default:throw new n("","Unrecognized data type for vector "+name+": "+W)}}}}}}function g(y,_){if(typeof _!="object")return[[y,_]];var f=[];for(var S in _){var w=_[S],E=y;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,typeof w=="object"?f.push.apply(f,g(E,w)):f.push([E,w])}return f}function p(y,_,f){if(typeof f=="object"){var S=v(f);Object.defineProperty(y,_,{get:r(S),set:x(f),enumerable:!0,configurable:!1})}else c[f]?Object.defineProperty(y,_,{get:(w=f,function(E,P,C){return E.getUniform(P.program,C[w])}),set:x(f),enumerable:!0,configurable:!1}):y[_]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var P=E.indexOf("vec");if(0<=P&&P<=1&&E.length===4+P){if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new n("","Invalid data type");return E.charAt(0)==="b"?a(C,!1):a(C,0)}if(E.indexOf("mat")===0&&E.length===4){var C;if((C=E.charCodeAt(E.length-1)-48)<2||C>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+E);return a(C*C,0)}throw new n("","Unknown uniform data type for "+name+": "+E)}}(d[f].type);var w}function v(y){var _;if(Array.isArray(y)){_=new Array(y.length);for(var f=0;f<y.length;++f)p(_,f,y[f])}else for(var S in _={},y)p(_,S,y[S]);return _}var m=i(d,!0);return{get:r(v(m)),set:x(m),enumerable:!0,configurable:!0}}},3984:function(h){"use strict";h.exports=function(s,t){for(var i={},n=0;n<s.length;++n)for(var r=s[n].name.split("."),a=i,l=0;l<r.length;++l){var u=r[l].split("[");if(u.length>1){u[0]in a||(a[u[0]]=[]),a=a[u[0]];for(var d=1;d<u.length;++d){var c=parseInt(u[d]);d<u.length-1||l<r.length-1?(c in a||(d<u.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=t?n:s[n].type}}else l<r.length-1?(u[0]in a||(a[u[0]]={}),a=a[u[0]]):a[u[0]]=t?n:s[n].type}return i}},2631:function(h,s){"use strict";s.uniforms=function(r,a){for(var l=r.getProgramParameter(a,r.ACTIVE_UNIFORMS),u=[],d=0;d<l;++d){var c=r.getActiveUniform(a,d);if(c){var x=n(r,c.type);if(c.size>1)for(var g=0;g<c.size;++g)u.push({name:c.name.replace("[0]","["+g+"]"),type:x});else u.push({name:c.name,type:x})}}return u},s.attributes=function(r,a){for(var l=r.getProgramParameter(a,r.ACTIVE_ATTRIBUTES),u=[],d=0;d<l;++d){var c=r.getActiveAttrib(a,d);c&&u.push({name:c.name,type:n(r,c.type)})}return u};var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function n(r,a){if(!i){var l=Object.keys(t);i={};for(var u=0;u<l.length;++u){var d=l[u];i[r[d]]=t[d]}}return i[a]}},1628:function(h,s,t){"use strict";s.shader=function(x,g,p){return c(x).getShaderReference(g,p)},s.program=function(x,g,p,v,m){return c(x).getProgram(g,p,v,m)};var i=t(9068),n=t(3530),r=new(typeof WeakMap=="undefined"?t(4037):WeakMap),a=0;function l(x,g,p,v,m,y,_){this.id=x,this.src=g,this.type=p,this.shader=v,this.count=y,this.programs=[],this.cache=_}function u(x){this.gl=x,this.shaders=[{},{}],this.programs={}}l.prototype.dispose=function(){if(--this.count==0){for(var x=this.cache,g=x.gl,p=this.programs,v=0,m=p.length;v<m;++v){var y=x.programs[p[v]];y&&(delete x.programs[v],g.deleteProgram(y))}g.deleteShader(this.shader),delete x.shaders[this.type===g.FRAGMENT_SHADER|0][this.src]}};var d=u.prototype;function c(x){var g=r.get(x);return g||(g=new u(x),r.set(x,g)),g}d.getShaderReference=function(x,g){var p=this.gl,v=this.shaders[x===p.FRAGMENT_SHADER|0],m=v[g];if(m&&p.isShader(m.shader))m.count+=1;else{var y=function(_,f,S){var w=_.createShader(f);if(_.shaderSource(w,S),_.compileShader(w),!_.getShaderParameter(w,_.COMPILE_STATUS)){var E=_.getShaderInfoLog(w);try{var P=n(E,S,f)}catch(C){throw console.warn("Failed to format compiler error: "+C),new i(E,`Error compiling shader:
`+E)}throw new i(E,P.short,P.long)}return w}(p,x,g);m=v[g]=new l(a++,g,x,y,[],1,this)}return m},d.getProgram=function(x,g,p,v){var m=[x.id,g.id,p.join(":"),v.join(":")].join("@"),y=this.programs[m];return y&&this.gl.isProgram(y)||(this.programs[m]=y=function(_,f,S,w,E){var P=_.createProgram();_.attachShader(P,f),_.attachShader(P,S);for(var C=0;C<w.length;++C)_.bindAttribLocation(P,E[C],w[C]);if(_.linkProgram(P),!_.getProgramParameter(P,_.LINK_STATUS)){var O=_.getProgramInfoLog(P);throw new i(O,"Error linking program: "+O)}return P}(this.gl,x.shader,g.shader,p,v),x.programs.push(m),g.programs.push(m)),y}},3050:function(h){"use strict";function s(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}h.exports=function(i,n){var r=new s(i);return r.update(n),i.addOverlay(r),r};var t=s.prototype;t.update=function(i){i=i||{},this.enable=(i.enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},t.draw=function(){var i=this.enable,n=this.width,r=this.color,a=this.center,l=this.plot,u=l.line,d=l.dataBox,c=l.viewBox;if(u.bind(),d[0]<=a[0]&&a[0]<=d[2]&&d[1]<=a[1]&&a[1]<=d[3]){var x=c[0]+(a[0]-d[0])/(d[2]-d[0])*(c[2]-c[0]),g=c[1]+(a[1]-d[1])/(d[3]-d[1])*(c[3]-c[1]);i[0]&&u.drawLine(x,g,c[0],g,n[0],r[0]),i[1]&&u.drawLine(x,g,x,c[1],n[1],r[1]),i[2]&&u.drawLine(x,g,c[2],g,n[2],r[2]),i[3]&&u.drawLine(x,g,x,c[3],n[3],r[3])}},t.dispose=function(){this.plot.removeOverlay(this)}},3540:function(h,s,t){"use strict";var i=t(6832),n=t(5158),r=i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),a=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);h.exports=function(l){return n(l,r,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(h,s,t){"use strict";var i=t(5827),n=t(2944),r=t(3540);h.exports=function(g,p){var v=[];function m(w,E,P,C,O,R){var j=[w,E,P,0,0,0,1];j[C+3]=1,j[C]=O,v.push.apply(v,j),j[6]=-1,v.push.apply(v,j),j[C]=R,v.push.apply(v,j),v.push.apply(v,j),j[6]=1,v.push.apply(v,j),j[C]=O,v.push.apply(v,j)}m(0,0,0,0,0,1),m(0,0,0,1,0,1),m(0,0,0,2,0,1),m(1,0,0,1,-1,1),m(1,0,0,2,-1,1),m(0,1,0,0,-1,1),m(0,1,0,2,-1,1),m(0,0,1,0,-1,1),m(0,0,1,1,-1,1);var y=i(g,v),_=n(g,[{type:g.FLOAT,buffer:y,size:3,offset:0,stride:28},{type:g.FLOAT,buffer:y,size:3,offset:12,stride:28},{type:g.FLOAT,buffer:y,size:1,offset:24,stride:28}]),f=r(g);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.weight.location=2;var S=new l(g,y,_,f);return S.update(p),S};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function l(g,p,v,m){this.gl=g,this.buffer=p,this.vao=v,this.shader=m,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=l.prototype,d=[0,0,0],c=[0,0,0],x=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(g){},u.draw=function(g){var p=this.gl,v=this.vao,m=this.shader;v.bind(),m.bind();var y,_=g.model||a,f=g.view||a,S=g.projection||a;this.axes&&(y=this.axes.lastCubeProps.axis);for(var w=d,E=c,P=0;P<3;++P)y&&y[P]<0?(w[P]=this.bounds[0][P],E[P]=this.bounds[1][P]):(w[P]=this.bounds[1][P],E[P]=this.bounds[0][P]);for(x[0]=p.drawingBufferWidth,x[1]=p.drawingBufferHeight,m.uniforms.model=_,m.uniforms.view=f,m.uniforms.projection=S,m.uniforms.coordinates=[this.position,w,E],m.uniforms.colors=this.colors,m.uniforms.screenShape=x,P=0;P<3;++P)m.uniforms.lineWidth=this.lineWidth[P]*this.pixelRatio,this.enabled[P]&&(v.draw(p.TRIANGLES,6,6*P),this.drawSides[P]&&v.draw(p.TRIANGLES,12,18+12*P));v.unbind()},u.update=function(g){g&&("bounds"in g&&(this.bounds=g.bounds),"position"in g&&(this.position=g.position),"lineWidth"in g&&(this.lineWidth=g.lineWidth),"colors"in g&&(this.colors=g.colors),"enabled"in g&&(this.enabled=g.enabled),"drawSides"in g&&(this.drawSides=g.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(h,s,t){var i=t(6832),n=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),r=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),a=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);s.meshShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},s.pickShader={vertex:a,fragment:l,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(h,s,t){"use strict";var i=t(2858),n=t(4020),r=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(x,g){var p,v=x.length;for(p=0;p<v;p++){var m=x[p];if(m===g)return p;if(m>g)return p-1}return p},l=function(x,g,p){return x<g?g:x>p?p:x},u=function(x){var g=1/0;x.sort(function(y,_){return y-_});for(var p=x.length,v=1;v<p;v++){var m=Math.abs(x[v]-x[v-1]);m<g&&(g=m)}return g};h.exports=function(x,g){var p=x.startingPositions,v=x.maxLength||1e3,m=x.tubeSize||1,y=x.absoluteTubeSize,_=x.gridFill||"+x+y+z",f={};_.indexOf("-x")!==-1&&(f.reversedX=!0),_.indexOf("-y")!==-1&&(f.reversedY=!0),_.indexOf("-z")!==-1&&(f.reversedZ=!0),f.filled=r.indexOf(_.replace(/-/g,"").replace(/\+/g,""));var S=x.getVelocity||function(ve){return function(pe,_e,Te){var le=_e.vectors,ae=_e.meshgrid,he=pe[0],Se=pe[1],ke=pe[2],Me=ae[0].length,Ee=ae[1].length,De=ae[2].length,fe=a(ae[0],he),xe=a(ae[1],Se),we=a(ae[2],ke),Oe=fe+1,ze=xe+1,Pe=we+1;if(fe=l(fe,0,Me-1),Oe=l(Oe,0,Me-1),xe=l(xe,0,Ee-1),ze=l(ze,0,Ee-1),we=l(we,0,De-1),Pe=l(Pe,0,De-1),fe<0||xe<0||we<0||Oe>Me-1||ze>Ee-1||Pe>De-1)return i.create();var Ue,Ve,Ze,it,tt,dt,yt=ae[0][fe],vt=ae[0][Oe],et=ae[1][xe],Qe=ae[1][ze],wt=ae[2][we],It=(he-yt)/(vt-yt),Dt=(Se-et)/(Qe-et),Ct=(ke-wt)/(ae[2][Pe]-wt);switch(isFinite(It)||(It=.5),isFinite(Dt)||(Dt=.5),isFinite(Ct)||(Ct=.5),Te.reversedX&&(fe=Me-1-fe,Oe=Me-1-Oe),Te.reversedY&&(xe=Ee-1-xe,ze=Ee-1-ze),Te.reversedZ&&(we=De-1-we,Pe=De-1-Pe),Te.filled){case 5:tt=we,dt=Pe,Ze=xe*De,it=ze*De,Ue=fe*De*Ee,Ve=Oe*De*Ee;break;case 4:tt=we,dt=Pe,Ue=fe*De,Ve=Oe*De,Ze=xe*De*Me,it=ze*De*Me;break;case 3:Ze=xe,it=ze,tt=we*Ee,dt=Pe*Ee,Ue=fe*Ee*De,Ve=Oe*Ee*De;break;case 2:Ze=xe,it=ze,Ue=fe*Ee,Ve=Oe*Ee,tt=we*Ee*Me,dt=Pe*Ee*Me;break;case 1:Ue=fe,Ve=Oe,tt=we*Me,dt=Pe*Me,Ze=xe*Me*De,it=ze*Me*De;break;default:Ue=fe,Ve=Oe,Ze=xe*Me,it=ze*Me,tt=we*Me*Ee,dt=Pe*Me*Ee}var He=le[Ue+Ze+tt],We=le[Ue+Ze+dt],Be=le[Ue+it+tt],Ge=le[Ue+it+dt],at=le[Ve+Ze+tt],nt=le[Ve+Ze+dt],Re=le[Ve+it+tt],Fe=le[Ve+it+dt],rt=i.create(),Ye=i.create(),ct=i.create(),pt=i.create();i.lerp(rt,He,at,It),i.lerp(Ye,We,nt,It),i.lerp(ct,Be,Re,It),i.lerp(pt,Ge,Fe,It);var gt=i.create(),ut=i.create();i.lerp(gt,rt,ct,Dt),i.lerp(ut,Ye,pt,Dt);var Mt=i.create();return i.lerp(Mt,gt,ut,Ct),Mt}(ve,x,f)},w=x.getDivergence||function(ve,pe){var _e=i.create(),Te=1e-4;i.add(_e,ve,[Te,0,0]);var le=S(_e);i.subtract(le,le,pe),i.scale(le,le,1/Te),i.add(_e,ve,[0,Te,0]);var ae=S(_e);i.subtract(ae,ae,pe),i.scale(ae,ae,1/Te),i.add(_e,ve,[0,0,Te]);var he=S(_e);return i.subtract(he,he,pe),i.scale(he,he,1/Te),i.add(_e,le,ae),i.add(_e,_e,he),_e},E=[],P=g[0][0],C=g[0][1],O=g[0][2],R=g[1][0],j=g[1][1],D=g[1][2],N=function(ve){var pe=ve[0],_e=ve[1],Te=ve[2];return!(pe<P||pe>R||_e<C||_e>j||Te<O||Te>D)},W=10*i.distance(g[0],g[1])/v,F=W*W,U=1,V=0,te=p.length;te>1&&(U=function(ve){for(var pe=[],_e=[],Te=[],le={},ae={},he={},Se=ve.length,ke=0;ke<Se;ke++){var Me=ve[ke],Ee=Me[0],De=Me[1],fe=Me[2];le[Ee]||(pe.push(Ee),le[Ee]=!0),ae[De]||(_e.push(De),ae[De]=!0),he[fe]||(Te.push(fe),he[fe]=!0)}var xe=u(pe),we=u(_e),Oe=u(Te),ze=Math.min(xe,we,Oe);return isFinite(ze)?ze:1}(p));for(var J=0;J<te;J++){var K=i.create();i.copy(K,p[J]);var X=[K],Z=[],$=S(K),re=K;Z.push($);var oe=[],ie=w(K,$),ue=i.length(ie);isFinite(ue)&&ue>V&&(V=ue),oe.push(ue),E.push({points:X,velocities:Z,divergences:oe});for(var me=0;me<100*v&&X.length<v&&N(K);){me++;var be=i.clone($),ge=i.squaredLength(be);if(ge===0)break;ge>F&&i.scale(be,be,W/Math.sqrt(ge)),i.add(be,be,K),$=S(be),i.squaredDistance(re,be)-F>-1e-4*F&&(X.push(be),re=be,Z.push($),ie=w(be,$),ue=i.length(ie),isFinite(ue)&&ue>V&&(V=ue),oe.push(ue)),K=be}}var de=function(ve,pe,_e,Te){for(var le=0,ae=0;ae<ve.length;ae++)for(var he=ve[ae].velocities,Se=0;Se<he.length;Se++)le=Math.max(le,i.length(he[Se]));var ke=ve.map(function(Ue){return function(Ve,Ze,it,tt){for(var dt=Ve.points,yt=Ve.velocities,vt=Ve.divergences,et=[],Qe=[],wt=[],It=[],Dt=[],Ct=[],He=0,We=0,Be=n.create(),Ge=n.create(),at=0;at<dt.length;at++){var nt=dt[at],Re=yt[at],Fe=vt[at];Ze===0&&(Fe=.05*it),We=i.length(Re)/tt,Be=n.create(),i.copy(Be,Re),Be[3]=Fe;for(var rt=0;rt<8;rt++)Dt[rt]=[nt[0],nt[1],nt[2],rt];if(It.length>0)for(rt=0;rt<8;rt++){var Ye=(rt+1)%8;et.push(It[rt],Dt[rt],Dt[Ye],Dt[Ye],It[Ye],It[rt]),wt.push(Ge,Be,Be,Be,Ge,Ge),Ct.push(He,We,We,We,He,He);var ct=et.length;Qe.push([ct-6,ct-5,ct-4],[ct-3,ct-2,ct-1])}var pt=It;It=Dt,Dt=pt;var gt=Ge;Ge=Be,Be=gt;var ut=He;He=We,We=ut}return{positions:et,cells:Qe,vectors:wt,vertexIntensity:Ct}}(Ue,_e,Te,le)}),Me=[],Ee=[],De=[],fe=[];for(ae=0;ae<ke.length;ae++){var xe=ke[ae],we=Me.length;for(Me=Me.concat(xe.positions),De=De.concat(xe.vectors),fe=fe.concat(xe.vertexIntensity),Se=0;Se<xe.cells.length;Se++){var Oe=xe.cells[Se],ze=[];Ee.push(ze);for(var Pe=0;Pe<Oe.length;Pe++)ze.push(Oe[Pe]+we)}}return{positions:Me,cells:Ee,vectors:De,vertexIntensity:fe,colormap:pe}}(E,x.colormap,V,U);return y?de.tubeScale=y:(V===0&&(V=1),de.tubeScale=.5*m*U/V),de};var d=t(9578),c=t(1140).createMesh;h.exports.createTubeMesh=function(x,g){return c(x,g,{shaders:d,traceType:"streamtube"})}},9054:function(h,s,t){var i=t(5158),n=t(6832),r=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),a=n([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),l=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);s.createShader=function(d){var c=i(d,r,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createPickShader=function(d){var c=i(d,r,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},s.createContourShader=function(d){var c=i(d,l,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c},s.createPickContourShader=function(d){var c=i(d,l,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c}},3754:function(h,s,t){"use strict";h.exports=function(ie){var ue=ie.gl,me=f(ue),be=w(ue),ge=S(ue),de=E(ue),ve=n(ue),pe=r(ue,[{buffer:ve,size:4,stride:P,offset:0},{buffer:ve,size:3,stride:P,offset:16},{buffer:ve,size:3,stride:P,offset:28}]),_e=n(ue),Te=r(ue,[{buffer:_e,size:4,stride:20,offset:0},{buffer:_e,size:1,stride:20,offset:16}]),le=n(ue),ae=r(ue,[{buffer:le,size:2,type:ue.FLOAT}]),he=a(ue,1,D,ue.RGBA,ue.UNSIGNED_BYTE);he.minFilter=ue.LINEAR,he.magFilter=ue.LINEAR;var Se=new N(ue,[0,0],[[0,0,0],[0,0,0]],me,be,ve,pe,he,ge,de,_e,Te,le,ae,[0,0,0]),ke={levels:[[],[],[]]};for(var Me in ie)ke[Me]=ie[Me];return ke.colormap=ke.colormap||"jet",Se.update(ke),Se};var i=t(2288),n=t(5827),r=t(2944),a=t(8931),l=t(5306),u=t(9156),d=t(7498),c=t(7382),x=t(5050),g=t(4162),p=t(104),v=t(7437),m=t(5070),y=t(9144),_=t(9054),f=_.createShader,S=_.createContourShader,w=_.createPickShader,E=_.createPickContourShader,P=40,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],O=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],R=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function j(ie,ue,me,be,ge){this.position=ie,this.index=ue,this.uv=me,this.level=be,this.dataCoordinate=ge}(function(){for(var ie=0;ie<3;++ie){var ue=R[ie],me=(ie+2)%3;ue[(ie+1)%3+0]=1,ue[me+3]=1,ue[ie+6]=1}})();var D=256;function N(ie,ue,me,be,ge,de,ve,pe,_e,Te,le,ae,he,Se,ke){this.gl=ie,this.shape=ue,this.bounds=me,this.objectOffset=ke,this.intensityBounds=[],this._shader=be,this._pickShader=ge,this._coordinateBuffer=de,this._vao=ve,this._colorMap=pe,this._contourShader=_e,this._contourPickShader=Te,this._contourBuffer=le,this._contourVAO=ae,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new j([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=he,this._dynamicVAO=Se,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(l.mallocFloat(1024),[0,0]),x(l.mallocFloat(1024),[0,0]),x(l.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var W=N.prototype;W.genColormap=function(ie,ue){var me=!1,be=c([u({colormap:ie,nshades:D,format:"rgba"}).map(function(ge,de){var ve=ue?function(pe,_e){if(!_e||!_e.length)return 1;for(var Te=0;Te<_e.length;++Te){if(_e.length<2)return 1;if(_e[Te][0]===pe)return _e[Te][1];if(_e[Te][0]>pe&&Te>0){var le=(_e[Te][0]-pe)/(_e[Te][0]-_e[Te-1][0]);return _e[Te][1]*(1-le)+le*_e[Te-1][1]}}return 1}(de/255,ue):ge[3];return ve<1&&(me=!0),[ge[0],ge[1],ge[2],255*ve]})]);return d.divseq(be,255),this.hasAlphaScale=me,be},W.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},W.isOpaque=function(){return!this.isTransparent()},W.pickSlots=1,W.setPickBase=function(ie){this.pickId=ie};var F=[0,0,0],U={showSurface:!1,showContour:!1,projections:[C.slice(),C.slice(),C.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function V(ie,ue){var me,be,ge,de=ue.axes&&ue.axes.lastCubeProps.axis||F,ve=ue.showSurface,pe=ue.showContour;for(me=0;me<3;++me)for(ve=ve||ue.surfaceProject[me],be=0;be<3;++be)pe=pe||ue.contourProject[me][be];for(me=0;me<3;++me){var _e=U.projections[me];for(be=0;be<16;++be)_e[be]=0;for(be=0;be<4;++be)_e[5*be]=1;_e[5*me]=0,_e[12+me]=ue.axesBounds[+(de[me]>0)][me],p(_e,ie.model,_e);var Te=U.clipBounds[me];for(ge=0;ge<2;++ge)for(be=0;be<3;++be)Te[ge][be]=ie.clipBounds[ge][be];Te[0][me]=-1e8,Te[1][me]=1e8}return U.showSurface=ve,U.showContour=pe,U}var te={model:C,view:C,projection:C,inverseModel:C.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},J=C.slice(),K=[1,0,0,0,1,0,0,0,1];function X(ie,ue){ie=ie||{};var me=this.gl;me.disable(me.CULL_FACE),this._colorMap.bind(0);var be=te;be.model=ie.model||C,be.view=ie.view||C,be.projection=ie.projection||C,be.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],be.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],be.objectOffset=this.objectOffset,be.contourColor=this.contourColor[0],be.inverseModel=v(be.inverseModel,be.model);for(var ge=0;ge<2;++ge)for(var de=be.clipBounds[ge],ve=0;ve<3;++ve)de[ve]=Math.min(Math.max(this.clipBounds[ge][ve],-1e8),1e8);be.kambient=this.ambientLight,be.kdiffuse=this.diffuseLight,be.kspecular=this.specularLight,be.roughness=this.roughness,be.fresnel=this.fresnel,be.opacity=this.opacity,be.height=0,be.permutation=K,be.vertexColor=this.vertexColor;var pe=J;for(p(pe,be.view,be.model),p(pe,be.projection,pe),v(pe,pe),ge=0;ge<3;++ge)be.eyePosition[ge]=pe[12+ge]/pe[15];var _e=pe[15];for(ge=0;ge<3;++ge)_e+=this.lightPosition[ge]*pe[4*ge+3];for(ge=0;ge<3;++ge){var Te=pe[12+ge];for(ve=0;ve<3;++ve)Te+=pe[4*ve+ge]*this.lightPosition[ve];be.lightPosition[ge]=Te/_e}var le=V(be,this);if(le.showSurface){for(this._shader.bind(),this._shader.uniforms=be,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(me.TRIANGLES,this._vertexCount),ge=0;ge<3;++ge)this.surfaceProject[ge]&&this.vertexCount&&(this._shader.uniforms.model=le.projections[ge],this._shader.uniforms.clipBounds=le.clipBounds[ge],this._vao.draw(me.TRIANGLES,this._vertexCount));this._vao.unbind()}if(le.showContour){var ae=this._contourShader;be.kambient=1,be.kdiffuse=0,be.kspecular=0,be.opacity=1,ae.bind(),ae.uniforms=be;var he=this._contourVAO;for(he.bind(),ge=0;ge<3;++ge)for(ae.uniforms.permutation=R[ge],me.lineWidth(this.contourWidth[ge]*this.pixelRatio),ve=0;ve<this.contourLevels[ge].length;++ve)ve===this.highlightLevel[ge]?(ae.uniforms.contourColor=this.highlightColor[ge],ae.uniforms.contourTint=this.highlightTint[ge]):ve!==0&&ve-1!==this.highlightLevel[ge]||(ae.uniforms.contourColor=this.contourColor[ge],ae.uniforms.contourTint=this.contourTint[ge]),this._contourCounts[ge][ve]&&(ae.uniforms.height=this.contourLevels[ge][ve],he.draw(me.LINES,this._contourCounts[ge][ve],this._contourOffsets[ge][ve]));for(ge=0;ge<3;++ge)for(ae.uniforms.model=le.projections[ge],ae.uniforms.clipBounds=le.clipBounds[ge],ve=0;ve<3;++ve)if(this.contourProject[ge][ve]){ae.uniforms.permutation=R[ve],me.lineWidth(this.contourWidth[ve]*this.pixelRatio);for(var Se=0;Se<this.contourLevels[ve].length;++Se)Se===this.highlightLevel[ve]?(ae.uniforms.contourColor=this.highlightColor[ve],ae.uniforms.contourTint=this.highlightTint[ve]):Se!==0&&Se-1!==this.highlightLevel[ve]||(ae.uniforms.contourColor=this.contourColor[ve],ae.uniforms.contourTint=this.contourTint[ve]),this._contourCounts[ve][Se]&&(ae.uniforms.height=this.contourLevels[ve][Se],he.draw(me.LINES,this._contourCounts[ve][Se],this._contourOffsets[ve][Se]))}for(he.unbind(),(he=this._dynamicVAO).bind(),ge=0;ge<3;++ge)if(this._dynamicCounts[ge]!==0)for(ae.uniforms.model=be.model,ae.uniforms.clipBounds=be.clipBounds,ae.uniforms.permutation=R[ge],me.lineWidth(this.dynamicWidth[ge]*this.pixelRatio),ae.uniforms.contourColor=this.dynamicColor[ge],ae.uniforms.contourTint=this.dynamicTint[ge],ae.uniforms.height=this.dynamicLevel[ge],he.draw(me.LINES,this._dynamicCounts[ge],this._dynamicOffsets[ge]),ve=0;ve<3;++ve)this.contourProject[ve][ge]&&(ae.uniforms.model=le.projections[ve],ae.uniforms.clipBounds=le.clipBounds[ve],he.draw(me.LINES,this._dynamicCounts[ge],this._dynamicOffsets[ge]));he.unbind()}}W.draw=function(ie){return X.call(this,ie,!1)},W.drawTransparent=function(ie){return X.call(this,ie,!0)};var Z={model:C,view:C,projection:C,inverseModel:C,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function $(ie,ue){return Array.isArray(ie)?[ue(ie[0]),ue(ie[1]),ue(ie[2])]:[ue(ie),ue(ie),ue(ie)]}function re(ie){return Array.isArray(ie)?ie.length===3?[ie[0],ie[1],ie[2],1]:[ie[0],ie[1],ie[2],ie[3]]:[0,0,0,1]}function oe(ie){if(Array.isArray(ie)){if(Array.isArray(ie))return[re(ie[0]),re(ie[1]),re(ie[2])];var ue=re(ie);return[ue.slice(),ue.slice(),ue.slice()]}}W.drawPick=function(ie){ie=ie||{};var ue=this.gl;ue.disable(ue.CULL_FACE);var me=Z;me.model=ie.model||C,me.view=ie.view||C,me.projection=ie.projection||C,me.shape=this._field[2].shape,me.pickId=this.pickId/255,me.lowerBound=this.bounds[0],me.upperBound=this.bounds[1],me.objectOffset=this.objectOffset,me.permutation=K;for(var be=0;be<2;++be)for(var ge=me.clipBounds[be],de=0;de<3;++de)ge[de]=Math.min(Math.max(this.clipBounds[be][de],-1e8),1e8);var ve=V(me,this);if(ve.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=me,this._vao.bind(),this._vao.draw(ue.TRIANGLES,this._vertexCount),be=0;be<3;++be)this.surfaceProject[be]&&(this._pickShader.uniforms.model=ve.projections[be],this._pickShader.uniforms.clipBounds=ve.clipBounds[be],this._vao.draw(ue.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ve.showContour){var pe=this._contourPickShader;pe.bind(),pe.uniforms=me;var _e=this._contourVAO;for(_e.bind(),de=0;de<3;++de)for(ue.lineWidth(this.contourWidth[de]*this.pixelRatio),pe.uniforms.permutation=R[de],be=0;be<this.contourLevels[de].length;++be)this._contourCounts[de][be]&&(pe.uniforms.height=this.contourLevels[de][be],_e.draw(ue.LINES,this._contourCounts[de][be],this._contourOffsets[de][be]));for(be=0;be<3;++be)for(pe.uniforms.model=ve.projections[be],pe.uniforms.clipBounds=ve.clipBounds[be],de=0;de<3;++de)if(this.contourProject[be][de]){pe.uniforms.permutation=R[de],ue.lineWidth(this.contourWidth[de]*this.pixelRatio);for(var Te=0;Te<this.contourLevels[de].length;++Te)this._contourCounts[de][Te]&&(pe.uniforms.height=this.contourLevels[de][Te],_e.draw(ue.LINES,this._contourCounts[de][Te],this._contourOffsets[de][Te]))}_e.unbind()}},W.pick=function(ie){if(!ie||ie.id!==this.pickId)return null;var ue=this._field[2].shape,me=this._pickResult,be=ue[0]*(ie.value[0]+(ie.value[2]>>4)/16)/255,ge=Math.floor(be),de=be-ge,ve=ue[1]*(ie.value[1]+(15&ie.value[2])/16)/255,pe=Math.floor(ve),_e=ve-pe;ge+=1,pe+=1;var Te=me.position;Te[0]=Te[1]=Te[2]=0;for(var le=0;le<2;++le)for(var ae=le?de:1-de,he=0;he<2;++he)for(var Se=ge+le,ke=pe+he,Me=ae*(he?_e:1-_e),Ee=0;Ee<3;++Ee)Te[Ee]+=this._field[Ee].get(Se,ke)*Me;for(var De=this._pickResult.level,fe=0;fe<3;++fe)if(De[fe]=m.le(this.contourLevels[fe],Te[fe]),De[fe]<0)this.contourLevels[fe].length>0&&(De[fe]=0);else if(De[fe]<this.contourLevels[fe].length-1){var xe=this.contourLevels[fe][De[fe]],we=this.contourLevels[fe][De[fe]+1];Math.abs(xe-Te[fe])>Math.abs(we-Te[fe])&&(De[fe]+=1)}for(me.index[0]=de<.5?ge:ge+1,me.index[1]=_e<.5?pe:pe+1,me.uv[0]=be/ue[0],me.uv[1]=ve/ue[1],Ee=0;Ee<3;++Ee)me.dataCoordinate[Ee]=this._field[Ee].get(me.index[0],me.index[1]);return me},W.padField=function(ie,ue){var me=ue.shape.slice(),be=ie.shape.slice();d.assign(ie.lo(1,1).hi(me[0],me[1]),ue),d.assign(ie.lo(1).hi(me[0],1),ue.hi(me[0],1)),d.assign(ie.lo(1,be[1]-1).hi(me[0],1),ue.lo(0,me[1]-1).hi(me[0],1)),d.assign(ie.lo(0,1).hi(1,me[1]),ue.hi(1)),d.assign(ie.lo(be[0]-1,1).hi(1,me[1]),ue.lo(me[0]-1)),ie.set(0,0,ue.get(0,0)),ie.set(0,be[1]-1,ue.get(0,me[1]-1)),ie.set(be[0]-1,0,ue.get(me[0]-1,0)),ie.set(be[0]-1,be[1]-1,ue.get(me[0]-1,me[1]-1))},W.update=function(ie){ie=ie||{},this.objectOffset=ie.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ie&&(this.contourWidth=$(ie.contourWidth,Number)),"showContour"in ie&&(this.showContour=$(ie.showContour,Boolean)),"showSurface"in ie&&(this.showSurface=!!ie.showSurface),"contourTint"in ie&&(this.contourTint=$(ie.contourTint,Boolean)),"contourColor"in ie&&(this.contourColor=oe(ie.contourColor)),"contourProject"in ie&&(this.contourProject=$(ie.contourProject,function(ln){return $(ln,Boolean)})),"surfaceProject"in ie&&(this.surfaceProject=ie.surfaceProject),"dynamicColor"in ie&&(this.dynamicColor=oe(ie.dynamicColor)),"dynamicTint"in ie&&(this.dynamicTint=$(ie.dynamicTint,Number)),"dynamicWidth"in ie&&(this.dynamicWidth=$(ie.dynamicWidth,Number)),"opacity"in ie&&(this.opacity=ie.opacity),"opacityscale"in ie&&(this.opacityscale=ie.opacityscale),"colorBounds"in ie&&(this.colorBounds=ie.colorBounds),"vertexColor"in ie&&(this.vertexColor=ie.vertexColor?1:0),"colormap"in ie&&this._colorMap.setPixels(this.genColormap(ie.colormap,this.opacityscale));var ue=ie.field||ie.coords&&ie.coords[2]||null,me=!1;if(ue||(ue=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ie||"coords"in ie){var be=(ue.shape[0]+2)*(ue.shape[1]+2);be>this._field[2].data.length&&(l.freeFloat(this._field[2].data),this._field[2].data=l.mallocFloat(i.nextPow2(be))),this._field[2]=x(this._field[2].data,[ue.shape[0]+2,ue.shape[1]+2]),this.padField(this._field[2],ue),this.shape=ue.shape.slice();for(var ge=this.shape,de=0;de<2;++de)this._field[2].size>this._field[de].data.length&&(l.freeFloat(this._field[de].data),this._field[de].data=l.mallocFloat(this._field[2].size)),this._field[de]=x(this._field[de].data,[ge[0]+2,ge[1]+2]);if(ie.coords){var ve=ie.coords;if(!Array.isArray(ve)||ve.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(de=0;de<2;++de){var pe=ve[de];for(he=0;he<2;++he)if(pe.shape[he]!==ge[he])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[de],pe)}}else if(ie.ticks){var _e=ie.ticks;if(!Array.isArray(_e)||_e.length!==2)throw new Error("gl-surface: invalid ticks");for(de=0;de<2;++de){var Te=_e[de];if((Array.isArray(Te)||Te.length)&&(Te=x(Te)),Te.shape[0]!==ge[de])throw new Error("gl-surface: invalid tick length");var le=x(Te.data,ge);le.stride[de]=Te.stride[0],le.stride[1^de]=0,this.padField(this._field[de],le)}}else{for(de=0;de<2;++de){var ae=[0,0];ae[de]=1,this._field[de]=x(this._field[de].data,[ge[0]+2,ge[1]+2],ae,0)}this._field[0].set(0,0,0);for(var he=0;he<ge[0];++he)this._field[0].set(he+1,0,he);for(this._field[0].set(ge[0]+1,0,ge[0]-1),this._field[1].set(0,0,0),he=0;he<ge[1];++he)this._field[1].set(0,he+1,he);this._field[1].set(0,ge[1]+1,ge[1]-1)}var Se=this._field,ke=x(l.mallocFloat(3*Se[2].size*2),[3,ge[0]+2,ge[1]+2,2]);for(de=0;de<3;++de)y(ke.pick(de),Se[de],"mirror");var Me=x(l.mallocFloat(3*Se[2].size),[ge[0]+2,ge[1]+2,3]);for(de=0;de<ge[0]+2;++de)for(he=0;he<ge[1]+2;++he){var Ee=ke.get(0,de,he,0),De=ke.get(0,de,he,1),fe=ke.get(1,de,he,0),xe=ke.get(1,de,he,1),we=ke.get(2,de,he,0),Oe=ke.get(2,de,he,1),ze=fe*Oe-xe*we,Pe=we*De-Oe*Ee,Ue=Ee*xe-De*fe,Ve=Math.sqrt(ze*ze+Pe*Pe+Ue*Ue);Ve<1e-8?(Ve=Math.max(Math.abs(ze),Math.abs(Pe),Math.abs(Ue)))<1e-8?(Ue=1,Pe=ze=0,Ve=1):Ve=1/Ve:Ve=1/Math.sqrt(Ve),Me.set(de,he,0,ze*Ve),Me.set(de,he,1,Pe*Ve),Me.set(de,he,2,Ue*Ve)}l.free(ke.data);var Ze=[1/0,1/0,1/0],it=[-1/0,-1/0,-1/0],tt=1/0,dt=-1/0,yt=(ge[0]-1)*(ge[1]-1)*6,vt=l.mallocFloat(i.nextPow2(10*yt)),et=0,Qe=0;for(de=0;de<ge[0]-1;++de)e:for(he=0;he<ge[1]-1;++he){for(var wt=0;wt<2;++wt)for(var It=0;It<2;++It)for(var Dt=0;Dt<3;++Dt){var Ct=this._field[Dt].get(1+de+wt,1+he+It);if(isNaN(Ct)||!isFinite(Ct))continue e}for(Dt=0;Dt<6;++Dt){var He=de+O[Dt][0],We=he+O[Dt][1],Be=this._field[0].get(He+1,We+1),Ge=this._field[1].get(He+1,We+1);Ct=this._field[2].get(He+1,We+1),ze=Me.get(He+1,We+1,0),Pe=Me.get(He+1,We+1,1),Ue=Me.get(He+1,We+1,2),ie.intensity&&(at=ie.intensity.get(He,We));var at=ie.intensity?ie.intensity.get(He,We):Ct+this.objectOffset[2];vt[et++]=He,vt[et++]=We,vt[et++]=Be,vt[et++]=Ge,vt[et++]=Ct,vt[et++]=0,vt[et++]=at,vt[et++]=ze,vt[et++]=Pe,vt[et++]=Ue,Ze[0]=Math.min(Ze[0],Be+this.objectOffset[0]),Ze[1]=Math.min(Ze[1],Ge+this.objectOffset[1]),Ze[2]=Math.min(Ze[2],Ct+this.objectOffset[2]),tt=Math.min(tt,at),it[0]=Math.max(it[0],Be+this.objectOffset[0]),it[1]=Math.max(it[1],Ge+this.objectOffset[1]),it[2]=Math.max(it[2],Ct+this.objectOffset[2]),dt=Math.max(dt,at),Qe+=1}}for(ie.intensityBounds&&(tt=+ie.intensityBounds[0],dt=+ie.intensityBounds[1]),de=6;de<et;de+=10)vt[de]=(vt[de]-tt)/(dt-tt);this._vertexCount=Qe,this._coordinateBuffer.update(vt.subarray(0,et)),l.freeFloat(vt),l.free(Me.data),this.bounds=[Ze,it],this.intensity=ie.intensity||this._field[2],this.intensityBounds[0]===tt&&this.intensityBounds[1]===dt||(me=!0),this.intensityBounds=[tt,dt]}if("levels"in ie){var nt=ie.levels;for(nt=Array.isArray(nt[0])?nt.slice():[[],[],nt],de=0;de<3;++de)nt[de]=nt[de].slice(),nt[de].sort(function(ln,nn){return ln-nn});for(de=0;de<3;++de)for(he=0;he<nt[de].length;++he)nt[de][he]-=this.objectOffset[de];e:for(de=0;de<3;++de){if(nt[de].length!==this.contourLevels[de].length){me=!0;break}for(he=0;he<nt[de].length;++he)if(nt[de][he]!==this.contourLevels[de][he]){me=!0;break e}}this.contourLevels=nt}if(me){Se=this._field,ge=this.shape;for(var Re=[],Fe=0;Fe<3;++Fe){var rt=this.contourLevels[Fe],Ye=[],ct=[],pt=[0,0,0];for(de=0;de<rt.length;++de){var gt=g(this._field[Fe],rt[de]);Ye.push(Re.length/5|0),Qe=0;e:for(he=0;he<gt.cells.length;++he){var ut=gt.cells[he];for(Dt=0;Dt<2;++Dt){var Mt=gt.positions[ut[Dt]],xt=Mt[0],mt=0|Math.floor(xt),Et=xt-mt,Lt=Mt[1],zt=0|Math.floor(Lt),Wt=Lt-zt,rn=!1;t:for(var Ut=0;Ut<3;++Ut){pt[Ut]=0;var Vt=(Fe+Ut+1)%3;for(wt=0;wt<2;++wt){var en=wt?Et:1-Et;for(He=0|Math.min(Math.max(mt+wt,0),ge[0]),It=0;It<2;++It){var Ln=It?Wt:1-Wt;if(We=0|Math.min(Math.max(zt+It,0),ge[1]),Ct=Ut<2?this._field[Vt].get(He,We):(this.intensity.get(He,We)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ct)||isNaN(Ct)){rn=!0;break t}var An=en*Ln;pt[Ut]+=An*Ct}}}if(rn){if(Dt>0){for(var hn=0;hn<5;++hn)Re.pop();Qe-=1}continue e}Re.push(pt[0],pt[1],Mt[0],Mt[1],pt[2]),Qe+=1}}ct.push(Qe)}this._contourOffsets[Fe]=Ye,this._contourCounts[Fe]=ct}var Xt=l.mallocFloat(Re.length);for(de=0;de<Re.length;++de)Xt[de]=Re[de];this._contourBuffer.update(Xt),l.freeFloat(Xt)}},W.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ie=0;ie<3;++ie)l.freeFloat(this._field[ie].data)},W.highlight=function(ie){var ue,me;if(!ie)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(ue=0;ue<3;++ue)this.enableHighlight[ue]?this.highlightLevel[ue]=ie.level[ue]:this.highlightLevel[ue]=-1;for(me=this.snapToData?ie.dataCoordinate:ie.position,ue=0;ue<3;++ue)me[ue]-=this.objectOffset[ue];if(this.enableDynamic[0]&&me[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&me[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&me[2]!==this.dynamicLevel[2]){for(var be=0,ge=this.shape,de=l.mallocFloat(12*ge[0]*ge[1]),ve=0;ve<3;++ve)if(this.enableDynamic[ve]){this.dynamicLevel[ve]=me[ve];var pe=(ve+1)%3,_e=(ve+2)%3,Te=this._field[ve],le=this._field[pe],ae=this._field[_e],he=g(Te,me[ve]),Se=he.cells,ke=he.positions;for(this._dynamicOffsets[ve]=be,ue=0;ue<Se.length;++ue)for(var Me=Se[ue],Ee=0;Ee<2;++Ee){var De=ke[Me[Ee]],fe=+De[0],xe=0|fe,we=0|Math.min(xe+1,ge[0]),Oe=fe-xe,ze=1-Oe,Pe=+De[1],Ue=0|Pe,Ve=0|Math.min(Ue+1,ge[1]),Ze=Pe-Ue,it=1-Ze,tt=ze*it,dt=ze*Ze,yt=Oe*it,vt=Oe*Ze,et=tt*le.get(xe,Ue)+dt*le.get(xe,Ve)+yt*le.get(we,Ue)+vt*le.get(we,Ve),Qe=tt*ae.get(xe,Ue)+dt*ae.get(xe,Ve)+yt*ae.get(we,Ue)+vt*ae.get(we,Ve);if(isNaN(et)||isNaN(Qe)){Ee&&(be-=1);break}de[2*be+0]=et,de[2*be+1]=Qe,be+=1}this._dynamicCounts[ve]=be-this._dynamicOffsets[ve]}else this.dynamicLevel[ve]=NaN,this._dynamicCounts[ve]=0;this._dynamicBuffer.update(de.subarray(0,2*be)),l.freeFloat(de)}}},8931:function(h,s,t){"use strict";var i=t(5050),n=t(7498),r=t(5306);h.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||function(w){a=[w.LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],l=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],u=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]}(_),typeof arguments[1]=="number")return y(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return y(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var f=arguments[1],S=d(f)?f:f.raw;if(S)return function(w,E,P,C,O,R){var j=m(w);return w.texImage2D(w.TEXTURE_2D,0,O,O,R,E),new g(w,j,P,C,O,R)}(_,S,0|f.width,0|f.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(f.shape&&f.data&&f.stride)return function(w,E){var P=E.dtype,C=E.shape.slice(),O=w.getParameter(w.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>O||C[1]<0||C[1]>O)throw new Error("gl-texture2d: Invalid texture size");var R=v(C,E.stride.slice()),j=0;P==="float32"?j=w.FLOAT:P==="float64"?(j=w.FLOAT,R=!1,P="float32"):P==="uint8"?j=w.UNSIGNED_BYTE:(j=w.UNSIGNED_BYTE,R=!1,P="uint8");var D,N,W=0;if(C.length===2)W=w.LUMINANCE,C=[C[0],C[1],1],E=i(E.data,C,[E.stride[0],E.stride[1],1],E.offset);else{if(C.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(C[2]===1)W=w.ALPHA;else if(C[2]===2)W=w.LUMINANCE_ALPHA;else if(C[2]===3)W=w.RGB;else{if(C[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");W=w.RGBA}}j!==w.FLOAT||w.getExtension("OES_texture_float")||(j=w.UNSIGNED_BYTE,R=!1);var F=E.size;if(R)D=E.offset===0&&E.data.length===F?E.data:E.data.subarray(E.offset,E.offset+F);else{var U=[C[2],C[2]*C[0],1];N=r.malloc(F,P);var V=i(N,C,U,0);P!=="float32"&&P!=="float64"||j!==w.UNSIGNED_BYTE?n.assign(V,E):c(V,E),D=N.subarray(0,F)}var te=m(w);return w.texImage2D(w.TEXTURE_2D,0,W,C[0],C[1],0,W,j,D),R||r.free(N),new g(w,te,C[0],C[1],W,j)}(_,f)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,l=null,u=null;function d(_){return typeof HTMLCanvasElement!="undefined"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement!="undefined"&&_ instanceof HTMLVideoElement||typeof ImageData!="undefined"&&_ instanceof ImageData}var c=function(_,f){n.muls(_,f,255)};function x(_,f,S){var w=_.gl,E=w.getParameter(w.MAX_TEXTURE_SIZE);if(f<0||f>E||S<0||S>E)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[f,S],_.bind(),w.texImage2D(w.TEXTURE_2D,0,_.format,f,S,0,_.format,_.type,null),_._mipLevels=[0],_}function g(_,f,S,w,E,P){this.gl=_,this.handle=f,this.format=E,this.type=P,this._shape=[S,w],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var C=this,O=[this._wrapS,this._wrapT];Object.defineProperties(O,[{get:function(){return C._wrapS},set:function(j){return C.wrapS=j}},{get:function(){return C._wrapT},set:function(j){return C.wrapT=j}}]),this._wrapVector=O;var R=[this._shape[0],this._shape[1]];Object.defineProperties(R,[{get:function(){return C._shape[0]},set:function(j){return C.width=j}},{get:function(){return C._shape[1]},set:function(j){return C.height=j}}]),this._shapeVector=R}var p=g.prototype;function v(_,f){return _.length===3?f[2]===1&&f[1]===_[0]*_[2]&&f[0]===_[2]:f[0]===1&&f[1]===_[0]}function m(_){var f=_.createTexture();return _.bindTexture(_.TEXTURE_2D,f),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),f}function y(_,f,S,w,E){var P=_.getParameter(_.MAX_TEXTURE_SIZE);if(f<0||f>P||S<0||S>P)throw new Error("gl-texture2d: Invalid texture shape");if(E===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var C=m(_);return _.texImage2D(_.TEXTURE_2D,0,w,f,S,0,w,E,null),new g(_,C,f,S,w,E)}Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var f=this.gl;if(this.type===f.FLOAT&&a.indexOf(_)>=0&&(f.getExtension("OES_texture_float_linear")||(_=f.NEAREST)),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var f=this.gl;if(this.type===f.FLOAT&&a.indexOf(_)>=0&&(f.getExtension("OES_texture_float_linear")||(_=f.NEAREST)),l.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var f=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),f!==this._anisoSamples){var S=this.gl.getExtension("EXT_texture_filter_anisotropic");S&&this.gl.texParameterf(this.gl.TEXTURE_2D,S.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var f=0;f<2;++f)if(u.indexOf(_[f])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var S=this.gl;return this.bind(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this._wrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return x(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return x(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _|=0,x(this,this._shape[0],_),_}}}),p.bind=function(_){var f=this.gl;return _!==void 0&&f.activeTexture(f.TEXTURE0+(0|_)),f.bindTexture(f.TEXTURE_2D,this.handle),_!==void 0?0|_:f.getParameter(f.ACTIVE_TEXTURE)-f.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),f=0;_>0;++f,_>>>=1)this._mipLevels.indexOf(f)<0&&this._mipLevels.push(f)},p.setPixels=function(_,f,S,w){var E=this.gl;this.bind(),Array.isArray(f)?(w=S,S=0|f[1],f=0|f[0]):(f=f||0,S=S||0),w=w||0;var P=d(_)?_:_.raw;if(P)this._mipLevels.indexOf(w)<0?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(w)):E.texSubImage2D(E.TEXTURE_2D,w,f,S,this.format,this.type,P);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||f+_.shape[1]>this._shape[1]>>>w||S+_.shape[0]>this._shape[0]>>>w||f<0||S<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(C,O,R,j,D,N,W,F){var U=F.dtype,V=F.shape.slice();if(V.length<2||V.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var te=0,J=0,K=v(V,F.stride.slice());if(U==="float32"?te=C.FLOAT:U==="float64"?(te=C.FLOAT,K=!1,U="float32"):U==="uint8"?te=C.UNSIGNED_BYTE:(te=C.UNSIGNED_BYTE,K=!1,U="uint8"),V.length===2)J=C.LUMINANCE,V=[V[0],V[1],1],F=i(F.data,V,[F.stride[0],F.stride[1],1],F.offset);else{if(V.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(V[2]===1)J=C.ALPHA;else if(V[2]===2)J=C.LUMINANCE_ALPHA;else if(V[2]===3)J=C.RGB;else{if(V[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");J=C.RGBA}V[2]}if(J!==C.LUMINANCE&&J!==C.ALPHA||D!==C.LUMINANCE&&D!==C.ALPHA||(J=D),J!==D)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var X=F.size,Z=W.indexOf(j)<0;if(Z&&W.push(j),te===N&&K)F.offset===0&&F.data.length===X?Z?C.texImage2D(C.TEXTURE_2D,j,D,V[0],V[1],0,D,N,F.data):C.texSubImage2D(C.TEXTURE_2D,j,O,R,V[0],V[1],D,N,F.data):Z?C.texImage2D(C.TEXTURE_2D,j,D,V[0],V[1],0,D,N,F.data.subarray(F.offset,F.offset+X)):C.texSubImage2D(C.TEXTURE_2D,j,O,R,V[0],V[1],D,N,F.data.subarray(F.offset,F.offset+X));else{var $;$=N===C.FLOAT?r.mallocFloat32(X):r.mallocUint8(X);var re=i($,V,[V[2],V[2]*V[0],1]);te===C.FLOAT&&N===C.UNSIGNED_BYTE?c(re,F):n.assign(re,F),Z?C.texImage2D(C.TEXTURE_2D,j,D,V[0],V[1],0,D,N,$.subarray(0,X)):C.texSubImage2D(C.TEXTURE_2D,j,O,R,V[0],V[1],D,N,$.subarray(0,X)),N===C.FLOAT?r.freeFloat32($):r.freeUint8($)}})(E,f,S,w,this.format,this.type,this._mipLevels,_)}}},3056:function(h){"use strict";h.exports=function(s,t,i){t?t.bind():s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null);var n=0|s.getParameter(s.MAX_VERTEX_ATTRIBS);if(i){if(i.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<i.length;++r){var a=i[r];if(a.buffer){var l=a.buffer,u=a.size||4,d=a.type||s.FLOAT,c=!!a.normalized,x=a.stride||0,g=a.offset||0;l.bind(),s.enableVertexAttribArray(r),s.vertexAttribPointer(r,u,d,c,x,g)}else{if(typeof a=="number")s.vertexAttrib1f(r,a);else if(a.length===1)s.vertexAttrib1f(r,a[0]);else if(a.length===2)s.vertexAttrib2f(r,a[0],a[1]);else if(a.length===3)s.vertexAttrib3f(r,a[0],a[1],a[2]);else{if(a.length!==4)throw new Error("gl-vao: Invalid vertex attribute");s.vertexAttrib4f(r,a[0],a[1],a[2],a[3])}s.disableVertexAttribArray(r)}}for(;r<n;++r)s.disableVertexAttribArray(r)}else for(s.bindBuffer(s.ARRAY_BUFFER,null),r=0;r<n;++r)s.disableVertexAttribArray(r)}},7220:function(h,s,t){"use strict";var i=t(3056);function n(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}n.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},n.prototype.update=function(r,a,l){this._elements=a,this._attributes=r,this._elementsType=l||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(r,a,l){l=l||0;var u=this.gl;this._elements?u.drawElements(r,a,this._elementsType,l):u.drawArrays(r,l,a)},h.exports=function(r){return new n(r)}},3778:function(h,s,t){"use strict";var i=t(3056);function n(a,l,u,d,c,x){this.location=a,this.dimension=l,this.a=u,this.b=d,this.c=c,this.d=x}function r(a,l,u){this.gl=a,this._ext=l,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}n.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},r.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},r.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},r.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},r.prototype.update=function(a,l,u){if(this.bind(),i(this.gl,l,a),this.unbind(),this._attribs.length=0,a)for(var d=0;d<a.length;++d){var c=a[d];typeof c=="number"?this._attribs.push(new n(d,1,c)):Array.isArray(c)&&this._attribs.push(new n(d,c.length,c[0],c[1],c[2],c[3]))}this._useElements=!!l,this._elementsType=u||this.gl.UNSIGNED_SHORT},r.prototype.draw=function(a,l,u){u=u||0;var d=this.gl;this._useElements?d.drawElements(a,l,this._elementsType,u):d.drawArrays(a,u,l)},h.exports=function(a,l){return new r(a,l,l.createVertexArrayOES())}},2944:function(h,s,t){"use strict";var i=t(3778),n=t(7220);function r(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}h.exports=function(a,l,u,d){var c,x=a.createVertexArray?new r(a):a.getExtension("OES_vertex_array_object");return(c=x?i(a,x):n(a)).update(l,u,d),c}},2598:function(h){h.exports=function(s,t,i){return s[0]=t[0]+i[0],s[1]=t[1]+i[1],s[2]=t[2]+i[2],s}},5879:function(h,s,t){h.exports=function(a,l){var u=i(a[0],a[1],a[2]),d=i(l[0],l[1],l[2]);n(u,u),n(d,d);var c=r(u,d);return c>1?0:Math.acos(c)};var i=t(5415),n=t(899),r=t(9305)},8827:function(h){h.exports=function(s,t){return s[0]=Math.ceil(t[0]),s[1]=Math.ceil(t[1]),s[2]=Math.ceil(t[2]),s}},7622:function(h){h.exports=function(s){var t=new Float32Array(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t}},8782:function(h){h.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s}},8501:function(h){h.exports=function(){var s=new Float32Array(3);return s[0]=0,s[1]=0,s[2]=0,s}},903:function(h){h.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=i[0],u=i[1],d=i[2];return s[0]=r*d-a*u,s[1]=a*l-n*d,s[2]=n*u-r*l,s}},5981:function(h,s,t){h.exports=t(8288)},8288:function(h){h.exports=function(s,t){var i=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2];return Math.sqrt(i*i+n*n+r*r)}},8629:function(h,s,t){h.exports=t(7979)},7979:function(h){h.exports=function(s,t,i){return s[0]=t[0]/i[0],s[1]=t[1]/i[1],s[2]=t[2]/i[2],s}},9305:function(h){h.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]}},154:function(h){h.exports=1e-6},4932:function(h,s,t){h.exports=function(n,r){var a=n[0],l=n[1],u=n[2],d=r[0],c=r[1],x=r[2];return Math.abs(a-d)<=i*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(l-c)<=i*Math.max(1,Math.abs(l),Math.abs(c))&&Math.abs(u-x)<=i*Math.max(1,Math.abs(u),Math.abs(x))};var i=t(154)},5777:function(h){h.exports=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]}},3306:function(h){h.exports=function(s,t){return s[0]=Math.floor(t[0]),s[1]=Math.floor(t[1]),s[2]=Math.floor(t[2]),s}},7447:function(h,s,t){h.exports=function(n,r,a,l,u,d){var c,x;for(r||(r=3),a||(a=0),x=l?Math.min(l*r+a,n.length):n.length,c=a;c<x;c+=r)i[0]=n[c],i[1]=n[c+1],i[2]=n[c+2],u(i,i,d),n[c]=i[0],n[c+1]=i[1],n[c+2]=i[2];return n};var i=t(8501)()},5415:function(h){h.exports=function(s,t,i){var n=new Float32Array(3);return n[0]=s,n[1]=t,n[2]=i,n}},2858:function(h,s,t){h.exports={EPSILON:t(154),create:t(8501),clone:t(7622),angle:t(5879),fromValues:t(5415),copy:t(8782),set:t(831),equals:t(4932),exactEquals:t(5777),add:t(2598),subtract:t(911),sub:t(8921),multiply:t(105),mul:t(5733),divide:t(7979),div:t(8629),min:t(3605),max:t(1716),floor:t(3306),ceil:t(8827),round:t(1624),scale:t(5685),scaleAndAdd:t(6722),distance:t(8288),dist:t(5981),squaredDistance:t(6403),sqrDist:t(5294),length:t(4693),len:t(1468),squaredLength:t(4337),sqrLen:t(3303),negate:t(435),inverse:t(2073),normalize:t(899),dot:t(9305),cross:t(903),lerp:t(1868),random:t(6660),transformMat4:t(3255),transformMat3:t(9908),transformQuat:t(6568),rotateX:t(392),rotateY:t(3222),rotateZ:t(3388),forEach:t(7447)}},2073:function(h){h.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s}},1468:function(h,s,t){h.exports=t(4693)},4693:function(h){h.exports=function(s){var t=s[0],i=s[1],n=s[2];return Math.sqrt(t*t+i*i+n*n)}},1868:function(h){h.exports=function(s,t,i,n){var r=t[0],a=t[1],l=t[2];return s[0]=r+n*(i[0]-r),s[1]=a+n*(i[1]-a),s[2]=l+n*(i[2]-l),s}},1716:function(h){h.exports=function(s,t,i){return s[0]=Math.max(t[0],i[0]),s[1]=Math.max(t[1],i[1]),s[2]=Math.max(t[2],i[2]),s}},3605:function(h){h.exports=function(s,t,i){return s[0]=Math.min(t[0],i[0]),s[1]=Math.min(t[1],i[1]),s[2]=Math.min(t[2],i[2]),s}},5733:function(h,s,t){h.exports=t(105)},105:function(h){h.exports=function(s,t,i){return s[0]=t[0]*i[0],s[1]=t[1]*i[1],s[2]=t[2]*i[2],s}},435:function(h){h.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s}},899:function(h){h.exports=function(s,t){var i=t[0],n=t[1],r=t[2],a=i*i+n*n+r*r;return a>0&&(a=1/Math.sqrt(a),s[0]=t[0]*a,s[1]=t[1]*a,s[2]=t[2]*a),s}},6660:function(h){h.exports=function(s,t){t=t||1;var i=2*Math.random()*Math.PI,n=2*Math.random()-1,r=Math.sqrt(1-n*n)*t;return s[0]=Math.cos(i)*r,s[1]=Math.sin(i)*r,s[2]=n*t,s}},392:function(h){h.exports=function(s,t,i,n){var r=i[1],a=i[2],l=t[1]-r,u=t[2]-a,d=Math.sin(n),c=Math.cos(n);return s[0]=t[0],s[1]=r+l*c-u*d,s[2]=a+l*d+u*c,s}},3222:function(h){h.exports=function(s,t,i,n){var r=i[0],a=i[2],l=t[0]-r,u=t[2]-a,d=Math.sin(n),c=Math.cos(n);return s[0]=r+u*d+l*c,s[1]=t[1],s[2]=a+u*c-l*d,s}},3388:function(h){h.exports=function(s,t,i,n){var r=i[0],a=i[1],l=t[0]-r,u=t[1]-a,d=Math.sin(n),c=Math.cos(n);return s[0]=r+l*c-u*d,s[1]=a+l*d+u*c,s[2]=t[2],s}},1624:function(h){h.exports=function(s,t){return s[0]=Math.round(t[0]),s[1]=Math.round(t[1]),s[2]=Math.round(t[2]),s}},5685:function(h){h.exports=function(s,t,i){return s[0]=t[0]*i,s[1]=t[1]*i,s[2]=t[2]*i,s}},6722:function(h){h.exports=function(s,t,i,n){return s[0]=t[0]+i[0]*n,s[1]=t[1]+i[1]*n,s[2]=t[2]+i[2]*n,s}},831:function(h){h.exports=function(s,t,i,n){return s[0]=t,s[1]=i,s[2]=n,s}},5294:function(h,s,t){h.exports=t(6403)},3303:function(h,s,t){h.exports=t(4337)},6403:function(h){h.exports=function(s,t){var i=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2];return i*i+n*n+r*r}},4337:function(h){h.exports=function(s){var t=s[0],i=s[1],n=s[2];return t*t+i*i+n*n}},8921:function(h,s,t){h.exports=t(911)},911:function(h){h.exports=function(s,t,i){return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],s}},9908:function(h){h.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2];return s[0]=n*i[0]+r*i[3]+a*i[6],s[1]=n*i[1]+r*i[4]+a*i[7],s[2]=n*i[2]+r*i[5]+a*i[8],s}},3255:function(h){h.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=i[3]*n+i[7]*r+i[11]*a+i[15];return l=l||1,s[0]=(i[0]*n+i[4]*r+i[8]*a+i[12])/l,s[1]=(i[1]*n+i[5]*r+i[9]*a+i[13])/l,s[2]=(i[2]*n+i[6]*r+i[10]*a+i[14])/l,s}},6568:function(h){h.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=i[0],u=i[1],d=i[2],c=i[3],x=c*n+u*a-d*r,g=c*r+d*n-l*a,p=c*a+l*r-u*n,v=-l*n-u*r-d*a;return s[0]=x*c+v*-l+g*-d-p*-u,s[1]=g*c+v*-u+p*-l-x*-d,s[2]=p*c+v*-d+x*-u-g*-l,s}},3433:function(h){h.exports=function(s,t,i){return s[0]=t[0]+i[0],s[1]=t[1]+i[1],s[2]=t[2]+i[2],s[3]=t[3]+i[3],s}},1413:function(h){h.exports=function(s){var t=new Float32Array(4);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t}},3470:function(h){h.exports=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s}},5313:function(h){h.exports=function(){var s=new Float32Array(4);return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s}},5446:function(h){h.exports=function(s,t){var i=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2],a=t[3]-s[3];return Math.sqrt(i*i+n*n+r*r+a*a)}},205:function(h){h.exports=function(s,t,i){return s[0]=t[0]/i[0],s[1]=t[1]/i[1],s[2]=t[2]/i[2],s[3]=t[3]/i[3],s}},4242:function(h){h.exports=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]}},5680:function(h){h.exports=function(s,t,i,n){var r=new Float32Array(4);return r[0]=s,r[1]=t,r[2]=i,r[3]=n,r}},4020:function(h,s,t){h.exports={create:t(5313),clone:t(1413),fromValues:t(5680),copy:t(3470),set:t(6453),add:t(3433),subtract:t(2705),multiply:t(746),divide:t(205),min:t(2170),max:t(3030),scale:t(5510),scaleAndAdd:t(4224),distance:t(5446),squaredDistance:t(1542),length:t(8177),squaredLength:t(9037),negate:t(6459),inverse:t(8057),normalize:t(381),dot:t(4242),lerp:t(8746),random:t(3770),transformMat4:t(6342),transformQuat:t(5022)}},8057:function(h){h.exports=function(s,t){return s[0]=1/t[0],s[1]=1/t[1],s[2]=1/t[2],s[3]=1/t[3],s}},8177:function(h){h.exports=function(s){var t=s[0],i=s[1],n=s[2],r=s[3];return Math.sqrt(t*t+i*i+n*n+r*r)}},8746:function(h){h.exports=function(s,t,i,n){var r=t[0],a=t[1],l=t[2],u=t[3];return s[0]=r+n*(i[0]-r),s[1]=a+n*(i[1]-a),s[2]=l+n*(i[2]-l),s[3]=u+n*(i[3]-u),s}},3030:function(h){h.exports=function(s,t,i){return s[0]=Math.max(t[0],i[0]),s[1]=Math.max(t[1],i[1]),s[2]=Math.max(t[2],i[2]),s[3]=Math.max(t[3],i[3]),s}},2170:function(h){h.exports=function(s,t,i){return s[0]=Math.min(t[0],i[0]),s[1]=Math.min(t[1],i[1]),s[2]=Math.min(t[2],i[2]),s[3]=Math.min(t[3],i[3]),s}},746:function(h){h.exports=function(s,t,i){return s[0]=t[0]*i[0],s[1]=t[1]*i[1],s[2]=t[2]*i[2],s[3]=t[3]*i[3],s}},6459:function(h){h.exports=function(s,t){return s[0]=-t[0],s[1]=-t[1],s[2]=-t[2],s[3]=-t[3],s}},381:function(h){h.exports=function(s,t){var i=t[0],n=t[1],r=t[2],a=t[3],l=i*i+n*n+r*r+a*a;return l>0&&(l=1/Math.sqrt(l),s[0]=i*l,s[1]=n*l,s[2]=r*l,s[3]=a*l),s}},3770:function(h,s,t){var i=t(381),n=t(5510);h.exports=function(r,a){return a=a||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),i(r,r),n(r,r,a),r}},5510:function(h){h.exports=function(s,t,i){return s[0]=t[0]*i,s[1]=t[1]*i,s[2]=t[2]*i,s[3]=t[3]*i,s}},4224:function(h){h.exports=function(s,t,i,n){return s[0]=t[0]+i[0]*n,s[1]=t[1]+i[1]*n,s[2]=t[2]+i[2]*n,s[3]=t[3]+i[3]*n,s}},6453:function(h){h.exports=function(s,t,i,n,r){return s[0]=t,s[1]=i,s[2]=n,s[3]=r,s}},1542:function(h){h.exports=function(s,t){var i=t[0]-s[0],n=t[1]-s[1],r=t[2]-s[2],a=t[3]-s[3];return i*i+n*n+r*r+a*a}},9037:function(h){h.exports=function(s){var t=s[0],i=s[1],n=s[2],r=s[3];return t*t+i*i+n*n+r*r}},2705:function(h){h.exports=function(s,t,i){return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],s[3]=t[3]-i[3],s}},6342:function(h){h.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=t[3];return s[0]=i[0]*n+i[4]*r+i[8]*a+i[12]*l,s[1]=i[1]*n+i[5]*r+i[9]*a+i[13]*l,s[2]=i[2]*n+i[6]*r+i[10]*a+i[14]*l,s[3]=i[3]*n+i[7]*r+i[11]*a+i[15]*l,s}},5022:function(h){h.exports=function(s,t,i){var n=t[0],r=t[1],a=t[2],l=i[0],u=i[1],d=i[2],c=i[3],x=c*n+u*a-d*r,g=c*r+d*n-l*a,p=c*a+l*r-u*n,v=-l*n-u*r-d*a;return s[0]=x*c+v*-l+g*-d-p*-u,s[1]=g*c+v*-u+p*-l-x*-d,s[2]=p*c+v*-d+x*-u-g*-l,s[3]=t[3],s}},9365:function(h,s,t){var i=t(8096),n=t(7896);h.exports=function(r){for(var a=Array.isArray(r)?r:i(r),l=0;l<a.length;l++){var u=a[l];if(u.type==="preprocessor"){var d=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(d&&d[2]){var c=d[1],x=d[2];return(c?n(x):x).trim()}}}}},3193:function(h,s,t){h.exports=function(C){var O,R,j,D=0,N=0,W=u,F=[],U=[],V=1,te=0,J=0,K=!1,X=!1,Z="",$=r,re=i;(C=C||{}).version==="300 es"&&($=l,re=a);var oe={},ie={};for(D=0;D<$.length;D++)oe[$[D]]=!0;for(D=0;D<re.length;D++)ie[re[D]]=!0;return function(he){return U=[],he!==null?function(Se){var ke;for(D=0,Se.toString&&(Se=Se.toString()),Z+=Se.replace(/\r\n/g,`
`),j=Z.length;O=Z[D],D<j;){switch(ke=D,W){case c:D=de();break;case x:case g:D=ge();break;case p:D=ve();break;case v:D=Te();break;case E:D=_e();break;case m:D=le();break;case d:D=ae();break;case S:D=be();break;case u:D=me()}ke!==D&&(Z[ke]===`
`?(te=0,++V):++te)}return N+=D,Z=Z.slice(D),U}(he):(F.length&&ue(F.join("")),W=w,ue("(eof)"),U)};function ue(he){he.length&&U.push({type:P[W],data:he,position:J,line:V,column:te})}function me(){return F=F.length?[]:F,R==="/"&&O==="*"?(J=N+D-1,W=c,R=O,D+1):R==="/"&&O==="/"?(J=N+D-1,W=x,R=O,D+1):O==="#"?(W=g,J=N+D,D):/\s/.test(O)?(W=S,J=N+D,D):(K=/\d/.test(O),X=/[^\w_]/.test(O),J=N+D,W=K?v:X?p:d,D)}function be(){return/[^\s]/g.test(O)?(ue(F.join("")),W=u,D):(F.push(O),R=O,D+1)}function ge(){return O!=="\r"&&O!==`
`||R==="\\"?(F.push(O),R=O,D+1):(ue(F.join("")),W=u,D)}function de(){return O==="/"&&R==="*"?(F.push(O),ue(F.join("")),W=u,D+1):(F.push(O),R=O,D+1)}function ve(){if(R==="."&&/\d/.test(O))return W=m,D;if(R==="/"&&O==="*")return W=c,D;if(R==="/"&&O==="/")return W=x,D;if(O==="."&&F.length){for(;pe(F););return W=m,D}if(O===";"||O===")"||O==="("){if(F.length)for(;pe(F););return ue(O),W=u,D+1}var he=F.length===2&&O!=="=";if(/[\w_\d\s]/.test(O)||he){for(;pe(F););return W=u,D}return F.push(O),R=O,D+1}function pe(he){for(var Se,ke,Me=0;;){if(Se=n.indexOf(he.slice(0,he.length+Me).join("")),ke=n[Se],Se===-1){if(Me--+he.length>0)continue;ke=he.slice(0,1).join("")}return ue(ke),J+=ke.length,(F=F.slice(ke.length)).length}}function _e(){return/[^a-fA-F0-9]/.test(O)?(ue(F.join("")),W=u,D):(F.push(O),R=O,D+1)}function Te(){return O==="."||/[eE]/.test(O)?(F.push(O),W=m,R=O,D+1):O==="x"&&F.length===1&&F[0]==="0"?(W=E,F.push(O),R=O,D+1):/[^\d]/.test(O)?(ue(F.join("")),W=u,D):(F.push(O),R=O,D+1)}function le(){return O==="f"&&(F.push(O),R=O,D+=1),/[eE]/.test(O)?(F.push(O),R=O,D+1):(O!=="-"&&O!=="+"||!/[eE]/.test(R))&&/[^\d]/.test(O)?(ue(F.join("")),W=u,D):(F.push(O),R=O,D+1)}function ae(){if(/[^\d\w_]/.test(O)){var he=F.join("");return W=ie[he]?f:oe[he]?_:y,ue(F.join("")),W=u,D}return F.push(O),R=O,D+1}};var i=t(399),n=t(9746),r=t(9525),a=t(9458),l=t(3585),u=999,d=9999,c=0,x=1,g=2,p=3,v=4,m=5,y=6,_=7,f=8,S=9,w=10,E=11,P=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(h,s,t){var i=t(9525);i=i.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),h.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(h){h.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(h,s,t){var i=t(399);h.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(h){h.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(h){h.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(h,s,t){var i=t(3193);h.exports=function(n,r){var a=i(r),l=[];return(l=l.concat(a(n))).concat(a(null))}},6832:function(h){h.exports=function(s){typeof s=="string"&&(s=[s]);for(var t=[].slice.call(arguments,1),i=[],n=0;n<s.length-1;n++)i.push(s[n],t[n]||"");return i.push(s[n]),i.join("")}},5233:function(h,s,t){"use strict";var i=t(4846);h.exports=i&&function(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch(a){n=!1}return n}()},2183:function(h,s,t){"use strict";h.exports=function(x,g){var p=x.length;if(p===0)throw new Error("Must have at least d+1 points");var v=x[0].length;if(p<=v)throw new Error("Must input at least d+1 points");var m=x.slice(0,v+1),y=i.apply(void 0,m);if(y===0)throw new Error("Input not in general position");for(var _=new Array(v+1),f=0;f<=v;++f)_[f]=f;y<0&&(_[0]=1,_[1]=0);var S=new r(_,new Array(v+1),!1),w=S.adjacent,E=new Array(v+2);for(f=0;f<=v;++f){for(var P=_.slice(),C=0;C<=v;++C)C===f&&(P[C]=-1);var O=P[0];P[0]=P[1],P[1]=O;var R=new r(P,new Array(v+1),!0);w[f]=R,E[f]=R}for(E[v+1]=S,f=0;f<=v;++f){P=w[f].vertices;var j=w[f].adjacent;for(C=0;C<=v;++C){var D=P[C];if(D<0)j[C]=S;else for(var N=0;N<=v;++N)w[N].vertices.indexOf(D)<0&&(j[C]=w[N])}}var W=new d(v,m,E),F=!!g;for(f=v+1;f<p;++f)W.insert(x[f],F);return W.boundary()};var i=t(417),n=t(8211).H;function r(x,g,p){this.vertices=x,this.adjacent=g,this.boundary=p,this.lastVisited=-1}function a(x,g,p){this.vertices=x,this.cell=g,this.index=p}function l(x,g){return n(x.vertices,g.vertices)}r.prototype.flip=function(){var x=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=x;var g=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=g};var u=[];function d(x,g,p){this.dimension=x,this.vertices=g,this.simplices=p,this.interior=p.filter(function(_){return!_.boundary}),this.tuple=new Array(x+1);for(var v=0;v<=x;++v)this.tuple[v]=this.vertices[v];var m,y=u[x];y||(y=u[x]=((m=i[x+1])||(m=i),function(_){return function(){var f=this.tuple;return _.apply(this,f)}}(m))),this.orient=y}var c=d.prototype;c.handleBoundaryDegeneracy=function(x,g){var p=this.dimension,v=this.vertices.length-1,m=this.tuple,y=this.vertices,_=[x];for(x.lastVisited=-v;_.length>0;)for(var f=(x=_.pop()).adjacent,S=0;S<=p;++S){var w=f[S];if(w.boundary&&!(w.lastVisited<=-v)){for(var E=w.vertices,P=0;P<=p;++P){var C=E[P];m[P]=C<0?g:y[C]}var O=this.orient();if(O>0)return w;w.lastVisited=-v,O===0&&_.push(w)}}return null},c.walk=function(x,g){var p=this.vertices.length-1,v=this.dimension,m=this.vertices,y=this.tuple,_=g?this.interior.length*Math.random()|0:this.interior.length-1,f=this.interior[_];e:for(;!f.boundary;){for(var S=f.vertices,w=f.adjacent,E=0;E<=v;++E)y[E]=m[S[E]];for(f.lastVisited=p,E=0;E<=v;++E){var P=w[E];if(!(P.lastVisited>=p)){var C=y[E];y[E]=x;var O=this.orient();if(y[E]=C,O<0){f=P;continue e}P.boundary?P.lastVisited=-p:P.lastVisited=p}}return}return f},c.addPeaks=function(x,g){var p=this.vertices.length-1,v=this.dimension,m=this.vertices,y=this.tuple,_=this.interior,f=this.simplices,S=[g];g.lastVisited=p,g.vertices[g.vertices.indexOf(-1)]=p,g.boundary=!1,_.push(g);for(var w=[];S.length>0;){var E=(g=S.pop()).vertices,P=g.adjacent,C=E.indexOf(p);if(!(C<0)){for(var O=0;O<=v;++O)if(O!==C){var R=P[O];if(R.boundary&&!(R.lastVisited>=p)){var j=R.vertices;if(R.lastVisited!==-p){for(var D=0,N=0;N<=v;++N)j[N]<0?(D=N,y[N]=x):y[N]=m[j[N]];if(this.orient()>0){j[D]=p,R.boundary=!1,_.push(R),S.push(R),R.lastVisited=p;continue}R.lastVisited=-p}var W=R.adjacent,F=E.slice(),U=P.slice(),V=new r(F,U,!0);f.push(V);var te=W.indexOf(g);if(!(te<0))for(W[te]=V,U[C]=R,F[O]=-1,U[O]=g,P[O]=V,V.flip(),N=0;N<=v;++N){var J=F[N];if(!(J<0||J===p)){for(var K=new Array(v-1),X=0,Z=0;Z<=v;++Z){var $=F[Z];$<0||Z===N||(K[X++]=$)}w.push(new a(K,V,N))}}}}}}for(w.sort(l),O=0;O+1<w.length;O+=2){var re=w[O],oe=w[O+1],ie=re.index,ue=oe.index;ie<0||ue<0||(re.cell.adjacent[re.index]=oe.cell,oe.cell.adjacent[oe.index]=re.cell)}},c.insert=function(x,g){var p=this.vertices;p.push(x);var v=this.walk(x,g);if(v){for(var m=this.dimension,y=this.tuple,_=0;_<=m;++_){var f=v.vertices[_];y[_]=f<0?x:p[f]}var S=this.orient(y);S<0||(S!==0||(v=this.handleBoundaryDegeneracy(v,x)))&&this.addPeaks(x,v)}},c.boundary=function(){for(var x=this.dimension,g=[],p=this.simplices,v=p.length,m=0;m<v;++m){var y=p[m];if(y.boundary){for(var _=new Array(x),f=y.vertices,S=0,w=0,E=0;E<=x;++E)f[E]>=0?_[S++]=f[E]:w=1&E;if(w===(1&x)){var P=_[0];_[0]=_[1],_[1]=P}g.push(_)}}return g}},9014:function(h,s,t){"use strict";var i=t(5070);function n(S,w,E,P,C){this.mid=S,this.left=w,this.right=E,this.leftPoints=P,this.rightPoints=C,this.count=(w?w.count:0)+(E?E.count:0)+P.length}h.exports=function(S){return S&&S.length!==0?new _(y(S)):new _(null)};var r=n.prototype;function a(S,w){S.mid=w.mid,S.left=w.left,S.right=w.right,S.leftPoints=w.leftPoints,S.rightPoints=w.rightPoints,S.count=w.count}function l(S,w){var E=y(w);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function u(S,w){var E=S.intervals([]);E.push(w),l(S,E)}function d(S,w){var E=S.intervals([]),P=E.indexOf(w);return P<0?0:(E.splice(P,1),l(S,E),1)}function c(S,w,E){for(var P=0;P<S.length&&S[P][0]<=w;++P){var C=E(S[P]);if(C)return C}}function x(S,w,E){for(var P=S.length-1;P>=0&&S[P][1]>=w;--P){var C=E(S[P]);if(C)return C}}function g(S,w){for(var E=0;E<S.length;++E){var P=w(S[E]);if(P)return P}}function p(S,w){return S-w}function v(S,w){return S[0]-w[0]||S[1]-w[1]}function m(S,w){return S[1]-w[1]||S[0]-w[0]}function y(S){if(S.length===0)return null;for(var w=[],E=0;E<S.length;++E)w.push(S[E][0],S[E][1]);w.sort(p);var P=w[w.length>>1],C=[],O=[],R=[];for(E=0;E<S.length;++E){var j=S[E];j[1]<P?C.push(j):P<j[0]?O.push(j):R.push(j)}var D=R,N=R.slice();return D.sort(v),N.sort(m),new n(P,y(C),y(O),D,N)}function _(S){this.root=S}r.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},r.insert=function(S){var w=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(w+1)?u(this,S):this.left.insert(S):this.left=y([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(w+1)?u(this,S):this.right.insert(S):this.right=y([S]);else{var E=i.ge(this.leftPoints,S,v),P=i.ge(this.rightPoints,S,m);this.leftPoints.splice(E,0,S),this.rightPoints.splice(P,0,S)}},r.remove=function(S){var w=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(w-1)?d(this,S):(O=this.left.remove(S))===2?(this.left=null,this.count-=1,1):(O===1&&(this.count-=1),O):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(w-1)?d(this,S):(O=this.right.remove(S))===2?(this.right=null,this.count-=1,1):(O===1&&(this.count-=1),O):0;if(this.count===1)return this.leftPoints[0]===S?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,P=this.left;P.right;)E=P,P=P.right;if(E===this)P.right=this.right;else{var C=this.left,O=this.right;E.count-=P.count,E.right=P.left,P.left=C,P.right=O}a(this,P),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?a(this,this.left):a(this,this.right);return 1}for(C=i.ge(this.leftPoints,S,v);C<this.leftPoints.length&&this.leftPoints[C][0]===S[0];++C)if(this.leftPoints[C]===S){for(this.count-=1,this.leftPoints.splice(C,1),O=i.ge(this.rightPoints,S,m);O<this.rightPoints.length&&this.rightPoints[O][1]===S[1];++O)if(this.rightPoints[O]===S)return this.rightPoints.splice(O,1),1}return 0},r.queryPoint=function(S,w){return S<this.mid?this.left&&(E=this.left.queryPoint(S,w))?E:c(this.leftPoints,S,w):S>this.mid?this.right&&(E=this.right.queryPoint(S,w))?E:x(this.rightPoints,S,w):g(this.leftPoints,w);var E},r.queryInterval=function(S,w,E){var P;return S<this.mid&&this.left&&(P=this.left.queryInterval(S,w,E))||w>this.mid&&this.right&&(P=this.right.queryInterval(S,w,E))?P:w<this.mid?c(this.leftPoints,w,E):S>this.mid?x(this.rightPoints,S,E):g(this.leftPoints,E)};var f=_.prototype;f.insert=function(S){this.root?this.root.insert(S):this.root=new n(S[0],null,null,[S],[S])},f.remove=function(S){if(this.root){var w=this.root.remove(S);return w===2&&(this.root=null),w!==0}return!1},f.queryPoint=function(S,w){if(this.root)return this.root.queryPoint(S,w)},f.queryInterval=function(S,w,E){if(S<=w&&this.root)return this.root.queryInterval(S,w,E)},Object.defineProperty(f,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(f,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(h){"use strict";h.exports=function(s){for(var t=new Array(s),i=0;i<s;++i)t[i]=i;return t}},4846:function(h){h.exports=!0},4780:function(h){function s(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}h.exports=function(t){return t!=null&&(s(t)||function(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&s(i.slice(0,0))}(t)||!!t._isBuffer)}},3596:function(h){"use strict";h.exports=function(s){for(var t,i=s.length,n=0;n<i;n++)if(((t=s.charCodeAt(n))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},3578:function(h){h.exports=function(s,t,i){return s*(1-i)+t*i}},7191:function(h,s,t){var i=t(4690),n=t(9823),r=t(7332),a=t(7787),l=t(7437),u=t(2142),d={length:t(4693),normalize:t(899),dot:t(9305),cross:t(903)},c=n(),x=n(),g=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],v=[0,0,0];function m(y,_,f,S,w){y[0]=_[0]*S+f[0]*w,y[1]=_[1]*S+f[1]*w,y[2]=_[2]*S+f[2]*w}h.exports=function(y,_,f,S,w,E){if(_||(_=[0,0,0]),f||(f=[0,0,0]),S||(S=[0,0,0]),w||(w=[0,0,0,1]),E||(E=[0,0,0,1]),!i(c,y)||(r(x,c),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(a(x)<1e-8)))return!1;var P,C,O,R,j,D,N,W=c[3],F=c[7],U=c[11],V=c[12],te=c[13],J=c[14],K=c[15];if(W!==0||F!==0||U!==0){if(g[0]=W,g[1]=F,g[2]=U,g[3]=K,!l(x,x))return!1;u(x,x),P=w,O=x,R=(C=g)[0],j=C[1],D=C[2],N=C[3],P[0]=O[0]*R+O[4]*j+O[8]*D+O[12]*N,P[1]=O[1]*R+O[5]*j+O[9]*D+O[13]*N,P[2]=O[2]*R+O[6]*j+O[10]*D+O[14]*N,P[3]=O[3]*R+O[7]*j+O[11]*D+O[15]*N}else w[0]=w[1]=w[2]=0,w[3]=1;if(_[0]=V,_[1]=te,_[2]=J,function(Z,$){Z[0][0]=$[0],Z[0][1]=$[1],Z[0][2]=$[2],Z[1][0]=$[4],Z[1][1]=$[5],Z[1][2]=$[6],Z[2][0]=$[8],Z[2][1]=$[9],Z[2][2]=$[10]}(p,c),f[0]=d.length(p[0]),d.normalize(p[0],p[0]),S[0]=d.dot(p[0],p[1]),m(p[1],p[1],p[0],1,-S[0]),f[1]=d.length(p[1]),d.normalize(p[1],p[1]),S[0]/=f[1],S[1]=d.dot(p[0],p[2]),m(p[2],p[2],p[0],1,-S[1]),S[2]=d.dot(p[1],p[2]),m(p[2],p[2],p[1],1,-S[2]),f[2]=d.length(p[2]),d.normalize(p[2],p[2]),S[1]/=f[2],S[2]/=f[2],d.cross(v,p[1],p[2]),d.dot(p[0],v)<0)for(var X=0;X<3;X++)f[X]*=-1,p[X][0]*=-1,p[X][1]*=-1,p[X][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(E[0]=-E[0]),p[0][2]>p[2][0]&&(E[1]=-E[1]),p[1][0]>p[0][1]&&(E[2]=-E[2]),!0}},4690:function(h){h.exports=function(s,t){var i=t[15];if(i===0)return!1;for(var n=1/i,r=0;r<16;r++)s[r]=t[r]*n;return!0}},7649:function(h,s,t){var i=t(1868),n=t(1102),r=t(7191),a=t(7787),l=t(1116),u=x(),d=x(),c=x();function x(){return{translate:g(),scale:g(1),skew:g(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function g(p){return[p||0,p||0,p||0]}h.exports=function(p,v,m,y){if(a(v)===0||a(m)===0)return!1;var _=r(v,u.translate,u.scale,u.skew,u.perspective,u.quaternion),f=r(m,d.translate,d.scale,d.skew,d.perspective,d.quaternion);return!(!_||!f||(i(c.translate,u.translate,d.translate,y),i(c.skew,u.skew,d.skew,y),i(c.scale,u.scale,d.scale,y),i(c.perspective,u.perspective,d.perspective,y),l(c.quaternion,u.quaternion,d.quaternion,y),n(p,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},1102:function(h,s,t){var i={identity:t(9947),translate:t(998),multiply:t(104),create:t(9823),scale:t(3668),fromRotationTranslation:t(7280)},n=(i.create(),i.create());h.exports=function(r,a,l,u,d,c){return i.identity(r),i.fromRotationTranslation(r,c,a),r[3]=d[0],r[7]=d[1],r[11]=d[2],r[15]=d[3],i.identity(n),u[2]!==0&&(n[9]=u[2],i.multiply(r,r,n)),u[1]!==0&&(n[9]=0,n[8]=u[1],i.multiply(r,r,n)),u[0]!==0&&(n[8]=0,n[4]=u[0],i.multiply(r,r,n)),i.scale(r,r,l),r}},9298:function(h,s,t){"use strict";var i=t(5070),n=t(7649),r=t(7437),a=t(6109),l=t(7115),u=t(5240),d=t(3012),c=t(998),x=(t(3668),t(899)),g=[0,0,0];function p(y){this._components=y.slice(),this._time=[0],this.prevMatrix=y.slice(),this.nextMatrix=y.slice(),this.computedMatrix=y.slice(),this.computedInverse=y.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}h.exports=function(y){return new p((y=y||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var v=p.prototype;v.recalcMatrix=function(y){var _=this._time,f=i.le(_,y),S=this.computedMatrix;if(!(f<0)){var w=this._components;if(f===_.length-1)for(var E=16*f,P=0;P<16;++P)S[P]=w[E++];else{var C=_[f+1]-_[f],O=(E=16*f,this.prevMatrix),R=!0;for(P=0;P<16;++P)O[P]=w[E++];var j=this.nextMatrix;for(P=0;P<16;++P)j[P]=w[E++],R=R&&O[P]===j[P];if(C<1e-6||R)for(P=0;P<16;++P)S[P]=O[P];else n(S,O,j,(y-_[f])/C)}var D=this.computedUp;D[0]=S[1],D[1]=S[5],D[2]=S[9],x(D,D);var N=this.computedInverse;r(N,S);var W=this.computedEye,F=N[15];W[0]=N[12]/F,W[1]=N[13]/F,W[2]=N[14]/F;var U=this.computedCenter,V=Math.exp(this.computedRadius[0]);for(P=0;P<3;++P)U[P]=W[P]-S[2+4*P]*V}},v.idle=function(y){if(!(y<this.lastT())){for(var _=this._components,f=_.length-16,S=0;S<16;++S)_.push(_[f++]);this._time.push(y)}},v.flush=function(y){var _=i.gt(this._time,y)-2;_<0||(this._time.splice(0,_),this._components.splice(0,16*_))},v.lastT=function(){return this._time[this._time.length-1]},v.lookAt=function(y,_,f,S){this.recalcMatrix(y),_=_||this.computedEye,f=f||g,S=S||this.computedUp,this.setMatrix(y,d(this.computedMatrix,_,f,S));for(var w=0,E=0;E<3;++E)w+=Math.pow(f[E]-_[E],2);w=Math.log(Math.sqrt(w)),this.computedRadius[0]=w},v.rotate=function(y,_,f,S){this.recalcMatrix(y);var w=this.computedInverse;_&&l(w,w,_),f&&a(w,w,f),S&&u(w,w,S),this.setMatrix(y,r(this.computedMatrix,w))};var m=[0,0,0];v.pan=function(y,_,f,S){m[0]=-(_||0),m[1]=-(f||0),m[2]=-(S||0),this.recalcMatrix(y);var w=this.computedInverse;c(w,w,m),this.setMatrix(y,r(w,w))},v.translate=function(y,_,f,S){m[0]=_||0,m[1]=f||0,m[2]=S||0,this.recalcMatrix(y);var w=this.computedMatrix;c(w,w,m),this.setMatrix(y,w)},v.setMatrix=function(y,_){if(!(y<this.lastT())){this._time.push(y);for(var f=0;f<16;++f)this._components.push(_[f])}},v.setDistance=function(y,_){this.computedRadius[0]=_},v.setDistanceLimits=function(y,_){var f=this._limits;f[0]=y,f[1]=_},v.getDistanceLimits=function(y){var _=this._limits;return y?(y[0]=_[0],y[1]=_[1],y):_}},3266:function(h,s,t){"use strict";h.exports=function(n){var r=n.length;if(r<3){for(var a=new Array(r),l=0;l<r;++l)a[l]=l;return r===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:a}var u=new Array(r);for(l=0;l<r;++l)u[l]=l;u.sort(function(_,f){return n[_][0]-n[f][0]||n[_][1]-n[f][1]});var d=[u[0],u[1]],c=[u[0],u[1]];for(l=2;l<r;++l){for(var x=u[l],g=n[x],p=d.length;p>1&&i(n[d[p-2]],n[d[p-1]],g)<=0;)p-=1,d.pop();for(d.push(x),p=c.length;p>1&&i(n[c[p-2]],n[c[p-1]],g)>=0;)p-=1,c.pop();c.push(x)}a=new Array(c.length+d.length-2);for(var v=0,m=(l=0,d.length);l<m;++l)a[v++]=d[l];for(var y=c.length-2;y>0;--y)a[v++]=c[y];return a};var i=t(417)[3]},6145:function(h,s,t){"use strict";h.exports=function(n,r){r||(r=n,n=window);var a=0,l=0,u=0,d={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function x(E){var P=!1;return"altKey"in E&&(P=P||E.altKey!==d.alt,d.alt=!!E.altKey),"shiftKey"in E&&(P=P||E.shiftKey!==d.shift,d.shift=!!E.shiftKey),"ctrlKey"in E&&(P=P||E.ctrlKey!==d.control,d.control=!!E.ctrlKey),"metaKey"in E&&(P=P||E.metaKey!==d.meta,d.meta=!!E.metaKey),P}function g(E,P){var C=i.x(P),O=i.y(P);"buttons"in P&&(E=0|P.buttons),(E!==a||C!==l||O!==u||x(P))&&(a=0|E,l=C||0,u=O||0,r&&r(a,l,u,d))}function p(E){g(0,E)}function v(){(a||l||u||d.shift||d.alt||d.meta||d.control)&&(l=u=0,a=0,d.shift=d.alt=d.control=d.meta=!1,r&&r(0,0,0,d))}function m(E){x(E)&&r&&r(a,l,u,d)}function y(E){i.buttons(E)===0?g(0,E):g(a,E)}function _(E){g(a|i.buttons(E),E)}function f(E){g(a&~i.buttons(E),E)}function S(){c||(c=!0,n.addEventListener("mousemove",y),n.addEventListener("mousedown",_),n.addEventListener("mouseup",f),n.addEventListener("mouseleave",p),n.addEventListener("mouseenter",p),n.addEventListener("mouseout",p),n.addEventListener("mouseover",p),n.addEventListener("blur",v),n.addEventListener("keyup",m),n.addEventListener("keydown",m),n.addEventListener("keypress",m),n!==window&&(window.addEventListener("blur",v),window.addEventListener("keyup",m),window.addEventListener("keydown",m),window.addEventListener("keypress",m)))}S();var w={element:n};return Object.defineProperties(w,{enabled:{get:function(){return c},set:function(E){E?S():c&&(c=!1,n.removeEventListener("mousemove",y),n.removeEventListener("mousedown",_),n.removeEventListener("mouseup",f),n.removeEventListener("mouseleave",p),n.removeEventListener("mouseenter",p),n.removeEventListener("mouseout",p),n.removeEventListener("mouseover",p),n.removeEventListener("blur",v),n.removeEventListener("keyup",m),n.removeEventListener("keydown",m),n.removeEventListener("keypress",m),n!==window&&(window.removeEventListener("blur",v),window.removeEventListener("keyup",m),window.removeEventListener("keydown",m),window.removeEventListener("keypress",m)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return l},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return d},enumerable:!0}}),w};var i=t(4110)},2565:function(h){var s={left:0,top:0};h.exports=function(t,i,n){i=i||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var r,a=t.clientX||0,l=t.clientY||0,u=(r=i)===window||r===document||r===document.body?s:r.getBoundingClientRect();return n[0]=a-u.left,n[1]=l-u.top,n}},4110:function(h,s){"use strict";function t(i){return i.target||i.srcElement||window}s.buttons=function(i){if(typeof i=="object"){if("buttons"in i)return i.buttons;if("which"in i){if((n=i.which)===2)return 4;if(n===3)return 2;if(n>0)return 1<<n-1}else if("button"in i){var n;if((n=i.button)===1)return 4;if(n===2)return 2;if(n>=0)return 1<<n}}return 0},s.element=t,s.x=function(i){if(typeof i=="object"){if("offsetX"in i)return i.offsetX;var n=t(i).getBoundingClientRect();return i.clientX-n.left}return 0},s.y=function(i){if(typeof i=="object"){if("offsetY"in i)return i.offsetY;var n=t(i).getBoundingClientRect();return i.clientY-n.top}return 0}},6475:function(h,s,t){"use strict";var i=t(14);h.exports=function(n,r,a){typeof n=="function"&&(a=!!r,r=n,n=window);var l=i("ex",n),u=function(d){a&&d.preventDefault();var c=d.deltaX||0,x=d.deltaY||0,g=d.deltaZ||0,p=1;switch(d.deltaMode){case 1:p=l;break;case 2:p=window.innerHeight}if(x*=p,g*=p,(c*=p)||x||g)return r(c,x,g,d)};return n.addEventListener("wheel",u),u}},9284:function(h,s,t){"use strict";var i=t(5306);h.exports=function(r){function a(g){throw new Error("ndarray-extract-contour: "+g)}typeof r!="object"&&a("Must specify arguments");var l=r.order;Array.isArray(l)||a("Must specify order");var u=r.arrayArguments||1;u<1&&a("Must have at least one array argument"),(r.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),typeof r.vertex!="function"&&a("Must specify vertex creation function"),typeof r.cell!="function"&&a("Must specify cell creation function"),typeof r.phase!="function"&&a("Must specify phase function");for(var d=r.getters||[],c=new Array(u),x=0;x<u;++x)d.indexOf(x)>=0?c[x]=!0:c[x]=!1;return function(g,p,v,m,y,_){var f=[_,y].join(",");return(0,n[f])(g,p,v,i.mallocUint32,i.freeUint32)}(r.vertex,r.cell,r.phase,0,l,c)};var n={"false,0,1":function(r,a,l,u,d){return function(c,x,g,p){var v,m=0|c.shape[0],y=0|c.shape[1],_=c.data,f=0|c.offset,S=0|c.stride[0],w=0|c.stride[1],E=f,P=0|-S,C=0,O=0|-w,R=0,j=-S-w|0,D=0,N=0|S,W=w-S*m|0,F=0,U=0,V=0,te=2*m|0,J=u(te),K=u(te),X=0,Z=0,$=-1,re=-1,oe=0,ie=0|-m,ue=0|m,me=0,be=-m-1|0,ge=m-1|0,de=0,ve=0,pe=0;for(F=0;F<m;++F)J[X++]=l(_[E],x,g,p),E+=N;if(E+=W,y>0){if(U=1,J[X++]=l(_[E],x,g,p),E+=N,m>0)for(F=1,v=_[E],Z=J[X]=l(v,x,g,p),oe=J[X+$],me=J[X+ie],de=J[X+be],Z===oe&&Z===me&&Z===de||(C=_[E+P],R=_[E+O],D=_[E+j],r(F,U,v,C,R,D,Z,oe,me,de,x,g,p),ve=K[X]=V++),X+=1,E+=N,F=2;F<m;++F)v=_[E],Z=J[X]=l(v,x,g,p),oe=J[X+$],me=J[X+ie],de=J[X+be],Z===oe&&Z===me&&Z===de||(C=_[E+P],R=_[E+O],D=_[E+j],r(F,U,v,C,R,D,Z,oe,me,de,x,g,p),ve=K[X]=V++,de!==oe&&a(K[X+$],ve,D,C,de,oe,x,g,p)),X+=1,E+=N;for(E+=W,X=0,pe=$,$=re,re=pe,pe=ie,ie=ue,ue=pe,pe=be,be=ge,ge=pe,U=2;U<y;++U){if(J[X++]=l(_[E],x,g,p),E+=N,m>0)for(F=1,v=_[E],Z=J[X]=l(v,x,g,p),oe=J[X+$],me=J[X+ie],de=J[X+be],Z===oe&&Z===me&&Z===de||(C=_[E+P],R=_[E+O],D=_[E+j],r(F,U,v,C,R,D,Z,oe,me,de,x,g,p),ve=K[X]=V++,de!==me&&a(K[X+ie],ve,R,D,me,de,x,g,p)),X+=1,E+=N,F=2;F<m;++F)v=_[E],Z=J[X]=l(v,x,g,p),oe=J[X+$],me=J[X+ie],de=J[X+be],Z===oe&&Z===me&&Z===de||(C=_[E+P],R=_[E+O],D=_[E+j],r(F,U,v,C,R,D,Z,oe,me,de,x,g,p),ve=K[X]=V++,de!==me&&a(K[X+ie],ve,R,D,me,de,x,g,p),de!==oe&&a(K[X+$],ve,D,C,de,oe,x,g,p)),X+=1,E+=N;1&U&&(X=0),pe=$,$=re,re=pe,pe=ie,ie=ue,ue=pe,pe=be,be=ge,ge=pe,E+=W}}d(K),d(J)}},"false,1,0":function(r,a,l,u,d){return function(c,x,g,p){var v,m=0|c.shape[0],y=0|c.shape[1],_=c.data,f=0|c.offset,S=0|c.stride[0],w=0|c.stride[1],E=f,P=0|-S,C=0,O=0|-w,R=0,j=-S-w|0,D=0,N=0|w,W=S-w*y|0,F=0,U=0,V=0,te=2*y|0,J=u(te),K=u(te),X=0,Z=0,$=-1,re=-1,oe=0,ie=0|-y,ue=0|y,me=0,be=-y-1|0,ge=y-1|0,de=0,ve=0,pe=0;for(U=0;U<y;++U)J[X++]=l(_[E],x,g,p),E+=N;if(E+=W,m>0){if(F=1,J[X++]=l(_[E],x,g,p),E+=N,y>0)for(U=1,v=_[E],Z=J[X]=l(v,x,g,p),me=J[X+ie],oe=J[X+$],de=J[X+be],Z===me&&Z===oe&&Z===de||(C=_[E+P],R=_[E+O],D=_[E+j],r(F,U,v,C,R,D,Z,me,oe,de,x,g,p),ve=K[X]=V++),X+=1,E+=N,U=2;U<y;++U)v=_[E],Z=J[X]=l(v,x,g,p),me=J[X+ie],oe=J[X+$],de=J[X+be],Z===me&&Z===oe&&Z===de||(C=_[E+P],R=_[E+O],D=_[E+j],r(F,U,v,C,R,D,Z,me,oe,de,x,g,p),ve=K[X]=V++,de!==oe&&a(K[X+$],ve,R,D,oe,de,x,g,p)),X+=1,E+=N;for(E+=W,X=0,pe=ie,ie=ue,ue=pe,pe=$,$=re,re=pe,pe=be,be=ge,ge=pe,F=2;F<m;++F){if(J[X++]=l(_[E],x,g,p),E+=N,y>0)for(U=1,v=_[E],Z=J[X]=l(v,x,g,p),me=J[X+ie],oe=J[X+$],de=J[X+be],Z===me&&Z===oe&&Z===de||(C=_[E+P],R=_[E+O],D=_[E+j],r(F,U,v,C,R,D,Z,me,oe,de,x,g,p),ve=K[X]=V++,de!==me&&a(K[X+ie],ve,D,C,de,me,x,g,p)),X+=1,E+=N,U=2;U<y;++U)v=_[E],Z=J[X]=l(v,x,g,p),me=J[X+ie],oe=J[X+$],de=J[X+be],Z===me&&Z===oe&&Z===de||(C=_[E+P],R=_[E+O],D=_[E+j],r(F,U,v,C,R,D,Z,me,oe,de,x,g,p),ve=K[X]=V++,de!==oe&&a(K[X+$],ve,R,D,oe,de,x,g,p),de!==me&&a(K[X+ie],ve,D,C,de,me,x,g,p)),X+=1,E+=N;1&F&&(X=0),pe=ie,ie=ue,ue=pe,pe=$,$=re,re=pe,pe=be,be=ge,ge=pe,E+=W}}d(K),d(J)}}}},9144:function(h,s,t){"use strict";var i=t(3094),n={zero:function(m,y,_,f){var S=m[0];f|=0;var w=0,E=_[0];for(w=0;w<S;++w)y[f]=0,f+=E},fdTemplate1:function(m,y,_,f,S,w,E){var P=m[0],C=_[0],O=-1*C,R=C;f|=0,E|=0;var j=0,D=C,N=w[0];for(j=0;j<P;++j)S[E]=.5*(y[f+O]-y[f+R]),f+=D,E+=N},fdTemplate2:function(m,y,_,f,S,w,E,P,C,O){var R=m[0],j=m[1],D=_[0],N=_[1],W=w[0],F=w[1],U=C[0],V=C[1],te=-1*D,J=D,K=-1*N,X=N;f|=0,E|=0,O|=0;var Z=0,$=0,re=N,oe=D-j*N,ie=F,ue=W-j*F,me=V,be=U-j*V;for($=0;$<R;++$){for(Z=0;Z<j;++Z)S[E]=.5*(y[f+te]-y[f+J]),P[O]=.5*(y[f+K]-y[f+X]),f+=re,E+=ie,O+=me;f+=oe,E+=ue,O+=be}}},r={cdiff:function(m){var y={};return function(_,f,S){var w=_.dtype,E=_.order,P=f.dtype,C=f.order,O=S.dtype,R=S.order,j=[w,E.join(),P,C.join(),O,R.join()].join(),D=y[j];return D||(y[j]=D=m([w,E,P,C,O,R])),D(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset,S.data,S.stride,0|S.offset)}},zero:function(m){var y={};return function(_){var f=_.dtype,S=_.order,w=[f,S.join()].join(),E=y[w];return E||(y[w]=E=m([f,S])),E(_.shape.slice(0),_.data,_.stride,0|_.offset)}},fdTemplate1:function(m){var y={};return function(_,f){var S=_.dtype,w=_.order,E=f.dtype,P=f.order,C=[S,w.join(),E,P.join()].join(),O=y[C];return O||(y[C]=O=m([S,w,E,P])),O(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset)}},fdTemplate2:function(m){var y={};return function(_,f,S){var w=_.dtype,E=_.order,P=f.dtype,C=f.order,O=S.dtype,R=S.order,j=[w,E.join(),P,C.join(),O,R.join()].join(),D=y[j];return D||(y[j]=D=m([w,E,P,C,O,R])),D(_.shape.slice(0),_.data,_.stride,0|_.offset,f.data,f.stride,0|f.offset,S.data,S.stride,0|S.offset)}}};function a(m){return(0,r[m.funcName])(l.bind(void 0,m))}function l(m){return n[m.funcName]}function u(m){return a({funcName:m.funcName})}var d={},c={},x=u({funcName:"cdiff"}),g=u({funcName:"zero"});function p(m){return m in d?d[m]:d[m]=u({funcName:"fdTemplate"+m})}function v(m,y,_,f){return function(S,w){var E=w.shape.slice();return E[0]>2&&E[1]>2&&f(w.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(_(w.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),y(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(_(w.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),y(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(_(w.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),y(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(_(w.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),y(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}h.exports=function(m,y,_){return Array.isArray(_)||(_=i(y.dimension,typeof _=="string"?_:"clamp")),y.size===0?m:y.dimension===0?(m.set(0),m):function(f){var S=f.join();if(C=c[S])return C;for(var w=f.length,E=[x,g],P=1;P<=w;++P)E.push(p(P));var C=v.apply(void 0,E);return c[S]=C,C}(_)(m,y)}},3581:function(h){"use strict";function s(r,a){var l=Math.floor(a),u=a-l,d=0<=l&&l<r.shape[0],c=0<=l+1&&l+1<r.shape[0];return(1-u)*(d?+r.get(l):0)+u*(c?+r.get(l+1):0)}function t(r,a,l){var u=Math.floor(a),d=a-u,c=0<=u&&u<r.shape[0],x=0<=u+1&&u+1<r.shape[0],g=Math.floor(l),p=l-g,v=0<=g&&g<r.shape[1],m=0<=g+1&&g+1<r.shape[1],y=c&&v?r.get(u,g):0,_=c&&m?r.get(u,g+1):0;return(1-p)*((1-d)*y+d*(x&&v?r.get(u+1,g):0))+p*((1-d)*_+d*(x&&m?r.get(u+1,g+1):0))}function i(r,a,l,u){var d=Math.floor(a),c=a-d,x=0<=d&&d<r.shape[0],g=0<=d+1&&d+1<r.shape[0],p=Math.floor(l),v=l-p,m=0<=p&&p<r.shape[1],y=0<=p+1&&p+1<r.shape[1],_=Math.floor(u),f=u-_,S=0<=_&&_<r.shape[2],w=0<=_+1&&_+1<r.shape[2],E=x&&m&&S?r.get(d,p,_):0,P=x&&y&&S?r.get(d,p+1,_):0,C=g&&m&&S?r.get(d+1,p,_):0,O=g&&y&&S?r.get(d+1,p+1,_):0,R=x&&m&&w?r.get(d,p,_+1):0,j=x&&y&&w?r.get(d,p+1,_+1):0;return(1-f)*((1-v)*((1-c)*E+c*C)+v*((1-c)*P+c*O))+f*((1-v)*((1-c)*R+c*(g&&m&&w?r.get(d+1,p,_+1):0))+v*((1-c)*j+c*(g&&y&&w?r.get(d+1,p+1,_+1):0)))}function n(r){var a,l,u=0|r.shape.length,d=new Array(u),c=new Array(u),x=new Array(u),g=new Array(u);for(a=0;a<u;++a)l=+arguments[a+1],d[a]=Math.floor(l),c[a]=l-d[a],x[a]=0<=d[a]&&d[a]<r.shape[a],g[a]=0<=d[a]+1&&d[a]+1<r.shape[a];var p,v,m,y=0;e:for(a=0;a<1<<u;++a){for(v=1,m=r.offset,p=0;p<u;++p)if(a&1<<p){if(!g[p])continue e;v*=c[p],m+=r.stride[p]*(d[p]+1)}else{if(!x[p])continue e;v*=1-c[p],m+=r.stride[p]*d[p]}y+=v*r.data[m]}return y}h.exports=function(r,a,l,u){switch(r.shape.length){case 0:return 0;case 1:return s(r,a);case 2:return t(r,a,l);case 3:return i(r,a,l,u);default:return n.apply(void 0,arguments)}},h.exports.d1=s,h.exports.d2=t,h.exports.d3=i},7498:function(h,s){"use strict";var t={"float64,2,1,0":function(){return function(l,u,d,c,x){var g=l[0],p=l[1],v=l[2],m=d[0],y=d[1],_=d[2];c|=0;var f=0,S=0,w=0,E=_,P=y-v*_,C=m-p*y;for(w=0;w<g;++w){for(S=0;S<p;++S){for(f=0;f<v;++f)u[c]/=x,c+=E;c+=P}c+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(l,u,d,c,x,g,p,v){for(var m=l[0],y=l[1],_=l[2],f=d[0],S=d[1],w=d[2],E=g[0],P=g[1],C=g[2],O=c|=0,R=p|=0,j=0|l[0];j>0;){j<64?(m=j,j=0):(m=64,j-=64);for(var D=0|l[1];D>0;){D<64?(y=D,D=0):(y=64,D-=64),c=O+j*f+D*S,p=R+j*E+D*P;var N=0,W=0,F=0,U=w,V=f-_*w,te=S-m*f,J=C,K=E-_*C,X=P-m*E;for(F=0;F<y;++F){for(W=0;W<m;++W){for(N=0;N<_;++N)u[c]=x[p]*v,c+=U,p+=J;c+=V,p+=K}c+=te,p+=X}}}}},"float32,1,0,float32,1,0":function(){return function(l,u,d,c,x,g,p){var v=l[0],m=l[1],y=d[0],_=d[1],f=g[0],S=g[1];c|=0,p|=0;var w=0,E=0,P=_,C=y-m*_,O=S,R=f-m*S;for(E=0;E<v;++E){for(w=0;w<m;++w)u[c]=x[p],c+=P,p+=O;c+=C,p+=R}}},"float32,1,0,float32,0,1":function(){return function(l,u,d,c,x,g,p){for(var v=l[0],m=l[1],y=d[0],_=d[1],f=g[0],S=g[1],w=c|=0,E=p|=0,P=0|l[1];P>0;){P<64?(m=P,P=0):(m=64,P-=64);for(var C=0|l[0];C>0;){C<64?(v=C,C=0):(v=64,C-=64),c=w+P*_+C*y,p=E+P*S+C*f;var O=0,R=0,j=_,D=y-m*_,N=S,W=f-m*S;for(R=0;R<v;++R){for(O=0;O<m;++O)u[c]=x[p],c+=j,p+=N;c+=D,p+=W}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(l,u,d,c,x,g,p){for(var v=l[0],m=l[1],y=l[2],_=d[0],f=d[1],S=d[2],w=g[0],E=g[1],P=g[2],C=c|=0,O=p|=0,R=0|l[2];R>0;){R<64?(y=R,R=0):(y=64,R-=64);for(var j=0|l[0];j>0;){j<64?(v=j,j=0):(v=64,j-=64);for(var D=0|l[1];D>0;){D<64?(m=D,D=0):(m=64,D-=64),c=C+R*S+j*_+D*f,p=O+R*P+j*w+D*E;var N=0,W=0,F=0,U=S,V=_-y*S,te=f-v*_,J=P,K=w-y*P,X=E-v*w;for(F=0;F<m;++F){for(W=0;W<v;++W){for(N=0;N<y;++N)u[c]=x[p],c+=U,p+=J;c+=V,p+=K}c+=te,p+=X}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(l,u,d,c,x,g,p){var v=l[0],m=l[1],y=l[2],_=d[0],f=d[1],S=d[2],w=g[0],E=g[1],P=g[2];c|=0,p|=0;var C=0,O=0,R=0,j=S,D=_-y*S,N=f-v*_,W=P,F=w-y*P,U=E-v*w;for(R=0;R<m;++R){for(O=0;O<v;++O){for(C=0;C<y;++C)u[c]=x[p],c+=j,p+=W;c+=D,p+=F}c+=N,p+=U}}}},i=function(l,u){var d=u.join(",");return(0,t[d])()},n={mul:function(l){var u={};return function(d,c,x){var g=d.dtype,p=d.order,v=c.dtype,m=c.order,y=x.dtype,_=x.order,f=[g,p.join(),v,m.join(),y,_.join()].join(),S=u[f];return S||(u[f]=S=l([g,p,v,m,y,_])),S(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},muls:function(l){var u={};return function(d,c,x){var g=d.dtype,p=d.order,v=c.dtype,m=c.order,y=[g,p.join(),v,m.join()].join(),_=u[y];return _||(u[y]=_=l([g,p,v,m])),_(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset,x)}},mulseq:function(l){var u={};return function(d,c){var x=d.dtype,g=d.order,p=[x,g.join()].join(),v=u[p];return v||(u[p]=v=l([x,g])),v(d.shape.slice(0),d.data,d.stride,0|d.offset,c)}},div:function(l){var u={};return function(d,c,x){var g=d.dtype,p=d.order,v=c.dtype,m=c.order,y=x.dtype,_=x.order,f=[g,p.join(),v,m.join(),y,_.join()].join(),S=u[f];return S||(u[f]=S=l([g,p,v,m,y,_])),S(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},divs:function(l){var u={};return function(d,c,x){var g=d.dtype,p=d.order,v=c.dtype,m=c.order,y=[g,p.join(),v,m.join()].join(),_=u[y];return _||(u[y]=_=l([g,p,v,m])),_(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset,x)}},divseq:function(l){var u={};return function(d,c){var x=d.dtype,g=d.order,p=[x,g.join()].join(),v=u[p];return v||(u[p]=v=l([x,g])),v(d.shape.slice(0),d.data,d.stride,0|d.offset,c)}},assign:function(l){var u={};return function(d,c){var x=d.dtype,g=d.order,p=c.dtype,v=c.order,m=[x,g.join(),p,v.join()].join(),y=u[m];return y||(u[m]=y=l([x,g,p,v])),y(d.shape.slice(0),d.data,d.stride,0|d.offset,c.data,c.stride,0|c.offset)}}};function r(l){return u={funcName:l.funcName},(0,n[u.funcName])(i.bind(void 0,u));var u}var a={mul:"*",div:"/"};(function(){for(var l in a)s[l]=r({funcName:l}),s[l+"s"]=r({funcName:l+"s"}),s[l+"seq"]=r({funcName:l+"seq"})})(),s.assign=r({funcName:"assign"})},7382:function(h,s,t){"use strict";var i=t(5050),n=t(9262);h.exports=function(r,a){for(var l=[],u=r,d=1;Array.isArray(u);)l.push(u.length),d*=u.length,u=u[0];return l.length===0?i():(a||(a=i(new Float64Array(d),l)),n(a,r),a)}},9262:function(h){"use strict";h.exports=function(s){var t={};return function(i,n){var r=i.dtype,a=i.order,l=[r,a.join()].join(),u=t[l];return u||(t[l]=u=s([r,a])),u(i.shape.slice(0),i.data,i.stride,0|i.offset,n)}}(function(){return function(s,t,i,n,r){var a=s[0],l=s[1],u=s[2],d=i[0],c=i[1],x=i[2],g=[0,0,0];n|=0;var p=0,v=0,m=0,y=x,_=c-u*x,f=d-l*c;for(m=0;m<a;++m){for(v=0;v<l;++v){for(p=0;p<u;++p){var S,w=r;for(S=0;S<g.length-1;++S)w=w[g[S]];t[n]=w[g[g.length-1]],n+=y,++g[2]}n+=_,g[2]-=u,++g[1]}n+=f,g[1]-=l,++g[0]}}}.bind(void 0,{funcName:"convert"}))},8139:function(h,s,t){"use strict";var i=t(5306);function n(u){return u==="uint32"?[i.mallocUint32,i.freeUint32]:null}var r={"uint32,1,0":function(u,d){return function(c,x,g,p,v,m,y,_,f,S,w){var E,P,C,O,R,j,D,N,W=c*v+p,F=u(_);for(E=c+1;E<=x;++E){for(P=E,C=W+=v,R=0,j=W,O=0;O<_;++O)F[R++]=g[j],j+=f;e:for(;P-- >c;){R=0,j=C-v;t:for(O=0;O<_;++O){if((D=g[j])<(N=F[R]))break e;if(D>N)break t;j+=S,R+=w}for(R=C,j=C-v,O=0;O<_;++O)g[R]=g[j],R+=f,j+=f;C-=v}for(R=C,j=0,O=0;O<_;++O)g[R]=F[j++],R+=f}d(F)}}},a={"uint32,1,0":function(u,d,c){return function x(g,p,v,m,y,_,f,S,w,E,P){var C,O,R,j,D,N,W,F,U,V,te,J,K,X,Z,$,re,oe,ie,ue,me,be,ge,de,ve,pe=(p-g+1)/6|0,_e=g+pe,Te=p-pe,le=g+p>>1,ae=le-pe,he=le+pe,Se=_e,ke=ae,Me=le,Ee=he,De=Te,fe=g+1,xe=p-1,we=!0,Oe=0,ze=0,Pe=0,Ue=S,Ve=d(Ue),Ze=d(Ue);te=y*Se,J=y*ke,ve=m;e:for(V=0;V<S;++V){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){O=Se,Se=ke,ke=O;break e}if(Pe<0)break e;ve+=E}te=y*Ee,J=y*De,ve=m;e:for(V=0;V<S;++V){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){O=Ee,Ee=De,De=O;break e}if(Pe<0)break e;ve+=E}te=y*Se,J=y*Me,ve=m;e:for(V=0;V<S;++V){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){O=Se,Se=Me,Me=O;break e}if(Pe<0)break e;ve+=E}te=y*ke,J=y*Me,ve=m;e:for(V=0;V<S;++V){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){O=ke,ke=Me,Me=O;break e}if(Pe<0)break e;ve+=E}te=y*Se,J=y*Ee,ve=m;e:for(V=0;V<S;++V){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){O=Se,Se=Ee,Ee=O;break e}if(Pe<0)break e;ve+=E}te=y*Me,J=y*Ee,ve=m;e:for(V=0;V<S;++V){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){O=Me,Me=Ee,Ee=O;break e}if(Pe<0)break e;ve+=E}te=y*ke,J=y*De,ve=m;e:for(V=0;V<S;++V){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){O=ke,ke=De,De=O;break e}if(Pe<0)break e;ve+=E}te=y*ke,J=y*Me,ve=m;e:for(V=0;V<S;++V){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){O=ke,ke=Me,Me=O;break e}if(Pe<0)break e;ve+=E}te=y*Ee,J=y*De,ve=m;e:for(V=0;V<S;++V){if(F=J+ve,(Pe=v[W=te+ve]-v[F])>0){O=Ee,Ee=De,De=O;break e}if(Pe<0)break e;ve+=E}for(te=y*Se,J=y*ke,K=y*Me,X=y*Ee,Z=y*De,$=y*_e,re=y*le,oe=y*Te,de=0,ve=m,V=0;V<S;++V)W=te+ve,F=J+ve,U=K+ve,ie=X+ve,ue=Z+ve,me=$+ve,be=re+ve,ge=oe+ve,Ve[de]=v[F],Ze[de]=v[ie],we=we&&Ve[de]===Ze[de],R=v[W],j=v[U],D=v[ue],v[me]=R,v[be]=j,v[ge]=D,++de,ve+=w;for(te=y*ae,J=y*g,ve=m,V=0;V<S;++V)F=J+ve,v[W=te+ve]=v[F],ve+=w;for(te=y*he,J=y*p,ve=m,V=0;V<S;++V)F=J+ve,v[W=te+ve]=v[F],ve+=w;if(we)for(N=fe;N<=xe;++N){for(W=m+N*y,de=0,V=0;V<S&&(Pe=v[W]-Ve[de])==0;++V)de+=P,W+=E;if(Pe!==0)if(Pe<0){if(N!==fe)for(te=y*N,J=y*fe,ve=m,V=0;V<S;++V)F=J+ve,C=v[W=te+ve],v[W]=v[F],v[F]=C,ve+=w;++fe}else for(;;){for(W=m+xe*y,de=0,V=0;V<S&&(Pe=v[W]-Ve[de])==0;++V)de+=P,W+=E;if(!(Pe>0)){if(Pe<0){for(te=y*N,J=y*fe,K=y*xe,ve=m,V=0;V<S;++V)F=J+ve,U=K+ve,C=v[W=te+ve],v[W]=v[F],v[F]=v[U],v[U]=C,ve+=w;++fe,--xe;break}for(te=y*N,J=y*xe,ve=m,V=0;V<S;++V)F=J+ve,C=v[W=te+ve],v[W]=v[F],v[F]=C,ve+=w;--xe;break}xe--}}else for(N=fe;N<=xe;++N){for(W=m+N*y,de=0,V=0;V<S&&(Oe=v[W]-Ve[de])==0;++V)de+=P,W+=E;if(Oe<0){if(N!==fe)for(te=y*N,J=y*fe,ve=m,V=0;V<S;++V)F=J+ve,C=v[W=te+ve],v[W]=v[F],v[F]=C,ve+=w;++fe}else{for(W=m+N*y,de=0,V=0;V<S&&(ze=v[W]-Ze[de])==0;++V)de+=P,W+=E;if(ze>0)for(;;){for(W=m+xe*y,de=0,V=0;V<S&&(Pe=v[W]-Ze[de])==0;++V)de+=P,W+=E;if(!(Pe>0)){for(W=m+xe*y,de=0,V=0;V<S&&(Pe=v[W]-Ve[de])==0;++V)de+=P,W+=E;if(Pe<0){for(te=y*N,J=y*fe,K=y*xe,ve=m,V=0;V<S;++V)F=J+ve,U=K+ve,C=v[W=te+ve],v[W]=v[F],v[F]=v[U],v[U]=C,ve+=w;++fe,--xe}else{for(te=y*N,J=y*xe,ve=m,V=0;V<S;++V)F=J+ve,C=v[W=te+ve],v[W]=v[F],v[F]=C,ve+=w;--xe}break}if(--xe<N)break}}}for(te=y*g,J=y*(fe-1),de=0,ve=m,V=0;V<S;++V)F=J+ve,v[W=te+ve]=v[F],v[F]=Ve[de],++de,ve+=w;for(te=y*p,J=y*(xe+1),de=0,ve=m,V=0;V<S;++V)F=J+ve,v[W=te+ve]=v[F],v[F]=Ze[de],++de,ve+=w;if(fe-2-g<=32?u(g,fe-2,v,m,y,_,f,S,w,E,P):x(g,fe-2,v,m,y,_,f,S,w,E,P),p-(xe+2)<=32?u(xe+2,p,v,m,y,_,f,S,w,E,P):x(xe+2,p,v,m,y,_,f,S,w,E,P),we)return c(Ve),void c(Ze);if(fe<_e&&xe>Te){e:for(;;){for(W=m+fe*y,de=0,ve=m,V=0;V<S;++V){if(v[W]!==Ve[de])break e;++de,W+=w}++fe}e:for(;;){for(W=m+xe*y,de=0,ve=m,V=0;V<S;++V){if(v[W]!==Ze[de])break e;++de,W+=w}--xe}for(N=fe;N<=xe;++N){for(W=m+N*y,de=0,V=0;V<S&&(Oe=v[W]-Ve[de])==0;++V)de+=P,W+=E;if(Oe===0){if(N!==fe)for(te=y*N,J=y*fe,ve=m,V=0;V<S;++V)F=J+ve,C=v[W=te+ve],v[W]=v[F],v[F]=C,ve+=w;++fe}else{for(W=m+N*y,de=0,V=0;V<S&&(ze=v[W]-Ze[de])==0;++V)de+=P,W+=E;if(ze===0)for(;;){for(W=m+xe*y,de=0,V=0;V<S&&(Pe=v[W]-Ze[de])==0;++V)de+=P,W+=E;if(Pe!==0){for(W=m+xe*y,de=0,V=0;V<S&&(Pe=v[W]-Ve[de])==0;++V)de+=P,W+=E;if(Pe<0){for(te=y*N,J=y*fe,K=y*xe,ve=m,V=0;V<S;++V)F=J+ve,U=K+ve,C=v[W=te+ve],v[W]=v[F],v[F]=v[U],v[U]=C,ve+=w;++fe,--xe}else{for(te=y*N,J=y*xe,ve=m,V=0;V<S;++V)F=J+ve,C=v[W=te+ve],v[W]=v[F],v[F]=C,ve+=w;--xe}break}if(--xe<N)break}}}}c(Ve),c(Ze),xe-fe<=32?u(fe,xe,v,m,y,_,f,S,w,E,P):x(fe,xe,v,m,y,_,f,S,w,E,P)}}},l={"uint32,1,0":function(u,d){return function(c){var x=c.data,g=0|c.offset,p=c.shape,v=c.stride,m=0|v[0],y=0|p[0],_=0|v[1],f=0|p[1],S=_,w=_;y<=32?u(0,y-1,x,g,m,_,y,f,S,w,1):d(0,y-1,x,g,m,_,y,f,S,w,1)}}};h.exports=function(u,d){var c=[d,u].join(","),x=l[c],g=function(v,m){var y=n(m),_=[m,v].join(","),f=r[_];return y?f(y[0],y[1]):f()}(u,d),p=function(v,m,y){var _=n(m),f=[m,v].join(","),S=a[f];return v.length>1&&_?S(y,_[0],_[1]):S(y)}(u,d,g);return x(g,p)}},8729:function(h,s,t){"use strict";var i=t(8139),n={};h.exports=function(r){var a=r.order,l=r.dtype,u=[a,l].join(":"),d=n[u];return d||(n[u]=d=i(a,l)),d(r),r}},5050:function(h,s,t){var i=t(4780),n=typeof Float64Array!="undefined";function r(c,x){return c[0]-x[0]}function a(){var c,x=this.stride,g=new Array(x.length);for(c=0;c<g.length;++c)g[c]=[Math.abs(x[c]),c];g.sort(r);var p=new Array(g.length);for(c=0;c<p.length;++c)p[c]=g[c][1];return p}var l={T:function(c){function x(p){this.data=p}var g=x.prototype;return g.dtype=c,g.index=function(){return-1},g.size=0,g.dimension=-1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new x(this.data)},g.get=g.set=function(){},g.pick=function(){return null},function(p){return new x(p)}},0:function(c,x){function g(v,m){this.data=v,this.offset=m}var p=g.prototype;return p.dtype=c,p.index=function(){return this.offset},p.dimension=0,p.size=1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new g(this.data,this.offset)},p.pick=function(){return x(this.data)},p.valueOf=p.get=function(){return c==="generic"?this.data.get(this.offset):this.data[this.offset]},p.set=function(v){return c==="generic"?this.data.set(this.offset,v):this.data[this.offset]=v},function(v,m,y,_){return new g(v,_)}},1:function(c,x,g){function p(m,y,_,f){this.data=m,this.shape=[y],this.stride=[_],this.offset=0|f}var v=p.prototype;return v.dtype=c,v.dimension=1,Object.defineProperty(v,"size",{get:function(){return this.shape[0]}}),v.order=[0],v.set=function(m,y){return c==="generic"?this.data.set(this.offset+this.stride[0]*m,y):this.data[this.offset+this.stride[0]*m]=y},v.get=function(m){return c==="generic"?this.data.get(this.offset+this.stride[0]*m):this.data[this.offset+this.stride[0]*m]},v.index=function(m){return this.offset+this.stride[0]*m},v.hi=function(m){return new p(this.data,typeof m!="number"||m<0?this.shape[0]:0|m,this.stride[0],this.offset)},v.lo=function(m){var y=this.offset,_=0,f=this.shape[0],S=this.stride[0];return typeof m=="number"&&m>=0&&(y+=S*(_=0|m),f-=_),new p(this.data,f,S,y)},v.step=function(m){var y=this.shape[0],_=this.stride[0],f=this.offset,S=0,w=Math.ceil;return typeof m=="number"&&((S=0|m)<0?(f+=_*(y-1),y=w(-y/S)):y=w(y/S),_*=S),new p(this.data,y,_,f)},v.transpose=function(m){m=m===void 0?0:0|m;var y=this.shape,_=this.stride;return new p(this.data,y[m],_[m],this.offset)},v.pick=function(m){var y=[],_=[],f=this.offset;return typeof m=="number"&&m>=0?f=f+this.stride[0]*m|0:(y.push(this.shape[0]),_.push(this.stride[0])),(0,x[y.length+1])(this.data,y,_,f)},function(m,y,_,f){return new p(m,y[0],_[0],f)}},2:function(c,x,g){function p(m,y,_,f,S,w){this.data=m,this.shape=[y,_],this.stride=[f,S],this.offset=0|w}var v=p.prototype;return v.dtype=c,v.dimension=2,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(v,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),v.set=function(m,y,_){return c==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*y,_):this.data[this.offset+this.stride[0]*m+this.stride[1]*y]=_},v.get=function(m,y){return c==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*y):this.data[this.offset+this.stride[0]*m+this.stride[1]*y]},v.index=function(m,y){return this.offset+this.stride[0]*m+this.stride[1]*y},v.hi=function(m,y){return new p(this.data,typeof m!="number"||m<0?this.shape[0]:0|m,typeof y!="number"||y<0?this.shape[1]:0|y,this.stride[0],this.stride[1],this.offset)},v.lo=function(m,y){var _=this.offset,f=0,S=this.shape[0],w=this.shape[1],E=this.stride[0],P=this.stride[1];return typeof m=="number"&&m>=0&&(_+=E*(f=0|m),S-=f),typeof y=="number"&&y>=0&&(_+=P*(f=0|y),w-=f),new p(this.data,S,w,E,P,_)},v.step=function(m,y){var _=this.shape[0],f=this.shape[1],S=this.stride[0],w=this.stride[1],E=this.offset,P=0,C=Math.ceil;return typeof m=="number"&&((P=0|m)<0?(E+=S*(_-1),_=C(-_/P)):_=C(_/P),S*=P),typeof y=="number"&&((P=0|y)<0?(E+=w*(f-1),f=C(-f/P)):f=C(f/P),w*=P),new p(this.data,_,f,S,w,E)},v.transpose=function(m,y){m=m===void 0?0:0|m,y=y===void 0?1:0|y;var _=this.shape,f=this.stride;return new p(this.data,_[m],_[y],f[m],f[y],this.offset)},v.pick=function(m,y){var _=[],f=[],S=this.offset;return typeof m=="number"&&m>=0?S=S+this.stride[0]*m|0:(_.push(this.shape[0]),f.push(this.stride[0])),typeof y=="number"&&y>=0?S=S+this.stride[1]*y|0:(_.push(this.shape[1]),f.push(this.stride[1])),(0,x[_.length+1])(this.data,_,f,S)},function(m,y,_,f){return new p(m,y[0],y[1],_[0],_[1],f)}},3:function(c,x,g){function p(m,y,_,f,S,w,E,P){this.data=m,this.shape=[y,_,f],this.stride=[S,w,E],this.offset=0|P}var v=p.prototype;return v.dtype=c,v.dimension=3,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(v,"order",{get:function(){var m=Math.abs(this.stride[0]),y=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return m>y?y>_?[2,1,0]:m>_?[1,2,0]:[1,0,2]:m>_?[2,0,1]:_>y?[0,1,2]:[0,2,1]}}),v.set=function(m,y,_,f){return c==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_,f):this.data[this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_]=f},v.get=function(m,y,_){return c==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_):this.data[this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_]},v.index=function(m,y,_){return this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_},v.hi=function(m,y,_){return new p(this.data,typeof m!="number"||m<0?this.shape[0]:0|m,typeof y!="number"||y<0?this.shape[1]:0|y,typeof _!="number"||_<0?this.shape[2]:0|_,this.stride[0],this.stride[1],this.stride[2],this.offset)},v.lo=function(m,y,_){var f=this.offset,S=0,w=this.shape[0],E=this.shape[1],P=this.shape[2],C=this.stride[0],O=this.stride[1],R=this.stride[2];return typeof m=="number"&&m>=0&&(f+=C*(S=0|m),w-=S),typeof y=="number"&&y>=0&&(f+=O*(S=0|y),E-=S),typeof _=="number"&&_>=0&&(f+=R*(S=0|_),P-=S),new p(this.data,w,E,P,C,O,R,f)},v.step=function(m,y,_){var f=this.shape[0],S=this.shape[1],w=this.shape[2],E=this.stride[0],P=this.stride[1],C=this.stride[2],O=this.offset,R=0,j=Math.ceil;return typeof m=="number"&&((R=0|m)<0?(O+=E*(f-1),f=j(-f/R)):f=j(f/R),E*=R),typeof y=="number"&&((R=0|y)<0?(O+=P*(S-1),S=j(-S/R)):S=j(S/R),P*=R),typeof _=="number"&&((R=0|_)<0?(O+=C*(w-1),w=j(-w/R)):w=j(w/R),C*=R),new p(this.data,f,S,w,E,P,C,O)},v.transpose=function(m,y,_){m=m===void 0?0:0|m,y=y===void 0?1:0|y,_=_===void 0?2:0|_;var f=this.shape,S=this.stride;return new p(this.data,f[m],f[y],f[_],S[m],S[y],S[_],this.offset)},v.pick=function(m,y,_){var f=[],S=[],w=this.offset;return typeof m=="number"&&m>=0?w=w+this.stride[0]*m|0:(f.push(this.shape[0]),S.push(this.stride[0])),typeof y=="number"&&y>=0?w=w+this.stride[1]*y|0:(f.push(this.shape[1]),S.push(this.stride[1])),typeof _=="number"&&_>=0?w=w+this.stride[2]*_|0:(f.push(this.shape[2]),S.push(this.stride[2])),(0,x[f.length+1])(this.data,f,S,w)},function(m,y,_,f){return new p(m,y[0],y[1],y[2],_[0],_[1],_[2],f)}},4:function(c,x,g){function p(m,y,_,f,S,w,E,P,C,O){this.data=m,this.shape=[y,_,f,S],this.stride=[w,E,P,C],this.offset=0|O}var v=p.prototype;return v.dtype=c,v.dimension=4,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(v,"order",{get:g}),v.set=function(m,y,_,f,S){return c==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_+this.stride[3]*f,S):this.data[this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_+this.stride[3]*f]=S},v.get=function(m,y,_,f){return c==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_+this.stride[3]*f):this.data[this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_+this.stride[3]*f]},v.index=function(m,y,_,f){return this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_+this.stride[3]*f},v.hi=function(m,y,_,f){return new p(this.data,typeof m!="number"||m<0?this.shape[0]:0|m,typeof y!="number"||y<0?this.shape[1]:0|y,typeof _!="number"||_<0?this.shape[2]:0|_,typeof f!="number"||f<0?this.shape[3]:0|f,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},v.lo=function(m,y,_,f){var S=this.offset,w=0,E=this.shape[0],P=this.shape[1],C=this.shape[2],O=this.shape[3],R=this.stride[0],j=this.stride[1],D=this.stride[2],N=this.stride[3];return typeof m=="number"&&m>=0&&(S+=R*(w=0|m),E-=w),typeof y=="number"&&y>=0&&(S+=j*(w=0|y),P-=w),typeof _=="number"&&_>=0&&(S+=D*(w=0|_),C-=w),typeof f=="number"&&f>=0&&(S+=N*(w=0|f),O-=w),new p(this.data,E,P,C,O,R,j,D,N,S)},v.step=function(m,y,_,f){var S=this.shape[0],w=this.shape[1],E=this.shape[2],P=this.shape[3],C=this.stride[0],O=this.stride[1],R=this.stride[2],j=this.stride[3],D=this.offset,N=0,W=Math.ceil;return typeof m=="number"&&((N=0|m)<0?(D+=C*(S-1),S=W(-S/N)):S=W(S/N),C*=N),typeof y=="number"&&((N=0|y)<0?(D+=O*(w-1),w=W(-w/N)):w=W(w/N),O*=N),typeof _=="number"&&((N=0|_)<0?(D+=R*(E-1),E=W(-E/N)):E=W(E/N),R*=N),typeof f=="number"&&((N=0|f)<0?(D+=j*(P-1),P=W(-P/N)):P=W(P/N),j*=N),new p(this.data,S,w,E,P,C,O,R,j,D)},v.transpose=function(m,y,_,f){m=m===void 0?0:0|m,y=y===void 0?1:0|y,_=_===void 0?2:0|_,f=f===void 0?3:0|f;var S=this.shape,w=this.stride;return new p(this.data,S[m],S[y],S[_],S[f],w[m],w[y],w[_],w[f],this.offset)},v.pick=function(m,y,_,f){var S=[],w=[],E=this.offset;return typeof m=="number"&&m>=0?E=E+this.stride[0]*m|0:(S.push(this.shape[0]),w.push(this.stride[0])),typeof y=="number"&&y>=0?E=E+this.stride[1]*y|0:(S.push(this.shape[1]),w.push(this.stride[1])),typeof _=="number"&&_>=0?E=E+this.stride[2]*_|0:(S.push(this.shape[2]),w.push(this.stride[2])),typeof f=="number"&&f>=0?E=E+this.stride[3]*f|0:(S.push(this.shape[3]),w.push(this.stride[3])),(0,x[S.length+1])(this.data,S,w,E)},function(m,y,_,f){return new p(m,y[0],y[1],y[2],y[3],_[0],_[1],_[2],_[3],f)}},5:function(c,x,g){function p(m,y,_,f,S,w,E,P,C,O,R,j){this.data=m,this.shape=[y,_,f,S,w],this.stride=[E,P,C,O,R],this.offset=0|j}var v=p.prototype;return v.dtype=c,v.dimension=5,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(v,"order",{get:g}),v.set=function(m,y,_,f,S,w){return c==="generic"?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S,w):this.data[this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S]=w},v.get=function(m,y,_,f,S){return c==="generic"?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S):this.data[this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S]},v.index=function(m,y,_,f,S){return this.offset+this.stride[0]*m+this.stride[1]*y+this.stride[2]*_+this.stride[3]*f+this.stride[4]*S},v.hi=function(m,y,_,f,S){return new p(this.data,typeof m!="number"||m<0?this.shape[0]:0|m,typeof y!="number"||y<0?this.shape[1]:0|y,typeof _!="number"||_<0?this.shape[2]:0|_,typeof f!="number"||f<0?this.shape[3]:0|f,typeof S!="number"||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},v.lo=function(m,y,_,f,S){var w=this.offset,E=0,P=this.shape[0],C=this.shape[1],O=this.shape[2],R=this.shape[3],j=this.shape[4],D=this.stride[0],N=this.stride[1],W=this.stride[2],F=this.stride[3],U=this.stride[4];return typeof m=="number"&&m>=0&&(w+=D*(E=0|m),P-=E),typeof y=="number"&&y>=0&&(w+=N*(E=0|y),C-=E),typeof _=="number"&&_>=0&&(w+=W*(E=0|_),O-=E),typeof f=="number"&&f>=0&&(w+=F*(E=0|f),R-=E),typeof S=="number"&&S>=0&&(w+=U*(E=0|S),j-=E),new p(this.data,P,C,O,R,j,D,N,W,F,U,w)},v.step=function(m,y,_,f,S){var w=this.shape[0],E=this.shape[1],P=this.shape[2],C=this.shape[3],O=this.shape[4],R=this.stride[0],j=this.stride[1],D=this.stride[2],N=this.stride[3],W=this.stride[4],F=this.offset,U=0,V=Math.ceil;return typeof m=="number"&&((U=0|m)<0?(F+=R*(w-1),w=V(-w/U)):w=V(w/U),R*=U),typeof y=="number"&&((U=0|y)<0?(F+=j*(E-1),E=V(-E/U)):E=V(E/U),j*=U),typeof _=="number"&&((U=0|_)<0?(F+=D*(P-1),P=V(-P/U)):P=V(P/U),D*=U),typeof f=="number"&&((U=0|f)<0?(F+=N*(C-1),C=V(-C/U)):C=V(C/U),N*=U),typeof S=="number"&&((U=0|S)<0?(F+=W*(O-1),O=V(-O/U)):O=V(O/U),W*=U),new p(this.data,w,E,P,C,O,R,j,D,N,W,F)},v.transpose=function(m,y,_,f,S){m=m===void 0?0:0|m,y=y===void 0?1:0|y,_=_===void 0?2:0|_,f=f===void 0?3:0|f,S=S===void 0?4:0|S;var w=this.shape,E=this.stride;return new p(this.data,w[m],w[y],w[_],w[f],w[S],E[m],E[y],E[_],E[f],E[S],this.offset)},v.pick=function(m,y,_,f,S){var w=[],E=[],P=this.offset;return typeof m=="number"&&m>=0?P=P+this.stride[0]*m|0:(w.push(this.shape[0]),E.push(this.stride[0])),typeof y=="number"&&y>=0?P=P+this.stride[1]*y|0:(w.push(this.shape[1]),E.push(this.stride[1])),typeof _=="number"&&_>=0?P=P+this.stride[2]*_|0:(w.push(this.shape[2]),E.push(this.stride[2])),typeof f=="number"&&f>=0?P=P+this.stride[3]*f|0:(w.push(this.shape[3]),E.push(this.stride[3])),typeof S=="number"&&S>=0?P=P+this.stride[4]*S|0:(w.push(this.shape[4]),E.push(this.stride[4])),(0,x[w.length+1])(this.data,w,E,P)},function(m,y,_,f){return new p(m,y[0],y[1],y[2],y[3],y[4],_[0],_[1],_[2],_[3],_[4],f)}}};function u(c,x){var g=x===-1?"T":String(x),p=l[g];return x===-1?p(c):x===0?p(c,d[c][0]):p(c,d[c],a)}var d={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};h.exports=function(c,x,g,p){if(c===void 0)return(0,d.array[0])([]);typeof c=="number"&&(c=[c]),x===void 0&&(x=[c.length]);var v=x.length;if(g===void 0){g=new Array(v);for(var m=v-1,y=1;m>=0;--m)g[m]=y,y*=x[m]}if(p===void 0)for(p=0,m=0;m<v;++m)g[m]<0&&(p-=(x[m]-1)*g[m]);for(var _=function(S){if(i(S))return"buffer";if(n)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(c),f=d[_];f.length<=v+1;)f.push(u(_,f.length-1));return(0,f[v+1])(c,x,g,p)}},8551:function(h,s,t){"use strict";var i=t(8362),n=Math.pow(2,-1074),r=-1>>>0;h.exports=function(a,l){if(isNaN(a)||isNaN(l))return NaN;if(a===l)return a;if(a===0)return l<0?-n:n;var u=i.hi(a),d=i.lo(a);return l>a==a>0?d===r?(u+=1,d=0):d+=1:d===0?(d=r,u-=1):d-=1,i.pack(d,u)}},115:function(h,s){s.vertexNormals=function(t,i,n){for(var r=i.length,a=new Array(r),l=n===void 0?1e-6:n,u=0;u<r;++u)a[u]=[0,0,0];for(u=0;u<t.length;++u)for(var d=t[u],c=0,x=d[d.length-1],g=d[0],p=0;p<d.length;++p){c=x,x=g,g=d[(p+1)%d.length];for(var v=i[c],m=i[x],y=i[g],_=new Array(3),f=0,S=new Array(3),w=0,E=0;E<3;++E)_[E]=v[E]-m[E],f+=_[E]*_[E],S[E]=y[E]-m[E],w+=S[E]*S[E];if(f*w>l){var P=a[x],C=1/Math.sqrt(f*w);for(E=0;E<3;++E){var O=(E+1)%3,R=(E+2)%3;P[E]+=C*(S[O]*_[R]-S[R]*_[O])}}}for(u=0;u<r;++u){P=a[u];var j=0;for(E=0;E<3;++E)j+=P[E]*P[E];if(j>l)for(C=1/Math.sqrt(j),E=0;E<3;++E)P[E]*=C;else for(E=0;E<3;++E)P[E]=0}return a},s.faceNormals=function(t,i,n){for(var r=t.length,a=new Array(r),l=n===void 0?1e-6:n,u=0;u<r;++u){for(var d=t[u],c=new Array(3),x=0;x<3;++x)c[x]=i[d[x]];var g=new Array(3),p=new Array(3);for(x=0;x<3;++x)g[x]=c[1][x]-c[0][x],p[x]=c[2][x]-c[0][x];var v=new Array(3),m=0;for(x=0;x<3;++x){var y=(x+1)%3,_=(x+2)%3;v[x]=g[y]*p[_]-g[_]*p[y],m+=v[x]*v[x]}for(m=m>l?1/Math.sqrt(m):0,x=0;x<3;++x)v[x]*=m;a[u]=v}return a}},567:function(h){"use strict";h.exports=function(s,t,i,n,r,a,l,u,d,c){var x=t+a+c;if(g>0){var g=Math.sqrt(x+1);s[0]=.5*(l-d)/g,s[1]=.5*(u-n)/g,s[2]=.5*(i-a)/g,s[3]=.5*g}else{var p=Math.max(t,a,c);g=Math.sqrt(2*p-x+1),t>=p?(s[0]=.5*g,s[1]=.5*(r+i)/g,s[2]=.5*(u+n)/g,s[3]=.5*(l-d)/g):a>=p?(s[0]=.5*(i+r)/g,s[1]=.5*g,s[2]=.5*(d+l)/g,s[3]=.5*(u-n)/g):(s[0]=.5*(n+u)/g,s[1]=.5*(l+d)/g,s[2]=.5*g,s[3]=.5*(i-r)/g)}return s}},7774:function(h,s,t){"use strict";h.exports=function(p){var v=(p=p||{}).center||[0,0,0],m=p.rotation||[0,0,0,1],y=p.radius||1;v=[].slice.call(v,0,3),c(m=[].slice.call(m,0,4),m);var _=new x(m,v,Math.log(y));return _.setDistanceLimits(p.zoomMin,p.zoomMax),("eye"in p||"up"in p)&&_.lookAt(0,p.eye,p.center,p.up),_};var i=t(8444),n=t(3012),r=t(5950),a=t(7437),l=t(567);function u(p,v,m){return Math.sqrt(Math.pow(p,2)+Math.pow(v,2)+Math.pow(m,2))}function d(p,v,m,y){return Math.sqrt(Math.pow(p,2)+Math.pow(v,2)+Math.pow(m,2)+Math.pow(y,2))}function c(p,v){var m=v[0],y=v[1],_=v[2],f=v[3],S=d(m,y,_,f);S>1e-6?(p[0]=m/S,p[1]=y/S,p[2]=_/S,p[3]=f/S):(p[0]=p[1]=p[2]=0,p[3]=1)}function x(p,v,m){this.radius=i([m]),this.center=i(v),this.rotation=i(p),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var g=x.prototype;g.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},g.recalcMatrix=function(p){this.radius.curve(p),this.center.curve(p),this.rotation.curve(p);var v=this.computedRotation;c(v,v);var m=this.computedMatrix;r(m,v);var y=this.computedCenter,_=this.computedEye,f=this.computedUp,S=Math.exp(this.computedRadius[0]);_[0]=y[0]+S*m[2],_[1]=y[1]+S*m[6],_[2]=y[2]+S*m[10],f[0]=m[1],f[1]=m[5],f[2]=m[9];for(var w=0;w<3;++w){for(var E=0,P=0;P<3;++P)E+=m[w+4*P]*_[P];m[12+w]=-E}},g.getMatrix=function(p,v){this.recalcMatrix(p);var m=this.computedMatrix;if(v){for(var y=0;y<16;++y)v[y]=m[y];return v}return m},g.idle=function(p){this.center.idle(p),this.radius.idle(p),this.rotation.idle(p)},g.flush=function(p){this.center.flush(p),this.radius.flush(p),this.rotation.flush(p)},g.pan=function(p,v,m,y){v=v||0,m=m||0,y=y||0,this.recalcMatrix(p);var _=this.computedMatrix,f=_[1],S=_[5],w=_[9],E=u(f,S,w);f/=E,S/=E,w/=E;var P=_[0],C=_[4],O=_[8],R=P*f+C*S+O*w,j=u(P-=f*R,C-=S*R,O-=w*R);P/=j,C/=j,O/=j;var D=_[2],N=_[6],W=_[10],F=D*f+N*S+W*w,U=D*P+N*C+W*O,V=u(D-=F*f+U*P,N-=F*S+U*C,W-=F*w+U*O);D/=V,N/=V,W/=V;var te=P*v+f*m,J=C*v+S*m,K=O*v+w*m;this.center.move(p,te,J,K);var X=Math.exp(this.computedRadius[0]);X=Math.max(1e-4,X+y),this.radius.set(p,Math.log(X))},g.rotate=function(p,v,m,y){this.recalcMatrix(p),v=v||0,m=m||0;var _=this.computedMatrix,f=_[0],S=_[4],w=_[8],E=_[1],P=_[5],C=_[9],O=_[2],R=_[6],j=_[10],D=v*f+m*E,N=v*S+m*P,W=v*w+m*C,F=-(R*W-j*N),U=-(j*D-O*W),V=-(O*N-R*D),te=Math.sqrt(Math.max(0,1-Math.pow(F,2)-Math.pow(U,2)-Math.pow(V,2))),J=d(F,U,V,te);J>1e-6?(F/=J,U/=J,V/=J,te/=J):(F=U=V=0,te=1);var K=this.computedRotation,X=K[0],Z=K[1],$=K[2],re=K[3],oe=X*te+re*F+Z*V-$*U,ie=Z*te+re*U+$*F-X*V,ue=$*te+re*V+X*U-Z*F,me=re*te-X*F-Z*U-$*V;if(y){F=O,U=R,V=j;var be=Math.sin(y)/u(F,U,V);F*=be,U*=be,V*=be,me=me*(te=Math.cos(v))-(oe=oe*te+me*F+ie*V-ue*U)*F-(ie=ie*te+me*U+ue*F-oe*V)*U-(ue=ue*te+me*V+oe*U-ie*F)*V}var ge=d(oe,ie,ue,me);ge>1e-6?(oe/=ge,ie/=ge,ue/=ge,me/=ge):(oe=ie=ue=0,me=1),this.rotation.set(p,oe,ie,ue,me)},g.lookAt=function(p,v,m,y){this.recalcMatrix(p),m=m||this.computedCenter,v=v||this.computedEye,y=y||this.computedUp;var _=this.computedMatrix;n(_,v,m,y);var f=this.computedRotation;l(f,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),c(f,f),this.rotation.set(p,f[0],f[1],f[2],f[3]);for(var S=0,w=0;w<3;++w)S+=Math.pow(m[w]-v[w],2);this.radius.set(p,.5*Math.log(Math.max(S,1e-6))),this.center.set(p,m[0],m[1],m[2])},g.translate=function(p,v,m,y){this.center.move(p,v||0,m||0,y||0)},g.setMatrix=function(p,v){var m=this.computedRotation;l(m,v[0],v[1],v[2],v[4],v[5],v[6],v[8],v[9],v[10]),c(m,m),this.rotation.set(p,m[0],m[1],m[2],m[3]);var y=this.computedMatrix;a(y,v);var _=y[15];if(Math.abs(_)>1e-6){var f=y[12]/_,S=y[13]/_,w=y[14]/_;this.recalcMatrix(p);var E=Math.exp(this.computedRadius[0]);this.center.set(p,f-y[2]*E,S-y[6]*E,w-y[10]*E),this.radius.idle(p)}else this.center.idle(p),this.radius.idle(p)},g.setDistance=function(p,v){v>0&&this.radius.set(p,Math.log(v))},g.setDistanceLimits=function(p,v){p=p>0?Math.log(p):-1/0,v=v>0?Math.log(v):1/0,v=Math.max(v,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=v},g.getDistanceLimits=function(p){var v=this.radius.bounds;return p?(p[0]=Math.exp(v[0][0]),p[1]=Math.exp(v[1][0]),p):[Math.exp(v[0][0]),Math.exp(v[1][0])]},g.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},g.fromJSON=function(p){var v=this.lastT(),m=p.center;m&&this.center.set(v,m[0],m[1],m[2]);var y=p.rotation;y&&this.rotation.set(v,y[0],y[1],y[2],y[3]);var _=p.distance;_&&_>0&&this.radius.set(v,Math.log(_)),this.setDistanceLimits(p.zoomMin,p.zoomMax)}},4930:function(h,s,t){"use strict";var i=t(6184);h.exports=function(n,r,a){return i(a=a!==void 0?a+"":" ",r)+n}},4405:function(h){h.exports=function(s,t){t||(t=[0,""]),s=String(s);var i=parseFloat(s,10);return t[0]=i,t[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},4166:function(h,s,t){"use strict";h.exports=function(n,r){for(var a=0|r.length,l=n.length,u=[new Array(a),new Array(a)],d=0;d<a;++d)u[0][d]=[],u[1][d]=[];for(d=0;d<l;++d){var c=n[d];u[0][c[0]].push(c),u[1][c[1]].push(c)}var x=[];for(d=0;d<a;++d)u[0][d].length+u[1][d].length===0&&x.push([d]);function g(S,w){var E=u[w][S[w]];E.splice(E.indexOf(S),1)}function p(S,w,E){for(var P,C,O,R=0;R<2;++R)if(u[R][w].length>0){P=u[R][w][0],O=R;break}C=P[1^O];for(var j=0;j<2;++j)for(var D=u[j][w],N=0;N<D.length;++N){var W=D[N],F=W[1^j];i(r[S],r[w],r[C],r[F])>0&&(P=W,C=F,O=j)}return E||P&&g(P,O),C}function v(S,w){var E=u[w][S][0],P=[S];g(E,w);for(var C=E[1^w];;){for(;C!==S;)P.push(C),C=p(P[P.length-2],C,!1);if(u[0][S].length+u[1][S].length===0)break;var O=P[P.length-1],R=S,j=P[1],D=p(O,R,!0);if(i(r[O],r[R],r[j],r[D])<0)break;P.push(S),C=p(O,R)}return P}function m(S,w){return w[1]===w[w.length-1]}for(d=0;d<a;++d)for(var y=0;y<2;++y){for(var _=[];u[y][d].length>0;){u[0][d].length;var f=v(d,y);m(0,f)?_.push.apply(_,f):(_.length>0&&x.push(_),_=f)}_.length>0&&x.push(_)}return x};var i=t(9398)},3959:function(h,s,t){"use strict";h.exports=function(n,r){for(var a=i(n,r.length),l=new Array(r.length),u=new Array(r.length),d=[],c=0;c<r.length;++c){var x=a[c].length;u[c]=x,l[c]=!0,x<=1&&d.push(c)}for(;d.length>0;){l[y=d.pop()]=!1;var g=a[y];for(c=0;c<g.length;++c){var p=g[c];--u[p]==0&&d.push(p)}}var v=new Array(r.length),m=[];for(c=0;c<r.length;++c)if(l[c]){var y=m.length;v[c]=y,m.push(r[c])}else v[c]=-1;var _=[];for(c=0;c<n.length;++c){var f=n[c];l[f[0]]&&l[f[1]]&&_.push([v[f[0]],v[f[1]]])}return[_,m]};var i=t(8348)},8040:function(h,s,t){"use strict";h.exports=function(x,g){var p=d(x,g);x=p[0];for(var v=(g=p[1]).length,m=(x.length,i(x,g.length)),y=0;y<v;++y)if(m[y].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var _=n(x,g),f=(_=_.filter(function(pe){for(var _e=pe.length,Te=[0],le=0;le<_e;++le){var ae=g[pe[le]],he=g[pe[(le+1)%_e]],Se=a(-ae[0],ae[1]),ke=a(-ae[0],he[1]),Me=a(he[0],ae[1]),Ee=a(he[0],he[1]);Te=l(Te,l(l(Se,ke),l(Me,Ee)))}return Te[Te.length-1]>0})).length,S=new Array(f),w=new Array(f);for(y=0;y<f;++y){S[y]=y;var E=new Array(f),P=_[y].map(function(pe){return g[pe]}),C=r([P]),O=0;e:for(var R=0;R<f;++R)if(E[R]=0,y!==R){for(var j=(de=_[R]).length,D=0;D<j;++D){var N=C(g[de[D]]);if(N!==0){N<0&&(E[R]=1,O+=1);continue e}}E[R]=1,O+=1}w[y]=[O,y,E]}for(w.sort(function(pe,_e){return _e[0]-pe[0]}),y=0;y<f;++y){var W=(E=w[y])[1],F=E[2];for(R=0;R<f;++R)F[R]&&(S[R]=W)}var U=function(pe){for(var _e=new Array(pe),Te=0;Te<pe;++Te)_e[Te]=[];return _e}(f);for(y=0;y<f;++y)U[y].push(S[y]),U[S[y]].push(y);var V={},te=c(v,!1);for(y=0;y<f;++y)for(j=(de=_[y]).length,R=0;R<j;++R){var J=de[R],K=de[(R+1)%j],X=Math.min(J,K)+":"+Math.max(J,K);if(X in V){var Z=V[X];U[Z].push(y),U[y].push(Z),te[J]=te[K]=!0}else V[X]=y}function $(pe){for(var _e=pe.length,Te=0;Te<_e;++Te)if(!te[pe[Te]])return!1;return!0}var re=[],oe=c(f,-1);for(y=0;y<f;++y)S[y]!==y||$(_[y])?oe[y]=-1:(re.push(y),oe[y]=0);for(p=[];re.length>0;){var ie=re.pop(),ue=U[ie];u(ue,function(pe,_e){return pe-_e});var me,be=ue.length,ge=oe[ie];for(ge===0&&(me=[de=_[ie]]),y=0;y<be;++y){var de,ve=ue[y];oe[ve]>=0||(oe[ve]=1^ge,re.push(ve),ge===0&&($(de=_[ve])||(de.reverse(),me.push(de))))}ge===0&&p.push(me)}return p};var i=t(8348),n=t(4166),r=t(211),a=t(9660),l=t(9662),u=t(1215),d=t(3959);function c(x,g){for(var p=new Array(x),v=0;v<x;++v)p[v]=g;return p}},211:function(h,s,t){h.exports=function(c){for(var x=c.length,g=[],p=[],v=0;v<x;++v)for(var m=c[v],y=m.length,_=y-1,f=0;f<y;_=f++){var S=m[_],w=m[f];S[0]===w[0]?p.push([S,w]):g.push([S,w])}if(g.length===0)return p.length===0?d:(E=u(p),function(O){return E(O[0],O[1])?0:1});var E,P=n(g),C=function(O,R){return function(j){var D=a.le(R,j[0]);if(D<0)return 1;var N=O[D];if(!N){if(!(D>0&&R[D]===j[0]))return 1;N=O[D-1]}for(var W=1;N;){var F=N.key,U=i(j,F[0],F[1]);if(F[0][0]<F[1][0])if(U<0)N=N.left;else{if(!(U>0))return 0;W=-1,N=N.right}else if(U>0)N=N.left;else{if(!(U<0))return 0;W=1,N=N.right}}return W}}(P.slabs,P.coordinates);return p.length===0?C:function(O,R){return function(j){return O(j[0],j[1])?0:R(j)}}(u(p),C)};var i=t(417)[3],n=t(4385),r=t(9014),a=t(5070);function l(){return!0}function u(c){for(var x={},g=0;g<c.length;++g){var p=c[g],v=p[0][0],m=p[0][1],y=p[1][1],_=[Math.min(m,y),Math.max(m,y)];v in x?x[v].push(_):x[v]=[_]}var f={},S=Object.keys(x);for(g=0;g<S.length;++g){var w=x[S[g]];f[S[g]]=r(w)}return function(E){return function(P,C){var O=E[P];return!!O&&!!O.queryPoint(C,l)}}(f)}function d(c){return 1}},7309:function(h){"use strict";var s=new Float64Array(4),t=new Float64Array(4),i=new Float64Array(4);h.exports=function(n,r,a,l,u){s.length<l.length&&(s=new Float64Array(l.length),t=new Float64Array(l.length),i=new Float64Array(l.length));for(var d=0;d<l.length;++d)s[d]=n[d]-l[d],t[d]=r[d]-n[d],i[d]=a[d]-n[d];var c=0,x=0,g=0,p=0,v=0,m=0;for(d=0;d<l.length;++d){var y=t[d],_=i[d],f=s[d];c+=y*y,x+=y*_,g+=_*_,p+=f*y,v+=f*_,m+=f*f}var S,w,E,P,C,O=Math.abs(c*g-x*x),R=x*v-g*p,j=x*p-c*v;if(R+j<=O)if(R<0)j<0&&p<0?(j=0,-p>=c?(R=1,S=c+2*p+m):S=p*(R=-p/c)+m):(R=0,v>=0?(j=0,S=m):-v>=g?(j=1,S=g+2*v+m):S=v*(j=-v/g)+m);else if(j<0)j=0,p>=0?(R=0,S=m):-p>=c?(R=1,S=c+2*p+m):S=p*(R=-p/c)+m;else{var D=1/O;S=(R*=D)*(c*R+x*(j*=D)+2*p)+j*(x*R+g*j+2*v)+m}else R<0?(E=g+v)>(w=x+p)?(P=E-w)>=(C=c-2*x+g)?(R=1,j=0,S=c+2*p+m):S=(R=P/C)*(c*R+x*(j=1-R)+2*p)+j*(x*R+g*j+2*v)+m:(R=0,E<=0?(j=1,S=g+2*v+m):v>=0?(j=0,S=m):S=v*(j=-v/g)+m):j<0?(E=c+p)>(w=x+v)?(P=E-w)>=(C=c-2*x+g)?(j=1,R=0,S=g+2*v+m):S=(R=1-(j=P/C))*(c*R+x*j+2*p)+j*(x*R+g*j+2*v)+m:(j=0,E<=0?(R=1,S=c+2*p+m):p>=0?(R=0,S=m):S=p*(R=-p/c)+m):(P=g+v-x-p)<=0?(R=0,j=1,S=g+2*v+m):P>=(C=c-2*x+g)?(R=1,j=0,S=c+2*p+m):S=(R=P/C)*(c*R+x*(j=1-R)+2*p)+j*(x*R+g*j+2*v)+m;var N=1-R-j;for(d=0;d<l.length;++d)u[d]=N*n[d]+R*r[d]+j*a[d];return S<0?0:S}},1116:function(h,s,t){h.exports=t(6093)},7584:function(h,s,t){"use strict";var i=t(1539);h.exports=function(n,r){for(var a=n.length,l=new Array(a),u=0;u<a;++u)l[u]=i(n[u],r[u]);return l}},2826:function(h,s,t){"use strict";h.exports=function(n){for(var r=new Array(n.length),a=0;a<n.length;++a)r[a]=i(n[a]);return r};var i=t(5125)},4469:function(h,s,t){"use strict";var i=t(5125),n=t(3962);h.exports=function(r,a){for(var l=i(a),u=r.length,d=new Array(u),c=0;c<u;++c)d[c]=n(r[c],l);return d}},6695:function(h,s,t){"use strict";var i=t(4354);h.exports=function(n,r){for(var a=n.length,l=new Array(a),u=0;u<a;++u)l[u]=i(n[u],r[u]);return l}},7037:function(h,s,t){"use strict";var i=t(9209),n=t(1284),r=t(9887);h.exports=function(a){a.sort(n);for(var l=a.length,u=0,d=0;d<l;++d){var c=a[d],x=r(c);if(x!==0){if(u>0){var g=a[u-1];if(i(c,g)===0&&r(g)!==x){u-=1;continue}}a[u++]=c}}return a.length=u,a}},6184:function(h){"use strict";var s,t="";h.exports=function(i,n){if(typeof i!="string")throw new TypeError("expected a string");if(n===1)return i;if(n===2)return i+i;var r=i.length*n;if(s!==i||s===void 0)s=i,t="";else if(t.length>=r)return t.substr(0,r);for(;r>t.length&&n>1;)1&n&&(t+=i),n>>=1,i+=i;return t=(t+=i).substr(0,r)}},8161:function(h,s,t){h.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(h){"use strict";h.exports=function(s){for(var t=s.length,i=s[s.length-1],n=t,r=t-2;r>=0;--r){var a=i;(d=(u=s[r])-((i=a+u)-a))&&(s[--n]=i,i=d)}var l=0;for(r=n;r<t;++r){var u,d;(d=(u=i)-((i=(a=s[r])+u)-a))&&(s[l++]=d)}return s[l++]=i,s.length=l,s}},8167:function(h,s,t){"use strict";var i=t(9660),n=t(9662),r=t(8289),a=t(402);function l(v,m,y,_){return function(f){return _(v(y(f[0][0],f[1][1]),y(-f[0][1],f[1][0])))}}function u(v,m,y,_){return function(f){return _(v(m(v(y(f[1][1],f[2][2]),y(-f[1][2],f[2][1])),f[0][0]),v(m(v(y(f[1][0],f[2][2]),y(-f[1][2],f[2][0])),-f[0][1]),m(v(y(f[1][0],f[2][1]),y(-f[1][1],f[2][0])),f[0][2]))))}}function d(v,m,y,_){return function(f){return _(v(v(m(v(m(v(y(f[2][2],f[3][3]),y(-f[2][3],f[3][2])),f[1][1]),v(m(v(y(f[2][1],f[3][3]),y(-f[2][3],f[3][1])),-f[1][2]),m(v(y(f[2][1],f[3][2]),y(-f[2][2],f[3][1])),f[1][3]))),f[0][0]),m(v(m(v(y(f[2][2],f[3][3]),y(-f[2][3],f[3][2])),f[1][0]),v(m(v(y(f[2][0],f[3][3]),y(-f[2][3],f[3][0])),-f[1][2]),m(v(y(f[2][0],f[3][2]),y(-f[2][2],f[3][0])),f[1][3]))),-f[0][1])),v(m(v(m(v(y(f[2][1],f[3][3]),y(-f[2][3],f[3][1])),f[1][0]),v(m(v(y(f[2][0],f[3][3]),y(-f[2][3],f[3][0])),-f[1][1]),m(v(y(f[2][0],f[3][1]),y(-f[2][1],f[3][0])),f[1][3]))),f[0][2]),m(v(m(v(y(f[2][1],f[3][2]),y(-f[2][2],f[3][1])),f[1][0]),v(m(v(y(f[2][0],f[3][2]),y(-f[2][2],f[3][0])),-f[1][1]),m(v(y(f[2][0],f[3][1]),y(-f[2][1],f[3][0])),f[1][2]))),-f[0][3]))))}}function c(v,m,y,_){return function(f){return _(v(v(m(v(v(m(v(m(v(y(f[3][3],f[4][4]),y(-f[3][4],f[4][3])),f[2][2]),v(m(v(y(f[3][2],f[4][4]),y(-f[3][4],f[4][2])),-f[2][3]),m(v(y(f[3][2],f[4][3]),y(-f[3][3],f[4][2])),f[2][4]))),f[1][1]),m(v(m(v(y(f[3][3],f[4][4]),y(-f[3][4],f[4][3])),f[2][1]),v(m(v(y(f[3][1],f[4][4]),y(-f[3][4],f[4][1])),-f[2][3]),m(v(y(f[3][1],f[4][3]),y(-f[3][3],f[4][1])),f[2][4]))),-f[1][2])),v(m(v(m(v(y(f[3][2],f[4][4]),y(-f[3][4],f[4][2])),f[2][1]),v(m(v(y(f[3][1],f[4][4]),y(-f[3][4],f[4][1])),-f[2][2]),m(v(y(f[3][1],f[4][2]),y(-f[3][2],f[4][1])),f[2][4]))),f[1][3]),m(v(m(v(y(f[3][2],f[4][3]),y(-f[3][3],f[4][2])),f[2][1]),v(m(v(y(f[3][1],f[4][3]),y(-f[3][3],f[4][1])),-f[2][2]),m(v(y(f[3][1],f[4][2]),y(-f[3][2],f[4][1])),f[2][3]))),-f[1][4]))),f[0][0]),m(v(v(m(v(m(v(y(f[3][3],f[4][4]),y(-f[3][4],f[4][3])),f[2][2]),v(m(v(y(f[3][2],f[4][4]),y(-f[3][4],f[4][2])),-f[2][3]),m(v(y(f[3][2],f[4][3]),y(-f[3][3],f[4][2])),f[2][4]))),f[1][0]),m(v(m(v(y(f[3][3],f[4][4]),y(-f[3][4],f[4][3])),f[2][0]),v(m(v(y(f[3][0],f[4][4]),y(-f[3][4],f[4][0])),-f[2][3]),m(v(y(f[3][0],f[4][3]),y(-f[3][3],f[4][0])),f[2][4]))),-f[1][2])),v(m(v(m(v(y(f[3][2],f[4][4]),y(-f[3][4],f[4][2])),f[2][0]),v(m(v(y(f[3][0],f[4][4]),y(-f[3][4],f[4][0])),-f[2][2]),m(v(y(f[3][0],f[4][2]),y(-f[3][2],f[4][0])),f[2][4]))),f[1][3]),m(v(m(v(y(f[3][2],f[4][3]),y(-f[3][3],f[4][2])),f[2][0]),v(m(v(y(f[3][0],f[4][3]),y(-f[3][3],f[4][0])),-f[2][2]),m(v(y(f[3][0],f[4][2]),y(-f[3][2],f[4][0])),f[2][3]))),-f[1][4]))),-f[0][1])),v(m(v(v(m(v(m(v(y(f[3][3],f[4][4]),y(-f[3][4],f[4][3])),f[2][1]),v(m(v(y(f[3][1],f[4][4]),y(-f[3][4],f[4][1])),-f[2][3]),m(v(y(f[3][1],f[4][3]),y(-f[3][3],f[4][1])),f[2][4]))),f[1][0]),m(v(m(v(y(f[3][3],f[4][4]),y(-f[3][4],f[4][3])),f[2][0]),v(m(v(y(f[3][0],f[4][4]),y(-f[3][4],f[4][0])),-f[2][3]),m(v(y(f[3][0],f[4][3]),y(-f[3][3],f[4][0])),f[2][4]))),-f[1][1])),v(m(v(m(v(y(f[3][1],f[4][4]),y(-f[3][4],f[4][1])),f[2][0]),v(m(v(y(f[3][0],f[4][4]),y(-f[3][4],f[4][0])),-f[2][1]),m(v(y(f[3][0],f[4][1]),y(-f[3][1],f[4][0])),f[2][4]))),f[1][3]),m(v(m(v(y(f[3][1],f[4][3]),y(-f[3][3],f[4][1])),f[2][0]),v(m(v(y(f[3][0],f[4][3]),y(-f[3][3],f[4][0])),-f[2][1]),m(v(y(f[3][0],f[4][1]),y(-f[3][1],f[4][0])),f[2][3]))),-f[1][4]))),f[0][2]),v(m(v(v(m(v(m(v(y(f[3][2],f[4][4]),y(-f[3][4],f[4][2])),f[2][1]),v(m(v(y(f[3][1],f[4][4]),y(-f[3][4],f[4][1])),-f[2][2]),m(v(y(f[3][1],f[4][2]),y(-f[3][2],f[4][1])),f[2][4]))),f[1][0]),m(v(m(v(y(f[3][2],f[4][4]),y(-f[3][4],f[4][2])),f[2][0]),v(m(v(y(f[3][0],f[4][4]),y(-f[3][4],f[4][0])),-f[2][2]),m(v(y(f[3][0],f[4][2]),y(-f[3][2],f[4][0])),f[2][4]))),-f[1][1])),v(m(v(m(v(y(f[3][1],f[4][4]),y(-f[3][4],f[4][1])),f[2][0]),v(m(v(y(f[3][0],f[4][4]),y(-f[3][4],f[4][0])),-f[2][1]),m(v(y(f[3][0],f[4][1]),y(-f[3][1],f[4][0])),f[2][4]))),f[1][2]),m(v(m(v(y(f[3][1],f[4][2]),y(-f[3][2],f[4][1])),f[2][0]),v(m(v(y(f[3][0],f[4][2]),y(-f[3][2],f[4][0])),-f[2][1]),m(v(y(f[3][0],f[4][1]),y(-f[3][1],f[4][0])),f[2][2]))),-f[1][4]))),-f[0][3]),m(v(v(m(v(m(v(y(f[3][2],f[4][3]),y(-f[3][3],f[4][2])),f[2][1]),v(m(v(y(f[3][1],f[4][3]),y(-f[3][3],f[4][1])),-f[2][2]),m(v(y(f[3][1],f[4][2]),y(-f[3][2],f[4][1])),f[2][3]))),f[1][0]),m(v(m(v(y(f[3][2],f[4][3]),y(-f[3][3],f[4][2])),f[2][0]),v(m(v(y(f[3][0],f[4][3]),y(-f[3][3],f[4][0])),-f[2][2]),m(v(y(f[3][0],f[4][2]),y(-f[3][2],f[4][0])),f[2][3]))),-f[1][1])),v(m(v(m(v(y(f[3][1],f[4][3]),y(-f[3][3],f[4][1])),f[2][0]),v(m(v(y(f[3][0],f[4][3]),y(-f[3][3],f[4][0])),-f[2][1]),m(v(y(f[3][0],f[4][1]),y(-f[3][1],f[4][0])),f[2][3]))),f[1][2]),m(v(m(v(y(f[3][1],f[4][2]),y(-f[3][2],f[4][1])),f[2][0]),v(m(v(y(f[3][0],f[4][2]),y(-f[3][2],f[4][0])),-f[2][1]),m(v(y(f[3][0],f[4][1]),y(-f[3][1],f[4][0])),f[2][2]))),-f[1][3]))),f[0][4])))))}}function x(v){return(v===2?l:v===3?u:v===4?d:v===5?c:void 0)(n,r,i,a)}var g=[function(){return[0]},function(v){return[v[0][0]]}];function p(v,m,y,_,f,S,w,E){return function(P){switch(P.length){case 0:return v(P);case 1:return m(P);case 2:return y(P);case 3:return _(P);case 4:return f(P);case 5:return S(P)}var C=w[P.length];return C||(C=w[P.length]=E(P.length)),C(P)}}(function(){for(;g.length<6;)g.push(x(g.length));h.exports=p.apply(void 0,g.concat([g,x]));for(var v=0;v<g.length;++v)h.exports[v]=g[v]})()},9130:function(h,s,t){"use strict";var i=t(9660),n=t(9662);h.exports=function(r,a){for(var l=i(r[0],a[0]),u=1;u<r.length;++u)l=n(l,i(r[u],a[u]));return l}},2227:function(h,s,t){"use strict";var i=t(9660),n=t(9662),r=t(4078),a=t(8289);function l(m){return(m===3?u:m===4?d:m===5?c:x)(n,r,i,a)}function u(m,y,_,f){return function(S,w,E){var P=_(S[0],S[0]),C=f(P,w[0]),O=f(P,E[0]),R=_(w[0],w[0]),j=f(R,S[0]),D=f(R,E[0]),N=_(E[0],E[0]),W=f(N,S[0]),F=f(N,w[0]),U=m(y(F,D),y(j,C)),V=y(W,O),te=y(U,V);return te[te.length-1]}}function d(m,y,_,f){return function(S,w,E,P){var C=m(_(S[0],S[0]),_(S[1],S[1])),O=f(C,w[0]),R=f(C,E[0]),j=f(C,P[0]),D=m(_(w[0],w[0]),_(w[1],w[1])),N=f(D,S[0]),W=f(D,E[0]),F=f(D,P[0]),U=m(_(E[0],E[0]),_(E[1],E[1])),V=f(U,S[0]),te=f(U,w[0]),J=f(U,P[0]),K=m(_(P[0],P[0]),_(P[1],P[1])),X=f(K,S[0]),Z=f(K,w[0]),$=f(K,E[0]),re=m(m(f(y($,J),w[1]),m(f(y(Z,F),-E[1]),f(y(te,W),P[1]))),m(f(y(Z,F),S[1]),m(f(y(X,j),-w[1]),f(y(N,O),P[1])))),oe=m(m(f(y($,J),S[1]),m(f(y(X,j),-E[1]),f(y(V,R),P[1]))),m(f(y(te,W),S[1]),m(f(y(V,R),-w[1]),f(y(N,O),E[1])))),ie=y(re,oe);return ie[ie.length-1]}}function c(m,y,_,f){return function(S,w,E,P,C){var O=m(_(S[0],S[0]),m(_(S[1],S[1]),_(S[2],S[2]))),R=f(O,w[0]),j=f(O,E[0]),D=f(O,P[0]),N=f(O,C[0]),W=m(_(w[0],w[0]),m(_(w[1],w[1]),_(w[2],w[2]))),F=f(W,S[0]),U=f(W,E[0]),V=f(W,P[0]),te=f(W,C[0]),J=m(_(E[0],E[0]),m(_(E[1],E[1]),_(E[2],E[2]))),K=f(J,S[0]),X=f(J,w[0]),Z=f(J,P[0]),$=f(J,C[0]),re=m(_(P[0],P[0]),m(_(P[1],P[1]),_(P[2],P[2]))),oe=f(re,S[0]),ie=f(re,w[0]),ue=f(re,E[0]),me=f(re,C[0]),be=m(_(C[0],C[0]),m(_(C[1],C[1]),_(C[2],C[2]))),ge=f(be,S[0]),de=f(be,w[0]),ve=f(be,E[0]),pe=f(be,P[0]),_e=m(m(m(f(m(f(y(pe,me),E[1]),m(f(y(ve,$),-P[1]),f(y(ue,Z),C[1]))),w[2]),m(f(m(f(y(pe,me),w[1]),m(f(y(de,te),-P[1]),f(y(ie,V),C[1]))),-E[2]),f(m(f(y(ve,$),w[1]),m(f(y(de,te),-E[1]),f(y(X,U),C[1]))),P[2]))),m(f(m(f(y(ue,Z),w[1]),m(f(y(ie,V),-E[1]),f(y(X,U),P[1]))),-C[2]),m(f(m(f(y(pe,me),w[1]),m(f(y(de,te),-P[1]),f(y(ie,V),C[1]))),S[2]),f(m(f(y(pe,me),S[1]),m(f(y(ge,N),-P[1]),f(y(oe,D),C[1]))),-w[2])))),m(m(f(m(f(y(de,te),S[1]),m(f(y(ge,N),-w[1]),f(y(F,R),C[1]))),P[2]),m(f(m(f(y(ie,V),S[1]),m(f(y(oe,D),-w[1]),f(y(F,R),P[1]))),-C[2]),f(m(f(y(ue,Z),w[1]),m(f(y(ie,V),-E[1]),f(y(X,U),P[1]))),S[2]))),m(f(m(f(y(ue,Z),S[1]),m(f(y(oe,D),-E[1]),f(y(K,j),P[1]))),-w[2]),m(f(m(f(y(ie,V),S[1]),m(f(y(oe,D),-w[1]),f(y(F,R),P[1]))),E[2]),f(m(f(y(X,U),S[1]),m(f(y(K,j),-w[1]),f(y(F,R),E[1]))),-P[2]))))),Te=m(m(m(f(m(f(y(pe,me),E[1]),m(f(y(ve,$),-P[1]),f(y(ue,Z),C[1]))),S[2]),f(m(f(y(pe,me),S[1]),m(f(y(ge,N),-P[1]),f(y(oe,D),C[1]))),-E[2])),m(f(m(f(y(ve,$),S[1]),m(f(y(ge,N),-E[1]),f(y(K,j),C[1]))),P[2]),f(m(f(y(ue,Z),S[1]),m(f(y(oe,D),-E[1]),f(y(K,j),P[1]))),-C[2]))),m(m(f(m(f(y(ve,$),w[1]),m(f(y(de,te),-E[1]),f(y(X,U),C[1]))),S[2]),f(m(f(y(ve,$),S[1]),m(f(y(ge,N),-E[1]),f(y(K,j),C[1]))),-w[2])),m(f(m(f(y(de,te),S[1]),m(f(y(ge,N),-w[1]),f(y(F,R),C[1]))),E[2]),f(m(f(y(X,U),S[1]),m(f(y(K,j),-w[1]),f(y(F,R),E[1]))),-C[2])))),le=y(_e,Te);return le[le.length-1]}}function x(m,y,_,f){return function(S,w,E,P,C,O){var R=m(m(_(S[0],S[0]),_(S[1],S[1])),m(_(S[2],S[2]),_(S[3],S[3]))),j=f(R,w[0]),D=f(R,E[0]),N=f(R,P[0]),W=f(R,C[0]),F=f(R,O[0]),U=m(m(_(w[0],w[0]),_(w[1],w[1])),m(_(w[2],w[2]),_(w[3],w[3]))),V=f(U,S[0]),te=f(U,E[0]),J=f(U,P[0]),K=f(U,C[0]),X=f(U,O[0]),Z=m(m(_(E[0],E[0]),_(E[1],E[1])),m(_(E[2],E[2]),_(E[3],E[3]))),$=f(Z,S[0]),re=f(Z,w[0]),oe=f(Z,P[0]),ie=f(Z,C[0]),ue=f(Z,O[0]),me=m(m(_(P[0],P[0]),_(P[1],P[1])),m(_(P[2],P[2]),_(P[3],P[3]))),be=f(me,S[0]),ge=f(me,w[0]),de=f(me,E[0]),ve=f(me,C[0]),pe=f(me,O[0]),_e=m(m(_(C[0],C[0]),_(C[1],C[1])),m(_(C[2],C[2]),_(C[3],C[3]))),Te=f(_e,S[0]),le=f(_e,w[0]),ae=f(_e,E[0]),he=f(_e,P[0]),Se=f(_e,O[0]),ke=m(m(_(O[0],O[0]),_(O[1],O[1])),m(_(O[2],O[2]),_(O[3],O[3]))),Me=f(ke,S[0]),Ee=f(ke,w[0]),De=f(ke,E[0]),fe=f(ke,P[0]),xe=f(ke,C[0]),we=m(m(m(f(m(m(f(m(f(y(xe,Se),P[1]),m(f(y(fe,pe),-C[1]),f(y(he,ve),O[1]))),E[2]),f(m(f(y(xe,Se),E[1]),m(f(y(De,ue),-C[1]),f(y(ae,ie),O[1]))),-P[2])),m(f(m(f(y(fe,pe),E[1]),m(f(y(De,ue),-P[1]),f(y(de,oe),O[1]))),C[2]),f(m(f(y(he,ve),E[1]),m(f(y(ae,ie),-P[1]),f(y(de,oe),C[1]))),-O[2]))),w[3]),m(f(m(m(f(m(f(y(xe,Se),P[1]),m(f(y(fe,pe),-C[1]),f(y(he,ve),O[1]))),w[2]),f(m(f(y(xe,Se),w[1]),m(f(y(Ee,X),-C[1]),f(y(le,K),O[1]))),-P[2])),m(f(m(f(y(fe,pe),w[1]),m(f(y(Ee,X),-P[1]),f(y(ge,J),O[1]))),C[2]),f(m(f(y(he,ve),w[1]),m(f(y(le,K),-P[1]),f(y(ge,J),C[1]))),-O[2]))),-E[3]),f(m(m(f(m(f(y(xe,Se),E[1]),m(f(y(De,ue),-C[1]),f(y(ae,ie),O[1]))),w[2]),f(m(f(y(xe,Se),w[1]),m(f(y(Ee,X),-C[1]),f(y(le,K),O[1]))),-E[2])),m(f(m(f(y(De,ue),w[1]),m(f(y(Ee,X),-E[1]),f(y(re,te),O[1]))),C[2]),f(m(f(y(ae,ie),w[1]),m(f(y(le,K),-E[1]),f(y(re,te),C[1]))),-O[2]))),P[3]))),m(m(f(m(m(f(m(f(y(fe,pe),E[1]),m(f(y(De,ue),-P[1]),f(y(de,oe),O[1]))),w[2]),f(m(f(y(fe,pe),w[1]),m(f(y(Ee,X),-P[1]),f(y(ge,J),O[1]))),-E[2])),m(f(m(f(y(De,ue),w[1]),m(f(y(Ee,X),-E[1]),f(y(re,te),O[1]))),P[2]),f(m(f(y(de,oe),w[1]),m(f(y(ge,J),-E[1]),f(y(re,te),P[1]))),-O[2]))),-C[3]),f(m(m(f(m(f(y(he,ve),E[1]),m(f(y(ae,ie),-P[1]),f(y(de,oe),C[1]))),w[2]),f(m(f(y(he,ve),w[1]),m(f(y(le,K),-P[1]),f(y(ge,J),C[1]))),-E[2])),m(f(m(f(y(ae,ie),w[1]),m(f(y(le,K),-E[1]),f(y(re,te),C[1]))),P[2]),f(m(f(y(de,oe),w[1]),m(f(y(ge,J),-E[1]),f(y(re,te),P[1]))),-C[2]))),O[3])),m(f(m(m(f(m(f(y(xe,Se),P[1]),m(f(y(fe,pe),-C[1]),f(y(he,ve),O[1]))),w[2]),f(m(f(y(xe,Se),w[1]),m(f(y(Ee,X),-C[1]),f(y(le,K),O[1]))),-P[2])),m(f(m(f(y(fe,pe),w[1]),m(f(y(Ee,X),-P[1]),f(y(ge,J),O[1]))),C[2]),f(m(f(y(he,ve),w[1]),m(f(y(le,K),-P[1]),f(y(ge,J),C[1]))),-O[2]))),S[3]),f(m(m(f(m(f(y(xe,Se),P[1]),m(f(y(fe,pe),-C[1]),f(y(he,ve),O[1]))),S[2]),f(m(f(y(xe,Se),S[1]),m(f(y(Me,F),-C[1]),f(y(Te,W),O[1]))),-P[2])),m(f(m(f(y(fe,pe),S[1]),m(f(y(Me,F),-P[1]),f(y(be,N),O[1]))),C[2]),f(m(f(y(he,ve),S[1]),m(f(y(Te,W),-P[1]),f(y(be,N),C[1]))),-O[2]))),-w[3])))),m(m(m(f(m(m(f(m(f(y(xe,Se),w[1]),m(f(y(Ee,X),-C[1]),f(y(le,K),O[1]))),S[2]),f(m(f(y(xe,Se),S[1]),m(f(y(Me,F),-C[1]),f(y(Te,W),O[1]))),-w[2])),m(f(m(f(y(Ee,X),S[1]),m(f(y(Me,F),-w[1]),f(y(V,j),O[1]))),C[2]),f(m(f(y(le,K),S[1]),m(f(y(Te,W),-w[1]),f(y(V,j),C[1]))),-O[2]))),P[3]),f(m(m(f(m(f(y(fe,pe),w[1]),m(f(y(Ee,X),-P[1]),f(y(ge,J),O[1]))),S[2]),f(m(f(y(fe,pe),S[1]),m(f(y(Me,F),-P[1]),f(y(be,N),O[1]))),-w[2])),m(f(m(f(y(Ee,X),S[1]),m(f(y(Me,F),-w[1]),f(y(V,j),O[1]))),P[2]),f(m(f(y(ge,J),S[1]),m(f(y(be,N),-w[1]),f(y(V,j),P[1]))),-O[2]))),-C[3])),m(f(m(m(f(m(f(y(he,ve),w[1]),m(f(y(le,K),-P[1]),f(y(ge,J),C[1]))),S[2]),f(m(f(y(he,ve),S[1]),m(f(y(Te,W),-P[1]),f(y(be,N),C[1]))),-w[2])),m(f(m(f(y(le,K),S[1]),m(f(y(Te,W),-w[1]),f(y(V,j),C[1]))),P[2]),f(m(f(y(ge,J),S[1]),m(f(y(be,N),-w[1]),f(y(V,j),P[1]))),-C[2]))),O[3]),f(m(m(f(m(f(y(fe,pe),E[1]),m(f(y(De,ue),-P[1]),f(y(de,oe),O[1]))),w[2]),f(m(f(y(fe,pe),w[1]),m(f(y(Ee,X),-P[1]),f(y(ge,J),O[1]))),-E[2])),m(f(m(f(y(De,ue),w[1]),m(f(y(Ee,X),-E[1]),f(y(re,te),O[1]))),P[2]),f(m(f(y(de,oe),w[1]),m(f(y(ge,J),-E[1]),f(y(re,te),P[1]))),-O[2]))),S[3]))),m(m(f(m(m(f(m(f(y(fe,pe),E[1]),m(f(y(De,ue),-P[1]),f(y(de,oe),O[1]))),S[2]),f(m(f(y(fe,pe),S[1]),m(f(y(Me,F),-P[1]),f(y(be,N),O[1]))),-E[2])),m(f(m(f(y(De,ue),S[1]),m(f(y(Me,F),-E[1]),f(y($,D),O[1]))),P[2]),f(m(f(y(de,oe),S[1]),m(f(y(be,N),-E[1]),f(y($,D),P[1]))),-O[2]))),-w[3]),f(m(m(f(m(f(y(fe,pe),w[1]),m(f(y(Ee,X),-P[1]),f(y(ge,J),O[1]))),S[2]),f(m(f(y(fe,pe),S[1]),m(f(y(Me,F),-P[1]),f(y(be,N),O[1]))),-w[2])),m(f(m(f(y(Ee,X),S[1]),m(f(y(Me,F),-w[1]),f(y(V,j),O[1]))),P[2]),f(m(f(y(ge,J),S[1]),m(f(y(be,N),-w[1]),f(y(V,j),P[1]))),-O[2]))),E[3])),m(f(m(m(f(m(f(y(De,ue),w[1]),m(f(y(Ee,X),-E[1]),f(y(re,te),O[1]))),S[2]),f(m(f(y(De,ue),S[1]),m(f(y(Me,F),-E[1]),f(y($,D),O[1]))),-w[2])),m(f(m(f(y(Ee,X),S[1]),m(f(y(Me,F),-w[1]),f(y(V,j),O[1]))),E[2]),f(m(f(y(re,te),S[1]),m(f(y($,D),-w[1]),f(y(V,j),E[1]))),-O[2]))),-P[3]),f(m(m(f(m(f(y(de,oe),w[1]),m(f(y(ge,J),-E[1]),f(y(re,te),P[1]))),S[2]),f(m(f(y(de,oe),S[1]),m(f(y(be,N),-E[1]),f(y($,D),P[1]))),-w[2])),m(f(m(f(y(ge,J),S[1]),m(f(y(be,N),-w[1]),f(y(V,j),P[1]))),E[2]),f(m(f(y(re,te),S[1]),m(f(y($,D),-w[1]),f(y(V,j),E[1]))),-P[2]))),O[3]))))),Oe=m(m(m(f(m(m(f(m(f(y(xe,Se),P[1]),m(f(y(fe,pe),-C[1]),f(y(he,ve),O[1]))),E[2]),f(m(f(y(xe,Se),E[1]),m(f(y(De,ue),-C[1]),f(y(ae,ie),O[1]))),-P[2])),m(f(m(f(y(fe,pe),E[1]),m(f(y(De,ue),-P[1]),f(y(de,oe),O[1]))),C[2]),f(m(f(y(he,ve),E[1]),m(f(y(ae,ie),-P[1]),f(y(de,oe),C[1]))),-O[2]))),S[3]),m(f(m(m(f(m(f(y(xe,Se),P[1]),m(f(y(fe,pe),-C[1]),f(y(he,ve),O[1]))),S[2]),f(m(f(y(xe,Se),S[1]),m(f(y(Me,F),-C[1]),f(y(Te,W),O[1]))),-P[2])),m(f(m(f(y(fe,pe),S[1]),m(f(y(Me,F),-P[1]),f(y(be,N),O[1]))),C[2]),f(m(f(y(he,ve),S[1]),m(f(y(Te,W),-P[1]),f(y(be,N),C[1]))),-O[2]))),-E[3]),f(m(m(f(m(f(y(xe,Se),E[1]),m(f(y(De,ue),-C[1]),f(y(ae,ie),O[1]))),S[2]),f(m(f(y(xe,Se),S[1]),m(f(y(Me,F),-C[1]),f(y(Te,W),O[1]))),-E[2])),m(f(m(f(y(De,ue),S[1]),m(f(y(Me,F),-E[1]),f(y($,D),O[1]))),C[2]),f(m(f(y(ae,ie),S[1]),m(f(y(Te,W),-E[1]),f(y($,D),C[1]))),-O[2]))),P[3]))),m(m(f(m(m(f(m(f(y(fe,pe),E[1]),m(f(y(De,ue),-P[1]),f(y(de,oe),O[1]))),S[2]),f(m(f(y(fe,pe),S[1]),m(f(y(Me,F),-P[1]),f(y(be,N),O[1]))),-E[2])),m(f(m(f(y(De,ue),S[1]),m(f(y(Me,F),-E[1]),f(y($,D),O[1]))),P[2]),f(m(f(y(de,oe),S[1]),m(f(y(be,N),-E[1]),f(y($,D),P[1]))),-O[2]))),-C[3]),f(m(m(f(m(f(y(he,ve),E[1]),m(f(y(ae,ie),-P[1]),f(y(de,oe),C[1]))),S[2]),f(m(f(y(he,ve),S[1]),m(f(y(Te,W),-P[1]),f(y(be,N),C[1]))),-E[2])),m(f(m(f(y(ae,ie),S[1]),m(f(y(Te,W),-E[1]),f(y($,D),C[1]))),P[2]),f(m(f(y(de,oe),S[1]),m(f(y(be,N),-E[1]),f(y($,D),P[1]))),-C[2]))),O[3])),m(f(m(m(f(m(f(y(xe,Se),E[1]),m(f(y(De,ue),-C[1]),f(y(ae,ie),O[1]))),w[2]),f(m(f(y(xe,Se),w[1]),m(f(y(Ee,X),-C[1]),f(y(le,K),O[1]))),-E[2])),m(f(m(f(y(De,ue),w[1]),m(f(y(Ee,X),-E[1]),f(y(re,te),O[1]))),C[2]),f(m(f(y(ae,ie),w[1]),m(f(y(le,K),-E[1]),f(y(re,te),C[1]))),-O[2]))),S[3]),f(m(m(f(m(f(y(xe,Se),E[1]),m(f(y(De,ue),-C[1]),f(y(ae,ie),O[1]))),S[2]),f(m(f(y(xe,Se),S[1]),m(f(y(Me,F),-C[1]),f(y(Te,W),O[1]))),-E[2])),m(f(m(f(y(De,ue),S[1]),m(f(y(Me,F),-E[1]),f(y($,D),O[1]))),C[2]),f(m(f(y(ae,ie),S[1]),m(f(y(Te,W),-E[1]),f(y($,D),C[1]))),-O[2]))),-w[3])))),m(m(m(f(m(m(f(m(f(y(xe,Se),w[1]),m(f(y(Ee,X),-C[1]),f(y(le,K),O[1]))),S[2]),f(m(f(y(xe,Se),S[1]),m(f(y(Me,F),-C[1]),f(y(Te,W),O[1]))),-w[2])),m(f(m(f(y(Ee,X),S[1]),m(f(y(Me,F),-w[1]),f(y(V,j),O[1]))),C[2]),f(m(f(y(le,K),S[1]),m(f(y(Te,W),-w[1]),f(y(V,j),C[1]))),-O[2]))),E[3]),f(m(m(f(m(f(y(De,ue),w[1]),m(f(y(Ee,X),-E[1]),f(y(re,te),O[1]))),S[2]),f(m(f(y(De,ue),S[1]),m(f(y(Me,F),-E[1]),f(y($,D),O[1]))),-w[2])),m(f(m(f(y(Ee,X),S[1]),m(f(y(Me,F),-w[1]),f(y(V,j),O[1]))),E[2]),f(m(f(y(re,te),S[1]),m(f(y($,D),-w[1]),f(y(V,j),E[1]))),-O[2]))),-C[3])),m(f(m(m(f(m(f(y(ae,ie),w[1]),m(f(y(le,K),-E[1]),f(y(re,te),C[1]))),S[2]),f(m(f(y(ae,ie),S[1]),m(f(y(Te,W),-E[1]),f(y($,D),C[1]))),-w[2])),m(f(m(f(y(le,K),S[1]),m(f(y(Te,W),-w[1]),f(y(V,j),C[1]))),E[2]),f(m(f(y(re,te),S[1]),m(f(y($,D),-w[1]),f(y(V,j),E[1]))),-C[2]))),O[3]),f(m(m(f(m(f(y(he,ve),E[1]),m(f(y(ae,ie),-P[1]),f(y(de,oe),C[1]))),w[2]),f(m(f(y(he,ve),w[1]),m(f(y(le,K),-P[1]),f(y(ge,J),C[1]))),-E[2])),m(f(m(f(y(ae,ie),w[1]),m(f(y(le,K),-E[1]),f(y(re,te),C[1]))),P[2]),f(m(f(y(de,oe),w[1]),m(f(y(ge,J),-E[1]),f(y(re,te),P[1]))),-C[2]))),S[3]))),m(m(f(m(m(f(m(f(y(he,ve),E[1]),m(f(y(ae,ie),-P[1]),f(y(de,oe),C[1]))),S[2]),f(m(f(y(he,ve),S[1]),m(f(y(Te,W),-P[1]),f(y(be,N),C[1]))),-E[2])),m(f(m(f(y(ae,ie),S[1]),m(f(y(Te,W),-E[1]),f(y($,D),C[1]))),P[2]),f(m(f(y(de,oe),S[1]),m(f(y(be,N),-E[1]),f(y($,D),P[1]))),-C[2]))),-w[3]),f(m(m(f(m(f(y(he,ve),w[1]),m(f(y(le,K),-P[1]),f(y(ge,J),C[1]))),S[2]),f(m(f(y(he,ve),S[1]),m(f(y(Te,W),-P[1]),f(y(be,N),C[1]))),-w[2])),m(f(m(f(y(le,K),S[1]),m(f(y(Te,W),-w[1]),f(y(V,j),C[1]))),P[2]),f(m(f(y(ge,J),S[1]),m(f(y(be,N),-w[1]),f(y(V,j),P[1]))),-C[2]))),E[3])),m(f(m(m(f(m(f(y(ae,ie),w[1]),m(f(y(le,K),-E[1]),f(y(re,te),C[1]))),S[2]),f(m(f(y(ae,ie),S[1]),m(f(y(Te,W),-E[1]),f(y($,D),C[1]))),-w[2])),m(f(m(f(y(le,K),S[1]),m(f(y(Te,W),-w[1]),f(y(V,j),C[1]))),E[2]),f(m(f(y(re,te),S[1]),m(f(y($,D),-w[1]),f(y(V,j),E[1]))),-C[2]))),-P[3]),f(m(m(f(m(f(y(de,oe),w[1]),m(f(y(ge,J),-E[1]),f(y(re,te),P[1]))),S[2]),f(m(f(y(de,oe),S[1]),m(f(y(be,N),-E[1]),f(y($,D),P[1]))),-w[2])),m(f(m(f(y(ge,J),S[1]),m(f(y(be,N),-w[1]),f(y(V,j),P[1]))),E[2]),f(m(f(y(re,te),S[1]),m(f(y($,D),-w[1]),f(y(V,j),E[1]))),-P[2]))),C[3]))))),ze=y(we,Oe);return ze[ze.length-1]}}var g=[function(){return 0},function(){return 0},function(){return 0}];function p(m){var y=g[m.length];return y||(y=g[m.length]=l(m.length)),y.apply(void 0,m)}function v(m,y,_,f,S,w,E,P){return function(C,O,R,j,D,N){switch(arguments.length){case 0:case 1:return 0;case 2:return f(C,O);case 3:return S(C,O,R);case 4:return w(C,O,R,j);case 5:return E(C,O,R,j,D);case 6:return P(C,O,R,j,D,N)}for(var W=new Array(arguments.length),F=0;F<arguments.length;++F)W[F]=arguments[F];return m(W)}}(function(){for(;g.length<=6;)g.push(l(g.length));h.exports=v.apply(void 0,[p].concat(g));for(var m=0;m<=6;++m)h.exports[m]=g[m]})()},6606:function(h,s,t){"use strict";var i=t(8167);function n(g){return(g===2?r:g===3?a:g===4?l:g===5?u:d)(g<6?i[g]:i)}function r(g){return function(p,v){return[g([[+v[0],+p[0][1]],[+v[1],+p[1][1]]]),g([[+p[0][0],+v[0]],[+p[1][0],+v[1]]]),g(p)]}}function a(g){return function(p,v){return[g([[+v[0],+p[0][1],+p[0][2]],[+v[1],+p[1][1],+p[1][2]],[+v[2],+p[2][1],+p[2][2]]]),g([[+p[0][0],+v[0],+p[0][2]],[+p[1][0],+v[1],+p[1][2]],[+p[2][0],+v[2],+p[2][2]]]),g([[+p[0][0],+p[0][1],+v[0]],[+p[1][0],+p[1][1],+v[1]],[+p[2][0],+p[2][1],+v[2]]]),g(p)]}}function l(g){return function(p,v){return[g([[+v[0],+p[0][1],+p[0][2],+p[0][3]],[+v[1],+p[1][1],+p[1][2],+p[1][3]],[+v[2],+p[2][1],+p[2][2],+p[2][3]],[+v[3],+p[3][1],+p[3][2],+p[3][3]]]),g([[+p[0][0],+v[0],+p[0][2],+p[0][3]],[+p[1][0],+v[1],+p[1][2],+p[1][3]],[+p[2][0],+v[2],+p[2][2],+p[2][3]],[+p[3][0],+v[3],+p[3][2],+p[3][3]]]),g([[+p[0][0],+p[0][1],+v[0],+p[0][3]],[+p[1][0],+p[1][1],+v[1],+p[1][3]],[+p[2][0],+p[2][1],+v[2],+p[2][3]],[+p[3][0],+p[3][1],+v[3],+p[3][3]]]),g([[+p[0][0],+p[0][1],+p[0][2],+v[0]],[+p[1][0],+p[1][1],+p[1][2],+v[1]],[+p[2][0],+p[2][1],+p[2][2],+v[2]],[+p[3][0],+p[3][1],+p[3][2],+v[3]]]),g(p)]}}function u(g){return function(p,v){return[g([[+v[0],+p[0][1],+p[0][2],+p[0][3],+p[0][4]],[+v[1],+p[1][1],+p[1][2],+p[1][3],+p[1][4]],[+v[2],+p[2][1],+p[2][2],+p[2][3],+p[2][4]],[+v[3],+p[3][1],+p[3][2],+p[3][3],+p[3][4]],[+v[4],+p[4][1],+p[4][2],+p[4][3],+p[4][4]]]),g([[+p[0][0],+v[0],+p[0][2],+p[0][3],+p[0][4]],[+p[1][0],+v[1],+p[1][2],+p[1][3],+p[1][4]],[+p[2][0],+v[2],+p[2][2],+p[2][3],+p[2][4]],[+p[3][0],+v[3],+p[3][2],+p[3][3],+p[3][4]],[+p[4][0],+v[4],+p[4][2],+p[4][3],+p[4][4]]]),g([[+p[0][0],+p[0][1],+v[0],+p[0][3],+p[0][4]],[+p[1][0],+p[1][1],+v[1],+p[1][3],+p[1][4]],[+p[2][0],+p[2][1],+v[2],+p[2][3],+p[2][4]],[+p[3][0],+p[3][1],+v[3],+p[3][3],+p[3][4]],[+p[4][0],+p[4][1],+v[4],+p[4][3],+p[4][4]]]),g([[+p[0][0],+p[0][1],+p[0][2],+v[0],+p[0][4]],[+p[1][0],+p[1][1],+p[1][2],+v[1],+p[1][4]],[+p[2][0],+p[2][1],+p[2][2],+v[2],+p[2][4]],[+p[3][0],+p[3][1],+p[3][2],+v[3],+p[3][4]],[+p[4][0],+p[4][1],+p[4][2],+v[4],+p[4][4]]]),g([[+p[0][0],+p[0][1],+p[0][2],+p[0][3],+v[0]],[+p[1][0],+p[1][1],+p[1][2],+p[1][3],+v[1]],[+p[2][0],+p[2][1],+p[2][2],+p[2][3],+v[2]],[+p[3][0],+p[3][1],+p[3][2],+p[3][3],+v[3]],[+p[4][0],+p[4][1],+p[4][2],+p[4][3],+v[4]]]),g(p)]}}function d(g){return function(p,v){return[g([[+v[0],+p[0][1],+p[0][2],+p[0][3],+p[0][4],+p[0][5]],[+v[1],+p[1][1],+p[1][2],+p[1][3],+p[1][4],+p[1][5]],[+v[2],+p[2][1],+p[2][2],+p[2][3],+p[2][4],+p[2][5]],[+v[3],+p[3][1],+p[3][2],+p[3][3],+p[3][4],+p[3][5]],[+v[4],+p[4][1],+p[4][2],+p[4][3],+p[4][4],+p[4][5]],[+v[5],+p[5][1],+p[5][2],+p[5][3],+p[5][4],+p[5][5]]]),g([[+p[0][0],+v[0],+p[0][2],+p[0][3],+p[0][4],+p[0][5]],[+p[1][0],+v[1],+p[1][2],+p[1][3],+p[1][4],+p[1][5]],[+p[2][0],+v[2],+p[2][2],+p[2][3],+p[2][4],+p[2][5]],[+p[3][0],+v[3],+p[3][2],+p[3][3],+p[3][4],+p[3][5]],[+p[4][0],+v[4],+p[4][2],+p[4][3],+p[4][4],+p[4][5]],[+p[5][0],+v[5],+p[5][2],+p[5][3],+p[5][4],+p[5][5]]]),g([[+p[0][0],+p[0][1],+v[0],+p[0][3],+p[0][4],+p[0][5]],[+p[1][0],+p[1][1],+v[1],+p[1][3],+p[1][4],+p[1][5]],[+p[2][0],+p[2][1],+v[2],+p[2][3],+p[2][4],+p[2][5]],[+p[3][0],+p[3][1],+v[3],+p[3][3],+p[3][4],+p[3][5]],[+p[4][0],+p[4][1],+v[4],+p[4][3],+p[4][4],+p[4][5]],[+p[5][0],+p[5][1],+v[5],+p[5][3],+p[5][4],+p[5][5]]]),g([[+p[0][0],+p[0][1],+p[0][2],+v[0],+p[0][4],+p[0][5]],[+p[1][0],+p[1][1],+p[1][2],+v[1],+p[1][4],+p[1][5]],[+p[2][0],+p[2][1],+p[2][2],+v[2],+p[2][4],+p[2][5]],[+p[3][0],+p[3][1],+p[3][2],+v[3],+p[3][4],+p[3][5]],[+p[4][0],+p[4][1],+p[4][2],+v[4],+p[4][4],+p[4][5]],[+p[5][0],+p[5][1],+p[5][2],+v[5],+p[5][4],+p[5][5]]]),g([[+p[0][0],+p[0][1],+p[0][2],+p[0][3],+v[0],+p[0][5]],[+p[1][0],+p[1][1],+p[1][2],+p[1][3],+v[1],+p[1][5]],[+p[2][0],+p[2][1],+p[2][2],+p[2][3],+v[2],+p[2][5]],[+p[3][0],+p[3][1],+p[3][2],+p[3][3],+v[3],+p[3][5]],[+p[4][0],+p[4][1],+p[4][2],+p[4][3],+v[4],+p[4][5]],[+p[5][0],+p[5][1],+p[5][2],+p[5][3],+v[5],+p[5][5]]]),g([[+p[0][0],+p[0][1],+p[0][2],+p[0][3],+p[0][4],+v[0]],[+p[1][0],+p[1][1],+p[1][2],+p[1][3],+p[1][4],+v[1]],[+p[2][0],+p[2][1],+p[2][2],+p[2][3],+p[2][4],+v[2]],[+p[3][0],+p[3][1],+p[3][2],+p[3][3],+p[3][4],+v[3]],[+p[4][0],+p[4][1],+p[4][2],+p[4][3],+p[4][4],+v[4]],[+p[5][0],+p[5][1],+p[5][2],+p[5][3],+p[5][4],+v[5]]]),g(p)]}}var c=[function(){return[[0]]},function(g,p){return[[p[0]],[g[0][0]]]}];function x(g,p,v,m,y,_,f,S){return function(w,E){switch(w.length){case 0:return g(w,E);case 1:return p(w,E);case 2:return v(w,E);case 3:return m(w,E);case 4:return y(w,E);case 5:return _(w,E)}var P=f[w.length];return P||(P=f[w.length]=S(w.length)),P(w,E)}}(function(){for(;c.length<6;)c.push(n(c.length));h.exports=x.apply(void 0,c.concat([c,n]));for(var g=0;g<6;++g)h.exports[g]=c[g]})()},417:function(h,s,t){"use strict";var i=t(9660),n=t(9662),r=t(8289),a=t(4078);function l(y,_,f,S){return function(w,E,P){var C=y(y(_(E[1],P[0]),_(-P[1],E[0])),y(_(w[1],E[0]),_(-E[1],w[0]))),O=y(_(w[1],P[0]),_(-P[1],w[0])),R=S(C,O);return R[R.length-1]}}function u(y,_,f,S){return function(w,E,P,C){var O=y(y(f(y(_(P[1],C[0]),_(-C[1],P[0])),E[2]),y(f(y(_(E[1],C[0]),_(-C[1],E[0])),-P[2]),f(y(_(E[1],P[0]),_(-P[1],E[0])),C[2]))),y(f(y(_(E[1],C[0]),_(-C[1],E[0])),w[2]),y(f(y(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),f(y(_(w[1],E[0]),_(-E[1],w[0])),C[2])))),R=y(y(f(y(_(P[1],C[0]),_(-C[1],P[0])),w[2]),y(f(y(_(w[1],C[0]),_(-C[1],w[0])),-P[2]),f(y(_(w[1],P[0]),_(-P[1],w[0])),C[2]))),y(f(y(_(E[1],P[0]),_(-P[1],E[0])),w[2]),y(f(y(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),f(y(_(w[1],E[0]),_(-E[1],w[0])),P[2])))),j=S(O,R);return j[j.length-1]}}function d(y,_,f,S){return function(w,E,P,C,O){var R=y(y(y(f(y(f(y(_(C[1],O[0]),_(-O[1],C[0])),P[2]),y(f(y(_(P[1],O[0]),_(-O[1],P[0])),-C[2]),f(y(_(P[1],C[0]),_(-C[1],P[0])),O[2]))),E[3]),y(f(y(f(y(_(C[1],O[0]),_(-O[1],C[0])),E[2]),y(f(y(_(E[1],O[0]),_(-O[1],E[0])),-C[2]),f(y(_(E[1],C[0]),_(-C[1],E[0])),O[2]))),-P[3]),f(y(f(y(_(P[1],O[0]),_(-O[1],P[0])),E[2]),y(f(y(_(E[1],O[0]),_(-O[1],E[0])),-P[2]),f(y(_(E[1],P[0]),_(-P[1],E[0])),O[2]))),C[3]))),y(f(y(f(y(_(P[1],C[0]),_(-C[1],P[0])),E[2]),y(f(y(_(E[1],C[0]),_(-C[1],E[0])),-P[2]),f(y(_(E[1],P[0]),_(-P[1],E[0])),C[2]))),-O[3]),y(f(y(f(y(_(C[1],O[0]),_(-O[1],C[0])),E[2]),y(f(y(_(E[1],O[0]),_(-O[1],E[0])),-C[2]),f(y(_(E[1],C[0]),_(-C[1],E[0])),O[2]))),w[3]),f(y(f(y(_(C[1],O[0]),_(-O[1],C[0])),w[2]),y(f(y(_(w[1],O[0]),_(-O[1],w[0])),-C[2]),f(y(_(w[1],C[0]),_(-C[1],w[0])),O[2]))),-E[3])))),y(y(f(y(f(y(_(E[1],O[0]),_(-O[1],E[0])),w[2]),y(f(y(_(w[1],O[0]),_(-O[1],w[0])),-E[2]),f(y(_(w[1],E[0]),_(-E[1],w[0])),O[2]))),C[3]),y(f(y(f(y(_(E[1],C[0]),_(-C[1],E[0])),w[2]),y(f(y(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),f(y(_(w[1],E[0]),_(-E[1],w[0])),C[2]))),-O[3]),f(y(f(y(_(P[1],C[0]),_(-C[1],P[0])),E[2]),y(f(y(_(E[1],C[0]),_(-C[1],E[0])),-P[2]),f(y(_(E[1],P[0]),_(-P[1],E[0])),C[2]))),w[3]))),y(f(y(f(y(_(P[1],C[0]),_(-C[1],P[0])),w[2]),y(f(y(_(w[1],C[0]),_(-C[1],w[0])),-P[2]),f(y(_(w[1],P[0]),_(-P[1],w[0])),C[2]))),-E[3]),y(f(y(f(y(_(E[1],C[0]),_(-C[1],E[0])),w[2]),y(f(y(_(w[1],C[0]),_(-C[1],w[0])),-E[2]),f(y(_(w[1],E[0]),_(-E[1],w[0])),C[2]))),P[3]),f(y(f(y(_(E[1],P[0]),_(-P[1],E[0])),w[2]),y(f(y(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),f(y(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),-C[3]))))),j=y(y(y(f(y(f(y(_(C[1],O[0]),_(-O[1],C[0])),P[2]),y(f(y(_(P[1],O[0]),_(-O[1],P[0])),-C[2]),f(y(_(P[1],C[0]),_(-C[1],P[0])),O[2]))),w[3]),f(y(f(y(_(C[1],O[0]),_(-O[1],C[0])),w[2]),y(f(y(_(w[1],O[0]),_(-O[1],w[0])),-C[2]),f(y(_(w[1],C[0]),_(-C[1],w[0])),O[2]))),-P[3])),y(f(y(f(y(_(P[1],O[0]),_(-O[1],P[0])),w[2]),y(f(y(_(w[1],O[0]),_(-O[1],w[0])),-P[2]),f(y(_(w[1],P[0]),_(-P[1],w[0])),O[2]))),C[3]),f(y(f(y(_(P[1],C[0]),_(-C[1],P[0])),w[2]),y(f(y(_(w[1],C[0]),_(-C[1],w[0])),-P[2]),f(y(_(w[1],P[0]),_(-P[1],w[0])),C[2]))),-O[3]))),y(y(f(y(f(y(_(P[1],O[0]),_(-O[1],P[0])),E[2]),y(f(y(_(E[1],O[0]),_(-O[1],E[0])),-P[2]),f(y(_(E[1],P[0]),_(-P[1],E[0])),O[2]))),w[3]),f(y(f(y(_(P[1],O[0]),_(-O[1],P[0])),w[2]),y(f(y(_(w[1],O[0]),_(-O[1],w[0])),-P[2]),f(y(_(w[1],P[0]),_(-P[1],w[0])),O[2]))),-E[3])),y(f(y(f(y(_(E[1],O[0]),_(-O[1],E[0])),w[2]),y(f(y(_(w[1],O[0]),_(-O[1],w[0])),-E[2]),f(y(_(w[1],E[0]),_(-E[1],w[0])),O[2]))),P[3]),f(y(f(y(_(E[1],P[0]),_(-P[1],E[0])),w[2]),y(f(y(_(w[1],P[0]),_(-P[1],w[0])),-E[2]),f(y(_(w[1],E[0]),_(-E[1],w[0])),P[2]))),-O[3])))),D=S(R,j);return D[D.length-1]}}function c(y){return(y===3?l:y===4?u:d)(n,i,r,a)}var x=c(3),g=c(4),p=[function(){return 0},function(){return 0},function(y,_){return _[0]-y[0]},function(y,_,f){var S,w=(y[1]-f[1])*(_[0]-f[0]),E=(y[0]-f[0])*(_[1]-f[1]),P=w-E;if(w>0){if(E<=0)return P;S=w+E}else{if(!(w<0)||E>=0)return P;S=-(w+E)}var C=33306690738754716e-32*S;return P>=C||P<=-C?P:x(y,_,f)},function(y,_,f,S){var w=y[0]-S[0],E=_[0]-S[0],P=f[0]-S[0],C=y[1]-S[1],O=_[1]-S[1],R=f[1]-S[1],j=y[2]-S[2],D=_[2]-S[2],N=f[2]-S[2],W=E*R,F=P*O,U=P*C,V=w*R,te=w*O,J=E*C,K=j*(W-F)+D*(U-V)+N*(te-J),X=7771561172376103e-31*((Math.abs(W)+Math.abs(F))*Math.abs(j)+(Math.abs(U)+Math.abs(V))*Math.abs(D)+(Math.abs(te)+Math.abs(J))*Math.abs(N));return K>X||-K>X?K:g(y,_,f,S)}];function v(y){var _=p[y.length];return _||(_=p[y.length]=c(y.length)),_.apply(void 0,y)}function m(y,_,f,S,w,E,P){return function(C,O,R,j,D){switch(arguments.length){case 0:case 1:return 0;case 2:return S(C,O);case 3:return w(C,O,R);case 4:return E(C,O,R,j);case 5:return P(C,O,R,j,D)}for(var N=new Array(arguments.length),W=0;W<arguments.length;++W)N[W]=arguments[W];return y(N)}}(function(){for(;p.length<=5;)p.push(c(p.length));h.exports=m.apply(void 0,[v].concat(p));for(var y=0;y<=5;++y)h.exports[y]=p[y]})()},2019:function(h,s,t){"use strict";var i=t(9662),n=t(8289);h.exports=function(r,a){if(r.length===1)return n(a,r[0]);if(a.length===1)return n(r,a[0]);if(r.length===0||a.length===0)return[0];var l=[0];if(r.length<a.length)for(var u=0;u<r.length;++u)l=i(l,n(a,r[u]));else for(u=0;u<a.length;++u)l=i(l,n(r,a[u]));return l}},8289:function(h,s,t){"use strict";var i=t(9660),n=t(87);h.exports=function(r,a){var l=r.length;if(l===1){var u=i(r[0],a);return u[0]?u:[u[1]]}var d=new Array(2*l),c=[.1,.1],x=[.1,.1],g=0;i(r[0],a,c),c[0]&&(d[g++]=c[0]);for(var p=1;p<l;++p){i(r[p],a,x);var v=c[1];n(v,x[0],c),c[0]&&(d[g++]=c[0]);var m=x[1],y=c[1],_=m+y,f=y-(_-m);c[1]=_,f&&(d[g++]=f)}return c[1]&&(d[g++]=c[1]),g===0&&(d[g++]=0),d.length=g,d}},4434:function(h,s,t){"use strict";h.exports=function(n,r,a,l){var u=i(n,a,l),d=i(r,a,l);if(u>0&&d>0||u<0&&d<0)return!1;var c=i(a,n,r),x=i(l,n,r);return!(c>0&&x>0||c<0&&x<0)&&(u!==0||d!==0||c!==0||x!==0||function(g,p,v,m){for(var y=0;y<2;++y){var _=g[y],f=p[y],S=Math.min(_,f),w=Math.max(_,f),E=v[y],P=m[y],C=Math.min(E,P);if(Math.max(E,P)<S||w<C)return!1}return!0}(n,r,a,l))};var i=t(417)[3]},4078:function(h){"use strict";h.exports=function(s,t){var i=0|s.length,n=0|t.length;if(i===1&&n===1)return function(C,O){var R=C+O,j=R-C,D=C-(R-j)+(O-j);return D?[D,R]:[R]}(s[0],-t[0]);var r,a,l=new Array(i+n),u=0,d=0,c=0,x=Math.abs,g=s[d],p=x(g),v=-t[c],m=x(v);p<m?(a=g,(d+=1)<i&&(p=x(g=s[d]))):(a=v,(c+=1)<n&&(m=x(v=-t[c]))),d<i&&p<m||c>=n?(r=g,(d+=1)<i&&(p=x(g=s[d]))):(r=v,(c+=1)<n&&(m=x(v=-t[c])));for(var y,_,f=r+a,S=f-r,w=a-S,E=w,P=f;d<i&&c<n;)p<m?(r=g,(d+=1)<i&&(p=x(g=s[d]))):(r=v,(c+=1)<n&&(m=x(v=-t[c]))),(w=(a=E)-(S=(f=r+a)-r))&&(l[u++]=w),E=P-((y=P+f)-(_=y-P))+(f-_),P=y;for(;d<i;)(w=(a=E)-(S=(f=(r=g)+a)-r))&&(l[u++]=w),E=P-((y=P+f)-(_=y-P))+(f-_),P=y,(d+=1)<i&&(g=s[d]);for(;c<n;)(w=(a=E)-(S=(f=(r=v)+a)-r))&&(l[u++]=w),E=P-((y=P+f)-(_=y-P))+(f-_),P=y,(c+=1)<n&&(v=-t[c]);return E&&(l[u++]=E),P&&(l[u++]=P),u||(l[u++]=0),l.length=u,l}},9662:function(h){"use strict";h.exports=function(s,t){var i=0|s.length,n=0|t.length;if(i===1&&n===1)return function(C,O){var R=C+O,j=R-C,D=C-(R-j)+(O-j);return D?[D,R]:[R]}(s[0],t[0]);var r,a,l=new Array(i+n),u=0,d=0,c=0,x=Math.abs,g=s[d],p=x(g),v=t[c],m=x(v);p<m?(a=g,(d+=1)<i&&(p=x(g=s[d]))):(a=v,(c+=1)<n&&(m=x(v=t[c]))),d<i&&p<m||c>=n?(r=g,(d+=1)<i&&(p=x(g=s[d]))):(r=v,(c+=1)<n&&(m=x(v=t[c])));for(var y,_,f=r+a,S=f-r,w=a-S,E=w,P=f;d<i&&c<n;)p<m?(r=g,(d+=1)<i&&(p=x(g=s[d]))):(r=v,(c+=1)<n&&(m=x(v=t[c]))),(w=(a=E)-(S=(f=r+a)-r))&&(l[u++]=w),E=P-((y=P+f)-(_=y-P))+(f-_),P=y;for(;d<i;)(w=(a=E)-(S=(f=(r=g)+a)-r))&&(l[u++]=w),E=P-((y=P+f)-(_=y-P))+(f-_),P=y,(d+=1)<i&&(g=s[d]);for(;c<n;)(w=(a=E)-(S=(f=(r=v)+a)-r))&&(l[u++]=w),E=P-((y=P+f)-(_=y-P))+(f-_),P=y,(c+=1)<n&&(v=t[c]);return E&&(l[u++]=E),P&&(l[u++]=P),u||(l[u++]=0),l.length=u,l}},8691:function(h,s,t){"use strict";h.exports=function(r){return n(i(r))};var i=t(2692),n=t(7037)},7212:function(h,s,t){"use strict";h.exports=function(l,u,d,c){if(d=d||0,c===void 0&&(c=function(f){for(var S=f.length,w=0,E=0;E<S;++E)w=0|Math.max(w,f[E].length);return w-1}(l)),l.length===0||c<1)return{cells:[],vertexIds:[],vertexWeights:[]};var x=function(f,S){for(var w=f.length,E=n.mallocUint8(w),P=0;P<w;++P)E[P]=f[P]<S|0;return E}(u,+d),g=function(f,S){for(var w=f.length,E=S*(S+1)/2*w|0,P=n.mallocUint32(2*E),C=0,O=0;O<w;++O)for(var R=f[O],j=(S=R.length,0);j<S;++j)for(var D=0;D<j;++D){var N=R[D],W=R[j];P[C++]=0|Math.min(N,W),P[C++]=0|Math.max(N,W)}r(i(P,[C/2|0,2]));var F=2;for(O=2;O<C;O+=2)P[O-2]===P[O]&&P[O-1]===P[O+1]||(P[F++]=P[O],P[F++]=P[O+1]);return i(P,[F/2|0,2])}(l,c),p=function(f,S,w,E){for(var P=f.data,C=f.shape[0],O=n.mallocDouble(C),R=0,j=0;j<C;++j){var D=P[2*j],N=P[2*j+1];if(w[D]!==w[N]){var W=S[D],F=S[N];P[2*R]=D,P[2*R+1]=N,O[R++]=(F-E)/(F-W)}}return f.shape[0]=R,i(O,[R])}(g,u,x,+d),v=function(f,S){var w=n.mallocInt32(2*S),E=f.shape[0],P=f.data;w[0]=0;for(var C=0,O=0;O<E;++O){var R=P[2*O];if(R!==C){for(w[2*C+1]=O;++C<R;)w[2*C]=O,w[2*C+1]=O;w[2*C]=O}}for(w[2*C+1]=E;++C<S;)w[2*C]=w[2*C+1]=E;return w}(g,0|u.length),m=a(c)(l,g.data,v,x),y=function(f){for(var S=0|f.shape[0],w=f.data,E=new Array(S),P=0;P<S;++P)E[P]=[w[2*P],w[2*P+1]];return E}(g),_=[].slice.call(p.data,0,p.shape[0]);return n.free(x),n.free(g.data),n.free(p.data),n.free(v),{cells:m,vertexIds:y,vertexWeights:_}};var i=t(5050),n=t(5306),r=t(8729),a=t(1168)},1168:function(h){"use strict";h.exports=function(t){return s[t]()};var s=[function(){return function(t,i,n,r){for(var a=t.length,l=0;l<a;++l)t[l].length;return[]}},function(){function t(i,n,r,a){for(var l=0|Math.min(r,a),u=0|Math.max(r,a),d=i[2*l],c=i[2*l+1];d<c;){var x=d+c>>1,g=n[2*x+1];if(g===u)return x;u<g?c=x:d=x+1}return d}return function(i,n,r,a){for(var l=i.length,u=[],d=0;d<l;++d){var c=i[d];if(c.length===2){var x=(a[c[0]]<<0)+(a[c[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}},function(){function t(i,n,r,a){for(var l=0|Math.min(r,a),u=0|Math.max(r,a),d=i[2*l],c=i[2*l+1];d<c;){var x=d+c>>1,g=n[2*x+1];if(g===u)return x;u<g?c=x:d=x+1}return d}return function(i,n,r,a){for(var l=i.length,u=[],d=0;d<l;++d){var c=i[d],x=c.length;if(x===3){if((g=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2))==0||g===7)continue;switch(g){case 0:case 7:break;case 1:u.push([t(r,n,c[0],c[2]),t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0]),t(r,n,c[1],c[2])]);break;case 3:u.push([t(r,n,c[0],c[2]),t(r,n,c[1],c[2])]);break;case 4:u.push([t(r,n,c[2],c[1]),t(r,n,c[2],c[0])]);break;case 5:u.push([t(r,n,c[2],c[1]),t(r,n,c[0],c[1])]);break;case 6:u.push([t(r,n,c[1],c[0]),t(r,n,c[2],c[0])])}}else if(x===2){var g;if((g=(a[c[0]]<<0)+(a[c[1]]<<1))==0||g===3)continue;switch(g){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}},function(){function t(i,n,r,a){for(var l=0|Math.min(r,a),u=0|Math.max(r,a),d=i[2*l],c=i[2*l+1];d<c;){var x=d+c>>1,g=n[2*x+1];if(g===u)return x;u<g?c=x:d=x+1}return d}return function(i,n,r,a){for(var l=i.length,u=[],d=0;d<l;++d){var c=i[d],x=c.length;if(x===4){if((g=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2)+(a[c[3]]<<3))==0||g===15)continue;switch(g){case 0:case 15:break;case 1:u.push([t(r,n,c[0],c[1]),t(r,n,c[0],c[2]),t(r,n,c[0],c[3])]);break;case 2:u.push([t(r,n,c[1],c[2]),t(r,n,c[1],c[0]),t(r,n,c[1],c[3])]);break;case 3:u.push([t(r,n,c[1],c[2]),t(r,n,c[0],c[2]),t(r,n,c[0],c[3])],[t(r,n,c[1],c[3]),t(r,n,c[1],c[2]),t(r,n,c[0],c[3])]);break;case 4:u.push([t(r,n,c[2],c[0]),t(r,n,c[2],c[1]),t(r,n,c[2],c[3])]);break;case 5:u.push([t(r,n,c[0],c[1]),t(r,n,c[2],c[1]),t(r,n,c[0],c[3])],[t(r,n,c[2],c[1]),t(r,n,c[2],c[3]),t(r,n,c[0],c[3])]);break;case 6:u.push([t(r,n,c[2],c[0]),t(r,n,c[1],c[0]),t(r,n,c[1],c[3])],[t(r,n,c[2],c[3]),t(r,n,c[2],c[0]),t(r,n,c[1],c[3])]);break;case 7:u.push([t(r,n,c[0],c[3]),t(r,n,c[1],c[3]),t(r,n,c[2],c[3])]);break;case 8:u.push([t(r,n,c[3],c[1]),t(r,n,c[3],c[0]),t(r,n,c[3],c[2])]);break;case 9:u.push([t(r,n,c[3],c[1]),t(r,n,c[0],c[1]),t(r,n,c[0],c[2])],[t(r,n,c[3],c[2]),t(r,n,c[3],c[1]),t(r,n,c[0],c[2])]);break;case 10:u.push([t(r,n,c[1],c[0]),t(r,n,c[3],c[0]),t(r,n,c[1],c[2])],[t(r,n,c[3],c[0]),t(r,n,c[3],c[2]),t(r,n,c[1],c[2])]);break;case 11:u.push([t(r,n,c[1],c[2]),t(r,n,c[0],c[2]),t(r,n,c[3],c[2])]);break;case 12:u.push([t(r,n,c[3],c[0]),t(r,n,c[2],c[0]),t(r,n,c[2],c[1])],[t(r,n,c[3],c[1]),t(r,n,c[3],c[0]),t(r,n,c[2],c[1])]);break;case 13:u.push([t(r,n,c[0],c[1]),t(r,n,c[2],c[1]),t(r,n,c[3],c[1])]);break;case 14:u.push([t(r,n,c[2],c[0]),t(r,n,c[1],c[0]),t(r,n,c[3],c[0])])}}else if(x===3){if((g=(a[c[0]]<<0)+(a[c[1]]<<1)+(a[c[2]]<<2))==0||g===7)continue;switch(g){case 0:case 7:break;case 1:u.push([t(r,n,c[0],c[2]),t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0]),t(r,n,c[1],c[2])]);break;case 3:u.push([t(r,n,c[0],c[2]),t(r,n,c[1],c[2])]);break;case 4:u.push([t(r,n,c[2],c[1]),t(r,n,c[2],c[0])]);break;case 5:u.push([t(r,n,c[2],c[1]),t(r,n,c[0],c[1])]);break;case 6:u.push([t(r,n,c[1],c[0]),t(r,n,c[2],c[0])])}}else if(x===2){var g;if((g=(a[c[0]]<<0)+(a[c[1]]<<1))==0||g===3)continue;switch(g){case 0:case 3:break;case 1:u.push([t(r,n,c[0],c[1])]);break;case 2:u.push([t(r,n,c[1],c[0])])}}}return u}}]},8211:function(h,s,t){"use strict";t(2288),t(1731),s.H=function(i,n){var r=i.length,a=i.length-n.length,l=Math.min;if(a)return a;switch(r){case 0:return 0;case 1:return i[0]-n[0];case 2:return(c=i[0]+i[1]-n[0]-n[1])||l(i[0],i[1])-l(n[0],n[1]);case 3:var u=i[0]+i[1],d=n[0]+n[1];if(c=u+i[2]-(d+n[2]))return c;var c,x=l(i[0],i[1]),g=l(n[0],n[1]);return(c=l(x,i[2])-l(g,n[2]))||l(x+i[2],u)-l(g+n[2],d);default:var p=i.slice(0);p.sort();var v=n.slice(0);v.sort();for(var m=0;m<r;++m)if(a=p[m]-v[m])return a;return 0}}},9392:function(h,s){"use strict";function t(n){var r=32;return(n&=-n)&&r--,65535&n&&(r-=16),16711935&n&&(r-=8),252645135&n&&(r-=4),858993459&n&&(r-=2),1431655765&n&&(r-=1),r}s.INT_BITS=32,s.INT_MAX=2147483647,s.INT_MIN=-2147483648,s.sign=function(n){return(n>0)-(n<0)},s.abs=function(n){var r=n>>31;return(n^r)-r},s.min=function(n,r){return r^(n^r)&-(n<r)},s.max=function(n,r){return n^(n^r)&-(n<r)},s.isPow2=function(n){return!(n&n-1||!n)},s.log2=function(n){var r,a;return r=(n>65535)<<4,r|=a=((n>>>=r)>255)<<3,r|=a=((n>>>=a)>15)<<2,(r|=a=((n>>>=a)>3)<<1)|(n>>>=a)>>1},s.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},s.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},s.countTrailingZeros=t,s.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,1+((n|=n>>>8)|n>>>16)},s.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},s.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var i=new Array(256);(function(n){for(var r=0;r<256;++r){var a=r,l=r,u=7;for(a>>>=1;a;a>>>=1)l<<=1,l|=1&a,--u;n[r]=l<<u&255}})(i),s.reverse=function(n){return i[255&n]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},s.interleave2=function(n,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))<<1},s.deinterleave2=function(n,r){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>r&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},s.interleave3=function(n,r,a){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<1)|(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<2},s.deinterleave3=function(n,r){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>r&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},s.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>t(n)+1}},6656:function(h,s,t){"use strict";var i=t(9392),n=t(9521);function r(g,p){var v=g.length,m=g.length-p.length,y=Math.min;if(m)return m;switch(v){case 0:return 0;case 1:return g[0]-p[0];case 2:return(S=g[0]+g[1]-p[0]-p[1])||y(g[0],g[1])-y(p[0],p[1]);case 3:var _=g[0]+g[1],f=p[0]+p[1];if(S=_+g[2]-(f+p[2]))return S;var S,w=y(g[0],g[1]),E=y(p[0],p[1]);return(S=y(w,g[2])-y(E,p[2]))||y(w+g[2],_)-y(E+p[2],f);default:var P=g.slice(0);P.sort();var C=p.slice(0);C.sort();for(var O=0;O<v;++O)if(m=P[O]-C[O])return m;return 0}}function a(g,p){return r(g[0],p[0])}function l(g,p){if(p){for(var v=g.length,m=new Array(v),y=0;y<v;++y)m[y]=[g[y],p[y]];for(m.sort(a),y=0;y<v;++y)g[y]=m[y][0],p[y]=m[y][1];return g}return g.sort(r),g}function u(g){if(g.length===0)return[];for(var p=1,v=g.length,m=1;m<v;++m){var y=g[m];if(r(y,g[m-1])){if(m===p){p++;continue}g[p++]=y}}return g.length=p,g}function d(g,p){for(var v=0,m=g.length-1,y=-1;v<=m;){var _=v+m>>1,f=r(g[_],p);f<=0?(f===0&&(y=_),v=_+1):f>0&&(m=_-1)}return y}function c(g,p){for(var v=new Array(g.length),m=0,y=v.length;m<y;++m)v[m]=[];for(var _=[],f=(m=0,p.length);m<f;++m)for(var S=p[m],w=S.length,E=1,P=1<<w;E<P;++E){_.length=i.popCount(E);for(var C=0,O=0;O<w;++O)E&1<<O&&(_[C++]=S[O]);var R=d(g,_);if(!(R<0))for(;v[R++].push(m),!(R>=g.length||r(g[R],_)!==0););}return v}function x(g,p){if(p<0)return[];for(var v=[],m=(1<<p+1)-1,y=0;y<g.length;++y)for(var _=g[y],f=m;f<1<<_.length;f=i.nextCombination(f)){for(var S=new Array(p+1),w=0,E=0;E<_.length;++E)f&1<<E&&(S[w++]=_[E]);v.push(S)}return l(v)}s.dimension=function(g){for(var p=0,v=Math.max,m=0,y=g.length;m<y;++m)p=v(p,g[m].length);return p-1},s.countVertices=function(g){for(var p=-1,v=Math.max,m=0,y=g.length;m<y;++m)for(var _=g[m],f=0,S=_.length;f<S;++f)p=v(p,_[f]);return p+1},s.cloneCells=function(g){for(var p=new Array(g.length),v=0,m=g.length;v<m;++v)p[v]=g[v].slice(0);return p},s.compareCells=r,s.normalize=l,s.unique=u,s.findCell=d,s.incidence=c,s.dual=function(g,p){if(!p)return c(u(x(g,0)),g);for(var v=new Array(p),m=0;m<p;++m)v[m]=[];m=0;for(var y=g.length;m<y;++m)for(var _=g[m],f=0,S=_.length;f<S;++f)v[_[f]].push(m);return v},s.explode=function(g){for(var p=[],v=0,m=g.length;v<m;++v)for(var y=g[v],_=0|y.length,f=1,S=1<<_;f<S;++f){for(var w=[],E=0;E<_;++E)f>>>E&1&&w.push(y[E]);p.push(w)}return l(p)},s.skeleton=x,s.boundary=function(g){for(var p=[],v=0,m=g.length;v<m;++v)for(var y=g[v],_=0,f=y.length;_<f;++_){for(var S=new Array(y.length-1),w=0,E=0;w<f;++w)w!==_&&(S[E++]=y[w]);p.push(S)}return l(p)},s.connectedComponents=function(g,p){return p?function(v,m){for(var y=new n(m),_=0;_<v.length;++_)for(var f=v[_],S=0;S<f.length;++S)for(var w=S+1;w<f.length;++w)y.link(f[S],f[w]);var E=[],P=y.ranks;for(_=0;_<P.length;++_)P[_]=-1;for(_=0;_<v.length;++_){var C=y.find(v[_][0]);P[C]<0?(P[C]=E.length,E.push([v[_].slice(0)])):E[P[C]].push(v[_].slice(0))}return E}(g,p):function(v){for(var m=u(l(x(v,0))),y=new n(m.length),_=0;_<v.length;++_)for(var f=v[_],S=0;S<f.length;++S)for(var w=d(m,[f[S]]),E=S+1;E<f.length;++E)y.link(w,d(m,[f[E]]));var P=[],C=y.ranks;for(_=0;_<C.length;++_)C[_]=-1;for(_=0;_<v.length;++_){var O=y.find(d(m,[v[_][0]]));C[O]<0?(C[O]=P.length,P.push([v[_].slice(0)])):P[C[O]].push(v[_].slice(0))}return P}(g)}},9521:function(h){"use strict";function s(t){this.roots=new Array(t),this.ranks=new Array(t);for(var i=0;i<t;++i)this.roots[i]=i,this.ranks[i]=0}h.exports=s,s.prototype.length=function(){return this.roots.length},s.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},s.prototype.find=function(t){for(var i=this.roots;i[t]!==t;){var n=i[t];i[t]=i[n],t=n}return t},s.prototype.link=function(t,i){var n=this.find(t),r=this.find(i);if(n!==r){var a=this.ranks,l=this.roots,u=a[n],d=a[r];u<d?l[n]=r:d<u?l[r]=n:(l[r]=n,++a[n])}}},8243:function(h,s,t){"use strict";h.exports=function(r,a,l){for(var u=a.length,d=r.length,c=new Array(u),x=new Array(u),g=new Array(u),p=new Array(u),v=0;v<u;++v)c[v]=x[v]=-1,g[v]=1/0,p[v]=!1;for(v=0;v<d;++v){var m=r[v];if(m.length!==2)throw new Error("Input must be a graph");var y=m[1],_=m[0];x[_]!==-1?x[_]=-2:x[_]=y,c[y]!==-1?c[y]=-2:c[y]=_}function f(J){if(p[J])return 1/0;var K,X,Z,$=c[J],re=x[J];return $<0||re<0?1/0:(K=a[J],X=a[$],Z=a[re],Math.abs(i(K,X,Z))/Math.sqrt(Math.pow(X[0]-Z[0],2)+Math.pow(X[1]-Z[1],2)))}function S(J,K){var X=D[J],Z=D[K];D[J]=Z,D[K]=X,N[X]=K,N[Z]=J}function w(J){return g[D[J]]}function E(J){return 1&J?J-1>>1:(J>>1)-1}function P(J){for(var K=w(J);;){var X=K,Z=2*J+1,$=2*(J+1),re=J;if(Z<W){var oe=w(Z);oe<X&&(re=Z,X=oe)}if($<W&&w($)<X&&(re=$),re===J)return J;S(J,re),J=re}}function C(J){for(var K=w(J);J>0;){var X=E(J);if(!(X>=0&&K<w(X)))return J;S(J,X),J=X}}function O(){if(W>0){var J=D[0];return S(0,W-1),W-=1,P(0),J}return-1}function R(J,K){var X=D[J];return g[X]===K?J:(g[X]=-1/0,C(J),O(),g[X]=K,C((W+=1)-1))}function j(J){if(!p[J]){p[J]=!0;var K=c[J],X=x[J];c[X]>=0&&(c[X]=K),x[K]>=0&&(x[K]=X),N[K]>=0&&R(N[K],f(K)),N[X]>=0&&R(N[X],f(X))}}var D=[],N=new Array(u);for(v=0;v<u;++v)(g[v]=f(v))<1/0?(N[v]=D.length,D.push(v)):N[v]=-1;var W=D.length;for(v=W>>1;v>=0;--v)P(v);for(;;){var F=O();if(F<0||g[F]>l)break;j(F)}var U=[];for(v=0;v<u;++v)p[v]||(N[v]=U.length,U.push(a[v].slice()));function V(J,K){if(J[K]<0)return K;var X=K,Z=K;do{var $=J[Z];if(!p[Z]||$<0||$===Z||($=J[Z=$],!p[Z]||$<0||$===Z))break;Z=$,X=J[X]}while(X!==Z);for(var re=K;re!==Z;re=J[re])J[re]=Z;return Z}U.length;var te=[];return r.forEach(function(J){var K=V(c,J[0]),X=V(x,J[1]);if(K>=0&&X>=0&&K!==X){var Z=N[K],$=N[X];Z!==$&&te.push([Z,$])}}),n.unique(n.normalize(te)),{positions:U,edges:te}};var i=t(417),n=t(6656)},6638:function(h,s,t){"use strict";h.exports=function(r,a){var l,u,d,c;if(a[0][0]<a[1][0])l=a[0],u=a[1];else{if(!(a[0][0]>a[1][0]))return n(a,r);l=a[1],u=a[0]}if(r[0][0]<r[1][0])d=r[0],c=r[1];else{if(!(r[0][0]>r[1][0]))return-n(r,a);d=r[1],c=r[0]}var x=i(l,u,c),g=i(l,u,d);if(x<0){if(g<=0)return x}else if(x>0){if(g>=0)return x}else if(g)return g;if(x=i(c,d,u),g=i(c,d,l),x<0){if(g<=0)return x}else if(x>0){if(g>=0)return x}else if(g)return g;return u[0]-c[0]};var i=t(417);function n(r,a){var l,u,d,c;if(a[0][0]<a[1][0])l=a[0],u=a[1];else{if(!(a[0][0]>a[1][0])){var x=Math.min(r[0][1],r[1][1]),g=Math.max(r[0][1],r[1][1]),p=Math.min(a[0][1],a[1][1]),v=Math.max(a[0][1],a[1][1]);return g<p?g-p:x>v?x-v:g-v}l=a[1],u=a[0]}r[0][1]<r[1][1]?(d=r[0],c=r[1]):(d=r[1],c=r[0]);var m=i(u,l,d);return m||(m=i(u,l,c))||c-u}},4385:function(h,s,t){"use strict";h.exports=function(g){for(var p=g.length,v=2*p,m=new Array(v),y=0;y<p;++y){var _=g[y],f=_[0][0]<_[1][0];m[2*y]=new x(_[0][0],_,f,y),m[2*y+1]=new x(_[1][0],_,!f,y)}m.sort(function(j,D){var N=j.x-D.x;return N||(N=j.create-D.create)||Math.min(j.segment[0][1],j.segment[1][1])-Math.min(D.segment[0][1],D.segment[1][1])});var S=n(a),w=[],E=[],P=[];for(y=0;y<v;){for(var C=m[y].x,O=[];y<v;){var R=m[y];if(R.x!==C)break;y+=1,R.segment[0][0]===R.x&&R.segment[1][0]===R.x?R.create&&(R.segment[0][1]<R.segment[1][1]?(O.push(new c(R.segment[0][1],R.index,!0,!0)),O.push(new c(R.segment[1][1],R.index,!1,!1))):(O.push(new c(R.segment[1][1],R.index,!0,!1)),O.push(new c(R.segment[0][1],R.index,!1,!0)))):S=R.create?S.insert(R.segment,R.index):S.remove(R.segment)}w.push(S.root),E.push(C),P.push(O)}return new l(w,E,P)};var i=t(5070),n=t(7080),r=t(417),a=t(6638);function l(g,p,v){this.slabs=g,this.coordinates=p,this.horizontal=v}function u(g,p){return g.y-p}function d(g,p){for(var v=null;g;){var m,y,_=g.key;_[0][0]<_[1][0]?(m=_[0],y=_[1]):(m=_[1],y=_[0]);var f=r(m,y,p);if(f<0)g=g.left;else if(f>0)if(p[0]!==_[1][0])v=g,g=g.right;else{if(S=d(g.right,p))return S;g=g.left}else{if(p[0]!==_[1][0])return g;var S;if(S=d(g.right,p))return S;g=g.left}}return v}function c(g,p,v,m){this.y=g,this.index=p,this.start=v,this.closed=m}function x(g,p,v,m){this.x=g,this.segment=p,this.create=v,this.index=m}l.prototype.castUp=function(g){var p=i.le(this.coordinates,g[0]);if(p<0)return-1;this.slabs[p];var v=d(this.slabs[p],g),m=-1;if(v&&(m=v.value),this.coordinates[p]===g[0]){var y=null;if(v&&(y=v.key),p>0){var _=d(this.slabs[p-1],g);_&&(y?a(_.key,y)>0&&(y=_.key,m=_.value):(m=_.value,y=_.key))}var f=this.horizontal[p];if(f.length>0){var S=i.ge(f,g[1],u);if(S<f.length){var w=f[S];if(g[1]===w.y){if(w.closed)return w.index;for(;S<f.length-1&&f[S+1].y===g[1];)if((w=f[S+=1]).closed)return w.index;if(w.y===g[1]&&!w.start){if((S+=1)>=f.length)return m;w=f[S]}}if(w.start)if(y){var E=r(y[0],y[1],[g[0],w.y]);y[0][0]>y[1][0]&&(E=-E),E>0&&(m=w.index)}else m=w.index;else w.y!==g[1]&&(m=w.index)}}}return m}},4670:function(h,s,t){"use strict";var i=t(9130),n=t(9662);function r(l,u){var d=n(i(l,u),[u[u.length-1]]);return d[d.length-1]}function a(l,u,d,c){var x=-u/(c-u);x<0?x=0:x>1&&(x=1);for(var g=1-x,p=l.length,v=new Array(p),m=0;m<p;++m)v[m]=x*l[m]+g*d[m];return v}h.exports=function(l,u){for(var d=[],c=[],x=r(l[l.length-1],u),g=l[l.length-1],p=l[0],v=0;v<l.length;++v,g=p){var m=r(p=l[v],u);if(x<0&&m>0||x>0&&m<0){var y=a(g,m,p,x);d.push(y),c.push(y.slice())}m<0?c.push(p.slice()):m>0?d.push(p.slice()):(d.push(p.slice()),c.push(p.slice())),x=m}return{positive:d,negative:c}},h.exports.positive=function(l,u){for(var d=[],c=r(l[l.length-1],u),x=l[l.length-1],g=l[0],p=0;p<l.length;++p,x=g){var v=r(g=l[p],u);(c<0&&v>0||c>0&&v<0)&&d.push(a(x,v,g,c)),v>=0&&d.push(g.slice()),c=v}return d},h.exports.negative=function(l,u){for(var d=[],c=r(l[l.length-1],u),x=l[l.length-1],g=l[0],p=0;p<l.length;++p,x=g){var v=r(g=l[p],u);(c<0&&v>0||c>0&&v<0)&&d.push(a(x,v,g,c)),v<=0&&d.push(g.slice()),c=v}return d}},8974:function(h,s,t){var i;(function(){"use strict";var n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(u){return function(d,c){var x,g,p,v,m,y,_,f,S,w=1,E=d.length,P="";for(g=0;g<E;g++)if(typeof d[g]=="string")P+=d[g];else if(typeof d[g]=="object"){if((v=d[g]).keys)for(x=c[w],p=0;p<v.keys.length;p++){if(x==null)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',v.keys[p],v.keys[p-1]));x=x[v.keys[p]]}else x=v.param_no?c[v.param_no]:c[w++];if(n.not_type.test(v.type)&&n.not_primitive.test(v.type)&&x instanceof Function&&(x=x()),n.numeric_arg.test(v.type)&&typeof x!="number"&&isNaN(x))throw new TypeError(r("[sprintf] expecting number but found %T",x));switch(n.number.test(v.type)&&(f=x>=0),v.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,v.width?parseInt(v.width):0);break;case"e":x=v.precision?parseFloat(x).toExponential(v.precision):parseFloat(x).toExponential();break;case"f":x=v.precision?parseFloat(x).toFixed(v.precision):parseFloat(x);break;case"g":x=v.precision?String(Number(x.toPrecision(v.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x),x=v.precision?x.substring(0,v.precision):x;break;case"t":x=String(!!x),x=v.precision?x.substring(0,v.precision):x;break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase(),x=v.precision?x.substring(0,v.precision):x;break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf(),x=v.precision?x.substring(0,v.precision):x;break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase()}n.json.test(v.type)?P+=x:(!n.number.test(v.type)||f&&!v.sign?S="":(S=f?"+":"-",x=x.toString().replace(n.sign,"")),y=v.pad_char?v.pad_char==="0"?"0":v.pad_char.charAt(1):" ",_=v.width-(S+x).length,m=v.width&&_>0?y.repeat(_):"",P+=v.align?S+x+m:y==="0"?S+m+x:m+S+x)}return P}(function(d){if(l[d])return l[d];for(var c,x=d,g=[],p=0;x;){if((c=n.text.exec(x))!==null)g.push(c[0]);else if((c=n.modulo.exec(x))!==null)g.push("%");else{if((c=n.placeholder.exec(x))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){p|=1;var v=[],m=c[2],y=[];if((y=n.key.exec(m))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(v.push(y[1]);(m=m.substring(y[0].length))!=="";)if((y=n.key_access.exec(m))!==null)v.push(y[1]);else{if((y=n.index_access.exec(m))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");v.push(y[1])}c[2]=v}else p|=2;if(p===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}x=x.substring(c[0].length)}return l[d]=g}(u),arguments)}function a(u,d){return r.apply(null,[u].concat(d||[]))}var l=Object.create(null);s.sprintf=r,s.vsprintf=a,typeof window!="undefined"&&(window.sprintf=r,window.vsprintf=a,(i=function(){return{sprintf:r,vsprintf:a}}.call(s,t,s,h))===void 0||(h.exports=i))})()},4162:function(h,s,t){"use strict";h.exports=function(l,u){if(l.dimension<=0)return{positions:[],cells:[]};if(l.dimension===1)return function(x,g){for(var p=n(x,g),v=p.length,m=new Array(v),y=new Array(v),_=0;_<v;++_)m[_]=[p[_]],y[_]=[_];return{positions:m,cells:y}}(l,u);var d=l.order.join()+"-"+l.dtype,c=a[d];return u=+u||0,c||(c=a[d]=function(x,g){var p=x.length+"d",v=r[p];if(v)return v(i,x,g)}(l.order,l.dtype)),c(l,u)};var i=t(9284),n=t(9584),r={"2d":function(l,u,d){var c=l({order:u,scalarArguments:3,getters:d==="generic"?[0]:void 0,phase:function(x,g,p,v){return x>v|0},vertex:function(x,g,p,v,m,y,_,f,S,w,E,P,C){var O=(_<<0)+(f<<1)+(S<<2)+(w<<3)|0;if(O!==0&&O!==15)switch(O){case 0:case 15:E.push([x-.5,g-.5]);break;case 1:E.push([x-.25-.25*(v+p-2*C)/(p-v),g-.25-.25*(m+p-2*C)/(p-m)]);break;case 2:E.push([x-.75-.25*(-v-p+2*C)/(v-p),g-.25-.25*(y+v-2*C)/(v-y)]);break;case 3:E.push([x-.5,g-.5-.5*(m+p+y+v-4*C)/(p-m+v-y)]);break;case 4:E.push([x-.25-.25*(y+m-2*C)/(m-y),g-.75-.25*(-m-p+2*C)/(m-p)]);break;case 5:E.push([x-.5-.5*(v+p+y+m-4*C)/(p-v+m-y),g-.5]);break;case 6:E.push([x-.5-.25*(-v-p+y+m)/(v-p+m-y),g-.5-.25*(-m-p+y+v)/(m-p+v-y)]);break;case 7:E.push([x-.75-.25*(y+m-2*C)/(m-y),g-.75-.25*(y+v-2*C)/(v-y)]);break;case 8:E.push([x-.75-.25*(-y-m+2*C)/(y-m),g-.75-.25*(-y-v+2*C)/(y-v)]);break;case 9:E.push([x-.5-.25*(v+p+-y-m)/(p-v+y-m),g-.5-.25*(m+p+-y-v)/(p-m+y-v)]);break;case 10:E.push([x-.5-.5*(-v-p-y-m+4*C)/(v-p+y-m),g-.5]);break;case 11:E.push([x-.25-.25*(-y-m+2*C)/(y-m),g-.75-.25*(m+p-2*C)/(p-m)]);break;case 12:E.push([x-.5,g-.5-.5*(-m-p-y-v+4*C)/(m-p+y-v)]);break;case 13:E.push([x-.75-.25*(v+p-2*C)/(p-v),g-.25-.25*(-y-v+2*C)/(y-v)]);break;case 14:E.push([x-.25-.25*(-v-p+2*C)/(v-p),g-.25-.25*(-m-p+2*C)/(m-p)])}},cell:function(x,g,p,v,m,y,_,f,S){m?f.push([x,g]):f.push([g,x])}});return function(x,g){var p=[],v=[];return c(x,p,v,g),{positions:p,cells:v}}}},a={}},6946:function(h,s,t){"use strict";h.exports=function a(l,u,d){d=d||{};var c=r[l];c||(c=r[l]={" ":{data:new Float32Array(0),shape:.2}});var x=c[u];if(!x)if(u.length<=1||!/\d/.test(u))x=c[u]=function(P){for(var C=P.cells,O=P.positions,R=new Float32Array(6*C.length),j=0,D=0,N=0;N<C.length;++N)for(var W=C[N],F=0;F<3;++F){var U=O[W[F]];R[j++]=U[0],R[j++]=U[1]+1.4,D=Math.max(U[0],D)}return{data:R,shape:D}}(i(u,{triangles:!0,font:l,textAlign:d.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var g=u.split(/(\d|\s)/),p=new Array(g.length),v=0,m=0,y=0;y<g.length;++y)p[y]=a(l,g[y]),v+=p[y].data.length,m+=p[y].shape,y>0&&(m+=.02);var _=new Float32Array(v),f=0,S=-.5*m;for(y=0;y<p.length;++y){for(var w=p[y].data,E=0;E<w.length;E+=2)_[f++]=w[E]+S,_[f++]=w[E+1];S+=p[y].shape+.02}x=c[u]={data:_,shape:m}}return x};var i=t(875),n=window||k.global||{},r=n.__TEXT_CACHE||{};n.__TEXT_CACHE={}},14:function(h,s,t){"use strict";var i=t(4405);h.exports=a;var n=96;function r(l,u){var d=i(getComputedStyle(l).getPropertyValue(u));return d[0]*a(d[1],l)}function a(l,u){switch(u=u||document.body,l=(l||"px").trim().toLowerCase(),u!==window&&u!==document||(u=document.body),l){case"%":return u.clientHeight/100;case"ch":case"ex":return function(d,c){var x=document.createElement("div");x.style["font-size"]="128"+d,c.appendChild(x);var g=r(x,"font-size")/128;return c.removeChild(x),g}(l,u);case"em":return r(u,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return n;case"cm":return n/2.54;case"mm":return n/25.4;case"pt":return n/72;case"pc":return n/6}return 1}},3440:function(h,s,t){"use strict";h.exports=function(m){var y=(m=m||{}).center||[0,0,0],_=m.up||[0,1,0],f=m.right||x(_),S=m.radius||1,w=m.theta||0,E=m.phi||0;if(y=[].slice.call(y,0,3),_=[].slice.call(_,0,3),l(_,_),f=[].slice.call(f,0,3),l(f,f),"eye"in m){var P=m.eye,C=[P[0]-y[0],P[1]-y[1],P[2]-y[2]];a(f,C,_),d(f[0],f[1],f[2])<1e-6?f=x(_):l(f,f),S=d(C[0],C[1],C[2]);var O=u(_,C)/S,R=u(f,C)/S;E=Math.acos(O),w=Math.acos(R)}return S=Math.log(S),new g(m.zoomMin,m.zoomMax,y,_,f,S,w,E)};var i=t(8444),n=t(7437),r=t(4422),a=t(903),l=t(899),u=t(9305);function d(m,y,_){return Math.sqrt(Math.pow(m,2)+Math.pow(y,2)+Math.pow(_,2))}function c(m){return Math.min(1,Math.max(-1,m))}function x(m){var y=Math.abs(m[0]),_=Math.abs(m[1]),f=Math.abs(m[2]),S=[0,0,0];y>Math.max(_,f)?S[2]=1:_>Math.max(y,f)?S[0]=1:S[1]=1;for(var w=0,E=0,P=0;P<3;++P)w+=m[P]*m[P],E+=S[P]*m[P];for(P=0;P<3;++P)S[P]-=E/w*m[P];return l(S,S),S}function g(m,y,_,f,S,w,E,P){this.center=i(_),this.up=i(f),this.right=i(S),this.radius=i([w]),this.angle=i([E,P]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(m,y),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var p=g.prototype;p.setDistanceLimits=function(m,y){m=m>0?Math.log(m):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,m),this.radius.bounds[0][0]=m,this.radius.bounds[1][0]=y},p.getDistanceLimits=function(m){var y=this.radius.bounds[0];return m?(m[0]=Math.exp(y[0][0]),m[1]=Math.exp(y[1][0]),m):[Math.exp(y[0][0]),Math.exp(y[1][0])]},p.recalcMatrix=function(m){this.center.curve(m),this.up.curve(m),this.right.curve(m),this.radius.curve(m),this.angle.curve(m);for(var y=this.computedUp,_=this.computedRight,f=0,S=0,w=0;w<3;++w)S+=y[w]*_[w],f+=y[w]*y[w];var E=Math.sqrt(f),P=0;for(w=0;w<3;++w)_[w]-=y[w]*S/f,P+=_[w]*_[w],y[w]/=E;var C=Math.sqrt(P);for(w=0;w<3;++w)_[w]/=C;var O=this.computedToward;a(O,y,_),l(O,O);var R=Math.exp(this.computedRadius[0]),j=this.computedAngle[0],D=this.computedAngle[1],N=Math.cos(j),W=Math.sin(j),F=Math.cos(D),U=Math.sin(D),V=this.computedCenter,te=N*F,J=W*F,K=U,X=-N*U,Z=-W*U,$=F,re=this.computedEye,oe=this.computedMatrix;for(w=0;w<3;++w){var ie=te*_[w]+J*O[w]+K*y[w];oe[4*w+1]=X*_[w]+Z*O[w]+$*y[w],oe[4*w+2]=ie,oe[4*w+3]=0}var ue=oe[1],me=oe[5],be=oe[9],ge=oe[2],de=oe[6],ve=oe[10],pe=me*ve-be*de,_e=be*ge-ue*ve,Te=ue*de-me*ge,le=d(pe,_e,Te);for(pe/=le,_e/=le,Te/=le,oe[0]=pe,oe[4]=_e,oe[8]=Te,w=0;w<3;++w)re[w]=V[w]+oe[2+4*w]*R;for(w=0;w<3;++w){P=0;for(var ae=0;ae<3;++ae)P+=oe[w+4*ae]*re[ae];oe[12+w]=-P}oe[15]=1},p.getMatrix=function(m,y){this.recalcMatrix(m);var _=this.computedMatrix;if(y){for(var f=0;f<16;++f)y[f]=_[f];return y}return _};var v=[0,0,0];p.rotate=function(m,y,_,f){if(this.angle.move(m,y,_),f){this.recalcMatrix(m);var S=this.computedMatrix;v[0]=S[2],v[1]=S[6],v[2]=S[10];for(var w=this.computedUp,E=this.computedRight,P=this.computedToward,C=0;C<3;++C)S[4*C]=w[C],S[4*C+1]=E[C],S[4*C+2]=P[C];for(r(S,S,f,v),C=0;C<3;++C)w[C]=S[4*C],E[C]=S[4*C+1];this.up.set(m,w[0],w[1],w[2]),this.right.set(m,E[0],E[1],E[2])}},p.pan=function(m,y,_,f){y=y||0,_=_||0,f=f||0,this.recalcMatrix(m);var S=this.computedMatrix,w=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],P=S[9],C=d(w,E,P);w/=C,E/=C,P/=C;var O=S[0],R=S[4],j=S[8],D=O*w+R*E+j*P,N=d(O-=w*D,R-=E*D,j-=P*D),W=(O/=N)*y+w*_,F=(R/=N)*y+E*_,U=(j/=N)*y+P*_;this.center.move(m,W,F,U);var V=Math.exp(this.computedRadius[0]);V=Math.max(1e-4,V+f),this.radius.set(m,Math.log(V))},p.translate=function(m,y,_,f){this.center.move(m,y||0,_||0,f||0)},p.setMatrix=function(m,y,_,f){var S=1;typeof _=="number"&&(S=0|_),(S<0||S>3)&&(S=1);var w=(S+2)%3;y||(this.recalcMatrix(m),y=this.computedMatrix);var E=y[S],P=y[S+4],C=y[S+8];if(f){var O=Math.abs(E),R=Math.abs(P),j=Math.abs(C),D=Math.max(O,R,j);O===D?(E=E<0?-1:1,P=C=0):j===D?(C=C<0?-1:1,E=P=0):(P=P<0?-1:1,E=C=0)}else{var N=d(E,P,C);E/=N,P/=N,C/=N}var W,F,U=y[w],V=y[w+4],te=y[w+8],J=U*E+V*P+te*C,K=d(U-=E*J,V-=P*J,te-=C*J),X=P*(te/=K)-C*(V/=K),Z=C*(U/=K)-E*te,$=E*V-P*U,re=d(X,Z,$);if(X/=re,Z/=re,$/=re,this.center.jump(m,Me,Ee,De),this.radius.idle(m),this.up.jump(m,E,P,C),this.right.jump(m,U,V,te),S===2){var oe=y[1],ie=y[5],ue=y[9],me=oe*U+ie*V+ue*te,be=oe*X+ie*Z+ue*$;W=pe<0?-Math.PI/2:Math.PI/2,F=Math.atan2(be,me)}else{var ge=y[2],de=y[6],ve=y[10],pe=ge*E+de*P+ve*C,_e=ge*U+de*V+ve*te,Te=ge*X+de*Z+ve*$;W=Math.asin(c(pe)),F=Math.atan2(Te,_e)}this.angle.jump(m,F,W),this.recalcMatrix(m);var le=y[2],ae=y[6],he=y[10],Se=this.computedMatrix;n(Se,y);var ke=Se[15],Me=Se[12]/ke,Ee=Se[13]/ke,De=Se[14]/ke,fe=Math.exp(this.computedRadius[0]);this.center.jump(m,Me-le*fe,Ee-ae*fe,De-he*fe)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(m){this.center.idle(m),this.up.idle(m),this.right.idle(m),this.radius.idle(m),this.angle.idle(m)},p.flush=function(m){this.center.flush(m),this.up.flush(m),this.right.flush(m),this.radius.flush(m),this.angle.flush(m)},p.setDistance=function(m,y){y>0&&this.radius.set(m,Math.log(y))},p.lookAt=function(m,y,_,f){this.recalcMatrix(m),y=y||this.computedEye,_=_||this.computedCenter;var S=(f=f||this.computedUp)[0],w=f[1],E=f[2],P=d(S,w,E);if(!(P<1e-6)){S/=P,w/=P,E/=P;var C=y[0]-_[0],O=y[1]-_[1],R=y[2]-_[2],j=d(C,O,R);if(!(j<1e-6)){C/=j,O/=j,R/=j;var D=this.computedRight,N=D[0],W=D[1],F=D[2],U=S*N+w*W+E*F,V=d(N-=U*S,W-=U*w,F-=U*E);if(!(V<.01&&(V=d(N=w*R-E*O,W=E*C-S*R,F=S*O-w*C))<1e-6)){N/=V,W/=V,F/=V,this.up.set(m,S,w,E),this.right.set(m,N,W,F),this.center.set(m,_[0],_[1],_[2]),this.radius.set(m,Math.log(j));var te=w*F-E*W,J=E*N-S*F,K=S*W-w*N,X=d(te,J,K),Z=S*C+w*O+E*R,$=N*C+W*O+F*R,re=(te/=X)*C+(J/=X)*O+(K/=X)*R,oe=Math.asin(c(Z)),ie=Math.atan2(re,$),ue=this.angle._state,me=ue[ue.length-1],be=ue[ue.length-2];me%=2*Math.PI;var ge=Math.abs(me+2*Math.PI-ie),de=Math.abs(me-ie),ve=Math.abs(me-2*Math.PI-ie);ge<de&&(me+=2*Math.PI),ve<de&&(me-=2*Math.PI),this.angle.jump(this.angle.lastT(),me,be),this.angle.set(m,ie,oe)}}}}},9660:function(h){"use strict";h.exports=function(t,i,n){var r=t*i,a=s*t,l=a-(a-t),u=t-l,d=s*i,c=d-(d-i),x=i-c,g=u*x-(r-l*c-u*c-l*x);return n?(n[0]=g,n[1]=r,n):[g,r]};var s=+(Math.pow(2,27)+1)},87:function(h){"use strict";h.exports=function(s,t,i){var n=s+t,r=n-s,a=t-r,l=s-(n-r);return i?(i[0]=l+a,i[1]=n,i):[l+a,n]}},5306:function(h,s,t){"use strict";var i=t(2288),n=t(3094),r=t(2146).lW;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var a=typeof Uint8ClampedArray!="undefined",l=typeof BigUint64Array!="undefined",u=typeof BigInt64Array!="undefined",d=t.g.__TYPEDARRAY_POOL;d.UINT8C||(d.UINT8C=n([32,0])),d.BIGUINT64||(d.BIGUINT64=n([32,0])),d.BIGINT64||(d.BIGINT64=n([32,0])),d.BUFFER||(d.BUFFER=n([32,0]));var c=d.DATA,x=d.BUFFER;function g(D){if(D){var N=D.length||D.byteLength,W=i.log2(N);c[W].push(D)}}function p(D){D=i.nextPow2(D);var N=i.log2(D),W=c[N];return W.length>0?W.pop():new ArrayBuffer(D)}function v(D){return new Uint8Array(p(D),0,D)}function m(D){return new Uint16Array(p(2*D),0,D)}function y(D){return new Uint32Array(p(4*D),0,D)}function _(D){return new Int8Array(p(D),0,D)}function f(D){return new Int16Array(p(2*D),0,D)}function S(D){return new Int32Array(p(4*D),0,D)}function w(D){return new Float32Array(p(4*D),0,D)}function E(D){return new Float64Array(p(8*D),0,D)}function P(D){return a?new Uint8ClampedArray(p(D),0,D):v(D)}function C(D){return l?new BigUint64Array(p(8*D),0,D):null}function O(D){return u?new BigInt64Array(p(8*D),0,D):null}function R(D){return new DataView(p(D),0,D)}function j(D){D=i.nextPow2(D);var N=i.log2(D),W=x[N];return W.length>0?W.pop():new r(D)}s.free=function(D){if(r.isBuffer(D))x[i.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var N=D.length||D.byteLength,W=0|i.log2(N);c[W].push(D)}},s.freeUint8=s.freeUint16=s.freeUint32=s.freeBigUint64=s.freeInt8=s.freeInt16=s.freeInt32=s.freeBigInt64=s.freeFloat32=s.freeFloat=s.freeFloat64=s.freeDouble=s.freeUint8Clamped=s.freeDataView=function(D){g(D.buffer)},s.freeArrayBuffer=g,s.freeBuffer=function(D){x[i.log2(D.length)].push(D)},s.malloc=function(D,N){if(N===void 0||N==="arraybuffer")return p(D);switch(N){case"uint8":return v(D);case"uint16":return m(D);case"uint32":return y(D);case"int8":return _(D);case"int16":return f(D);case"int32":return S(D);case"float":case"float32":return w(D);case"double":case"float64":return E(D);case"uint8_clamped":return P(D);case"bigint64":return O(D);case"biguint64":return C(D);case"buffer":return j(D);case"data":case"dataview":return R(D);default:return null}return null},s.mallocArrayBuffer=p,s.mallocUint8=v,s.mallocUint16=m,s.mallocUint32=y,s.mallocInt8=_,s.mallocInt16=f,s.mallocInt32=S,s.mallocFloat32=s.mallocFloat=w,s.mallocFloat64=s.mallocDouble=E,s.mallocUint8Clamped=P,s.mallocBigUint64=C,s.mallocBigInt64=O,s.mallocDataView=R,s.mallocBuffer=j,s.clearCache=function(){for(var D=0;D<32;++D)d.UINT8[D].length=0,d.UINT16[D].length=0,d.UINT32[D].length=0,d.INT8[D].length=0,d.INT16[D].length=0,d.INT32[D].length=0,d.FLOAT[D].length=0,d.DOUBLE[D].length=0,d.BIGUINT64[D].length=0,d.BIGINT64[D].length=0,d.UINT8C[D].length=0,c[D].length=0,x[D].length=0}},1731:function(h){"use strict";function s(i){this.roots=new Array(i),this.ranks=new Array(i);for(var n=0;n<i;++n)this.roots[n]=n,this.ranks[n]=0}h.exports=s;var t=s.prototype;Object.defineProperty(t,"length",{get:function(){return this.roots.length}}),t.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},t.find=function(i){for(var n=i,r=this.roots;r[i]!==i;)i=r[i];for(;r[n]!==i;){var a=r[n];r[n]=i,n=a}return i},t.link=function(i,n){var r=this.find(i),a=this.find(n);if(r!==a){var l=this.ranks,u=this.roots,d=l[r],c=l[a];d<c?u[r]=a:c<d?u[a]=r:(u[a]=r,++l[r])}}},1215:function(h){"use strict";h.exports=function(s,t,i){return s.length===0?s:t?(i||s.sort(t),function(n,r){for(var a=1,l=n.length,u=n[0],d=n[0],c=1;c<l;++c)if(d=u,r(u=n[c],d)){if(c===a){a++;continue}n[a++]=u}return n.length=a,n}(s,t)):(i||s.sort(),function(n){for(var r=1,a=n.length,l=n[0],u=n[0],d=1;d<a;++d,u=l)if(u=l,(l=n[d])!==u){if(d===r){r++;continue}n[r++]=l}return n.length=r,n}(s))}},875:function(h,s,t){"use strict";h.exports=function(a,l){return typeof l=="object"&&l!==null||(l={}),i(a,l.canvas||n,l.context||r,l)};var i=t(712),n=null,r=null;typeof document!="undefined"&&((n=document.createElement("canvas")).width=8192,n.height=1024,r=n.getContext("2d"))},712:function(h,s,t){h.exports=function(C,O,R,j){var D=64,N=1.25,W={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return j&&(j.size&&j.size>0&&(D=j.size),j.lineSpacing&&j.lineSpacing>0&&(N=j.lineSpacing),j.styletags&&j.styletags.breaklines&&(W.breaklines=!!j.styletags.breaklines),j.styletags&&j.styletags.bolds&&(W.bolds=!!j.styletags.bolds),j.styletags&&j.styletags.italics&&(W.italics=!!j.styletags.italics),j.styletags&&j.styletags.subscripts&&(W.subscripts=!!j.styletags.subscripts),j.styletags&&j.styletags.superscripts&&(W.superscripts=!!j.styletags.superscripts)),R.font=[j.fontStyle,j.fontVariant,j.fontWeight,D+"px",j.font].filter(function(F){return F}).join(" "),R.textAlign="start",R.textBaseline="alphabetic",R.direction="ltr",P(function(F,U,V,te,J,K){V=V.replace(/\n/g,""),V=K.breaklines===!0?V.replace(/\<br\>/g,`
`):V.replace(/\<br\>/g," ");var X="",Z=[];for(ie=0;ie<V.length;++ie)Z[ie]=X;K.bolds===!0&&(Z=S(d,c,V,Z)),K.italics===!0&&(Z=S(x,g,V,Z)),K.superscripts===!0&&(Z=S(p,m,V,Z)),K.subscripts===!0&&(Z=S(y,f,V,Z));var $=[],re="";for(ie=0;ie<V.length;++ie)Z[ie]!==null&&(re+=V[ie],$.push(Z[ie]));var oe,ie,ue,me,be,ge=re.split(`
`),de=ge.length,ve=Math.round(J*te),pe=te,_e=2*te,Te=0,le=de*ve+_e;F.height<le&&(F.height=le),U.fillStyle="#000",U.fillRect(0,0,F.width,F.height),U.fillStyle="#fff";var ae=0,he="";function Se(){if(he!==""){var Oe=U.measureText(he).width;U.fillText(he,pe+ue,_e+me),ue+=Oe}}function ke(){return Math.round(be)+"px "}function Me(Oe,ze){var Pe=""+U.font;if(K.subscripts===!0){var Ue=Oe.indexOf(_),Ve=ze.indexOf(_),Ze=Ue>-1?parseInt(Oe[1+Ue]):0,it=Ve>-1?parseInt(ze[1+Ve]):0;Ze!==it&&(Pe=Pe.replace(ke(),"?px "),be*=Math.pow(.75,it-Ze),Pe=Pe.replace("?px ",ke())),me+=.25*ve*(it-Ze)}if(K.superscripts===!0){var tt=Oe.indexOf(v),dt=ze.indexOf(v),yt=tt>-1?parseInt(Oe[1+tt]):0,vt=dt>-1?parseInt(ze[1+dt]):0;yt!==vt&&(Pe=Pe.replace(ke(),"?px "),be*=Math.pow(.75,vt-yt),Pe=Pe.replace("?px ",ke())),me-=.25*ve*(vt-yt)}if(K.bolds===!0){var et=Oe.indexOf(c)>-1,Qe=ze.indexOf(c)>-1;!et&&Qe&&(Pe=wt?Pe.replace("italic ","italic bold "):"bold "+Pe),et&&!Qe&&(Pe=Pe.replace("bold ",""))}if(K.italics===!0){var wt=Oe.indexOf(g)>-1,It=ze.indexOf(g)>-1;!wt&&It&&(Pe="italic "+Pe),wt&&!It&&(Pe=Pe.replace("italic ",""))}U.font=Pe}for(oe=0;oe<de;++oe){var Ee=ge[oe]+`
`;for(ue=0,me=oe*ve,be=te,he="",ie=0;ie<Ee.length;++ie){var De=ie+ae<$.length?$[ie+ae]:$[$.length-1];X===De?he+=Ee[ie]:(Se(),he=Ee[ie],De!==void 0&&(Me(X,De),X=De))}Se(),ae+=Ee.length;var fe=0|Math.round(ue+2*pe);Te<fe&&(Te=fe)}var xe=Te,we=_e+ve*de;return n(U.getImageData(0,0,xe,we).data,[we,xe,4]).pick(-1,-1,0).transpose(1,0)}(O,R,C,D,N,W),j,D)},h.exports.processPixels=P;var i=t(4162),n=t(5050),r=t(8243),a=t(197),l=t(7761),u=t(8040),d="b",c="b|",x="i",g="i|",p="sup",v="+",m="+1",y="sub",_="-",f="-1";function S(C,O,R,j){for(var D="<"+C+">",N="</"+C+">",W=D.length,F=N.length,U=O[0]===v||O[0]===_,V=0,te=-F;V>-1&&(V=R.indexOf(D,V))!==-1&&(te=R.indexOf(N,V+W))!==-1&&!(te<=V);){for(var J=V;J<te+F;++J)if(J<V+W||J>=te)j[J]=null,R=R.substr(0,J)+" "+R.substr(J+1);else if(j[J]!==null){var K=j[J].indexOf(O[0]);K===-1?j[J]+=O:U&&(j[J]=j[J].substr(0,K+1)+(1+parseInt(j[J][K+1]))+j[J].substr(K+2))}var X=V+W,Z=R.substr(X,te-X).indexOf(D);V=Z!==-1?Z:te+F}return j}function w(C,O){var R=i(C,128);return O?r(R.cells,R.positions,.25):{edges:R.cells,positions:R.positions}}function E(C,O,R,j){var D=w(C,j),N=function(oe,ie,ue){for(var me=ie.textAlign||"start",be=ie.textBaseline||"alphabetic",ge=[1<<30,1<<30],de=[0,0],ve=oe.length,pe=0;pe<ve;++pe)for(var _e=oe[pe],Te=0;Te<2;++Te)ge[Te]=0|Math.min(ge[Te],_e[Te]),de[Te]=0|Math.max(de[Te],_e[Te]);var le=0;switch(me){case"center":le=-.5*(ge[0]+de[0]);break;case"right":case"end":le=-de[0];break;case"left":case"start":le=-ge[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+me+"'")}var ae=0;switch(be){case"hanging":case"top":ae=-ge[1];break;case"middle":ae=-.5*(ge[1]+de[1]);break;case"alphabetic":case"ideographic":ae=-3*ue;break;case"bottom":ae=-de[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+be+"'")}var he=1/ue;return"lineHeight"in ie?he*=+ie.lineHeight:"width"in ie?he=ie.width/(de[0]-ge[0]):"height"in ie&&(he=ie.height/(de[1]-ge[1])),oe.map(function(Se){return[he*(Se[0]+le),he*(Se[1]+ae)]})}(D.positions,O,R),W=D.edges,F=O.orientation==="ccw";if(a(N,W),O.polygons||O.polygon||O.polyline){for(var U=u(W,N),V=new Array(U.length),te=0;te<U.length;++te){for(var J=U[te],K=new Array(J.length),X=0;X<J.length;++X){for(var Z=J[X],$=new Array(Z.length),re=0;re<Z.length;++re)$[re]=N[Z[re]].slice();F&&$.reverse(),K[X]=$}V[te]=K}return V}return O.triangles||O.triangulate||O.triangle?{cells:l(N,W,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:W,positions:N}}function P(C,O,R){try{return E(C,O,R,!0)}catch(j){}try{return E(C,O,R,!1)}catch(j){}return O.polygons||O.polyline||O.polygon?[]:O.triangles||O.triangulate||O.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(h){(function(){"use strict";if(typeof ses=="undefined"||!ses.ok||ses.ok()){typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=y);var s=!1;if(typeof WeakMap=="function"){var t=WeakMap;if(!(typeof navigator!="undefined"&&/Firefox/.test(navigator.userAgent))){var i=new t,n=Object.freeze({});if(i.set(n,1),i.get(n)===1)return void(h.exports=WeakMap);s=!0}}var r=Object.getOwnPropertyNames,a=Object.defineProperty,l=Object.isExtensible,u="weakmap:",d=u+"ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),x=new Uint8Array(c);crypto.getRandomValues(x),d=u+"rand:"+Array.prototype.map.call(x,function(E){return(E%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(E){return r(E).filter(_)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(E){return g(E).filter(_)}})}(function(){var E=Object.freeze;a(Object,"freeze",{value:function(O){return f(O),E(O)}});var P=Object.seal;a(Object,"seal",{value:function(O){return f(O),P(O)}});var C=Object.preventExtensions;a(Object,"preventExtensions",{value:function(O){return f(O),C(O)}})})();var p=!1,v=0,m=function(){this instanceof m||w();var E=[],P=[],C=v++;return Object.create(m.prototype,{get___:{value:S(function(O,R){var j,D=f(O);return D?C in D?D[C]:R:(j=E.indexOf(O))>=0?P[j]:R})},has___:{value:S(function(O){var R=f(O);return R?C in R:E.indexOf(O)>=0})},set___:{value:S(function(O,R){var j,D=f(O);return D?D[C]=R:(j=E.indexOf(O))>=0?P[j]=R:(j=E.length,P[j]=R,E[j]=O),this})},delete___:{value:S(function(O){var R,j,D=f(O);return D?C in D&&delete D[C]:!((R=E.indexOf(O))<0||(j=E.length-1,E[R]=void 0,P[R]=P[j],E[R]=E[j],E.length=j,P.length=j,0))})}})};m.prototype=Object.create(Object.prototype,{get:{value:function(E,P){return this.get___(E,P)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,P){return this.set___(E,P)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof t=="function"?function(){function E(){this instanceof m||w();var P,C=new t,O=void 0,R=!1;return P=s?function(j,D){return C.set(j,D),C.has(j)||(O||(O=new m),O.set(j,D)),this}:function(j,D){if(R)try{C.set(j,D)}catch(N){O||(O=new m),O.set___(j,D)}else C.set(j,D);return this},Object.create(m.prototype,{get___:{value:S(function(j,D){return O?C.has(j)?C.get(j):O.get___(j,D):C.get(j,D)})},has___:{value:S(function(j){return C.has(j)||!!O&&O.has___(j)})},set___:{value:S(P)},delete___:{value:S(function(j){var D=!!C.delete(j);return O&&O.delete___(j)||D})},permitHostObjects___:{value:S(function(j){if(j!==y)throw new Error("bogus call to permitHostObjects___");R=!0})}})}s&&typeof Proxy!="undefined"&&(Proxy=void 0),E.prototype=m.prototype,h.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=void 0),h.exports=m)}function y(E){E.permitHostObjects___&&E.permitHostObjects___(y)}function _(E){return!(E.substr(0,8)==u&&E.substr(E.length-3)==="___")}function f(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var P=E[d];if(P&&P.key===E)return P;if(l(E)){P={key:E};try{return a(E,d,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch(C){return}}}function S(E){return E.prototype=null,Object.freeze(E)}function w(){p||typeof console=="undefined"||(p=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},9222:function(h,s,t){var i=t(7178);h.exports=function(){var n={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var a=r.valueOf(n);return a&&a.identity===n?a:i(r,n)}}},7178:function(h){h.exports=function(s,t){var i={identity:t},n=s.valueOf;return Object.defineProperty(s,"valueOf",{value:function(r){return r!==t?n.apply(this,arguments):i},writable:!0}),i}},4037:function(h,s,t){var i=t(9222);h.exports=function(){var n=i();return{get:function(r,a){var l=n(r);return l.hasOwnProperty("value")?l.value:a},set:function(r,a){return n(r).value=a,this},has:function(r){return"value"in n(r)},delete:function(r){return delete n(r).value}}}},6183:function(h){"use strict";h.exports=function(s){var t={};return function(i,n,r){var a=i.dtype,l=i.order,u=[a,l.join()].join(),d=t[u];return d||(t[u]=d=s([a,l])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,n,r)}}(function(){return function(s,t,i,n,r,a){var l=s[0],u=i[0],d=[0],c=u;n|=0;var x=0,g=u;for(x=0;x<l;++x){var p=t[n]-a,v=t[n+c]-a;p>=0!=v>=0&&r.push(d[0]+.5+.5*(p+v)/(p-v)),n+=g,++d[0]}}}.bind(void 0,{funcName:"zeroCrossings"}))},9584:function(h,s,t){"use strict";h.exports=function(n,r){var a=[];return r=+r||0,i(n.hi(n.shape[0]-1),a,r),a};var i=t(6183)},6601:function(){}},T={};function b(h){var s=T[h];if(s!==void 0)return s.exports;var t=T[h]={id:h,loaded:!1,exports:{}};return o[h].call(t.exports,t,t.exports,b),t.loaded=!0,t.exports}return b.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(h){if(typeof window=="object")return window}}(),b.nmd=function(h){return h.paths=[],h.children||(h.children=[]),h},b(7386)}()},ee.exports=M()},33576:function(ee,z,e){"use strict";function M(le,ae){for(var he=0;he<ae.length;he++){var Se=ae[he];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(le,(ke=function(Me,Ee){if(b(Me)!=="object"||Me===null)return Me;var De=Me[Symbol.toPrimitive];if(De!==void 0){var fe=De.call(Me,"string");if(b(fe)!=="object")return fe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Me)}(Se.key),b(ke)==="symbol"?ke:String(ke)),Se)}var ke}function k(le){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ae){return ae.__proto__||Object.getPrototypeOf(ae)},k(le)}function o(le){if(le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}function T(le,ae){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(he,Se){return he.__proto__=Se,he},T(le,ae)}function b(le){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},b(le)}var h=e(59968),s=e(35984),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;z.Buffer=r,z.SlowBuffer=function(le){return+le!=le&&(le=0),r.alloc(+le)},z.INSPECT_MAX_BYTES=50;var i=2147483647;function n(le){if(le>i)throw new RangeError('The value "'+le+'" is invalid for option "size"');var ae=new Uint8Array(le);return Object.setPrototypeOf(ae,r.prototype),ae}function r(le,ae,he){if(typeof le=="number"){if(typeof ae=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(le)}return a(le,ae,he)}function a(le,ae,he){if(typeof le=="string")return function(Me,Ee){if(typeof Ee=="string"&&Ee!==""||(Ee="utf8"),!r.isEncoding(Ee))throw new TypeError("Unknown encoding: "+Ee);var De=0|g(Me,Ee),fe=n(De),xe=fe.write(Me,Ee);return xe!==De&&(fe=fe.slice(0,xe)),fe}(le,ae);if(ArrayBuffer.isView(le))return function(Me){if(de(Me,Uint8Array)){var Ee=new Uint8Array(Me);return c(Ee.buffer,Ee.byteOffset,Ee.byteLength)}return d(Me)}(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(le));if(de(le,ArrayBuffer)||le&&de(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(de(le,SharedArrayBuffer)||le&&de(le.buffer,SharedArrayBuffer)))return c(le,ae,he);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Se=le.valueOf&&le.valueOf();if(Se!=null&&Se!==le)return r.from(Se,ae,he);var ke=function(Me){if(r.isBuffer(Me)){var Ee=0|x(Me.length),De=n(Ee);return De.length===0||Me.copy(De,0,0,Ee),De}return Me.length!==void 0?typeof Me.length!="number"||ve(Me.length)?n(0):d(Me):Me.type==="Buffer"&&Array.isArray(Me.data)?d(Me.data):void 0}(le);if(ke)return ke;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return r.from(le[Symbol.toPrimitive]("string"),ae,he);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+b(le))}function l(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function u(le){return l(le),n(le<0?0:0|x(le))}function d(le){for(var ae=le.length<0?0:0|x(le.length),he=n(ae),Se=0;Se<ae;Se+=1)he[Se]=255&le[Se];return he}function c(le,ae,he){if(ae<0||le.byteLength<ae)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<ae+(he||0))throw new RangeError('"length" is outside of buffer bounds');var Se;return Se=ae===void 0&&he===void 0?new Uint8Array(le):he===void 0?new Uint8Array(le,ae):new Uint8Array(le,ae,he),Object.setPrototypeOf(Se,r.prototype),Se}function x(le){if(le>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|le}function g(le,ae){if(r.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||de(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+b(le));var he=le.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&he===0)return 0;for(var ke=!1;;)switch(ae){case"ascii":case"latin1":case"binary":return he;case"utf8":case"utf-8":return me(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*he;case"hex":return he>>>1;case"base64":return be(le).length;default:if(ke)return Se?-1:me(le).length;ae=(""+ae).toLowerCase(),ke=!0}}function p(le,ae,he){var Se=!1;if((ae===void 0||ae<0)&&(ae=0),ae>this.length||((he===void 0||he>this.length)&&(he=this.length),he<=0)||(he>>>=0)<=(ae>>>=0))return"";for(le||(le="utf8");;)switch(le){case"hex":return D(this,ae,he);case"utf8":case"utf-8":return C(this,ae,he);case"ascii":return R(this,ae,he);case"latin1":case"binary":return j(this,ae,he);case"base64":return P(this,ae,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,ae,he);default:if(Se)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Se=!0}}function v(le,ae,he){var Se=le[ae];le[ae]=le[he],le[he]=Se}function m(le,ae,he,Se,ke){if(le.length===0)return-1;if(typeof he=="string"?(Se=he,he=0):he>2147483647?he=2147483647:he<-2147483648&&(he=-2147483648),ve(he=+he)&&(he=ke?0:le.length-1),he<0&&(he=le.length+he),he>=le.length){if(ke)return-1;he=le.length-1}else if(he<0){if(!ke)return-1;he=0}if(typeof ae=="string"&&(ae=r.from(ae,Se)),r.isBuffer(ae))return ae.length===0?-1:y(le,ae,he,Se,ke);if(typeof ae=="number")return ae&=255,typeof Uint8Array.prototype.indexOf=="function"?ke?Uint8Array.prototype.indexOf.call(le,ae,he):Uint8Array.prototype.lastIndexOf.call(le,ae,he):y(le,[ae],he,Se,ke);throw new TypeError("val must be string, number or Buffer")}function y(le,ae,he,Se,ke){var Me,Ee=1,De=le.length,fe=ae.length;if(Se!==void 0&&((Se=String(Se).toLowerCase())==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(le.length<2||ae.length<2)return-1;Ee=2,De/=2,fe/=2,he/=2}function xe(Pe,Ue){return Ee===1?Pe[Ue]:Pe.readUInt16BE(Ue*Ee)}if(ke){var we=-1;for(Me=he;Me<De;Me++)if(xe(le,Me)===xe(ae,we===-1?0:Me-we)){if(we===-1&&(we=Me),Me-we+1===fe)return we*Ee}else we!==-1&&(Me-=Me-we),we=-1}else for(he+fe>De&&(he=De-fe),Me=he;Me>=0;Me--){for(var Oe=!0,ze=0;ze<fe;ze++)if(xe(le,Me+ze)!==xe(ae,ze)){Oe=!1;break}if(Oe)return Me}return-1}function _(le,ae,he,Se){he=Number(he)||0;var ke=le.length-he;Se?(Se=Number(Se))>ke&&(Se=ke):Se=ke;var Me,Ee=ae.length;for(Se>Ee/2&&(Se=Ee/2),Me=0;Me<Se;++Me){var De=parseInt(ae.substr(2*Me,2),16);if(ve(De))return Me;le[he+Me]=De}return Me}function f(le,ae,he,Se){return ge(me(ae,le.length-he),le,he,Se)}function S(le,ae,he,Se){return ge(function(ke){for(var Me=[],Ee=0;Ee<ke.length;++Ee)Me.push(255&ke.charCodeAt(Ee));return Me}(ae),le,he,Se)}function w(le,ae,he,Se){return ge(be(ae),le,he,Se)}function E(le,ae,he,Se){return ge(function(ke,Me){for(var Ee,De,fe,xe=[],we=0;we<ke.length&&!((Me-=2)<0);++we)De=(Ee=ke.charCodeAt(we))>>8,fe=Ee%256,xe.push(fe),xe.push(De);return xe}(ae,le.length-he),le,he,Se)}function P(le,ae,he){return ae===0&&he===le.length?h.fromByteArray(le):h.fromByteArray(le.slice(ae,he))}function C(le,ae,he){he=Math.min(le.length,he);for(var Se=[],ke=ae;ke<he;){var Me=le[ke],Ee=null,De=Me>239?4:Me>223?3:Me>191?2:1;if(ke+De<=he){var fe=void 0,xe=void 0,we=void 0,Oe=void 0;switch(De){case 1:Me<128&&(Ee=Me);break;case 2:(192&(fe=le[ke+1]))==128&&(Oe=(31&Me)<<6|63&fe)>127&&(Ee=Oe);break;case 3:fe=le[ke+1],xe=le[ke+2],(192&fe)==128&&(192&xe)==128&&(Oe=(15&Me)<<12|(63&fe)<<6|63&xe)>2047&&(Oe<55296||Oe>57343)&&(Ee=Oe);break;case 4:fe=le[ke+1],xe=le[ke+2],we=le[ke+3],(192&fe)==128&&(192&xe)==128&&(192&we)==128&&(Oe=(15&Me)<<18|(63&fe)<<12|(63&xe)<<6|63&we)>65535&&Oe<1114112&&(Ee=Oe)}}Ee===null?(Ee=65533,De=1):Ee>65535&&(Ee-=65536,Se.push(Ee>>>10&1023|55296),Ee=56320|1023&Ee),Se.push(Ee),ke+=De}return function(ze){var Pe=ze.length;if(Pe<=O)return String.fromCharCode.apply(String,ze);for(var Ue="",Ve=0;Ve<Pe;)Ue+=String.fromCharCode.apply(String,ze.slice(Ve,Ve+=O));return Ue}(Se)}z.kMaxLength=i,r.TYPED_ARRAY_SUPPORT=function(){try{var le=new Uint8Array(1),ae={foo:function(){return 42}};return Object.setPrototypeOf(ae,Uint8Array.prototype),Object.setPrototypeOf(le,ae),le.foo()===42}catch(he){return!1}}(),r.TYPED_ARRAY_SUPPORT||typeof console=="undefined"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),r.poolSize=8192,r.from=function(le,ae,he){return a(le,ae,he)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array),r.alloc=function(le,ae,he){return function(Se,ke,Me){return l(Se),Se<=0?n(Se):ke!==void 0?typeof Me=="string"?n(Se).fill(ke,Me):n(Se).fill(ke):n(Se)}(le,ae,he)},r.allocUnsafe=function(le){return u(le)},r.allocUnsafeSlow=function(le){return u(le)},r.isBuffer=function(le){return le!=null&&le._isBuffer===!0&&le!==r.prototype},r.compare=function(le,ae){if(de(le,Uint8Array)&&(le=r.from(le,le.offset,le.byteLength)),de(ae,Uint8Array)&&(ae=r.from(ae,ae.offset,ae.byteLength)),!r.isBuffer(le)||!r.isBuffer(ae))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(le===ae)return 0;for(var he=le.length,Se=ae.length,ke=0,Me=Math.min(he,Se);ke<Me;++ke)if(le[ke]!==ae[ke]){he=le[ke],Se=ae[ke];break}return he<Se?-1:Se<he?1:0},r.isEncoding=function(le){switch(String(le).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(le,ae){if(!Array.isArray(le))throw new TypeError('"list" argument must be an Array of Buffers');if(le.length===0)return r.alloc(0);var he;if(ae===void 0)for(ae=0,he=0;he<le.length;++he)ae+=le[he].length;var Se=r.allocUnsafe(ae),ke=0;for(he=0;he<le.length;++he){var Me=le[he];if(de(Me,Uint8Array))ke+Me.length>Se.length?(r.isBuffer(Me)||(Me=r.from(Me)),Me.copy(Se,ke)):Uint8Array.prototype.set.call(Se,Me,ke);else{if(!r.isBuffer(Me))throw new TypeError('"list" argument must be an Array of Buffers');Me.copy(Se,ke)}ke+=Me.length}return Se},r.byteLength=g,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var le=this.length;if(le%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ae=0;ae<le;ae+=2)v(this,ae,ae+1);return this},r.prototype.swap32=function(){var le=this.length;if(le%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ae=0;ae<le;ae+=4)v(this,ae,ae+3),v(this,ae+1,ae+2);return this},r.prototype.swap64=function(){var le=this.length;if(le%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ae=0;ae<le;ae+=8)v(this,ae,ae+7),v(this,ae+1,ae+6),v(this,ae+2,ae+5),v(this,ae+3,ae+4);return this},r.prototype.toString=function(){var le=this.length;return le===0?"":arguments.length===0?C(this,0,le):p.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(le){if(!r.isBuffer(le))throw new TypeError("Argument must be a Buffer");return this===le||r.compare(this,le)===0},r.prototype.inspect=function(){var le="",ae=z.INSPECT_MAX_BYTES;return le=this.toString("hex",0,ae).replace(/(.{2})/g,"$1 ").trim(),this.length>ae&&(le+=" ... "),"<Buffer "+le+">"},t&&(r.prototype[t]=r.prototype.inspect),r.prototype.compare=function(le,ae,he,Se,ke){if(de(le,Uint8Array)&&(le=r.from(le,le.offset,le.byteLength)),!r.isBuffer(le))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+b(le));if(ae===void 0&&(ae=0),he===void 0&&(he=le?le.length:0),Se===void 0&&(Se=0),ke===void 0&&(ke=this.length),ae<0||he>le.length||Se<0||ke>this.length)throw new RangeError("out of range index");if(Se>=ke&&ae>=he)return 0;if(Se>=ke)return-1;if(ae>=he)return 1;if(this===le)return 0;for(var Me=(ke>>>=0)-(Se>>>=0),Ee=(he>>>=0)-(ae>>>=0),De=Math.min(Me,Ee),fe=this.slice(Se,ke),xe=le.slice(ae,he),we=0;we<De;++we)if(fe[we]!==xe[we]){Me=fe[we],Ee=xe[we];break}return Me<Ee?-1:Ee<Me?1:0},r.prototype.includes=function(le,ae,he){return this.indexOf(le,ae,he)!==-1},r.prototype.indexOf=function(le,ae,he){return m(this,le,ae,he,!0)},r.prototype.lastIndexOf=function(le,ae,he){return m(this,le,ae,he,!1)},r.prototype.write=function(le,ae,he,Se){if(ae===void 0)Se="utf8",he=this.length,ae=0;else if(he===void 0&&typeof ae=="string")Se=ae,he=this.length,ae=0;else{if(!isFinite(ae))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ae>>>=0,isFinite(he)?(he>>>=0,Se===void 0&&(Se="utf8")):(Se=he,he=void 0)}var ke=this.length-ae;if((he===void 0||he>ke)&&(he=ke),le.length>0&&(he<0||ae<0)||ae>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");for(var Me=!1;;)switch(Se){case"hex":return _(this,le,ae,he);case"utf8":case"utf-8":return f(this,le,ae,he);case"ascii":case"latin1":case"binary":return S(this,le,ae,he);case"base64":return w(this,le,ae,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,le,ae,he);default:if(Me)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),Me=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function R(le,ae,he){var Se="";he=Math.min(le.length,he);for(var ke=ae;ke<he;++ke)Se+=String.fromCharCode(127&le[ke]);return Se}function j(le,ae,he){var Se="";he=Math.min(le.length,he);for(var ke=ae;ke<he;++ke)Se+=String.fromCharCode(le[ke]);return Se}function D(le,ae,he){var Se=le.length;(!ae||ae<0)&&(ae=0),(!he||he<0||he>Se)&&(he=Se);for(var ke="",Me=ae;Me<he;++Me)ke+=pe[le[Me]];return ke}function N(le,ae,he){for(var Se=le.slice(ae,he),ke="",Me=0;Me<Se.length-1;Me+=2)ke+=String.fromCharCode(Se[Me]+256*Se[Me+1]);return ke}function W(le,ae,he){if(le%1!=0||le<0)throw new RangeError("offset is not uint");if(le+ae>he)throw new RangeError("Trying to access beyond buffer length")}function F(le,ae,he,Se,ke,Me){if(!r.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(ae>ke||ae<Me)throw new RangeError('"value" argument is out of bounds');if(he+Se>le.length)throw new RangeError("Index out of range")}function U(le,ae,he,Se,ke){re(ae,Se,ke,le,he,7);var Me=Number(ae&BigInt(4294967295));le[he++]=Me,Me>>=8,le[he++]=Me,Me>>=8,le[he++]=Me,Me>>=8,le[he++]=Me;var Ee=Number(ae>>BigInt(32)&BigInt(4294967295));return le[he++]=Ee,Ee>>=8,le[he++]=Ee,Ee>>=8,le[he++]=Ee,Ee>>=8,le[he++]=Ee,he}function V(le,ae,he,Se,ke){re(ae,Se,ke,le,he,7);var Me=Number(ae&BigInt(4294967295));le[he+7]=Me,Me>>=8,le[he+6]=Me,Me>>=8,le[he+5]=Me,Me>>=8,le[he+4]=Me;var Ee=Number(ae>>BigInt(32)&BigInt(4294967295));return le[he+3]=Ee,Ee>>=8,le[he+2]=Ee,Ee>>=8,le[he+1]=Ee,Ee>>=8,le[he]=Ee,he+8}function te(le,ae,he,Se,ke,Me){if(he+Se>le.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("Index out of range")}function J(le,ae,he,Se,ke){return ae=+ae,he>>>=0,ke||te(le,0,he,4),s.write(le,ae,he,Se,23,4),he+4}function K(le,ae,he,Se,ke){return ae=+ae,he>>>=0,ke||te(le,0,he,8),s.write(le,ae,he,Se,52,8),he+8}r.prototype.slice=function(le,ae){var he=this.length;(le=~~le)<0?(le+=he)<0&&(le=0):le>he&&(le=he),(ae=ae===void 0?he:~~ae)<0?(ae+=he)<0&&(ae=0):ae>he&&(ae=he),ae<le&&(ae=le);var Se=this.subarray(le,ae);return Object.setPrototypeOf(Se,r.prototype),Se},r.prototype.readUintLE=r.prototype.readUIntLE=function(le,ae,he){le>>>=0,ae>>>=0,he||W(le,ae,this.length);for(var Se=this[le],ke=1,Me=0;++Me<ae&&(ke*=256);)Se+=this[le+Me]*ke;return Se},r.prototype.readUintBE=r.prototype.readUIntBE=function(le,ae,he){le>>>=0,ae>>>=0,he||W(le,ae,this.length);for(var Se=this[le+--ae],ke=1;ae>0&&(ke*=256);)Se+=this[le+--ae]*ke;return Se},r.prototype.readUint8=r.prototype.readUInt8=function(le,ae){return le>>>=0,ae||W(le,1,this.length),this[le]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(le,ae){return le>>>=0,ae||W(le,2,this.length),this[le]|this[le+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(le,ae){return le>>>=0,ae||W(le,2,this.length),this[le]<<8|this[le+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(le,ae){return le>>>=0,ae||W(le,4,this.length),(this[le]|this[le+1]<<8|this[le+2]<<16)+16777216*this[le+3]},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(le,ae){return le>>>=0,ae||W(le,4,this.length),16777216*this[le]+(this[le+1]<<16|this[le+2]<<8|this[le+3])},r.prototype.readBigUInt64LE=_e(function(le){oe(le>>>=0,"offset");var ae=this[le],he=this[le+7];ae!==void 0&&he!==void 0||ie(le,this.length-8);var Se=ae+this[++le]*Math.pow(2,8)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,24),ke=this[++le]+this[++le]*Math.pow(2,8)+this[++le]*Math.pow(2,16)+he*Math.pow(2,24);return BigInt(Se)+(BigInt(ke)<<BigInt(32))}),r.prototype.readBigUInt64BE=_e(function(le){oe(le>>>=0,"offset");var ae=this[le],he=this[le+7];ae!==void 0&&he!==void 0||ie(le,this.length-8);var Se=ae*Math.pow(2,24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+this[++le],ke=this[++le]*Math.pow(2,24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+he;return(BigInt(Se)<<BigInt(32))+BigInt(ke)}),r.prototype.readIntLE=function(le,ae,he){le>>>=0,ae>>>=0,he||W(le,ae,this.length);for(var Se=this[le],ke=1,Me=0;++Me<ae&&(ke*=256);)Se+=this[le+Me]*ke;return Se>=(ke*=128)&&(Se-=Math.pow(2,8*ae)),Se},r.prototype.readIntBE=function(le,ae,he){le>>>=0,ae>>>=0,he||W(le,ae,this.length);for(var Se=ae,ke=1,Me=this[le+--Se];Se>0&&(ke*=256);)Me+=this[le+--Se]*ke;return Me>=(ke*=128)&&(Me-=Math.pow(2,8*ae)),Me},r.prototype.readInt8=function(le,ae){return le>>>=0,ae||W(le,1,this.length),128&this[le]?-1*(255-this[le]+1):this[le]},r.prototype.readInt16LE=function(le,ae){le>>>=0,ae||W(le,2,this.length);var he=this[le]|this[le+1]<<8;return 32768&he?4294901760|he:he},r.prototype.readInt16BE=function(le,ae){le>>>=0,ae||W(le,2,this.length);var he=this[le+1]|this[le]<<8;return 32768&he?4294901760|he:he},r.prototype.readInt32LE=function(le,ae){return le>>>=0,ae||W(le,4,this.length),this[le]|this[le+1]<<8|this[le+2]<<16|this[le+3]<<24},r.prototype.readInt32BE=function(le,ae){return le>>>=0,ae||W(le,4,this.length),this[le]<<24|this[le+1]<<16|this[le+2]<<8|this[le+3]},r.prototype.readBigInt64LE=_e(function(le){oe(le>>>=0,"offset");var ae=this[le],he=this[le+7];ae!==void 0&&he!==void 0||ie(le,this.length-8);var Se=this[le+4]+this[le+5]*Math.pow(2,8)+this[le+6]*Math.pow(2,16)+(he<<24);return(BigInt(Se)<<BigInt(32))+BigInt(ae+this[++le]*Math.pow(2,8)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,24))}),r.prototype.readBigInt64BE=_e(function(le){oe(le>>>=0,"offset");var ae=this[le],he=this[le+7];ae!==void 0&&he!==void 0||ie(le,this.length-8);var Se=(ae<<24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+this[++le];return(BigInt(Se)<<BigInt(32))+BigInt(this[++le]*Math.pow(2,24)+this[++le]*Math.pow(2,16)+this[++le]*Math.pow(2,8)+he)}),r.prototype.readFloatLE=function(le,ae){return le>>>=0,ae||W(le,4,this.length),s.read(this,le,!0,23,4)},r.prototype.readFloatBE=function(le,ae){return le>>>=0,ae||W(le,4,this.length),s.read(this,le,!1,23,4)},r.prototype.readDoubleLE=function(le,ae){return le>>>=0,ae||W(le,8,this.length),s.read(this,le,!0,52,8)},r.prototype.readDoubleBE=function(le,ae){return le>>>=0,ae||W(le,8,this.length),s.read(this,le,!1,52,8)},r.prototype.writeUintLE=r.prototype.writeUIntLE=function(le,ae,he,Se){le=+le,ae>>>=0,he>>>=0,Se||F(this,le,ae,he,Math.pow(2,8*he)-1,0);var ke=1,Me=0;for(this[ae]=255&le;++Me<he&&(ke*=256);)this[ae+Me]=le/ke&255;return ae+he},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(le,ae,he,Se){le=+le,ae>>>=0,he>>>=0,Se||F(this,le,ae,he,Math.pow(2,8*he)-1,0);var ke=he-1,Me=1;for(this[ae+ke]=255&le;--ke>=0&&(Me*=256);)this[ae+ke]=le/Me&255;return ae+he},r.prototype.writeUint8=r.prototype.writeUInt8=function(le,ae,he){return le=+le,ae>>>=0,he||F(this,le,ae,1,255,0),this[ae]=255&le,ae+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(le,ae,he){return le=+le,ae>>>=0,he||F(this,le,ae,2,65535,0),this[ae]=255&le,this[ae+1]=le>>>8,ae+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(le,ae,he){return le=+le,ae>>>=0,he||F(this,le,ae,2,65535,0),this[ae]=le>>>8,this[ae+1]=255&le,ae+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(le,ae,he){return le=+le,ae>>>=0,he||F(this,le,ae,4,4294967295,0),this[ae+3]=le>>>24,this[ae+2]=le>>>16,this[ae+1]=le>>>8,this[ae]=255&le,ae+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(le,ae,he){return le=+le,ae>>>=0,he||F(this,le,ae,4,4294967295,0),this[ae]=le>>>24,this[ae+1]=le>>>16,this[ae+2]=le>>>8,this[ae+3]=255&le,ae+4},r.prototype.writeBigUInt64LE=_e(function(le){return U(this,le,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeBigUInt64BE=_e(function(le){return V(this,le,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeIntLE=function(le,ae,he,Se){if(le=+le,ae>>>=0,!Se){var ke=Math.pow(2,8*he-1);F(this,le,ae,he,ke-1,-ke)}var Me=0,Ee=1,De=0;for(this[ae]=255&le;++Me<he&&(Ee*=256);)le<0&&De===0&&this[ae+Me-1]!==0&&(De=1),this[ae+Me]=(le/Ee>>0)-De&255;return ae+he},r.prototype.writeIntBE=function(le,ae,he,Se){if(le=+le,ae>>>=0,!Se){var ke=Math.pow(2,8*he-1);F(this,le,ae,he,ke-1,-ke)}var Me=he-1,Ee=1,De=0;for(this[ae+Me]=255&le;--Me>=0&&(Ee*=256);)le<0&&De===0&&this[ae+Me+1]!==0&&(De=1),this[ae+Me]=(le/Ee>>0)-De&255;return ae+he},r.prototype.writeInt8=function(le,ae,he){return le=+le,ae>>>=0,he||F(this,le,ae,1,127,-128),le<0&&(le=255+le+1),this[ae]=255&le,ae+1},r.prototype.writeInt16LE=function(le,ae,he){return le=+le,ae>>>=0,he||F(this,le,ae,2,32767,-32768),this[ae]=255&le,this[ae+1]=le>>>8,ae+2},r.prototype.writeInt16BE=function(le,ae,he){return le=+le,ae>>>=0,he||F(this,le,ae,2,32767,-32768),this[ae]=le>>>8,this[ae+1]=255&le,ae+2},r.prototype.writeInt32LE=function(le,ae,he){return le=+le,ae>>>=0,he||F(this,le,ae,4,2147483647,-2147483648),this[ae]=255&le,this[ae+1]=le>>>8,this[ae+2]=le>>>16,this[ae+3]=le>>>24,ae+4},r.prototype.writeInt32BE=function(le,ae,he){return le=+le,ae>>>=0,he||F(this,le,ae,4,2147483647,-2147483648),le<0&&(le=4294967295+le+1),this[ae]=le>>>24,this[ae+1]=le>>>16,this[ae+2]=le>>>8,this[ae+3]=255&le,ae+4},r.prototype.writeBigInt64LE=_e(function(le){return U(this,le,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeBigInt64BE=_e(function(le){return V(this,le,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeFloatLE=function(le,ae,he){return J(this,le,ae,!0,he)},r.prototype.writeFloatBE=function(le,ae,he){return J(this,le,ae,!1,he)},r.prototype.writeDoubleLE=function(le,ae,he){return K(this,le,ae,!0,he)},r.prototype.writeDoubleBE=function(le,ae,he){return K(this,le,ae,!1,he)},r.prototype.copy=function(le,ae,he,Se){if(!r.isBuffer(le))throw new TypeError("argument should be a Buffer");if(he||(he=0),Se||Se===0||(Se=this.length),ae>=le.length&&(ae=le.length),ae||(ae=0),Se>0&&Se<he&&(Se=he),Se===he||le.length===0||this.length===0)return 0;if(ae<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),le.length-ae<Se-he&&(Se=le.length-ae+he);var ke=Se-he;return this===le&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ae,he,Se):Uint8Array.prototype.set.call(le,this.subarray(he,Se),ae),ke},r.prototype.fill=function(le,ae,he,Se){if(typeof le=="string"){if(typeof ae=="string"?(Se=ae,ae=0,he=this.length):typeof he=="string"&&(Se=he,he=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!r.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(le.length===1){var ke=le.charCodeAt(0);(Se==="utf8"&&ke<128||Se==="latin1")&&(le=ke)}}else typeof le=="number"?le&=255:typeof le=="boolean"&&(le=Number(le));if(ae<0||this.length<ae||this.length<he)throw new RangeError("Out of range index");if(he<=ae)return this;var Me;if(ae>>>=0,he=he===void 0?this.length:he>>>0,le||(le=0),typeof le=="number")for(Me=ae;Me<he;++Me)this[Me]=le;else{var Ee=r.isBuffer(le)?le:r.from(le,Se),De=Ee.length;if(De===0)throw new TypeError('The value "'+le+'" is invalid for argument "value"');for(Me=0;Me<he-ae;++Me)this[Me+ae]=Ee[Me%De]}return this};var X={};function Z(le,ae,he){X[le]=function(Se){function ke(){var De;return function(fe,xe){if(!(fe instanceof xe))throw new TypeError("Cannot call a class as a function")}(this,ke),De=function(fe,xe,we){return xe=k(xe),function(Oe,ze){if(ze&&(b(ze)==="object"||typeof ze=="function"))return ze;if(ze!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(Oe)}(fe,function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(Oe){return!1}}()?Reflect.construct(xe,we||[],k(fe).constructor):xe.apply(fe,we))}(this,ke),Object.defineProperty(o(De),"message",{value:ae.apply(o(De),arguments),writable:!0,configurable:!0}),De.name="".concat(De.name," [").concat(le,"]"),De.stack,delete De.name,De}var Me,Ee;return function(De,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function");De.prototype=Object.create(fe&&fe.prototype,{constructor:{value:De,writable:!0,configurable:!0}}),Object.defineProperty(De,"prototype",{writable:!1}),fe&&T(De,fe)}(ke,Se),Me=ke,(Ee=[{key:"code",get:function(){return le},set:function(De){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:De,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(le,"]: ").concat(this.message)}}])&&M(Me.prototype,Ee),Object.defineProperty(Me,"prototype",{writable:!1}),ke}(he)}function $(le){for(var ae="",he=le.length,Se=le[0]==="-"?1:0;he>=Se+4;he-=3)ae="_".concat(le.slice(he-3,he)).concat(ae);return"".concat(le.slice(0,he)).concat(ae)}function re(le,ae,he,Se,ke,Me){if(le>he||le<ae){var Ee,De=typeof ae=="bigint"?"n":"";throw Ee=Me>3?ae===0||ae===BigInt(0)?">= 0".concat(De," and < 2").concat(De," ** ").concat(8*(Me+1)).concat(De):">= -(2".concat(De," ** ").concat(8*(Me+1)-1).concat(De,") and < 2 ** ")+"".concat(8*(Me+1)-1).concat(De):">= ".concat(ae).concat(De," and <= ").concat(he).concat(De),new X.ERR_OUT_OF_RANGE("value",Ee,le)}(function(fe,xe,we){oe(xe,"offset"),fe[xe]!==void 0&&fe[xe+we]!==void 0||ie(xe,fe.length-(we+1))})(Se,ke,Me)}function oe(le,ae){if(typeof le!="number")throw new X.ERR_INVALID_ARG_TYPE(ae,"number",le)}function ie(le,ae,he){throw Math.floor(le)!==le?(oe(le,he),new X.ERR_OUT_OF_RANGE(he||"offset","an integer",le)):ae<0?new X.ERR_BUFFER_OUT_OF_BOUNDS:new X.ERR_OUT_OF_RANGE(he||"offset",">= ".concat(he?1:0," and <= ").concat(ae),le)}Z("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?"".concat(le," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Z("ERR_INVALID_ARG_TYPE",function(le,ae){return'The "'.concat(le,'" argument must be of type number. Received type ').concat(b(ae))},TypeError),Z("ERR_OUT_OF_RANGE",function(le,ae,he){var Se='The value of "'.concat(le,'" is out of range.'),ke=he;return Number.isInteger(he)&&Math.abs(he)>Math.pow(2,32)?ke=$(String(he)):typeof he=="bigint"&&(ke=String(he),(he>Math.pow(BigInt(2),BigInt(32))||he<-Math.pow(BigInt(2),BigInt(32)))&&(ke=$(ke)),ke+="n"),Se+" It must be ".concat(ae,". Received ").concat(ke)},RangeError);var ue=/[^+/0-9A-Za-z-_]/g;function me(le,ae){var he;ae=ae||1/0;for(var Se=le.length,ke=null,Me=[],Ee=0;Ee<Se;++Ee){if((he=le.charCodeAt(Ee))>55295&&he<57344){if(!ke){if(he>56319){(ae-=3)>-1&&Me.push(239,191,189);continue}if(Ee+1===Se){(ae-=3)>-1&&Me.push(239,191,189);continue}ke=he;continue}if(he<56320){(ae-=3)>-1&&Me.push(239,191,189),ke=he;continue}he=65536+(ke-55296<<10|he-56320)}else ke&&(ae-=3)>-1&&Me.push(239,191,189);if(ke=null,he<128){if((ae-=1)<0)break;Me.push(he)}else if(he<2048){if((ae-=2)<0)break;Me.push(he>>6|192,63&he|128)}else if(he<65536){if((ae-=3)<0)break;Me.push(he>>12|224,he>>6&63|128,63&he|128)}else{if(!(he<1114112))throw new Error("Invalid code point");if((ae-=4)<0)break;Me.push(he>>18|240,he>>12&63|128,he>>6&63|128,63&he|128)}}return Me}function be(le){return h.toByteArray(function(ae){if((ae=(ae=ae.split("=")[0]).trim().replace(ue,"")).length<2)return"";for(;ae.length%4!=0;)ae+="=";return ae}(le))}function ge(le,ae,he,Se){var ke;for(ke=0;ke<Se&&!(ke+he>=ae.length||ke>=le.length);++ke)ae[ke+he]=le[ke];return ke}function de(le,ae){return le instanceof ae||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===ae.name}function ve(le){return le!=le}var pe=function(){for(var le="0123456789abcdef",ae=new Array(256),he=0;he<16;++he)for(var Se=16*he,ke=0;ke<16;++ke)ae[Se+ke]=le[he]+le[ke];return ae}();function _e(le){return typeof BigInt=="undefined"?Te:le}function Te(){throw new Error("BigInt not supported")}},25928:function(ee){"use strict";ee.exports=k,ee.exports.isMobile=k,ee.exports.default=k;var z=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,M=/android|ipad|playbook|silk/i;function k(o){o||(o={});var T=o.ua;if(T||typeof navigator=="undefined"||(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),typeof T!="string")return!1;var b=z.test(T)&&!e.test(T)||!!o.tablet&&M.test(T);return!b&&o.tablet&&o.featureDetect&&navigator&&navigator.maxTouchPoints>1&&T.indexOf("Macintosh")!==-1&&T.indexOf("Safari")!==-1&&(b=!0),b}},48932:function(ee,z,e){"use strict";e.r(z),e.d(z,{sankeyCenter:function(){return n},sankeyCircular:function(){return P},sankeyJustify:function(){return i},sankeyLeft:function(){return s},sankeyRight:function(){return t}});var M=e(84706),k=e(34712),o=e(10132),T=e(6688),b=e.n(T);function h(ge){return ge.target.depth}function s(ge){return ge.depth}function t(ge,de){return de-1-ge.height}function i(ge,de){return ge.sourceLinks.length?ge.depth:de-1}function n(ge){return ge.targetLinks.length?ge.depth:ge.sourceLinks.length?(0,M.SY)(ge.sourceLinks,h)-1:0}function r(ge){return function(){return ge}}var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge};function l(ge,de){return d(ge.source,de.source)||ge.index-de.index}function u(ge,de){return d(ge.target,de.target)||ge.index-de.index}function d(ge,de){return ge.partOfCycle===de.partOfCycle?ge.y0-de.y0:ge.circularLinkType==="top"||de.circularLinkType==="bottom"?-1:1}function c(ge){return ge.value}function x(ge){return(ge.y0+ge.y1)/2}function g(ge){return x(ge.source)}function p(ge){return x(ge.target)}function v(ge){return ge.index}function m(ge){return ge.nodes}function y(ge){return ge.links}function _(ge,de){var ve=ge.get(de);if(!ve)throw new Error("missing: "+de);return ve}function f(ge,de){return de(ge)}var S=25,w=10,E=.3;function P(){var ge,de,ve=0,pe=0,_e=1,Te=1,le=24,ae=v,he=i,Se=m,ke=y,Me=32,Ee=2,De=null;function fe(){var we={nodes:Se.apply(null,arguments),links:ke.apply(null,arguments)};(function(ze){ze.nodes.forEach(function(Ue,Ve){Ue.index=Ve,Ue.sourceLinks=[],Ue.targetLinks=[]});var Pe=(0,k.kH)(ze.nodes,ae);ze.links.forEach(function(Ue,Ve){Ue.index=Ve;var Ze=Ue.source,it=Ue.target;(Ze===void 0?"undefined":a(Ze))!=="object"&&(Ze=Ue.source=_(Pe,Ze)),(it===void 0?"undefined":a(it))!=="object"&&(it=Ue.target=_(Pe,it)),Ze.sourceLinks.push(Ue),it.targetLinks.push(Ue)})})(we),function(ze,Pe,Ue){var Ve=0;if(Ue===null){for(var Ze=[],it=0;it<ze.links.length;it++){var tt=ze.links[it],dt=tt.source.index,yt=tt.target.index;Ze[dt]||(Ze[dt]=[]),Ze[yt]||(Ze[yt]=[]),Ze[dt].indexOf(yt)===-1&&Ze[dt].push(yt)}var vt=b()(Ze);vt.sort(function(wt,It){return wt.length-It.length});var et={};for(it=0;it<vt.length;it++){var Qe=vt[it].slice(-2);et[Qe[0]]||(et[Qe[0]]={}),et[Qe[0]][Qe[1]]=!0}ze.links.forEach(function(wt){var It=wt.target.index,Dt=wt.source.index;It===Dt||et[Dt]&&et[Dt][It]?(wt.circular=!0,wt.circularLinkID=Ve,Ve+=1):wt.circular=!1})}else ze.links.forEach(function(wt){wt.source[Ue]<wt.target[Ue]?wt.circular=!1:(wt.circular=!0,wt.circularLinkID=Ve,Ve+=1)})}(we,0,De),function(ze){ze.nodes.forEach(function(Pe){Pe.partOfCycle=!1,Pe.value=Math.max((0,M.oh)(Pe.sourceLinks,c),(0,M.oh)(Pe.targetLinks,c)),Pe.sourceLinks.forEach(function(Ue){Ue.circular&&(Pe.partOfCycle=!0,Pe.circularLinkType=Ue.circularLinkType)}),Pe.targetLinks.forEach(function(Ue){Ue.circular&&(Pe.partOfCycle=!0,Pe.circularLinkType=Ue.circularLinkType)})})}(we),function(ze){var Pe,Ue,Ve;for(Pe=ze.nodes,Ue=[],Ve=0;Pe.length;++Ve,Pe=Ue,Ue=[])Pe.forEach(function(Ze){Ze.depth=Ve,Ze.sourceLinks.forEach(function(it){Ue.indexOf(it.target)<0&&!it.circular&&Ue.push(it.target)})});for(Pe=ze.nodes,Ue=[],Ve=0;Pe.length;++Ve,Pe=Ue,Ue=[])Pe.forEach(function(Ze){Ze.height=Ve,Ze.targetLinks.forEach(function(it){Ue.indexOf(it.source)<0&&!it.circular&&Ue.push(it.source)})});ze.nodes.forEach(function(Ze){Ze.column=Math.floor(he.call(null,Ze,Ve))})}(we),C(we,ae),function(ze,Pe,Ue){var Ve=(0,k.UJ)().key(function(yt){return yt.column}).sortKeys(M.XE).entries(ze.nodes).map(function(yt){return yt.values});(function(yt){if(de){var vt=1/0;Ve.forEach(function(It){var Dt=Te*de/(It.length+1);vt=Dt<vt?Dt:vt}),ge=vt}var et=(0,M.SY)(Ve,function(It){return(Te-pe-(It.length-1)*ge)/(0,M.oh)(It,c)});et*=E,ze.links.forEach(function(It){It.width=It.value*et});var Qe=function(It){var Dt=0,Ct=0,He=0,We=0,Be=(0,M.kv)(It.nodes,function(Ge){return Ge.column});return It.links.forEach(function(Ge){Ge.circular&&(Ge.circularLinkType=="top"?Dt+=Ge.width:Ct+=Ge.width,Ge.target.column==0&&(We+=Ge.width),Ge.source.column==Be&&(He+=Ge.width))}),{top:Dt=Dt>0?Dt+S+w:Dt,bottom:Ct=Ct>0?Ct+S+w:Ct,left:We=We>0?We+S+w:We,right:He=He>0?He+S+w:He}}(ze),wt=function(It,Dt){var Ct=(0,M.kv)(It.nodes,function(at){return at.column}),He=_e-ve,We=Te-pe,Be=He/(He+Dt.right+Dt.left),Ge=We/(We+Dt.top+Dt.bottom);return ve=ve*Be+Dt.left,_e=Dt.right==0?_e:_e*Be,pe=pe*Ge+Dt.top,Te*=Ge,It.nodes.forEach(function(at){at.x0=ve+at.column*((_e-ve-le)/Ct),at.x1=at.x0+le}),Ge}(ze,Qe);et*=wt,ze.links.forEach(function(It){It.width=It.value*et}),Ve.forEach(function(It){var Dt=It.length;It.forEach(function(Ct,He){Ct.depth==Ve.length-1&&Dt==1||Ct.depth==0&&Dt==1?(Ct.y0=Te/2-Ct.value*et,Ct.y1=Ct.y0+Ct.value*et):Ct.partOfCycle?R(Ct,yt)==0?(Ct.y0=Te/2+He,Ct.y1=Ct.y0+Ct.value*et):Ct.circularLinkType=="top"?(Ct.y0=pe+He,Ct.y1=Ct.y0+Ct.value*et):(Ct.y0=Te-Ct.value*et-He,Ct.y1=Ct.y0+Ct.value*et):Qe.top==0||Qe.bottom==0?(Ct.y0=(Te-pe)/Dt*He,Ct.y1=Ct.y0+Ct.value*et):(Ct.y0=(Te-pe)/2-Dt/2+He,Ct.y1=Ct.y0+Ct.value*et)})})})(Ue),dt();for(var Ze=1,it=Pe;it>0;--it)tt(Ze*=.99,Ue),dt();function tt(yt,vt){var et=Ve.length;Ve.forEach(function(Qe){var wt=Qe.length,It=Qe[0].depth;Qe.forEach(function(Dt){var Ct;if((Dt.sourceLinks.length||Dt.targetLinks.length)&&!(Dt.partOfCycle&&R(Dt,vt)>0))if(It==0&&wt==1)Ct=Dt.y1-Dt.y0,Dt.y0=Te/2-Ct/2,Dt.y1=Te/2+Ct/2;else if(It==et-1&&wt==1)Ct=Dt.y1-Dt.y0,Dt.y0=Te/2-Ct/2,Dt.y1=Te/2+Ct/2;else{var He=(0,M.mo)(Dt.sourceLinks,p),We=(0,M.mo)(Dt.targetLinks,g),Be=((He&&We?(He+We)/2:He||We)-x(Dt))*yt;Dt.y0+=Be,Dt.y1+=Be}})})}function dt(){Ve.forEach(function(yt){var vt,et,Qe,wt=pe,It=yt.length;for(yt.sort(d),Qe=0;Qe<It;++Qe)(et=wt-(vt=yt[Qe]).y0)>0&&(vt.y0+=et,vt.y1+=et),wt=vt.y1+ge;if((et=wt-ge-Te)>0)for(wt=vt.y0-=et,vt.y1-=et,Qe=It-2;Qe>=0;--Qe)(et=(vt=yt[Qe]).y1+ge-wt)>0&&(vt.y0-=et,vt.y1-=et),wt=vt.y0})}}(we,Me,ae),xe(we);for(var Oe=0;Oe<4;Oe++)oe(we,Te,ae),ie(we,0,ae),$(we,pe,Te,ae),oe(we,Te,ae),ie(we,0,ae);return function(ze,Pe,Ue){var Ve=ze.nodes,Ze=ze.links,it=!1,tt=!1;if(Ze.forEach(function(vt){vt.circularLinkType=="top"?it=!0:vt.circularLinkType=="bottom"&&(tt=!0)}),it==0||tt==0){var dt=(0,M.SY)(Ve,function(vt){return vt.y0}),yt=(Ue-Pe)/((0,M.kv)(Ve,function(vt){return vt.y1})-dt);Ve.forEach(function(vt){var et=(vt.y1-vt.y0)*yt;vt.y0=(vt.y0-dt)*yt,vt.y1=vt.y0+et}),Ze.forEach(function(vt){vt.y0=(vt.y0-dt)*yt,vt.y1=(vt.y1-dt)*yt,vt.width=vt.width*yt})}}(we,pe,Te),N(we,Ee,Te,ae),we}function xe(we){we.nodes.forEach(function(Oe){Oe.sourceLinks.sort(u),Oe.targetLinks.sort(l)}),we.nodes.forEach(function(Oe){var ze=Oe.y0,Pe=ze,Ue=Oe.y1,Ve=Ue;Oe.sourceLinks.forEach(function(Ze){Ze.circular?(Ze.y0=Ue-Ze.width/2,Ue-=Ze.width):(Ze.y0=ze+Ze.width/2,ze+=Ze.width)}),Oe.targetLinks.forEach(function(Ze){Ze.circular?(Ze.y1=Ve-Ze.width/2,Ve-=Ze.width):(Ze.y1=Pe+Ze.width/2,Pe+=Ze.width)})})}return fe.nodeId=function(we){return arguments.length?(ae=typeof we=="function"?we:r(we),fe):ae},fe.nodeAlign=function(we){return arguments.length?(he=typeof we=="function"?we:r(we),fe):he},fe.nodeWidth=function(we){return arguments.length?(le=+we,fe):le},fe.nodePadding=function(we){return arguments.length?(ge=+we,fe):ge},fe.nodes=function(we){return arguments.length?(Se=typeof we=="function"?we:r(we),fe):Se},fe.links=function(we){return arguments.length?(ke=typeof we=="function"?we:r(we),fe):ke},fe.size=function(we){return arguments.length?(ve=pe=0,_e=+we[0],Te=+we[1],fe):[_e-ve,Te-pe]},fe.extent=function(we){return arguments.length?(ve=+we[0][0],_e=+we[1][0],pe=+we[0][1],Te=+we[1][1],fe):[[ve,pe],[_e,Te]]},fe.iterations=function(we){return arguments.length?(Me=+we,fe):Me},fe.circularLinkGap=function(we){return arguments.length?(Ee=+we,fe):Ee},fe.nodePaddingRatio=function(we){return arguments.length?(de=+we,fe):de},fe.sortNodes=function(we){return arguments.length?(De=we,fe):De},fe.update=function(we){return C(we,ae),xe(we),we.links.forEach(function(Oe){Oe.circular&&(Oe.circularLinkType=Oe.y0+Oe.y1<Te?"top":"bottom",Oe.source.circularLinkType=Oe.circularLinkType,Oe.target.circularLinkType=Oe.circularLinkType)}),oe(we,Te,ae,!1),ie(we,0,ae),N(we,Ee,Te,ae),we},fe}function C(ge,de){var ve=0,pe=0;ge.links.forEach(function(_e){_e.circular&&(_e.source.circularLinkType||_e.target.circularLinkType?_e.circularLinkType=_e.source.circularLinkType?_e.source.circularLinkType:_e.target.circularLinkType:_e.circularLinkType=ve<pe?"top":"bottom",_e.circularLinkType=="top"?ve+=1:pe+=1,ge.nodes.forEach(function(Te){f(Te,de)!=f(_e.source,de)&&f(Te,de)!=f(_e.target,de)||(Te.circularLinkType=_e.circularLinkType)}))}),ge.links.forEach(function(_e){_e.circular&&(_e.source.circularLinkType==_e.target.circularLinkType&&(_e.circularLinkType=_e.source.circularLinkType),be(_e,de)&&(_e.circularLinkType=_e.source.circularLinkType))})}function O(ge){var de=Math.abs(ge.y1-ge.y0),ve=Math.abs(ge.target.x0-ge.source.x1);return Math.atan(ve/de)}function R(ge,de){var ve=0;ge.sourceLinks.forEach(function(_e){ve=_e.circular&&!be(_e,de)?ve+1:ve});var pe=0;return ge.targetLinks.forEach(function(_e){pe=_e.circular&&!be(_e,de)?pe+1:pe}),ve+pe}function j(ge){var de=ge.source.sourceLinks,ve=0;de.forEach(function(Te){ve=Te.circular?ve+1:ve});var pe=ge.target.targetLinks,_e=0;return pe.forEach(function(Te){_e=Te.circular?_e+1:_e}),!(ve>1||_e>1)}function D(ge,de,ve){return ge.sort(W),ge.forEach(function(pe,_e){var Te,le,ae=0;if(be(pe,ve)&&j(pe))pe.circularPathData.verticalBuffer=ae+pe.width/2;else{for(var he=0;he<_e;he++)if(Te=ge[_e],le=ge[he],!(Te.source.column<le.target.column||Te.target.column>le.source.column)){var Se=ge[he].circularPathData.verticalBuffer+ge[he].width/2+de;ae=Se>ae?Se:ae}pe.circularPathData.verticalBuffer=ae+pe.width/2}}),ge}function N(ge,de,ve,pe){var _e=(0,M.SY)(ge.links,function(Te){return Te.source.y0});ge.links.forEach(function(Te){Te.circular&&(Te.circularPathData={})}),D(ge.links.filter(function(Te){return Te.circularLinkType=="top"}),de,pe),D(ge.links.filter(function(Te){return Te.circularLinkType=="bottom"}),de,pe),ge.links.forEach(function(Te){if(Te.circular){if(Te.circularPathData.arcRadius=Te.width+w,Te.circularPathData.leftNodeBuffer=5,Te.circularPathData.rightNodeBuffer=5,Te.circularPathData.sourceWidth=Te.source.x1-Te.source.x0,Te.circularPathData.sourceX=Te.source.x0+Te.circularPathData.sourceWidth,Te.circularPathData.targetX=Te.target.x0,Te.circularPathData.sourceY=Te.y0,Te.circularPathData.targetY=Te.y1,be(Te,pe)&&j(Te))Te.circularPathData.leftSmallArcRadius=w+Te.width/2,Te.circularPathData.leftLargeArcRadius=w+Te.width/2,Te.circularPathData.rightSmallArcRadius=w+Te.width/2,Te.circularPathData.rightLargeArcRadius=w+Te.width/2,Te.circularLinkType=="bottom"?(Te.circularPathData.verticalFullExtent=Te.source.y1+S+Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.rightLargeArcRadius):(Te.circularPathData.verticalFullExtent=Te.source.y0-S-Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.rightLargeArcRadius);else{var le=Te.source.column,ae=Te.circularLinkType,he=ge.links.filter(function(Me){return Me.source.column==le&&Me.circularLinkType==ae});Te.circularLinkType=="bottom"?he.sort(U):he.sort(F);var Se=0;he.forEach(function(Me,Ee){Me.circularLinkID==Te.circularLinkID&&(Te.circularPathData.leftSmallArcRadius=w+Te.width/2+Se,Te.circularPathData.leftLargeArcRadius=w+Te.width/2+Ee*de+Se),Se+=Me.width}),le=Te.target.column,he=ge.links.filter(function(Me){return Me.target.column==le&&Me.circularLinkType==ae}),Te.circularLinkType=="bottom"?he.sort(te):he.sort(V),Se=0,he.forEach(function(Me,Ee){Me.circularLinkID==Te.circularLinkID&&(Te.circularPathData.rightSmallArcRadius=w+Te.width/2+Se,Te.circularPathData.rightLargeArcRadius=w+Te.width/2+Ee*de+Se),Se+=Me.width}),Te.circularLinkType=="bottom"?(Te.circularPathData.verticalFullExtent=Math.max(ve,Te.source.y1,Te.target.y1)+S+Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent-Te.circularPathData.rightLargeArcRadius):(Te.circularPathData.verticalFullExtent=_e-S-Te.circularPathData.verticalBuffer,Te.circularPathData.verticalLeftInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.leftLargeArcRadius,Te.circularPathData.verticalRightInnerExtent=Te.circularPathData.verticalFullExtent+Te.circularPathData.rightLargeArcRadius)}Te.circularPathData.leftInnerExtent=Te.circularPathData.sourceX+Te.circularPathData.leftNodeBuffer,Te.circularPathData.rightInnerExtent=Te.circularPathData.targetX-Te.circularPathData.rightNodeBuffer,Te.circularPathData.leftFullExtent=Te.circularPathData.sourceX+Te.circularPathData.leftLargeArcRadius+Te.circularPathData.leftNodeBuffer,Te.circularPathData.rightFullExtent=Te.circularPathData.targetX-Te.circularPathData.rightLargeArcRadius-Te.circularPathData.rightNodeBuffer}if(Te.circular)Te.path=function(Me){return Me.circularLinkType=="top"?"M"+Me.circularPathData.sourceX+" "+Me.circularPathData.sourceY+" L"+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.sourceY+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftSmallArcRadius+" 0 0 0 "+Me.circularPathData.leftFullExtent+" "+(Me.circularPathData.sourceY-Me.circularPathData.leftSmallArcRadius)+" L"+Me.circularPathData.leftFullExtent+" "+Me.circularPathData.verticalLeftInnerExtent+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftLargeArcRadius+" 0 0 0 "+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.verticalFullExtent+" L"+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.verticalFullExtent+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightLargeArcRadius+" 0 0 0 "+Me.circularPathData.rightFullExtent+" "+Me.circularPathData.verticalRightInnerExtent+" L"+Me.circularPathData.rightFullExtent+" "+(Me.circularPathData.targetY-Me.circularPathData.rightSmallArcRadius)+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightSmallArcRadius+" 0 0 0 "+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.targetY+" L"+Me.circularPathData.targetX+" "+Me.circularPathData.targetY:"M"+Me.circularPathData.sourceX+" "+Me.circularPathData.sourceY+" L"+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.sourceY+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftSmallArcRadius+" 0 0 1 "+Me.circularPathData.leftFullExtent+" "+(Me.circularPathData.sourceY+Me.circularPathData.leftSmallArcRadius)+" L"+Me.circularPathData.leftFullExtent+" "+Me.circularPathData.verticalLeftInnerExtent+" A"+Me.circularPathData.leftLargeArcRadius+" "+Me.circularPathData.leftLargeArcRadius+" 0 0 1 "+Me.circularPathData.leftInnerExtent+" "+Me.circularPathData.verticalFullExtent+" L"+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.verticalFullExtent+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightLargeArcRadius+" 0 0 1 "+Me.circularPathData.rightFullExtent+" "+Me.circularPathData.verticalRightInnerExtent+" L"+Me.circularPathData.rightFullExtent+" "+(Me.circularPathData.targetY+Me.circularPathData.rightSmallArcRadius)+" A"+Me.circularPathData.rightLargeArcRadius+" "+Me.circularPathData.rightSmallArcRadius+" 0 0 1 "+Me.circularPathData.rightInnerExtent+" "+Me.circularPathData.targetY+" L"+Me.circularPathData.targetX+" "+Me.circularPathData.targetY}(Te);else{var ke=(0,o.ak)().source(function(Me){return[Me.source.x0+(Me.source.x1-Me.source.x0),Me.y0]}).target(function(Me){return[Me.target.x0,Me.y1]});Te.path=ke(Te)}})}function W(ge,de){return J(ge)==J(de)?ge.circularLinkType=="bottom"?U(ge,de):F(ge,de):J(de)-J(ge)}function F(ge,de){return ge.y0-de.y0}function U(ge,de){return de.y0-ge.y0}function V(ge,de){return ge.y1-de.y1}function te(ge,de){return de.y1-ge.y1}function J(ge){return ge.target.column-ge.source.column}function K(ge){return ge.target.x0-ge.source.x1}function X(ge,de){var ve=O(ge),pe=K(de)/Math.tan(ve);return me(ge)=="up"?ge.y1+pe:ge.y1-pe}function Z(ge,de){var ve=O(ge),pe=K(de)/Math.tan(ve);return me(ge)=="up"?ge.y1-pe:ge.y1+pe}function $(ge,de,ve,pe){ge.links.forEach(function(_e){if(!_e.circular&&_e.target.column-_e.source.column>1){var Te=_e.source.column+1,le=_e.target.column-1,ae=1,he=le-Te+1;for(ae=1;Te<=le;Te++,ae++)ge.nodes.forEach(function(Se){if(Se.column==Te){var ke,Me=ae/(he+1),Ee=Math.pow(1-Me,3),De=3*Me*Math.pow(1-Me,2),fe=3*Math.pow(Me,2)*(1-Me),xe=Math.pow(Me,3),we=Ee*_e.y0+De*_e.y0+fe*_e.y1+xe*_e.y1,Oe=we-_e.width/2,ze=we+_e.width/2;Oe>Se.y0&&Oe<Se.y1?(ke=Se.y1-Oe+10,ke=Se.circularLinkType=="bottom"?ke:-ke,Se=re(Se,ke,de,ve),ge.nodes.forEach(function(Pe){var Ue,Ve;f(Pe,pe)!=f(Se,pe)&&Pe.column==Se.column&&(Ve=Pe,(Ue=Se).y0>Ve.y0&&Ue.y0<Ve.y1||Ue.y1>Ve.y0&&Ue.y1<Ve.y1||Ue.y0<Ve.y0&&Ue.y1>Ve.y1)&&re(Pe,ke,de,ve)})):(ze>Se.y0&&ze<Se.y1||Oe<Se.y0&&ze>Se.y1)&&(ke=ze-Se.y0+10,Se=re(Se,ke,de,ve),ge.nodes.forEach(function(Pe){f(Pe,pe)!=f(Se,pe)&&Pe.column==Se.column&&Pe.y0<Se.y1&&Pe.y1>Se.y1&&re(Pe,ke,de,ve)}))}})}})}function re(ge,de,ve,pe){return ge.y0+de>=ve&&ge.y1+de<=pe&&(ge.y0=ge.y0+de,ge.y1=ge.y1+de,ge.targetLinks.forEach(function(_e){_e.y1=_e.y1+de}),ge.sourceLinks.forEach(function(_e){_e.y0=_e.y0+de})),ge}function oe(ge,de,ve,pe){ge.nodes.forEach(function(_e){pe&&_e.y+(_e.y1-_e.y0)>de&&(_e.y=_e.y-(_e.y+(_e.y1-_e.y0)-de));var Te=ge.links.filter(function(he){return f(he.source,ve)==f(_e,ve)}),le=Te.length;le>1&&Te.sort(function(he,Se){if(!he.circular&&!Se.circular){if(he.target.column==Se.target.column||!ue(he,Se))return he.y1-Se.y1;if(he.target.column>Se.target.column){var ke=Z(Se,he);return he.y1-ke}if(Se.target.column>he.target.column)return Z(he,Se)-Se.y1}return he.circular&&!Se.circular?he.circularLinkType=="top"?-1:1:Se.circular&&!he.circular?Se.circularLinkType=="top"?1:-1:he.circular&&Se.circular?he.circularLinkType===Se.circularLinkType&&he.circularLinkType=="top"?he.target.column===Se.target.column?he.target.y1-Se.target.y1:Se.target.column-he.target.column:he.circularLinkType===Se.circularLinkType&&he.circularLinkType=="bottom"?he.target.column===Se.target.column?Se.target.y1-he.target.y1:he.target.column-Se.target.column:he.circularLinkType=="top"?-1:1:void 0});var ae=_e.y0;Te.forEach(function(he){he.y0=ae+he.width/2,ae+=he.width}),Te.forEach(function(he,Se){if(he.circularLinkType=="bottom"){for(var ke=Se+1,Me=0;ke<le;ke++)Me+=Te[ke].width;he.y0=_e.y1-Me-he.width/2}})})}function ie(ge,de,ve){ge.nodes.forEach(function(pe){var _e=ge.links.filter(function(ae){return f(ae.target,ve)==f(pe,ve)}),Te=_e.length;Te>1&&_e.sort(function(ae,he){if(!ae.circular&&!he.circular){if(ae.source.column==he.source.column||!ue(ae,he))return ae.y0-he.y0;if(he.source.column<ae.source.column){var Se=X(he,ae);return ae.y0-Se}if(ae.source.column<he.source.column)return X(ae,he)-he.y0}return ae.circular&&!he.circular?ae.circularLinkType=="top"?-1:1:he.circular&&!ae.circular?he.circularLinkType=="top"?1:-1:ae.circular&&he.circular?ae.circularLinkType===he.circularLinkType&&ae.circularLinkType=="top"?ae.source.column===he.source.column?ae.source.y1-he.source.y1:ae.source.column-he.source.column:ae.circularLinkType===he.circularLinkType&&ae.circularLinkType=="bottom"?ae.source.column===he.source.column?ae.source.y1-he.source.y1:he.source.column-ae.source.column:ae.circularLinkType=="top"?-1:1:void 0});var le=pe.y0;_e.forEach(function(ae){ae.y1=le+ae.width/2,le+=ae.width}),_e.forEach(function(ae,he){if(ae.circularLinkType=="bottom"){for(var Se=he+1,ke=0;Se<Te;Se++)ke+=_e[Se].width;ae.y1=pe.y1-ke-ae.width/2}})})}function ue(ge,de){return me(ge)==me(de)}function me(ge){return ge.y0-ge.y1>0?"up":"down"}function be(ge,de){return f(ge.source,de)==f(ge.target,de)}},26800:function(ee,z,e){"use strict";e.r(z),e.d(z,{sankey:function(){return v},sankeyCenter:function(){return s},sankeyJustify:function(){return h},sankeyLeft:function(){return T},sankeyLinkHorizontal:function(){return f},sankeyRight:function(){return b}});var M=e(84706),k=e(34712);function o(S){return S.target.depth}function T(S){return S.depth}function b(S,w){return w-1-S.height}function h(S,w){return S.sourceLinks.length?S.depth:w-1}function s(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,M.SY)(S.sourceLinks,o)-1:0}function t(S){return function(){return S}}function i(S,w){return r(S.source,w.source)||S.index-w.index}function n(S,w){return r(S.target,w.target)||S.index-w.index}function r(S,w){return S.y0-w.y0}function a(S){return S.value}function l(S){return(S.y0+S.y1)/2}function u(S){return l(S.source)*S.value}function d(S){return l(S.target)*S.value}function c(S){return S.index}function x(S){return S.nodes}function g(S){return S.links}function p(S,w){var E=S.get(w);if(!E)throw new Error("missing: "+w);return E}function v(){var S=0,w=0,E=1,P=1,C=24,O=8,R=c,j=h,D=x,N=g,W=32;function F(){var V={nodes:D.apply(null,arguments),links:N.apply(null,arguments)};return function(te){te.nodes.forEach(function(K,X){K.index=X,K.sourceLinks=[],K.targetLinks=[]});var J=(0,k.kH)(te.nodes,R);te.links.forEach(function(K,X){K.index=X;var Z=K.source,$=K.target;typeof Z!="object"&&(Z=K.source=p(J,Z)),typeof $!="object"&&($=K.target=p(J,$)),Z.sourceLinks.push(K),$.targetLinks.push(K)})}(V),function(te){te.nodes.forEach(function(J){J.value=Math.max((0,M.oh)(J.sourceLinks,a),(0,M.oh)(J.targetLinks,a))})}(V),function(te){var J,K,X;for(J=te.nodes,K=[],X=0;J.length;++X,J=K,K=[])J.forEach(function($){$.depth=X,$.sourceLinks.forEach(function(re){K.indexOf(re.target)<0&&K.push(re.target)})});for(J=te.nodes,K=[],X=0;J.length;++X,J=K,K=[])J.forEach(function($){$.height=X,$.targetLinks.forEach(function(re){K.indexOf(re.source)<0&&K.push(re.source)})});var Z=(E-S-C)/(X-1);te.nodes.forEach(function($){$.x1=($.x0=S+Math.max(0,Math.min(X-1,Math.floor(j.call(null,$,X))))*Z)+C})}(V),function(te){var J=(0,k.UJ)().key(function(oe){return oe.x0}).sortKeys(M.XE).entries(te.nodes).map(function(oe){return oe.values});(function(){var oe=(0,M.kv)(J,function(me){return me.length}),ie=.6666666666666666*(P-w)/(oe-1);O>ie&&(O=ie);var ue=(0,M.SY)(J,function(me){return(P-w-(me.length-1)*O)/(0,M.oh)(me,a)});J.forEach(function(me){me.forEach(function(be,ge){be.y1=(be.y0=ge)+be.value*ue})}),te.links.forEach(function(me){me.width=me.value*ue})})(),re();for(var K=1,X=W;X>0;--X)$(K*=.99),re(),Z(K),re();function Z(oe){J.forEach(function(ie){ie.forEach(function(ue){if(ue.targetLinks.length){var me=((0,M.oh)(ue.targetLinks,u)/(0,M.oh)(ue.targetLinks,a)-l(ue))*oe;ue.y0+=me,ue.y1+=me}})})}function $(oe){J.slice().reverse().forEach(function(ie){ie.forEach(function(ue){if(ue.sourceLinks.length){var me=((0,M.oh)(ue.sourceLinks,d)/(0,M.oh)(ue.sourceLinks,a)-l(ue))*oe;ue.y0+=me,ue.y1+=me}})})}function re(){J.forEach(function(oe){var ie,ue,me,be=w,ge=oe.length;for(oe.sort(r),me=0;me<ge;++me)(ue=be-(ie=oe[me]).y0)>0&&(ie.y0+=ue,ie.y1+=ue),be=ie.y1+O;if((ue=be-O-P)>0)for(be=ie.y0-=ue,ie.y1-=ue,me=ge-2;me>=0;--me)(ue=(ie=oe[me]).y1+O-be)>0&&(ie.y0-=ue,ie.y1-=ue),be=ie.y0})}}(V),U(V),V}function U(V){V.nodes.forEach(function(te){te.sourceLinks.sort(n),te.targetLinks.sort(i)}),V.nodes.forEach(function(te){var J=te.y0,K=J;te.sourceLinks.forEach(function(X){X.y0=J+X.width/2,J+=X.width}),te.targetLinks.forEach(function(X){X.y1=K+X.width/2,K+=X.width})})}return F.update=function(V){return U(V),V},F.nodeId=function(V){return arguments.length?(R=typeof V=="function"?V:t(V),F):R},F.nodeAlign=function(V){return arguments.length?(j=typeof V=="function"?V:t(V),F):j},F.nodeWidth=function(V){return arguments.length?(C=+V,F):C},F.nodePadding=function(V){return arguments.length?(O=+V,F):O},F.nodes=function(V){return arguments.length?(D=typeof V=="function"?V:t(V),F):D},F.links=function(V){return arguments.length?(N=typeof V=="function"?V:t(V),F):N},F.size=function(V){return arguments.length?(S=w=0,E=+V[0],P=+V[1],F):[E-S,P-w]},F.extent=function(V){return arguments.length?(S=+V[0][0],E=+V[1][0],w=+V[0][1],P=+V[1][1],F):[[S,w],[E,P]]},F.iterations=function(V){return arguments.length?(W=+V,F):W},F}var m=e(10132);function y(S){return[S.source.x1,S.y0]}function _(S){return[S.target.x0,S.y1]}function f(){return(0,m.ak)().source(y).target(_)}},33428:function(ee,z,e){var M,k;(function(){var o={version:"3.8.0"},T=[].slice,b=function(L){return T.call(L)},h=self.document;function s(L){return L&&(L.ownerDocument||L.document||L).documentElement}function t(L){return L&&(L.ownerDocument&&L.ownerDocument.defaultView||L.document&&L||L.defaultView)}if(h)try{b(h.documentElement.childNodes)[0].nodeType}catch(L){b=function(q){for(var Q=q.length,ne=new Array(Q);Q--;)ne[Q]=q[Q];return ne}}if(Date.now||(Date.now=function(){return+new Date}),h)try{h.createElement("DIV").style.setProperty("opacity",0,"")}catch(L){var i=this.Element.prototype,n=i.setAttribute,r=i.setAttributeNS,a=this.CSSStyleDeclaration.prototype,l=a.setProperty;i.setAttribute=function(q,Q){n.call(this,q,Q+"")},i.setAttributeNS=function(q,Q,ne){r.call(this,q,Q,ne+"")},a.setProperty=function(q,Q,ne){l.call(this,q,Q+"",ne)}}function u(L,q){return L<q?-1:L>q?1:L>=q?0:NaN}function d(L){return L===null?NaN:+L}function c(L){return!isNaN(L)}function x(L){return{left:function(q,Q,ne,ce){for(arguments.length<3&&(ne=0),arguments.length<4&&(ce=q.length);ne<ce;){var ye=ne+ce>>>1;L(q[ye],Q)<0?ne=ye+1:ce=ye}return ne},right:function(q,Q,ne,ce){for(arguments.length<3&&(ne=0),arguments.length<4&&(ce=q.length);ne<ce;){var ye=ne+ce>>>1;L(q[ye],Q)>0?ce=ye:ne=ye+1}return ne}}}o.ascending=u,o.descending=function(L,q){return q<L?-1:q>L?1:q>=L?0:NaN},o.min=function(L,q){var Q,ne,ce=-1,ye=L.length;if(arguments.length===1){for(;++ce<ye;)if((ne=L[ce])!=null&&ne>=ne){Q=ne;break}for(;++ce<ye;)(ne=L[ce])!=null&&Q>ne&&(Q=ne)}else{for(;++ce<ye;)if((ne=q.call(L,L[ce],ce))!=null&&ne>=ne){Q=ne;break}for(;++ce<ye;)(ne=q.call(L,L[ce],ce))!=null&&Q>ne&&(Q=ne)}return Q},o.max=function(L,q){var Q,ne,ce=-1,ye=L.length;if(arguments.length===1){for(;++ce<ye;)if((ne=L[ce])!=null&&ne>=ne){Q=ne;break}for(;++ce<ye;)(ne=L[ce])!=null&&ne>Q&&(Q=ne)}else{for(;++ce<ye;)if((ne=q.call(L,L[ce],ce))!=null&&ne>=ne){Q=ne;break}for(;++ce<ye;)(ne=q.call(L,L[ce],ce))!=null&&ne>Q&&(Q=ne)}return Q},o.extent=function(L,q){var Q,ne,ce,ye=-1,Le=L.length;if(arguments.length===1){for(;++ye<Le;)if((ne=L[ye])!=null&&ne>=ne){Q=ce=ne;break}for(;++ye<Le;)(ne=L[ye])!=null&&(Q>ne&&(Q=ne),ce<ne&&(ce=ne))}else{for(;++ye<Le;)if((ne=q.call(L,L[ye],ye))!=null&&ne>=ne){Q=ce=ne;break}for(;++ye<Le;)(ne=q.call(L,L[ye],ye))!=null&&(Q>ne&&(Q=ne),ce<ne&&(ce=ne))}return[Q,ce]},o.sum=function(L,q){var Q,ne=0,ce=L.length,ye=-1;if(arguments.length===1)for(;++ye<ce;)c(Q=+L[ye])&&(ne+=Q);else for(;++ye<ce;)c(Q=+q.call(L,L[ye],ye))&&(ne+=Q);return ne},o.mean=function(L,q){var Q,ne=0,ce=L.length,ye=-1,Le=ce;if(arguments.length===1)for(;++ye<ce;)c(Q=d(L[ye]))?ne+=Q:--Le;else for(;++ye<ce;)c(Q=d(q.call(L,L[ye],ye)))?ne+=Q:--Le;if(Le)return ne/Le},o.quantile=function(L,q){var Q=(L.length-1)*q+1,ne=Math.floor(Q),ce=+L[ne-1],ye=Q-ne;return ye?ce+ye*(L[ne]-ce):ce},o.median=function(L,q){var Q,ne=[],ce=L.length,ye=-1;if(arguments.length===1)for(;++ye<ce;)c(Q=d(L[ye]))&&ne.push(Q);else for(;++ye<ce;)c(Q=d(q.call(L,L[ye],ye)))&&ne.push(Q);if(ne.length)return o.quantile(ne.sort(u),.5)},o.variance=function(L,q){var Q,ne,ce=L.length,ye=0,Le=0,Ie=-1,je=0;if(arguments.length===1)for(;++Ie<ce;)c(Q=d(L[Ie]))&&(Le+=(ne=Q-ye)*(Q-(ye+=ne/++je)));else for(;++Ie<ce;)c(Q=d(q.call(L,L[Ie],Ie)))&&(Le+=(ne=Q-ye)*(Q-(ye+=ne/++je)));if(je>1)return Le/(je-1)},o.deviation=function(){var L=o.variance.apply(this,arguments);return L&&Math.sqrt(L)};var g=x(u);function p(L){return L.length}o.bisectLeft=g.left,o.bisect=o.bisectRight=g.right,o.bisector=function(L){return x(L.length===1?function(q,Q){return u(L(q),Q)}:L)},o.shuffle=function(L,q,Q){(ye=arguments.length)<3&&(Q=L.length,ye<2&&(q=0));for(var ne,ce,ye=Q-q;ye;)ce=Math.random()*ye--|0,ne=L[ye+q],L[ye+q]=L[ce+q],L[ce+q]=ne;return L},o.permute=function(L,q){for(var Q=q.length,ne=new Array(Q);Q--;)ne[Q]=L[q[Q]];return ne},o.pairs=function(L){for(var q=0,Q=L.length-1,ne=L[0],ce=new Array(Q<0?0:Q);q<Q;)ce[q]=[ne,ne=L[++q]];return ce},o.transpose=function(L){if(!(ce=L.length))return[];for(var q=-1,Q=o.min(L,p),ne=new Array(Q);++q<Q;)for(var ce,ye=-1,Le=ne[q]=new Array(ce);++ye<ce;)Le[ye]=L[ye][q];return ne},o.zip=function(){return o.transpose(arguments)},o.keys=function(L){var q=[];for(var Q in L)q.push(Q);return q},o.values=function(L){var q=[];for(var Q in L)q.push(L[Q]);return q},o.entries=function(L){var q=[];for(var Q in L)q.push({key:Q,value:L[Q]});return q},o.merge=function(L){for(var q,Q,ne,ce=L.length,ye=-1,Le=0;++ye<ce;)Le+=L[ye].length;for(Q=new Array(Le);--ce>=0;)for(q=(ne=L[ce]).length;--q>=0;)Q[--Le]=ne[q];return Q};var v=Math.abs;function m(L,q){for(var Q in q)Object.defineProperty(L.prototype,Q,{value:q[Q],enumerable:!1})}function y(){this._=Object.create(null)}o.range=function(L,q,Q){if(arguments.length<3&&(Q=1,arguments.length<2&&(q=L,L=0)),(q-L)/Q==1/0)throw new Error("infinite range");var ne,ce=[],ye=function(Ie){for(var je=1;Ie*je%1;)je*=10;return je}(v(Q)),Le=-1;if(L*=ye,q*=ye,(Q*=ye)<0)for(;(ne=L+Q*++Le)>q;)ce.push(ne/ye);else for(;(ne=L+Q*++Le)<q;)ce.push(ne/ye);return ce},o.map=function(L,q){var Q=new y;if(L instanceof y)L.forEach(function(Ie,je){Q.set(Ie,je)});else if(Array.isArray(L)){var ne,ce=-1,ye=L.length;if(arguments.length===1)for(;++ce<ye;)Q.set(ce,L[ce]);else for(;++ce<ye;)Q.set(q.call(L,ne=L[ce],ce),ne)}else for(var Le in L)Q.set(Le,L[Le]);return Q};var _="__proto__",f="\0";function S(L){return(L+="")===_||L[0]===f?f+L:L}function w(L){return(L+="")[0]===f?L.slice(1):L}function E(L){return S(L)in this._}function P(L){return(L=S(L))in this._&&delete this._[L]}function C(){var L=[];for(var q in this._)L.push(w(q));return L}function O(){var L=0;for(var q in this._)++L;return L}function R(){for(var L in this._)return!1;return!0}function j(){this._=Object.create(null)}function D(L){return L}function N(L,q,Q){return function(){var ne=Q.apply(q,arguments);return ne===q?L:ne}}function W(L,q){if(q in L)return q;q=q.charAt(0).toUpperCase()+q.slice(1);for(var Q=0,ne=F.length;Q<ne;++Q){var ce=F[Q]+q;if(ce in L)return ce}}m(y,{has:E,get:function(L){return this._[S(L)]},set:function(L,q){return this._[S(L)]=q},remove:P,keys:C,values:function(){var L=[];for(var q in this._)L.push(this._[q]);return L},entries:function(){var L=[];for(var q in this._)L.push({key:w(q),value:this._[q]});return L},size:O,empty:R,forEach:function(L){for(var q in this._)L.call(this,w(q),this._[q])}}),o.nest=function(){var L,q,Q={},ne=[],ce=[];function ye(Ie,je,qe){if(qe>=ne.length)return q?q.call(Q,je):L?je.sort(L):je;for(var $e,lt,ft,_t,St=-1,At=je.length,Ft=ne[qe++],Ot=new y;++St<At;)(_t=Ot.get($e=Ft(lt=je[St])))?_t.push(lt):Ot.set($e,[lt]);return Ie?(lt=Ie(),ft=function(Zt,Ht){lt.set(Zt,ye(Ie,Ht,qe))}):(lt={},ft=function(Zt,Ht){lt[Zt]=ye(Ie,Ht,qe)}),Ot.forEach(ft),lt}function Le(Ie,je){if(je>=ne.length)return Ie;var qe=[],$e=ce[je++];return Ie.forEach(function(lt,ft){qe.push({key:lt,values:Le(ft,je)})}),$e?qe.sort(function(lt,ft){return $e(lt.key,ft.key)}):qe}return Q.map=function(Ie,je){return ye(je,Ie,0)},Q.entries=function(Ie){return Le(ye(o.map,Ie,0),0)},Q.key=function(Ie){return ne.push(Ie),Q},Q.sortKeys=function(Ie){return ce[ne.length-1]=Ie,Q},Q.sortValues=function(Ie){return L=Ie,Q},Q.rollup=function(Ie){return q=Ie,Q},Q},o.set=function(L){var q=new j;if(L)for(var Q=0,ne=L.length;Q<ne;++Q)q.add(L[Q]);return q},m(j,{has:E,add:function(L){return this._[S(L+="")]=!0,L},remove:P,values:C,size:O,empty:R,forEach:function(L){for(var q in this._)L.call(this,w(q))}}),o.behavior={},o.rebind=function(L,q){for(var Q,ne=1,ce=arguments.length;++ne<ce;)L[Q=arguments[ne]]=N(L,q,q[Q]);return L};var F=["webkit","ms","moz","Moz","o","O"];function U(){}function V(){}function te(L){var q=[],Q=new y;function ne(){for(var ce,ye=q,Le=-1,Ie=ye.length;++Le<Ie;)(ce=ye[Le].on)&&ce.apply(this,arguments);return L}return ne.on=function(ce,ye){var Le,Ie=Q.get(ce);return arguments.length<2?Ie&&Ie.on:(Ie&&(Ie.on=null,q=q.slice(0,Le=q.indexOf(Ie)).concat(q.slice(Le+1)),Q.remove(ce)),ye&&q.push(Q.set(ce,{on:ye})),L)},ne}function J(){o.event.preventDefault()}function K(){for(var L,q=o.event;L=q.sourceEvent;)q=L;return q}function X(L){for(var q=new V,Q=0,ne=arguments.length;++Q<ne;)q[arguments[Q]]=te(q);return q.of=function(ce,ye){return function(Le){try{var Ie=Le.sourceEvent=o.event;Le.target=L,o.event=Le,q[Le.type].apply(ce,ye)}finally{o.event=Ie}}},q}o.dispatch=function(){for(var L=new V,q=-1,Q=arguments.length;++q<Q;)L[arguments[q]]=te(L);return L},V.prototype.on=function(L,q){var Q=L.indexOf("."),ne="";if(Q>=0&&(ne=L.slice(Q+1),L=L.slice(0,Q)),L)return arguments.length<2?this[L].on(ne):this[L].on(ne,q);if(arguments.length===2){if(q==null)for(L in this)this.hasOwnProperty(L)&&this[L].on(ne,null);return this}},o.event=null,o.requote=function(L){return L.replace(Z,"\\$&")};var Z=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,$={}.__proto__?function(L,q){L.__proto__=q}:function(L,q){for(var Q in q)L[Q]=q[Q]};function re(L){return $(L,me),L}var oe=function(L,q){return q.querySelector(L)},ie=function(L,q){return q.querySelectorAll(L)},ue=function(L,q){var Q=L.matches||L[W(L,"matchesSelector")];return ue=function(ne,ce){return Q.call(ne,ce)},ue(L,q)};typeof Sizzle=="function"&&(oe=function(L,q){return Sizzle(L,q)[0]||null},ie=Sizzle,ue=Sizzle.matchesSelector),o.selection=function(){return o.select(h.documentElement)};var me=o.selection.prototype=[];function be(L){return typeof L=="function"?L:function(){return oe(L,this)}}function ge(L){return typeof L=="function"?L:function(){return ie(L,this)}}me.select=function(L){var q,Q,ne,ce,ye=[];L=be(L);for(var Le=-1,Ie=this.length;++Le<Ie;){ye.push(q=[]),q.parentNode=(ne=this[Le]).parentNode;for(var je=-1,qe=ne.length;++je<qe;)(ce=ne[je])?(q.push(Q=L.call(ce,ce.__data__,je,Le)),Q&&"__data__"in ce&&(Q.__data__=ce.__data__)):q.push(null)}return re(ye)},me.selectAll=function(L){var q,Q,ne=[];L=ge(L);for(var ce=-1,ye=this.length;++ce<ye;)for(var Le=this[ce],Ie=-1,je=Le.length;++Ie<je;)(Q=Le[Ie])&&(ne.push(q=b(L.call(Q,Q.__data__,Ie,ce))),q.parentNode=Q);return re(ne)};var de="http://www.w3.org/1999/xhtml",ve={svg:"http://www.w3.org/2000/svg",xhtml:de,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pe(L,q){return L=o.ns.qualify(L),q==null?L.local?function(){this.removeAttributeNS(L.space,L.local)}:function(){this.removeAttribute(L)}:typeof q=="function"?L.local?function(){var Q=q.apply(this,arguments);Q==null?this.removeAttributeNS(L.space,L.local):this.setAttributeNS(L.space,L.local,Q)}:function(){var Q=q.apply(this,arguments);Q==null?this.removeAttribute(L):this.setAttribute(L,Q)}:L.local?function(){this.setAttributeNS(L.space,L.local,q)}:function(){this.setAttribute(L,q)}}function _e(L){return L.trim().replace(/\s+/g," ")}function Te(L){return new RegExp("(?:^|\\s+)"+o.requote(L)+"(?:\\s+|$)","g")}function le(L){return(L+"").trim().split(/^|\s+/)}function ae(L,q){var Q=(L=le(L).map(he)).length;return typeof q=="function"?function(){for(var ne=-1,ce=q.apply(this,arguments);++ne<Q;)L[ne](this,ce)}:function(){for(var ne=-1;++ne<Q;)L[ne](this,q)}}function he(L){var q=Te(L);return function(Q,ne){if(ce=Q.classList)return ne?ce.add(L):ce.remove(L);var ce=Q.getAttribute("class")||"";ne?(q.lastIndex=0,q.test(ce)||Q.setAttribute("class",_e(ce+" "+L))):Q.setAttribute("class",_e(ce.replace(q," ")))}}function Se(L,q,Q){return q==null?function(){this.style.removeProperty(L)}:typeof q=="function"?function(){var ne=q.apply(this,arguments);ne==null?this.style.removeProperty(L):this.style.setProperty(L,ne,Q)}:function(){this.style.setProperty(L,q,Q)}}function ke(L,q){return q==null?function(){delete this[L]}:typeof q=="function"?function(){var Q=q.apply(this,arguments);Q==null?delete this[L]:this[L]=Q}:function(){this[L]=q}}function Me(L){return typeof L=="function"?L:(L=o.ns.qualify(L)).local?function(){return this.ownerDocument.createElementNS(L.space,L.local)}:function(){var q=this.ownerDocument,Q=this.namespaceURI;return Q===de&&q.documentElement.namespaceURI===de?q.createElement(L):q.createElementNS(Q,L)}}function Ee(){var L=this.parentNode;L&&L.removeChild(this)}function De(L){return{__data__:L}}function fe(L){return function(){return ue(this,L)}}function xe(L){return arguments.length||(L=u),function(q,Q){return q&&Q?L(q.__data__,Q.__data__):!q-!Q}}function we(L,q){for(var Q=0,ne=L.length;Q<ne;Q++)for(var ce,ye=L[Q],Le=0,Ie=ye.length;Le<Ie;Le++)(ce=ye[Le])&&q(ce,Le,Q);return L}function Oe(L){return $(L,ze),L}o.ns={prefix:ve,qualify:function(L){var q=L.indexOf(":"),Q=L;return q>=0&&(Q=L.slice(0,q))!=="xmlns"&&(L=L.slice(q+1)),ve.hasOwnProperty(Q)?{space:ve[Q],local:L}:L}},me.attr=function(L,q){if(arguments.length<2){if(typeof L=="string"){var Q=this.node();return(L=o.ns.qualify(L)).local?Q.getAttributeNS(L.space,L.local):Q.getAttribute(L)}for(q in L)this.each(pe(q,L[q]));return this}return this.each(pe(L,q))},me.classed=function(L,q){if(arguments.length<2){if(typeof L=="string"){var Q=this.node(),ne=(L=le(L)).length,ce=-1;if(q=Q.classList){for(;++ce<ne;)if(!q.contains(L[ce]))return!1}else for(q=Q.getAttribute("class");++ce<ne;)if(!Te(L[ce]).test(q))return!1;return!0}for(q in L)this.each(ae(q,L[q]));return this}return this.each(ae(L,q))},me.style=function(L,q,Q){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for(Q in ne<2&&(q=""),L)this.each(Se(Q,L[Q],q));return this}if(ne<2){var ce=this.node();return t(ce).getComputedStyle(ce,null).getPropertyValue(L)}Q=""}return this.each(Se(L,q,Q))},me.property=function(L,q){if(arguments.length<2){if(typeof L=="string")return this.node()[L];for(q in L)this.each(ke(q,L[q]));return this}return this.each(ke(L,q))},me.text=function(L){return arguments.length?this.each(typeof L=="function"?function(){var q=L.apply(this,arguments);this.textContent=q==null?"":q}:L==null?function(){this.textContent=""}:function(){this.textContent=L}):this.node().textContent},me.html=function(L){return arguments.length?this.each(typeof L=="function"?function(){var q=L.apply(this,arguments);this.innerHTML=q==null?"":q}:L==null?function(){this.innerHTML=""}:function(){this.innerHTML=L}):this.node().innerHTML},me.append=function(L){return L=Me(L),this.select(function(){return this.appendChild(L.apply(this,arguments))})},me.insert=function(L,q){return L=Me(L),q=be(q),this.select(function(){return this.insertBefore(L.apply(this,arguments),q.apply(this,arguments)||null)})},me.remove=function(){return this.each(Ee)},me.data=function(L,q){var Q,ne,ce=-1,ye=this.length;if(!arguments.length){for(L=new Array(ye=(Q=this[0]).length);++ce<ye;)(ne=Q[ce])&&(L[ce]=ne.__data__);return L}function Le($e,lt){var ft,_t,St,At=$e.length,Ft=lt.length,Ot=Math.min(At,Ft),Zt=new Array(Ft),Ht=new Array(Ft),Nt=new Array(At);if(q){var gn,yn=new y,Cn=new Array(At);for(ft=-1;++ft<At;)(_t=$e[ft])&&(yn.has(gn=q.call(_t,_t.__data__,ft))?Nt[ft]=_t:yn.set(gn,_t),Cn[ft]=gn);for(ft=-1;++ft<Ft;)(_t=yn.get(gn=q.call(lt,St=lt[ft],ft)))?_t!==!0&&(Zt[ft]=_t,_t.__data__=St):Ht[ft]=De(St),yn.set(gn,!0);for(ft=-1;++ft<At;)ft in Cn&&yn.get(Cn[ft])!==!0&&(Nt[ft]=$e[ft])}else{for(ft=-1;++ft<Ot;)_t=$e[ft],St=lt[ft],_t?(_t.__data__=St,Zt[ft]=_t):Ht[ft]=De(St);for(;ft<Ft;++ft)Ht[ft]=De(lt[ft]);for(;ft<At;++ft)Nt[ft]=$e[ft]}Ht.update=Zt,Ht.parentNode=Zt.parentNode=Nt.parentNode=$e.parentNode,Ie.push(Ht),je.push(Zt),qe.push(Nt)}var Ie=Oe([]),je=re([]),qe=re([]);if(typeof L=="function")for(;++ce<ye;)Le(Q=this[ce],L.call(Q,Q.parentNode.__data__,ce));else for(;++ce<ye;)Le(Q=this[ce],L);return je.enter=function(){return Ie},je.exit=function(){return qe},je},me.datum=function(L){return arguments.length?this.property("__data__",L):this.property("__data__")},me.filter=function(L){var q,Q,ne,ce=[];typeof L!="function"&&(L=fe(L));for(var ye=0,Le=this.length;ye<Le;ye++){ce.push(q=[]),q.parentNode=(Q=this[ye]).parentNode;for(var Ie=0,je=Q.length;Ie<je;Ie++)(ne=Q[Ie])&&L.call(ne,ne.__data__,Ie,ye)&&q.push(ne)}return re(ce)},me.order=function(){for(var L=-1,q=this.length;++L<q;)for(var Q,ne=this[L],ce=ne.length-1,ye=ne[ce];--ce>=0;)(Q=ne[ce])&&(ye&&ye!==Q.nextSibling&&ye.parentNode.insertBefore(Q,ye),ye=Q);return this},me.sort=function(L){L=xe.apply(this,arguments);for(var q=-1,Q=this.length;++q<Q;)this[q].sort(L);return this.order()},me.each=function(L){return we(this,function(q,Q,ne){L.call(q,q.__data__,Q,ne)})},me.call=function(L){var q=b(arguments);return L.apply(q[0]=this,q),this},me.empty=function(){return!this.node()},me.node=function(){for(var L=0,q=this.length;L<q;L++)for(var Q=this[L],ne=0,ce=Q.length;ne<ce;ne++){var ye=Q[ne];if(ye)return ye}return null},me.size=function(){var L=0;return we(this,function(){++L}),L};var ze=[];function Pe(L,q,Q){var ne="__on"+L,ce=L.indexOf("."),ye=Ve;ce>0&&(L=L.slice(0,ce));var Le=Ue.get(L);function Ie(){var je=this[ne];je&&(this.removeEventListener(L,je,je.$),delete this[ne])}return Le&&(L=Le,ye=Ze),ce?q?function(){var je=ye(q,b(arguments));Ie.call(this),this.addEventListener(L,this[ne]=je,je.$=Q),je._=q}:Ie:q?U:function(){var je,qe=new RegExp("^__on([^.]+)"+o.requote(L)+"$");for(var $e in this)if(je=$e.match(qe)){var lt=this[$e];this.removeEventListener(je[1],lt,lt.$),delete this[$e]}}}o.selection.enter=Oe,o.selection.enter.prototype=ze,ze.append=me.append,ze.empty=me.empty,ze.node=me.node,ze.call=me.call,ze.size=me.size,ze.select=function(L){for(var q,Q,ne,ce,ye,Le=[],Ie=-1,je=this.length;++Ie<je;){ne=(ce=this[Ie]).update,Le.push(q=[]),q.parentNode=ce.parentNode;for(var qe=-1,$e=ce.length;++qe<$e;)(ye=ce[qe])?(q.push(ne[qe]=Q=L.call(ce.parentNode,ye.__data__,qe,Ie)),Q.__data__=ye.__data__):q.push(null)}return re(Le)},ze.insert=function(L,q){var Q,ne,ce;return arguments.length<2&&(Q=this,q=function(ye,Le,Ie){var je,qe=Q[Ie].update,$e=qe.length;for(Ie!=ce&&(ce=Ie,ne=0),Le>=ne&&(ne=Le+1);!(je=qe[ne])&&++ne<$e;);return je}),me.insert.call(this,L,q)},o.select=function(L){var q;return typeof L=="string"?(q=[oe(L,h)]).parentNode=h.documentElement:(q=[L]).parentNode=s(L),re([q])},o.selectAll=function(L){var q;return typeof L=="string"?(q=b(ie(L,h))).parentNode=h.documentElement:(q=b(L)).parentNode=null,re([q])},me.on=function(L,q,Q){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for(Q in ne<2&&(q=!1),L)this.each(Pe(Q,L[Q],q));return this}if(ne<2)return(ne=this.node()["__on"+L])&&ne._;Q=!1}return this.each(Pe(L,q,Q))};var Ue=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ve(L,q){return function(Q){var ne=o.event;o.event=Q,q[0]=this.__data__;try{L.apply(this,q)}finally{o.event=ne}}}function Ze(L,q){var Q=Ve(L,q);return function(ne){var ce=this,ye=ne.relatedTarget;ye&&(ye===ce||8&ye.compareDocumentPosition(ce))||Q.call(ce,ne)}}h&&Ue.forEach(function(L){"on"+L in h&&Ue.remove(L)});var it,tt=0;function dt(L){var q=".dragsuppress-"+ ++tt,Q="click"+q,ne=o.select(t(L)).on("touchmove"+q,J).on("dragstart"+q,J).on("selectstart"+q,J);if(it==null&&(it=!("onselectstart"in L)&&W(L.style,"userSelect")),it){var ce=s(L).style,ye=ce[it];ce[it]="none"}return function(Le){if(ne.on(q,null),it&&(ce[it]=ye),Le){var Ie=function(){ne.on(Q,null)};ne.on(Q,function(){J(),Ie()},!0),setTimeout(Ie,0)}}}o.mouse=function(L){return vt(L,K())};var yt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function vt(L,q){q.changedTouches&&(q=q.changedTouches[0]);var Q=L.ownerSVGElement||L;if(Q.createSVGPoint){var ne=Q.createSVGPoint();if(yt<0){var ce=t(L);if(ce.scrollX||ce.scrollY){var ye=(Q=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();yt=!(ye.f||ye.e),Q.remove()}}return yt?(ne.x=q.pageX,ne.y=q.pageY):(ne.x=q.clientX,ne.y=q.clientY),[(ne=ne.matrixTransform(L.getScreenCTM().inverse())).x,ne.y]}var Le=L.getBoundingClientRect();return[q.clientX-Le.left-L.clientLeft,q.clientY-Le.top-L.clientTop]}function et(){return o.event.changedTouches[0].identifier}o.touch=function(L,q,Q){if(arguments.length<3&&(Q=q,q=K().changedTouches),q){for(var ne,ce=0,ye=q.length;ce<ye;++ce)if((ne=q[ce]).identifier===Q)return vt(L,ne)}},o.behavior.drag=function(){var L=X(ce,"drag","dragstart","dragend"),q=null,Q=ye(U,o.mouse,t,"mousemove","mouseup"),ne=ye(et,o.touch,D,"touchmove","touchend");function ce(){this.on("mousedown.drag",Q).on("touchstart.drag",ne)}function ye(Le,Ie,je,qe,$e){return function(){var lt,ft=this,_t=o.event.target.correspondingElement||o.event.target,St=ft.parentNode,At=L.of(ft,arguments),Ft=0,Ot=Le(),Zt=".drag"+(Ot==null?"":"-"+Ot),Ht=o.select(je(_t)).on(qe+Zt,function(){var yn,Cn,Dn=Ie(St,Ot);Dn&&(yn=Dn[0]-gn[0],Cn=Dn[1]-gn[1],Ft|=yn|Cn,gn=Dn,At({type:"drag",x:Dn[0]+lt[0],y:Dn[1]+lt[1],dx:yn,dy:Cn}))}).on($e+Zt,function(){Ie(St,Ot)&&(Ht.on(qe+Zt,null).on($e+Zt,null),Nt(Ft),At({type:"dragend"}))}),Nt=dt(_t),gn=Ie(St,Ot);lt=q?[(lt=q.apply(ft,arguments)).x-gn[0],lt.y-gn[1]]:[0,0],At({type:"dragstart"})}}return ce.origin=function(Le){return arguments.length?(q=Le,ce):q},o.rebind(ce,L,"on")},o.touches=function(L,q){return arguments.length<2&&(q=K().touches),q?b(q).map(function(Q){var ne=vt(L,Q);return ne.identifier=Q.identifier,ne}):[]};var Qe=1e-6,wt=Qe*Qe,It=Math.PI,Dt=2*It,Ct=Dt-Qe,He=It/2,We=It/180,Be=180/It;function Ge(L){return L>1?He:L<-1?-He:Math.asin(L)}function at(L){return((L=Math.exp(L))+1/L)/2}var nt=Math.SQRT2;o.interpolateZoom=function(L,q){var Q,ne,ce=L[0],ye=L[1],Le=L[2],Ie=q[0],je=q[1],qe=q[2],$e=Ie-ce,lt=je-ye,ft=$e*$e+lt*lt;if(ft<wt)ne=Math.log(qe/Le)/nt,Q=function(Zt){return[ce+Zt*$e,ye+Zt*lt,Le*Math.exp(nt*Zt*ne)]};else{var _t=Math.sqrt(ft),St=(qe*qe-Le*Le+4*ft)/(2*Le*2*_t),At=(qe*qe-Le*Le-4*ft)/(2*qe*2*_t),Ft=Math.log(Math.sqrt(St*St+1)-St),Ot=Math.log(Math.sqrt(At*At+1)-At);ne=(Ot-Ft)/nt,Q=function(Zt){var Ht,Nt=Zt*ne,gn=at(Ft),yn=Le/(2*_t)*(gn*(Ht=nt*Nt+Ft,((Ht=Math.exp(2*Ht))-1)/(Ht+1))-function(Cn){return((Cn=Math.exp(Cn))-1/Cn)/2}(Ft));return[ce+yn*$e,ye+yn*lt,Le*gn/at(nt*Nt+Ft)]}}return Q.duration=1e3*ne,Q},o.behavior.zoom=function(){var L,q,Q,ne,ce,ye,Le,Ie,je,qe={x:0,y:0,k:1},$e=[960,500],lt=rt,ft=250,_t=0,St="mousedown.zoom",At="mousemove.zoom",Ft="mouseup.zoom",Ot="touchstart.zoom",Zt=X(Ht,"zoomstart","zoom","zoomend");function Ht(ar){ar.on(St,Zn).on(Fe+".zoom",Ar).on("dblclick.zoom",Fr).on(Ot,pr)}function Nt(ar){return[(ar[0]-qe.x)/qe.k,(ar[1]-qe.y)/qe.k]}function gn(ar){qe.k=Math.max(lt[0],Math.min(lt[1],ar))}function yn(ar,fr){fr=function(Er){return[Er[0]*qe.k+qe.x,Er[1]*qe.k+qe.y]}(fr),qe.x+=ar[0]-fr[0],qe.y+=ar[1]-fr[1]}function Cn(ar,fr,Er,yr){ar.__chart__={x:qe.x,y:qe.y,k:qe.k},gn(Math.pow(2,yr)),yn(q=fr,Er),ar=o.select(ar),ft>0&&(ar=ar.transition().duration(ft)),ar.call(Ht.event)}function Dn(){Le&&Le.domain(ye.range().map(function(ar){return(ar-qe.x)/qe.k}).map(ye.invert)),je&&je.domain(Ie.range().map(function(ar){return(ar-qe.y)/qe.k}).map(Ie.invert))}function Wn(ar){_t++||ar({type:"zoomstart"})}function sr(ar){Dn(),ar({type:"zoom",scale:qe.k,translate:[qe.x,qe.y]})}function mr(ar){--_t||(ar({type:"zoomend"}),q=null)}function Zn(){var ar=this,fr=Zt.of(ar,arguments),Er=0,yr=o.select(t(ar)).on(At,function(){Er=1,yn(o.mouse(ar),zr),sr(fr)}).on(Ft,function(){yr.on(At,null).on(Ft,null),Vr(Er),mr(fr)}),zr=Nt(o.mouse(ar)),Vr=dt(ar);Ya.call(ar),Wn(fr)}function pr(){var ar,fr=this,Er=Zt.of(fr,arguments),yr={},zr=0,Vr=".zoom-"+o.event.changedTouches[0].identifier,Jr="touchmove"+Vr,Qr="touchend"+Vr,ri=[],ai=o.select(fr),Mi=dt(fr);function Vi(){var Ci=o.touches(fr);return ar=qe.k,Ci.forEach(function(si){si.identifier in yr&&(yr[si.identifier]=Nt(si))}),Ci}function Aa(){var Ci=o.event.target;o.select(Ci).on(Jr,ia).on(Qr,va),ri.push(Ci);for(var si=o.event.changedTouches,Fi=0,xi=si.length;Fi<xi;++Fi)yr[si[Fi].identifier]=null;var ci=Vi(),Bi=Date.now();if(ci.length===1){if(Bi-ce<500){var qi=ci[0];Cn(fr,qi,yr[qi.identifier],Math.floor(Math.log(qe.k)/Math.LN2)+1),J()}ce=Bi}else if(ci.length>1){qi=ci[0];var ea=ci[1],Es=qi[0]-ea[0],Ls=qi[1]-ea[1];zr=Es*Es+Ls*Ls}}function ia(){var Ci,si,Fi,xi,ci=o.touches(fr);Ya.call(fr);for(var Bi=0,qi=ci.length;Bi<qi;++Bi,xi=null)if(Fi=ci[Bi],xi=yr[Fi.identifier]){if(si)break;Ci=Fi,si=xi}if(xi){var ea=(ea=Fi[0]-Ci[0])*ea+(ea=Fi[1]-Ci[1])*ea,Es=zr&&Math.sqrt(ea/zr);Ci=[(Ci[0]+Fi[0])/2,(Ci[1]+Fi[1])/2],si=[(si[0]+xi[0])/2,(si[1]+xi[1])/2],gn(Es*ar)}ce=null,yn(Ci,si),sr(Er)}function va(){if(o.event.touches.length){for(var Ci=o.event.changedTouches,si=0,Fi=Ci.length;si<Fi;++si)delete yr[Ci[si].identifier];for(var xi in yr)return void Vi()}o.selectAll(ri).on(Vr,null),ai.on(St,Zn).on(Ot,pr),Mi(),mr(Er)}Aa(),Wn(Er),ai.on(St,null).on(Ot,Aa)}function Ar(){var ar=Zt.of(this,arguments);ne?clearTimeout(ne):(Ya.call(this),L=Nt(q=Q||o.mouse(this)),Wn(ar)),ne=setTimeout(function(){ne=null,mr(ar)},50),J(),gn(Math.pow(2,.002*Re())*qe.k),yn(q,L),sr(ar)}function Fr(){var ar=o.mouse(this),fr=Math.log(qe.k)/Math.LN2;Cn(this,ar,Nt(ar),o.event.shiftKey?Math.ceil(fr)-1:Math.floor(fr)+1)}return Fe||(Fe="onwheel"in h?(Re=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in h?(Re=function(){return o.event.wheelDelta},"mousewheel"):(Re=function(){return-o.event.detail},"MozMousePixelScroll")),Ht.event=function(ar){ar.each(function(){var fr=Zt.of(this,arguments),Er=qe;Zi?o.select(this).transition().each("start.zoom",function(){qe=this.__chart__||{x:0,y:0,k:1},Wn(fr)}).tween("zoom:zoom",function(){var yr=$e[0],zr=$e[1],Vr=q?q[0]:yr/2,Jr=q?q[1]:zr/2,Qr=o.interpolateZoom([(Vr-qe.x)/qe.k,(Jr-qe.y)/qe.k,yr/qe.k],[(Vr-Er.x)/Er.k,(Jr-Er.y)/Er.k,yr/Er.k]);return function(ri){var ai=Qr(ri),Mi=yr/ai[2];this.__chart__=qe={x:Vr-ai[0]*Mi,y:Jr-ai[1]*Mi,k:Mi},sr(fr)}}).each("interrupt.zoom",function(){mr(fr)}).each("end.zoom",function(){mr(fr)}):(this.__chart__=qe,Wn(fr),sr(fr),mr(fr))})},Ht.translate=function(ar){return arguments.length?(qe={x:+ar[0],y:+ar[1],k:qe.k},Dn(),Ht):[qe.x,qe.y]},Ht.scale=function(ar){return arguments.length?(qe={x:qe.x,y:qe.y,k:null},gn(+ar),Dn(),Ht):qe.k},Ht.scaleExtent=function(ar){return arguments.length?(lt=ar==null?rt:[+ar[0],+ar[1]],Ht):lt},Ht.center=function(ar){return arguments.length?(Q=ar&&[+ar[0],+ar[1]],Ht):Q},Ht.size=function(ar){return arguments.length?($e=ar&&[+ar[0],+ar[1]],Ht):$e},Ht.duration=function(ar){return arguments.length?(ft=+ar,Ht):ft},Ht.x=function(ar){return arguments.length?(Le=ar,ye=ar.copy(),qe={x:0,y:0,k:1},Ht):Le},Ht.y=function(ar){return arguments.length?(je=ar,Ie=ar.copy(),qe={x:0,y:0,k:1},Ht):je},o.rebind(Ht,Zt,"on")};var Re,Fe,rt=[0,1/0];function Ye(){}function ct(L,q,Q){return this instanceof ct?(this.h=+L,this.s=+q,void(this.l=+Q)):arguments.length<2?L instanceof ct?new ct(L.h,L.s,L.l):cn(""+L,Tn,ct):new ct(L,q,Q)}o.color=Ye,Ye.prototype.toString=function(){return this.rgb()+""},o.hsl=ct;var pt=ct.prototype=new Ye;function gt(L,q,Q){var ne,ce;function ye(Le){return Math.round(255*function(Ie){return Ie>360?Ie-=360:Ie<0&&(Ie+=360),Ie<60?ne+(ce-ne)*Ie/60:Ie<180?ce:Ie<240?ne+(ce-ne)*(240-Ie)/60:ne}(Le))}return L=isNaN(L)?0:(L%=360)<0?L+360:L,q=isNaN(q)||q<0?0:q>1?1:q,ne=2*(Q=Q<0?0:Q>1?1:Q)-(ce=Q<=.5?Q*(1+q):Q+q-Q*q),new An(ye(L+120),ye(L),ye(L-120))}function ut(L,q,Q){return this instanceof ut?(this.h=+L,this.c=+q,void(this.l=+Q)):arguments.length<2?L instanceof ut?new ut(L.h,L.c,L.l):function(ne,ce,ye){return ne>0?new ut(Math.atan2(ye,ce)*Be,Math.sqrt(ce*ce+ye*ye),ne):new ut(NaN,NaN,ne)}(L instanceof mt?L.l:(L=Mn((L=o.rgb(L)).r,L.g,L.b)).l,L.a,L.b):new ut(L,q,Q)}pt.brighter=function(L){return L=Math.pow(.7,arguments.length?L:1),new ct(this.h,this.s,this.l/L)},pt.darker=function(L){return L=Math.pow(.7,arguments.length?L:1),new ct(this.h,this.s,L*this.l)},pt.rgb=function(){return gt(this.h,this.s,this.l)},o.hcl=ut;var Mt=ut.prototype=new Ye;function xt(L,q,Q){return isNaN(L)&&(L=0),isNaN(q)&&(q=0),new mt(Q,Math.cos(L*=We)*q,Math.sin(L)*q)}function mt(L,q,Q){return this instanceof mt?(this.l=+L,this.a=+q,void(this.b=+Q)):arguments.length<2?L instanceof mt?new mt(L.l,L.a,L.b):L instanceof ut?xt(L.h,L.c,L.l):Mn((L=An(L)).r,L.g,L.b):new mt(L,q,Q)}Mt.brighter=function(L){return new ut(this.h,this.c,Math.min(100,this.l+Et*(arguments.length?L:1)))},Mt.darker=function(L){return new ut(this.h,this.c,Math.max(0,this.l-Et*(arguments.length?L:1)))},Mt.rgb=function(){return xt(this.h,this.c,this.l).rgb()},o.lab=mt;var Et=18,Lt=.95047,zt=1,Wt=1.08883,rn=mt.prototype=new Ye;function Ut(L,q,Q){var ne=(L+16)/116,ce=ne+q/500,ye=ne-Q/200;return new An(Ln(3.2404542*(ce=Vt(ce)*Lt)-1.5371385*(ne=Vt(ne)*zt)-.4985314*(ye=Vt(ye)*Wt)),Ln(-.969266*ce+1.8760108*ne+.041556*ye),Ln(.0556434*ce-.2040259*ne+1.0572252*ye))}function Vt(L){return L>.206893034?L*L*L:(L-.13793103448275862)/7.787037}function en(L){return L>.008856?Math.pow(L,.3333333333333333):7.787037*L+.13793103448275862}function Ln(L){return Math.round(255*(L<=.00304?12.92*L:1.055*Math.pow(L,.4166666666666667)-.055))}function An(L,q,Q){return this instanceof An?(this.r=~~L,this.g=~~q,void(this.b=~~Q)):arguments.length<2?L instanceof An?new An(L.r,L.g,L.b):cn(""+L,An,gt):new An(L,q,Q)}function hn(L){return new An(L>>16,L>>8&255,255&L)}function Xt(L){return hn(L)+""}rn.brighter=function(L){return new mt(Math.min(100,this.l+Et*(arguments.length?L:1)),this.a,this.b)},rn.darker=function(L){return new mt(Math.max(0,this.l-Et*(arguments.length?L:1)),this.a,this.b)},rn.rgb=function(){return Ut(this.l,this.a,this.b)},o.rgb=An;var ln=An.prototype=new Ye;function nn(L){return L<16?"0"+Math.max(0,L).toString(16):Math.min(255,L).toString(16)}function cn(L,q,Q){var ne,ce,ye,Le=0,Ie=0,je=0;if(ne=/([a-z]+)\((.*)\)/.exec(L=L.toLowerCase()))switch(ce=ne[2].split(","),ne[1]){case"hsl":return Q(parseFloat(ce[0]),parseFloat(ce[1])/100,parseFloat(ce[2])/100);case"rgb":return q(In(ce[0]),In(ce[1]),In(ce[2]))}return(ye=Pn.get(L))?q(ye.r,ye.g,ye.b):(L==null||L.charAt(0)!=="#"||isNaN(ye=parseInt(L.slice(1),16))||(L.length===4?(Le=(3840&ye)>>4,Le|=Le>>4,Ie=240&ye,Ie|=Ie>>4,je=15&ye,je|=je<<4):L.length===7&&(Le=(16711680&ye)>>16,Ie=(65280&ye)>>8,je=255&ye)),q(Le,Ie,je))}function Tn(L,q,Q){var ne,ce,ye=Math.min(L/=255,q/=255,Q/=255),Le=Math.max(L,q,Q),Ie=Le-ye,je=(Le+ye)/2;return Ie?(ce=je<.5?Ie/(Le+ye):Ie/(2-Le-ye),ne=L==Le?(q-Q)/Ie+(q<Q?6:0):q==Le?(Q-L)/Ie+2:(L-q)/Ie+4,ne*=60):(ne=NaN,ce=je>0&&je<1?0:ne),new ct(ne,ce,je)}function Mn(L,q,Q){var ne=en((.4124564*(L=zn(L))+.3575761*(q=zn(q))+.1804375*(Q=zn(Q)))/Lt),ce=en((.2126729*L+.7151522*q+.072175*Q)/zt);return mt(116*ce-16,500*(ne-ce),200*(ce-en((.0193339*L+.119192*q+.9503041*Q)/Wt)))}function zn(L){return(L/=255)<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function In(L){var q=parseFloat(L);return L.charAt(L.length-1)==="%"?Math.round(2.55*q):q}ln.brighter=function(L){L=Math.pow(.7,arguments.length?L:1);var q=this.r,Q=this.g,ne=this.b,ce=30;return q||Q||ne?(q&&q<ce&&(q=ce),Q&&Q<ce&&(Q=ce),ne&&ne<ce&&(ne=ce),new An(Math.min(255,q/L),Math.min(255,Q/L),Math.min(255,ne/L))):new An(ce,ce,ce)},ln.darker=function(L){return new An((L=Math.pow(.7,arguments.length?L:1))*this.r,L*this.g,L*this.b)},ln.hsl=function(){return Tn(this.r,this.g,this.b)},ln.toString=function(){return"#"+nn(this.r)+nn(this.g)+nn(this.b)};var Pn=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Hn(L){return typeof L=="function"?L:function(){return L}}function Fn(L){return function(q,Q,ne){return arguments.length===2&&typeof Q=="function"&&(ne=Q,Q=null),tr(q,Q,L,ne)}}function tr(L,q,Q,ne){var ce={},ye=o.dispatch("beforesend","progress","load","error"),Le={},Ie=new XMLHttpRequest,je=null;function qe(){var $e,lt=Ie.status;if(!lt&&function(ft){var _t=ft.responseType;return _t&&_t!=="text"?ft.response:ft.responseText}(Ie)||lt>=200&&lt<300||lt===304){try{$e=Q.call(ce,Ie)}catch(ft){return void ye.error.call(ce,ft)}ye.load.call(ce,$e)}else ye.error.call(ce,Ie)}return self.XDomainRequest&&!("withCredentials"in Ie)&&/^(http(s)?:)?\/\//.test(L)&&(Ie=new XDomainRequest),"onload"in Ie?Ie.onload=Ie.onerror=qe:Ie.onreadystatechange=function(){Ie.readyState>3&&qe()},Ie.onprogress=function($e){var lt=o.event;o.event=$e;try{ye.progress.call(ce,Ie)}finally{o.event=lt}},ce.header=function($e,lt){return $e=($e+"").toLowerCase(),arguments.length<2?Le[$e]:(lt==null?delete Le[$e]:Le[$e]=lt+"",ce)},ce.mimeType=function($e){return arguments.length?(q=$e==null?null:$e+"",ce):q},ce.responseType=function($e){return arguments.length?(je=$e,ce):je},ce.response=function($e){return Q=$e,ce},["get","post"].forEach(function($e){ce[$e]=function(){return ce.send.apply(ce,[$e].concat(b(arguments)))}}),ce.send=function($e,lt,ft){if(arguments.length===2&&typeof lt=="function"&&(ft=lt,lt=null),Ie.open($e,L,!0),q==null||"accept"in Le||(Le.accept=q+",*/*"),Ie.setRequestHeader)for(var _t in Le)Ie.setRequestHeader(_t,Le[_t]);return q!=null&&Ie.overrideMimeType&&Ie.overrideMimeType(q),je!=null&&(Ie.responseType=je),ft!=null&&ce.on("error",ft).on("load",function(St){ft(null,St)}),ye.beforesend.call(ce,Ie),Ie.send(lt==null?null:lt),ce},ce.abort=function(){return Ie.abort(),ce},o.rebind(ce,ye,"on"),ne==null?ce:ce.get(function($e){return $e.length===1?function(lt,ft){$e(lt==null?ft:null)}:$e}(ne))}Pn.forEach(function(L,q){Pn.set(L,hn(q))}),o.functor=Hn,o.xhr=Fn(D),o.dsv=function(L,q){var Q=new RegExp('["'+L+`
]`),ne=L.charCodeAt(0);function ce(qe,$e,lt){arguments.length<3&&(lt=$e,$e=null);var ft=tr(qe,q,$e==null?ye:Le($e),lt);return ft.row=function(_t){return arguments.length?ft.response(($e=_t)==null?ye:Le(_t)):$e},ft}function ye(qe){return ce.parse(qe.responseText)}function Le(qe){return function($e){return ce.parse($e.responseText,qe)}}function Ie(qe){return qe.map(je).join(L)}function je(qe){return Q.test(qe)?'"'+qe.replace(/\"/g,'""')+'"':qe}return ce.parse=function(qe,$e){var lt;return ce.parseRows(qe,function(ft,_t){if(lt)return lt(ft,_t-1);var St=function(At){for(var Ft={},Ot=ft.length,Zt=0;Zt<Ot;++Zt)Ft[ft[Zt]]=At[Zt];return Ft};lt=$e?function(At,Ft){return $e(St(At),Ft)}:St})},ce.parseRows=function(qe,$e){var lt,ft,_t={},St={},At=[],Ft=qe.length,Ot=0,Zt=0;function Ht(){if(Ot>=Ft)return St;if(ft)return ft=!1,_t;var gn=Ot;if(qe.charCodeAt(gn)===34){for(var yn=gn;yn++<Ft;)if(qe.charCodeAt(yn)===34){if(qe.charCodeAt(yn+1)!==34)break;++yn}return Ot=yn+2,(Cn=qe.charCodeAt(yn+1))===13?(ft=!0,qe.charCodeAt(yn+2)===10&&++Ot):Cn===10&&(ft=!0),qe.slice(gn+1,yn).replace(/""/g,'"')}for(;Ot<Ft;){var Cn,Dn=1;if((Cn=qe.charCodeAt(Ot++))===10)ft=!0;else if(Cn===13)ft=!0,qe.charCodeAt(Ot)===10&&(++Ot,++Dn);else if(Cn!==ne)continue;return qe.slice(gn,Ot-Dn)}return qe.slice(gn)}for(;(lt=Ht())!==St;){for(var Nt=[];lt!==_t&&lt!==St;)Nt.push(lt),lt=Ht();$e&&(Nt=$e(Nt,Zt++))==null||At.push(Nt)}return At},ce.format=function(qe){if(Array.isArray(qe[0]))return ce.formatRows(qe);var $e=new j,lt=[];return qe.forEach(function(ft){for(var _t in ft)$e.has(_t)||lt.push($e.add(_t))}),[lt.map(je).join(L)].concat(qe.map(function(ft){return lt.map(function(_t){return je(ft[_t])}).join(L)})).join(`
`)},ce.formatRows=function(qe){return qe.map(Ie).join(`
`)},ce},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("	","text/tab-separated-values");var or,ur,er,Mr,jt=this[W(this,"requestAnimationFrame")]||function(L){setTimeout(L,17)};function tn(L,q,Q){var ne=arguments.length;ne<2&&(q=0),ne<3&&(Q=Date.now());var ce={c:L,t:Q+q,n:null};return ur?ur.n=ce:or=ce,ur=ce,er||(Mr=clearTimeout(Mr),er=1,jt(xn)),ce}function xn(){var L=pn(),q=Sn()-L;q>24?(isFinite(q)&&(clearTimeout(Mr),Mr=setTimeout(xn,q)),er=0):(er=1,jt(xn))}function pn(){for(var L=Date.now(),q=or;q;)L>=q.t&&q.c(L-q.t)&&(q.c=null),q=q.n;return L}function Sn(){for(var L,q=or,Q=1/0;q;)q.c?(q.t<Q&&(Q=q.t),q=(L=q).n):q=L?L.n=q.n:or=q.n;return ur=L,Q}function Gn(L){return L[0]}function Rn(L){return L[1]}function Nn(L){for(var q,Q,ne,ce=L.length,ye=[0,1],Le=2,Ie=2;Ie<ce;Ie++){for(;Le>1&&(q=L[ye[Le-2]],Q=L[ye[Le-1]],ne=L[Ie],(Q[0]-q[0])*(ne[1]-q[1])-(Q[1]-q[1])*(ne[0]-q[0])<=0);)--Le;ye[Le++]=Ie}return ye.slice(0,Le)}function ir(L,q){return L[0]-q[0]||L[1]-q[1]}o.timer=function(){tn.apply(this,arguments)},o.timer.flush=function(){pn(),Sn()},o.round=function(L,q){return q?Math.round(L*(q=Math.pow(10,q)))/q:Math.round(L)},o.geom={},o.geom.hull=function(L){var q=Gn,Q=Rn;if(arguments.length)return ne(L);function ne(ce){if(ce.length<3)return[];var ye,Le=Hn(q),Ie=Hn(Q),je=ce.length,qe=[],$e=[];for(ye=0;ye<je;ye++)qe.push([+Le.call(this,ce[ye],ye),+Ie.call(this,ce[ye],ye),ye]);for(qe.sort(ir),ye=0;ye<je;ye++)$e.push([qe[ye][0],-qe[ye][1]]);var lt=Nn(qe),ft=Nn($e),_t=ft[0]===lt[0],St=ft[ft.length-1]===lt[lt.length-1],At=[];for(ye=lt.length-1;ye>=0;--ye)At.push(ce[qe[lt[ye]][2]]);for(ye=+_t;ye<ft.length-St;++ye)At.push(ce[qe[ft[ye]][2]]);return At}return ne.x=function(ce){return arguments.length?(q=ce,ne):q},ne.y=function(ce){return arguments.length?(Q=ce,ne):Q},ne},o.geom.polygon=function(L){return $(L,Gt),L};var Gt=o.geom.polygon.prototype=[];function dn(L,q,Q){return(Q[0]-q[0])*(L[1]-q[1])<(Q[1]-q[1])*(L[0]-q[0])}function Pt(L,q,Q,ne){var ce=L[0],ye=Q[0],Le=q[0]-ce,Ie=ne[0]-ye,je=L[1],qe=Q[1],$e=q[1]-je,lt=ne[1]-qe,ft=(Ie*(je-qe)-lt*(ce-ye))/(lt*Le-Ie*$e);return[ce+ft*Le,je+ft*$e]}function Yt(L){var q=L[0],Q=L[L.length-1];return!(q[0]-Q[0]||q[1]-Q[1])}Gt.area=function(){for(var L,q=-1,Q=this.length,ne=this[Q-1],ce=0;++q<Q;)L=ne,ne=this[q],ce+=L[1]*ne[0]-L[0]*ne[1];return .5*ce},Gt.centroid=function(L){var q,Q,ne=-1,ce=this.length,ye=0,Le=0,Ie=this[ce-1];for(arguments.length||(L=-1/(6*this.area()));++ne<ce;)q=Ie,Ie=this[ne],Q=q[0]*Ie[1]-Ie[0]*q[1],ye+=(q[0]+Ie[0])*Q,Le+=(q[1]+Ie[1])*Q;return[ye*L,Le*L]},Gt.clip=function(L){for(var q,Q,ne,ce,ye,Le,Ie=Yt(L),je=-1,qe=this.length-Yt(this),$e=this[qe-1];++je<qe;){for(q=L.slice(),L.length=0,ce=this[je],ye=q[(ne=q.length-Ie)-1],Q=-1;++Q<ne;)dn(Le=q[Q],$e,ce)?(dn(ye,$e,ce)||L.push(Pt(ye,Le,$e,ce)),L.push(Le)):dn(ye,$e,ce)&&L.push(Pt(ye,Le,$e,ce)),ye=Le;Ie&&L.push(L[0]),$e=ce}return L};var Qt,mn,vn,_n,sn,Kt=[],Jt=[];function on(){hi(this),this.edge=this.site=this.circle=null}function fn(L){var q=Kt.pop()||new on;return q.site=L,q}function En(L){vr(L),vn.remove(L),Kt.push(L),hi(L)}function On(L){var q=L.circle,Q=q.x,ne=q.cy,ce={x:Q,y:ne},ye=L.P,Le=L.N,Ie=[L];En(L);for(var je=ye;je.circle&&v(Q-je.circle.x)<Qe&&v(ne-je.circle.cy)<Qe;)ye=je.P,Ie.unshift(je),En(je),je=ye;Ie.unshift(je),vr(je);for(var qe=Le;qe.circle&&v(Q-qe.circle.x)<Qe&&v(ne-qe.circle.cy)<Qe;)Le=qe.N,Ie.push(qe),En(qe),qe=Le;Ie.push(qe),vr(qe);var $e,lt=Ie.length;for($e=1;$e<lt;++$e)qe=Ie[$e],je=Ie[$e-1],_r(qe.edge,je.site,qe.site,ce);je=Ie[0],(qe=Ie[lt-1]).edge=$n(je.site,qe.site,null,ce),Jn(je),Jn(qe)}function Vn(L){for(var q,Q,ne,ce,ye=L.x,Le=L.y,Ie=vn._;Ie;)if((ne=jn(Ie,Le)-ye)>Qe)Ie=Ie.L;else{if(!((ce=ye-Kn(Ie,Le))>Qe)){ne>-Qe?(q=Ie.P,Q=Ie):ce>-Qe?(q=Ie,Q=Ie.N):q=Q=Ie;break}if(!Ie.R){q=Ie;break}Ie=Ie.R}var je=fn(L);if(vn.insert(q,je),q||Q){if(q===Q)return vr(q),Q=fn(q.site),vn.insert(je,Q),je.edge=Q.edge=$n(q.site,je.site),Jn(q),void Jn(Q);if(Q){vr(q),vr(Q);var qe=q.site,$e=qe.x,lt=qe.y,ft=L.x-$e,_t=L.y-lt,St=Q.site,At=St.x-$e,Ft=St.y-lt,Ot=2*(ft*Ft-_t*At),Zt=ft*ft+_t*_t,Ht=At*At+Ft*Ft,Nt={x:(Ft*Zt-_t*Ht)/Ot+$e,y:(ft*Ht-At*Zt)/Ot+lt};_r(Q.edge,qe,St,Nt),je.edge=$n(qe,L,null,Nt),Q.edge=$n(L,St,null,Nt),Jn(q),Jn(Q)}else je.edge=$n(q.site,je.site)}}function jn(L,q){var Q=L.site,ne=Q.x,ce=Q.y,ye=ce-q;if(!ye)return ne;var Le=L.P;if(!Le)return-1/0;var Ie=(Q=Le.site).x,je=Q.y,qe=je-q;if(!qe)return Ie;var $e=Ie-ne,lt=1/ye-1/qe,ft=$e/qe;return lt?(-ft+Math.sqrt(ft*ft-2*lt*($e*$e/(-2*qe)-je+qe/2+ce-ye/2)))/lt+ne:(ne+Ie)/2}function Kn(L,q){var Q=L.N;if(Q)return jn(Q,q);var ne=L.site;return ne.y===q?ne.x:1/0}function Yn(L){this.site=L,this.edges=[]}function nr(L,q){return q.angle-L.angle}function rr(){hi(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jn(L){var q=L.P,Q=L.N;if(q&&Q){var ne=q.site,ce=L.site,ye=Q.site;if(ne!==ye){var Le=ce.x,Ie=ce.y,je=ne.x-Le,qe=ne.y-Ie,$e=ye.x-Le,lt=2*(je*(Ft=ye.y-Ie)-qe*$e);if(!(lt>=-wt)){var ft=je*je+qe*qe,_t=$e*$e+Ft*Ft,St=(Ft*ft-qe*_t)/lt,At=(je*_t-$e*ft)/lt,Ft=At+Ie,Ot=Jt.pop()||new rr;Ot.arc=L,Ot.site=ce,Ot.x=St+Le,Ot.y=Ft+Math.sqrt(St*St+At*At),Ot.cy=Ft,L.circle=Ot;for(var Zt=null,Ht=sn._;Ht;)if(Ot.y<Ht.y||Ot.y===Ht.y&&Ot.x<=Ht.x){if(!Ht.L){Zt=Ht.P;break}Ht=Ht.L}else{if(!Ht.R){Zt=Ht;break}Ht=Ht.R}sn.insert(Zt,Ot),Zt||(_n=Ot)}}}}function vr(L){var q=L.circle;q&&(q.P||(_n=q.N),sn.remove(q),Jt.push(q),hi(q),L.circle=null)}function lr(L,q){var Q=L.b;if(Q)return!0;var ne,ce,ye=L.a,Le=q[0][0],Ie=q[1][0],je=q[0][1],qe=q[1][1],$e=L.l,lt=L.r,ft=$e.x,_t=$e.y,St=lt.x,At=lt.y,Ft=(ft+St)/2,Ot=(_t+At)/2;if(At===_t){if(Ft<Le||Ft>=Ie)return;if(ft>St){if(ye){if(ye.y>=qe)return}else ye={x:Ft,y:je};Q={x:Ft,y:qe}}else{if(ye){if(ye.y<je)return}else ye={x:Ft,y:qe};Q={x:Ft,y:je}}}else if(ce=Ot-(ne=(ft-St)/(At-_t))*Ft,ne<-1||ne>1)if(ft>St){if(ye){if(ye.y>=qe)return}else ye={x:(je-ce)/ne,y:je};Q={x:(qe-ce)/ne,y:qe}}else{if(ye){if(ye.y<je)return}else ye={x:(qe-ce)/ne,y:qe};Q={x:(je-ce)/ne,y:je}}else if(_t<At){if(ye){if(ye.x>=Ie)return}else ye={x:Le,y:ne*Le+ce};Q={x:Ie,y:ne*Ie+ce}}else{if(ye){if(ye.x<Le)return}else ye={x:Ie,y:ne*Ie+ce};Q={x:Le,y:ne*Le+ce}}return L.a=ye,L.b=Q,!0}function dr(L,q){this.l=L,this.r=q,this.a=this.b=null}function $n(L,q,Q,ne){var ce=new dr(L,q);return Qt.push(ce),Q&&_r(ce,L,q,Q),ne&&_r(ce,q,L,ne),mn[L.i].edges.push(new Lr(ce,L,q)),mn[q.i].edges.push(new Lr(ce,q,L)),ce}function _r(L,q,Q,ne){L.a||L.b?L.l===Q?L.b=ne:L.a=ne:(L.a=ne,L.l=q,L.r=Q)}function Lr(L,q,Q){var ne=L.a,ce=L.b;this.edge=L,this.site=q,this.angle=Q?Math.atan2(Q.y-q.y,Q.x-q.x):L.l===q?Math.atan2(ce.x-ne.x,ne.y-ce.y):Math.atan2(ne.x-ce.x,ce.y-ne.y)}function Gr(){this._=null}function hi(L){L.U=L.C=L.L=L.R=L.P=L.N=null}function di(L,q){var Q=q,ne=q.R,ce=Q.U;ce?ce.L===Q?ce.L=ne:ce.R=ne:L._=ne,ne.U=ce,Q.U=ne,Q.R=ne.L,Q.R&&(Q.R.U=Q),ne.L=Q}function Wi(L,q){var Q=q,ne=q.L,ce=Q.U;ce?ce.L===Q?ce.L=ne:ce.R=ne:L._=ne,ne.U=ce,Q.U=ne,Q.L=ne.R,Q.L&&(Q.L.U=Q),ne.R=Q}function gi(L){for(;L.L;)L=L.L;return L}function zi(L,q){var Q,ne,ce,ye=L.sort(_a).pop();for(Qt=[],mn=new Array(L.length),vn=new Gr,sn=new Gr;;)if(ce=_n,ye&&(!ce||ye.y<ce.y||ye.y===ce.y&&ye.x<ce.x))ye.x===Q&&ye.y===ne||(mn[ye.i]=new Yn(ye),Vn(ye),Q=ye.x,ne=ye.y),ye=L.pop();else{if(!ce)break;On(ce.arc)}q&&(function(Ie){for(var je,qe,$e,lt,ft,_t=Qt,St=(qe=Ie[0][0],$e=Ie[0][1],lt=Ie[1][0],ft=Ie[1][1],function(Ft){var Ot,Zt=Ft.a,Ht=Ft.b,Nt=Zt.x,gn=Zt.y,yn=0,Cn=1,Dn=Ht.x-Nt,Wn=Ht.y-gn;if(Ot=qe-Nt,Dn||!(Ot>0)){if(Ot/=Dn,Dn<0){if(Ot<yn)return;Ot<Cn&&(Cn=Ot)}else if(Dn>0){if(Ot>Cn)return;Ot>yn&&(yn=Ot)}if(Ot=lt-Nt,Dn||!(Ot<0)){if(Ot/=Dn,Dn<0){if(Ot>Cn)return;Ot>yn&&(yn=Ot)}else if(Dn>0){if(Ot<yn)return;Ot<Cn&&(Cn=Ot)}if(Ot=$e-gn,Wn||!(Ot>0)){if(Ot/=Wn,Wn<0){if(Ot<yn)return;Ot<Cn&&(Cn=Ot)}else if(Wn>0){if(Ot>Cn)return;Ot>yn&&(yn=Ot)}if(Ot=ft-gn,Wn||!(Ot<0)){if(Ot/=Wn,Wn<0){if(Ot>Cn)return;Ot>yn&&(yn=Ot)}else if(Wn>0){if(Ot<yn)return;Ot<Cn&&(Cn=Ot)}return yn>0&&(Ft.a={x:Nt+yn*Dn,y:gn+yn*Wn}),Cn<1&&(Ft.b={x:Nt+Cn*Dn,y:gn+Cn*Wn}),Ft}}}}}),At=_t.length;At--;)(!lr(je=_t[At],Ie)||!St(je)||v(je.a.x-je.b.x)<Qe&&v(je.a.y-je.b.y)<Qe)&&(je.a=je.b=null,_t.splice(At,1))}(q),function(Ie){for(var je,qe,$e,lt,ft,_t,St,At,Ft,Ot,Zt=Ie[0][0],Ht=Ie[1][0],Nt=Ie[0][1],gn=Ie[1][1],yn=mn,Cn=yn.length;Cn--;)if((ft=yn[Cn])&&ft.prepare())for(At=(St=ft.edges).length,_t=0;_t<At;)$e=(Ot=St[_t].end()).x,lt=Ot.y,je=(Ft=St[++_t%At].start()).x,qe=Ft.y,(v($e-je)>Qe||v(lt-qe)>Qe)&&(St.splice(_t,0,new Lr((Dn=ft.site,Wn=Ot,sr=v($e-Zt)<Qe&&gn-lt>Qe?{x:Zt,y:v(je-Zt)<Qe?qe:gn}:v(lt-gn)<Qe&&Ht-$e>Qe?{x:v(qe-gn)<Qe?je:Ht,y:gn}:v($e-Ht)<Qe&&lt-Nt>Qe?{x:Ht,y:v(je-Ht)<Qe?qe:Nt}:v(lt-Nt)<Qe&&$e-Zt>Qe?{x:v(qe-Nt)<Qe?je:Zt,y:Nt}:null,mr=void 0,(mr=new dr(Dn,null)).a=Wn,mr.b=sr,Qt.push(mr),mr),ft.site,null)),++At);var Dn,Wn,sr,mr}(q));var Le={cells:mn,edges:Qt};return vn=sn=Qt=mn=null,Le}function _a(L,q){return q.y-L.y||q.x-L.x}Yn.prototype.prepare=function(){for(var L,q=this.edges,Q=q.length;Q--;)(L=q[Q].edge).b&&L.a||q.splice(Q,1);return q.sort(nr),q.length},Lr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Gr.prototype={insert:function(L,q){var Q,ne,ce;if(L){if(q.P=L,q.N=L.N,L.N&&(L.N.P=q),L.N=q,L.R){for(L=L.R;L.L;)L=L.L;L.L=q}else L.R=q;Q=L}else this._?(L=gi(this._),q.P=null,q.N=L,L.P=L.L=q,Q=L):(q.P=q.N=null,this._=q,Q=null);for(q.L=q.R=null,q.U=Q,q.C=!0,L=q;Q&&Q.C;)Q===(ne=Q.U).L?(ce=ne.R)&&ce.C?(Q.C=ce.C=!1,ne.C=!0,L=ne):(L===Q.R&&(di(this,Q),Q=(L=Q).U),Q.C=!1,ne.C=!0,Wi(this,ne)):(ce=ne.L)&&ce.C?(Q.C=ce.C=!1,ne.C=!0,L=ne):(L===Q.L&&(Wi(this,Q),Q=(L=Q).U),Q.C=!1,ne.C=!0,di(this,ne)),Q=L.U;this._.C=!1},remove:function(L){L.N&&(L.N.P=L.P),L.P&&(L.P.N=L.N),L.N=L.P=null;var q,Q,ne,ce=L.U,ye=L.L,Le=L.R;if(Q=ye?Le?gi(Le):ye:Le,ce?ce.L===L?ce.L=Q:ce.R=Q:this._=Q,ye&&Le?(ne=Q.C,Q.C=L.C,Q.L=ye,ye.U=Q,Q!==Le?(ce=Q.U,Q.U=L.U,L=Q.R,ce.L=L,Q.R=Le,Le.U=Q):(Q.U=ce,ce=Q,L=Q.R)):(ne=L.C,L=Q),L&&(L.U=ce),!ne)if(L&&L.C)L.C=!1;else{do{if(L===this._)break;if(L===ce.L){if((q=ce.R).C&&(q.C=!1,ce.C=!0,di(this,ce),q=ce.R),q.L&&q.L.C||q.R&&q.R.C){q.R&&q.R.C||(q.L.C=!1,q.C=!0,Wi(this,q),q=ce.R),q.C=ce.C,ce.C=q.R.C=!1,di(this,ce),L=this._;break}}else if((q=ce.L).C&&(q.C=!1,ce.C=!0,Wi(this,ce),q=ce.L),q.L&&q.L.C||q.R&&q.R.C){q.L&&q.L.C||(q.R.C=!1,q.C=!0,di(this,q),q=ce.L),q.C=ce.C,ce.C=q.L.C=!1,Wi(this,ce),L=this._;break}q.C=!0,L=ce,ce=ce.U}while(!L.C);L&&(L.C=!1)}}},o.geom.voronoi=function(L){var q=Gn,Q=Rn,ne=q,ce=Q,ye=wa;if(L)return Le(L);function Le(je){var qe=new Array(je.length),$e=ye[0][0],lt=ye[0][1],ft=ye[1][0],_t=ye[1][1];return zi(Ie(je),ye).cells.forEach(function(St,At){var Ft=St.edges,Ot=St.site;(qe[At]=Ft.length?Ft.map(function(Zt){var Ht=Zt.start();return[Ht.x,Ht.y]}):Ot.x>=$e&&Ot.x<=ft&&Ot.y>=lt&&Ot.y<=_t?[[$e,_t],[ft,_t],[ft,lt],[$e,lt]]:[]).point=je[At]}),qe}function Ie(je){return je.map(function(qe,$e){return{x:Math.round(ne(qe,$e)/Qe)*Qe,y:Math.round(ce(qe,$e)/Qe)*Qe,i:$e}})}return Le.links=function(je){return zi(Ie(je)).edges.filter(function(qe){return qe.l&&qe.r}).map(function(qe){return{source:je[qe.l.i],target:je[qe.r.i]}})},Le.triangles=function(je){var qe=[];return zi(Ie(je)).cells.forEach(function($e,lt){for(var ft,_t,St,At,Ft=$e.site,Ot=$e.edges.sort(nr),Zt=-1,Ht=Ot.length,Nt=Ot[Ht-1].edge,gn=Nt.l===Ft?Nt.r:Nt.l;++Zt<Ht;)ft=gn,gn=(Nt=Ot[Zt].edge).l===Ft?Nt.r:Nt.l,lt<ft.i&&lt<gn.i&&(St=ft,At=gn,((_t=Ft).x-At.x)*(St.y-_t.y)-(_t.x-St.x)*(At.y-_t.y)<0)&&qe.push([je[lt],je[ft.i],je[gn.i]])}),qe},Le.x=function(je){return arguments.length?(ne=Hn(q=je),Le):q},Le.y=function(je){return arguments.length?(ce=Hn(Q=je),Le):Q},Le.clipExtent=function(je){return arguments.length?(ye=je==null?wa:je,Le):ye===wa?null:ye},Le.size=function(je){return arguments.length?Le.clipExtent(je&&[[0,0],je]):ye===wa?null:ye&&ye[1]},Le};var wa=[[-1e6,-1e6],[1e6,1e6]];function zo(L){return L.x}function nl(L){return L.y}function xs(L,q,Q,ne,ce,ye){if(!L(q,Q,ne,ce,ye)){var Le=.5*(Q+ce),Ie=.5*(ne+ye),je=q.nodes;je[0]&&xs(L,je[0],Q,ne,Le,Ie),je[1]&&xs(L,je[1],Le,ne,ce,Ie),je[2]&&xs(L,je[2],Q,Ie,Le,ye),je[3]&&xs(L,je[3],Le,Ie,ce,ye)}}function bs(L,q){L=o.rgb(L),q=o.rgb(q);var Q=L.r,ne=L.g,ce=L.b,ye=q.r-Q,Le=q.g-ne,Ie=q.b-ce;return function(je){return"#"+nn(Math.round(Q+ye*je))+nn(Math.round(ne+Le*je))+nn(Math.round(ce+Ie*je))}}function Is(L,q){var Q,ne={},ce={};for(Q in L)Q in q?ne[Q]=so(L[Q],q[Q]):ce[Q]=L[Q];for(Q in q)Q in L||(ce[Q]=q[Q]);return function(ye){for(Q in ne)ce[Q]=ne[Q](ye);return ce}}function Ja(L,q){return L=+L,q=+q,function(Q){return L*(1-Q)+q*Q}}function Ds(L,q){var Q,ne,ce,ye=zs.lastIndex=_s.lastIndex=0,Le=-1,Ie=[],je=[];for(L+="",q+="";(Q=zs.exec(L))&&(ne=_s.exec(q));)(ce=ne.index)>ye&&(ce=q.slice(ye,ce),Ie[Le]?Ie[Le]+=ce:Ie[++Le]=ce),(Q=Q[0])===(ne=ne[0])?Ie[Le]?Ie[Le]+=ne:Ie[++Le]=ne:(Ie[++Le]=null,je.push({i:Le,x:Ja(Q,ne)})),ye=_s.lastIndex;return ye<q.length&&(ce=q.slice(ye),Ie[Le]?Ie[Le]+=ce:Ie[++Le]=ce),Ie.length<2?je[0]?(q=je[0].x,function(qe){return q(qe)+""}):function(){return q}:(q=je.length,function(qe){for(var $e,lt=0;lt<q;++lt)Ie[($e=je[lt]).i]=$e.x(qe);return Ie.join("")})}o.geom.delaunay=function(L){return o.geom.voronoi().triangles(L)},o.geom.quadtree=function(L,q,Q,ne,ce){var ye,Le=Gn,Ie=Rn;if(ye=arguments.length)return Le=zo,Ie=nl,ye===3&&(ce=Q,ne=q,Q=q=0),je(L);function je(qe){var $e,lt,ft,_t,St,At,Ft,Ot,Zt,Ht=Hn(Le),Nt=Hn(Ie);if(q!=null)At=q,Ft=Q,Ot=ne,Zt=ce;else if(Ot=Zt=-(At=Ft=1/0),lt=[],ft=[],St=qe.length,ye)for(_t=0;_t<St;++_t)($e=qe[_t]).x<At&&(At=$e.x),$e.y<Ft&&(Ft=$e.y),$e.x>Ot&&(Ot=$e.x),$e.y>Zt&&(Zt=$e.y),lt.push($e.x),ft.push($e.y);else for(_t=0;_t<St;++_t){var gn=+Ht($e=qe[_t],_t),yn=+Nt($e,_t);gn<At&&(At=gn),yn<Ft&&(Ft=yn),gn>Ot&&(Ot=gn),yn>Zt&&(Zt=yn),lt.push(gn),ft.push(yn)}var Cn=Ot-At,Dn=Zt-Ft;function Wn(Zn,pr,Ar,Fr,ar,fr,Er,yr){if(!isNaN(Ar)&&!isNaN(Fr))if(Zn.leaf){var zr=Zn.x,Vr=Zn.y;if(zr!=null)if(v(zr-Ar)+v(Vr-Fr)<.01)sr(Zn,pr,Ar,Fr,ar,fr,Er,yr);else{var Jr=Zn.point;Zn.x=Zn.y=Zn.point=null,sr(Zn,Jr,zr,Vr,ar,fr,Er,yr),sr(Zn,pr,Ar,Fr,ar,fr,Er,yr)}else Zn.x=Ar,Zn.y=Fr,Zn.point=pr}else sr(Zn,pr,Ar,Fr,ar,fr,Er,yr)}function sr(Zn,pr,Ar,Fr,ar,fr,Er,yr){var zr=.5*(ar+Er),Vr=.5*(fr+yr),Jr=Ar>=zr,Qr=Fr>=Vr,ri=Qr<<1|Jr;Zn.leaf=!1,Jr?ar=zr:Er=zr,Qr?fr=Vr:yr=Vr,Wn(Zn=Zn.nodes[ri]||(Zn.nodes[ri]={leaf:!0,nodes:[],point:null,x:null,y:null}),pr,Ar,Fr,ar,fr,Er,yr)}Cn>Dn?Zt=Ft+Cn:Ot=At+Dn;var mr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Zn){Wn(mr,Zn,+Ht(Zn,++_t),+Nt(Zn,_t),At,Ft,Ot,Zt)}};if(mr.visit=function(Zn){xs(Zn,mr,At,Ft,Ot,Zt)},mr.find=function(Zn){return function(pr,Ar,Fr,ar,fr,Er,yr){var zr,Vr=1/0;return function Jr(Qr,ri,ai,Mi,Vi){if(!(ri>Er||ai>yr||Mi<ar||Vi<fr)){if(Aa=Qr.point){var Aa,ia=Ar-Qr.x,va=Fr-Qr.y,Ci=ia*ia+va*va;if(Ci<Vr){var si=Math.sqrt(Vr=Ci);ar=Ar-si,fr=Fr-si,Er=Ar+si,yr=Fr+si,zr=Aa}}for(var Fi=Qr.nodes,xi=.5*(ri+Mi),ci=.5*(ai+Vi),Bi=(Fr>=ci)<<1|Ar>=xi,qi=Bi+4;Bi<qi;++Bi)if(Qr=Fi[3&Bi])switch(3&Bi){case 0:Jr(Qr,ri,ai,xi,ci);break;case 1:Jr(Qr,xi,ai,Mi,ci);break;case 2:Jr(Qr,ri,ci,xi,Vi);break;case 3:Jr(Qr,xi,ci,Mi,Vi)}}}(pr,ar,fr,Er,yr),zr}(mr,Zn[0],Zn[1],At,Ft,Ot,Zt)},_t=-1,q==null){for(;++_t<St;)Wn(mr,qe[_t],lt[_t],ft[_t],At,Ft,Ot,Zt);--_t}else qe.forEach(mr.add);return lt=ft=qe=$e=null,mr}return je.x=function(qe){return arguments.length?(Le=qe,je):Le},je.y=function(qe){return arguments.length?(Ie=qe,je):Ie},je.extent=function(qe){return arguments.length?(qe==null?q=Q=ne=ce=null:(q=+qe[0][0],Q=+qe[0][1],ne=+qe[1][0],ce=+qe[1][1]),je):q==null?null:[[q,Q],[ne,ce]]},je.size=function(qe){return arguments.length?(qe==null?q=Q=ne=ce=null:(q=Q=0,ne=+qe[0],ce=+qe[1]),je):q==null?null:[ne-q,ce-Q]},je},o.interpolateRgb=bs,o.interpolateObject=Is,o.interpolateNumber=Ja,o.interpolateString=Ds;var zs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_s=new RegExp(zs.source,"g");function so(L,q){for(var Q,ne=o.interpolators.length;--ne>=0&&!(Q=o.interpolators[ne](L,q)););return Q}function _o(L,q){var Q,ne=[],ce=[],ye=L.length,Le=q.length,Ie=Math.min(L.length,q.length);for(Q=0;Q<Ie;++Q)ne.push(so(L[Q],q[Q]));for(;Q<ye;++Q)ce[Q]=L[Q];for(;Q<Le;++Q)ce[Q]=q[Q];return function(je){for(Q=0;Q<Ie;++Q)ce[Q]=ne[Q](je);return ce}}o.interpolate=so,o.interpolators=[function(L,q){var Q=typeof q;return(Q==="string"?Pn.has(q.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(q)?bs:Ds:q instanceof Ye?bs:Array.isArray(q)?_o:Q==="object"&&isNaN(q)?Is:Ja)(L,q)}],o.interpolateArray=_o;var Ro=function(){return D},bi=o.map({linear:Ro,poly:function(L){return function(q){return Math.pow(q,L)}},quad:function(){return Va},cubic:function(){return uo},sin:function(){return Fo},exp:function(){return wo},circle:function(){return Bo},elastic:function(L,q){var Q;return arguments.length<2&&(q=.45),arguments.length?Q=q/Dt*Math.asin(1/L):(L=1,Q=q/4),function(ne){return 1+L*Math.pow(2,-10*ne)*Math.sin((ne-Q)*Dt/q)}},back:function(L){return L||(L=1.70158),function(q){return q*q*((L+1)*q-L)}},bounce:function(){return co}}),$i=o.map({in:D,out:lo,"in-out":Qa,"out-in":function(L){return Qa(lo(L))}});function lo(L){return function(q){return 1-L(1-q)}}function Qa(L){return function(q){return .5*(q<.5?L(2*q):2-L(2-2*q))}}function Va(L){return L*L}function uo(L){return L*L*L}function qa(L){if(L<=0)return 0;if(L>=1)return 1;var q=L*L,Q=q*L;return 4*(L<.5?Q:3*(L-q)+Q-.75)}function Fo(L){return 1-Math.cos(L*He)}function wo(L){return Math.pow(2,10*(L-1))}function Bo(L){return 1-Math.sqrt(1-L*L)}function co(L){return L<.36363636363636365?7.5625*L*L:L<.7272727272727273?7.5625*(L-=.5454545454545454)*L+.75:L<.9090909090909091?7.5625*(L-=.8181818181818182)*L+.9375:7.5625*(L-=.9545454545454546)*L+.984375}function Ks(L,q){return q-=L,function(Q){return Math.round(L+q*Q)}}function Jo(L){var q,Q,ne,ce=[L.a,L.b],ye=[L.c,L.d],Le=rl(ce),Ie=Qo(ce,ye),je=rl(((q=ye)[0]+=(ne=-Ie)*(Q=ce)[0],q[1]+=ne*Q[1],q))||0;ce[0]*ye[1]<ye[0]*ce[1]&&(ce[0]*=-1,ce[1]*=-1,Le*=-1,Ie*=-1),this.rotate=(Le?Math.atan2(ce[1],ce[0]):Math.atan2(-ye[0],ye[1]))*Be,this.translate=[L.e,L.f],this.scale=[Le,je],this.skew=je?Math.atan2(Ie,je)*Be:0}function Qo(L,q){return L[0]*q[0]+L[1]*q[1]}function rl(L){var q=Math.sqrt(Qo(L,L));return q&&(L[0]/=q,L[1]/=q),q}o.ease=function(L){var q,Q=L.indexOf("-"),ne=Q>=0?L.slice(0,Q):L,ce=Q>=0?L.slice(Q+1):"in";return ne=bi.get(ne)||Ro,ce=$i.get(ce)||D,q=ce(ne.apply(null,T.call(arguments,1))),function(ye){return ye<=0?0:ye>=1?1:q(ye)}},o.interpolateHcl=function(L,q){L=o.hcl(L),q=o.hcl(q);var Q=L.h,ne=L.c,ce=L.l,ye=q.h-Q,Le=q.c-ne,Ie=q.l-ce;return isNaN(Le)&&(Le=0,ne=isNaN(ne)?q.c:ne),isNaN(ye)?(ye=0,Q=isNaN(Q)?q.h:Q):ye>180?ye-=360:ye<-180&&(ye+=360),function(je){return xt(Q+ye*je,ne+Le*je,ce+Ie*je)+""}},o.interpolateHsl=function(L,q){L=o.hsl(L),q=o.hsl(q);var Q=L.h,ne=L.s,ce=L.l,ye=q.h-Q,Le=q.s-ne,Ie=q.l-ce;return isNaN(Le)&&(Le=0,ne=isNaN(ne)?q.s:ne),isNaN(ye)?(ye=0,Q=isNaN(Q)?q.h:Q):ye>180?ye-=360:ye<-180&&(ye+=360),function(je){return gt(Q+ye*je,ne+Le*je,ce+Ie*je)+""}},o.interpolateLab=function(L,q){L=o.lab(L),q=o.lab(q);var Q=L.l,ne=L.a,ce=L.b,ye=q.l-Q,Le=q.a-ne,Ie=q.b-ce;return function(je){return Ut(Q+ye*je,ne+Le*je,ce+Ie*je)+""}},o.interpolateRound=Ks,o.transform=function(L){var q=h.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(Q){if(Q!=null){q.setAttribute("transform",Q);var ne=q.transform.baseVal.consolidate()}return new Jo(ne?ne.matrix:il)})(L)},Jo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var il={a:1,b:0,c:0,d:1,e:0,f:0};function fo(L){return L.length?L.pop()+",":""}function al(L,q){var Q=[],ne=[];return L=o.transform(L),q=o.transform(q),function(ce,ye,Le,Ie){if(ce[0]!==ye[0]||ce[1]!==ye[1]){var je=Le.push("translate(",null,",",null,")");Ie.push({i:je-4,x:Ja(ce[0],ye[0])},{i:je-2,x:Ja(ce[1],ye[1])})}else(ye[0]||ye[1])&&Le.push("translate("+ye+")")}(L.translate,q.translate,Q,ne),function(ce,ye,Le,Ie){ce!==ye?(ce-ye>180?ye+=360:ye-ce>180&&(ce+=360),Ie.push({i:Le.push(fo(Le)+"rotate(",null,")")-2,x:Ja(ce,ye)})):ye&&Le.push(fo(Le)+"rotate("+ye+")")}(L.rotate,q.rotate,Q,ne),function(ce,ye,Le,Ie){ce!==ye?Ie.push({i:Le.push(fo(Le)+"skewX(",null,")")-2,x:Ja(ce,ye)}):ye&&Le.push(fo(Le)+"skewX("+ye+")")}(L.skew,q.skew,Q,ne),function(ce,ye,Le,Ie){if(ce[0]!==ye[0]||ce[1]!==ye[1]){var je=Le.push(fo(Le)+"scale(",null,",",null,")");Ie.push({i:je-4,x:Ja(ce[0],ye[0])},{i:je-2,x:Ja(ce[1],ye[1])})}else ye[0]===1&&ye[1]===1||Le.push(fo(Le)+"scale("+ye+")")}(L.scale,q.scale,Q,ne),L=q=null,function(ce){for(var ye,Le=-1,Ie=ne.length;++Le<Ie;)Q[(ye=ne[Le]).i]=ye.x(ce);return Q.join("")}}function ol(L,q){return q=(q-=L=+L)||1/q,function(Q){return(Q-L)/q}}function sl(L,q){return q=(q-=L=+L)||1/q,function(Q){return Math.max(0,Math.min(1,(Q-L)/q))}}function $o(L){for(var q=L.source,Q=L.target,ne=function(Le,Ie){if(Le===Ie)return Le;for(var je=Ha(Le),qe=Ha(Ie),$e=je.pop(),lt=qe.pop(),ft=null;$e===lt;)ft=$e,$e=je.pop(),lt=qe.pop();return ft}(q,Q),ce=[q];q!==ne;)q=q.parent,ce.push(q);for(var ye=ce.length;Q!==ne;)ce.splice(ye,0,Q),Q=Q.parent;return ce}function Ha(L){for(var q=[],Q=L.parent;Q!=null;)q.push(L),L=Q,Q=Q.parent;return q.push(L),q}function To(L){L.fixed|=2}function No(L){L.fixed&=-7}function cs(L){L.fixed|=4,L.px=L.x,L.py=L.y}function jo(L){L.fixed&=-5}function Ga(L,q,Q){var ne=0,ce=0;if(L.charge=0,!L.leaf)for(var ye,Le=L.nodes,Ie=Le.length,je=-1;++je<Ie;)(ye=Le[je])!=null&&(Ga(ye,q,Q),L.charge+=ye.charge,ne+=ye.charge*ye.cx,ce+=ye.charge*ye.cy);if(L.point){L.leaf||(L.point.x+=Math.random()-.5,L.point.y+=Math.random()-.5);var qe=q*Q[L.point.index];L.charge+=L.pointCharge=qe,ne+=qe*L.point.x,ce+=qe*L.point.y}L.cx=ne/L.charge,L.cy=ce/L.charge}o.interpolateTransform=al,o.layout={},o.layout.bundle=function(){return function(L){for(var q=[],Q=-1,ne=L.length;++Q<ne;)q.push($o(L[Q]));return q}},o.layout.chord=function(){var L,q,Q,ne,ce,ye,Le,Ie={},je=0;function qe(){var lt,ft,_t,St,At,Ft={},Ot=[],Zt=o.range(ne),Ht=[];for(L=[],q=[],lt=0,St=-1;++St<ne;){for(ft=0,At=-1;++At<ne;)ft+=Q[St][At];Ot.push(ft),Ht.push(o.range(ne)),lt+=ft}for(ce&&Zt.sort(function(mr,Zn){return ce(Ot[mr],Ot[Zn])}),ye&&Ht.forEach(function(mr,Zn){mr.sort(function(pr,Ar){return ye(Q[Zn][pr],Q[Zn][Ar])})}),lt=(Dt-je*ne)/lt,ft=0,St=-1;++St<ne;){for(_t=ft,At=-1;++At<ne;){var Nt=Zt[St],gn=Ht[Nt][At],yn=Q[Nt][gn],Cn=ft,Dn=ft+=yn*lt;Ft[Nt+"-"+gn]={index:Nt,subindex:gn,startAngle:Cn,endAngle:Dn,value:yn}}q[Nt]={index:Nt,startAngle:_t,endAngle:ft,value:Ot[Nt]},ft+=je}for(St=-1;++St<ne;)for(At=St-1;++At<ne;){var Wn=Ft[St+"-"+At],sr=Ft[At+"-"+St];(Wn.value||sr.value)&&L.push(Wn.value<sr.value?{source:sr,target:Wn}:{source:Wn,target:sr})}Le&&$e()}function $e(){L.sort(function(lt,ft){return Le((lt.source.value+lt.target.value)/2,(ft.source.value+ft.target.value)/2)})}return Ie.matrix=function(lt){return arguments.length?(ne=(Q=lt)&&Q.length,L=q=null,Ie):Q},Ie.padding=function(lt){return arguments.length?(je=lt,L=q=null,Ie):je},Ie.sortGroups=function(lt){return arguments.length?(ce=lt,L=q=null,Ie):ce},Ie.sortSubgroups=function(lt){return arguments.length?(ye=lt,L=null,Ie):ye},Ie.sortChords=function(lt){return arguments.length?(Le=lt,L&&$e(),Ie):Le},Ie.chords=function(){return L||qe(),L},Ie.groups=function(){return q||qe(),q},Ie},o.layout.force=function(){var L,q,Q,ne,ce,ye,Le={},Ie=o.dispatch("start","tick","end"),je=[1,1],qe=.9,$e=da,lt=Uo,ft=-30,_t=ko,St=.1,At=.64,Ft=[],Ot=[];function Zt(Nt){return function(gn,yn,Cn,Dn){if(gn.point!==Nt){var Wn=gn.cx-Nt.x,sr=gn.cy-Nt.y,mr=Dn-yn,Zn=Wn*Wn+sr*sr;if(mr*mr/At<Zn){if(Zn<_t){var pr=gn.charge/Zn;Nt.px-=Wn*pr,Nt.py-=sr*pr}return!0}gn.point&&Zn&&Zn<_t&&(pr=gn.pointCharge/Zn,Nt.px-=Wn*pr,Nt.py-=sr*pr)}return!gn.charge}}function Ht(Nt){Nt.px=o.event.x,Nt.py=o.event.y,Le.resume()}return Le.tick=function(){if((Q*=.99)<.005)return L=null,Ie.end({type:"end",alpha:Q=0}),!0;var Nt,gn,yn,Cn,Dn,Wn,sr,mr,Zn,pr=Ft.length,Ar=Ot.length;for(gn=0;gn<Ar;++gn)Cn=(yn=Ot[gn]).source,(Wn=(mr=(Dn=yn.target).x-Cn.x)*mr+(Zn=Dn.y-Cn.y)*Zn)&&(mr*=Wn=Q*ce[gn]*((Wn=Math.sqrt(Wn))-ne[gn])/Wn,Zn*=Wn,Dn.x-=mr*(sr=Cn.weight+Dn.weight?Cn.weight/(Cn.weight+Dn.weight):.5),Dn.y-=Zn*sr,Cn.x+=mr*(sr=1-sr),Cn.y+=Zn*sr);if((sr=Q*St)&&(mr=je[0]/2,Zn=je[1]/2,gn=-1,sr))for(;++gn<pr;)(yn=Ft[gn]).x+=(mr-yn.x)*sr,yn.y+=(Zn-yn.y)*sr;if(ft)for(Ga(Nt=o.geom.quadtree(Ft),Q,ye),gn=-1;++gn<pr;)(yn=Ft[gn]).fixed||Nt.visit(Zt(yn));for(gn=-1;++gn<pr;)(yn=Ft[gn]).fixed?(yn.x=yn.px,yn.y=yn.py):(yn.x-=(yn.px-(yn.px=yn.x))*qe,yn.y-=(yn.py-(yn.py=yn.y))*qe);Ie.tick({type:"tick",alpha:Q})},Le.nodes=function(Nt){return arguments.length?(Ft=Nt,Le):Ft},Le.links=function(Nt){return arguments.length?(Ot=Nt,Le):Ot},Le.size=function(Nt){return arguments.length?(je=Nt,Le):je},Le.linkDistance=function(Nt){return arguments.length?($e=typeof Nt=="function"?Nt:+Nt,Le):$e},Le.distance=Le.linkDistance,Le.linkStrength=function(Nt){return arguments.length?(lt=typeof Nt=="function"?Nt:+Nt,Le):lt},Le.friction=function(Nt){return arguments.length?(qe=+Nt,Le):qe},Le.charge=function(Nt){return arguments.length?(ft=typeof Nt=="function"?Nt:+Nt,Le):ft},Le.chargeDistance=function(Nt){return arguments.length?(_t=Nt*Nt,Le):Math.sqrt(_t)},Le.gravity=function(Nt){return arguments.length?(St=+Nt,Le):St},Le.theta=function(Nt){return arguments.length?(At=Nt*Nt,Le):Math.sqrt(At)},Le.alpha=function(Nt){return arguments.length?(Nt=+Nt,Q?Nt>0?Q=Nt:(L.c=null,L.t=NaN,L=null,Ie.end({type:"end",alpha:Q=0})):Nt>0&&(Ie.start({type:"start",alpha:Q=Nt}),L=tn(Le.tick)),Le):Q},Le.start=function(){var Nt,gn,yn,Cn=Ft.length,Dn=Ot.length,Wn=je[0],sr=je[1];for(Nt=0;Nt<Cn;++Nt)(yn=Ft[Nt]).index=Nt,yn.weight=0;for(Nt=0;Nt<Dn;++Nt)typeof(yn=Ot[Nt]).source=="number"&&(yn.source=Ft[yn.source]),typeof yn.target=="number"&&(yn.target=Ft[yn.target]),++yn.source.weight,++yn.target.weight;for(Nt=0;Nt<Cn;++Nt)yn=Ft[Nt],isNaN(yn.x)&&(yn.x=mr("x",Wn)),isNaN(yn.y)&&(yn.y=mr("y",sr)),isNaN(yn.px)&&(yn.px=yn.x),isNaN(yn.py)&&(yn.py=yn.y);if(ne=[],typeof $e=="function")for(Nt=0;Nt<Dn;++Nt)ne[Nt]=+$e.call(this,Ot[Nt],Nt);else for(Nt=0;Nt<Dn;++Nt)ne[Nt]=$e;if(ce=[],typeof lt=="function")for(Nt=0;Nt<Dn;++Nt)ce[Nt]=+lt.call(this,Ot[Nt],Nt);else for(Nt=0;Nt<Dn;++Nt)ce[Nt]=lt;if(ye=[],typeof ft=="function")for(Nt=0;Nt<Cn;++Nt)ye[Nt]=+ft.call(this,Ft[Nt],Nt);else for(Nt=0;Nt<Cn;++Nt)ye[Nt]=ft;function mr(Zn,pr){if(!gn){for(gn=new Array(Cn),fr=0;fr<Cn;++fr)gn[fr]=[];for(fr=0;fr<Dn;++fr){var Ar=Ot[fr];gn[Ar.source.index].push(Ar.target),gn[Ar.target.index].push(Ar.source)}}for(var Fr,ar=gn[Nt],fr=-1,Er=ar.length;++fr<Er;)if(!isNaN(Fr=ar[fr][Zn]))return Fr;return Math.random()*pr}return Le.resume()},Le.resume=function(){return Le.alpha(.1)},Le.stop=function(){return Le.alpha(0)},Le.drag=function(){if(q||(q=o.behavior.drag().origin(D).on("dragstart.force",To).on("drag.force",Ht).on("dragend.force",No)),!arguments.length)return q;this.on("mouseover.force",cs).on("mouseout.force",jo).call(q)},o.rebind(Le,Ie,"on")};var da=20,Uo=1,ko=1/0;function Ao(L,q){return o.rebind(L,q,"sort","children","value"),L.nodes=L,L.links=hs,L}function Vo(L,q){for(var Q=[L];(L=Q.pop())!=null;)if(q(L),(ce=L.children)&&(ne=ce.length))for(var ne,ce;--ne>=0;)Q.push(ce[ne])}function ei(L,q){for(var Q=[L],ne=[];(L=Q.pop())!=null;)if(ne.push(L),(ye=L.children)&&(ce=ye.length))for(var ce,ye,Le=-1;++Le<ce;)Q.push(ye[Le]);for(;(L=ne.pop())!=null;)q(L)}function fs(L){return L.children}function xl(L){return L.value}function Rs(L,q){return q.value-L.value}function hs(L){return o.merge(L.map(function(q){return(q.children||[]).map(function(Q){return{source:q,target:Q}})}))}o.layout.hierarchy=function(){var L=Rs,q=fs,Q=xl;function ne(ce){var ye,Le=[ce],Ie=[];for(ce.depth=0;(ye=Le.pop())!=null;)if(Ie.push(ye),(qe=q.call(ne,ye,ye.depth))&&(je=qe.length)){for(var je,qe,$e;--je>=0;)Le.push($e=qe[je]),$e.parent=ye,$e.depth=ye.depth+1;Q&&(ye.value=0),ye.children=qe}else Q&&(ye.value=+Q.call(ne,ye,ye.depth)||0),delete ye.children;return ei(ce,function(lt){var ft,_t;L&&(ft=lt.children)&&ft.sort(L),Q&&(_t=lt.parent)&&(_t.value+=lt.value)}),Ie}return ne.sort=function(ce){return arguments.length?(L=ce,ne):L},ne.children=function(ce){return arguments.length?(q=ce,ne):q},ne.value=function(ce){return arguments.length?(Q=ce,ne):Q},ne.revalue=function(ce){return Q&&(Vo(ce,function(ye){ye.children&&(ye.value=0)}),ei(ce,function(ye){var Le;ye.children||(ye.value=+Q.call(ne,ye,ye.depth)||0),(Le=ye.parent)&&(Le.value+=ye.value)})),ce},ne},o.layout.partition=function(){var L=o.layout.hierarchy(),q=[1,1];function Q(ye,Le,Ie,je){var qe=ye.children;if(ye.x=Le,ye.y=ye.depth*je,ye.dx=Ie,ye.dy=je,qe&&($e=qe.length)){var $e,lt,ft,_t=-1;for(Ie=ye.value?Ie/ye.value:0;++_t<$e;)Q(lt=qe[_t],Le,ft=lt.value*Ie,je),Le+=ft}}function ne(ye){var Le=ye.children,Ie=0;if(Le&&(je=Le.length))for(var je,qe=-1;++qe<je;)Ie=Math.max(Ie,ne(Le[qe]));return 1+Ie}function ce(ye,Le){var Ie=L.call(this,ye,Le);return Q(Ie[0],0,q[0],q[1]/ne(Ie[0])),Ie}return ce.size=function(ye){return arguments.length?(q=ye,ce):q},Ao(ce,L)},o.layout.pie=function(){var L=Number,q=ll,Q=0,ne=Dt,ce=0;function ye(Le){var Ie,je=Le.length,qe=Le.map(function(Zt,Ht){return+L.call(ye,Zt,Ht)}),$e=+(typeof Q=="function"?Q.apply(this,arguments):Q),lt=(typeof ne=="function"?ne.apply(this,arguments):ne)-$e,ft=Math.min(Math.abs(lt)/je,+(typeof ce=="function"?ce.apply(this,arguments):ce)),_t=ft*(lt<0?-1:1),St=o.sum(qe),At=St?(lt-je*_t)/St:0,Ft=o.range(je),Ot=[];return q!=null&&Ft.sort(q===ll?function(Zt,Ht){return qe[Ht]-qe[Zt]}:function(Zt,Ht){return q(Le[Zt],Le[Ht])}),Ft.forEach(function(Zt){Ot[Zt]={data:Le[Zt],value:Ie=qe[Zt],startAngle:$e,endAngle:$e+=Ie*At+_t,padAngle:ft}}),Ot}return ye.value=function(Le){return arguments.length?(L=Le,ye):L},ye.sort=function(Le){return arguments.length?(q=Le,ye):q},ye.startAngle=function(Le){return arguments.length?(Q=Le,ye):Q},ye.endAngle=function(Le){return arguments.length?(ne=Le,ye):ne},ye.padAngle=function(Le){return arguments.length?(ce=Le,ye):ce},ye};var ll={};function bl(L){return L.x}function Fs(L){return L.y}function ul(L,q,Q){L.y0=q,L.y=Q}o.layout.stack=function(){var L=D,q=So,Q=$a,ne=ul,ce=bl,ye=Fs;function Le(Ie,je){if(!(ft=Ie.length))return Ie;var qe=Ie.map(function(Zt,Ht){return L.call(Le,Zt,Ht)}),$e=qe.map(function(Zt){return Zt.map(function(Ht,Nt){return[ce.call(Le,Ht,Nt),ye.call(Le,Ht,Nt)]})}),lt=q.call(Le,$e,je);qe=o.permute(qe,lt),$e=o.permute($e,lt);var ft,_t,St,At,Ft=Q.call(Le,$e,je),Ot=qe[0].length;for(St=0;St<Ot;++St)for(ne.call(Le,qe[0][St],At=Ft[St],$e[0][St][1]),_t=1;_t<ft;++_t)ne.call(Le,qe[_t][St],At+=$e[_t-1][St][1],$e[_t][St][1]);return Ie}return Le.values=function(Ie){return arguments.length?(L=Ie,Le):L},Le.order=function(Ie){return arguments.length?(q=typeof Ie=="function"?Ie:Mo.get(Ie)||So,Le):q},Le.offset=function(Ie){return arguments.length?(Q=typeof Ie=="function"?Ie:es.get(Ie)||$a,Le):Q},Le.x=function(Ie){return arguments.length?(ce=Ie,Le):ce},Le.y=function(Ie){return arguments.length?(ye=Ie,Le):ye},Le.out=function(Ie){return arguments.length?(ne=Ie,Le):ne},Le};var Mo=o.map({"inside-out":function(L){var q,Q,ne=L.length,ce=L.map(ps),ye=L.map(cl),Le=o.range(ne).sort(function(lt,ft){return ce[lt]-ce[ft]}),Ie=0,je=0,qe=[],$e=[];for(q=0;q<ne;++q)Q=Le[q],Ie<je?(Ie+=ye[Q],qe.push(Q)):(je+=ye[Q],$e.push(Q));return $e.reverse().concat(qe)},reverse:function(L){return o.range(L.length).reverse()},default:So}),es=o.map({silhouette:function(L){var q,Q,ne,ce=L.length,ye=L[0].length,Le=[],Ie=0,je=[];for(Q=0;Q<ye;++Q){for(q=0,ne=0;q<ce;q++)ne+=L[q][Q][1];ne>Ie&&(Ie=ne),Le.push(ne)}for(Q=0;Q<ye;++Q)je[Q]=(Ie-Le[Q])/2;return je},wiggle:function(L){var q,Q,ne,ce,ye,Le,Ie,je,qe,$e=L.length,lt=L[0],ft=lt.length,_t=[];for(_t[0]=je=qe=0,Q=1;Q<ft;++Q){for(q=0,ce=0;q<$e;++q)ce+=L[q][Q][1];for(q=0,ye=0,Ie=lt[Q][0]-lt[Q-1][0];q<$e;++q){for(ne=0,Le=(L[q][Q][1]-L[q][Q-1][1])/(2*Ie);ne<q;++ne)Le+=(L[ne][Q][1]-L[ne][Q-1][1])/Ie;ye+=Le*L[q][Q][1]}_t[Q]=je-=ce?ye/ce*Ie:0,je<qe&&(qe=je)}for(Q=0;Q<ft;++Q)_t[Q]-=qe;return _t},expand:function(L){var q,Q,ne,ce=L.length,ye=L[0].length,Le=1/ce,Ie=[];for(Q=0;Q<ye;++Q){for(q=0,ne=0;q<ce;q++)ne+=L[q][Q][1];if(ne)for(q=0;q<ce;q++)L[q][Q][1]/=ne;else for(q=0;q<ce;q++)L[q][Q][1]=Le}for(Q=0;Q<ye;++Q)Ie[Q]=0;return Ie},zero:$a});function So(L){return o.range(L.length)}function $a(L){for(var q=-1,Q=L[0].length,ne=[];++q<Q;)ne[q]=0;return ne}function ps(L){for(var q,Q=1,ne=0,ce=L[0][1],ye=L.length;Q<ye;++Q)(q=L[Q][1])>ce&&(ne=Q,ce=q);return ne}function cl(L){return L.reduce(ws,0)}function ws(L,q){return L+q[1]}function Bs(L,q){return Ra(L,Math.ceil(Math.log(q.length)/Math.LN2+1))}function Ra(L,q){for(var Q=-1,ne=+L[0],ce=(L[1]-ne)/q,ye=[];++Q<=q;)ye[Q]=ce*Q+ne;return ye}function Ns(L){return[o.min(L),o.max(L)]}function ht(L,q){return L.value-q.value}function kt(L,q){var Q=L._pack_next;L._pack_next=q,q._pack_prev=L,q._pack_next=Q,Q._pack_prev=q}function $t(L,q){L._pack_next=q,q._pack_prev=L}function bn(L,q){var Q=q.x-L.x,ne=q.y-L.y,ce=L.r+q.r;return .999*ce*ce>Q*Q+ne*ne}function qn(L){if((q=L.children)&&(je=q.length)){var q,Q,ne,ce,ye,Le,Ie,je,qe=1/0,$e=-1/0,lt=1/0,ft=-1/0;if(q.forEach(hr),(Q=q[0]).x=-Q.r,Q.y=0,Ht(Q),je>1&&((ne=q[1]).x=ne.r,ne.y=0,Ht(ne),je>2))for(gr(Q,ne,ce=q[2]),Ht(ce),kt(Q,ce),Q._pack_prev=ce,kt(ce,ne),ne=Q._pack_next,ye=3;ye<je;ye++){gr(Q,ne,ce=q[ye]);var _t=0,St=1,At=1;for(Le=ne._pack_next;Le!==ne;Le=Le._pack_next,St++)if(bn(Le,ce)){_t=1;break}if(_t==1)for(Ie=Q._pack_prev;Ie!==Le._pack_prev&&!bn(Ie,ce);Ie=Ie._pack_prev,At++);_t?(St<At||St==At&&ne.r<Q.r?$t(Q,ne=Le):$t(Q=Ie,ne),ye--):(kt(Q,ce),ne=ce,Ht(ce))}var Ft=(qe+$e)/2,Ot=(lt+ft)/2,Zt=0;for(ye=0;ye<je;ye++)(ce=q[ye]).x-=Ft,ce.y-=Ot,Zt=Math.max(Zt,ce.r+Math.sqrt(ce.x*ce.x+ce.y*ce.y));L.r=Zt,q.forEach(xr)}function Ht(Nt){qe=Math.min(Nt.x-Nt.r,qe),$e=Math.max(Nt.x+Nt.r,$e),lt=Math.min(Nt.y-Nt.r,lt),ft=Math.max(Nt.y+Nt.r,ft)}}function hr(L){L._pack_next=L._pack_prev=L}function xr(L){delete L._pack_next,delete L._pack_prev}function wr(L,q,Q,ne){var ce=L.children;if(L.x=q+=ne*L.x,L.y=Q+=ne*L.y,L.r*=ne,ce)for(var ye=-1,Le=ce.length;++ye<Le;)wr(ce[ye],q,Q,ne)}function gr(L,q,Q){var ne=L.r+Q.r,ce=q.x-L.x,ye=q.y-L.y;if(ne&&(ce||ye)){var Le=q.r+Q.r,Ie=ce*ce+ye*ye,je=.5+((ne*=ne)-(Le*=Le))/(2*Ie),qe=Math.sqrt(Math.max(0,2*Le*(ne+Ie)-(ne-=Ie)*ne-Le*Le))/(2*Ie);Q.x=L.x+je*ce+qe*ye,Q.y=L.y+je*ye-qe*ce}else Q.x=L.x+ne,Q.y=L.y}function jr(L,q){return L.parent==q.parent?1:2}function Wr(L){var q=L.children;return q.length?q[0]:L.t}function Kr(L){var q,Q=L.children;return(q=Q.length)?Q[q-1]:L.t}function Nr(L,q,Q){var ne=Q/(q.i-L.i);q.c-=ne,q.s+=Q,L.c+=ne,q.z+=Q,q.m+=Q}function Ir(L,q,Q){return L.a.parent===q.parent?L.a:Q}function $r(L){var q=L.children;return q&&q.length?$r(q[0]):L}function Ti(L){var q,Q=L.children;return Q&&(q=Q.length)?Ti(Q[q-1]):L}function _i(L){return{x:L.x,y:L.y,dx:L.dx,dy:L.dy}}function Oi(L,q){var Q=L.x+q[3],ne=L.y+q[0],ce=L.dx-q[1]-q[3],ye=L.dy-q[0]-q[2];return ce<0&&(Q+=ce/2,ce=0),ye<0&&(ne+=ye/2,ye=0),{x:Q,y:ne,dx:ce,dy:ye}}function ga(L){var q=L[0],Q=L[L.length-1];return q<Q?[q,Q]:[Q,q]}function sa(L){return L.rangeExtent?L.rangeExtent():ga(L.range())}function Yi(L,q,Q,ne){var ce=Q(L[0],L[1]),ye=ne(q[0],q[1]);return function(Le){return ye(ce(Le))}}function Wa(L,q){var Q,ne=0,ce=L.length-1,ye=L[ne],Le=L[ce];return Le<ye&&(Q=ne,ne=ce,ce=Q,Q=ye,ye=Le,Le=Q),L[ne]=q.floor(ye),L[ce]=q.ceil(Le),L}function eo(L){return L?{floor:function(q){return Math.floor(q/L)*L},ceil:function(q){return Math.ceil(q/L)*L}}:li}o.layout.histogram=function(){var L=!0,q=Number,Q=Ns,ne=Bs;function ce(ye,Le){for(var Ie,je,qe=[],$e=ye.map(q,this),lt=Q.call(this,$e,Le),ft=ne.call(this,lt,$e,Le),_t=(Le=-1,$e.length),St=ft.length-1,At=L?1:1/_t;++Le<St;)(Ie=qe[Le]=[]).dx=ft[Le+1]-(Ie.x=ft[Le]),Ie.y=0;if(St>0)for(Le=-1;++Le<_t;)(je=$e[Le])>=lt[0]&&je<=lt[1]&&((Ie=qe[o.bisect(ft,je,1,St)-1]).y+=At,Ie.push(ye[Le]));return qe}return ce.value=function(ye){return arguments.length?(q=ye,ce):q},ce.range=function(ye){return arguments.length?(Q=Hn(ye),ce):Q},ce.bins=function(ye){return arguments.length?(ne=typeof ye=="number"?function(Le){return Ra(Le,ye)}:Hn(ye),ce):ne},ce.frequency=function(ye){return arguments.length?(L=!!ye,ce):L},ce},o.layout.pack=function(){var L,q=o.layout.hierarchy().sort(ht),Q=0,ne=[1,1];function ce(ye,Le){var Ie=q.call(this,ye,Le),je=Ie[0],qe=ne[0],$e=ne[1],lt=L==null?Math.sqrt:typeof L=="function"?L:function(){return L};if(je.x=je.y=0,ei(je,function(_t){_t.r=+lt(_t.value)}),ei(je,qn),Q){var ft=Q*(L?1:Math.max(2*je.r/qe,2*je.r/$e))/2;ei(je,function(_t){_t.r+=ft}),ei(je,qn),ei(je,function(_t){_t.r-=ft})}return wr(je,qe/2,$e/2,L?1:1/Math.max(2*je.r/qe,2*je.r/$e)),Ie}return ce.size=function(ye){return arguments.length?(ne=ye,ce):ne},ce.radius=function(ye){return arguments.length?(L=ye==null||typeof ye=="function"?ye:+ye,ce):L},ce.padding=function(ye){return arguments.length?(Q=+ye,ce):Q},Ao(ce,q)},o.layout.tree=function(){var L=o.layout.hierarchy().sort(null).value(null),q=jr,Q=[1,1],ne=null;function ce(je,qe){var $e=L.call(this,je,qe),lt=$e[0],ft=function(Ht){for(var Nt,gn={A:null,children:[Ht]},yn=[gn];(Nt=yn.pop())!=null;)for(var Cn,Dn=Nt.children,Wn=0,sr=Dn.length;Wn<sr;++Wn)yn.push((Dn[Wn]=Cn={_:Dn[Wn],parent:Nt,children:(Cn=Dn[Wn].children)&&Cn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Wn}).a=Cn);return gn.children[0]}(lt);if(ei(ft,ye),ft.parent.m=-ft.z,Vo(ft,Le),ne)Vo(lt,Ie);else{var _t=lt,St=lt,At=lt;Vo(lt,function(Ht){Ht.x<_t.x&&(_t=Ht),Ht.x>St.x&&(St=Ht),Ht.depth>At.depth&&(At=Ht)});var Ft=q(_t,St)/2-_t.x,Ot=Q[0]/(St.x+q(St,_t)/2+Ft),Zt=Q[1]/(At.depth||1);Vo(lt,function(Ht){Ht.x=(Ht.x+Ft)*Ot,Ht.y=Ht.depth*Zt})}return $e}function ye(je){var qe=je.children,$e=je.parent.children,lt=je.i?$e[je.i-1]:null;if(qe.length){(function(_t){for(var St,At=0,Ft=0,Ot=_t.children,Zt=Ot.length;--Zt>=0;)(St=Ot[Zt]).z+=At,St.m+=At,At+=St.s+(Ft+=St.c)})(je);var ft=(qe[0].z+qe[qe.length-1].z)/2;lt?(je.z=lt.z+q(je._,lt._),je.m=je.z-ft):je.z=ft}else lt&&(je.z=lt.z+q(je._,lt._));je.parent.A=function(_t,St,At){if(St){for(var Ft,Ot=_t,Zt=_t,Ht=St,Nt=Ot.parent.children[0],gn=Ot.m,yn=Zt.m,Cn=Ht.m,Dn=Nt.m;Ht=Kr(Ht),Ot=Wr(Ot),Ht&&Ot;)Nt=Wr(Nt),(Zt=Kr(Zt)).a=_t,(Ft=Ht.z+Cn-Ot.z-gn+q(Ht._,Ot._))>0&&(Nr(Ir(Ht,_t,At),_t,Ft),gn+=Ft,yn+=Ft),Cn+=Ht.m,gn+=Ot.m,Dn+=Nt.m,yn+=Zt.m;Ht&&!Kr(Zt)&&(Zt.t=Ht,Zt.m+=Cn-yn),Ot&&!Wr(Nt)&&(Nt.t=Ot,Nt.m+=gn-Dn,At=_t)}return At}(je,lt,je.parent.A||$e[0])}function Le(je){je._.x=je.z+je.parent.m,je.m+=je.parent.m}function Ie(je){je.x*=Q[0],je.y=je.depth*Q[1]}return ce.separation=function(je){return arguments.length?(q=je,ce):q},ce.size=function(je){return arguments.length?(ne=(Q=je)==null?Ie:null,ce):ne?null:Q},ce.nodeSize=function(je){return arguments.length?(ne=(Q=je)==null?null:Ie,ce):ne?Q:null},Ao(ce,L)},o.layout.cluster=function(){var L=o.layout.hierarchy().sort(null).value(null),q=jr,Q=[1,1],ne=!1;function ce(ye,Le){var Ie,je=L.call(this,ye,Le),qe=je[0],$e=0;ei(qe,function(At){var Ft=At.children;Ft&&Ft.length?(At.x=function(Ot){return Ot.reduce(function(Zt,Ht){return Zt+Ht.x},0)/Ot.length}(Ft),At.y=function(Ot){return 1+o.max(Ot,function(Zt){return Zt.y})}(Ft)):(At.x=Ie?$e+=q(At,Ie):0,At.y=0,Ie=At)});var lt=$r(qe),ft=Ti(qe),_t=lt.x-q(lt,ft)/2,St=ft.x+q(ft,lt)/2;return ei(qe,ne?function(At){At.x=(At.x-qe.x)*Q[0],At.y=(qe.y-At.y)*Q[1]}:function(At){At.x=(At.x-_t)/(St-_t)*Q[0],At.y=(1-(qe.y?At.y/qe.y:1))*Q[1]}),je}return ce.separation=function(ye){return arguments.length?(q=ye,ce):q},ce.size=function(ye){return arguments.length?(ne=(Q=ye)==null,ce):ne?null:Q},ce.nodeSize=function(ye){return arguments.length?(ne=(Q=ye)!=null,ce):ne?Q:null},Ao(ce,L)},o.layout.treemap=function(){var L,q=o.layout.hierarchy(),Q=Math.round,ne=[1,1],ce=null,ye=_i,Le=!1,Ie="squarify",je=.5*(1+Math.sqrt(5));function qe(At,Ft){for(var Ot,Zt,Ht=-1,Nt=At.length;++Ht<Nt;)Zt=(Ot=At[Ht]).value*(Ft<0?0:Ft),Ot.area=isNaN(Zt)||Zt<=0?0:Zt}function $e(At){var Ft=At.children;if(Ft&&Ft.length){var Ot,Zt,Ht,Nt=ye(At),gn=[],yn=Ft.slice(),Cn=1/0,Dn=Ie==="slice"?Nt.dx:Ie==="dice"?Nt.dy:Ie==="slice-dice"?1&At.depth?Nt.dy:Nt.dx:Math.min(Nt.dx,Nt.dy);for(qe(yn,Nt.dx*Nt.dy/At.value),gn.area=0;(Ht=yn.length)>0;)gn.push(Ot=yn[Ht-1]),gn.area+=Ot.area,Ie!=="squarify"||(Zt=ft(gn,Dn))<=Cn?(yn.pop(),Cn=Zt):(gn.area-=gn.pop().area,_t(gn,Dn,Nt,!1),Dn=Math.min(Nt.dx,Nt.dy),gn.length=gn.area=0,Cn=1/0);gn.length&&(_t(gn,Dn,Nt,!0),gn.length=gn.area=0),Ft.forEach($e)}}function lt(At){var Ft=At.children;if(Ft&&Ft.length){var Ot,Zt=ye(At),Ht=Ft.slice(),Nt=[];for(qe(Ht,Zt.dx*Zt.dy/At.value),Nt.area=0;Ot=Ht.pop();)Nt.push(Ot),Nt.area+=Ot.area,Ot.z!=null&&(_t(Nt,Ot.z?Zt.dx:Zt.dy,Zt,!Ht.length),Nt.length=Nt.area=0);Ft.forEach(lt)}}function ft(At,Ft){for(var Ot,Zt=At.area,Ht=0,Nt=1/0,gn=-1,yn=At.length;++gn<yn;)(Ot=At[gn].area)&&(Ot<Nt&&(Nt=Ot),Ot>Ht&&(Ht=Ot));return Ft*=Ft,(Zt*=Zt)?Math.max(Ft*Ht*je/Zt,Zt/(Ft*Nt*je)):1/0}function _t(At,Ft,Ot,Zt){var Ht,Nt=-1,gn=At.length,yn=Ot.x,Cn=Ot.y,Dn=Ft?Q(At.area/Ft):0;if(Ft==Ot.dx){for((Zt||Dn>Ot.dy)&&(Dn=Ot.dy);++Nt<gn;)(Ht=At[Nt]).x=yn,Ht.y=Cn,Ht.dy=Dn,yn+=Ht.dx=Math.min(Ot.x+Ot.dx-yn,Dn?Q(Ht.area/Dn):0);Ht.z=!0,Ht.dx+=Ot.x+Ot.dx-yn,Ot.y+=Dn,Ot.dy-=Dn}else{for((Zt||Dn>Ot.dx)&&(Dn=Ot.dx);++Nt<gn;)(Ht=At[Nt]).x=yn,Ht.y=Cn,Ht.dx=Dn,Cn+=Ht.dy=Math.min(Ot.y+Ot.dy-Cn,Dn?Q(Ht.area/Dn):0);Ht.z=!1,Ht.dy+=Ot.y+Ot.dy-Cn,Ot.x+=Dn,Ot.dx-=Dn}}function St(At){var Ft=L||q(At),Ot=Ft[0];return Ot.x=Ot.y=0,Ot.value?(Ot.dx=ne[0],Ot.dy=ne[1]):Ot.dx=Ot.dy=0,L&&q.revalue(Ot),qe([Ot],Ot.dx*Ot.dy/Ot.value),(L?lt:$e)(Ot),Le&&(L=Ft),Ft}return St.size=function(At){return arguments.length?(ne=At,St):ne},St.padding=function(At){if(!arguments.length)return ce;function Ft(Zt){return Oi(Zt,At)}var Ot;return ye=(ce=At)==null?_i:(Ot=typeof At)=="function"?function(Zt){var Ht=At.call(St,Zt,Zt.depth);return Ht==null?_i(Zt):Oi(Zt,typeof Ht=="number"?[Ht,Ht,Ht,Ht]:Ht)}:(Ot==="number"&&(At=[At,At,At,At]),Ft),St},St.round=function(At){return arguments.length?(Q=At?Math.round:Number,St):Q!=Number},St.sticky=function(At){return arguments.length?(Le=At,L=null,St):Le},St.ratio=function(At){return arguments.length?(je=At,St):je},St.mode=function(At){return arguments.length?(Ie=At+"",St):Ie},Ao(St,q)},o.random={normal:function(L,q){var Q=arguments.length;return Q<2&&(q=1),Q<1&&(L=0),function(){var ne,ce,ye;do ye=(ne=2*Math.random()-1)*ne+(ce=2*Math.random()-1)*ce;while(!ye||ye>1);return L+q*ne*Math.sqrt(-2*Math.log(ye)/ye)}},logNormal:function(){var L=o.random.normal.apply(o,arguments);return function(){return Math.exp(L())}},bates:function(L){var q=o.random.irwinHall(L);return function(){return q()/L}},irwinHall:function(L){return function(){for(var q=0,Q=0;Q<L;Q++)q+=Math.random();return q}}},o.scale={};var li={floor:D,ceil:D};function Ta(L,q,Q,ne){var ce=[],ye=[],Le=0,Ie=Math.min(L.length,q.length)-1;for(L[Ie]<L[0]&&(L=L.slice().reverse(),q=q.slice().reverse());++Le<=Ie;)ce.push(Q(L[Le-1],L[Le])),ye.push(ne(q[Le-1],q[Le]));return function(je){var qe=o.bisect(L,je,1,Ie)-1;return ye[qe](ce[qe](je))}}function Xi(L,q,Q,ne){var ce,ye;function Le(){var je=Math.min(L.length,q.length)>2?Ta:Yi,qe=ne?sl:ol;return ce=je(L,q,qe,Q),ye=je(q,L,qe,so),Ie}function Ie(je){return ce(je)}return Ie.invert=function(je){return ye(je)},Ie.domain=function(je){return arguments.length?(L=je.map(Number),Le()):L},Ie.range=function(je){return arguments.length?(q=je,Le()):q},Ie.rangeRound=function(je){return Ie.range(je).interpolate(Ks)},Ie.clamp=function(je){return arguments.length?(ne=je,Le()):ne},Ie.interpolate=function(je){return arguments.length?(Q=je,Le()):Q},Ie.ticks=function(je){return ua(L,je)},Ie.tickFormat=function(je,qe){return d3_scale_linearTickFormat(L,je,qe)},Ie.nice=function(je){return la(L,je),Le()},Ie.copy=function(){return Xi(L,q,Q,ne)},Le()}function Ri(L,q){return o.rebind(L,q,"range","rangeRound","interpolate","clamp")}function la(L,q){return Wa(L,eo(wi(L,q)[2])),Wa(L,eo(wi(L,q)[2])),L}function wi(L,q){q==null&&(q=10);var Q=ga(L),ne=Q[1]-Q[0],ce=Math.pow(10,Math.floor(Math.log(ne/q)/Math.LN10)),ye=q/ne*ce;return ye<=.15?ce*=10:ye<=.35?ce*=5:ye<=.75&&(ce*=2),Q[0]=Math.ceil(Q[0]/ce)*ce,Q[1]=Math.floor(Q[1]/ce)*ce+.5*ce,Q[2]=ce,Q}function ua(L,q){return o.range.apply(o,wi(L,q))}function Eo(L,q,Q,ne){function ce(Ie){return(Q?Math.log(Ie<0?0:Ie):-Math.log(Ie>0?0:-Ie))/Math.log(q)}function ye(Ie){return Q?Math.pow(q,Ie):-Math.pow(q,-Ie)}function Le(Ie){return L(ce(Ie))}return Le.invert=function(Ie){return ye(L.invert(Ie))},Le.domain=function(Ie){return arguments.length?(Q=Ie[0]>=0,L.domain((ne=Ie.map(Number)).map(ce)),Le):ne},Le.base=function(Ie){return arguments.length?(q=+Ie,L.domain(ne.map(ce)),Le):q},Le.nice=function(){var Ie=Wa(ne.map(ce),Q?Math:ds);return L.domain(Ie),ne=Ie.map(ye),Le},Le.ticks=function(){var Ie=ga(ne),je=[],qe=Ie[0],$e=Ie[1],lt=Math.floor(ce(qe)),ft=Math.ceil(ce($e)),_t=q%1?2:q;if(isFinite(ft-lt)){if(Q){for(;lt<ft;lt++)for(var St=1;St<_t;St++)je.push(ye(lt)*St);je.push(ye(lt))}else for(je.push(ye(lt));lt++<ft;)for(St=_t-1;St>0;St--)je.push(ye(lt)*St);for(lt=0;je[lt]<qe;lt++);for(ft=je.length;je[ft-1]>$e;ft--);je=je.slice(lt,ft)}return je},Le.copy=function(){return Eo(L.copy(),q,Q,ne)},Ri(Le,L)}o.scale.linear=function(){return Xi([0,1],[0,1],so,!1)},o.scale.log=function(){return Eo(o.scale.linear().domain([0,1]),10,!0,[1,10])};var ds={floor:function(L){return-Math.ceil(-L)},ceil:function(L){return-Math.floor(-L)}};function ho(L,q,Q){var ne=ts(q),ce=ts(1/q);function ye(Le){return L(ne(Le))}return ye.invert=function(Le){return ce(L.invert(Le))},ye.domain=function(Le){return arguments.length?(L.domain((Q=Le.map(Number)).map(ne)),ye):Q},ye.ticks=function(Le){return ua(Q,Le)},ye.tickFormat=function(Le,Ie){return d3_scale_linearTickFormat(Q,Le,Ie)},ye.nice=function(Le){return ye.domain(la(Q,Le))},ye.exponent=function(Le){return arguments.length?(ne=ts(q=Le),ce=ts(1/q),L.domain(Q.map(ne)),ye):q},ye.copy=function(){return ho(L.copy(),q,Q)},Ri(ye,L)}function ts(L){return function(q){return q<0?-Math.pow(-q,L):Math.pow(q,L)}}function Ea(L,q){var Q,ne,ce;function ye(Ie){return ne[((Q.get(Ie)||(q.t==="range"?Q.set(Ie,L.push(Ie)):NaN))-1)%ne.length]}function Le(Ie,je){return o.range(L.length).map(function(qe){return Ie+je*qe})}return ye.domain=function(Ie){if(!arguments.length)return L;L=[],Q=new y;for(var je,qe=-1,$e=Ie.length;++qe<$e;)Q.has(je=Ie[qe])||Q.set(je,L.push(je));return ye[q.t].apply(ye,q.a)},ye.range=function(Ie){return arguments.length?(ne=Ie,ce=0,q={t:"range",a:arguments},ye):ne},ye.rangePoints=function(Ie,je){arguments.length<2&&(je=0);var qe=Ie[0],$e=Ie[1],lt=L.length<2?(qe=(qe+$e)/2,0):($e-qe)/(L.length-1+je);return ne=Le(qe+lt*je/2,lt),ce=0,q={t:"rangePoints",a:arguments},ye},ye.rangeRoundPoints=function(Ie,je){arguments.length<2&&(je=0);var qe=Ie[0],$e=Ie[1],lt=L.length<2?(qe=$e=Math.round((qe+$e)/2),0):($e-qe)/(L.length-1+je)|0;return ne=Le(qe+Math.round(lt*je/2+($e-qe-(L.length-1+je)*lt)/2),lt),ce=0,q={t:"rangeRoundPoints",a:arguments},ye},ye.rangeBands=function(Ie,je,qe){arguments.length<2&&(je=0),arguments.length<3&&(qe=je);var $e=Ie[1]<Ie[0],lt=Ie[$e-0],ft=(Ie[1-$e]-lt)/(L.length-je+2*qe);return ne=Le(lt+ft*qe,ft),$e&&ne.reverse(),ce=ft*(1-je),q={t:"rangeBands",a:arguments},ye},ye.rangeRoundBands=function(Ie,je,qe){arguments.length<2&&(je=0),arguments.length<3&&(qe=je);var $e=Ie[1]<Ie[0],lt=Ie[$e-0],ft=Ie[1-$e],_t=Math.floor((ft-lt)/(L.length-je+2*qe));return ne=Le(lt+Math.round((ft-lt-(L.length-je)*_t)/2),_t),$e&&ne.reverse(),ce=Math.round(_t*(1-je)),q={t:"rangeRoundBands",a:arguments},ye},ye.rangeBand=function(){return ce},ye.rangeExtent=function(){return ga(q.a[0])},ye.copy=function(){return Ea(L,q)},ye.domain(L)}o.scale.pow=function(){return ho(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return Ea([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(gs)},o.scale.category20=function(){return o.scale.ordinal().range(qo)},o.scale.category20b=function(){return o.scale.ordinal().range(to)},o.scale.category20c=function(){return o.scale.ordinal().range(no)};var gs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Xt),qo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Xt),to=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Xt),no=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Xt);function ki(L,q){var Q;function ne(){var ye=0,Le=q.length;for(Q=[];++ye<Le;)Q[ye-1]=o.quantile(L,ye/Le);return ce}function ce(ye){if(!isNaN(ye=+ye))return q[o.bisect(Q,ye)]}return ce.domain=function(ye){return arguments.length?(L=ye.map(d).filter(c).sort(u),ne()):L},ce.range=function(ye){return arguments.length?(q=ye,ne()):q},ce.quantiles=function(){return Q},ce.invertExtent=function(ye){return(ye=q.indexOf(ye))<0?[NaN,NaN]:[ye>0?Q[ye-1]:L[0],ye<Q.length?Q[ye]:L[L.length-1]]},ce.copy=function(){return ki(L,q)},ne()}function po(L,q,Q){var ne,ce;function ye(Ie){return Q[Math.max(0,Math.min(ce,Math.floor(ne*(Ie-L))))]}function Le(){return ne=Q.length/(q-L),ce=Q.length-1,ye}return ye.domain=function(Ie){return arguments.length?(L=+Ie[0],q=+Ie[Ie.length-1],Le()):[L,q]},ye.range=function(Ie){return arguments.length?(Q=Ie,Le()):Q},ye.invertExtent=function(Ie){return[Ie=(Ie=Q.indexOf(Ie))<0?NaN:Ie/ne+L,Ie+1/ne]},ye.copy=function(){return po(L,q,Q)},Le()}function Dr(L,q){function Q(ne){if(ne<=ne)return q[o.bisect(L,ne)]}return Q.domain=function(ne){return arguments.length?(L=ne,Q):L},Q.range=function(ne){return arguments.length?(q=ne,Q):q},Q.invertExtent=function(ne){return ne=q.indexOf(ne),[L[ne-1],L[ne]]},Q.copy=function(){return Dr(L,q)},Q}function js(L){function q(Q){return+Q}return q.invert=q,q.domain=q.range=function(Q){return arguments.length?(L=Q.map(q),q):L},q.ticks=function(Q){return ua(L,Q)},q.tickFormat=function(Q,ne){return d3_scale_linearTickFormat(L,Q,ne)},q.copy=function(){return js(L)},q}function fl(){return 0}o.scale.quantile=function(){return ki([],[])},o.scale.quantize=function(){return po(0,1,[0,1])},o.scale.threshold=function(){return Dr([.5],[0,1])},o.scale.identity=function(){return js([0,1])},o.svg={},o.svg.arc=function(){var L=rs,q=vs,Q=fl,ne=ns,ce=Ts,ye=kr,Le=Us;function Ie(){var qe=Math.max(0,+L.apply(this,arguments)),$e=Math.max(0,+q.apply(this,arguments)),lt=ce.apply(this,arguments)-He,ft=ye.apply(this,arguments)-He,_t=Math.abs(ft-lt),St=lt>ft?0:1;if($e<qe&&(At=$e,$e=qe,qe=At),_t>=Ct)return je($e,St)+(qe?je(qe,1-St):"")+"Z";var At,Ft,Ot,Zt,Ht,Nt,gn,yn,Cn,Dn,Wn,sr,mr=0,Zn=0,pr=[];if((Zt=(+Le.apply(this,arguments)||0)/2)&&(Ot=ne===ns?Math.sqrt(qe*qe+$e*$e):+ne.apply(this,arguments),St||(Zn*=-1),$e&&(Zn=Ge(Ot/$e*Math.sin(Zt))),qe&&(mr=Ge(Ot/qe*Math.sin(Zt)))),$e){Ht=$e*Math.cos(lt+Zn),Nt=$e*Math.sin(lt+Zn),gn=$e*Math.cos(ft-Zn),yn=$e*Math.sin(ft-Zn);var Ar=Math.abs(ft-lt-2*Zn)<=It?0:1;if(Zn&&Ho(Ht,Nt,gn,yn)===St^Ar){var Fr=(lt+ft)/2;Ht=$e*Math.cos(Fr),Nt=$e*Math.sin(Fr),gn=yn=null}}else Ht=Nt=0;if(qe){Cn=qe*Math.cos(ft-mr),Dn=qe*Math.sin(ft-mr),Wn=qe*Math.cos(lt+mr),sr=qe*Math.sin(lt+mr);var ar=Math.abs(lt-ft+2*mr)<=It?0:1;if(mr&&Ho(Cn,Dn,Wn,sr)===1-St^ar){var fr=(lt+ft)/2;Cn=qe*Math.cos(fr),Dn=qe*Math.sin(fr),Wn=sr=null}}else Cn=Dn=0;if(_t>Qe&&(At=Math.min(Math.abs($e-qe)/2,+Q.apply(this,arguments)))>.001){Ft=qe<$e^St?0:1;var Er=At,yr=At;if(_t<It){var zr=Wn==null?[Cn,Dn]:gn==null?[Ht,Nt]:Pt([Ht,Nt],[Wn,sr],[gn,yn],[Cn,Dn]),Vr=Ht-zr[0],Jr=Nt-zr[1],Qr=gn-zr[0],ri=yn-zr[1],ai=1/Math.sin(Math.acos((Vr*Qr+Jr*ri)/(Math.sqrt(Vr*Vr+Jr*Jr)*Math.sqrt(Qr*Qr+ri*ri)))/2),Mi=Math.sqrt(zr[0]*zr[0]+zr[1]*zr[1]);yr=Math.min(At,(qe-Mi)/(ai-1)),Er=Math.min(At,($e-Mi)/(ai+1))}if(gn!=null){var Vi=ra(Wn==null?[Cn,Dn]:[Wn,sr],[Ht,Nt],$e,Er,St),Aa=ra([gn,yn],[Cn,Dn],$e,Er,St);At===Er?pr.push("M",Vi[0],"A",Er,",",Er," 0 0,",Ft," ",Vi[1],"A",$e,",",$e," 0 ",1-St^Ho(Vi[1][0],Vi[1][1],Aa[1][0],Aa[1][1]),",",St," ",Aa[1],"A",Er,",",Er," 0 0,",Ft," ",Aa[0]):pr.push("M",Vi[0],"A",Er,",",Er," 0 1,",Ft," ",Aa[0])}else pr.push("M",Ht,",",Nt);if(Wn!=null){var ia=ra([Ht,Nt],[Wn,sr],qe,-yr,St),va=ra([Cn,Dn],gn==null?[Ht,Nt]:[gn,yn],qe,-yr,St);At===yr?pr.push("L",va[0],"A",yr,",",yr," 0 0,",Ft," ",va[1],"A",qe,",",qe," 0 ",St^Ho(va[1][0],va[1][1],ia[1][0],ia[1][1]),",",1-St," ",ia[1],"A",yr,",",yr," 0 0,",Ft," ",ia[0]):pr.push("L",va[0],"A",yr,",",yr," 0 0,",Ft," ",ia[0])}else pr.push("L",Cn,",",Dn)}else pr.push("M",Ht,",",Nt),gn!=null&&pr.push("A",$e,",",$e," 0 ",Ar,",",St," ",gn,",",yn),pr.push("L",Cn,",",Dn),Wn!=null&&pr.push("A",qe,",",qe," 0 ",ar,",",1-St," ",Wn,",",sr);return pr.push("Z"),pr.join("")}function je(qe,$e){return"M0,"+qe+"A"+qe+","+qe+" 0 1,"+$e+" 0,"+-qe+"A"+qe+","+qe+" 0 1,"+$e+" 0,"+qe}return Ie.innerRadius=function(qe){return arguments.length?(L=Hn(qe),Ie):L},Ie.outerRadius=function(qe){return arguments.length?(q=Hn(qe),Ie):q},Ie.cornerRadius=function(qe){return arguments.length?(Q=Hn(qe),Ie):Q},Ie.padRadius=function(qe){return arguments.length?(ne=qe==ns?ns:Hn(qe),Ie):ne},Ie.startAngle=function(qe){return arguments.length?(ce=Hn(qe),Ie):ce},Ie.endAngle=function(qe){return arguments.length?(ye=Hn(qe),Ie):ye},Ie.padAngle=function(qe){return arguments.length?(Le=Hn(qe),Ie):Le},Ie.centroid=function(){var qe=(+L.apply(this,arguments)+ +q.apply(this,arguments))/2,$e=(+ce.apply(this,arguments)+ +ye.apply(this,arguments))/2-He;return[Math.cos($e)*qe,Math.sin($e)*qe]},Ie};var ns="auto";function rs(L){return L.innerRadius}function vs(L){return L.outerRadius}function Ts(L){return L.startAngle}function kr(L){return L.endAngle}function Us(L){return L&&L.padAngle}function Ho(L,q,Q,ne){return(L-Q)*q-(q-ne)*L>0?0:1}function ra(L,q,Q,ne,ce){var ye=L[0]-q[0],Le=L[1]-q[1],Ie=(ce?ne:-ne)/Math.sqrt(ye*ye+Le*Le),je=Ie*Le,qe=-Ie*ye,$e=L[0]+je,lt=L[1]+qe,ft=q[0]+je,_t=q[1]+qe,St=($e+ft)/2,At=(lt+_t)/2,Ft=ft-$e,Ot=_t-lt,Zt=Ft*Ft+Ot*Ot,Ht=Q-ne,Nt=$e*_t-ft*lt,gn=(Ot<0?-1:1)*Math.sqrt(Math.max(0,Ht*Ht*Zt-Nt*Nt)),yn=(Nt*Ot-Ft*gn)/Zt,Cn=(-Nt*Ft-Ot*gn)/Zt,Dn=(Nt*Ot+Ft*gn)/Zt,Wn=(-Nt*Ft+Ot*gn)/Zt,sr=yn-St,mr=Cn-At,Zn=Dn-St,pr=Wn-At;return sr*sr+mr*mr>Zn*Zn+pr*pr&&(yn=Dn,Cn=Wn),[[yn-je,Cn-qe],[yn*Q/Ht,Cn*Q/Ht]]}function is(){return!0}function go(L){var q=Gn,Q=Rn,ne=is,ce=ka,ye=ce.key,Le=.7;function Ie(je){var qe,$e=[],lt=[],ft=-1,_t=je.length,St=Hn(q),At=Hn(Q);function Ft(){$e.push("M",ce(L(lt),Le))}for(;++ft<_t;)ne.call(this,qe=je[ft],ft)?lt.push([+St.call(this,qe,ft),+At.call(this,qe,ft)]):lt.length&&(Ft(),lt=[]);return lt.length&&Ft(),$e.length?$e.join(""):null}return Ie.x=function(je){return arguments.length?(q=je,Ie):q},Ie.y=function(je){return arguments.length?(Q=je,Ie):Q},Ie.defined=function(je){return arguments.length?(ne=je,Ie):ne},Ie.interpolate=function(je){return arguments.length?(ye=typeof je=="function"?ce=je:(ce=ro.get(je)||ka).key,Ie):ye},Ie.tension=function(je){return arguments.length?(Le=je,Ie):Le},Ie}o.svg.line=function(){return go(D)};var ro=o.map({linear:ka,"linear-closed":Lo,step:function(L){for(var q=0,Q=L.length,ne=L[0],ce=[ne[0],",",ne[1]];++q<Q;)ce.push("H",(ne[0]+(ne=L[q])[0])/2,"V",ne[1]);return Q>1&&ce.push("H",ne[0]),ce.join("")},"step-before":io,"step-after":Go,basis:oi,"basis-open":function(L){if(L.length<4)return ka(L);for(var q,Q=[],ne=-1,ce=L.length,ye=[0],Le=[0];++ne<3;)q=L[ne],ye.push(q[0]),Le.push(q[1]);for(Q.push(ca(Ca,ye)+","+ca(Ca,Le)),--ne;++ne<ce;)q=L[ne],ye.shift(),ye.push(q[0]),Le.shift(),Le.push(q[1]),ks(Q,ye,Le);return Q.join("")},"basis-closed":function(L){for(var q,Q,ne=-1,ce=L.length,ye=ce+4,Le=[],Ie=[];++ne<4;)Q=L[ne%ce],Le.push(Q[0]),Ie.push(Q[1]);for(q=[ca(Ca,Le),",",ca(Ca,Ie)],--ne;++ne<ye;)Q=L[ne%ce],Le.shift(),Le.push(Q[0]),Ie.shift(),Ie.push(Q[1]),ks(q,Le,Ie);return q.join("")},bundle:function(L,q){var Q=L.length-1;if(Q)for(var ne,ce,ye=L[0][0],Le=L[0][1],Ie=L[Q][0]-ye,je=L[Q][1]-Le,qe=-1;++qe<=Q;)ce=qe/Q,(ne=L[qe])[0]=q*ne[0]+(1-q)*(ye+ce*Ie),ne[1]=q*ne[1]+(1-q)*(Le+ce*je);return oi(L)},cardinal:function(L,q){return L.length<3?ka(L):L[0]+Vs(L,as(L,q))},"cardinal-open":function(L,q){return L.length<4?ka(L):L[1]+Vs(L.slice(1,-1),as(L,q))},"cardinal-closed":function(L,q){return L.length<3?Lo(L):L[0]+Vs((L.push(L[0]),L),as([L[L.length-2]].concat(L,[L[1]]),q))},monotone:function(L){return L.length<3?ka(L):L[0]+Vs(L,function(q){for(var Q,ne,ce,ye,Le=[],Ie=function($e){for(var lt=0,ft=$e.length-1,_t=[],St=$e[0],At=$e[1],Ft=_t[0]=As(St,At);++lt<ft;)_t[lt]=(Ft+(Ft=As(St=At,At=$e[lt+1])))/2;return _t[lt]=Ft,_t}(q),je=-1,qe=q.length-1;++je<qe;)Q=As(q[je],q[je+1]),v(Q)<Qe?Ie[je]=Ie[je+1]=0:(ye=(ne=Ie[je]/Q)*ne+(ce=Ie[je+1]/Q)*ce)>9&&(ye=3*Q/Math.sqrt(ye),Ie[je]=ye*ne,Ie[je+1]=ye*ce);for(je=-1;++je<=qe;)ye=(q[Math.min(qe,je+1)][0]-q[Math.max(0,je-1)][0])/(6*(1+Ie[je]*Ie[je])),Le.push([ye||0,Ie[je]*ye||0]);return Le}(L))}});function ka(L){return L.length>1?L.join("L"):L+"Z"}function Lo(L){return L.join("L")+"Z"}function io(L){for(var q=0,Q=L.length,ne=L[0],ce=[ne[0],",",ne[1]];++q<Q;)ce.push("V",(ne=L[q])[1],"H",ne[0]);return ce.join("")}function Go(L){for(var q=0,Q=L.length,ne=L[0],ce=[ne[0],",",ne[1]];++q<Q;)ce.push("H",(ne=L[q])[0],"V",ne[1]);return ce.join("")}function Vs(L,q){if(q.length<1||L.length!=q.length&&L.length!=q.length+2)return ka(L);var Q=L.length!=q.length,ne="",ce=L[0],ye=L[1],Le=q[0],Ie=Le,je=1;if(Q&&(ne+="Q"+(ye[0]-2*Le[0]/3)+","+(ye[1]-2*Le[1]/3)+","+ye[0]+","+ye[1],ce=L[1],je=2),q.length>1){Ie=q[1],ye=L[je],je++,ne+="C"+(ce[0]+Le[0])+","+(ce[1]+Le[1])+","+(ye[0]-Ie[0])+","+(ye[1]-Ie[1])+","+ye[0]+","+ye[1];for(var qe=2;qe<q.length;qe++,je++)ye=L[je],Ie=q[qe],ne+="S"+(ye[0]-Ie[0])+","+(ye[1]-Ie[1])+","+ye[0]+","+ye[1]}if(Q){var $e=L[je];ne+="Q"+(ye[0]+2*Ie[0]/3)+","+(ye[1]+2*Ie[1]/3)+","+$e[0]+","+$e[1]}return ne}function as(L,q){for(var Q,ne=[],ce=(1-q)/2,ye=L[0],Le=L[1],Ie=1,je=L.length;++Ie<je;)Q=ye,ye=Le,Le=L[Ie],ne.push([ce*(Le[0]-Q[0]),ce*(Le[1]-Q[1])]);return ne}function oi(L){if(L.length<3)return ka(L);var q=1,Q=L.length,ne=L[0],ce=ne[0],ye=ne[1],Le=[ce,ce,ce,(ne=L[1])[0]],Ie=[ye,ye,ye,ne[1]],je=[ce,",",ye,"L",ca(Ca,Le),",",ca(Ca,Ie)];for(L.push(L[Q-1]);++q<=Q;)ne=L[q],Le.shift(),Le.push(ne[0]),Ie.shift(),Ie.push(ne[1]),ks(je,Le,Ie);return L.pop(),je.push("L",ne),je.join("")}function ca(L,q){return L[0]*q[0]+L[1]*q[1]+L[2]*q[2]+L[3]*q[3]}ro.forEach(function(L,q){q.key=L,q.closed=/-closed$/.test(L)});var La=[0,2/3,1/3,0],Co=[0,1/3,2/3,0],Ca=[0,1/6,2/3,1/6];function ks(L,q,Q){L.push("C",ca(La,q),",",ca(La,Q),",",ca(Co,q),",",ca(Co,Q),",",ca(Ca,q),",",ca(Ca,Q))}function As(L,q){return(q[1]-L[1])/(q[0]-L[0])}function Pa(L){for(var q,Q,ne,ce=-1,ye=L.length;++ce<ye;)Q=(q=L[ce])[0],ne=q[1]-He,q[0]=Q*Math.cos(ne),q[1]=Q*Math.sin(ne);return L}function ii(L){var q=Gn,Q=Gn,ne=0,ce=Rn,ye=is,Le=ka,Ie=Le.key,je=Le,qe="L",$e=.7;function lt(ft){var _t,St,At,Ft=[],Ot=[],Zt=[],Ht=-1,Nt=ft.length,gn=Hn(q),yn=Hn(ne),Cn=q===Q?function(){return St}:Hn(Q),Dn=ne===ce?function(){return At}:Hn(ce);function Wn(){Ft.push("M",Le(L(Zt),$e),qe,je(L(Ot.reverse()),$e),"Z")}for(;++Ht<Nt;)ye.call(this,_t=ft[Ht],Ht)?(Ot.push([St=+gn.call(this,_t,Ht),At=+yn.call(this,_t,Ht)]),Zt.push([+Cn.call(this,_t,Ht),+Dn.call(this,_t,Ht)])):Ot.length&&(Wn(),Ot=[],Zt=[]);return Ot.length&&Wn(),Ft.length?Ft.join(""):null}return lt.x=function(ft){return arguments.length?(q=Q=ft,lt):Q},lt.x0=function(ft){return arguments.length?(q=ft,lt):q},lt.x1=function(ft){return arguments.length?(Q=ft,lt):Q},lt.y=function(ft){return arguments.length?(ne=ce=ft,lt):ce},lt.y0=function(ft){return arguments.length?(ne=ft,lt):ne},lt.y1=function(ft){return arguments.length?(ce=ft,lt):ce},lt.defined=function(ft){return arguments.length?(ye=ft,lt):ye},lt.interpolate=function(ft){return arguments.length?(Ie=typeof ft=="function"?Le=ft:(Le=ro.get(ft)||ka).key,je=Le.reverse||Le,qe=Le.closed?"M":"L",lt):Ie},lt.tension=function(ft){return arguments.length?($e=ft,lt):$e},lt}function Po(L){return L.source}function ms(L){return L.target}function vo(L){return L.radius}function Ms(L){return[L.x,L.y]}function Ss(){return 64}function mo(){return"circle"}function Ai(L){var q=Math.sqrt(L/It);return"M0,"+q+"A"+q+","+q+" 0 1,1 0,"+-q+"A"+q+","+q+" 0 1,1 0,"+q+"Z"}o.svg.line.radial=function(){var L=go(Pa);return L.radius=L.x,delete L.x,L.angle=L.y,delete L.y,L},io.reverse=Go,Go.reverse=io,o.svg.area=function(){return ii(D)},o.svg.area.radial=function(){var L=ii(Pa);return L.radius=L.x,delete L.x,L.innerRadius=L.x0,delete L.x0,L.outerRadius=L.x1,delete L.x1,L.angle=L.y,delete L.y,L.startAngle=L.y0,delete L.y0,L.endAngle=L.y1,delete L.y1,L},o.svg.chord=function(){var L=Po,q=ms,Q=vo,ne=Ts,ce=kr;function ye(qe,$e){var lt,ft,_t=Le(this,L,qe,$e),St=Le(this,q,qe,$e);return"M"+_t.p0+Ie(_t.r,_t.p1,_t.a1-_t.a0)+(ft=St,((lt=_t).a0==ft.a0&&lt.a1==ft.a1?je(_t.r,_t.p1,_t.r,_t.p0):je(_t.r,_t.p1,St.r,St.p0)+Ie(St.r,St.p1,St.a1-St.a0)+je(St.r,St.p1,_t.r,_t.p0))+"Z")}function Le(qe,$e,lt,ft){var _t=$e.call(qe,lt,ft),St=Q.call(qe,_t,ft),At=ne.call(qe,_t,ft)-He,Ft=ce.call(qe,_t,ft)-He;return{r:St,a0:At,a1:Ft,p0:[St*Math.cos(At),St*Math.sin(At)],p1:[St*Math.cos(Ft),St*Math.sin(Ft)]}}function Ie(qe,$e,lt){return"A"+qe+","+qe+" 0 "+ +(lt>It)+",1 "+$e}function je(qe,$e,lt,ft){return"Q 0,0 "+ft}return ye.radius=function(qe){return arguments.length?(Q=Hn(qe),ye):Q},ye.source=function(qe){return arguments.length?(L=Hn(qe),ye):L},ye.target=function(qe){return arguments.length?(q=Hn(qe),ye):q},ye.startAngle=function(qe){return arguments.length?(ne=Hn(qe),ye):ne},ye.endAngle=function(qe){return arguments.length?(ce=Hn(qe),ye):ce},ye},o.svg.diagonal=function(){var L=Po,q=ms,Q=Ms;function ne(ce,ye){var Le=L.call(this,ce,ye),Ie=q.call(this,ce,ye),je=(Le.y+Ie.y)/2,qe=[Le,{x:Le.x,y:je},{x:Ie.x,y:je},Ie];return"M"+(qe=qe.map(Q))[0]+"C"+qe[1]+" "+qe[2]+" "+qe[3]}return ne.source=function(ce){return arguments.length?(L=Hn(ce),ne):L},ne.target=function(ce){return arguments.length?(q=Hn(ce),ne):q},ne.projection=function(ce){return arguments.length?(Q=ce,ne):Q},ne},o.svg.diagonal.radial=function(){var L=o.svg.diagonal(),q=Ms,Q=L.projection;return L.projection=function(ne){return arguments.length?Q(function(ce){return function(){var ye=ce.apply(this,arguments),Le=ye[0],Ie=ye[1]-He;return[Le*Math.cos(Ie),Le*Math.sin(Ie)]}}(q=ne)):q},L},o.svg.symbol=function(){var L=mo,q=Ss;function Q(ne,ce){return(ys.get(L.call(this,ne,ce))||Ai)(q.call(this,ne,ce))}return Q.type=function(ne){return arguments.length?(L=Hn(ne),Q):L},Q.size=function(ne){return arguments.length?(q=Hn(ne),Q):q},Q};var ys=o.map({circle:Ai,cross:function(L){var q=Math.sqrt(L/5)/2;return"M"+-3*q+","+-q+"H"+-q+"V"+-3*q+"H"+q+"V"+-q+"H"+3*q+"V"+q+"H"+q+"V"+3*q+"H"+-q+"V"+q+"H"+-3*q+"Z"},diamond:function(L){var q=Math.sqrt(L/(2*Hr)),Q=q*Hr;return"M0,"+-q+"L"+Q+",0 0,"+q+" "+-Q+",0Z"},square:function(L){var q=Math.sqrt(L)/2;return"M"+-q+","+-q+"L"+q+","+-q+" "+q+","+q+" "+-q+","+q+"Z"},"triangle-down":function(L){var q=Math.sqrt(L/Rr),Q=q*Rr/2;return"M0,"+Q+"L"+q+","+-Q+" "+-q+","+-Q+"Z"},"triangle-up":function(L){var q=Math.sqrt(L/Rr),Q=q*Rr/2;return"M0,"+-Q+"L"+q+","+Q+" "+-q+","+Q+"Z"}});o.svg.symbolTypes=ys.keys();var Rr=Math.sqrt(3),Hr=Math.tan(30*We);me.transition=function(L){for(var q,Q,ne=Zi||++_l,ce=Li(L),ye=[],Le=Io||{time:Date.now(),ease:qa,delay:0,duration:250},Ie=-1,je=this.length;++Ie<je;){ye.push(q=[]);for(var qe=this[Ie],$e=-1,lt=qe.length;++$e<lt;)(Q=qe[$e])&&Fa(Q,$e,ce,ne,Le),q.push(Q)}return Wo(ye,ce,ne)},me.interrupt=function(L){return this.each(L==null?Ya:Oo(Li(L)))};var Ya=Oo(Li());function Oo(L){return function(){var q,Q,ne;(q=this[L])&&(ne=q[Q=q.active])&&(ne.timer.c=null,ne.timer.t=NaN,--q.count?delete q[Q]:delete this[L],q.active+=.5,ne.event&&ne.event.interrupt.call(this,this.__data__,ne.index))}}function Wo(L,q,Q){return $(L,vi),L.namespace=q,L.id=Q,L}var Zi,Io,vi=[],_l=0;function Xa(L,q,Q,ne){var ce=L.id,ye=L.namespace;return we(L,typeof Q=="function"?function(Le,Ie,je){Le[ye][ce].tween.set(q,ne(Q.call(Le,Le.__data__,Ie,je)))}:(Q=ne(Q),function(Le){Le[ye][ce].tween.set(q,Q)}))}function yi(L){return L==null&&(L=""),function(){this.textContent=L}}function Li(L){return L==null?"__transition__":"__transition_"+L+"__"}function Fa(L,q,Q,ne,ce){var ye,Le,Ie,je,qe,$e=L[Q]||(L[Q]={active:0,count:0}),lt=$e[ne];function ft(St){var At=$e.active,Ft=$e[At];for(var Ot in Ft&&(Ft.timer.c=null,Ft.timer.t=NaN,--$e.count,delete $e[At],Ft.event&&Ft.event.interrupt.call(L,L.__data__,Ft.index)),$e)if(+Ot<ne){var Zt=$e[Ot];Zt.timer.c=null,Zt.timer.t=NaN,--$e.count,delete $e[Ot]}Le.c=_t,tn(function(){return Le.c&&_t(St||1)&&(Le.c=null,Le.t=NaN),1},0,ye),$e.active=ne,lt.event&&lt.event.start.call(L,L.__data__,q),qe=[],lt.tween.forEach(function(Ht,Nt){(Nt=Nt.call(L,L.__data__,q))&&qe.push(Nt)}),je=lt.ease,Ie=lt.duration}function _t(St){for(var At=St/Ie,Ft=je(At),Ot=qe.length;Ot>0;)qe[--Ot].call(L,Ft);if(At>=1)return lt.event&&lt.event.end.call(L,L.__data__,q),--$e.count?delete $e[ne]:delete L[Q],1}lt||(ye=ce.time,Le=tn(function(St){var At=lt.delay;if(Le.t=At+ye,At<=St)return ft(St-At);Le.c=ft},0,ye),lt=$e[ne]={tween:new y,time:ye,timer:Le,delay:ce.delay,duration:ce.duration,ease:ce.ease,index:q},ce=null,++$e.count)}vi.call=me.call,vi.empty=me.empty,vi.node=me.node,vi.size=me.size,o.transition=function(L,q){return L&&L.transition?Zi?L.transition(q):L:o.selection().transition(L)},o.transition.prototype=vi,vi.select=function(L){var q,Q,ne,ce=this.id,ye=this.namespace,Le=[];L=be(L);for(var Ie=-1,je=this.length;++Ie<je;){Le.push(q=[]);for(var qe=this[Ie],$e=-1,lt=qe.length;++$e<lt;)(ne=qe[$e])&&(Q=L.call(ne,ne.__data__,$e,Ie))?("__data__"in ne&&(Q.__data__=ne.__data__),Fa(Q,$e,ye,ce,ne[ye][ce]),q.push(Q)):q.push(null)}return Wo(Le,ye,ce)},vi.selectAll=function(L){var q,Q,ne,ce,ye,Le=this.id,Ie=this.namespace,je=[];L=ge(L);for(var qe=-1,$e=this.length;++qe<$e;)for(var lt=this[qe],ft=-1,_t=lt.length;++ft<_t;)if(ne=lt[ft]){ye=ne[Ie][Le],Q=L.call(ne,ne.__data__,ft,qe),je.push(q=[]);for(var St=-1,At=Q.length;++St<At;)(ce=Q[St])&&Fa(ce,St,Ie,Le,ye),q.push(ce)}return Wo(je,Ie,Le)},vi.filter=function(L){var q,Q,ne=[];typeof L!="function"&&(L=fe(L));for(var ce=0,ye=this.length;ce<ye;ce++){ne.push(q=[]);for(var Le,Ie=0,je=(Le=this[ce]).length;Ie<je;Ie++)(Q=Le[Ie])&&L.call(Q,Q.__data__,Ie,ce)&&q.push(Q)}return Wo(ne,this.namespace,this.id)},vi.tween=function(L,q){var Q=this.id,ne=this.namespace;return arguments.length<2?this.node()[ne][Q].tween.get(L):we(this,q==null?function(ce){ce[ne][Q].tween.remove(L)}:function(ce){ce[ne][Q].tween.set(L,q)})},vi.attr=function(L,q){if(arguments.length<2){for(q in L)this.attr(q,L[q]);return this}var Q=L=="transform"?al:so,ne=o.ns.qualify(L);function ce(){this.removeAttribute(ne)}function ye(){this.removeAttributeNS(ne.space,ne.local)}return Xa(this,"attr."+L,q,ne.local?function(Le){return Le==null?ye:(Le+="",function(){var Ie,je=this.getAttributeNS(ne.space,ne.local);return je!==Le&&(Ie=Q(je,Le),function(qe){this.setAttributeNS(ne.space,ne.local,Ie(qe))})})}:function(Le){return Le==null?ce:(Le+="",function(){var Ie,je=this.getAttribute(ne);return je!==Le&&(Ie=Q(je,Le),function(qe){this.setAttribute(ne,Ie(qe))})})})},vi.attrTween=function(L,q){var Q=o.ns.qualify(L);return this.tween("attr."+L,Q.local?function(ne,ce){var ye=q.call(this,ne,ce,this.getAttributeNS(Q.space,Q.local));return ye&&function(Le){this.setAttributeNS(Q.space,Q.local,ye(Le))}}:function(ne,ce){var ye=q.call(this,ne,ce,this.getAttribute(Q));return ye&&function(Le){this.setAttribute(Q,ye(Le))}})},vi.style=function(L,q,Q){var ne=arguments.length;if(ne<3){if(typeof L!="string"){for(Q in ne<2&&(q=""),L)this.style(Q,L[Q],q);return this}Q=""}function ce(){this.style.removeProperty(L)}return Xa(this,"style."+L,q,function(ye){return ye==null?ce:(ye+="",function(){var Le,Ie=t(this).getComputedStyle(this,null).getPropertyValue(L);return Ie!==ye&&(Le=so(Ie,ye),function(je){this.style.setProperty(L,Le(je),Q)})})})},vi.styleTween=function(L,q,Q){return arguments.length<3&&(Q=""),this.tween("style."+L,function(ne,ce){var ye=q.call(this,ne,ce,t(this).getComputedStyle(this,null).getPropertyValue(L));return ye&&function(Le){this.style.setProperty(L,ye(Le),Q)}})},vi.text=function(L){return Xa(this,"text",L,yi)},vi.remove=function(){var L=this.namespace;return this.each("end.transition",function(){var q;this[L].count<2&&(q=this.parentNode)&&q.removeChild(this)})},vi.ease=function(L){var q=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][q].ease:(typeof L!="function"&&(L=o.ease.apply(o,arguments)),we(this,function(ne){ne[Q][q].ease=L}))},vi.delay=function(L){var q=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][q].delay:we(this,typeof L=="function"?function(ne,ce,ye){ne[Q][q].delay=+L.call(ne,ne.__data__,ce,ye)}:(L=+L,function(ne){ne[Q][q].delay=L}))},vi.duration=function(L){var q=this.id,Q=this.namespace;return arguments.length<1?this.node()[Q][q].duration:we(this,typeof L=="function"?function(ne,ce,ye){ne[Q][q].duration=Math.max(1,L.call(ne,ne.__data__,ce,ye))}:(L=Math.max(1,L),function(ne){ne[Q][q].duration=L}))},vi.each=function(L,q){var Q=this.id,ne=this.namespace;if(arguments.length<2){var ce=Io,ye=Zi;try{Zi=Q,we(this,function(Le,Ie,je){Io=Le[ne][Q],L.call(Le,Le.__data__,Ie,je)})}finally{Io=ce,Zi=ye}}else we(this,function(Le){var Ie=Le[ne][Q];(Ie.event||(Ie.event=o.dispatch("start","end","interrupt"))).on(L,q)});return this},vi.transition=function(){for(var L,q,Q,ne=this.id,ce=++_l,ye=this.namespace,Le=[],Ie=0,je=this.length;Ie<je;Ie++){Le.push(L=[]);for(var qe,$e=0,lt=(qe=this[Ie]).length;$e<lt;$e++)(q=qe[$e])&&Fa(q,$e,ye,ce,{time:(Q=q[ye][ne]).time,ease:Q.ease,delay:Q.delay+Q.duration,duration:Q.duration}),L.push(q)}return Wo(Le,ye,ce)},o.svg.axis=function(){var L,q=o.scale.linear(),Q=os,ne=6,ce=6,ye=3,Le=[10],Ie=null;function je(qe){qe.each(function(){var $e,lt=o.select(this),ft=this.__chart__||q,_t=this.__chart__=q.copy(),St=Ie==null?_t.ticks?_t.ticks.apply(_t,Le):_t.domain():Ie,At=L==null?_t.tickFormat?_t.tickFormat.apply(_t,Le):D:L,Ft=lt.selectAll(".tick").data(St,_t),Ot=Ft.enter().insert("g",".domain").attr("class","tick").style("opacity",Qe),Zt=o.transition(Ft.exit()).style("opacity",Qe).remove(),Ht=o.transition(Ft.order()).style("opacity",1),Nt=Math.max(ne,0)+ye,gn=sa(_t),yn=lt.selectAll(".domain").data([0]),Cn=(yn.enter().append("path").attr("class","domain"),o.transition(yn));Ot.append("line"),Ot.append("text");var Dn,Wn,sr,mr,Zn=Ot.select("line"),pr=Ht.select("line"),Ar=Ft.select("text").text(At),Fr=Ot.select("text"),ar=Ht.select("text"),fr=Q==="top"||Q==="left"?-1:1;if(Q==="bottom"||Q==="top"?($e=Xe,Dn="x",sr="y",Wn="x2",mr="y2",Ar.attr("dy",fr<0?"0em":".71em").style("text-anchor","middle"),Cn.attr("d","M"+gn[0]+","+fr*ce+"V0H"+gn[1]+"V"+fr*ce)):($e=Je,Dn="y",sr="x",Wn="y2",mr="x2",Ar.attr("dy",".32em").style("text-anchor",fr<0?"end":"start"),Cn.attr("d","M"+fr*ce+","+gn[0]+"H0V"+gn[1]+"H"+fr*ce)),Zn.attr(mr,fr*ne),Fr.attr(sr,fr*Nt),pr.attr(Wn,0).attr(mr,fr*ne),ar.attr(Dn,0).attr(sr,fr*Nt),_t.rangeBand){var Er=_t,yr=Er.rangeBand()/2;ft=_t=function(zr){return Er(zr)+yr}}else ft.rangeBand?ft=_t:Zt.call($e,_t,ft);Ot.call($e,ft,_t),Ht.call($e,_t,_t)})}return je.scale=function(qe){return arguments.length?(q=qe,je):q},je.orient=function(qe){return arguments.length?(Q=qe in hl?qe+"":os,je):Q},je.ticks=function(){return arguments.length?(Le=b(arguments),je):Le},je.tickValues=function(qe){return arguments.length?(Ie=qe,je):Ie},je.tickFormat=function(qe){return arguments.length?(L=qe,je):L},je.tickSize=function(qe){var $e=arguments.length;return $e?(ne=+qe,ce=+arguments[$e-1],je):ne},je.innerTickSize=function(qe){return arguments.length?(ne=+qe,je):ne},je.outerTickSize=function(qe){return arguments.length?(ce=+qe,je):ce},je.tickPadding=function(qe){return arguments.length?(ye=+qe,je):ye},je.tickSubdivide=function(){return arguments.length&&je},je};var os="bottom",hl={top:1,right:1,bottom:1,left:1};function Xe(L,q,Q){L.attr("transform",function(ne){var ce=q(ne);return"translate("+(isFinite(ce)?ce:Q(ne))+",0)"})}function Je(L,q,Q){L.attr("transform",function(ne){var ce=q(ne);return"translate(0,"+(isFinite(ce)?ce:Q(ne))+")"})}o.svg.brush=function(){var L,q,Q=X($e,"brushstart","brush","brushend"),ne=null,ce=null,ye=[0,0],Le=[0,0],Ie=!0,je=!0,qe=B[0];function $e(At){At.each(function(){var Ft=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",St).on("touchstart.brush",St),Ot=Ft.selectAll(".background").data([0]);Ot.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ft.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Zt=Ft.selectAll(".resize").data(qe,D);Zt.exit().remove(),Zt.enter().append("g").attr("class",function(yn){return"resize "+yn}).style("cursor",function(yn){return ot[yn]}).append("rect").attr("x",function(yn){return/[ew]$/.test(yn)?-3:null}).attr("y",function(yn){return/^[ns]/.test(yn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Zt.style("display",$e.empty()?"none":null);var Ht,Nt=o.transition(Ft),gn=o.transition(Ot);ne&&(Ht=sa(ne),gn.attr("x",Ht[0]).attr("width",Ht[1]-Ht[0]),ft(Nt)),ce&&(Ht=sa(ce),gn.attr("y",Ht[0]).attr("height",Ht[1]-Ht[0]),_t(Nt)),lt(Nt)})}function lt(At){At.selectAll(".resize").attr("transform",function(Ft){return"translate("+ye[+/e$/.test(Ft)]+","+Le[+/^s/.test(Ft)]+")"})}function ft(At){At.select(".extent").attr("x",ye[0]),At.selectAll(".extent,.n>rect,.s>rect").attr("width",ye[1]-ye[0])}function _t(At){At.select(".extent").attr("y",Le[0]),At.selectAll(".extent,.e>rect,.w>rect").attr("height",Le[1]-Le[0])}function St(){var At,Ft,Ot=this,Zt=o.select(o.event.target),Ht=Q.of(Ot,arguments),Nt=o.select(Ot),gn=Zt.datum(),yn=!/^(n|s)$/.test(gn)&&ne,Cn=!/^(e|w)$/.test(gn)&&ce,Dn=Zt.classed("extent"),Wn=dt(Ot),sr=o.mouse(Ot),mr=o.select(t(Ot)).on("keydown.brush",function(){o.event.keyCode==32&&(Dn||(At=null,sr[0]-=ye[1],sr[1]-=Le[1],Dn=2),J())}).on("keyup.brush",function(){o.event.keyCode==32&&Dn==2&&(sr[0]+=ye[1],sr[1]+=Le[1],Dn=0,J())});if(o.event.changedTouches?mr.on("touchmove.brush",Ar).on("touchend.brush",ar):mr.on("mousemove.brush",Ar).on("mouseup.brush",ar),Nt.interrupt().selectAll("*").interrupt(),Dn)sr[0]=ye[0]-sr[0],sr[1]=Le[0]-sr[1];else if(gn){var Zn=+/w$/.test(gn),pr=+/^n/.test(gn);Ft=[ye[1-Zn]-sr[0],Le[1-pr]-sr[1]],sr[0]=ye[Zn],sr[1]=Le[pr]}else o.event.altKey&&(At=sr.slice());function Ar(){var fr=o.mouse(Ot),Er=!1;Ft&&(fr[0]+=Ft[0],fr[1]+=Ft[1]),Dn||(o.event.altKey?(At||(At=[(ye[0]+ye[1])/2,(Le[0]+Le[1])/2]),sr[0]=ye[+(fr[0]<At[0])],sr[1]=Le[+(fr[1]<At[1])]):At=null),yn&&Fr(fr,ne,0)&&(ft(Nt),Er=!0),Cn&&Fr(fr,ce,1)&&(_t(Nt),Er=!0),Er&&(lt(Nt),Ht({type:"brush",mode:Dn?"move":"resize"}))}function Fr(fr,Er,yr){var zr,Vr,Jr=sa(Er),Qr=Jr[0],ri=Jr[1],ai=sr[yr],Mi=yr?Le:ye,Vi=Mi[1]-Mi[0];if(Dn&&(Qr-=ai,ri-=Vi+ai),zr=(yr?je:Ie)?Math.max(Qr,Math.min(ri,fr[yr])):fr[yr],Dn?Vr=(zr+=ai)+Vi:(At&&(ai=Math.max(Qr,Math.min(ri,2*At[yr]-zr))),ai<zr?(Vr=zr,zr=ai):Vr=ai),Mi[0]!=zr||Mi[1]!=Vr)return yr?q=null:L=null,Mi[0]=zr,Mi[1]=Vr,!0}function ar(){Ar(),Nt.style("pointer-events","all").selectAll(".resize").style("display",$e.empty()?"none":null),o.select("body").style("cursor",null),mr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Wn(),Ht({type:"brushend"})}Nt.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",Zt.style("cursor")),Ht({type:"brushstart"}),Ar()}return $e.event=function(At){At.each(function(){var Ft=Q.of(this,arguments),Ot={x:ye,y:Le,i:L,j:q},Zt=this.__chart__||Ot;this.__chart__=Ot,Zi?o.select(this).transition().each("start.brush",function(){L=Zt.i,q=Zt.j,ye=Zt.x,Le=Zt.y,Ft({type:"brushstart"})}).tween("brush:brush",function(){var Ht=_o(ye,Ot.x),Nt=_o(Le,Ot.y);return L=q=null,function(gn){ye=Ot.x=Ht(gn),Le=Ot.y=Nt(gn),Ft({type:"brush",mode:"resize"})}}).each("end.brush",function(){L=Ot.i,q=Ot.j,Ft({type:"brush",mode:"resize"}),Ft({type:"brushend"})}):(Ft({type:"brushstart"}),Ft({type:"brush",mode:"resize"}),Ft({type:"brushend"}))})},$e.x=function(At){return arguments.length?(qe=B[!(ne=At)<<1|!ce],$e):ne},$e.y=function(At){return arguments.length?(qe=B[!ne<<1|!(ce=At)],$e):ce},$e.clamp=function(At){return arguments.length?(ne&&ce?(Ie=!!At[0],je=!!At[1]):ne?Ie=!!At:ce&&(je=!!At),$e):ne&&ce?[Ie,je]:ne?Ie:ce?je:null},$e.extent=function(At){var Ft,Ot,Zt,Ht,Nt;return arguments.length?(ne&&(Ft=At[0],Ot=At[1],ce&&(Ft=Ft[0],Ot=Ot[0]),L=[Ft,Ot],ne.invert&&(Ft=ne(Ft),Ot=ne(Ot)),Ot<Ft&&(Nt=Ft,Ft=Ot,Ot=Nt),Ft==ye[0]&&Ot==ye[1]||(ye=[Ft,Ot])),ce&&(Zt=At[0],Ht=At[1],ne&&(Zt=Zt[1],Ht=Ht[1]),q=[Zt,Ht],ce.invert&&(Zt=ce(Zt),Ht=ce(Ht)),Ht<Zt&&(Nt=Zt,Zt=Ht,Ht=Nt),Zt==Le[0]&&Ht==Le[1]||(Le=[Zt,Ht])),$e):(ne&&(L?(Ft=L[0],Ot=L[1]):(Ft=ye[0],Ot=ye[1],ne.invert&&(Ft=ne.invert(Ft),Ot=ne.invert(Ot)),Ot<Ft&&(Nt=Ft,Ft=Ot,Ot=Nt))),ce&&(q?(Zt=q[0],Ht=q[1]):(Zt=Le[0],Ht=Le[1],ce.invert&&(Zt=ce.invert(Zt),Ht=ce.invert(Ht)),Ht<Zt&&(Nt=Zt,Zt=Ht,Ht=Nt))),ne&&ce?[[Ft,Zt],[Ot,Ht]]:ne?[Ft,Ot]:ce&&[Zt,Ht])},$e.clear=function(){return $e.empty()||(ye=[0,0],Le=[0,0],L=q=null),$e},$e.empty=function(){return!!ne&&ye[0]==ye[1]||!!ce&&Le[0]==Le[1]},o.rebind($e,Q,"on")};var ot={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},B=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function G(L){return JSON.parse(L.responseText)}function H(L){var q=h.createRange();return q.selectNode(h.body),q.createContextualFragment(L.responseText)}o.text=Fn(function(L){return L.responseText}),o.json=function(L,q){return tr(L,"application/json",G,q)},o.html=function(L,q){return tr(L,"text/html",H,q)},o.xml=Fn(function(L){return L.responseXML}),(k=typeof(M=o)=="function"?M.call(z,e,z,ee):M)===void 0||(ee.exports=k)}).apply(self)},3480:function(ee){ee.exports=function(){"use strict";var z,e,M;function k(o,T){if(z)if(e){var b="var sharedChunk = {}; ("+z+")(sharedChunk); ("+e+")(sharedChunk);",h={};z(h),M=T(h),typeof window!="undefined"&&(M.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}else e=T;else z=T}return k(0,function(o){function T(A,I){return A(I={exports:{}},I.exports),I.exports}var b="1.13.4",h=s;function s(A,I,Y,se){this.cx=3*A,this.bx=3*(Y-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*I,this.by=3*(se-I)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=se,this.p2x=Y,this.p2y=se}s.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*A},s.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A},s.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},s.prototype.solveCurveX=function(A,I){var Y,se,Ae,Ce,Ne;for(I===void 0&&(I=1e-6),Ae=A,Ne=0;Ne<8;Ne++){if(Ce=this.sampleCurveX(Ae)-A,Math.abs(Ce)<I)return Ae;var Ke=this.sampleCurveDerivativeX(Ae);if(Math.abs(Ke)<1e-6)break;Ae-=Ce/Ke}if((Ae=A)<(Y=0))return Y;if(Ae>(se=1))return se;for(;Y<se;){if(Ce=this.sampleCurveX(Ae),Math.abs(Ce-A)<I)return Ae;A>Ce?Y=Ae:se=Ae,Ae=.5*(se-Y)+Y}return Ae},s.prototype.solve=function(A,I){return this.sampleCurveY(this.solveCurveX(A,I))};var t=i;function i(A,I){this.x=A,this.y=I}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,I){return this.clone()._rotateAround(A,I)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var I=A.x-this.x,Y=A.y-this.y;return I*I+Y*Y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,I){return Math.atan2(this.x*I-this.y*A,this.x*A+this.y*I)},_matMult:function(A){var I=A[0]*this.x+A[1]*this.y,Y=A[2]*this.x+A[3]*this.y;return this.x=I,this.y=Y,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var I=Math.cos(A),Y=Math.sin(A),se=I*this.x-Y*this.y,Ae=Y*this.x+I*this.y;return this.x=se,this.y=Ae,this},_rotateAround:function(A,I){var Y=Math.cos(A),se=Math.sin(A),Ae=I.x+Y*(this.x-I.x)-se*(this.y-I.y),Ce=I.y+se*(this.x-I.x)+Y*(this.y-I.y);return this.x=Ae,this.y=Ce,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(A){return A instanceof i?A:Array.isArray(A)?new i(A[0],A[1]):A};var n=typeof self!="undefined"?self:{},r=Math.pow(2,53)-1;function a(A,I,Y,se){var Ae=new h(A,I,Y,se);return function(Ce){return Ae.solve(Ce)}}var l=a(.25,.1,.25,1);function u(A,I,Y){return Math.min(Y,Math.max(I,A))}function d(A,I,Y){var se=Y-I,Ae=((A-I)%se+se)%se+I;return Ae===I?Y:Ae}function c(A){for(var I=[],Y=arguments.length-1;Y-- >0;)I[Y]=arguments[Y+1];for(var se=0,Ae=I;se<Ae.length;se+=1){var Ce=Ae[se];for(var Ne in Ce)A[Ne]=Ce[Ne]}return A}var x=1;function g(){return x++}function p(){return function A(I){return I?(I^16*Math.random()>>I/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()}function v(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}function m(A,I){A.forEach(function(Y){I[Y]&&(I[Y]=I[Y].bind(I))})}function y(A,I){return A.indexOf(I,A.length-I.length)!==-1}function _(A,I,Y){var se={};for(var Ae in A)se[Ae]=I.call(Y||this,A[Ae],Ae,A);return se}function f(A,I,Y){var se={};for(var Ae in A)I.call(Y||this,A[Ae],Ae,A)&&(se[Ae]=A[Ae]);return se}function S(A){return Array.isArray(A)?A.map(S):typeof A=="object"&&A?_(A,S):A}var w={};function E(A){w[A]||(typeof console!="undefined"&&console.warn(A),w[A]=!0)}function P(A,I,Y){return(Y.y-A.y)*(I.x-A.x)>(I.y-A.y)*(Y.x-A.x)}function C(A){for(var I=0,Y=0,se=A.length,Ae=se-1,Ce=void 0,Ne=void 0;Y<se;Ae=Y++)Ce=A[Y],I+=((Ne=A[Ae]).x-Ce.x)*(Ce.y+Ne.y);return I}function O(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function R(A){var I={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(se,Ae,Ce,Ne){var Ke=Ce||Ne;return I[Ae]=!Ke||Ke.toLowerCase(),""}),I["max-age"]){var Y=parseInt(I["max-age"],10);isNaN(Y)?delete I["max-age"]:I["max-age"]=Y}return I}var j=null;function D(A){if(j==null){var I=A.navigator?A.navigator.userAgent:null;j=!!A.safari||!(!I||!(/\b(iPad|iPhone|iPod)\b/.test(I)||I.match("Safari")&&!I.match("Chrome")))}return j}function N(A){try{var I=n[A];return I.setItem("_mapbox_test_",1),I.removeItem("_mapbox_test_"),!0}catch(Y){return!1}}var W,F,U,V,te=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now.bind(Date),J=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,K=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.msCancelAnimationFrame,X={now:te,frame:function(A){var I=J(A);return{cancel:function(){return K(I)}}},getImageData:function(A,I){I===void 0&&(I=0);var Y=n.document.createElement("canvas"),se=Y.getContext("2d");if(!se)throw new Error("failed to create canvas 2d context");return Y.width=A.width,Y.height=A.height,se.drawImage(A,0,0,A.width,A.height),se.getImageData(-I,-I,A.width+2*I,A.height+2*I)},resolveURL:function(A){return W||(W=n.document.createElement("a")),W.href=A,W.href},hardwareConcurrency:n.navigator&&n.navigator.hardwareConcurrency||4,get devicePixelRatio(){return n.devicePixelRatio},get prefersReducedMotion(){return!!n.matchMedia&&(F==null&&(F=n.matchMedia("(prefers-reduced-motion: reduce)")),F.matches)}},Z={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},$={supported:!1,testSupport:function(A){!re&&V&&(oe?ie(A):U=A)}},re=!1,oe=!1;function ie(A){var I=A.createTexture();A.bindTexture(A.TEXTURE_2D,I);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,V),A.isContextLost())return;$.supported=!0}catch(Y){}A.deleteTexture(I),re=!0}n.document&&((V=n.document.createElement("img")).onload=function(){U&&ie(U),U=null,oe=!0},V.onerror=function(){re=!0,U=null},V.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ue="01",me=function(A,I){this._transformRequestFn=A,this._customAccessToken=I,this._createSkuToken()};function be(A){return A.indexOf("mapbox:")===0}me.prototype._createSkuToken=function(){var A=function(){for(var I="",Y=0;Y<10;Y++)I+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ue,I].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=A.token,this._skuTokenExpiresAt=A.tokenExpiresAt},me.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},me.prototype.transformRequest=function(A,I){return this._transformRequestFn&&this._transformRequestFn(A,I)||{url:A}},me.prototype.normalizeStyleURL=function(A,I){if(!be(A))return A;var Y=pe(A);return Y.path="/styles/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||I)},me.prototype.normalizeGlyphsURL=function(A,I){if(!be(A))return A;var Y=pe(A);return Y.path="/fonts/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||I)},me.prototype.normalizeSourceURL=function(A,I){if(!be(A))return A;var Y=pe(A);return Y.path="/v4/"+Y.authority+".json",Y.params.push("secure"),this._makeAPIURL(Y,this._customAccessToken||I)},me.prototype.normalizeSpriteURL=function(A,I,Y,se){var Ae=pe(A);return be(A)?(Ae.path="/styles/v1"+Ae.path+"/sprite"+I+Y,this._makeAPIURL(Ae,this._customAccessToken||se)):(Ae.path+=""+I+Y,_e(Ae))},me.prototype.normalizeTileURL=function(A,I){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!be(A))return A;var Y=pe(A),se=X.devicePixelRatio>=2||I===512?"@2x":"",Ae=$.supported?".webp":"$1";Y.path=Y.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+se+Ae),Y.path=Y.path.replace(/^.+\/v4\//,"/"),Y.path="/v4"+Y.path;var Ce=this._customAccessToken||function(Ne){for(var Ke=0,st=Ne;Ke<st.length;Ke+=1){var bt=st[Ke].match(/^access_token=(.*)$/);if(bt)return bt[1]}return null}(Y.params)||Z.ACCESS_TOKEN;return Z.REQUIRE_ACCESS_TOKEN&&Ce&&this._skuToken&&Y.params.push("sku="+this._skuToken),this._makeAPIURL(Y,Ce)},me.prototype.canonicalizeTileURL=function(A,I){var Y=pe(A);if(!Y.path.match(/(^\/v4\/)/)||!Y.path.match(/\.[\w]+$/))return A;var se="mapbox://tiles/";se+=Y.path.replace("/v4/","");var Ae=Y.params;return I&&(Ae=Ae.filter(function(Ce){return!Ce.match(/^access_token=/)})),Ae.length&&(se+="?"+Ae.join("&")),se},me.prototype.canonicalizeTileset=function(A,I){for(var Y=!!I&&be(I),se=[],Ae=0,Ce=A.tiles||[];Ae<Ce.length;Ae+=1){var Ne=Ce[Ae];de(Ne)?se.push(this.canonicalizeTileURL(Ne,Y)):se.push(Ne)}return se},me.prototype._makeAPIURL=function(A,I){var Y="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",se=pe(Z.API_URL);if(A.protocol=se.protocol,A.authority=se.authority,A.protocol==="http"){var Ae=A.params.indexOf("secure");Ae>=0&&A.params.splice(Ae,1)}if(se.path!=="/"&&(A.path=""+se.path+A.path),!Z.REQUIRE_ACCESS_TOKEN)return _e(A);if(!(I=I||Z.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Y);if(I[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Y);return A.params=A.params.filter(function(Ce){return Ce.indexOf("access_token")===-1}),A.params.push("access_token="+I),_e(A)};var ge=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function de(A){return ge.test(A)}var ve=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function pe(A){var I=A.match(ve);if(!I)throw new Error("Unable to parse URL object");return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}function _e(A){var I=A.params.length?"?"+A.params.join("&"):"";return A.protocol+"://"+A.authority+A.path+I}var Te="mapbox.eventData";function le(A){if(!A)return null;var I,Y=A.split(".");if(!Y||Y.length!==3)return null;try{return JSON.parse((I=Y[1],decodeURIComponent(n.atob(I).split("").map(function(se){return"%"+("00"+se.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(se){return null}}var ae=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ae.prototype.getStorageKey=function(A){var I,Y,se=le(Z.ACCESS_TOKEN);return I=se&&se.u?(Y=se.u,n.btoa(encodeURIComponent(Y).replace(/%([0-9A-F]{2})/g,function(Ae,Ce){return String.fromCharCode(Number("0x"+Ce))}))):Z.ACCESS_TOKEN||"",A?Te+"."+A+":"+I:Te+":"+I},ae.prototype.fetchEventData=function(){var A=N("localStorage"),I=this.getStorageKey(),Y=this.getStorageKey("uuid");if(A)try{var se=n.localStorage.getItem(I);se&&(this.eventData=JSON.parse(se));var Ae=n.localStorage.getItem(Y);Ae&&(this.anonId=Ae)}catch(Ce){E("Unable to read from LocalStorage")}},ae.prototype.saveEventData=function(){var A=N("localStorage"),I=this.getStorageKey(),Y=this.getStorageKey("uuid");if(A)try{n.localStorage.setItem(Y,this.anonId),Object.keys(this.eventData).length>=1&&n.localStorage.setItem(I,JSON.stringify(this.eventData))}catch(se){E("Unable to write to LocalStorage")}},ae.prototype.processRequests=function(A){},ae.prototype.postEvent=function(A,I,Y,se){var Ae=this;if(Z.EVENTS_URL){var Ce=pe(Z.EVENTS_URL);Ce.params.push("access_token="+(se||Z.ACCESS_TOKEN||""));var Ne={event:this.type,created:new Date(A).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:ue,userId:this.anonId},Ke=I?c(Ne,I):Ne,st={url:_e(Ce),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ke])};this.pendingRequest=Ct(st,function(bt){Ae.pendingRequest=null,Y(bt),Ae.saveEventData(),Ae.processRequests(se)})}},ae.prototype.queueRequest=function(A,I){this.queue.push(A),this.processRequests(I)};var he,Se,ke=function(A){function I(){A.call(this,"map.load"),this.success={},this.skuToken=""}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.postMapLoadEvent=function(Y,se,Ae,Ce){this.skuToken=Ae,(Z.EVENTS_URL&&Ce||Z.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(Ne){return be(Ne)||de(Ne)}))&&this.queueRequest({id:se,timestamp:Date.now()},Ce)},I.prototype.processRequests=function(Y){var se=this;if(!this.pendingRequest&&this.queue.length!==0){var Ae=this.queue.shift(),Ce=Ae.id,Ne=Ae.timestamp;Ce&&this.success[Ce]||(this.anonId||this.fetchEventData(),v(this.anonId)||(this.anonId=p()),this.postEvent(Ne,{skuToken:this.skuToken},function(Ke){Ke||Ce&&(se.success[Ce]=!0)},Y))}},I}(ae),Me=function(A){function I(Y){A.call(this,"appUserTurnstile"),this._customAccessToken=Y}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.postTurnstileEvent=function(Y,se){Z.EVENTS_URL&&Z.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(Ae){return be(Ae)||de(Ae)})&&this.queueRequest(Date.now(),se)},I.prototype.processRequests=function(Y){var se=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Ae=le(Z.ACCESS_TOKEN),Ce=Ae?Ae.u:Z.ACCESS_TOKEN,Ne=Ce!==this.eventData.tokenU;v(this.anonId)||(this.anonId=p(),Ne=!0);var Ke=this.queue.shift();if(this.eventData.lastSuccess){var st=new Date(this.eventData.lastSuccess),bt=new Date(Ke),Tt=(Ke-this.eventData.lastSuccess)/864e5;Ne=Ne||Tt>=1||Tt<-1||st.getDate()!==bt.getDate()}else Ne=!0;if(!Ne)return this.processRequests();this.postEvent(Ke,{"enabled.telemetry":!1},function(Rt){Rt||(se.eventData.lastSuccess=Ke,se.eventData.tokenU=Ce)},Y)}},I}(ae),Ee=new Me,De=Ee.postTurnstileEvent.bind(Ee),fe=new ke,xe=fe.postMapLoadEvent.bind(fe),we="mapbox-tiles",Oe=500,ze=50,Pe=42e4;function Ue(){n.caches&&!he&&(he=n.caches.open(we))}function Ve(A,I,Y){if(Ue(),he){var se={status:I.status,statusText:I.statusText,headers:new n.Headers};I.headers.forEach(function(Ce,Ne){return se.headers.set(Ne,Ce)});var Ae=R(I.headers.get("Cache-Control")||"");Ae["no-store"]||(Ae["max-age"]&&se.headers.set("Expires",new Date(Y+1e3*Ae["max-age"]).toUTCString()),new Date(se.headers.get("Expires")).getTime()-Y<Pe||function(Ce,Ne){if(Se===void 0)try{new Response(new ReadableStream),Se=!0}catch(Ke){Se=!1}Se?Ne(Ce.body):Ce.blob().then(Ne)}(I,function(Ce){var Ne=new n.Response(Ce,se);Ue(),he&&he.then(function(Ke){return Ke.put(Ze(A.url),Ne)}).catch(function(Ke){return E(Ke.message)})}))}}function Ze(A){var I=A.indexOf("?");return I<0?A:A.slice(0,I)}function it(A,I){if(Ue(),!he)return I(null);var Y=Ze(A.url);he.then(function(se){se.match(Y).then(function(Ae){var Ce=function(Ne){if(!Ne)return!1;var Ke=new Date(Ne.headers.get("Expires")||0),st=R(Ne.headers.get("Cache-Control")||"");return Ke>Date.now()&&!st["no-cache"]}(Ae);se.delete(Y),Ce&&se.put(Y,Ae.clone()),I(null,Ae,Ce)}).catch(I)}).catch(I)}var tt,dt=1/0;function yt(){return tt==null&&(tt=n.OffscreenCanvas&&new n.OffscreenCanvas(1,1).getContext("2d")&&typeof n.createImageBitmap=="function"),tt}var vt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(vt);var et=function(A){function I(Y,se,Ae){se===401&&de(Ae)&&(Y+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),A.call(this,Y),this.status=se,this.url=Ae,this.name=this.constructor.name,this.message=Y}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},I}(Error),Qe=O()?function(){return self.worker&&self.worker.referrer}:function(){return(n.location.protocol==="blob:"?n.parent:n).location.href};function wt(A,I){var Y,se=new n.AbortController,Ae=new n.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:Qe(),signal:se.signal}),Ce=!1,Ne=!1,Ke=(Y=Ae.url).indexOf("sku=")>0&&de(Y);A.type==="json"&&Ae.headers.set("Accept","application/json");var st=function(Tt,Rt,qt){if(!Ne){if(Tt&&Tt.message!=="SecurityError"&&E(Tt),Rt&&qt)return bt(Rt);var Bt=Date.now();n.fetch(Ae).then(function(an){if(an.ok){var un=Ke?an.clone():null;return bt(an,un,Bt)}return I(new et(an.statusText,an.status,A.url))}).catch(function(an){an.code!==20&&I(new Error(an.message))})}},bt=function(Tt,Rt,qt){(A.type==="arrayBuffer"?Tt.arrayBuffer():A.type==="json"?Tt.json():Tt.text()).then(function(Bt){Ne||(Rt&&qt&&Ve(Ae,Rt,qt),Ce=!0,I(null,Bt,Tt.headers.get("Cache-Control"),Tt.headers.get("Expires")))}).catch(function(Bt){Ne||I(new Error(Bt.message))})};return Ke?it(Ae,st):st(null,null),{cancel:function(){Ne=!0,Ce||se.abort()}}}var It=function(A,I){if(Y=A.url,!(/^file:/.test(Y)||/^file:/.test(Qe())&&!/^\w+:/.test(Y))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return wt(A,I);if(O()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,I,void 0,!0)}var Y;return function(se,Ae){var Ce=new n.XMLHttpRequest;for(var Ne in Ce.open(se.method||"GET",se.url,!0),se.type==="arrayBuffer"&&(Ce.responseType="arraybuffer"),se.headers)Ce.setRequestHeader(Ne,se.headers[Ne]);return se.type==="json"&&(Ce.responseType="text",Ce.setRequestHeader("Accept","application/json")),Ce.withCredentials=se.credentials==="include",Ce.onerror=function(){Ae(new Error(Ce.statusText))},Ce.onload=function(){if((Ce.status>=200&&Ce.status<300||Ce.status===0)&&Ce.response!==null){var Ke=Ce.response;if(se.type==="json")try{Ke=JSON.parse(Ce.response)}catch(st){return Ae(st)}Ae(null,Ke,Ce.getResponseHeader("Cache-Control"),Ce.getResponseHeader("Expires"))}else Ae(new et(Ce.statusText,Ce.status,se.url))},Ce.send(se.body),{cancel:function(){return Ce.abort()}}}(A,I)},Dt=function(A,I){return It(c(A,{type:"arrayBuffer"}),I)},Ct=function(A,I){return It(c(A,{method:"POST"}),I)},He,We,Be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";He=[],We=0;var Ge=function(A,I){if($.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),We>=Z.MAX_PARALLEL_IMAGE_REQUESTS){var Y={requestParameters:A,callback:I,cancelled:!1,cancel:function(){this.cancelled=!0}};return He.push(Y),Y}We++;var se=!1,Ae=function(){if(!se)for(se=!0,We--;He.length&&We<Z.MAX_PARALLEL_IMAGE_REQUESTS;){var Ne=He.shift(),Ke=Ne.requestParameters,st=Ne.callback;Ne.cancelled||(Ne.cancel=Ge(Ke,st).cancel)}},Ce=Dt(A,function(Ne,Ke,st,bt){Ae(),Ne?I(Ne):Ke&&(yt()?function(Tt,Rt){var qt=new n.Blob([new Uint8Array(Tt)],{type:"image/png"});n.createImageBitmap(qt).then(function(Bt){Rt(null,Bt)}).catch(function(Bt){Rt(new Error("Could not load image because of "+Bt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ke,I):function(Tt,Rt,qt,Bt){var an=new n.Image,un=n.URL;an.onload=function(){Rt(null,an),un.revokeObjectURL(an.src),an.onload=null,n.requestAnimationFrame(function(){an.src=Be})},an.onerror=function(){return Rt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var kn=new n.Blob([new Uint8Array(Tt)],{type:"image/png"});an.cacheControl=qt,an.expires=Bt,an.src=Tt.byteLength?un.createObjectURL(kn):Be}(Ke,I,st,bt))});return{cancel:function(){Ce.cancel(),Ae()}}};function at(A,I,Y){Y[A]&&Y[A].indexOf(I)!==-1||(Y[A]=Y[A]||[],Y[A].push(I))}function nt(A,I,Y){if(Y&&Y[A]){var se=Y[A].indexOf(I);se!==-1&&Y[A].splice(se,1)}}var Re=function(A,I){I===void 0&&(I={}),c(this,I),this.type=A},Fe=function(A){function I(Y,se){se===void 0&&(se={}),A.call(this,"error",c({error:Y},se))}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(Re),rt=function(){};rt.prototype.on=function(A,I){return this._listeners=this._listeners||{},at(A,I,this._listeners),this},rt.prototype.off=function(A,I){return nt(A,I,this._listeners),nt(A,I,this._oneTimeListeners),this},rt.prototype.once=function(A,I){return this._oneTimeListeners=this._oneTimeListeners||{},at(A,I,this._oneTimeListeners),this},rt.prototype.fire=function(A,I){typeof A=="string"&&(A=new Re(A,I||{}));var Y=A.type;if(this.listens(Y)){A.target=this;for(var se=0,Ae=this._listeners&&this._listeners[Y]?this._listeners[Y].slice():[];se<Ae.length;se+=1)Ae[se].call(this,A);for(var Ce=0,Ne=this._oneTimeListeners&&this._oneTimeListeners[Y]?this._oneTimeListeners[Y].slice():[];Ce<Ne.length;Ce+=1){var Ke=Ne[Ce];nt(Y,Ke,this._oneTimeListeners),Ke.call(this,A)}var st=this._eventedParent;st&&(c(A,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),st.fire(A))}else A instanceof Fe&&console.error(A.error);return this},rt.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)},rt.prototype.setEventedParent=function(A,I){return this._eventedParent=A,this._eventedParentData=I,this};var Ye={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ct=function(A,I,Y,se){this.message=(A?A+": ":"")+Y,se&&(this.identifier=se),I!=null&&I.__line__&&(this.line=I.__line__)};function pt(A){var I=A.key,Y=A.value;return Y?[new ct(I,Y,"constants have been deprecated as of v8")]:[]}function gt(A){for(var I=[],Y=arguments.length-1;Y-- >0;)I[Y]=arguments[Y+1];for(var se=0,Ae=I;se<Ae.length;se+=1){var Ce=Ae[se];for(var Ne in Ce)A[Ne]=Ce[Ne]}return A}function ut(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function Mt(A){if(Array.isArray(A))return A.map(Mt);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var I={};for(var Y in A)I[Y]=Mt(A[Y]);return I}return ut(A)}var xt=function(A){function I(Y,se){A.call(this,se),this.message=se,this.key=Y}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(Error),mt=function(A,I){I===void 0&&(I=[]),this.parent=A,this.bindings={};for(var Y=0,se=I;Y<se.length;Y+=1){var Ae=se[Y],Ce=Ae[0],Ne=Ae[1];this.bindings[Ce]=Ne}};mt.prototype.concat=function(A){return new mt(this,A)},mt.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(A+" not found in scope.")},mt.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var Et={kind:"null"},Lt={kind:"number"},zt={kind:"string"},Wt={kind:"boolean"},rn={kind:"color"},Ut={kind:"object"},Vt={kind:"value"},en={kind:"collator"},Ln={kind:"formatted"},An={kind:"resolvedImage"};function hn(A,I){return{kind:"array",itemType:A,N:I}}function Xt(A){if(A.kind==="array"){var I=Xt(A.itemType);return typeof A.N=="number"?"array<"+I+", "+A.N+">":A.itemType.kind==="value"?"array":"array<"+I+">"}return A.kind}var ln=[Et,Lt,zt,Wt,rn,Ln,Ut,hn(Vt),An];function nn(A,I){if(I.kind==="error")return null;if(A.kind==="array"){if(I.kind==="array"&&(I.N===0&&I.itemType.kind==="value"||!nn(A.itemType,I.itemType))&&(typeof A.N!="number"||A.N===I.N))return null}else{if(A.kind===I.kind)return null;if(A.kind==="value"){for(var Y=0,se=ln;Y<se.length;Y+=1)if(!nn(se[Y],I))return null}}return"Expected "+Xt(A)+" but found "+Xt(I)+" instead."}function cn(A,I){return I.some(function(Y){return Y.kind===A.kind})}function Tn(A,I){return I.some(function(Y){return Y==="null"?A===null:Y==="array"?Array.isArray(A):Y==="object"?A&&!Array.isArray(A)&&typeof A=="object":Y===typeof A})}var Mn=T(function(A,I){var Y={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function se(st){return(st=Math.round(st))<0?0:st>255?255:st}function Ae(st){return st<0?0:st>1?1:st}function Ce(st){return st[st.length-1]==="%"?se(parseFloat(st)/100*255):se(parseInt(st))}function Ne(st){return st[st.length-1]==="%"?Ae(parseFloat(st)/100):Ae(parseFloat(st))}function Ke(st,bt,Tt){return Tt<0?Tt+=1:Tt>1&&(Tt-=1),6*Tt<1?st+(bt-st)*Tt*6:2*Tt<1?bt:3*Tt<2?st+(bt-st)*(2/3-Tt)*6:st}try{I.parseCSSColor=function(st){var bt,Tt=st.replace(/ /g,"").toLowerCase();if(Tt in Y)return Y[Tt].slice();if(Tt[0]==="#")return Tt.length===4?(bt=parseInt(Tt.substr(1),16))>=0&&bt<=4095?[(3840&bt)>>4|(3840&bt)>>8,240&bt|(240&bt)>>4,15&bt|(15&bt)<<4,1]:null:Tt.length===7&&(bt=parseInt(Tt.substr(1),16))>=0&&bt<=16777215?[(16711680&bt)>>16,(65280&bt)>>8,255&bt,1]:null;var Rt=Tt.indexOf("("),qt=Tt.indexOf(")");if(Rt!==-1&&qt+1===Tt.length){var Bt=Tt.substr(0,Rt),an=Tt.substr(Rt+1,qt-(Rt+1)).split(","),un=1;switch(Bt){case"rgba":if(an.length!==4)return null;un=Ne(an.pop());case"rgb":return an.length!==3?null:[Ce(an[0]),Ce(an[1]),Ce(an[2]),un];case"hsla":if(an.length!==4)return null;un=Ne(an.pop());case"hsl":if(an.length!==3)return null;var kn=(parseFloat(an[0])%360+360)%360/360,wn=Ne(an[1]),Bn=Ne(an[2]),Un=Bn<=.5?Bn*(wn+1):Bn+wn-Bn*wn,Xn=2*Bn-Un;return[se(255*Ke(Xn,Un,kn+1/3)),se(255*Ke(Xn,Un,kn)),se(255*Ke(Xn,Un,kn-1/3)),un];default:return null}}return null}}catch(st){}}),zn=Mn.parseCSSColor,In=function(A,I,Y,se){se===void 0&&(se=1),this.r=A,this.g=I,this.b=Y,this.a=se};In.parse=function(A){if(A){if(A instanceof In)return A;if(typeof A=="string"){var I=zn(A);if(I)return new In(I[0]/255*I[3],I[1]/255*I[3],I[2]/255*I[3],I[3])}}},In.prototype.toString=function(){var A=this.toArray(),I=A[0],Y=A[1],se=A[2],Ae=A[3];return"rgba("+Math.round(I)+","+Math.round(Y)+","+Math.round(se)+","+Ae+")"},In.prototype.toArray=function(){var A=this,I=A.r,Y=A.g,se=A.b,Ae=A.a;return Ae===0?[0,0,0,0]:[255*I/Ae,255*Y/Ae,255*se/Ae,Ae]},In.black=new In(0,0,0,1),In.white=new In(1,1,1,1),In.transparent=new In(0,0,0,0),In.red=new In(1,0,0,1);var Pn=function(A,I,Y){this.sensitivity=A?I?"variant":"case":I?"accent":"base",this.locale=Y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Pn.prototype.compare=function(A,I){return this.collator.compare(A,I)},Pn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Hn=function(A,I,Y,se,Ae){this.text=A,this.image=I,this.scale=Y,this.fontStack=se,this.textColor=Ae},Fn=function(A){this.sections=A};Fn.fromString=function(A){return new Fn([new Hn(A,null,null,null,null)])},Fn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(A){return A.text.length!==0||A.image&&A.image.name.length!==0})},Fn.factory=function(A){return A instanceof Fn?A:Fn.fromString(A)},Fn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(A){return A.text}).join("")},Fn.prototype.serialize=function(){for(var A=["format"],I=0,Y=this.sections;I<Y.length;I+=1){var se=Y[I];if(se.image)A.push(["image",se.image.name]);else{A.push(se.text);var Ae={};se.fontStack&&(Ae["text-font"]=["literal",se.fontStack.split(",")]),se.scale&&(Ae["font-scale"]=se.scale),se.textColor&&(Ae["text-color"]=["rgba"].concat(se.textColor.toArray())),A.push(Ae)}}return A};var tr=function(A){this.name=A.name,this.available=A.available};function or(A,I,Y,se){return typeof A=="number"&&A>=0&&A<=255&&typeof I=="number"&&I>=0&&I<=255&&typeof Y=="number"&&Y>=0&&Y<=255?se===void 0||typeof se=="number"&&se>=0&&se<=1?null:"Invalid rgba value ["+[A,I,Y,se].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof se=="number"?[A,I,Y,se]:[A,I,Y]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ur(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof In||A instanceof Pn||A instanceof Fn||A instanceof tr)return!0;if(Array.isArray(A)){for(var I=0,Y=A;I<Y.length;I+=1)if(!ur(Y[I]))return!1;return!0}if(typeof A=="object"){for(var se in A)if(!ur(A[se]))return!1;return!0}return!1}function er(A){if(A===null)return Et;if(typeof A=="string")return zt;if(typeof A=="boolean")return Wt;if(typeof A=="number")return Lt;if(A instanceof In)return rn;if(A instanceof Pn)return en;if(A instanceof Fn)return Ln;if(A instanceof tr)return An;if(Array.isArray(A)){for(var I,Y=A.length,se=0,Ae=A;se<Ae.length;se+=1){var Ce=er(Ae[se]);if(I){if(I===Ce)continue;I=Vt;break}I=Ce}return hn(I||Vt,Y)}return Ut}function Mr(A){var I=typeof A;return A===null?"":I==="string"||I==="number"||I==="boolean"?String(A):A instanceof In||A instanceof Fn||A instanceof tr?A.toString():JSON.stringify(A)}tr.prototype.toString=function(){return this.name},tr.fromString=function(A){return A?new tr({name:A,available:!1}):null},tr.prototype.serialize=function(){return["image",this.name]};var jt=function(A,I){this.type=A,this.value=I};jt.parse=function(A,I){if(A.length!==2)return I.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!ur(A[1]))return I.error("invalid value");var Y=A[1],se=er(Y),Ae=I.expectedType;return se.kind!=="array"||se.N!==0||!Ae||Ae.kind!=="array"||typeof Ae.N=="number"&&Ae.N!==0||(se=Ae),new jt(se,Y)},jt.prototype.evaluate=function(){return this.value},jt.prototype.eachChild=function(){},jt.prototype.outputDefined=function(){return!0},jt.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof In?["rgba"].concat(this.value.toArray()):this.value instanceof Fn?this.value.serialize():this.value};var tn=function(A){this.name="ExpressionEvaluationError",this.message=A};tn.prototype.toJSON=function(){return this.message};var xn={string:zt,number:Lt,boolean:Wt,object:Ut},pn=function(A,I){this.type=A,this.args=I};pn.parse=function(A,I){if(A.length<2)return I.error("Expected at least one argument.");var Y,se=1,Ae=A[0];if(Ae==="array"){var Ce,Ne;if(A.length>2){var Ke=A[1];if(typeof Ke!="string"||!(Ke in xn)||Ke==="object")return I.error('The item type argument of "array" must be one of string, number, boolean',1);Ce=xn[Ke],se++}else Ce=Vt;if(A.length>3){if(A[2]!==null&&(typeof A[2]!="number"||A[2]<0||A[2]!==Math.floor(A[2])))return I.error('The length argument to "array" must be a positive integer literal',2);Ne=A[2],se++}Y=hn(Ce,Ne)}else Y=xn[Ae];for(var st=[];se<A.length;se++){var bt=I.parse(A[se],se,Vt);if(!bt)return null;st.push(bt)}return new pn(Y,st)},pn.prototype.evaluate=function(A){for(var I=0;I<this.args.length;I++){var Y=this.args[I].evaluate(A);if(!nn(this.type,er(Y)))return Y;if(I===this.args.length-1)throw new tn("Expected value to be of type "+Xt(this.type)+", but found "+Xt(er(Y))+" instead.")}return null},pn.prototype.eachChild=function(A){this.args.forEach(A)},pn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},pn.prototype.serialize=function(){var A=this.type,I=[A.kind];if(A.kind==="array"){var Y=A.itemType;if(Y.kind==="string"||Y.kind==="number"||Y.kind==="boolean"){I.push(Y.kind);var se=A.N;(typeof se=="number"||this.args.length>1)&&I.push(se)}}return I.concat(this.args.map(function(Ae){return Ae.serialize()}))};var Sn=function(A){this.type=Ln,this.sections=A};Sn.parse=function(A,I){if(A.length<2)return I.error("Expected at least one argument.");var Y=A[1];if(!Array.isArray(Y)&&typeof Y=="object")return I.error("First argument must be an image or text section.");for(var se=[],Ae=!1,Ce=1;Ce<=A.length-1;++Ce){var Ne=A[Ce];if(Ae&&typeof Ne=="object"&&!Array.isArray(Ne)){Ae=!1;var Ke=null;if(Ne["font-scale"]&&!(Ke=I.parse(Ne["font-scale"],1,Lt)))return null;var st=null;if(Ne["text-font"]&&!(st=I.parse(Ne["text-font"],1,hn(zt))))return null;var bt=null;if(Ne["text-color"]&&!(bt=I.parse(Ne["text-color"],1,rn)))return null;var Tt=se[se.length-1];Tt.scale=Ke,Tt.font=st,Tt.textColor=bt}else{var Rt=I.parse(A[Ce],1,Vt);if(!Rt)return null;var qt=Rt.type.kind;if(qt!=="string"&&qt!=="value"&&qt!=="null"&&qt!=="resolvedImage")return I.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Ae=!0,se.push({content:Rt,scale:null,font:null,textColor:null})}}return new Sn(se)},Sn.prototype.evaluate=function(A){return new Fn(this.sections.map(function(I){var Y=I.content.evaluate(A);return er(Y)===An?new Hn("",Y,null,null,null):new Hn(Mr(Y),null,I.scale?I.scale.evaluate(A):null,I.font?I.font.evaluate(A).join(","):null,I.textColor?I.textColor.evaluate(A):null)}))},Sn.prototype.eachChild=function(A){for(var I=0,Y=this.sections;I<Y.length;I+=1){var se=Y[I];A(se.content),se.scale&&A(se.scale),se.font&&A(se.font),se.textColor&&A(se.textColor)}},Sn.prototype.outputDefined=function(){return!1},Sn.prototype.serialize=function(){for(var A=["format"],I=0,Y=this.sections;I<Y.length;I+=1){var se=Y[I];A.push(se.content.serialize());var Ae={};se.scale&&(Ae["font-scale"]=se.scale.serialize()),se.font&&(Ae["text-font"]=se.font.serialize()),se.textColor&&(Ae["text-color"]=se.textColor.serialize()),A.push(Ae)}return A};var Gn=function(A){this.type=An,this.input=A};Gn.parse=function(A,I){if(A.length!==2)return I.error("Expected two arguments.");var Y=I.parse(A[1],1,zt);return Y?new Gn(Y):I.error("No image name provided.")},Gn.prototype.evaluate=function(A){var I=this.input.evaluate(A),Y=tr.fromString(I);return Y&&A.availableImages&&(Y.available=A.availableImages.indexOf(I)>-1),Y},Gn.prototype.eachChild=function(A){A(this.input)},Gn.prototype.outputDefined=function(){return!1},Gn.prototype.serialize=function(){return["image",this.input.serialize()]};var Rn={"to-boolean":Wt,"to-color":rn,"to-number":Lt,"to-string":zt},Nn=function(A,I){this.type=A,this.args=I};Nn.parse=function(A,I){if(A.length<2)return I.error("Expected at least one argument.");var Y=A[0];if((Y==="to-boolean"||Y==="to-string")&&A.length!==2)return I.error("Expected one argument.");for(var se=Rn[Y],Ae=[],Ce=1;Ce<A.length;Ce++){var Ne=I.parse(A[Ce],Ce,Vt);if(!Ne)return null;Ae.push(Ne)}return new Nn(se,Ae)},Nn.prototype.evaluate=function(A){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(A));if(this.type.kind==="color"){for(var I,Y,se=0,Ae=this.args;se<Ae.length;se+=1){if(Y=null,(I=Ae[se].evaluate(A))instanceof In)return I;if(typeof I=="string"){var Ce=A.parseColor(I);if(Ce)return Ce}else if(Array.isArray(I)&&!(Y=I.length<3||I.length>4?"Invalid rbga value "+JSON.stringify(I)+": expected an array containing either three or four numeric values.":or(I[0],I[1],I[2],I[3])))return new In(I[0]/255,I[1]/255,I[2]/255,I[3])}throw new tn(Y||"Could not parse color from value '"+(typeof I=="string"?I:String(JSON.stringify(I)))+"'")}if(this.type.kind==="number"){for(var Ne=null,Ke=0,st=this.args;Ke<st.length;Ke+=1){if((Ne=st[Ke].evaluate(A))===null)return 0;var bt=Number(Ne);if(!isNaN(bt))return bt}throw new tn("Could not convert "+JSON.stringify(Ne)+" to number.")}return this.type.kind==="formatted"?Fn.fromString(Mr(this.args[0].evaluate(A))):this.type.kind==="resolvedImage"?tr.fromString(Mr(this.args[0].evaluate(A))):Mr(this.args[0].evaluate(A))},Nn.prototype.eachChild=function(A){this.args.forEach(A)},Nn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Nn.prototype.serialize=function(){if(this.type.kind==="formatted")return new Sn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Gn(this.args[0]).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(I){A.push(I.serialize())}),A};var ir=["Unknown","Point","LineString","Polygon"],Gt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Gt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Gt.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?ir[this.feature.type]:this.feature.type:null},Gt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Gt.prototype.canonicalID=function(){return this.canonical},Gt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Gt.prototype.parseColor=function(A){var I=this._parseColorCache[A];return I||(I=this._parseColorCache[A]=In.parse(A)),I};var dn=function(A,I,Y,se){this.name=A,this.type=I,this._evaluate=Y,this.args=se};dn.prototype.evaluate=function(A){return this._evaluate(A,this.args)},dn.prototype.eachChild=function(A){this.args.forEach(A)},dn.prototype.outputDefined=function(){return!1},dn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))},dn.parse=function(A,I){var Y,se=A[0],Ae=dn.definitions[se];if(!Ae)return I.error('Unknown expression "'+se+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ce=Array.isArray(Ae)?Ae[0]:Ae.type,Ne=Array.isArray(Ae)?[[Ae[1],Ae[2]]]:Ae.overloads,Ke=Ne.filter(function(Zr){var Ur=Zr[0];return!Array.isArray(Ur)||Ur.length===A.length-1}),st=null,bt=0,Tt=Ke;bt<Tt.length;bt+=1){var Rt=Tt[bt],qt=Rt[0],Bt=Rt[1];st=new dr(I.registry,I.path,null,I.scope);for(var an=[],un=!1,kn=1;kn<A.length;kn++){var wn=A[kn],Bn=Array.isArray(qt)?qt[kn-1]:qt.type,Un=st.parse(wn,1+an.length,Bn);if(!Un){un=!0;break}an.push(Un)}if(!un)if(Array.isArray(qt)&&qt.length!==an.length)st.error("Expected "+qt.length+" arguments, but found "+an.length+" instead.");else{for(var Xn=0;Xn<an.length;Xn++){var Qn=Array.isArray(qt)?qt[Xn]:qt.type,cr=an[Xn];st.concat(Xn+1).checkSubtype(Qn,cr.type)}if(st.errors.length===0)return new dn(se,Ce,Bt,an)}}if(Ke.length===1)(Y=I.errors).push.apply(Y,st.errors);else{for(var Tr=(Ke.length?Ke:Ne).map(function(Zr){return Ur=Zr[0],Array.isArray(Ur)?"("+Ur.map(Xt).join(", ")+")":"("+Xt(Ur.type)+"...)";var Ur}).join(" | "),br=[],Sr=1;Sr<A.length;Sr++){var Or=I.parse(A[Sr],1+br.length);if(!Or)return null;br.push(Xt(Or.type))}I.error("Expected arguments of type "+Tr+", but found ("+br.join(", ")+") instead.")}return null},dn.register=function(A,I){for(var Y in dn.definitions=I,I)A[Y]=dn};var Pt=function(A,I,Y){this.type=en,this.locale=Y,this.caseSensitive=A,this.diacriticSensitive=I};Pt.parse=function(A,I){if(A.length!==2)return I.error("Expected one argument.");var Y=A[1];if(typeof Y!="object"||Array.isArray(Y))return I.error("Collator options argument must be an object.");var se=I.parse(Y["case-sensitive"]!==void 0&&Y["case-sensitive"],1,Wt);if(!se)return null;var Ae=I.parse(Y["diacritic-sensitive"]!==void 0&&Y["diacritic-sensitive"],1,Wt);if(!Ae)return null;var Ce=null;return Y.locale&&!(Ce=I.parse(Y.locale,1,zt))?null:new Pt(se,Ae,Ce)},Pt.prototype.evaluate=function(A){return new Pn(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)},Pt.prototype.eachChild=function(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)},Pt.prototype.outputDefined=function(){return!1},Pt.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};var Yt=8192;function Qt(A,I){A[0]=Math.min(A[0],I[0]),A[1]=Math.min(A[1],I[1]),A[2]=Math.max(A[2],I[0]),A[3]=Math.max(A[3],I[1])}function mn(A,I){return!(A[0]<=I[0]||A[2]>=I[2]||A[1]<=I[1]||A[3]>=I[3])}function vn(A,I){var Y,se=(180+A[0])/360,Ae=(Y=A[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Y*Math.PI/360)))/360),Ce=Math.pow(2,I.z);return[Math.round(se*Ce*Yt),Math.round(Ae*Ce*Yt)]}function _n(A,I,Y){return I[1]>A[1]!=Y[1]>A[1]&&A[0]<(Y[0]-I[0])*(A[1]-I[1])/(Y[1]-I[1])+I[0]}function sn(A,I){for(var Y=!1,se=0,Ae=I.length;se<Ae;se++)for(var Ce=I[se],Ne=0,Ke=Ce.length;Ne<Ke-1;Ne++){if(st=A,bt=Ce[Ne],Tt=Ce[Ne+1],Rt=void 0,qt=void 0,Bt=void 0,an=void 0,Rt=st[0]-bt[0],qt=st[1]-bt[1],Bt=st[0]-Tt[0],an=st[1]-Tt[1],Rt*an-Bt*qt==0&&Rt*Bt<=0&&qt*an<=0)return!1;_n(A,Ce[Ne],Ce[Ne+1])&&(Y=!Y)}var st,bt,Tt,Rt,qt,Bt,an;return Y}function Kt(A,I){for(var Y=0;Y<I.length;Y++)if(sn(A,I[Y]))return!0;return!1}function Jt(A,I,Y,se){var Ae=A[0]-Y[0],Ce=A[1]-Y[1],Ne=I[0]-Y[0],Ke=I[1]-Y[1],st=se[0]-Y[0],bt=se[1]-Y[1],Tt=Ae*bt-st*Ce,Rt=Ne*bt-st*Ke;return Tt>0&&Rt<0||Tt<0&&Rt>0}function on(A,I,Y){for(var se=0,Ae=Y;se<Ae.length;se+=1)for(var Ce=Ae[se],Ne=0;Ne<Ce.length-1;++Ne)if(Ke=A,st=I,bt=Ce[Ne],Tt=Ce[Ne+1],Rt=void 0,qt=void 0,Bt=void 0,Bt=[st[0]-Ke[0],st[1]-Ke[1]],Rt=[Tt[0]-bt[0],Tt[1]-bt[1]],qt=Bt,Rt[0]*qt[1]-Rt[1]*qt[0]!=0&&Jt(Ke,st,bt,Tt)&&Jt(bt,Tt,Ke,st))return!0;var Ke,st,bt,Tt,Rt,qt,Bt;return!1}function fn(A,I){for(var Y=0;Y<A.length;++Y)if(!sn(A[Y],I))return!1;for(var se=0;se<A.length-1;++se)if(on(A[se],A[se+1],I))return!1;return!0}function En(A,I){for(var Y=0;Y<I.length;Y++)if(fn(A,I[Y]))return!0;return!1}function On(A,I,Y){for(var se=[],Ae=0;Ae<A.length;Ae++){for(var Ce=[],Ne=0;Ne<A[Ae].length;Ne++){var Ke=vn(A[Ae][Ne],Y);Qt(I,Ke),Ce.push(Ke)}se.push(Ce)}return se}function Vn(A,I,Y){for(var se=[],Ae=0;Ae<A.length;Ae++){var Ce=On(A[Ae],I,Y);se.push(Ce)}return se}function jn(A,I,Y,se){if(A[0]<Y[0]||A[0]>Y[2]){var Ae=.5*se,Ce=A[0]-Y[0]>Ae?-se:Y[0]-A[0]>Ae?se:0;Ce===0&&(Ce=A[0]-Y[2]>Ae?-se:Y[2]-A[0]>Ae?se:0),A[0]+=Ce}Qt(I,A)}function Kn(A,I,Y,se){for(var Ae=Math.pow(2,se.z)*Yt,Ce=[se.x*Yt,se.y*Yt],Ne=[],Ke=0,st=A;Ke<st.length;Ke+=1)for(var bt=0,Tt=st[Ke];bt<Tt.length;bt+=1){var Rt=Tt[bt],qt=[Rt.x+Ce[0],Rt.y+Ce[1]];jn(qt,I,Y,Ae),Ne.push(qt)}return Ne}function Yn(A,I,Y,se){for(var Ae=Math.pow(2,se.z)*Yt,Ce=[se.x*Yt,se.y*Yt],Ne=[],Ke=0,st=A;Ke<st.length;Ke+=1){for(var bt=[],Tt=0,Rt=st[Ke];Tt<Rt.length;Tt+=1){var qt=Rt[Tt],Bt=[qt.x+Ce[0],qt.y+Ce[1]];Qt(I,Bt),bt.push(Bt)}Ne.push(bt)}if(I[2]-I[0]<=Ae/2){(Bn=I)[0]=Bn[1]=1/0,Bn[2]=Bn[3]=-1/0;for(var an=0,un=Ne;an<un.length;an+=1)for(var kn=0,wn=un[an];kn<wn.length;kn+=1)jn(wn[kn],I,Y,Ae)}var Bn;return Ne}var nr=function(A,I){this.type=Wt,this.geojson=A,this.geometries=I};function rr(A){if(A instanceof dn&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof nr)return!1;var I=!0;return A.eachChild(function(Y){I&&!rr(Y)&&(I=!1)}),I}function Jn(A){if(A instanceof dn&&A.name==="feature-state")return!1;var I=!0;return A.eachChild(function(Y){I&&!Jn(Y)&&(I=!1)}),I}function vr(A,I){if(A instanceof dn&&I.indexOf(A.name)>=0)return!1;var Y=!0;return A.eachChild(function(se){Y&&!vr(se,I)&&(Y=!1)}),Y}nr.parse=function(A,I){if(A.length!==2)return I.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(ur(A[1])){var Y=A[1];if(Y.type==="FeatureCollection")for(var se=0;se<Y.features.length;++se){var Ae=Y.features[se].geometry.type;if(Ae==="Polygon"||Ae==="MultiPolygon")return new nr(Y,Y.features[se].geometry)}else if(Y.type==="Feature"){var Ce=Y.geometry.type;if(Ce==="Polygon"||Ce==="MultiPolygon")return new nr(Y,Y.geometry)}else if(Y.type==="Polygon"||Y.type==="MultiPolygon")return new nr(Y,Y)}return I.error("'within' expression requires valid geojson object that contains polygon geometry type.")},nr.prototype.evaluate=function(A){if(A.geometry()!=null&&A.canonicalID()!=null){if(A.geometryType()==="Point")return function(I,Y){var se=[1/0,1/0,-1/0,-1/0],Ae=[1/0,1/0,-1/0,-1/0],Ce=I.canonicalID();if(Y.type==="Polygon"){var Ne=On(Y.coordinates,Ae,Ce),Ke=Kn(I.geometry(),se,Ae,Ce);if(!mn(se,Ae))return!1;for(var st=0,bt=Ke;st<bt.length;st+=1)if(!sn(bt[st],Ne))return!1}if(Y.type==="MultiPolygon"){var Tt=Vn(Y.coordinates,Ae,Ce),Rt=Kn(I.geometry(),se,Ae,Ce);if(!mn(se,Ae))return!1;for(var qt=0,Bt=Rt;qt<Bt.length;qt+=1)if(!Kt(Bt[qt],Tt))return!1}return!0}(A,this.geometries);if(A.geometryType()==="LineString")return function(I,Y){var se=[1/0,1/0,-1/0,-1/0],Ae=[1/0,1/0,-1/0,-1/0],Ce=I.canonicalID();if(Y.type==="Polygon"){var Ne=On(Y.coordinates,Ae,Ce),Ke=Yn(I.geometry(),se,Ae,Ce);if(!mn(se,Ae))return!1;for(var st=0,bt=Ke;st<bt.length;st+=1)if(!fn(bt[st],Ne))return!1}if(Y.type==="MultiPolygon"){var Tt=Vn(Y.coordinates,Ae,Ce),Rt=Yn(I.geometry(),se,Ae,Ce);if(!mn(se,Ae))return!1;for(var qt=0,Bt=Rt;qt<Bt.length;qt+=1)if(!En(Bt[qt],Tt))return!1}return!0}(A,this.geometries)}return!1},nr.prototype.eachChild=function(){},nr.prototype.outputDefined=function(){return!0},nr.prototype.serialize=function(){return["within",this.geojson]};var lr=function(A,I){this.type=I.type,this.name=A,this.boundExpression=I};lr.parse=function(A,I){if(A.length!==2||typeof A[1]!="string")return I.error("'var' expression requires exactly one string literal argument.");var Y=A[1];return I.scope.has(Y)?new lr(Y,I.scope.get(Y)):I.error('Unknown variable "'+Y+'". Make sure "'+Y+'" has been bound in an enclosing "let" expression before using it.',1)},lr.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)},lr.prototype.eachChild=function(){},lr.prototype.outputDefined=function(){return!1},lr.prototype.serialize=function(){return["var",this.name]};var dr=function(A,I,Y,se,Ae){I===void 0&&(I=[]),se===void 0&&(se=new mt),Ae===void 0&&(Ae=[]),this.registry=A,this.path=I,this.key=I.map(function(Ce){return"["+Ce+"]"}).join(""),this.scope=se,this.errors=Ae,this.expectedType=Y};function $n(A){if(A instanceof lr)return $n(A.boundExpression);if(A instanceof dn&&A.name==="error"||A instanceof Pt||A instanceof nr)return!1;var I=A instanceof Nn||A instanceof pn,Y=!0;return A.eachChild(function(se){Y=I?Y&&$n(se):Y&&se instanceof jt}),!!Y&&rr(A)&&vr(A,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function _r(A,I){for(var Y,se,Ae=A.length-1,Ce=0,Ne=Ae,Ke=0;Ce<=Ne;)if(Y=A[Ke=Math.floor((Ce+Ne)/2)],se=A[Ke+1],Y<=I){if(Ke===Ae||I<se)return Ke;Ce=Ke+1}else{if(!(Y>I))throw new tn("Input is not a number.");Ne=Ke-1}return 0}dr.prototype.parse=function(A,I,Y,se,Ae){return Ae===void 0&&(Ae={}),I?this.concat(I,Y,se)._parse(A,Ae):this._parse(A,Ae)},dr.prototype._parse=function(A,I){function Y(bt,Tt,Rt){return Rt==="assert"?new pn(Tt,[bt]):Rt==="coerce"?new Nn(Tt,[bt]):bt}if(A!==null&&typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"||(A=["literal",A]),Array.isArray(A)){if(A.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var se=A[0];if(typeof se!="string")return this.error("Expression name must be a string, but found "+typeof se+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Ae=this.registry[se];if(Ae){var Ce=Ae.parse(A,this);if(!Ce)return null;if(this.expectedType){var Ne=this.expectedType,Ke=Ce.type;if(Ne.kind!=="string"&&Ne.kind!=="number"&&Ne.kind!=="boolean"&&Ne.kind!=="object"&&Ne.kind!=="array"||Ke.kind!=="value")if(Ne.kind!=="color"&&Ne.kind!=="formatted"&&Ne.kind!=="resolvedImage"||Ke.kind!=="value"&&Ke.kind!=="string"){if(this.checkSubtype(Ne,Ke))return null}else Ce=Y(Ce,Ne,I.typeAnnotation||"coerce");else Ce=Y(Ce,Ne,I.typeAnnotation||"assert")}if(!(Ce instanceof jt)&&Ce.type.kind!=="resolvedImage"&&$n(Ce)){var st=new Gt;try{Ce=new jt(Ce.type,Ce.evaluate(st))}catch(bt){return this.error(bt.message),null}}return Ce}return this.error('Unknown expression "'+se+'". If you wanted a literal array, use ["literal", [...]].',0)}return A===void 0?this.error("'undefined' value invalid. Use null instead."):typeof A=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof A+" instead.")},dr.prototype.concat=function(A,I,Y){var se=typeof A=="number"?this.path.concat(A):this.path,Ae=Y?this.scope.concat(Y):this.scope;return new dr(this.registry,se,I||null,Ae,this.errors)},dr.prototype.error=function(A){for(var I=[],Y=arguments.length-1;Y-- >0;)I[Y]=arguments[Y+1];var se=""+this.key+I.map(function(Ae){return"["+Ae+"]"}).join("");this.errors.push(new xt(se,A))},dr.prototype.checkSubtype=function(A,I){var Y=nn(A,I);return Y&&this.error(Y),Y};var Lr=function(A,I,Y){this.type=A,this.input=I,this.labels=[],this.outputs=[];for(var se=0,Ae=Y;se<Ae.length;se+=1){var Ce=Ae[se],Ne=Ce[0],Ke=Ce[1];this.labels.push(Ne),this.outputs.push(Ke)}};function Gr(A,I,Y){return A*(1-Y)+I*Y}Lr.parse=function(A,I){if(A.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return I.error("Expected an even number of arguments.");var Y=I.parse(A[1],1,Lt);if(!Y)return null;var se=[],Ae=null;I.expectedType&&I.expectedType.kind!=="value"&&(Ae=I.expectedType);for(var Ce=1;Ce<A.length;Ce+=2){var Ne=Ce===1?-1/0:A[Ce],Ke=A[Ce+1],st=Ce,bt=Ce+1;if(typeof Ne!="number")return I.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',st);if(se.length&&se[se.length-1][0]>=Ne)return I.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',st);var Tt=I.parse(Ke,bt,Ae);if(!Tt)return null;Ae=Ae||Tt.type,se.push([Ne,Tt])}return new Lr(Ae,Y,se)},Lr.prototype.evaluate=function(A){var I=this.labels,Y=this.outputs;if(I.length===1)return Y[0].evaluate(A);var se=this.input.evaluate(A);if(se<=I[0])return Y[0].evaluate(A);var Ae=I.length;return se>=I[Ae-1]?Y[Ae-1].evaluate(A):Y[_r(I,se)].evaluate(A)},Lr.prototype.eachChild=function(A){A(this.input);for(var I=0,Y=this.outputs;I<Y.length;I+=1)A(Y[I])},Lr.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},Lr.prototype.serialize=function(){for(var A=["step",this.input.serialize()],I=0;I<this.labels.length;I++)I>0&&A.push(this.labels[I]),A.push(this.outputs[I].serialize());return A};var hi=Object.freeze({__proto__:null,number:Gr,color:function(A,I,Y){return new In(Gr(A.r,I.r,Y),Gr(A.g,I.g,Y),Gr(A.b,I.b,Y),Gr(A.a,I.a,Y))},array:function(A,I,Y){return A.map(function(se,Ae){return Gr(se,I[Ae],Y)})}}),di=.95047,Wi=1,gi=1.08883,zi=4/29,_a=6/29,wa=3*_a*_a,zo=_a*_a*_a,nl=Math.PI/180,xs=180/Math.PI;function bs(A){return A>zo?Math.pow(A,.3333333333333333):A/wa+zi}function Is(A){return A>_a?A*A*A:wa*(A-zi)}function Ja(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,.4166666666666667)-.055)}function Ds(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function zs(A){var I=Ds(A.r),Y=Ds(A.g),se=Ds(A.b),Ae=bs((.4124564*I+.3575761*Y+.1804375*se)/di),Ce=bs((.2126729*I+.7151522*Y+.072175*se)/Wi);return{l:116*Ce-16,a:500*(Ae-Ce),b:200*(Ce-bs((.0193339*I+.119192*Y+.9503041*se)/gi)),alpha:A.a}}function _s(A){var I=(A.l+16)/116,Y=isNaN(A.a)?I:I+A.a/500,se=isNaN(A.b)?I:I-A.b/200;return I=Wi*Is(I),Y=di*Is(Y),se=gi*Is(se),new In(Ja(3.2404542*Y-1.5371385*I-.4985314*se),Ja(-.969266*Y+1.8760108*I+.041556*se),Ja(.0556434*Y-.2040259*I+1.0572252*se),A.alpha)}function so(A,I,Y){var se=I-A;return A+Y*(se>180||se<-180?se-360*Math.round(se/360):se)}var _o={forward:zs,reverse:_s,interpolate:function(A,I,Y){return{l:Gr(A.l,I.l,Y),a:Gr(A.a,I.a,Y),b:Gr(A.b,I.b,Y),alpha:Gr(A.alpha,I.alpha,Y)}}},Ro={forward:function(A){var I=zs(A),Y=I.l,se=I.a,Ae=I.b,Ce=Math.atan2(Ae,se)*xs;return{h:Ce<0?Ce+360:Ce,c:Math.sqrt(se*se+Ae*Ae),l:Y,alpha:A.a}},reverse:function(A){var I=A.h*nl,Y=A.c;return _s({l:A.l,a:Math.cos(I)*Y,b:Math.sin(I)*Y,alpha:A.alpha})},interpolate:function(A,I,Y){return{h:so(A.h,I.h,Y),c:Gr(A.c,I.c,Y),l:Gr(A.l,I.l,Y),alpha:Gr(A.alpha,I.alpha,Y)}}},bi=Object.freeze({__proto__:null,lab:_o,hcl:Ro}),$i=function(A,I,Y,se,Ae){this.type=A,this.operator=I,this.interpolation=Y,this.input=se,this.labels=[],this.outputs=[];for(var Ce=0,Ne=Ae;Ce<Ne.length;Ce+=1){var Ke=Ne[Ce],st=Ke[0],bt=Ke[1];this.labels.push(st),this.outputs.push(bt)}};function lo(A,I,Y,se){var Ae=se-Y,Ce=A-Y;return Ae===0?0:I===1?Ce/Ae:(Math.pow(I,Ce)-1)/(Math.pow(I,Ae)-1)}$i.interpolationFactor=function(A,I,Y,se){var Ae=0;if(A.name==="exponential")Ae=lo(I,A.base,Y,se);else if(A.name==="linear")Ae=lo(I,1,Y,se);else if(A.name==="cubic-bezier"){var Ce=A.controlPoints;Ae=new h(Ce[0],Ce[1],Ce[2],Ce[3]).solve(lo(I,1,Y,se))}return Ae},$i.parse=function(A,I){var Y=A[0],se=A[1],Ae=A[2],Ce=A.slice(3);if(!Array.isArray(se)||se.length===0)return I.error("Expected an interpolation type expression.",1);if(se[0]==="linear")se={name:"linear"};else if(se[0]==="exponential"){var Ne=se[1];if(typeof Ne!="number")return I.error("Exponential interpolation requires a numeric base.",1,1);se={name:"exponential",base:Ne}}else{if(se[0]!=="cubic-bezier")return I.error("Unknown interpolation type "+String(se[0]),1,0);var Ke=se.slice(1);if(Ke.length!==4||Ke.some(function(kn){return typeof kn!="number"||kn<0||kn>1}))return I.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);se={name:"cubic-bezier",controlPoints:Ke}}if(A.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return I.error("Expected an even number of arguments.");if(!(Ae=I.parse(Ae,2,Lt)))return null;var st=[],bt=null;Y==="interpolate-hcl"||Y==="interpolate-lab"?bt=rn:I.expectedType&&I.expectedType.kind!=="value"&&(bt=I.expectedType);for(var Tt=0;Tt<Ce.length;Tt+=2){var Rt=Ce[Tt],qt=Ce[Tt+1],Bt=Tt+3,an=Tt+4;if(typeof Rt!="number")return I.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Bt);if(st.length&&st[st.length-1][0]>=Rt)return I.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Bt);var un=I.parse(qt,an,bt);if(!un)return null;bt=bt||un.type,st.push([Rt,un])}return bt.kind==="number"||bt.kind==="color"||bt.kind==="array"&&bt.itemType.kind==="number"&&typeof bt.N=="number"?new $i(bt,Y,se,Ae,st):I.error("Type "+Xt(bt)+" is not interpolatable.")},$i.prototype.evaluate=function(A){var I=this.labels,Y=this.outputs;if(I.length===1)return Y[0].evaluate(A);var se=this.input.evaluate(A);if(se<=I[0])return Y[0].evaluate(A);var Ae=I.length;if(se>=I[Ae-1])return Y[Ae-1].evaluate(A);var Ce=_r(I,se),Ne=I[Ce],Ke=I[Ce+1],st=$i.interpolationFactor(this.interpolation,se,Ne,Ke),bt=Y[Ce].evaluate(A),Tt=Y[Ce+1].evaluate(A);return this.operator==="interpolate"?hi[this.type.kind.toLowerCase()](bt,Tt,st):this.operator==="interpolate-hcl"?Ro.reverse(Ro.interpolate(Ro.forward(bt),Ro.forward(Tt),st)):_o.reverse(_o.interpolate(_o.forward(bt),_o.forward(Tt),st))},$i.prototype.eachChild=function(A){A(this.input);for(var I=0,Y=this.outputs;I<Y.length;I+=1)A(Y[I])},$i.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},$i.prototype.serialize=function(){var A;A=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var I=[this.operator,A,this.input.serialize()],Y=0;Y<this.labels.length;Y++)I.push(this.labels[Y],this.outputs[Y].serialize());return I};var Qa=function(A,I){this.type=A,this.args=I};Qa.parse=function(A,I){if(A.length<2)return I.error("Expectected at least one argument.");var Y=null,se=I.expectedType;se&&se.kind!=="value"&&(Y=se);for(var Ae=[],Ce=0,Ne=A.slice(1);Ce<Ne.length;Ce+=1){var Ke=Ne[Ce],st=I.parse(Ke,1+Ae.length,Y,void 0,{typeAnnotation:"omit"});if(!st)return null;Y=Y||st.type,Ae.push(st)}var bt=se&&Ae.some(function(Tt){return nn(se,Tt.type)});return new Qa(bt?Vt:Y,Ae)},Qa.prototype.evaluate=function(A){for(var I,Y=null,se=0,Ae=0,Ce=this.args;Ae<Ce.length&&(se++,(Y=Ce[Ae].evaluate(A))&&Y instanceof tr&&!Y.available&&(I||(I=Y.name),Y=null,se===this.args.length&&(Y=I)),Y===null);Ae+=1);return Y},Qa.prototype.eachChild=function(A){this.args.forEach(A)},Qa.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Qa.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(I){A.push(I.serialize())}),A};var Va=function(A,I){this.type=I.type,this.bindings=[].concat(A),this.result=I};Va.prototype.evaluate=function(A){return this.result.evaluate(A)},Va.prototype.eachChild=function(A){for(var I=0,Y=this.bindings;I<Y.length;I+=1)A(Y[I][1]);A(this.result)},Va.parse=function(A,I){if(A.length<4)return I.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var Y=[],se=1;se<A.length-1;se+=2){var Ae=A[se];if(typeof Ae!="string")return I.error("Expected string, but found "+typeof Ae+" instead.",se);if(/[^a-zA-Z0-9_]/.test(Ae))return I.error("Variable names must contain only alphanumeric characters or '_'.",se);var Ce=I.parse(A[se+1],se+1);if(!Ce)return null;Y.push([Ae,Ce])}var Ne=I.parse(A[A.length-1],A.length-1,I.expectedType,Y);return Ne?new Va(Y,Ne):null},Va.prototype.outputDefined=function(){return this.result.outputDefined()},Va.prototype.serialize=function(){for(var A=["let"],I=0,Y=this.bindings;I<Y.length;I+=1){var se=Y[I],Ae=se[0],Ce=se[1];A.push(Ae,Ce.serialize())}return A.push(this.result.serialize()),A};var uo=function(A,I,Y){this.type=A,this.index=I,this.input=Y};uo.parse=function(A,I){if(A.length!==3)return I.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1,Lt),se=I.parse(A[2],2,hn(I.expectedType||Vt));if(!Y||!se)return null;var Ae=se.type;return new uo(Ae.itemType,Y,se)},uo.prototype.evaluate=function(A){var I=this.index.evaluate(A),Y=this.input.evaluate(A);if(I<0)throw new tn("Array index out of bounds: "+I+" < 0.");if(I>=Y.length)throw new tn("Array index out of bounds: "+I+" > "+(Y.length-1)+".");if(I!==Math.floor(I))throw new tn("Array index must be an integer, but found "+I+" instead.");return Y[I]},uo.prototype.eachChild=function(A){A(this.index),A(this.input)},uo.prototype.outputDefined=function(){return!1},uo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var qa=function(A,I){this.type=Wt,this.needle=A,this.haystack=I};qa.parse=function(A,I){if(A.length!==3)return I.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1,Vt),se=I.parse(A[2],2,Vt);return Y&&se?cn(Y.type,[Wt,zt,Lt,Et,Vt])?new qa(Y,se):I.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt(Y.type)+" instead"):null},qa.prototype.evaluate=function(A){var I=this.needle.evaluate(A),Y=this.haystack.evaluate(A);if(!Y)return!1;if(!Tn(I,["boolean","string","number","null"]))throw new tn("Expected first argument to be of type boolean, string, number or null, but found "+Xt(er(I))+" instead.");if(!Tn(Y,["string","array"]))throw new tn("Expected second argument to be of type array or string, but found "+Xt(er(Y))+" instead.");return Y.indexOf(I)>=0},qa.prototype.eachChild=function(A){A(this.needle),A(this.haystack)},qa.prototype.outputDefined=function(){return!0},qa.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Fo=function(A,I,Y){this.type=Lt,this.needle=A,this.haystack=I,this.fromIndex=Y};Fo.parse=function(A,I){if(A.length<=2||A.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1,Vt),se=I.parse(A[2],2,Vt);if(!Y||!se)return null;if(!cn(Y.type,[Wt,zt,Lt,Et,Vt]))return I.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt(Y.type)+" instead");if(A.length===4){var Ae=I.parse(A[3],3,Lt);return Ae?new Fo(Y,se,Ae):null}return new Fo(Y,se)},Fo.prototype.evaluate=function(A){var I=this.needle.evaluate(A),Y=this.haystack.evaluate(A);if(!Tn(I,["boolean","string","number","null"]))throw new tn("Expected first argument to be of type boolean, string, number or null, but found "+Xt(er(I))+" instead.");if(!Tn(Y,["string","array"]))throw new tn("Expected second argument to be of type array or string, but found "+Xt(er(Y))+" instead.");if(this.fromIndex){var se=this.fromIndex.evaluate(A);return Y.indexOf(I,se)}return Y.indexOf(I)},Fo.prototype.eachChild=function(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)},Fo.prototype.outputDefined=function(){return!1},Fo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var wo=function(A,I,Y,se,Ae,Ce){this.inputType=A,this.type=I,this.input=Y,this.cases=se,this.outputs=Ae,this.otherwise=Ce};wo.parse=function(A,I){if(A.length<5)return I.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(A.length%2!=1)return I.error("Expected an even number of arguments.");var Y,se;I.expectedType&&I.expectedType.kind!=="value"&&(se=I.expectedType);for(var Ae={},Ce=[],Ne=2;Ne<A.length-1;Ne+=2){var Ke=A[Ne],st=A[Ne+1];Array.isArray(Ke)||(Ke=[Ke]);var bt=I.concat(Ne);if(Ke.length===0)return bt.error("Expected at least one branch label.");for(var Tt=0,Rt=Ke;Tt<Rt.length;Tt+=1){var qt=Rt[Tt];if(typeof qt!="number"&&typeof qt!="string")return bt.error("Branch labels must be numbers or strings.");if(typeof qt=="number"&&Math.abs(qt)>Number.MAX_SAFE_INTEGER)return bt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof qt=="number"&&Math.floor(qt)!==qt)return bt.error("Numeric branch labels must be integer values.");if(Y){if(bt.checkSubtype(Y,er(qt)))return null}else Y=er(qt);if(Ae[String(qt)]!==void 0)return bt.error("Branch labels must be unique.");Ae[String(qt)]=Ce.length}var Bt=I.parse(st,Ne,se);if(!Bt)return null;se=se||Bt.type,Ce.push(Bt)}var an=I.parse(A[1],1,Vt);if(!an)return null;var un=I.parse(A[A.length-1],A.length-1,se);return un?an.type.kind!=="value"&&I.concat(1).checkSubtype(Y,an.type)?null:new wo(Y,se,an,Ae,Ce,un):null},wo.prototype.evaluate=function(A){var I=this.input.evaluate(A);return(er(I)===this.inputType&&this.outputs[this.cases[I]]||this.otherwise).evaluate(A)},wo.prototype.eachChild=function(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)},wo.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()},wo.prototype.serialize=function(){for(var A=this,I=["match",this.input.serialize()],Y=[],se={},Ae=0,Ce=Object.keys(this.cases).sort();Ae<Ce.length;Ae+=1){var Ne=Ce[Ae];(Rt=se[this.cases[Ne]])===void 0?(se[this.cases[Ne]]=Y.length,Y.push([this.cases[Ne],[Ne]])):Y[Rt][1].push(Ne)}for(var Ke=function(Bt){return A.inputType.kind==="number"?Number(Bt):Bt},st=0,bt=Y;st<bt.length;st+=1){var Tt=bt[st],Rt=Tt[0],qt=Tt[1];qt.length===1?I.push(Ke(qt[0])):I.push(qt.map(Ke)),I.push(this.outputs[outputIndex$1].serialize())}return I.push(this.otherwise.serialize()),I};var Bo=function(A,I,Y){this.type=A,this.branches=I,this.otherwise=Y};Bo.parse=function(A,I){if(A.length<4)return I.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(A.length%2!=0)return I.error("Expected an odd number of arguments.");var Y;I.expectedType&&I.expectedType.kind!=="value"&&(Y=I.expectedType);for(var se=[],Ae=1;Ae<A.length-1;Ae+=2){var Ce=I.parse(A[Ae],Ae,Wt);if(!Ce)return null;var Ne=I.parse(A[Ae+1],Ae+1,Y);if(!Ne)return null;se.push([Ce,Ne]),Y=Y||Ne.type}var Ke=I.parse(A[A.length-1],A.length-1,Y);return Ke?new Bo(Y,se,Ke):null},Bo.prototype.evaluate=function(A){for(var I=0,Y=this.branches;I<Y.length;I+=1){var se=Y[I],Ae=se[0],Ce=se[1];if(Ae.evaluate(A))return Ce.evaluate(A)}return this.otherwise.evaluate(A)},Bo.prototype.eachChild=function(A){for(var I=0,Y=this.branches;I<Y.length;I+=1){var se=Y[I],Ae=se[0],Ce=se[1];A(Ae),A(Ce)}A(this.otherwise)},Bo.prototype.outputDefined=function(){return this.branches.every(function(A){return A[0],A[1].outputDefined()})&&this.otherwise.outputDefined()},Bo.prototype.serialize=function(){var A=["case"];return this.eachChild(function(I){A.push(I.serialize())}),A};var co=function(A,I,Y,se){this.type=A,this.input=I,this.beginIndex=Y,this.endIndex=se};function Ks(A,I){return A==="=="||A==="!="?I.kind==="boolean"||I.kind==="string"||I.kind==="number"||I.kind==="null"||I.kind==="value":I.kind==="string"||I.kind==="number"||I.kind==="value"}function Jo(A,I,Y,se){return se.compare(I,Y)===0}function Qo(A,I,Y){var se=A!=="=="&&A!=="!=";return function(){function Ae(Ce,Ne,Ke){this.type=Wt,this.lhs=Ce,this.rhs=Ne,this.collator=Ke,this.hasUntypedArgument=Ce.type.kind==="value"||Ne.type.kind==="value"}return Ae.parse=function(Ce,Ne){if(Ce.length!==3&&Ce.length!==4)return Ne.error("Expected two or three arguments.");var Ke=Ce[0],st=Ne.parse(Ce[1],1,Vt);if(!st)return null;if(!Ks(Ke,st.type))return Ne.concat(1).error('"'+Ke+`" comparisons are not supported for type '`+Xt(st.type)+"'.");var bt=Ne.parse(Ce[2],2,Vt);if(!bt)return null;if(!Ks(Ke,bt.type))return Ne.concat(2).error('"'+Ke+`" comparisons are not supported for type '`+Xt(bt.type)+"'.");if(st.type.kind!==bt.type.kind&&st.type.kind!=="value"&&bt.type.kind!=="value")return Ne.error("Cannot compare types '"+Xt(st.type)+"' and '"+Xt(bt.type)+"'.");se&&(st.type.kind==="value"&&bt.type.kind!=="value"?st=new pn(bt.type,[st]):st.type.kind!=="value"&&bt.type.kind==="value"&&(bt=new pn(st.type,[bt])));var Tt=null;if(Ce.length===4){if(st.type.kind!=="string"&&bt.type.kind!=="string"&&st.type.kind!=="value"&&bt.type.kind!=="value")return Ne.error("Cannot use collator to compare non-string types.");if(!(Tt=Ne.parse(Ce[3],3,en)))return null}return new Ae(st,bt,Tt)},Ae.prototype.evaluate=function(Ce){var Ne=this.lhs.evaluate(Ce),Ke=this.rhs.evaluate(Ce);if(se&&this.hasUntypedArgument){var st=er(Ne),bt=er(Ke);if(st.kind!==bt.kind||st.kind!=="string"&&st.kind!=="number")throw new tn('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+st.kind+", "+bt.kind+") instead.")}if(this.collator&&!se&&this.hasUntypedArgument){var Tt=er(Ne),Rt=er(Ke);if(Tt.kind!=="string"||Rt.kind!=="string")return I(Ce,Ne,Ke)}return this.collator?Y(Ce,Ne,Ke,this.collator.evaluate(Ce)):I(Ce,Ne,Ke)},Ae.prototype.eachChild=function(Ce){Ce(this.lhs),Ce(this.rhs),this.collator&&Ce(this.collator)},Ae.prototype.outputDefined=function(){return!0},Ae.prototype.serialize=function(){var Ce=[A];return this.eachChild(function(Ne){Ce.push(Ne.serialize())}),Ce},Ae}()}co.parse=function(A,I){if(A.length<=2||A.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1,Vt),se=I.parse(A[2],2,Lt);if(!Y||!se)return null;if(!cn(Y.type,[hn(Vt),zt,Vt]))return I.error("Expected first argument to be of type array or string, but found "+Xt(Y.type)+" instead");if(A.length===4){var Ae=I.parse(A[3],3,Lt);return Ae?new co(Y.type,Y,se,Ae):null}return new co(Y.type,Y,se)},co.prototype.evaluate=function(A){var I=this.input.evaluate(A),Y=this.beginIndex.evaluate(A);if(!Tn(I,["string","array"]))throw new tn("Expected first argument to be of type array or string, but found "+Xt(er(I))+" instead.");if(this.endIndex){var se=this.endIndex.evaluate(A);return I.slice(Y,se)}return I.slice(Y)},co.prototype.eachChild=function(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)},co.prototype.outputDefined=function(){return!1},co.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var rl=Qo("==",function(A,I,Y){return I===Y},Jo),il=Qo("!=",function(A,I,Y){return I!==Y},function(A,I,Y,se){return!Jo(0,I,Y,se)}),fo=Qo("<",function(A,I,Y){return I<Y},function(A,I,Y,se){return se.compare(I,Y)<0}),al=Qo(">",function(A,I,Y){return I>Y},function(A,I,Y,se){return se.compare(I,Y)>0}),ol=Qo("<=",function(A,I,Y){return I<=Y},function(A,I,Y,se){return se.compare(I,Y)<=0}),sl=Qo(">=",function(A,I,Y){return I>=Y},function(A,I,Y,se){return se.compare(I,Y)>=0}),$o=function(A,I,Y,se,Ae){this.type=zt,this.number=A,this.locale=I,this.currency=Y,this.minFractionDigits=se,this.maxFractionDigits=Ae};$o.parse=function(A,I){if(A.length!==3)return I.error("Expected two arguments.");var Y=I.parse(A[1],1,Lt);if(!Y)return null;var se=A[2];if(typeof se!="object"||Array.isArray(se))return I.error("NumberFormat options argument must be an object.");var Ae=null;if(se.locale&&!(Ae=I.parse(se.locale,1,zt)))return null;var Ce=null;if(se.currency&&!(Ce=I.parse(se.currency,1,zt)))return null;var Ne=null;if(se["min-fraction-digits"]&&!(Ne=I.parse(se["min-fraction-digits"],1,Lt)))return null;var Ke=null;return se["max-fraction-digits"]&&!(Ke=I.parse(se["max-fraction-digits"],1,Lt))?null:new $o(Y,Ae,Ce,Ne,Ke)},$o.prototype.evaluate=function(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))},$o.prototype.eachChild=function(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)},$o.prototype.outputDefined=function(){return!1},$o.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var Ha=function(A){this.type=Lt,this.input=A};Ha.parse=function(A,I){if(A.length!==2)return I.error("Expected 1 argument, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1);return Y?Y.type.kind!=="array"&&Y.type.kind!=="string"&&Y.type.kind!=="value"?I.error("Expected argument of type string or array, but found "+Xt(Y.type)+" instead."):new Ha(Y):null},Ha.prototype.evaluate=function(A){var I=this.input.evaluate(A);if(typeof I=="string"||Array.isArray(I))return I.length;throw new tn("Expected value to be of type string or array, but found "+Xt(er(I))+" instead.")},Ha.prototype.eachChild=function(A){A(this.input)},Ha.prototype.outputDefined=function(){return!1},Ha.prototype.serialize=function(){var A=["length"];return this.eachChild(function(I){A.push(I.serialize())}),A};var To={"==":rl,"!=":il,">":al,"<":fo,">=":sl,"<=":ol,array:pn,at:uo,boolean:pn,case:Bo,coalesce:Qa,collator:Pt,format:Sn,image:Gn,in:qa,"index-of":Fo,interpolate:$i,"interpolate-hcl":$i,"interpolate-lab":$i,length:Ha,let:Va,literal:jt,match:wo,number:pn,"number-format":$o,object:pn,slice:co,step:Lr,string:pn,"to-boolean":Nn,"to-color":Nn,"to-number":Nn,"to-string":Nn,var:lr,within:nr};function No(A,I){var Y=I[0],se=I[1],Ae=I[2],Ce=I[3];Y=Y.evaluate(A),se=se.evaluate(A),Ae=Ae.evaluate(A);var Ne=Ce?Ce.evaluate(A):1,Ke=or(Y,se,Ae,Ne);if(Ke)throw new tn(Ke);return new In(Y/255*Ne,se/255*Ne,Ae/255*Ne,Ne)}function cs(A,I){return A in I}function jo(A,I){var Y=I[A];return Y===void 0?null:Y}function Ga(A){return{type:A}}function da(A){return{result:"success",value:A}}function Uo(A){return{result:"error",value:A}}function ko(A){return A["property-type"]==="data-driven"||A["property-type"]==="cross-faded-data-driven"}function Ao(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function Vo(A){return!!A.expression&&A.expression.interpolated}function ei(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}function fs(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function xl(A){return A}function Rs(A,I){var Y,se,Ae,Ce=I.type==="color",Ne=A.stops&&typeof A.stops[0][0]=="object",Ke=Ne||A.property!==void 0,st=Ne||!Ke,bt=A.type||(Vo(I)?"exponential":"interval");if(Ce&&((A=gt({},A)).stops&&(A.stops=A.stops.map(function(br){return[br[0],In.parse(br[1])]})),A.default?A.default=In.parse(A.default):A.default=In.parse(I.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!bi[A.colorSpace])throw new Error("Unknown color space: "+A.colorSpace);if(bt==="exponential")Y=Fs;else if(bt==="interval")Y=bl;else if(bt==="categorical"){Y=ll,se=Object.create(null);for(var Tt=0,Rt=A.stops;Tt<Rt.length;Tt+=1){var qt=Rt[Tt];se[qt[0]]=qt[1]}Ae=typeof A.stops[0][0]}else{if(bt!=="identity")throw new Error('Unknown function type "'+bt+'"');Y=ul}if(Ne){for(var Bt={},an=[],un=0;un<A.stops.length;un++){var kn=A.stops[un],wn=kn[0].zoom;Bt[wn]===void 0&&(Bt[wn]={zoom:wn,type:A.type,property:A.property,default:A.default,stops:[]},an.push(wn)),Bt[wn].stops.push([kn[0].value,kn[1]])}for(var Bn=[],Un=0,Xn=an;Un<Xn.length;Un+=1){var Qn=Xn[Un];Bn.push([Bt[Qn].zoom,Rs(Bt[Qn],I)])}var cr={name:"linear"};return{kind:"composite",interpolationType:cr,interpolationFactor:$i.interpolationFactor.bind(void 0,cr),zoomStops:Bn.map(function(br){return br[0]}),evaluate:function(br,Sr){var Or=br.zoom;return Fs({stops:Bn,base:A.base},I,Or).evaluate(Or,Sr)}}}if(st){var Tr=bt==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:Tr,interpolationFactor:$i.interpolationFactor.bind(void 0,Tr),zoomStops:A.stops.map(function(br){return br[0]}),evaluate:function(br){var Sr=br.zoom;return Y(A,I,Sr,se,Ae)}}}return{kind:"source",evaluate:function(br,Sr){var Or=Sr&&Sr.properties?Sr.properties[A.property]:void 0;return Or===void 0?hs(A.default,I.default):Y(A,I,Or,se,Ae)}}}function hs(A,I,Y){return A!==void 0?A:I!==void 0?I:Y!==void 0?Y:void 0}function ll(A,I,Y,se,Ae){return hs(typeof Y===Ae?se[Y]:void 0,A.default,I.default)}function bl(A,I,Y){if(ei(Y)!=="number")return hs(A.default,I.default);var se=A.stops.length;if(se===1||Y<=A.stops[0][0])return A.stops[0][1];if(Y>=A.stops[se-1][0])return A.stops[se-1][1];var Ae=_r(A.stops.map(function(Ce){return Ce[0]}),Y);return A.stops[Ae][1]}function Fs(A,I,Y){var se=A.base!==void 0?A.base:1;if(ei(Y)!=="number")return hs(A.default,I.default);var Ae=A.stops.length;if(Ae===1||Y<=A.stops[0][0])return A.stops[0][1];if(Y>=A.stops[Ae-1][0])return A.stops[Ae-1][1];var Ce=_r(A.stops.map(function(Rt){return Rt[0]}),Y),Ne=function(Rt,qt,Bt,an){var un=an-Bt,kn=Rt-Bt;return un===0?0:qt===1?kn/un:(Math.pow(qt,kn)-1)/(Math.pow(qt,un)-1)}(Y,se,A.stops[Ce][0],A.stops[Ce+1][0]),Ke=A.stops[Ce][1],st=A.stops[Ce+1][1],bt=hi[I.type]||xl;if(A.colorSpace&&A.colorSpace!=="rgb"){var Tt=bi[A.colorSpace];bt=function(Rt,qt){return Tt.reverse(Tt.interpolate(Tt.forward(Rt),Tt.forward(qt),Ne))}}return typeof Ke.evaluate=="function"?{evaluate:function(){for(var Rt=[],qt=arguments.length;qt--;)Rt[qt]=arguments[qt];var Bt=Ke.evaluate.apply(void 0,Rt),an=st.evaluate.apply(void 0,Rt);if(Bt!==void 0&&an!==void 0)return bt(Bt,an,Ne)}}:bt(Ke,st,Ne)}function ul(A,I,Y){return I.type==="color"?Y=In.parse(Y):I.type==="formatted"?Y=Fn.fromString(Y.toString()):I.type==="resolvedImage"?Y=tr.fromString(Y.toString()):ei(Y)===I.type||I.type==="enum"&&I.values[Y]||(Y=void 0),hs(Y,A.default,I.default)}dn.register(To,{error:[{kind:"error"},[zt],function(A,I){var Y=I[0];throw new tn(Y.evaluate(A))}],typeof:[zt,[Vt],function(A,I){return Xt(er(I[0].evaluate(A)))}],"to-rgba":[hn(Lt,4),[rn],function(A,I){return I[0].evaluate(A).toArray()}],rgb:[rn,[Lt,Lt,Lt],No],rgba:[rn,[Lt,Lt,Lt,Lt],No],has:{type:Wt,overloads:[[[zt],function(A,I){return cs(I[0].evaluate(A),A.properties())}],[[zt,Ut],function(A,I){var Y=I[0],se=I[1];return cs(Y.evaluate(A),se.evaluate(A))}]]},get:{type:Vt,overloads:[[[zt],function(A,I){return jo(I[0].evaluate(A),A.properties())}],[[zt,Ut],function(A,I){var Y=I[0],se=I[1];return jo(Y.evaluate(A),se.evaluate(A))}]]},"feature-state":[Vt,[zt],function(A,I){return jo(I[0].evaluate(A),A.featureState||{})}],properties:[Ut,[],function(A){return A.properties()}],"geometry-type":[zt,[],function(A){return A.geometryType()}],id:[Vt,[],function(A){return A.id()}],zoom:[Lt,[],function(A){return A.globals.zoom}],"heatmap-density":[Lt,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[Lt,[],function(A){return A.globals.lineProgress||0}],accumulated:[Vt,[],function(A){return A.globals.accumulated===void 0?null:A.globals.accumulated}],"+":[Lt,Ga(Lt),function(A,I){for(var Y=0,se=0,Ae=I;se<Ae.length;se+=1)Y+=Ae[se].evaluate(A);return Y}],"*":[Lt,Ga(Lt),function(A,I){for(var Y=1,se=0,Ae=I;se<Ae.length;se+=1)Y*=Ae[se].evaluate(A);return Y}],"-":{type:Lt,overloads:[[[Lt,Lt],function(A,I){var Y=I[0],se=I[1];return Y.evaluate(A)-se.evaluate(A)}],[[Lt],function(A,I){return-I[0].evaluate(A)}]]},"/":[Lt,[Lt,Lt],function(A,I){var Y=I[0],se=I[1];return Y.evaluate(A)/se.evaluate(A)}],"%":[Lt,[Lt,Lt],function(A,I){var Y=I[0],se=I[1];return Y.evaluate(A)%se.evaluate(A)}],ln2:[Lt,[],function(){return Math.LN2}],pi:[Lt,[],function(){return Math.PI}],e:[Lt,[],function(){return Math.E}],"^":[Lt,[Lt,Lt],function(A,I){var Y=I[0],se=I[1];return Math.pow(Y.evaluate(A),se.evaluate(A))}],sqrt:[Lt,[Lt],function(A,I){var Y=I[0];return Math.sqrt(Y.evaluate(A))}],log10:[Lt,[Lt],function(A,I){var Y=I[0];return Math.log(Y.evaluate(A))/Math.LN10}],ln:[Lt,[Lt],function(A,I){var Y=I[0];return Math.log(Y.evaluate(A))}],log2:[Lt,[Lt],function(A,I){var Y=I[0];return Math.log(Y.evaluate(A))/Math.LN2}],sin:[Lt,[Lt],function(A,I){var Y=I[0];return Math.sin(Y.evaluate(A))}],cos:[Lt,[Lt],function(A,I){var Y=I[0];return Math.cos(Y.evaluate(A))}],tan:[Lt,[Lt],function(A,I){var Y=I[0];return Math.tan(Y.evaluate(A))}],asin:[Lt,[Lt],function(A,I){var Y=I[0];return Math.asin(Y.evaluate(A))}],acos:[Lt,[Lt],function(A,I){var Y=I[0];return Math.acos(Y.evaluate(A))}],atan:[Lt,[Lt],function(A,I){var Y=I[0];return Math.atan(Y.evaluate(A))}],min:[Lt,Ga(Lt),function(A,I){return Math.min.apply(Math,I.map(function(Y){return Y.evaluate(A)}))}],max:[Lt,Ga(Lt),function(A,I){return Math.max.apply(Math,I.map(function(Y){return Y.evaluate(A)}))}],abs:[Lt,[Lt],function(A,I){var Y=I[0];return Math.abs(Y.evaluate(A))}],round:[Lt,[Lt],function(A,I){var Y=I[0].evaluate(A);return Y<0?-Math.round(-Y):Math.round(Y)}],floor:[Lt,[Lt],function(A,I){var Y=I[0];return Math.floor(Y.evaluate(A))}],ceil:[Lt,[Lt],function(A,I){var Y=I[0];return Math.ceil(Y.evaluate(A))}],"filter-==":[Wt,[zt,Vt],function(A,I){var Y=I[0],se=I[1];return A.properties()[Y.value]===se.value}],"filter-id-==":[Wt,[Vt],function(A,I){var Y=I[0];return A.id()===Y.value}],"filter-type-==":[Wt,[zt],function(A,I){var Y=I[0];return A.geometryType()===Y.value}],"filter-<":[Wt,[zt,Vt],function(A,I){var Y=I[0],se=I[1],Ae=A.properties()[Y.value],Ce=se.value;return typeof Ae==typeof Ce&&Ae<Ce}],"filter-id-<":[Wt,[Vt],function(A,I){var Y=I[0],se=A.id(),Ae=Y.value;return typeof se==typeof Ae&&se<Ae}],"filter->":[Wt,[zt,Vt],function(A,I){var Y=I[0],se=I[1],Ae=A.properties()[Y.value],Ce=se.value;return typeof Ae==typeof Ce&&Ae>Ce}],"filter-id->":[Wt,[Vt],function(A,I){var Y=I[0],se=A.id(),Ae=Y.value;return typeof se==typeof Ae&&se>Ae}],"filter-<=":[Wt,[zt,Vt],function(A,I){var Y=I[0],se=I[1],Ae=A.properties()[Y.value],Ce=se.value;return typeof Ae==typeof Ce&&Ae<=Ce}],"filter-id-<=":[Wt,[Vt],function(A,I){var Y=I[0],se=A.id(),Ae=Y.value;return typeof se==typeof Ae&&se<=Ae}],"filter->=":[Wt,[zt,Vt],function(A,I){var Y=I[0],se=I[1],Ae=A.properties()[Y.value],Ce=se.value;return typeof Ae==typeof Ce&&Ae>=Ce}],"filter-id->=":[Wt,[Vt],function(A,I){var Y=I[0],se=A.id(),Ae=Y.value;return typeof se==typeof Ae&&se>=Ae}],"filter-has":[Wt,[Vt],function(A,I){return I[0].value in A.properties()}],"filter-has-id":[Wt,[],function(A){return A.id()!==null&&A.id()!==void 0}],"filter-type-in":[Wt,[hn(zt)],function(A,I){return I[0].value.indexOf(A.geometryType())>=0}],"filter-id-in":[Wt,[hn(Vt)],function(A,I){return I[0].value.indexOf(A.id())>=0}],"filter-in-small":[Wt,[zt,hn(Vt)],function(A,I){var Y=I[0];return I[1].value.indexOf(A.properties()[Y.value])>=0}],"filter-in-large":[Wt,[zt,hn(Vt)],function(A,I){var Y=I[0],se=I[1];return function(Ae,Ce,Ne,Ke){for(;Ne<=Ke;){var st=Ne+Ke>>1;if(Ce[st]===Ae)return!0;Ce[st]>Ae?Ke=st-1:Ne=st+1}return!1}(A.properties()[Y.value],se.value,0,se.value.length-1)}],all:{type:Wt,overloads:[[[Wt,Wt],function(A,I){var Y=I[0],se=I[1];return Y.evaluate(A)&&se.evaluate(A)}],[Ga(Wt),function(A,I){for(var Y=0,se=I;Y<se.length;Y+=1)if(!se[Y].evaluate(A))return!1;return!0}]]},any:{type:Wt,overloads:[[[Wt,Wt],function(A,I){var Y=I[0],se=I[1];return Y.evaluate(A)||se.evaluate(A)}],[Ga(Wt),function(A,I){for(var Y=0,se=I;Y<se.length;Y+=1)if(se[Y].evaluate(A))return!0;return!1}]]},"!":[Wt,[Wt],function(A,I){return!I[0].evaluate(A)}],"is-supported-script":[Wt,[zt],function(A,I){var Y=I[0],se=A.globals&&A.globals.isSupportedScript;return!se||se(Y.evaluate(A))}],upcase:[zt,[zt],function(A,I){return I[0].evaluate(A).toUpperCase()}],downcase:[zt,[zt],function(A,I){return I[0].evaluate(A).toLowerCase()}],concat:[zt,Ga(Vt),function(A,I){return I.map(function(Y){return Mr(Y.evaluate(A))}).join("")}],"resolved-locale":[zt,[en],function(A,I){return I[0].evaluate(A).resolvedLocale()}]});var Mo=function(A,I){this.expression=A,this._warningHistory={},this._evaluator=new Gt,this._defaultValue=I?function(Y){return Y.type==="color"&&fs(Y.default)?new In(0,0,0,0):Y.type==="color"?In.parse(Y.default)||null:Y.default===void 0?null:Y.default}(I):null,this._enumValues=I&&I.type==="enum"?I.values:null};function es(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in To}function So(A,I){var Y=new dr(To,[],I?function(Ae){var Ce={color:rn,string:zt,number:Lt,enum:zt,boolean:Wt,formatted:Ln,resolvedImage:An};return Ae.type==="array"?hn(Ce[Ae.value]||Vt,Ae.length):Ce[Ae.type]}(I):void 0),se=Y.parse(A,void 0,void 0,void 0,I&&I.type==="string"?{typeAnnotation:"coerce"}:void 0);return se?da(new Mo(se,I)):Uo(Y.errors)}Mo.prototype.evaluateWithoutErrorHandling=function(A,I,Y,se,Ae,Ce){return this._evaluator.globals=A,this._evaluator.feature=I,this._evaluator.featureState=Y,this._evaluator.canonical=se,this._evaluator.availableImages=Ae||null,this._evaluator.formattedSection=Ce,this.expression.evaluate(this._evaluator)},Mo.prototype.evaluate=function(A,I,Y,se,Ae,Ce){this._evaluator.globals=A,this._evaluator.feature=I||null,this._evaluator.featureState=Y||null,this._evaluator.canonical=se,this._evaluator.availableImages=Ae||null,this._evaluator.formattedSection=Ce||null;try{var Ne=this.expression.evaluate(this._evaluator);if(Ne==null||typeof Ne=="number"&&Ne!=Ne)return this._defaultValue;if(this._enumValues&&!(Ne in this._enumValues))throw new tn("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ke){return JSON.stringify(Ke)}).join(", ")+", but found "+JSON.stringify(Ne)+" instead.");return Ne}catch(Ke){return this._warningHistory[Ke.message]||(this._warningHistory[Ke.message]=!0,typeof console!="undefined"&&console.warn(Ke.message)),this._defaultValue}};var $a=function(A,I){this.kind=A,this._styleExpression=I,this.isStateDependent=A!=="constant"&&!Jn(I.expression)};$a.prototype.evaluateWithoutErrorHandling=function(A,I,Y,se,Ae,Ce){return this._styleExpression.evaluateWithoutErrorHandling(A,I,Y,se,Ae,Ce)},$a.prototype.evaluate=function(A,I,Y,se,Ae,Ce){return this._styleExpression.evaluate(A,I,Y,se,Ae,Ce)};var ps=function(A,I,Y,se){this.kind=A,this.zoomStops=Y,this._styleExpression=I,this.isStateDependent=A!=="camera"&&!Jn(I.expression),this.interpolationType=se};function cl(A,I){if((A=So(A,I)).result==="error")return A;var Y=A.value.expression,se=rr(Y);if(!se&&!ko(I))return Uo([new xt("","data expressions not supported")]);var Ae=vr(Y,["zoom"]);if(!Ae&&!Ao(I))return Uo([new xt("","zoom expressions not supported")]);var Ce=Bs(Y);if(!Ce&&!Ae)return Uo([new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Ce instanceof xt)return Uo([Ce]);if(Ce instanceof $i&&!Vo(I))return Uo([new xt("",'"interpolate" expressions cannot be used with this property')]);if(!Ce)return da(new $a(se?"constant":"source",A.value));var Ne=Ce instanceof $i?Ce.interpolation:void 0;return da(new ps(se?"camera":"composite",A.value,Ce.labels,Ne))}ps.prototype.evaluateWithoutErrorHandling=function(A,I,Y,se,Ae,Ce){return this._styleExpression.evaluateWithoutErrorHandling(A,I,Y,se,Ae,Ce)},ps.prototype.evaluate=function(A,I,Y,se,Ae,Ce){return this._styleExpression.evaluate(A,I,Y,se,Ae,Ce)},ps.prototype.interpolationFactor=function(A,I,Y){return this.interpolationType?$i.interpolationFactor(this.interpolationType,A,I,Y):0};var ws=function(A,I){this._parameters=A,this._specification=I,gt(this,Rs(this._parameters,this._specification))};function Bs(A){var I=null;if(A instanceof Va)I=Bs(A.result);else if(A instanceof Qa)for(var Y=0,se=A.args;Y<se.length;Y+=1){var Ae=se[Y];if(I=Bs(Ae))break}else(A instanceof Lr||A instanceof $i)&&A.input instanceof dn&&A.input.name==="zoom"&&(I=A);return I instanceof xt||A.eachChild(function(Ce){var Ne=Bs(Ce);Ne instanceof xt?I=Ne:!I&&Ne?I=new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):I&&Ne&&I!==Ne&&(I=new xt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),I}function Ra(A){var I=A.key,Y=A.value,se=A.valueSpec||{},Ae=A.objectElementValidators||{},Ce=A.style,Ne=A.styleSpec,Ke=[],st=ei(Y);if(st!=="object")return[new ct(I,Y,"object expected, "+st+" found")];for(var bt in Y){var Tt=bt.split(".")[0],Rt=se[Tt]||se["*"],qt=void 0;if(Ae[Tt])qt=Ae[Tt];else if(se[Tt])qt=Xi;else if(Ae["*"])qt=Ae["*"];else{if(!se["*"]){Ke.push(new ct(I,Y[bt],'unknown property "'+bt+'"'));continue}qt=Xi}Ke=Ke.concat(qt({key:(I&&I+".")+bt,value:Y[bt],valueSpec:Rt,style:Ce,styleSpec:Ne,object:Y,objectKey:bt},Y))}for(var Bt in se)Ae[Bt]||se[Bt].required&&se[Bt].default===void 0&&Y[Bt]===void 0&&Ke.push(new ct(I,Y,'missing required property "'+Bt+'"'));return Ke}function Ns(A){var I=A.value,Y=A.valueSpec,se=A.style,Ae=A.styleSpec,Ce=A.key,Ne=A.arrayElementValidator||Xi;if(ei(I)!=="array")return[new ct(Ce,I,"array expected, "+ei(I)+" found")];if(Y.length&&I.length!==Y.length)return[new ct(Ce,I,"array length "+Y.length+" expected, length "+I.length+" found")];if(Y["min-length"]&&I.length<Y["min-length"])return[new ct(Ce,I,"array length at least "+Y["min-length"]+" expected, length "+I.length+" found")];var Ke={type:Y.value,values:Y.values};Ae.$version<7&&(Ke.function=Y.function),ei(Y.value)==="object"&&(Ke=Y.value);for(var st=[],bt=0;bt<I.length;bt++)st=st.concat(Ne({array:I,arrayIndex:bt,value:I[bt],valueSpec:Ke,style:se,styleSpec:Ae,key:Ce+"["+bt+"]"}));return st}function ht(A){var I=A.key,Y=A.value,se=A.valueSpec,Ae=ei(Y);return Ae==="number"&&Y!=Y&&(Ae="NaN"),Ae!=="number"?[new ct(I,Y,"number expected, "+Ae+" found")]:"minimum"in se&&Y<se.minimum?[new ct(I,Y,Y+" is less than the minimum value "+se.minimum)]:"maximum"in se&&Y>se.maximum?[new ct(I,Y,Y+" is greater than the maximum value "+se.maximum)]:[]}function kt(A){var I,Y,se,Ae=A.valueSpec,Ce=ut(A.value.type),Ne={},Ke=Ce!=="categorical"&&A.value.property===void 0,st=!Ke,bt=ei(A.value.stops)==="array"&&ei(A.value.stops[0])==="array"&&ei(A.value.stops[0][0])==="object",Tt=Ra({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Bt){if(Ce==="identity")return[new ct(Bt.key,Bt.value,'identity function may not have a "stops" property')];var an=[],un=Bt.value;return an=an.concat(Ns({key:Bt.key,value:un,valueSpec:Bt.valueSpec,style:Bt.style,styleSpec:Bt.styleSpec,arrayElementValidator:Rt})),ei(un)==="array"&&un.length===0&&an.push(new ct(Bt.key,un,"array must have at least one stop")),an},default:function(Bt){return Xi({key:Bt.key,value:Bt.value,valueSpec:Ae,style:Bt.style,styleSpec:Bt.styleSpec})}}});return Ce==="identity"&&Ke&&Tt.push(new ct(A.key,A.value,'missing required property "property"')),Ce==="identity"||A.value.stops||Tt.push(new ct(A.key,A.value,'missing required property "stops"')),Ce==="exponential"&&A.valueSpec.expression&&!Vo(A.valueSpec)&&Tt.push(new ct(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(st&&!ko(A.valueSpec)?Tt.push(new ct(A.key,A.value,"property functions not supported")):Ke&&!Ao(A.valueSpec)&&Tt.push(new ct(A.key,A.value,"zoom functions not supported"))),Ce!=="categorical"&&!bt||A.value.property!==void 0||Tt.push(new ct(A.key,A.value,'"property" property is required')),Tt;function Rt(Bt){var an=[],un=Bt.value,kn=Bt.key;if(ei(un)!=="array")return[new ct(kn,un,"array expected, "+ei(un)+" found")];if(un.length!==2)return[new ct(kn,un,"array length 2 expected, length "+un.length+" found")];if(bt){if(ei(un[0])!=="object")return[new ct(kn,un,"object expected, "+ei(un[0])+" found")];if(un[0].zoom===void 0)return[new ct(kn,un,"object stop key must have zoom")];if(un[0].value===void 0)return[new ct(kn,un,"object stop key must have value")];if(se&&se>ut(un[0].zoom))return[new ct(kn,un[0].zoom,"stop zoom values must appear in ascending order")];ut(un[0].zoom)!==se&&(se=ut(un[0].zoom),Y=void 0,Ne={}),an=an.concat(Ra({key:kn+"[0]",value:un[0],valueSpec:{zoom:{}},style:Bt.style,styleSpec:Bt.styleSpec,objectElementValidators:{zoom:ht,value:qt}}))}else an=an.concat(qt({key:kn+"[0]",value:un[0],valueSpec:{},style:Bt.style,styleSpec:Bt.styleSpec},un));return es(Mt(un[1]))?an.concat([new ct(kn+"[1]",un[1],"expressions are not allowed in function stops.")]):an.concat(Xi({key:kn+"[1]",value:un[1],valueSpec:Ae,style:Bt.style,styleSpec:Bt.styleSpec}))}function qt(Bt,an){var un=ei(Bt.value),kn=ut(Bt.value),wn=Bt.value!==null?Bt.value:an;if(I){if(un!==I)return[new ct(Bt.key,wn,un+" stop domain type must match previous stop domain type "+I)]}else I=un;if(un!=="number"&&un!=="string"&&un!=="boolean")return[new ct(Bt.key,wn,"stop domain value must be a number, string, or boolean")];if(un!=="number"&&Ce!=="categorical"){var Bn="number expected, "+un+" found";return ko(Ae)&&Ce===void 0&&(Bn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ct(Bt.key,wn,Bn)]}return Ce!=="categorical"||un!=="number"||isFinite(kn)&&Math.floor(kn)===kn?Ce!=="categorical"&&un==="number"&&Y!==void 0&&kn<Y?[new ct(Bt.key,wn,"stop domain values must appear in ascending order")]:(Y=kn,Ce==="categorical"&&kn in Ne?[new ct(Bt.key,wn,"stop domain values must be unique")]:(Ne[kn]=!0,[])):[new ct(Bt.key,wn,"integer expected, found "+kn)]}}function $t(A){var I=(A.expressionContext==="property"?cl:So)(Mt(A.value),A.valueSpec);if(I.result==="error")return I.value.map(function(se){return new ct(""+A.key+se.key,A.value,se.message)});var Y=I.value.expression||I.value._styleExpression.expression;if(A.expressionContext==="property"&&A.propertyKey==="text-font"&&!Y.outputDefined())return[new ct(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if(A.expressionContext==="property"&&A.propertyType==="layout"&&!Jn(Y))return[new ct(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if(A.expressionContext==="filter"&&!Jn(Y))return[new ct(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&A.expressionContext.indexOf("cluster")===0){if(!vr(Y,["zoom","feature-state"]))return[new ct(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(A.expressionContext==="cluster-initial"&&!rr(Y))return[new ct(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function bn(A){var I=A.key,Y=A.value,se=A.valueSpec,Ae=[];return Array.isArray(se.values)?se.values.indexOf(ut(Y))===-1&&Ae.push(new ct(I,Y,"expected one of ["+se.values.join(", ")+"], "+JSON.stringify(Y)+" found")):Object.keys(se.values).indexOf(ut(Y))===-1&&Ae.push(new ct(I,Y,"expected one of ["+Object.keys(se.values).join(", ")+"], "+JSON.stringify(Y)+" found")),Ae}function qn(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(var I=0,Y=A.slice(1);I<Y.length;I+=1){var se=Y[I];if(!qn(se)&&typeof se!="boolean")return!1}return!0;default:return!0}}ws.deserialize=function(A){return new ws(A._parameters,A._specification)},ws.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var hr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function xr(A){if(A==null)return{filter:function(){return!0},needGeometry:!1};qn(A)||(A=jr(A));var I=So(A,hr);if(I.result==="error")throw new Error(I.value.map(function(Y){return Y.key+": "+Y.message}).join(", "));return{filter:function(Y,se,Ae){return I.value.evaluate(Y,se,{},Ae)},needGeometry:gr(A)}}function wr(A,I){return A<I?-1:A>I?1:0}function gr(A){if(!Array.isArray(A))return!1;if(A[0]==="within")return!0;for(var I=1;I<A.length;I++)if(gr(A[I]))return!0;return!1}function jr(A){if(!A)return!0;var I,Y=A[0];return A.length<=1?Y!=="any":Y==="=="?Wr(A[1],A[2],"=="):Y==="!="?Ir(Wr(A[1],A[2],"==")):Y==="<"||Y===">"||Y==="<="||Y===">="?Wr(A[1],A[2],Y):Y==="any"?(I=A.slice(1),["any"].concat(I.map(jr))):Y==="all"?["all"].concat(A.slice(1).map(jr)):Y==="none"?["all"].concat(A.slice(1).map(jr).map(Ir)):Y==="in"?Kr(A[1],A.slice(2)):Y==="!in"?Ir(Kr(A[1],A.slice(2))):Y==="has"?Nr(A[1]):Y==="!has"?Ir(Nr(A[1])):Y!=="within"||A}function Wr(A,I,Y){switch(A){case"$type":return["filter-type-"+Y,I];case"$id":return["filter-id-"+Y,I];default:return["filter-"+Y,A,I]}}function Kr(A,I){if(I.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",I]];case"$id":return["filter-id-in",["literal",I]];default:return I.length>200&&!I.some(function(Y){return typeof Y!=typeof I[0]})?["filter-in-large",A,["literal",I.sort(wr)]]:["filter-in-small",A,["literal",I]]}}function Nr(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function Ir(A){return["!",A]}function $r(A){return qn(Mt(A.value))?$t(gt({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ti(A)}function Ti(A){var I=A.value,Y=A.key;if(ei(I)!=="array")return[new ct(Y,I,"array expected, "+ei(I)+" found")];var se,Ae=A.styleSpec,Ce=[];if(I.length<1)return[new ct(Y,I,"filter array must have at least 1 element")];switch(Ce=Ce.concat(bn({key:Y+"[0]",value:I[0],valueSpec:Ae.filter_operator,style:A.style,styleSpec:A.styleSpec})),ut(I[0])){case"<":case"<=":case">":case">=":I.length>=2&&ut(I[1])==="$type"&&Ce.push(new ct(Y,I,'"$type" cannot be use with operator "'+I[0]+'"'));case"==":case"!=":I.length!==3&&Ce.push(new ct(Y,I,'filter array for operator "'+I[0]+'" must have 3 elements'));case"in":case"!in":I.length>=2&&(se=ei(I[1]))!=="string"&&Ce.push(new ct(Y+"[1]",I[1],"string expected, "+se+" found"));for(var Ne=2;Ne<I.length;Ne++)se=ei(I[Ne]),ut(I[1])==="$type"?Ce=Ce.concat(bn({key:Y+"["+Ne+"]",value:I[Ne],valueSpec:Ae.geometry_type,style:A.style,styleSpec:A.styleSpec})):se!=="string"&&se!=="number"&&se!=="boolean"&&Ce.push(new ct(Y+"["+Ne+"]",I[Ne],"string, number, or boolean expected, "+se+" found"));break;case"any":case"all":case"none":for(var Ke=1;Ke<I.length;Ke++)Ce=Ce.concat(Ti({key:Y+"["+Ke+"]",value:I[Ke],style:A.style,styleSpec:A.styleSpec}));break;case"has":case"!has":se=ei(I[1]),I.length!==2?Ce.push(new ct(Y,I,'filter array for "'+I[0]+'" operator must have 2 elements')):se!=="string"&&Ce.push(new ct(Y+"[1]",I[1],"string expected, "+se+" found"));break;case"within":se=ei(I[1]),I.length!==2?Ce.push(new ct(Y,I,'filter array for "'+I[0]+'" operator must have 2 elements')):se!=="object"&&Ce.push(new ct(Y+"[1]",I[1],"object expected, "+se+" found"))}return Ce}function _i(A,I){var Y=A.key,se=A.style,Ae=A.styleSpec,Ce=A.value,Ne=A.objectKey,Ke=Ae[I+"_"+A.layerType];if(!Ke)return[];var st=Ne.match(/^(.*)-transition$/);if(I==="paint"&&st&&Ke[st[1]]&&Ke[st[1]].transition)return Xi({key:Y,value:Ce,valueSpec:Ae.transition,style:se,styleSpec:Ae});var bt,Tt=A.valueSpec||Ke[Ne];if(!Tt)return[new ct(Y,Ce,'unknown property "'+Ne+'"')];if(ei(Ce)==="string"&&ko(Tt)&&!Tt.tokens&&(bt=/^{([^}]+)}$/.exec(Ce)))return[new ct(Y,Ce,'"'+Ne+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(bt[1])+" }`.")];var Rt=[];return A.layerType==="symbol"&&(Ne==="text-field"&&se&&!se.glyphs&&Rt.push(new ct(Y,Ce,'use of "text-field" requires a style "glyphs" property')),Ne==="text-font"&&fs(Mt(Ce))&&ut(Ce.type)==="identity"&&Rt.push(new ct(Y,Ce,'"text-font" does not support identity functions'))),Rt.concat(Xi({key:A.key,value:Ce,valueSpec:Tt,style:se,styleSpec:Ae,expressionContext:"property",propertyType:I,propertyKey:Ne}))}function Oi(A){return _i(A,"paint")}function ga(A){return _i(A,"layout")}function sa(A){var I=[],Y=A.value,se=A.key,Ae=A.style,Ce=A.styleSpec;Y.type||Y.ref||I.push(new ct(se,Y,'either "type" or "ref" is required'));var Ne,Ke=ut(Y.type),st=ut(Y.ref);if(Y.id)for(var bt=ut(Y.id),Tt=0;Tt<A.arrayIndex;Tt++){var Rt=Ae.layers[Tt];ut(Rt.id)===bt&&I.push(new ct(se,Y.id,'duplicate layer id "'+Y.id+'", previously used at line '+Rt.id.__line__))}if("ref"in Y)["type","source","source-layer","filter","layout"].forEach(function(an){an in Y&&I.push(new ct(se,Y[an],'"'+an+'" is prohibited for ref layers'))}),Ae.layers.forEach(function(an){ut(an.id)===st&&(Ne=an)}),Ne?Ne.ref?I.push(new ct(se,Y.ref,"ref cannot reference another ref layer")):Ke=ut(Ne.type):I.push(new ct(se,Y.ref,'ref layer "'+st+'" not found'));else if(Ke!=="background")if(Y.source){var qt=Ae.sources&&Ae.sources[Y.source],Bt=qt&&ut(qt.type);qt?Bt==="vector"&&Ke==="raster"?I.push(new ct(se,Y.source,'layer "'+Y.id+'" requires a raster source')):Bt==="raster"&&Ke!=="raster"?I.push(new ct(se,Y.source,'layer "'+Y.id+'" requires a vector source')):Bt!=="vector"||Y["source-layer"]?Bt==="raster-dem"&&Ke!=="hillshade"?I.push(new ct(se,Y.source,"raster-dem source can only be used with layer type 'hillshade'.")):Ke!=="line"||!Y.paint||!Y.paint["line-gradient"]||Bt==="geojson"&&qt.lineMetrics||I.push(new ct(se,Y,'layer "'+Y.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):I.push(new ct(se,Y,'layer "'+Y.id+'" must specify a "source-layer"')):I.push(new ct(se,Y.source,'source "'+Y.source+'" not found'))}else I.push(new ct(se,Y,'missing required property "source"'));return I=I.concat(Ra({key:se,value:Y,valueSpec:Ce.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Xi({key:se+".type",value:Y.type,valueSpec:Ce.layer.type,style:A.style,styleSpec:A.styleSpec,object:Y,objectKey:"type"})},filter:$r,layout:function(an){return Ra({layer:Y,key:an.key,value:an.value,style:an.style,styleSpec:an.styleSpec,objectElementValidators:{"*":function(un){return ga(gt({layerType:Ke},un))}}})},paint:function(an){return Ra({layer:Y,key:an.key,value:an.value,style:an.style,styleSpec:an.styleSpec,objectElementValidators:{"*":function(un){return Oi(gt({layerType:Ke},un))}}})}}})),I}function Yi(A){var I=A.value,Y=A.key,se=ei(I);return se!=="string"?[new ct(Y,I,"string expected, "+se+" found")]:[]}var Wa={promoteId:function(A){var I=A.key,Y=A.value;if(ei(Y)==="string")return Yi({key:I,value:Y});var se=[];for(var Ae in Y)se.push.apply(se,Yi({key:I+"."+Ae,value:Y[Ae]}));return se}};function eo(A){var I=A.value,Y=A.key,se=A.styleSpec,Ae=A.style;if(!I.type)return[new ct(Y,I,'"type" is required')];var Ce,Ne=ut(I.type);switch(Ne){case"vector":case"raster":case"raster-dem":return Ra({key:Y,value:I,valueSpec:se["source_"+Ne.replace("-","_")],style:A.style,styleSpec:se,objectElementValidators:Wa});case"geojson":if(Ce=Ra({key:Y,value:I,valueSpec:se.source_geojson,style:Ae,styleSpec:se,objectElementValidators:Wa}),I.cluster)for(var Ke in I.clusterProperties){var st=I.clusterProperties[Ke],bt=st[0],Tt=st[1],Rt=typeof bt=="string"?[bt,["accumulated"],["get",Ke]]:bt;Ce.push.apply(Ce,$t({key:Y+"."+Ke+".map",value:Tt,expressionContext:"cluster-map"})),Ce.push.apply(Ce,$t({key:Y+"."+Ke+".reduce",value:Rt,expressionContext:"cluster-reduce"}))}return Ce;case"video":return Ra({key:Y,value:I,valueSpec:se.source_video,style:Ae,styleSpec:se});case"image":return Ra({key:Y,value:I,valueSpec:se.source_image,style:Ae,styleSpec:se});case"canvas":return[new ct(Y,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return bn({key:Y+".type",value:I.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Ae,styleSpec:se})}}function li(A){var I=A.value,Y=A.styleSpec,se=Y.light,Ae=A.style,Ce=[],Ne=ei(I);if(I===void 0)return Ce;if(Ne!=="object")return Ce.concat([new ct("light",I,"object expected, "+Ne+" found")]);for(var Ke in I){var st=Ke.match(/^(.*)-transition$/);Ce=st&&se[st[1]]&&se[st[1]].transition?Ce.concat(Xi({key:Ke,value:I[Ke],valueSpec:Y.transition,style:Ae,styleSpec:Y})):se[Ke]?Ce.concat(Xi({key:Ke,value:I[Ke],valueSpec:se[Ke],style:Ae,styleSpec:Y})):Ce.concat([new ct(Ke,I[Ke],'unknown property "'+Ke+'"')])}return Ce}var Ta={"*":function(){return[]},array:Ns,boolean:function(A){var I=A.value,Y=A.key,se=ei(I);return se!=="boolean"?[new ct(Y,I,"boolean expected, "+se+" found")]:[]},number:ht,color:function(A){var I=A.key,Y=A.value,se=ei(Y);return se!=="string"?[new ct(I,Y,"color expected, "+se+" found")]:zn(Y)===null?[new ct(I,Y,'color expected, "'+Y+'" found')]:[]},constants:pt,enum:bn,filter:$r,function:kt,layer:sa,object:Ra,source:eo,light:li,string:Yi,formatted:function(A){return Yi(A).length===0?[]:$t(A)},resolvedImage:function(A){return Yi(A).length===0?[]:$t(A)}};function Xi(A){var I=A.value,Y=A.valueSpec,se=A.styleSpec;return Y.expression&&fs(ut(I))?kt(A):Y.expression&&es(Mt(I))?$t(A):Y.type&&Ta[Y.type]?Ta[Y.type](A):Ra(gt({},A,{valueSpec:Y.type?se[Y.type]:Y}))}function Ri(A){var I=A.value,Y=A.key,se=Yi(A);return se.length||(I.indexOf("{fontstack}")===-1&&se.push(new ct(Y,I,'"glyphs" url must include a "{fontstack}" token')),I.indexOf("{range}")===-1&&se.push(new ct(Y,I,'"glyphs" url must include a "{range}" token'))),se}function la(A,I){I===void 0&&(I=Ye);var Y=[];return Y=Y.concat(Xi({key:"",value:A,valueSpec:I.$root,styleSpec:I,style:A,objectElementValidators:{glyphs:Ri,"*":function(){return[]}}})),A.constants&&(Y=Y.concat(pt({key:"constants",value:A.constants,style:A,styleSpec:I}))),wi(Y)}function wi(A){return[].concat(A).sort(function(I,Y){return I.line-Y.line})}function ua(A){return function(){for(var I=[],Y=arguments.length;Y--;)I[Y]=arguments[Y];return wi(A.apply(this,I))}}la.source=ua(eo),la.light=ua(li),la.layer=ua(sa),la.filter=ua($r),la.paintProperty=ua(Oi),la.layoutProperty=ua(ga);var Eo=la,ds=Eo.light,ho=Eo.paintProperty,ts=Eo.layoutProperty;function Ea(A,I){var Y=!1;if(I&&I.length)for(var se=0,Ae=I;se<Ae.length;se+=1){var Ce=Ae[se];A.fire(new Fe(new Error(Ce.message))),Y=!0}return Y}var gs=to,qo=3;function to(A,I,Y){var se=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var Ae=new Int32Array(this.arrayBuffer);A=Ae[0],I=Ae[1],Y=Ae[2],this.d=I+2*Y;for(var Ce=0;Ce<this.d*this.d;Ce++){var Ne=Ae[qo+Ce],Ke=Ae[qo+Ce+1];se.push(Ne===Ke?null:Ae.subarray(Ne,Ke))}var st=Ae[qo+se.length],bt=Ae[qo+se.length+1];this.keys=Ae.subarray(st,bt),this.bboxes=Ae.subarray(bt),this.insert=this._insertReadonly}else{this.d=I+2*Y;for(var Tt=0;Tt<this.d*this.d;Tt++)se.push([]);this.keys=[],this.bboxes=[]}this.n=I,this.extent=A,this.padding=Y,this.scale=I/A,this.uid=0;var Rt=Y/I*A;this.min=-Rt,this.max=A+Rt}to.prototype.insert=function(A,I,Y,se,Ae){this._forEachCell(I,Y,se,Ae,this._insertCell,this.uid++),this.keys.push(A),this.bboxes.push(I),this.bboxes.push(Y),this.bboxes.push(se),this.bboxes.push(Ae)},to.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},to.prototype._insertCell=function(A,I,Y,se,Ae,Ce){this.cells[Ae].push(Ce)},to.prototype.query=function(A,I,Y,se,Ae){var Ce=this.min,Ne=this.max;if(A<=Ce&&I<=Ce&&Ne<=Y&&Ne<=se&&!Ae)return Array.prototype.slice.call(this.keys);var Ke=[];return this._forEachCell(A,I,Y,se,this._queryCell,Ke,{},Ae),Ke},to.prototype._queryCell=function(A,I,Y,se,Ae,Ce,Ne,Ke){var st=this.cells[Ae];if(st!==null)for(var bt=this.keys,Tt=this.bboxes,Rt=0;Rt<st.length;Rt++){var qt=st[Rt];if(Ne[qt]===void 0){var Bt=4*qt;(Ke?Ke(Tt[Bt+0],Tt[Bt+1],Tt[Bt+2],Tt[Bt+3]):A<=Tt[Bt+2]&&I<=Tt[Bt+3]&&Y>=Tt[Bt+0]&&se>=Tt[Bt+1])?(Ne[qt]=!0,Ce.push(bt[qt])):Ne[qt]=!1}}},to.prototype._forEachCell=function(A,I,Y,se,Ae,Ce,Ne,Ke){for(var st=this._convertToCellCoord(A),bt=this._convertToCellCoord(I),Tt=this._convertToCellCoord(Y),Rt=this._convertToCellCoord(se),qt=st;qt<=Tt;qt++)for(var Bt=bt;Bt<=Rt;Bt++){var an=this.d*Bt+qt;if((!Ke||Ke(this._convertFromCellCoord(qt),this._convertFromCellCoord(Bt),this._convertFromCellCoord(qt+1),this._convertFromCellCoord(Bt+1)))&&Ae.call(this,A,I,Y,se,an,Ce,Ne,Ke))return}},to.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale},to.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))},to.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,I=qo+this.cells.length+1+1,Y=0,se=0;se<this.cells.length;se++)Y+=this.cells[se].length;var Ae=new Int32Array(I+Y+this.keys.length+this.bboxes.length);Ae[0]=this.extent,Ae[1]=this.n,Ae[2]=this.padding;for(var Ce=I,Ne=0;Ne<A.length;Ne++){var Ke=A[Ne];Ae[qo+Ne]=Ce,Ae.set(Ke,Ce),Ce+=Ke.length}return Ae[qo+A.length]=Ce,Ae.set(this.keys,Ce),Ce+=this.keys.length,Ae[qo+A.length+1]=Ce,Ae.set(this.bboxes,Ce),Ce+=this.bboxes.length,Ae.buffer};var no=n.ImageData,ki=n.ImageBitmap,po={};function Dr(A,I,Y){Y===void 0&&(Y={}),Object.defineProperty(I,"_classRegistryKey",{value:A,writeable:!1}),po[A]={klass:I,omit:Y.omit||[],shallow:Y.shallow||[]}}for(var js in Dr("Object",Object),gs.serialize=function(A,I){var Y=A.toArrayBuffer();return I&&I.push(Y),{buffer:Y}},gs.deserialize=function(A){return new gs(A.buffer)},Dr("Grid",gs),Dr("Color",In),Dr("Error",Error),Dr("ResolvedImage",tr),Dr("StylePropertyFunction",ws),Dr("StyleExpression",Mo,{omit:["_evaluator"]}),Dr("ZoomDependentExpression",ps),Dr("ZoomConstantExpression",$a),Dr("CompoundExpression",dn,{omit:["_evaluate"]}),To)To[js]._classRegistryKey||Dr("Expression_"+js,To[js]);function fl(A){return A&&typeof ArrayBuffer!="undefined"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function ns(A){return ki&&A instanceof ki}function rs(A,I){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if(fl(A)||ns(A))return I&&I.push(A),A;if(ArrayBuffer.isView(A)){var Y=A;return I&&I.push(Y.buffer),Y}if(A instanceof no)return I&&I.push(A.data.buffer),A;if(Array.isArray(A)){for(var se=[],Ae=0,Ce=A;Ae<Ce.length;Ae+=1){var Ne=Ce[Ae];se.push(rs(Ne,I))}return se}if(typeof A=="object"){var Ke=A.constructor,st=Ke._classRegistryKey;if(!st)throw new Error("can't serialize object of unregistered class");var bt=Ke.serialize?Ke.serialize(A,I):{};if(!Ke.serialize){for(var Tt in A)if(A.hasOwnProperty(Tt)&&!(po[st].omit.indexOf(Tt)>=0)){var Rt=A[Tt];bt[Tt]=po[st].shallow.indexOf(Tt)>=0?Rt:rs(Rt,I)}A instanceof Error&&(bt.message=A.message)}if(bt.$name)throw new Error("$name property is reserved for worker serialization logic.");return st!=="Object"&&(bt.$name=st),bt}throw new Error("can't serialize object of type "+typeof A)}function vs(A){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||fl(A)||ns(A)||ArrayBuffer.isView(A)||A instanceof no)return A;if(Array.isArray(A))return A.map(vs);if(typeof A=="object"){var I=A.$name||"Object",Y=po[I].klass;if(!Y)throw new Error("can't deserialize unregistered class "+I);if(Y.deserialize)return Y.deserialize(A);for(var se=Object.create(Y.prototype),Ae=0,Ce=Object.keys(A);Ae<Ce.length;Ae+=1){var Ne=Ce[Ae];if(Ne!=="$name"){var Ke=A[Ne];se[Ne]=po[I].shallow.indexOf(Ne)>=0?Ke:vs(Ke)}}return se}throw new Error("can't deserialize object of type "+typeof A)}var Ts=function(){this.first=!0};Ts.prototype.update=function(A,I){var Y=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=Y,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=Y,!0):(this.lastFloorZoom>Y?(this.lastIntegerZoom=Y+1,this.lastIntegerZoomTime=I):this.lastFloorZoom<Y&&(this.lastIntegerZoom=Y,this.lastIntegerZoomTime=I),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=Y,!0))};var kr={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function Us(A){for(var I=0,Y=A;I<Y.length;I+=1)if(Ho(Y[I].charCodeAt(0)))return!0;return!1}function Ho(A){return!(A!==746&&A!==747&&(A<4352||!(kr["Bopomofo Extended"](A)||kr.Bopomofo(A)||kr["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||kr["CJK Compatibility Ideographs"](A)||kr["CJK Compatibility"](A)||kr["CJK Radicals Supplement"](A)||kr["CJK Strokes"](A)||!(!kr["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||kr["CJK Unified Ideographs Extension A"](A)||kr["CJK Unified Ideographs"](A)||kr["Enclosed CJK Letters and Months"](A)||kr["Hangul Compatibility Jamo"](A)||kr["Hangul Jamo Extended-A"](A)||kr["Hangul Jamo Extended-B"](A)||kr["Hangul Jamo"](A)||kr["Hangul Syllables"](A)||kr.Hiragana(A)||kr["Ideographic Description Characters"](A)||kr.Kanbun(A)||kr["Kangxi Radicals"](A)||kr["Katakana Phonetic Extensions"](A)||kr.Katakana(A)&&A!==12540||!(!kr["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!kr["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||kr["Unified Canadian Aboriginal Syllabics"](A)||kr["Unified Canadian Aboriginal Syllabics Extended"](A)||kr["Vertical Forms"](A)||kr["Yijing Hexagram Symbols"](A)||kr["Yi Syllables"](A)||kr["Yi Radicals"](A))))}function ra(A){return!(Ho(A)||function(I){return!!(kr["Latin-1 Supplement"](I)&&(I===167||I===169||I===174||I===177||I===188||I===189||I===190||I===215||I===247)||kr["General Punctuation"](I)&&(I===8214||I===8224||I===8225||I===8240||I===8241||I===8251||I===8252||I===8258||I===8263||I===8264||I===8265||I===8273)||kr["Letterlike Symbols"](I)||kr["Number Forms"](I)||kr["Miscellaneous Technical"](I)&&(I>=8960&&I<=8967||I>=8972&&I<=8991||I>=8996&&I<=9e3||I===9003||I>=9085&&I<=9114||I>=9150&&I<=9165||I===9167||I>=9169&&I<=9179||I>=9186&&I<=9215)||kr["Control Pictures"](I)&&I!==9251||kr["Optical Character Recognition"](I)||kr["Enclosed Alphanumerics"](I)||kr["Geometric Shapes"](I)||kr["Miscellaneous Symbols"](I)&&!(I>=9754&&I<=9759)||kr["Miscellaneous Symbols and Arrows"](I)&&(I>=11026&&I<=11055||I>=11088&&I<=11097||I>=11192&&I<=11243)||kr["CJK Symbols and Punctuation"](I)||kr.Katakana(I)||kr["Private Use Area"](I)||kr["CJK Compatibility Forms"](I)||kr["Small Form Variants"](I)||kr["Halfwidth and Fullwidth Forms"](I)||I===8734||I===8756||I===8757||I>=9984&&I<=10087||I>=10102&&I<=10131||I===65532||I===65533)}(A))}function is(A){return kr.Arabic(A)||kr["Arabic Supplement"](A)||kr["Arabic Extended-A"](A)||kr["Arabic Presentation Forms-A"](A)||kr["Arabic Presentation Forms-B"](A)}function go(A){return A>=1424&&A<=2303||kr["Arabic Presentation Forms-A"](A)||kr["Arabic Presentation Forms-B"](A)}function ro(A,I){return!(!I&&go(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||kr.Khmer(A))}function ka(A){for(var I=0,Y=A;I<Y.length;I+=1)if(go(Y[I].charCodeAt(0)))return!0;return!1}var Lo="deferred",io="loading",Go="loaded",Vs="error",as=null,oi="unavailable",ca=null,La=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(oi=Vs),as&&as(A)};function Co(){Ca.fire(new Re("pluginStateChange",{pluginStatus:oi,pluginURL:ca}))}var Ca=new rt,ks=function(){return oi},As=function(){if(oi!==Lo||!ca)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");oi=io,Co(),ca&&Dt({url:ca},function(A){A?La(A):(oi=Go,Co())})},Pa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return oi===Go||Pa.applyArabicShaping!=null},isLoading:function(){return oi===io},setState:function(A){oi=A.pluginStatus,ca=A.pluginURL},isParsed:function(){return Pa.applyArabicShaping!=null&&Pa.processBidirectionalText!=null&&Pa.processStyledBidirectionalText!=null},getPluginURL:function(){return ca}},ii=function(A,I){this.zoom=A,I?(this.now=I.now,this.fadeDuration=I.fadeDuration,this.zoomHistory=I.zoomHistory,this.transition=I.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ts,this.transition={})};ii.prototype.isSupportedScript=function(A){return function(I,Y){for(var se=0,Ae=I;se<Ae.length;se+=1)if(!ro(Ae[se].charCodeAt(0),Y))return!1;return!0}(A,Pa.isLoaded())},ii.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ii.prototype.getCrossfadeParameters=function(){var A=this.zoom,I=A-Math.floor(A),Y=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:I+(1-I)*Y}:{fromScale:.5,toScale:1,t:1-(1-Y)*I}};var Po=function(A,I){this.property=A,this.value=I,this.expression=function(Y,se){if(fs(Y))return new ws(Y,se);if(es(Y)){var Ae=cl(Y,se);if(Ae.result==="error")throw new Error(Ae.value.map(function(Ne){return Ne.key+": "+Ne.message}).join(", "));return Ae.value}var Ce=Y;return typeof Y=="string"&&se.type==="color"&&(Ce=In.parse(Y)),{kind:"constant",evaluate:function(){return Ce}}}(I===void 0?A.specification.default:I,A.specification)};Po.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Po.prototype.possiblyEvaluate=function(A,I,Y){return this.property.possiblyEvaluate(this,A,I,Y)};var ms=function(A){this.property=A,this.value=new Po(A,void 0)};ms.prototype.transitioned=function(A,I){return new Ms(this.property,this.value,I,c({},A.transition,this.transition),A.now)},ms.prototype.untransitioned=function(){return new Ms(this.property,this.value,null,{},0)};var vo=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};vo.prototype.getValue=function(A){return S(this._values[A].value.value)},vo.prototype.setValue=function(A,I){this._values.hasOwnProperty(A)||(this._values[A]=new ms(this._values[A].property)),this._values[A].value=new Po(this._values[A].property,I===null?void 0:S(I))},vo.prototype.getTransition=function(A){return S(this._values[A].transition)},vo.prototype.setTransition=function(A,I){this._values.hasOwnProperty(A)||(this._values[A]=new ms(this._values[A].property)),this._values[A].transition=S(I)||void 0},vo.prototype.serialize=function(){for(var A={},I=0,Y=Object.keys(this._values);I<Y.length;I+=1){var se=Y[I],Ae=this.getValue(se);Ae!==void 0&&(A[se]=Ae);var Ce=this.getTransition(se);Ce!==void 0&&(A[se+"-transition"]=Ce)}return A},vo.prototype.transitioned=function(A,I){for(var Y=new Ss(this._properties),se=0,Ae=Object.keys(this._values);se<Ae.length;se+=1){var Ce=Ae[se];Y._values[Ce]=this._values[Ce].transitioned(A,I._values[Ce])}return Y},vo.prototype.untransitioned=function(){for(var A=new Ss(this._properties),I=0,Y=Object.keys(this._values);I<Y.length;I+=1){var se=Y[I];A._values[se]=this._values[se].untransitioned()}return A};var Ms=function(A,I,Y,se,Ae){this.property=A,this.value=I,this.begin=Ae+se.delay||0,this.end=this.begin+se.duration||0,A.specification.transition&&(se.delay||se.duration)&&(this.prior=Y)};Ms.prototype.possiblyEvaluate=function(A,I,Y){var se=A.now||0,Ae=this.value.possiblyEvaluate(A,I,Y),Ce=this.prior;if(Ce){if(se>this.end)return this.prior=null,Ae;if(this.value.isDataDriven())return this.prior=null,Ae;if(se<this.begin)return Ce.possiblyEvaluate(A,I,Y);var Ne=(se-this.begin)/(this.end-this.begin);return this.property.interpolate(Ce.possiblyEvaluate(A,I,Y),Ae,function(Ke){if(Ke<=0)return 0;if(Ke>=1)return 1;var st=Ke*Ke,bt=st*Ke;return 4*(Ke<.5?bt:3*(Ke-st)+bt-.75)}(Ne))}return Ae};var Ss=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};Ss.prototype.possiblyEvaluate=function(A,I,Y){for(var se=new ys(this._properties),Ae=0,Ce=Object.keys(this._values);Ae<Ce.length;Ae+=1){var Ne=Ce[Ae];se._values[Ne]=this._values[Ne].possiblyEvaluate(A,I,Y)}return se},Ss.prototype.hasTransition=function(){for(var A=0,I=Object.keys(this._values);A<I.length;A+=1){var Y=I[A];if(this._values[Y].prior)return!0}return!1};var mo=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};mo.prototype.getValue=function(A){return S(this._values[A].value)},mo.prototype.setValue=function(A,I){this._values[A]=new Po(this._values[A].property,I===null?void 0:S(I))},mo.prototype.serialize=function(){for(var A={},I=0,Y=Object.keys(this._values);I<Y.length;I+=1){var se=Y[I],Ae=this.getValue(se);Ae!==void 0&&(A[se]=Ae)}return A},mo.prototype.possiblyEvaluate=function(A,I,Y){for(var se=new ys(this._properties),Ae=0,Ce=Object.keys(this._values);Ae<Ce.length;Ae+=1){var Ne=Ce[Ae];se._values[Ne]=this._values[Ne].possiblyEvaluate(A,I,Y)}return se};var Ai=function(A,I,Y){this.property=A,this.value=I,this.parameters=Y};Ai.prototype.isConstant=function(){return this.value.kind==="constant"},Ai.prototype.constantOr=function(A){return this.value.kind==="constant"?this.value.value:A},Ai.prototype.evaluate=function(A,I,Y,se){return this.property.evaluate(this.value,this.parameters,A,I,Y,se)};var ys=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};ys.prototype.get=function(A){return this._values[A]};var Rr=function(A){this.specification=A};Rr.prototype.possiblyEvaluate=function(A,I){return A.expression.evaluate(I)},Rr.prototype.interpolate=function(A,I,Y){var se=hi[this.specification.type];return se?se(A,I,Y):A};var Hr=function(A,I){this.specification=A,this.overrides=I};Hr.prototype.possiblyEvaluate=function(A,I,Y,se){return A.expression.kind==="constant"||A.expression.kind==="camera"?new Ai(this,{kind:"constant",value:A.expression.evaluate(I,null,{},Y,se)},I):new Ai(this,A.expression,I)},Hr.prototype.interpolate=function(A,I,Y){if(A.value.kind!=="constant"||I.value.kind!=="constant")return A;if(A.value.value===void 0||I.value.value===void 0)return new Ai(this,{kind:"constant",value:void 0},A.parameters);var se=hi[this.specification.type];return se?new Ai(this,{kind:"constant",value:se(A.value.value,I.value.value,Y)},A.parameters):A},Hr.prototype.evaluate=function(A,I,Y,se,Ae,Ce){return A.kind==="constant"?A.value:A.evaluate(I,Y,se,Ae,Ce)};var Ya=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.possiblyEvaluate=function(Y,se,Ae,Ce){if(Y.value===void 0)return new Ai(this,{kind:"constant",value:void 0},se);if(Y.expression.kind==="constant"){var Ne=Y.expression.evaluate(se,null,{},Ae,Ce),Ke=Y.property.specification.type==="resolvedImage"&&typeof Ne!="string"?Ne.name:Ne,st=this._calculate(Ke,Ke,Ke,se);return new Ai(this,{kind:"constant",value:st},se)}if(Y.expression.kind==="camera"){var bt=this._calculate(Y.expression.evaluate({zoom:se.zoom-1}),Y.expression.evaluate({zoom:se.zoom}),Y.expression.evaluate({zoom:se.zoom+1}),se);return new Ai(this,{kind:"constant",value:bt},se)}return new Ai(this,Y.expression,se)},I.prototype.evaluate=function(Y,se,Ae,Ce,Ne,Ke){if(Y.kind==="source"){var st=Y.evaluate(se,Ae,Ce,Ne,Ke);return this._calculate(st,st,st,se)}return Y.kind==="composite"?this._calculate(Y.evaluate({zoom:Math.floor(se.zoom)-1},Ae,Ce),Y.evaluate({zoom:Math.floor(se.zoom)},Ae,Ce),Y.evaluate({zoom:Math.floor(se.zoom)+1},Ae,Ce),se):Y.value},I.prototype._calculate=function(Y,se,Ae,Ce){return Ce.zoom>Ce.zoomHistory.lastIntegerZoom?{from:Y,to:se}:{from:Ae,to:se}},I.prototype.interpolate=function(Y){return Y},I}(Hr),Oo=function(A){this.specification=A};Oo.prototype.possiblyEvaluate=function(A,I,Y,se){if(A.value!==void 0){if(A.expression.kind==="constant"){var Ae=A.expression.evaluate(I,null,{},Y,se);return this._calculate(Ae,Ae,Ae,I)}return this._calculate(A.expression.evaluate(new ii(Math.floor(I.zoom-1),I)),A.expression.evaluate(new ii(Math.floor(I.zoom),I)),A.expression.evaluate(new ii(Math.floor(I.zoom+1),I)),I)}},Oo.prototype._calculate=function(A,I,Y,se){return se.zoom>se.zoomHistory.lastIntegerZoom?{from:A,to:I}:{from:Y,to:I}},Oo.prototype.interpolate=function(A){return A};var Wo=function(A){this.specification=A};Wo.prototype.possiblyEvaluate=function(A,I,Y,se){return!!A.expression.evaluate(I,null,{},Y,se)},Wo.prototype.interpolate=function(){return!1};var Zi=function(A){for(var I in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var Y=A[I];Y.specification.overridable&&this.overridableProperties.push(I);var se=this.defaultPropertyValues[I]=new Po(Y,void 0),Ae=this.defaultTransitionablePropertyValues[I]=new ms(Y);this.defaultTransitioningPropertyValues[I]=Ae.untransitioned(),this.defaultPossiblyEvaluatedValues[I]=se.possiblyEvaluate({})}};Dr("DataDrivenProperty",Hr),Dr("DataConstantProperty",Rr),Dr("CrossFadedDataDrivenProperty",Ya),Dr("CrossFadedProperty",Oo),Dr("ColorRampProperty",Wo);var Io="-transition",vi=function(A){function I(Y,se){if(A.call(this),this.id=Y.id,this.type=Y.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Y.type!=="custom"&&(this.metadata=Y.metadata,this.minzoom=Y.minzoom,this.maxzoom=Y.maxzoom,Y.type!=="background"&&(this.source=Y.source,this.sourceLayer=Y["source-layer"],this.filter=Y.filter),se.layout&&(this._unevaluatedLayout=new mo(se.layout)),se.paint)){for(var Ae in this._transitionablePaint=new vo(se.paint),Y.paint)this.setPaintProperty(Ae,Y.paint[Ae],{validate:!1});for(var Ce in Y.layout)this.setLayoutProperty(Ce,Y.layout[Ce],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ys(se.paint)}}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},I.prototype.getLayoutProperty=function(Y){return Y==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Y)},I.prototype.setLayoutProperty=function(Y,se,Ae){if(Ae===void 0&&(Ae={}),se!=null){var Ce="layers."+this.id+".layout."+Y;if(this._validate(ts,Ce,Y,se,Ae))return}Y!=="visibility"?this._unevaluatedLayout.setValue(Y,se):this.visibility=se},I.prototype.getPaintProperty=function(Y){return y(Y,Io)?this._transitionablePaint.getTransition(Y.slice(0,-11)):this._transitionablePaint.getValue(Y)},I.prototype.setPaintProperty=function(Y,se,Ae){if(Ae===void 0&&(Ae={}),se!=null){var Ce="layers."+this.id+".paint."+Y;if(this._validate(ho,Ce,Y,se,Ae))return!1}if(y(Y,Io))return this._transitionablePaint.setTransition(Y.slice(0,-11),se||void 0),!1;var Ne=this._transitionablePaint._values[Y],Ke=Ne.property.specification["property-type"]==="cross-faded-data-driven",st=Ne.value.isDataDriven(),bt=Ne.value;this._transitionablePaint.setValue(Y,se),this._handleSpecialPaintPropertyUpdate(Y);var Tt=this._transitionablePaint._values[Y].value;return Tt.isDataDriven()||st||Ke||this._handleOverridablePaintPropertyUpdate(Y,bt,Tt)},I.prototype._handleSpecialPaintPropertyUpdate=function(Y){},I.prototype._handleOverridablePaintPropertyUpdate=function(Y,se,Ae){return!1},I.prototype.isHidden=function(Y){return!!(this.minzoom&&Y<this.minzoom)||!!(this.maxzoom&&Y>=this.maxzoom)||this.visibility==="none"},I.prototype.updateTransitions=function(Y){this._transitioningPaint=this._transitionablePaint.transitioned(Y,this._transitioningPaint)},I.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},I.prototype.recalculate=function(Y,se){Y.getCrossfadeParameters&&(this._crossfadeParameters=Y.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Y,void 0,se)),this.paint=this._transitioningPaint.possiblyEvaluate(Y,void 0,se)},I.prototype.serialize=function(){var Y={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Y.layout=Y.layout||{},Y.layout.visibility=this.visibility),f(Y,function(se,Ae){return!(se===void 0||Ae==="layout"&&!Object.keys(se).length||Ae==="paint"&&!Object.keys(se).length)})},I.prototype._validate=function(Y,se,Ae,Ce,Ne){return Ne===void 0&&(Ne={}),(!Ne||Ne.validate!==!1)&&Ea(this,Y.call(Eo,{key:se,layerType:this.type,objectKey:Ae,value:Ce,styleSpec:Ye,style:{glyphs:!0,sprite:!0}}))},I.prototype.is3D=function(){return!1},I.prototype.isTileClipped=function(){return!1},I.prototype.hasOffscreenPass=function(){return!1},I.prototype.resize=function(){},I.prototype.isStateDependent=function(){for(var Y in this.paint._values){var se=this.paint.get(Y);if(se instanceof Ai&&ko(se.property.specification)&&(se.value.kind==="source"||se.value.kind==="composite")&&se.value.isStateDependent)return!0}return!1},I}(rt),_l={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Xa=function(A,I){this._structArray=A,this._pos1=I*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},yi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Li(A,I){I===void 0&&(I=1);var Y=0,se=0;return{members:A.map(function(Ae){var Ce,Ne=(Ce=Ae.type,_l[Ce].BYTES_PER_ELEMENT),Ke=Y=Fa(Y,Math.max(I,Ne)),st=Ae.components||1;return se=Math.max(se,Ne),Y+=Ne*st,{name:Ae.name,type:Ae.type,components:st,offset:Ke}}),size:Fa(Y,Math.max(se,I)),alignment:I}}function Fa(A,I){return Math.ceil(A/I)*I}yi.serialize=function(A,I){return A._trim(),I&&(A.isTransferred=!0,I.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}},yi.deserialize=function(A){var I=Object.create(this.prototype);return I.arrayBuffer=A.arrayBuffer,I.length=A.length,I.capacity=A.arrayBuffer.byteLength/I.bytesPerElement,I._refreshViews(),I},yi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},yi.prototype.clear=function(){this.length=0},yi.prototype.resize=function(A){this.reserve(A),this.length=A},yi.prototype.reserve=function(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var I=this.uint8;this._refreshViews(),I&&this.uint8.set(I)}},yi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var os=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,Y,se)},I.prototype.emplace=function(Y,se,Ae){var Ce=2*Y;return this.int16[Ce+0]=se,this.int16[Ce+1]=Ae,Y},I}(yi);os.prototype.bytesPerElement=4,Dr("StructArrayLayout2i4",os);var hl=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae,Ce){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,Y,se,Ae,Ce)},I.prototype.emplace=function(Y,se,Ae,Ce,Ne){var Ke=4*Y;return this.int16[Ke+0]=se,this.int16[Ke+1]=Ae,this.int16[Ke+2]=Ce,this.int16[Ke+3]=Ne,Y},I}(yi);hl.prototype.bytesPerElement=8,Dr("StructArrayLayout4i8",hl);var Xe=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae,Ce,Ne,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Y,se,Ae,Ce,Ne,Ke)},I.prototype.emplace=function(Y,se,Ae,Ce,Ne,Ke,st){var bt=6*Y;return this.int16[bt+0]=se,this.int16[bt+1]=Ae,this.int16[bt+2]=Ce,this.int16[bt+3]=Ne,this.int16[bt+4]=Ke,this.int16[bt+5]=st,Y},I}(yi);Xe.prototype.bytesPerElement=12,Dr("StructArrayLayout2i4i12",Xe);var Je=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae,Ce,Ne,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Y,se,Ae,Ce,Ne,Ke)},I.prototype.emplace=function(Y,se,Ae,Ce,Ne,Ke,st){var bt=4*Y,Tt=8*Y;return this.int16[bt+0]=se,this.int16[bt+1]=Ae,this.uint8[Tt+4]=Ce,this.uint8[Tt+5]=Ne,this.uint8[Tt+6]=Ke,this.uint8[Tt+7]=st,Y},I}(yi);Je.prototype.bytesPerElement=8,Dr("StructArrayLayout2i4ub8",Je);var ot=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,Y,se)},I.prototype.emplace=function(Y,se,Ae){var Ce=2*Y;return this.float32[Ce+0]=se,this.float32[Ce+1]=Ae,Y},I}(yi);ot.prototype.bytesPerElement=8,Dr("StructArrayLayout2f8",ot);var B=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt){var qt=this.length;return this.resize(qt+1),this.emplace(qt,Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt)},I.prototype.emplace=function(Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt){var Bt=10*Y;return this.uint16[Bt+0]=se,this.uint16[Bt+1]=Ae,this.uint16[Bt+2]=Ce,this.uint16[Bt+3]=Ne,this.uint16[Bt+4]=Ke,this.uint16[Bt+5]=st,this.uint16[Bt+6]=bt,this.uint16[Bt+7]=Tt,this.uint16[Bt+8]=Rt,this.uint16[Bt+9]=qt,Y},I}(yi);B.prototype.bytesPerElement=20,Dr("StructArrayLayout10ui20",B);var G=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt,Bt){var an=this.length;return this.resize(an+1),this.emplace(an,Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt,Bt)},I.prototype.emplace=function(Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt,Bt,an){var un=12*Y;return this.int16[un+0]=se,this.int16[un+1]=Ae,this.int16[un+2]=Ce,this.int16[un+3]=Ne,this.uint16[un+4]=Ke,this.uint16[un+5]=st,this.uint16[un+6]=bt,this.uint16[un+7]=Tt,this.int16[un+8]=Rt,this.int16[un+9]=qt,this.int16[un+10]=Bt,this.int16[un+11]=an,Y},I}(yi);G.prototype.bytesPerElement=24,Dr("StructArrayLayout4i4ui4i24",G);var H=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Y,se,Ae)},I.prototype.emplace=function(Y,se,Ae,Ce){var Ne=3*Y;return this.float32[Ne+0]=se,this.float32[Ne+1]=Ae,this.float32[Ne+2]=Ce,Y},I}(yi);H.prototype.bytesPerElement=12,Dr("StructArrayLayout3f12",H);var L=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y){var se=this.length;return this.resize(se+1),this.emplace(se,Y)},I.prototype.emplace=function(Y,se){var Ae=1*Y;return this.uint32[Ae+0]=se,Y},I}(yi);L.prototype.bytesPerElement=4,Dr("StructArrayLayout1ul4",L);var q=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae,Ce,Ne,Ke,st,bt,Tt){var Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,Y,se,Ae,Ce,Ne,Ke,st,bt,Tt)},I.prototype.emplace=function(Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt){var qt=10*Y,Bt=5*Y;return this.int16[qt+0]=se,this.int16[qt+1]=Ae,this.int16[qt+2]=Ce,this.int16[qt+3]=Ne,this.int16[qt+4]=Ke,this.int16[qt+5]=st,this.uint32[Bt+3]=bt,this.uint16[qt+8]=Tt,this.uint16[qt+9]=Rt,Y},I}(yi);q.prototype.bytesPerElement=20,Dr("StructArrayLayout6i1ul2ui20",q);var Q=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae,Ce,Ne,Ke){var st=this.length;return this.resize(st+1),this.emplace(st,Y,se,Ae,Ce,Ne,Ke)},I.prototype.emplace=function(Y,se,Ae,Ce,Ne,Ke,st){var bt=6*Y;return this.int16[bt+0]=se,this.int16[bt+1]=Ae,this.int16[bt+2]=Ce,this.int16[bt+3]=Ne,this.int16[bt+4]=Ke,this.int16[bt+5]=st,Y},I}(yi);Q.prototype.bytesPerElement=12,Dr("StructArrayLayout2i2i2i12",Q);var ne=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae,Ce,Ne){var Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,Y,se,Ae,Ce,Ne)},I.prototype.emplace=function(Y,se,Ae,Ce,Ne,Ke){var st=4*Y,bt=8*Y;return this.float32[st+0]=se,this.float32[st+1]=Ae,this.float32[st+2]=Ce,this.int16[bt+6]=Ne,this.int16[bt+7]=Ke,Y},I}(yi);ne.prototype.bytesPerElement=16,Dr("StructArrayLayout2f1f2i16",ne);var ce=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae,Ce){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,Y,se,Ae,Ce)},I.prototype.emplace=function(Y,se,Ae,Ce,Ne){var Ke=12*Y,st=3*Y;return this.uint8[Ke+0]=se,this.uint8[Ke+1]=Ae,this.float32[st+1]=Ce,this.float32[st+2]=Ne,Y},I}(yi);ce.prototype.bytesPerElement=12,Dr("StructArrayLayout2ub2f12",ce);var ye=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Y,se,Ae)},I.prototype.emplace=function(Y,se,Ae,Ce){var Ne=3*Y;return this.uint16[Ne+0]=se,this.uint16[Ne+1]=Ae,this.uint16[Ne+2]=Ce,Y},I}(yi);ye.prototype.bytesPerElement=6,Dr("StructArrayLayout3ui6",ye);var Le=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt,Bt,an,un,kn,wn,Bn){var Un=this.length;return this.resize(Un+1),this.emplace(Un,Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt,Bt,an,un,kn,wn,Bn)},I.prototype.emplace=function(Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt,Bt,an,un,kn,wn,Bn,Un){var Xn=24*Y,Qn=12*Y,cr=48*Y;return this.int16[Xn+0]=se,this.int16[Xn+1]=Ae,this.uint16[Xn+2]=Ce,this.uint16[Xn+3]=Ne,this.uint32[Qn+2]=Ke,this.uint32[Qn+3]=st,this.uint32[Qn+4]=bt,this.uint16[Xn+10]=Tt,this.uint16[Xn+11]=Rt,this.uint16[Xn+12]=qt,this.float32[Qn+7]=Bt,this.float32[Qn+8]=an,this.uint8[cr+36]=un,this.uint8[cr+37]=kn,this.uint8[cr+38]=wn,this.uint32[Qn+10]=Bn,this.int16[Xn+22]=Un,Y},I}(yi);Le.prototype.bytesPerElement=48,Dr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Le);var Ie=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt,Bt,an,un,kn,wn,Bn,Un,Xn,Qn,cr,Tr,br,Sr,Or,Zr,Ur,Xr){var qr=this.length;return this.resize(qr+1),this.emplace(qr,Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt,Bt,an,un,kn,wn,Bn,Un,Xn,Qn,cr,Tr,br,Sr,Or,Zr,Ur,Xr)},I.prototype.emplace=function(Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt,Bt,an,un,kn,wn,Bn,Un,Xn,Qn,cr,Tr,br,Sr,Or,Zr,Ur,Xr,qr){var Br=34*Y,ui=17*Y;return this.int16[Br+0]=se,this.int16[Br+1]=Ae,this.int16[Br+2]=Ce,this.int16[Br+3]=Ne,this.int16[Br+4]=Ke,this.int16[Br+5]=st,this.int16[Br+6]=bt,this.int16[Br+7]=Tt,this.uint16[Br+8]=Rt,this.uint16[Br+9]=qt,this.uint16[Br+10]=Bt,this.uint16[Br+11]=an,this.uint16[Br+12]=un,this.uint16[Br+13]=kn,this.uint16[Br+14]=wn,this.uint16[Br+15]=Bn,this.uint16[Br+16]=Un,this.uint16[Br+17]=Xn,this.uint16[Br+18]=Qn,this.uint16[Br+19]=cr,this.uint16[Br+20]=Tr,this.uint16[Br+21]=br,this.uint16[Br+22]=Sr,this.uint32[ui+12]=Or,this.float32[ui+13]=Zr,this.float32[ui+14]=Ur,this.float32[ui+15]=Xr,this.float32[ui+16]=qr,Y},I}(yi);Ie.prototype.bytesPerElement=68,Dr("StructArrayLayout8i15ui1ul4f68",Ie);var je=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y){var se=this.length;return this.resize(se+1),this.emplace(se,Y)},I.prototype.emplace=function(Y,se){var Ae=1*Y;return this.float32[Ae+0]=se,Y},I}(yi);je.prototype.bytesPerElement=4,Dr("StructArrayLayout1f4",je);var qe=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Y,se,Ae)},I.prototype.emplace=function(Y,se,Ae,Ce){var Ne=3*Y;return this.int16[Ne+0]=se,this.int16[Ne+1]=Ae,this.int16[Ne+2]=Ce,Y},I}(yi);qe.prototype.bytesPerElement=6,Dr("StructArrayLayout3i6",qe);var $e=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,Y,se,Ae)},I.prototype.emplace=function(Y,se,Ae,Ce){var Ne=2*Y,Ke=4*Y;return this.uint32[Ne+0]=se,this.uint16[Ke+2]=Ae,this.uint16[Ke+3]=Ce,Y},I}(yi);$e.prototype.bytesPerElement=8,Dr("StructArrayLayout1ul2ui8",$e);var lt=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,Y,se)},I.prototype.emplace=function(Y,se,Ae){var Ce=2*Y;return this.uint16[Ce+0]=se,this.uint16[Ce+1]=Ae,Y},I}(yi);lt.prototype.bytesPerElement=4,Dr("StructArrayLayout2ui4",lt);var ft=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y){var se=this.length;return this.resize(se+1),this.emplace(se,Y)},I.prototype.emplace=function(Y,se){var Ae=1*Y;return this.uint16[Ae+0]=se,Y},I}(yi);ft.prototype.bytesPerElement=2,Dr("StructArrayLayout1ui2",ft);var _t=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,se,Ae,Ce){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,Y,se,Ae,Ce)},I.prototype.emplace=function(Y,se,Ae,Ce,Ne){var Ke=4*Y;return this.float32[Ke+0]=se,this.float32[Ke+1]=Ae,this.float32[Ke+2]=Ce,this.float32[Ke+3]=Ne,Y},I}(yi);_t.prototype.bytesPerElement=16,Dr("StructArrayLayout4f16",_t);var St=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I;var Y={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Y.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Y.x1.get=function(){return this._structArray.int16[this._pos2+2]},Y.y1.get=function(){return this._structArray.int16[this._pos2+3]},Y.x2.get=function(){return this._structArray.int16[this._pos2+4]},Y.y2.get=function(){return this._structArray.int16[this._pos2+5]},Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(I.prototype,Y),I}(Xa);St.prototype.size=20;var At=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.get=function(Y){return new St(this,Y)},I}(q);Dr("CollisionBoxArray",At);var Ft=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Y.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Y.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Y.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Y.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Y.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Y.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Y.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Y.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Y.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Y.placedOrientation.set=function(se){this._structArray.uint8[this._pos1+37]=se},Y.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Y.hidden.set=function(se){this._structArray.uint8[this._pos1+38]=se},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Y.crossTileID.set=function(se){this._structArray.uint32[this._pos4+10]=se},Y.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(I.prototype,Y),I}(Xa);Ft.prototype.size=48;var Ot=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.get=function(Y){return new Ft(this,Y)},I}(Le);Dr("PlacedSymbolArray",Ot);var Zt=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Y.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Y.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Y.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Y.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Y.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Y.key.get=function(){return this._structArray.uint16[this._pos2+8]},Y.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Y.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Y.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Y.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Y.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Y.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Y.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Y.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Y.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Y.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Y.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Y.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Y.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Y.crossTileID.set=function(se){this._structArray.uint32[this._pos4+12]=se},Y.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Y.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Y.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Y.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(I.prototype,Y),I}(Xa);Zt.prototype.size=68;var Ht=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.get=function(Y){return new Zt(this,Y)},I}(Ie);Dr("SymbolInstanceArray",Ht);var Nt=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.getoffsetX=function(Y){return this.float32[1*Y+0]},I}(je);Dr("GlyphOffsetArray",Nt);var gn=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.getx=function(Y){return this.int16[3*Y+0]},I.prototype.gety=function(Y){return this.int16[3*Y+1]},I.prototype.gettileUnitDistanceFromAnchor=function(Y){return this.int16[3*Y+2]},I}(qe);Dr("SymbolLineVertexArray",gn);var yn=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I;var Y={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(I.prototype,Y),I}(Xa);yn.prototype.size=8;var Cn=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.get=function(Y){return new yn(this,Y)},I}($e);Dr("FeatureIndexArray",Cn);var Dn=Li([{name:"a_pos",components:2,type:"Int16"}],4).members,Wn=function(A){A===void 0&&(A=[]),this.segments=A};function sr(A,I){return 256*(A=u(Math.floor(A),0,255))+u(Math.floor(I),0,255)}Wn.prototype.prepareSegment=function(A,I,Y,se){var Ae=this.segments[this.segments.length-1];return A>Wn.MAX_VERTEX_ARRAY_LENGTH&&E("Max vertices per segment is "+Wn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!Ae||Ae.vertexLength+A>Wn.MAX_VERTEX_ARRAY_LENGTH||Ae.sortKey!==se)&&(Ae={vertexOffset:I.length,primitiveOffset:Y.length,vertexLength:0,primitiveLength:0},se!==void 0&&(Ae.sortKey=se),this.segments.push(Ae)),Ae},Wn.prototype.get=function(){return this.segments},Wn.prototype.destroy=function(){for(var A=0,I=this.segments;A<I.length;A+=1){var Y=I[A];for(var se in Y.vaos)Y.vaos[se].destroy()}},Wn.simpleSegment=function(A,I,Y,se){return new Wn([{vertexOffset:A,primitiveOffset:I,vertexLength:Y,primitiveLength:se,vaos:{},sortKey:0}])},Wn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Dr("SegmentVector",Wn);var mr=Li([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Zn=T(function(A){A.exports=function(I,Y){var se,Ae,Ce,Ne,Ke,st,bt,Tt;for(se=3&I.length,Ae=I.length-se,Ce=Y,Ke=3432918353,st=461845907,Tt=0;Tt<Ae;)bt=255&I.charCodeAt(Tt)|(255&I.charCodeAt(++Tt))<<8|(255&I.charCodeAt(++Tt))<<16|(255&I.charCodeAt(++Tt))<<24,++Tt,Ce=27492+(65535&(Ne=5*(65535&(Ce=(Ce^=bt=(65535&(bt=(bt=(65535&bt)*Ke+(((bt>>>16)*Ke&65535)<<16)&4294967295)<<15|bt>>>17))*st+(((bt>>>16)*st&65535)<<16)&4294967295)<<13|Ce>>>19))+((5*(Ce>>>16)&65535)<<16)&4294967295))+((58964+(Ne>>>16)&65535)<<16);switch(bt=0,se){case 3:bt^=(255&I.charCodeAt(Tt+2))<<16;case 2:bt^=(255&I.charCodeAt(Tt+1))<<8;case 1:Ce^=bt=(65535&(bt=(bt=(65535&(bt^=255&I.charCodeAt(Tt)))*Ke+(((bt>>>16)*Ke&65535)<<16)&4294967295)<<15|bt>>>17))*st+(((bt>>>16)*st&65535)<<16)&4294967295}return Ce^=I.length,Ce=2246822507*(65535&(Ce^=Ce>>>16))+((2246822507*(Ce>>>16)&65535)<<16)&4294967295,Ce=3266489909*(65535&(Ce^=Ce>>>13))+((3266489909*(Ce>>>16)&65535)<<16)&4294967295,(Ce^=Ce>>>16)>>>0}}),pr=T(function(A){A.exports=function(I,Y){for(var se,Ae=I.length,Ce=Y^Ae,Ne=0;Ae>=4;)se=1540483477*(65535&(se=255&I.charCodeAt(Ne)|(255&I.charCodeAt(++Ne))<<8|(255&I.charCodeAt(++Ne))<<16|(255&I.charCodeAt(++Ne))<<24))+((1540483477*(se>>>16)&65535)<<16),Ce=1540483477*(65535&Ce)+((1540483477*(Ce>>>16)&65535)<<16)^(se=1540483477*(65535&(se^=se>>>24))+((1540483477*(se>>>16)&65535)<<16)),Ae-=4,++Ne;switch(Ae){case 3:Ce^=(255&I.charCodeAt(Ne+2))<<16;case 2:Ce^=(255&I.charCodeAt(Ne+1))<<8;case 1:Ce=1540483477*(65535&(Ce^=255&I.charCodeAt(Ne)))+((1540483477*(Ce>>>16)&65535)<<16)}return Ce=1540483477*(65535&(Ce^=Ce>>>13))+((1540483477*(Ce>>>16)&65535)<<16),(Ce^=Ce>>>15)>>>0}}),Ar=Zn,Fr=Zn,ar=pr;Ar.murmur3=Fr,Ar.murmur2=ar;var fr=function(){this.ids=[],this.positions=[],this.indexed=!1};fr.prototype.add=function(A,I,Y,se){this.ids.push(yr(A)),this.positions.push(I,Y,se)},fr.prototype.getPositions=function(A){for(var I=yr(A),Y=0,se=this.ids.length-1;Y<se;){var Ae=Y+se>>1;this.ids[Ae]>=I?se=Ae:Y=Ae+1}for(var Ce=[];this.ids[Y]===I;){var Ne=this.positions[3*Y],Ke=this.positions[3*Y+1],st=this.positions[3*Y+2];Ce.push({index:Ne,start:Ke,end:st}),Y++}return Ce},fr.serialize=function(A,I){var Y=new Float64Array(A.ids),se=new Uint32Array(A.positions);return zr(Y,se,0,Y.length-1),I&&I.push(Y.buffer,se.buffer),{ids:Y,positions:se}},fr.deserialize=function(A){var I=new fr;return I.ids=A.ids,I.positions=A.positions,I.indexed=!0,I};var Er=Math.pow(2,53)-1;function yr(A){var I=+A;return!isNaN(I)&&I<=Er?I:Ar(String(A))}function zr(A,I,Y,se){for(;Y<se;){for(var Ae=A[Y+se>>1],Ce=Y-1,Ne=se+1;;){do Ce++;while(A[Ce]<Ae);do Ne--;while(A[Ne]>Ae);if(Ce>=Ne)break;Vr(A,Ce,Ne),Vr(I,3*Ce,3*Ne),Vr(I,3*Ce+1,3*Ne+1),Vr(I,3*Ce+2,3*Ne+2)}Ne-Y<se-Ne?(zr(A,I,Y,Ne),Y=Ne+1):(zr(A,I,Ne+1,se),se=Ne)}}function Vr(A,I,Y){var se=A[I];A[I]=A[Y],A[Y]=se}Dr("FeaturePositionMap",fr);var Jr=function(A,I){this.gl=A.gl,this.location=I},Qr=function(A){function I(Y,se){A.call(this,Y,se),this.current=0}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1i(this.location,Y))},I}(Jr),ri=function(A){function I(Y,se){A.call(this,Y,se),this.current=0}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1f(this.location,Y))},I}(Jr),ai=function(A){function I(Y,se){A.call(this,Y,se),this.current=[0,0]}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]||(this.current=Y,this.gl.uniform2f(this.location,Y[0],Y[1]))},I}(Jr),Mi=function(A){function I(Y,se){A.call(this,Y,se),this.current=[0,0,0]}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]||(this.current=Y,this.gl.uniform3f(this.location,Y[0],Y[1],Y[2]))},I}(Jr),Vi=function(A){function I(Y,se){A.call(this,Y,se),this.current=[0,0,0,0]}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]&&Y[3]===this.current[3]||(this.current=Y,this.gl.uniform4f(this.location,Y[0],Y[1],Y[2],Y[3]))},I}(Jr),Aa=function(A){function I(Y,se){A.call(this,Y,se),this.current=In.transparent}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){Y.r===this.current.r&&Y.g===this.current.g&&Y.b===this.current.b&&Y.a===this.current.a||(this.current=Y,this.gl.uniform4f(this.location,Y.r,Y.g,Y.b,Y.a))},I}(Jr),ia=new Float32Array(16),va=function(A){function I(Y,se){A.call(this,Y,se),this.current=ia}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.set=function(Y){if(Y[12]!==this.current[12]||Y[0]!==this.current[0])return this.current=Y,void this.gl.uniformMatrix4fv(this.location,!1,Y);for(var se=1;se<16;se++)if(Y[se]!==this.current[se]){this.current=Y,this.gl.uniformMatrix4fv(this.location,!1,Y);break}},I}(Jr);function Ci(A){return[sr(255*A.r,255*A.g),sr(255*A.b,255*A.a)]}var si=function(A,I,Y){this.value=A,this.uniformNames=I.map(function(se){return"u_"+se}),this.type=Y};si.prototype.setUniform=function(A,I,Y){A.set(Y.constantOr(this.value))},si.prototype.getBinding=function(A,I,Y){return this.type==="color"?new Aa(A,I):new ri(A,I)};var Fi=function(A,I){this.uniformNames=I.map(function(Y){return"u_"+Y}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Fi.prototype.setConstantPatternPositions=function(A,I){this.pixelRatioFrom=I.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=I.tlbr,this.patternTo=A.tlbr},Fi.prototype.setUniform=function(A,I,Y,se){var Ae=se==="u_pattern_to"?this.patternTo:se==="u_pattern_from"?this.patternFrom:se==="u_pixel_ratio_to"?this.pixelRatioTo:se==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Ae&&A.set(Ae)},Fi.prototype.getBinding=function(A,I,Y){return Y.substr(0,9)==="u_pattern"?new Vi(A,I):new ri(A,I)};var xi=function(A,I,Y,se){this.expression=A,this.type=Y,this.maxValue=0,this.paintVertexAttributes=I.map(function(Ae){return{name:"a_"+Ae,type:"Float32",components:Y==="color"?2:1,offset:0}}),this.paintVertexArray=new se};xi.prototype.populatePaintArray=function(A,I,Y,se,Ae){var Ce=this.paintVertexArray.length,Ne=this.expression.evaluate(new ii(0),I,{},se,[],Ae);this.paintVertexArray.resize(A),this._setPaintValue(Ce,A,Ne)},xi.prototype.updatePaintArray=function(A,I,Y,se){var Ae=this.expression.evaluate({zoom:0},Y,se);this._setPaintValue(A,I,Ae)},xi.prototype._setPaintValue=function(A,I,Y){if(this.type==="color")for(var se=Ci(Y),Ae=A;Ae<I;Ae++)this.paintVertexArray.emplace(Ae,se[0],se[1]);else{for(var Ce=A;Ce<I;Ce++)this.paintVertexArray.emplace(Ce,Y);this.maxValue=Math.max(this.maxValue,Math.abs(Y))}},xi.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},xi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ci=function(A,I,Y,se,Ae,Ce){this.expression=A,this.uniformNames=I.map(function(Ne){return"u_"+Ne+"_t"}),this.type=Y,this.useIntegerZoom=se,this.zoom=Ae,this.maxValue=0,this.paintVertexAttributes=I.map(function(Ne){return{name:"a_"+Ne,type:"Float32",components:Y==="color"?4:2,offset:0}}),this.paintVertexArray=new Ce};ci.prototype.populatePaintArray=function(A,I,Y,se,Ae){var Ce=this.expression.evaluate(new ii(this.zoom),I,{},se,[],Ae),Ne=this.expression.evaluate(new ii(this.zoom+1),I,{},se,[],Ae),Ke=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(Ke,A,Ce,Ne)},ci.prototype.updatePaintArray=function(A,I,Y,se){var Ae=this.expression.evaluate({zoom:this.zoom},Y,se),Ce=this.expression.evaluate({zoom:this.zoom+1},Y,se);this._setPaintValue(A,I,Ae,Ce)},ci.prototype._setPaintValue=function(A,I,Y,se){if(this.type==="color")for(var Ae=Ci(Y),Ce=Ci(se),Ne=A;Ne<I;Ne++)this.paintVertexArray.emplace(Ne,Ae[0],Ae[1],Ce[0],Ce[1]);else{for(var Ke=A;Ke<I;Ke++)this.paintVertexArray.emplace(Ke,Y,se);this.maxValue=Math.max(this.maxValue,Math.abs(Y),Math.abs(se))}},ci.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ci.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ci.prototype.setUniform=function(A,I){var Y=this.useIntegerZoom?Math.floor(I.zoom):I.zoom,se=u(this.expression.interpolationFactor(Y,this.zoom,this.zoom+1),0,1);A.set(se)},ci.prototype.getBinding=function(A,I,Y){return new ri(A,I)};var Bi=function(A,I,Y,se,Ae,Ce){this.expression=A,this.type=I,this.useIntegerZoom=Y,this.zoom=se,this.layerId=Ce,this.zoomInPaintVertexArray=new Ae,this.zoomOutPaintVertexArray=new Ae};Bi.prototype.populatePaintArray=function(A,I,Y){var se=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(se,A,I.patterns&&I.patterns[this.layerId],Y)},Bi.prototype.updatePaintArray=function(A,I,Y,se,Ae){this._setPaintValues(A,I,Y.patterns&&Y.patterns[this.layerId],Ae)},Bi.prototype._setPaintValues=function(A,I,Y,se){if(se&&Y){var Ae=Y.min,Ce=Y.mid,Ne=Y.max,Ke=se[Ae],st=se[Ce],bt=se[Ne];if(Ke&&st&&bt)for(var Tt=A;Tt<I;Tt++)this.zoomInPaintVertexArray.emplace(Tt,st.tl[0],st.tl[1],st.br[0],st.br[1],Ke.tl[0],Ke.tl[1],Ke.br[0],Ke.br[1],st.pixelRatio,Ke.pixelRatio),this.zoomOutPaintVertexArray.emplace(Tt,st.tl[0],st.tl[1],st.br[0],st.br[1],bt.tl[0],bt.tl[1],bt.br[0],bt.br[1],st.pixelRatio,bt.pixelRatio)}},Bi.prototype.upload=function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,mr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,mr.members,this.expression.isStateDependent))},Bi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var qi=function(A,I,Y){this.binders={},this._buffers=[];var se=[];for(var Ae in A.paint._values)if(Y(Ae)){var Ce=A.paint.get(Ae);if(Ce instanceof Ai&&ko(Ce.property.specification)){var Ne=Es(Ae,A.type),Ke=Ce.value,st=Ce.property.specification.type,bt=Ce.property.useIntegerZoom,Tt=Ce.property.specification["property-type"],Rt=Tt==="cross-faded"||Tt==="cross-faded-data-driven";if(Ke.kind==="constant")this.binders[Ae]=Rt?new Fi(Ke.value,Ne):new si(Ke.value,Ne,st),se.push("/u_"+Ae);else if(Ke.kind==="source"||Rt){var qt=Ls(Ae,st,"source");this.binders[Ae]=Rt?new Bi(Ke,st,bt,I,qt,A.id):new xi(Ke,Ne,st,qt),se.push("/a_"+Ae)}else{var Bt=Ls(Ae,st,"composite");this.binders[Ae]=new ci(Ke,Ne,st,bt,I,Bt),se.push("/z_"+Ae)}}}this.cacheKey=se.sort().join("")};qi.prototype.getMaxValue=function(A){var I=this.binders[A];return I instanceof xi||I instanceof ci?I.maxValue:0},qi.prototype.populatePaintArrays=function(A,I,Y,se,Ae){for(var Ce in this.binders){var Ne=this.binders[Ce];(Ne instanceof xi||Ne instanceof ci||Ne instanceof Bi)&&Ne.populatePaintArray(A,I,Y,se,Ae)}},qi.prototype.setConstantPatternPositions=function(A,I){for(var Y in this.binders){var se=this.binders[Y];se instanceof Fi&&se.setConstantPatternPositions(A,I)}},qi.prototype.updatePaintArrays=function(A,I,Y,se,Ae){var Ce=!1;for(var Ne in A)for(var Ke=0,st=I.getPositions(Ne);Ke<st.length;Ke+=1){var bt=st[Ke],Tt=Y.feature(bt.index);for(var Rt in this.binders){var qt=this.binders[Rt];if((qt instanceof xi||qt instanceof ci||qt instanceof Bi)&&qt.expression.isStateDependent===!0){var Bt=se.paint.get(Rt);qt.expression=Bt.value,qt.updatePaintArray(bt.start,bt.end,Tt,A[Ne],Ae),Ce=!0}}}return Ce},qi.prototype.defines=function(){var A=[];for(var I in this.binders){var Y=this.binders[I];(Y instanceof si||Y instanceof Fi)&&A.push.apply(A,Y.uniformNames.map(function(se){return"#define HAS_UNIFORM_"+se}))}return A},qi.prototype.getBinderAttributes=function(){var A=[];for(var I in this.binders){var Y=this.binders[I];if(Y instanceof xi||Y instanceof ci)for(var se=0;se<Y.paintVertexAttributes.length;se++)A.push(Y.paintVertexAttributes[se].name);else if(Y instanceof Bi)for(var Ae=0;Ae<mr.members.length;Ae++)A.push(mr.members[Ae].name)}return A},qi.prototype.getBinderUniforms=function(){var A=[];for(var I in this.binders){var Y=this.binders[I];if(Y instanceof si||Y instanceof Fi||Y instanceof ci)for(var se=0,Ae=Y.uniformNames;se<Ae.length;se+=1){var Ce=Ae[se];A.push(Ce)}}return A},qi.prototype.getPaintVertexBuffers=function(){return this._buffers},qi.prototype.getUniforms=function(A,I){var Y=[];for(var se in this.binders){var Ae=this.binders[se];if(Ae instanceof si||Ae instanceof Fi||Ae instanceof ci)for(var Ce=0,Ne=Ae.uniformNames;Ce<Ne.length;Ce+=1){var Ke=Ne[Ce];if(I[Ke]){var st=Ae.getBinding(A,I[Ke],Ke);Y.push({name:Ke,property:se,binding:st})}}}return Y},qi.prototype.setUniforms=function(A,I,Y,se){for(var Ae=0,Ce=I;Ae<Ce.length;Ae+=1){var Ne=Ce[Ae],Ke=Ne.name,st=Ne.property,bt=Ne.binding;this.binders[st].setUniform(bt,se,Y.get(st),Ke)}},qi.prototype.updatePaintBuffers=function(A){for(var I in this._buffers=[],this.binders){var Y=this.binders[I];if(A&&Y instanceof Bi){var se=A.fromScale===2?Y.zoomInPaintVertexBuffer:Y.zoomOutPaintVertexBuffer;se&&this._buffers.push(se)}else(Y instanceof xi||Y instanceof ci)&&Y.paintVertexBuffer&&this._buffers.push(Y.paintVertexBuffer)}},qi.prototype.upload=function(A){for(var I in this.binders){var Y=this.binders[I];(Y instanceof xi||Y instanceof ci||Y instanceof Bi)&&Y.upload(A)}this.updatePaintBuffers()},qi.prototype.destroy=function(){for(var A in this.binders){var I=this.binders[A];(I instanceof xi||I instanceof ci||I instanceof Bi)&&I.destroy()}};var ea=function(A,I,Y){Y===void 0&&(Y=function(){return!0}),this.programConfigurations={};for(var se=0,Ae=A;se<Ae.length;se+=1){var Ce=Ae[se];this.programConfigurations[Ce.id]=new qi(Ce,I,Y)}this.needsUpload=!1,this._featureMap=new fr,this._bufferOffset=0};function Es(A,I){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(I+"-","").replace(/-/g,"_")]}function Ls(A,I,Y){var se={color:{source:ot,composite:_t},number:{source:je,composite:ot}},Ae=function(Ce){return{"line-pattern":{source:B,composite:B},"fill-pattern":{source:B,composite:B},"fill-extrusion-pattern":{source:B,composite:B}}[Ce]}(A);return Ae&&Ae[Y]||se[I][Y]}ea.prototype.populatePaintArrays=function(A,I,Y,se,Ae,Ce){for(var Ne in this.programConfigurations)this.programConfigurations[Ne].populatePaintArrays(A,I,se,Ae,Ce);I.id!==void 0&&this._featureMap.add(I.id,Y,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0},ea.prototype.updatePaintArrays=function(A,I,Y,se){for(var Ae=0,Ce=Y;Ae<Ce.length;Ae+=1){var Ne=Ce[Ae];this.needsUpload=this.programConfigurations[Ne.id].updatePaintArrays(A,this._featureMap,I,Ne,se)||this.needsUpload}},ea.prototype.get=function(A){return this.programConfigurations[A]},ea.prototype.upload=function(A){if(this.needsUpload){for(var I in this.programConfigurations)this.programConfigurations[I].upload(A);this.needsUpload=!1}},ea.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()},Dr("ConstantBinder",si),Dr("CrossFadedConstantBinder",Fi),Dr("SourceExpressionBinder",xi),Dr("CrossFadedCompositeBinder",Bi),Dr("CompositeExpressionBinder",ci),Dr("ProgramConfiguration",qi,{omit:["_buffers"]}),Dr("ProgramConfigurationSet",ea);var fi=8192,Js=Math.pow(2,14)-1,qs=-Js-1;function Yo(A){for(var I=fi/A.extent,Y=A.loadGeometry(),se=0;se<Y.length;se++)for(var Ae=Y[se],Ce=0;Ce<Ae.length;Ce++){var Ne=Ae[Ce],Ke=Math.round(Ne.x*I),st=Math.round(Ne.y*I);Ne.x=u(Ke,qs,Js),Ne.y=u(st,qs,Js),(Ke<Ne.x||Ke>Ne.x+1||st<Ne.y||st>Ne.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return Y}function Ni(A,I){return{type:A.type,id:A.id,properties:A.properties,geometry:I?Yo(A):[]}}function Za(A,I,Y,se,Ae){A.emplaceBack(2*I+(se+1)/2,2*Y+(Ae+1)/2)}var fa=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new os,this.indexArray=new ye,this.segments=new Wn,this.programConfigurations=new ea(A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};function El(A,I){for(var Y=0;Y<A.length;Y++)if(Qs(I,A[Y]))return!0;for(var se=0;se<I.length;se++)if(Qs(A,I[se]))return!0;return!!wl(A,I)}function bc(A,I,Y){return!!Qs(A,I)||!!Tl(I,A,Y)}function Du(A,I){if(A.length===1)return Ru(I,A[0]);for(var Y=0;Y<I.length;Y++)for(var se=I[Y],Ae=0;Ae<se.length;Ae++)if(Qs(A,se[Ae]))return!0;for(var Ce=0;Ce<A.length;Ce++)if(Ru(I,A[Ce]))return!0;for(var Ne=0;Ne<I.length;Ne++)if(wl(A,I[Ne]))return!0;return!1}function _c(A,I,Y){if(A.length>1){if(wl(A,I))return!0;for(var se=0;se<I.length;se++)if(Tl(I[se],A,Y))return!0}for(var Ae=0;Ae<A.length;Ae++)if(Tl(A[Ae],I,Y))return!0;return!1}function wl(A,I){if(A.length===0||I.length===0)return!1;for(var Y=0;Y<A.length-1;Y++)for(var se=A[Y],Ae=A[Y+1],Ce=0;Ce<I.length-1;Ce++)if(wc(se,Ae,I[Ce],I[Ce+1]))return!0;return!1}function wc(A,I,Y,se){return P(A,Y,se)!==P(I,Y,se)&&P(A,I,Y)!==P(A,I,se)}function Tl(A,I,Y){var se=Y*Y;if(I.length===1)return A.distSqr(I[0])<se;for(var Ae=1;Ae<I.length;Ae++)if(zu(A,I[Ae-1],I[Ae])<se)return!0;return!1}function zu(A,I,Y){var se=I.distSqr(Y);if(se===0)return A.distSqr(I);var Ae=((A.x-I.x)*(Y.x-I.x)+(A.y-I.y)*(Y.y-I.y))/se;return Ae<0?A.distSqr(I):Ae>1?A.distSqr(Y):A.distSqr(Y.sub(I)._mult(Ae)._add(I))}function Ru(A,I){for(var Y,se,Ae,Ce=!1,Ne=0;Ne<A.length;Ne++)for(var Ke=0,st=(Y=A[Ne]).length-1;Ke<Y.length;st=Ke++)se=Y[Ke],Ae=Y[st],se.y>I.y!=Ae.y>I.y&&I.x<(Ae.x-se.x)*(I.y-se.y)/(Ae.y-se.y)+se.x&&(Ce=!Ce);return Ce}function Qs(A,I){for(var Y=!1,se=0,Ae=A.length-1;se<A.length;Ae=se++){var Ce=A[se],Ne=A[Ae];Ce.y>I.y!=Ne.y>I.y&&I.x<(Ne.x-Ce.x)*(I.y-Ce.y)/(Ne.y-Ce.y)+Ce.x&&(Y=!Y)}return Y}function qh(A,I,Y){var se=Y[0],Ae=Y[2];if(A.x<se.x&&I.x<se.x||A.x>Ae.x&&I.x>Ae.x||A.y<se.y&&I.y<se.y||A.y>Ae.y&&I.y>Ae.y)return!1;var Ce=P(A,I,Y[0]);return Ce!==P(A,I,Y[1])||Ce!==P(A,I,Y[2])||Ce!==P(A,I,Y[3])}function su(A,I,Y){var se=I.paint.get(A).value;return se.kind==="constant"?se.value:Y.programConfigurations.get(I.id).getMaxValue(A)}function Fu(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function Bu(A,I,Y,se,Ae){if(!I[0]&&!I[1])return A;var Ce=t.convert(I)._mult(Ae);Y==="viewport"&&Ce._rotate(-se);for(var Ne=[],Ke=0;Ke<A.length;Ke++){var st=A[Ke];Ne.push(st.sub(Ce))}return Ne}fa.prototype.populate=function(A,I,Y){var se=this.layers[0],Ae=[],Ce=null;se.type==="circle"&&(Ce=se.layout.get("circle-sort-key"));for(var Ne=0,Ke=A;Ne<Ke.length;Ne+=1){var st=Ke[Ne],bt=st.feature,Tt=st.id,Rt=st.index,qt=st.sourceLayerIndex,Bt=this.layers[0]._featureFilter.needGeometry,an=Ni(bt,Bt);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),an,Y)){var un=Ce?Ce.evaluate(an,{},Y):void 0,kn={id:Tt,properties:bt.properties,type:bt.type,sourceLayerIndex:qt,index:Rt,geometry:Bt?an.geometry:Yo(bt),patterns:{},sortKey:un};Ae.push(kn)}}Ce&&Ae.sort(function(Sr,Or){return Sr.sortKey-Or.sortKey});for(var wn=0,Bn=Ae;wn<Bn.length;wn+=1){var Un=Bn[wn],Xn=Un,Qn=Xn.geometry,cr=Xn.index,Tr=Xn.sourceLayerIndex,br=A[cr].feature;this.addFeature(Un,Qn,cr,Y),I.featureIndex.insert(br,Qn,cr,Tr,this.index)}},fa.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Y)},fa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},fa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},fa.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Dn),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},fa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},fa.prototype.addFeature=function(A,I,Y,se){for(var Ae=0,Ce=I;Ae<Ce.length;Ae+=1)for(var Ne=0,Ke=Ce[Ae];Ne<Ke.length;Ne+=1){var st=Ke[Ne],bt=st.x,Tt=st.y;if(!(bt<0||bt>=fi||Tt<0||Tt>=fi)){var Rt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),qt=Rt.vertexLength;Za(this.layoutVertexArray,bt,Tt,-1,-1),Za(this.layoutVertexArray,bt,Tt,1,-1),Za(this.layoutVertexArray,bt,Tt,1,1),Za(this.layoutVertexArray,bt,Tt,-1,1),this.indexArray.emplaceBack(qt,qt+1,qt+2),this.indexArray.emplaceBack(qt,qt+3,qt+2),Rt.vertexLength+=4,Rt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,{},se)},Dr("CircleBucket",fa,{omit:["layers"]});var Hh=new Zi({"circle-sort-key":new Hr(Ye.layout_circle["circle-sort-key"])}),Gh={paint:new Zi({"circle-radius":new Hr(Ye.paint_circle["circle-radius"]),"circle-color":new Hr(Ye.paint_circle["circle-color"]),"circle-blur":new Hr(Ye.paint_circle["circle-blur"]),"circle-opacity":new Hr(Ye.paint_circle["circle-opacity"]),"circle-translate":new Rr(Ye.paint_circle["circle-translate"]),"circle-translate-anchor":new Rr(Ye.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Rr(Ye.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Rr(Ye.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Hr(Ye.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Hr(Ye.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Hr(Ye.paint_circle["circle-stroke-opacity"])}),layout:Hh},ss=typeof Float32Array!="undefined"?Float32Array:Array;function Tc(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function cf(A,I,Y){var se=I[0],Ae=I[1],Ce=I[2],Ne=I[3],Ke=I[4],st=I[5],bt=I[6],Tt=I[7],Rt=I[8],qt=I[9],Bt=I[10],an=I[11],un=I[12],kn=I[13],wn=I[14],Bn=I[15],Un=Y[0],Xn=Y[1],Qn=Y[2],cr=Y[3];return A[0]=Un*se+Xn*Ke+Qn*Rt+cr*un,A[1]=Un*Ae+Xn*st+Qn*qt+cr*kn,A[2]=Un*Ce+Xn*bt+Qn*Bt+cr*wn,A[3]=Un*Ne+Xn*Tt+Qn*an+cr*Bn,Un=Y[4],Xn=Y[5],Qn=Y[6],cr=Y[7],A[4]=Un*se+Xn*Ke+Qn*Rt+cr*un,A[5]=Un*Ae+Xn*st+Qn*qt+cr*kn,A[6]=Un*Ce+Xn*bt+Qn*Bt+cr*wn,A[7]=Un*Ne+Xn*Tt+Qn*an+cr*Bn,Un=Y[8],Xn=Y[9],Qn=Y[10],cr=Y[11],A[8]=Un*se+Xn*Ke+Qn*Rt+cr*un,A[9]=Un*Ae+Xn*st+Qn*qt+cr*kn,A[10]=Un*Ce+Xn*bt+Qn*Bt+cr*wn,A[11]=Un*Ne+Xn*Tt+Qn*an+cr*Bn,Un=Y[12],Xn=Y[13],Qn=Y[14],cr=Y[15],A[12]=Un*se+Xn*Ke+Qn*Rt+cr*un,A[13]=Un*Ae+Xn*st+Qn*qt+cr*kn,A[14]=Un*Ce+Xn*bt+Qn*Bt+cr*wn,A[15]=Un*Ne+Xn*Tt+Qn*an+cr*Bn,A}Math.hypot||(Math.hypot=function(){for(var A=arguments,I=0,Y=arguments.length;Y--;)I+=A[Y]*A[Y];return Math.sqrt(I)});var Wh=cf,Nu,Yh=function(A,I,Y){return A[0]=I[0]-Y[0],A[1]=I[1]-Y[1],A[2]=I[2]-Y[2],A};function ju(A,I,Y){var se=I[0],Ae=I[1],Ce=I[2],Ne=I[3];return A[0]=Y[0]*se+Y[4]*Ae+Y[8]*Ce+Y[12]*Ne,A[1]=Y[1]*se+Y[5]*Ae+Y[9]*Ce+Y[13]*Ne,A[2]=Y[2]*se+Y[6]*Ae+Y[10]*Ce+Y[14]*Ne,A[3]=Y[3]*se+Y[7]*Ae+Y[11]*Ce+Y[15]*Ne,A}Nu=new ss(3),ss!=Float32Array&&(Nu[0]=0,Nu[1]=0,Nu[2]=0),function(){var A=new ss(4);ss!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0)}();var Xh=function(A){var I=A[0],Y=A[1];return I*I+Y*Y},Zh=(function(){var A=new ss(2);ss!=Float32Array&&(A[0]=0,A[1]=0)}(),function(A){function I(Y){A.call(this,Y,Gh)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.createBucket=function(Y){return new fa(Y)},I.prototype.queryRadius=function(Y){var se=Y;return su("circle-radius",this,se)+su("circle-stroke-width",this,se)+Fu(this.paint.get("circle-translate"))},I.prototype.queryIntersectsFeature=function(Y,se,Ae,Ce,Ne,Ke,st,bt){for(var Tt=Bu(Y,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ke.angle,st),Rt=this.paint.get("circle-radius").evaluate(se,Ae)+this.paint.get("circle-stroke-width").evaluate(se,Ae),qt=this.paint.get("circle-pitch-alignment")==="map",Bt=qt?Tt:function(Tr,br){return Tr.map(function(Sr){return ff(Sr,br)})}(Tt,bt),an=qt?Rt*st:Rt,un=0,kn=Ce;un<kn.length;un+=1)for(var wn=0,Bn=kn[un];wn<Bn.length;wn+=1){var Un=Bn[wn],Xn=qt?Un:ff(Un,bt),Qn=an,cr=ju([],[Un.x,Un.y,0,1],bt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Qn*=cr[3]/Ke.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Qn*=Ke.cameraToCenterDistance/cr[3]),bc(Bt,Xn,Qn))return!0}return!1},I}(vi));function ff(A,I){var Y=ju([],[A.x,A.y,0,1],I);return new t(Y[0]/Y[3],Y[1]/Y[3])}var hf=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(fa);function kc(A,I,Y,se){var Ae=I.width,Ce=I.height;if(se){if(se instanceof Uint8ClampedArray)se=new Uint8Array(se.buffer);else if(se.length!==Ae*Ce*Y)throw new RangeError("mismatched image size")}else se=new Uint8Array(Ae*Ce*Y);return A.width=Ae,A.height=Ce,A.data=se,A}function pf(A,I,Y){var se=I.width,Ae=I.height;if(se!==A.width||Ae!==A.height){var Ce=kc({},{width:se,height:Ae},Y);Ac(A,Ce,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,se),height:Math.min(A.height,Ae)},Y),A.width=se,A.height=Ae,A.data=Ce.data}}function Ac(A,I,Y,se,Ae,Ce){if(Ae.width===0||Ae.height===0)return I;if(Ae.width>A.width||Ae.height>A.height||Y.x>A.width-Ae.width||Y.y>A.height-Ae.height)throw new RangeError("out of range source coordinates for image copy");if(Ae.width>I.width||Ae.height>I.height||se.x>I.width-Ae.width||se.y>I.height-Ae.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ne=A.data,Ke=I.data,st=0;st<Ae.height;st++)for(var bt=((Y.y+st)*A.width+Y.x)*Ce,Tt=((se.y+st)*I.width+se.x)*Ce,Rt=0;Rt<Ae.width*Ce;Rt++)Ke[Tt+Rt]=Ne[bt+Rt];return I}Dr("HeatmapBucket",hf,{omit:["layers"]});var Ll=function(A,I){kc(this,A,1,I)};Ll.prototype.resize=function(A){pf(this,A,1)},Ll.prototype.clone=function(){return new Ll({width:this.width,height:this.height},new Uint8Array(this.data))},Ll.copy=function(A,I,Y,se,Ae){Ac(A,I,Y,se,Ae,1)};var Do=function(A,I){kc(this,A,4,I)};Do.prototype.resize=function(A){pf(this,A,4)},Do.prototype.replace=function(A,I){I?this.data.set(A):A instanceof Uint8ClampedArray?this.data=new Uint8Array(A.buffer):this.data=A},Do.prototype.clone=function(){return new Do({width:this.width,height:this.height},new Uint8Array(this.data))},Do.copy=function(A,I,Y,se,Ae){Ac(A,I,Y,se,Ae,4)},Dr("AlphaImage",Ll),Dr("RGBAImage",Do);var Kh={paint:new Zi({"heatmap-radius":new Hr(Ye.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Hr(Ye.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Rr(Ye.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Wo(Ye.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Rr(Ye.paint_heatmap["heatmap-opacity"])})};function df(A){var I={},Y=A.resolution||256,se=A.clips?A.clips.length:1,Ae=A.image||new Do({width:Y,height:se}),Ce=function(an,un,kn){I[A.evaluationKey]=kn;var wn=A.expression.evaluate(I);Ae.data[an+un+0]=Math.floor(255*wn.r/wn.a),Ae.data[an+un+1]=Math.floor(255*wn.g/wn.a),Ae.data[an+un+2]=Math.floor(255*wn.b/wn.a),Ae.data[an+un+3]=Math.floor(255*wn.a)};if(A.clips)for(var Ne=0,Ke=0;Ne<se;++Ne,Ke+=4*Y)for(var st=0,bt=0;st<Y;st++,bt+=4){var Tt=st/(Y-1),Rt=A.clips[Ne];Ce(Ke,bt,Rt.start*(1-Tt)+Rt.end*Tt)}else for(var qt=0,Bt=0;qt<Y;qt++,Bt+=4)Ce(0,Bt,qt/(Y-1));return Ae}var Jh=function(A){function I(Y){A.call(this,Y,Kh),this._updateColorRamp()}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.createBucket=function(Y){return new hf(Y)},I.prototype._handleSpecialPaintPropertyUpdate=function(Y){Y==="heatmap-color"&&this._updateColorRamp()},I.prototype._updateColorRamp=function(){var Y=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=df({expression:Y,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},I.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},I}(vi),Qh={paint:new Zi({"hillshade-illumination-direction":new Rr(Ye.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Rr(Ye.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Rr(Ye.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Rr(Ye.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Rr(Ye.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Rr(Ye.paint_hillshade["hillshade-accent-color"])})},$h=function(A){function I(Y){A.call(this,Y,Qh)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},I}(vi),ep=Li([{name:"a_pos",components:2,type:"Int16"}],4).members,Mc=Uu,tp=Uu;function Uu(A,I,Y){Y=Y||2;var se,Ae,Ce,Ne,Ke,st,bt,Tt=I&&I.length,Rt=Tt?I[0]*Y:A.length,qt=gf(A,0,Rt,Y,!0),Bt=[];if(!qt||qt.next===qt.prev)return Bt;if(Tt&&(qt=function(un,kn,wn,Bn){var Un,Xn,Qn,cr=[];for(Un=0,Xn=kn.length;Un<Xn;Un++)(Qn=gf(un,kn[Un]*Bn,Un<Xn-1?kn[Un+1]*Bn:un.length,Bn,!1))===Qn.next&&(Qn.steiner=!0),cr.push(up(Qn));for(cr.sort(op),Un=0;Un<cr.length;Un++)sp(cr[Un],wn),wn=kl(wn,wn.next);return wn}(A,I,qt,Y)),A.length>80*Y){se=Ce=A[0],Ae=Ne=A[1];for(var an=Y;an<Rt;an+=Y)(Ke=A[an])<se&&(se=Ke),(st=A[an+1])<Ae&&(Ae=st),Ke>Ce&&(Ce=Ke),st>Ne&&(Ne=st);bt=(bt=Math.max(Ce-se,Ne-Ae))!==0?1/bt:0}return lu(qt,Bt,Y,se,Ae,bt),Bt}function gf(A,I,Y,se,Ae){var Ce,Ne;if(Ae===Lc(A,I,Y,se)>0)for(Ce=I;Ce<Y;Ce+=se)Ne=yf(Ce,A[Ce],A[Ce+1],Ne);else for(Ce=Y-se;Ce>=I;Ce-=se)Ne=yf(Ce,A[Ce],A[Ce+1],Ne);return Ne&&Vu(Ne,Ne.next)&&(cu(Ne),Ne=Ne.next),Ne}function kl(A,I){if(!A)return A;I||(I=A);var Y,se=A;do if(Y=!1,se.steiner||!Vu(se,se.next)&&ma(se.prev,se,se.next)!==0)se=se.next;else{if(cu(se),(se=I=se.prev)===se.next)break;Y=!0}while(Y||se!==I);return I}function lu(A,I,Y,se,Ae,Ce,Ne){if(A){!Ne&&Ce&&function(Tt,Rt,qt,Bt){var an=Tt;do an.z===null&&(an.z=Sc(an.x,an.y,Rt,qt,Bt)),an.prevZ=an.prev,an.nextZ=an.next,an=an.next;while(an!==Tt);an.prevZ.nextZ=null,an.prevZ=null,function(un){var kn,wn,Bn,Un,Xn,Qn,cr,Tr,br=1;do{for(wn=un,un=null,Xn=null,Qn=0;wn;){for(Qn++,Bn=wn,cr=0,kn=0;kn<br&&(cr++,Bn=Bn.nextZ);kn++);for(Tr=br;cr>0||Tr>0&&Bn;)cr!==0&&(Tr===0||!Bn||wn.z<=Bn.z)?(Un=wn,wn=wn.nextZ,cr--):(Un=Bn,Bn=Bn.nextZ,Tr--),Xn?Xn.nextZ=Un:un=Un,Un.prevZ=Xn,Xn=Un;wn=Bn}Xn.nextZ=null,br*=2}while(Qn>1)}(an)}(A,se,Ae,Ce);for(var Ke,st,bt=A;A.prev!==A.next;)if(Ke=A.prev,st=A.next,Ce?rp(A,se,Ae,Ce):np(A))I.push(Ke.i/Y),I.push(A.i/Y),I.push(st.i/Y),cu(A),A=st.next,bt=st.next;else if((A=st)===bt){Ne?Ne===1?lu(A=ip(kl(A),I,Y),I,Y,se,Ae,Ce,2):Ne===2&&ap(A,I,Y,se,Ae,Ce):lu(kl(A),I,Y,se,Ae,Ce,1);break}}}function np(A){var I=A.prev,Y=A,se=A.next;if(ma(I,Y,se)>=0)return!1;for(var Ae=A.next.next;Ae!==A.prev;){if(Nl(I.x,I.y,Y.x,Y.y,se.x,se.y,Ae.x,Ae.y)&&ma(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.next}return!0}function rp(A,I,Y,se){var Ae=A.prev,Ce=A,Ne=A.next;if(ma(Ae,Ce,Ne)>=0)return!1;for(var Ke=Ae.x<Ce.x?Ae.x<Ne.x?Ae.x:Ne.x:Ce.x<Ne.x?Ce.x:Ne.x,st=Ae.y<Ce.y?Ae.y<Ne.y?Ae.y:Ne.y:Ce.y<Ne.y?Ce.y:Ne.y,bt=Ae.x>Ce.x?Ae.x>Ne.x?Ae.x:Ne.x:Ce.x>Ne.x?Ce.x:Ne.x,Tt=Ae.y>Ce.y?Ae.y>Ne.y?Ae.y:Ne.y:Ce.y>Ne.y?Ce.y:Ne.y,Rt=Sc(Ke,st,I,Y,se),qt=Sc(bt,Tt,I,Y,se),Bt=A.prevZ,an=A.nextZ;Bt&&Bt.z>=Rt&&an&&an.z<=qt;){if(Bt!==A.prev&&Bt!==A.next&&Nl(Ae.x,Ae.y,Ce.x,Ce.y,Ne.x,Ne.y,Bt.x,Bt.y)&&ma(Bt.prev,Bt,Bt.next)>=0||(Bt=Bt.prevZ,an!==A.prev&&an!==A.next&&Nl(Ae.x,Ae.y,Ce.x,Ce.y,Ne.x,Ne.y,an.x,an.y)&&ma(an.prev,an,an.next)>=0))return!1;an=an.nextZ}for(;Bt&&Bt.z>=Rt;){if(Bt!==A.prev&&Bt!==A.next&&Nl(Ae.x,Ae.y,Ce.x,Ce.y,Ne.x,Ne.y,Bt.x,Bt.y)&&ma(Bt.prev,Bt,Bt.next)>=0)return!1;Bt=Bt.prevZ}for(;an&&an.z<=qt;){if(an!==A.prev&&an!==A.next&&Nl(Ae.x,Ae.y,Ce.x,Ce.y,Ne.x,Ne.y,an.x,an.y)&&ma(an.prev,an,an.next)>=0)return!1;an=an.nextZ}return!0}function ip(A,I,Y){var se=A;do{var Ae=se.prev,Ce=se.next.next;!Vu(Ae,Ce)&&vf(Ae,se,se.next,Ce)&&uu(Ae,Ce)&&uu(Ce,Ae)&&(I.push(Ae.i/Y),I.push(se.i/Y),I.push(Ce.i/Y),cu(se),cu(se.next),se=A=Ce),se=se.next}while(se!==A);return kl(se)}function ap(A,I,Y,se,Ae,Ce){var Ne=A;do{for(var Ke=Ne.next.next;Ke!==Ne.prev;){if(Ne.i!==Ke.i&&cp(Ne,Ke)){var st=mf(Ne,Ke);return Ne=kl(Ne,Ne.next),st=kl(st,st.next),lu(Ne,I,Y,se,Ae,Ce),void lu(st,I,Y,se,Ae,Ce)}Ke=Ke.next}Ne=Ne.next}while(Ne!==A)}function op(A,I){return A.x-I.x}function sp(A,I){if(I=function(se,Ae){var Ce,Ne=Ae,Ke=se.x,st=se.y,bt=-1/0;do{if(st<=Ne.y&&st>=Ne.next.y&&Ne.next.y!==Ne.y){var Tt=Ne.x+(st-Ne.y)*(Ne.next.x-Ne.x)/(Ne.next.y-Ne.y);if(Tt<=Ke&&Tt>bt){if(bt=Tt,Tt===Ke){if(st===Ne.y)return Ne;if(st===Ne.next.y)return Ne.next}Ce=Ne.x<Ne.next.x?Ne:Ne.next}}Ne=Ne.next}while(Ne!==Ae);if(!Ce)return null;if(Ke===bt)return Ce;var Rt,qt=Ce,Bt=Ce.x,an=Ce.y,un=1/0;Ne=Ce;do Ke>=Ne.x&&Ne.x>=Bt&&Ke!==Ne.x&&Nl(st<an?Ke:bt,st,Bt,an,st<an?bt:Ke,st,Ne.x,Ne.y)&&(Rt=Math.abs(st-Ne.y)/(Ke-Ne.x),uu(Ne,se)&&(Rt<un||Rt===un&&(Ne.x>Ce.x||Ne.x===Ce.x&&lp(Ce,Ne)))&&(Ce=Ne,un=Rt)),Ne=Ne.next;while(Ne!==qt);return Ce}(A,I)){var Y=mf(I,A);kl(I,I.next),kl(Y,Y.next)}}function lp(A,I){return ma(A.prev,A,I.prev)<0&&ma(I.next,A,A.next)<0}function Sc(A,I,Y,se,Ae){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-Y)*Ae)|A<<8))|A<<4))|A<<2))|A<<1))|(I=1431655765&((I=858993459&((I=252645135&((I=16711935&((I=32767*(I-se)*Ae)|I<<8))|I<<4))|I<<2))|I<<1))<<1}function up(A){var I=A,Y=A;do(I.x<Y.x||I.x===Y.x&&I.y<Y.y)&&(Y=I),I=I.next;while(I!==A);return Y}function Nl(A,I,Y,se,Ae,Ce,Ne,Ke){return(Ae-Ne)*(I-Ke)-(A-Ne)*(Ce-Ke)>=0&&(A-Ne)*(se-Ke)-(Y-Ne)*(I-Ke)>=0&&(Y-Ne)*(Ce-Ke)-(Ae-Ne)*(se-Ke)>=0}function cp(A,I){return A.next.i!==I.i&&A.prev.i!==I.i&&!function(Y,se){var Ae=Y;do{if(Ae.i!==Y.i&&Ae.next.i!==Y.i&&Ae.i!==se.i&&Ae.next.i!==se.i&&vf(Ae,Ae.next,Y,se))return!0;Ae=Ae.next}while(Ae!==Y);return!1}(A,I)&&(uu(A,I)&&uu(I,A)&&function(Y,se){var Ae=Y,Ce=!1,Ne=(Y.x+se.x)/2,Ke=(Y.y+se.y)/2;do Ae.y>Ke!=Ae.next.y>Ke&&Ae.next.y!==Ae.y&&Ne<(Ae.next.x-Ae.x)*(Ke-Ae.y)/(Ae.next.y-Ae.y)+Ae.x&&(Ce=!Ce),Ae=Ae.next;while(Ae!==Y);return Ce}(A,I)&&(ma(A.prev,A,I.prev)||ma(A,I.prev,I))||Vu(A,I)&&ma(A.prev,A,A.next)>0&&ma(I.prev,I,I.next)>0)}function ma(A,I,Y){return(I.y-A.y)*(Y.x-I.x)-(I.x-A.x)*(Y.y-I.y)}function Vu(A,I){return A.x===I.x&&A.y===I.y}function vf(A,I,Y,se){var Ae=Hu(ma(A,I,Y)),Ce=Hu(ma(A,I,se)),Ne=Hu(ma(Y,se,A)),Ke=Hu(ma(Y,se,I));return Ae!==Ce&&Ne!==Ke||!(Ae!==0||!qu(A,Y,I))||!(Ce!==0||!qu(A,se,I))||!(Ne!==0||!qu(Y,A,se))||!(Ke!==0||!qu(Y,I,se))}function qu(A,I,Y){return I.x<=Math.max(A.x,Y.x)&&I.x>=Math.min(A.x,Y.x)&&I.y<=Math.max(A.y,Y.y)&&I.y>=Math.min(A.y,Y.y)}function Hu(A){return A>0?1:A<0?-1:0}function uu(A,I){return ma(A.prev,A,A.next)<0?ma(A,I,A.next)>=0&&ma(A,A.prev,I)>=0:ma(A,I,A.prev)<0||ma(A,A.next,I)<0}function mf(A,I){var Y=new Ec(A.i,A.x,A.y),se=new Ec(I.i,I.x,I.y),Ae=A.next,Ce=I.prev;return A.next=I,I.prev=A,Y.next=Ae,Ae.prev=Y,se.next=Y,Y.prev=se,Ce.next=se,se.prev=Ce,se}function yf(A,I,Y,se){var Ae=new Ec(A,I,Y);return se?(Ae.next=se.next,Ae.prev=se,se.next.prev=Ae,se.next=Ae):(Ae.prev=Ae,Ae.next=Ae),Ae}function cu(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Ec(A,I,Y){this.i=A,this.x=I,this.y=Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Lc(A,I,Y,se){for(var Ae=0,Ce=I,Ne=Y-se;Ce<Y;Ce+=se)Ae+=(A[Ne]-A[Ce])*(A[Ce+1]+A[Ne+1]),Ne=Ce;return Ae}function fp(A,I,Y,se,Ae){xf(A,I,Y||0,se||A.length-1,Ae||hp)}function xf(A,I,Y,se,Ae){for(;se>Y;){if(se-Y>600){var Ce=se-Y+1,Ne=I-Y+1,Ke=Math.log(Ce),st=.5*Math.exp(2*Ke/3),bt=.5*Math.sqrt(Ke*st*(Ce-st)/Ce)*(Ne-Ce/2<0?-1:1);xf(A,I,Math.max(Y,Math.floor(I-Ne*st/Ce+bt)),Math.min(se,Math.floor(I+(Ce-Ne)*st/Ce+bt)),Ae)}var Tt=A[I],Rt=Y,qt=se;for(fu(A,Y,I),Ae(A[se],Tt)>0&&fu(A,Y,se);Rt<qt;){for(fu(A,Rt,qt),Rt++,qt--;Ae(A[Rt],Tt)<0;)Rt++;for(;Ae(A[qt],Tt)>0;)qt--}Ae(A[Y],Tt)===0?fu(A,Y,qt):fu(A,++qt,se),qt<=I&&(Y=qt+1),I<=qt&&(se=qt-1)}}function fu(A,I,Y){var se=A[I];A[I]=A[Y],A[Y]=se}function hp(A,I){return A<I?-1:A>I?1:0}function Cc(A,I){var Y=A.length;if(Y<=1)return[A];for(var se,Ae,Ce=[],Ne=0;Ne<Y;Ne++){var Ke=C(A[Ne]);Ke!==0&&(A[Ne].area=Math.abs(Ke),Ae===void 0&&(Ae=Ke<0),Ae===Ke<0?(se&&Ce.push(se),se=[A[Ne]]):se.push(A[Ne]))}if(se&&Ce.push(se),I>1)for(var st=0;st<Ce.length;st++)Ce[st].length<=I||(fp(Ce[st],I,1,Ce[st].length-1,pp),Ce[st]=Ce[st].slice(0,I));return Ce}function pp(A,I){return I.area-A.area}function Pc(A,I,Y){for(var se=Y.patternDependencies,Ae=!1,Ce=0,Ne=I;Ce<Ne.length;Ce+=1){var Ke=Ne[Ce].paint.get(A+"-pattern");Ke.isConstant()||(Ae=!0);var st=Ke.constantOr(null);st&&(Ae=!0,se[st.to]=!0,se[st.from]=!0)}return Ae}function Oc(A,I,Y,se,Ae){for(var Ce=Ae.patternDependencies,Ne=0,Ke=I;Ne<Ke.length;Ne+=1){var st=Ke[Ne],bt=st.paint.get(A+"-pattern").value;if(bt.kind!=="constant"){var Tt=bt.evaluate({zoom:se-1},Y,{},Ae.availableImages),Rt=bt.evaluate({zoom:se},Y,{},Ae.availableImages),qt=bt.evaluate({zoom:se+1},Y,{},Ae.availableImages);Tt=Tt&&Tt.name?Tt.name:Tt,Rt=Rt&&Rt.name?Rt.name:Rt,qt=qt&&qt.name?qt.name:qt,Ce[Tt]=!0,Ce[Rt]=!0,Ce[qt]=!0,Y.patterns[st.id]={min:Tt,mid:Rt,max:qt}}}return Y}Uu.deviation=function(A,I,Y,se){var Ae=I&&I.length,Ce=Ae?I[0]*Y:A.length,Ne=Math.abs(Lc(A,0,Ce,Y));if(Ae)for(var Ke=0,st=I.length;Ke<st;Ke++){var bt=I[Ke]*Y,Tt=Ke<st-1?I[Ke+1]*Y:A.length;Ne-=Math.abs(Lc(A,bt,Tt,Y))}var Rt=0;for(Ke=0;Ke<se.length;Ke+=3){var qt=se[Ke]*Y,Bt=se[Ke+1]*Y,an=se[Ke+2]*Y;Rt+=Math.abs((A[qt]-A[an])*(A[Bt+1]-A[qt+1])-(A[qt]-A[Bt])*(A[an+1]-A[qt+1]))}return Ne===0&&Rt===0?0:Math.abs((Rt-Ne)/Ne)},Uu.flatten=function(A){for(var I=A[0][0].length,Y={vertices:[],holes:[],dimensions:I},se=0,Ae=0;Ae<A.length;Ae++){for(var Ce=0;Ce<A[Ae].length;Ce++)for(var Ne=0;Ne<I;Ne++)Y.vertices.push(A[Ae][Ce][Ne]);Ae>0&&(se+=A[Ae-1].length,Y.holes.push(se))}return Y},Mc.default=tp;var Hs=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new os,this.indexArray=new ye,this.indexArray2=new lt,this.programConfigurations=new ea(A.layers,A.zoom),this.segments=new Wn,this.segments2=new Wn,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};Hs.prototype.populate=function(A,I,Y){this.hasPattern=Pc("fill",this.layers,I);for(var se=this.layers[0].layout.get("fill-sort-key"),Ae=[],Ce=0,Ne=A;Ce<Ne.length;Ce+=1){var Ke=Ne[Ce],st=Ke.feature,bt=Ke.id,Tt=Ke.index,Rt=Ke.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,Bt=Ni(st,qt);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),Bt,Y)){var an=se?se.evaluate(Bt,{},Y,I.availableImages):void 0,un={id:bt,properties:st.properties,type:st.type,sourceLayerIndex:Rt,index:Tt,geometry:qt?Bt.geometry:Yo(st),patterns:{},sortKey:an};Ae.push(un)}}se&&Ae.sort(function(Sr,Or){return Sr.sortKey-Or.sortKey});for(var kn=0,wn=Ae;kn<wn.length;kn+=1){var Bn=wn[kn],Un=Bn,Xn=Un.geometry,Qn=Un.index,cr=Un.sourceLayerIndex;if(this.hasPattern){var Tr=Oc("fill",this.layers,Bn,this.zoom,I);this.patternFeatures.push(Tr)}else this.addFeature(Bn,Xn,Qn,Y,{});var br=A[Qn].feature;I.featureIndex.insert(br,Xn,Qn,cr,this.index)}},Hs.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Y)},Hs.prototype.addFeatures=function(A,I,Y){for(var se=0,Ae=this.patternFeatures;se<Ae.length;se+=1){var Ce=Ae[se];this.addFeature(Ce,Ce.geometry,Ce.index,I,Y)}},Hs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Hs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Hs.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,ep),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0},Hs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Hs.prototype.addFeature=function(A,I,Y,se,Ae){for(var Ce=0,Ne=Cc(I,500);Ce<Ne.length;Ce+=1){for(var Ke=Ne[Ce],st=0,bt=0,Tt=Ke;bt<Tt.length;bt+=1)st+=Tt[bt].length;for(var Rt=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray),qt=Rt.vertexLength,Bt=[],an=[],un=0,kn=Ke;un<kn.length;un+=1){var wn=kn[un];if(wn.length!==0){wn!==Ke[0]&&an.push(Bt.length/2);var Bn=this.segments2.prepareSegment(wn.length,this.layoutVertexArray,this.indexArray2),Un=Bn.vertexLength;this.layoutVertexArray.emplaceBack(wn[0].x,wn[0].y),this.indexArray2.emplaceBack(Un+wn.length-1,Un),Bt.push(wn[0].x),Bt.push(wn[0].y);for(var Xn=1;Xn<wn.length;Xn++)this.layoutVertexArray.emplaceBack(wn[Xn].x,wn[Xn].y),this.indexArray2.emplaceBack(Un+Xn-1,Un+Xn),Bt.push(wn[Xn].x),Bt.push(wn[Xn].y);Bn.vertexLength+=wn.length,Bn.primitiveLength+=wn.length}}for(var Qn=Mc(Bt,an),cr=0;cr<Qn.length;cr+=3)this.indexArray.emplaceBack(qt+Qn[cr],qt+Qn[cr+1],qt+Qn[cr+2]);Rt.vertexLength+=st,Rt.primitiveLength+=Qn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,Ae,se)},Dr("FillBucket",Hs,{omit:["layers","patternFeatures"]});var dp=new Zi({"fill-sort-key":new Hr(Ye.layout_fill["fill-sort-key"])}),gp={paint:new Zi({"fill-antialias":new Rr(Ye.paint_fill["fill-antialias"]),"fill-opacity":new Hr(Ye.paint_fill["fill-opacity"]),"fill-color":new Hr(Ye.paint_fill["fill-color"]),"fill-outline-color":new Hr(Ye.paint_fill["fill-outline-color"]),"fill-translate":new Rr(Ye.paint_fill["fill-translate"]),"fill-translate-anchor":new Rr(Ye.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ya(Ye.paint_fill["fill-pattern"])}),layout:dp},vp=function(A){function I(Y){A.call(this,Y,gp)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.recalculate=function(Y,se){A.prototype.recalculate.call(this,Y,se);var Ae=this.paint._values["fill-outline-color"];Ae.value.kind==="constant"&&Ae.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},I.prototype.createBucket=function(Y){return new Hs(Y)},I.prototype.queryRadius=function(){return Fu(this.paint.get("fill-translate"))},I.prototype.queryIntersectsFeature=function(Y,se,Ae,Ce,Ne,Ke,st){return Du(Bu(Y,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ke.angle,st),Ce)},I.prototype.isTileClipped=function(){return!0},I}(vi),mp=Li([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,bf=jl;function jl(A,I,Y,se,Ae){this.properties={},this.extent=Y,this.type=0,this._pbf=A,this._geometry=-1,this._keys=se,this._values=Ae,A.readFields(yp,this,I)}function yp(A,I,Y){A==1?I.id=Y.readVarint():A==2?function(se,Ae){for(var Ce=se.readVarint()+se.pos;se.pos<Ce;){var Ne=Ae._keys[se.readVarint()],Ke=Ae._values[se.readVarint()];Ae.properties[Ne]=Ke}}(Y,I):A==3?I.type=Y.readVarint():A==4&&(I._geometry=Y.pos)}function xp(A){for(var I,Y,se=0,Ae=0,Ce=A.length,Ne=Ce-1;Ae<Ce;Ne=Ae++)I=A[Ae],se+=((Y=A[Ne]).x-I.x)*(I.y+Y.y);return se}jl.types=["Unknown","Point","LineString","Polygon"],jl.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var I,Y=A.readVarint()+A.pos,se=1,Ae=0,Ce=0,Ne=0,Ke=[];A.pos<Y;){if(Ae<=0){var st=A.readVarint();se=7&st,Ae=st>>3}if(Ae--,se===1||se===2)Ce+=A.readSVarint(),Ne+=A.readSVarint(),se===1&&(I&&Ke.push(I),I=[]),I.push(new t(Ce,Ne));else{if(se!==7)throw new Error("unknown command "+se);I&&I.push(I[0].clone())}}return I&&Ke.push(I),Ke},jl.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var I=A.readVarint()+A.pos,Y=1,se=0,Ae=0,Ce=0,Ne=1/0,Ke=-1/0,st=1/0,bt=-1/0;A.pos<I;){if(se<=0){var Tt=A.readVarint();Y=7&Tt,se=Tt>>3}if(se--,Y===1||Y===2)(Ae+=A.readSVarint())<Ne&&(Ne=Ae),Ae>Ke&&(Ke=Ae),(Ce+=A.readSVarint())<st&&(st=Ce),Ce>bt&&(bt=Ce);else if(Y!==7)throw new Error("unknown command "+Y)}return[Ne,st,Ke,bt]},jl.prototype.toGeoJSON=function(A,I,Y){var se,Ae,Ce=this.extent*Math.pow(2,Y),Ne=this.extent*A,Ke=this.extent*I,st=this.loadGeometry(),bt=jl.types[this.type];function Tt(Bt){for(var an=0;an<Bt.length;an++){var un=Bt[an],kn=180-360*(un.y+Ke)/Ce;Bt[an]=[360*(un.x+Ne)/Ce-180,360/Math.PI*Math.atan(Math.exp(kn*Math.PI/180))-90]}}switch(this.type){case 1:var Rt=[];for(se=0;se<st.length;se++)Rt[se]=st[se][0];Tt(st=Rt);break;case 2:for(se=0;se<st.length;se++)Tt(st[se]);break;case 3:for(st=function(Bt){var an=Bt.length;if(an<=1)return[Bt];for(var un,kn,wn=[],Bn=0;Bn<an;Bn++){var Un=xp(Bt[Bn]);Un!==0&&(kn===void 0&&(kn=Un<0),kn===Un<0?(un&&wn.push(un),un=[Bt[Bn]]):un.push(Bt[Bn]))}return un&&wn.push(un),wn}(st),se=0;se<st.length;se++)for(Ae=0;Ae<st[se].length;Ae++)Tt(st[se][Ae])}st.length===1?st=st[0]:bt="Multi"+bt;var qt={type:"Feature",geometry:{type:bt,coordinates:st},properties:this.properties};return"id"in this&&(qt.id=this.id),qt};var _f=wf;function wf(A,I){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(bp,this,I),this.length=this._features.length}function bp(A,I,Y){A===15?I.version=Y.readVarint():A===1?I.name=Y.readString():A===5?I.extent=Y.readVarint():A===2?I._features.push(Y.pos):A===3?I._keys.push(Y.readString()):A===4&&I._values.push(function(se){for(var Ae=null,Ce=se.readVarint()+se.pos;se.pos<Ce;){var Ne=se.readVarint()>>3;Ae=Ne===1?se.readString():Ne===2?se.readFloat():Ne===3?se.readDouble():Ne===4?se.readVarint64():Ne===5?se.readVarint():Ne===6?se.readSVarint():Ne===7?se.readBoolean():null}return Ae}(Y))}function _p(A,I,Y){if(A===3){var se=new _f(Y,Y.readVarint()+Y.pos);se.length&&(I[se.name]=se)}}wf.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var I=this._pbf.readVarint()+this._pbf.pos;return new bf(this._pbf,I,this.extent,this._keys,this._values)};var Ul={VectorTile:function(A,I){this.layers=A.readFields(_p,{},I)},VectorTileFeature:bf,VectorTileLayer:_f},wp=Ul.VectorTileFeature.types,Ic=Math.pow(2,13);function hu(A,I,Y,se,Ae,Ce,Ne,Ke){A.emplaceBack(I,Y,2*Math.floor(se*Ic)+Ne,Ae*Ic*2,Ce*Ic*2,Math.round(Ke))}var Gs=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Xe,this.indexArray=new ye,this.programConfigurations=new ea(A.layers,A.zoom),this.segments=new Wn,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};function Tp(A,I){return A.x===I.x&&(A.x<0||A.x>fi)||A.y===I.y&&(A.y<0||A.y>fi)}Gs.prototype.populate=function(A,I,Y){this.features=[],this.hasPattern=Pc("fill-extrusion",this.layers,I);for(var se=0,Ae=A;se<Ae.length;se+=1){var Ce=Ae[se],Ne=Ce.feature,Ke=Ce.id,st=Ce.index,bt=Ce.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,Rt=Ni(Ne,Tt);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),Rt,Y)){var qt={id:Ke,sourceLayerIndex:bt,index:st,geometry:Tt?Rt.geometry:Yo(Ne),properties:Ne.properties,type:Ne.type,patterns:{}};this.hasPattern?this.features.push(Oc("fill-extrusion",this.layers,qt,this.zoom,I)):this.addFeature(qt,qt.geometry,st,Y,{}),I.featureIndex.insert(Ne,qt.geometry,st,bt,this.index,!0)}}},Gs.prototype.addFeatures=function(A,I,Y){for(var se=0,Ae=this.features;se<Ae.length;se+=1){var Ce=Ae[se],Ne=Ce.geometry;this.addFeature(Ce,Ne,Ce.index,I,Y)}},Gs.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Y)},Gs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Gs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Gs.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,mp),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Gs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Gs.prototype.addFeature=function(A,I,Y,se,Ae){for(var Ce=0,Ne=Cc(I,500);Ce<Ne.length;Ce+=1){for(var Ke=Ne[Ce],st=0,bt=0,Tt=Ke;bt<Tt.length;bt+=1)st+=Tt[bt].length;for(var Rt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),qt=0,Bt=Ke;qt<Bt.length;qt+=1){var an=Bt[qt];if(an.length!==0&&!((ui=an).every(function(ti){return ti.x<0})||ui.every(function(ti){return ti.x>fi})||ui.every(function(ti){return ti.y<0})||ui.every(function(ti){return ti.y>fi})))for(var un=0,kn=0;kn<an.length;kn++){var wn=an[kn];if(kn>=1){var Bn=an[kn-1];if(!Tp(wn,Bn)){Rt.vertexLength+4>Wn.MAX_VERTEX_ARRAY_LENGTH&&(Rt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Un=wn.sub(Bn)._perp()._unit(),Xn=Bn.dist(wn);un+Xn>32768&&(un=0),hu(this.layoutVertexArray,wn.x,wn.y,Un.x,Un.y,0,0,un),hu(this.layoutVertexArray,wn.x,wn.y,Un.x,Un.y,0,1,un),un+=Xn,hu(this.layoutVertexArray,Bn.x,Bn.y,Un.x,Un.y,0,0,un),hu(this.layoutVertexArray,Bn.x,Bn.y,Un.x,Un.y,0,1,un);var Qn=Rt.vertexLength;this.indexArray.emplaceBack(Qn,Qn+2,Qn+1),this.indexArray.emplaceBack(Qn+1,Qn+2,Qn+3),Rt.vertexLength+=4,Rt.primitiveLength+=2}}}}if(Rt.vertexLength+st>Wn.MAX_VERTEX_ARRAY_LENGTH&&(Rt=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray)),wp[A.type]==="Polygon"){for(var cr=[],Tr=[],br=Rt.vertexLength,Sr=0,Or=Ke;Sr<Or.length;Sr+=1){var Zr=Or[Sr];if(Zr.length!==0){Zr!==Ke[0]&&Tr.push(cr.length/2);for(var Ur=0;Ur<Zr.length;Ur++){var Xr=Zr[Ur];hu(this.layoutVertexArray,Xr.x,Xr.y,0,0,1,1,0),cr.push(Xr.x),cr.push(Xr.y)}}}for(var qr=Mc(cr,Tr),Br=0;Br<qr.length;Br+=3)this.indexArray.emplaceBack(br+qr[Br],br+qr[Br+2],br+qr[Br+1]);Rt.primitiveLength+=qr.length/3,Rt.vertexLength+=st}}var ui;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,Ae,se)},Dr("FillExtrusionBucket",Gs,{omit:["layers","features"]});var kp={paint:new Zi({"fill-extrusion-opacity":new Rr(Ye["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Hr(Ye["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Rr(Ye["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Rr(Ye["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ya(Ye["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Hr(Ye["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Hr(Ye["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Rr(Ye["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Ap=function(A){function I(Y){A.call(this,Y,kp)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.createBucket=function(Y){return new Gs(Y)},I.prototype.queryRadius=function(){return Fu(this.paint.get("fill-extrusion-translate"))},I.prototype.is3D=function(){return!0},I.prototype.queryIntersectsFeature=function(Y,se,Ae,Ce,Ne,Ke,st,bt){var Tt=Bu(Y,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ke.angle,st),Rt=this.paint.get("fill-extrusion-height").evaluate(se,Ae),qt=this.paint.get("fill-extrusion-base").evaluate(se,Ae),Bt=function(un,kn,wn,Bn){for(var Un=[],Xn=0,Qn=un;Xn<Qn.length;Xn+=1){var cr=Qn[Xn],Tr=[cr.x,cr.y,Bn,1];ju(Tr,Tr,kn),Un.push(new t(Tr[0]/Tr[3],Tr[1]/Tr[3]))}return Un}(Tt,bt,0,0),an=function(un,kn,wn,Bn){for(var Un=[],Xn=[],Qn=Bn[8]*kn,cr=Bn[9]*kn,Tr=Bn[10]*kn,br=Bn[11]*kn,Sr=Bn[8]*wn,Or=Bn[9]*wn,Zr=Bn[10]*wn,Ur=Bn[11]*wn,Xr=0,qr=un;Xr<qr.length;Xr+=1){for(var Br=[],ui=[],ti=0,Ii=qr[Xr];ti<Ii.length;ti+=1){var Yr=Ii[ti],Ei=Yr.x,Ui=Yr.y,Hi=Bn[0]*Ei+Bn[4]*Ui+Bn[12],Gi=Bn[1]*Ei+Bn[5]*Ui+Bn[13],Di=Bn[2]*Ei+Bn[6]*Ui+Bn[14],ba=Bn[3]*Ei+Bn[7]*Ui+Bn[15],Qi=Di+Tr,Ia=ba+br,Ka=Hi+Sr,Na=Gi+Or,xo=Di+Zr,ja=ba+Ur,Ma=new t((Hi+Qn)/Ia,(Gi+cr)/Ia);Ma.z=Qi/Ia,Br.push(Ma);var Ua=new t(Ka/ja,Na/ja);Ua.z=xo/ja,ui.push(Ua)}Un.push(Br),Xn.push(ui)}return[Un,Xn]}(Ce,qt,Rt,bt);return function(un,kn,wn){var Bn=1/0;Du(wn,kn)&&(Bn=Tf(wn,kn[0]));for(var Un=0;Un<kn.length;Un++)for(var Xn=kn[Un],Qn=un[Un],cr=0;cr<Xn.length-1;cr++){var Tr=Xn[cr],br=Xn[cr+1],Sr=Qn[cr],Or=[Tr,br,Qn[cr+1],Sr,Tr];El(wn,Or)&&(Bn=Math.min(Bn,Tf(wn,Or)))}return Bn!==1/0&&Bn}(an[0],an[1],Bt)},I}(vi);function pu(A,I){return A.x*I.x+A.y*I.y}function Tf(A,I){if(A.length===1){for(var Y,se=0,Ae=I[se++];!Y||Ae.equals(Y);)if(!(Y=I[se++]))return 1/0;for(;se<I.length;se++){var Ce=I[se],Ne=A[0],Ke=Y.sub(Ae),st=Ce.sub(Ae),bt=Ne.sub(Ae),Tt=pu(Ke,Ke),Rt=pu(Ke,st),qt=pu(st,st),Bt=pu(bt,Ke),an=pu(bt,st),un=Tt*qt-Rt*Rt,kn=(qt*Bt-Rt*an)/un,wn=(Tt*an-Rt*Bt)/un,Bn=1-kn-wn,Un=Ae.z*Bn+Y.z*kn+Ce.z*wn;if(isFinite(Un))return Un}return 1/0}for(var Xn=1/0,Qn=0,cr=I;Qn<cr.length;Qn+=1){var Tr=cr[Qn];Xn=Math.min(Xn,Tr.z)}return Xn}var Mp=Li([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Sp=Li([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ep=Ul.VectorTileFeature.types,Lp=Math.cos(Math.PI/180*37.5),kf=Math.pow(2,14)/.5,yo=function(A){var I=this;this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Y){return Y.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(Y){I.gradients[Y.id]={}}),this.layoutVertexArray=new Je,this.layoutVertexArray2=new ot,this.indexArray=new ye,this.programConfigurations=new ea(A.layers,A.zoom),this.segments=new Wn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(Y){return Y.isStateDependent()}).map(function(Y){return Y.id})};yo.prototype.populate=function(A,I,Y){this.hasPattern=Pc("line",this.layers,I);for(var se=this.layers[0].layout.get("line-sort-key"),Ae=[],Ce=0,Ne=A;Ce<Ne.length;Ce+=1){var Ke=Ne[Ce],st=Ke.feature,bt=Ke.id,Tt=Ke.index,Rt=Ke.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,Bt=Ni(st,qt);if(this.layers[0]._featureFilter.filter(new ii(this.zoom),Bt,Y)){var an=se?se.evaluate(Bt,{},Y):void 0,un={id:bt,properties:st.properties,type:st.type,sourceLayerIndex:Rt,index:Tt,geometry:qt?Bt.geometry:Yo(st),patterns:{},sortKey:an};Ae.push(un)}}se&&Ae.sort(function(Sr,Or){return Sr.sortKey-Or.sortKey});for(var kn=0,wn=Ae;kn<wn.length;kn+=1){var Bn=wn[kn],Un=Bn,Xn=Un.geometry,Qn=Un.index,cr=Un.sourceLayerIndex;if(this.hasPattern){var Tr=Oc("line",this.layers,Bn,this.zoom,I);this.patternFeatures.push(Tr)}else this.addFeature(Bn,Xn,Qn,Y,{});var br=A[Qn].feature;I.featureIndex.insert(br,Xn,Qn,cr,this.index)}},yo.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Y)},yo.prototype.addFeatures=function(A,I,Y){for(var se=0,Ae=this.patternFeatures;se<Ae.length;se+=1){var Ce=Ae[se];this.addFeature(Ce,Ce.geometry,Ce.index,I,Y)}},yo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},yo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},yo.prototype.upload=function(A){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=A.createVertexBuffer(this.layoutVertexArray2,Sp)),this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Mp),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},yo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},yo.prototype.lineFeatureClips=function(A){if(A.properties&&A.properties.hasOwnProperty("mapbox_clip_start")&&A.properties.hasOwnProperty("mapbox_clip_end"))return{start:+A.properties.mapbox_clip_start,end:+A.properties.mapbox_clip_end}},yo.prototype.addFeature=function(A,I,Y,se,Ae){var Ce=this.layers[0].layout,Ne=Ce.get("line-join").evaluate(A,{}),Ke=Ce.get("line-cap"),st=Ce.get("line-miter-limit"),bt=Ce.get("line-round-limit");this.lineClips=this.lineFeatureClips(A);for(var Tt=0,Rt=I;Tt<Rt.length;Tt+=1){var qt=Rt[Tt];this.addLine(qt,A,Ne,Ke,st,bt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,Ae,se)},yo.prototype.addLine=function(A,I,Y,se,Ae,Ce){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Ne=0;Ne<A.length-1;Ne++)this.totalDistance+=A[Ne].dist(A[Ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Ke=Ep[I.type]==="Polygon",st=A.length;st>=2&&A[st-1].equals(A[st-2]);)st--;for(var bt=0;bt<st-1&&A[bt].equals(A[bt+1]);)bt++;if(!(st<(Ke?3:2))){Y==="bevel"&&(Ae=1.05);var Tt,Rt=this.overscaling<=16?15*fi/(512*this.overscaling):0,qt=this.segments.prepareSegment(10*st,this.layoutVertexArray,this.indexArray),Bt=void 0,an=void 0,un=void 0,kn=void 0;this.e1=this.e2=-1,Ke&&(Tt=A[st-2],kn=A[bt].sub(Tt)._unit()._perp());for(var wn=bt;wn<st;wn++)if(!(an=wn===st-1?Ke?A[bt+1]:void 0:A[wn+1])||!A[wn].equals(an)){kn&&(un=kn),Tt&&(Bt=Tt),Tt=A[wn],kn=an?an.sub(Tt)._unit()._perp():un;var Bn=(un=un||kn).add(kn);Bn.x===0&&Bn.y===0||Bn._unit();var Un=un.x*kn.x+un.y*kn.y,Xn=Bn.x*kn.x+Bn.y*kn.y,Qn=Xn!==0?1/Xn:1/0,cr=2*Math.sqrt(2-2*Xn),Tr=Xn<Lp&&Bt&&an,br=un.x*kn.y-un.y*kn.x>0;if(Tr&&wn>bt){var Sr=Tt.dist(Bt);if(Sr>2*Rt){var Or=Tt.sub(Tt.sub(Bt)._mult(Rt/Sr)._round());this.updateDistance(Bt,Or),this.addCurrentVertex(Or,un,0,0,qt),Bt=Or}}var Zr=Bt&&an,Ur=Zr?Y:Ke?"butt":se;if(Zr&&Ur==="round"&&(Qn<Ce?Ur="miter":Qn<=2&&(Ur="fakeround")),Ur==="miter"&&Qn>Ae&&(Ur="bevel"),Ur==="bevel"&&(Qn>2&&(Ur="flipbevel"),Qn<Ae&&(Ur="miter")),Bt&&this.updateDistance(Bt,Tt),Ur==="miter")Bn._mult(Qn),this.addCurrentVertex(Tt,Bn,0,0,qt);else if(Ur==="flipbevel"){if(Qn>100)Bn=kn.mult(-1);else{var Xr=Qn*un.add(kn).mag()/un.sub(kn).mag();Bn._perp()._mult(Xr*(br?-1:1))}this.addCurrentVertex(Tt,Bn,0,0,qt),this.addCurrentVertex(Tt,Bn.mult(-1),0,0,qt)}else if(Ur==="bevel"||Ur==="fakeround"){var qr=-Math.sqrt(Qn*Qn-1),Br=br?qr:0,ui=br?0:qr;if(Bt&&this.addCurrentVertex(Tt,un,Br,ui,qt),Ur==="fakeround")for(var ti=Math.round(180*cr/Math.PI/20),Ii=1;Ii<ti;Ii++){var Yr=Ii/ti;if(Yr!==.5){var Ei=Yr-.5;Yr+=Yr*Ei*(Yr-1)*((1.0904+Un*(Un*(3.55645-1.43519*Un)-3.2452))*Ei*Ei+(.848013+Un*(.215638*Un-1.06021)))}var Ui=kn.sub(un)._mult(Yr)._add(un)._unit()._mult(br?-1:1);this.addHalfVertex(Tt,Ui.x,Ui.y,!1,br,0,qt)}an&&this.addCurrentVertex(Tt,kn,-Br,-ui,qt)}else if(Ur==="butt")this.addCurrentVertex(Tt,Bn,0,0,qt);else if(Ur==="square"){var Hi=Bt?1:-1;this.addCurrentVertex(Tt,Bn,Hi,Hi,qt)}else Ur==="round"&&(Bt&&(this.addCurrentVertex(Tt,un,0,0,qt),this.addCurrentVertex(Tt,un,1,1,qt,!0)),an&&(this.addCurrentVertex(Tt,kn,-1,-1,qt,!0),this.addCurrentVertex(Tt,kn,0,0,qt)));if(Tr&&wn<st-1){var Gi=Tt.dist(an);if(Gi>2*Rt){var Di=Tt.add(an.sub(Tt)._mult(Rt/Gi)._round());this.updateDistance(Tt,Di),this.addCurrentVertex(Di,kn,0,0,qt),Tt=Di}}}}},yo.prototype.addCurrentVertex=function(A,I,Y,se,Ae,Ce){Ce===void 0&&(Ce=!1);var Ne=I.x+I.y*Y,Ke=I.y-I.x*Y,st=-I.x+I.y*se,bt=-I.y-I.x*se;this.addHalfVertex(A,Ne,Ke,Ce,!1,Y,Ae),this.addHalfVertex(A,st,bt,Ce,!0,-se,Ae),this.distance>kf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(A,I,Y,se,Ae,Ce))},yo.prototype.addHalfVertex=function(A,I,Y,se,Ae,Ce,Ne){var Ke=A.x,st=A.y,bt=.5*(this.lineClips?this.scaledDistance*(kf-1):this.scaledDistance);if(this.layoutVertexArray.emplaceBack((Ke<<1)+(se?1:0),(st<<1)+(Ae?1:0),Math.round(63*I)+128,Math.round(63*Y)+128,1+(Ce===0?0:Ce<0?-1:1)|(63&bt)<<2,bt>>6),this.lineClips){var Tt=(this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start);this.layoutVertexArray2.emplaceBack(Tt,this.lineClipsArray.length)}var Rt=Ne.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Rt),Ne.primitiveLength++),Ae?this.e2=Rt:this.e1=Rt},yo.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},yo.prototype.updateDistance=function(A,I){this.distance+=A.dist(I),this.updateScaledDistance()},Dr("LineBucket",yo,{omit:["layers","patternFeatures"]});var Cp=new Zi({"line-cap":new Rr(Ye.layout_line["line-cap"]),"line-join":new Hr(Ye.layout_line["line-join"]),"line-miter-limit":new Rr(Ye.layout_line["line-miter-limit"]),"line-round-limit":new Rr(Ye.layout_line["line-round-limit"]),"line-sort-key":new Hr(Ye.layout_line["line-sort-key"])}),Af={paint:new Zi({"line-opacity":new Hr(Ye.paint_line["line-opacity"]),"line-color":new Hr(Ye.paint_line["line-color"]),"line-translate":new Rr(Ye.paint_line["line-translate"]),"line-translate-anchor":new Rr(Ye.paint_line["line-translate-anchor"]),"line-width":new Hr(Ye.paint_line["line-width"]),"line-gap-width":new Hr(Ye.paint_line["line-gap-width"]),"line-offset":new Hr(Ye.paint_line["line-offset"]),"line-blur":new Hr(Ye.paint_line["line-blur"]),"line-dasharray":new Oo(Ye.paint_line["line-dasharray"]),"line-pattern":new Ya(Ye.paint_line["line-pattern"]),"line-gradient":new Wo(Ye.paint_line["line-gradient"])}),layout:Cp},Pp=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.possiblyEvaluate=function(Y,se){return se=new ii(Math.floor(se.zoom),{now:se.now,fadeDuration:se.fadeDuration,zoomHistory:se.zoomHistory,transition:se.transition}),A.prototype.possiblyEvaluate.call(this,Y,se)},I.prototype.evaluate=function(Y,se,Ae,Ce){return se=c({},se,{zoom:Math.floor(se.zoom)}),A.prototype.evaluate.call(this,Y,se,Ae,Ce)},I}(Hr),Mf=new Pp(Af.paint.properties["line-width"].specification);Mf.useIntegerZoom=!0;var Op=function(A){function I(Y){A.call(this,Y,Af),this.gradientVersion=0}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype._handleSpecialPaintPropertyUpdate=function(Y){if(Y==="line-gradient"){var se=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=se._styleExpression.expression instanceof Lr,this.gradientVersion=(this.gradientVersion+1)%r}},I.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},I.prototype.recalculate=function(Y,se){A.prototype.recalculate.call(this,Y,se),this.paint._values["line-floorwidth"]=Mf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Y)},I.prototype.createBucket=function(Y){return new yo(Y)},I.prototype.queryRadius=function(Y){var se=Y,Ae=Sf(su("line-width",this,se),su("line-gap-width",this,se)),Ce=su("line-offset",this,se);return Ae/2+Math.abs(Ce)+Fu(this.paint.get("line-translate"))},I.prototype.queryIntersectsFeature=function(Y,se,Ae,Ce,Ne,Ke,st){var bt=Bu(Y,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ke.angle,st),Tt=st/2*Sf(this.paint.get("line-width").evaluate(se,Ae),this.paint.get("line-gap-width").evaluate(se,Ae)),Rt=this.paint.get("line-offset").evaluate(se,Ae);return Rt&&(Ce=function(qt,Bt){for(var an=[],un=new t(0,0),kn=0;kn<qt.length;kn++){for(var wn=qt[kn],Bn=[],Un=0;Un<wn.length;Un++){var Xn=wn[Un-1],Qn=wn[Un],cr=wn[Un+1],Tr=Un===0?un:Qn.sub(Xn)._unit()._perp(),br=Un===wn.length-1?un:cr.sub(Qn)._unit()._perp(),Sr=Tr._add(br)._unit(),Or=Sr.x*br.x+Sr.y*br.y;Sr._mult(1/Or),Bn.push(Sr._mult(Bt)._add(Qn))}an.push(Bn)}return an}(Ce,Rt*st)),function(qt,Bt,an){for(var un=0;un<Bt.length;un++){var kn=Bt[un];if(qt.length>=3){for(var wn=0;wn<kn.length;wn++)if(Qs(qt,kn[wn]))return!0}if(_c(qt,kn,an))return!0}return!1}(bt,Ce,Tt)},I.prototype.isTileClipped=function(){return!0},I}(vi);function Sf(A,I){return I>0?I+2*A:A}var Ip=Li([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Dp=Li([{name:"a_projected_pos",components:3,type:"Float32"}],4),zp=(Li([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Li([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Ef=(Li([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Li([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Rp=Li([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Fp(A,I,Y){return A.sections.forEach(function(se){se.text=function(Ae,Ce,Ne){var Ke=Ce.layout.get("text-transform").evaluate(Ne,{});return Ke==="uppercase"?Ae=Ae.toLocaleUpperCase():Ke==="lowercase"&&(Ae=Ae.toLocaleLowerCase()),Pa.applyArabicShaping&&(Ae=Pa.applyArabicShaping(Ae)),Ae}(se.text,I,Y)}),A}Li([{name:"triangle",components:3,type:"Uint16"}]),Li([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Li([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Li([{type:"Float32",name:"offsetX"}]),Li([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var du={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Ba=24,Lf=function(A,I,Y,se,Ae){var Ce,Ne,Ke=8*Ae-se-1,st=(1<<Ke)-1,bt=st>>1,Tt=-7,Rt=Y?Ae-1:0,qt=Y?-1:1,Bt=A[I+Rt];for(Rt+=qt,Ce=Bt&(1<<-Tt)-1,Bt>>=-Tt,Tt+=Ke;Tt>0;Ce=256*Ce+A[I+Rt],Rt+=qt,Tt-=8);for(Ne=Ce&(1<<-Tt)-1,Ce>>=-Tt,Tt+=se;Tt>0;Ne=256*Ne+A[I+Rt],Rt+=qt,Tt-=8);if(Ce===0)Ce=1-bt;else{if(Ce===st)return Ne?NaN:1/0*(Bt?-1:1);Ne+=Math.pow(2,se),Ce-=bt}return(Bt?-1:1)*Ne*Math.pow(2,Ce-se)},Cf=function(A,I,Y,se,Ae,Ce){var Ne,Ke,st,bt=8*Ce-Ae-1,Tt=(1<<bt)-1,Rt=Tt>>1,qt=Ae===23?Math.pow(2,-24)-Math.pow(2,-77):0,Bt=se?0:Ce-1,an=se?1:-1,un=I<0||I===0&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(Ke=isNaN(I)?1:0,Ne=Tt):(Ne=Math.floor(Math.log(I)/Math.LN2),I*(st=Math.pow(2,-Ne))<1&&(Ne--,st*=2),(I+=Ne+Rt>=1?qt/st:qt*Math.pow(2,1-Rt))*st>=2&&(Ne++,st/=2),Ne+Rt>=Tt?(Ke=0,Ne=Tt):Ne+Rt>=1?(Ke=(I*st-1)*Math.pow(2,Ae),Ne+=Rt):(Ke=I*Math.pow(2,Rt-1)*Math.pow(2,Ae),Ne=0));Ae>=8;A[Y+Bt]=255&Ke,Bt+=an,Ke/=256,Ae-=8);for(Ne=Ne<<Ae|Ke,bt+=Ae;bt>0;A[Y+Bt]=255&Ne,Bt+=an,Ne/=256,bt-=8);A[Y+Bt-an]|=128*un},Gu=ji;function ji(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}ji.Varint=0,ji.Fixed64=1,ji.Bytes=2,ji.Fixed32=5;var Dc=4294967296,Pf=1/Dc,Of=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function pl(A){return A.type===ji.Bytes?A.readVarint()+A.pos:A.pos+1}function Vl(A,I,Y){return Y?4294967296*I+(A>>>0):4294967296*(I>>>0)+(A>>>0)}function If(A,I,Y){var se=I<=16383?1:I<=2097151?2:I<=268435455?3:Math.floor(Math.log(I)/(7*Math.LN2));Y.realloc(se);for(var Ae=Y.pos-1;Ae>=A;Ae--)Y.buf[Ae+se]=Y.buf[Ae]}function Bp(A,I){for(var Y=0;Y<A.length;Y++)I.writeVarint(A[Y])}function Np(A,I){for(var Y=0;Y<A.length;Y++)I.writeSVarint(A[Y])}function jp(A,I){for(var Y=0;Y<A.length;Y++)I.writeFloat(A[Y])}function Up(A,I){for(var Y=0;Y<A.length;Y++)I.writeDouble(A[Y])}function Vp(A,I){for(var Y=0;Y<A.length;Y++)I.writeBoolean(A[Y])}function qp(A,I){for(var Y=0;Y<A.length;Y++)I.writeFixed32(A[Y])}function Hp(A,I){for(var Y=0;Y<A.length;Y++)I.writeSFixed32(A[Y])}function Gp(A,I){for(var Y=0;Y<A.length;Y++)I.writeFixed64(A[Y])}function Wp(A,I){for(var Y=0;Y<A.length;Y++)I.writeSFixed64(A[Y])}function Wu(A,I){return(A[I]|A[I+1]<<8|A[I+2]<<16)+16777216*A[I+3]}function ql(A,I,Y){A[Y]=I,A[Y+1]=I>>>8,A[Y+2]=I>>>16,A[Y+3]=I>>>24}function Df(A,I){return(A[I]|A[I+1]<<8|A[I+2]<<16)+(A[I+3]<<24)}ji.prototype={destroy:function(){this.buf=null},readFields:function(A,I,Y){for(Y=Y||this.length;this.pos<Y;){var se=this.readVarint(),Ae=se>>3,Ce=this.pos;this.type=7&se,A(Ae,I,this),this.pos===Ce&&this.skip(se)}return I},readMessage:function(A,I){return this.readFields(A,I,this.readVarint()+this.pos)},readFixed32:function(){var A=Wu(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=Df(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=Wu(this.buf,this.pos)+Wu(this.buf,this.pos+4)*Dc;return this.pos+=8,A},readSFixed64:function(){var A=Wu(this.buf,this.pos)+Df(this.buf,this.pos+4)*Dc;return this.pos+=8,A},readFloat:function(){var A=Lf(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=Lf(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var I,Y,se=this.buf;return I=127&(Y=se[this.pos++]),Y<128?I:(I|=(127&(Y=se[this.pos++]))<<7,Y<128?I:(I|=(127&(Y=se[this.pos++]))<<14,Y<128?I:(I|=(127&(Y=se[this.pos++]))<<21,Y<128?I:function(Ae,Ce,Ne){var Ke,st,bt=Ne.buf;if(Ke=(112&(st=bt[Ne.pos++]))>>4,st<128||(Ke|=(127&(st=bt[Ne.pos++]))<<3,st<128)||(Ke|=(127&(st=bt[Ne.pos++]))<<10,st<128)||(Ke|=(127&(st=bt[Ne.pos++]))<<17,st<128)||(Ke|=(127&(st=bt[Ne.pos++]))<<24,st<128)||(Ke|=(1&(st=bt[Ne.pos++]))<<31,st<128))return Vl(Ae,Ke,Ce);throw new Error("Expected varint not more than 10 bytes")}(I|=(15&(Y=se[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var A=this.readVarint()+this.pos,I=this.pos;return this.pos=A,A-I>=12&&Of?function(Y,se,Ae){return Of.decode(Y.subarray(se,Ae))}(this.buf,I,A):function(Y,se,Ae){for(var Ce="",Ne=se;Ne<Ae;){var Ke,st,bt,Tt=Y[Ne],Rt=null,qt=Tt>239?4:Tt>223?3:Tt>191?2:1;if(Ne+qt>Ae)break;qt===1?Tt<128&&(Rt=Tt):qt===2?(192&(Ke=Y[Ne+1]))==128&&(Rt=(31&Tt)<<6|63&Ke)<=127&&(Rt=null):qt===3?(Ke=Y[Ne+1],st=Y[Ne+2],(192&Ke)==128&&(192&st)==128&&((Rt=(15&Tt)<<12|(63&Ke)<<6|63&st)<=2047||Rt>=55296&&Rt<=57343)&&(Rt=null)):qt===4&&(Ke=Y[Ne+1],st=Y[Ne+2],bt=Y[Ne+3],(192&Ke)==128&&(192&st)==128&&(192&bt)==128&&((Rt=(15&Tt)<<18|(63&Ke)<<12|(63&st)<<6|63&bt)<=65535||Rt>=1114112)&&(Rt=null)),Rt===null?(Rt=65533,qt=1):Rt>65535&&(Rt-=65536,Ce+=String.fromCharCode(Rt>>>10&1023|55296),Rt=56320|1023&Rt),Ce+=String.fromCharCode(Rt),Ne+=qt}return Ce}(this.buf,I,A)},readBytes:function(){var A=this.readVarint()+this.pos,I=this.buf.subarray(this.pos,A);return this.pos=A,I},readPackedVarint:function(A,I){if(this.type!==ji.Bytes)return A.push(this.readVarint(I));var Y=pl(this);for(A=A||[];this.pos<Y;)A.push(this.readVarint(I));return A},readPackedSVarint:function(A){if(this.type!==ji.Bytes)return A.push(this.readSVarint());var I=pl(this);for(A=A||[];this.pos<I;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==ji.Bytes)return A.push(this.readBoolean());var I=pl(this);for(A=A||[];this.pos<I;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==ji.Bytes)return A.push(this.readFloat());var I=pl(this);for(A=A||[];this.pos<I;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==ji.Bytes)return A.push(this.readDouble());var I=pl(this);for(A=A||[];this.pos<I;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==ji.Bytes)return A.push(this.readFixed32());var I=pl(this);for(A=A||[];this.pos<I;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==ji.Bytes)return A.push(this.readSFixed32());var I=pl(this);for(A=A||[];this.pos<I;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==ji.Bytes)return A.push(this.readFixed64());var I=pl(this);for(A=A||[];this.pos<I;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==ji.Bytes)return A.push(this.readSFixed64());var I=pl(this);for(A=A||[];this.pos<I;)A.push(this.readSFixed64());return A},skip:function(A){var I=7&A;if(I===ji.Varint)for(;this.buf[this.pos++]>127;);else if(I===ji.Bytes)this.pos=this.readVarint()+this.pos;else if(I===ji.Fixed32)this.pos+=4;else{if(I!==ji.Fixed64)throw new Error("Unimplemented type: "+I);this.pos+=8}},writeTag:function(A,I){this.writeVarint(A<<3|I)},realloc:function(A){for(var I=this.length||16;I<this.pos+A;)I*=2;if(I!==this.length){var Y=new Uint8Array(I);Y.set(this.buf),this.buf=Y,this.length=I}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),ql(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),ql(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),ql(this.buf,-1&A,this.pos),ql(this.buf,Math.floor(A*Pf),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),ql(this.buf,-1&A,this.pos),ql(this.buf,Math.floor(A*Pf),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(I,Y){var se,Ae;if(I>=0?(se=I%4294967296|0,Ae=I/4294967296|0):(Ae=~(-I/4294967296),4294967295^(se=~(-I%4294967296))?se=se+1|0:(se=0,Ae=Ae+1|0)),I>=18446744073709552e3||I<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Y.realloc(10),function(Ce,Ne,Ke){Ke.buf[Ke.pos++]=127&Ce|128,Ce>>>=7,Ke.buf[Ke.pos++]=127&Ce|128,Ce>>>=7,Ke.buf[Ke.pos++]=127&Ce|128,Ce>>>=7,Ke.buf[Ke.pos++]=127&Ce|128,Ce>>>=7,Ke.buf[Ke.pos]=127&Ce}(se,0,Y),function(Ce,Ne){var Ke=(7&Ce)<<4;Ne.buf[Ne.pos++]|=Ke|((Ce>>>=3)?128:0),Ce&&(Ne.buf[Ne.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(Ne.buf[Ne.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(Ne.buf[Ne.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(Ne.buf[Ne.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(Ne.buf[Ne.pos++]=127&Ce)))))}(Ae,Y)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(Boolean(A))},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var I=this.pos;this.pos=function(se,Ae,Ce){for(var Ne,Ke,st=0;st<Ae.length;st++){if((Ne=Ae.charCodeAt(st))>55295&&Ne<57344){if(!Ke){Ne>56319||st+1===Ae.length?(se[Ce++]=239,se[Ce++]=191,se[Ce++]=189):Ke=Ne;continue}if(Ne<56320){se[Ce++]=239,se[Ce++]=191,se[Ce++]=189,Ke=Ne;continue}Ne=Ke-55296<<10|Ne-56320|65536,Ke=null}else Ke&&(se[Ce++]=239,se[Ce++]=191,se[Ce++]=189,Ke=null);Ne<128?se[Ce++]=Ne:(Ne<2048?se[Ce++]=Ne>>6|192:(Ne<65536?se[Ce++]=Ne>>12|224:(se[Ce++]=Ne>>18|240,se[Ce++]=Ne>>12&63|128),se[Ce++]=Ne>>6&63|128),se[Ce++]=63&Ne|128)}return Ce}(this.buf,A,this.pos);var Y=this.pos-I;Y>=128&&If(I,Y,this),this.pos=I-1,this.writeVarint(Y),this.pos+=Y},writeFloat:function(A){this.realloc(4),Cf(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),Cf(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var I=A.length;this.writeVarint(I),this.realloc(I);for(var Y=0;Y<I;Y++)this.buf[this.pos++]=A[Y]},writeRawMessage:function(A,I){this.pos++;var Y=this.pos;A(I,this);var se=this.pos-Y;se>=128&&If(Y,se,this),this.pos=Y-1,this.writeVarint(se),this.pos+=se},writeMessage:function(A,I,Y){this.writeTag(A,ji.Bytes),this.writeRawMessage(I,Y)},writePackedVarint:function(A,I){I.length&&this.writeMessage(A,Bp,I)},writePackedSVarint:function(A,I){I.length&&this.writeMessage(A,Np,I)},writePackedBoolean:function(A,I){I.length&&this.writeMessage(A,Vp,I)},writePackedFloat:function(A,I){I.length&&this.writeMessage(A,jp,I)},writePackedDouble:function(A,I){I.length&&this.writeMessage(A,Up,I)},writePackedFixed32:function(A,I){I.length&&this.writeMessage(A,qp,I)},writePackedSFixed32:function(A,I){I.length&&this.writeMessage(A,Hp,I)},writePackedFixed64:function(A,I){I.length&&this.writeMessage(A,Gp,I)},writePackedSFixed64:function(A,I){I.length&&this.writeMessage(A,Wp,I)},writeBytesField:function(A,I){this.writeTag(A,ji.Bytes),this.writeBytes(I)},writeFixed32Field:function(A,I){this.writeTag(A,ji.Fixed32),this.writeFixed32(I)},writeSFixed32Field:function(A,I){this.writeTag(A,ji.Fixed32),this.writeSFixed32(I)},writeFixed64Field:function(A,I){this.writeTag(A,ji.Fixed64),this.writeFixed64(I)},writeSFixed64Field:function(A,I){this.writeTag(A,ji.Fixed64),this.writeSFixed64(I)},writeVarintField:function(A,I){this.writeTag(A,ji.Varint),this.writeVarint(I)},writeSVarintField:function(A,I){this.writeTag(A,ji.Varint),this.writeSVarint(I)},writeStringField:function(A,I){this.writeTag(A,ji.Bytes),this.writeString(I)},writeFloatField:function(A,I){this.writeTag(A,ji.Fixed32),this.writeFloat(I)},writeDoubleField:function(A,I){this.writeTag(A,ji.Fixed64),this.writeDouble(I)},writeBooleanField:function(A,I){this.writeVarintField(A,Boolean(I))}};var zc=3;function Yp(A,I,Y){A===1&&Y.readMessage(Xp,I)}function Xp(A,I,Y){if(A===3){var se=Y.readMessage(Zp,{}),Ae=se.id,Ce=se.bitmap,Ne=se.width,Ke=se.height,st=se.left,bt=se.top,Tt=se.advance;I.push({id:Ae,bitmap:new Ll({width:Ne+2*zc,height:Ke+2*zc},Ce),metrics:{width:Ne,height:Ke,left:st,top:bt,advance:Tt}})}}function Zp(A,I,Y){A===1?I.id=Y.readVarint():A===2?I.bitmap=Y.readBytes():A===3?I.width=Y.readVarint():A===4?I.height=Y.readVarint():A===5?I.left=Y.readSVarint():A===6?I.top=Y.readSVarint():A===7&&(I.advance=Y.readVarint())}var zf=zc;function Rf(A){for(var I=0,Y=0,se=0,Ae=A;se<Ae.length;se+=1){var Ce=Ae[se];I+=Ce.w*Ce.h,Y=Math.max(Y,Ce.w)}A.sort(function(un,kn){return kn.h-un.h});for(var Ne=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(I/.95)),Y),h:1/0}],Ke=0,st=0,bt=0,Tt=A;bt<Tt.length;bt+=1)for(var Rt=Tt[bt],qt=Ne.length-1;qt>=0;qt--){var Bt=Ne[qt];if(!(Rt.w>Bt.w||Rt.h>Bt.h)){if(Rt.x=Bt.x,Rt.y=Bt.y,st=Math.max(st,Rt.y+Rt.h),Ke=Math.max(Ke,Rt.x+Rt.w),Rt.w===Bt.w&&Rt.h===Bt.h){var an=Ne.pop();qt<Ne.length&&(Ne[qt]=an)}else Rt.h===Bt.h?(Bt.x+=Rt.w,Bt.w-=Rt.w):Rt.w===Bt.w?(Bt.y+=Rt.h,Bt.h-=Rt.h):(Ne.push({x:Bt.x+Rt.w,y:Bt.y,w:Bt.w-Rt.w,h:Rt.h}),Bt.y+=Rt.h,Bt.h-=Rt.h);break}}return{w:Ke,h:st,fill:I/(Ke*st)||0}}var Xo=1,Yu=function(A,I){var Y=I.pixelRatio,se=I.version,Ae=I.stretchX,Ce=I.stretchY,Ne=I.content;this.paddedRect=A,this.pixelRatio=Y,this.stretchX=Ae,this.stretchY=Ce,this.content=Ne,this.version=se},gu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};gu.tl.get=function(){return[this.paddedRect.x+Xo,this.paddedRect.y+Xo]},gu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Xo,this.paddedRect.y+this.paddedRect.h-Xo]},gu.tlbr.get=function(){return this.tl.concat(this.br)},gu.displaySize.get=function(){return[(this.paddedRect.w-2*Xo)/this.pixelRatio,(this.paddedRect.h-2*Xo)/this.pixelRatio]},Object.defineProperties(Yu.prototype,gu);var vu=function(A,I){var Y={},se={};this.haveRenderCallbacks=[];var Ae=[];this.addImages(A,Y,Ae),this.addImages(I,se,Ae);var Ce=Rf(Ae),Ne=Ce.w,Ke=Ce.h,st=new Do({width:Ne||1,height:Ke||1});for(var bt in A){var Tt=A[bt],Rt=Y[bt].paddedRect;Do.copy(Tt.data,st,{x:0,y:0},{x:Rt.x+Xo,y:Rt.y+Xo},Tt.data)}for(var qt in I){var Bt=I[qt],an=se[qt].paddedRect,un=an.x+Xo,kn=an.y+Xo,wn=Bt.data.width,Bn=Bt.data.height;Do.copy(Bt.data,st,{x:0,y:0},{x:un,y:kn},Bt.data),Do.copy(Bt.data,st,{x:0,y:Bn-1},{x:un,y:kn-1},{width:wn,height:1}),Do.copy(Bt.data,st,{x:0,y:0},{x:un,y:kn+Bn},{width:wn,height:1}),Do.copy(Bt.data,st,{x:wn-1,y:0},{x:un-1,y:kn},{width:1,height:Bn}),Do.copy(Bt.data,st,{x:0,y:0},{x:un+wn,y:kn},{width:1,height:Bn})}this.image=st,this.iconPositions=Y,this.patternPositions=se};vu.prototype.addImages=function(A,I,Y){for(var se in A){var Ae=A[se],Ce={x:0,y:0,w:Ae.data.width+2*Xo,h:Ae.data.height+2*Xo};Y.push(Ce),I[se]=new Yu(Ce,Ae),Ae.hasRenderCallback&&this.haveRenderCallbacks.push(se)}},vu.prototype.patchUpdatedImages=function(A,I){for(var Y in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[Y],A.getImage(Y),I),this.patchUpdatedImage(this.patternPositions[Y],A.getImage(Y),I)},vu.prototype.patchUpdatedImage=function(A,I,Y){if(A&&I&&A.version!==I.version){A.version=I.version;var se=A.tl,Ae=se[0],Ce=se[1];Y.update(I.data,void 0,{x:Ae,y:Ce})}},Dr("ImagePosition",Yu),Dr("ImageAtlas",vu);var ls={horizontal:1,vertical:2,horizontalOnly:3},mu=-17,Hl=function(){this.scale=1,this.fontStack="",this.imageName=null};Hl.forText=function(A,I){var Y=new Hl;return Y.scale=A||1,Y.fontStack=I,Y},Hl.forImage=function(A){var I=new Hl;return I.imageName=A,I};var ao=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Xu(A,I,Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt,Bt,an,un){var kn,wn=ao.fromFeature(A,Ae);Rt===ls.vertical&&wn.verticalizePunctuation();var Bn=Pa.processBidirectionalText,Un=Pa.processStyledBidirectionalText;if(Bn&&wn.sections.length===1){kn=[];for(var Xn=0,Qn=Bn(wn.toString(),Rc(wn,bt,Ce,I,se,Bt,an));Xn<Qn.length;Xn+=1){var cr=Qn[Xn],Tr=new ao;Tr.text=cr,Tr.sections=wn.sections;for(var br=0;br<cr.length;br++)Tr.sectionIndex.push(0);kn.push(Tr)}}else if(Un){kn=[];for(var Sr=0,Or=Un(wn.text,wn.sectionIndex,Rc(wn,bt,Ce,I,se,Bt,an));Sr<Or.length;Sr+=1){var Zr=Or[Sr],Ur=new ao;Ur.text=Zr[0],Ur.sectionIndex=Zr[1],Ur.sections=wn.sections,kn.push(Ur)}}else kn=function(Br,ui){for(var ti=[],Ii=Br.text,Yr=0,Ei=0,Ui=ui;Ei<Ui.length;Ei+=1){var Hi=Ui[Ei];ti.push(Br.substring(Yr,Hi)),Yr=Hi}return Yr<Ii.length&&ti.push(Br.substring(Yr,Ii.length)),ti}(wn,Rc(wn,bt,Ce,I,se,Bt,an));var Xr=[],qr={positionedLines:Xr,text:wn.toString(),top:Tt[1],bottom:Tt[1],left:Tt[0],right:Tt[0],writingMode:Rt,iconsInText:!1,verticalizable:!1};return function(Br,ui,ti,Ii,Yr,Ei,Ui,Hi,Gi,Di,ba,Qi){for(var Ia=0,Ka=mu,Na=0,xo=0,ja=Hi==="right"?1:Hi==="left"?0:.5,Ma=0,Ua=0,Da=Yr;Ua<Da.length;Ua+=1){var Sa=Da[Ua];Sa.trim();var ni=Sa.getMaxScale(),pi=(ni-1)*Ba,aa={positionedGlyphs:[],lineOffset:0};Br.positionedLines[Ma]=aa;var Pi=aa.positionedGlyphs,ta=0;if(Sa.length()){for(var Ji=0;Ji<Sa.length();Ji++){var mi=Sa.getSection(Ji),oa=Sa.getSectionIndex(Ji),bo=Sa.getCharCode(Ji),Ko=0,oo=null,Ys=null,ml=null,za=Ba,Xs=!(Gi===ls.horizontal||!ba&&!Ho(bo)||ba&&(Zu[bo]||is(bo)));if(mi.imageName){var Cs=Ii[mi.imageName];if(!Cs)continue;ml=mi.imageName,Br.iconsInText=Br.iconsInText||!0,Ys=Cs.paddedRect;var Ps=Cs.displaySize;mi.scale=mi.scale*Ba/Qi,oo={width:Ps[0],height:Ps[1],left:Xo,top:-zf,advance:Xs?Ps[1]:Ps[0]},Ko=pi+(Ba-Ps[1]*mi.scale),za=oo.advance;var Il=Xs?Ps[0]*mi.scale-Ba*ni:Ps[1]*mi.scale-Ba*ni;Il>0&&Il>ta&&(ta=Il)}else{var ic=ti[mi.fontStack],Dl=ic&&ic[bo];if(Dl&&Dl.rect)Ys=Dl.rect,oo=Dl.metrics;else{var ac=ui[mi.fontStack],_u=ac&&ac[bo];if(!_u)continue;oo=_u.metrics}Ko=(ni-mi.scale)*Ba}Xs?(Br.verticalizable=!0,Pi.push({glyph:bo,imageName:ml,x:Ia,y:Ka+Ko,vertical:Xs,scale:mi.scale,fontStack:mi.fontStack,sectionIndex:oa,metrics:oo,rect:Ys}),Ia+=za*mi.scale+Di):(Pi.push({glyph:bo,imageName:ml,x:Ia,y:Ka+Ko,vertical:Xs,scale:mi.scale,fontStack:mi.fontStack,sectionIndex:oa,metrics:oo,rect:Ys}),Ia+=oo.advance*mi.scale+Di)}if(Pi.length!==0){var Wc=Ia-Di;Na=Math.max(Wc,Na),Jp(Pi,0,Pi.length-1,ja,ta)}Ia=0;var oc=Ei*ni+ta;aa.lineOffset=Math.max(ta,pi),Ka+=oc,xo=Math.max(oc,xo),++Ma}else Ka+=Ei,++Ma}var eu=Ka-mu,sc=Fc(Ui),lc=sc.horizontalAlign,wu=sc.verticalAlign;(function(Yc,Tu,zl,tu,uc,cc,nu,fc,hc){var ku=(Tu-zl)*uc,Au=0;Au=cc!==nu?-fc*tu-mu:(-tu*hc+.5)*nu;for(var Rl=0,Mu=Yc;Rl<Mu.length;Rl+=1)for(var Fl=0,Su=Mu[Rl].positionedGlyphs;Fl<Su.length;Fl+=1){var Eu=Su[Fl];Eu.x+=ku,Eu.y+=Au}})(Br.positionedLines,ja,lc,wu,Na,xo,Ei,eu,Yr.length),Br.top+=-wu*eu,Br.bottom=Br.top+eu,Br.left+=-lc*Na,Br.right=Br.left+Na}(qr,I,Y,se,kn,Ne,Ke,st,Rt,bt,qt,un),!function(Br){for(var ui=0,ti=Br;ui<ti.length;ui+=1)if(ti[ui].positionedGlyphs.length!==0)return!1;return!0}(Xr)&&qr}ao.fromFeature=function(A,I){for(var Y=new ao,se=0;se<A.sections.length;se++){var Ae=A.sections[se];Ae.image?Y.addImageSection(Ae):Y.addTextSection(Ae,I)}return Y},ao.prototype.length=function(){return this.text.length},ao.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]},ao.prototype.getSectionIndex=function(A){return this.sectionIndex[A]},ao.prototype.getCharCode=function(A){return this.text.charCodeAt(A)},ao.prototype.verticalizePunctuation=function(){this.text=function(A){for(var I="",Y=0;Y<A.length;Y++){var se=A.charCodeAt(Y+1)||null,Ae=A.charCodeAt(Y-1)||null;se&&ra(se)&&!du[A[Y+1]]||Ae&&ra(Ae)&&!du[A[Y-1]]||!du[A[Y]]?I+=A[Y]:I+=du[A[Y]]}return I}(this.text)},ao.prototype.trim=function(){for(var A=0,I=0;I<this.text.length&&Zu[this.text.charCodeAt(I)];I++)A++;for(var Y=this.text.length,se=this.text.length-1;se>=0&&se>=A&&Zu[this.text.charCodeAt(se)];se--)Y--;this.text=this.text.substring(A,Y),this.sectionIndex=this.sectionIndex.slice(A,Y)},ao.prototype.substring=function(A,I){var Y=new ao;return Y.text=this.text.substring(A,I),Y.sectionIndex=this.sectionIndex.slice(A,I),Y.sections=this.sections,Y},ao.prototype.toString=function(){return this.text},ao.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(I,Y){return Math.max(I,A.sections[Y].scale)},0)},ao.prototype.addTextSection=function(A,I){this.text+=A.text,this.sections.push(Hl.forText(A.scale,A.fontStack||I));for(var Y=this.sections.length-1,se=0;se<A.text.length;++se)this.sectionIndex.push(Y)},ao.prototype.addImageSection=function(A){var I=A.image?A.image.name:"";if(I.length!==0){var Y=this.getNextImageSectionCharCode();Y?(this.text+=String.fromCharCode(Y),this.sections.push(Hl.forImage(I)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}else E("Can't add FormattedSection with an empty image.")},ao.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Zu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Zo={};function Ff(A,I,Y,se,Ae,Ce){if(I.imageName){var Ne=se[I.imageName];return Ne?Ne.displaySize[0]*I.scale*Ba/Ce+Ae:0}var Ke=Y[I.fontStack],st=Ke&&Ke[A];return st?st.metrics.advance*I.scale+Ae:0}function Bf(A,I,Y,se){var Ae=Math.pow(A-I,2);return se?A<I?Ae/2:2*Ae:Ae+Math.abs(Y)*Y}function Kp(A,I,Y){var se=0;return A===10&&(se-=1e4),Y&&(se+=150),A!==40&&A!==65288||(se+=50),I!==41&&I!==65289||(se+=50),se}function Nf(A,I,Y,se,Ae,Ce){for(var Ne=null,Ke=Bf(I,Y,Ae,Ce),st=0,bt=se;st<bt.length;st+=1){var Tt=bt[st],Rt=Bf(I-Tt.x,Y,Ae,Ce)+Tt.badness;Rt<=Ke&&(Ne=Tt,Ke=Rt)}return{index:A,x:I,priorBreak:Ne,badness:Ke}}function jf(A){return A?jf(A.priorBreak).concat(A.index):[]}function Rc(A,I,Y,se,Ae,Ce,Ne){if(Ce!=="point")return[];if(!A)return[];for(var Ke=[],st=function(kn,wn,Bn,Un,Xn,Qn){for(var cr=0,Tr=0;Tr<kn.length();Tr++){var br=kn.getSection(Tr);cr+=Ff(kn.getCharCode(Tr),br,Un,Xn,wn,Qn)}return cr/Math.max(1,Math.ceil(cr/Bn))}(A,I,Y,se,Ae,Ne),bt=A.text.indexOf("\u200B")>=0,Tt=0,Rt=0;Rt<A.length();Rt++){var qt=A.getSection(Rt),Bt=A.getCharCode(Rt);if(Zu[Bt]||(Tt+=Ff(Bt,qt,se,Ae,I,Ne)),Rt<A.length()-1){var an=!((un=Bt)<11904||!(kr["Bopomofo Extended"](un)||kr.Bopomofo(un)||kr["CJK Compatibility Forms"](un)||kr["CJK Compatibility Ideographs"](un)||kr["CJK Compatibility"](un)||kr["CJK Radicals Supplement"](un)||kr["CJK Strokes"](un)||kr["CJK Symbols and Punctuation"](un)||kr["CJK Unified Ideographs Extension A"](un)||kr["CJK Unified Ideographs"](un)||kr["Enclosed CJK Letters and Months"](un)||kr["Halfwidth and Fullwidth Forms"](un)||kr.Hiragana(un)||kr["Ideographic Description Characters"](un)||kr["Kangxi Radicals"](un)||kr["Katakana Phonetic Extensions"](un)||kr.Katakana(un)||kr["Vertical Forms"](un)||kr["Yi Radicals"](un)||kr["Yi Syllables"](un)));(Zo[Bt]||an||qt.imageName)&&Ke.push(Nf(Rt+1,Tt,st,Ke,Kp(Bt,A.getCharCode(Rt+1),an&&bt),!1))}}var un;return jf(Nf(A.length(),Tt,st,Ke,0,!0))}function Fc(A){var I=.5,Y=.5;switch(A){case"right":case"top-right":case"bottom-right":I=1;break;case"left":case"top-left":case"bottom-left":I=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":Y=1;break;case"top":case"top-right":case"top-left":Y=0}return{horizontalAlign:I,verticalAlign:Y}}function Jp(A,I,Y,se,Ae){if(se||Ae)for(var Ce=A[Y],Ne=Ce.metrics.advance*Ce.scale,Ke=(A[Y].x+Ne)*se,st=I;st<=Y;st++)A[st].x-=Ke,A[st].y+=Ae}function Uf(A,I,Y,se,Ae,Ce){var Ne,Ke=A.image;if(Ke.content){var st=Ke.content,bt=Ke.pixelRatio||1;Ne=[st[0]/bt,st[1]/bt,Ke.displaySize[0]-st[2]/bt,Ke.displaySize[1]-st[3]/bt]}var Tt,Rt,qt,Bt,an=I.left*Ce,un=I.right*Ce;Y==="width"||Y==="both"?(Bt=Ae[0]+an-se[3],Rt=Ae[0]+un+se[1]):Rt=(Bt=Ae[0]+(an+un-Ke.displaySize[0])/2)+Ke.displaySize[0];var kn=I.top*Ce,wn=I.bottom*Ce;return Y==="height"||Y==="both"?(Tt=Ae[1]+kn-se[0],qt=Ae[1]+wn+se[2]):qt=(Tt=Ae[1]+(kn+wn-Ke.displaySize[1])/2)+Ke.displaySize[1],{image:Ke,top:Tt,right:Rt,bottom:qt,left:Bt,collisionPadding:Ne}}Zo[10]=!0,Zo[32]=!0,Zo[38]=!0,Zo[40]=!0,Zo[41]=!0,Zo[43]=!0,Zo[45]=!0,Zo[47]=!0,Zo[173]=!0,Zo[183]=!0,Zo[8203]=!0,Zo[8208]=!0,Zo[8211]=!0,Zo[8231]=!0;var Gl=function(A){function I(Y,se,Ae,Ce){A.call(this,Y,se),this.angle=Ae,Ce!==void 0&&(this.segment=Ce)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.clone=function(){return new I(this.x,this.y,this.angle,this.segment)},I}(t);Dr("Anchor",Gl);var Ws=128;function Bc(A,I){var Y=I.expression;if(Y.kind==="constant")return{kind:"constant",layoutSize:Y.evaluate(new ii(A+1))};if(Y.kind==="source")return{kind:"source"};for(var se=Y.zoomStops,Ae=Y.interpolationType,Ce=0;Ce<se.length&&se[Ce]<=A;)Ce++;for(var Ne=Ce=Math.max(0,Ce-1);Ne<se.length&&se[Ne]<A+1;)Ne++;Ne=Math.min(se.length-1,Ne);var Ke=se[Ce],st=se[Ne];return Y.kind==="composite"?{kind:"composite",minZoom:Ke,maxZoom:st,interpolationType:Ae}:{kind:"camera",minZoom:Ke,maxZoom:st,minSize:Y.evaluate(new ii(Ke)),maxSize:Y.evaluate(new ii(st)),interpolationType:Ae}}function Vf(A,I,Y){var se=I.uSize,Ae=I.uSizeT,Ce=Y.lowerSize,Ne=Y.upperSize;return A.kind==="source"?Ce/Ws:A.kind==="composite"?Gr(Ce/Ws,Ne/Ws,Ae):se}function qf(A,I){var Y=0,se=0;if(A.kind==="constant")se=A.layoutSize;else if(A.kind!=="source"){var Ae=A.interpolationType,Ce=A.minZoom,Ne=A.maxZoom,Ke=Ae?u($i.interpolationFactor(Ae,I,Ce,Ne),0,1):0;A.kind==="camera"?se=Gr(A.minSize,A.maxSize,Ke):Y=Ke}return{uSizeT:Y,uSize:se}}var Qp=Object.freeze({__proto__:null,getSizeData:Bc,evaluateSizeForFeature:Vf,evaluateSizeForZoom:qf,SIZE_PACK_FACTOR:Ws});function Hf(A,I,Y,se,Ae){if(I.segment===void 0)return!0;for(var Ce=I,Ne=I.segment+1,Ke=0;Ke>-Y/2;){if(--Ne<0)return!1;Ke-=A[Ne].dist(Ce),Ce=A[Ne]}Ke+=A[Ne].dist(A[Ne+1]),Ne++;for(var st=[],bt=0;Ke<Y/2;){var Tt=A[Ne-1],Rt=A[Ne],qt=A[Ne+1];if(!qt)return!1;var Bt=Tt.angleTo(Rt)-Rt.angleTo(qt);for(Bt=Math.abs((Bt+3*Math.PI)%(2*Math.PI)-Math.PI),st.push({distance:Ke,angleDelta:Bt}),bt+=Bt;Ke-st[0].distance>se;)bt-=st.shift().angleDelta;if(bt>Ae)return!1;Ne++,Ke+=Rt.dist(qt)}return!0}function Gf(A){for(var I=0,Y=0;Y<A.length-1;Y++)I+=A[Y].dist(A[Y+1]);return I}function Wf(A,I,Y){return A?.6*I*Y:0}function Yf(A,I){return Math.max(A?A.right-A.left:0,I?I.right-I.left:0)}function $p(A,I,Y,se,Ae,Ce){for(var Ne=Wf(Y,Ae,Ce),Ke=Yf(Y,se)*Ce,st=0,bt=Gf(A)/2,Tt=0;Tt<A.length-1;Tt++){var Rt=A[Tt],qt=A[Tt+1],Bt=Rt.dist(qt);if(st+Bt>bt){var an=(bt-st)/Bt,un=Gr(Rt.x,qt.x,an),kn=Gr(Rt.y,qt.y,an),wn=new Gl(un,kn,qt.angleTo(Rt),Tt);return wn._round(),!Ne||Hf(A,wn,Ke,Ne,I)?wn:void 0}st+=Bt}}function ed(A,I,Y,se,Ae,Ce,Ne,Ke,st){var bt=Wf(se,Ce,Ne),Tt=Yf(se,Ae),Rt=Tt*Ne,qt=A[0].x===0||A[0].x===st||A[0].y===0||A[0].y===st;return I-Rt<I/4&&(I=Rt+I/4),Xf(A,qt?I/2*Ke%I:(Tt/2+2*Ce)*Ne*Ke%I,I,bt,Y,Rt,qt,!1,st)}function Xf(A,I,Y,se,Ae,Ce,Ne,Ke,st){for(var bt=Ce/2,Tt=Gf(A),Rt=0,qt=I-Y,Bt=[],an=0;an<A.length-1;an++){for(var un=A[an],kn=A[an+1],wn=un.dist(kn),Bn=kn.angleTo(un);qt+Y<Rt+wn;){var Un=((qt+=Y)-Rt)/wn,Xn=Gr(un.x,kn.x,Un),Qn=Gr(un.y,kn.y,Un);if(Xn>=0&&Xn<st&&Qn>=0&&Qn<st&&qt-bt>=0&&qt+bt<=Tt){var cr=new Gl(Xn,Qn,Bn,an);cr._round(),se&&!Hf(A,cr,Ce,se,Ae)||Bt.push(cr)}}Rt+=wn}return Ke||Bt.length||Ne||(Bt=Xf(A,Rt/2,Y,se,Ae,Ce,Ne,!0,st)),Bt}function Zf(A,I,Y,se,Ae){for(var Ce=[],Ne=0;Ne<A.length;Ne++)for(var Ke=A[Ne],st=void 0,bt=0;bt<Ke.length-1;bt++){var Tt=Ke[bt],Rt=Ke[bt+1];Tt.x<I&&Rt.x<I||(Tt.x<I?Tt=new t(I,Tt.y+(Rt.y-Tt.y)*((I-Tt.x)/(Rt.x-Tt.x)))._round():Rt.x<I&&(Rt=new t(I,Tt.y+(Rt.y-Tt.y)*((I-Tt.x)/(Rt.x-Tt.x)))._round()),Tt.y<Y&&Rt.y<Y||(Tt.y<Y?Tt=new t(Tt.x+(Rt.x-Tt.x)*((Y-Tt.y)/(Rt.y-Tt.y)),Y)._round():Rt.y<Y&&(Rt=new t(Tt.x+(Rt.x-Tt.x)*((Y-Tt.y)/(Rt.y-Tt.y)),Y)._round()),Tt.x>=se&&Rt.x>=se||(Tt.x>=se?Tt=new t(se,Tt.y+(Rt.y-Tt.y)*((se-Tt.x)/(Rt.x-Tt.x)))._round():Rt.x>=se&&(Rt=new t(se,Tt.y+(Rt.y-Tt.y)*((se-Tt.x)/(Rt.x-Tt.x)))._round()),Tt.y>=Ae&&Rt.y>=Ae||(Tt.y>=Ae?Tt=new t(Tt.x+(Rt.x-Tt.x)*((Ae-Tt.y)/(Rt.y-Tt.y)),Ae)._round():Rt.y>=Ae&&(Rt=new t(Tt.x+(Rt.x-Tt.x)*((Ae-Tt.y)/(Rt.y-Tt.y)),Ae)._round()),st&&Tt.equals(st[st.length-1])||(st=[Tt],Ce.push(st)),st.push(Rt)))))}return Ce}var Wl=Xo;function Kf(A,I,Y,se){var Ae=[],Ce=A.image,Ne=Ce.pixelRatio,Ke=Ce.paddedRect.w-2*Wl,st=Ce.paddedRect.h-2*Wl,bt=A.right-A.left,Tt=A.bottom-A.top,Rt=Ce.stretchX||[[0,Ke]],qt=Ce.stretchY||[[0,st]],Bt=function(Ei,Ui){return Ei+Ui[1]-Ui[0]},an=Rt.reduce(Bt,0),un=qt.reduce(Bt,0),kn=Ke-an,wn=st-un,Bn=0,Un=an,Xn=0,Qn=un,cr=0,Tr=kn,br=0,Sr=wn;if(Ce.content&&se){var Or=Ce.content;Bn=Ku(Rt,0,Or[0]),Xn=Ku(qt,0,Or[1]),Un=Ku(Rt,Or[0],Or[2]),Qn=Ku(qt,Or[1],Or[3]),cr=Or[0]-Bn,br=Or[1]-Xn,Tr=Or[2]-Or[0]-Un,Sr=Or[3]-Or[1]-Qn}var Zr=function(Ei,Ui,Hi,Gi){var Di=Ju(Ei.stretch-Bn,Un,bt,A.left),ba=Qu(Ei.fixed-cr,Tr,Ei.stretch,an),Qi=Ju(Ui.stretch-Xn,Qn,Tt,A.top),Ia=Qu(Ui.fixed-br,Sr,Ui.stretch,un),Ka=Ju(Hi.stretch-Bn,Un,bt,A.left),Na=Qu(Hi.fixed-cr,Tr,Hi.stretch,an),xo=Ju(Gi.stretch-Xn,Qn,Tt,A.top),ja=Qu(Gi.fixed-br,Sr,Gi.stretch,un),Ma=new t(Di,Qi),Ua=new t(Ka,Qi),Da=new t(Ka,xo),Sa=new t(Di,xo),ni=new t(ba/Ne,Ia/Ne),pi=new t(Na/Ne,ja/Ne),aa=I*Math.PI/180;if(aa){var Pi=Math.sin(aa),ta=Math.cos(aa),Ji=[ta,-Pi,Pi,ta];Ma._matMult(Ji),Ua._matMult(Ji),Sa._matMult(Ji),Da._matMult(Ji)}var mi=Ei.stretch+Ei.fixed,oa=Hi.stretch+Hi.fixed,bo=Ui.stretch+Ui.fixed,Ko=Gi.stretch+Gi.fixed;return{tl:Ma,tr:Ua,bl:Sa,br:Da,tex:{x:Ce.paddedRect.x+Wl+mi,y:Ce.paddedRect.y+Wl+bo,w:oa-mi,h:Ko-bo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ni,pixelOffsetBR:pi,minFontScaleX:Tr/Ne/bt,minFontScaleY:Sr/Ne/Tt,isSDF:Y}};if(se&&(Ce.stretchX||Ce.stretchY))for(var Ur=Jf(Rt,kn,an),Xr=Jf(qt,wn,un),qr=0;qr<Ur.length-1;qr++)for(var Br=Ur[qr],ui=Ur[qr+1],ti=0;ti<Xr.length-1;ti++){var Ii=Xr[ti],Yr=Xr[ti+1];Ae.push(Zr(Br,Ii,ui,Yr))}else Ae.push(Zr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ke+1},{fixed:0,stretch:st+1}));return Ae}function Ku(A,I,Y){for(var se=0,Ae=0,Ce=A;Ae<Ce.length;Ae+=1){var Ne=Ce[Ae];se+=Math.max(I,Math.min(Y,Ne[1]))-Math.max(I,Math.min(Y,Ne[0]))}return se}function Jf(A,I,Y){for(var se=[{fixed:-Wl,stretch:0}],Ae=0,Ce=A;Ae<Ce.length;Ae+=1){var Ne=Ce[Ae],Ke=Ne[0],st=Ne[1],bt=se[se.length-1];se.push({fixed:Ke-bt.stretch,stretch:bt.stretch}),se.push({fixed:Ke-bt.stretch,stretch:bt.stretch+(st-Ke)})}return se.push({fixed:I+Wl,stretch:Y}),se}function Ju(A,I,Y,se){return A/I*Y+se}function Qu(A,I,Y,se){return A-I*Y/se}var $u=function(A,I,Y,se,Ae,Ce,Ne,Ke,st,bt){if(this.boxStartIndex=A.length,st){var Tt=Ce.top,Rt=Ce.bottom,qt=Ce.collisionPadding;qt&&(Tt-=qt[1],Rt+=qt[3]);var Bt=Rt-Tt;Bt>0&&(Bt=Math.max(10,Bt),this.circleDiameter=Bt)}else{var an=Ce.top*Ne-Ke,un=Ce.bottom*Ne+Ke,kn=Ce.left*Ne-Ke,wn=Ce.right*Ne+Ke,Bn=Ce.collisionPadding;if(Bn&&(kn-=Bn[0]*Ne,an-=Bn[1]*Ne,wn+=Bn[2]*Ne,un+=Bn[3]*Ne),bt){var Un=new t(kn,an),Xn=new t(wn,an),Qn=new t(kn,un),cr=new t(wn,un),Tr=bt*Math.PI/180;Un._rotate(Tr),Xn._rotate(Tr),Qn._rotate(Tr),cr._rotate(Tr),kn=Math.min(Un.x,Xn.x,Qn.x,cr.x),wn=Math.max(Un.x,Xn.x,Qn.x,cr.x),an=Math.min(Un.y,Xn.y,Qn.y,cr.y),un=Math.max(Un.y,Xn.y,Qn.y,cr.y)}A.emplaceBack(I.x,I.y,kn,an,wn,un,Y,se,Ae)}this.boxEndIndex=A.length},Yl=function(A,I){if(A===void 0&&(A=[]),I===void 0&&(I=td),this.data=A,this.length=this.data.length,this.compare=I,this.length>0)for(var Y=(this.length>>1)-1;Y>=0;Y--)this._down(Y)};function td(A,I){return A<I?-1:A>I?1:0}function nd(A,I,Y){I===void 0&&(I=1),Y===void 0&&(Y=!1);for(var se=1/0,Ae=1/0,Ce=-1/0,Ne=-1/0,Ke=A[0],st=0;st<Ke.length;st++){var bt=Ke[st];(!st||bt.x<se)&&(se=bt.x),(!st||bt.y<Ae)&&(Ae=bt.y),(!st||bt.x>Ce)&&(Ce=bt.x),(!st||bt.y>Ne)&&(Ne=bt.y)}var Tt=Ce-se,Rt=Ne-Ae,qt=Math.min(Tt,Rt),Bt=qt/2,an=new Yl([],rd);if(qt===0)return new t(se,Ae);for(var un=se;un<Ce;un+=qt)for(var kn=Ae;kn<Ne;kn+=qt)an.push(new Xl(un+Bt,kn+Bt,Bt,A));for(var wn=function(Xn){for(var Qn=0,cr=0,Tr=0,br=Xn[0],Sr=0,Or=br.length,Zr=Or-1;Sr<Or;Zr=Sr++){var Ur=br[Sr],Xr=br[Zr],qr=Ur.x*Xr.y-Xr.x*Ur.y;cr+=(Ur.x+Xr.x)*qr,Tr+=(Ur.y+Xr.y)*qr,Qn+=3*qr}return new Xl(cr/Qn,Tr/Qn,0,Xn)}(A),Bn=an.length;an.length;){var Un=an.pop();(Un.d>wn.d||!wn.d)&&(wn=Un,Y&&console.log("found best %d after %d probes",Math.round(1e4*Un.d)/1e4,Bn)),Un.max-wn.d<=I||(Bt=Un.h/2,an.push(new Xl(Un.p.x-Bt,Un.p.y-Bt,Bt,A)),an.push(new Xl(Un.p.x+Bt,Un.p.y-Bt,Bt,A)),an.push(new Xl(Un.p.x-Bt,Un.p.y+Bt,Bt,A)),an.push(new Xl(Un.p.x+Bt,Un.p.y+Bt,Bt,A)),Bn+=4)}return Y&&(console.log("num probes: "+Bn),console.log("best distance: "+wn.d)),wn.p}function rd(A,I){return I.max-A.max}function Xl(A,I,Y,se){this.p=new t(A,I),this.h=Y,this.d=function(Ae,Ce){for(var Ne=!1,Ke=1/0,st=0;st<Ce.length;st++)for(var bt=Ce[st],Tt=0,Rt=bt.length,qt=Rt-1;Tt<Rt;qt=Tt++){var Bt=bt[Tt],an=bt[qt];Bt.y>Ae.y!=an.y>Ae.y&&Ae.x<(an.x-Bt.x)*(Ae.y-Bt.y)/(an.y-Bt.y)+Bt.x&&(Ne=!Ne),Ke=Math.min(Ke,zu(Ae,Bt,an))}return(Ne?1:-1)*Math.sqrt(Ke)}(this.p,se),this.max=this.d+this.h*Math.SQRT2}Yl.prototype.push=function(A){this.data.push(A),this.length++,this._up(this.length-1)},Yl.prototype.pop=function(){if(this.length!==0){var A=this.data[0],I=this.data.pop();return this.length--,this.length>0&&(this.data[0]=I,this._down(0)),A}},Yl.prototype.peek=function(){return this.data[0]},Yl.prototype._up=function(A){for(var I=this.data,Y=this.compare,se=I[A];A>0;){var Ae=A-1>>1,Ce=I[Ae];if(Y(se,Ce)>=0)break;I[A]=Ce,A=Ae}I[A]=se},Yl.prototype._down=function(A){for(var I=this.data,Y=this.compare,se=this.length>>1,Ae=I[A];A<se;){var Ce=1+(A<<1),Ne=I[Ce],Ke=Ce+1;if(Ke<this.length&&Y(I[Ke],Ne)<0&&(Ce=Ke,Ne=I[Ke]),Y(Ne,Ae)>=0)break;I[A]=Ne,A=Ce}I[A]=Ae};var Zl=7,Nc=Number.POSITIVE_INFINITY;function Qf(A,I){return I[1]!==Nc?function(Y,se,Ae){var Ce=0,Ne=0;switch(se=Math.abs(se),Ae=Math.abs(Ae),Y){case"top-right":case"top-left":case"top":Ne=Ae-Zl;break;case"bottom-right":case"bottom-left":case"bottom":Ne=-Ae+Zl}switch(Y){case"top-right":case"bottom-right":case"right":Ce=-se;break;case"top-left":case"bottom-left":case"left":Ce=se}return[Ce,Ne]}(A,I[0],I[1]):function(Y,se){var Ae=0,Ce=0;se<0&&(se=0);var Ne=se/Math.sqrt(2);switch(Y){case"top-right":case"top-left":Ce=Ne-Zl;break;case"bottom-right":case"bottom-left":Ce=-Ne+Zl;break;case"bottom":Ce=-se+Zl;break;case"top":Ce=se-Zl}switch(Y){case"top-right":case"bottom-right":Ae=-Ne;break;case"top-left":case"bottom-left":Ae=Ne;break;case"left":Ae=se;break;case"right":Ae=-se}return[Ae,Ce]}(A,I[0])}function jc(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var yu=255,Al=yu*Ws;function $f(A,I,Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt,Bt,an){var un=function(Xn,Qn,cr,Tr,br,Sr,Or,Zr){for(var Ur=Tr.layout.get("text-rotate").evaluate(Sr,{})*Math.PI/180,Xr=[],qr=0,Br=Qn.positionedLines;qr<Br.length;qr+=1)for(var ui=Br[qr],ti=0,Ii=ui.positionedGlyphs;ti<Ii.length;ti+=1){var Yr=Ii[ti];if(Yr.rect){var Ei=Yr.rect||{},Ui=zf+1,Hi=!0,Gi=1,Di=0,ba=(br||Zr)&&Yr.vertical,Qi=Yr.metrics.advance*Yr.scale/2;if(Zr&&Qn.verticalizable){var Ia=(Yr.scale-1)*Ba,Ka=(Ba-Yr.metrics.width*Yr.scale)/2;Di=ui.lineOffset/2-(Yr.imageName?-Ka:Ia)}if(Yr.imageName){var Na=Or[Yr.imageName];Hi=Na.sdf,Gi=Na.pixelRatio,Ui=Xo/Gi}var xo=br?[Yr.x+Qi,Yr.y]:[0,0],ja=br?[0,0]:[Yr.x+Qi+cr[0],Yr.y+cr[1]-Di],Ma=[0,0];ba&&(Ma=ja,ja=[0,0]);var Ua=(Yr.metrics.left-Ui)*Yr.scale-Qi+ja[0],Da=(-Yr.metrics.top-Ui)*Yr.scale+ja[1],Sa=Ua+Ei.w*Yr.scale/Gi,ni=Da+Ei.h*Yr.scale/Gi,pi=new t(Ua,Da),aa=new t(Sa,Da),Pi=new t(Ua,ni),ta=new t(Sa,ni);if(ba){var Ji=new t(-Qi,Qi-mu),mi=-Math.PI/2,oa=Ba/2-Qi,bo=Yr.imageName?oa:0,Ko=new t(5-mu-oa,-bo),oo=new(Function.prototype.bind.apply(t,[null].concat(Ma)));pi._rotateAround(mi,Ji)._add(Ko)._add(oo),aa._rotateAround(mi,Ji)._add(Ko)._add(oo),Pi._rotateAround(mi,Ji)._add(Ko)._add(oo),ta._rotateAround(mi,Ji)._add(Ko)._add(oo)}if(Ur){var Ys=Math.sin(Ur),ml=Math.cos(Ur),za=[ml,-Ys,Ys,ml];pi._matMult(za),aa._matMult(za),Pi._matMult(za),ta._matMult(za)}var Xs=new t(0,0),Cs=new t(0,0);Xr.push({tl:pi,tr:aa,bl:Pi,br:ta,tex:Ei,writingMode:Qn.writingMode,glyphOffset:xo,sectionIndex:Yr.sectionIndex,isSDF:Hi,pixelOffsetTL:Xs,pixelOffsetBR:Cs,minFontScaleX:0,minFontScaleY:0})}}return Xr}(0,Y,Ke,Ae,Ce,Ne,se,A.allowVerticalPlacement),kn=A.textSizeData,wn=null;kn.kind==="source"?(wn=[Ws*Ae.layout.get("text-size").evaluate(Ne,{})])[0]>Al&&E(A.layerIds[0]+': Value for "text-size" is >= '+yu+'. Reduce your "text-size".'):kn.kind==="composite"&&((wn=[Ws*Bt.compositeTextSizes[0].evaluate(Ne,{},an),Ws*Bt.compositeTextSizes[1].evaluate(Ne,{},an)])[0]>Al||wn[1]>Al)&&E(A.layerIds[0]+': Value for "text-size" is >= '+yu+'. Reduce your "text-size".'),A.addSymbols(A.text,un,wn,Ke,Ce,Ne,bt,I,st.lineStartIndex,st.lineLength,qt,an);for(var Bn=0,Un=Tt;Bn<Un.length;Bn+=1)Rt[Un[Bn]]=A.text.placedSymbolArray.length-1;return 4*un.length}function eh(A){for(var I in A)return A[I];return null}function id(A,I,Y,se){var Ae=A.compareText;if(I in Ae){for(var Ce=Ae[I],Ne=Ce.length-1;Ne>=0;Ne--)if(se.dist(Ce[Ne])<Y)return!0}else Ae[I]=[];return Ae[I].push(se),!1}var ad=Ul.VectorTileFeature.types,od=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ec(A,I,Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt){var Bt=Ke?Math.min(Al,Math.round(Ke[0])):0,an=Ke?Math.min(Al,Math.round(Ke[1])):0;A.emplaceBack(I,Y,Math.round(32*se),Math.round(32*Ae),Ce,Ne,(Bt<<1)+(st?1:0),an,16*bt,16*Tt,256*Rt,256*qt)}function Uc(A,I,Y){A.emplaceBack(I.x,I.y,Y),A.emplaceBack(I.x,I.y,Y),A.emplaceBack(I.x,I.y,Y),A.emplaceBack(I.x,I.y,Y)}function sd(A){for(var I=0,Y=A.sections;I<Y.length;I+=1)if(ka(Y[I].text))return!0;return!1}var Kl=function(A){this.layoutVertexArray=new G,this.indexArray=new ye,this.programConfigurations=A,this.segments=new Wn,this.dynamicLayoutVertexArray=new H,this.opacityVertexArray=new L,this.placedSymbolArray=new Ot};Kl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Kl.prototype.upload=function(A,I,Y,se){this.isEmpty()||(Y&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Ip.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,I),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,Dp.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,od,!0),this.opacityVertexBuffer.itemSize=1),(Y||se)&&this.programConfigurations.upload(A))},Kl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Dr("SymbolBuffers",Kl);var xu=function(A,I,Y){this.layoutVertexArray=new A,this.layoutAttributes=I,this.indexArray=new Y,this.segments=new Wn,this.collisionVertexArray=new ce};xu.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,zp.members,!0)},xu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Dr("CollisionBuffers",xu);var Si=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Ne){return Ne.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Tc([]),this.placementViewportMatrix=Tc([]);var I=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Bc(this.zoom,I["text-size"]),this.iconSizeData=Bc(this.zoom,I["icon-size"]);var Y=this.layers[0].layout,se=Y.get("symbol-sort-key"),Ae=Y.get("symbol-z-order");this.canOverlap=Y.get("text-allow-overlap")||Y.get("icon-allow-overlap")||Y.get("text-ignore-placement")||Y.get("icon-ignore-placement"),this.sortFeaturesByKey=Ae!=="viewport-y"&&se.constantOr(1)!==void 0;var Ce=Ae==="viewport-y"||Ae==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ce&&this.canOverlap,Y.get("symbol-placement")==="point"&&(this.writingModes=Y.get("text-writing-mode").map(function(Ne){return ls[Ne]})),this.stateDependentLayerIds=this.layers.filter(function(Ne){return Ne.isStateDependent()}).map(function(Ne){return Ne.id}),this.sourceID=A.sourceID};Si.prototype.createArrays=function(){this.text=new Kl(new ea(this.layers,this.zoom,function(A){return/^text/.test(A)})),this.icon=new Kl(new ea(this.layers,this.zoom,function(A){return/^icon/.test(A)})),this.glyphOffsetArray=new Nt,this.lineVertexArray=new gn,this.symbolInstances=new Ht},Si.prototype.calculateGlyphDependencies=function(A,I,Y,se,Ae){for(var Ce=0;Ce<A.length;Ce++)if(I[A.charCodeAt(Ce)]=!0,(Y||se)&&Ae){var Ne=du[A.charAt(Ce)];Ne&&(I[Ne.charCodeAt(0)]=!0)}},Si.prototype.populate=function(A,I,Y){var se=this.layers[0],Ae=se.layout,Ce=Ae.get("text-font"),Ne=Ae.get("text-field"),Ke=Ae.get("icon-image"),st=(Ne.value.kind!=="constant"||Ne.value.value instanceof Fn&&!Ne.value.value.isEmpty()||Ne.value.value.toString().length>0)&&(Ce.value.kind!=="constant"||Ce.value.value.length>0),bt=Ke.value.kind!=="constant"||!!Ke.value.value||Object.keys(Ke.parameters).length>0,Tt=Ae.get("symbol-sort-key");if(this.features=[],st||bt){for(var Rt=I.iconDependencies,qt=I.glyphDependencies,Bt=I.availableImages,an=new ii(this.zoom),un=0,kn=A;un<kn.length;un+=1){var wn=kn[un],Bn=wn.feature,Un=wn.id,Xn=wn.index,Qn=wn.sourceLayerIndex,cr=se._featureFilter.needGeometry,Tr=Ni(Bn,cr);if(se._featureFilter.filter(an,Tr,Y)){cr||(Tr.geometry=Yo(Bn));var br=void 0;if(st){var Sr=se.getValueAndResolveTokens("text-field",Tr,Y,Bt),Or=Fn.factory(Sr);sd(Or)&&(this.hasRTLText=!0),(!this.hasRTLText||ks()==="unavailable"||this.hasRTLText&&Pa.isParsed())&&(br=Fp(Or,se,Tr))}var Zr=void 0;if(bt){var Ur=se.getValueAndResolveTokens("icon-image",Tr,Y,Bt);Zr=Ur instanceof tr?Ur:tr.fromString(Ur)}if(br||Zr){var Xr=this.sortFeaturesByKey?Tt.evaluate(Tr,{},Y):void 0,qr={id:Un,text:br,icon:Zr,index:Xn,sourceLayerIndex:Qn,geometry:Tr.geometry,properties:Bn.properties,type:ad[Bn.type],sortKey:Xr};if(this.features.push(qr),Zr&&(Rt[Zr.name]=!0),br){var Br=Ce.evaluate(Tr,{},Y).join(","),ui=Ae.get("text-rotation-alignment")==="map"&&Ae.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ls.vertical)>=0;for(var ti=0,Ii=br.sections;ti<Ii.length;ti+=1){var Yr=Ii[ti];if(Yr.image)Rt[Yr.image.name]=!0;else{var Ei=Us(br.toString()),Ui=Yr.fontStack||Br,Hi=qt[Ui]=qt[Ui]||{};this.calculateGlyphDependencies(Yr.text,Hi,ui,this.allowVerticalPlacement,Ei)}}}}}}Ae.get("symbol-placement")==="line"&&(this.features=function(Gi){var Di={},ba={},Qi=[],Ia=0;function Ka(ta){Qi.push(Gi[ta]),Ia++}function Na(ta,Ji,mi){var oa=ba[ta];return delete ba[ta],ba[Ji]=oa,Qi[oa].geometry[0].pop(),Qi[oa].geometry[0]=Qi[oa].geometry[0].concat(mi[0]),oa}function xo(ta,Ji,mi){var oa=Di[Ji];return delete Di[Ji],Di[ta]=oa,Qi[oa].geometry[0].shift(),Qi[oa].geometry[0]=mi[0].concat(Qi[oa].geometry[0]),oa}function ja(ta,Ji,mi){var oa=mi?Ji[0][Ji[0].length-1]:Ji[0][0];return ta+":"+oa.x+":"+oa.y}for(var Ma=0;Ma<Gi.length;Ma++){var Ua=Gi[Ma],Da=Ua.geometry,Sa=Ua.text?Ua.text.toString():null;if(Sa){var ni=ja(Sa,Da),pi=ja(Sa,Da,!0);if(ni in ba&&pi in Di&&ba[ni]!==Di[pi]){var aa=xo(ni,pi,Da),Pi=Na(ni,pi,Qi[aa].geometry);delete Di[ni],delete ba[pi],ba[ja(Sa,Qi[Pi].geometry,!0)]=Pi,Qi[aa].geometry=null}else ni in ba?Na(ni,pi,Da):pi in Di?xo(ni,pi,Da):(Ka(Ma),Di[ni]=Ia-1,ba[pi]=Ia-1)}else Ka(Ma)}return Qi.filter(function(ta){return ta.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Gi,Di){return Gi.sortKey-Di.sortKey})}},Si.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,I,this.layers,Y),this.icon.programConfigurations.updatePaintArrays(A,I,this.layers,Y))},Si.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Si.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Si.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Si.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Si.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Si.prototype.addToLineVertexArray=function(A,I){var Y=this.lineVertexArray.length;if(A.segment!==void 0){for(var se=A.dist(I[A.segment+1]),Ae=A.dist(I[A.segment]),Ce={},Ne=A.segment+1;Ne<I.length;Ne++)Ce[Ne]={x:I[Ne].x,y:I[Ne].y,tileUnitDistanceFromAnchor:se},Ne<I.length-1&&(se+=I[Ne+1].dist(I[Ne]));for(var Ke=A.segment||0;Ke>=0;Ke--)Ce[Ke]={x:I[Ke].x,y:I[Ke].y,tileUnitDistanceFromAnchor:Ae},Ke>0&&(Ae+=I[Ke-1].dist(I[Ke]));for(var st=0;st<I.length;st++){var bt=Ce[st];this.lineVertexArray.emplaceBack(bt.x,bt.y,bt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Y,lineLength:this.lineVertexArray.length-Y}},Si.prototype.addSymbols=function(A,I,Y,se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt){for(var qt=A.indexArray,Bt=A.layoutVertexArray,an=A.segments.prepareSegment(4*I.length,Bt,qt,this.canOverlap?Ce.sortKey:void 0),un=this.glyphOffsetArray.length,kn=an.vertexLength,wn=this.allowVerticalPlacement&&Ne===ls.vertical?Math.PI/2:0,Bn=Ce.text&&Ce.text.sections,Un=0;Un<I.length;Un++){var Xn=I[Un],Qn=Xn.tl,cr=Xn.tr,Tr=Xn.bl,br=Xn.br,Sr=Xn.tex,Or=Xn.pixelOffsetTL,Zr=Xn.pixelOffsetBR,Ur=Xn.minFontScaleX,Xr=Xn.minFontScaleY,qr=Xn.glyphOffset,Br=Xn.isSDF,ui=Xn.sectionIndex,ti=an.vertexLength,Ii=qr[1];ec(Bt,Ke.x,Ke.y,Qn.x,Ii+Qn.y,Sr.x,Sr.y,Y,Br,Or.x,Or.y,Ur,Xr),ec(Bt,Ke.x,Ke.y,cr.x,Ii+cr.y,Sr.x+Sr.w,Sr.y,Y,Br,Zr.x,Or.y,Ur,Xr),ec(Bt,Ke.x,Ke.y,Tr.x,Ii+Tr.y,Sr.x,Sr.y+Sr.h,Y,Br,Or.x,Zr.y,Ur,Xr),ec(Bt,Ke.x,Ke.y,br.x,Ii+br.y,Sr.x+Sr.w,Sr.y+Sr.h,Y,Br,Zr.x,Zr.y,Ur,Xr),Uc(A.dynamicLayoutVertexArray,Ke,wn),qt.emplaceBack(ti,ti+1,ti+2),qt.emplaceBack(ti+1,ti+2,ti+3),an.vertexLength+=4,an.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(qr[0]),Un!==I.length-1&&ui===I[Un+1].sectionIndex||A.programConfigurations.populatePaintArrays(Bt.length,Ce,Ce.index,{},Rt,Bn&&Bn[ui])}A.placedSymbolArray.emplaceBack(Ke.x,Ke.y,un,this.glyphOffsetArray.length-un,kn,st,bt,Ke.segment,Y?Y[0]:0,Y?Y[1]:0,se[0],se[1],Ne,0,!1,0,Tt)},Si.prototype._addCollisionDebugVertex=function(A,I,Y,se,Ae,Ce){return I.emplaceBack(0,0),A.emplaceBack(Y.x,Y.y,se,Ae,Math.round(Ce.x),Math.round(Ce.y))},Si.prototype.addCollisionDebugVertices=function(A,I,Y,se,Ae,Ce,Ne){var Ke=Ae.segments.prepareSegment(4,Ae.layoutVertexArray,Ae.indexArray),st=Ke.vertexLength,bt=Ae.layoutVertexArray,Tt=Ae.collisionVertexArray,Rt=Ne.anchorX,qt=Ne.anchorY;this._addCollisionDebugVertex(bt,Tt,Ce,Rt,qt,new t(A,I)),this._addCollisionDebugVertex(bt,Tt,Ce,Rt,qt,new t(Y,I)),this._addCollisionDebugVertex(bt,Tt,Ce,Rt,qt,new t(Y,se)),this._addCollisionDebugVertex(bt,Tt,Ce,Rt,qt,new t(A,se)),Ke.vertexLength+=4;var Bt=Ae.indexArray;Bt.emplaceBack(st,st+1),Bt.emplaceBack(st+1,st+2),Bt.emplaceBack(st+2,st+3),Bt.emplaceBack(st+3,st),Ke.primitiveLength+=4},Si.prototype.addDebugCollisionBoxes=function(A,I,Y,se){for(var Ae=A;Ae<I;Ae++){var Ce=this.collisionBoxArray.get(Ae),Ne=Ce.x1,Ke=Ce.y1,st=Ce.x2,bt=Ce.y2;this.addCollisionDebugVertices(Ne,Ke,st,bt,se?this.textCollisionBox:this.iconCollisionBox,Ce.anchorPoint,Y)}},Si.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new xu(Q,Ef.members,lt),this.iconCollisionBox=new xu(Q,Ef.members,lt);for(var A=0;A<this.symbolInstances.length;A++){var I=this.symbolInstances.get(A);this.addDebugCollisionBoxes(I.textBoxStartIndex,I.textBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.verticalTextBoxStartIndex,I.verticalTextBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.iconBoxStartIndex,I.iconBoxEndIndex,I,!1),this.addDebugCollisionBoxes(I.verticalIconBoxStartIndex,I.verticalIconBoxEndIndex,I,!1)}},Si.prototype._deserializeCollisionBoxesForSymbol=function(A,I,Y,se,Ae,Ce,Ne,Ke,st){for(var bt={},Tt=I;Tt<Y;Tt++){var Rt=A.get(Tt);bt.textBox={x1:Rt.x1,y1:Rt.y1,x2:Rt.x2,y2:Rt.y2,anchorPointX:Rt.anchorPointX,anchorPointY:Rt.anchorPointY},bt.textFeatureIndex=Rt.featureIndex;break}for(var qt=se;qt<Ae;qt++){var Bt=A.get(qt);bt.verticalTextBox={x1:Bt.x1,y1:Bt.y1,x2:Bt.x2,y2:Bt.y2,anchorPointX:Bt.anchorPointX,anchorPointY:Bt.anchorPointY},bt.verticalTextFeatureIndex=Bt.featureIndex;break}for(var an=Ce;an<Ne;an++){var un=A.get(an);bt.iconBox={x1:un.x1,y1:un.y1,x2:un.x2,y2:un.y2,anchorPointX:un.anchorPointX,anchorPointY:un.anchorPointY},bt.iconFeatureIndex=un.featureIndex;break}for(var kn=Ke;kn<st;kn++){var wn=A.get(kn);bt.verticalIconBox={x1:wn.x1,y1:wn.y1,x2:wn.x2,y2:wn.y2,anchorPointX:wn.anchorPointX,anchorPointY:wn.anchorPointY},bt.verticalIconFeatureIndex=wn.featureIndex;break}return bt},Si.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var I=0;I<this.symbolInstances.length;I++){var Y=this.symbolInstances.get(I);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,Y.textBoxStartIndex,Y.textBoxEndIndex,Y.verticalTextBoxStartIndex,Y.verticalTextBoxEndIndex,Y.iconBoxStartIndex,Y.iconBoxEndIndex,Y.verticalIconBoxStartIndex,Y.verticalIconBoxEndIndex))}},Si.prototype.hasTextData=function(){return this.text.segments.get().length>0},Si.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Si.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Si.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Si.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Si.prototype.addIndicesForPlacedSymbol=function(A,I){for(var Y=A.placedSymbolArray.get(I),se=Y.vertexStartIndex+4*Y.numGlyphs,Ae=Y.vertexStartIndex;Ae<se;Ae+=4)A.indexArray.emplaceBack(Ae,Ae+1,Ae+2),A.indexArray.emplaceBack(Ae+1,Ae+2,Ae+3)},Si.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var I=Math.sin(A),Y=Math.cos(A),se=[],Ae=[],Ce=[],Ne=0;Ne<this.symbolInstances.length;++Ne){Ce.push(Ne);var Ke=this.symbolInstances.get(Ne);se.push(0|Math.round(I*Ke.anchorX+Y*Ke.anchorY)),Ae.push(Ke.featureIndex)}return Ce.sort(function(st,bt){return se[st]-se[bt]||Ae[bt]-Ae[st]}),Ce},Si.prototype.addToSortKeyRanges=function(A,I){var Y=this.sortKeyRanges[this.sortKeyRanges.length-1];Y&&Y.sortKey===I?Y.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:I,symbolInstanceStart:A,symbolInstanceEnd:A+1})},Si.prototype.sortFeatures=function(A){var I=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Y=0,se=this.symbolInstanceIndexes;Y<se.length;Y+=1){var Ae=se[Y],Ce=this.symbolInstances.get(Ae);this.featureSortOrder.push(Ce.featureIndex),[Ce.rightJustifiedTextSymbolIndex,Ce.centerJustifiedTextSymbolIndex,Ce.leftJustifiedTextSymbolIndex].forEach(function(Ne,Ke,st){Ne>=0&&st.indexOf(Ne)===Ke&&I.addIndicesForPlacedSymbol(I.text,Ne)}),Ce.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ce.verticalPlacedTextSymbolIndex),Ce.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ce.placedIconSymbolIndex),Ce.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ce.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Dr("SymbolBucket",Si,{omit:["layers","collisionBoxArray","features","compareText"]}),Si.MAX_GLYPHS=65535,Si.addDynamicAttributes=Uc;var ld=new Zi({"symbol-placement":new Rr(Ye.layout_symbol["symbol-placement"]),"symbol-spacing":new Rr(Ye.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Rr(Ye.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Hr(Ye.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Rr(Ye.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Rr(Ye.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Rr(Ye.layout_symbol["icon-ignore-placement"]),"icon-optional":new Rr(Ye.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Rr(Ye.layout_symbol["icon-rotation-alignment"]),"icon-size":new Hr(Ye.layout_symbol["icon-size"]),"icon-text-fit":new Rr(Ye.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Rr(Ye.layout_symbol["icon-text-fit-padding"]),"icon-image":new Hr(Ye.layout_symbol["icon-image"]),"icon-rotate":new Hr(Ye.layout_symbol["icon-rotate"]),"icon-padding":new Rr(Ye.layout_symbol["icon-padding"]),"icon-keep-upright":new Rr(Ye.layout_symbol["icon-keep-upright"]),"icon-offset":new Hr(Ye.layout_symbol["icon-offset"]),"icon-anchor":new Hr(Ye.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Rr(Ye.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Rr(Ye.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Rr(Ye.layout_symbol["text-rotation-alignment"]),"text-field":new Hr(Ye.layout_symbol["text-field"]),"text-font":new Hr(Ye.layout_symbol["text-font"]),"text-size":new Hr(Ye.layout_symbol["text-size"]),"text-max-width":new Hr(Ye.layout_symbol["text-max-width"]),"text-line-height":new Rr(Ye.layout_symbol["text-line-height"]),"text-letter-spacing":new Hr(Ye.layout_symbol["text-letter-spacing"]),"text-justify":new Hr(Ye.layout_symbol["text-justify"]),"text-radial-offset":new Hr(Ye.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Rr(Ye.layout_symbol["text-variable-anchor"]),"text-anchor":new Hr(Ye.layout_symbol["text-anchor"]),"text-max-angle":new Rr(Ye.layout_symbol["text-max-angle"]),"text-writing-mode":new Rr(Ye.layout_symbol["text-writing-mode"]),"text-rotate":new Hr(Ye.layout_symbol["text-rotate"]),"text-padding":new Rr(Ye.layout_symbol["text-padding"]),"text-keep-upright":new Rr(Ye.layout_symbol["text-keep-upright"]),"text-transform":new Hr(Ye.layout_symbol["text-transform"]),"text-offset":new Hr(Ye.layout_symbol["text-offset"]),"text-allow-overlap":new Rr(Ye.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Rr(Ye.layout_symbol["text-ignore-placement"]),"text-optional":new Rr(Ye.layout_symbol["text-optional"])}),Vc={paint:new Zi({"icon-opacity":new Hr(Ye.paint_symbol["icon-opacity"]),"icon-color":new Hr(Ye.paint_symbol["icon-color"]),"icon-halo-color":new Hr(Ye.paint_symbol["icon-halo-color"]),"icon-halo-width":new Hr(Ye.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Hr(Ye.paint_symbol["icon-halo-blur"]),"icon-translate":new Rr(Ye.paint_symbol["icon-translate"]),"icon-translate-anchor":new Rr(Ye.paint_symbol["icon-translate-anchor"]),"text-opacity":new Hr(Ye.paint_symbol["text-opacity"]),"text-color":new Hr(Ye.paint_symbol["text-color"],{runtimeType:rn,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new Hr(Ye.paint_symbol["text-halo-color"]),"text-halo-width":new Hr(Ye.paint_symbol["text-halo-width"]),"text-halo-blur":new Hr(Ye.paint_symbol["text-halo-blur"]),"text-translate":new Rr(Ye.paint_symbol["text-translate"]),"text-translate-anchor":new Rr(Ye.paint_symbol["text-translate-anchor"])}),layout:ld},Jl=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:Et,this.defaultValue=A};Jl.prototype.evaluate=function(A){if(A.formattedSection){var I=this.defaultValue.property.overrides;if(I&&I.hasOverride(A.formattedSection))return I.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default},Jl.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)},Jl.prototype.outputDefined=function(){return!1},Jl.prototype.serialize=function(){return null},Dr("FormatSectionOverride",Jl,{omit:["defaultValue"]});var ud=function(A){function I(Y){A.call(this,Y,Vc)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.recalculate=function(Y,se){if(A.prototype.recalculate.call(this,Y,se),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Ae=this.layout.get("text-writing-mode");if(Ae){for(var Ce=[],Ne=0,Ke=Ae;Ne<Ke.length;Ne+=1){var st=Ke[Ne];Ce.indexOf(st)<0&&Ce.push(st)}this.layout._values["text-writing-mode"]=Ce}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},I.prototype.getValueAndResolveTokens=function(Y,se,Ae,Ce){var Ne=this.layout.get(Y).evaluate(se,{},Ae,Ce),Ke=this._unevaluatedLayout._values[Y];return Ke.isDataDriven()||es(Ke.value)||!Ne?Ne:function(st,bt){return bt.replace(/{([^{}]+)}/g,function(Tt,Rt){return Rt in st?String(st[Rt]):""})}(se.properties,Ne)},I.prototype.createBucket=function(Y){return new Si(Y)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype._setPaintOverrides=function(){for(var Y=0,se=Vc.paint.overridableProperties;Y<se.length;Y+=1){var Ae=se[Y];if(I.hasPaintOverride(this.layout,Ae)){var Ce,Ne=this.paint.get(Ae),Ke=new Jl(Ne),st=new Mo(Ke,Ne.property.specification);Ce=Ne.value.kind==="constant"||Ne.value.kind==="source"?new $a("source",st):new ps("composite",st,Ne.value.zoomStops,Ne.value._interpolationType),this.paint._values[Ae]=new Ai(Ne.property,Ce,Ne.parameters)}}},I.prototype._handleOverridablePaintPropertyUpdate=function(Y,se,Ae){return!(!this.layout||se.isDataDriven()||Ae.isDataDriven())&&I.hasPaintOverride(this.layout,Y)},I.hasPaintOverride=function(Y,se){var Ae=Y.get("text-field"),Ce=Vc.paint.properties[se],Ne=!1,Ke=function(Tt){for(var Rt=0,qt=Tt;Rt<qt.length;Rt+=1){var Bt=qt[Rt];if(Ce.overrides&&Ce.overrides.hasOverride(Bt))return void(Ne=!0)}};if(Ae.value.kind==="constant"&&Ae.value.value instanceof Fn)Ke(Ae.value.value.sections);else if(Ae.value.kind==="source"){var st=function(Tt){if(!Ne)if(Tt instanceof jt&&er(Tt.value)===Ln){var Rt=Tt.value;Ke(Rt.sections)}else Tt instanceof Sn?Ke(Tt.sections):Tt.eachChild(st)},bt=Ae.value;bt._styleExpression&&st(bt._styleExpression.expression)}return Ne},I}(vi),cd={paint:new Zi({"background-color":new Rr(Ye.paint_background["background-color"]),"background-pattern":new Oo(Ye.paint_background["background-pattern"]),"background-opacity":new Rr(Ye.paint_background["background-opacity"])})},fd=function(A){function I(Y){A.call(this,Y,cd)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(vi),hd={paint:new Zi({"raster-opacity":new Rr(Ye.paint_raster["raster-opacity"]),"raster-hue-rotate":new Rr(Ye.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Rr(Ye.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Rr(Ye.paint_raster["raster-brightness-max"]),"raster-saturation":new Rr(Ye.paint_raster["raster-saturation"]),"raster-contrast":new Rr(Ye.paint_raster["raster-contrast"]),"raster-resampling":new Rr(Ye.paint_raster["raster-resampling"]),"raster-fade-duration":new Rr(Ye.paint_raster["raster-fade-duration"])})},pd=function(A){function I(Y){A.call(this,Y,hd)}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I}(vi),dd=function(A){function I(Y){A.call(this,Y,{}),this.implementation=Y}return A&&(I.__proto__=A),I.prototype=Object.create(A&&A.prototype),I.prototype.constructor=I,I.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},I.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},I.prototype.recalculate=function(){},I.prototype.updateTransitions=function(){},I.prototype.hasTransition=function(){},I.prototype.serialize=function(){},I.prototype.onAdd=function(Y){this.implementation.onAdd&&this.implementation.onAdd(Y,Y.painter.context.gl)},I.prototype.onRemove=function(Y){this.implementation.onRemove&&this.implementation.onRemove(Y,Y.painter.context.gl)},I}(vi),gd={circle:Zh,heatmap:Jh,hillshade:$h,fill:vp,"fill-extrusion":Ap,line:Op,symbol:ud,background:fd,raster:pd},th=n.HTMLImageElement,nh=n.HTMLCanvasElement,rh=n.HTMLVideoElement,ih=n.ImageData,tc=n.ImageBitmap,Cl=function(A,I,Y,se){this.context=A,this.format=Y,this.texture=A.gl.createTexture(),this.update(I,se)};Cl.prototype.update=function(A,I,Y){var se=A.width,Ae=A.height,Ce=!(this.size&&this.size[0]===se&&this.size[1]===Ae||Y),Ne=this.context,Ke=Ne.gl;if(this.useMipmap=Boolean(I&&I.useMipmap),Ke.bindTexture(Ke.TEXTURE_2D,this.texture),Ne.pixelStoreUnpackFlipY.set(!1),Ne.pixelStoreUnpack.set(1),Ne.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ke.RGBA&&(!I||I.premultiply!==!1)),Ce)this.size=[se,Ae],A instanceof th||A instanceof nh||A instanceof rh||A instanceof ih||tc&&A instanceof tc?Ke.texImage2D(Ke.TEXTURE_2D,0,this.format,this.format,Ke.UNSIGNED_BYTE,A):Ke.texImage2D(Ke.TEXTURE_2D,0,this.format,se,Ae,0,this.format,Ke.UNSIGNED_BYTE,A.data);else{var st=Y||{x:0,y:0},bt=st.x,Tt=st.y;A instanceof th||A instanceof nh||A instanceof rh||A instanceof ih||tc&&A instanceof tc?Ke.texSubImage2D(Ke.TEXTURE_2D,0,bt,Tt,Ke.RGBA,Ke.UNSIGNED_BYTE,A):Ke.texSubImage2D(Ke.TEXTURE_2D,0,bt,Tt,se,Ae,Ke.RGBA,Ke.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ke.generateMipmap(Ke.TEXTURE_2D)},Cl.prototype.bind=function(A,I,Y){var se=this.context.gl;se.bindTexture(se.TEXTURE_2D,this.texture),Y!==se.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Y=se.LINEAR),A!==this.filter&&(se.texParameteri(se.TEXTURE_2D,se.TEXTURE_MAG_FILTER,A),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_MIN_FILTER,Y||A),this.filter=A),I!==this.wrap&&(se.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_S,I),se.texParameteri(se.TEXTURE_2D,se.TEXTURE_WRAP_T,I),this.wrap=I)},Cl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Cl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var qc=function(A){var I=this;this._callback=A,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){I._triggered=!1,I._callback()})};qc.prototype.trigger=function(){var A=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1,A._callback()},0))},qc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Ql=function(A,I,Y){this.target=A,this.parent=I,this.mapId=Y,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},m(["receive","process"],this),this.invoker=new qc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=O()?A:n};function ah(A,I,Y){var se=2*Math.PI*6378137/256/Math.pow(2,Y);return[A*se-2*Math.PI*6378137/2,I*se-2*Math.PI*6378137/2]}Ql.prototype.send=function(A,I,Y,se,Ae){var Ce=this;Ae===void 0&&(Ae=!1);var Ne=Math.round(1e18*Math.random()).toString(36).substring(0,10);Y&&(this.callbacks[Ne]=Y);var Ke=D(this.globalScope)?void 0:[];return this.target.postMessage({id:Ne,type:A,hasCallback:!!Y,targetMapId:se,mustQueue:Ae,sourceMapId:this.mapId,data:rs(I,Ke)},Ke),{cancel:function(){Y&&delete Ce.callbacks[Ne],Ce.target.postMessage({id:Ne,type:"<cancel>",targetMapId:se,sourceMapId:Ce.mapId})}}},Ql.prototype.receive=function(A){var I=A.data,Y=I.id;if(Y&&(!I.targetMapId||this.mapId===I.targetMapId))if(I.type==="<cancel>"){delete this.tasks[Y];var se=this.cancelCallbacks[Y];delete this.cancelCallbacks[Y],se&&se()}else O()||I.mustQueue?(this.tasks[Y]=I,this.taskQueue.push(Y),this.invoker.trigger()):this.processTask(Y,I)},Ql.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),I=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),I&&this.processTask(A,I)}},Ql.prototype.processTask=function(A,I){var Y=this;if(I.type==="<response>"){var se=this.callbacks[A];delete this.callbacks[A],se&&(I.error?se(vs(I.error)):se(null,vs(I.data)))}else{var Ae=!1,Ce=D(this.globalScope)?void 0:[],Ne=I.hasCallback?function(Tt,Rt){Ae=!0,delete Y.cancelCallbacks[A],Y.target.postMessage({id:A,type:"<response>",sourceMapId:Y.mapId,error:Tt?rs(Tt):null,data:rs(Rt,Ce)},Ce)}:function(Tt){Ae=!0},Ke=null,st=vs(I.data);if(this.parent[I.type])Ke=this.parent[I.type](I.sourceMapId,st,Ne);else if(this.parent.getWorkerSource){var bt=I.type.split(".");Ke=this.parent.getWorkerSource(I.sourceMapId,bt[0],st.source)[bt[1]](st,Ne)}else Ne(new Error("Could not find function "+I.type));!Ae&&Ke&&Ke.cancel&&(this.cancelCallbacks[A]=Ke.cancel)}},Ql.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ya=function(A,I){A&&(I?this.setSouthWest(A).setNorthEast(I):A.length===4?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};ya.prototype.setNorthEast=function(A){return this._ne=A instanceof Ki?new Ki(A.lng,A.lat):Ki.convert(A),this},ya.prototype.setSouthWest=function(A){return this._sw=A instanceof Ki?new Ki(A.lng,A.lat):Ki.convert(A),this},ya.prototype.extend=function(A){var I,Y,se=this._sw,Ae=this._ne;if(A instanceof Ki)I=A,Y=A;else{if(!(A instanceof ya)){if(Array.isArray(A)){if(A.length===4||A.every(Array.isArray)){var Ce=A;return this.extend(ya.convert(Ce))}var Ne=A;return this.extend(Ki.convert(Ne))}return this}if(I=A._sw,Y=A._ne,!I||!Y)return this}return se||Ae?(se.lng=Math.min(I.lng,se.lng),se.lat=Math.min(I.lat,se.lat),Ae.lng=Math.max(Y.lng,Ae.lng),Ae.lat=Math.max(Y.lat,Ae.lat)):(this._sw=new Ki(I.lng,I.lat),this._ne=new Ki(Y.lng,Y.lat)),this},ya.prototype.getCenter=function(){return new Ki((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ya.prototype.getSouthWest=function(){return this._sw},ya.prototype.getNorthEast=function(){return this._ne},ya.prototype.getNorthWest=function(){return new Ki(this.getWest(),this.getNorth())},ya.prototype.getSouthEast=function(){return new Ki(this.getEast(),this.getSouth())},ya.prototype.getWest=function(){return this._sw.lng},ya.prototype.getSouth=function(){return this._sw.lat},ya.prototype.getEast=function(){return this._ne.lng},ya.prototype.getNorth=function(){return this._ne.lat},ya.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ya.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ya.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ya.prototype.contains=function(A){var I=Ki.convert(A),Y=I.lng,se=I.lat,Ae=this._sw.lat<=se&&se<=this._ne.lat,Ce=this._sw.lng<=Y&&Y<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ce=this._sw.lng>=Y&&Y>=this._ne.lng),Ae&&Ce},ya.convert=function(A){return!A||A instanceof ya?A:new ya(A)};var oh=63710088e-1,Ki=function(A,I){if(isNaN(A)||isNaN(I))throw new Error("Invalid LngLat object: ("+A+", "+I+")");if(this.lng=+A,this.lat=+I,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ki.prototype.wrap=function(){return new Ki(d(this.lng,-180,180),this.lat)},Ki.prototype.toArray=function(){return[this.lng,this.lat]},Ki.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ki.prototype.distanceTo=function(A){var I=Math.PI/180,Y=this.lat*I,se=A.lat*I,Ae=Math.sin(Y)*Math.sin(se)+Math.cos(Y)*Math.cos(se)*Math.cos((A.lng-this.lng)*I);return oh*Math.acos(Math.min(Ae,1))},Ki.prototype.toBounds=function(A){A===void 0&&(A=0);var I=360*A/40075017,Y=I/Math.cos(Math.PI/180*this.lat);return new ya(new Ki(this.lng-Y,this.lat-I),new Ki(this.lng+Y,this.lat+I))},Ki.convert=function(A){if(A instanceof Ki)return A;if(Array.isArray(A)&&(A.length===2||A.length===3))return new Ki(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&typeof A=="object"&&A!==null)return new Ki(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var sh=2*Math.PI*oh;function lh(A){return sh*Math.cos(A*Math.PI/180)}function uh(A){return(180+A)/360}function ch(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function fh(A,I){return A/lh(I)}function Hc(A){var I=180-360*A;return 360/Math.PI*Math.atan(Math.exp(I*Math.PI/180))-90}var Pl=function(A,I,Y){Y===void 0&&(Y=0),this.x=+A,this.y=+I,this.z=+Y};Pl.fromLngLat=function(A,I){I===void 0&&(I=0);var Y=Ki.convert(A);return new Pl(uh(Y.lng),ch(Y.lat),fh(I,Y.lat))},Pl.prototype.toLngLat=function(){return new Ki(360*this.x-180,Hc(this.y))},Pl.prototype.toAltitude=function(){return A=this.z,I=this.y,A*lh(Hc(I));var A,I},Pl.prototype.meterInMercatorCoordinateUnits=function(){return 1/sh*(A=Hc(this.y),1/Math.cos(A*Math.PI/180));var A};var Ol=function(A,I,Y){this.z=A,this.x=I,this.y=Y,this.key=bu(0,A,A,I,Y)};Ol.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y},Ol.prototype.url=function(A,I){var Y,se,Ae,Ce,Ne,Ke=(Y=this.x,se=this.y,Ae=this.z,Ce=ah(256*Y,256*(se=Math.pow(2,Ae)-se-1),Ae),Ne=ah(256*(Y+1),256*(se+1),Ae),Ce[0]+","+Ce[1]+","+Ne[0]+","+Ne[1]),st=function(bt,Tt,Rt){for(var qt,Bt="",an=bt;an>0;an--)Bt+=(Tt&(qt=1<<an-1)?1:0)+(Rt&qt?2:0);return Bt}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(I==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",st).replace("{bbox-epsg-3857}",Ke)},Ol.prototype.getTilePoint=function(A){var I=Math.pow(2,this.z);return new t((A.x*I-this.x)*fi,(A.y*I-this.y)*fi)},Ol.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var hh=function(A,I){this.wrap=A,this.canonical=I,this.key=bu(A,I.z,I.z,I.x,I.y)},xa=function(A,I,Y,se,Ae){this.overscaledZ=A,this.wrap=I,this.canonical=new Ol(Y,+se,+Ae),this.key=bu(I,A,Y,se,Ae)};function bu(A,I,Y,se,Ae){(A*=2)<0&&(A=-1*A-1);var Ce=1<<Y;return(Ce*Ce*A+Ce*Ae+se).toString(36)+Y.toString(36)+I.toString(36)}xa.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)},xa.prototype.scaledTo=function(A){var I=this.canonical.z-A;return A>this.canonical.z?new xa(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xa(A,this.wrap,A,this.canonical.x>>I,this.canonical.y>>I)},xa.prototype.calculateScaledKey=function(A,I){var Y=this.canonical.z-A;return A>this.canonical.z?bu(this.wrap*+I,A,this.canonical.z,this.canonical.x,this.canonical.y):bu(this.wrap*+I,A,A,this.canonical.x>>Y,this.canonical.y>>Y)},xa.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var I=this.canonical.z-A.canonical.z;return A.overscaledZ===0||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>I&&A.canonical.y===this.canonical.y>>I},xa.prototype.children=function(A){if(this.overscaledZ>=A)return[new xa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var I=this.canonical.z+1,Y=2*this.canonical.x,se=2*this.canonical.y;return[new xa(I,this.wrap,I,Y,se),new xa(I,this.wrap,I,Y+1,se),new xa(I,this.wrap,I,Y,se+1),new xa(I,this.wrap,I,Y+1,se+1)]},xa.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))},xa.prototype.wrapped=function(){return new xa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},xa.prototype.unwrapTo=function(A){return new xa(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)},xa.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},xa.prototype.toUnwrapped=function(){return new hh(this.wrap,this.canonical)},xa.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},xa.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new Pl(A.x-this.wrap,A.y))},Dr("CanonicalTileID",Ol),Dr("OverscaledTileID",xa,{omit:["posMatrix"]});var dl=function(A,I,Y){if(this.uid=A,I.height!==I.width)throw new RangeError("DEM tiles must be square");if(Y&&Y!=="mapbox"&&Y!=="terrarium")return E('"'+Y+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=I.height;var se=this.dim=I.height-2;this.data=new Uint32Array(I.data.buffer),this.encoding=Y||"mapbox";for(var Ae=0;Ae<se;Ae++)this.data[this._idx(-1,Ae)]=this.data[this._idx(0,Ae)],this.data[this._idx(se,Ae)]=this.data[this._idx(se-1,Ae)],this.data[this._idx(Ae,-1)]=this.data[this._idx(Ae,0)],this.data[this._idx(Ae,se)]=this.data[this._idx(Ae,se-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(se,-1)]=this.data[this._idx(se-1,0)],this.data[this._idx(-1,se)]=this.data[this._idx(0,se-1)],this.data[this._idx(se,se)]=this.data[this._idx(se-1,se-1)]};dl.prototype.get=function(A,I){var Y=new Uint8Array(this.data.buffer),se=4*this._idx(A,I);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Y[se],Y[se+1],Y[se+2])},dl.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},dl.prototype._idx=function(A,I){if(A<-1||A>=this.dim+1||I<-1||I>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(I+1)*this.stride+(A+1)},dl.prototype._unpackMapbox=function(A,I,Y){return(256*A*256+256*I+Y)/10-1e4},dl.prototype._unpackTerrarium=function(A,I,Y){return 256*A+I+Y/256-32768},dl.prototype.getPixels=function(){return new Do({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},dl.prototype.backfillBorder=function(A,I,Y){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");var se=I*this.dim,Ae=I*this.dim+this.dim,Ce=Y*this.dim,Ne=Y*this.dim+this.dim;switch(I){case-1:se=Ae-1;break;case 1:Ae=se+1}switch(Y){case-1:Ce=Ne-1;break;case 1:Ne=Ce+1}for(var Ke=-I*this.dim,st=-Y*this.dim,bt=Ce;bt<Ne;bt++)for(var Tt=se;Tt<Ae;Tt++)this.data[this._idx(Tt,bt)]=A.data[this._idx(Tt+Ke,bt+st)]},Dr("DEMData",dl);var nc=function(A){this._stringToNumber={},this._numberToString=[];for(var I=0;I<A.length;I++){var Y=A[I];this._stringToNumber[Y]=I,this._numberToString[I]=Y}};nc.prototype.encode=function(A){return this._stringToNumber[A]},nc.prototype.decode=function(A){return this._numberToString[A]};var rc=function(A,I,Y,se,Ae){this.type="Feature",this._vectorTileFeature=A,A._z=I,A._x=Y,A._y=se,this.properties=A.properties,this.id=Ae},Gc={geometry:{configurable:!0}};Gc.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Gc.geometry.set=function(A){this._geometry=A},rc.prototype.toJSON=function(){var A={geometry:this.geometry};for(var I in this)I!=="_geometry"&&I!=="_vectorTileFeature"&&(A[I]=this[I]);return A},Object.defineProperties(rc.prototype,Gc);var $l=function(){this.state={},this.stateChanges={},this.deletedStates={}};$l.prototype.updateState=function(A,I,Y){var se=String(I);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][se]=this.stateChanges[A][se]||{},c(this.stateChanges[A][se],Y),this.deletedStates[A]===null)for(var Ae in this.deletedStates[A]={},this.state[A])Ae!==se&&(this.deletedStates[A][Ae]=null);else if(this.deletedStates[A]&&this.deletedStates[A][se]===null)for(var Ce in this.deletedStates[A][se]={},this.state[A][se])Y[Ce]||(this.deletedStates[A][se][Ce]=null);else for(var Ne in Y)this.deletedStates[A]&&this.deletedStates[A][se]&&this.deletedStates[A][se][Ne]===null&&delete this.deletedStates[A][se][Ne]},$l.prototype.removeFeatureState=function(A,I,Y){if(this.deletedStates[A]!==null){var se=String(I);if(this.deletedStates[A]=this.deletedStates[A]||{},Y&&I!==void 0)this.deletedStates[A][se]!==null&&(this.deletedStates[A][se]=this.deletedStates[A][se]||{},this.deletedStates[A][se][Y]=null);else if(I!==void 0)if(this.stateChanges[A]&&this.stateChanges[A][se])for(Y in this.deletedStates[A][se]={},this.stateChanges[A][se])this.deletedStates[A][se][Y]=null;else this.deletedStates[A][se]=null;else this.deletedStates[A]=null}},$l.prototype.getState=function(A,I){var Y=String(I),se=this.state[A]||{},Ae=this.stateChanges[A]||{},Ce=c({},se[Y],Ae[Y]);if(this.deletedStates[A]===null)return{};if(this.deletedStates[A]){var Ne=this.deletedStates[A][I];if(Ne===null)return{};for(var Ke in Ne)delete Ce[Ke]}return Ce},$l.prototype.initializeTileState=function(A,I){A.setFeatureState(this.state,I)},$l.prototype.coalesceChanges=function(A,I){var Y={};for(var se in this.stateChanges){this.state[se]=this.state[se]||{};var Ae={};for(var Ce in this.stateChanges[se])this.state[se][Ce]||(this.state[se][Ce]={}),c(this.state[se][Ce],this.stateChanges[se][Ce]),Ae[Ce]=this.state[se][Ce];Y[se]=Ae}for(var Ne in this.deletedStates){this.state[Ne]=this.state[Ne]||{};var Ke={};if(this.deletedStates[Ne]===null)for(var st in this.state[Ne])Ke[st]={},this.state[Ne][st]={};else for(var bt in this.deletedStates[Ne]){if(this.deletedStates[Ne][bt]===null)this.state[Ne][bt]={};else for(var Tt=0,Rt=Object.keys(this.deletedStates[Ne][bt]);Tt<Rt.length;Tt+=1){var qt=Rt[Tt];delete this.state[Ne][bt][qt]}Ke[bt]=this.state[Ne][bt]}Y[Ne]=Y[Ne]||{},c(Y[Ne],Ke)}if(this.stateChanges={},this.deletedStates={},Object.keys(Y).length!==0)for(var Bt in A)A[Bt].setFeatureState(Y,I)};var vl=function(A,I){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new gs(fi,16,0),this.grid3D=new gs(fi,16,0),this.featureIndexArray=new Cn,this.promoteId=I};function ph(A,I,Y,se,Ae){return _(A,function(Ce,Ne){var Ke=I instanceof ys?I.get(Ne):null;return Ke&&Ke.evaluate?Ke.evaluate(Y,se,Ae):Ke})}function dh(A){for(var I=1/0,Y=1/0,se=-1/0,Ae=-1/0,Ce=0,Ne=A;Ce<Ne.length;Ce+=1){var Ke=Ne[Ce];I=Math.min(I,Ke.x),Y=Math.min(Y,Ke.y),se=Math.max(se,Ke.x),Ae=Math.max(Ae,Ke.y)}return{minX:I,minY:Y,maxX:se,maxY:Ae}}function vd(A,I){return I-A}vl.prototype.insert=function(A,I,Y,se,Ae,Ce){var Ne=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Y,se,Ae);for(var Ke=Ce?this.grid3D:this.grid,st=0;st<I.length;st++){for(var bt=I[st],Tt=[1/0,1/0,-1/0,-1/0],Rt=0;Rt<bt.length;Rt++){var qt=bt[Rt];Tt[0]=Math.min(Tt[0],qt.x),Tt[1]=Math.min(Tt[1],qt.y),Tt[2]=Math.max(Tt[2],qt.x),Tt[3]=Math.max(Tt[3],qt.y)}Tt[0]<fi&&Tt[1]<fi&&Tt[2]>=0&&Tt[3]>=0&&Ke.insert(Ne,Tt[0],Tt[1],Tt[2],Tt[3])}},vl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ul.VectorTile(new Gu(this.rawTileData)).layers,this.sourceLayerCoder=new nc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},vl.prototype.query=function(A,I,Y,se){var Ae=this;this.loadVTLayers();for(var Ce=A.params||{},Ne=fi/A.tileSize/A.scale,Ke=xr(Ce.filter),st=A.queryGeometry,bt=A.queryPadding*Ne,Tt=dh(st),Rt=this.grid.query(Tt.minX-bt,Tt.minY-bt,Tt.maxX+bt,Tt.maxY+bt),qt=dh(A.cameraQueryGeometry),Bt=0,an=this.grid3D.query(qt.minX-bt,qt.minY-bt,qt.maxX+bt,qt.maxY+bt,function(Xn,Qn,cr,Tr){return function(br,Sr,Or,Zr,Ur){for(var Xr=0,qr=br;Xr<qr.length;Xr+=1){var Br=qr[Xr];if(Sr<=Br.x&&Or<=Br.y&&Zr>=Br.x&&Ur>=Br.y)return!0}var ui=[new t(Sr,Or),new t(Sr,Ur),new t(Zr,Ur),new t(Zr,Or)];if(br.length>2){for(var ti=0,Ii=ui;ti<Ii.length;ti+=1)if(Qs(br,Ii[ti]))return!0}for(var Yr=0;Yr<br.length-1;Yr++)if(qh(br[Yr],br[Yr+1],ui))return!0;return!1}(A.cameraQueryGeometry,Xn-bt,Qn-bt,cr+bt,Tr+bt)});Bt<an.length;Bt+=1){var un=an[Bt];Rt.push(un)}Rt.sort(vd);for(var kn,wn={},Bn=function(Xn){var Qn=Rt[Xn];if(Qn!==kn){kn=Qn;var cr=Ae.featureIndexArray.get(Qn),Tr=null;Ae.loadMatchingFeature(wn,cr.bucketIndex,cr.sourceLayerIndex,cr.featureIndex,Ke,Ce.layers,Ce.availableImages,I,Y,se,function(br,Sr,Or){return Tr||(Tr=Yo(br)),Sr.queryIntersectsFeature(st,br,Or,Tr,Ae.z,A.transform,Ne,A.pixelPosMatrix)})}},Un=0;Un<Rt.length;Un++)Bn(Un);return wn},vl.prototype.loadMatchingFeature=function(A,I,Y,se,Ae,Ce,Ne,Ke,st,bt,Tt){var Rt=this.bucketLayerIDs[I];if(!Ce||function(br,Sr){for(var Or=0;Or<br.length;Or++)if(Sr.indexOf(br[Or])>=0)return!0;return!1}(Ce,Rt)){var qt=this.sourceLayerCoder.decode(Y),Bt=this.vtLayers[qt].feature(se);if(Ae.needGeometry){var an=Ni(Bt,!0);if(!Ae.filter(new ii(this.tileID.overscaledZ),an,this.tileID.canonical))return}else if(!Ae.filter(new ii(this.tileID.overscaledZ),Bt))return;for(var un=this.getId(Bt,qt),kn=0;kn<Rt.length;kn++){var wn=Rt[kn];if(!(Ce&&Ce.indexOf(wn)<0)){var Bn=Ke[wn];if(Bn){var Un={};un!==void 0&&bt&&(Un=bt.getState(Bn.sourceLayer||"_geojsonTileLayer",un));var Xn=c({},st[wn]);Xn.paint=ph(Xn.paint,Bn.paint,Bt,Un,Ne),Xn.layout=ph(Xn.layout,Bn.layout,Bt,Un,Ne);var Qn=!Tt||Tt(Bt,Bn,Un);if(Qn){var cr=new rc(Bt,this.z,this.x,this.y,un);cr.layer=Xn;var Tr=A[wn];Tr===void 0&&(Tr=A[wn]=[]),Tr.push({featureIndex:se,feature:cr,intersectionZ:Qn})}}}}}},vl.prototype.lookupSymbolFeatures=function(A,I,Y,se,Ae,Ce,Ne,Ke){var st={};this.loadVTLayers();for(var bt=xr(Ae),Tt=0,Rt=A;Tt<Rt.length;Tt+=1){var qt=Rt[Tt];this.loadMatchingFeature(st,Y,se,qt,bt,Ce,Ne,Ke,I)}return st},vl.prototype.hasLayer=function(A){for(var I=0,Y=this.bucketLayerIDs;I<Y.length;I+=1)for(var se=0,Ae=Y[I];se<Ae.length;se+=1)if(A===Ae[se])return!0;return!1},vl.prototype.getId=function(A,I){var Y=A.id;if(this.promoteId){var se=typeof this.promoteId=="string"?this.promoteId:this.promoteId[I];typeof(Y=A.properties[se])=="boolean"&&(Y=Number(Y))}return Y},Dr("FeatureIndex",vl,{omit:["rawTileData","sourceLayerCoder"]});var Oa=function(A,I){this.tileID=A,this.uid=g(),this.uses=0,this.tileSize=I,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Oa.prototype.registerFadeDuration=function(A){var I=A+this.timeAdded;I<X.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)},Oa.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Oa.prototype.loadVectorData=function(A,I,Y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var se in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(bt,Tt){var Rt={};if(!Tt)return Rt;for(var qt=function(){var un=an[Bt],kn=un.layerIds.map(function(Xn){return Tt.getLayer(Xn)}).filter(Boolean);if(kn.length!==0){un.layers=kn,un.stateDependentLayerIds&&(un.stateDependentLayers=un.stateDependentLayerIds.map(function(Xn){return kn.filter(function(Qn){return Qn.id===Xn})[0]}));for(var wn=0,Bn=kn;wn<Bn.length;wn+=1){var Un=Bn[wn];Rt[Un.id]=un}}},Bt=0,an=bt;Bt<an.length;Bt+=1)qt();return Rt}(A.buckets,I.style),this.hasSymbolBuckets=!1,this.buckets){var Ae=this.buckets[se];if(Ae instanceof Si){if(this.hasSymbolBuckets=!0,!Y)break;Ae.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ce in this.buckets){var Ne=this.buckets[Ce];if(Ne instanceof Si&&Ne.hasRTLText){this.hasRTLText=!0,Pa.isLoading()||Pa.isLoaded()||ks()!=="deferred"||As();break}}for(var Ke in this.queryPadding=0,this.buckets){var st=this.buckets[Ke];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(Ke).queryRadius(st))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new At},Oa.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Oa.prototype.getBucket=function(A){return this.buckets[A.id]},Oa.prototype.upload=function(A){for(var I in this.buckets){var Y=this.buckets[I];Y.uploadPending()&&Y.upload(A)}var se=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Cl(A,this.imageAtlas.image,se.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Cl(A,this.glyphAtlasImage,se.ALPHA),this.glyphAtlasImage=null)},Oa.prototype.prepare=function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)},Oa.prototype.queryRenderedFeatures=function(A,I,Y,se,Ae,Ce,Ne,Ke,st,bt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:se,cameraQueryGeometry:Ae,scale:Ce,tileSize:this.tileSize,pixelPosMatrix:bt,transform:Ke,params:Ne,queryPadding:this.queryPadding*st},A,I,Y):{}},Oa.prototype.querySourceFeatures=function(A,I){var Y=this.latestFeatureIndex;if(Y&&Y.rawTileData){var se=Y.loadVTLayers(),Ae=I?I.sourceLayer:"",Ce=se._geojsonTileLayer||se[Ae];if(Ce)for(var Ne=xr(I&&I.filter),Ke=this.tileID.canonical,st=Ke.z,bt=Ke.x,Tt=Ke.y,Rt={z:st,x:bt,y:Tt},qt=0;qt<Ce.length;qt++){var Bt=Ce.feature(qt);if(Ne.needGeometry){var an=Ni(Bt,!0);if(!Ne.filter(new ii(this.tileID.overscaledZ),an,this.tileID.canonical))continue}else if(!Ne.filter(new ii(this.tileID.overscaledZ),Bt))continue;var un=Y.getId(Bt,Ae),kn=new rc(Bt,st,bt,Tt,un);kn.tile=Rt,A.push(kn)}}},Oa.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Oa.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Oa.prototype.setExpiryData=function(A){var I=this.expirationTime;if(A.cacheControl){var Y=R(A.cacheControl);Y["max-age"]&&(this.expirationTime=Date.now()+1e3*Y["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){var se=Date.now(),Ae=!1;if(this.expirationTime>se)Ae=!1;else if(I)if(this.expirationTime<I)Ae=!0;else{var Ce=this.expirationTime-I;Ce?this.expirationTime=se+Math.max(Ce,3e4):Ae=!0}else Ae=!0;Ae?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Oa.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Oa.prototype.setFeatureState=function(A,I){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(A).length!==0){var Y=this.latestFeatureIndex.loadVTLayers();for(var se in this.buckets)if(I.style.hasLayer(se)){var Ae=this.buckets[se],Ce=Ae.layers[0].sourceLayer||"_geojsonTileLayer",Ne=Y[Ce],Ke=A[Ce];if(Ne&&Ke&&Object.keys(Ke).length!==0){Ae.update(Ke,Ne,this.imageAtlas&&this.imageAtlas.patternPositions||{});var st=I&&I.style&&I.style.getLayer(se);st&&(this.queryPadding=Math.max(this.queryPadding,st.queryRadius(Ae)))}}}},Oa.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Oa.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<X.now()},Oa.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Oa.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=X.now()+A},Oa.prototype.setDependencies=function(A,I){for(var Y={},se=0,Ae=I;se<Ae.length;se+=1)Y[Ae[se]]=!0;this.dependencies[A]=Y},Oa.prototype.hasDependency=function(A,I){for(var Y=0,se=A;Y<se.length;Y+=1){var Ae=se[Y],Ce=this.dependencies[Ae];if(Ce){for(var Ne=0,Ke=I;Ne<Ke.length;Ne+=1)if(Ce[Ke[Ne]])return!0}}return!1};var Ml=n.performance,gh=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},Ml.mark(this._marks.start)};gh.prototype.finish=function(){Ml.mark(this._marks.end);var A=Ml.getEntriesByName(this._marks.measure);return A.length===0&&(Ml.measure(this._marks.measure,this._marks.start,this._marks.end),A=Ml.getEntriesByName(this._marks.measure),Ml.clearMarks(this._marks.start),Ml.clearMarks(this._marks.end),Ml.clearMeasures(this._marks.measure)),A},o.Actor=Ql,o.AlphaImage=Ll,o.CanonicalTileID=Ol,o.CollisionBoxArray=At,o.Color=In,o.DEMData=dl,o.DataConstantProperty=Rr,o.DictionaryCoder=nc,o.EXTENT=fi,o.ErrorEvent=Fe,o.EvaluationParameters=ii,o.Event=Re,o.Evented=rt,o.FeatureIndex=vl,o.FillBucket=Hs,o.FillExtrusionBucket=Gs,o.ImageAtlas=vu,o.ImagePosition=Yu,o.LineBucket=yo,o.LngLat=Ki,o.LngLatBounds=ya,o.MercatorCoordinate=Pl,o.ONE_EM=Ba,o.OverscaledTileID=xa,o.Point=t,o.Point$1=t,o.Properties=Zi,o.Protobuf=Gu,o.RGBAImage=Do,o.RequestManager=me,o.RequestPerformance=gh,o.ResourceType=vt,o.SegmentVector=Wn,o.SourceFeatureState=$l,o.StructArrayLayout1ui2=ft,o.StructArrayLayout2f1f2i16=ne,o.StructArrayLayout2i4=os,o.StructArrayLayout3ui6=ye,o.StructArrayLayout4i8=hl,o.SymbolBucket=Si,o.Texture=Cl,o.Tile=Oa,o.Transitionable=vo,o.Uniform1f=ri,o.Uniform1i=Qr,o.Uniform2f=ai,o.Uniform3f=Mi,o.Uniform4f=Vi,o.UniformColor=Aa,o.UniformMatrix4f=va,o.UnwrappedTileID=hh,o.ValidationError=ct,o.WritingMode=ls,o.ZoomHistory=Ts,o.add=function(A,I,Y){return A[0]=I[0]+Y[0],A[1]=I[1]+Y[1],A[2]=I[2]+Y[2],A},o.addDynamicAttributes=Uc,o.asyncAll=function(A,I,Y){if(!A.length)return Y(null,[]);var se=A.length,Ae=new Array(A.length),Ce=null;A.forEach(function(Ne,Ke){I(Ne,function(st,bt){st&&(Ce=st),Ae[Ke]=bt,--se==0&&Y(Ce,Ae)})})},o.bezier=a,o.bindAll=m,o.browser=X,o.cacheEntryPossiblyAdded=function(A){++dt>ze&&(A.getActor().send("enforceCacheSizeLimit",Oe),dt=0)},o.clamp=u,o.clearTileCache=function(A){var I=n.caches.delete(we);A&&I.catch(A).then(function(){return A()})},o.clipLine=Zf,o.clone=function(A){var I=new ss(16);return I[0]=A[0],I[1]=A[1],I[2]=A[2],I[3]=A[3],I[4]=A[4],I[5]=A[5],I[6]=A[6],I[7]=A[7],I[8]=A[8],I[9]=A[9],I[10]=A[10],I[11]=A[11],I[12]=A[12],I[13]=A[13],I[14]=A[14],I[15]=A[15],I},o.clone$1=S,o.clone$2=function(A){var I=new ss(3);return I[0]=A[0],I[1]=A[1],I[2]=A[2],I},o.collisionCircleLayout=Rp,o.config=Z,o.create=function(){var A=new ss(16);return ss!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},o.create$1=function(){var A=new ss(9);return ss!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},o.create$2=function(){var A=new ss(4);return ss!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},o.createCommonjsModule=T,o.createExpression=So,o.createLayout=Li,o.createStyleLayer=function(A){return A.type==="custom"?new dd(A):new gd[A.type](A)},o.cross=function(A,I,Y){var se=I[0],Ae=I[1],Ce=I[2],Ne=Y[0],Ke=Y[1],st=Y[2];return A[0]=Ae*st-Ce*Ke,A[1]=Ce*Ne-se*st,A[2]=se*Ke-Ae*Ne,A},o.deepEqual=function A(I,Y){if(Array.isArray(I)){if(!Array.isArray(Y)||I.length!==Y.length)return!1;for(var se=0;se<I.length;se++)if(!A(I[se],Y[se]))return!1;return!0}if(typeof I=="object"&&I!==null&&Y!==null){if(typeof Y!="object"||Object.keys(I).length!==Object.keys(Y).length)return!1;for(var Ae in I)if(!A(I[Ae],Y[Ae]))return!1;return!0}return I===Y},o.dot=function(A,I){return A[0]*I[0]+A[1]*I[1]+A[2]*I[2]},o.dot$1=function(A,I){return A[0]*I[0]+A[1]*I[1]+A[2]*I[2]+A[3]*I[3]},o.ease=l,o.emitValidationErrors=Ea,o.endsWith=y,o.enforceCacheSizeLimit=function(A){Ue(),he&&he.then(function(I){I.keys().then(function(Y){for(var se=0;se<Y.length-A;se++)I.delete(Y[se])})})},o.evaluateSizeForFeature=Vf,o.evaluateSizeForZoom=qf,o.evaluateVariableOffset=Qf,o.evented=Ca,o.extend=c,o.featureFilter=xr,o.filterObject=f,o.fromRotation=function(A,I){var Y=Math.sin(I),se=Math.cos(I);return A[0]=se,A[1]=Y,A[2]=0,A[3]=-Y,A[4]=se,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},o.getAnchorAlignment=Fc,o.getAnchorJustification=jc,o.getArrayBuffer=Dt,o.getImage=Ge,o.getJSON=function(A,I){return It(c(A,{type:"json"}),I)},o.getRTLTextPluginStatus=ks,o.getReferrer=Qe,o.getVideo=function(A,I){var Y,se,Ae=n.document.createElement("video");Ae.muted=!0,Ae.onloadstart=function(){I(null,Ae)};for(var Ce=0;Ce<A.length;Ce++){var Ne=n.document.createElement("source");Y=A[Ce],se=void 0,(se=n.document.createElement("a")).href=Y,se.protocol===n.document.location.protocol&&se.host===n.document.location.host||(Ae.crossOrigin="Anonymous"),Ne.src=A[Ce],Ae.appendChild(Ne)}return{cancel:function(){}}},o.identity=Tc,o.invert=function(A,I){var Y=I[0],se=I[1],Ae=I[2],Ce=I[3],Ne=I[4],Ke=I[5],st=I[6],bt=I[7],Tt=I[8],Rt=I[9],qt=I[10],Bt=I[11],an=I[12],un=I[13],kn=I[14],wn=I[15],Bn=Y*Ke-se*Ne,Un=Y*st-Ae*Ne,Xn=Y*bt-Ce*Ne,Qn=se*st-Ae*Ke,cr=se*bt-Ce*Ke,Tr=Ae*bt-Ce*st,br=Tt*un-Rt*an,Sr=Tt*kn-qt*an,Or=Tt*wn-Bt*an,Zr=Rt*kn-qt*un,Ur=Rt*wn-Bt*un,Xr=qt*wn-Bt*kn,qr=Bn*Xr-Un*Ur+Xn*Zr+Qn*Or-cr*Sr+Tr*br;return qr?(qr=1/qr,A[0]=(Ke*Xr-st*Ur+bt*Zr)*qr,A[1]=(Ae*Ur-se*Xr-Ce*Zr)*qr,A[2]=(un*Tr-kn*cr+wn*Qn)*qr,A[3]=(qt*cr-Rt*Tr-Bt*Qn)*qr,A[4]=(st*Or-Ne*Xr-bt*Sr)*qr,A[5]=(Y*Xr-Ae*Or+Ce*Sr)*qr,A[6]=(kn*Xn-an*Tr-wn*Un)*qr,A[7]=(Tt*Tr-qt*Xn+Bt*Un)*qr,A[8]=(Ne*Ur-Ke*Or+bt*br)*qr,A[9]=(se*Or-Y*Ur-Ce*br)*qr,A[10]=(an*cr-un*Xn+wn*Bn)*qr,A[11]=(Rt*Xn-Tt*cr-Bt*Bn)*qr,A[12]=(Ke*Sr-Ne*Zr-st*br)*qr,A[13]=(Y*Zr-se*Sr+Ae*br)*qr,A[14]=(un*Un-an*Qn-kn*Bn)*qr,A[15]=(Tt*Qn-Rt*Un+qt*Bn)*qr,A):null},o.isChar=kr,o.isMapboxURL=be,o.keysDifference=function(A,I){var Y=[];for(var se in A)se in I||Y.push(se);return Y},o.makeRequest=It,o.mapObject=_,o.mercatorXfromLng=uh,o.mercatorYfromLat=ch,o.mercatorZfromAltitude=fh,o.mul=Wh,o.multiply=cf,o.mvt=Ul,o.nextPowerOfTwo=function(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))},o.normalize=function(A,I){var Y=I[0],se=I[1],Ae=I[2],Ce=Y*Y+se*se+Ae*Ae;return Ce>0&&(Ce=1/Math.sqrt(Ce)),A[0]=I[0]*Ce,A[1]=I[1]*Ce,A[2]=I[2]*Ce,A},o.number=Gr,o.offscreenCanvasSupported=yt,o.ortho=function(A,I,Y,se,Ae,Ce,Ne){var Ke=1/(I-Y),st=1/(se-Ae),bt=1/(Ce-Ne);return A[0]=-2*Ke,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*st,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*bt,A[11]=0,A[12]=(I+Y)*Ke,A[13]=(Ae+se)*st,A[14]=(Ne+Ce)*bt,A[15]=1,A},o.parseGlyphPBF=function(A){return new Gu(A).readFields(Yp,[])},o.pbf=Gu,o.performSymbolLayout=function(A,I,Y,se,Ae,Ce,Ne){A.createArrays();var Ke=512*A.overscaling;A.tilePixelRatio=fi/Ke,A.compareText={},A.iconsNeedLinear=!1;var st=A.layers[0].layout,bt=A.layers[0]._unevaluatedLayout._values,Tt={};if(A.textSizeData.kind==="composite"){var Rt=A.textSizeData,qt=Rt.minZoom,Bt=Rt.maxZoom;Tt.compositeTextSizes=[bt["text-size"].possiblyEvaluate(new ii(qt),Ne),bt["text-size"].possiblyEvaluate(new ii(Bt),Ne)]}if(A.iconSizeData.kind==="composite"){var an=A.iconSizeData,un=an.minZoom,kn=an.maxZoom;Tt.compositeIconSizes=[bt["icon-size"].possiblyEvaluate(new ii(un),Ne),bt["icon-size"].possiblyEvaluate(new ii(kn),Ne)]}Tt.layoutTextSize=bt["text-size"].possiblyEvaluate(new ii(A.zoom+1),Ne),Tt.layoutIconSize=bt["icon-size"].possiblyEvaluate(new ii(A.zoom+1),Ne),Tt.textMaxSize=bt["text-size"].possiblyEvaluate(new ii(18));for(var wn=st.get("text-line-height")*Ba,Bn=st.get("text-rotation-alignment")==="map"&&st.get("symbol-placement")!=="point",Un=st.get("text-keep-upright"),Xn=st.get("text-size"),Qn=function(){var br=Tr[cr],Sr=st.get("text-font").evaluate(br,{},Ne).join(","),Or=Xn.evaluate(br,{},Ne),Zr=Tt.layoutTextSize.evaluate(br,{},Ne),Ur=Tt.layoutIconSize.evaluate(br,{},Ne),Xr={horizontal:{},vertical:void 0},qr=br.text,Br=[0,0];if(qr){var ui=qr.toString(),ti=st.get("text-letter-spacing").evaluate(br,{},Ne)*Ba,Ii=function(ni){for(var pi=0,aa=ni;pi<aa.length;pi+=1)if(Pi=aa[pi].charCodeAt(0),kr.Arabic(Pi)||kr["Arabic Supplement"](Pi)||kr["Arabic Extended-A"](Pi)||kr["Arabic Presentation Forms-A"](Pi)||kr["Arabic Presentation Forms-B"](Pi))return!1;var Pi;return!0}(ui)?ti:0,Yr=st.get("text-anchor").evaluate(br,{},Ne),Ei=st.get("text-variable-anchor");if(!Ei){var Ui=st.get("text-radial-offset").evaluate(br,{},Ne);Br=Ui?Qf(Yr,[Ui*Ba,Nc]):st.get("text-offset").evaluate(br,{},Ne).map(function(ni){return ni*Ba})}var Hi=Bn?"center":st.get("text-justify").evaluate(br,{},Ne),Gi=st.get("symbol-placement"),Di=Gi==="point"?st.get("text-max-width").evaluate(br,{},Ne)*Ba:0,ba=function(){A.allowVerticalPlacement&&Us(ui)&&(Xr.vertical=Xu(qr,I,Y,Ae,Sr,Di,wn,Yr,"left",Ii,Br,ls.vertical,!0,Gi,Zr,Or))};if(!Bn&&Ei){for(var Qi=Hi==="auto"?Ei.map(function(ni){return jc(ni)}):[Hi],Ia=!1,Ka=0;Ka<Qi.length;Ka++){var Na=Qi[Ka];if(!Xr.horizontal[Na])if(Ia)Xr.horizontal[Na]=Xr.horizontal[0];else{var xo=Xu(qr,I,Y,Ae,Sr,Di,wn,"center",Na,Ii,Br,ls.horizontal,!1,Gi,Zr,Or);xo&&(Xr.horizontal[Na]=xo,Ia=xo.positionedLines.length===1)}}ba()}else{Hi==="auto"&&(Hi=jc(Yr));var ja=Xu(qr,I,Y,Ae,Sr,Di,wn,Yr,Hi,Ii,Br,ls.horizontal,!1,Gi,Zr,Or);ja&&(Xr.horizontal[Hi]=ja),ba(),Us(ui)&&Bn&&Un&&(Xr.vertical=Xu(qr,I,Y,Ae,Sr,Di,wn,Yr,Hi,Ii,Br,ls.vertical,!1,Gi,Zr,Or))}}var Ma=void 0,Ua=!1;if(br.icon&&br.icon.name){var Da=se[br.icon.name];Da&&(Ma=function(ni,pi,aa){var Pi=Fc(aa),ta=Pi.horizontalAlign,Ji=Pi.verticalAlign,mi=pi[0],oa=pi[1],bo=mi-ni.displaySize[0]*ta,Ko=bo+ni.displaySize[0],oo=oa-ni.displaySize[1]*Ji;return{image:ni,top:oo,bottom:oo+ni.displaySize[1],left:bo,right:Ko}}(Ae[br.icon.name],st.get("icon-offset").evaluate(br,{},Ne),st.get("icon-anchor").evaluate(br,{},Ne)),Ua=Da.sdf,A.sdfIcons===void 0?A.sdfIcons=Da.sdf:A.sdfIcons!==Da.sdf&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Da.pixelRatio!==A.pixelRatio||st.get("icon-rotate").constantOr(1)!==0)&&(A.iconsNeedLinear=!0))}var Sa=eh(Xr.horizontal)||Xr.vertical;A.iconsInText=!!Sa&&Sa.iconsInText,(Sa||Ma)&&function(ni,pi,aa,Pi,ta,Ji,mi,oa,bo,Ko,oo){var Ys=Ji.textMaxSize.evaluate(pi,{});Ys===void 0&&(Ys=mi);var ml,za=ni.layers[0].layout,Xs=za.get("icon-offset").evaluate(pi,{},oo),Cs=eh(aa.horizontal),Ps=24,Il=mi/Ps,ic=ni.tilePixelRatio*Il,Dl=ni.tilePixelRatio*Ys/Ps,ac=ni.tilePixelRatio*oa,_u=ni.tilePixelRatio*za.get("symbol-spacing"),Wc=za.get("text-padding")*ni.tilePixelRatio,oc=za.get("icon-padding")*ni.tilePixelRatio,eu=za.get("text-max-angle")/180*Math.PI,sc=za.get("text-rotation-alignment")==="map"&&za.get("symbol-placement")!=="point",lc=za.get("icon-rotation-alignment")==="map"&&za.get("symbol-placement")!=="point",wu=za.get("symbol-placement"),Yc=_u/2,Tu=za.get("icon-text-fit");Pi&&Tu!=="none"&&(ni.allowVerticalPlacement&&aa.vertical&&(ml=Uf(Pi,aa.vertical,Tu,za.get("icon-text-fit-padding"),Xs,Il)),Cs&&(Pi=Uf(Pi,Cs,Tu,za.get("icon-text-fit-padding"),Xs,Il)));var zl=function(md,Lu){Lu.x<0||Lu.x>=fi||Lu.y<0||Lu.y>=fi||function(ha,Zs,yd,Sl,$c,bh,pc,$s,dc,Cu,gc,vc,ef,_h,Pu,wh,Th,kh,Ah,Mh,us,mc,Sh,el,xd){var Eh,Bl,ru,iu,au,ou=ha.addToLineVertexArray(Zs,yd),Lh=0,Ch=0,Ph=0,Oh=0,tf=-1,nf=-1,yl={},Ih=Ar(""),rf=0,af=0;if($s._unevaluatedLayout.getValue("text-radial-offset")===void 0?(rf=(Eh=$s.layout.get("text-offset").evaluate(us,{},el).map(function(Iu){return Iu*Ba}))[0],af=Eh[1]):(rf=$s.layout.get("text-radial-offset").evaluate(us,{},el)*Ba,af=Nc),ha.allowVerticalPlacement&&Sl.vertical){var Dh=$s.layout.get("text-rotate").evaluate(us,{},el)+90,bd=Sl.vertical;iu=new $u(dc,Zs,Cu,gc,vc,bd,ef,_h,Pu,Dh),pc&&(au=new $u(dc,Zs,Cu,gc,vc,pc,Th,kh,Pu,Dh))}if($c){var of=$s.layout.get("icon-rotate").evaluate(us,{}),zh=$s.layout.get("icon-text-fit")!=="none",Rh=Kf($c,of,Sh,zh),sf=pc?Kf(pc,of,Sh,zh):void 0;ru=new $u(dc,Zs,Cu,gc,vc,$c,Th,kh,!1,of),Lh=4*Rh.length;var Fh=ha.iconSizeData,Ou=null;Fh.kind==="source"?(Ou=[Ws*$s.layout.get("icon-size").evaluate(us,{})])[0]>Al&&E(ha.layerIds[0]+': Value for "icon-size" is >= '+yu+'. Reduce your "icon-size".'):Fh.kind==="composite"&&((Ou=[Ws*mc.compositeIconSizes[0].evaluate(us,{},el),Ws*mc.compositeIconSizes[1].evaluate(us,{},el)])[0]>Al||Ou[1]>Al)&&E(ha.layerIds[0]+': Value for "icon-size" is >= '+yu+'. Reduce your "icon-size".'),ha.addSymbols(ha.icon,Rh,Ou,Mh,Ah,us,!1,Zs,ou.lineStartIndex,ou.lineLength,-1,el),tf=ha.icon.placedSymbolArray.length-1,sf&&(Ch=4*sf.length,ha.addSymbols(ha.icon,sf,Ou,Mh,Ah,us,ls.vertical,Zs,ou.lineStartIndex,ou.lineLength,-1,el),nf=ha.icon.placedSymbolArray.length-1)}for(var Bh in Sl.horizontal){var yc=Sl.horizontal[Bh];if(!Bl){Ih=Ar(yc.text);var _d=$s.layout.get("text-rotate").evaluate(us,{},el);Bl=new $u(dc,Zs,Cu,gc,vc,yc,ef,_h,Pu,_d)}var Nh=yc.positionedLines.length===1;if(Ph+=$f(ha,Zs,yc,bh,$s,Pu,us,wh,ou,Sl.vertical?ls.horizontal:ls.horizontalOnly,Nh?Object.keys(Sl.horizontal):[Bh],yl,tf,mc,el),Nh)break}Sl.vertical&&(Oh+=$f(ha,Zs,Sl.vertical,bh,$s,Pu,us,wh,ou,ls.vertical,["vertical"],yl,nf,mc,el));var wd=Bl?Bl.boxStartIndex:ha.collisionBoxArray.length,Td=Bl?Bl.boxEndIndex:ha.collisionBoxArray.length,kd=iu?iu.boxStartIndex:ha.collisionBoxArray.length,Ad=iu?iu.boxEndIndex:ha.collisionBoxArray.length,Md=ru?ru.boxStartIndex:ha.collisionBoxArray.length,Sd=ru?ru.boxEndIndex:ha.collisionBoxArray.length,Ed=au?au.boxStartIndex:ha.collisionBoxArray.length,Ld=au?au.boxEndIndex:ha.collisionBoxArray.length,tl=-1,xc=function(Iu,Uh){return Iu&&Iu.circleDiameter?Math.max(Iu.circleDiameter,Uh):Uh};tl=xc(Bl,tl),tl=xc(iu,tl),tl=xc(ru,tl);var jh=(tl=xc(au,tl))>-1?1:0;jh&&(tl*=xd/Ba),ha.glyphOffsetArray.length>=Si.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),us.sortKey!==void 0&&ha.addToSortKeyRanges(ha.symbolInstances.length,us.sortKey),ha.symbolInstances.emplaceBack(Zs.x,Zs.y,yl.right>=0?yl.right:-1,yl.center>=0?yl.center:-1,yl.left>=0?yl.left:-1,yl.vertical||-1,tf,nf,Ih,wd,Td,kd,Ad,Md,Sd,Ed,Ld,Cu,Ph,Oh,Lh,Ch,jh,0,ef,rf,af,tl)}(ni,Lu,md,aa,Pi,ta,ml,ni.layers[0],ni.collisionBoxArray,pi.index,pi.sourceLayerIndex,ni.index,ic,Wc,sc,bo,ac,oc,lc,Xs,pi,Ji,Ko,oo,mi)};if(wu==="line")for(var tu=0,uc=Zf(pi.geometry,0,0,fi,fi);tu<uc.length;tu+=1)for(var cc=uc[tu],nu=0,fc=ed(cc,_u,eu,aa.vertical||Cs,Pi,Ps,Dl,ni.overscaling,fi);nu<fc.length;nu+=1){var hc=fc[nu];Cs&&id(ni,Cs.text,Yc,hc)||zl(cc,hc)}else if(wu==="line-center")for(var ku=0,Au=pi.geometry;ku<Au.length;ku+=1){var Rl=Au[ku];if(Rl.length>1){var Mu=$p(Rl,eu,aa.vertical||Cs,Pi,Ps,Dl);Mu&&zl(Rl,Mu)}}else if(pi.type==="Polygon")for(var Fl=0,Su=Cc(pi.geometry,0);Fl<Su.length;Fl+=1){var Eu=Su[Fl],vh=nd(Eu,16);zl(Eu[0],new Gl(vh.x,vh.y,0))}else if(pi.type==="LineString")for(var Xc=0,mh=pi.geometry;Xc<mh.length;Xc+=1){var Zc=mh[Xc];zl(Zc,new Gl(Zc[0].x,Zc[0].y,0))}else if(pi.type==="Point")for(var Kc=0,yh=pi.geometry;Kc<yh.length;Kc+=1)for(var Jc=0,xh=yh[Kc];Jc<xh.length;Jc+=1){var Qc=xh[Jc];zl([Qc],new Gl(Qc.x,Qc.y,0))}}(A,br,Xr,Ma,se,Tt,Zr,Ur,Br,Ua,Ne)},cr=0,Tr=A.features;cr<Tr.length;cr+=1)Qn();Ce&&A.generateCollisionDebugBuffers()},o.perspective=function(A,I,Y,se,Ae){var Ce,Ne=1/Math.tan(I/2);return A[0]=Ne/Y,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=Ne,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,Ae!=null&&Ae!==1/0?(Ce=1/(se-Ae),A[10]=(Ae+se)*Ce,A[14]=2*Ae*se*Ce):(A[10]=-1,A[14]=-2*se),A},o.pick=function(A,I){for(var Y={},se=0;se<I.length;se++){var Ae=I[se];Ae in A&&(Y[Ae]=A[Ae])}return Y},o.plugin=Pa,o.polygonIntersectsPolygon=El,o.postMapLoadEvent=xe,o.postTurnstileEvent=De,o.potpack=Rf,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=Dr,o.registerForPluginStateChange=function(A){return A({pluginStatus:oi,pluginURL:ca}),Ca.on("pluginStateChange",A),A},o.renderColorRamp=df,o.rotate=function(A,I,Y){var se=I[0],Ae=I[1],Ce=I[2],Ne=I[3],Ke=Math.sin(Y),st=Math.cos(Y);return A[0]=se*st+Ce*Ke,A[1]=Ae*st+Ne*Ke,A[2]=se*-Ke+Ce*st,A[3]=Ae*-Ke+Ne*st,A},o.rotateX=function(A,I,Y){var se=Math.sin(Y),Ae=Math.cos(Y),Ce=I[4],Ne=I[5],Ke=I[6],st=I[7],bt=I[8],Tt=I[9],Rt=I[10],qt=I[11];return I!==A&&(A[0]=I[0],A[1]=I[1],A[2]=I[2],A[3]=I[3],A[12]=I[12],A[13]=I[13],A[14]=I[14],A[15]=I[15]),A[4]=Ce*Ae+bt*se,A[5]=Ne*Ae+Tt*se,A[6]=Ke*Ae+Rt*se,A[7]=st*Ae+qt*se,A[8]=bt*Ae-Ce*se,A[9]=Tt*Ae-Ne*se,A[10]=Rt*Ae-Ke*se,A[11]=qt*Ae-st*se,A},o.rotateZ=function(A,I,Y){var se=Math.sin(Y),Ae=Math.cos(Y),Ce=I[0],Ne=I[1],Ke=I[2],st=I[3],bt=I[4],Tt=I[5],Rt=I[6],qt=I[7];return I!==A&&(A[8]=I[8],A[9]=I[9],A[10]=I[10],A[11]=I[11],A[12]=I[12],A[13]=I[13],A[14]=I[14],A[15]=I[15]),A[0]=Ce*Ae+bt*se,A[1]=Ne*Ae+Tt*se,A[2]=Ke*Ae+Rt*se,A[3]=st*Ae+qt*se,A[4]=bt*Ae-Ce*se,A[5]=Tt*Ae-Ne*se,A[6]=Rt*Ae-Ke*se,A[7]=qt*Ae-st*se,A},o.scale=function(A,I,Y){var se=Y[0],Ae=Y[1],Ce=Y[2];return A[0]=I[0]*se,A[1]=I[1]*se,A[2]=I[2]*se,A[3]=I[3]*se,A[4]=I[4]*Ae,A[5]=I[5]*Ae,A[6]=I[6]*Ae,A[7]=I[7]*Ae,A[8]=I[8]*Ce,A[9]=I[9]*Ce,A[10]=I[10]*Ce,A[11]=I[11]*Ce,A[12]=I[12],A[13]=I[13],A[14]=I[14],A[15]=I[15],A},o.scale$1=function(A,I,Y){return A[0]=I[0]*Y,A[1]=I[1]*Y,A[2]=I[2]*Y,A[3]=I[3]*Y,A},o.scale$2=function(A,I,Y){return A[0]=I[0]*Y,A[1]=I[1]*Y,A[2]=I[2]*Y,A},o.setCacheLimits=function(A,I){Oe=A,ze=I},o.setRTLTextPlugin=function(A,I,Y){if(Y===void 0&&(Y=!1),oi===Lo||oi===io||oi===Go)throw new Error("setRTLTextPlugin cannot be called multiple times.");ca=X.resolveURL(A),oi=Lo,as=I,Co(),Y||As()},o.sphericalToCartesian=function(A){var I=A[0],Y=A[1],se=A[2];return Y+=90,Y*=Math.PI/180,se*=Math.PI/180,{x:I*Math.cos(Y)*Math.sin(se),y:I*Math.sin(Y)*Math.sin(se),z:I*Math.cos(se)}},o.sqrLen=Xh,o.styleSpec=Ye,o.sub=Yh,o.symbolSize=Qp,o.transformMat3=function(A,I,Y){var se=I[0],Ae=I[1],Ce=I[2];return A[0]=se*Y[0]+Ae*Y[3]+Ce*Y[6],A[1]=se*Y[1]+Ae*Y[4]+Ce*Y[7],A[2]=se*Y[2]+Ae*Y[5]+Ce*Y[8],A},o.transformMat4=ju,o.translate=function(A,I,Y){var se,Ae,Ce,Ne,Ke,st,bt,Tt,Rt,qt,Bt,an,un=Y[0],kn=Y[1],wn=Y[2];return I===A?(A[12]=I[0]*un+I[4]*kn+I[8]*wn+I[12],A[13]=I[1]*un+I[5]*kn+I[9]*wn+I[13],A[14]=I[2]*un+I[6]*kn+I[10]*wn+I[14],A[15]=I[3]*un+I[7]*kn+I[11]*wn+I[15]):(se=I[0],Ae=I[1],Ce=I[2],Ne=I[3],Ke=I[4],st=I[5],bt=I[6],Tt=I[7],Rt=I[8],qt=I[9],Bt=I[10],an=I[11],A[0]=se,A[1]=Ae,A[2]=Ce,A[3]=Ne,A[4]=Ke,A[5]=st,A[6]=bt,A[7]=Tt,A[8]=Rt,A[9]=qt,A[10]=Bt,A[11]=an,A[12]=se*un+Ke*kn+Rt*wn+I[12],A[13]=Ae*un+st*kn+qt*wn+I[13],A[14]=Ce*un+bt*kn+Bt*wn+I[14],A[15]=Ne*un+Tt*kn+an*wn+I[15]),A},o.triggerPluginCompletionEvent=La,o.uniqueId=g,o.validateCustomStyleLayer=function(A){var I=[],Y=A.id;return Y===void 0&&I.push({message:"layers."+Y+': missing required property "id"'}),A.render===void 0&&I.push({message:"layers."+Y+': missing required method "render"'}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&I.push({message:"layers."+Y+': property "renderingMode" must be either "2d" or "3d"'}),I},o.validateLight=ds,o.validateStyle=Eo,o.values=function(A){var I=[];for(var Y in A)I.push(A[Y]);return I},o.vectorTile=Ul,o.version=b,o.warnOnce=E,o.webpSupported=$,o.window=n,o.wrap=d}),k(0,function(o){function T(He){var We=typeof He;if(We==="number"||We==="boolean"||We==="string"||He==null)return JSON.stringify(He);if(Array.isArray(He)){for(var Be="[",Ge=0,at=He;Ge<at.length;Ge+=1)Be+=T(at[Ge])+",";return Be+"]"}for(var nt=Object.keys(He).sort(),Re="{",Fe=0;Fe<nt.length;Fe++)Re+=JSON.stringify(nt[Fe])+":"+T(He[nt[Fe]])+",";return Re+"}"}function b(He){for(var We="",Be=0,Ge=o.refProperties;Be<Ge.length;Be+=1)We+="/"+T(He[Ge[Be]]);return We}var h=function(He){this.keyCache={},He&&this.replace(He)};h.prototype.replace=function(He){this._layerConfigs={},this._layers={},this.update(He,[])},h.prototype.update=function(He,We){for(var Be=this,Ge=0,at=He;Ge<at.length;Ge+=1){var nt=at[Ge];this._layerConfigs[nt.id]=nt;var Re=this._layers[nt.id]=o.createStyleLayer(nt);Re._featureFilter=o.featureFilter(Re.filter),this.keyCache[nt.id]&&delete this.keyCache[nt.id]}for(var Fe=0,rt=We;Fe<rt.length;Fe+=1){var Ye=rt[Fe];delete this.keyCache[Ye],delete this._layerConfigs[Ye],delete this._layers[Ye]}this.familiesBySource={};for(var ct=0,pt=function(Lt,zt){for(var Wt={},rn=0;rn<Lt.length;rn++){var Ut=zt&&zt[Lt[rn].id]||b(Lt[rn]);zt&&(zt[Lt[rn].id]=Ut);var Vt=Wt[Ut];Vt||(Vt=Wt[Ut]=[]),Vt.push(Lt[rn])}var en=[];for(var Ln in Wt)en.push(Wt[Ln]);return en}(o.values(this._layerConfigs),this.keyCache);ct<pt.length;ct+=1){var gt=pt[ct].map(function(Lt){return Be._layers[Lt.id]}),ut=gt[0];if(ut.visibility!=="none"){var Mt=ut.source||"",xt=this.familiesBySource[Mt];xt||(xt=this.familiesBySource[Mt]={});var mt=ut.sourceLayer||"_geojsonTileLayer",Et=xt[mt];Et||(Et=xt[mt]=[]),Et.push(gt)}}};var s=function(He){var We={},Be=[];for(var Ge in He){var at=He[Ge],nt=We[Ge]={};for(var Re in at){var Fe=at[+Re];if(Fe&&Fe.bitmap.width!==0&&Fe.bitmap.height!==0){var rt={x:0,y:0,w:Fe.bitmap.width+2,h:Fe.bitmap.height+2};Be.push(rt),nt[Re]={rect:rt,metrics:Fe.metrics}}}}var Ye=o.potpack(Be),ct=Ye.w,pt=Ye.h,gt=new o.AlphaImage({width:ct||1,height:pt||1});for(var ut in He){var Mt=He[ut];for(var xt in Mt){var mt=Mt[+xt];if(mt&&mt.bitmap.width!==0&&mt.bitmap.height!==0){var Et=We[ut][xt].rect;o.AlphaImage.copy(mt.bitmap,gt,{x:0,y:0},{x:Et.x+1,y:Et.y+1},mt.bitmap)}}}this.image=gt,this.positions=We};o.register("GlyphAtlas",s);var t=function(He){this.tileID=new o.OverscaledTileID(He.tileID.overscaledZ,He.tileID.wrap,He.tileID.canonical.z,He.tileID.canonical.x,He.tileID.canonical.y),this.uid=He.uid,this.zoom=He.zoom,this.pixelRatio=He.pixelRatio,this.tileSize=He.tileSize,this.source=He.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=He.showCollisionBoxes,this.collectResourceTiming=!!He.collectResourceTiming,this.returnDependencies=!!He.returnDependencies,this.promoteId=He.promoteId};function i(He,We,Be){for(var Ge=new o.EvaluationParameters(We),at=0,nt=He;at<nt.length;at+=1)nt[at].recalculate(Ge,Be)}function n(He,We){var Be=o.getArrayBuffer(He.request,function(Ge,at,nt,Re){Ge?We(Ge):at&&We(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(at)),rawData:at,cacheControl:nt,expires:Re})});return function(){Be.cancel(),We()}}t.prototype.parse=function(He,We,Be,Ge,at){var nt=this;this.status="parsing",this.data=He,this.collisionBoxArray=new o.CollisionBoxArray;var Re=new o.DictionaryCoder(Object.keys(He.layers).sort()),Fe=new o.FeatureIndex(this.tileID,this.promoteId);Fe.bucketLayerIDs=[];var rt,Ye,ct,pt,gt={},ut={featureIndex:Fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Be},Mt=We.familiesBySource[this.source];for(var xt in Mt){var mt=He.layers[xt];if(mt){mt.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+xt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Et=Re.encode(xt),Lt=[],zt=0;zt<mt.length;zt++){var Wt=mt.feature(zt),rn=Fe.getId(Wt,xt);Lt.push({feature:Wt,id:rn,index:zt,sourceLayerIndex:Et})}for(var Ut=0,Vt=Mt[xt];Ut<Vt.length;Ut+=1){var en=Vt[Ut],Ln=en[0];Ln.minzoom&&this.zoom<Math.floor(Ln.minzoom)||Ln.maxzoom&&this.zoom>=Ln.maxzoom||Ln.visibility!=="none"&&(i(en,this.zoom,Be),(gt[Ln.id]=Ln.createBucket({index:Fe.bucketLayerIDs.length,layers:en,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Et,sourceID:this.source})).populate(Lt,ut,this.tileID.canonical),Fe.bucketLayerIDs.push(en.map(function(nn){return nn.id})))}}}var An=o.mapObject(ut.glyphDependencies,function(nn){return Object.keys(nn).map(Number)});Object.keys(An).length?Ge.send("getGlyphs",{uid:this.uid,stacks:An},function(nn,cn){rt||(rt=nn,Ye=cn,ln.call(nt))}):Ye={};var hn=Object.keys(ut.iconDependencies);hn.length?Ge.send("getImages",{icons:hn,source:this.source,tileID:this.tileID,type:"icons"},function(nn,cn){rt||(rt=nn,ct=cn,ln.call(nt))}):ct={};var Xt=Object.keys(ut.patternDependencies);function ln(){if(rt)return at(rt);if(Ye&&ct&&pt){var nn=new s(Ye),cn=new o.ImageAtlas(ct,pt);for(var Tn in gt){var Mn=gt[Tn];Mn instanceof o.SymbolBucket?(i(Mn.layers,this.zoom,Be),o.performSymbolLayout(Mn,Ye,nn.positions,ct,cn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Mn.hasPattern&&(Mn instanceof o.LineBucket||Mn instanceof o.FillBucket||Mn instanceof o.FillExtrusionBucket)&&(i(Mn.layers,this.zoom,Be),Mn.addFeatures(ut,this.tileID.canonical,cn.patternPositions))}this.status="done",at(null,{buckets:o.values(gt).filter(function(zn){return!zn.isEmpty()}),featureIndex:Fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:nn.image,imageAtlas:cn,glyphMap:this.returnDependencies?Ye:null,iconMap:this.returnDependencies?ct:null,glyphPositions:this.returnDependencies?nn.positions:null})}}Xt.length?Ge.send("getImages",{icons:Xt,source:this.source,tileID:this.tileID,type:"patterns"},function(nn,cn){rt||(rt=nn,pt=cn,ln.call(nt))}):pt={},ln.call(this)};var r=function(He,We,Be,Ge){this.actor=He,this.layerIndex=We,this.availableImages=Be,this.loadVectorData=Ge||n,this.loading={},this.loaded={}};r.prototype.loadTile=function(He,We){var Be=this,Ge=He.uid;this.loading||(this.loading={});var at=!!(He&&He.request&&He.request.collectResourceTiming)&&new o.RequestPerformance(He.request),nt=this.loading[Ge]=new t(He);nt.abort=this.loadVectorData(He,function(Re,Fe){if(delete Be.loading[Ge],Re||!Fe)return nt.status="done",Be.loaded[Ge]=nt,We(Re);var rt=Fe.rawData,Ye={};Fe.expires&&(Ye.expires=Fe.expires),Fe.cacheControl&&(Ye.cacheControl=Fe.cacheControl);var ct={};if(at){var pt=at.finish();pt&&(ct.resourceTiming=JSON.parse(JSON.stringify(pt)))}nt.vectorTile=Fe.vectorTile,nt.parse(Fe.vectorTile,Be.layerIndex,Be.availableImages,Be.actor,function(gt,ut){if(gt||!ut)return We(gt);We(null,o.extend({rawTileData:rt.slice(0)},ut,Ye,ct))}),Be.loaded=Be.loaded||{},Be.loaded[Ge]=nt})},r.prototype.reloadTile=function(He,We){var Be=this,Ge=this.loaded,at=He.uid,nt=this;if(Ge&&Ge[at]){var Re=Ge[at];Re.showCollisionBoxes=He.showCollisionBoxes;var Fe=function(rt,Ye){var ct=Re.reloadCallback;ct&&(delete Re.reloadCallback,Re.parse(Re.vectorTile,nt.layerIndex,Be.availableImages,nt.actor,ct)),We(rt,Ye)};Re.status==="parsing"?Re.reloadCallback=Fe:Re.status==="done"&&(Re.vectorTile?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,Fe):Fe())}},r.prototype.abortTile=function(He,We){var Be=this.loading,Ge=He.uid;Be&&Be[Ge]&&Be[Ge].abort&&(Be[Ge].abort(),delete Be[Ge]),We()},r.prototype.removeTile=function(He,We){var Be=this.loaded,Ge=He.uid;Be&&Be[Ge]&&delete Be[Ge],We()};var a=o.window.ImageBitmap,l=function(){this.loaded={}};l.prototype.loadTile=function(He,We){var Be=He.uid,Ge=He.encoding,at=He.rawImageData,nt=a&&at instanceof a?this.getImageData(at):at,Re=new o.DEMData(Be,nt,Ge);this.loaded=this.loaded||{},this.loaded[Be]=Re,We(null,Re)},l.prototype.getImageData=function(He){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(He.width,He.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=He.width,this.offscreenCanvas.height=He.height,this.offscreenCanvasContext.drawImage(He,0,0,He.width,He.height);var We=this.offscreenCanvasContext.getImageData(-1,-1,He.width+2,He.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:We.width,height:We.height},We.data)},l.prototype.removeTile=function(He){var We=this.loaded,Be=He.uid;We&&We[Be]&&delete We[Be]};var u=function He(We,Be){var Ge,at=We&&We.type;if(at==="FeatureCollection")for(Ge=0;Ge<We.features.length;Ge++)He(We.features[Ge],Be);else if(at==="GeometryCollection")for(Ge=0;Ge<We.geometries.length;Ge++)He(We.geometries[Ge],Be);else if(at==="Feature")He(We.geometry,Be);else if(at==="Polygon")d(We.coordinates,Be);else if(at==="MultiPolygon")for(Ge=0;Ge<We.coordinates.length;Ge++)d(We.coordinates[Ge],Be);return We};function d(He,We){if(He.length!==0){c(He[0],We);for(var Be=1;Be<He.length;Be++)c(He[Be],!We)}}function c(He,We){for(var Be=0,Ge=0,at=He.length,nt=at-1;Ge<at;nt=Ge++)Be+=(He[Ge][0]-He[nt][0])*(He[nt][1]+He[Ge][1]);Be>=0!=!!We&&He.reverse()}var x=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(He){this._feature=He,this.extent=o.EXTENT,this.type=He.type,this.properties=He.tags,"id"in He&&!isNaN(He.id)&&(this.id=parseInt(He.id,10))};g.prototype.loadGeometry=function(){if(this._feature.type===1){for(var He=[],We=0,Be=this._feature.geometry;We<Be.length;We+=1){var Ge=Be[We];He.push([new o.Point$1(Ge[0],Ge[1])])}return He}for(var at=[],nt=0,Re=this._feature.geometry;nt<Re.length;nt+=1){for(var Fe=[],rt=0,Ye=Re[nt];rt<Ye.length;rt+=1){var ct=Ye[rt];Fe.push(new o.Point$1(ct[0],ct[1]))}at.push(Fe)}return at},g.prototype.toGeoJSON=function(He,We,Be){return x.call(this,He,We,Be)};var p=function(He){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=He.length,this._features=He};p.prototype.feature=function(He){return new g(this._features[He])};var v=o.vectorTile.VectorTileFeature,m=y;function y(He,We){this.options=We||{},this.features=He,this.length=He.length}function _(He,We){this.id=typeof He.id=="number"?He.id:void 0,this.type=He.type,this.rawGeometry=He.type===1?[He.geometry]:He.geometry,this.properties=He.tags,this.extent=We||4096}y.prototype.feature=function(He){return new _(this.features[He],this.options.extent)},_.prototype.loadGeometry=function(){var He=this.rawGeometry;this.geometry=[];for(var We=0;We<He.length;We++){for(var Be=He[We],Ge=[],at=0;at<Be.length;at++)Ge.push(new o.Point$1(Be[at][0],Be[at][1]));this.geometry.push(Ge)}return this.geometry},_.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var He=this.geometry,We=1/0,Be=-1/0,Ge=1/0,at=-1/0,nt=0;nt<He.length;nt++)for(var Re=He[nt],Fe=0;Fe<Re.length;Fe++){var rt=Re[Fe];We=Math.min(We,rt.x),Be=Math.max(Be,rt.x),Ge=Math.min(Ge,rt.y),at=Math.max(at,rt.y)}return[We,Ge,Be,at]},_.prototype.toGeoJSON=v.prototype.toGeoJSON;var f=P,S=P,w=function(He,We){We=We||{};var Be={};for(var Ge in He)Be[Ge]=new m(He[Ge].features,We),Be[Ge].name=Ge,Be[Ge].version=We.version,Be[Ge].extent=We.extent;return P({layers:Be})},E=m;function P(He){var We=new o.pbf;return function(Be,Ge){for(var at in Be.layers)Ge.writeMessage(3,C,Be.layers[at])}(He,We),We.finish()}function C(He,We){var Be;We.writeVarintField(15,He.version||1),We.writeStringField(1,He.name||""),We.writeVarintField(5,He.extent||4096);var Ge={keys:[],values:[],keycache:{},valuecache:{}};for(Be=0;Be<He.length;Be++)Ge.feature=He.feature(Be),We.writeMessage(2,O,Ge);var at=Ge.keys;for(Be=0;Be<at.length;Be++)We.writeStringField(3,at[Be]);var nt=Ge.values;for(Be=0;Be<nt.length;Be++)We.writeMessage(4,W,nt[Be])}function O(He,We){var Be=He.feature;Be.id!==void 0&&We.writeVarintField(1,Be.id),We.writeMessage(2,R,He),We.writeVarintField(3,Be.type),We.writeMessage(4,N,Be)}function R(He,We){var Be=He.feature,Ge=He.keys,at=He.values,nt=He.keycache,Re=He.valuecache;for(var Fe in Be.properties){var rt=nt[Fe];rt===void 0&&(Ge.push(Fe),rt=Ge.length-1,nt[Fe]=rt),We.writeVarint(rt);var Ye=Be.properties[Fe],ct=typeof Ye;ct!=="string"&&ct!=="boolean"&&ct!=="number"&&(Ye=JSON.stringify(Ye));var pt=ct+":"+Ye,gt=Re[pt];gt===void 0&&(at.push(Ye),gt=at.length-1,Re[pt]=gt),We.writeVarint(gt)}}function j(He,We){return(We<<3)+(7&He)}function D(He){return He<<1^He>>31}function N(He,We){for(var Be=He.loadGeometry(),Ge=He.type,at=0,nt=0,Re=Be.length,Fe=0;Fe<Re;Fe++){var rt=Be[Fe],Ye=1;Ge===1&&(Ye=rt.length),We.writeVarint(j(1,Ye));for(var ct=Ge===3?rt.length-1:rt.length,pt=0;pt<ct;pt++){pt===1&&Ge!==1&&We.writeVarint(j(2,ct-1));var gt=rt[pt].x-at,ut=rt[pt].y-nt;We.writeVarint(D(gt)),We.writeVarint(D(ut)),at+=gt,nt+=ut}Ge===3&&We.writeVarint(j(7,1))}}function W(He,We){var Be=typeof He;Be==="string"?We.writeStringField(1,He):Be==="boolean"?We.writeBooleanField(7,He):Be==="number"&&(He%1!=0?We.writeDoubleField(3,He):He<0?We.writeSVarintField(6,He):We.writeVarintField(5,He))}function F(He,We,Be,Ge,at,nt){if(!(at-Ge<=Be)){var Re=Ge+at>>1;U(He,We,Re,Ge,at,nt%2),F(He,We,Be,Ge,Re-1,nt+1),F(He,We,Be,Re+1,at,nt+1)}}function U(He,We,Be,Ge,at,nt){for(;at>Ge;){if(at-Ge>600){var Re=at-Ge+1,Fe=Be-Ge+1,rt=Math.log(Re),Ye=.5*Math.exp(2*rt/3),ct=.5*Math.sqrt(rt*Ye*(Re-Ye)/Re)*(Fe-Re/2<0?-1:1);U(He,We,Be,Math.max(Ge,Math.floor(Be-Fe*Ye/Re+ct)),Math.min(at,Math.floor(Be+(Re-Fe)*Ye/Re+ct)),nt)}var pt=We[2*Be+nt],gt=Ge,ut=at;for(V(He,We,Ge,Be),We[2*at+nt]>pt&&V(He,We,Ge,at);gt<ut;){for(V(He,We,gt,ut),gt++,ut--;We[2*gt+nt]<pt;)gt++;for(;We[2*ut+nt]>pt;)ut--}We[2*Ge+nt]===pt?V(He,We,Ge,ut):V(He,We,++ut,at),ut<=Be&&(Ge=ut+1),Be<=ut&&(at=ut-1)}}function V(He,We,Be,Ge){te(He,Be,Ge),te(We,2*Be,2*Ge),te(We,2*Be+1,2*Ge+1)}function te(He,We,Be){var Ge=He[We];He[We]=He[Be],He[Be]=Ge}function J(He,We,Be,Ge){var at=He-Be,nt=We-Ge;return at*at+nt*nt}f.fromVectorTileJs=S,f.fromGeojsonVt=w,f.GeoJSONWrapper=E;var K=function(He){return He[0]},X=function(He){return He[1]},Z=function(He,We,Be,Ge,at){We===void 0&&(We=K),Be===void 0&&(Be=X),Ge===void 0&&(Ge=64),at===void 0&&(at=Float64Array),this.nodeSize=Ge,this.points=He;for(var nt=He.length<65536?Uint16Array:Uint32Array,Re=this.ids=new nt(He.length),Fe=this.coords=new at(2*He.length),rt=0;rt<He.length;rt++)Re[rt]=rt,Fe[2*rt]=We(He[rt]),Fe[2*rt+1]=Be(He[rt]);F(Re,Fe,Ge,0,Re.length-1,0)};Z.prototype.range=function(He,We,Be,Ge){return function(at,nt,Re,Fe,rt,Ye,ct){for(var pt,gt,ut=[0,at.length-1,0],Mt=[];ut.length;){var xt=ut.pop(),mt=ut.pop(),Et=ut.pop();if(mt-Et<=ct)for(var Lt=Et;Lt<=mt;Lt++)pt=nt[2*Lt],gt=nt[2*Lt+1],pt>=Re&&pt<=rt&&gt>=Fe&&gt<=Ye&&Mt.push(at[Lt]);else{var zt=Math.floor((Et+mt)/2);pt=nt[2*zt],gt=nt[2*zt+1],pt>=Re&&pt<=rt&&gt>=Fe&&gt<=Ye&&Mt.push(at[zt]);var Wt=(xt+1)%2;(xt===0?Re<=pt:Fe<=gt)&&(ut.push(Et),ut.push(zt-1),ut.push(Wt)),(xt===0?rt>=pt:Ye>=gt)&&(ut.push(zt+1),ut.push(mt),ut.push(Wt))}}return Mt}(this.ids,this.coords,He,We,Be,Ge,this.nodeSize)},Z.prototype.within=function(He,We,Be){return function(Ge,at,nt,Re,Fe,rt){for(var Ye=[0,Ge.length-1,0],ct=[],pt=Fe*Fe;Ye.length;){var gt=Ye.pop(),ut=Ye.pop(),Mt=Ye.pop();if(ut-Mt<=rt)for(var xt=Mt;xt<=ut;xt++)J(at[2*xt],at[2*xt+1],nt,Re)<=pt&&ct.push(Ge[xt]);else{var mt=Math.floor((Mt+ut)/2),Et=at[2*mt],Lt=at[2*mt+1];J(Et,Lt,nt,Re)<=pt&&ct.push(Ge[mt]);var zt=(gt+1)%2;(gt===0?nt-Fe<=Et:Re-Fe<=Lt)&&(Ye.push(Mt),Ye.push(mt-1),Ye.push(zt)),(gt===0?nt+Fe>=Et:Re+Fe>=Lt)&&(Ye.push(mt+1),Ye.push(ut),Ye.push(zt))}}return ct}(this.ids,this.coords,He,We,Be,this.nodeSize)};var $={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(He){return He}},re=function(He){this.options=de(Object.create($),He),this.trees=new Array(this.options.maxZoom+1)};function oe(He,We,Be,Ge,at){return{x:He,y:We,zoom:1/0,id:Be,parentId:-1,numPoints:Ge,properties:at}}function ie(He,We){var Be=He.geometry.coordinates,Ge=Be[0],at=Be[1];return{x:be(Ge),y:ge(at),zoom:1/0,index:We,parentId:-1}}function ue(He){return{type:"Feature",id:He.id,properties:me(He),geometry:{type:"Point",coordinates:[(Ge=He.x,360*(Ge-.5)),(We=He.y,Be=(180-360*We)*Math.PI/180,360*Math.atan(Math.exp(Be))/Math.PI-90)]}};var We,Be,Ge}function me(He){var We=He.numPoints,Be=We>=1e4?Math.round(We/1e3)+"k":We>=1e3?Math.round(We/100)/10+"k":We;return de(de({},He.properties),{cluster:!0,cluster_id:He.id,point_count:We,point_count_abbreviated:Be})}function be(He){return He/360+.5}function ge(He){var We=Math.sin(He*Math.PI/180),Be=.5-.25*Math.log((1+We)/(1-We))/Math.PI;return Be<0?0:Be>1?1:Be}function de(He,We){for(var Be in We)He[Be]=We[Be];return He}function ve(He){return He.x}function pe(He){return He.y}function _e(He,We,Be,Ge){for(var at,nt=Ge,Re=Be-We>>1,Fe=Be-We,rt=He[We],Ye=He[We+1],ct=He[Be],pt=He[Be+1],gt=We+3;gt<Be;gt+=3){var ut=Te(He[gt],He[gt+1],rt,Ye,ct,pt);if(ut>nt)at=gt,nt=ut;else if(ut===nt){var Mt=Math.abs(gt-Re);Mt<Fe&&(at=gt,Fe=Mt)}}nt>Ge&&(at-We>3&&_e(He,We,at,Ge),He[at+2]=nt,Be-at>3&&_e(He,at,Be,Ge))}function Te(He,We,Be,Ge,at,nt){var Re=at-Be,Fe=nt-Ge;if(Re!==0||Fe!==0){var rt=((He-Be)*Re+(We-Ge)*Fe)/(Re*Re+Fe*Fe);rt>1?(Be=at,Ge=nt):rt>0&&(Be+=Re*rt,Ge+=Fe*rt)}return(Re=He-Be)*Re+(Fe=We-Ge)*Fe}function le(He,We,Be,Ge){var at={id:He===void 0?null:He,type:We,geometry:Be,tags:Ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(nt){var Re=nt.geometry,Fe=nt.type;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")ae(nt,Re);else if(Fe==="Polygon"||Fe==="MultiLineString")for(var rt=0;rt<Re.length;rt++)ae(nt,Re[rt]);else if(Fe==="MultiPolygon")for(rt=0;rt<Re.length;rt++)for(var Ye=0;Ye<Re[rt].length;Ye++)ae(nt,Re[rt][Ye])}(at),at}function ae(He,We){for(var Be=0;Be<We.length;Be+=3)He.minX=Math.min(He.minX,We[Be]),He.minY=Math.min(He.minY,We[Be+1]),He.maxX=Math.max(He.maxX,We[Be]),He.maxY=Math.max(He.maxY,We[Be+1])}function he(He,We,Be,Ge){if(We.geometry){var at=We.geometry.coordinates,nt=We.geometry.type,Re=Math.pow(Be.tolerance/((1<<Be.maxZoom)*Be.extent),2),Fe=[],rt=We.id;if(Be.promoteId?rt=We.properties[Be.promoteId]:Be.generateId&&(rt=Ge||0),nt==="Point")Se(at,Fe);else if(nt==="MultiPoint")for(var Ye=0;Ye<at.length;Ye++)Se(at[Ye],Fe);else if(nt==="LineString")ke(at,Fe,Re,!1);else if(nt==="MultiLineString"){if(Be.lineMetrics){for(Ye=0;Ye<at.length;Ye++)Fe=[],ke(at[Ye],Fe,Re,!1),He.push(le(rt,"LineString",Fe,We.properties));return}Me(at,Fe,Re,!1)}else if(nt==="Polygon")Me(at,Fe,Re,!0);else{if(nt!=="MultiPolygon"){if(nt==="GeometryCollection"){for(Ye=0;Ye<We.geometry.geometries.length;Ye++)he(He,{id:rt,geometry:We.geometry.geometries[Ye],properties:We.properties},Be,Ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ye=0;Ye<at.length;Ye++){var ct=[];Me(at[Ye],ct,Re,!0),Fe.push(ct)}}He.push(le(rt,nt,Fe,We.properties))}}function Se(He,We){We.push(Ee(He[0])),We.push(De(He[1])),We.push(0)}function ke(He,We,Be,Ge){for(var at,nt,Re=0,Fe=0;Fe<He.length;Fe++){var rt=Ee(He[Fe][0]),Ye=De(He[Fe][1]);We.push(rt),We.push(Ye),We.push(0),Fe>0&&(Re+=Ge?(at*Ye-rt*nt)/2:Math.sqrt(Math.pow(rt-at,2)+Math.pow(Ye-nt,2))),at=rt,nt=Ye}var ct=We.length-3;We[2]=1,_e(We,0,ct,Be),We[ct+2]=1,We.size=Math.abs(Re),We.start=0,We.end=We.size}function Me(He,We,Be,Ge){for(var at=0;at<He.length;at++){var nt=[];ke(He[at],nt,Be,Ge),We.push(nt)}}function Ee(He){return He/360+.5}function De(He){var We=Math.sin(He*Math.PI/180),Be=.5-.25*Math.log((1+We)/(1-We))/Math.PI;return Be<0?0:Be>1?1:Be}function fe(He,We,Be,Ge,at,nt,Re,Fe){if(Ge/=We,nt>=(Be/=We)&&Re<Ge)return He;if(Re<Be||nt>=Ge)return null;for(var rt=[],Ye=0;Ye<He.length;Ye++){var ct=He[Ye],pt=ct.geometry,gt=ct.type,ut=at===0?ct.minX:ct.minY,Mt=at===0?ct.maxX:ct.maxY;if(ut>=Be&&Mt<Ge)rt.push(ct);else if(!(Mt<Be||ut>=Ge)){var xt=[];if(gt==="Point"||gt==="MultiPoint")xe(pt,xt,Be,Ge,at);else if(gt==="LineString")we(pt,xt,Be,Ge,at,!1,Fe.lineMetrics);else if(gt==="MultiLineString")ze(pt,xt,Be,Ge,at,!1);else if(gt==="Polygon")ze(pt,xt,Be,Ge,at,!0);else if(gt==="MultiPolygon")for(var mt=0;mt<pt.length;mt++){var Et=[];ze(pt[mt],Et,Be,Ge,at,!0),Et.length&&xt.push(Et)}if(xt.length){if(Fe.lineMetrics&&gt==="LineString"){for(mt=0;mt<xt.length;mt++)rt.push(le(ct.id,gt,xt[mt],ct.tags));continue}gt!=="LineString"&&gt!=="MultiLineString"||(xt.length===1?(gt="LineString",xt=xt[0]):gt="MultiLineString"),gt!=="Point"&&gt!=="MultiPoint"||(gt=xt.length===3?"Point":"MultiPoint"),rt.push(le(ct.id,gt,xt,ct.tags))}}}return rt.length?rt:null}function xe(He,We,Be,Ge,at){for(var nt=0;nt<He.length;nt+=3){var Re=He[nt+at];Re>=Be&&Re<=Ge&&(We.push(He[nt]),We.push(He[nt+1]),We.push(He[nt+2]))}}function we(He,We,Be,Ge,at,nt,Re){for(var Fe,rt,Ye=Oe(He),ct=at===0?Ue:Ve,pt=He.start,gt=0;gt<He.length-3;gt+=3){var ut=He[gt],Mt=He[gt+1],xt=He[gt+2],mt=He[gt+3],Et=He[gt+4],Lt=at===0?ut:Mt,zt=at===0?mt:Et,Wt=!1;Re&&(Fe=Math.sqrt(Math.pow(ut-mt,2)+Math.pow(Mt-Et,2))),Lt<Be?zt>Be&&(rt=ct(Ye,ut,Mt,mt,Et,Be),Re&&(Ye.start=pt+Fe*rt)):Lt>Ge?zt<Ge&&(rt=ct(Ye,ut,Mt,mt,Et,Ge),Re&&(Ye.start=pt+Fe*rt)):Pe(Ye,ut,Mt,xt),zt<Be&&Lt>=Be&&(rt=ct(Ye,ut,Mt,mt,Et,Be),Wt=!0),zt>Ge&&Lt<=Ge&&(rt=ct(Ye,ut,Mt,mt,Et,Ge),Wt=!0),!nt&&Wt&&(Re&&(Ye.end=pt+Fe*rt),We.push(Ye),Ye=Oe(He)),Re&&(pt+=Fe)}var rn=He.length-3;ut=He[rn],Mt=He[rn+1],xt=He[rn+2],(Lt=at===0?ut:Mt)>=Be&&Lt<=Ge&&Pe(Ye,ut,Mt,xt),rn=Ye.length-3,nt&&rn>=3&&(Ye[rn]!==Ye[0]||Ye[rn+1]!==Ye[1])&&Pe(Ye,Ye[0],Ye[1],Ye[2]),Ye.length&&We.push(Ye)}function Oe(He){var We=[];return We.size=He.size,We.start=He.start,We.end=He.end,We}function ze(He,We,Be,Ge,at,nt){for(var Re=0;Re<He.length;Re++)we(He[Re],We,Be,Ge,at,nt,!1)}function Pe(He,We,Be,Ge){He.push(We),He.push(Be),He.push(Ge)}function Ue(He,We,Be,Ge,at,nt){var Re=(nt-We)/(Ge-We);return He.push(nt),He.push(Be+(at-Be)*Re),He.push(1),Re}function Ve(He,We,Be,Ge,at,nt){var Re=(nt-Be)/(at-Be);return He.push(We+(Ge-We)*Re),He.push(nt),He.push(1),Re}function Ze(He,We){for(var Be=[],Ge=0;Ge<He.length;Ge++){var at,nt=He[Ge],Re=nt.type;if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")at=it(nt.geometry,We);else if(Re==="MultiLineString"||Re==="Polygon"){at=[];for(var Fe=0;Fe<nt.geometry.length;Fe++)at.push(it(nt.geometry[Fe],We))}else if(Re==="MultiPolygon")for(at=[],Fe=0;Fe<nt.geometry.length;Fe++){for(var rt=[],Ye=0;Ye<nt.geometry[Fe].length;Ye++)rt.push(it(nt.geometry[Fe][Ye],We));at.push(rt)}Be.push(le(nt.id,Re,at,nt.tags))}return Be}function it(He,We){var Be=[];Be.size=He.size,He.start!==void 0&&(Be.start=He.start,Be.end=He.end);for(var Ge=0;Ge<He.length;Ge+=3)Be.push(He[Ge]+We,He[Ge+1],He[Ge+2]);return Be}function tt(He,We){if(He.transformed)return He;var Be,Ge,at,nt=1<<He.z,Re=He.x,Fe=He.y;for(Be=0;Be<He.features.length;Be++){var rt=He.features[Be],Ye=rt.geometry,ct=rt.type;if(rt.geometry=[],ct===1)for(Ge=0;Ge<Ye.length;Ge+=2)rt.geometry.push(dt(Ye[Ge],Ye[Ge+1],We,nt,Re,Fe));else for(Ge=0;Ge<Ye.length;Ge++){var pt=[];for(at=0;at<Ye[Ge].length;at+=2)pt.push(dt(Ye[Ge][at],Ye[Ge][at+1],We,nt,Re,Fe));rt.geometry.push(pt)}}return He.transformed=!0,He}function dt(He,We,Be,Ge,at,nt){return[Math.round(Be*(He*Ge-at)),Math.round(Be*(We*Ge-nt))]}function yt(He,We,Be,Ge,at){for(var nt=We===at.maxZoom?0:at.tolerance/((1<<We)*at.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Be,y:Ge,z:We,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Fe=0;Fe<He.length;Fe++){Re.numFeatures++,vt(Re,He[Fe],nt,at);var rt=He[Fe].minX,Ye=He[Fe].minY,ct=He[Fe].maxX,pt=He[Fe].maxY;rt<Re.minX&&(Re.minX=rt),Ye<Re.minY&&(Re.minY=Ye),ct>Re.maxX&&(Re.maxX=ct),pt>Re.maxY&&(Re.maxY=pt)}return Re}function vt(He,We,Be,Ge){var at=We.geometry,nt=We.type,Re=[];if(nt==="Point"||nt==="MultiPoint")for(var Fe=0;Fe<at.length;Fe+=3)Re.push(at[Fe]),Re.push(at[Fe+1]),He.numPoints++,He.numSimplified++;else if(nt==="LineString")et(Re,at,He,Be,!1,!1);else if(nt==="MultiLineString"||nt==="Polygon")for(Fe=0;Fe<at.length;Fe++)et(Re,at[Fe],He,Be,nt==="Polygon",Fe===0);else if(nt==="MultiPolygon")for(var rt=0;rt<at.length;rt++){var Ye=at[rt];for(Fe=0;Fe<Ye.length;Fe++)et(Re,Ye[Fe],He,Be,!0,Fe===0)}if(Re.length){var ct=We.tags||null;if(nt==="LineString"&&Ge.lineMetrics){for(var pt in ct={},We.tags)ct[pt]=We.tags[pt];ct.mapbox_clip_start=at.start/at.size,ct.mapbox_clip_end=at.end/at.size}var gt={geometry:Re,type:nt==="Polygon"||nt==="MultiPolygon"?3:nt==="LineString"||nt==="MultiLineString"?2:1,tags:ct};We.id!==null&&(gt.id=We.id),He.features.push(gt)}}function et(He,We,Be,Ge,at,nt){var Re=Ge*Ge;if(Ge>0&&We.size<(at?Re:Ge))Be.numPoints+=We.length/3;else{for(var Fe=[],rt=0;rt<We.length;rt+=3)(Ge===0||We[rt+2]>Re)&&(Be.numSimplified++,Fe.push(We[rt]),Fe.push(We[rt+1])),Be.numPoints++;at&&function(Ye,ct){for(var pt=0,gt=0,ut=Ye.length,Mt=ut-2;gt<ut;Mt=gt,gt+=2)pt+=(Ye[gt]-Ye[Mt])*(Ye[gt+1]+Ye[Mt+1]);if(pt>0===ct)for(gt=0,ut=Ye.length;gt<ut/2;gt+=2){var xt=Ye[gt],mt=Ye[gt+1];Ye[gt]=Ye[ut-2-gt],Ye[gt+1]=Ye[ut-1-gt],Ye[ut-2-gt]=xt,Ye[ut-1-gt]=mt}}(Fe,nt),He.push(Fe)}}function Qe(He,We){var Be=(We=this.options=function(at,nt){for(var Re in nt)at[Re]=nt[Re];return at}(Object.create(this.options),We)).debug;if(Be&&console.time("preprocess data"),We.maxZoom<0||We.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(We.promoteId&&We.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ge=function(at,nt){var Re=[];if(at.type==="FeatureCollection")for(var Fe=0;Fe<at.features.length;Fe++)he(Re,at.features[Fe],nt,Fe);else at.type==="Feature"?he(Re,at,nt):he(Re,{geometry:at},nt);return Re}(He,We);this.tiles={},this.tileCoords=[],Be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",We.indexMaxZoom,We.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ge=function(at,nt){var Re=nt.buffer/nt.extent,Fe=at,rt=fe(at,1,-1-Re,Re,0,-1,2,nt),Ye=fe(at,1,1-Re,2+Re,0,-1,2,nt);return(rt||Ye)&&(Fe=fe(at,1,-Re,1+Re,0,-1,2,nt)||[],rt&&(Fe=Ze(rt,1).concat(Fe)),Ye&&(Fe=Fe.concat(Ze(Ye,-1)))),Fe}(Ge,We)).length&&this.splitTile(Ge,0,0,0),Be&&(Ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wt(He,We,Be){return 32*((1<<He)*Be+We)+He}function It(He,We){var Be=He.tileID.canonical;if(!this._geoJSONIndex)return We(null,null);var Ge=this._geoJSONIndex.getTile(Be.z,Be.x,Be.y);if(!Ge)return We(null,null);var at=new p(Ge.features),nt=f(at);nt.byteOffset===0&&nt.byteLength===nt.buffer.byteLength||(nt=new Uint8Array(nt)),We(null,{vectorTile:at,rawData:nt.buffer})}re.prototype.load=function(He){var We=this.options,Be=We.log,Ge=We.minZoom,at=We.maxZoom,nt=We.nodeSize;Be&&console.time("total time");var Re="prepare "+He.length+" points";Be&&console.time(Re),this.points=He;for(var Fe=[],rt=0;rt<He.length;rt++)He[rt].geometry&&Fe.push(ie(He[rt],rt));this.trees[at+1]=new Z(Fe,ve,pe,nt,Float32Array),Be&&console.timeEnd(Re);for(var Ye=at;Ye>=Ge;Ye--){var ct=+Date.now();Fe=this._cluster(Fe,Ye),this.trees[Ye]=new Z(Fe,ve,pe,nt,Float32Array),Be&&console.log("z%d: %d clusters in %dms",Ye,Fe.length,+Date.now()-ct)}return Be&&console.timeEnd("total time"),this},re.prototype.getClusters=function(He,We){var Be=((He[0]+180)%360+360)%360-180,Ge=Math.max(-90,Math.min(90,He[1])),at=He[2]===180?180:((He[2]+180)%360+360)%360-180,nt=Math.max(-90,Math.min(90,He[3]));if(He[2]-He[0]>=360)Be=-180,at=180;else if(Be>at){var Re=this.getClusters([Be,Ge,180,nt],We),Fe=this.getClusters([-180,Ge,at,nt],We);return Re.concat(Fe)}for(var rt=this.trees[this._limitZoom(We)],Ye=[],ct=0,pt=rt.range(be(Be),ge(nt),be(at),ge(Ge));ct<pt.length;ct+=1){var gt=pt[ct],ut=rt.points[gt];Ye.push(ut.numPoints?ue(ut):this.points[ut.index])}return Ye},re.prototype.getChildren=function(He){var We=this._getOriginId(He),Be=this._getOriginZoom(He),Ge="No cluster with the specified id.",at=this.trees[Be];if(!at)throw new Error(Ge);var nt=at.points[We];if(!nt)throw new Error(Ge);for(var Re=this.options.radius/(this.options.extent*Math.pow(2,Be-1)),Fe=[],rt=0,Ye=at.within(nt.x,nt.y,Re);rt<Ye.length;rt+=1){var ct=Ye[rt],pt=at.points[ct];pt.parentId===He&&Fe.push(pt.numPoints?ue(pt):this.points[pt.index])}if(Fe.length===0)throw new Error(Ge);return Fe},re.prototype.getLeaves=function(He,We,Be){We=We||10,Be=Be||0;var Ge=[];return this._appendLeaves(Ge,He,We,Be,0),Ge},re.prototype.getTile=function(He,We,Be){var Ge=this.trees[this._limitZoom(He)],at=Math.pow(2,He),nt=this.options,Re=nt.extent,Fe=nt.radius/Re,rt=(Be-Fe)/at,Ye=(Be+1+Fe)/at,ct={features:[]};return this._addTileFeatures(Ge.range((We-Fe)/at,rt,(We+1+Fe)/at,Ye),Ge.points,We,Be,at,ct),We===0&&this._addTileFeatures(Ge.range(1-Fe/at,rt,1,Ye),Ge.points,at,Be,at,ct),We===at-1&&this._addTileFeatures(Ge.range(0,rt,Fe/at,Ye),Ge.points,-1,Be,at,ct),ct.features.length?ct:null},re.prototype.getClusterExpansionZoom=function(He){for(var We=this._getOriginZoom(He)-1;We<=this.options.maxZoom;){var Be=this.getChildren(He);if(We++,Be.length!==1)break;He=Be[0].properties.cluster_id}return We},re.prototype._appendLeaves=function(He,We,Be,Ge,at){for(var nt=0,Re=this.getChildren(We);nt<Re.length;nt+=1){var Fe=Re[nt],rt=Fe.properties;if(rt&&rt.cluster?at+rt.point_count<=Ge?at+=rt.point_count:at=this._appendLeaves(He,rt.cluster_id,Be,Ge,at):at<Ge?at++:He.push(Fe),He.length===Be)break}return at},re.prototype._addTileFeatures=function(He,We,Be,Ge,at,nt){for(var Re=0,Fe=He;Re<Fe.length;Re+=1){var rt=We[Fe[Re]],Ye=rt.numPoints,ct={type:1,geometry:[[Math.round(this.options.extent*(rt.x*at-Be)),Math.round(this.options.extent*(rt.y*at-Ge))]],tags:Ye?me(rt):this.points[rt.index].properties},pt=void 0;Ye?pt=rt.id:this.options.generateId?pt=rt.index:this.points[rt.index].id&&(pt=this.points[rt.index].id),pt!==void 0&&(ct.id=pt),nt.features.push(ct)}},re.prototype._limitZoom=function(He){return Math.max(this.options.minZoom,Math.min(+He,this.options.maxZoom+1))},re.prototype._cluster=function(He,We){for(var Be=[],Ge=this.options,at=Ge.radius,nt=Ge.extent,Re=Ge.reduce,Fe=Ge.minPoints,rt=at/(nt*Math.pow(2,We)),Ye=0;Ye<He.length;Ye++){var ct=He[Ye];if(!(ct.zoom<=We)){ct.zoom=We;for(var pt=this.trees[We+1],gt=pt.within(ct.x,ct.y,rt),ut=ct.numPoints||1,Mt=ut,xt=0,mt=gt;xt<mt.length;xt+=1){var Et=mt[xt],Lt=pt.points[Et];Lt.zoom>We&&(Mt+=Lt.numPoints||1)}if(Mt>=Fe){for(var zt=ct.x*ut,Wt=ct.y*ut,rn=Re&&ut>1?this._map(ct,!0):null,Ut=(Ye<<5)+(We+1)+this.points.length,Vt=0,en=gt;Vt<en.length;Vt+=1){var Ln=en[Vt],An=pt.points[Ln];if(!(An.zoom<=We)){An.zoom=We;var hn=An.numPoints||1;zt+=An.x*hn,Wt+=An.y*hn,An.parentId=Ut,Re&&(rn||(rn=this._map(ct,!0)),Re(rn,this._map(An)))}}ct.parentId=Ut,Be.push(oe(zt/Mt,Wt/Mt,Ut,Mt,rn))}else if(Be.push(ct),Mt>1)for(var Xt=0,ln=gt;Xt<ln.length;Xt+=1){var nn=ln[Xt],cn=pt.points[nn];cn.zoom<=We||(cn.zoom=We,Be.push(cn))}}}return Be},re.prototype._getOriginId=function(He){return He-this.points.length>>5},re.prototype._getOriginZoom=function(He){return(He-this.points.length)%32},re.prototype._map=function(He,We){if(He.numPoints)return We?de({},He.properties):He.properties;var Be=this.points[He.index].properties,Ge=this.options.map(Be);return We&&Ge===Be?de({},Ge):Ge},Qe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qe.prototype.splitTile=function(He,We,Be,Ge,at,nt,Re){for(var Fe=[He,We,Be,Ge],rt=this.options,Ye=rt.debug;Fe.length;){Ge=Fe.pop(),Be=Fe.pop(),We=Fe.pop(),He=Fe.pop();var ct=1<<We,pt=wt(We,Be,Ge),gt=this.tiles[pt];if(!gt&&(Ye>1&&console.time("creation"),gt=this.tiles[pt]=yt(He,We,Be,Ge,rt),this.tileCoords.push({z:We,x:Be,y:Ge}),Ye)){Ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",We,Be,Ge,gt.numFeatures,gt.numPoints,gt.numSimplified),console.timeEnd("creation"));var ut="z"+We;this.stats[ut]=(this.stats[ut]||0)+1,this.total++}if(gt.source=He,at){if(We===rt.maxZoom||We===at)continue;var Mt=1<<at-We;if(Be!==Math.floor(nt/Mt)||Ge!==Math.floor(Re/Mt))continue}else if(We===rt.indexMaxZoom||gt.numPoints<=rt.indexMaxPoints)continue;if(gt.source=null,He.length!==0){Ye>1&&console.time("clipping");var xt,mt,Et,Lt,zt,Wt,rn=.5*rt.buffer/rt.extent,Ut=.5-rn,Vt=.5+rn,en=1+rn;xt=mt=Et=Lt=null,zt=fe(He,ct,Be-rn,Be+Vt,0,gt.minX,gt.maxX,rt),Wt=fe(He,ct,Be+Ut,Be+en,0,gt.minX,gt.maxX,rt),He=null,zt&&(xt=fe(zt,ct,Ge-rn,Ge+Vt,1,gt.minY,gt.maxY,rt),mt=fe(zt,ct,Ge+Ut,Ge+en,1,gt.minY,gt.maxY,rt),zt=null),Wt&&(Et=fe(Wt,ct,Ge-rn,Ge+Vt,1,gt.minY,gt.maxY,rt),Lt=fe(Wt,ct,Ge+Ut,Ge+en,1,gt.minY,gt.maxY,rt),Wt=null),Ye>1&&console.timeEnd("clipping"),Fe.push(xt||[],We+1,2*Be,2*Ge),Fe.push(mt||[],We+1,2*Be,2*Ge+1),Fe.push(Et||[],We+1,2*Be+1,2*Ge),Fe.push(Lt||[],We+1,2*Be+1,2*Ge+1)}}},Qe.prototype.getTile=function(He,We,Be){var Ge=this.options,at=Ge.extent,nt=Ge.debug;if(He<0||He>24)return null;var Re=1<<He,Fe=wt(He,We=(We%Re+Re)%Re,Be);if(this.tiles[Fe])return tt(this.tiles[Fe],at);nt>1&&console.log("drilling down to z%d-%d-%d",He,We,Be);for(var rt,Ye=He,ct=We,pt=Be;!rt&&Ye>0;)Ye--,ct=Math.floor(ct/2),pt=Math.floor(pt/2),rt=this.tiles[wt(Ye,ct,pt)];return rt&&rt.source?(nt>1&&console.log("found parent tile z%d-%d-%d",Ye,ct,pt),nt>1&&console.time("drilling down"),this.splitTile(rt.source,Ye,ct,pt,He,We,Be),nt>1&&console.timeEnd("drilling down"),this.tiles[Fe]?tt(this.tiles[Fe],at):null):null};var Dt=function(He){function We(Be,Ge,at,nt){He.call(this,Be,Ge,at,It),nt&&(this.loadGeoJSON=nt)}return He&&(We.__proto__=He),We.prototype=Object.create(He&&He.prototype),We.prototype.constructor=We,We.prototype.loadData=function(Be,Ge){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ge,this._pendingLoadDataParams=Be,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},We.prototype._loadData=function(){var Be=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ge=this._pendingCallback,at=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var nt=!!(at&&at.request&&at.request.collectResourceTiming)&&new o.RequestPerformance(at.request);this.loadGeoJSON(at,function(Re,Fe){if(Re||!Fe)return Ge(Re);if(typeof Fe!="object")return Ge(new Error("Input data given to '"+at.source+"' is not a valid GeoJSON object."));u(Fe,!0);try{if(at.filter){var rt=o.createExpression(at.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(rt.result==="error")throw new Error(rt.value.map(function(gt){return gt.key+": "+gt.message}).join(", "));var Ye=Fe.features.filter(function(gt){return rt.value.evaluate({zoom:0},gt)});Fe={type:"FeatureCollection",features:Ye}}Be._geoJSONIndex=at.cluster?new re(function(gt){var ut=gt.superclusterOptions,Mt=gt.clusterProperties;if(!Mt||!ut)return ut;for(var xt={},mt={},Et={accumulated:null,zoom:0},Lt={properties:null},zt=Object.keys(Mt),Wt=0,rn=zt;Wt<rn.length;Wt+=1){var Ut=rn[Wt],Vt=Mt[Ut],en=Vt[0],Ln=Vt[1],An=o.createExpression(Ln),hn=o.createExpression(typeof en=="string"?[en,["accumulated"],["get",Ut]]:en);xt[Ut]=An.value,mt[Ut]=hn.value}return ut.map=function(Xt){Lt.properties=Xt;for(var ln={},nn=0,cn=zt;nn<cn.length;nn+=1){var Tn=cn[nn];ln[Tn]=xt[Tn].evaluate(Et,Lt)}return ln},ut.reduce=function(Xt,ln){Lt.properties=ln;for(var nn=0,cn=zt;nn<cn.length;nn+=1){var Tn=cn[nn];Et.accumulated=Xt[Tn],Xt[Tn]=mt[Tn].evaluate(Et,Lt)}},ut}(at)).load(Fe.features):function(gt,ut){return new Qe(gt,ut)}(Fe,at.geojsonVtOptions)}catch(gt){return Ge(gt)}Be.loaded={};var ct={};if(nt){var pt=nt.finish();pt&&(ct.resourceTiming={},ct.resourceTiming[at.source]=JSON.parse(JSON.stringify(pt)))}Ge(null,ct)})}},We.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},We.prototype.reloadTile=function(Be,Ge){var at=this.loaded,nt=Be.uid;return at&&at[nt]?He.prototype.reloadTile.call(this,Be,Ge):this.loadTile(Be,Ge)},We.prototype.loadGeoJSON=function(Be,Ge){if(Be.request)o.getJSON(Be.request,Ge);else{if(typeof Be.data!="string")return Ge(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."));try{return Ge(null,JSON.parse(Be.data))}catch(at){return Ge(new Error("Input data given to '"+Be.source+"' is not a valid GeoJSON object."))}}},We.prototype.removeSource=function(Be,Ge){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ge()},We.prototype.getClusterExpansionZoom=function(Be,Ge){try{Ge(null,this._geoJSONIndex.getClusterExpansionZoom(Be.clusterId))}catch(at){Ge(at)}},We.prototype.getClusterChildren=function(Be,Ge){try{Ge(null,this._geoJSONIndex.getChildren(Be.clusterId))}catch(at){Ge(at)}},We.prototype.getClusterLeaves=function(Be,Ge){try{Ge(null,this._geoJSONIndex.getLeaves(Be.clusterId,Be.limit,Be.offset))}catch(at){Ge(at)}},We}(r),Ct=function(He){var We=this;this.self=He,this.actor=new o.Actor(He,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:r,geojson:Dt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Be,Ge){if(We.workerSourceTypes[Be])throw new Error('Worker source with name "'+Be+'" already registered.');We.workerSourceTypes[Be]=Ge},this.self.registerRTLTextPlugin=function(Be){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=Be.applyArabicShaping,o.plugin.processBidirectionalText=Be.processBidirectionalText,o.plugin.processStyledBidirectionalText=Be.processStyledBidirectionalText}};return Ct.prototype.setReferrer=function(He,We){this.referrer=We},Ct.prototype.setImages=function(He,We,Be){for(var Ge in this.availableImages[He]=We,this.workerSources[He]){var at=this.workerSources[He][Ge];for(var nt in at)at[nt].availableImages=We}Be()},Ct.prototype.setLayers=function(He,We,Be){this.getLayerIndex(He).replace(We),Be()},Ct.prototype.updateLayers=function(He,We,Be){this.getLayerIndex(He).update(We.layers,We.removedIds),Be()},Ct.prototype.loadTile=function(He,We,Be){this.getWorkerSource(He,We.type,We.source).loadTile(We,Be)},Ct.prototype.loadDEMTile=function(He,We,Be){this.getDEMWorkerSource(He,We.source).loadTile(We,Be)},Ct.prototype.reloadTile=function(He,We,Be){this.getWorkerSource(He,We.type,We.source).reloadTile(We,Be)},Ct.prototype.abortTile=function(He,We,Be){this.getWorkerSource(He,We.type,We.source).abortTile(We,Be)},Ct.prototype.removeTile=function(He,We,Be){this.getWorkerSource(He,We.type,We.source).removeTile(We,Be)},Ct.prototype.removeDEMTile=function(He,We){this.getDEMWorkerSource(He,We.source).removeTile(We)},Ct.prototype.removeSource=function(He,We,Be){if(this.workerSources[He]&&this.workerSources[He][We.type]&&this.workerSources[He][We.type][We.source]){var Ge=this.workerSources[He][We.type][We.source];delete this.workerSources[He][We.type][We.source],Ge.removeSource!==void 0?Ge.removeSource(We,Be):Be()}},Ct.prototype.loadWorkerSource=function(He,We,Be){try{this.self.importScripts(We.url),Be()}catch(Ge){Be(Ge.toString())}},Ct.prototype.syncRTLPluginState=function(He,We,Be){try{o.plugin.setState(We);var Ge=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Ge!=null){this.self.importScripts(Ge);var at=o.plugin.isParsed();Be(at?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ge),at)}}catch(nt){Be(nt.toString())}},Ct.prototype.getAvailableImages=function(He){var We=this.availableImages[He];return We||(We=[]),We},Ct.prototype.getLayerIndex=function(He){var We=this.layerIndexes[He];return We||(We=this.layerIndexes[He]=new h),We},Ct.prototype.getWorkerSource=function(He,We,Be){var Ge=this;if(this.workerSources[He]||(this.workerSources[He]={}),this.workerSources[He][We]||(this.workerSources[He][We]={}),!this.workerSources[He][We][Be]){var at={send:function(nt,Re,Fe){Ge.actor.send(nt,Re,Fe,He)}};this.workerSources[He][We][Be]=new this.workerSourceTypes[We](at,this.getLayerIndex(He),this.getAvailableImages(He))}return this.workerSources[He][We][Be]},Ct.prototype.getDEMWorkerSource=function(He,We){return this.demWorkerSources[He]||(this.demWorkerSources[He]={}),this.demWorkerSources[He][We]||(this.demWorkerSources[He][We]=new l),this.demWorkerSources[He][We]},Ct.prototype.enforceCacheSizeLimit=function(He,We){o.enforceCacheSizeLimit(We)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Ct(self)),Ct}),k(0,function(o){var T=o.createCommonjsModule(function(B){function G(q){return!H(q)}function H(q){return typeof window!="undefined"&&typeof document!="undefined"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ne,ce,ye=new Blob([""],{type:"text/javascript"}),Le=URL.createObjectURL(ye);try{ce=new Worker(Le),ne=!0}catch(Ie){ne=!1}return ce&&ce.terminate(),URL.revokeObjectURL(Le),ne}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ne=document.createElement("canvas");ne.width=ne.height=1;var ce=ne.getContext("2d");if(!ce)return!1;var ye=ce.getImageData(0,0,1,1);return ye&&ye.width===ne.width}()?(Q=q&&q.failIfMajorPerformanceCaveat,L[Q]===void 0&&(L[Q]=function(ne){var ce=function(Le){var Ie=document.createElement("canvas"),je=Object.create(G.webGLContextAttributes);return je.failIfMajorPerformanceCaveat=Le,Ie.probablySupportsContext?Ie.probablySupportsContext("webgl",je)||Ie.probablySupportsContext("experimental-webgl",je):Ie.supportsContext?Ie.supportsContext("webgl",je)||Ie.supportsContext("experimental-webgl",je):Ie.getContext("webgl",je)||Ie.getContext("experimental-webgl",je)}(ne);if(!ce)return!1;var ye=ce.createShader(ce.VERTEX_SHADER);return!(!ye||ce.isContextLost())&&(ce.shaderSource(ye,"void main() {}"),ce.compileShader(ye),ce.getShaderParameter(ye,ce.COMPILE_STATUS)===!0)}(Q)),L[Q]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Q}B.exports?B.exports=G:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=G,window.mapboxgl.notSupportedReason=H);var L={};G.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),b={create:function(B,G,H){var L=o.window.document.createElement(B);return G!==void 0&&(L.className=G),H&&H.appendChild(L),L},createNS:function(B,G){return o.window.document.createElementNS(B,G)}},h=o.window.document&&o.window.document.documentElement.style;function s(B){if(!h)return B[0];for(var G=0;G<B.length;G++)if(B[G]in h)return B[G];return B[0]}var t,i=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);b.disableDrag=function(){h&&i&&(t=h[i],h[i]="none")},b.enableDrag=function(){h&&i&&(h[i]=t)};var n=s(["transform","WebkitTransform"]);b.setTransform=function(B,G){B.style[n]=G};var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});o.window.addEventListener("test",a,a),o.window.removeEventListener("test",a,a)}catch(B){r=!1}b.addEventListener=function(B,G,H,L){L===void 0&&(L={}),"passive"in L&&r?B.addEventListener(G,H,L):B.addEventListener(G,H,L.capture)},b.removeEventListener=function(B,G,H,L){L===void 0&&(L={}),"passive"in L&&r?B.removeEventListener(G,H,L):B.removeEventListener(G,H,L.capture)};var l=function(B){B.preventDefault(),B.stopPropagation(),o.window.removeEventListener("click",l,!0)};function u(B){var G=B.userImage;return!!(G&&G.render&&G.render())&&(B.data.replace(new Uint8Array(G.data.buffer)),!0)}b.suppressClick=function(){o.window.addEventListener("click",l,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",l,!0)},0)},b.mousePos=function(B,G){var H=B.getBoundingClientRect();return new o.Point(G.clientX-H.left-B.clientLeft,G.clientY-H.top-B.clientTop)},b.touchPos=function(B,G){for(var H=B.getBoundingClientRect(),L=[],q=0;q<G.length;q++)L.push(new o.Point(G[q].clientX-H.left-B.clientLeft,G[q].clientY-H.top-B.clientTop));return L},b.mouseButton=function(B){return o.window.InstallTrigger!==void 0&&B.button===2&&B.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:B.button},b.remove=function(B){B.parentNode&&B.parentNode.removeChild(B)};var d=function(B){function G(){B.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.isLoaded=function(){return this.loaded},G.prototype.setLoaded=function(H){if(this.loaded!==H&&(this.loaded=H,H)){for(var L=0,q=this.requestors;L<q.length;L+=1){var Q=q[L],ne=Q.ids,ce=Q.callback;this._notify(ne,ce)}this.requestors=[]}},G.prototype.getImage=function(H){return this.images[H]},G.prototype.addImage=function(H,L){this._validate(H,L)&&(this.images[H]=L)},G.prototype._validate=function(H,L){var q=!0;return this._validateStretch(L.stretchX,L.data&&L.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchX" value'))),q=!1),this._validateStretch(L.stretchY,L.data&&L.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchY" value'))),q=!1),this._validateContent(L.content,L)||(this.fire(new o.ErrorEvent(new Error('Image "'+H+'" has invalid "content" value'))),q=!1),q},G.prototype._validateStretch=function(H,L){if(!H)return!0;for(var q=0,Q=0,ne=H;Q<ne.length;Q+=1){var ce=ne[Q];if(ce[0]<q||ce[1]<ce[0]||L<ce[1])return!1;q=ce[1]}return!0},G.prototype._validateContent=function(H,L){return!(H&&(H.length!==4||H[0]<0||L.data.width<H[0]||H[1]<0||L.data.height<H[1]||H[2]<0||L.data.width<H[2]||H[3]<0||L.data.height<H[3]||H[2]<H[0]||H[3]<H[1]))},G.prototype.updateImage=function(H,L){var q=this.images[H];L.version=q.version+1,this.images[H]=L,this.updatedImages[H]=!0},G.prototype.removeImage=function(H){var L=this.images[H];delete this.images[H],delete this.patterns[H],L.userImage&&L.userImage.onRemove&&L.userImage.onRemove()},G.prototype.listImages=function(){return Object.keys(this.images)},G.prototype.getImages=function(H,L){var q=!0;if(!this.isLoaded())for(var Q=0,ne=H;Q<ne.length;Q+=1){var ce=ne[Q];this.images[ce]||(q=!1)}this.isLoaded()||q?this._notify(H,L):this.requestors.push({ids:H,callback:L})},G.prototype._notify=function(H,L){for(var q={},Q=0,ne=H;Q<ne.length;Q+=1){var ce=ne[Q];this.images[ce]||this.fire(new o.Event("styleimagemissing",{id:ce}));var ye=this.images[ce];ye?q[ce]={data:ye.data.clone(),pixelRatio:ye.pixelRatio,sdf:ye.sdf,version:ye.version,stretchX:ye.stretchX,stretchY:ye.stretchY,content:ye.content,hasRenderCallback:Boolean(ye.userImage&&ye.userImage.render)}:o.warnOnce('Image "'+ce+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}L(null,q)},G.prototype.getPixelSize=function(){var H=this.atlasImage;return{width:H.width,height:H.height}},G.prototype.getPattern=function(H){var L=this.patterns[H],q=this.getImage(H);if(!q)return null;if(L&&L.position.version===q.version)return L.position;if(L)L.position.version=q.version;else{var Q={w:q.data.width+2,h:q.data.height+2,x:0,y:0},ne=new o.ImagePosition(Q,q);this.patterns[H]={bin:Q,position:ne}}return this._updatePatternAtlas(),this.patterns[H].position},G.prototype.bind=function(H){var L=H.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(H,this.atlasImage,L.RGBA),this.atlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE)},G.prototype._updatePatternAtlas=function(){var H=[];for(var L in this.patterns)H.push(this.patterns[L].bin);var q=o.potpack(H),Q=q.w,ne=q.h,ce=this.atlasImage;for(var ye in ce.resize({width:Q||1,height:ne||1}),this.patterns){var Le=this.patterns[ye].bin,Ie=Le.x+1,je=Le.y+1,qe=this.images[ye].data,$e=qe.width,lt=qe.height;o.RGBAImage.copy(qe,ce,{x:0,y:0},{x:Ie,y:je},{width:$e,height:lt}),o.RGBAImage.copy(qe,ce,{x:0,y:lt-1},{x:Ie,y:je-1},{width:$e,height:1}),o.RGBAImage.copy(qe,ce,{x:0,y:0},{x:Ie,y:je+lt},{width:$e,height:1}),o.RGBAImage.copy(qe,ce,{x:$e-1,y:0},{x:Ie-1,y:je},{width:1,height:lt}),o.RGBAImage.copy(qe,ce,{x:0,y:0},{x:Ie+$e,y:je},{width:1,height:lt})}this.dirty=!0},G.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},G.prototype.dispatchRenderCallbacks=function(H){for(var L=0,q=H;L<q.length;L+=1){var Q=q[L];if(!this.callbackDispatchedThisFrame[Q]){this.callbackDispatchedThisFrame[Q]=!0;var ne=this.images[Q];u(ne)&&this.updateImage(Q,ne)}}},G}(o.Evented),c=p,x=p,g=1e20;function p(B,G,H,L,q,Q){this.fontSize=B||24,this.buffer=G===void 0?3:G,this.cutoff=L||.25,this.fontFamily=q||"sans-serif",this.fontWeight=Q||"normal",this.radius=H||8;var ne=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ne,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ne*ne),this.gridInner=new Float64Array(ne*ne),this.f=new Float64Array(ne),this.d=new Float64Array(ne),this.z=new Float64Array(ne+1),this.v=new Int16Array(ne),this.middle=Math.round(ne/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function v(B,G,H,L,q,Q,ne){for(var ce=0;ce<G;ce++){for(var ye=0;ye<H;ye++)L[ye]=B[ye*G+ce];for(m(L,q,Q,ne,H),ye=0;ye<H;ye++)B[ye*G+ce]=q[ye]}for(ye=0;ye<H;ye++){for(ce=0;ce<G;ce++)L[ce]=B[ye*G+ce];for(m(L,q,Q,ne,G),ce=0;ce<G;ce++)B[ye*G+ce]=Math.sqrt(q[ce])}}function m(B,G,H,L,q){H[0]=0,L[0]=-g,L[1]=+g;for(var Q=1,ne=0;Q<q;Q++){for(var ce=(B[Q]+Q*Q-(B[H[ne]]+H[ne]*H[ne]))/(2*Q-2*H[ne]);ce<=L[ne];)ne--,ce=(B[Q]+Q*Q-(B[H[ne]]+H[ne]*H[ne]))/(2*Q-2*H[ne]);H[++ne]=Q,L[ne]=ce,L[ne+1]=+g}for(Q=0,ne=0;Q<q;Q++){for(;L[ne+1]<Q;)ne++;G[Q]=(Q-H[ne])*(Q-H[ne])+B[H[ne]]}}p.prototype.draw=function(B){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(B,this.buffer,this.middle);for(var G=this.ctx.getImageData(0,0,this.size,this.size),H=new Uint8ClampedArray(this.size*this.size),L=0;L<this.size*this.size;L++){var q=G.data[4*L+3]/255;this.gridOuter[L]=q===1?0:q===0?g:Math.pow(Math.max(0,.5-q),2),this.gridInner[L]=q===1?g:q===0?0:Math.pow(Math.max(0,q-.5),2)}for(v(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),v(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),L=0;L<this.size*this.size;L++){var Q=this.gridOuter[L]-this.gridInner[L];H[L]=Math.max(0,Math.min(255,Math.round(255-255*(Q/this.radius+this.cutoff))))}return H},c.default=x;var y=function(B,G){this.requestManager=B,this.localIdeographFontFamily=G,this.entries={}};y.prototype.setURL=function(B){this.url=B},y.prototype.getGlyphs=function(B,G){var H=this,L=[];for(var q in B)for(var Q=0,ne=B[q];Q<ne.length;Q+=1){var ce=ne[Q];L.push({stack:q,id:ce})}o.asyncAll(L,function(ye,Le){var Ie=ye.stack,je=ye.id,qe=H.entries[Ie];qe||(qe=H.entries[Ie]={glyphs:{},requests:{},ranges:{}});var $e=qe.glyphs[je];if($e===void 0){if($e=H._tinySDF(qe,Ie,je))return qe.glyphs[je]=$e,void Le(null,{stack:Ie,id:je,glyph:$e});var lt=Math.floor(je/256);if(256*lt>65535)Le(new Error("glyphs > 65535 not supported"));else if(qe.ranges[lt])Le(null,{stack:Ie,id:je,glyph:$e});else{var ft=qe.requests[lt];ft||(ft=qe.requests[lt]=[],y.loadGlyphRange(Ie,lt,H.url,H.requestManager,function(_t,St){if(St){for(var At in St)H._doesCharSupportLocalGlyph(+At)||(qe.glyphs[+At]=St[+At]);qe.ranges[lt]=!0}for(var Ft=0,Ot=ft;Ft<Ot.length;Ft+=1)(0,Ot[Ft])(_t,St);delete qe.requests[lt]})),ft.push(function(_t,St){_t?Le(_t):St&&Le(null,{stack:Ie,id:je,glyph:St[je]||null})})}}else Le(null,{stack:Ie,id:je,glyph:$e})},function(ye,Le){if(ye)G(ye);else if(Le){for(var Ie={},je=0,qe=Le;je<qe.length;je+=1){var $e=qe[je],lt=$e.stack,ft=$e.id,_t=$e.glyph;(Ie[lt]||(Ie[lt]={}))[ft]=_t&&{id:_t.id,bitmap:_t.bitmap.clone(),metrics:_t.metrics}}G(null,Ie)}})},y.prototype._doesCharSupportLocalGlyph=function(B){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](B)||o.isChar["Hangul Syllables"](B)||o.isChar.Hiragana(B)||o.isChar.Katakana(B))},y.prototype._tinySDF=function(B,G,H){var L=this.localIdeographFontFamily;if(L&&this._doesCharSupportLocalGlyph(H)){var q=B.tinySDF;if(!q){var Q="400";/bold/i.test(G)?Q="900":/medium/i.test(G)?Q="500":/light/i.test(G)&&(Q="200"),q=B.tinySDF=new y.TinySDF(24,3,8,.25,L,Q)}return{id:H,bitmap:new o.AlphaImage({width:30,height:30},q.draw(String.fromCharCode(H))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(B,G,H,L,q){var Q=256*G,ne=Q+255,ce=L.transformRequest(L.normalizeGlyphsURL(H).replace("{fontstack}",B).replace("{range}",Q+"-"+ne),o.ResourceType.Glyphs);o.getArrayBuffer(ce,function(ye,Le){if(ye)q(ye);else if(Le){for(var Ie={},je=0,qe=o.parseGlyphPBF(Le);je<qe.length;je+=1){var $e=qe[je];Ie[$e.id]=$e}q(null,Ie)}})},y.TinySDF=c;var _=function(){this.specification=o.styleSpec.light.position};_.prototype.possiblyEvaluate=function(B,G){return o.sphericalToCartesian(B.expression.evaluate(G))},_.prototype.interpolate=function(B,G,H){return{x:o.number(B.x,G.x,H),y:o.number(B.y,G.y,H),z:o.number(B.z,G.z,H)}};var f=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new _,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),S="-transition",w=function(B){function G(H){B.call(this),this._transitionable=new o.Transitionable(f),this.setLight(H),this._transitioning=this._transitionable.untransitioned()}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getLight=function(){return this._transitionable.serialize()},G.prototype.setLight=function(H,L){if(L===void 0&&(L={}),!this._validate(o.validateLight,H,L))for(var q in H){var Q=H[q];o.endsWith(q,S)?this._transitionable.setTransition(q.slice(0,-11),Q):this._transitionable.setValue(q,Q)}},G.prototype.updateTransitions=function(H){this._transitioning=this._transitionable.transitioned(H,this._transitioning)},G.prototype.hasTransition=function(){return this._transitioning.hasTransition()},G.prototype.recalculate=function(H){this.properties=this._transitioning.possiblyEvaluate(H)},G.prototype._validate=function(H,L,q){return(!q||q.validate!==!1)&&o.emitValidationErrors(this,H.call(o.validateStyle,o.extend({value:L,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},G}(o.Evented),E=function(B,G){this.width=B,this.height=G,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(B,G){var H=B.join(",")+String(G);return this.dashEntry[H]||(this.dashEntry[H]=this.addDash(B,G)),this.dashEntry[H]},E.prototype.getDashRanges=function(B,G,H){var L=[],q=B.length%2==1?-B[B.length-1]*H:0,Q=B[0]*H,ne=!0;L.push({left:q,right:Q,isDash:ne,zeroLength:B[0]===0});for(var ce=B[0],ye=1;ye<B.length;ye++){ne=!ne;var Le=B[ye];q=ce*H,Q=(ce+=Le)*H,L.push({left:q,right:Q,isDash:ne,zeroLength:Le===0})}return L},E.prototype.addRoundDash=function(B,G,H){for(var L=G/2,q=-H;q<=H;q++)for(var Q=this.nextRow+H+q,ne=this.width*Q,ce=0,ye=B[ce],Le=0;Le<this.width;Le++){Le/ye.right>1&&(ye=B[++ce]);var Ie=Math.abs(Le-ye.left),je=Math.abs(Le-ye.right),qe=Math.min(Ie,je),$e=void 0,lt=q/H*(L+1);if(ye.isDash){var ft=L-Math.abs(lt);$e=Math.sqrt(qe*qe+ft*ft)}else $e=L-Math.sqrt(qe*qe+lt*lt);this.data[ne+Le]=Math.max(0,Math.min(255,$e+128))}},E.prototype.addRegularDash=function(B){for(var G=B.length-1;G>=0;--G){var H=B[G],L=B[G+1];H.zeroLength?B.splice(G,1):L&&L.isDash===H.isDash&&(L.left=H.left,B.splice(G,1))}var q=B[0],Q=B[B.length-1];q.isDash===Q.isDash&&(q.left=Q.left-this.width,Q.right=q.right+this.width);for(var ne=this.width*this.nextRow,ce=0,ye=B[ce],Le=0;Le<this.width;Le++){Le/ye.right>1&&(ye=B[++ce]);var Ie=Math.abs(Le-ye.left),je=Math.abs(Le-ye.right),qe=Math.min(Ie,je),$e=ye.isDash?qe:-qe;this.data[ne+Le]=Math.max(0,Math.min(255,$e+128))}},E.prototype.addDash=function(B,G){var H=G?7:0,L=2*H+1;if(this.nextRow+L>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var q=0,Q=0;Q<B.length;Q++)q+=B[Q];if(q!==0){var ne=this.width/q,ce=this.getDashRanges(B,this.width,ne);G?this.addRoundDash(ce,ne,H):this.addRegularDash(ce)}var ye={y:(this.nextRow+H+.5)/this.height,height:2*H/this.height,width:q};return this.nextRow+=L,this.dirty=!0,ye},E.prototype.bind=function(B){var G=B.gl;this.texture?(G.bindTexture(G.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,G.texSubImage2D(G.TEXTURE_2D,0,0,0,this.width,this.height,G.ALPHA,G.UNSIGNED_BYTE,this.data))):(this.texture=G.createTexture(),G.bindTexture(G.TEXTURE_2D,this.texture),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),G.texImage2D(G.TEXTURE_2D,0,G.ALPHA,this.width,this.height,0,G.ALPHA,G.UNSIGNED_BYTE,this.data))};var P=function B(G,H){this.workerPool=G,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var L=this.workerPool.acquire(this.id),q=0;q<L.length;q++){var Q=L[q],ne=new B.Actor(Q,H,this.id);ne.name="Worker "+q,this.actors.push(ne)}};function C(B,G,H){var L=function(q,Q){if(q)return H(q);if(Q){var ne=o.pick(o.extend(Q,B),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Q.vector_layers&&(ne.vectorLayers=Q.vector_layers,ne.vectorLayerIds=ne.vectorLayers.map(function(ce){return ce.id})),ne.tiles=G.canonicalizeTileset(ne,B.url),H(null,ne)}};return B.url?o.getJSON(G.transformRequest(G.normalizeSourceURL(B.url),o.ResourceType.Source),L):o.browser.frame(function(){return L(null,B)})}P.prototype.broadcast=function(B,G,H){H=H||function(){},o.asyncAll(this.actors,function(L,q){L.send(B,G,q)},H)},P.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},P.prototype.remove=function(){this.actors.forEach(function(B){B.remove()}),this.actors=[],this.workerPool.release(this.id)},P.Actor=o.Actor;var O=function(B,G,H){this.bounds=o.LngLatBounds.convert(this.validateBounds(B)),this.minzoom=G||0,this.maxzoom=H||24};O.prototype.validateBounds=function(B){return Array.isArray(B)&&B.length===4?[Math.max(-180,B[0]),Math.max(-90,B[1]),Math.min(180,B[2]),Math.min(90,B[3])]:[-180,-90,180,90]},O.prototype.contains=function(B){var G=Math.pow(2,B.z),H=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*G),L=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*G),q=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*G),Q=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*G);return B.x>=H&&B.x<q&&B.y>=L&&B.y<Q};var R=function(B){function G(H,L,q,Q){if(B.call(this),this.id=H,this.dispatcher=q,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(L,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},L),this._collectResourceTiming=L.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Q)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(L,q){H._tileJSONRequest=null,H._loaded=!0,L?H.fire(new o.ErrorEvent(L)):q&&(o.extend(H,q),q.bounds&&(H.tileBounds=new O(q.bounds,H.minzoom,H.maxzoom)),o.postTurnstileEvent(q.tiles,H.map._requestManager._customAccessToken),o.postMapLoadEvent(q.tiles,H.map._getMapId(),H.map._requestManager._skuToken,H.map._requestManager._customAccessToken),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.setSourceProperty=function(H){this._tileJSONRequest&&this._tileJSONRequest.cancel(),H(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},G.prototype.setTiles=function(H){var L=this;return this.setSourceProperty(function(){L._options.tiles=H}),this},G.prototype.setUrl=function(H){var L=this;return this.setSourceProperty(function(){L.url=H,L._options.url=H}),this},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return o.extend({},this._options)},G.prototype.loadTile=function(H,L){var q=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme)),Q={request:this.map._requestManager.transformRequest(q,o.ResourceType.Tile),uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,tileSize:this.tileSize*H.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function ne(ce,ye){return delete H.request,H.aborted?L(null):ce&&ce.status!==404?L(ce):(ye&&ye.resourceTiming&&(H.resourceTiming=ye.resourceTiming),this.map._refreshExpiredTiles&&ye&&H.setExpiryData(ye),H.loadVectorData(ye,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),L(null),void(H.reloadCallback&&(this.loadTile(H,H.reloadCallback),H.reloadCallback=null)))}Q.request.collectResourceTiming=this._collectResourceTiming,H.actor&&H.state!=="expired"?H.state==="loading"?H.reloadCallback=L:H.request=H.actor.send("reloadTile",Q,ne.bind(this)):(H.actor=this.dispatcher.getActor(),H.request=H.actor.send("loadTile",Q,ne.bind(this)))},G.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.actor&&H.actor.send("abortTile",{uid:H.uid,type:this.type,source:this.id},void 0)},G.prototype.unloadTile=function(H){H.unloadVectorData(),H.actor&&H.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id},void 0)},G.prototype.hasTransition=function(){return!1},G}(o.Evented),j=function(B){function G(H,L,q,Q){B.call(this),this.id=H,this.dispatcher=q,this.setEventedParent(Q),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},L),o.extend(this,o.pick(L,["url","scheme","tileSize"]))}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,function(L,q){H._tileJSONRequest=null,H._loaded=!0,L?H.fire(new o.ErrorEvent(L)):q&&(o.extend(H,q),q.bounds&&(H.tileBounds=new O(q.bounds,H.minzoom,H.maxzoom)),o.postTurnstileEvent(q.tiles),o.postMapLoadEvent(q.tiles,H.map._getMapId(),H.map._requestManager._skuToken),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},G.prototype.loaded=function(){return this._loaded},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},G.prototype.serialize=function(){return o.extend({},this._options)},G.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},G.prototype.loadTile=function(H,L){var q=this,Q=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);H.request=o.getImage(this.map._requestManager.transformRequest(Q,o.ResourceType.Tile),function(ne,ce){if(delete H.request,H.aborted)H.state="unloaded",L(null);else if(ne)H.state="errored",L(ne);else if(ce){q.map._refreshExpiredTiles&&H.setExpiryData(ce),delete ce.cacheControl,delete ce.expires;var ye=q.map.painter.context,Le=ye.gl;H.texture=q.map.painter.getTileTexture(ce.width),H.texture?H.texture.update(ce,{useMipmap:!0}):(H.texture=new o.Texture(ye,ce,Le.RGBA,{useMipmap:!0}),H.texture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE,Le.LINEAR_MIPMAP_NEAREST),ye.extTextureFilterAnisotropic&&Le.texParameterf(Le.TEXTURE_2D,ye.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ye.extTextureFilterAnisotropicMax)),H.state="loaded",o.cacheEntryPossiblyAdded(q.dispatcher),L(null)}})},G.prototype.abortTile=function(H,L){H.request&&(H.request.cancel(),delete H.request),L()},G.prototype.unloadTile=function(H,L){H.texture&&this.map.painter.saveTileTexture(H.texture),L()},G.prototype.hasTransition=function(){return!1},G}(o.Evented),D=function(B){function G(H,L,q,Q){B.call(this,H,L,q,Q),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},L),this.encoding=L.encoding||"mapbox"}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},G.prototype.loadTile=function(H,L){var q=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Q(ne,ce){ne&&(H.state="errored",L(ne)),ce&&(H.dem=ce,H.needsHillshadePrepare=!0,H.state="loaded",L(null))}H.request=o.getImage(this.map._requestManager.transformRequest(q,o.ResourceType.Tile),function(ne,ce){if(delete H.request,H.aborted)H.state="unloaded",L(null);else if(ne)H.state="errored",L(ne);else if(ce){this.map._refreshExpiredTiles&&H.setExpiryData(ce),delete ce.cacheControl,delete ce.expires;var ye=o.window.ImageBitmap&&ce instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?ce:o.browser.getImageData(ce,1),Le={uid:H.uid,coord:H.tileID,source:this.id,rawImageData:ye,encoding:this.encoding};H.actor&&H.state!=="expired"||(H.actor=this.dispatcher.getActor(),H.actor.send("loadDEMTile",Le,Q.bind(this)))}}.bind(this)),H.neighboringTiles=this._getNeighboringTiles(H.tileID)},G.prototype._getNeighboringTiles=function(H){var L=H.canonical,q=Math.pow(2,L.z),Q=(L.x-1+q)%q,ne=L.x===0?H.wrap-1:H.wrap,ce=(L.x+1+q)%q,ye=L.x+1===q?H.wrap+1:H.wrap,Le={};return Le[new o.OverscaledTileID(H.overscaledZ,ne,L.z,Q,L.y).key]={backfilled:!1},Le[new o.OverscaledTileID(H.overscaledZ,ye,L.z,ce,L.y).key]={backfilled:!1},L.y>0&&(Le[new o.OverscaledTileID(H.overscaledZ,ne,L.z,Q,L.y-1).key]={backfilled:!1},Le[new o.OverscaledTileID(H.overscaledZ,H.wrap,L.z,L.x,L.y-1).key]={backfilled:!1},Le[new o.OverscaledTileID(H.overscaledZ,ye,L.z,ce,L.y-1).key]={backfilled:!1}),L.y+1<q&&(Le[new o.OverscaledTileID(H.overscaledZ,ne,L.z,Q,L.y+1).key]={backfilled:!1},Le[new o.OverscaledTileID(H.overscaledZ,H.wrap,L.z,L.x,L.y+1).key]={backfilled:!1},Le[new o.OverscaledTileID(H.overscaledZ,ye,L.z,ce,L.y+1).key]={backfilled:!1}),Le},G.prototype.unloadTile=function(H){H.demTexture&&this.map.painter.saveTileTexture(H.demTexture),H.fbo&&(H.fbo.destroy(),delete H.fbo),H.dem&&delete H.dem,delete H.neighboringTiles,H.state="unloaded",H.actor&&H.actor.send("removeDEMTile",{uid:H.uid,source:this.id})},G}(j),N=function(B){function G(H,L,q,Q){B.call(this),this.id=H,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=q.getActor(),this.setEventedParent(Q),this._data=L.data,this._options=o.extend({},L),this._collectResourceTiming=L.collectResourceTiming,this._resourceTiming=[],L.maxzoom!==void 0&&(this.maxzoom=L.maxzoom),L.type&&(this.type=L.type),L.attribution&&(this.attribution=L.attribution),this.promoteId=L.promoteId;var ne=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:L.cluster||!1,geojsonVtOptions:{buffer:(L.buffer!==void 0?L.buffer:128)*ne,tolerance:(L.tolerance!==void 0?L.tolerance:.375)*ne,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:L.lineMetrics||!1,generateId:L.generateId||!1},superclusterOptions:{maxZoom:L.clusterMaxZoom!==void 0?Math.min(L.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,L.clusterMinPoints||2),extent:o.EXTENT,radius:(L.clusterRadius||50)*ne,log:!1,generateId:L.generateId||!1},clusterProperties:L.clusterProperties,filter:L.filter},L.workerOptions)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(L){if(L)H.fire(new o.ErrorEvent(L));else{var q={dataType:"source",sourceDataType:"metadata"};H._collectResourceTiming&&H._resourceTiming&&H._resourceTiming.length>0&&(q.resourceTiming=H._resourceTiming,H._resourceTiming=[]),H.fire(new o.Event("data",q))}})},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.setData=function(H){var L=this;return this._data=H,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(q){if(q)L.fire(new o.ErrorEvent(q));else{var Q={dataType:"source",sourceDataType:"content"};L._collectResourceTiming&&L._resourceTiming&&L._resourceTiming.length>0&&(Q.resourceTiming=L._resourceTiming,L._resourceTiming=[]),L.fire(new o.Event("data",Q))}}),this},G.prototype.getClusterExpansionZoom=function(H,L){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:H,source:this.id},L),this},G.prototype.getClusterChildren=function(H,L){return this.actor.send("geojson.getClusterChildren",{clusterId:H,source:this.id},L),this},G.prototype.getClusterLeaves=function(H,L,q,Q){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:H,limit:L,offset:q},Q),this},G.prototype._updateWorkerData=function(H){var L=this;this._loaded=!1;var q=o.extend({},this.workerOptions),Q=this._data;typeof Q=="string"?(q.request=this.map._requestManager.transformRequest(o.browser.resolveURL(Q),o.ResourceType.Source),q.request.collectResourceTiming=this._collectResourceTiming):q.data=JSON.stringify(Q),this.actor.send(this.type+".loadData",q,function(ne,ce){L._removed||ce&&ce.abandoned||(L._loaded=!0,ce&&ce.resourceTiming&&ce.resourceTiming[L.id]&&(L._resourceTiming=ce.resourceTiming[L.id].slice(0)),L.actor.send(L.type+".coalesce",{source:q.source},null),H(ne))})},G.prototype.loaded=function(){return this._loaded},G.prototype.loadTile=function(H,L){var q=this,Q=H.actor?"reloadTile":"loadTile";H.actor=this.actor;var ne={type:this.type,uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};H.request=this.actor.send(Q,ne,function(ce,ye){return delete H.request,H.unloadVectorData(),H.aborted?L(null):ce?L(ce):(H.loadVectorData(ye,q.map.painter,Q==="reloadTile"),L(null))})},G.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.aborted=!0},G.prototype.unloadTile=function(H){H.unloadVectorData(),this.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id})},G.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},G.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},G.prototype.hasTransition=function(){return!1},G}(o.Evented),W=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),F=function(B){function G(H,L,q,Q){B.call(this),this.id=H,this.dispatcher=q,this.coordinates=L.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Q),this.options=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(H,L){var q=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(Q,ne){q._loaded=!0,Q?q.fire(new o.ErrorEvent(Q)):ne&&(q.image=ne,H&&(q.coordinates=H),L&&L(),q._finishLoading())})},G.prototype.loaded=function(){return this._loaded},G.prototype.updateImage=function(H){var L=this;return this.image&&H.url?(this.options.url=H.url,this.load(H.coordinates,function(){L.texture=null}),this):this},G.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},G.prototype.onAdd=function(H){this.map=H,this.load()},G.prototype.setCoordinates=function(H){var L=this;this.coordinates=H;var q=H.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(ne){for(var ce=1/0,ye=1/0,Le=-1/0,Ie=-1/0,je=0,qe=ne;je<qe.length;je+=1){var $e=qe[je];ce=Math.min(ce,$e.x),ye=Math.min(ye,$e.y),Le=Math.max(Le,$e.x),Ie=Math.max(Ie,$e.y)}var lt=Le-ce,ft=Ie-ye,_t=Math.max(lt,ft),St=Math.max(0,Math.floor(-Math.log(_t)/Math.LN2)),At=Math.pow(2,St);return new o.CanonicalTileID(St,Math.floor((ce+Le)/2*At),Math.floor((ye+Ie)/2*At))}(q),this.minzoom=this.maxzoom=this.tileID.z;var Q=q.map(function(ne){return L.tileID.getTilePoint(ne)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(Q[0].x,Q[0].y,0,0),this._boundsArray.emplaceBack(Q[1].x,Q[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(Q[3].x,Q[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(Q[2].x,Q[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},G.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var H=this.map.painter.context,L=H.gl;for(var q in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(H,this.image,L.RGBA),this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE)),this.tiles){var Q=this.tiles[q];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture)}}},G.prototype.loadTile=function(H,L){this.tileID&&this.tileID.equals(H.tileID.canonical)?(this.tiles[String(H.tileID.wrap)]=H,H.buckets={},L(null)):(H.state="errored",L(null))},G.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return!1},G}(o.Evented),U=function(B){function G(H,L,q,Q){B.call(this,H,L,q,Q),this.roundZoom=!0,this.type="video",this.options=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){var H=this;this._loaded=!1;var L=this.options;this.urls=[];for(var q=0,Q=L.urls;q<Q.length;q+=1){var ne=Q[q];this.urls.push(this.map._requestManager.transformRequest(ne,o.ResourceType.Source).url)}o.getVideo(this.urls,function(ce,ye){H._loaded=!0,ce?H.fire(new o.ErrorEvent(ce)):ye&&(H.video=ye,H.video.loop=!0,H.video.addEventListener("playing",function(){H.map.triggerRepaint()}),H.map&&H.video.play(),H._finishLoading())})},G.prototype.pause=function(){this.video&&this.video.pause()},G.prototype.play=function(){this.video&&this.video.play()},G.prototype.seek=function(H){if(this.video){var L=this.video.seekable;H<L.start(0)||H>L.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+L.start(0)+" and "+L.end(0)+"-second mark."))):this.video.currentTime=H}},G.prototype.getVideo=function(){return this.video},G.prototype.onAdd=function(H){this.map||(this.map=H,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},G.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var H=this.map.painter.context,L=H.gl;for(var q in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE),L.texSubImage2D(L.TEXTURE_2D,0,0,0,L.RGBA,L.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(H,this.video,L.RGBA),this.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE)),this.tiles){var Q=this.tiles[q];Q.state!=="loaded"&&(Q.state="loaded",Q.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this.video&&!this.video.paused},G}(F),V=function(B){function G(H,L,q,Q){B.call(this,H,L,q,Q),L.coordinates?Array.isArray(L.coordinates)&&L.coordinates.length===4&&!L.coordinates.some(function(ne){return!Array.isArray(ne)||ne.length!==2||ne.some(function(ce){return typeof ce!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'missing required property "coordinates"'))),L.animate&&typeof L.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'optional "animate" property must be a boolean value'))),L.canvas?typeof L.canvas=="string"||L.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+H,null,'missing required property "canvas"'))),this.options=L,this.animate=L.animate===void 0||L.animate}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},G.prototype.getCanvas=function(){return this.canvas},G.prototype.onAdd=function(H){this.map=H,this.load(),this.canvas&&this.animate&&this.play()},G.prototype.onRemove=function(){this.pause()},G.prototype.prepare=function(){var H=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,H=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,H=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var L=this.map.painter.context,q=L.gl;for(var Q in this.boundsBuffer||(this.boundsBuffer=L.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(H||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(L,this.canvas,q.RGBA,{premultiply:!0}),this.tiles){var ne=this.tiles[Q];ne.state!=="loaded"&&(ne.state="loaded",ne.texture=this.texture)}}},G.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},G.prototype.hasTransition=function(){return this._playing},G.prototype._hasInvalidDimensions=function(){for(var H=0,L=[this.canvas.width,this.canvas.height];H<L.length;H+=1){var q=L[H];if(isNaN(q)||q<=0)return!0}return!1},G}(F),te={vector:R,raster:j,"raster-dem":D,geojson:N,video:U,image:F,canvas:V};function J(B,G){var H=o.identity([]);return o.translate(H,H,[1,1,0]),o.scale(H,H,[.5*B.width,.5*B.height,1]),o.multiply(H,H,B.calculatePosMatrix(G.toUnwrapped()))}function K(B,G,H,L,q,Q){var ne=function(ft,_t,St){if(ft)for(var At=0,Ft=ft;At<Ft.length;At+=1){var Ot=_t[Ft[At]];if(Ot&&Ot.source===St&&Ot.type==="fill-extrusion")return!0}else for(var Zt in _t){var Ht=_t[Zt];if(Ht.source===St&&Ht.type==="fill-extrusion")return!0}return!1}(q&&q.layers,G,B.id),ce=Q.maxPitchScaleFactor(),ye=B.tilesIn(L,ce,ne);ye.sort(X);for(var Le=[],Ie=0,je=ye;Ie<je.length;Ie+=1){var qe=je[Ie];Le.push({wrappedTileID:qe.tileID.wrapped().key,queryResults:qe.tile.queryRenderedFeatures(G,H,B._state,qe.queryGeometry,qe.cameraQueryGeometry,qe.scale,q,Q,ce,J(B.transform,qe.tileID))})}var $e=function(ft){for(var _t={},St={},At=0,Ft=ft;At<Ft.length;At+=1){var Ot=Ft[At],Zt=Ot.queryResults,Ht=Ot.wrappedTileID,Nt=St[Ht]=St[Ht]||{};for(var gn in Zt)for(var yn=Zt[gn],Cn=Nt[gn]=Nt[gn]||{},Dn=_t[gn]=_t[gn]||[],Wn=0,sr=yn;Wn<sr.length;Wn+=1){var mr=sr[Wn];Cn[mr.featureIndex]||(Cn[mr.featureIndex]=!0,Dn.push(mr))}}return _t}(Le);for(var lt in $e)$e[lt].forEach(function(ft){var _t=ft.feature,St=B.getFeatureState(_t.layer["source-layer"],_t.id);_t.source=_t.layer.source,_t.layer["source-layer"]&&(_t.sourceLayer=_t.layer["source-layer"]),_t.state=St});return $e}function X(B,G){var H=B.tileID,L=G.tileID;return H.overscaledZ-L.overscaledZ||H.canonical.y-L.canonical.y||H.wrap-L.wrap||H.canonical.x-L.canonical.x}var Z=function(B,G){this.max=B,this.onRemove=G,this.reset()};Z.prototype.reset=function(){for(var B in this.data)for(var G=0,H=this.data[B];G<H.length;G+=1){var L=H[G];L.timeout&&clearTimeout(L.timeout),this.onRemove(L.value)}return this.data={},this.order=[],this},Z.prototype.add=function(B,G,H){var L=this,q=B.wrapped().key;this.data[q]===void 0&&(this.data[q]=[]);var Q={value:G,timeout:void 0};if(H!==void 0&&(Q.timeout=setTimeout(function(){L.remove(B,Q)},H)),this.data[q].push(Q),this.order.push(q),this.order.length>this.max){var ne=this._getAndRemoveByKey(this.order[0]);ne&&this.onRemove(ne)}return this},Z.prototype.has=function(B){return B.wrapped().key in this.data},Z.prototype.getAndRemove=function(B){return this.has(B)?this._getAndRemoveByKey(B.wrapped().key):null},Z.prototype._getAndRemoveByKey=function(B){var G=this.data[B].shift();return G.timeout&&clearTimeout(G.timeout),this.data[B].length===0&&delete this.data[B],this.order.splice(this.order.indexOf(B),1),G.value},Z.prototype.getByKey=function(B){var G=this.data[B];return G?G[0].value:null},Z.prototype.get=function(B){return this.has(B)?this.data[B.wrapped().key][0].value:null},Z.prototype.remove=function(B,G){if(!this.has(B))return this;var H=B.wrapped().key,L=G===void 0?0:this.data[H].indexOf(G),q=this.data[H][L];return this.data[H].splice(L,1),q.timeout&&clearTimeout(q.timeout),this.data[H].length===0&&delete this.data[H],this.onRemove(q.value),this.order.splice(this.order.indexOf(H),1),this},Z.prototype.setMaxSize=function(B){for(this.max=B;this.order.length>this.max;){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},Z.prototype.filter=function(B){var G=[];for(var H in this.data)for(var L=0,q=this.data[H];L<q.length;L+=1){var Q=q[L];B(Q.value)||G.push(Q)}for(var ne=0,ce=G;ne<ce.length;ne+=1){var ye=ce[ne];this.remove(ye.value.tileID,ye)}};var $=function(B,G,H){this.context=B;var L=B.gl;this.buffer=L.createBuffer(),this.dynamicDraw=Boolean(H),this.context.unbindVAO(),B.bindElementBuffer.set(this.buffer),L.bufferData(L.ELEMENT_ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};$.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},$.prototype.updateData=function(B){var G=this.context.gl;this.context.unbindVAO(),this.bind(),G.bufferSubData(G.ELEMENT_ARRAY_BUFFER,0,B.arrayBuffer)},$.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var re={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},oe=function(B,G,H,L){this.length=G.length,this.attributes=H,this.itemSize=G.bytesPerElement,this.dynamicDraw=L,this.context=B;var q=B.gl;this.buffer=q.createBuffer(),B.bindVertexBuffer.set(this.buffer),q.bufferData(q.ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?q.DYNAMIC_DRAW:q.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};oe.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},oe.prototype.updateData=function(B){var G=this.context.gl;this.bind(),G.bufferSubData(G.ARRAY_BUFFER,0,B.arrayBuffer)},oe.prototype.enableAttributes=function(B,G){for(var H=0;H<this.attributes.length;H++){var L=this.attributes[H],q=G.attributes[L.name];q!==void 0&&B.enableVertexAttribArray(q)}},oe.prototype.setVertexAttribPointers=function(B,G,H){for(var L=0;L<this.attributes.length;L++){var q=this.attributes[L],Q=G.attributes[q.name];Q!==void 0&&B.vertexAttribPointer(Q,q.components,B[re[q.type]],!1,this.itemSize,q.offset+this.itemSize*(H||0))}},oe.prototype.destroy=function(){var B=this.context.gl;this.buffer&&(B.deleteBuffer(this.buffer),delete this.buffer)};var ie=function(B){this.gl=B.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ie.prototype.get=function(){return this.current},ie.prototype.set=function(B){},ie.prototype.getDefault=function(){return this.default},ie.prototype.setDefault=function(){this.set(this.default)};var ue=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return o.Color.transparent},G.prototype.set=function(H){var L=this.current;(H.r!==L.r||H.g!==L.g||H.b!==L.b||H.a!==L.a||this.dirty)&&(this.gl.clearColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},G}(ie),me=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 1},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearDepth(H),this.current=H,this.dirty=!1)},G}(ie),be=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearStencil(H),this.current=H,this.dirty=!1)},G}(ie),ge=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[!0,!0,!0,!0]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||H[2]!==L[2]||H[3]!==L[3]||this.dirty)&&(this.gl.colorMask(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},G}(ie),de=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthMask(H),this.current=H,this.dirty=!1)},G}(ie),ve=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 255},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.stencilMask(H),this.current=H,this.dirty=!1)},G}(ie),pe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},G.prototype.set=function(H){var L=this.current;(H.func!==L.func||H.ref!==L.ref||H.mask!==L.mask||this.dirty)&&(this.gl.stencilFunc(H.func,H.ref,H.mask),this.current=H,this.dirty=!1)},G}(ie),_e=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[H.KEEP,H.KEEP,H.KEEP]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||H[2]!==L[2]||this.dirty)&&(this.gl.stencilOp(H[0],H[1],H[2]),this.current=H,this.dirty=!1)},G}(ie),Te=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;H?L.enable(L.STENCIL_TEST):L.disable(L.STENCIL_TEST),this.current=H,this.dirty=!1}},G}(ie),le=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return[0,1]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||this.dirty)&&(this.gl.depthRange(H[0],H[1]),this.current=H,this.dirty=!1)},G}(ie),ae=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;H?L.enable(L.DEPTH_TEST):L.disable(L.DEPTH_TEST),this.current=H,this.dirty=!1}},G}(ie),he=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.LESS},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthFunc(H),this.current=H,this.dirty=!1)},G}(ie),Se=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;H?L.enable(L.BLEND):L.disable(L.BLEND),this.current=H,this.dirty=!1}},G}(ie),ke=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[H.ONE,H.ZERO]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||this.dirty)&&(this.gl.blendFunc(H[0],H[1]),this.current=H,this.dirty=!1)},G}(ie),Me=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return o.Color.transparent},G.prototype.set=function(H){var L=this.current;(H.r!==L.r||H.g!==L.g||H.b!==L.b||H.a!==L.a||this.dirty)&&(this.gl.blendColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},G}(ie),Ee=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.FUNC_ADD},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.blendEquation(H),this.current=H,this.dirty=!1)},G}(ie),De=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;H?L.enable(L.CULL_FACE):L.disable(L.CULL_FACE),this.current=H,this.dirty=!1}},G}(ie),fe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.BACK},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.cullFace(H),this.current=H,this.dirty=!1)},G}(ie),xe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.CCW},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.frontFace(H),this.current=H,this.dirty=!1)},G}(ie),we=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.useProgram(H),this.current=H,this.dirty=!1)},G}(ie),Oe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return this.gl.TEXTURE0},G.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.activeTexture(H),this.current=H,this.dirty=!1)},G}(ie),ze=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){var H=this.gl;return[0,0,H.drawingBufferWidth,H.drawingBufferHeight]},G.prototype.set=function(H){var L=this.current;(H[0]!==L[0]||H[1]!==L[1]||H[2]!==L[2]||H[3]!==L[3]||this.dirty)&&(this.gl.viewport(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},G}(ie),Pe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.bindFramebuffer(L.FRAMEBUFFER,H),this.current=H,this.dirty=!1}},G}(ie),Ue=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.bindRenderbuffer(L.RENDERBUFFER,H),this.current=H,this.dirty=!1}},G}(ie),Ve=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.bindTexture(L.TEXTURE_2D,H),this.current=H,this.dirty=!1}},G}(ie),Ze=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.bindBuffer(L.ARRAY_BUFFER,H),this.current=H,this.dirty=!1}},G}(ie),it=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){var L=this.gl;L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,H),this.current=H,this.dirty=!1},G}(ie),tt=function(B){function G(H){B.call(this,H),this.vao=H.extVertexArrayObject}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G.prototype.set=function(H){this.vao&&(H!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(H),this.current=H,this.dirty=!1)},G}(ie),dt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return 4},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_ALIGNMENT,H),this.current=H,this.dirty=!1}},G}(ie),yt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H),this.current=H,this.dirty=!1}},G}(ie),vt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return!1},G.prototype.set=function(H){if(H!==this.current||this.dirty){var L=this.gl;L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,H),this.current=H,this.dirty=!1}},G}(ie),et=function(B){function G(H,L){B.call(this,H),this.context=H,this.parent=L}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getDefault=function(){return null},G}(ie),Qe=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.setDirty=function(){this.dirty=!0},G.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var L=this.gl;L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,H,0),this.current=H,this.dirty=!1}},G}(et),wt=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var L=this.gl;L.framebufferRenderbuffer(L.FRAMEBUFFER,L.DEPTH_ATTACHMENT,L.RENDERBUFFER,H),this.current=H,this.dirty=!1}},G}(et),It=function(B,G,H,L){this.context=B,this.width=G,this.height=H;var q=B.gl,Q=this.framebuffer=q.createFramebuffer();this.colorAttachment=new Qe(B,Q),L&&(this.depthAttachment=new wt(B,Q))};It.prototype.destroy=function(){var B=this.context.gl,G=this.colorAttachment.get();if(G&&B.deleteTexture(G),this.depthAttachment){var H=this.depthAttachment.get();H&&B.deleteRenderbuffer(H)}B.deleteFramebuffer(this.framebuffer)};var Dt=function(B,G,H){this.func=B,this.mask=G,this.range=H};Dt.ReadOnly=!1,Dt.ReadWrite=!0,Dt.disabled=new Dt(519,Dt.ReadOnly,[0,1]);var Ct=7680,He=function(B,G,H,L,q,Q){this.test=B,this.ref=G,this.mask=H,this.fail=L,this.depthFail=q,this.pass=Q};He.disabled=new He({func:519,mask:0},0,0,Ct,Ct,Ct);var We=function(B,G,H){this.blendFunction=B,this.blendColor=G,this.mask=H};We.Replace=[1,0],We.disabled=new We(We.Replace,o.Color.transparent,[!1,!1,!1,!1]),We.unblended=new We(We.Replace,o.Color.transparent,[!0,!0,!0,!0]),We.alphaBlended=new We([1,771],o.Color.transparent,[!0,!0,!0,!0]);var Be=function(B,G,H){this.enable=B,this.mode=G,this.frontFace=H};Be.disabled=new Be(!1,1029,2305),Be.backCCW=new Be(!0,1029,2305);var Ge=function(B){this.gl=B,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ue(this),this.clearDepth=new me(this),this.clearStencil=new be(this),this.colorMask=new ge(this),this.depthMask=new de(this),this.stencilMask=new ve(this),this.stencilFunc=new pe(this),this.stencilOp=new _e(this),this.stencilTest=new Te(this),this.depthRange=new le(this),this.depthTest=new ae(this),this.depthFunc=new he(this),this.blend=new Se(this),this.blendFunc=new ke(this),this.blendColor=new Me(this),this.blendEquation=new Ee(this),this.cullFace=new De(this),this.cullFaceSide=new fe(this),this.frontFace=new xe(this),this.program=new we(this),this.activeTexture=new Oe(this),this.viewport=new ze(this),this.bindFramebuffer=new Pe(this),this.bindRenderbuffer=new Ue(this),this.bindTexture=new Ve(this),this.bindVertexBuffer=new Ze(this),this.bindElementBuffer=new it(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new tt(this),this.pixelStoreUnpack=new dt(this),this.pixelStoreUnpackPremultiplyAlpha=new yt(this),this.pixelStoreUnpackFlipY=new vt(this),this.extTextureFilterAnisotropic=B.getExtension("EXT_texture_filter_anisotropic")||B.getExtension("MOZ_EXT_texture_filter_anisotropic")||B.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=B.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=B.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(B.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=B.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=B.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=B.getParameter(B.MAX_TEXTURE_SIZE)};Ge.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ge.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ge.prototype.createIndexBuffer=function(B,G){return new $(this,B,G)},Ge.prototype.createVertexBuffer=function(B,G,H){return new oe(this,B,G,H)},Ge.prototype.createRenderbuffer=function(B,G,H){var L=this.gl,q=L.createRenderbuffer();return this.bindRenderbuffer.set(q),L.renderbufferStorage(L.RENDERBUFFER,B,G,H),this.bindRenderbuffer.set(null),q},Ge.prototype.createFramebuffer=function(B,G,H){return new It(this,B,G,H)},Ge.prototype.clear=function(B){var G=B.color,H=B.depth,L=this.gl,q=0;G&&(q|=L.COLOR_BUFFER_BIT,this.clearColor.set(G),this.colorMask.set([!0,!0,!0,!0])),H!==void 0&&(q|=L.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(H),this.depthMask.set(!0)),L.clear(q)},Ge.prototype.setCullFace=function(B){B.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(B.mode),this.frontFace.set(B.frontFace))},Ge.prototype.setDepthMode=function(B){B.func!==this.gl.ALWAYS||B.mask?(this.depthTest.set(!0),this.depthFunc.set(B.func),this.depthMask.set(B.mask),this.depthRange.set(B.range)):this.depthTest.set(!1)},Ge.prototype.setStencilMode=function(B){B.test.func!==this.gl.ALWAYS||B.mask?(this.stencilTest.set(!0),this.stencilMask.set(B.mask),this.stencilOp.set([B.fail,B.depthFail,B.pass]),this.stencilFunc.set({func:B.test.func,ref:B.ref,mask:B.test.mask})):this.stencilTest.set(!1)},Ge.prototype.setColorMode=function(B){o.deepEqual(B.blendFunction,We.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(B.blendFunction),this.blendColor.set(B.blendColor)),this.colorMask.set(B.mask)},Ge.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var at=function(B){function G(H,L,q){var Q=this;B.call(this),this.id=H,this.dispatcher=q,this.on("data",function(ne){ne.dataType==="source"&&ne.sourceDataType==="metadata"&&(Q._sourceLoaded=!0),Q._sourceLoaded&&!Q._paused&&ne.dataType==="source"&&ne.sourceDataType==="content"&&(Q.reload(),Q.transform&&Q.update(Q.transform))}),this.on("error",function(){Q._sourceErrored=!0}),this._source=function(ne,ce,ye,Le){var Ie=new te[ce.type](ne,ce,ye,Le);if(Ie.id!==ne)throw new Error("Expected Source id to be "+ne+" instead of "+Ie.id);return o.bindAll(["load","abort","unload","serialize","prepare"],Ie),Ie}(H,L,q,this),this._tiles={},this._cache=new Z(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(H){this.map=H,this._maxTileCacheSize=H?H._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(H)},G.prototype.onRemove=function(H){this._source&&this._source.onRemove&&this._source.onRemove(H)},G.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var H in this._tiles){var L=this._tiles[H];if(L.state!=="loaded"&&L.state!=="errored")return!1}return!0},G.prototype.getSource=function(){return this._source},G.prototype.pause=function(){this._paused=!0},G.prototype.resume=function(){if(this._paused){var H=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,H&&this.reload(),this.transform&&this.update(this.transform)}},G.prototype._loadTile=function(H,L){return this._source.loadTile(H,L)},G.prototype._unloadTile=function(H){if(this._source.unloadTile)return this._source.unloadTile(H,function(){})},G.prototype._abortTile=function(H){if(this._source.abortTile)return this._source.abortTile(H,function(){})},G.prototype.serialize=function(){return this._source.serialize()},G.prototype.prepare=function(H){for(var L in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var q=this._tiles[L];q.upload(H),q.prepare(this.map.style.imageManager)}},G.prototype.getIds=function(){return o.values(this._tiles).map(function(H){return H.tileID}).sort(nt).map(function(H){return H.key})},G.prototype.getRenderableIds=function(H){var L=this,q=[];for(var Q in this._tiles)this._isIdRenderable(Q,H)&&q.push(this._tiles[Q]);return H?q.sort(function(ne,ce){var ye=ne.tileID,Le=ce.tileID,Ie=new o.Point(ye.canonical.x,ye.canonical.y)._rotate(L.transform.angle),je=new o.Point(Le.canonical.x,Le.canonical.y)._rotate(L.transform.angle);return ye.overscaledZ-Le.overscaledZ||je.y-Ie.y||je.x-Ie.x}).map(function(ne){return ne.tileID.key}):q.map(function(ne){return ne.tileID}).sort(nt).map(function(ne){return ne.key})},G.prototype.hasRenderableParent=function(H){var L=this.findLoadedParent(H,0);return!!L&&this._isIdRenderable(L.tileID.key)},G.prototype._isIdRenderable=function(H,L){return this._tiles[H]&&this._tiles[H].hasData()&&!this._coveredTiles[H]&&(L||!this._tiles[H].holdingForFade())},G.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var H in this._cache.reset(),this._tiles)this._tiles[H].state!=="errored"&&this._reloadTile(H,"reloading")},G.prototype._reloadTile=function(H,L){var q=this._tiles[H];q&&(q.state!=="loading"&&(q.state=L),this._loadTile(q,this._tileLoaded.bind(this,q,H,L)))},G.prototype._tileLoaded=function(H,L,q,Q){if(Q)return H.state="errored",void(Q.status!==404?this._source.fire(new o.ErrorEvent(Q,{tile:H})):this.update(this.transform));H.timeAdded=o.browser.now(),q==="expired"&&(H.refreshedUponExpiration=!0),this._setTileReloadTimer(L,H),this.getSource().type==="raster-dem"&&H.dem&&this._backfillDEM(H),this._state.initializeTileState(H,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:H,coord:H.tileID}))},G.prototype._backfillDEM=function(H){for(var L=this.getRenderableIds(),q=0;q<L.length;q++){var Q=L[q];if(H.neighboringTiles&&H.neighboringTiles[Q]){var ne=this.getTileByID(Q);ce(H,ne),ce(ne,H)}}function ce(ye,Le){ye.needsHillshadePrepare=!0;var Ie=Le.tileID.canonical.x-ye.tileID.canonical.x,je=Le.tileID.canonical.y-ye.tileID.canonical.y,qe=Math.pow(2,ye.tileID.canonical.z),$e=Le.tileID.key;Ie===0&&je===0||Math.abs(je)>1||(Math.abs(Ie)>1&&(Math.abs(Ie+qe)===1?Ie+=qe:Math.abs(Ie-qe)===1&&(Ie-=qe)),Le.dem&&ye.dem&&(ye.dem.backfillBorder(Le.dem,Ie,je),ye.neighboringTiles&&ye.neighboringTiles[$e]&&(ye.neighboringTiles[$e].backfilled=!0)))}},G.prototype.getTile=function(H){return this.getTileByID(H.key)},G.prototype.getTileByID=function(H){return this._tiles[H]},G.prototype._retainLoadedChildren=function(H,L,q,Q){for(var ne in this._tiles){var ce=this._tiles[ne];if(!(Q[ne]||!ce.hasData()||ce.tileID.overscaledZ<=L||ce.tileID.overscaledZ>q)){for(var ye=ce.tileID;ce&&ce.tileID.overscaledZ>L+1;){var Le=ce.tileID.scaledTo(ce.tileID.overscaledZ-1);(ce=this._tiles[Le.key])&&ce.hasData()&&(ye=Le)}for(var Ie=ye;Ie.overscaledZ>L;)if(H[(Ie=Ie.scaledTo(Ie.overscaledZ-1)).key]){Q[ye.key]=ye;break}}}},G.prototype.findLoadedParent=function(H,L){if(H.key in this._loadedParentTiles){var q=this._loadedParentTiles[H.key];return q&&q.tileID.overscaledZ>=L?q:null}for(var Q=H.overscaledZ-1;Q>=L;Q--){var ne=H.scaledTo(Q),ce=this._getLoadedTile(ne);if(ce)return ce}},G.prototype._getLoadedTile=function(H){var L=this._tiles[H.key];return L&&L.hasData()?L:this._cache.getByKey(H.wrapped().key)},G.prototype.updateCacheSize=function(H){var L=(Math.ceil(H.width/this._source.tileSize)+1)*(Math.ceil(H.height/this._source.tileSize)+1),q=Math.floor(5*L),Q=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,q):q;this._cache.setMaxSize(Q)},G.prototype.handleWrapJump=function(H){var L=(H-(this._prevLng===void 0?H:this._prevLng))/360,q=Math.round(L);if(this._prevLng=H,q){var Q={};for(var ne in this._tiles){var ce=this._tiles[ne];ce.tileID=ce.tileID.unwrapTo(ce.tileID.wrap+q),Q[ce.tileID.key]=ce}for(var ye in this._tiles=Q,this._timers)clearTimeout(this._timers[ye]),delete this._timers[ye];for(var Le in this._tiles){var Ie=this._tiles[Le];this._setTileReloadTimer(Le,Ie)}}},G.prototype.update=function(H){var L=this;if(this.transform=H,this._sourceLoaded&&!this._paused){var q;this.updateCacheSize(H),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?q=H.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Nt){return new o.OverscaledTileID(Nt.canonical.z,Nt.wrap,Nt.canonical.z,Nt.canonical.x,Nt.canonical.y)}):(q=H.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(q=q.filter(function(Nt){return L._source.hasTile(Nt)}))):q=[];var Q=H.coveringZoomLevel(this._source),ne=Math.max(Q-G.maxOverzooming,this._source.minzoom),ce=Math.max(Q+G.maxUnderzooming,this._source.minzoom),ye=this._updateRetainedTiles(q,Q);if(Re(this._source.type)){for(var Le={},Ie={},je=0,qe=Object.keys(ye);je<qe.length;je+=1){var $e=qe[je],lt=ye[$e],ft=this._tiles[$e];if(ft&&!(ft.fadeEndTime&&ft.fadeEndTime<=o.browser.now())){var _t=this.findLoadedParent(lt,ne);_t&&(this._addTile(_t.tileID),Le[_t.tileID.key]=_t.tileID),Ie[$e]=lt}}for(var St in this._retainLoadedChildren(Ie,Q,ce,ye),Le)ye[St]||(this._coveredTiles[St]=!0,ye[St]=Le[St])}for(var At in ye)this._tiles[At].clearFadeHold();for(var Ft=0,Ot=o.keysDifference(this._tiles,ye);Ft<Ot.length;Ft+=1){var Zt=Ot[Ft],Ht=this._tiles[Zt];Ht.hasSymbolBuckets&&!Ht.holdingForFade()?Ht.setHoldDuration(this.map._fadeDuration):Ht.hasSymbolBuckets&&!Ht.symbolFadeFinished()||this._removeTile(Zt)}this._updateLoadedParentTileCache()}},G.prototype.releaseSymbolFadeTiles=function(){for(var H in this._tiles)this._tiles[H].holdingForFade()&&this._removeTile(H)},G.prototype._updateRetainedTiles=function(H,L){for(var q={},Q={},ne=Math.max(L-G.maxOverzooming,this._source.minzoom),ce=Math.max(L+G.maxUnderzooming,this._source.minzoom),ye={},Le=0,Ie=H;Le<Ie.length;Le+=1){var je=Ie[Le],qe=this._addTile(je);q[je.key]=je,qe.hasData()||L<this._source.maxzoom&&(ye[je.key]=je)}this._retainLoadedChildren(ye,L,ce,q);for(var $e=0,lt=H;$e<lt.length;$e+=1){var ft=lt[$e],_t=this._tiles[ft.key];if(!_t.hasData()){if(L+1>this._source.maxzoom){var St=ft.children(this._source.maxzoom)[0],At=this.getTile(St);if(At&&At.hasData()){q[St.key]=St;continue}}else{var Ft=ft.children(this._source.maxzoom);if(q[Ft[0].key]&&q[Ft[1].key]&&q[Ft[2].key]&&q[Ft[3].key])continue}for(var Ot=_t.wasRequested(),Zt=ft.overscaledZ-1;Zt>=ne;--Zt){var Ht=ft.scaledTo(Zt);if(Q[Ht.key]||(Q[Ht.key]=!0,!(_t=this.getTile(Ht))&&Ot&&(_t=this._addTile(Ht)),_t&&(q[Ht.key]=Ht,Ot=_t.wasRequested(),_t.hasData())))break}}}return q},G.prototype._updateLoadedParentTileCache=function(){for(var H in this._loadedParentTiles={},this._tiles){for(var L=[],q=void 0,Q=this._tiles[H].tileID;Q.overscaledZ>0;){if(Q.key in this._loadedParentTiles){q=this._loadedParentTiles[Q.key];break}L.push(Q.key);var ne=Q.scaledTo(Q.overscaledZ-1);if(q=this._getLoadedTile(ne))break;Q=ne}for(var ce=0,ye=L;ce<ye.length;ce+=1){var Le=ye[ce];this._loadedParentTiles[Le]=q}}},G.prototype._addTile=function(H){var L=this._tiles[H.key];if(L)return L;(L=this._cache.getAndRemove(H))&&(this._setTileReloadTimer(H.key,L),L.tileID=H,this._state.initializeTileState(L,this.map?this.map.painter:null),this._cacheTimers[H.key]&&(clearTimeout(this._cacheTimers[H.key]),delete this._cacheTimers[H.key],this._setTileReloadTimer(H.key,L)));var q=Boolean(L);return q||(L=new o.Tile(H,this._source.tileSize*H.overscaleFactor()),this._loadTile(L,this._tileLoaded.bind(this,L,H.key,L.state))),L?(L.uses++,this._tiles[H.key]=L,q||this._source.fire(new o.Event("dataloading",{tile:L,coord:L.tileID,dataType:"source"})),L):null},G.prototype._setTileReloadTimer=function(H,L){var q=this;H in this._timers&&(clearTimeout(this._timers[H]),delete this._timers[H]);var Q=L.getExpiryTimeout();Q&&(this._timers[H]=setTimeout(function(){q._reloadTile(H,"expired"),delete q._timers[H]},Q))},G.prototype._removeTile=function(H){var L=this._tiles[H];L&&(L.uses--,delete this._tiles[H],this._timers[H]&&(clearTimeout(this._timers[H]),delete this._timers[H]),L.uses>0||(L.hasData()&&L.state!=="reloading"?this._cache.add(L.tileID,L,L.getExpiryTimeout()):(L.aborted=!0,this._abortTile(L),this._unloadTile(L))))},G.prototype.clearTiles=function(){for(var H in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(H);this._cache.reset()},G.prototype.tilesIn=function(H,L,q){var Q=this,ne=[],ce=this.transform;if(!ce)return ne;for(var ye=q?ce.getCameraQueryGeometry(H):H,Le=H.map(function(Zt){return ce.pointCoordinate(Zt)}),Ie=ye.map(function(Zt){return ce.pointCoordinate(Zt)}),je=this.getIds(),qe=1/0,$e=1/0,lt=-1/0,ft=-1/0,_t=0,St=Ie;_t<St.length;_t+=1){var At=St[_t];qe=Math.min(qe,At.x),$e=Math.min($e,At.y),lt=Math.max(lt,At.x),ft=Math.max(ft,At.y)}for(var Ft=function(Zt){var Ht=Q._tiles[je[Zt]];if(!Ht.holdingForFade()){var Nt=Ht.tileID,gn=Math.pow(2,ce.zoom-Ht.tileID.overscaledZ),yn=L*Ht.queryPadding*o.EXTENT/Ht.tileSize/gn,Cn=[Nt.getTilePoint(new o.MercatorCoordinate(qe,$e)),Nt.getTilePoint(new o.MercatorCoordinate(lt,ft))];if(Cn[0].x-yn<o.EXTENT&&Cn[0].y-yn<o.EXTENT&&Cn[1].x+yn>=0&&Cn[1].y+yn>=0){var Dn=Le.map(function(sr){return Nt.getTilePoint(sr)}),Wn=Ie.map(function(sr){return Nt.getTilePoint(sr)});ne.push({tile:Ht,tileID:Nt,queryGeometry:Dn,cameraQueryGeometry:Wn,scale:gn})}}},Ot=0;Ot<je.length;Ot++)Ft(Ot);return ne},G.prototype.getVisibleCoordinates=function(H){for(var L=this,q=this.getRenderableIds(H).map(function(ye){return L._tiles[ye].tileID}),Q=0,ne=q;Q<ne.length;Q+=1){var ce=ne[Q];ce.posMatrix=this.transform.calculatePosMatrix(ce.toUnwrapped())}return q},G.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Re(this._source.type))for(var H in this._tiles){var L=this._tiles[H];if(L.fadeEndTime!==void 0&&L.fadeEndTime>=o.browser.now())return!0}return!1},G.prototype.setFeatureState=function(H,L,q){H=H||"_geojsonTileLayer",this._state.updateState(H,L,q)},G.prototype.removeFeatureState=function(H,L,q){H=H||"_geojsonTileLayer",this._state.removeFeatureState(H,L,q)},G.prototype.getFeatureState=function(H,L){return H=H||"_geojsonTileLayer",this._state.getState(H,L)},G.prototype.setDependencies=function(H,L,q){var Q=this._tiles[H];Q&&Q.setDependencies(L,q)},G.prototype.reloadTilesForDependencies=function(H,L){for(var q in this._tiles)this._tiles[q].hasDependency(H,L)&&this._reloadTile(q,"reloading");this._cache.filter(function(Q){return!Q.hasDependency(H,L)})},G}(o.Evented);function nt(B,G){var H=Math.abs(2*B.wrap)-+(B.wrap<0),L=Math.abs(2*G.wrap)-+(G.wrap<0);return B.overscaledZ-G.overscaledZ||L-H||G.canonical.y-B.canonical.y||G.canonical.x-B.canonical.x}function Re(B){return B==="raster"||B==="image"||B==="video"}function Fe(){return new o.window.Worker(ot.workerUrl)}at.maxOverzooming=10,at.maxUnderzooming=3;var rt="mapboxgl_preloaded_worker_pool",Ye=function(){this.active={}};Ye.prototype.acquire=function(B){if(!this.workers)for(this.workers=[];this.workers.length<Ye.workerCount;)this.workers.push(new Fe);return this.active[B]=!0,this.workers.slice()},Ye.prototype.release=function(B){delete this.active[B],this.numActive()===0&&(this.workers.forEach(function(G){G.terminate()}),this.workers=null)},Ye.prototype.isPreloaded=function(){return!!this.active[rt]},Ye.prototype.numActive=function(){return Object.keys(this.active).length};var ct,pt=Math.floor(o.browser.hardwareConcurrency/2);function gt(){return ct||(ct=new Ye),ct}function ut(B,G){var H={};for(var L in B)L!=="ref"&&(H[L]=B[L]);return o.refProperties.forEach(function(q){q in G&&(H[q]=G[q])}),H}function Mt(B){B=B.slice();for(var G=Object.create(null),H=0;H<B.length;H++)G[B[H].id]=B[H];for(var L=0;L<B.length;L++)"ref"in B[L]&&(B[L]=ut(B[L],G[B[L].ref]));return B}Ye.workerCount=Math.max(Math.min(pt,6),1);var xt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function mt(B,G,H){H.push({command:xt.addSource,args:[B,G[B]]})}function Et(B,G,H){G.push({command:xt.removeSource,args:[B]}),H[B]=!0}function Lt(B,G,H,L){Et(B,H,L),mt(B,G,H)}function zt(B,G,H){var L;for(L in B[H])if(B[H].hasOwnProperty(L)&&L!=="data"&&!o.deepEqual(B[H][L],G[H][L]))return!1;for(L in G[H])if(G[H].hasOwnProperty(L)&&L!=="data"&&!o.deepEqual(B[H][L],G[H][L]))return!1;return!0}function Wt(B,G,H,L,q,Q){var ne;for(ne in G=G||{},B=B||{})B.hasOwnProperty(ne)&&(o.deepEqual(B[ne],G[ne])||H.push({command:Q,args:[L,ne,G[ne],q]}));for(ne in G)G.hasOwnProperty(ne)&&!B.hasOwnProperty(ne)&&(o.deepEqual(B[ne],G[ne])||H.push({command:Q,args:[L,ne,G[ne],q]}))}function rn(B){return B.id}function Ut(B,G){return B[G.id]=G,B}function Vt(B,G){if(!B)return[{command:xt.setStyle,args:[G]}];var H=[];try{if(!o.deepEqual(B.version,G.version))return[{command:xt.setStyle,args:[G]}];o.deepEqual(B.center,G.center)||H.push({command:xt.setCenter,args:[G.center]}),o.deepEqual(B.zoom,G.zoom)||H.push({command:xt.setZoom,args:[G.zoom]}),o.deepEqual(B.bearing,G.bearing)||H.push({command:xt.setBearing,args:[G.bearing]}),o.deepEqual(B.pitch,G.pitch)||H.push({command:xt.setPitch,args:[G.pitch]}),o.deepEqual(B.sprite,G.sprite)||H.push({command:xt.setSprite,args:[G.sprite]}),o.deepEqual(B.glyphs,G.glyphs)||H.push({command:xt.setGlyphs,args:[G.glyphs]}),o.deepEqual(B.transition,G.transition)||H.push({command:xt.setTransition,args:[G.transition]}),o.deepEqual(B.light,G.light)||H.push({command:xt.setLight,args:[G.light]});var L={},q=[];(function(ne,ce,ye,Le){var Ie;for(Ie in ce=ce||{},ne=ne||{})ne.hasOwnProperty(Ie)&&(ce.hasOwnProperty(Ie)||Et(Ie,ye,Le));for(Ie in ce)ce.hasOwnProperty(Ie)&&(ne.hasOwnProperty(Ie)?o.deepEqual(ne[Ie],ce[Ie])||(ne[Ie].type==="geojson"&&ce[Ie].type==="geojson"&&zt(ne,ce,Ie)?ye.push({command:xt.setGeoJSONSourceData,args:[Ie,ce[Ie].data]}):Lt(Ie,ce,ye,Le)):mt(Ie,ce,ye))})(B.sources,G.sources,q,L);var Q=[];B.layers&&B.layers.forEach(function(ne){L[ne.source]?H.push({command:xt.removeLayer,args:[ne.id]}):Q.push(ne)}),H=H.concat(q),function(ne,ce,ye){ce=ce||[];var Le,Ie,je,qe,$e,lt,ft,_t=(ne=ne||[]).map(rn),St=ce.map(rn),At=ne.reduce(Ut,{}),Ft=ce.reduce(Ut,{}),Ot=_t.slice(),Zt=Object.create(null);for(Le=0,Ie=0;Le<_t.length;Le++)je=_t[Le],Ft.hasOwnProperty(je)?Ie++:(ye.push({command:xt.removeLayer,args:[je]}),Ot.splice(Ot.indexOf(je,Ie),1));for(Le=0,Ie=0;Le<St.length;Le++)je=St[St.length-1-Le],Ot[Ot.length-1-Le]!==je&&(At.hasOwnProperty(je)?(ye.push({command:xt.removeLayer,args:[je]}),Ot.splice(Ot.lastIndexOf(je,Ot.length-Ie),1)):Ie++,lt=Ot[Ot.length-Le],ye.push({command:xt.addLayer,args:[Ft[je],lt]}),Ot.splice(Ot.length-Le,0,je),Zt[je]=!0);for(Le=0;Le<St.length;Le++)if(qe=At[je=St[Le]],$e=Ft[je],!Zt[je]&&!o.deepEqual(qe,$e))if(o.deepEqual(qe.source,$e.source)&&o.deepEqual(qe["source-layer"],$e["source-layer"])&&o.deepEqual(qe.type,$e.type)){for(ft in Wt(qe.layout,$e.layout,ye,je,null,xt.setLayoutProperty),Wt(qe.paint,$e.paint,ye,je,null,xt.setPaintProperty),o.deepEqual(qe.filter,$e.filter)||ye.push({command:xt.setFilter,args:[je,$e.filter]}),o.deepEqual(qe.minzoom,$e.minzoom)&&o.deepEqual(qe.maxzoom,$e.maxzoom)||ye.push({command:xt.setLayerZoomRange,args:[je,$e.minzoom,$e.maxzoom]}),qe)qe.hasOwnProperty(ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?Wt(qe[ft],$e[ft],ye,je,ft.slice(6),xt.setPaintProperty):o.deepEqual(qe[ft],$e[ft])||ye.push({command:xt.setLayerProperty,args:[je,ft,$e[ft]]}));for(ft in $e)$e.hasOwnProperty(ft)&&!qe.hasOwnProperty(ft)&&ft!=="layout"&&ft!=="paint"&&ft!=="filter"&&ft!=="metadata"&&ft!=="minzoom"&&ft!=="maxzoom"&&(ft.indexOf("paint.")===0?Wt(qe[ft],$e[ft],ye,je,ft.slice(6),xt.setPaintProperty):o.deepEqual(qe[ft],$e[ft])||ye.push({command:xt.setLayerProperty,args:[je,ft,$e[ft]]}))}else ye.push({command:xt.removeLayer,args:[je]}),lt=Ot[Ot.lastIndexOf(je)+1],ye.push({command:xt.addLayer,args:[$e,lt]})}(Q,G.layers,H)}catch(ne){console.warn("Unable to compute style diff:",ne),H=[{command:xt.setStyle,args:[G]}]}return H}var en=function(B,G){this.reset(B,G)};en.prototype.reset=function(B,G){this.points=B||[],this._distances=[0];for(var H=1;H<this.points.length;H++)this._distances[H]=this._distances[H-1]+this.points[H].dist(this.points[H-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(G||0,.5*this.length),this.paddedLength=this.length-2*this.padding},en.prototype.lerp=function(B){if(this.points.length===1)return this.points[0];B=o.clamp(B,0,1);for(var G=1,H=this._distances[G],L=B*this.paddedLength+this.padding;H<L&&G<this._distances.length;)H=this._distances[++G];var q=G-1,Q=this._distances[q],ne=H-Q,ce=ne>0?(L-Q)/ne:0;return this.points[q].mult(1-ce).add(this.points[G].mult(ce))};var Ln=function(B,G,H){var L=this.boxCells=[],q=this.circleCells=[];this.xCellCount=Math.ceil(B/H),this.yCellCount=Math.ceil(G/H);for(var Q=0;Q<this.xCellCount*this.yCellCount;Q++)L.push([]),q.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=B,this.height=G,this.xScale=this.xCellCount/B,this.yScale=this.yCellCount/G,this.boxUid=0,this.circleUid=0};function An(B,G,H,L,q){var Q=o.create();return G?(o.scale(Q,Q,[1/q,1/q,1]),H||o.rotateZ(Q,Q,L.angle)):o.multiply(Q,L.labelPlaneMatrix,B),Q}function hn(B,G,H,L,q){if(G){var Q=o.clone(B);return o.scale(Q,Q,[q,q,1]),H||o.rotateZ(Q,Q,-L.angle),Q}return L.glCoordMatrix}function Xt(B,G){var H=[B.x,B.y,0,1];tr(H,H,G);var L=H[3];return{point:new o.Point(H[0]/L,H[1]/L),signedDistanceFromCamera:L}}function ln(B,G){return .5+B/G*.5}function nn(B,G){var H=B[0]/B[3],L=B[1]/B[3];return H>=-G[0]&&H<=G[0]&&L>=-G[1]&&L<=G[1]}function cn(B,G,H,L,q,Q,ne,ce){var ye=L?B.textSizeData:B.iconSizeData,Le=o.evaluateSizeForZoom(ye,H.transform.zoom),Ie=[256/H.width*2+1,256/H.height*2+1],je=L?B.text.dynamicLayoutVertexArray:B.icon.dynamicLayoutVertexArray;je.clear();for(var qe=B.lineVertexArray,$e=L?B.text.placedSymbolArray:B.icon.placedSymbolArray,lt=H.transform.width/H.transform.height,ft=!1,_t=0;_t<$e.length;_t++){var St=$e.get(_t);if(St.hidden||St.writingMode===o.WritingMode.vertical&&!ft)Fn(St.numGlyphs,je);else{ft=!1;var At=[St.anchorX,St.anchorY,0,1];if(o.transformMat4(At,At,G),nn(At,Ie)){var Ft=At[3],Ot=ln(H.transform.cameraToCenterDistance,Ft),Zt=o.evaluateSizeForFeature(ye,Le,St),Ht=ne?Zt/Ot:Zt*Ot,Nt=new o.Point(St.anchorX,St.anchorY),gn=Xt(Nt,q).point,yn={},Cn=zn(St,Ht,!1,ce,G,q,Q,B.glyphOffsetArray,qe,je,gn,Nt,yn,lt);ft=Cn.useVertical,(Cn.notEnoughRoom||ft||Cn.needsFlipping&&zn(St,Ht,!0,ce,G,q,Q,B.glyphOffsetArray,qe,je,gn,Nt,yn,lt).notEnoughRoom)&&Fn(St.numGlyphs,je)}else Fn(St.numGlyphs,je)}}L?B.text.dynamicLayoutVertexBuffer.updateData(je):B.icon.dynamicLayoutVertexBuffer.updateData(je)}function Tn(B,G,H,L,q,Q,ne,ce,ye,Le,Ie){var je=ce.glyphStartIndex+ce.numGlyphs,qe=ce.lineStartIndex,$e=ce.lineStartIndex+ce.lineLength,lt=G.getoffsetX(ce.glyphStartIndex),ft=G.getoffsetX(je-1),_t=Pn(B*lt,H,L,q,Q,ne,ce.segment,qe,$e,ye,Le,Ie);if(!_t)return null;var St=Pn(B*ft,H,L,q,Q,ne,ce.segment,qe,$e,ye,Le,Ie);return St?{first:_t,last:St}:null}function Mn(B,G,H,L){return B===o.WritingMode.horizontal&&Math.abs(H.y-G.y)>Math.abs(H.x-G.x)*L?{useVertical:!0}:(B===o.WritingMode.vertical?G.y<H.y:G.x>H.x)?{needsFlipping:!0}:null}function zn(B,G,H,L,q,Q,ne,ce,ye,Le,Ie,je,qe,$e){var lt,ft=G/24,_t=B.lineOffsetX*ft,St=B.lineOffsetY*ft;if(B.numGlyphs>1){var At=B.glyphStartIndex+B.numGlyphs,Ft=B.lineStartIndex,Ot=B.lineStartIndex+B.lineLength,Zt=Tn(ft,ce,_t,St,H,Ie,je,B,ye,Q,qe);if(!Zt)return{notEnoughRoom:!0};var Ht=Xt(Zt.first.point,ne).point,Nt=Xt(Zt.last.point,ne).point;if(L&&!H){var gn=Mn(B.writingMode,Ht,Nt,$e);if(gn)return gn}lt=[Zt.first];for(var yn=B.glyphStartIndex+1;yn<At-1;yn++)lt.push(Pn(ft*ce.getoffsetX(yn),_t,St,H,Ie,je,B.segment,Ft,Ot,ye,Q,qe));lt.push(Zt.last)}else{if(L&&!H){var Cn=Xt(je,q).point,Dn=B.lineStartIndex+B.segment+1,Wn=new o.Point(ye.getx(Dn),ye.gety(Dn)),sr=Xt(Wn,q),mr=sr.signedDistanceFromCamera>0?sr.point:In(je,Wn,Cn,1,q),Zn=Mn(B.writingMode,Cn,mr,$e);if(Zn)return Zn}var pr=Pn(ft*ce.getoffsetX(B.glyphStartIndex),_t,St,H,Ie,je,B.segment,B.lineStartIndex,B.lineStartIndex+B.lineLength,ye,Q,qe);if(!pr)return{notEnoughRoom:!0};lt=[pr]}for(var Ar=0,Fr=lt;Ar<Fr.length;Ar+=1){var ar=Fr[Ar];o.addDynamicAttributes(Le,ar.point,ar.angle)}return{}}function In(B,G,H,L,q){var Q=Xt(B.add(B.sub(G)._unit()),q).point,ne=H.sub(Q);return H.add(ne._mult(L/ne.mag()))}function Pn(B,G,H,L,q,Q,ne,ce,ye,Le,Ie,je){var qe=L?B-G:B+G,$e=qe>0?1:-1,lt=0;L&&($e*=-1,lt=Math.PI),$e<0&&(lt+=Math.PI);for(var ft=$e>0?ce+ne:ce+ne+1,_t=q,St=q,At=0,Ft=0,Ot=Math.abs(qe),Zt=[];At+Ft<=Ot;){if((ft+=$e)<ce||ft>=ye)return null;if(St=_t,Zt.push(_t),(_t=je[ft])===void 0){var Ht=new o.Point(Le.getx(ft),Le.gety(ft)),Nt=Xt(Ht,Ie);if(Nt.signedDistanceFromCamera>0)_t=je[ft]=Nt.point;else{var gn=ft-$e;_t=In(At===0?Q:new o.Point(Le.getx(gn),Le.gety(gn)),Ht,St,Ot-At+1,Ie)}}At+=Ft,Ft=St.dist(_t)}var yn=(Ot-At)/Ft,Cn=_t.sub(St),Dn=Cn.mult(yn)._add(St);Dn._add(Cn._unit()._perp()._mult(H*$e));var Wn=lt+Math.atan2(_t.y-St.y,_t.x-St.x);return Zt.push(Dn),{point:Dn,angle:Wn,path:Zt}}Ln.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ln.prototype.insert=function(B,G,H,L,q){this._forEachCell(G,H,L,q,this._insertBoxCell,this.boxUid++),this.boxKeys.push(B),this.bboxes.push(G),this.bboxes.push(H),this.bboxes.push(L),this.bboxes.push(q)},Ln.prototype.insertCircle=function(B,G,H,L){this._forEachCell(G-L,H-L,G+L,H+L,this._insertCircleCell,this.circleUid++),this.circleKeys.push(B),this.circles.push(G),this.circles.push(H),this.circles.push(L)},Ln.prototype._insertBoxCell=function(B,G,H,L,q,Q){this.boxCells[q].push(Q)},Ln.prototype._insertCircleCell=function(B,G,H,L,q,Q){this.circleCells[q].push(Q)},Ln.prototype._query=function(B,G,H,L,q,Q){if(H<0||B>this.width||L<0||G>this.height)return!q&&[];var ne=[];if(B<=0&&G<=0&&this.width<=H&&this.height<=L){if(q)return!0;for(var ce=0;ce<this.boxKeys.length;ce++)ne.push({key:this.boxKeys[ce],x1:this.bboxes[4*ce],y1:this.bboxes[4*ce+1],x2:this.bboxes[4*ce+2],y2:this.bboxes[4*ce+3]});for(var ye=0;ye<this.circleKeys.length;ye++){var Le=this.circles[3*ye],Ie=this.circles[3*ye+1],je=this.circles[3*ye+2];ne.push({key:this.circleKeys[ye],x1:Le-je,y1:Ie-je,x2:Le+je,y2:Ie+je})}return Q?ne.filter(Q):ne}var qe={hitTest:q,seenUids:{box:{},circle:{}}};return this._forEachCell(B,G,H,L,this._queryCell,ne,qe,Q),q?ne.length>0:ne},Ln.prototype._queryCircle=function(B,G,H,L,q){var Q=B-H,ne=B+H,ce=G-H,ye=G+H;if(ne<0||Q>this.width||ye<0||ce>this.height)return!L&&[];var Le=[],Ie={hitTest:L,circle:{x:B,y:G,radius:H},seenUids:{box:{},circle:{}}};return this._forEachCell(Q,ce,ne,ye,this._queryCellCircle,Le,Ie,q),L?Le.length>0:Le},Ln.prototype.query=function(B,G,H,L,q){return this._query(B,G,H,L,!1,q)},Ln.prototype.hitTest=function(B,G,H,L,q){return this._query(B,G,H,L,!0,q)},Ln.prototype.hitTestCircle=function(B,G,H,L){return this._queryCircle(B,G,H,!0,L)},Ln.prototype._queryCell=function(B,G,H,L,q,Q,ne,ce){var ye=ne.seenUids,Le=this.boxCells[q];if(Le!==null)for(var Ie=this.bboxes,je=0,qe=Le;je<qe.length;je+=1){var $e=qe[je];if(!ye.box[$e]){ye.box[$e]=!0;var lt=4*$e;if(B<=Ie[lt+2]&&G<=Ie[lt+3]&&H>=Ie[lt+0]&&L>=Ie[lt+1]&&(!ce||ce(this.boxKeys[$e]))){if(ne.hitTest)return Q.push(!0),!0;Q.push({key:this.boxKeys[$e],x1:Ie[lt],y1:Ie[lt+1],x2:Ie[lt+2],y2:Ie[lt+3]})}}}var ft=this.circleCells[q];if(ft!==null)for(var _t=this.circles,St=0,At=ft;St<At.length;St+=1){var Ft=At[St];if(!ye.circle[Ft]){ye.circle[Ft]=!0;var Ot=3*Ft;if(this._circleAndRectCollide(_t[Ot],_t[Ot+1],_t[Ot+2],B,G,H,L)&&(!ce||ce(this.circleKeys[Ft]))){if(ne.hitTest)return Q.push(!0),!0;var Zt=_t[Ot],Ht=_t[Ot+1],Nt=_t[Ot+2];Q.push({key:this.circleKeys[Ft],x1:Zt-Nt,y1:Ht-Nt,x2:Zt+Nt,y2:Ht+Nt})}}}},Ln.prototype._queryCellCircle=function(B,G,H,L,q,Q,ne,ce){var ye=ne.circle,Le=ne.seenUids,Ie=this.boxCells[q];if(Ie!==null)for(var je=this.bboxes,qe=0,$e=Ie;qe<$e.length;qe+=1){var lt=$e[qe];if(!Le.box[lt]){Le.box[lt]=!0;var ft=4*lt;if(this._circleAndRectCollide(ye.x,ye.y,ye.radius,je[ft+0],je[ft+1],je[ft+2],je[ft+3])&&(!ce||ce(this.boxKeys[lt])))return Q.push(!0),!0}}var _t=this.circleCells[q];if(_t!==null)for(var St=this.circles,At=0,Ft=_t;At<Ft.length;At+=1){var Ot=Ft[At];if(!Le.circle[Ot]){Le.circle[Ot]=!0;var Zt=3*Ot;if(this._circlesCollide(St[Zt],St[Zt+1],St[Zt+2],ye.x,ye.y,ye.radius)&&(!ce||ce(this.circleKeys[Ot])))return Q.push(!0),!0}}},Ln.prototype._forEachCell=function(B,G,H,L,q,Q,ne,ce){for(var ye=this._convertToXCellCoord(B),Le=this._convertToYCellCoord(G),Ie=this._convertToXCellCoord(H),je=this._convertToYCellCoord(L),qe=ye;qe<=Ie;qe++)for(var $e=Le;$e<=je;$e++){var lt=this.xCellCount*$e+qe;if(q.call(this,B,G,H,L,lt,Q,ne,ce))return}},Ln.prototype._convertToXCellCoord=function(B){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(B*this.xScale)))},Ln.prototype._convertToYCellCoord=function(B){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(B*this.yScale)))},Ln.prototype._circlesCollide=function(B,G,H,L,q,Q){var ne=L-B,ce=q-G,ye=H+Q;return ye*ye>ne*ne+ce*ce},Ln.prototype._circleAndRectCollide=function(B,G,H,L,q,Q,ne){var ce=(Q-L)/2,ye=Math.abs(B-(L+ce));if(ye>ce+H)return!1;var Le=(ne-q)/2,Ie=Math.abs(G-(q+Le));if(Ie>Le+H)return!1;if(ye<=ce||Ie<=Le)return!0;var je=ye-ce,qe=Ie-Le;return je*je+qe*qe<=H*H};var Hn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Fn(B,G){for(var H=0;H<B;H++){var L=G.length;G.resize(L+4),G.float32.set(Hn,3*L)}}function tr(B,G,H){var L=G[0],q=G[1];return B[0]=H[0]*L+H[4]*q+H[12],B[1]=H[1]*L+H[5]*q+H[13],B[3]=H[3]*L+H[7]*q+H[15],B}var or=100,ur=function(B,G,H){G===void 0&&(G=new Ln(B.width+200,B.height+200,25)),H===void 0&&(H=new Ln(B.width+200,B.height+200,25)),this.transform=B,this.grid=G,this.ignoredGrid=H,this.pitchfactor=Math.cos(B._pitch)*B.cameraToCenterDistance,this.screenRightBoundary=B.width+or,this.screenBottomBoundary=B.height+or,this.gridRightBoundary=B.width+200,this.gridBottomBoundary=B.height+200};function er(B,G,H){return G*(o.EXTENT/(B.tileSize*Math.pow(2,H-B.tileID.overscaledZ)))}ur.prototype.placeCollisionBox=function(B,G,H,L,q){var Q=this.projectAndGetPerspectiveRatio(L,B.anchorPointX,B.anchorPointY),ne=H*Q.perspectiveRatio,ce=B.x1*ne+Q.point.x,ye=B.y1*ne+Q.point.y,Le=B.x2*ne+Q.point.x,Ie=B.y2*ne+Q.point.y;return!this.isInsideGrid(ce,ye,Le,Ie)||!G&&this.grid.hitTest(ce,ye,Le,Ie,q)?{box:[],offscreen:!1}:{box:[ce,ye,Le,Ie],offscreen:this.isOffscreen(ce,ye,Le,Ie)}},ur.prototype.placeCollisionCircles=function(B,G,H,L,q,Q,ne,ce,ye,Le,Ie,je,qe){var $e=[],lt=new o.Point(G.anchorX,G.anchorY),ft=Xt(lt,Q),_t=ln(this.transform.cameraToCenterDistance,ft.signedDistanceFromCamera),St=(Le?q/_t:q*_t)/o.ONE_EM,At=Xt(lt,ne).point,Ft=Tn(St,L,G.lineOffsetX*St,G.lineOffsetY*St,!1,At,lt,G,H,ne,{}),Ot=!1,Zt=!1,Ht=!0;if(Ft){for(var Nt=.5*je*_t+qe,gn=new o.Point(-100,-100),yn=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),Cn=new en,Dn=Ft.first,Wn=Ft.last,sr=[],mr=Dn.path.length-1;mr>=1;mr--)sr.push(Dn.path[mr]);for(var Zn=1;Zn<Wn.path.length;Zn++)sr.push(Wn.path[Zn]);var pr=2.5*Nt;if(ce){var Ar=sr.map(function(si){return Xt(si,ce)});sr=Ar.some(function(si){return si.signedDistanceFromCamera<=0})?[]:Ar.map(function(si){return si.point})}var Fr=[];if(sr.length>0){for(var ar=sr[0].clone(),fr=sr[0].clone(),Er=1;Er<sr.length;Er++)ar.x=Math.min(ar.x,sr[Er].x),ar.y=Math.min(ar.y,sr[Er].y),fr.x=Math.max(fr.x,sr[Er].x),fr.y=Math.max(fr.y,sr[Er].y);Fr=ar.x>=gn.x&&fr.x<=yn.x&&ar.y>=gn.y&&fr.y<=yn.y?[sr]:fr.x<gn.x||ar.x>yn.x||fr.y<gn.y||ar.y>yn.y?[]:o.clipLine([sr],gn.x,gn.y,yn.x,yn.y)}for(var yr=0,zr=Fr;yr<zr.length;yr+=1){var Vr=zr[yr];Cn.reset(Vr,.25*Nt);var Jr;Jr=Cn.length<=.5*Nt?1:Math.ceil(Cn.paddedLength/pr)+1;for(var Qr=0;Qr<Jr;Qr++){var ri=Qr/Math.max(Jr-1,1),ai=Cn.lerp(ri),Mi=ai.x+or,Vi=ai.y+or;$e.push(Mi,Vi,Nt,0);var Aa=Mi-Nt,ia=Vi-Nt,va=Mi+Nt,Ci=Vi+Nt;if(Ht=Ht&&this.isOffscreen(Aa,ia,va,Ci),Zt=Zt||this.isInsideGrid(Aa,ia,va,Ci),!B&&this.grid.hitTestCircle(Mi,Vi,Nt,Ie)&&(Ot=!0,!ye))return{circles:[],offscreen:!1,collisionDetected:Ot}}}}return{circles:!ye&&Ot||!Zt?[]:$e,offscreen:Ht,collisionDetected:Ot}},ur.prototype.queryRenderedSymbols=function(B){if(B.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var G=[],H=1/0,L=1/0,q=-1/0,Q=-1/0,ne=0,ce=B;ne<ce.length;ne+=1){var ye=ce[ne],Le=new o.Point(ye.x+or,ye.y+or);H=Math.min(H,Le.x),L=Math.min(L,Le.y),q=Math.max(q,Le.x),Q=Math.max(Q,Le.y),G.push(Le)}for(var Ie={},je={},qe=0,$e=this.grid.query(H,L,q,Q).concat(this.ignoredGrid.query(H,L,q,Q));qe<$e.length;qe+=1){var lt=$e[qe],ft=lt.key;if(Ie[ft.bucketInstanceId]===void 0&&(Ie[ft.bucketInstanceId]={}),!Ie[ft.bucketInstanceId][ft.featureIndex]){var _t=[new o.Point(lt.x1,lt.y1),new o.Point(lt.x2,lt.y1),new o.Point(lt.x2,lt.y2),new o.Point(lt.x1,lt.y2)];o.polygonIntersectsPolygon(G,_t)&&(Ie[ft.bucketInstanceId][ft.featureIndex]=!0,je[ft.bucketInstanceId]===void 0&&(je[ft.bucketInstanceId]=[]),je[ft.bucketInstanceId].push(ft.featureIndex))}}return je},ur.prototype.insertCollisionBox=function(B,G,H,L,q){var Q={bucketInstanceId:H,featureIndex:L,collisionGroupID:q};(G?this.ignoredGrid:this.grid).insert(Q,B[0],B[1],B[2],B[3])},ur.prototype.insertCollisionCircles=function(B,G,H,L,q){for(var Q=G?this.ignoredGrid:this.grid,ne={bucketInstanceId:H,featureIndex:L,collisionGroupID:q},ce=0;ce<B.length;ce+=4)Q.insertCircle(ne,B[ce],B[ce+1],B[ce+2])},ur.prototype.projectAndGetPerspectiveRatio=function(B,G,H){var L=[G,H,0,1];return tr(L,L,B),{point:new o.Point((L[0]/L[3]+1)/2*this.transform.width+or,(-L[1]/L[3]+1)/2*this.transform.height+or),perspectiveRatio:.5+this.transform.cameraToCenterDistance/L[3]*.5}},ur.prototype.isOffscreen=function(B,G,H,L){return H<or||B>=this.screenRightBoundary||L<or||G>this.screenBottomBoundary},ur.prototype.isInsideGrid=function(B,G,H,L){return H>=0&&B<this.gridRightBoundary&&L>=0&&G<this.gridBottomBoundary},ur.prototype.getViewportMatrix=function(){var B=o.identity([]);return o.translate(B,B,[-100,-100,0]),B};var Mr=function(B,G,H,L){this.opacity=B?Math.max(0,Math.min(1,B.opacity+(B.placed?G:-G))):L&&H?1:0,this.placed=H};Mr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var jt=function(B,G,H,L,q){this.text=new Mr(B?B.text:null,G,H,q),this.icon=new Mr(B?B.icon:null,G,L,q)};jt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var tn=function(B,G,H){this.text=B,this.icon=G,this.skipFade=H},xn=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},pn=function(B,G,H,L,q){this.bucketInstanceId=B,this.featureIndex=G,this.sourceLayerIndex=H,this.bucketIndex=L,this.tileID=q},Sn=function(B){this.crossSourceCollisions=B,this.maxGroupID=0,this.collisionGroups={}};function Gn(B,G,H,L,q){var Q=o.getAnchorAlignment(B),ne=-(Q.horizontalAlign-.5)*G,ce=-(Q.verticalAlign-.5)*H,ye=o.evaluateVariableOffset(B,L);return new o.Point(ne+ye[0]*q,ce+ye[1]*q)}function Rn(B,G,H,L,q,Q){var ne=B.x1,ce=B.x2,ye=B.y1,Le=B.y2,Ie=B.anchorPointX,je=B.anchorPointY,qe=new o.Point(G,H);return L&&qe._rotate(q?Q:-Q),{x1:ne+qe.x,y1:ye+qe.y,x2:ce+qe.x,y2:Le+qe.y,anchorPointX:Ie,anchorPointY:je}}Sn.prototype.get=function(B){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[B]){var G=++this.maxGroupID;this.collisionGroups[B]={ID:G,predicate:function(H){return H.collisionGroupID===G}}}return this.collisionGroups[B]};var Nn=function(B,G,H,L){this.transform=B.clone(),this.collisionIndex=new ur(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=G,this.retainedQueryData={},this.collisionGroups=new Sn(H),this.collisionCircleArrays={},this.prevPlacement=L,L&&(L.prevPlacement=void 0),this.placedOrientations={}};function ir(B,G,H,L,q){B.emplaceBack(G?1:0,H?1:0,L||0,q||0),B.emplaceBack(G?1:0,H?1:0,L||0,q||0),B.emplaceBack(G?1:0,H?1:0,L||0,q||0),B.emplaceBack(G?1:0,H?1:0,L||0,q||0)}Nn.prototype.getBucketParts=function(B,G,H,L){var q=H.getBucket(G),Q=H.latestFeatureIndex;if(q&&Q&&G.id===q.layerIds[0]){var ne=H.collisionBoxArray,ce=q.layers[0].layout,ye=Math.pow(2,this.transform.zoom-H.tileID.overscaledZ),Le=H.tileSize/o.EXTENT,Ie=this.transform.calculatePosMatrix(H.tileID.toUnwrapped()),je=ce.get("text-pitch-alignment")==="map",qe=ce.get("text-rotation-alignment")==="map",$e=er(H,1,this.transform.zoom),lt=An(Ie,je,qe,this.transform,$e),ft=null;if(je){var _t=hn(Ie,je,qe,this.transform,$e);ft=o.multiply([],this.transform.labelPlaneMatrix,_t)}this.retainedQueryData[q.bucketInstanceId]=new pn(q.bucketInstanceId,Q,q.sourceLayerIndex,q.index,H.tileID);var St={bucket:q,layout:ce,posMatrix:Ie,textLabelPlaneMatrix:lt,labelToScreenMatrix:ft,scale:ye,textPixelRatio:Le,holdingForFade:H.holdingForFade(),collisionBoxArray:ne,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(q.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(q.sourceID)};if(L)for(var At=0,Ft=q.sortKeyRanges;At<Ft.length;At+=1){var Ot=Ft[At],Zt=Ot.sortKey,Ht=Ot.symbolInstanceStart,Nt=Ot.symbolInstanceEnd;B.push({sortKey:Zt,symbolInstanceStart:Ht,symbolInstanceEnd:Nt,parameters:St})}else B.push({symbolInstanceStart:0,symbolInstanceEnd:q.symbolInstances.length,parameters:St})}},Nn.prototype.attemptAnchorPlacement=function(B,G,H,L,q,Q,ne,ce,ye,Le,Ie,je,qe,$e,lt){var ft,_t=[je.textOffset0,je.textOffset1],St=Gn(B,H,L,_t,q),At=this.collisionIndex.placeCollisionBox(Rn(G,St.x,St.y,Q,ne,this.transform.angle),Ie,ce,ye,Le.predicate);if(!lt||this.collisionIndex.placeCollisionBox(Rn(lt,St.x,St.y,Q,ne,this.transform.angle),Ie,ce,ye,Le.predicate).box.length!==0)return At.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[je.crossTileID]&&this.prevPlacement.placements[je.crossTileID]&&this.prevPlacement.placements[je.crossTileID].text&&(ft=this.prevPlacement.variableOffsets[je.crossTileID].anchor),this.variableOffsets[je.crossTileID]={textOffset:_t,width:H,height:L,anchor:B,textBoxScale:q,prevAnchor:ft},this.markUsedJustification(qe,B,je,$e),qe.allowVerticalPlacement&&(this.markUsedOrientation(qe,$e,je),this.placedOrientations[je.crossTileID]=$e),{shift:St,placedGlyphBoxes:At}):void 0},Nn.prototype.placeLayerBucketPart=function(B,G,H){var L=this,q=B.parameters,Q=q.bucket,ne=q.layout,ce=q.posMatrix,ye=q.textLabelPlaneMatrix,Le=q.labelToScreenMatrix,Ie=q.textPixelRatio,je=q.holdingForFade,qe=q.collisionBoxArray,$e=q.partiallyEvaluatedTextSize,lt=q.collisionGroup,ft=ne.get("text-optional"),_t=ne.get("icon-optional"),St=ne.get("text-allow-overlap"),At=ne.get("icon-allow-overlap"),Ft=ne.get("text-rotation-alignment")==="map",Ot=ne.get("text-pitch-alignment")==="map",Zt=ne.get("icon-text-fit")!=="none",Ht=ne.get("symbol-z-order")==="viewport-y",Nt=St&&(At||!Q.hasIconData()||_t),gn=At&&(St||!Q.hasTextData()||ft);!Q.collisionArrays&&qe&&Q.deserializeCollisionBoxes(qe);var yn=function(Zn,pr){if(!G[Zn.crossTileID])if(je)L.placements[Zn.crossTileID]=new tn(!1,!1,!1);else{var Ar,Fr=!1,ar=!1,fr=!0,Er=null,yr={box:null,offscreen:null},zr={box:null,offscreen:null},Vr=null,Jr=null,Qr=0,ri=0,ai=0;pr.textFeatureIndex?Qr=pr.textFeatureIndex:Zn.useRuntimeCollisionCircles&&(Qr=Zn.featureIndex),pr.verticalTextFeatureIndex&&(ri=pr.verticalTextFeatureIndex);var Mi=pr.textBox;if(Mi){var Vi=function(Ni){var Za=o.WritingMode.horizontal;if(Q.allowVerticalPlacement&&!Ni&&L.prevPlacement){var fa=L.prevPlacement.placedOrientations[Zn.crossTileID];fa&&(L.placedOrientations[Zn.crossTileID]=fa,Za=fa,L.markUsedOrientation(Q,Za,Zn))}return Za},Aa=function(Ni,Za){if(Q.allowVerticalPlacement&&Zn.numVerticalGlyphVertices>0&&pr.verticalTextBox)for(var fa=0,El=Q.writingModes;fa<El.length&&(El[fa]===o.WritingMode.vertical?(yr=Za(),zr=yr):yr=Ni(),!(yr&&yr.box&&yr.box.length));fa+=1);else yr=Ni()};if(ne.get("text-variable-anchor")){var ia=ne.get("text-variable-anchor");if(L.prevPlacement&&L.prevPlacement.variableOffsets[Zn.crossTileID]){var va=L.prevPlacement.variableOffsets[Zn.crossTileID];ia.indexOf(va.anchor)>0&&(ia=ia.filter(function(Ni){return Ni!==va.anchor})).unshift(va.anchor)}var Ci=function(Ni,Za,fa){for(var El=Ni.x2-Ni.x1,bc=Ni.y2-Ni.y1,Du=Zn.textBoxScale,_c=Zt&&!At?Za:null,wl={box:[],offscreen:!1},wc=St?2*ia.length:ia.length,Tl=0;Tl<wc;++Tl){var zu=ia[Tl%ia.length],Ru=Tl>=ia.length,Qs=L.attemptAnchorPlacement(zu,Ni,El,bc,Du,Ft,Ot,Ie,ce,lt,Ru,Zn,Q,fa,_c);if(Qs&&(wl=Qs.placedGlyphBoxes)&&wl.box&&wl.box.length){Fr=!0,Er=Qs.shift;break}}return wl};Aa(function(){return Ci(Mi,pr.iconBox,o.WritingMode.horizontal)},function(){var Ni=pr.verticalTextBox,Za=yr&&yr.box&&yr.box.length;return Q.allowVerticalPlacement&&!Za&&Zn.numVerticalGlyphVertices>0&&Ni?Ci(Ni,pr.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),yr&&(Fr=yr.box,fr=yr.offscreen);var si=Vi(yr&&yr.box);if(!Fr&&L.prevPlacement){var Fi=L.prevPlacement.variableOffsets[Zn.crossTileID];Fi&&(L.variableOffsets[Zn.crossTileID]=Fi,L.markUsedJustification(Q,Fi.anchor,Zn,si))}}else{var xi=function(Ni,Za){var fa=L.collisionIndex.placeCollisionBox(Ni,St,Ie,ce,lt.predicate);return fa&&fa.box&&fa.box.length&&(L.markUsedOrientation(Q,Za,Zn),L.placedOrientations[Zn.crossTileID]=Za),fa};Aa(function(){return xi(Mi,o.WritingMode.horizontal)},function(){var Ni=pr.verticalTextBox;return Q.allowVerticalPlacement&&Zn.numVerticalGlyphVertices>0&&Ni?xi(Ni,o.WritingMode.vertical):{box:null,offscreen:null}}),Vi(yr&&yr.box&&yr.box.length)}}if(Fr=(Ar=yr)&&Ar.box&&Ar.box.length>0,fr=Ar&&Ar.offscreen,Zn.useRuntimeCollisionCircles){var ci=Q.text.placedSymbolArray.get(Zn.centerJustifiedTextSymbolIndex),Bi=o.evaluateSizeForFeature(Q.textSizeData,$e,ci),qi=ne.get("text-padding"),ea=Zn.collisionCircleDiameter;Vr=L.collisionIndex.placeCollisionCircles(St,ci,Q.lineVertexArray,Q.glyphOffsetArray,Bi,ce,ye,Le,H,Ot,lt.predicate,ea,qi),Fr=St||Vr.circles.length>0&&!Vr.collisionDetected,fr=fr&&Vr.offscreen}if(pr.iconFeatureIndex&&(ai=pr.iconFeatureIndex),pr.iconBox){var Es=function(Ni){var Za=Zt&&Er?Rn(Ni,Er.x,Er.y,Ft,Ot,L.transform.angle):Ni;return L.collisionIndex.placeCollisionBox(Za,At,Ie,ce,lt.predicate)};ar=zr&&zr.box&&zr.box.length&&pr.verticalIconBox?(Jr=Es(pr.verticalIconBox)).box.length>0:(Jr=Es(pr.iconBox)).box.length>0,fr=fr&&Jr.offscreen}var Ls=ft||Zn.numHorizontalGlyphVertices===0&&Zn.numVerticalGlyphVertices===0,fi=_t||Zn.numIconVertices===0;if(Ls||fi?fi?Ls||(ar=ar&&Fr):Fr=ar&&Fr:ar=Fr=ar&&Fr,Fr&&Ar&&Ar.box&&(zr&&zr.box&&ri?L.collisionIndex.insertCollisionBox(Ar.box,ne.get("text-ignore-placement"),Q.bucketInstanceId,ri,lt.ID):L.collisionIndex.insertCollisionBox(Ar.box,ne.get("text-ignore-placement"),Q.bucketInstanceId,Qr,lt.ID)),ar&&Jr&&L.collisionIndex.insertCollisionBox(Jr.box,ne.get("icon-ignore-placement"),Q.bucketInstanceId,ai,lt.ID),Vr&&(Fr&&L.collisionIndex.insertCollisionCircles(Vr.circles,ne.get("text-ignore-placement"),Q.bucketInstanceId,Qr,lt.ID),H)){var Js=Q.bucketInstanceId,qs=L.collisionCircleArrays[Js];qs===void 0&&(qs=L.collisionCircleArrays[Js]=new xn);for(var Yo=0;Yo<Vr.circles.length;Yo+=4)qs.circles.push(Vr.circles[Yo+0]),qs.circles.push(Vr.circles[Yo+1]),qs.circles.push(Vr.circles[Yo+2]),qs.circles.push(Vr.collisionDetected?1:0)}L.placements[Zn.crossTileID]=new tn(Fr||Nt,ar||gn,fr||Q.justReloaded),G[Zn.crossTileID]=!0}};if(Ht)for(var Cn=Q.getSortedSymbolIndexes(this.transform.angle),Dn=Cn.length-1;Dn>=0;--Dn){var Wn=Cn[Dn];yn(Q.symbolInstances.get(Wn),Q.collisionArrays[Wn])}else for(var sr=B.symbolInstanceStart;sr<B.symbolInstanceEnd;sr++)yn(Q.symbolInstances.get(sr),Q.collisionArrays[sr]);if(H&&Q.bucketInstanceId in this.collisionCircleArrays){var mr=this.collisionCircleArrays[Q.bucketInstanceId];o.invert(mr.invProjMatrix,ce),mr.viewportMatrix=this.collisionIndex.getViewportMatrix()}Q.justReloaded=!1},Nn.prototype.markUsedJustification=function(B,G,H,L){var q,Q={left:H.leftJustifiedTextSymbolIndex,center:H.centerJustifiedTextSymbolIndex,right:H.rightJustifiedTextSymbolIndex};q=L===o.WritingMode.vertical?H.verticalPlacedTextSymbolIndex:Q[o.getAnchorJustification(G)];for(var ne=0,ce=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex,H.verticalPlacedTextSymbolIndex];ne<ce.length;ne+=1){var ye=ce[ne];ye>=0&&(B.text.placedSymbolArray.get(ye).crossTileID=q>=0&&ye!==q?0:H.crossTileID)}},Nn.prototype.markUsedOrientation=function(B,G,H){for(var L=G===o.WritingMode.horizontal||G===o.WritingMode.horizontalOnly?G:0,q=G===o.WritingMode.vertical?G:0,Q=0,ne=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex];Q<ne.length;Q+=1){var ce=ne[Q];B.text.placedSymbolArray.get(ce).placedOrientation=L}H.verticalPlacedTextSymbolIndex&&(B.text.placedSymbolArray.get(H.verticalPlacedTextSymbolIndex).placedOrientation=q)},Nn.prototype.commit=function(B){this.commitTime=B,this.zoomAtLastRecencyCheck=this.transform.zoom;var G=this.prevPlacement,H=!1;this.prevZoomAdjustment=G?G.zoomAdjustment(this.transform.zoom):0;var L=G?G.symbolFadeChange(B):1,q=G?G.opacities:{},Q=G?G.variableOffsets:{},ne=G?G.placedOrientations:{};for(var ce in this.placements){var ye=this.placements[ce],Le=q[ce];Le?(this.opacities[ce]=new jt(Le,L,ye.text,ye.icon),H=H||ye.text!==Le.text.placed||ye.icon!==Le.icon.placed):(this.opacities[ce]=new jt(null,L,ye.text,ye.icon,ye.skipFade),H=H||ye.text||ye.icon)}for(var Ie in q){var je=q[Ie];if(!this.opacities[Ie]){var qe=new jt(je,L,!1,!1);qe.isHidden()||(this.opacities[Ie]=qe,H=H||je.text.placed||je.icon.placed)}}for(var $e in Q)this.variableOffsets[$e]||!this.opacities[$e]||this.opacities[$e].isHidden()||(this.variableOffsets[$e]=Q[$e]);for(var lt in ne)this.placedOrientations[lt]||!this.opacities[lt]||this.opacities[lt].isHidden()||(this.placedOrientations[lt]=ne[lt]);H?this.lastPlacementChangeTime=B:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=G?G.lastPlacementChangeTime:B)},Nn.prototype.updateLayerOpacities=function(B,G){for(var H={},L=0,q=G;L<q.length;L+=1){var Q=q[L],ne=Q.getBucket(B);ne&&Q.latestFeatureIndex&&B.id===ne.layerIds[0]&&this.updateBucketOpacities(ne,H,Q.collisionBoxArray)}},Nn.prototype.updateBucketOpacities=function(B,G,H){var L=this;B.hasTextData()&&B.text.opacityVertexArray.clear(),B.hasIconData()&&B.icon.opacityVertexArray.clear(),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexArray.clear(),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexArray.clear();var q=B.layers[0].layout,Q=new jt(null,0,!1,!1,!0),ne=q.get("text-allow-overlap"),ce=q.get("icon-allow-overlap"),ye=q.get("text-variable-anchor"),Le=q.get("text-rotation-alignment")==="map",Ie=q.get("text-pitch-alignment")==="map",je=q.get("icon-text-fit")!=="none",qe=new jt(null,0,ne&&(ce||!B.hasIconData()||q.get("icon-optional")),ce&&(ne||!B.hasTextData()||q.get("text-optional")),!0);!B.collisionArrays&&H&&(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData())&&B.deserializeCollisionBoxes(H);for(var $e=function(St,At,Ft){for(var Ot=0;Ot<At/4;Ot++)St.opacityVertexArray.emplaceBack(Ft)},lt=function(St){var At=B.symbolInstances.get(St),Ft=At.numHorizontalGlyphVertices,Ot=At.numVerticalGlyphVertices,Zt=At.crossTileID,Ht=G[Zt],Nt=L.opacities[Zt];Ht?Nt=Q:Nt||(Nt=qe,L.opacities[Zt]=Nt),G[Zt]=!0;var gn=Ft>0||Ot>0,yn=At.numIconVertices>0,Cn=L.placedOrientations[At.crossTileID],Dn=Cn===o.WritingMode.vertical,Wn=Cn===o.WritingMode.horizontal||Cn===o.WritingMode.horizontalOnly;if(gn){var sr=_n(Nt.text),mr=Dn?sn:sr;$e(B.text,Ft,mr);var Zn=Wn?sn:sr;$e(B.text,Ot,Zn);var pr=Nt.text.isHidden();[At.rightJustifiedTextSymbolIndex,At.centerJustifiedTextSymbolIndex,At.leftJustifiedTextSymbolIndex].forEach(function(ai){ai>=0&&(B.text.placedSymbolArray.get(ai).hidden=pr||Dn?1:0)}),At.verticalPlacedTextSymbolIndex>=0&&(B.text.placedSymbolArray.get(At.verticalPlacedTextSymbolIndex).hidden=pr||Wn?1:0);var Ar=L.variableOffsets[At.crossTileID];Ar&&L.markUsedJustification(B,Ar.anchor,At,Cn);var Fr=L.placedOrientations[At.crossTileID];Fr&&(L.markUsedJustification(B,"left",At,Fr),L.markUsedOrientation(B,Fr,At))}if(yn){var ar=_n(Nt.icon),fr=!(je&&At.verticalPlacedIconSymbolIndex&&Dn);if(At.placedIconSymbolIndex>=0){var Er=fr?ar:sn;$e(B.icon,At.numIconVertices,Er),B.icon.placedSymbolArray.get(At.placedIconSymbolIndex).hidden=Nt.icon.isHidden()}if(At.verticalPlacedIconSymbolIndex>=0){var yr=fr?sn:ar;$e(B.icon,At.numVerticalIconVertices,yr),B.icon.placedSymbolArray.get(At.verticalPlacedIconSymbolIndex).hidden=Nt.icon.isHidden()}}if(B.hasIconCollisionBoxData()||B.hasTextCollisionBoxData()){var zr=B.collisionArrays[St];if(zr){var Vr=new o.Point(0,0);if(zr.textBox||zr.verticalTextBox){var Jr=!0;if(ye){var Qr=L.variableOffsets[Zt];Qr?(Vr=Gn(Qr.anchor,Qr.width,Qr.height,Qr.textOffset,Qr.textBoxScale),Le&&Vr._rotate(Ie?L.transform.angle:-L.transform.angle)):Jr=!1}zr.textBox&&ir(B.textCollisionBox.collisionVertexArray,Nt.text.placed,!Jr||Dn,Vr.x,Vr.y),zr.verticalTextBox&&ir(B.textCollisionBox.collisionVertexArray,Nt.text.placed,!Jr||Wn,Vr.x,Vr.y)}var ri=Boolean(!Wn&&zr.verticalIconBox);zr.iconBox&&ir(B.iconCollisionBox.collisionVertexArray,Nt.icon.placed,ri,je?Vr.x:0,je?Vr.y:0),zr.verticalIconBox&&ir(B.iconCollisionBox.collisionVertexArray,Nt.icon.placed,!ri,je?Vr.x:0,je?Vr.y:0)}}},ft=0;ft<B.symbolInstances.length;ft++)lt(ft);if(B.sortFeatures(this.transform.angle),this.retainedQueryData[B.bucketInstanceId]&&(this.retainedQueryData[B.bucketInstanceId].featureSortOrder=B.featureSortOrder),B.hasTextData()&&B.text.opacityVertexBuffer&&B.text.opacityVertexBuffer.updateData(B.text.opacityVertexArray),B.hasIconData()&&B.icon.opacityVertexBuffer&&B.icon.opacityVertexBuffer.updateData(B.icon.opacityVertexArray),B.hasIconCollisionBoxData()&&B.iconCollisionBox.collisionVertexBuffer&&B.iconCollisionBox.collisionVertexBuffer.updateData(B.iconCollisionBox.collisionVertexArray),B.hasTextCollisionBoxData()&&B.textCollisionBox.collisionVertexBuffer&&B.textCollisionBox.collisionVertexBuffer.updateData(B.textCollisionBox.collisionVertexArray),B.bucketInstanceId in this.collisionCircleArrays){var _t=this.collisionCircleArrays[B.bucketInstanceId];B.placementInvProjMatrix=_t.invProjMatrix,B.placementViewportMatrix=_t.viewportMatrix,B.collisionCircleArray=_t.circles,delete this.collisionCircleArrays[B.bucketInstanceId]}},Nn.prototype.symbolFadeChange=function(B){return this.fadeDuration===0?1:(B-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Nn.prototype.zoomAdjustment=function(B){return Math.max(0,(this.transform.zoom-B)/1.5)},Nn.prototype.hasTransitions=function(B){return this.stale||B-this.lastPlacementChangeTime<this.fadeDuration},Nn.prototype.stillRecent=function(B,G){var H=this.zoomAtLastRecencyCheck===G?1-this.zoomAdjustment(G):1;return this.zoomAtLastRecencyCheck=G,this.commitTime+this.fadeDuration*H>B},Nn.prototype.setStale=function(){this.stale=!0};var Gt=Math.pow(2,25),dn=Math.pow(2,24),Pt=Math.pow(2,17),Yt=Math.pow(2,16),Qt=Math.pow(2,9),mn=Math.pow(2,8),vn=Math.pow(2,1);function _n(B){if(B.opacity===0&&!B.placed)return 0;if(B.opacity===1&&B.placed)return 4294967295;var G=B.placed?1:0,H=Math.floor(127*B.opacity);return H*Gt+G*dn+H*Pt+G*Yt+H*Qt+G*mn+H*vn+G}var sn=0,Kt=function(B){this._sortAcrossTiles=B.layout.get("symbol-z-order")!=="viewport-y"&&B.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Kt.prototype.continuePlacement=function(B,G,H,L,q){for(var Q=this._bucketParts;this._currentTileIndex<B.length;){var ne=B[this._currentTileIndex];if(G.getBucketParts(Q,L,ne,this._sortAcrossTiles),this._currentTileIndex++,q())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Q.sort(function(ye,Le){return ye.sortKey-Le.sortKey}));this._currentPartIndex<Q.length;){var ce=Q[this._currentPartIndex];if(G.placeLayerBucketPart(ce,this._seenCrossTileIDs,H),this._currentPartIndex++,q())return!0}return!1};var Jt=function(B,G,H,L,q,Q,ne){this.placement=new Nn(B,q,Q,ne),this._currentPlacementIndex=G.length-1,this._forceFullPlacement=H,this._showCollisionBoxes=L,this._done=!1};Jt.prototype.isDone=function(){return this._done},Jt.prototype.continuePlacement=function(B,G,H){for(var L=this,q=o.browser.now(),Q=function(){var ye=o.browser.now()-q;return!L._forceFullPlacement&&ye>2};this._currentPlacementIndex>=0;){var ne=G[B[this._currentPlacementIndex]],ce=this.placement.collisionIndex.transform.zoom;if(ne.type==="symbol"&&(!ne.minzoom||ne.minzoom<=ce)&&(!ne.maxzoom||ne.maxzoom>ce)){if(this._inProgressLayer||(this._inProgressLayer=new Kt(ne)),this._inProgressLayer.continuePlacement(H[ne.source],this.placement,this._showCollisionBoxes,ne,Q))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Jt.prototype.commit=function(B){return this.placement.commit(B),this.placement};var on=512/o.EXTENT/2,fn=function(B,G,H){this.tileID=B,this.indexedSymbolInstances={},this.bucketInstanceId=H;for(var L=0;L<G.length;L++){var q=G.get(L),Q=q.key;this.indexedSymbolInstances[Q]||(this.indexedSymbolInstances[Q]=[]),this.indexedSymbolInstances[Q].push({crossTileID:q.crossTileID,coord:this.getScaledCoordinates(q,B)})}};fn.prototype.getScaledCoordinates=function(B,G){var H=G.canonical.z-this.tileID.canonical.z,L=on/Math.pow(2,H);return{x:Math.floor((G.canonical.x*o.EXTENT+B.anchorX)*L),y:Math.floor((G.canonical.y*o.EXTENT+B.anchorY)*L)}},fn.prototype.findMatches=function(B,G,H){for(var L=this.tileID.canonical.z<G.canonical.z?1:Math.pow(2,this.tileID.canonical.z-G.canonical.z),q=0;q<B.length;q++){var Q=B.get(q);if(!Q.crossTileID){var ne=this.indexedSymbolInstances[Q.key];if(ne)for(var ce=this.getScaledCoordinates(Q,G),ye=0,Le=ne;ye<Le.length;ye+=1){var Ie=Le[ye];if(Math.abs(Ie.coord.x-ce.x)<=L&&Math.abs(Ie.coord.y-ce.y)<=L&&!H[Ie.crossTileID]){H[Ie.crossTileID]=!0,Q.crossTileID=Ie.crossTileID;break}}}}};var En=function(){this.maxCrossTileID=0};En.prototype.generate=function(){return++this.maxCrossTileID};var On=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};On.prototype.handleWrapJump=function(B){var G=Math.round((B-this.lng)/360);if(G!==0)for(var H in this.indexes){var L=this.indexes[H],q={};for(var Q in L){var ne=L[Q];ne.tileID=ne.tileID.unwrapTo(ne.tileID.wrap+G),q[ne.tileID.key]=ne}this.indexes[H]=q}this.lng=B},On.prototype.addBucket=function(B,G,H){if(this.indexes[B.overscaledZ]&&this.indexes[B.overscaledZ][B.key]){if(this.indexes[B.overscaledZ][B.key].bucketInstanceId===G.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(B.overscaledZ,this.indexes[B.overscaledZ][B.key])}for(var L=0;L<G.symbolInstances.length;L++)G.symbolInstances.get(L).crossTileID=0;this.usedCrossTileIDs[B.overscaledZ]||(this.usedCrossTileIDs[B.overscaledZ]={});var q=this.usedCrossTileIDs[B.overscaledZ];for(var Q in this.indexes){var ne=this.indexes[Q];if(Number(Q)>B.overscaledZ)for(var ce in ne){var ye=ne[ce];ye.tileID.isChildOf(B)&&ye.findMatches(G.symbolInstances,B,q)}else{var Le=ne[B.scaledTo(Number(Q)).key];Le&&Le.findMatches(G.symbolInstances,B,q)}}for(var Ie=0;Ie<G.symbolInstances.length;Ie++){var je=G.symbolInstances.get(Ie);je.crossTileID||(je.crossTileID=H.generate(),q[je.crossTileID]=!0)}return this.indexes[B.overscaledZ]===void 0&&(this.indexes[B.overscaledZ]={}),this.indexes[B.overscaledZ][B.key]=new fn(B,G.symbolInstances,G.bucketInstanceId),!0},On.prototype.removeBucketCrossTileIDs=function(B,G){for(var H in G.indexedSymbolInstances)for(var L=0,q=G.indexedSymbolInstances[H];L<q.length;L+=1){var Q=q[L];delete this.usedCrossTileIDs[B][Q.crossTileID]}},On.prototype.removeStaleBuckets=function(B){var G=!1;for(var H in this.indexes){var L=this.indexes[H];for(var q in L)B[L[q].bucketInstanceId]||(this.removeBucketCrossTileIDs(H,L[q]),delete L[q],G=!0)}return G};var Vn=function(){this.layerIndexes={},this.crossTileIDs=new En,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Vn.prototype.addLayer=function(B,G,H){var L=this.layerIndexes[B.id];L===void 0&&(L=this.layerIndexes[B.id]=new On);var q=!1,Q={};L.handleWrapJump(H);for(var ne=0,ce=G;ne<ce.length;ne+=1){var ye=ce[ne],Le=ye.getBucket(B);Le&&B.id===Le.layerIds[0]&&(Le.bucketInstanceId||(Le.bucketInstanceId=++this.maxBucketInstanceId),L.addBucket(ye.tileID,Le,this.crossTileIDs)&&(q=!0),Q[Le.bucketInstanceId]=!0)}return L.removeStaleBuckets(Q)&&(q=!0),q},Vn.prototype.pruneUnusedLayers=function(B){var G={};for(var H in B.forEach(function(L){G[L]=!0}),this.layerIndexes)G[H]||delete this.layerIndexes[H]};var jn=function(B,G){return o.emitValidationErrors(B,G&&G.filter(function(H){return H.identifier!=="source.canvas"}))},Kn=o.pick(xt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Yn=o.pick(xt,["setCenter","setZoom","setBearing","setPitch"]),nr=function(){var B={},G=o.styleSpec.$version;for(var H in o.styleSpec.$root){var L=o.styleSpec.$root[H];if(L.required){var q;(q=H==="version"?G:L.type==="array"?[]:{})!=null&&(B[H]=q)}}return B}(),rr=function(B){function G(H,L){var q=this;L===void 0&&(L={}),B.call(this),this.map=H,this.dispatcher=new P(gt(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new y(H._requestManager,L.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Vn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var Q=this;this._rtlTextPluginCallback=G.registerForPluginStateChange(function(ne){var ce={pluginStatus:ne.pluginStatus,pluginURL:ne.pluginURL};Q.dispatcher.broadcast("syncRTLPluginState",ce,function(ye,Le){if(o.triggerPluginCompletionEvent(ye),Le&&Le.every(function(je){return je}))for(var Ie in Q.sourceCaches)Q.sourceCaches[Ie].reload()})}),this.on("data",function(ne){if(ne.dataType==="source"&&ne.sourceDataType==="metadata"){var ce=q.sourceCaches[ne.sourceId];if(ce){var ye=ce.getSource();if(ye&&ye.vectorLayerIds)for(var Le in q._layers){var Ie=q._layers[Le];Ie.source===ye.id&&q._validateLayer(Ie)}}}})}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.loadURL=function(H,L){var q=this;L===void 0&&(L={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var Q=typeof L.validate=="boolean"?L.validate:!o.isMapboxURL(H);H=this.map._requestManager.normalizeStyleURL(H,L.accessToken);var ne=this.map._requestManager.transformRequest(H,o.ResourceType.Style);this._request=o.getJSON(ne,function(ce,ye){q._request=null,ce?q.fire(new o.ErrorEvent(ce)):ye&&q._load(ye,Q)})},G.prototype.loadJSON=function(H,L){var q=this;L===void 0&&(L={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){q._request=null,q._load(H,L.validate!==!1)})},G.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(nr,!1)},G.prototype._load=function(H,L){if(!L||!jn(this,o.validateStyle(H))){for(var q in this._loaded=!0,this.stylesheet=H,H.sources)this.addSource(q,H.sources[q],{validate:!1});H.sprite?this._loadSprite(H.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(H.glyphs);var Q=Mt(this.stylesheet.layers);this._order=Q.map(function(Le){return Le.id}),this._layers={},this._serializedLayers={};for(var ne=0,ce=Q;ne<ce.length;ne+=1){var ye=ce[ne];(ye=o.createStyleLayer(ye)).setEventedParent(this,{layer:{id:ye.id}}),this._layers[ye.id]=ye,this._serializedLayers[ye.id]=ye.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},G.prototype._loadSprite=function(H){var L=this;this._spriteRequest=function(q,Q,ne){var ce,ye,Le,Ie=o.browser.devicePixelRatio>1?"@2x":"",je=o.getJSON(Q.transformRequest(Q.normalizeSpriteURL(q,Ie,".json"),o.ResourceType.SpriteJSON),function(lt,ft){je=null,Le||(Le=lt,ce=ft,$e())}),qe=o.getImage(Q.transformRequest(Q.normalizeSpriteURL(q,Ie,".png"),o.ResourceType.SpriteImage),function(lt,ft){qe=null,Le||(Le=lt,ye=ft,$e())});function $e(){if(Le)ne(Le);else if(ce&&ye){var lt=o.browser.getImageData(ye),ft={};for(var _t in ce){var St=ce[_t],At=St.width,Ft=St.height,Ot=St.x,Zt=St.y,Ht=St.sdf,Nt=St.pixelRatio,gn=St.stretchX,yn=St.stretchY,Cn=St.content,Dn=new o.RGBAImage({width:At,height:Ft});o.RGBAImage.copy(lt,Dn,{x:Ot,y:Zt},{x:0,y:0},{width:At,height:Ft}),ft[_t]={data:Dn,pixelRatio:Nt,sdf:Ht,stretchX:gn,stretchY:yn,content:Cn}}ne(null,ft)}}return{cancel:function(){je&&(je.cancel(),je=null),qe&&(qe.cancel(),qe=null)}}}(H,this.map._requestManager,function(q,Q){if(L._spriteRequest=null,q)L.fire(new o.ErrorEvent(q));else if(Q)for(var ne in Q)L.imageManager.addImage(ne,Q[ne]);L.imageManager.setLoaded(!0),L._availableImages=L.imageManager.listImages(),L.dispatcher.broadcast("setImages",L._availableImages),L.fire(new o.Event("data",{dataType:"style"}))})},G.prototype._validateLayer=function(H){var L=this.sourceCaches[H.source];if(L){var q=H.sourceLayer;if(q){var Q=L.getSource();(Q.type==="geojson"||Q.vectorLayerIds&&Q.vectorLayerIds.indexOf(q)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+q+'" does not exist on source "'+Q.id+'" as specified by style layer "'+H.id+'"')))}}},G.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var H in this.sourceCaches)if(!this.sourceCaches[H].loaded())return!1;return!!this.imageManager.isLoaded()},G.prototype._serializeLayers=function(H){for(var L=[],q=0,Q=H;q<Q.length;q+=1){var ne=Q[q],ce=this._layers[ne];ce.type!=="custom"&&L.push(ce.serialize())}return L},G.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var H in this.sourceCaches)if(this.sourceCaches[H].hasTransition())return!0;for(var L in this._layers)if(this._layers[L].hasTransition())return!0;return!1},G.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},G.prototype.update=function(H){if(this._loaded){var L=this._changed;if(this._changed){var q=Object.keys(this._updatedLayers),Q=Object.keys(this._removedLayers);for(var ne in(q.length||Q.length)&&this._updateWorkerLayers(q,Q),this._updatedSources){var ce=this._updatedSources[ne];ce==="reload"?this._reloadSource(ne):ce==="clear"&&this._clearSource(ne)}for(var ye in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[ye].updateTransitions(H);this.light.updateTransitions(H),this._resetUpdates()}var Le={};for(var Ie in this.sourceCaches){var je=this.sourceCaches[Ie];Le[Ie]=je.used,je.used=!1}for(var qe=0,$e=this._order;qe<$e.length;qe+=1){var lt=$e[qe],ft=this._layers[lt];ft.recalculate(H,this._availableImages),!ft.isHidden(H.zoom)&&ft.source&&(this.sourceCaches[ft.source].used=!0)}for(var _t in Le){var St=this.sourceCaches[_t];Le[_t]!==St.used&&St.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:_t}))}this.light.recalculate(H),this.z=H.zoom,L&&this.fire(new o.Event("data",{dataType:"style"}))}},G.prototype._updateTilesForChangedImages=function(){var H=Object.keys(this._changedImages);if(H.length){for(var L in this.sourceCaches)this.sourceCaches[L].reloadTilesForDependencies(["icons","patterns"],H);this._changedImages={}}},G.prototype._updateWorkerLayers=function(H,L){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(H),removedIds:L})},G.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},G.prototype.setState=function(H){var L=this;if(this._checkLoaded(),jn(this,o.validateStyle(H)))return!1;(H=o.clone$1(H)).layers=Mt(H.layers);var q=Vt(this.serialize(),H).filter(function(ne){return!(ne.command in Yn)});if(q.length===0)return!1;var Q=q.filter(function(ne){return!(ne.command in Kn)});if(Q.length>0)throw new Error("Unimplemented: "+Q.map(function(ne){return ne.command}).join(", ")+".");return q.forEach(function(ne){ne.command!=="setTransition"&&L[ne.command].apply(L,ne.args)}),this.stylesheet=H,!0},G.prototype.addImage=function(H,L){if(this.getImage(H))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(H,L),this._afterImageUpdated(H)},G.prototype.updateImage=function(H,L){this.imageManager.updateImage(H,L)},G.prototype.getImage=function(H){return this.imageManager.getImage(H)},G.prototype.removeImage=function(H){if(!this.getImage(H))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(H),this._afterImageUpdated(H)},G.prototype._afterImageUpdated=function(H){this._availableImages=this.imageManager.listImages(),this._changedImages[H]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},G.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},G.prototype.addSource=function(H,L,q){var Q=this;if(q===void 0&&(q={}),this._checkLoaded(),this.sourceCaches[H]!==void 0)throw new Error("There is already a source with this ID");if(!L.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(L).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(L.type)>=0&&this._validate(o.validateStyle.source,"sources."+H,L,null,q))){this.map&&this.map._collectResourceTiming&&(L.collectResourceTiming=!0);var ne=this.sourceCaches[H]=new at(H,L,this.dispatcher);ne.style=this,ne.setEventedParent(this,function(){return{isSourceLoaded:Q.loaded(),source:ne.serialize(),sourceId:H}}),ne.onAdd(this.map),this._changed=!0}},G.prototype.removeSource=function(H){if(this._checkLoaded(),this.sourceCaches[H]===void 0)throw new Error("There is no source with this ID");for(var L in this._layers)if(this._layers[L].source===H)return this.fire(new o.ErrorEvent(new Error('Source "'+H+'" cannot be removed while layer "'+L+'" is using it.')));var q=this.sourceCaches[H];delete this.sourceCaches[H],delete this._updatedSources[H],q.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:H})),q.setEventedParent(null),q.clearTiles(),q.onRemove&&q.onRemove(this.map),this._changed=!0},G.prototype.setGeoJSONSourceData=function(H,L){this._checkLoaded(),this.sourceCaches[H].getSource().setData(L),this._changed=!0},G.prototype.getSource=function(H){return this.sourceCaches[H]&&this.sourceCaches[H].getSource()},G.prototype.addLayer=function(H,L,q){q===void 0&&(q={}),this._checkLoaded();var Q=H.id;if(this.getLayer(Q))this.fire(new o.ErrorEvent(new Error('Layer with id "'+Q+'" already exists on this map')));else{var ne;if(H.type==="custom"){if(jn(this,o.validateCustomStyleLayer(H)))return;ne=o.createStyleLayer(H)}else{if(typeof H.source=="object"&&(this.addSource(Q,H.source),H=o.clone$1(H),H=o.extend(H,{source:Q})),this._validate(o.validateStyle.layer,"layers."+Q,H,{arrayIndex:-1},q))return;ne=o.createStyleLayer(H),this._validateLayer(ne),ne.setEventedParent(this,{layer:{id:Q}}),this._serializedLayers[ne.id]=ne.serialize()}var ce=L?this._order.indexOf(L):this._order.length;if(L&&ce===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+L+'" does not exist on this map.')));else{if(this._order.splice(ce,0,Q),this._layerOrderChanged=!0,this._layers[Q]=ne,this._removedLayers[Q]&&ne.source&&ne.type!=="custom"){var ye=this._removedLayers[Q];delete this._removedLayers[Q],ye.type!==ne.type?this._updatedSources[ne.source]="clear":(this._updatedSources[ne.source]="reload",this.sourceCaches[ne.source].pause())}this._updateLayer(ne),ne.onAdd&&ne.onAdd(this.map)}}},G.prototype.moveLayer=function(H,L){if(this._checkLoaded(),this._changed=!0,this._layers[H]){if(H!==L){var q=this._order.indexOf(H);this._order.splice(q,1);var Q=L?this._order.indexOf(L):this._order.length;L&&Q===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+L+'" does not exist on this map.'))):(this._order.splice(Q,0,H),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be moved.")))},G.prototype.removeLayer=function(H){this._checkLoaded();var L=this._layers[H];if(L){L.setEventedParent(null);var q=this._order.indexOf(H);this._order.splice(q,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[H]=L,delete this._layers[H],delete this._serializedLayers[H],delete this._updatedLayers[H],delete this._updatedPaintProps[H],L.onRemove&&L.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be removed.")))},G.prototype.getLayer=function(H){return this._layers[H]},G.prototype.hasLayer=function(H){return H in this._layers},G.prototype.setLayerZoomRange=function(H,L,q){this._checkLoaded();var Q=this.getLayer(H);Q?Q.minzoom===L&&Q.maxzoom===q||(L!=null&&(Q.minzoom=L),q!=null&&(Q.maxzoom=q),this._updateLayer(Q)):this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot have zoom extent.")))},G.prototype.setFilter=function(H,L,q){q===void 0&&(q={}),this._checkLoaded();var Q=this.getLayer(H);if(Q){if(!o.deepEqual(Q.filter,L))return L==null?(Q.filter=void 0,void this._updateLayer(Q)):void(this._validate(o.validateStyle.filter,"layers."+Q.id+".filter",L,null,q)||(Q.filter=o.clone$1(L),this._updateLayer(Q)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be filtered.")))},G.prototype.getFilter=function(H){return o.clone$1(this.getLayer(H).filter)},G.prototype.setLayoutProperty=function(H,L,q,Q){Q===void 0&&(Q={}),this._checkLoaded();var ne=this.getLayer(H);ne?o.deepEqual(ne.getLayoutProperty(L),q)||(ne.setLayoutProperty(L,q,Q),this._updateLayer(ne)):this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getLayoutProperty=function(H,L){var q=this.getLayer(H);if(q)return q.getLayoutProperty(L);this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style.")))},G.prototype.setPaintProperty=function(H,L,q,Q){Q===void 0&&(Q={}),this._checkLoaded();var ne=this.getLayer(H);ne?o.deepEqual(ne.getPaintProperty(L),q)||(ne.setPaintProperty(L,q,Q)&&this._updateLayer(ne),this._changed=!0,this._updatedPaintProps[H]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},G.prototype.getPaintProperty=function(H,L){return this.getLayer(H).getPaintProperty(L)},G.prototype.setFeatureState=function(H,L){this._checkLoaded();var q=H.source,Q=H.sourceLayer,ne=this.sourceCaches[q];if(ne!==void 0){var ce=ne.getSource().type;ce==="geojson"&&Q?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ce!=="vector"||Q?(H.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),ne.setFeatureState(Q,H.id,L)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+q+"' does not exist in the map's style.")))},G.prototype.removeFeatureState=function(H,L){this._checkLoaded();var q=H.source,Q=this.sourceCaches[q];if(Q!==void 0){var ne=Q.getSource().type,ce=ne==="vector"?H.sourceLayer:void 0;ne!=="vector"||ce?L&&typeof H.id!="string"&&typeof H.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):Q.removeFeatureState(ce,H.id,L):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+q+"' does not exist in the map's style.")))},G.prototype.getFeatureState=function(H){this._checkLoaded();var L=H.source,q=H.sourceLayer,Q=this.sourceCaches[L];if(Q!==void 0){if(Q.getSource().type!=="vector"||q)return H.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),Q.getFeatureState(q,H.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+L+"' does not exist in the map's style.")))},G.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},G.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(H){return H.serialize()}),layers:this._serializeLayers(this._order)},function(H){return H!==void 0})},G.prototype._updateLayer=function(H){this._updatedLayers[H.id]=!0,H.source&&!this._updatedSources[H.source]&&this.sourceCaches[H.source].getSource().type!=="raster"&&(this._updatedSources[H.source]="reload",this.sourceCaches[H.source].pause()),this._changed=!0},G.prototype._flattenAndSortRenderedFeatures=function(H){for(var L=this,q=function(Cn){return L._layers[Cn].type==="fill-extrusion"},Q={},ne=[],ce=this._order.length-1;ce>=0;ce--){var ye=this._order[ce];if(q(ye)){Q[ye]=ce;for(var Le=0,Ie=H;Le<Ie.length;Le+=1){var je=Ie[Le][ye];if(je)for(var qe=0,$e=je;qe<$e.length;qe+=1){var lt=$e[qe];ne.push(lt)}}}}ne.sort(function(Cn,Dn){return Dn.intersectionZ-Cn.intersectionZ});for(var ft=[],_t=this._order.length-1;_t>=0;_t--){var St=this._order[_t];if(q(St))for(var At=ne.length-1;At>=0;At--){var Ft=ne[At].feature;if(Q[Ft.layer.id]<_t)break;ft.push(Ft),ne.pop()}else for(var Ot=0,Zt=H;Ot<Zt.length;Ot+=1){var Ht=Zt[Ot][St];if(Ht)for(var Nt=0,gn=Ht;Nt<gn.length;Nt+=1){var yn=gn[Nt];ft.push(yn.feature)}}}return ft},G.prototype.queryRenderedFeatures=function(H,L,q){L&&L.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",L.filter,null,L);var Q={};if(L&&L.layers){if(!Array.isArray(L.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var ne=0,ce=L.layers;ne<ce.length;ne+=1){var ye=ce[ne],Le=this._layers[ye];if(!Le)return this.fire(new o.ErrorEvent(new Error("The layer '"+ye+"' does not exist in the map's style and cannot be queried for features."))),[];Q[Le.source]=!0}}var Ie=[];for(var je in L.availableImages=this._availableImages,this.sourceCaches)L.layers&&!Q[je]||Ie.push(K(this.sourceCaches[je],this._layers,this._serializedLayers,H,L,q));return this.placement&&Ie.push(function(qe,$e,lt,ft,_t,St,At){for(var Ft={},Ot=St.queryRenderedSymbols(ft),Zt=[],Ht=0,Nt=Object.keys(Ot).map(Number);Ht<Nt.length;Ht+=1){var gn=Nt[Ht];Zt.push(At[gn])}Zt.sort(X);for(var yn=function(){var mr=Dn[Cn],Zn=mr.featureIndex.lookupSymbolFeatures(Ot[mr.bucketInstanceId],$e,mr.bucketIndex,mr.sourceLayerIndex,_t.filter,_t.layers,_t.availableImages,qe);for(var pr in Zn){var Ar=Ft[pr]=Ft[pr]||[],Fr=Zn[pr];Fr.sort(function(yr,zr){var Vr=mr.featureSortOrder;if(Vr){var Jr=Vr.indexOf(yr.featureIndex);return Vr.indexOf(zr.featureIndex)-Jr}return zr.featureIndex-yr.featureIndex});for(var ar=0,fr=Fr;ar<fr.length;ar+=1){var Er=fr[ar];Ar.push(Er)}}},Cn=0,Dn=Zt;Cn<Dn.length;Cn+=1)yn();var Wn=function(mr){Ft[mr].forEach(function(Zn){var pr=Zn.feature,Ar=qe[mr],Fr=lt[Ar.source].getFeatureState(pr.layer["source-layer"],pr.id);pr.source=pr.layer.source,pr.layer["source-layer"]&&(pr.sourceLayer=pr.layer["source-layer"]),pr.state=Fr})};for(var sr in Ft)Wn(sr);return Ft}(this._layers,this._serializedLayers,this.sourceCaches,H,L,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ie)},G.prototype.querySourceFeatures=function(H,L){L&&L.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",L.filter,null,L);var q=this.sourceCaches[H];return q?function(Q,ne){for(var ce=Q.getRenderableIds().map(function($e){return Q.getTileByID($e)}),ye=[],Le={},Ie=0;Ie<ce.length;Ie++){var je=ce[Ie],qe=je.tileID.canonical.key;Le[qe]||(Le[qe]=!0,je.querySourceFeatures(ye,ne))}return ye}(q,L):[]},G.prototype.addSourceType=function(H,L,q){return G.getSourceType(H)?q(new Error('A source type called "'+H+'" already exists.')):(G.setSourceType(H,L),L.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:H,url:L.workerSourceURL},q):q(null,null))},G.prototype.getLight=function(){return this.light.getLight()},G.prototype.setLight=function(H,L){L===void 0&&(L={}),this._checkLoaded();var q=this.light.getLight(),Q=!1;for(var ne in H)if(!o.deepEqual(H[ne],q[ne])){Q=!0;break}if(Q){var ce={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(H,L),this.light.updateTransitions(ce)}},G.prototype._validate=function(H,L,q,Q,ne){return ne===void 0&&(ne={}),(!ne||ne.validate!==!1)&&jn(this,H.call(o.validateStyle,o.extend({key:L,style:this.serialize(),value:q,styleSpec:o.styleSpec},Q)))},G.prototype._remove=function(){for(var H in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[H].setEventedParent(null);for(var L in this.sourceCaches)this.sourceCaches[L].clearTiles(),this.sourceCaches[L].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},G.prototype._clearSource=function(H){this.sourceCaches[H].clearTiles()},G.prototype._reloadSource=function(H){this.sourceCaches[H].resume(),this.sourceCaches[H].reload()},G.prototype._updateSources=function(H){for(var L in this.sourceCaches)this.sourceCaches[L].update(H)},G.prototype._generateCollisionBoxes=function(){for(var H in this.sourceCaches)this._reloadSource(H)},G.prototype._updatePlacement=function(H,L,q,Q,ne){ne===void 0&&(ne=!1);for(var ce=!1,ye=!1,Le={},Ie=0,je=this._order;Ie<je.length;Ie+=1){var qe=je[Ie],$e=this._layers[qe];if($e.type==="symbol"){if(!Le[$e.source]){var lt=this.sourceCaches[$e.source];Le[$e.source]=lt.getRenderableIds(!0).map(function(Ot){return lt.getTileByID(Ot)}).sort(function(Ot,Zt){return Zt.tileID.overscaledZ-Ot.tileID.overscaledZ||(Ot.tileID.isLessThan(Zt.tileID)?-1:1)})}var ft=this.crossTileSymbolIndex.addLayer($e,Le[$e.source],H.center.lng);ce=ce||ft}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((ne=ne||this._layerOrderChanged||q===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),H.zoom))&&(this.pauseablePlacement=new Jt(H,this._order,ne,L,q,Q,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Le),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),ye=!0),ce&&this.pauseablePlacement.placement.setStale()),ye||ce)for(var _t=0,St=this._order;_t<St.length;_t+=1){var At=St[_t],Ft=this._layers[At];Ft.type==="symbol"&&this.placement.updateLayerOpacities(Ft,Le[Ft.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},G.prototype._releaseSymbolFadeTiles=function(){for(var H in this.sourceCaches)this.sourceCaches[H].releaseSymbolFadeTiles()},G.prototype.getImages=function(H,L,q){this.imageManager.getImages(L.icons,q),this._updateTilesForChangedImages();var Q=this.sourceCaches[L.source];Q&&Q.setDependencies(L.tileID.key,L.type,L.icons)},G.prototype.getGlyphs=function(H,L,q){this.glyphManager.getGlyphs(L.stacks,q)},G.prototype.getResource=function(H,L,q){return o.makeRequest(L,q)},G}(o.Evented);rr.getSourceType=function(B){return te[B]},rr.setSourceType=function(B,G){te[B]=G},rr.registerForPluginStateChange=o.registerForPluginStateChange;var Jn=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),vr=bi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),lr=bi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),dr=bi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),$n=bi(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),_r=bi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Lr=bi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Gr=bi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),hi=bi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),di=bi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Wi=bi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),gi=bi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),zi=bi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),_a=bi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),wa=bi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),zo=bi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),nl=bi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),xs=bi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),bs=bi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Is=bi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ja=bi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ds=bi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),zs=bi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),_s=bi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),so=bi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),_o=bi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Ro=bi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function bi(B,G){var H=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,L=G.match(/attribute ([\w]+) ([\w]+)/g),q=B.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Q=G.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ne=Q?Q.concat(q):q,ce={};return{fragmentSource:B=B.replace(H,function(ye,Le,Ie,je,qe){return ce[qe]=!0,Le==="define"?`
#ifndef HAS_UNIFORM_u_`+qe+`
varying `+Ie+" "+je+" "+qe+`;
#else
uniform `+Ie+" "+je+" u_"+qe+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+qe+`
    `+Ie+" "+je+" "+qe+" = u_"+qe+`;
#endif
`}),vertexSource:G=G.replace(H,function(ye,Le,Ie,je,qe){var $e=je==="float"?"vec2":"vec4",lt=qe.match(/color/)?"color":$e;return ce[qe]?Le==="define"?`
#ifndef HAS_UNIFORM_u_`+qe+`
uniform lowp float u_`+qe+`_t;
attribute `+Ie+" "+$e+" a_"+qe+`;
varying `+Ie+" "+je+" "+qe+`;
#else
uniform `+Ie+" "+je+" u_"+qe+`;
#endif
`:lt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+qe+" = a_"+qe+`;
#else
    `+Ie+" "+je+" "+qe+" = u_"+qe+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+qe+" = unpack_mix_"+lt+"(a_"+qe+", u_"+qe+`_t);
#else
    `+Ie+" "+je+" "+qe+" = u_"+qe+`;
#endif
`:Le==="define"?`
#ifndef HAS_UNIFORM_u_`+qe+`
uniform lowp float u_`+qe+`_t;
attribute `+Ie+" "+$e+" a_"+qe+`;
#else
uniform `+Ie+" "+je+" u_"+qe+`;
#endif
`:lt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+Ie+" "+je+" "+qe+" = a_"+qe+`;
#else
    `+Ie+" "+je+" "+qe+" = u_"+qe+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qe+`
    `+Ie+" "+je+" "+qe+" = unpack_mix_"+lt+"(a_"+qe+", u_"+qe+`_t);
#else
    `+Ie+" "+je+" "+qe+" = u_"+qe+`;
#endif
`}),staticAttributes:L,staticUniforms:ne}}var $i=Object.freeze({__proto__:null,prelude:vr,background:lr,backgroundPattern:dr,circle:$n,clippingMask:_r,heatmap:Lr,heatmapTexture:Gr,collisionBox:hi,collisionCircle:di,debug:Wi,fill:gi,fillOutline:zi,fillOutlinePattern:_a,fillPattern:wa,fillExtrusion:zo,fillExtrusionPattern:nl,hillshadePrepare:xs,hillshade:bs,line:Is,lineGradient:Ja,linePattern:Ds,lineSDF:zs,raster:_s,symbolIcon:so,symbolSDF:_o,symbolTextAndIcon:Ro}),lo=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Qa(B){for(var G=[],H=0;H<B.length;H++)if(B[H]!==null){var L=B[H].split(" ");G.push(L.pop())}return G}lo.prototype.bind=function(B,G,H,L,q,Q,ne,ce){this.context=B;for(var ye=this.boundPaintVertexBuffers.length!==L.length,Le=0;!ye&&Le<L.length;Le++)this.boundPaintVertexBuffers[Le]!==L[Le]&&(ye=!0);var Ie=!this.vao||this.boundProgram!==G||this.boundLayoutVertexBuffer!==H||ye||this.boundIndexBuffer!==q||this.boundVertexOffset!==Q||this.boundDynamicVertexBuffer!==ne||this.boundDynamicVertexBuffer2!==ce;!B.extVertexArrayObject||Ie?this.freshBind(G,H,L,q,Q,ne,ce):(B.bindVertexArrayOES.set(this.vao),ne&&ne.bind(),q&&q.dynamicDraw&&q.bind(),ce&&ce.bind())},lo.prototype.freshBind=function(B,G,H,L,q,Q,ne){var ce,ye=B.numAttributes,Le=this.context,Ie=Le.gl;if(Le.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Le.extVertexArrayObject.createVertexArrayOES(),Le.bindVertexArrayOES.set(this.vao),ce=0,this.boundProgram=B,this.boundLayoutVertexBuffer=G,this.boundPaintVertexBuffers=H,this.boundIndexBuffer=L,this.boundVertexOffset=q,this.boundDynamicVertexBuffer=Q,this.boundDynamicVertexBuffer2=ne;else{ce=Le.currentNumAttributes||0;for(var je=ye;je<ce;je++)Ie.disableVertexAttribArray(je)}G.enableAttributes(Ie,B);for(var qe=0,$e=H;qe<$e.length;qe+=1)$e[qe].enableAttributes(Ie,B);Q&&Q.enableAttributes(Ie,B),ne&&ne.enableAttributes(Ie,B),G.bind(),G.setVertexAttribPointers(Ie,B,q);for(var lt=0,ft=H;lt<ft.length;lt+=1){var _t=ft[lt];_t.bind(),_t.setVertexAttribPointers(Ie,B,q)}Q&&(Q.bind(),Q.setVertexAttribPointers(Ie,B,q)),L&&L.bind(),ne&&(ne.bind(),ne.setVertexAttribPointers(Ie,B,q)),Le.currentNumAttributes=ye},lo.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Va=function(B,G,H,L,q,Q){var ne=B.gl;this.program=ne.createProgram();for(var ce=Qa(H.staticAttributes),ye=L?L.getBinderAttributes():[],Le=ce.concat(ye),Ie=H.staticUniforms?Qa(H.staticUniforms):[],je=L?L.getBinderUniforms():[],qe=[],$e=0,lt=Ie.concat(je);$e<lt.length;$e+=1){var ft=lt[$e];qe.indexOf(ft)<0&&qe.push(ft)}var _t=L?L.defines():[];Q&&_t.push("#define OVERDRAW_INSPECTOR;");var St=_t.concat(vr.fragmentSource,H.fragmentSource).join(`
`),At=_t.concat(vr.vertexSource,H.vertexSource).join(`
`),Ft=ne.createShader(ne.FRAGMENT_SHADER);if(ne.isContextLost())this.failedToCreate=!0;else{ne.shaderSource(Ft,St),ne.compileShader(Ft),ne.attachShader(this.program,Ft);var Ot=ne.createShader(ne.VERTEX_SHADER);if(ne.isContextLost())this.failedToCreate=!0;else{ne.shaderSource(Ot,At),ne.compileShader(Ot),ne.attachShader(this.program,Ot),this.attributes={};var Zt={};this.numAttributes=Le.length;for(var Ht=0;Ht<this.numAttributes;Ht++)Le[Ht]&&(ne.bindAttribLocation(this.program,Ht,Le[Ht]),this.attributes[Le[Ht]]=Ht);ne.linkProgram(this.program),ne.deleteShader(Ot),ne.deleteShader(Ft);for(var Nt=0;Nt<qe.length;Nt++){var gn=qe[Nt];if(gn&&!Zt[gn]){var yn=ne.getUniformLocation(this.program,gn);yn&&(Zt[gn]=yn)}}this.fixedUniforms=q(B,Zt),this.binderUniforms=L?L.getUniforms(B,Zt):[]}}};function uo(B,G,H){var L=1/er(H,1,G.transform.tileZoom),q=Math.pow(2,H.tileID.overscaledZ),Q=H.tileSize*Math.pow(2,G.transform.tileZoom)/q,ne=Q*(H.tileID.canonical.x+H.tileID.wrap*q),ce=Q*H.tileID.canonical.y;return{u_image:0,u_texsize:H.imageAtlasTexture.size,u_scale:[L,B.fromScale,B.toScale],u_fade:B.t,u_pixel_coord_upper:[ne>>16,ce>>16],u_pixel_coord_lower:[65535&ne,65535&ce]}}Va.prototype.draw=function(B,G,H,L,q,Q,ne,ce,ye,Le,Ie,je,qe,$e,lt,ft){var _t,St=B.gl;if(!this.failedToCreate){for(var At in B.program.set(this.program),B.setDepthMode(H),B.setStencilMode(L),B.setColorMode(q),B.setCullFace(Q),this.fixedUniforms)this.fixedUniforms[At].set(ne[At]);$e&&$e.setUniforms(B,this.binderUniforms,je,{zoom:qe});for(var Ft=(_t={},_t[St.LINES]=2,_t[St.TRIANGLES]=3,_t[St.LINE_STRIP]=1,_t)[G],Ot=0,Zt=Ie.get();Ot<Zt.length;Ot+=1){var Ht=Zt[Ot],Nt=Ht.vaos||(Ht.vaos={});(Nt[ce]||(Nt[ce]=new lo)).bind(B,this,ye,$e?$e.getPaintVertexBuffers():[],Le,Ht.vertexOffset,lt,ft),St.drawElements(G,Ht.primitiveLength*Ft,St.UNSIGNED_SHORT,Ht.primitiveOffset*Ft*2)}}};var qa=function(B,G,H,L){var q=G.style.light,Q=q.properties.get("position"),ne=[Q.x,Q.y,Q.z],ce=o.create$1();q.properties.get("anchor")==="viewport"&&o.fromRotation(ce,-G.transform.angle),o.transformMat3(ne,ne,ce);var ye=q.properties.get("color");return{u_matrix:B,u_lightpos:ne,u_lightintensity:q.properties.get("intensity"),u_lightcolor:[ye.r,ye.g,ye.b],u_vertical_gradient:+H,u_opacity:L}},Fo=function(B,G,H,L,q,Q,ne){return o.extend(qa(B,G,H,L),uo(Q,G,ne),{u_height_factor:-Math.pow(2,q.overscaledZ)/ne.tileSize/8})},wo=function(B){return{u_matrix:B}},Bo=function(B,G,H,L){return o.extend(wo(B),uo(H,G,L))},co=function(B,G){return{u_matrix:B,u_world:G}},Ks=function(B,G,H,L,q){return o.extend(Bo(B,G,H,L),{u_world:q})},Jo=function(B,G,H,L){var q,Q,ne=B.transform;if(L.paint.get("circle-pitch-alignment")==="map"){var ce=er(H,1,ne.zoom);q=!0,Q=[ce,ce]}else q=!1,Q=ne.pixelsToGLUnits;return{u_camera_to_center_distance:ne.cameraToCenterDistance,u_scale_with_map:+(L.paint.get("circle-pitch-scale")==="map"),u_matrix:B.translatePosMatrix(G.posMatrix,H,L.paint.get("circle-translate"),L.paint.get("circle-translate-anchor")),u_pitch_with_map:+q,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:Q}},Qo=function(B,G,H){var L=er(H,1,G.zoom),q=Math.pow(2,G.zoom-H.tileID.overscaledZ),Q=H.tileID.overscaleFactor();return{u_matrix:B,u_camera_to_center_distance:G.cameraToCenterDistance,u_pixels_to_tile_units:L,u_extrude_scale:[G.pixelsToGLUnits[0]/(L*q),G.pixelsToGLUnits[1]/(L*q)],u_overscale_factor:Q}},rl=function(B,G,H){return{u_matrix:B,u_inv_matrix:G,u_camera_to_center_distance:H.cameraToCenterDistance,u_viewport_size:[H.width,H.height]}},il=function(B,G,H){return H===void 0&&(H=1),{u_matrix:B,u_color:G,u_overlay:0,u_overlay_scale:H}},fo=function(B){return{u_matrix:B}},al=function(B,G,H,L){return{u_matrix:B,u_extrude_scale:er(G,1,H),u_intensity:L}},ol=function(B,G,H,L){var q=o.create();o.ortho(q,0,B.width,B.height,0,0,1);var Q=B.context.gl;return{u_matrix:q,u_world:[Q.drawingBufferWidth,Q.drawingBufferHeight],u_image:H,u_color_ramp:L,u_opacity:G.paint.get("heatmap-opacity")}},sl=function(B,G,H){var L=H.paint.get("hillshade-shadow-color"),q=H.paint.get("hillshade-highlight-color"),Q=H.paint.get("hillshade-accent-color"),ne=H.paint.get("hillshade-illumination-direction")*(Math.PI/180);H.paint.get("hillshade-illumination-anchor")==="viewport"&&(ne-=B.transform.angle);var ce,ye,Le,Ie=!B.options.moving;return{u_matrix:B.transform.calculatePosMatrix(G.tileID.toUnwrapped(),Ie),u_image:0,u_latrange:(ce=G.tileID,ye=Math.pow(2,ce.canonical.z),Le=ce.canonical.y,[new o.MercatorCoordinate(0,Le/ye).toLngLat().lat,new o.MercatorCoordinate(0,(Le+1)/ye).toLngLat().lat]),u_light:[H.paint.get("hillshade-exaggeration"),ne],u_shadow:L,u_highlight:q,u_accent:Q}},$o=function(B,G){var H=G.stride,L=o.create();return o.ortho(L,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(L,L,[0,-o.EXTENT,0]),{u_matrix:L,u_image:1,u_dimension:[H,H],u_zoom:B.overscaledZ,u_unpack:G.getUnpackVector()}},Ha=function(B,G,H){var L=B.transform;return{u_matrix:Ga(B,G,H),u_ratio:1/er(G,1,L.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]]}},To=function(B,G,H,L){return o.extend(Ha(B,G,H),{u_image:0,u_image_height:L})},No=function(B,G,H,L){var q=B.transform,Q=jo(G,q);return{u_matrix:Ga(B,G,H),u_texsize:G.imageAtlasTexture.size,u_ratio:1/er(G,1,q.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[Q,L.fromScale,L.toScale],u_fade:L.t,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]]}},cs=function(B,G,H,L,q){var Q=B.transform,ne=B.lineAtlas,ce=jo(G,Q),ye=H.layout.get("line-cap")==="round",Le=ne.getDash(L.from,ye),Ie=ne.getDash(L.to,ye),je=Le.width*q.fromScale,qe=Ie.width*q.toScale;return o.extend(Ha(B,G,H),{u_patternscale_a:[ce/je,-Le.height/2],u_patternscale_b:[ce/qe,-Ie.height/2],u_sdfgamma:ne.width/(256*Math.min(je,qe)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Le.y,u_tex_y_b:Ie.y,u_mix:q.t})};function jo(B,G){return 1/er(B,1,G.tileZoom)}function Ga(B,G,H){return B.translatePosMatrix(G.tileID.posMatrix,G,H.paint.get("line-translate"),H.paint.get("line-translate-anchor"))}var da=function(B,G,H,L,q){return{u_matrix:B,u_tl_parent:G,u_scale_parent:H,u_buffer_scale:1,u_fade_t:L.mix,u_opacity:L.opacity*q.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:q.paint.get("raster-brightness-min"),u_brightness_high:q.paint.get("raster-brightness-max"),u_saturation_factor:(ne=q.paint.get("raster-saturation"),ne>0?1-1/(1.001-ne):-ne),u_contrast_factor:(Q=q.paint.get("raster-contrast"),Q>0?1/(1-Q):1+Q),u_spin_weights:Uo(q.paint.get("raster-hue-rotate"))};var Q,ne};function Uo(B){B*=Math.PI/180;var G=Math.sin(B),H=Math.cos(B);return[(2*H+1)/3,(-Math.sqrt(3)*G-H+1)/3,(Math.sqrt(3)*G-H+1)/3]}var ko,Ao=function(B,G,H,L,q,Q,ne,ce,ye,Le){var Ie=q.transform;return{u_is_size_zoom_constant:+(B==="constant"||B==="source"),u_is_size_feature_constant:+(B==="constant"||B==="camera"),u_size_t:G?G.uSizeT:0,u_size:G?G.uSize:0,u_camera_to_center_distance:Ie.cameraToCenterDistance,u_pitch:Ie.pitch/360*2*Math.PI,u_rotate_symbol:+H,u_aspect_ratio:Ie.width/Ie.height,u_fade_change:q.options.fadeDuration?q.symbolFadeChange:1,u_matrix:Q,u_label_plane_matrix:ne,u_coord_matrix:ce,u_is_text:+ye,u_pitch_with_map:+L,u_texsize:Le,u_texture:0}},Vo=function(B,G,H,L,q,Q,ne,ce,ye,Le,Ie){var je=q.transform;return o.extend(Ao(B,G,H,L,q,Q,ne,ce,ye,Le),{u_gamma_scale:L?Math.cos(je._pitch)*je.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+Ie})},ei=function(B,G,H,L,q,Q,ne,ce,ye,Le){return o.extend(Vo(B,G,H,L,q,Q,ne,ce,!0,ye,!0),{u_texsize_icon:Le,u_texture_icon:1})},fs=function(B,G,H){return{u_matrix:B,u_opacity:G,u_color:H}},xl=function(B,G,H,L,q,Q){return o.extend(function(ne,ce,ye,Le){var Ie=ye.imageManager.getPattern(ne.from.toString()),je=ye.imageManager.getPattern(ne.to.toString()),qe=ye.imageManager.getPixelSize(),$e=qe.width,lt=qe.height,ft=Math.pow(2,Le.tileID.overscaledZ),_t=Le.tileSize*Math.pow(2,ye.transform.tileZoom)/ft,St=_t*(Le.tileID.canonical.x+Le.tileID.wrap*ft),At=_t*Le.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ie.tl,u_pattern_br_a:Ie.br,u_pattern_tl_b:je.tl,u_pattern_br_b:je.br,u_texsize:[$e,lt],u_mix:ce.t,u_pattern_size_a:Ie.displaySize,u_pattern_size_b:je.displaySize,u_scale_a:ce.fromScale,u_scale_b:ce.toScale,u_tile_units_to_pixels:1/er(Le,1,ye.transform.tileZoom),u_pixel_coord_upper:[St>>16,At>>16],u_pixel_coord_lower:[65535&St,65535&At]}}(L,Q,H,q),{u_matrix:B,u_opacity:G})},Rs={fillExtrusion:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_lightpos:new o.Uniform3f(B,G.u_lightpos),u_lightintensity:new o.Uniform1f(B,G.u_lightintensity),u_lightcolor:new o.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new o.Uniform1f(B,G.u_vertical_gradient),u_opacity:new o.Uniform1f(B,G.u_opacity)}},fillExtrusionPattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_lightpos:new o.Uniform3f(B,G.u_lightpos),u_lightintensity:new o.Uniform1f(B,G.u_lightintensity),u_lightcolor:new o.Uniform3f(B,G.u_lightcolor),u_vertical_gradient:new o.Uniform1f(B,G.u_vertical_gradient),u_height_factor:new o.Uniform1f(B,G.u_height_factor),u_image:new o.Uniform1i(B,G.u_image),u_texsize:new o.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade),u_opacity:new o.Uniform1f(B,G.u_opacity)}},fill:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},fillPattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_image:new o.Uniform1i(B,G.u_image),u_texsize:new o.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade)}},fillOutline:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_world:new o.Uniform2f(B,G.u_world)}},fillOutlinePattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_world:new o.Uniform2f(B,G.u_world),u_image:new o.Uniform1i(B,G.u_image),u_texsize:new o.Uniform2f(B,G.u_texsize),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade)}},circle:function(B,G){return{u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(B,G.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(B,G.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},collisionBox:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(B,G.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(B,G.u_extrude_scale),u_overscale_factor:new o.Uniform1f(B,G.u_overscale_factor)}},collisionCircle:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_inv_matrix:new o.UniformMatrix4f(B,G.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(B,G.u_viewport_size)}},debug:function(B,G){return{u_color:new o.UniformColor(B,G.u_color),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_overlay:new o.Uniform1i(B,G.u_overlay),u_overlay_scale:new o.Uniform1f(B,G.u_overlay_scale)}},clippingMask:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},heatmap:function(B,G){return{u_extrude_scale:new o.Uniform1f(B,G.u_extrude_scale),u_intensity:new o.Uniform1f(B,G.u_intensity),u_matrix:new o.UniformMatrix4f(B,G.u_matrix)}},heatmapTexture:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_world:new o.Uniform2f(B,G.u_world),u_image:new o.Uniform1i(B,G.u_image),u_color_ramp:new o.Uniform1i(B,G.u_color_ramp),u_opacity:new o.Uniform1f(B,G.u_opacity)}},hillshade:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_image:new o.Uniform1i(B,G.u_image),u_latrange:new o.Uniform2f(B,G.u_latrange),u_light:new o.Uniform2f(B,G.u_light),u_shadow:new o.UniformColor(B,G.u_shadow),u_highlight:new o.UniformColor(B,G.u_highlight),u_accent:new o.UniformColor(B,G.u_accent)}},hillshadePrepare:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_image:new o.Uniform1i(B,G.u_image),u_dimension:new o.Uniform2f(B,G.u_dimension),u_zoom:new o.Uniform1f(B,G.u_zoom),u_unpack:new o.Uniform4f(B,G.u_unpack)}},line:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels)}},lineGradient:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels),u_image:new o.Uniform1i(B,G.u_image),u_image_height:new o.Uniform1f(B,G.u_image_height)}},linePattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_texsize:new o.Uniform2f(B,G.u_texsize),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_image:new o.Uniform1i(B,G.u_image),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels),u_scale:new o.Uniform3f(B,G.u_scale),u_fade:new o.Uniform1f(B,G.u_fade)}},lineSDF:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_ratio:new o.Uniform1f(B,G.u_ratio),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(B,G.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(B,G.u_patternscale_a),u_patternscale_b:new o.Uniform2f(B,G.u_patternscale_b),u_sdfgamma:new o.Uniform1f(B,G.u_sdfgamma),u_image:new o.Uniform1i(B,G.u_image),u_tex_y_a:new o.Uniform1f(B,G.u_tex_y_a),u_tex_y_b:new o.Uniform1f(B,G.u_tex_y_b),u_mix:new o.Uniform1f(B,G.u_mix)}},raster:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_tl_parent:new o.Uniform2f(B,G.u_tl_parent),u_scale_parent:new o.Uniform1f(B,G.u_scale_parent),u_buffer_scale:new o.Uniform1f(B,G.u_buffer_scale),u_fade_t:new o.Uniform1f(B,G.u_fade_t),u_opacity:new o.Uniform1f(B,G.u_opacity),u_image0:new o.Uniform1i(B,G.u_image0),u_image1:new o.Uniform1i(B,G.u_image1),u_brightness_low:new o.Uniform1f(B,G.u_brightness_low),u_brightness_high:new o.Uniform1f(B,G.u_brightness_high),u_saturation_factor:new o.Uniform1f(B,G.u_saturation_factor),u_contrast_factor:new o.Uniform1f(B,G.u_contrast_factor),u_spin_weights:new o.Uniform3f(B,G.u_spin_weights)}},symbolIcon:function(B,G){return{u_is_size_zoom_constant:new o.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,G.u_size_t),u_size:new o.Uniform1f(B,G.u_size),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,G.u_pitch),u_rotate_symbol:new o.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,G.u_fade_change),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new o.Uniform1i(B,G.u_is_text),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_texsize:new o.Uniform2f(B,G.u_texsize),u_texture:new o.Uniform1i(B,G.u_texture)}},symbolSDF:function(B,G){return{u_is_size_zoom_constant:new o.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,G.u_size_t),u_size:new o.Uniform1f(B,G.u_size),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,G.u_pitch),u_rotate_symbol:new o.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,G.u_fade_change),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new o.Uniform1i(B,G.u_is_text),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_texsize:new o.Uniform2f(B,G.u_texsize),u_texture:new o.Uniform1i(B,G.u_texture),u_gamma_scale:new o.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(B,G.u_is_halo)}},symbolTextAndIcon:function(B,G){return{u_is_size_zoom_constant:new o.Uniform1i(B,G.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(B,G.u_is_size_feature_constant),u_size_t:new o.Uniform1f(B,G.u_size_t),u_size:new o.Uniform1f(B,G.u_size),u_camera_to_center_distance:new o.Uniform1f(B,G.u_camera_to_center_distance),u_pitch:new o.Uniform1f(B,G.u_pitch),u_rotate_symbol:new o.Uniform1i(B,G.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(B,G.u_aspect_ratio),u_fade_change:new o.Uniform1f(B,G.u_fade_change),u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(B,G.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(B,G.u_coord_matrix),u_is_text:new o.Uniform1i(B,G.u_is_text),u_pitch_with_map:new o.Uniform1i(B,G.u_pitch_with_map),u_texsize:new o.Uniform2f(B,G.u_texsize),u_texsize_icon:new o.Uniform2f(B,G.u_texsize_icon),u_texture:new o.Uniform1i(B,G.u_texture),u_texture_icon:new o.Uniform1i(B,G.u_texture_icon),u_gamma_scale:new o.Uniform1f(B,G.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(B,G.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(B,G.u_is_halo)}},background:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_opacity:new o.Uniform1f(B,G.u_opacity),u_color:new o.UniformColor(B,G.u_color)}},backgroundPattern:function(B,G){return{u_matrix:new o.UniformMatrix4f(B,G.u_matrix),u_opacity:new o.Uniform1f(B,G.u_opacity),u_image:new o.Uniform1i(B,G.u_image),u_pattern_tl_a:new o.Uniform2f(B,G.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(B,G.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(B,G.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(B,G.u_pattern_br_b),u_texsize:new o.Uniform2f(B,G.u_texsize),u_mix:new o.Uniform1f(B,G.u_mix),u_pattern_size_a:new o.Uniform2f(B,G.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(B,G.u_pattern_size_b),u_scale_a:new o.Uniform1f(B,G.u_scale_a),u_scale_b:new o.Uniform1f(B,G.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(B,G.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(B,G.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(B,G.u_tile_units_to_pixels)}}};function hs(B,G,H,L,q,Q,ne){for(var ce=B.context,ye=ce.gl,Le=B.useProgram("collisionBox"),Ie=[],je=0,qe=0,$e=0;$e<L.length;$e++){var lt=L[$e],ft=G.getTile(lt),_t=ft.getBucket(H);if(_t){var St=lt.posMatrix;q[0]===0&&q[1]===0||(St=B.translatePosMatrix(lt.posMatrix,ft,q,Q));var At=ne?_t.textCollisionBox:_t.iconCollisionBox,Ft=_t.collisionCircleArray;if(Ft.length>0){var Ot=o.create(),Zt=St;o.mul(Ot,_t.placementInvProjMatrix,B.transform.glCoordMatrix),o.mul(Ot,Ot,_t.placementViewportMatrix),Ie.push({circleArray:Ft,circleOffset:qe,transform:Zt,invTransform:Ot}),qe=je+=Ft.length/4}At&&Le.draw(ce,ye.LINES,Dt.disabled,He.disabled,B.colorModeForRenderPass(),Be.disabled,Qo(St,B.transform,ft),H.id,At.layoutVertexBuffer,At.indexBuffer,At.segments,null,B.transform.zoom,null,null,At.collisionVertexBuffer)}}if(ne&&Ie.length){var Ht=B.useProgram("collisionCircle"),Nt=new o.StructArrayLayout2f1f2i16;Nt.resize(4*je),Nt._trim();for(var gn=0,yn=0,Cn=Ie;yn<Cn.length;yn+=1)for(var Dn=Cn[yn],Wn=0;Wn<Dn.circleArray.length/4;Wn++){var sr=4*Wn,mr=Dn.circleArray[sr+0],Zn=Dn.circleArray[sr+1],pr=Dn.circleArray[sr+2],Ar=Dn.circleArray[sr+3];Nt.emplace(gn++,mr,Zn,pr,Ar,0),Nt.emplace(gn++,mr,Zn,pr,Ar,1),Nt.emplace(gn++,mr,Zn,pr,Ar,2),Nt.emplace(gn++,mr,Zn,pr,Ar,3)}(!ko||ko.length<2*je)&&(ko=function(Vr){var Jr=2*Vr,Qr=new o.StructArrayLayout3ui6;Qr.resize(Jr),Qr._trim();for(var ri=0;ri<Jr;ri++){var ai=6*ri;Qr.uint16[ai+0]=4*ri+0,Qr.uint16[ai+1]=4*ri+1,Qr.uint16[ai+2]=4*ri+2,Qr.uint16[ai+3]=4*ri+2,Qr.uint16[ai+4]=4*ri+3,Qr.uint16[ai+5]=4*ri+0}return Qr}(je));for(var Fr=ce.createIndexBuffer(ko,!0),ar=ce.createVertexBuffer(Nt,o.collisionCircleLayout.members,!0),fr=0,Er=Ie;fr<Er.length;fr+=1){var yr=Er[fr],zr=rl(yr.transform,yr.invTransform,B.transform);Ht.draw(ce,ye.TRIANGLES,Dt.disabled,He.disabled,B.colorModeForRenderPass(),Be.disabled,zr,H.id,ar,Fr,o.SegmentVector.simpleSegment(0,2*yr.circleOffset,yr.circleArray.length,yr.circleArray.length/2),null,B.transform.zoom,null,null,null)}ar.destroy(),Fr.destroy()}}var ll=o.identity(new Float32Array(16));function bl(B,G,H,L,q,Q){var ne=o.getAnchorAlignment(B),ce=-(ne.horizontalAlign-.5)*G,ye=-(ne.verticalAlign-.5)*H,Le=o.evaluateVariableOffset(B,L);return new o.Point((ce/q+Le[0])*Q,(ye/q+Le[1])*Q)}function Fs(B,G,H,L,q,Q,ne,ce,ye,Le,Ie){var je=B.text.placedSymbolArray,qe=B.text.dynamicLayoutVertexArray,$e=B.icon.dynamicLayoutVertexArray,lt={};qe.clear();for(var ft=0;ft<je.length;ft++){var _t=je.get(ft),St=B.allowVerticalPlacement&&!_t.placedOrientation,At=_t.hidden||!_t.crossTileID||St?null:L[_t.crossTileID];if(At){var Ft=new o.Point(_t.anchorX,_t.anchorY),Ot=Xt(Ft,H?ce:ne),Zt=ln(Q.cameraToCenterDistance,Ot.signedDistanceFromCamera),Ht=q.evaluateSizeForFeature(B.textSizeData,Le,_t)*Zt/o.ONE_EM;H&&(Ht*=B.tilePixelRatio/ye);for(var Nt=At.width,gn=At.height,yn=bl(At.anchor,Nt,gn,At.textOffset,At.textBoxScale,Ht),Cn=H?Xt(Ft.add(yn),ne).point:Ot.point.add(G?yn.rotate(-Q.angle):yn),Dn=B.allowVerticalPlacement&&_t.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Wn=0;Wn<_t.numGlyphs;Wn++)o.addDynamicAttributes(qe,Cn,Dn);Ie&&_t.associatedIconIndex>=0&&(lt[_t.associatedIconIndex]={shiftedAnchor:Cn,angle:Dn})}else Fn(_t.numGlyphs,qe)}if(Ie){$e.clear();for(var sr=B.icon.placedSymbolArray,mr=0;mr<sr.length;mr++){var Zn=sr.get(mr);if(Zn.hidden)Fn(Zn.numGlyphs,$e);else{var pr=lt[mr];if(pr)for(var Ar=0;Ar<Zn.numGlyphs;Ar++)o.addDynamicAttributes($e,pr.shiftedAnchor,pr.angle);else Fn(Zn.numGlyphs,$e)}}B.icon.dynamicLayoutVertexBuffer.updateData($e)}B.text.dynamicLayoutVertexBuffer.updateData(qe)}function ul(B,G,H){return H.iconsInText&&G?"symbolTextAndIcon":B?"symbolSDF":"symbolIcon"}function Mo(B,G,H,L,q,Q,ne,ce,ye,Le,Ie,je){for(var qe=B.context,$e=qe.gl,lt=B.transform,ft=ce==="map",_t=ye==="map",St=ft&&H.layout.get("symbol-placement")!=="point",At=ft&&!_t&&!St,Ft=H.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ot=!1,Zt=B.depthModeForSublayer(0,Dt.ReadOnly),Ht=H.layout.get("text-variable-anchor"),Nt=[],gn=0,yn=L;gn<yn.length;gn+=1){var Cn=yn[gn],Dn=G.getTile(Cn),Wn=Dn.getBucket(H);if(Wn){var sr=q?Wn.text:Wn.icon;if(sr&&sr.segments.get().length){var mr=sr.programConfigurations.get(H.id),Zn=q||Wn.sdfIcons,pr=q?Wn.textSizeData:Wn.iconSizeData,Ar=_t||lt.pitch!==0,Fr=B.useProgram(ul(Zn,q,Wn),mr),ar=o.evaluateSizeForZoom(pr,lt.zoom),fr=void 0,Er=[0,0],yr=void 0,zr=void 0,Vr=null,Jr=void 0;if(q){if(yr=Dn.glyphAtlasTexture,zr=$e.LINEAR,fr=Dn.glyphAtlasTexture.size,Wn.iconsInText){Er=Dn.imageAtlasTexture.size,Vr=Dn.imageAtlasTexture;var Qr=pr.kind==="composite"||pr.kind==="camera";Jr=Ar||B.options.rotating||B.options.zooming||Qr?$e.LINEAR:$e.NEAREST}}else{var ri=H.layout.get("icon-size").constantOr(0)!==1||Wn.iconsNeedLinear;yr=Dn.imageAtlasTexture,zr=Zn||B.options.rotating||B.options.zooming||ri||Ar?$e.LINEAR:$e.NEAREST,fr=Dn.imageAtlasTexture.size}var ai=er(Dn,1,B.transform.zoom),Mi=An(Cn.posMatrix,_t,ft,B.transform,ai),Vi=hn(Cn.posMatrix,_t,ft,B.transform,ai),Aa=Ht&&Wn.hasTextData(),ia=H.layout.get("icon-text-fit")!=="none"&&Aa&&Wn.hasIconData();St&&cn(Wn,Cn.posMatrix,B,q,Mi,Vi,_t,Le);var va=B.translatePosMatrix(Cn.posMatrix,Dn,Q,ne),Ci=St||q&&Ht||ia?ll:Mi,si=B.translatePosMatrix(Vi,Dn,Q,ne,!0),Fi=Zn&&H.paint.get(q?"text-halo-width":"icon-halo-width").constantOr(1)!==0,xi={program:Fr,buffers:sr,uniformValues:Zn?Wn.iconsInText?ei(pr.kind,ar,At,_t,B,va,Ci,si,fr,Er):Vo(pr.kind,ar,At,_t,B,va,Ci,si,q,fr,!0):Ao(pr.kind,ar,At,_t,B,va,Ci,si,q,fr),atlasTexture:yr,atlasTextureIcon:Vr,atlasInterpolation:zr,atlasInterpolationIcon:Jr,isSDF:Zn,hasHalo:Fi};if(Ft&&Wn.canOverlap){Ot=!0;for(var ci=0,Bi=sr.segments.get();ci<Bi.length;ci+=1){var qi=Bi[ci];Nt.push({segments:new o.SegmentVector([qi]),sortKey:qi.sortKey,state:xi})}}else Nt.push({segments:sr.segments,sortKey:0,state:xi})}}}Ot&&Nt.sort(function(qs,Yo){return qs.sortKey-Yo.sortKey});for(var ea=0,Es=Nt;ea<Es.length;ea+=1){var Ls=Es[ea],fi=Ls.state;if(qe.activeTexture.set($e.TEXTURE0),fi.atlasTexture.bind(fi.atlasInterpolation,$e.CLAMP_TO_EDGE),fi.atlasTextureIcon&&(qe.activeTexture.set($e.TEXTURE1),fi.atlasTextureIcon&&fi.atlasTextureIcon.bind(fi.atlasInterpolationIcon,$e.CLAMP_TO_EDGE)),fi.isSDF){var Js=fi.uniformValues;fi.hasHalo&&(Js.u_is_halo=1,es(fi.buffers,Ls.segments,H,B,fi.program,Zt,Ie,je,Js)),Js.u_is_halo=0}es(fi.buffers,Ls.segments,H,B,fi.program,Zt,Ie,je,fi.uniformValues)}}function es(B,G,H,L,q,Q,ne,ce,ye){var Le=L.context,Ie=Le.gl;q.draw(Le,Ie.TRIANGLES,Q,ne,ce,Be.disabled,ye,H.id,B.layoutVertexBuffer,B.indexBuffer,G,H.paint,L.transform.zoom,B.programConfigurations.get(H.id),B.dynamicLayoutVertexBuffer,B.opacityVertexBuffer)}function So(B,G,H,L,q,Q,ne){var ce,ye,Le,Ie,je,qe=B.context.gl,$e=H.paint.get("fill-pattern"),lt=$e&&$e.constantOr(1),ft=H.getCrossfadeParameters();ne?(ye=lt&&!H.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ce=qe.LINES):(ye=lt?"fillPattern":"fill",ce=qe.TRIANGLES);for(var _t=0,St=L;_t<St.length;_t+=1){var At=St[_t],Ft=G.getTile(At);if(!lt||Ft.patternsLoaded()){var Ot=Ft.getBucket(H);if(Ot){var Zt=Ot.programConfigurations.get(H.id),Ht=B.useProgram(ye,Zt);lt&&(B.context.activeTexture.set(qe.TEXTURE0),Ft.imageAtlasTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE),Zt.updatePaintBuffers(ft));var Nt=$e.constantOr(null);if(Nt&&Ft.imageAtlas){var gn=Ft.imageAtlas,yn=gn.patternPositions[Nt.to.toString()],Cn=gn.patternPositions[Nt.from.toString()];yn&&Cn&&Zt.setConstantPatternPositions(yn,Cn)}var Dn=B.translatePosMatrix(At.posMatrix,Ft,H.paint.get("fill-translate"),H.paint.get("fill-translate-anchor"));if(ne){Ie=Ot.indexBuffer2,je=Ot.segments2;var Wn=[qe.drawingBufferWidth,qe.drawingBufferHeight];Le=ye==="fillOutlinePattern"&&lt?Ks(Dn,B,ft,Ft,Wn):co(Dn,Wn)}else Ie=Ot.indexBuffer,je=Ot.segments,Le=lt?Bo(Dn,B,ft,Ft):wo(Dn);Ht.draw(B.context,ce,q,B.stencilModeForClipping(At),Q,Be.disabled,Le,H.id,Ot.layoutVertexBuffer,Ie,je,H.paint,B.transform.zoom,Zt)}}}}function $a(B,G,H,L,q,Q,ne){for(var ce=B.context,ye=ce.gl,Le=H.paint.get("fill-extrusion-pattern"),Ie=Le.constantOr(1),je=H.getCrossfadeParameters(),qe=H.paint.get("fill-extrusion-opacity"),$e=0,lt=L;$e<lt.length;$e+=1){var ft=lt[$e],_t=G.getTile(ft),St=_t.getBucket(H);if(St){var At=St.programConfigurations.get(H.id),Ft=B.useProgram(Ie?"fillExtrusionPattern":"fillExtrusion",At);Ie&&(B.context.activeTexture.set(ye.TEXTURE0),_t.imageAtlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),At.updatePaintBuffers(je));var Ot=Le.constantOr(null);if(Ot&&_t.imageAtlas){var Zt=_t.imageAtlas,Ht=Zt.patternPositions[Ot.to.toString()],Nt=Zt.patternPositions[Ot.from.toString()];Ht&&Nt&&At.setConstantPatternPositions(Ht,Nt)}var gn=B.translatePosMatrix(ft.posMatrix,_t,H.paint.get("fill-extrusion-translate"),H.paint.get("fill-extrusion-translate-anchor")),yn=H.paint.get("fill-extrusion-vertical-gradient"),Cn=Ie?Fo(gn,B,yn,qe,ft,je,_t):qa(gn,B,yn,qe);Ft.draw(ce,ce.gl.TRIANGLES,q,Q,ne,Be.backCCW,Cn,H.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,H.paint,B.transform.zoom,At)}}}function ps(B,G,H,L,q,Q){var ne=B.context,ce=ne.gl,ye=G.fbo;if(ye){var Le=B.useProgram("hillshade");ne.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_2D,ye.colorAttachment.get());var Ie=sl(B,G,H);Le.draw(ne,ce.TRIANGLES,L,q,Q,Be.disabled,Ie,H.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}}function cl(B,G,H,L,q,Q){var ne=B.context,ce=ne.gl,ye=G.dem;if(ye&&ye.data){var Le=ye.dim,Ie=ye.stride,je=ye.getPixels();if(ne.activeTexture.set(ce.TEXTURE1),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),G.demTexture=G.demTexture||B.getTileTexture(Ie),G.demTexture){var qe=G.demTexture;qe.update(je,{premultiply:!1}),qe.bind(ce.NEAREST,ce.CLAMP_TO_EDGE)}else G.demTexture=new o.Texture(ne,je,ce.RGBA,{premultiply:!1}),G.demTexture.bind(ce.NEAREST,ce.CLAMP_TO_EDGE);ne.activeTexture.set(ce.TEXTURE0);var $e=G.fbo;if(!$e){var lt=new o.Texture(ne,{width:Le,height:Le,data:null},ce.RGBA);lt.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),($e=G.fbo=ne.createFramebuffer(Le,Le,!0)).colorAttachment.set(lt.texture)}ne.bindFramebuffer.set($e.framebuffer),ne.viewport.set([0,0,Le,Le]),B.useProgram("hillshadePrepare").draw(ne,ce.TRIANGLES,L,q,Q,Be.disabled,$o(G.tileID,ye),H.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments),G.needsHillshadePrepare=!1}}function ws(B,G,H,L,q){var Q=L.paint.get("raster-fade-duration");if(Q>0){var ne=o.browser.now(),ce=(ne-B.timeAdded)/Q,ye=G?(ne-G.timeAdded)/Q:-1,Le=H.getSource(),Ie=q.coveringZoomLevel({tileSize:Le.tileSize,roundZoom:Le.roundZoom}),je=!G||Math.abs(G.tileID.overscaledZ-Ie)>Math.abs(B.tileID.overscaledZ-Ie),qe=je&&B.refreshedUponExpiration?1:o.clamp(je?ce:1-ye,0,1);return B.refreshedUponExpiration&&ce>=1&&(B.refreshedUponExpiration=!1),G?{opacity:1,mix:1-qe}:{opacity:qe,mix:0}}return{opacity:1,mix:0}}var Bs=new o.Color(1,0,0,1),Ra=new o.Color(0,1,0,1),Ns=new o.Color(0,0,1,1),ht=new o.Color(1,0,1,1),kt=new o.Color(0,1,1,1);function $t(B){var G=B.transform.padding;bn(B,B.transform.height-(G.top||0),3,Bs),bn(B,G.bottom||0,3,Ra),qn(B,G.left||0,3,Ns),qn(B,B.transform.width-(G.right||0),3,ht);var H=B.transform.centerPoint;(function(L,q,Q,ne){var ce=20,ye=2;hr(L,q-ye/2,Q-ce/2,ye,ce,ne),hr(L,q-ce/2,Q-ye/2,ce,ye,ne)})(B,H.x,B.transform.height-H.y,kt)}function bn(B,G,H,L){hr(B,0,G+H/2,B.transform.width,H,L)}function qn(B,G,H,L){hr(B,G-H/2,0,H,B.transform.height,L)}function hr(B,G,H,L,q,Q){var ne=B.context,ce=ne.gl;ce.enable(ce.SCISSOR_TEST),ce.scissor(G*o.browser.devicePixelRatio,H*o.browser.devicePixelRatio,L*o.browser.devicePixelRatio,q*o.browser.devicePixelRatio),ne.clear({color:Q}),ce.disable(ce.SCISSOR_TEST)}function xr(B,G,H){var L=B.context,q=L.gl,Q=H.posMatrix,ne=B.useProgram("debug"),ce=Dt.disabled,ye=He.disabled,Le=B.colorModeForRenderPass(),Ie="$debug";L.activeTexture.set(q.TEXTURE0),B.emptyTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),ne.draw(L,q.LINE_STRIP,ce,ye,Le,Be.disabled,il(Q,o.Color.red),Ie,B.debugBuffer,B.tileBorderIndexBuffer,B.debugSegments);var je=G.getTileByID(H.key).latestRawTileData,qe=je&&je.byteLength||0,$e=Math.floor(qe/1024),lt=G.getTile(H).tileSize,ft=512/Math.min(lt,512)*(H.overscaledZ/B.transform.zoom)*.5,_t=H.canonical.toString();H.overscaledZ!==H.canonical.z&&(_t+=" => "+H.overscaledZ),function(St,At){St.initDebugOverlayCanvas();var Ft=St.debugOverlayCanvas,Ot=St.context.gl,Zt=St.debugOverlayCanvas.getContext("2d");Zt.clearRect(0,0,Ft.width,Ft.height),Zt.shadowColor="white",Zt.shadowBlur=2,Zt.lineWidth=1.5,Zt.strokeStyle="white",Zt.textBaseline="top",Zt.font="bold 36px Open Sans, sans-serif",Zt.fillText(At,5,5),Zt.strokeText(At,5,5),St.debugOverlayTexture.update(Ft),St.debugOverlayTexture.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE)}(B,_t+" "+$e+"kb"),ne.draw(L,q.TRIANGLES,ce,ye,We.alphaBlended,Be.disabled,il(Q,o.Color.transparent,ft),Ie,B.debugBuffer,B.quadTriangleIndexBuffer,B.debugSegments)}var wr={symbol:function(B,G,H,L,q){if(B.renderPass==="translucent"){var Q=He.disabled,ne=B.colorModeForRenderPass();H.layout.get("text-variable-anchor")&&function(ce,ye,Le,Ie,je,qe,$e){for(var lt=ye.transform,ft=je==="map",_t=qe==="map",St=0,At=ce;St<At.length;St+=1){var Ft=At[St],Ot=Ie.getTile(Ft),Zt=Ot.getBucket(Le);if(Zt&&Zt.text&&Zt.text.segments.get().length){var Ht=Zt.textSizeData,Nt=o.evaluateSizeForZoom(Ht,lt.zoom),gn=er(Ot,1,ye.transform.zoom),yn=An(Ft.posMatrix,_t,ft,ye.transform,gn),Cn=Le.layout.get("icon-text-fit")!=="none"&&Zt.hasIconData();if(Nt){var Dn=Math.pow(2,lt.zoom-Ot.tileID.overscaledZ);Fs(Zt,ft,_t,$e,o.symbolSize,lt,yn,Ft.posMatrix,Dn,Nt,Cn)}}}}(L,B,H,G,H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),q),H.paint.get("icon-opacity").constantOr(1)!==0&&Mo(B,G,H,L,!1,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),H.layout.get("icon-rotation-alignment"),H.layout.get("icon-pitch-alignment"),H.layout.get("icon-keep-upright"),Q,ne),H.paint.get("text-opacity").constantOr(1)!==0&&Mo(B,G,H,L,!0,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),H.layout.get("text-keep-upright"),Q,ne),G.map.showCollisionBoxes&&(hs(B,G,H,L,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),!0),hs(B,G,H,L,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),!1))}},circle:function(B,G,H,L){if(B.renderPass==="translucent"){var q=H.paint.get("circle-opacity"),Q=H.paint.get("circle-stroke-width"),ne=H.paint.get("circle-stroke-opacity"),ce=H.layout.get("circle-sort-key").constantOr(1)!==void 0;if(q.constantOr(1)!==0||Q.constantOr(1)!==0&&ne.constantOr(1)!==0){for(var ye=B.context,Le=ye.gl,Ie=B.depthModeForSublayer(0,Dt.ReadOnly),je=He.disabled,qe=B.colorModeForRenderPass(),$e=[],lt=0;lt<L.length;lt++){var ft=L[lt],_t=G.getTile(ft),St=_t.getBucket(H);if(St){var At=St.programConfigurations.get(H.id),Ft={programConfiguration:At,program:B.useProgram("circle",At),layoutVertexBuffer:St.layoutVertexBuffer,indexBuffer:St.indexBuffer,uniformValues:Jo(B,ft,_t,H)};if(ce)for(var Ot=0,Zt=St.segments.get();Ot<Zt.length;Ot+=1){var Ht=Zt[Ot];$e.push({segments:new o.SegmentVector([Ht]),sortKey:Ht.sortKey,state:Ft})}else $e.push({segments:St.segments,sortKey:0,state:Ft})}}ce&&$e.sort(function(Ar,Fr){return Ar.sortKey-Fr.sortKey});for(var Nt=0,gn=$e;Nt<gn.length;Nt+=1){var yn=gn[Nt],Cn=yn.state,Dn=Cn.programConfiguration,Wn=Cn.program,sr=Cn.layoutVertexBuffer,mr=Cn.indexBuffer,Zn=Cn.uniformValues,pr=yn.segments;Wn.draw(ye,Le.TRIANGLES,Ie,je,qe,Be.disabled,Zn,H.id,sr,mr,pr,H.paint,B.transform.zoom,Dn)}}}},heatmap:function(B,G,H,L){if(H.paint.get("heatmap-opacity")!==0)if(B.renderPass==="offscreen"){var q=B.context,Q=q.gl,ne=He.disabled,ce=new We([Q.ONE,Q.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ft,_t,St){var At=ft.gl;ft.activeTexture.set(At.TEXTURE1),ft.viewport.set([0,0,_t.width/4,_t.height/4]);var Ft=St.heatmapFbo;if(Ft)At.bindTexture(At.TEXTURE_2D,Ft.colorAttachment.get()),ft.bindFramebuffer.set(Ft.framebuffer);else{var Ot=At.createTexture();At.bindTexture(At.TEXTURE_2D,Ot),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_WRAP_S,At.CLAMP_TO_EDGE),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_WRAP_T,At.CLAMP_TO_EDGE),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_MIN_FILTER,At.LINEAR),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_MAG_FILTER,At.LINEAR),Ft=St.heatmapFbo=ft.createFramebuffer(_t.width/4,_t.height/4,!1),function(Zt,Ht,Nt,gn){var yn=Zt.gl,Cn=Zt.extRenderToTextureHalfFloat?Zt.extTextureHalfFloat.HALF_FLOAT_OES:yn.UNSIGNED_BYTE;yn.texImage2D(yn.TEXTURE_2D,0,yn.RGBA,Ht.width/4,Ht.height/4,0,yn.RGBA,Cn,null),gn.colorAttachment.set(Nt)}(ft,_t,Ot,Ft)}})(q,B,H),q.clear({color:o.Color.transparent});for(var ye=0;ye<L.length;ye++){var Le=L[ye];if(!G.hasRenderableParent(Le)){var Ie=G.getTile(Le),je=Ie.getBucket(H);if(je){var qe=je.programConfigurations.get(H.id),$e=B.useProgram("heatmap",qe),lt=B.transform.zoom;$e.draw(q,Q.TRIANGLES,Dt.disabled,ne,ce,Be.disabled,al(Le.posMatrix,Ie,lt,H.paint.get("heatmap-intensity")),H.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,H.paint,B.transform.zoom,qe)}}}q.viewport.set([0,0,B.width,B.height])}else B.renderPass==="translucent"&&(B.context.setColorMode(B.colorModeForRenderPass()),function(ft,_t){var St=ft.context,At=St.gl,Ft=_t.heatmapFbo;if(Ft){St.activeTexture.set(At.TEXTURE0),At.bindTexture(At.TEXTURE_2D,Ft.colorAttachment.get()),St.activeTexture.set(At.TEXTURE1);var Ot=_t.colorRampTexture;Ot||(Ot=_t.colorRampTexture=new o.Texture(St,_t.colorRamp,At.RGBA)),Ot.bind(At.LINEAR,At.CLAMP_TO_EDGE),ft.useProgram("heatmapTexture").draw(St,At.TRIANGLES,Dt.disabled,He.disabled,ft.colorModeForRenderPass(),Be.disabled,ol(ft,_t,0,1),_t.id,ft.viewportBuffer,ft.quadTriangleIndexBuffer,ft.viewportSegments,_t.paint,ft.transform.zoom)}}(B,H))},line:function(B,G,H,L){if(B.renderPass==="translucent"){var q=H.paint.get("line-opacity"),Q=H.paint.get("line-width");if(q.constantOr(1)!==0&&Q.constantOr(1)!==0)for(var ne=B.depthModeForSublayer(0,Dt.ReadOnly),ce=B.colorModeForRenderPass(),ye=H.paint.get("line-dasharray"),Le=H.paint.get("line-pattern"),Ie=Le.constantOr(1),je=H.paint.get("line-gradient"),qe=H.getCrossfadeParameters(),$e=Ie?"linePattern":ye?"lineSDF":je?"lineGradient":"line",lt=B.context,ft=lt.gl,_t=!0,St=0,At=L;St<At.length;St+=1){var Ft=At[St],Ot=G.getTile(Ft);if(!Ie||Ot.patternsLoaded()){var Zt=Ot.getBucket(H);if(Zt){var Ht=Zt.programConfigurations.get(H.id),Nt=B.context.program.get(),gn=B.useProgram($e,Ht),yn=_t||gn.program!==Nt,Cn=Le.constantOr(null);if(Cn&&Ot.imageAtlas){var Dn=Ot.imageAtlas,Wn=Dn.patternPositions[Cn.to.toString()],sr=Dn.patternPositions[Cn.from.toString()];Wn&&sr&&Ht.setConstantPatternPositions(Wn,sr)}var mr=Ie?No(B,Ot,H,qe):ye?cs(B,Ot,H,ye,qe):je?To(B,Ot,H,Zt.lineClipsArray.length):Ha(B,Ot,H);if(Ie)lt.activeTexture.set(ft.TEXTURE0),Ot.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Ht.updatePaintBuffers(qe);else if(ye&&(yn||B.lineAtlas.dirty))lt.activeTexture.set(ft.TEXTURE0),B.lineAtlas.bind(lt);else if(je){var Zn=Zt.gradients[H.id],pr=Zn.texture;if(H.gradientVersion!==Zn.version){var Ar=256;if(H.stepInterpolant){var Fr=G.getSource().maxzoom,ar=Ft.canonical.z===Fr?Math.ceil(1<<B.transform.maxZoom-Ft.canonical.z):1,fr=Zt.maxLineLength/o.EXTENT*1024*ar;Ar=o.clamp(o.nextPowerOfTwo(fr),256,lt.maxTextureSize)}Zn.gradient=o.renderColorRamp({expression:H.gradientExpression(),evaluationKey:"lineProgress",resolution:Ar,image:Zn.gradient||void 0,clips:Zt.lineClipsArray}),Zn.texture?Zn.texture.update(Zn.gradient):Zn.texture=new o.Texture(lt,Zn.gradient,ft.RGBA),Zn.version=H.gradientVersion,pr=Zn.texture}lt.activeTexture.set(ft.TEXTURE0),pr.bind(H.stepInterpolant?ft.NEAREST:ft.LINEAR,ft.CLAMP_TO_EDGE)}gn.draw(lt,ft.TRIANGLES,ne,B.stencilModeForClipping(Ft),ce,Be.disabled,mr,H.id,Zt.layoutVertexBuffer,Zt.indexBuffer,Zt.segments,H.paint,B.transform.zoom,Ht,Zt.layoutVertexBuffer2),_t=!1}}}}},fill:function(B,G,H,L){var q=H.paint.get("fill-color"),Q=H.paint.get("fill-opacity");if(Q.constantOr(1)!==0){var ne=B.colorModeForRenderPass(),ce=H.paint.get("fill-pattern"),ye=B.opaquePassEnabledForLayer()&&!ce.constantOr(1)&&q.constantOr(o.Color.transparent).a===1&&Q.constantOr(0)===1?"opaque":"translucent";if(B.renderPass===ye){var Le=B.depthModeForSublayer(1,B.renderPass==="opaque"?Dt.ReadWrite:Dt.ReadOnly);So(B,G,H,L,Le,ne,!1)}if(B.renderPass==="translucent"&&H.paint.get("fill-antialias")){var Ie=B.depthModeForSublayer(H.getPaintProperty("fill-outline-color")?2:0,Dt.ReadOnly);So(B,G,H,L,Ie,ne,!0)}}},"fill-extrusion":function(B,G,H,L){var q=H.paint.get("fill-extrusion-opacity");if(q!==0&&B.renderPass==="translucent"){var Q=new Dt(B.context.gl.LEQUAL,Dt.ReadWrite,B.depthRangeFor3D);if(q!==1||H.paint.get("fill-extrusion-pattern").constantOr(1))$a(B,G,H,L,Q,He.disabled,We.disabled),$a(B,G,H,L,Q,B.stencilModeFor3D(),B.colorModeForRenderPass());else{var ne=B.colorModeForRenderPass();$a(B,G,H,L,Q,He.disabled,ne)}}},hillshade:function(B,G,H,L){if(B.renderPass==="offscreen"||B.renderPass==="translucent"){for(var q=B.context,Q=B.depthModeForSublayer(0,Dt.ReadOnly),ne=B.colorModeForRenderPass(),ce=B.renderPass==="translucent"?B.stencilConfigForOverlap(L):[{},L],ye=ce[0],Le=0,Ie=ce[1];Le<Ie.length;Le+=1){var je=Ie[Le],qe=G.getTile(je);qe.needsHillshadePrepare&&B.renderPass==="offscreen"?cl(B,qe,H,Q,He.disabled,ne):B.renderPass==="translucent"&&ps(B,qe,H,Q,ye[je.overscaledZ],ne)}q.viewport.set([0,0,B.width,B.height])}},raster:function(B,G,H,L){if(B.renderPass==="translucent"&&H.paint.get("raster-opacity")!==0&&L.length)for(var q=B.context,Q=q.gl,ne=G.getSource(),ce=B.useProgram("raster"),ye=B.colorModeForRenderPass(),Le=ne instanceof F?[{},L]:B.stencilConfigForOverlap(L),Ie=Le[0],je=Le[1],qe=je[je.length-1].overscaledZ,$e=!B.options.moving,lt=0,ft=je;lt<ft.length;lt+=1){var _t=ft[lt],St=B.depthModeForSublayer(_t.overscaledZ-qe,H.paint.get("raster-opacity")===1?Dt.ReadWrite:Dt.ReadOnly,Q.LESS),At=G.getTile(_t),Ft=B.transform.calculatePosMatrix(_t.toUnwrapped(),$e);At.registerFadeDuration(H.paint.get("raster-fade-duration"));var Ot=G.findLoadedParent(_t,0),Zt=ws(At,Ot,G,H,B.transform),Ht=void 0,Nt=void 0,gn=H.paint.get("raster-resampling")==="nearest"?Q.NEAREST:Q.LINEAR;q.activeTexture.set(Q.TEXTURE0),At.texture.bind(gn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),q.activeTexture.set(Q.TEXTURE1),Ot?(Ot.texture.bind(gn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST),Ht=Math.pow(2,Ot.tileID.overscaledZ-At.tileID.overscaledZ),Nt=[At.tileID.canonical.x*Ht%1,At.tileID.canonical.y*Ht%1]):At.texture.bind(gn,Q.CLAMP_TO_EDGE,Q.LINEAR_MIPMAP_NEAREST);var yn=da(Ft,Nt||[0,0],Ht||1,Zt,H);ne instanceof F?ce.draw(q,Q.TRIANGLES,St,He.disabled,ye,Be.disabled,yn,H.id,ne.boundsBuffer,B.quadTriangleIndexBuffer,ne.boundsSegments):ce.draw(q,Q.TRIANGLES,St,Ie[_t.overscaledZ],ye,Be.disabled,yn,H.id,B.rasterBoundsBuffer,B.quadTriangleIndexBuffer,B.rasterBoundsSegments)}},background:function(B,G,H){var L=H.paint.get("background-color"),q=H.paint.get("background-opacity");if(q!==0){var Q=B.context,ne=Q.gl,ce=B.transform,ye=ce.tileSize,Le=H.paint.get("background-pattern");if(!B.isPatternMissing(Le)){var Ie=!Le&&L.a===1&&q===1&&B.opaquePassEnabledForLayer()?"opaque":"translucent";if(B.renderPass===Ie){var je=He.disabled,qe=B.depthModeForSublayer(0,Ie==="opaque"?Dt.ReadWrite:Dt.ReadOnly),$e=B.colorModeForRenderPass(),lt=B.useProgram(Le?"backgroundPattern":"background"),ft=ce.coveringTiles({tileSize:ye});Le&&(Q.activeTexture.set(ne.TEXTURE0),B.imageManager.bind(B.context));for(var _t=H.getCrossfadeParameters(),St=0,At=ft;St<At.length;St+=1){var Ft=At[St],Ot=B.transform.calculatePosMatrix(Ft.toUnwrapped()),Zt=Le?xl(Ot,q,B,Le,{tileID:Ft,tileSize:ye},_t):fs(Ot,q,L);lt.draw(Q,ne.TRIANGLES,qe,je,$e,Be.disabled,Zt,H.id,B.tileExtentBuffer,B.quadTriangleIndexBuffer,B.tileExtentSegments)}}}}},debug:function(B,G,H){for(var L=0;L<H.length;L++)xr(B,G,H[L])},custom:function(B,G,H){var L=B.context,q=H.implementation;if(B.renderPass==="offscreen"){var Q=q.prerender;Q&&(B.setCustomLayerDefaults(),L.setColorMode(B.colorModeForRenderPass()),Q.call(q,L.gl,B.transform.customLayerMatrix()),L.setDirty(),B.setBaseState())}else if(B.renderPass==="translucent"){B.setCustomLayerDefaults(),L.setColorMode(B.colorModeForRenderPass()),L.setStencilMode(He.disabled);var ne=q.renderingMode==="3d"?new Dt(B.context.gl.LEQUAL,Dt.ReadWrite,B.depthRangeFor3D):B.depthModeForSublayer(0,Dt.ReadOnly);L.setDepthMode(ne),q.render(L.gl,B.transform.customLayerMatrix()),L.setDirty(),B.setBaseState(),L.bindFramebuffer.set(null)}}},gr=function(B,G){this.context=new Ge(B),this.transform=G,this._tileTextures={},this.setup(),this.numSublayers=at.maxUnderzooming+at.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vn,this.gpuTimers={}};gr.prototype.resize=function(B,G){if(this.width=B*o.browser.devicePixelRatio,this.height=G*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var H=0,L=this.style._order;H<L.length;H+=1){var q=L[H];this.style._layers[q].resize()}},gr.prototype.setup=function(){var B=this.context,G=new o.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(o.EXTENT,0),G.emplaceBack(0,o.EXTENT),G.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=B.createVertexBuffer(G,Jn.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var H=new o.StructArrayLayout2i4;H.emplaceBack(0,0),H.emplaceBack(o.EXTENT,0),H.emplaceBack(0,o.EXTENT),H.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=B.createVertexBuffer(H,Jn.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var L=new o.StructArrayLayout4i8;L.emplaceBack(0,0,0,0),L.emplaceBack(o.EXTENT,0,o.EXTENT,0),L.emplaceBack(0,o.EXTENT,0,o.EXTENT),L.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=B.createVertexBuffer(L,W.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var q=new o.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(1,0),q.emplaceBack(0,1),q.emplaceBack(1,1),this.viewportBuffer=B.createVertexBuffer(q,Jn.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var Q=new o.StructArrayLayout1ui2;Q.emplaceBack(0),Q.emplaceBack(1),Q.emplaceBack(3),Q.emplaceBack(2),Q.emplaceBack(0),this.tileBorderIndexBuffer=B.createIndexBuffer(Q);var ne=new o.StructArrayLayout3ui6;ne.emplaceBack(0,1,2),ne.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=B.createIndexBuffer(ne),this.emptyTexture=new o.Texture(B,{width:1,height:1,data:new Uint8Array([0,0,0,0])},B.gl.RGBA);var ce=this.context.gl;this.stencilClearMode=new He({func:ce.ALWAYS,mask:0},0,255,ce.ZERO,ce.ZERO,ce.ZERO)},gr.prototype.clearStencil=function(){var B=this.context,G=B.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var H=o.create();o.ortho(H,0,this.width,this.height,0,0,1),o.scale(H,H,[G.drawingBufferWidth,G.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(B,G.TRIANGLES,Dt.disabled,this.stencilClearMode,We.disabled,Be.disabled,fo(H),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},gr.prototype._renderTileClippingMasks=function(B,G){if(this.currentStencilSource!==B.source&&B.isTileClipped()&&G&&G.length){this.currentStencilSource=B.source;var H=this.context,L=H.gl;this.nextStencilID+G.length>256&&this.clearStencil(),H.setColorMode(We.disabled),H.setDepthMode(Dt.disabled);var q=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Q=0,ne=G;Q<ne.length;Q+=1){var ce=ne[Q],ye=this._tileClippingMaskIDs[ce.key]=this.nextStencilID++;q.draw(H,L.TRIANGLES,Dt.disabled,new He({func:L.ALWAYS,mask:0},ye,255,L.KEEP,L.KEEP,L.REPLACE),We.disabled,Be.disabled,fo(ce.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},gr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var B=this.nextStencilID++,G=this.context.gl;return new He({func:G.NOTEQUAL,mask:255},B,255,G.KEEP,G.KEEP,G.REPLACE)},gr.prototype.stencilModeForClipping=function(B){var G=this.context.gl;return new He({func:G.EQUAL,mask:255},this._tileClippingMaskIDs[B.key],0,G.KEEP,G.KEEP,G.REPLACE)},gr.prototype.stencilConfigForOverlap=function(B){var G,H=this.context.gl,L=B.sort(function(ye,Le){return Le.overscaledZ-ye.overscaledZ}),q=L[L.length-1].overscaledZ,Q=L[0].overscaledZ-q+1;if(Q>1){this.currentStencilSource=void 0,this.nextStencilID+Q>256&&this.clearStencil();for(var ne={},ce=0;ce<Q;ce++)ne[ce+q]=new He({func:H.GEQUAL,mask:255},ce+this.nextStencilID,255,H.KEEP,H.KEEP,H.REPLACE);return this.nextStencilID+=Q,[ne,L]}return[(G={},G[q]=He.disabled,G),L]},gr.prototype.colorModeForRenderPass=function(){var B=this.context.gl;if(this._showOverdrawInspector){var G=.125;return new We([B.CONSTANT_COLOR,B.ONE],new o.Color(G,G,G,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?We.unblended:We.alphaBlended},gr.prototype.depthModeForSublayer=function(B,G,H){if(!this.opaquePassEnabledForLayer())return Dt.disabled;var L=1-((1+this.currentLayer)*this.numSublayers+B)*this.depthEpsilon;return new Dt(H||this.context.gl.LEQUAL,G,[L,L])},gr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},gr.prototype.render=function(B,G){var H=this;this.style=B,this.options=G,this.lineAtlas=B.lineAtlas,this.imageManager=B.imageManager,this.glyphManager=B.glyphManager,this.symbolFadeChange=B.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var L=this.style._order,q=this.style.sourceCaches;for(var Q in q){var ne=q[Q];ne.used&&ne.prepare(this.context)}var ce,ye,Le={},Ie={},je={};for(var qe in q){var $e=q[qe];Le[qe]=$e.getVisibleCoordinates(),Ie[qe]=Le[qe].slice().reverse(),je[qe]=$e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var lt=0;lt<L.length;lt++){var ft=L[lt];if(this.style._layers[ft].is3D()){this.opaquePassCutoff=lt;break}}this.renderPass="offscreen";for(var _t=0,St=L;_t<St.length;_t+=1){var At=St[_t],Ft=this.style._layers[At];if(Ft.hasOffscreenPass()&&!Ft.isHidden(this.transform.zoom)){var Ot=Ie[Ft.source];(Ft.type==="custom"||Ot.length)&&this.renderLayer(this,q[Ft.source],Ft,Ot)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:G.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=G.showOverdrawInspector,this.depthRangeFor3D=[0,1-(B._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){var Zt=this.style._layers[L[this.currentLayer]],Ht=q[Zt.source],Nt=Le[Zt.source];this._renderTileClippingMasks(Zt,Nt),this.renderLayer(this,Ht,Zt,Nt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){var gn=this.style._layers[L[this.currentLayer]],yn=q[gn.source],Cn=(gn.type==="symbol"?je:Ie)[gn.source];this._renderTileClippingMasks(gn,Le[gn.source]),this.renderLayer(this,yn,gn,Cn)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Dn){Dn.source&&!Dn.isHidden(H.transform.zoom)&&(Dn.source!==(ye&&ye.id)&&(ye=H.style.sourceCaches[Dn.source]),(!ce||ce.getSource().maxzoom<ye.getSource().maxzoom)&&(ce=ye))}),ce&&wr.debug(this,ce,ce.getVisibleCoordinates())),this.options.showPadding&&$t(this),this.context.setDefault()},gr.prototype.renderLayer=function(B,G,H,L){H.isHidden(this.transform.zoom)||(H.type==="background"||H.type==="custom"||L.length)&&(this.id=H.id,this.gpuTimingStart(H),wr[H.type](B,G,H,L,this.style.placement.variableOffsets),this.gpuTimingEnd())},gr.prototype.gpuTimingStart=function(B){if(this.options.gpuTiming){var G=this.context.extTimerQuery,H=this.gpuTimers[B.id];H||(H=this.gpuTimers[B.id]={calls:0,cpuTime:0,query:G.createQueryEXT()}),H.calls++,G.beginQueryEXT(G.TIME_ELAPSED_EXT,H.query)}},gr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var B=this.context.extTimerQuery;B.endQueryEXT(B.TIME_ELAPSED_EXT)}},gr.prototype.collectGpuTimers=function(){var B=this.gpuTimers;return this.gpuTimers={},B},gr.prototype.queryGpuTimers=function(B){var G={};for(var H in B){var L=B[H],q=this.context.extTimerQuery,Q=q.getQueryObjectEXT(L.query,q.QUERY_RESULT_EXT)/1e6;q.deleteQueryEXT(L.query),G[H]=Q}return G},gr.prototype.translatePosMatrix=function(B,G,H,L,q){if(!H[0]&&!H[1])return B;var Q=q?L==="map"?this.transform.angle:0:L==="viewport"?-this.transform.angle:0;if(Q){var ne=Math.sin(Q),ce=Math.cos(Q);H=[H[0]*ce-H[1]*ne,H[0]*ne+H[1]*ce]}var ye=[q?H[0]:er(G,H[0],this.transform.zoom),q?H[1]:er(G,H[1],this.transform.zoom),0],Le=new Float32Array(16);return o.translate(Le,B,ye),Le},gr.prototype.saveTileTexture=function(B){var G=this._tileTextures[B.size[0]];G?G.push(B):this._tileTextures[B.size[0]]=[B]},gr.prototype.getTileTexture=function(B){var G=this._tileTextures[B];return G&&G.length>0?G.pop():null},gr.prototype.isPatternMissing=function(B){if(!B)return!1;if(!B.from||!B.to)return!0;var G=this.imageManager.getPattern(B.from.toString()),H=this.imageManager.getPattern(B.to.toString());return!G||!H},gr.prototype.useProgram=function(B,G){this.cache=this.cache||{};var H=""+B+(G?G.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[H]||(this.cache[H]=new Va(this.context,B,$i[B],G,Rs[B],this._showOverdrawInspector)),this.cache[H]},gr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},gr.prototype.setBaseState=function(){var B=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(B.FUNC_ADD)},gr.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var B=this.context.gl;this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,B.RGBA)}},gr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var jr=function(B,G){this.points=B,this.planes=G};jr.fromInvProjectionMatrix=function(B,G,H){var L=Math.pow(2,H),q=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(ne){return o.transformMat4([],ne,B)}).map(function(ne){return o.scale$1([],ne,1/ne[3]/G*L)}),Q=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(ne){var ce=o.sub([],q[ne[0]],q[ne[1]]),ye=o.sub([],q[ne[2]],q[ne[1]]),Le=o.normalize([],o.cross([],ce,ye)),Ie=-o.dot(Le,q[ne[1]]);return Le.concat(Ie)});return new jr(q,Q)};var Wr=function(B,G){this.min=B,this.max=G,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};Wr.prototype.quadrant=function(B){for(var G=[B%2==0,B<2],H=o.clone$2(this.min),L=o.clone$2(this.max),q=0;q<G.length;q++)H[q]=G[q]?this.min[q]:this.center[q],L[q]=G[q]?this.center[q]:this.max[q];return L[2]=this.max[2],new Wr(H,L)},Wr.prototype.distanceX=function(B){return Math.max(Math.min(this.max[0],B[0]),this.min[0])-B[0]},Wr.prototype.distanceY=function(B){return Math.max(Math.min(this.max[1],B[1]),this.min[1])-B[1]},Wr.prototype.intersects=function(B){for(var G=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],H=!0,L=0;L<B.planes.length;L++){for(var q=B.planes[L],Q=0,ne=0;ne<G.length;ne++)Q+=o.dot$1(q,G[ne])>=0;if(Q===0)return 0;Q!==G.length&&(H=!1)}if(H)return 2;for(var ce=0;ce<3;ce++){for(var ye=Number.MAX_VALUE,Le=-Number.MAX_VALUE,Ie=0;Ie<B.points.length;Ie++){var je=B.points[Ie][ce]-this.min[ce];ye=Math.min(ye,je),Le=Math.max(Le,je)}if(Le<0||ye>this.max[ce]-this.min[ce])return 0}return 1};var Kr=function(B,G,H,L){if(B===void 0&&(B=0),G===void 0&&(G=0),H===void 0&&(H=0),L===void 0&&(L=0),isNaN(B)||B<0||isNaN(G)||G<0||isNaN(H)||H<0||isNaN(L)||L<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=B,this.bottom=G,this.left=H,this.right=L};Kr.prototype.interpolate=function(B,G,H){return G.top!=null&&B.top!=null&&(this.top=o.number(B.top,G.top,H)),G.bottom!=null&&B.bottom!=null&&(this.bottom=o.number(B.bottom,G.bottom,H)),G.left!=null&&B.left!=null&&(this.left=o.number(B.left,G.left,H)),G.right!=null&&B.right!=null&&(this.right=o.number(B.right,G.right,H)),this},Kr.prototype.getCenter=function(B,G){var H=o.clamp((this.left+B-this.right)/2,0,B),L=o.clamp((this.top+G-this.bottom)/2,0,G);return new o.Point(H,L)},Kr.prototype.equals=function(B){return this.top===B.top&&this.bottom===B.bottom&&this.left===B.left&&this.right===B.right},Kr.prototype.clone=function(){return new Kr(this.top,this.bottom,this.left,this.right)},Kr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Nr=function(B,G,H,L,q){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=q===void 0||q,this._minZoom=B||0,this._maxZoom=G||22,this._minPitch=H==null?0:H,this._maxPitch=L==null?60:L,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Kr,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ir={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Nr.prototype.clone=function(){var B=new Nr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return B.tileSize=this.tileSize,B.latRange=this.latRange,B.width=this.width,B.height=this.height,B._center=this._center,B.zoom=this.zoom,B.angle=this.angle,B._fov=this._fov,B._pitch=this._pitch,B._unmodified=this._unmodified,B._edgeInsets=this._edgeInsets.clone(),B._calcMatrices(),B},Ir.minZoom.get=function(){return this._minZoom},Ir.minZoom.set=function(B){this._minZoom!==B&&(this._minZoom=B,this.zoom=Math.max(this.zoom,B))},Ir.maxZoom.get=function(){return this._maxZoom},Ir.maxZoom.set=function(B){this._maxZoom!==B&&(this._maxZoom=B,this.zoom=Math.min(this.zoom,B))},Ir.minPitch.get=function(){return this._minPitch},Ir.minPitch.set=function(B){this._minPitch!==B&&(this._minPitch=B,this.pitch=Math.max(this.pitch,B))},Ir.maxPitch.get=function(){return this._maxPitch},Ir.maxPitch.set=function(B){this._maxPitch!==B&&(this._maxPitch=B,this.pitch=Math.min(this.pitch,B))},Ir.renderWorldCopies.get=function(){return this._renderWorldCopies},Ir.renderWorldCopies.set=function(B){B===void 0?B=!0:B===null&&(B=!1),this._renderWorldCopies=B},Ir.worldSize.get=function(){return this.tileSize*this.scale},Ir.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ir.size.get=function(){return new o.Point(this.width,this.height)},Ir.bearing.get=function(){return-this.angle/Math.PI*180},Ir.bearing.set=function(B){var G=-o.wrap(B,-180,180)*Math.PI/180;this.angle!==G&&(this._unmodified=!1,this.angle=G,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ir.pitch.get=function(){return this._pitch/Math.PI*180},Ir.pitch.set=function(B){var G=o.clamp(B,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==G&&(this._unmodified=!1,this._pitch=G,this._calcMatrices())},Ir.fov.get=function(){return this._fov/Math.PI*180},Ir.fov.set=function(B){B=Math.max(.01,Math.min(60,B)),this._fov!==B&&(this._unmodified=!1,this._fov=B/180*Math.PI,this._calcMatrices())},Ir.zoom.get=function(){return this._zoom},Ir.zoom.set=function(B){var G=Math.min(Math.max(B,this.minZoom),this.maxZoom);this._zoom!==G&&(this._unmodified=!1,this._zoom=G,this.scale=this.zoomScale(G),this.tileZoom=Math.floor(G),this.zoomFraction=G-this.tileZoom,this._constrain(),this._calcMatrices())},Ir.center.get=function(){return this._center},Ir.center.set=function(B){B.lat===this._center.lat&&B.lng===this._center.lng||(this._unmodified=!1,this._center=B,this._constrain(),this._calcMatrices())},Ir.padding.get=function(){return this._edgeInsets.toJSON()},Ir.padding.set=function(B){this._edgeInsets.equals(B)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,B,1),this._calcMatrices())},Ir.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Nr.prototype.isPaddingEqual=function(B){return this._edgeInsets.equals(B)},Nr.prototype.interpolatePadding=function(B,G,H){this._unmodified=!1,this._edgeInsets.interpolate(B,G,H),this._constrain(),this._calcMatrices()},Nr.prototype.coveringZoomLevel=function(B){var G=(B.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/B.tileSize));return Math.max(0,G)},Nr.prototype.getVisibleUnwrappedCoordinates=function(B){var G=[new o.UnwrappedTileID(0,B)];if(this._renderWorldCopies)for(var H=this.pointCoordinate(new o.Point(0,0)),L=this.pointCoordinate(new o.Point(this.width,0)),q=this.pointCoordinate(new o.Point(this.width,this.height)),Q=this.pointCoordinate(new o.Point(0,this.height)),ne=Math.floor(Math.min(H.x,L.x,q.x,Q.x)),ce=Math.floor(Math.max(H.x,L.x,q.x,Q.x)),ye=ne-1;ye<=ce+1;ye++)ye!==0&&G.push(new o.UnwrappedTileID(ye,B));return G},Nr.prototype.coveringTiles=function(B){var G=this.coveringZoomLevel(B),H=G;if(B.minzoom!==void 0&&G<B.minzoom)return[];B.maxzoom!==void 0&&G>B.maxzoom&&(G=B.maxzoom);var L=o.MercatorCoordinate.fromLngLat(this.center),q=Math.pow(2,G),Q=[q*L.x,q*L.y,0],ne=jr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,G),ce=B.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ce=G);var ye=function(Cn){return{aabb:new Wr([Cn*q,0,0],[(Cn+1)*q,q,0]),zoom:0,x:0,y:0,wrap:Cn,fullyVisible:!1}},Le=[],Ie=[],je=G,qe=B.reparseOverscaled?H:G;if(this._renderWorldCopies)for(var $e=1;$e<=3;$e++)Le.push(ye(-$e)),Le.push(ye($e));for(Le.push(ye(0));Le.length>0;){var lt=Le.pop(),ft=lt.x,_t=lt.y,St=lt.fullyVisible;if(!St){var At=lt.aabb.intersects(ne);if(At===0)continue;St=At===2}var Ft=lt.aabb.distanceX(Q),Ot=lt.aabb.distanceY(Q),Zt=Math.max(Math.abs(Ft),Math.abs(Ot)),Ht=3+(1<<je-lt.zoom)-2;if(lt.zoom===je||Zt>Ht&&lt.zoom>=ce)Ie.push({tileID:new o.OverscaledTileID(lt.zoom===je?qe:lt.zoom,lt.wrap,lt.zoom,ft,_t),distanceSq:o.sqrLen([Q[0]-.5-ft,Q[1]-.5-_t])});else for(var Nt=0;Nt<4;Nt++){var gn=(ft<<1)+Nt%2,yn=(_t<<1)+(Nt>>1);Le.push({aabb:lt.aabb.quadrant(Nt),zoom:lt.zoom+1,x:gn,y:yn,wrap:lt.wrap,fullyVisible:St})}}return Ie.sort(function(Cn,Dn){return Cn.distanceSq-Dn.distanceSq}).map(function(Cn){return Cn.tileID})},Nr.prototype.resize=function(B,G){this.width=B,this.height=G,this.pixelsToGLUnits=[2/B,-2/G],this._constrain(),this._calcMatrices()},Ir.unmodified.get=function(){return this._unmodified},Nr.prototype.zoomScale=function(B){return Math.pow(2,B)},Nr.prototype.scaleZoom=function(B){return Math.log(B)/Math.LN2},Nr.prototype.project=function(B){var G=o.clamp(B.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(B.lng)*this.worldSize,o.mercatorYfromLat(G)*this.worldSize)},Nr.prototype.unproject=function(B){return new o.MercatorCoordinate(B.x/this.worldSize,B.y/this.worldSize).toLngLat()},Ir.point.get=function(){return this.project(this.center)},Nr.prototype.setLocationAtPoint=function(B,G){var H=this.pointCoordinate(G),L=this.pointCoordinate(this.centerPoint),q=this.locationCoordinate(B),Q=new o.MercatorCoordinate(q.x-(H.x-L.x),q.y-(H.y-L.y));this.center=this.coordinateLocation(Q),this._renderWorldCopies&&(this.center=this.center.wrap())},Nr.prototype.locationPoint=function(B){return this.coordinatePoint(this.locationCoordinate(B))},Nr.prototype.pointLocation=function(B){return this.coordinateLocation(this.pointCoordinate(B))},Nr.prototype.locationCoordinate=function(B){return o.MercatorCoordinate.fromLngLat(B)},Nr.prototype.coordinateLocation=function(B){return B.toLngLat()},Nr.prototype.pointCoordinate=function(B){var G=[B.x,B.y,0,1],H=[B.x,B.y,1,1];o.transformMat4(G,G,this.pixelMatrixInverse),o.transformMat4(H,H,this.pixelMatrixInverse);var L=G[3],q=H[3],Q=G[0]/L,ne=H[0]/q,ce=G[1]/L,ye=H[1]/q,Le=G[2]/L,Ie=H[2]/q,je=Le===Ie?0:(0-Le)/(Ie-Le);return new o.MercatorCoordinate(o.number(Q,ne,je)/this.worldSize,o.number(ce,ye,je)/this.worldSize)},Nr.prototype.coordinatePoint=function(B){var G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return o.transformMat4(G,G,this.pixelMatrix),new o.Point(G[0]/G[3],G[1]/G[3])},Nr.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},Nr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Nr.prototype.setMaxBounds=function(B){B?(this.lngRange=[B.getWest(),B.getEast()],this.latRange=[B.getSouth(),B.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Nr.prototype.calculatePosMatrix=function(B,G){G===void 0&&(G=!1);var H=B.key,L=G?this._alignedPosMatrixCache:this._posMatrixCache;if(L[H])return L[H];var q=B.canonical,Q=this.worldSize/this.zoomScale(q.z),ne=q.x+Math.pow(2,q.z)*B.wrap,ce=o.identity(new Float64Array(16));return o.translate(ce,ce,[ne*Q,q.y*Q,0]),o.scale(ce,ce,[Q/o.EXTENT,Q/o.EXTENT,1]),o.multiply(ce,G?this.alignedProjMatrix:this.projMatrix,ce),L[H]=new Float32Array(ce),L[H]},Nr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Nr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var B,G,H,L,q=-90,Q=90,ne=-180,ce=180,ye=this.size,Le=this._unmodified;if(this.latRange){var Ie=this.latRange;q=o.mercatorYfromLat(Ie[1])*this.worldSize,B=(Q=o.mercatorYfromLat(Ie[0])*this.worldSize)-q<ye.y?ye.y/(Q-q):0}if(this.lngRange){var je=this.lngRange;ne=o.mercatorXfromLng(je[0])*this.worldSize,G=(ce=o.mercatorXfromLng(je[1])*this.worldSize)-ne<ye.x?ye.x/(ce-ne):0}var qe=this.point,$e=Math.max(G||0,B||0);if($e)return this.center=this.unproject(new o.Point(G?(ce+ne)/2:qe.x,B?(Q+q)/2:qe.y)),this.zoom+=this.scaleZoom($e),this._unmodified=Le,void(this._constraining=!1);if(this.latRange){var lt=qe.y,ft=ye.y/2;lt-ft<q&&(L=q+ft),lt+ft>Q&&(L=Q-ft)}if(this.lngRange){var _t=qe.x,St=ye.x/2;_t-St<ne&&(H=ne+St),_t+St>ce&&(H=ce-St)}H===void 0&&L===void 0||(this.center=this.unproject(new o.Point(H!==void 0?H:qe.x,L!==void 0?L:qe.y))),this._unmodified=Le,this._constraining=!1}},Nr.prototype._calcMatrices=function(){if(this.height){var B=this._fov/2,G=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(B)*this.height;var H=Math.PI/2+this._pitch,L=this._fov*(.5+G.y/this.height),q=Math.sin(L)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-H-L,.01,Math.PI-.01)),Q=this.point,ne=Q.x,ce=Q.y,ye=1.01*(Math.cos(Math.PI/2-this._pitch)*q+this.cameraToCenterDistance),Le=this.height/50,Ie=new Float64Array(16);o.perspective(Ie,this._fov,this.width/this.height,Le,ye),Ie[8]=2*-G.x/this.width,Ie[9]=2*G.y/this.height,o.scale(Ie,Ie,[1,-1,1]),o.translate(Ie,Ie,[0,0,-this.cameraToCenterDistance]),o.rotateX(Ie,Ie,this._pitch),o.rotateZ(Ie,Ie,this.angle),o.translate(Ie,Ie,[-ne,-ce,0]),this.mercatorMatrix=o.scale([],Ie,[this.worldSize,this.worldSize,this.worldSize]),o.scale(Ie,Ie,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Ie,this.invProjMatrix=o.invert([],this.projMatrix);var je=this.width%2/2,qe=this.height%2/2,$e=Math.cos(this.angle),lt=Math.sin(this.angle),ft=ne-Math.round(ne)+$e*je+lt*qe,_t=ce-Math.round(ce)+$e*qe+lt*je,St=new Float64Array(Ie);if(o.translate(St,St,[ft>.5?ft-1:ft,_t>.5?_t-1:_t,0]),this.alignedProjMatrix=St,Ie=o.create(),o.scale(Ie,Ie,[this.width/2,-this.height/2,1]),o.translate(Ie,Ie,[1,-1,0]),this.labelPlaneMatrix=Ie,Ie=o.create(),o.scale(Ie,Ie,[1,-1,1]),o.translate(Ie,Ie,[-1,-1,0]),o.scale(Ie,Ie,[2/this.width,2/this.height,1]),this.glCoordMatrix=Ie,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Ie=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Ie,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Nr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var B=this.pointCoordinate(new o.Point(0,0)),G=[B.x*this.worldSize,B.y*this.worldSize,0,1];return o.transformMat4(G,G,this.pixelMatrix)[3]/this.cameraToCenterDistance},Nr.prototype.getCameraPoint=function(){var B=this._pitch,G=Math.tan(B)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,G))},Nr.prototype.getCameraQueryGeometry=function(B){var G=this.getCameraPoint();if(B.length===1)return[B[0],G];for(var H=G.x,L=G.y,q=G.x,Q=G.y,ne=0,ce=B;ne<ce.length;ne+=1){var ye=ce[ne];H=Math.min(H,ye.x),L=Math.min(L,ye.y),q=Math.max(q,ye.x),Q=Math.max(Q,ye.y)}return[new o.Point(H,L),new o.Point(q,L),new o.Point(q,Q),new o.Point(H,Q),new o.Point(H,L)]},Object.defineProperties(Nr.prototype,Ir);var $r=function(B){var G,H,L,q,Q;this._hashName=B&&encodeURIComponent(B),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(G=this._updateHashUnthrottled.bind(this),H=300,L=!1,q=null,Q=function(){q=null,L&&(G(),q=setTimeout(Q,H),L=!1)},function(){return L=!0,q||Q(),q})};$r.prototype.addTo=function(B){return this._map=B,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},$r.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},$r.prototype.getHashString=function(B){var G=this._map.getCenter(),H=Math.round(100*this._map.getZoom())/100,L=Math.ceil((H*Math.LN2+Math.log(512/360/.5))/Math.LN10),q=Math.pow(10,L),Q=Math.round(G.lng*q)/q,ne=Math.round(G.lat*q)/q,ce=this._map.getBearing(),ye=this._map.getPitch(),Le="";if(Le+=B?"/"+Q+"/"+ne+"/"+H:H+"/"+ne+"/"+Q,(ce||ye)&&(Le+="/"+Math.round(10*ce)/10),ye&&(Le+="/"+Math.round(ye)),this._hashName){var Ie=this._hashName,je=!1,qe=o.window.location.hash.slice(1).split("&").map(function($e){var lt=$e.split("=")[0];return lt===Ie?(je=!0,lt+"="+Le):$e}).filter(function($e){return $e});return je||qe.push(Ie+"="+Le),"#"+qe.join("&")}return"#"+Le},$r.prototype._getCurrentHash=function(){var B,G=this,H=o.window.location.hash.replace("#","");return this._hashName?(H.split("&").map(function(L){return L.split("=")}).forEach(function(L){L[0]===G._hashName&&(B=L)}),(B&&B[1]||"").split("/")):H.split("/")},$r.prototype._onHashChange=function(){var B=this._getCurrentHash();if(B.length>=3&&!B.some(function(H){return isNaN(H)})){var G=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(B[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+B[2],+B[1]],zoom:+B[0],bearing:G,pitch:+(B[4]||0)}),!0}return!1},$r.prototype._updateHashUnthrottled=function(){var B=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,B)}catch(G){}};var Ti={linearity:.3,easing:o.bezier(0,0,.3,1)},_i=o.extend({deceleration:2500,maxSpeed:1400},Ti),Oi=o.extend({deceleration:20,maxSpeed:1400},Ti),ga=o.extend({deceleration:1e3,maxSpeed:360},Ti),sa=o.extend({deceleration:1e3,maxSpeed:90},Ti),Yi=function(B){this._map=B,this.clear()};function Wa(B,G){(!B.duration||B.duration<G.duration)&&(B.duration=G.duration,B.easing=G.easing)}function eo(B,G,H){var L=H.maxSpeed,q=H.linearity,Q=H.deceleration,ne=o.clamp(B*q/(G/1e3),-L,L),ce=Math.abs(ne)/(Q*q);return{easing:H.easing,duration:1e3*ce,amount:ne*(ce/2)}}Yi.prototype.clear=function(){this._inertiaBuffer=[]},Yi.prototype.record=function(B){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:B})},Yi.prototype._drainInertiaBuffer=function(){for(var B=this._inertiaBuffer,G=o.browser.now();B.length>0&&G-B[0].time>160;)B.shift()},Yi.prototype._onMoveEnd=function(B){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var G={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},H=0,L=this._inertiaBuffer;H<L.length;H+=1){var q=L[H].settings;G.zoom+=q.zoomDelta||0,G.bearing+=q.bearingDelta||0,G.pitch+=q.pitchDelta||0,q.panDelta&&G.pan._add(q.panDelta),q.around&&(G.around=q.around),q.pinchAround&&(G.pinchAround=q.pinchAround)}var Q=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,ne={};if(G.pan.mag()){var ce=eo(G.pan.mag(),Q,o.extend({},_i,B||{}));ne.offset=G.pan.mult(ce.amount/G.pan.mag()),ne.center=this._map.transform.center,Wa(ne,ce)}if(G.zoom){var ye=eo(G.zoom,Q,Oi);ne.zoom=this._map.transform.zoom+ye.amount,Wa(ne,ye)}if(G.bearing){var Le=eo(G.bearing,Q,ga);ne.bearing=this._map.transform.bearing+o.clamp(Le.amount,-179,179),Wa(ne,Le)}if(G.pitch){var Ie=eo(G.pitch,Q,sa);ne.pitch=this._map.transform.pitch+Ie.amount,Wa(ne,Ie)}if(ne.zoom||ne.bearing){var je=G.pinchAround===void 0?G.around:G.pinchAround;ne.around=je?this._map.unproject(je):this._map.getCenter()}return this.clear(),o.extend(ne,{noMoveStart:!0})}};var li=function(B){function G(L,q,Q,ne){ne===void 0&&(ne={});var ce=b.mousePos(q.getCanvasContainer(),Q),ye=q.unproject(ce);B.call(this,L,o.extend({point:ce,lngLat:ye,originalEvent:Q},ne)),this._defaultPrevented=!1,this.target=q}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(o.Event),Ta=function(B){function G(L,q,Q){var ne=L==="touchend"?Q.changedTouches:Q.touches,ce=b.touchPos(q.getCanvasContainer(),ne),ye=ce.map(function(je){return q.unproject(je)}),Le=ce.reduce(function(je,qe,$e,lt){return je.add(qe.div(lt.length))},new o.Point(0,0)),Ie=q.unproject(Le);B.call(this,L,{points:ce,point:Le,lngLats:ye,lngLat:Ie,originalEvent:Q}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(o.Event),Xi=function(B){function G(L,q,Q){B.call(this,L,{originalEvent:Q}),this._defaultPrevented=!1}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={defaultPrevented:{configurable:!0}};return G.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(G.prototype,H),G}(o.Event),Ri=function(B,G){this._map=B,this._clickTolerance=G.clickTolerance};Ri.prototype.reset=function(){delete this._mousedownPos},Ri.prototype.wheel=function(B){return this._firePreventable(new Xi(B.type,this._map,B))},Ri.prototype.mousedown=function(B,G){return this._mousedownPos=G,this._firePreventable(new li(B.type,this._map,B))},Ri.prototype.mouseup=function(B){this._map.fire(new li(B.type,this._map,B))},Ri.prototype.click=function(B,G){this._mousedownPos&&this._mousedownPos.dist(G)>=this._clickTolerance||this._map.fire(new li(B.type,this._map,B))},Ri.prototype.dblclick=function(B){return this._firePreventable(new li(B.type,this._map,B))},Ri.prototype.mouseover=function(B){this._map.fire(new li(B.type,this._map,B))},Ri.prototype.mouseout=function(B){this._map.fire(new li(B.type,this._map,B))},Ri.prototype.touchstart=function(B){return this._firePreventable(new Ta(B.type,this._map,B))},Ri.prototype.touchmove=function(B){this._map.fire(new Ta(B.type,this._map,B))},Ri.prototype.touchend=function(B){this._map.fire(new Ta(B.type,this._map,B))},Ri.prototype.touchcancel=function(B){this._map.fire(new Ta(B.type,this._map,B))},Ri.prototype._firePreventable=function(B){if(this._map.fire(B),B.defaultPrevented)return{}},Ri.prototype.isEnabled=function(){return!0},Ri.prototype.isActive=function(){return!1},Ri.prototype.enable=function(){},Ri.prototype.disable=function(){};var la=function(B){this._map=B};la.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},la.prototype.mousemove=function(B){this._map.fire(new li(B.type,this._map,B))},la.prototype.mousedown=function(){this._delayContextMenu=!0},la.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new li("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},la.prototype.contextmenu=function(B){this._delayContextMenu?this._contextMenuEvent=B:this._map.fire(new li(B.type,this._map,B)),this._map.listens("contextmenu")&&B.preventDefault()},la.prototype.isEnabled=function(){return!0},la.prototype.isActive=function(){return!1},la.prototype.enable=function(){},la.prototype.disable=function(){};var wi=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._container=B.getContainer(),this._clickTolerance=G.clickTolerance||1};function ua(B,G){for(var H={},L=0;L<B.length;L++)H[B[L].identifier]=G[L];return H}wi.prototype.isEnabled=function(){return!!this._enabled},wi.prototype.isActive=function(){return!!this._active},wi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},wi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},wi.prototype.mousedown=function(B,G){this.isEnabled()&&B.shiftKey&&B.button===0&&(b.disableDrag(),this._startPos=this._lastPos=G,this._active=!0)},wi.prototype.mousemoveWindow=function(B,G){if(this._active){var H=G;if(!(this._lastPos.equals(H)||!this._box&&H.dist(this._startPos)<this._clickTolerance)){var L=this._startPos;this._lastPos=H,this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",B));var q=Math.min(L.x,H.x),Q=Math.max(L.x,H.x),ne=Math.min(L.y,H.y),ce=Math.max(L.y,H.y);b.setTransform(this._box,"translate("+q+"px,"+ne+"px)"),this._box.style.width=Q-q+"px",this._box.style.height=ce-ne+"px"}}},wi.prototype.mouseupWindow=function(B,G){var H=this;if(this._active&&B.button===0){var L=this._startPos,q=G;if(this.reset(),b.suppressClick(),L.x!==q.x||L.y!==q.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:B})),{cameraAnimation:function(Q){return Q.fitScreenCoordinates(L,q,H._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",B)}},wi.prototype.keydown=function(B){this._active&&B.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",B))},wi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos},wi.prototype._fireEvent=function(B,G){return this._map.fire(new o.Event(B,{originalEvent:G}))};var Eo=function(B){this.reset(),this.numTouches=B.numTouches};Eo.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Eo.prototype.touchstart=function(B,G,H){(this.centroid||H.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=B.timeStamp),H.length===this.numTouches&&(this.centroid=function(L){for(var q=new o.Point(0,0),Q=0,ne=L;Q<ne.length;Q+=1){var ce=ne[Q];q._add(ce)}return q.div(L.length)}(G),this.touches=ua(H,G)))},Eo.prototype.touchmove=function(B,G,H){if(!this.aborted&&this.centroid){var L=ua(H,G);for(var q in this.touches){var Q=this.touches[q],ne=L[q];(!ne||ne.dist(Q)>30)&&(this.aborted=!0)}}},Eo.prototype.touchend=function(B,G,H){if((!this.centroid||B.timeStamp-this.startTime>500)&&(this.aborted=!0),H.length===0){var L=!this.aborted&&this.centroid;if(this.reset(),L)return L}};var ds=function(B){this.singleTap=new Eo(B),this.numTaps=B.numTaps,this.reset()};ds.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ds.prototype.touchstart=function(B,G,H){this.singleTap.touchstart(B,G,H)},ds.prototype.touchmove=function(B,G,H){this.singleTap.touchmove(B,G,H)},ds.prototype.touchend=function(B,G,H){var L=this.singleTap.touchend(B,G,H);if(L){var q=B.timeStamp-this.lastTime<500,Q=!this.lastTap||this.lastTap.dist(L)<30;if(q&&Q||this.reset(),this.count++,this.lastTime=B.timeStamp,this.lastTap=L,this.count===this.numTaps)return this.reset(),L}};var ho=function(){this._zoomIn=new ds({numTouches:1,numTaps:2}),this._zoomOut=new ds({numTouches:2,numTaps:1}),this.reset()};ho.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ho.prototype.touchstart=function(B,G,H){this._zoomIn.touchstart(B,G,H),this._zoomOut.touchstart(B,G,H)},ho.prototype.touchmove=function(B,G,H){this._zoomIn.touchmove(B,G,H),this._zoomOut.touchmove(B,G,H)},ho.prototype.touchend=function(B,G,H){var L=this,q=this._zoomIn.touchend(B,G,H),Q=this._zoomOut.touchend(B,G,H);return q?(this._active=!0,B.preventDefault(),setTimeout(function(){return L.reset()},0),{cameraAnimation:function(ne){return ne.easeTo({duration:300,zoom:ne.getZoom()+1,around:ne.unproject(q)},{originalEvent:B})}}):Q?(this._active=!0,B.preventDefault(),setTimeout(function(){return L.reset()},0),{cameraAnimation:function(ne){return ne.easeTo({duration:300,zoom:ne.getZoom()-1,around:ne.unproject(Q)},{originalEvent:B})}}):void 0},ho.prototype.touchcancel=function(){this.reset()},ho.prototype.enable=function(){this._enabled=!0},ho.prototype.disable=function(){this._enabled=!1,this.reset()},ho.prototype.isEnabled=function(){return this._enabled},ho.prototype.isActive=function(){return this._active};var ts={};ts[0]=1,ts[2]=2;var Ea=function(B){this.reset(),this._clickTolerance=B.clickTolerance||1};Ea.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Ea.prototype._correctButton=function(B,G){return!1},Ea.prototype._move=function(B,G){return{}},Ea.prototype.mousedown=function(B,G){if(!this._lastPoint){var H=b.mouseButton(B);this._correctButton(B,H)&&(this._lastPoint=G,this._eventButton=H)}},Ea.prototype.mousemoveWindow=function(B,G){var H=this._lastPoint;if(H){if(B.preventDefault(),function(L,q){var Q=ts[q];return L.buttons===void 0||(L.buttons&Q)!==Q}(B,this._eventButton))this.reset();else if(this._moved||!(G.dist(H)<this._clickTolerance))return this._moved=!0,this._lastPoint=G,this._move(H,G)}},Ea.prototype.mouseupWindow=function(B){this._lastPoint&&b.mouseButton(B)===this._eventButton&&(this._moved&&b.suppressClick(),this.reset())},Ea.prototype.enable=function(){this._enabled=!0},Ea.prototype.disable=function(){this._enabled=!1,this.reset()},Ea.prototype.isEnabled=function(){return this._enabled},Ea.prototype.isActive=function(){return this._active};var gs=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.mousedown=function(H,L){B.prototype.mousedown.call(this,H,L),this._lastPoint&&(this._active=!0)},G.prototype._correctButton=function(H,L){return L===0&&!H.ctrlKey},G.prototype._move=function(H,L){return{around:L,panDelta:L.sub(H)}},G}(Ea),qo=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(H,L){return L===0&&H.ctrlKey||L===2},G.prototype._move=function(H,L){var q=.8*(L.x-H.x);if(q)return this._active=!0,{bearingDelta:q}},G.prototype.contextmenu=function(H){H.preventDefault()},G}(Ea),to=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype._correctButton=function(H,L){return L===0&&H.ctrlKey||L===2},G.prototype._move=function(H,L){var q=-.5*(L.y-H.y);if(q)return this._active=!0,{pitchDelta:q}},G.prototype.contextmenu=function(H){H.preventDefault()},G}(Ea),no=function(B){this._minTouches=1,this._clickTolerance=B.clickTolerance||1,this.reset()};no.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},no.prototype.touchstart=function(B,G,H){return this._calculateTransform(B,G,H)},no.prototype.touchmove=function(B,G,H){if(this._active&&!(H.length<this._minTouches))return B.preventDefault(),this._calculateTransform(B,G,H)},no.prototype.touchend=function(B,G,H){this._calculateTransform(B,G,H),this._active&&H.length<this._minTouches&&this.reset()},no.prototype.touchcancel=function(){this.reset()},no.prototype._calculateTransform=function(B,G,H){H.length>0&&(this._active=!0);var L=ua(H,G),q=new o.Point(0,0),Q=new o.Point(0,0),ne=0;for(var ce in L){var ye=L[ce],Le=this._touches[ce];Le&&(q._add(ye),Q._add(ye.sub(Le)),ne++,L[ce]=ye)}if(this._touches=L,!(ne<this._minTouches)&&Q.mag()){var Ie=Q.div(ne);if(this._sum._add(Ie),!(this._sum.mag()<this._clickTolerance))return{around:q.div(ne),panDelta:Ie}}},no.prototype.enable=function(){this._enabled=!0},no.prototype.disable=function(){this._enabled=!1,this.reset()},no.prototype.isEnabled=function(){return this._enabled},no.prototype.isActive=function(){return this._active};var ki=function(){this.reset()};function po(B,G,H){for(var L=0;L<B.length;L++)if(B[L].identifier===H)return G[L]}ki.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ki.prototype._start=function(B){},ki.prototype._move=function(B,G,H){return{}},ki.prototype.touchstart=function(B,G,H){this._firstTwoTouches||H.length<2||(this._firstTwoTouches=[H[0].identifier,H[1].identifier],this._start([G[0],G[1]]))},ki.prototype.touchmove=function(B,G,H){if(this._firstTwoTouches){B.preventDefault();var L=this._firstTwoTouches,q=L[0],Q=L[1],ne=po(H,G,q),ce=po(H,G,Q);if(ne&&ce){var ye=this._aroundCenter?null:ne.add(ce).div(2);return this._move([ne,ce],ye,B)}}},ki.prototype.touchend=function(B,G,H){if(this._firstTwoTouches){var L=this._firstTwoTouches,q=L[0],Q=L[1],ne=po(H,G,q),ce=po(H,G,Q);ne&&ce||(this._active&&b.suppressClick(),this.reset())}},ki.prototype.touchcancel=function(){this.reset()},ki.prototype.enable=function(B){this._enabled=!0,this._aroundCenter=!!B&&B.around==="center"},ki.prototype.disable=function(){this._enabled=!1,this.reset()},ki.prototype.isEnabled=function(){return this._enabled},ki.prototype.isActive=function(){return this._active};function Dr(B,G){return Math.log(B/G)/Math.LN2}var js=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._distance,delete this._startDistance},G.prototype._start=function(H){this._startDistance=this._distance=H[0].dist(H[1])},G.prototype._move=function(H,L){var q=this._distance;if(this._distance=H[0].dist(H[1]),this._active||!(Math.abs(Dr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Dr(this._distance,q),pinchAround:L}},G}(ki);function fl(B,G){return 180*B.angleWith(G)/Math.PI}var ns=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},G.prototype._start=function(H){this._startVector=this._vector=H[0].sub(H[1]),this._minDiameter=H[0].dist(H[1])},G.prototype._move=function(H,L){var q=this._vector;if(this._vector=H[0].sub(H[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:fl(this._vector,q),pinchAround:L}},G.prototype._isBelowThreshold=function(H){this._minDiameter=Math.min(this._minDiameter,H.mag());var L=25/(Math.PI*this._minDiameter)*360,q=fl(H,this._startVector);return Math.abs(q)<L},G}(ki);function rs(B){return Math.abs(B.y)>Math.abs(B.x)}var vs=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.reset=function(){B.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},G.prototype._start=function(H){this._lastPoints=H,rs(H[0].sub(H[1]))&&(this._valid=!1)},G.prototype._move=function(H,L,q){var Q=H[0].sub(this._lastPoints[0]),ne=H[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Q,ne,q.timeStamp),this._valid)return this._lastPoints=H,this._active=!0,{pitchDelta:(Q.y+ne.y)/2*-.5}},G.prototype.gestureBeginsVertically=function(H,L,q){if(this._valid!==void 0)return this._valid;var Q=H.mag()>=2,ne=L.mag()>=2;if(Q||ne){if(!Q||!ne)return this._firstMove===void 0&&(this._firstMove=q),q-this._firstMove<100&&void 0;var ce=H.y>0==L.y>0;return rs(H)&&rs(L)&&ce}},G}(ki),Ts={panStep:100,bearingStep:15,pitchStep:10},kr=function(){var B=Ts;this._panStep=B.panStep,this._bearingStep=B.bearingStep,this._pitchStep=B.pitchStep,this._rotationDisabled=!1};function Us(B){return B*(2-B)}kr.prototype.reset=function(){this._active=!1},kr.prototype.keydown=function(B){var G=this;if(!(B.altKey||B.ctrlKey||B.metaKey)){var H=0,L=0,q=0,Q=0,ne=0;switch(B.keyCode){case 61:case 107:case 171:case 187:H=1;break;case 189:case 109:case 173:H=-1;break;case 37:B.shiftKey?L=-1:(B.preventDefault(),Q=-1);break;case 39:B.shiftKey?L=1:(B.preventDefault(),Q=1);break;case 38:B.shiftKey?q=1:(B.preventDefault(),ne=-1);break;case 40:B.shiftKey?q=-1:(B.preventDefault(),ne=1);break;default:return}return this._rotationDisabled&&(L=0,q=0),{cameraAnimation:function(ce){var ye=ce.getZoom();ce.easeTo({duration:300,easeId:"keyboardHandler",easing:Us,zoom:H?Math.round(ye)+H*(B.shiftKey?2:1):ye,bearing:ce.getBearing()+L*G._bearingStep,pitch:ce.getPitch()+q*G._pitchStep,offset:[-Q*G._panStep,-ne*G._panStep],center:ce.getCenter()},{originalEvent:B})}}}},kr.prototype.enable=function(){this._enabled=!0},kr.prototype.disable=function(){this._enabled=!1,this.reset()},kr.prototype.isEnabled=function(){return this._enabled},kr.prototype.isActive=function(){return this._active},kr.prototype.disableRotation=function(){this._rotationDisabled=!0},kr.prototype.enableRotation=function(){this._rotationDisabled=!1};var Ho=4.000244140625,ra=function(B,G){this._map=B,this._el=B.getCanvasContainer(),this._handler=G,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout"],this)};ra.prototype.setZoomRate=function(B){this._defaultZoomRate=B},ra.prototype.setWheelZoomRate=function(B){this._wheelZoomRate=B},ra.prototype.isEnabled=function(){return!!this._enabled},ra.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ra.prototype.isZooming=function(){return!!this._zooming},ra.prototype.enable=function(B){this.isEnabled()||(this._enabled=!0,this._aroundCenter=B&&B.around==="center")},ra.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ra.prototype.wheel=function(B){if(this.isEnabled()){var G=B.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*B.deltaY:B.deltaY,H=o.browser.now(),L=H-(this._lastWheelEventTime||0);this._lastWheelEventTime=H,G!==0&&G%Ho==0?this._type="wheel":G!==0&&Math.abs(G)<4?this._type="trackpad":L>400?(this._type=null,this._lastValue=G,this._timeout=setTimeout(this._onTimeout,40,B)):this._type||(this._type=Math.abs(L*G)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,G+=this._lastValue)),B.shiftKey&&G&&(G/=4),this._type&&(this._lastWheelEvent=B,this._delta-=G,this._active||this._start(B)),B.preventDefault()}},ra.prototype._onTimeout=function(B){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(B)},ra.prototype._start=function(B){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var G=b.mousePos(this._el,B);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(G)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ra.prototype.renderFrame=function(){var B=this;if(this._frameId&&(this._frameId=null,this.isActive())){var G=this._map.transform;if(this._delta!==0){var H=this._type==="wheel"&&Math.abs(this._delta)>Ho?this._wheelZoomRate:this._defaultZoomRate,L=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&L!==0&&(L=1/L);var q=typeof this._targetZoom=="number"?G.zoomScale(this._targetZoom):G.scale;this._targetZoom=Math.min(G.maxZoom,Math.max(G.minZoom,G.scaleZoom(q*L))),this._type==="wheel"&&(this._startZoom=G.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Q,ne=typeof this._targetZoom=="number"?this._targetZoom:G.zoom,ce=this._startZoom,ye=this._easing,Le=!1;if(this._type==="wheel"&&ce&&ye){var Ie=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),je=ye(Ie);Q=o.number(ce,ne,je),Ie<1?this._frameId||(this._frameId=!0):Le=!0}else Q=ne,Le=!0;return this._active=!0,Le&&(this._active=!1,this._finishTimeout=setTimeout(function(){B._zooming=!1,B._handler._triggerRenderFrame(),delete B._targetZoom,delete B._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Le,zoomDelta:Q-G.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ra.prototype._smoothOutEasing=function(B){var G=o.ease;if(this._prevEase){var H=this._prevEase,L=(o.browser.now()-H.start)/H.duration,q=H.easing(L+.01)-H.easing(L),Q=.27/Math.sqrt(q*q+1e-4)*.01,ne=Math.sqrt(.0729-Q*Q);G=o.bezier(Q,ne,.25,1)}return this._prevEase={start:o.browser.now(),duration:B,easing:G},G},ra.prototype.reset=function(){this._active=!1};var is=function(B,G){this._clickZoom=B,this._tapZoom=G};is.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},is.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},is.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},is.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var go=function(){this.reset()};go.prototype.reset=function(){this._active=!1},go.prototype.dblclick=function(B,G){return B.preventDefault(),{cameraAnimation:function(H){H.easeTo({duration:300,zoom:H.getZoom()+(B.shiftKey?-1:1),around:H.unproject(G)},{originalEvent:B})}}},go.prototype.enable=function(){this._enabled=!0},go.prototype.disable=function(){this._enabled=!1,this.reset()},go.prototype.isEnabled=function(){return this._enabled},go.prototype.isActive=function(){return this._active};var ro=function(){this._tap=new ds({numTouches:1,numTaps:1}),this.reset()};ro.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ro.prototype.touchstart=function(B,G,H){this._swipePoint||(this._tapTime&&B.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?H.length>0&&(this._swipePoint=G[0],this._swipeTouch=H[0].identifier):this._tap.touchstart(B,G,H))},ro.prototype.touchmove=function(B,G,H){if(this._tapTime){if(this._swipePoint){if(H[0].identifier!==this._swipeTouch)return;var L=G[0],q=L.y-this._swipePoint.y;return this._swipePoint=L,B.preventDefault(),this._active=!0,{zoomDelta:q/128}}}else this._tap.touchmove(B,G,H)},ro.prototype.touchend=function(B,G,H){this._tapTime?this._swipePoint&&H.length===0&&this.reset():this._tap.touchend(B,G,H)&&(this._tapTime=B.timeStamp)},ro.prototype.touchcancel=function(){this.reset()},ro.prototype.enable=function(){this._enabled=!0},ro.prototype.disable=function(){this._enabled=!1,this.reset()},ro.prototype.isEnabled=function(){return this._enabled},ro.prototype.isActive=function(){return this._active};var ka=function(B,G,H){this._el=B,this._mousePan=G,this._touchPan=H};ka.prototype.enable=function(B){this._inertiaOptions=B||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ka.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ka.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ka.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Lo=function(B,G,H){this._pitchWithRotate=B.pitchWithRotate,this._mouseRotate=G,this._mousePitch=H};Lo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Lo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Lo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Lo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var io=function(B,G,H,L){this._el=B,this._touchZoom=G,this._touchRotate=H,this._tapDragZoom=L,this._rotationDisabled=!1,this._enabled=!0};io.prototype.enable=function(B){this._touchZoom.enable(B),this._rotationDisabled||this._touchRotate.enable(B),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},io.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},io.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},io.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},io.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},io.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Go=function(B){return B.zoom||B.drag||B.pitch||B.rotate},Vs=function(B){function G(){B.apply(this,arguments)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G}(o.Event);function as(B){return B.panDelta&&B.panDelta.mag()||B.zoomDelta||B.bearingDelta||B.pitchDelta}var oi=function(B,G){this._map=B,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Yi(B),this._bearingSnap=G.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(G),o.bindAll(["handleEvent","handleWindowEvent"],this);var H=this._el;this._listeners=[[H,"touchstart",{passive:!0}],[H,"touchmove",{passive:!1}],[H,"touchend",void 0],[H,"touchcancel",void 0],[H,"mousedown",void 0],[H,"mousemove",void 0],[H,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[H,"mouseover",void 0],[H,"mouseout",void 0],[H,"dblclick",void 0],[H,"click",void 0],[H,"keydown",{capture:!1}],[H,"keyup",void 0],[H,"wheel",{passive:!1}],[H,"contextmenu",void 0],[o.window,"blur",void 0]];for(var L=0,q=this._listeners;L<q.length;L+=1){var Q=q[L],ne=Q[0],ce=Q[1],ye=Q[2];b.addEventListener(ne,ce,ne===o.window.document?this.handleWindowEvent:this.handleEvent,ye)}};oi.prototype.destroy=function(){for(var B=0,G=this._listeners;B<G.length;B+=1){var H=G[B],L=H[0],q=H[1],Q=H[2];b.removeEventListener(L,q,L===o.window.document?this.handleWindowEvent:this.handleEvent,Q)}},oi.prototype._addDefaultHandlers=function(B){var G=this._map,H=G.getCanvasContainer();this._add("mapEvent",new Ri(G,B));var L=G.boxZoom=new wi(G,B);this._add("boxZoom",L);var q=new ho,Q=new go;G.doubleClickZoom=new is(Q,q),this._add("tapZoom",q),this._add("clickZoom",Q);var ne=new ro;this._add("tapDragZoom",ne);var ce=G.touchPitch=new vs;this._add("touchPitch",ce);var ye=new qo(B),Le=new to(B);G.dragRotate=new Lo(B,ye,Le),this._add("mouseRotate",ye,["mousePitch"]),this._add("mousePitch",Le,["mouseRotate"]);var Ie=new gs(B),je=new no(B);G.dragPan=new ka(H,Ie,je),this._add("mousePan",Ie),this._add("touchPan",je,["touchZoom","touchRotate"]);var qe=new ns,$e=new js;G.touchZoomRotate=new io(H,$e,qe,ne),this._add("touchRotate",qe,["touchPan","touchZoom"]),this._add("touchZoom",$e,["touchPan","touchRotate"]);var lt=G.scrollZoom=new ra(G,this);this._add("scrollZoom",lt,["mousePan"]);var ft=G.keyboard=new kr;this._add("keyboard",ft),this._add("blockableMapEvent",new la(G));for(var _t=0,St=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];_t<St.length;_t+=1){var At=St[_t];B.interactive&&B[At]&&G[At].enable(B[At])}},oi.prototype._add=function(B,G,H){this._handlers.push({handlerName:B,handler:G,allowed:H}),this._handlersById[B]=G},oi.prototype.stop=function(B){if(!this._updatingCamera){for(var G=0,H=this._handlers;G<H.length;G+=1)H[G].handler.reset();this._inertia.clear(),this._fireEvents({},{},B),this._changes=[]}},oi.prototype.isActive=function(){for(var B=0,G=this._handlers;B<G.length;B+=1)if(G[B].handler.isActive())return!0;return!1},oi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},oi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},oi.prototype.isMoving=function(){return Boolean(Go(this._eventsInProgress))||this.isZooming()},oi.prototype._blockedByActive=function(B,G,H){for(var L in B)if(L!==H&&(!G||G.indexOf(L)<0))return!0;return!1},oi.prototype.handleWindowEvent=function(B){this.handleEvent(B,B.type+"Window")},oi.prototype._getMapTouches=function(B){for(var G=[],H=0,L=B;H<L.length;H+=1){var q=L[H],Q=q.target;this._el.contains(Q)&&G.push(q)}return G},oi.prototype.handleEvent=function(B,G){if(B.type!=="blur"){this._updatingCamera=!0;for(var H=B.type==="renderFrame"?void 0:B,L={needsRenderFrame:!1},q={},Q={},ne=B.touches?this._getMapTouches(B.touches):void 0,ce=ne?b.touchPos(this._el,ne):b.mousePos(this._el,B),ye=0,Le=this._handlers;ye<Le.length;ye+=1){var Ie=Le[ye],je=Ie.handlerName,qe=Ie.handler,$e=Ie.allowed;if(qe.isEnabled()){var lt=void 0;this._blockedByActive(Q,$e,je)?qe.reset():qe[G||B.type]&&(lt=qe[G||B.type](B,ce,ne),this.mergeHandlerResult(L,q,lt,je,H),lt&&lt.needsRenderFrame&&this._triggerRenderFrame()),(lt||qe.isActive())&&(Q[je]=qe)}}var ft={};for(var _t in this._previousActiveHandlers)Q[_t]||(ft[_t]=H);this._previousActiveHandlers=Q,(Object.keys(ft).length||as(L))&&(this._changes.push([L,q,ft]),this._triggerRenderFrame()),(Object.keys(Q).length||as(L))&&this._map._stop(!0),this._updatingCamera=!1;var St=L.cameraAnimation;St&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],St(this._map))}else this.stop(!0)},oi.prototype.mergeHandlerResult=function(B,G,H,L,q){if(H){o.extend(B,H);var Q={handlerName:L,originalEvent:H.originalEvent||q};H.zoomDelta!==void 0&&(G.zoom=Q),H.panDelta!==void 0&&(G.drag=Q),H.pitchDelta!==void 0&&(G.pitch=Q),H.bearingDelta!==void 0&&(G.rotate=Q)}},oi.prototype._applyChanges=function(){for(var B={},G={},H={},L=0,q=this._changes;L<q.length;L+=1){var Q=q[L],ne=Q[0],ce=Q[1],ye=Q[2];ne.panDelta&&(B.panDelta=(B.panDelta||new o.Point(0,0))._add(ne.panDelta)),ne.zoomDelta&&(B.zoomDelta=(B.zoomDelta||0)+ne.zoomDelta),ne.bearingDelta&&(B.bearingDelta=(B.bearingDelta||0)+ne.bearingDelta),ne.pitchDelta&&(B.pitchDelta=(B.pitchDelta||0)+ne.pitchDelta),ne.around!==void 0&&(B.around=ne.around),ne.pinchAround!==void 0&&(B.pinchAround=ne.pinchAround),ne.noInertia&&(B.noInertia=ne.noInertia),o.extend(G,ce),o.extend(H,ye)}this._updateMapTransform(B,G,H),this._changes=[]},oi.prototype._updateMapTransform=function(B,G,H){var L=this._map,q=L.transform;if(!as(B))return this._fireEvents(G,H,!0);var Q=B.panDelta,ne=B.zoomDelta,ce=B.bearingDelta,ye=B.pitchDelta,Le=B.around,Ie=B.pinchAround;Ie!==void 0&&(Le=Ie),L._stop(!0),Le=Le||L.transform.centerPoint;var je=q.pointLocation(Q?Le.sub(Q):Le);ce&&(q.bearing+=ce),ye&&(q.pitch+=ye),ne&&(q.zoom+=ne),q.setLocationAtPoint(je,Le),this._map._update(),B.noInertia||this._inertia.record(B),this._fireEvents(G,H,!0)},oi.prototype._fireEvents=function(B,G,H){var L=this,q=Go(this._eventsInProgress),Q=Go(B),ne={};for(var ce in B){var ye=B[ce].originalEvent;this._eventsInProgress[ce]||(ne[ce+"start"]=ye),this._eventsInProgress[ce]=B[ce]}for(var Le in!q&&Q&&this._fireEvent("movestart",Q.originalEvent),ne)this._fireEvent(Le,ne[Le]);for(var Ie in Q&&this._fireEvent("move",Q.originalEvent),B){var je=B[Ie].originalEvent;this._fireEvent(Ie,je)}var qe,$e={};for(var lt in this._eventsInProgress){var ft=this._eventsInProgress[lt],_t=ft.handlerName,St=ft.originalEvent;this._handlersById[_t].isActive()||(delete this._eventsInProgress[lt],qe=G[_t]||St,$e[lt+"end"]=qe)}for(var At in $e)this._fireEvent(At,$e[At]);var Ft=Go(this._eventsInProgress);if(H&&(q||Q)&&!Ft){this._updatingCamera=!0;var Ot=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Zt=function(Ht){return Ht!==0&&-L._bearingSnap<Ht&&Ht<L._bearingSnap};Ot?(Zt(Ot.bearing||this._map.getBearing())&&(Ot.bearing=0),this._map.easeTo(Ot,{originalEvent:qe})):(this._map.fire(new o.Event("moveend",{originalEvent:qe})),Zt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},oi.prototype._fireEvent=function(B,G){this._map.fire(new o.Event(B,G?{originalEvent:G}:{}))},oi.prototype._requestFrame=function(){var B=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(G){delete B._frameId,B.handleEvent(new Vs("renderFrame",{timeStamp:G})),B._applyChanges()})},oi.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var ca=function(B){function G(H,L){B.call(this),this._moving=!1,this._zooming=!1,this.transform=H,this._bearingSnap=L.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},G.prototype.setCenter=function(H,L){return this.jumpTo({center:H},L)},G.prototype.panBy=function(H,L,q){return H=o.Point.convert(H).mult(-1),this.panTo(this.transform.center,o.extend({offset:H},L),q)},G.prototype.panTo=function(H,L,q){return this.easeTo(o.extend({center:H},L),q)},G.prototype.getZoom=function(){return this.transform.zoom},G.prototype.setZoom=function(H,L){return this.jumpTo({zoom:H},L),this},G.prototype.zoomTo=function(H,L,q){return this.easeTo(o.extend({zoom:H},L),q)},G.prototype.zoomIn=function(H,L){return this.zoomTo(this.getZoom()+1,H,L),this},G.prototype.zoomOut=function(H,L){return this.zoomTo(this.getZoom()-1,H,L),this},G.prototype.getBearing=function(){return this.transform.bearing},G.prototype.setBearing=function(H,L){return this.jumpTo({bearing:H},L),this},G.prototype.getPadding=function(){return this.transform.padding},G.prototype.setPadding=function(H,L){return this.jumpTo({padding:H},L),this},G.prototype.rotateTo=function(H,L,q){return this.easeTo(o.extend({bearing:H},L),q)},G.prototype.resetNorth=function(H,L){return this.rotateTo(0,o.extend({duration:1e3},H),L),this},G.prototype.resetNorthPitch=function(H,L){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},H),L),this},G.prototype.snapToNorth=function(H,L){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(H,L):this},G.prototype.getPitch=function(){return this.transform.pitch},G.prototype.setPitch=function(H,L){return this.jumpTo({pitch:H},L),this},G.prototype.cameraForBounds=function(H,L){H=o.LngLatBounds.convert(H);var q=L&&L.bearing||0;return this._cameraForBoxAndBearing(H.getNorthWest(),H.getSouthEast(),q,L)},G.prototype._cameraForBoxAndBearing=function(H,L,q,Q){var ne={top:0,bottom:0,right:0,left:0};if(typeof(Q=o.extend({padding:ne,offset:[0,0],maxZoom:this.transform.maxZoom},Q)).padding=="number"){var ce=Q.padding;Q.padding={top:ce,bottom:ce,right:ce,left:ce}}Q.padding=o.extend(ne,Q.padding);var ye=this.transform,Le=ye.padding,Ie=ye.project(o.LngLat.convert(H)),je=ye.project(o.LngLat.convert(L)),qe=Ie.rotate(-q*Math.PI/180),$e=je.rotate(-q*Math.PI/180),lt=new o.Point(Math.max(qe.x,$e.x),Math.max(qe.y,$e.y)),ft=new o.Point(Math.min(qe.x,$e.x),Math.min(qe.y,$e.y)),_t=lt.sub(ft),St=(ye.width-(Le.left+Le.right+Q.padding.left+Q.padding.right))/_t.x,At=(ye.height-(Le.top+Le.bottom+Q.padding.top+Q.padding.bottom))/_t.y;if(!(At<0||St<0)){var Ft=Math.min(ye.scaleZoom(ye.scale*Math.min(St,At)),Q.maxZoom),Ot=typeof Q.offset.x=="number"?new o.Point(Q.offset.x,Q.offset.y):o.Point.convert(Q.offset),Zt=(Q.padding.left-Q.padding.right)/2,Ht=(Q.padding.top-Q.padding.bottom)/2,Nt=new o.Point(Zt,Ht).rotate(q*Math.PI/180),gn=Ot.add(Nt).mult(ye.scale/ye.zoomScale(Ft));return{center:ye.unproject(Ie.add(je).div(2).sub(gn)),zoom:Ft,bearing:q}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},G.prototype.fitBounds=function(H,L,q){return this._fitInternal(this.cameraForBounds(H,L),L,q)},G.prototype.fitScreenCoordinates=function(H,L,q,Q,ne){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(H)),this.transform.pointLocation(o.Point.convert(L)),q,Q),Q,ne)},G.prototype._fitInternal=function(H,L,q){return H?(delete(L=o.extend(H,L)).padding,L.linear?this.easeTo(L,q):this.flyTo(L,q)):this},G.prototype.jumpTo=function(H,L){this.stop();var q=this.transform,Q=!1,ne=!1,ce=!1;return"zoom"in H&&q.zoom!==+H.zoom&&(Q=!0,q.zoom=+H.zoom),H.center!==void 0&&(q.center=o.LngLat.convert(H.center)),"bearing"in H&&q.bearing!==+H.bearing&&(ne=!0,q.bearing=+H.bearing),"pitch"in H&&q.pitch!==+H.pitch&&(ce=!0,q.pitch=+H.pitch),H.padding==null||q.isPaddingEqual(H.padding)||(q.padding=H.padding),this.fire(new o.Event("movestart",L)).fire(new o.Event("move",L)),Q&&this.fire(new o.Event("zoomstart",L)).fire(new o.Event("zoom",L)).fire(new o.Event("zoomend",L)),ne&&this.fire(new o.Event("rotatestart",L)).fire(new o.Event("rotate",L)).fire(new o.Event("rotateend",L)),ce&&this.fire(new o.Event("pitchstart",L)).fire(new o.Event("pitch",L)).fire(new o.Event("pitchend",L)),this.fire(new o.Event("moveend",L))},G.prototype.easeTo=function(H,L){var q=this;this._stop(!1,H.easeId),((H=o.extend({offset:[0,0],duration:500,easing:o.ease},H)).animate===!1||!H.essential&&o.browser.prefersReducedMotion)&&(H.duration=0);var Q=this.transform,ne=this.getZoom(),ce=this.getBearing(),ye=this.getPitch(),Le=this.getPadding(),Ie="zoom"in H?+H.zoom:ne,je="bearing"in H?this._normalizeBearing(H.bearing,ce):ce,qe="pitch"in H?+H.pitch:ye,$e="padding"in H?H.padding:Q.padding,lt=o.Point.convert(H.offset),ft=Q.centerPoint.add(lt),_t=Q.pointLocation(ft),St=o.LngLat.convert(H.center||_t);this._normalizeCenter(St);var At,Ft,Ot=Q.project(_t),Zt=Q.project(St).sub(Ot),Ht=Q.zoomScale(Ie-ne);H.around&&(At=o.LngLat.convert(H.around),Ft=Q.locationPoint(At));var Nt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ie!==ne,this._rotating=this._rotating||ce!==je,this._pitching=this._pitching||qe!==ye,this._padding=!Q.isPaddingEqual($e),this._easeId=H.easeId,this._prepareEase(L,H.noMoveStart,Nt),this._ease(function(gn){if(q._zooming&&(Q.zoom=o.number(ne,Ie,gn)),q._rotating&&(Q.bearing=o.number(ce,je,gn)),q._pitching&&(Q.pitch=o.number(ye,qe,gn)),q._padding&&(Q.interpolatePadding(Le,$e,gn),ft=Q.centerPoint.add(lt)),At)Q.setLocationAtPoint(At,Ft);else{var yn=Q.zoomScale(Q.zoom-ne),Cn=Ie>ne?Math.min(2,Ht):Math.max(.5,Ht),Dn=Math.pow(Cn,1-gn),Wn=Q.unproject(Ot.add(Zt.mult(gn*Dn)).mult(yn));Q.setLocationAtPoint(Q.renderWorldCopies?Wn.wrap():Wn,ft)}q._fireMoveEvents(L)},function(gn){q._afterEase(L,gn)},H),this},G.prototype._prepareEase=function(H,L,q){q===void 0&&(q={}),this._moving=!0,L||q.moving||this.fire(new o.Event("movestart",H)),this._zooming&&!q.zooming&&this.fire(new o.Event("zoomstart",H)),this._rotating&&!q.rotating&&this.fire(new o.Event("rotatestart",H)),this._pitching&&!q.pitching&&this.fire(new o.Event("pitchstart",H))},G.prototype._fireMoveEvents=function(H){this.fire(new o.Event("move",H)),this._zooming&&this.fire(new o.Event("zoom",H)),this._rotating&&this.fire(new o.Event("rotate",H)),this._pitching&&this.fire(new o.Event("pitch",H))},G.prototype._afterEase=function(H,L){if(!this._easeId||!L||this._easeId!==L){delete this._easeId;var q=this._zooming,Q=this._rotating,ne=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,q&&this.fire(new o.Event("zoomend",H)),Q&&this.fire(new o.Event("rotateend",H)),ne&&this.fire(new o.Event("pitchend",H)),this.fire(new o.Event("moveend",H))}},G.prototype.flyTo=function(H,L){var q=this;if(!H.essential&&o.browser.prefersReducedMotion){var Q=o.pick(H,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Q,L)}this.stop(),H=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},H);var ne=this.transform,ce=this.getZoom(),ye=this.getBearing(),Le=this.getPitch(),Ie=this.getPadding(),je="zoom"in H?o.clamp(+H.zoom,ne.minZoom,ne.maxZoom):ce,qe="bearing"in H?this._normalizeBearing(H.bearing,ye):ye,$e="pitch"in H?+H.pitch:Le,lt="padding"in H?H.padding:ne.padding,ft=ne.zoomScale(je-ce),_t=o.Point.convert(H.offset),St=ne.centerPoint.add(_t),At=ne.pointLocation(St),Ft=o.LngLat.convert(H.center||At);this._normalizeCenter(Ft);var Ot=ne.project(At),Zt=ne.project(Ft).sub(Ot),Ht=H.curve,Nt=Math.max(ne.width,ne.height),gn=Nt/ft,yn=Zt.mag();if("minZoom"in H){var Cn=o.clamp(Math.min(H.minZoom,ce,je),ne.minZoom,ne.maxZoom),Dn=Nt/ne.zoomScale(Cn-ce);Ht=Math.sqrt(Dn/yn*2)}var Wn=Ht*Ht;function sr(yr){var zr=(gn*gn-Nt*Nt+(yr?-1:1)*Wn*Wn*yn*yn)/(2*(yr?gn:Nt)*Wn*yn);return Math.log(Math.sqrt(zr*zr+1)-zr)}function mr(yr){return(Math.exp(yr)-Math.exp(-yr))/2}function Zn(yr){return(Math.exp(yr)+Math.exp(-yr))/2}var pr=sr(0),Ar=function(yr){return Zn(pr)/Zn(pr+Ht*yr)},Fr=function(yr){return Nt*((Zn(pr)*(mr(zr=pr+Ht*yr)/Zn(zr))-mr(pr))/Wn)/yn;var zr},ar=(sr(1)-pr)/Ht;if(Math.abs(yn)<1e-6||!isFinite(ar)){if(Math.abs(Nt-gn)<1e-6)return this.easeTo(H,L);var fr=gn<Nt?-1:1;ar=Math.abs(Math.log(gn/Nt))/Ht,Fr=function(){return 0},Ar=function(yr){return Math.exp(fr*Ht*yr)}}if("duration"in H)H.duration=+H.duration;else{var Er="screenSpeed"in H?+H.screenSpeed/Ht:+H.speed;H.duration=1e3*ar/Er}return H.maxDuration&&H.duration>H.maxDuration&&(H.duration=0),this._zooming=!0,this._rotating=ye!==qe,this._pitching=$e!==Le,this._padding=!ne.isPaddingEqual(lt),this._prepareEase(L,!1),this._ease(function(yr){var zr=yr*ar,Vr=1/Ar(zr);ne.zoom=yr===1?je:ce+ne.scaleZoom(Vr),q._rotating&&(ne.bearing=o.number(ye,qe,yr)),q._pitching&&(ne.pitch=o.number(Le,$e,yr)),q._padding&&(ne.interpolatePadding(Ie,lt,yr),St=ne.centerPoint.add(_t));var Jr=yr===1?Ft:ne.unproject(Ot.add(Zt.mult(Fr(zr))).mult(Vr));ne.setLocationAtPoint(ne.renderWorldCopies?Jr.wrap():Jr,St),q._fireMoveEvents(L)},function(){return q._afterEase(L)},H),this},G.prototype.isEasing=function(){return!!this._easeFrameId},G.prototype.stop=function(){return this._stop()},G.prototype._stop=function(H,L){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var q=this._onEaseEnd;delete this._onEaseEnd,q.call(this,L)}if(!H){var Q=this.handlers;Q&&Q.stop(!1)}return this},G.prototype._ease=function(H,L,q){q.animate===!1||q.duration===0?(H(1),L()):(this._easeStart=o.browser.now(),this._easeOptions=q,this._onEaseFrame=H,this._onEaseEnd=L,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},G.prototype._renderFrameCallback=function(){var H=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(H)),H<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},G.prototype._normalizeBearing=function(H,L){H=o.wrap(H,-180,180);var q=Math.abs(H-L);return Math.abs(H-360-L)<q&&(H-=360),Math.abs(H+360-L)<q&&(H+=360),H},G.prototype._normalizeCenter=function(H){var L=this.transform;if(L.renderWorldCopies&&!L.lngRange){var q=H.lng-L.center.lng;H.lng+=q>180?-360:q<-180?360:0}},G}(o.Evented),La=function(B){B===void 0&&(B={}),this.options=B,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};La.prototype.getDefaultPosition=function(){return"bottom-right"},La.prototype.onAdd=function(B){var G=this.options&&this.options.compact;return this._map=B,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=b.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),G&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),G===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},La.prototype.onRemove=function(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},La.prototype._setElementTitle=function(B,G){var H=this._map._getUIString("AttributionControl."+G);B.title=H,B.setAttribute("aria-label",H)},La.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},La.prototype._updateEditLink=function(){var B=this._editLink;B||(B=this._editLink=this._container.querySelector(".mapbox-improve-map"));var G=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(B){var H=G.reduce(function(L,q,Q){return q.value&&(L+=q.key+"="+q.value+(Q<G.length-1?"&":"")),L},"?");B.href=o.config.FEEDBACK_URL+"/"+H+(this._map._hash?this._map._hash.getHashString(!0):""),B.rel="noopener nofollow",this._setElementTitle(B,"MapFeedback")}},La.prototype._updateData=function(B){!B||B.sourceDataType!=="metadata"&&B.sourceDataType!=="visibility"&&B.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},La.prototype._updateAttributions=function(){if(this._map.style){var B=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?B=B.concat(this.options.customAttribution.map(function(ce){return typeof ce!="string"?"":ce})):typeof this.options.customAttribution=="string"&&B.push(this.options.customAttribution)),this._map.style.stylesheet){var G=this._map.style.stylesheet;this.styleOwner=G.owner,this.styleId=G.id}var H=this._map.style.sourceCaches;for(var L in H){var q=H[L];if(q.used){var Q=q.getSource();Q.attribution&&B.indexOf(Q.attribution)<0&&B.push(Q.attribution)}}B.sort(function(ce,ye){return ce.length-ye.length});var ne=(B=B.filter(function(ce,ye){for(var Le=ye+1;Le<B.length;Le++)if(B[Le].indexOf(ce)>=0)return!1;return!0})).join(" | ");ne!==this._attribHTML&&(this._attribHTML=ne,B.length?(this._innerContainer.innerHTML=ne,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},La.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Co=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};Co.prototype.onAdd=function(B){this._map=B,this._container=b.create("div","mapboxgl-ctrl");var G=b.create("a","mapboxgl-ctrl-logo");return G.target="_blank",G.rel="noopener nofollow",G.href="https://www.mapbox.com/",G.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),G.setAttribute("rel","noopener nofollow"),this._container.appendChild(G),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Co.prototype.onRemove=function(){b.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Co.prototype.getDefaultPosition=function(){return"bottom-left"},Co.prototype._updateLogo=function(B){B&&B.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Co.prototype._logoRequired=function(){if(this._map.style){var B=this._map.style.sourceCaches;for(var G in B)if(B[G].getSource().mapbox_logo)return!0;return!1}},Co.prototype._updateCompact=function(){var B=this._container.children;if(B.length){var G=B[0];this._map.getCanvasContainer().offsetWidth<250?G.classList.add("mapboxgl-compact"):G.classList.remove("mapboxgl-compact")}};var Ca=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ca.prototype.add=function(B){var G=++this._id;return this._queue.push({callback:B,id:G,cancelled:!1}),G},Ca.prototype.remove=function(B){for(var G=this._currentlyRunning,H=0,L=G?this._queue.concat(G):this._queue;H<L.length;H+=1){var q=L[H];if(q.id===B)return void(q.cancelled=!0)}},Ca.prototype.run=function(B){B===void 0&&(B=0);var G=this._currentlyRunning=this._queue;this._queue=[];for(var H=0,L=G;H<L.length;H+=1){var q=L[H];if(!q.cancelled&&(q.callback(B),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ca.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ks={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},As=o.window.HTMLImageElement,Pa=o.window.HTMLElement,ii=o.window.ImageBitmap,Po=60,ms={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:Po,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},vo=function(B){function G(L){var q=this;if((L=o.extend({},ms,L)).minZoom!=null&&L.maxZoom!=null&&L.minZoom>L.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(L.minPitch!=null&&L.maxPitch!=null&&L.minPitch>L.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(L.minPitch!=null&&L.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(L.maxPitch!=null&&L.maxPitch>Po)throw new Error("maxPitch must be less than or equal to 60");var Q=new Nr(L.minZoom,L.maxZoom,L.minPitch,L.maxPitch,L.renderWorldCopies);if(B.call(this,Q,L),this._interactive=L.interactive,this._maxTileCacheSize=L.maxTileCacheSize,this._failIfMajorPerformanceCaveat=L.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=L.preserveDrawingBuffer,this._antialias=L.antialias,this._trackResize=L.trackResize,this._bearingSnap=L.bearingSnap,this._refreshExpiredTiles=L.refreshExpiredTiles,this._fadeDuration=L.fadeDuration,this._crossSourceCollisions=L.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=L.collectResourceTiming,this._renderTaskQueue=new Ca,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},ks,L.locale),this._clickTolerance=L.clickTolerance,this._requestManager=new o.RequestManager(L.transformRequest,L.accessToken),typeof L.container=="string"){if(this._container=o.window.document.getElementById(L.container),!this._container)throw new Error("Container '"+L.container+"' not found.")}else{if(!(L.container instanceof Pa))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=L.container}if(L.maxBounds&&this.setMaxBounds(L.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return q._update(!1)}),this.on("moveend",function(){return q._update(!1)}),this.on("zoom",function(){return q._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new oi(this,L);var ne=typeof L.hash=="string"&&L.hash||void 0;this._hash=L.hash&&new $r(ne).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:L.center,zoom:L.zoom,bearing:L.bearing,pitch:L.pitch}),L.bounds&&(this.resize(),this.fitBounds(L.bounds,o.extend({},L.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=L.localIdeographFontFamily,L.style&&this.setStyle(L.style,{localIdeographFontFamily:L.localIdeographFontFamily}),L.attributionControl&&this.addControl(new La({customAttribution:L.customAttribution})),this.addControl(new Co,L.logoPosition),this.on("style.load",function(){q.transform.unmodified&&q.jumpTo(q.style.stylesheet)}),this.on("data",function(ce){q._update(ce.dataType==="style"),q.fire(new o.Event(ce.dataType+"data",ce))}),this.on("dataloading",function(ce){q.fire(new o.Event(ce.dataType+"dataloading",ce))})}B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G;var H={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return G.prototype._getMapId=function(){return this._mapId},G.prototype.addControl=function(L,q){if(q===void 0&&(q=L.getDefaultPosition?L.getDefaultPosition():"top-right"),!L||!L.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Q=L.onAdd(this);this._controls.push(L);var ne=this._controlPositions[q];return q.indexOf("bottom")!==-1?ne.insertBefore(Q,ne.firstChild):ne.appendChild(Q),this},G.prototype.removeControl=function(L){if(!L||!L.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var q=this._controls.indexOf(L);return q>-1&&this._controls.splice(q,1),L.onRemove(this),this},G.prototype.hasControl=function(L){return this._controls.indexOf(L)>-1},G.prototype.resize=function(L){var q=this._containerDimensions(),Q=q[0],ne=q[1];this._resizeCanvas(Q,ne),this.transform.resize(Q,ne),this.painter.resize(Q,ne);var ce=!this._moving;return ce&&(this.stop(),this.fire(new o.Event("movestart",L)).fire(new o.Event("move",L))),this.fire(new o.Event("resize",L)),ce&&this.fire(new o.Event("moveend",L)),this},G.prototype.getBounds=function(){return this.transform.getBounds()},G.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},G.prototype.setMaxBounds=function(L){return this.transform.setMaxBounds(o.LngLatBounds.convert(L)),this._update()},G.prototype.setMinZoom=function(L){if((L=L==null?-2:L)>=-2&&L<=this.transform.maxZoom)return this.transform.minZoom=L,this._update(),this.getZoom()<L&&this.setZoom(L),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},G.prototype.getMinZoom=function(){return this.transform.minZoom},G.prototype.setMaxZoom=function(L){if((L=L==null?22:L)>=this.transform.minZoom)return this.transform.maxZoom=L,this._update(),this.getZoom()>L&&this.setZoom(L),this;throw new Error("maxZoom must be greater than the current minZoom")},G.prototype.getMaxZoom=function(){return this.transform.maxZoom},G.prototype.setMinPitch=function(L){if((L=L==null?0:L)<0)throw new Error("minPitch must be greater than or equal to 0");if(L>=0&&L<=this.transform.maxPitch)return this.transform.minPitch=L,this._update(),this.getPitch()<L&&this.setPitch(L),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},G.prototype.getMinPitch=function(){return this.transform.minPitch},G.prototype.setMaxPitch=function(L){if((L=L==null?Po:L)>Po)throw new Error("maxPitch must be less than or equal to 60");if(L>=this.transform.minPitch)return this.transform.maxPitch=L,this._update(),this.getPitch()>L&&this.setPitch(L),this;throw new Error("maxPitch must be greater than the current minPitch")},G.prototype.getMaxPitch=function(){return this.transform.maxPitch},G.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},G.prototype.setRenderWorldCopies=function(L){return this.transform.renderWorldCopies=L,this._update()},G.prototype.project=function(L){return this.transform.locationPoint(o.LngLat.convert(L))},G.prototype.unproject=function(L){return this.transform.pointLocation(o.Point.convert(L))},G.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},G.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},G.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},G.prototype._createDelegatedListener=function(L,q,Q){var ne,ce=this;if(L==="mouseenter"||L==="mouseover"){var ye=!1;return{layer:q,listener:Q,delegates:{mousemove:function(Ie){var je=ce.getLayer(q)?ce.queryRenderedFeatures(Ie.point,{layers:[q]}):[];je.length?ye||(ye=!0,Q.call(ce,new li(L,ce,Ie.originalEvent,{features:je}))):ye=!1},mouseout:function(){ye=!1}}}}if(L==="mouseleave"||L==="mouseout"){var Le=!1;return{layer:q,listener:Q,delegates:{mousemove:function(Ie){(ce.getLayer(q)?ce.queryRenderedFeatures(Ie.point,{layers:[q]}):[]).length?Le=!0:Le&&(Le=!1,Q.call(ce,new li(L,ce,Ie.originalEvent)))},mouseout:function(Ie){Le&&(Le=!1,Q.call(ce,new li(L,ce,Ie.originalEvent)))}}}}return{layer:q,listener:Q,delegates:(ne={},ne[L]=function(Ie){var je=ce.getLayer(q)?ce.queryRenderedFeatures(Ie.point,{layers:[q]}):[];je.length&&(Ie.features=je,Q.call(ce,Ie),delete Ie.features)},ne)}},G.prototype.on=function(L,q,Q){if(Q===void 0)return B.prototype.on.call(this,L,q);var ne=this._createDelegatedListener(L,q,Q);for(var ce in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[L]=this._delegatedListeners[L]||[],this._delegatedListeners[L].push(ne),ne.delegates)this.on(ce,ne.delegates[ce]);return this},G.prototype.once=function(L,q,Q){if(Q===void 0)return B.prototype.once.call(this,L,q);var ne=this._createDelegatedListener(L,q,Q);for(var ce in ne.delegates)this.once(ce,ne.delegates[ce]);return this},G.prototype.off=function(L,q,Q){var ne=this;return Q===void 0?B.prototype.off.call(this,L,q):(this._delegatedListeners&&this._delegatedListeners[L]&&function(ce){for(var ye=ce[L],Le=0;Le<ye.length;Le++){var Ie=ye[Le];if(Ie.layer===q&&Ie.listener===Q){for(var je in Ie.delegates)ne.off(je,Ie.delegates[je]);return ye.splice(Le,1),ne}}}(this._delegatedListeners),this)},G.prototype.queryRenderedFeatures=function(L,q){if(!this.style)return[];var Q;if(q!==void 0||L===void 0||L instanceof o.Point||Array.isArray(L)||(q=L,L=void 0),q=q||{},(L=L||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof L[0]=="number")Q=[o.Point.convert(L)];else{var ne=o.Point.convert(L[0]),ce=o.Point.convert(L[1]);Q=[ne,new o.Point(ce.x,ne.y),ce,new o.Point(ne.x,ce.y),ne]}return this.style.queryRenderedFeatures(Q,q,this.transform)},G.prototype.querySourceFeatures=function(L,q){return this.style.querySourceFeatures(L,q)},G.prototype.setStyle=function(L,q){return(q=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},q)).diff!==!1&&q.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&L?(this._diffStyle(L,q),this):(this._localIdeographFontFamily=q.localIdeographFontFamily,this._updateStyle(L,q))},G.prototype._getUIString=function(L){var q=this._locale[L];if(q==null)throw new Error("Missing UI string '"+L+"'");return q},G.prototype._updateStyle=function(L,q){return this.style&&(this.style.setEventedParent(null),this.style._remove()),L?(this.style=new rr(this,q||{}),this.style.setEventedParent(this,{style:this.style}),typeof L=="string"?this.style.loadURL(L):this.style.loadJSON(L),this):(delete this.style,this)},G.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new rr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},G.prototype._diffStyle=function(L,q){var Q=this;if(typeof L=="string"){var ne=this._requestManager.normalizeStyleURL(L),ce=this._requestManager.transformRequest(ne,o.ResourceType.Style);o.getJSON(ce,function(ye,Le){ye?Q.fire(new o.ErrorEvent(ye)):Le&&Q._updateDiff(Le,q)})}else typeof L=="object"&&this._updateDiff(L,q)},G.prototype._updateDiff=function(L,q){try{this.style.setState(L)&&this._update(!0)}catch(Q){o.warnOnce("Unable to perform style diff: "+(Q.message||Q.error||Q)+".  Rebuilding the style from scratch."),this._updateStyle(L,q)}},G.prototype.getStyle=function(){if(this.style)return this.style.serialize()},G.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},G.prototype.addSource=function(L,q){return this._lazyInitEmptyStyle(),this.style.addSource(L,q),this._update(!0)},G.prototype.isSourceLoaded=function(L){var q=this.style&&this.style.sourceCaches[L];if(q!==void 0)return q.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+L+"'")))},G.prototype.areTilesLoaded=function(){var L=this.style&&this.style.sourceCaches;for(var q in L){var Q=L[q]._tiles;for(var ne in Q){var ce=Q[ne];if(ce.state!=="loaded"&&ce.state!=="errored")return!1}}return!0},G.prototype.addSourceType=function(L,q,Q){return this._lazyInitEmptyStyle(),this.style.addSourceType(L,q,Q)},G.prototype.removeSource=function(L){return this.style.removeSource(L),this._update(!0)},G.prototype.getSource=function(L){return this.style.getSource(L)},G.prototype.addImage=function(L,q,Q){Q===void 0&&(Q={});var ne=Q.pixelRatio;ne===void 0&&(ne=1);var ce=Q.sdf;ce===void 0&&(ce=!1);var ye=Q.stretchX,Le=Q.stretchY,Ie=Q.content;if(this._lazyInitEmptyStyle(),q instanceof As||ii&&q instanceof ii){var je=o.browser.getImageData(q),qe=je.width,$e=je.height,lt=je.data;this.style.addImage(L,{data:new o.RGBAImage({width:qe,height:$e},lt),pixelRatio:ne,stretchX:ye,stretchY:Le,content:Ie,sdf:ce,version:0})}else{if(q.width===void 0||q.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ft=q.width,_t=q.height,St=q.data,At=q;this.style.addImage(L,{data:new o.RGBAImage({width:ft,height:_t},new Uint8Array(St)),pixelRatio:ne,stretchX:ye,stretchY:Le,content:Ie,sdf:ce,version:0,userImage:At}),At.onAdd&&At.onAdd(this,L)}},G.prototype.updateImage=function(L,q){var Q=this.style.getImage(L);if(!Q)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var ne=q instanceof As||ii&&q instanceof ii?o.browser.getImageData(q):q,ce=ne.width,ye=ne.height,Le=ne.data;if(ce===void 0||ye===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ce!==Q.data.width||ye!==Q.data.height)return this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var Ie=!(q instanceof As||ii&&q instanceof ii);Q.data.replace(Le,Ie),this.style.updateImage(L,Q)},G.prototype.hasImage=function(L){return L?!!this.style.getImage(L):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},G.prototype.removeImage=function(L){this.style.removeImage(L)},G.prototype.loadImage=function(L,q){o.getImage(this._requestManager.transformRequest(L,o.ResourceType.Image),q)},G.prototype.listImages=function(){return this.style.listImages()},G.prototype.addLayer=function(L,q){return this._lazyInitEmptyStyle(),this.style.addLayer(L,q),this._update(!0)},G.prototype.moveLayer=function(L,q){return this.style.moveLayer(L,q),this._update(!0)},G.prototype.removeLayer=function(L){return this.style.removeLayer(L),this._update(!0)},G.prototype.getLayer=function(L){return this.style.getLayer(L)},G.prototype.setLayerZoomRange=function(L,q,Q){return this.style.setLayerZoomRange(L,q,Q),this._update(!0)},G.prototype.setFilter=function(L,q,Q){return Q===void 0&&(Q={}),this.style.setFilter(L,q,Q),this._update(!0)},G.prototype.getFilter=function(L){return this.style.getFilter(L)},G.prototype.setPaintProperty=function(L,q,Q,ne){return ne===void 0&&(ne={}),this.style.setPaintProperty(L,q,Q,ne),this._update(!0)},G.prototype.getPaintProperty=function(L,q){return this.style.getPaintProperty(L,q)},G.prototype.setLayoutProperty=function(L,q,Q,ne){return ne===void 0&&(ne={}),this.style.setLayoutProperty(L,q,Q,ne),this._update(!0)},G.prototype.getLayoutProperty=function(L,q){return this.style.getLayoutProperty(L,q)},G.prototype.setLight=function(L,q){return q===void 0&&(q={}),this._lazyInitEmptyStyle(),this.style.setLight(L,q),this._update(!0)},G.prototype.getLight=function(){return this.style.getLight()},G.prototype.setFeatureState=function(L,q){return this.style.setFeatureState(L,q),this._update()},G.prototype.removeFeatureState=function(L,q){return this.style.removeFeatureState(L,q),this._update()},G.prototype.getFeatureState=function(L){return this.style.getFeatureState(L)},G.prototype.getContainer=function(){return this._container},G.prototype.getCanvasContainer=function(){return this._canvasContainer},G.prototype.getCanvas=function(){return this._canvas},G.prototype._containerDimensions=function(){var L=0,q=0;return this._container&&(L=this._container.clientWidth||400,q=this._container.clientHeight||300),[L,q]},G.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},G.prototype._setupContainer=function(){var L=this._container;L.classList.add("mapboxgl-map"),(this._missingCSSCanary=b.create("div","mapboxgl-canary",L)).style.visibility="hidden",this._detectMissingCSS();var q=this._canvasContainer=b.create("div","mapboxgl-canvas-container",L);this._interactive&&q.classList.add("mapboxgl-interactive"),this._canvas=b.create("canvas","mapboxgl-canvas",q),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Q=this._containerDimensions();this._resizeCanvas(Q[0],Q[1]);var ne=this._controlContainer=b.create("div","mapboxgl-control-container",L),ce=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ye){ce[ye]=b.create("div","mapboxgl-ctrl-"+ye,ne)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},G.prototype._resizeCanvas=function(L,q){var Q=o.browser.devicePixelRatio||1;this._canvas.width=Q*L,this._canvas.height=Q*q,this._canvas.style.width=L+"px",this._canvas.style.height=q+"px"},G.prototype._setupPainter=function(){var L=o.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),q=this._canvas.getContext("webgl",L)||this._canvas.getContext("experimental-webgl",L);q?(this.painter=new gr(q,this.transform),o.webpSupported.testSupport(q)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},G.prototype._contextLost=function(L){L.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:L}))},G.prototype._contextRestored=function(L){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:L}))},G.prototype._onMapScroll=function(L){if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},G.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},G.prototype._update=function(L){return this.style?(this._styleDirty=this._styleDirty||L,this._sourcesDirty=!0,this.triggerRepaint(),this):this},G.prototype._requestRenderFrame=function(L){return this._update(),this._renderTaskQueue.add(L)},G.prototype._cancelRenderFrame=function(L){this._renderTaskQueue.remove(L)},G.prototype._render=function(L){var q,Q=this,ne=0,ce=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(q=ce.createQueryEXT(),ce.beginQueryEXT(ce.TIME_ELAPSED_EXT,q),ne=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(L),!this._removed){var ye=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Le=this.transform.zoom,Ie=o.browser.now();this.style.zoomHistory.update(Le,Ie);var je=new o.EvaluationParameters(Le,{now:Ie,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),qe=je.crossFadingFactor();qe===1&&qe===this._crossFadingFactor||(ye=!0,this._crossFadingFactor=qe),this.style.update(je)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||ye)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var $e=o.browser.now()-ne;ce.endQueryEXT(ce.TIME_ELAPSED_EXT,q),setTimeout(function(){var _t=ce.getQueryObjectEXT(q,ce.QUERY_RESULT_EXT)/1e6;ce.deleteQueryEXT(q),Q.fire(new o.Event("gpu-timing-frame",{cpuTime:$e,gpuTime:_t}))},50)}if(this.listens("gpu-timing-layer")){var lt=this.painter.collectGpuTimers();setTimeout(function(){var _t=Q.painter.queryGpuTimers(lt);Q.fire(new o.Event("gpu-timing-layer",{layerTimes:_t}))},50)}var ft=this._sourcesDirty||this._styleDirty||this._placementDirty;return ft||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||ft||(this._fullyLoaded=!0),this}},G.prototype.remove=function(){this._hash&&this._hash.remove();for(var L=0,q=this._controls;L<q.length;L+=1)q[L].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var Q=this.painter.context.gl.getExtension("WEBGL_lose_context");Q&&Q.loseContext&&Q.loseContext(),Ms(this._canvasContainer),Ms(this._controlContainer),Ms(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},G.prototype.triggerRepaint=function(){var L=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(q){L._frame=null,L._render(q)}))},G.prototype._onWindowOnline=function(){this._update()},G.prototype._onWindowResize=function(L){this._trackResize&&this.resize({originalEvent:L})._update()},H.showTileBoundaries.get=function(){return!!this._showTileBoundaries},H.showTileBoundaries.set=function(L){this._showTileBoundaries!==L&&(this._showTileBoundaries=L,this._update())},H.showPadding.get=function(){return!!this._showPadding},H.showPadding.set=function(L){this._showPadding!==L&&(this._showPadding=L,this._update())},H.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},H.showCollisionBoxes.set=function(L){this._showCollisionBoxes!==L&&(this._showCollisionBoxes=L,L?this.style._generateCollisionBoxes():this._update())},H.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},H.showOverdrawInspector.set=function(L){this._showOverdrawInspector!==L&&(this._showOverdrawInspector=L,this._update())},H.repaint.get=function(){return!!this._repaint},H.repaint.set=function(L){this._repaint!==L&&(this._repaint=L,this.triggerRepaint())},H.vertices.get=function(){return!!this._vertices},H.vertices.set=function(L){this._vertices=L,this._update()},G.prototype._setCacheLimits=function(L,q){o.setCacheLimits(L,q)},H.version.get=function(){return o.version},Object.defineProperties(G.prototype,H),G}(ca);function Ms(B){B.parentNode&&B.parentNode.removeChild(B)}var Ss={showCompass:!0,showZoom:!0,visualizePitch:!1},mo=function(B){var G=this;this.options=o.extend({},Ss,B),this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(H){return H.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(H){return G._map.zoomIn({},{originalEvent:H})}),b.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(H){return G._map.zoomOut({},{originalEvent:H})}),b.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(H){G.options.visualizePitch?G._map.resetNorthPitch({},{originalEvent:H}):G._map.resetNorth({},{originalEvent:H})}),this._compassIcon=b.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};mo.prototype._updateZoomButtons=function(){var B=this._map.getZoom(),G=B===this._map.getMaxZoom(),H=B===this._map.getMinZoom();this._zoomInButton.disabled=G,this._zoomOutButton.disabled=H,this._zoomInButton.setAttribute("aria-disabled",G.toString()),this._zoomOutButton.setAttribute("aria-disabled",H.toString())},mo.prototype._rotateCompassArrow=function(){var B=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=B},mo.prototype.onAdd=function(B){return this._map=B,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ai(this._map,this._compass,this.options.visualizePitch)),this._container},mo.prototype.onRemove=function(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},mo.prototype._createButton=function(B,G){var H=b.create("button",B,this._container);return H.type="button",H.addEventListener("click",G),H},mo.prototype._setButtonTitle=function(B,G){var H=this._map._getUIString("NavigationControl."+G);B.title=H,B.setAttribute("aria-label",H)};var Ai=function(B,G,H){H===void 0&&(H=!1),this._clickTolerance=10,this.element=G,this.mouseRotate=new qo({clickTolerance:B.dragRotate._mouseRotate._clickTolerance}),this.map=B,H&&(this.mousePitch=new to({clickTolerance:B.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),b.addEventListener(G,"mousedown",this.mousedown),b.addEventListener(G,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(G,"touchmove",this.touchmove),b.addEventListener(G,"touchend",this.touchend),b.addEventListener(G,"touchcancel",this.reset)};function ys(B,G,H){if(B=new o.LngLat(B.lng,B.lat),G){var L=new o.LngLat(B.lng-360,B.lat),q=new o.LngLat(B.lng+360,B.lat),Q=H.locationPoint(B).distSqr(G);H.locationPoint(L).distSqr(G)<Q?B=L:H.locationPoint(q).distSqr(G)<Q&&(B=q)}for(;Math.abs(B.lng-H.center.lng)>180;){var ne=H.locationPoint(B);if(ne.x>=0&&ne.y>=0&&ne.x<=H.width&&ne.y<=H.height)break;B.lng>H.center.lng?B.lng-=360:B.lng+=360}return B}Ai.prototype.down=function(B,G){this.mouseRotate.mousedown(B,G),this.mousePitch&&this.mousePitch.mousedown(B,G),b.disableDrag()},Ai.prototype.move=function(B,G){var H=this.map,L=this.mouseRotate.mousemoveWindow(B,G);if(L&&L.bearingDelta&&H.setBearing(H.getBearing()+L.bearingDelta),this.mousePitch){var q=this.mousePitch.mousemoveWindow(B,G);q&&q.pitchDelta&&H.setPitch(H.getPitch()+q.pitchDelta)}},Ai.prototype.off=function(){var B=this.element;b.removeEventListener(B,"mousedown",this.mousedown),b.removeEventListener(B,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(B,"touchmove",this.touchmove),b.removeEventListener(B,"touchend",this.touchend),b.removeEventListener(B,"touchcancel",this.reset),this.offTemp()},Ai.prototype.offTemp=function(){b.enableDrag(),b.removeEventListener(o.window,"mousemove",this.mousemove),b.removeEventListener(o.window,"mouseup",this.mouseup)},Ai.prototype.mousedown=function(B){this.down(o.extend({},B,{ctrlKey:!0,preventDefault:function(){return B.preventDefault()}}),b.mousePos(this.element,B)),b.addEventListener(o.window,"mousemove",this.mousemove),b.addEventListener(o.window,"mouseup",this.mouseup)},Ai.prototype.mousemove=function(B){this.move(B,b.mousePos(this.element,B))},Ai.prototype.mouseup=function(B){this.mouseRotate.mouseupWindow(B),this.mousePitch&&this.mousePitch.mouseupWindow(B),this.offTemp()},Ai.prototype.touchstart=function(B){B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,B.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return B.preventDefault()}},this._startPos))},Ai.prototype.touchmove=function(B){B.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,B.targetTouches)[0],this.move({preventDefault:function(){return B.preventDefault()}},this._lastPos))},Ai.prototype.touchend=function(B){B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ai.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Rr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hr(B,G,H){var L=B.classList;for(var q in Rr)L.remove("mapboxgl-"+H+"-anchor-"+q);L.add("mapboxgl-"+H+"-anchor-"+G)}var Ya,Oo=function(B){function G(H,L){if(B.call(this),(H instanceof o.window.HTMLElement||L)&&(H=o.extend({element:H},L)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=H&&H.anchor||"center",this._color=H&&H.color||"#3FB1CE",this._scale=H&&H.scale||1,this._draggable=H&&H.draggable||!1,this._clickTolerance=H&&H.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=H&&H.rotation||0,this._rotationAlignment=H&&H.rotationAlignment||"auto",this._pitchAlignment=H&&H.pitchAlignment&&H.pitchAlignment!=="auto"?H.pitchAlignment:this._rotationAlignment,H&&H.element)this._element=H.element,this._offset=o.Point.convert(H&&H.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div"),this._element.setAttribute("aria-label","Map marker");var q=b.createNS("http://www.w3.org/2000/svg","svg");q.setAttributeNS(null,"display","block"),q.setAttributeNS(null,"height","41px"),q.setAttributeNS(null,"width","27px"),q.setAttributeNS(null,"viewBox","0 0 27 41");var Q=b.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"stroke","none"),Q.setAttributeNS(null,"stroke-width","1"),Q.setAttributeNS(null,"fill","none"),Q.setAttributeNS(null,"fill-rule","evenodd");var ne=b.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"fill-rule","nonzero");var ce=b.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ce.setAttributeNS(null,"fill","#000000");for(var ye=0,Le=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ye<Le.length;ye+=1){var Ie=Le[ye],je=b.createNS("http://www.w3.org/2000/svg","ellipse");je.setAttributeNS(null,"opacity","0.04"),je.setAttributeNS(null,"cx","10.5"),je.setAttributeNS(null,"cy","5.80029008"),je.setAttributeNS(null,"rx",Ie.rx),je.setAttributeNS(null,"ry",Ie.ry),ce.appendChild(je)}var qe=b.createNS("http://www.w3.org/2000/svg","g");qe.setAttributeNS(null,"fill",this._color);var $e=b.createNS("http://www.w3.org/2000/svg","path");$e.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),qe.appendChild($e);var lt=b.createNS("http://www.w3.org/2000/svg","g");lt.setAttributeNS(null,"opacity","0.25"),lt.setAttributeNS(null,"fill","#000000");var ft=b.createNS("http://www.w3.org/2000/svg","path");ft.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),lt.appendChild(ft);var _t=b.createNS("http://www.w3.org/2000/svg","g");_t.setAttributeNS(null,"transform","translate(6.0, 7.0)"),_t.setAttributeNS(null,"fill","#FFFFFF");var St=b.createNS("http://www.w3.org/2000/svg","g");St.setAttributeNS(null,"transform","translate(8.0, 8.0)");var At=b.createNS("http://www.w3.org/2000/svg","circle");At.setAttributeNS(null,"fill","#000000"),At.setAttributeNS(null,"opacity","0.25"),At.setAttributeNS(null,"cx","5.5"),At.setAttributeNS(null,"cy","5.5"),At.setAttributeNS(null,"r","5.4999962");var Ft=b.createNS("http://www.w3.org/2000/svg","circle");Ft.setAttributeNS(null,"fill","#FFFFFF"),Ft.setAttributeNS(null,"cx","5.5"),Ft.setAttributeNS(null,"cy","5.5"),Ft.setAttributeNS(null,"r","5.4999962"),St.appendChild(At),St.appendChild(Ft),ne.appendChild(ce),ne.appendChild(qe),ne.appendChild(lt),ne.appendChild(_t),ne.appendChild(St),q.appendChild(ne),q.setAttributeNS(null,"height",41*this._scale+"px"),q.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(q),this._offset=o.Point.convert(H&&H.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ot){Ot.preventDefault()}),this._element.addEventListener("mousedown",function(Ot){Ot.preventDefault()}),Hr(this._element,this._anchor,"marker"),this._popup=null}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(H){return this.remove(),this._map=H,H.getCanvasContainer().appendChild(this._element),H.on("move",this._update),H.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},G.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(H){return this._lngLat=o.LngLat.convert(H),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},G.prototype.getElement=function(){return this._element},G.prototype.setPopup=function(H){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),H){if(!("offset"in H.options)){var L=13.5,q=Math.sqrt(Math.pow(L,2)/2);H.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[q,-1*(24.6+q)],"bottom-right":[-q,-1*(24.6+q)],left:[L,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=H,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},G.prototype._onKeyPress=function(H){var L=H.code,q=H.charCode||H.keyCode;L!=="Space"&&L!=="Enter"&&q!==32&&q!==13||this.togglePopup()},G.prototype._onMapClick=function(H){var L=H.originalEvent.target,q=this._element;this._popup&&(L===q||q.contains(L))&&this.togglePopup()},G.prototype.getPopup=function(){return this._popup},G.prototype.togglePopup=function(){var H=this._popup;return H?(H.isOpen()?H.remove():H.addTo(this._map),this):this},G.prototype._update=function(H){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ys(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var L="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?L="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(L="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var q="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?q="rotateX(0deg)":this._pitchAlignment==="map"&&(q="rotateX("+this._map.getPitch()+"deg)"),H&&H.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,Rr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+q+" "+L)}},G.prototype.getOffset=function(){return this._offset},G.prototype.setOffset=function(H){return this._offset=o.Point.convert(H),this._update(),this},G.prototype._onMove=function(H){if(!this._isDragging){var L=this._clickTolerance||this._map._clickTolerance;this._isDragging=H.point.dist(this._pointerdownPos)>=L}this._isDragging&&(this._pos=H.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},G.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},G.prototype._addDragHandler=function(H){this._element.contains(H.originalEvent.target)&&(H.preventDefault(),this._positionDelta=H.point.sub(this._pos).add(this._offset),this._pointerdownPos=H.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},G.prototype.setDraggable=function(H){return this._draggable=!!H,this._map&&(H?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},G.prototype.isDraggable=function(){return this._draggable},G.prototype.setRotation=function(H){return this._rotation=H||0,this._update(),this},G.prototype.getRotation=function(){return this._rotation},G.prototype.setRotationAlignment=function(H){return this._rotationAlignment=H||"auto",this._update(),this},G.prototype.getRotationAlignment=function(){return this._rotationAlignment},G.prototype.setPitchAlignment=function(H){return this._pitchAlignment=H&&H!=="auto"?H:this._rotationAlignment,this._update(),this},G.prototype.getPitchAlignment=function(){return this._pitchAlignment},G}(o.Evented),Wo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Zi=0,Io=!1,vi=function(B){function G(H){B.call(this),this.options=o.extend({},Wo,H),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.onAdd=function(H){return this._map=H,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),L=this._setupUI,Ya!==void 0?L(Ya):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(q){Ya=q.state!=="denied",L(Ya)}):(Ya=!!o.window.navigator.geolocation,L(Ya)),this._container;var L},G.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Zi=0,Io=!1},G.prototype._isOutOfMapMaxBounds=function(H){var L=this._map.getMaxBounds(),q=H.coords;return L&&(q.longitude<L.getWest()||q.longitude>L.getEast()||q.latitude<L.getSouth()||q.latitude>L.getNorth())},G.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},G.prototype._onSuccess=function(H){if(this._map){if(this._isOutOfMapMaxBounds(H))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",H)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=H,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(H),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(H),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",H)),this._finish()}},G.prototype._updateCamera=function(H){var L=new o.LngLat(H.coords.longitude,H.coords.latitude),q=H.coords.accuracy,Q=this._map.getBearing(),ne=o.extend({bearing:Q},this.options.fitBoundsOptions);this._map.fitBounds(L.toBounds(q),ne,{geolocateSource:!0})},G.prototype._updateMarker=function(H){if(H){var L=new o.LngLat(H.coords.longitude,H.coords.latitude);this._accuracyCircleMarker.setLngLat(L).addTo(this._map),this._userLocationDotMarker.setLngLat(L).addTo(this._map),this._accuracy=H.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},G.prototype._updateCircleRadius=function(){var H=this._map._container.clientHeight/2,L=this._map.unproject([0,H]),q=this._map.unproject([1,H]),Q=L.distanceTo(q),ne=Math.ceil(2*this._accuracy/Q);this._circleElement.style.width=ne+"px",this._circleElement.style.height=ne+"px"},G.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},G.prototype._onError=function(H){if(this._map){if(this.options.trackUserLocation)if(H.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var L=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=L,this._geolocateButton.setAttribute("aria-label",L),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(H.code===3&&Io)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",H)),this._finish()}},G.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},G.prototype._setupUI=function(H){var L=this;if(this._container.addEventListener("contextmenu",function(ne){return ne.preventDefault()}),this._geolocateButton=b.create("button","mapboxgl-ctrl-geolocate",this._container),b.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",H===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=q,this._geolocateButton.setAttribute("aria-label",q)}else{var Q=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Q,this._geolocateButton.setAttribute("aria-label",Q)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Oo(this._dotElement),this._circleElement=b.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Oo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(ne){var ce=ne.originalEvent&&ne.originalEvent.type==="resize";ne.geolocateSource||L._watchState!=="ACTIVE_LOCK"||ce||(L._watchState="BACKGROUND",L._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),L._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),L.fire(new o.Event("trackuserlocationend")))})},G.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Zi--,Io=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var H;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Zi>1?(H={maximumAge:6e5,timeout:0},Io=!0):(H=this.options.positionOptions,Io=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,H)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},G.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},G}(o.Evented),_l={maxWidth:100,unit:"metric"},Xa=function(B){this.options=o.extend({},_l,B),o.bindAll(["_onMove","setUnit"],this)};function yi(B,G,H){var L=H&&H.maxWidth||100,q=B._container.clientHeight/2,Q=B.unproject([0,q]),ne=B.unproject([L,q]),ce=Q.distanceTo(ne);if(H&&H.unit==="imperial"){var ye=3.2808*ce;ye>5280?Li(G,L,ye/5280,B._getUIString("ScaleControl.Miles")):Li(G,L,ye,B._getUIString("ScaleControl.Feet"))}else H&&H.unit==="nautical"?Li(G,L,ce/1852,B._getUIString("ScaleControl.NauticalMiles")):ce>=1e3?Li(G,L,ce/1e3,B._getUIString("ScaleControl.Kilometers")):Li(G,L,ce,B._getUIString("ScaleControl.Meters"))}function Li(B,G,H,L){var q,Q,ne,ce=(q=H,(Q=Math.pow(10,(""+Math.floor(q)).length-1))*((ne=q/Q)>=10?10:ne>=5?5:ne>=3?3:ne>=2?2:ne>=1?1:function(Le){var Ie=Math.pow(10,Math.ceil(-Math.log(Le)/Math.LN10));return Math.round(Le*Ie)/Ie}(ne))),ye=ce/H;B.style.width=G*ye+"px",B.innerHTML=ce+"&nbsp;"+L}Xa.prototype.getDefaultPosition=function(){return"bottom-left"},Xa.prototype._onMove=function(){yi(this._map,this._container,this.options)},Xa.prototype.onAdd=function(B){return this._map=B,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",B.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Xa.prototype.onRemove=function(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Xa.prototype.setUnit=function(B){this.options.unit=B,yi(this._map,this._container,this.options)};var Fa=function(B){this._fullscreen=!1,B&&B.container&&(B.container instanceof o.window.HTMLElement?this._container=B.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};Fa.prototype.onAdd=function(B){return this._map=B,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Fa.prototype.onRemove=function(){b.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Fa.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},Fa.prototype._setupUI=function(){var B=this._fullscreenButton=b.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);b.create("span","mapboxgl-ctrl-icon",B).setAttribute("aria-hidden",!0),B.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Fa.prototype._updateTitle=function(){var B=this._getTitle();this._fullscreenButton.setAttribute("aria-label",B),this._fullscreenButton.title=B},Fa.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Fa.prototype._isFullscreen=function(){return this._fullscreen},Fa.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Fa.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var os={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},hl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Xe=function(B){function G(H){B.call(this),this.options=o.extend(Object.create(os),H),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return B&&(G.__proto__=B),G.prototype=Object.create(B&&B.prototype),G.prototype.constructor=G,G.prototype.addTo=function(H){return this._map&&this.remove(),this._map=H,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},G.prototype.isOpen=function(){return!!this._map},G.prototype.remove=function(){return this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},G.prototype.getLngLat=function(){return this._lngLat},G.prototype.setLngLat=function(H){return this._lngLat=o.LngLat.convert(H),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},G.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},G.prototype.getElement=function(){return this._container},G.prototype.setText=function(H){return this.setDOMContent(o.window.document.createTextNode(H))},G.prototype.setHTML=function(H){var L,q=o.window.document.createDocumentFragment(),Q=o.window.document.createElement("body");for(Q.innerHTML=H;L=Q.firstChild;)q.appendChild(L);return this.setDOMContent(q)},G.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},G.prototype.setMaxWidth=function(H){return this.options.maxWidth=H,this._update(),this},G.prototype.setDOMContent=function(H){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(H),this._createCloseButton(),this._update(),this._focusFirstElement(),this},G.prototype.addClassName=function(H){this._container&&this._container.classList.add(H)},G.prototype.removeClassName=function(H){this._container&&this._container.classList.remove(H)},G.prototype.setOffset=function(H){return this.options.offset=H,this._update(),this},G.prototype.toggleClassName=function(H){if(this._container)return this._container.classList.toggle(H)},G.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=b.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},G.prototype._onMouseUp=function(H){this._update(H.point)},G.prototype._onMouseMove=function(H){this._update(H.point)},G.prototype._onDrag=function(H){this._update(H.point)},G.prototype._update=function(H){var L=this,q=this._lngLat||this._trackPointer;if(this._map&&q&&this._content&&(this._container||(this._container=b.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=b.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(qe){return L._container.classList.add(qe)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ys(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||H)){var Q=this._pos=this._trackPointer&&H?H:this._map.project(this._lngLat),ne=this.options.anchor,ce=Je(this.options.offset);if(!ne){var ye,Le=this._container.offsetWidth,Ie=this._container.offsetHeight;ye=Q.y+ce.bottom.y<Ie?["top"]:Q.y>this._map.transform.height-Ie?["bottom"]:[],Q.x<Le/2?ye.push("left"):Q.x>this._map.transform.width-Le/2&&ye.push("right"),ne=ye.length===0?"bottom":ye.join("-")}var je=Q.add(ce[ne]).round();b.setTransform(this._container,Rr[ne]+" translate("+je.x+"px,"+je.y+"px)"),Hr(this._container,ne,"popup")}},G.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var H=this._container.querySelector(hl);H&&H.focus()}},G.prototype._onClose=function(){this.remove()},G}(o.Evented);function Je(B){if(B){if(typeof B=="number"){var G=Math.round(Math.sqrt(.5*Math.pow(B,2)));return{center:new o.Point(0,0),top:new o.Point(0,B),"top-left":new o.Point(G,G),"top-right":new o.Point(-G,G),bottom:new o.Point(0,-B),"bottom-left":new o.Point(G,-G),"bottom-right":new o.Point(-G,-G),left:new o.Point(B,0),right:new o.Point(-B,0)}}if(B instanceof o.Point||Array.isArray(B)){var H=o.Point.convert(B);return{center:H,top:H,"top-left":H,"top-right":H,bottom:H,"bottom-left":H,"bottom-right":H,left:H,right:H}}return{center:o.Point.convert(B.center||[0,0]),top:o.Point.convert(B.top||[0,0]),"top-left":o.Point.convert(B["top-left"]||[0,0]),"top-right":o.Point.convert(B["top-right"]||[0,0]),bottom:o.Point.convert(B.bottom||[0,0]),"bottom-left":o.Point.convert(B["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(B["bottom-right"]||[0,0]),left:o.Point.convert(B.left||[0,0]),right:o.Point.convert(B.right||[0,0])}}return Je(new o.Point(0,0))}var ot={version:o.version,supported:T,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:vo,NavigationControl:mo,GeolocateControl:vi,AttributionControl:La,ScaleControl:Xa,FullscreenControl:Fa,Popup:Xe,Marker:Oo,Style:rr,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){gt().acquire(rt)},clearPrewarmedResources:function(){var B=ct;B&&(B.isPreloaded()&&B.numActive()===1?(B.release(rt),ct=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(B){o.config.ACCESS_TOKEN=B},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(B){o.config.API_URL=B},get workerCount(){return Ye.workerCount},set workerCount(B){Ye.workerCount=B},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(B){o.config.MAX_PARALLEL_IMAGE_REQUESTS=B},clearStorage:function(B){o.clearTileCache(B)},workerUrl:""};return ot}),M}()},3108:function(ee,z,e){"use strict";ee.exports=e(26099)},26099:function(ee,z,e){"use strict";var M=e(64928),k=e(32420),o=e(51160),T=e(76752),b=e(55616),h=e(31264),s=e(47520),t=e(18400),i=e(72512),n=e(76244);function r(a,l){for(var u=l[0],d=l[1],c=1/(l[2]-u),x=1/(l[3]-d),g=new Array(a.length),p=0,v=a.length/2;p<v;p++)g[2*p]=k((a[2*p]-u)*c,0,1),g[2*p+1]=k((a[2*p+1]-d)*x,0,1);return g}ee.exports=function(a,l){l||(l={}),a=s(a,"float64"),l=b(l,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=h(l.maxDepth,255),d=h(l.bounds,T(a,2));d[0]===d[2]&&d[2]++,d[1]===d[3]&&d[3]++;var c,x=r(a,d),g=a.length>>>1;l.dtype||(l.dtype="array"),typeof l.dtype=="string"?c=new(i(l.dtype))(g):l.dtype&&(c=l.dtype,Array.isArray(c)&&(c.length=g));for(var p=0;p<g;++p)c[p]=p;var v=[],m=[],y=[],_=[];(function R(j,D,N,W,F,U){if(!W.length)return null;var V=v[F]||(v[F]=[]),te=y[F]||(y[F]=[]),J=m[F]||(m[F]=[]),K=V.length;if(++F>u||U>1073741824){for(var X=0;X<W.length;X++)V.push(W[X]),te.push(U),J.push(null,null,null,null);return K}if(V.push(W[0]),te.push(U),W.length<=1)return J.push(null,null,null,null),K;for(var Z=.5*N,$=j+Z,re=D+Z,oe=[],ie=[],ue=[],me=[],be=1,ge=W.length;be<ge;be++){var de=W[be],ve=x[2*de],pe=x[2*de+1];ve<$?pe<re?oe.push(de):ie.push(de):pe<re?ue.push(de):me.push(de)}return U<<=2,J.push(R(j,D,Z,oe,F,U),R(j,re,Z,ie,F,U+1),R($,D,Z,ue,F,U+2),R($,re,Z,me,F,U+3)),K})(0,0,1,c,0,1);for(var f=0,S=0;S<v.length;S++){var w=v[S];if(c.set)c.set(w,f);else for(var E=0,P=w.length;E<P;E++)c[E+f]=w[E];var C=f+v[S].length;_[S]=[f,C],f=C}return c.range=function(){for(var R,j=[],D=arguments.length;D--;)j[D]=arguments[D];if(t(j[j.length-1])){var N=j.pop();j.length||N.x==null&&N.l==null&&N.left==null||(j=[N],R={}),R=b(N,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else R={};j.length||(j=d);var W,F=o.apply(void 0,j),U=[Math.min(F.x,F.x+F.width),Math.min(F.y,F.y+F.height),Math.max(F.x,F.x+F.width),Math.max(F.y,F.y+F.height)],V=U[0],te=U[1],J=U[2],K=U[3],X=r([V,te,J,K],d),Z=X[0],$=X[1],re=X[2],oe=X[3],ie=h(R.level,v.length);if(R.d!=null&&(typeof R.d=="number"?W=[R.d,R.d]:R.d.length&&(W=R.d),ie=Math.min(Math.max(Math.ceil(-n(Math.abs(W[0])/(d[2]-d[0]))),Math.ceil(-n(Math.abs(W[1])/(d[3]-d[1])))),ie)),ie=Math.min(ie,v.length),R.lod)return function(me,be,ge,de,ve){for(var pe=[],_e=0;_e<ve;_e++){var Te=y[_e],le=_[_e][0],ae=O(me,be,_e),he=O(ge,de,_e),Se=M.ge(Te,ae),ke=M.gt(Te,he,Se,Te.length-1);pe[_e]=[Se+le,ke+le]}return pe}(Z,$,re,oe,ie);var ue=[];return function me(be,ge,de,ve,pe,_e){if(pe!==null&&_e!==null&&!(Z>be+de||$>ge+de||re<be||oe<ge||ve>=ie||pe===_e)){var Te=v[ve];_e===void 0&&(_e=Te.length);for(var le=pe;le<_e;le++){var ae=Te[le],he=a[2*ae],Se=a[2*ae+1];he>=V&&he<=J&&Se>=te&&Se<=K&&ue.push(ae)}var ke=m[ve],Me=ke[4*pe+0],Ee=ke[4*pe+1],De=ke[4*pe+2],fe=ke[4*pe+3],xe=function(ze,Pe){for(var Ue=null,Ve=0;Ue===null;)if(Ue=ze[4*Pe+Ve],++Ve>ze.length)return null;return Ue}(ke,pe+1),we=.5*de,Oe=ve+1;me(be,ge,we,Oe,Me,Ee||De||fe||xe),me(be,ge+we,we,Oe,Ee,De||fe||xe),me(be+we,ge,we,Oe,De,fe||xe),me(be+we,ge+we,we,Oe,fe,xe)}}(0,0,1,0,0,1),ue},c;function O(R,j,D){for(var N=1,W=.5,F=.5,U=.5,V=0;V<D;V++)N<<=2,N+=R<W?j<F?0:1:j<F?2:3,U*=.5,W+=R<W?-U:U,F+=j<F?-U:U;return N}}},40440:function(ee,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var M=e(3256),k=6378137;function o(h){var s=0;if(h&&h.length>0){s+=Math.abs(T(h[0]));for(var t=1;t<h.length;t++)s-=Math.abs(T(h[t]))}return s}function T(h){var s,t,i,n,r,a,l=0,u=h.length;if(u>2){for(a=0;a<u;a++)a===u-2?(i=u-2,n=u-1,r=0):a===u-1?(i=u-1,n=0,r=1):(i=a,n=a+1,r=a+2),s=h[i],t=h[n],l+=(b(h[r][0])-b(s[0]))*Math.sin(b(t[1]));l=l*k*k/2}return l}function b(h){return h*Math.PI/180}z.default=function(h){return M.geomReduce(h,function(s,t){return s+function(i){var n,r=0;switch(i.type){case"Polygon":return o(i.coordinates);case"MultiPolygon":for(n=0;n<i.coordinates.length;n++)r+=o(i.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},46284:function(ee,z){"use strict";function e(a,l,u){u===void 0&&(u={});var d={type:"Feature"};return(u.id===0||u.id)&&(d.id=u.id),u.bbox&&(d.bbox=u.bbox),d.properties=l||{},d.geometry=a,d}function M(a,l,u){if(u===void 0&&(u={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!r(a[0])||!r(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},l,u)}function k(a,l,u){u===void 0&&(u={});for(var d=0,c=a;d<c.length;d++){var x=c[d];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<x[x.length-1].length;g++)if(x[x.length-1][g]!==x[0][g])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},l,u)}function o(a,l,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},l,u)}function T(a,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=a,u}function b(a,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:a},l,u)}function h(a,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:a},l,u)}function s(a,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:a},l,u)}function t(a,l){l===void 0&&(l="kilometers");var u=z.factors[l];if(!u)throw new Error(l+" units is invalid");return a*u}function i(a,l){l===void 0&&(l="kilometers");var u=z.factors[l];if(!u)throw new Error(l+" units is invalid");return a/u}function n(a){return a%(2*Math.PI)*180/Math.PI}function r(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:1.0936*z.earthRadius},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:1.0936133},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=e,z.geometry=function(a,l,u){switch(u===void 0&&(u={}),a){case"Point":return M(l).geometry;case"LineString":return o(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return h(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(a+" is invalid")}},z.point=M,z.points=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(d){return M(d,l)}),u)},z.polygon=k,z.polygons=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(d){return k(d,l)}),u)},z.lineString=o,z.lineStrings=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(d){return o(d,l)}),u)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=h,z.multiPolygon=s,z.geometryCollection=function(a,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:a},l,u)},z.round=function(a,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(a*u)/u},z.radiansToLength=t,z.lengthToRadians=i,z.lengthToDegrees=function(a,l){return n(i(a,l))},z.bearingToAzimuth=function(a){var l=a%360;return l<0&&(l+=360),l},z.radiansToDegrees=n,z.degreesToRadians=function(a){return a%360*Math.PI/180},z.convertLength=function(a,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,l),u)},z.convertArea=function(a,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var d=z.areaFactors[l];if(!d)throw new Error("invalid original units");var c=z.areaFactors[u];if(!c)throw new Error("invalid final units");return a/d*c},z.isNumber=r,z.isObject=function(a){return!!a&&a.constructor===Object},z.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},z.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},3256:function(ee,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var M=e(46284);function k(i,n,r){if(i!==null)for(var a,l,u,d,c,x,g,p,v=0,m=0,y=i.type,_=y==="FeatureCollection",f=y==="Feature",S=_?i.features.length:1,w=0;w<S;w++){c=(p=!!(g=_?i.features[w].geometry:f?i.geometry:i)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var P=0,C=0;if((d=p?g.geometries[E]:g)!==null){x=d.coordinates;var O=d.type;switch(v=!r||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(n(x,m,w,P,C)===!1)return!1;m++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(n(x[a],m,w,P,C)===!1)return!1;m++,O==="MultiPoint"&&P++}O==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(l=0;l<x[a].length-v;l++){if(n(x[a][l],m,w,P,C)===!1)return!1;m++}O==="MultiLineString"&&P++,O==="Polygon"&&C++}O==="Polygon"&&P++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,l=0;l<x[a].length;l++){for(u=0;u<x[a][l].length-v;u++){if(n(x[a][l][u],m,w,P,C)===!1)return!1;m++}C++}P++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(k(d.geometries[a],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,n){var r;switch(i.type){case"FeatureCollection":for(r=0;r<i.features.length&&n(i.features[r].properties,r)!==!1;r++);break;case"Feature":n(i.properties,0)}}function T(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var r=0;r<i.features.length&&n(i.features[r],r)!==!1;r++);}function b(i,n){var r,a,l,u,d,c,x,g,p,v,m=0,y=i.type==="FeatureCollection",_=i.type==="Feature",f=y?i.features.length:1;for(r=0;r<f;r++){for(c=y?i.features[r].geometry:_?i.geometry:i,g=y?i.features[r].properties:_?i.properties:{},p=y?i.features[r].bbox:_?i.bbox:void 0,v=y?i.features[r].id:_?i.id:void 0,d=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<d;l++)if((u=x?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,m,g,p,v)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(n(u.geometries[a],m,g,p,v)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,m,g,p,v)===!1)return!1;m++}}function h(i,n){b(i,function(r,a,l,u,d){var c,x=r===null?null:r.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return n(M.feature(r,l,{bbox:u,id:d}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<r.coordinates.length;g++){var p={type:c,coordinates:r.coordinates[g]};if(n(M.feature(p,l),a,g)===!1)return!1}})}function s(i,n){h(i,function(r,a,l){var u=0;if(r.geometry){var d=r.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var c,x=0,g=0,p=0;return k(r,function(v,m,y,_,f){if(c===void 0||a>x||_>g||f>p)return c=v,x=a,g=_,p=f,void(u=0);var S=M.lineString([c,v],r.properties);if(n(S,a,l,f,u)===!1)return!1;u++,c=v})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");h(i,function(r,a,l){if(r.geometry!==null){var u=r.geometry.type,d=r.geometry.coordinates;switch(u){case"LineString":if(n(r,a,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<d.length;c++)if(n(M.lineString(d[c],r.properties),a,l,c)===!1)return!1}}})}z.coordEach=k,z.coordReduce=function(i,n,r,a){var l=r;return k(i,function(u,d,c,x,g){l=d===0&&r===void 0?u:n(l,u,d,c,x,g)},a),l},z.propEach=o,z.propReduce=function(i,n,r){var a=r;return o(i,function(l,u){a=u===0&&r===void 0?l:n(a,l,u)}),a},z.featureEach=T,z.featureReduce=function(i,n,r){var a=r;return T(i,function(l,u){a=u===0&&r===void 0?l:n(a,l,u)}),a},z.coordAll=function(i){var n=[];return k(i,function(r){n.push(r)}),n},z.geomEach=b,z.geomReduce=function(i,n,r){var a=r;return b(i,function(l,u,d,c,x){a=u===0&&r===void 0?l:n(a,l,u,d,c,x)}),a},z.flattenEach=h,z.flattenReduce=function(i,n,r){var a=r;return h(i,function(l,u,d){a=u===0&&d===0&&r===void 0?l:n(a,l,u,d)}),a},z.segmentEach=s,z.segmentReduce=function(i,n,r){var a=r,l=!1;return s(i,function(u,d,c,x,g){a=l===!1&&r===void 0?u:n(a,u,d,c,x,g),l=!0}),a},z.lineEach=t,z.lineReduce=function(i,n,r){var a=r;return t(i,function(l,u,d,c){a=u===0&&r===void 0?l:n(a,l,u,d,c)}),a},z.findSegment=function(i,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,d=n.segmentIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=x.length+d-1),M.lineString([x[d],x[d+1]],c,n);case"Polygon":return u<0&&(u=x.length+u),d<0&&(d=x[u].length+d-1),M.lineString([x[u][d],x[u][d+1]],c,n);case"MultiLineString":return l<0&&(l=x.length+l),d<0&&(d=x[l].length+d-1),M.lineString([x[l][d],x[l][d+1]],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),d<0&&(d=x[l][u].length-d-1),M.lineString([x[l][u][d],x[l][u][d+1]],c,n)}throw new Error("geojson is invalid")},z.findPoint=function(i,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,d=n.coordIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":return M.point(x,c,n);case"MultiPoint":return l<0&&(l=x.length+l),M.point(x[l],c,n);case"LineString":return d<0&&(d=x.length+d),M.point(x[d],c,n);case"Polygon":return u<0&&(u=x.length+u),d<0&&(d=x[u].length+d),M.point(x[u][d],c,n);case"MultiLineString":return l<0&&(l=x.length+l),d<0&&(d=x[l].length+d),M.point(x[l][d],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),d<0&&(d=x[l][u].length-d),M.point(x[l][u][d],c,n)}throw new Error("geojson is invalid")}},42428:function(ee,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var M=e(84880);function k(o){var T=[1/0,1/0,-1/0,-1/0];return M.coordEach(o,function(b){T[0]>b[0]&&(T[0]=b[0]),T[1]>b[1]&&(T[1]=b[1]),T[2]<b[0]&&(T[2]=b[0]),T[3]<b[1]&&(T[3]=b[1])}),T}k.default=k,z.default=k},76796:function(ee,z){"use strict";function e(a,l,u){u===void 0&&(u={});var d={type:"Feature"};return(u.id===0||u.id)&&(d.id=u.id),u.bbox&&(d.bbox=u.bbox),d.properties=l||{},d.geometry=a,d}function M(a,l,u){if(u===void 0&&(u={}),!a)throw new Error("coordinates is required");if(!Array.isArray(a))throw new Error("coordinates must be an Array");if(a.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!r(a[0])||!r(a[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:a},l,u)}function k(a,l,u){u===void 0&&(u={});for(var d=0,c=a;d<c.length;d++){var x=c[d];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<x[x.length-1].length;g++)if(x[x.length-1][g]!==x[0][g])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},l,u)}function o(a,l,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},l,u)}function T(a,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=a,u}function b(a,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:a},l,u)}function h(a,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:a},l,u)}function s(a,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:a},l,u)}function t(a,l){l===void 0&&(l="kilometers");var u=z.factors[l];if(!u)throw new Error(l+" units is invalid");return a*u}function i(a,l){l===void 0&&(l="kilometers");var u=z.factors[l];if(!u)throw new Error(l+" units is invalid");return a/u}function n(a){return a%(2*Math.PI)*180/Math.PI}function r(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:1.0936*z.earthRadius},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:1.0936133},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=e,z.geometry=function(a,l,u){switch(u===void 0&&(u={}),a){case"Point":return M(l).geometry;case"LineString":return o(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return h(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(a+" is invalid")}},z.point=M,z.points=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(d){return M(d,l)}),u)},z.polygon=k,z.polygons=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(d){return k(d,l)}),u)},z.lineString=o,z.lineStrings=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(d){return o(d,l)}),u)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=h,z.multiPolygon=s,z.geometryCollection=function(a,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:a},l,u)},z.round=function(a,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(a*u)/u},z.radiansToLength=t,z.lengthToRadians=i,z.lengthToDegrees=function(a,l){return n(i(a,l))},z.bearingToAzimuth=function(a){var l=a%360;return l<0&&(l+=360),l},z.radiansToDegrees=n,z.degreesToRadians=function(a){return a%360*Math.PI/180},z.convertLength=function(a,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,l),u)},z.convertArea=function(a,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var d=z.areaFactors[l];if(!d)throw new Error("invalid original units");var c=z.areaFactors[u];if(!c)throw new Error("invalid final units");return a/d*c},z.isNumber=r,z.isObject=function(a){return!!a&&a.constructor===Object},z.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},z.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")}},84880:function(ee,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var M=e(76796);function k(i,n,r){if(i!==null)for(var a,l,u,d,c,x,g,p,v=0,m=0,y=i.type,_=y==="FeatureCollection",f=y==="Feature",S=_?i.features.length:1,w=0;w<S;w++){c=(p=!!(g=_?i.features[w].geometry:f?i.geometry:i)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var P=0,C=0;if((d=p?g.geometries[E]:g)!==null){x=d.coordinates;var O=d.type;switch(v=!r||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(n(x,m,w,P,C)===!1)return!1;m++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(n(x[a],m,w,P,C)===!1)return!1;m++,O==="MultiPoint"&&P++}O==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(l=0;l<x[a].length-v;l++){if(n(x[a][l],m,w,P,C)===!1)return!1;m++}O==="MultiLineString"&&P++,O==="Polygon"&&C++}O==="Polygon"&&P++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,l=0;l<x[a].length;l++){for(u=0;u<x[a][l].length-v;u++){if(n(x[a][l][u],m,w,P,C)===!1)return!1;m++}C++}P++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(k(d.geometries[a],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,n){var r;switch(i.type){case"FeatureCollection":for(r=0;r<i.features.length&&n(i.features[r].properties,r)!==!1;r++);break;case"Feature":n(i.properties,0)}}function T(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var r=0;r<i.features.length&&n(i.features[r],r)!==!1;r++);}function b(i,n){var r,a,l,u,d,c,x,g,p,v,m=0,y=i.type==="FeatureCollection",_=i.type==="Feature",f=y?i.features.length:1;for(r=0;r<f;r++){for(c=y?i.features[r].geometry:_?i.geometry:i,g=y?i.features[r].properties:_?i.properties:{},p=y?i.features[r].bbox:_?i.bbox:void 0,v=y?i.features[r].id:_?i.id:void 0,d=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<d;l++)if((u=x?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,m,g,p,v)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(n(u.geometries[a],m,g,p,v)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,m,g,p,v)===!1)return!1;m++}}function h(i,n){b(i,function(r,a,l,u,d){var c,x=r===null?null:r.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return n(M.feature(r,l,{bbox:u,id:d}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<r.coordinates.length;g++){var p={type:c,coordinates:r.coordinates[g]};if(n(M.feature(p,l),a,g)===!1)return!1}})}function s(i,n){h(i,function(r,a,l){var u=0;if(r.geometry){var d=r.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var c,x=0,g=0,p=0;return k(r,function(v,m,y,_,f){if(c===void 0||a>x||_>g||f>p)return c=v,x=a,g=_,p=f,void(u=0);var S=M.lineString([c,v],r.properties);if(n(S,a,l,f,u)===!1)return!1;u++,c=v})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");h(i,function(r,a,l){if(r.geometry!==null){var u=r.geometry.type,d=r.geometry.coordinates;switch(u){case"LineString":if(n(r,a,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<d.length;c++)if(n(M.lineString(d[c],r.properties),a,l,c)===!1)return!1}}})}z.coordEach=k,z.coordReduce=function(i,n,r,a){var l=r;return k(i,function(u,d,c,x,g){l=d===0&&r===void 0?u:n(l,u,d,c,x,g)},a),l},z.propEach=o,z.propReduce=function(i,n,r){var a=r;return o(i,function(l,u){a=u===0&&r===void 0?l:n(a,l,u)}),a},z.featureEach=T,z.featureReduce=function(i,n,r){var a=r;return T(i,function(l,u){a=u===0&&r===void 0?l:n(a,l,u)}),a},z.coordAll=function(i){var n=[];return k(i,function(r){n.push(r)}),n},z.geomEach=b,z.geomReduce=function(i,n,r){var a=r;return b(i,function(l,u,d,c,x){a=u===0&&r===void 0?l:n(a,l,u,d,c,x)}),a},z.flattenEach=h,z.flattenReduce=function(i,n,r){var a=r;return h(i,function(l,u,d){a=u===0&&d===0&&r===void 0?l:n(a,l,u,d)}),a},z.segmentEach=s,z.segmentReduce=function(i,n,r){var a=r,l=!1;return s(i,function(u,d,c,x,g){a=l===!1&&r===void 0?u:n(a,u,d,c,x,g),l=!0}),a},z.lineEach=t,z.lineReduce=function(i,n,r){var a=r;return t(i,function(l,u,d,c){a=u===0&&r===void 0?l:n(a,l,u,d,c)}),a},z.findSegment=function(i,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,d=n.segmentIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=x.length+d-1),M.lineString([x[d],x[d+1]],c,n);case"Polygon":return u<0&&(u=x.length+u),d<0&&(d=x[u].length+d-1),M.lineString([x[u][d],x[u][d+1]],c,n);case"MultiLineString":return l<0&&(l=x.length+l),d<0&&(d=x[l].length+d-1),M.lineString([x[l][d],x[l][d+1]],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),d<0&&(d=x[l][u].length-d-1),M.lineString([x[l][u][d],x[l][u][d+1]],c,n)}throw new Error("geojson is invalid")},z.findPoint=function(i,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,d=n.coordIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":return M.point(x,c,n);case"MultiPoint":return l<0&&(l=x.length+l),M.point(x[l],c,n);case"LineString":return d<0&&(d=x.length+d),M.point(x[d],c,n);case"Polygon":return u<0&&(u=x.length+u),d<0&&(d=x[u].length+d),M.point(x[u][d],c,n);case"MultiLineString":return l<0&&(l=x.length+l),d<0&&(d=x[l].length+d),M.point(x[l][d],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),d<0&&(d=x[l][u].length-d),M.point(x[l][u][d],c,n)}throw new Error("geojson is invalid")}},77844:function(ee,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var M=e(43752),k=e(49840);z.default=function(o,T){T===void 0&&(T={});var b=0,h=0,s=0;return M.coordEach(o,function(t){b+=t[0],h+=t[1],s++}),k.point([b/s,h/s],T.properties)}},49840:function(ee,z){"use strict";function e(a,l,u){u===void 0&&(u={});var d={type:"Feature"};return(u.id===0||u.id)&&(d.id=u.id),u.bbox&&(d.bbox=u.bbox),d.properties=l||{},d.geometry=a,d}function M(a,l,u){return u===void 0&&(u={}),e({type:"Point",coordinates:a},l,u)}function k(a,l,u){u===void 0&&(u={});for(var d=0,c=a;d<c.length;d++){var x=c[d];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<x[x.length-1].length;g++)if(x[x.length-1][g]!==x[0][g])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:a},l,u)}function o(a,l,u){if(u===void 0&&(u={}),a.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:a},l,u)}function T(a,l){l===void 0&&(l={});var u={type:"FeatureCollection"};return l.id&&(u.id=l.id),l.bbox&&(u.bbox=l.bbox),u.features=a,u}function b(a,l,u){return u===void 0&&(u={}),e({type:"MultiLineString",coordinates:a},l,u)}function h(a,l,u){return u===void 0&&(u={}),e({type:"MultiPoint",coordinates:a},l,u)}function s(a,l,u){return u===void 0&&(u={}),e({type:"MultiPolygon",coordinates:a},l,u)}function t(a,l){l===void 0&&(l="kilometers");var u=z.factors[l];if(!u)throw new Error(l+" units is invalid");return a*u}function i(a,l){l===void 0&&(l="kilometers");var u=z.factors[l];if(!u)throw new Error(l+" units is invalid");return a/u}function n(a){return a%(2*Math.PI)*180/Math.PI}function r(a){return!isNaN(a)&&a!==null&&!Array.isArray(a)&&!/^\s*$/.test(a)}Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:100*z.earthRadius,centimetres:100*z.earthRadius,degrees:z.earthRadius/111325,feet:3.28084*z.earthRadius,inches:39.37*z.earthRadius,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:1e3*z.earthRadius,millimetres:1e3*z.earthRadius,nauticalmiles:z.earthRadius/1852,radians:1,yards:z.earthRadius/1.0936},z.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/z.earthRadius,yards:.91441111923921},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},z.feature=e,z.geometry=function(a,l,u){switch(u===void 0&&(u={}),a){case"Point":return M(l).geometry;case"LineString":return o(l).geometry;case"Polygon":return k(l).geometry;case"MultiPoint":return h(l).geometry;case"MultiLineString":return b(l).geometry;case"MultiPolygon":return s(l).geometry;default:throw new Error(a+" is invalid")}},z.point=M,z.points=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(d){return M(d,l)}),u)},z.polygon=k,z.polygons=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(d){return k(d,l)}),u)},z.lineString=o,z.lineStrings=function(a,l,u){return u===void 0&&(u={}),T(a.map(function(d){return o(d,l)}),u)},z.featureCollection=T,z.multiLineString=b,z.multiPoint=h,z.multiPolygon=s,z.geometryCollection=function(a,l,u){return u===void 0&&(u={}),e({type:"GeometryCollection",geometries:a},l,u)},z.round=function(a,l){if(l===void 0&&(l=0),l&&!(l>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,l||0);return Math.round(a*u)/u},z.radiansToLength=t,z.lengthToRadians=i,z.lengthToDegrees=function(a,l){return n(i(a,l))},z.bearingToAzimuth=function(a){var l=a%360;return l<0&&(l+=360),l},z.radiansToDegrees=n,z.degreesToRadians=function(a){return a%360*Math.PI/180},z.convertLength=function(a,l,u){if(l===void 0&&(l="kilometers"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("length must be a positive number");return t(i(a,l),u)},z.convertArea=function(a,l,u){if(l===void 0&&(l="meters"),u===void 0&&(u="kilometers"),!(a>=0))throw new Error("area must be a positive number");var d=z.areaFactors[l];if(!d)throw new Error("invalid original units");var c=z.areaFactors[u];if(!c)throw new Error("invalid final units");return a/d*c},z.isNumber=r,z.isObject=function(a){return!!a&&a.constructor===Object},z.validateBBox=function(a){if(!a)throw new Error("bbox is required");if(!Array.isArray(a))throw new Error("bbox must be an Array");if(a.length!==4&&a.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");a.forEach(function(l){if(!r(l))throw new Error("bbox must only contain numbers")})},z.validateId=function(a){if(!a)throw new Error("id is required");if(["string","number"].indexOf(typeof a)===-1)throw new Error("id must be a number or a string")},z.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},z.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},z.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},z.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},z.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},z.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},z.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},43752:function(ee,z,e){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var M=e(49840);function k(i,n,r){if(i!==null)for(var a,l,u,d,c,x,g,p,v=0,m=0,y=i.type,_=y==="FeatureCollection",f=y==="Feature",S=_?i.features.length:1,w=0;w<S;w++){c=(p=!!(g=_?i.features[w].geometry:f?i.geometry:i)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var P=0,C=0;if((d=p?g.geometries[E]:g)!==null){x=d.coordinates;var O=d.type;switch(v=!r||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(n(x,m,w,P,C)===!1)return!1;m++,P++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(n(x[a],m,w,P,C)===!1)return!1;m++,O==="MultiPoint"&&P++}O==="LineString"&&P++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(l=0;l<x[a].length-v;l++){if(n(x[a][l],m,w,P,C)===!1)return!1;m++}O==="MultiLineString"&&P++,O==="Polygon"&&C++}O==="Polygon"&&P++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(C=0,l=0;l<x[a].length;l++){for(u=0;u<x[a][l].length-v;u++){if(n(x[a][l][u],m,w,P,C)===!1)return!1;m++}C++}P++}break;case"GeometryCollection":for(a=0;a<d.geometries.length;a++)if(k(d.geometries[a],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,n){var r;switch(i.type){case"FeatureCollection":for(r=0;r<i.features.length&&n(i.features[r].properties,r)!==!1;r++);break;case"Feature":n(i.properties,0)}}function T(i,n){if(i.type==="Feature")n(i,0);else if(i.type==="FeatureCollection")for(var r=0;r<i.features.length&&n(i.features[r],r)!==!1;r++);}function b(i,n){var r,a,l,u,d,c,x,g,p,v,m=0,y=i.type==="FeatureCollection",_=i.type==="Feature",f=y?i.features.length:1;for(r=0;r<f;r++){for(c=y?i.features[r].geometry:_?i.geometry:i,g=y?i.features[r].properties:_?i.properties:{},p=y?i.features[r].bbox:_?i.bbox:void 0,v=y?i.features[r].id:_?i.id:void 0,d=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,l=0;l<d;l++)if((u=x?c.geometries[l]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(u,m,g,p,v)===!1)return!1;break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)if(n(u.geometries[a],m,g,p,v)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,m,g,p,v)===!1)return!1;m++}}function h(i,n){b(i,function(r,a,l,u,d){var c,x=r===null?null:r.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return n(M.feature(r,l,{bbox:u,id:d}),a,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<r.coordinates.length;g++){var p={type:c,coordinates:r.coordinates[g]};if(n(M.feature(p,l),a,g)===!1)return!1}})}function s(i,n){h(i,function(r,a,l){var u=0;if(r.geometry){var d=r.geometry.type;if(d!=="Point"&&d!=="MultiPoint"){var c,x=0,g=0,p=0;return k(r,function(v,m,y,_,f){if(c===void 0||a>x||_>g||f>p)return c=v,x=a,g=_,p=f,void(u=0);var S=M.lineString([c,v],r.properties);if(n(S,a,l,f,u)===!1)return!1;u++,c=v})!==!1&&void 0}}})}function t(i,n){if(!i)throw new Error("geojson is required");h(i,function(r,a,l){if(r.geometry!==null){var u=r.geometry.type,d=r.geometry.coordinates;switch(u){case"LineString":if(n(r,a,l,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<d.length;c++)if(n(M.lineString(d[c],r.properties),a,l,c)===!1)return!1}}})}z.coordEach=k,z.coordReduce=function(i,n,r,a){var l=r;return k(i,function(u,d,c,x,g){l=d===0&&r===void 0?u:n(l,u,d,c,x,g)},a),l},z.propEach=o,z.propReduce=function(i,n,r){var a=r;return o(i,function(l,u){a=u===0&&r===void 0?l:n(a,l,u)}),a},z.featureEach=T,z.featureReduce=function(i,n,r){var a=r;return T(i,function(l,u){a=u===0&&r===void 0?l:n(a,l,u)}),a},z.coordAll=function(i){var n=[];return k(i,function(r){n.push(r)}),n},z.geomEach=b,z.geomReduce=function(i,n,r){var a=r;return b(i,function(l,u,d,c,x){a=u===0&&r===void 0?l:n(a,l,u,d,c,x)}),a},z.flattenEach=h,z.flattenReduce=function(i,n,r){var a=r;return h(i,function(l,u,d){a=u===0&&d===0&&r===void 0?l:n(a,l,u,d)}),a},z.segmentEach=s,z.segmentReduce=function(i,n,r){var a=r,l=!1;return s(i,function(u,d,c,x,g){a=l===!1&&r===void 0?u:n(a,u,d,c,x,g),l=!0}),a},z.lineEach=t,z.lineReduce=function(i,n,r){var a=r;return t(i,function(l,u,d,c){a=u===0&&r===void 0?l:n(a,l,u,d,c)}),a},z.findSegment=function(i,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,d=n.segmentIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return d<0&&(d=x.length+d-1),M.lineString([x[d],x[d+1]],c,n);case"Polygon":return u<0&&(u=x.length+u),d<0&&(d=x[u].length+d-1),M.lineString([x[u][d],x[u][d+1]],c,n);case"MultiLineString":return l<0&&(l=x.length+l),d<0&&(d=x[l].length+d-1),M.lineString([x[l][d],x[l][d+1]],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),d<0&&(d=x[l][u].length-d-1),M.lineString([x[l][u][d],x[l][u][d+1]],c,n)}throw new Error("geojson is invalid")},z.findPoint=function(i,n){if(n=n||{},!M.isObject(n))throw new Error("options is invalid");var r,a=n.featureIndex||0,l=n.multiFeatureIndex||0,u=n.geometryIndex||0,d=n.coordIndex||0,c=n.properties;switch(i.type){case"FeatureCollection":a<0&&(a=i.features.length+a),c=c||i.features[a].properties,r=i.features[a].geometry;break;case"Feature":c=c||i.properties,r=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=i;break;default:throw new Error("geojson is invalid")}if(r===null)return null;var x=r.coordinates;switch(r.type){case"Point":return M.point(x,c,n);case"MultiPoint":return l<0&&(l=x.length+l),M.point(x[l],c,n);case"LineString":return d<0&&(d=x.length+d),M.point(x[d],c,n);case"Polygon":return u<0&&(u=x.length+u),d<0&&(d=x[u].length+d),M.point(x[u][d],c,n);case"MultiLineString":return l<0&&(l=x.length+l),d<0&&(d=x[l].length+d),M.point(x[l][d],c,n);case"MultiPolygon":return l<0&&(l=x.length+l),u<0&&(u=x[l].length+u),d<0&&(d=x[l][u].length-d),M.point(x[l][u][d],c,n)}throw new Error("geojson is invalid")}},49972:function(ee){ee.exports=function(z){var e=0,M=0,k=0,o=0;return z.map(function(T){var b=(T=T.slice())[0],h=b.toUpperCase();if(b!=h)switch(T[0]=h,b){case"a":T[6]+=k,T[7]+=o;break;case"v":T[1]+=o;break;case"h":T[1]+=k;break;default:for(var s=1;s<T.length;)T[s++]+=k,T[s++]+=o}switch(h){case"Z":k=e,o=M;break;case"H":k=T[1];break;case"V":o=T[1];break;case"M":k=e=T[1],o=M=T[2];break;default:k=T[T.length-2],o=T[T.length-1]}return T})}},76752:function(ee){"use strict";ee.exports=function(z,e){if(!z||z.length==null)throw Error("Argument should be an array");e=e==null?1:Math.floor(e);for(var M=Array(2*e),k=0;k<e;k++){for(var o=-1/0,T=1/0,b=k,h=z.length;b<h;b+=e)z[b]>o&&(o=z[b]),z[b]<T&&(T=z[b]);M[k]=T,M[e+k]=o}return M}},10272:function(ee){"use strict";ee.exports=function(z,e,M){if(typeof Array.prototype.findIndex=="function")return z.findIndex(e,M);if(typeof e!="function")throw new TypeError("predicate must be a function");var k=Object(z),o=k.length;if(o===0)return-1;for(var T=0;T<o;T++)if(e.call(M,k[T],T,k))return T;return-1}},71152:function(ee,z,e){"use strict";var M=e(76752);ee.exports=function(k,o,T){if(!k||k.length==null)throw Error("Argument should be an array");o==null&&(o=1),T==null&&(T=M(k,o));for(var b=0;b<o;b++){var h=T[o+b],s=T[b],t=b,i=k.length;if(h===1/0&&s===-1/0)for(t=b;t<i;t+=o)k[t]=k[t]===h?1:k[t]===s?0:.5;else if(h===1/0)for(t=b;t<i;t+=o)k[t]=k[t]===h?1:0;else if(s===-1/0)for(t=b;t<i;t+=o)k[t]=k[t]===s?0:1;else{var n=h-s;for(t=b;t<i;t+=o)isNaN(k[t])||(k[t]=n===0?.5:(k[t]-s)/n)}}return k}},67752:function(ee){ee.exports=function(z,e){var M=typeof z=="number",k=typeof e=="number";M&&!k?(e=z,z=0):M||k||(z=0,e=0);var o=(e|=0)-(z|=0);if(o<0)throw new Error("array length must be positive");for(var T=new Array(o),b=0,h=z;b<o;b++,h++)T[b]=h;return T}},45408:function(ee,z,e){"use strict";var M=e(4168);function k(D){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},k(D)}var o,T,b=e(86832).codes,h=b.ERR_AMBIGUOUS_ARGUMENT,s=b.ERR_INVALID_ARG_TYPE,t=b.ERR_INVALID_ARG_VALUE,i=b.ERR_INVALID_RETURN_VALUE,n=b.ERR_MISSING_ARGS,r=e(26144),a=e(35840).inspect,l=e(35840).types,u=l.isPromise,d=l.isRegExp,c=Object.assign?Object.assign:e(60964).assign,x=Object.is?Object.is:e(39896);function g(){var D=e(25116);o=D.isDeepEqual,T=D.isDeepStrictEqual}var p=!1,v=ee.exports=f,m={};function y(D){throw D.message instanceof Error?D.message:new r(D)}function _(D,N,W,F){if(!W){var U=!1;if(N===0)U=!0,F="No value argument passed to `assert.ok()`";else if(F instanceof Error)throw F;var V=new r({actual:W,expected:!0,message:F,operator:"==",stackStartFn:D});throw V.generatedMessage=U,V}}function f(){for(var D=arguments.length,N=new Array(D),W=0;W<D;W++)N[W]=arguments[W];_.apply(void 0,[f,N.length].concat(N))}v.fail=function D(N,W,F,U,V){var te,J=arguments.length;if(J===0?te="Failed":J===1?(F=N,N=void 0):(p===!1&&(p=!0,(M.emitWarning?M.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),J===2&&(U="!=")),F instanceof Error)throw F;var K={actual:N,expected:W,operator:U===void 0?"fail":U,stackStartFn:V||D};F!==void 0&&(K.message=F);var X=new r(K);throw te&&(X.message=te,X.generatedMessage=!0),X},v.AssertionError=r,v.ok=f,v.equal=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");N!=W&&y({actual:N,expected:W,message:F,operator:"==",stackStartFn:D})},v.notEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");N==W&&y({actual:N,expected:W,message:F,operator:"!=",stackStartFn:D})},v.deepEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");o===void 0&&g(),o(N,W)||y({actual:N,expected:W,message:F,operator:"deepEqual",stackStartFn:D})},v.notDeepEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");o===void 0&&g(),o(N,W)&&y({actual:N,expected:W,message:F,operator:"notDeepEqual",stackStartFn:D})},v.deepStrictEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");o===void 0&&g(),T(N,W)||y({actual:N,expected:W,message:F,operator:"deepStrictEqual",stackStartFn:D})},v.notDeepStrictEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");o===void 0&&g(),T(N,W)&&y({actual:N,expected:W,message:F,operator:"notDeepStrictEqual",stackStartFn:D})},v.strictEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");x(N,W)||y({actual:N,expected:W,message:F,operator:"strictEqual",stackStartFn:D})},v.notStrictEqual=function D(N,W,F){if(arguments.length<2)throw new n("actual","expected");x(N,W)&&y({actual:N,expected:W,message:F,operator:"notStrictEqual",stackStartFn:D})};var S=function D(N,W,F){var U=this;(function(V,te){if(!(V instanceof te))throw new TypeError("Cannot call a class as a function")})(this,D),W.forEach(function(V){V in N&&(F!==void 0&&typeof F[V]=="string"&&d(N[V])&&N[V].test(F[V])?U[V]=F[V]:U[V]=N[V])})};function w(D,N,W,F){if(typeof N!="function"){if(d(N))return N.test(D);if(arguments.length===2)throw new s("expected",["Function","RegExp"],N);if(k(D)!=="object"||D===null){var U=new r({actual:D,expected:N,message:W,operator:"deepStrictEqual",stackStartFn:F});throw U.operator=F.name,U}var V=Object.keys(N);if(N instanceof Error)V.push("name","message");else if(V.length===0)throw new t("error",N,"may not be an empty object");return o===void 0&&g(),V.forEach(function(te){typeof D[te]=="string"&&d(N[te])&&N[te].test(D[te])||function(J,K,X,Z,$,re){if(!(X in J)||!T(J[X],K[X])){if(!Z){var oe=new S(J,$),ie=new S(K,$,J),ue=new r({actual:oe,expected:ie,operator:"deepStrictEqual",stackStartFn:re});throw ue.actual=J,ue.expected=K,ue.operator=re.name,ue}y({actual:J,expected:K,message:Z,operator:re.name,stackStartFn:re})}}(D,N,te,W,V,F)}),!0}return N.prototype!==void 0&&D instanceof N||!Error.isPrototypeOf(N)&&N.call({},D)===!0}function E(D){if(typeof D!="function")throw new s("fn","Function",D);try{D()}catch(N){return N}return m}function P(D){return u(D)||D!==null&&k(D)==="object"&&typeof D.then=="function"&&typeof D.catch=="function"}function C(D){return Promise.resolve().then(function(){var N;if(typeof D=="function"){if(!P(N=D()))throw new i("instance of Promise","promiseFn",N)}else{if(!P(D))throw new s("promiseFn",["Function","Promise"],D);N=D}return Promise.resolve().then(function(){return N}).then(function(){return m}).catch(function(W){return W})})}function O(D,N,W,F){if(typeof W=="string"){if(arguments.length===4)throw new s("error",["Object","Error","Function","RegExp"],W);if(k(N)==="object"&&N!==null){if(N.message===W)throw new h("error/message",'The error message "'.concat(N.message,'" is identical to the message.'))}else if(N===W)throw new h("error/message",'The error "'.concat(N,'" is identical to the message.'));F=W,W=void 0}else if(W!=null&&k(W)!=="object"&&typeof W!="function")throw new s("error",["Object","Error","Function","RegExp"],W);if(N===m){var U="";W&&W.name&&(U+=" (".concat(W.name,")")),U+=F?": ".concat(F):".";var V=D.name==="rejects"?"rejection":"exception";y({actual:void 0,expected:W,operator:D.name,message:"Missing expected ".concat(V).concat(U),stackStartFn:D})}if(W&&!w(N,W,F,D))throw N}function R(D,N,W,F){if(N!==m){if(typeof W=="string"&&(F=W,W=void 0),!W||w(N,W)){var U=F?": ".concat(F):".",V=D.name==="doesNotReject"?"rejection":"exception";y({actual:N,expected:W,operator:D.name,message:"Got unwanted ".concat(V).concat(U,`
`)+'Actual message: "'.concat(N&&N.message,'"'),stackStartFn:D})}throw N}}function j(){for(var D=arguments.length,N=new Array(D),W=0;W<D;W++)N[W]=arguments[W];_.apply(void 0,[j,N.length].concat(N))}v.throws=function D(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),U=1;U<W;U++)F[U-1]=arguments[U];O.apply(void 0,[D,E(N)].concat(F))},v.rejects=function D(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),U=1;U<W;U++)F[U-1]=arguments[U];return C(N).then(function(V){return O.apply(void 0,[D,V].concat(F))})},v.doesNotThrow=function D(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),U=1;U<W;U++)F[U-1]=arguments[U];R.apply(void 0,[D,E(N)].concat(F))},v.doesNotReject=function D(N){for(var W=arguments.length,F=new Array(W>1?W-1:0),U=1;U<W;U++)F[U-1]=arguments[U];return C(N).then(function(V){return R.apply(void 0,[D,V].concat(F))})},v.ifError=function D(N){if(N!=null){var W="ifError got unwanted exception: ";k(N)==="object"&&typeof N.message=="string"?N.message.length===0&&N.constructor?W+=N.constructor.name:W+=N.message:W+=a(N);var F=new r({actual:N,expected:null,operator:"ifError",message:W,stackStartFn:D}),U=N.stack;if(typeof U=="string"){var V=U.split(`
`);V.shift();for(var te=F.stack.split(`
`),J=0;J<V.length;J++){var K=te.indexOf(V[J]);if(K!==-1){te=te.slice(0,K);break}}F.stack="".concat(te.join(`
`),`
`).concat(V.join(`
`))}throw F}},v.strict=c(j,v,{equal:v.strictEqual,deepEqual:v.deepStrictEqual,notEqual:v.notStrictEqual,notDeepEqual:v.notDeepStrictEqual}),v.strict.strict=v.strict},26144:function(ee,z,e){"use strict";var M=e(4168);function k(y,_,f){return _ in y?Object.defineProperty(y,_,{value:f,enumerable:!0,configurable:!0,writable:!0}):y[_]=f,y}function o(y,_){for(var f=0;f<_.length;f++){var S=_[f];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}function T(y,_){return!_||n(_)!=="object"&&typeof _!="function"?b(y):_}function b(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function h(y){var _=typeof Map=="function"?new Map:void 0;return h=function(f){if(f===null||(S=f,Function.toString.call(S).indexOf("[native code]")===-1))return f;var S;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(_!==void 0){if(_.has(f))return _.get(f);_.set(f,w)}function w(){return s(f,arguments,i(this).constructor)}return w.prototype=Object.create(f.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),t(w,f)},h(y)}function s(y,_,f){return s=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(S){return!1}}()?Reflect.construct:function(S,w,E){var P=[null];P.push.apply(P,w);var C=new(Function.bind.apply(S,P));return E&&t(C,E.prototype),C},s.apply(null,arguments)}function t(y,_){return t=Object.setPrototypeOf||function(f,S){return f.__proto__=S,f},t(y,_)}function i(y){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},i(y)}function n(y){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},n(y)}var r=e(35840).inspect,a=e(86832).codes.ERR_INVALID_ARG_TYPE;function l(y,_,f){return(f===void 0||f>y.length)&&(f=y.length),y.substring(f-_.length,f)===_}var u="",d="",c="",x="",g={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function p(y){var _=Object.keys(y),f=Object.create(Object.getPrototypeOf(y));return _.forEach(function(S){f[S]=y[S]}),Object.defineProperty(f,"message",{value:y.message}),f}function v(y){return r(y,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var m=function(y){function _(w){var E;if(function(te,J){if(!(te instanceof J))throw new TypeError("Cannot call a class as a function")}(this,_),n(w)!=="object"||w===null)throw new a("options","Object",w);var P=w.message,C=w.operator,O=w.stackStartFn,R=w.actual,j=w.expected,D=Error.stackTraceLimit;if(Error.stackTraceLimit=0,P!=null)E=T(this,i(_).call(this,String(P)));else if(M.stderr&&M.stderr.isTTY&&(M.stderr&&M.stderr.getColorDepth&&M.stderr.getColorDepth()!==1?(u="\x1B[34m",d="\x1B[32m",x="\x1B[39m",c="\x1B[31m"):(u="",d="",x="",c="")),n(R)==="object"&&R!==null&&n(j)==="object"&&j!==null&&"stack"in R&&R instanceof Error&&"stack"in j&&j instanceof Error&&(R=p(R),j=p(j)),C==="deepStrictEqual"||C==="strictEqual")E=T(this,i(_).call(this,function(te,J,K){var X="",Z="",$=0,re="",oe=!1,ie=v(te),ue=ie.split(`
`),me=v(J).split(`
`),be=0,ge="";if(K==="strictEqual"&&n(te)==="object"&&n(J)==="object"&&te!==null&&J!==null&&(K="strictEqualObject"),ue.length===1&&me.length===1&&ue[0]!==me[0]){var de=ue[0].length+me[0].length;if(de<=10){if(!(n(te)==="object"&&te!==null||n(J)==="object"&&J!==null||te===0&&J===0))return"".concat(g[K],`

`)+"".concat(ue[0]," !== ").concat(me[0],`
`)}else if(K!=="strictEqualObject"&&de<(M.stderr&&M.stderr.isTTY?M.stderr.columns:80)){for(;ue[0][be]===me[0][be];)be++;be>2&&(ge=`
  `.concat(function(De,fe){if(fe=Math.floor(fe),De.length==0||fe==0)return"";var xe=De.length*fe;for(fe=Math.floor(Math.log(fe)/Math.log(2));fe;)De+=De,fe--;return De+De.substring(0,xe-De.length)}(" ",be),"^"),be=0)}}for(var ve=ue[ue.length-1],pe=me[me.length-1];ve===pe&&(be++<2?re=`
  `.concat(ve).concat(re):X=ve,ue.pop(),me.pop(),ue.length!==0&&me.length!==0);)ve=ue[ue.length-1],pe=me[me.length-1];var _e=Math.max(ue.length,me.length);if(_e===0){var Te=ie.split(`
`);if(Te.length>30)for(Te[26]="".concat(u,"...").concat(x);Te.length>27;)Te.pop();return"".concat(g.notIdentical,`

`).concat(Te.join(`
`),`
`)}be>3&&(re=`
`.concat(u,"...").concat(x).concat(re),oe=!0),X!==""&&(re=`
  `.concat(X).concat(re),X="");var le=0,ae=g[K]+`
`.concat(d,"+ actual").concat(x," ").concat(c,"- expected").concat(x),he=" ".concat(u,"...").concat(x," Lines skipped");for(be=0;be<_e;be++){var Se=be-$;if(ue.length<be+1)Se>1&&be>2&&(Se>4?(Z+=`
`.concat(u,"...").concat(x),oe=!0):Se>3&&(Z+=`
  `.concat(me[be-2]),le++),Z+=`
  `.concat(me[be-1]),le++),$=be,X+=`
`.concat(c,"-").concat(x," ").concat(me[be]),le++;else if(me.length<be+1)Se>1&&be>2&&(Se>4?(Z+=`
`.concat(u,"...").concat(x),oe=!0):Se>3&&(Z+=`
  `.concat(ue[be-2]),le++),Z+=`
  `.concat(ue[be-1]),le++),$=be,Z+=`
`.concat(d,"+").concat(x," ").concat(ue[be]),le++;else{var ke=me[be],Me=ue[be],Ee=Me!==ke&&(!l(Me,",")||Me.slice(0,-1)!==ke);Ee&&l(ke,",")&&ke.slice(0,-1)===Me&&(Ee=!1,Me+=","),Ee?(Se>1&&be>2&&(Se>4?(Z+=`
`.concat(u,"...").concat(x),oe=!0):Se>3&&(Z+=`
  `.concat(ue[be-2]),le++),Z+=`
  `.concat(ue[be-1]),le++),$=be,Z+=`
`.concat(d,"+").concat(x," ").concat(Me),X+=`
`.concat(c,"-").concat(x," ").concat(ke),le+=2):(Z+=X,X="",Se!==1&&be!==0||(Z+=`
  `.concat(Me),le++))}if(le>20&&be<_e-2)return"".concat(ae).concat(he,`
`).concat(Z,`
`).concat(u,"...").concat(x).concat(X,`
`)+"".concat(u,"...").concat(x)}return"".concat(ae).concat(oe?he:"",`
`).concat(Z).concat(X).concat(re).concat(ge)}(R,j,C)));else if(C==="notDeepStrictEqual"||C==="notStrictEqual"){var N=g[C],W=v(R).split(`
`);if(C==="notStrictEqual"&&n(R)==="object"&&R!==null&&(N=g.notStrictEqualObject),W.length>30)for(W[26]="".concat(u,"...").concat(x);W.length>27;)W.pop();E=W.length===1?T(this,i(_).call(this,"".concat(N," ").concat(W[0]))):T(this,i(_).call(this,"".concat(N,`

`).concat(W.join(`
`),`
`)))}else{var F=v(R),U="",V=g[C];C==="notDeepEqual"||C==="notEqual"?(F="".concat(g[C],`

`).concat(F)).length>1024&&(F="".concat(F.slice(0,1021),"...")):(U="".concat(v(j)),F.length>512&&(F="".concat(F.slice(0,509),"...")),U.length>512&&(U="".concat(U.slice(0,509),"...")),C==="deepEqual"||C==="equal"?F="".concat(V,`

`).concat(F,`

should equal

`):U=" ".concat(C," ").concat(U)),E=T(this,i(_).call(this,"".concat(F).concat(U)))}return Error.stackTraceLimit=D,E.generatedMessage=!P,Object.defineProperty(b(E),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),E.code="ERR_ASSERTION",E.actual=R,E.expected=j,E.operator=C,Error.captureStackTrace&&Error.captureStackTrace(b(E),O),E.stack,E.name="AssertionError",T(E)}var f,S;return function(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),E&&t(w,E)}(_,y),f=_,S=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:r.custom,value:function(w,E){return r(this,function(P){for(var C=1;C<arguments.length;C++){var O=arguments[C]!=null?arguments[C]:{},R=Object.keys(O);typeof Object.getOwnPropertySymbols=="function"&&(R=R.concat(Object.getOwnPropertySymbols(O).filter(function(j){return Object.getOwnPropertyDescriptor(O,j).enumerable}))),R.forEach(function(j){k(P,j,O[j])})}return P}({},E,{customInspect:!1,depth:0}))}}],S&&o(f.prototype,S),_}(h(Error));ee.exports=m},86832:function(ee,z,e){"use strict";function M(i){return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},M(i)}function k(i){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},k(i)}function o(i,n){return o=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},o(i,n)}var T,b,h={};function s(i,n,r){r||(r=Error);var a=function(l){function u(d,c,x){var g;return function(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}(this,u),g=function(p,v){return!v||M(v)!=="object"&&typeof v!="function"?function(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}(p):v}(this,k(u).call(this,function(p,v,m){return typeof n=="string"?n:n(p,v,m)}(d,c,x))),g.code=i,g}return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),c&&o(d,c)}(u,l),u}(r);h[i]=a}function t(i,n){if(Array.isArray(i)){var r=i.length;return i=i.map(function(a){return String(a)}),r>2?"one of ".concat(n," ").concat(i.slice(0,r-1).join(", "),", or ")+i[r-1]:r===2?"one of ".concat(n," ").concat(i[0]," or ").concat(i[1]):"of ".concat(n," ").concat(i[0])}return"of ".concat(n," ").concat(String(i))}s("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),s("ERR_INVALID_ARG_TYPE",function(i,n,r){var a,l,u,d,c;if(T===void 0&&(T=e(45408)),T(typeof i=="string","'name' must be a string"),typeof n=="string"&&(l="not ",n.substr(0,4)===l)?(a="must not be",n=n.replace(/^not /,"")):a="must be",function(g,p,v){return(v===void 0||v>g.length)&&(v=g.length),g.substring(v-9,v)===p}(i," argument"))u="The ".concat(i," ").concat(a," ").concat(t(n,"type"));else{var x=(typeof c!="number"&&(c=0),c+1>(d=i).length||d.indexOf(".",c)===-1?"argument":"property");u='The "'.concat(i,'" ').concat(x," ").concat(a," ").concat(t(n,"type"))}return u+". Received type ".concat(M(r))},TypeError),s("ERR_INVALID_ARG_VALUE",function(i,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";b===void 0&&(b=e(35840));var a=b.inspect(n);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(r,". Received ").concat(a)},TypeError,RangeError),s("ERR_INVALID_RETURN_VALUE",function(i,n,r){var a;return a=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(M(r)),"Expected ".concat(i,' to be returned from the "').concat(n,'"')+" function but got ".concat(a,".")},TypeError),s("ERR_MISSING_ARGS",function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];T===void 0&&(T=e(45408)),T(n.length>0,"At least one arg needs to be specified");var a="The ",l=n.length;switch(n=n.map(function(u){return'"'.concat(u,'"')}),l){case 1:a+="".concat(n[0]," argument");break;case 2:a+="".concat(n[0]," and ").concat(n[1]," arguments");break;default:a+=n.slice(0,l-1).join(", "),a+=", and ".concat(n[l-1]," arguments")}return"".concat(a," must be specified")},TypeError),ee.exports.codes=h},25116:function(ee,z,e){"use strict";function M($,re){return function(oe){if(Array.isArray(oe))return oe}($)||function(oe,ie){var ue=[],me=!0,be=!1,ge=void 0;try{for(var de,ve=oe[Symbol.iterator]();!(me=(de=ve.next()).done)&&(ue.push(de.value),!ie||ue.length!==ie);me=!0);}catch(pe){be=!0,ge=pe}finally{try{me||ve.return==null||ve.return()}finally{if(be)throw ge}}return ue}($,re)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k($){return k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},k($)}var o=/a/g.flags!==void 0,T=function($){var re=[];return $.forEach(function(oe){return re.push(oe)}),re},b=function($){var re=[];return $.forEach(function(oe,ie){return re.push([ie,oe])}),re},h=Object.is?Object.is:e(39896),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},t=Number.isNaN?Number.isNaN:e(1560);function i($){return $.call.bind($)}var n=i(Object.prototype.hasOwnProperty),r=i(Object.prototype.propertyIsEnumerable),a=i(Object.prototype.toString),l=e(35840).types,u=l.isAnyArrayBuffer,d=l.isArrayBufferView,c=l.isDate,x=l.isMap,g=l.isRegExp,p=l.isSet,v=l.isNativeError,m=l.isBoxedPrimitive,y=l.isNumberObject,_=l.isStringObject,f=l.isBooleanObject,S=l.isBigIntObject,w=l.isSymbolObject,E=l.isFloat32Array,P=l.isFloat64Array;function C($){if($.length===0||$.length>10)return!0;for(var re=0;re<$.length;re++){var oe=$.charCodeAt(re);if(oe<48||oe>57)return!0}return $.length===10&&$>=Math.pow(2,32)}function O($){return Object.keys($).filter(C).concat(s($).filter(Object.prototype.propertyIsEnumerable.bind($)))}function R($,re){if($===re)return 0;for(var oe=$.length,ie=re.length,ue=0,me=Math.min(oe,ie);ue<me;++ue)if($[ue]!==re[ue]){oe=$[ue],ie=re[ue];break}return oe<ie?-1:ie<oe?1:0}var j=0,D=1,N=2,W=3;function F($,re,oe,ie){if($===re)return $!==0||!oe||h($,re);if(oe){if(k($)!=="object")return typeof $=="number"&&t($)&&t(re);if(k(re)!=="object"||$===null||re===null||Object.getPrototypeOf($)!==Object.getPrototypeOf(re))return!1}else{if($===null||k($)!=="object")return(re===null||k(re)!=="object")&&$==re;if(re===null||k(re)!=="object")return!1}var ue,me,be,ge,de=a($);if(de!==a(re))return!1;if(Array.isArray($)){if($.length!==re.length)return!1;var ve=O($),pe=O(re);return ve.length===pe.length&&V($,re,oe,ie,D,ve)}if(de==="[object Object]"&&(!x($)&&x(re)||!p($)&&p(re)))return!1;if(c($)){if(!c(re)||Date.prototype.getTime.call($)!==Date.prototype.getTime.call(re))return!1}else if(g($)){if(!g(re)||(be=$,ge=re,!(o?be.source===ge.source&&be.flags===ge.flags:RegExp.prototype.toString.call(be)===RegExp.prototype.toString.call(ge))))return!1}else if(v($)||$ instanceof Error){if($.message!==re.message||$.name!==re.name)return!1}else{if(d($)){if(oe||!E($)&&!P($)){if(!function(le,ae){return le.byteLength===ae.byteLength&&R(new Uint8Array(le.buffer,le.byteOffset,le.byteLength),new Uint8Array(ae.buffer,ae.byteOffset,ae.byteLength))===0}($,re))return!1}else if(!function(le,ae){if(le.byteLength!==ae.byteLength)return!1;for(var he=0;he<le.byteLength;he++)if(le[he]!==ae[he])return!1;return!0}($,re))return!1;var _e=O($),Te=O(re);return _e.length===Te.length&&V($,re,oe,ie,j,_e)}if(p($))return!(!p(re)||$.size!==re.size)&&V($,re,oe,ie,N);if(x($))return!(!x(re)||$.size!==re.size)&&V($,re,oe,ie,W);if(u($)){if(me=re,(ue=$).byteLength!==me.byteLength||R(new Uint8Array(ue),new Uint8Array(me))!==0)return!1}else if(m($)&&!function(le,ae){return y(le)?y(ae)&&h(Number.prototype.valueOf.call(le),Number.prototype.valueOf.call(ae)):_(le)?_(ae)&&String.prototype.valueOf.call(le)===String.prototype.valueOf.call(ae):f(le)?f(ae)&&Boolean.prototype.valueOf.call(le)===Boolean.prototype.valueOf.call(ae):S(le)?S(ae)&&BigInt.prototype.valueOf.call(le)===BigInt.prototype.valueOf.call(ae):w(ae)&&Symbol.prototype.valueOf.call(le)===Symbol.prototype.valueOf.call(ae)}($,re))return!1}return V($,re,oe,ie,j)}function U($,re){return re.filter(function(oe){return r($,oe)})}function V($,re,oe,ie,ue,me){if(arguments.length===5){me=Object.keys($);var be=Object.keys(re);if(me.length!==be.length)return!1}for(var ge=0;ge<me.length;ge++)if(!n(re,me[ge]))return!1;if(oe&&arguments.length===5){var de=s($);if(de.length!==0){var ve=0;for(ge=0;ge<de.length;ge++){var pe=de[ge];if(r($,pe)){if(!r(re,pe))return!1;me.push(pe),ve++}else if(r(re,pe))return!1}var _e=s(re);if(de.length!==_e.length&&U(re,_e).length!==ve)return!1}else{var Te=s(re);if(Te.length!==0&&U(re,Te).length!==0)return!1}}if(me.length===0&&(ue===j||ue===D&&$.length===0||$.size===0))return!0;if(ie===void 0)ie={val1:new Map,val2:new Map,position:0};else{var le=ie.val1.get($);if(le!==void 0){var ae=ie.val2.get(re);if(ae!==void 0)return le===ae}ie.position++}ie.val1.set($,ie.position),ie.val2.set(re,ie.position);var he=function(Se,ke,Me,Ee,De,fe){var xe=0;if(fe===N){if(!function(Pe,Ue,Ve,Ze){for(var it=null,tt=T(Pe),dt=0;dt<tt.length;dt++){var yt=tt[dt];if(k(yt)==="object"&&yt!==null)it===null&&(it=new Set),it.add(yt);else if(!Ue.has(yt)){if(Ve||!K(Pe,Ue,yt))return!1;it===null&&(it=new Set),it.add(yt)}}if(it!==null){for(var vt=T(Ue),et=0;et<vt.length;et++){var Qe=vt[et];if(k(Qe)==="object"&&Qe!==null){if(!te(it,Qe,Ve,Ze))return!1}else if(!Ve&&!Pe.has(Qe)&&!te(it,Qe,Ve,Ze))return!1}return it.size===0}return!0}(Se,ke,Me,De))return!1}else if(fe===W){if(!function(Pe,Ue,Ve,Ze){for(var it=null,tt=b(Pe),dt=0;dt<tt.length;dt++){var yt=M(tt[dt],2),vt=yt[0],et=yt[1];if(k(vt)==="object"&&vt!==null)it===null&&(it=new Set),it.add(vt);else{var Qe=Ue.get(vt);if(Qe===void 0&&!Ue.has(vt)||!F(et,Qe,Ve,Ze)){if(Ve||!X(Pe,Ue,vt,et,Ze))return!1;it===null&&(it=new Set),it.add(vt)}}}if(it!==null){for(var wt=b(Ue),It=0;It<wt.length;It++){var Dt=M(wt[It],2),Ct=(vt=Dt[0],Dt[1]);if(k(vt)==="object"&&vt!==null){if(!Z(it,Pe,vt,Ct,Ve,Ze))return!1}else if(!(Ve||Pe.has(vt)&&F(Pe.get(vt),Ct,!1,Ze)||Z(it,Pe,vt,Ct,!1,Ze)))return!1}return it.size===0}return!0}(Se,ke,Me,De))return!1}else if(fe===D)for(;xe<Se.length;xe++){if(!n(Se,xe)){if(n(ke,xe))return!1;for(var we=Object.keys(Se);xe<we.length;xe++){var Oe=we[xe];if(!n(ke,Oe)||!F(Se[Oe],ke[Oe],Me,De))return!1}return we.length===Object.keys(ke).length}if(!n(ke,xe)||!F(Se[xe],ke[xe],Me,De))return!1}for(xe=0;xe<Ee.length;xe++){var ze=Ee[xe];if(!F(Se[ze],ke[ze],Me,De))return!1}return!0}($,re,oe,me,ie,ue);return ie.val1.delete($),ie.val2.delete(re),he}function te($,re,oe,ie){for(var ue=T($),me=0;me<ue.length;me++){var be=ue[me];if(F(re,be,oe,ie))return $.delete(be),!0}return!1}function J($){switch(k($)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":$=+$;case"number":if(t($))return!1}return!0}function K($,re,oe){var ie=J(oe);return ie!=null?ie:re.has(ie)&&!$.has(ie)}function X($,re,oe,ie,ue){var me=J(oe);if(me!=null)return me;var be=re.get(me);return!(be===void 0&&!re.has(me)||!F(ie,be,!1,ue))&&!$.has(me)&&F(ie,be,!1,ue)}function Z($,re,oe,ie,ue,me){for(var be=T($),ge=0;ge<be.length;ge++){var de=be[ge];if(F(oe,de,ue,me)&&F(ie,re.get(de),ue,me))return $.delete(de),!0}return!1}ee.exports={isDeepEqual:function($,re){return F($,re,!1)},isDeepStrictEqual:function($,re){return F($,re,!0)}}},83160:function(ee,z,e){"use strict";e.r(z),e.d(z,{decode:function(){return b},encode:function(){return T}});for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),o=0;o<64;o++)k[M.charCodeAt(o)]=o;var T=function(h){var s,t=new Uint8Array(h),i=t.length,n="";for(s=0;s<i;s+=3)n+=M[t[s]>>2],n+=M[(3&t[s])<<4|t[s+1]>>4],n+=M[(15&t[s+1])<<2|t[s+2]>>6],n+=M[63&t[s+2]];return i%3==2?n=n.substring(0,n.length-1)+"=":i%3==1&&(n=n.substring(0,n.length-2)+"=="),n},b=function(h){var s,t,i,n,r,a=.75*h.length,l=h.length,u=0;h[h.length-1]==="="&&(a--,h[h.length-2]==="="&&a--);var d=new ArrayBuffer(a),c=new Uint8Array(d);for(s=0;s<l;s+=4)t=k[h.charCodeAt(s)],i=k[h.charCodeAt(s+1)],n=k[h.charCodeAt(s+2)],r=k[h.charCodeAt(s+3)],c[u++]=t<<2|i>>4,c[u++]=(15&i)<<4|n>>2,c[u++]=(3&n)<<6|63&r;return d}},59968:function(ee,z){"use strict";z.byteLength=function(s){var t=b(s),i=t[0],n=t[1];return 3*(i+n)/4-n},z.toByteArray=function(s){var t,i,n=b(s),r=n[0],a=n[1],l=new k(function(c,x,g){return 3*(x+g)/4-g}(0,r,a)),u=0,d=a>0?r-4:r;for(i=0;i<d;i+=4)t=M[s.charCodeAt(i)]<<18|M[s.charCodeAt(i+1)]<<12|M[s.charCodeAt(i+2)]<<6|M[s.charCodeAt(i+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return a===2&&(t=M[s.charCodeAt(i)]<<2|M[s.charCodeAt(i+1)]>>4,l[u++]=255&t),a===1&&(t=M[s.charCodeAt(i)]<<10|M[s.charCodeAt(i+1)]<<4|M[s.charCodeAt(i+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},z.fromByteArray=function(s){for(var t,i=s.length,n=i%3,r=[],a=16383,l=0,u=i-n;l<u;l+=a)r.push(h(s,l,l+a>u?u:l+a));return n===1?(t=s[i-1],r.push(e[t>>2]+e[t<<4&63]+"==")):n===2&&(t=(s[i-2]<<8)+s[i-1],r.push(e[t>>10]+e[t>>4&63]+e[t<<2&63]+"=")),r.join("")};for(var e=[],M=[],k=typeof Uint8Array!="undefined"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0;T<64;++T)e[T]=o[T],M[o.charCodeAt(T)]=T;function b(s){var t=s.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=s.indexOf("=");return i===-1&&(i=t),[i,i===t?0:4-i%4]}function h(s,t,i){for(var n,r,a=[],l=t;l<i;l+=3)n=(s[l]<<16&16711680)+(s[l+1]<<8&65280)+(255&s[l+2]),a.push(e[(r=n)>>18&63]+e[r>>12&63]+e[r>>6&63]+e[63&r]);return a.join("")}M["-".charCodeAt(0)]=62,M["_".charCodeAt(0)]=63},64928:function(ee){"use strict";function z(b,h,s,t,i){for(var n=i+1;t<=i;){var r=t+i>>>1,a=b[r];(s!==void 0?s(a,h):a-h)>=0?(n=r,i=r-1):t=r+1}return n}function e(b,h,s,t,i){for(var n=i+1;t<=i;){var r=t+i>>>1,a=b[r];(s!==void 0?s(a,h):a-h)>0?(n=r,i=r-1):t=r+1}return n}function M(b,h,s,t,i){for(var n=t-1;t<=i;){var r=t+i>>>1,a=b[r];(s!==void 0?s(a,h):a-h)<0?(n=r,t=r+1):i=r-1}return n}function k(b,h,s,t,i){for(var n=t-1;t<=i;){var r=t+i>>>1,a=b[r];(s!==void 0?s(a,h):a-h)<=0?(n=r,t=r+1):i=r-1}return n}function o(b,h,s,t,i){for(;t<=i;){var n=t+i>>>1,r=b[n],a=s!==void 0?s(r,h):r-h;if(a===0)return n;a<=0?t=n+1:i=n-1}return-1}function T(b,h,s,t,i,n){return typeof s=="function"?n(b,h,s,t===void 0?0:0|t,i===void 0?b.length-1:0|i):n(b,h,void 0,s===void 0?0:0|s,t===void 0?b.length-1:0|t)}ee.exports={ge:function(b,h,s,t,i){return T(b,h,s,t,i,z)},gt:function(b,h,s,t,i){return T(b,h,s,t,i,e)},lt:function(b,h,s,t,i){return T(b,h,s,t,i,M)},le:function(b,h,s,t,i){return T(b,h,s,t,i,k)},eq:function(b,h,s,t,i){return T(b,h,s,t,i,o)}}},308:function(ee,z){"use strict";function e(k){var o=32;return(k&=-k)&&o--,65535&k&&(o-=16),16711935&k&&(o-=8),252645135&k&&(o-=4),858993459&k&&(o-=2),1431655765&k&&(o-=1),o}z.INT_BITS=32,z.INT_MAX=2147483647,z.INT_MIN=-2147483648,z.sign=function(k){return(k>0)-(k<0)},z.abs=function(k){var o=k>>31;return(k^o)-o},z.min=function(k,o){return o^(k^o)&-(k<o)},z.max=function(k,o){return k^(k^o)&-(k<o)},z.isPow2=function(k){return!(k&k-1||!k)},z.log2=function(k){var o,T;return o=(k>65535)<<4,o|=T=((k>>>=o)>255)<<3,o|=T=((k>>>=T)>15)<<2,(o|=T=((k>>>=T)>3)<<1)|(k>>>=T)>>1},z.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},z.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},z.countTrailingZeros=e,z.nextPow2=function(k){return k+=k===0,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,1+(k|=k>>>16)},z.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},z.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var M=new Array(256);(function(k){for(var o=0;o<256;++o){var T=o,b=o,h=7;for(T>>>=1;T;T>>>=1)b<<=1,b|=1&T,--h;k[o]=b<<h&255}})(M),z.reverse=function(k){return M[255&k]<<24|M[k>>>8&255]<<16|M[k>>>16&255]<<8|M[k>>>24&255]},z.interleave2=function(k,o){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o&=65535)|o<<8))|o<<4))|o<<2))|o<<1))<<1},z.deinterleave2=function(k,o){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>o&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},z.interleave3=function(k,o,T){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<1)|(T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2))<<2},z.deinterleave3=function(k,o){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>o&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},z.nextCombination=function(k){var o=k|k-1;return o+1|(~o&-~o)-1>>>e(k)+1}},29620:function(ee,z,e){"use strict";var M=e(32420);ee.exports=function(b,h){h||(h={});var s,t,i,n,r,a,l,u,d,c,x,g=h.cutoff==null?.25:h.cutoff,p=h.radius==null?8:h.radius,v=h.channel||0;if(ArrayBuffer.isView(b)||Array.isArray(b)){if(!h.width||!h.height)throw Error("For raw data width and height should be provided by options");s=h.width,t=h.height,n=b,a=h.stride?h.stride:Math.floor(b.length/s/t)}else window.HTMLCanvasElement&&b instanceof window.HTMLCanvasElement?(l=(u=b).getContext("2d"),s=u.width,t=u.height,n=(d=l.getImageData(0,0,s,t)).data,a=4):window.CanvasRenderingContext2D&&b instanceof window.CanvasRenderingContext2D?(l=b,s=(u=b.canvas).width,t=u.height,n=(d=l.getImageData(0,0,s,t)).data,a=4):window.ImageData&&b instanceof window.ImageData&&(d=b,s=b.width,t=b.height,n=d.data,a=4);if(i=Math.max(s,t),window.Uint8ClampedArray&&n instanceof window.Uint8ClampedArray||window.Uint8Array&&n instanceof window.Uint8Array)for(r=n,n=Array(s*t),c=0,x=r.length;c<x;c++)n[c]=r[c*a+v]/255;else if(a!==1)throw Error("Raw data can have only 1 value per pixel");var m=Array(s*t),y=Array(s*t),_=Array(i),f=Array(i),S=Array(i+1),w=Array(i);for(c=0,x=s*t;c<x;c++){var E=n[c];m[c]=E===1?0:E===0?k:Math.pow(Math.max(0,.5-E),2),y[c]=E===1?k:E===0?0:Math.pow(Math.max(0,E-.5),2)}o(m,s,t,_,f,w,S),o(y,s,t,_,f,w,S);var P=window.Float32Array?new Float32Array(s*t):new Array(s*t);for(c=0,x=s*t;c<x;c++)P[c]=M(1-((m[c]-y[c])/p+g),0,1);return P};var k=1e20;function o(b,h,s,t,i,n,r){for(var a=0;a<h;a++){for(var l=0;l<s;l++)t[l]=b[l*h+a];for(T(t,i,n,r,s),l=0;l<s;l++)b[l*h+a]=i[l]}for(l=0;l<s;l++){for(a=0;a<h;a++)t[a]=b[l*h+a];for(T(t,i,n,r,h),a=0;a<h;a++)b[l*h+a]=Math.sqrt(i[a])}}function T(b,h,s,t,i){s[0]=0,t[0]=-k,t[1]=+k;for(var n=1,r=0;n<i;n++){for(var a=(b[n]+n*n-(b[s[r]]+s[r]*s[r]))/(2*n-2*s[r]);a<=t[r];)r--,a=(b[n]+n*n-(b[s[r]]+s[r]*s[r]))/(2*n-2*s[r]);s[++r]=n,t[r]=a,t[r+1]=+k}for(n=0,r=0;n<i;n++){for(;t[r+1]<n;)r++;h[n]=(n-s[r])*(n-s[r])+b[s[r]]}}},99676:function(ee,z,e){"use strict";var M=e(53664),k=e(57916),o=k(M("String.prototype.indexOf"));ee.exports=function(T,b){var h=M(T,!!b);return typeof h=="function"&&o(T,".prototype.")>-1?k(h):h}},57916:function(ee,z,e){"use strict";var M=e(8844),k=e(53664),o=e(14500),T=k("%TypeError%"),b=k("%Function.prototype.apply%"),h=k("%Function.prototype.call%"),s=k("%Reflect.apply%",!0)||M.call(h,b),t=k("%Object.defineProperty%",!0),i=k("%Math.max%");if(t)try{t({},"a",{value:1})}catch(r){t=null}ee.exports=function(r){if(typeof r!="function")throw new T("a function is required");var a=s(M,h,arguments);return o(a,1+i(0,r.length-(arguments.length-1)),!0)};var n=function(){return s(M,b,arguments)};t?t(ee.exports,"apply",{value:n}):ee.exports.apply=n},32420:function(ee){ee.exports=function(z,e,M){return e<M?z<e?e:z>M?M:z:z<M?M:z>e?e:z}},3808:function(ee,z,e){"use strict";var M=e(32420);function k(o,T){T==null&&(T=!0);var b=o[0],h=o[1],s=o[2],t=o[3];return t==null&&(t=T?1:255),T&&(b*=255,h*=255,s*=255,t*=255),16777216*(b=255&M(b,0,255))+((h=255&M(h,0,255))<<16)+((s=255&M(s,0,255))<<8)+(255&M(t,0,255))}ee.exports=k,ee.exports.to=k,ee.exports.from=function(o,T){var b=(o=+o)>>>24,h=(16711680&o)>>>16,s=(65280&o)>>>8,t=255&o;return T===!1?[b,h,s,t]:[b/255,h/255,s/255,t/255]}},17592:function(ee){"use strict";ee.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(ee,z,e){"use strict";var M=e(96824),k=e(32420),o=e(72512);ee.exports=function(T,b){b!=="float"&&b||(b="array"),b==="uint"&&(b="uint8"),b==="uint_clamped"&&(b="uint8_clamped");var h=new(o(b))(4),s=b!=="uint8"&&b!=="uint8_clamped";return T.length&&typeof T!="string"||((T=M(T))[0]/=255,T[1]/=255,T[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}(T)?(h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3]!=null?T[3]:255,s&&(h[0]/=255,h[1]/=255,h[2]/=255,h[3]/=255),h):(s?(h[0]=T[0],h[1]=T[1],h[2]=T[2],h[3]=T[3]!=null?T[3]:1):(h[0]=k(Math.floor(255*T[0]),0,255),h[1]=k(Math.floor(255*T[1]),0,255),h[2]=k(Math.floor(255*T[2]),0,255),h[3]=T[3]==null?255:k(Math.floor(255*T[3]),0,255)),h)}},96824:function(ee,z,e){"use strict";var M=e(95532),k=e(53576),o=e(32420);ee.exports=function(T){var b,h=M(T);return h.space?((b=Array(3))[0]=o(h.values[0],0,255),b[1]=o(h.values[1],0,255),b[2]=o(h.values[2],0,255),h.space[0]==="h"&&(b=k.rgb(b)),b.push(o(h.alpha,0,1)),b):[]}},95532:function(ee,z,e){"use strict";var M=e(17592);ee.exports=function(o){var T,b,h=[],s=1;if(typeof o=="string")if(o=o.toLowerCase(),M[o])h=M[o].slice(),b="rgb";else if(o==="transparent")s=0,b="rgb",h=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(o)){var t=o.slice(1);s=1,(r=t.length)<=4?(h=[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)],r===4&&(s=parseInt(t[3]+t[3],16)/255)):(h=[parseInt(t[0]+t[1],16),parseInt(t[2]+t[3],16),parseInt(t[4]+t[5],16)],r===8&&(s=parseInt(t[6]+t[7],16)/255)),h[0]||(h[0]=0),h[1]||(h[1]=0),h[2]||(h[2]=0),b="rgb"}else if(T=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)){var i=T[1],n=i==="rgb";b=t=i.replace(/a$/,"");var r=t==="cmyk"?4:t==="gray"?1:3;h=T[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(a,l){if(/%$/.test(a))return l===r?parseFloat(a)/100:t==="rgb"?255*parseFloat(a)/100:parseFloat(a);if(t[l]==="h"){if(/deg$/.test(a))return parseFloat(a);if(k[a]!==void 0)return k[a]}return parseFloat(a)}),i===t&&h.push(1),s=n||h[r]===void 0?1:h[r],h=h.slice(0,r)}else o.length>10&&/[0-9](?:\s|\/)/.test(o)&&(h=o.match(/([0-9]+)/g).map(function(a){return parseFloat(a)}),b=o.match(/([a-z])/gi).join("").toLowerCase());else isNaN(o)?Array.isArray(o)||o.length?(h=[o[0],o[1],o[2]],b="rgb",s=o.length===4?o[3]:1):o instanceof Object&&(o.r!=null||o.red!=null||o.R!=null?(b="rgb",h=[o.r||o.red||o.R||0,o.g||o.green||o.G||0,o.b||o.blue||o.B||0]):(b="hsl",h=[o.h||o.hue||o.H||0,o.s||o.saturation||o.S||0,o.l||o.lightness||o.L||o.b||o.brightness]),s=o.a||o.alpha||o.opacity||1,o.opacity!=null&&(s/=100)):(b="rgb",h=[o>>>16,(65280&o)>>>8,255&o]);return{space:b,values:h,alpha:s}};var k={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},53576:function(ee,z,e){"use strict";var M=e(19336);ee.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(k){var o,T,b,h,s,t=k[0]/360,i=k[1]/100,n=k[2]/100;if(i===0)return[s=255*n,s,s];o=2*n-(T=n<.5?n*(1+i):n+i-n*i),h=[0,0,0];for(var r=0;r<3;r++)(b=t+.3333333333333333*-(r-1))<0?b++:b>1&&b--,s=6*b<1?o+6*(T-o)*b:2*b<1?T:3*b<2?o+(T-o)*(.6666666666666666-b)*6:o,h[r]=255*s;return h}},M.hsl=function(k){var o,T,b=k[0]/255,h=k[1]/255,s=k[2]/255,t=Math.min(b,h,s),i=Math.max(b,h,s),n=i-t;return i===t?o=0:b===i?o=(h-s)/n:h===i?o=2+(s-b)/n:s===i&&(o=4+(b-h)/n),(o=Math.min(60*o,360))<0&&(o+=360),T=(t+i)/2,[o,100*(i===t?0:T<=.5?n/(i+t):n/(2-i-t)),100*T]}},19336:function(ee){"use strict";ee.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(ee){ee.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(ee,z,e){"use strict";ee.exports={parse:e(46416),stringify:e(49395)}},8744:function(ee,z,e){"use strict";var M=e(30584);ee.exports={isSize:function(k){return/^[\d\.]/.test(k)||k.indexOf("/")!==-1||M.indexOf(k)!==-1}}},46416:function(ee,z,e){"use strict";var M=e(92384),k=e(68194),o=e(3748),T=e(2904),b=e(47916),h=e(7294),s=e(39956),t=e(8744).isSize;ee.exports=n;var i=n.cache={};function n(a){if(typeof a!="string")throw new Error("Font argument must be a string.");if(i[a])return i[a];if(a==="")throw new Error("Cannot parse an empty string.");if(o.indexOf(a)!==-1)return i[a]={system:a};for(var l,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=s(a,/\s+/);l=d.shift();){if(k.indexOf(l)!==-1)return["style","variant","weight","stretch"].forEach(function(x){u[x]=l}),i[a]=u;if(b.indexOf(l)===-1)if(l!=="normal"&&l!=="small-caps")if(h.indexOf(l)===-1){if(T.indexOf(l)===-1){if(t(l)){var c=s(l,"/");if(u.size=c[0],c[1]!=null?u.lineHeight=r(c[1]):d[0]==="/"&&(d.shift(),u.lineHeight=r(d.shift())),!d.length)throw new Error("Missing required font-family.");return u.family=s(d.join(" "),/\s*,\s*/).map(M),i[a]=u}throw new Error("Unknown or unsupported font token: "+l)}u.weight=l}else u.stretch=l;else u.variant=l;else u.style=l}throw new Error("Missing required font-size.")}function r(a){var l=parseFloat(a);return l.toString()===a?l:a}},49395:function(ee,z,e){"use strict";var M=e(55616),k=e(8744).isSize,o=a(e(68194)),T=a(e(3748)),b=a(e(2904)),h=a(e(47916)),s=a(e(7294)),t={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},n="serif";function r(l,u){if(l&&!u[l]&&!o[l])throw Error("Unknown keyword `"+l+"`");return l}function a(l){for(var u={},d=0;d<l.length;d++)u[l[d]]=1;return u}ee.exports=function(l){if((l=M(l,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return l.system&&r(l.system,T),l.system;if(r(l.style,h),r(l.variant,t),r(l.weight,b),r(l.stretch,s),l.size==null&&(l.size="1rem"),typeof l.size=="number"&&(l.size+="px"),!k)throw Error("Bad size value `"+l.size+"`");l.family||(l.family=n),Array.isArray(l.family)&&(l.family.length||(l.family=[n]),l.family=l.family.map(function(d){return i[d]?d:'"'+d+'"'}).join(", "));var u=[];return u.push(l.style),l.variant!==l.style&&u.push(l.variant),l.weight!==l.variant&&l.weight!==l.style&&u.push(l.weight),l.stretch!==l.weight&&l.stretch!==l.variant&&l.stretch!==l.style&&u.push(l.stretch),u.push(l.size+(l.lineHeight==null||l.lineHeight==="normal"||l.lineHeight+""=="1"?"":"/"+l.lineHeight)),u.push(l.family),u.filter(Boolean).join(" ")}},27940:function(ee,z,e){"use strict";var M,k=e(81680),o=e(18496),T=e(87396),b=e(95920),h=e(50868),s=e(84323),t=Function.prototype.bind,i=Object.defineProperty,n=Object.prototype.hasOwnProperty;M=function(r,a,l){var u,d=o(a)&&T(a.value);return delete(u=b(a)).writable,delete u.value,u.get=function(){return!l.overwriteDefinition&&n.call(this,r)?d:(a.value=t.call(d,l.resolveContext?l.resolveContext(this):this),i(this,r,a),this[r])},u},ee.exports=function(r){var a=h(arguments[1]);return k(a.resolveContext)&&T(a.resolveContext),s(r,function(l,u){return M(u,l,a)})}},21092:function(ee,z,e){"use strict";var M=e(81680),k=e(85488),o=e(38452),T=e(50868),b=e(71056),h=ee.exports=function(s,t){var i,n,r,a,l;return arguments.length<2||typeof s!="string"?(a=t,t=s,s=null):a=arguments[2],M(s)?(i=b.call(s,"c"),n=b.call(s,"e"),r=b.call(s,"w")):(i=r=!0,n=!1),l={value:t,configurable:i,enumerable:n,writable:r},a?o(T(a),l):l};h.gs=function(s,t,i){var n,r,a,l;return typeof s!="string"?(a=i,i=t,t=s,s=null):a=arguments[3],M(t)?k(t)?M(i)?k(i)||(a=i,i=void 0):i=void 0:(a=t,t=i=void 0):t=void 0,M(s)?(n=b.call(s,"c"),r=b.call(s,"e")):(n=!0,r=!1),l={get:t,set:i,configurable:n,enumerable:r},a?o(T(a),l):l}},84706:function(ee,z,e){"use strict";function M(a,l){return a<l?-1:a>l?1:a>=l?0:NaN}e.d(z,{XE:function(){return M},kv:function(){return b},mo:function(){return s},Uf:function(){return t},SY:function(){return i},ik:function(){return n},oh:function(){return r}}),(k=M).length===1&&(o=k,k=function(a,l){return M(o(a),l)});var k,o,T=Array.prototype;function b(a,l){var u,d,c=a.length,x=-1;if(l==null){for(;++x<c;)if((u=a[x])!=null&&u>=u)for(d=u;++x<c;)(u=a[x])!=null&&u>d&&(d=u)}else for(;++x<c;)if((u=l(a[x],x,a))!=null&&u>=u)for(d=u;++x<c;)(u=l(a[x],x,a))!=null&&u>d&&(d=u);return d}function h(a){return a===null?NaN:+a}function s(a,l){var u,d=a.length,c=d,x=-1,g=0;if(l==null)for(;++x<d;)isNaN(u=h(a[x]))?--c:g+=u;else for(;++x<d;)isNaN(u=h(l(a[x],x,a)))?--c:g+=u;if(c)return g/c}function t(a){for(var l,u,d,c=a.length,x=-1,g=0;++x<c;)g+=a[x].length;for(u=new Array(g);--c>=0;)for(l=(d=a[c]).length;--l>=0;)u[--g]=d[l];return u}function i(a,l){var u,d,c=a.length,x=-1;if(l==null){for(;++x<c;)if((u=a[x])!=null&&u>=u)for(d=u;++x<c;)(u=a[x])!=null&&d>u&&(d=u)}else for(;++x<c;)if((u=l(a[x],x,a))!=null&&u>=u)for(d=u;++x<c;)(u=l(a[x],x,a))!=null&&d>u&&(d=u);return d}function n(a,l,u){a=+a,l=+l,u=(c=arguments.length)<2?(l=a,a=0,1):c<3?1:+u;for(var d=-1,c=0|Math.max(0,Math.ceil((l-a)/u)),x=new Array(c);++d<c;)x[d]=a+d*u;return x}function r(a,l){var u,d=a.length,c=-1,x=0;if(l==null)for(;++c<d;)(u=+a[c])&&(x+=u);else for(;++c<d;)(u=+l(a[c],c,a))&&(x+=u);return x}T.slice,T.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},34712:function(ee,z,e){"use strict";e.d(z,{kH:function(){return T},UJ:function(){return b}});var M="$";function k(){}function o(a,l){var u=new k;if(a instanceof k)a.each(function(p,v){u.set(v,p)});else if(Array.isArray(a)){var d,c=-1,x=a.length;if(l==null)for(;++c<x;)u.set(c,a[c]);else for(;++c<x;)u.set(l(d=a[c],c,a),d)}else if(a)for(var g in a)u.set(g,a[g]);return u}k.prototype=o.prototype={constructor:k,has:function(a){return M+a in this},get:function(a){return this[M+a]},set:function(a,l){return this[M+a]=l,this},remove:function(a){var l=M+a;return l in this&&delete this[l]},clear:function(){for(var a in this)a[0]===M&&delete this[a]},keys:function(){var a=[];for(var l in this)l[0]===M&&a.push(l.slice(1));return a},values:function(){var a=[];for(var l in this)l[0]===M&&a.push(this[l]);return a},entries:function(){var a=[];for(var l in this)l[0]===M&&a.push({key:l.slice(1),value:this[l]});return a},size:function(){var a=0;for(var l in this)l[0]===M&&++a;return a},empty:function(){for(var a in this)if(a[0]===M)return!1;return!0},each:function(a){for(var l in this)l[0]===M&&a(this[l],l.slice(1),this)}};var T=o;function b(){var a,l,u,d=[],c=[];function x(p,v,m,y){if(v>=d.length)return a!=null&&p.sort(a),l!=null?l(p):p;for(var _,f,S,w=-1,E=p.length,P=d[v++],C=T(),O=m();++w<E;)(S=C.get(_=P(f=p[w])+""))?S.push(f):C.set(_,[f]);return C.each(function(R,j){y(O,j,x(R,v,m,y))}),O}function g(p,v){if(++v>d.length)return p;var m,y=c[v-1];return l!=null&&v>=d.length?m=p.entries():(m=[],p.each(function(_,f){m.push({key:f,values:g(_,v)})})),y!=null?m.sort(function(_,f){return y(_.key,f.key)}):m}return u={object:function(p){return x(p,0,h,s)},map:function(p){return x(p,0,t,i)},entries:function(p){return g(x(p,0,t,i),0)},key:function(p){return d.push(p),u},sortKeys:function(p){return c[d.length-1]=p,u},sortValues:function(p){return a=p,u},rollup:function(p){return l=p,u}}}function h(){return{}}function s(a,l,u){a[l]=u}function t(){return T()}function i(a,l,u){a.set(l,u)}function n(){}var r=T.prototype;n.prototype=function(a,l){var u=new n;if(a instanceof n)a.each(function(x){u.add(x)});else if(a){var d=-1,c=a.length;if(l==null)for(;++d<c;)u.add(a[d]);else for(;++d<c;)u.add(l(a[d],d,a))}return u}.prototype={constructor:n,has:r.has,add:function(a){return this[M+(a+="")]=a,this},remove:r.remove,clear:r.clear,values:r.keys,size:r.size,empty:r.empty,each:r.each}},49812:function(ee,z,e){"use strict";function M(de,ve){var pe;function _e(){var Te,le,ae=pe.length,he=0,Se=0;for(Te=0;Te<ae;++Te)he+=(le=pe[Te]).x,Se+=le.y;for(he=he/ae-de,Se=Se/ae-ve,Te=0;Te<ae;++Te)(le=pe[Te]).x-=he,le.y-=Se}return de==null&&(de=0),ve==null&&(ve=0),_e.initialize=function(Te){pe=Te},_e.x=function(Te){return arguments.length?(de=+Te,_e):de},_e.y=function(Te){return arguments.length?(ve=+Te,_e):ve},_e}function k(de){return function(){return de}}function o(){return 1e-6*(Math.random()-.5)}function T(de,ve,pe,_e){if(isNaN(ve)||isNaN(pe))return de;var Te,le,ae,he,Se,ke,Me,Ee,De,fe=de._root,xe={data:_e},we=de._x0,Oe=de._y0,ze=de._x1,Pe=de._y1;if(!fe)return de._root=xe,de;for(;fe.length;)if((ke=ve>=(le=(we+ze)/2))?we=le:ze=le,(Me=pe>=(ae=(Oe+Pe)/2))?Oe=ae:Pe=ae,Te=fe,!(fe=fe[Ee=Me<<1|ke]))return Te[Ee]=xe,de;if(he=+de._x.call(null,fe.data),Se=+de._y.call(null,fe.data),ve===he&&pe===Se)return xe.next=fe,Te?Te[Ee]=xe:de._root=xe,de;do Te=Te?Te[Ee]=new Array(4):de._root=new Array(4),(ke=ve>=(le=(we+ze)/2))?we=le:ze=le,(Me=pe>=(ae=(Oe+Pe)/2))?Oe=ae:Pe=ae;while((Ee=Me<<1|ke)==(De=(Se>=ae)<<1|he>=le));return Te[De]=fe,Te[Ee]=xe,de}function b(de,ve,pe,_e,Te){this.node=de,this.x0=ve,this.y0=pe,this.x1=_e,this.y1=Te}function h(de){return de[0]}function s(de){return de[1]}function t(de,ve,pe){var _e=new i(ve==null?h:ve,pe==null?s:pe,NaN,NaN,NaN,NaN);return de==null?_e:_e.addAll(de)}function i(de,ve,pe,_e,Te,le){this._x=de,this._y=ve,this._x0=pe,this._y0=_e,this._x1=Te,this._y1=le,this._root=void 0}function n(de){for(var ve={data:de.data},pe=ve;de=de.next;)pe=pe.next={data:de.data};return ve}e.r(z),e.d(z,{forceCenter:function(){return M},forceCollide:function(){return u},forceLink:function(){return g},forceManyBody:function(){return ue},forceRadial:function(){return me},forceSimulation:function(){return ie},forceX:function(){return be},forceY:function(){return ge}});var r=t.prototype=i.prototype;function a(de){return de.x+de.vx}function l(de){return de.y+de.vy}function u(de){var ve,pe,_e=1,Te=1;function le(){for(var Se,ke,Me,Ee,De,fe,xe,we=ve.length,Oe=0;Oe<Te;++Oe)for(ke=t(ve,a,l).visitAfter(ae),Se=0;Se<we;++Se)Me=ve[Se],fe=pe[Me.index],xe=fe*fe,Ee=Me.x+Me.vx,De=Me.y+Me.vy,ke.visit(ze);function ze(Pe,Ue,Ve,Ze,it){var tt=Pe.data,dt=Pe.r,yt=fe+dt;if(!tt)return Ue>Ee+yt||Ze<Ee-yt||Ve>De+yt||it<De-yt;if(tt.index>Me.index){var vt=Ee-tt.x-tt.vx,et=De-tt.y-tt.vy,Qe=vt*vt+et*et;Qe<yt*yt&&(vt===0&&(Qe+=(vt=o())*vt),et===0&&(Qe+=(et=o())*et),Qe=(yt-(Qe=Math.sqrt(Qe)))/Qe*_e,Me.vx+=(vt*=Qe)*(yt=(dt*=dt)/(xe+dt)),Me.vy+=(et*=Qe)*yt,tt.vx-=vt*(yt=1-yt),tt.vy-=et*yt)}}}function ae(Se){if(Se.data)return Se.r=pe[Se.data.index];for(var ke=Se.r=0;ke<4;++ke)Se[ke]&&Se[ke].r>Se.r&&(Se.r=Se[ke].r)}function he(){if(ve){var Se,ke,Me=ve.length;for(pe=new Array(Me),Se=0;Se<Me;++Se)ke=ve[Se],pe[ke.index]=+de(ke,Se,ve)}}return typeof de!="function"&&(de=k(de==null?1:+de)),le.initialize=function(Se){ve=Se,he()},le.iterations=function(Se){return arguments.length?(Te=+Se,le):Te},le.strength=function(Se){return arguments.length?(_e=+Se,le):_e},le.radius=function(Se){return arguments.length?(de=typeof Se=="function"?Se:k(+Se),he(),le):de},le}r.copy=function(){var de,ve,pe=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),_e=this._root;if(!_e)return pe;if(!_e.length)return pe._root=n(_e),pe;for(de=[{source:_e,target:pe._root=new Array(4)}];_e=de.pop();)for(var Te=0;Te<4;++Te)(ve=_e.source[Te])&&(ve.length?de.push({source:ve,target:_e.target[Te]=new Array(4)}):_e.target[Te]=n(ve));return pe},r.add=function(de){var ve=+this._x.call(null,de),pe=+this._y.call(null,de);return T(this.cover(ve,pe),ve,pe,de)},r.addAll=function(de){var ve,pe,_e,Te,le=de.length,ae=new Array(le),he=new Array(le),Se=1/0,ke=1/0,Me=-1/0,Ee=-1/0;for(pe=0;pe<le;++pe)isNaN(_e=+this._x.call(null,ve=de[pe]))||isNaN(Te=+this._y.call(null,ve))||(ae[pe]=_e,he[pe]=Te,_e<Se&&(Se=_e),_e>Me&&(Me=_e),Te<ke&&(ke=Te),Te>Ee&&(Ee=Te));if(Se>Me||ke>Ee)return this;for(this.cover(Se,ke).cover(Me,Ee),pe=0;pe<le;++pe)T(this,ae[pe],he[pe],de[pe]);return this},r.cover=function(de,ve){if(isNaN(de=+de)||isNaN(ve=+ve))return this;var pe=this._x0,_e=this._y0,Te=this._x1,le=this._y1;if(isNaN(pe))Te=(pe=Math.floor(de))+1,le=(_e=Math.floor(ve))+1;else{for(var ae,he,Se=Te-pe,ke=this._root;pe>de||de>=Te||_e>ve||ve>=le;)switch(he=(ve<_e)<<1|de<pe,(ae=new Array(4))[he]=ke,ke=ae,Se*=2,he){case 0:Te=pe+Se,le=_e+Se;break;case 1:pe=Te-Se,le=_e+Se;break;case 2:Te=pe+Se,_e=le-Se;break;case 3:pe=Te-Se,_e=le-Se}this._root&&this._root.length&&(this._root=ke)}return this._x0=pe,this._y0=_e,this._x1=Te,this._y1=le,this},r.data=function(){var de=[];return this.visit(function(ve){if(!ve.length)do de.push(ve.data);while(ve=ve.next)}),de},r.extent=function(de){return arguments.length?this.cover(+de[0][0],+de[0][1]).cover(+de[1][0],+de[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},r.find=function(de,ve,pe){var _e,Te,le,ae,he,Se,ke,Me=this._x0,Ee=this._y0,De=this._x1,fe=this._y1,xe=[],we=this._root;for(we&&xe.push(new b(we,Me,Ee,De,fe)),pe==null?pe=1/0:(Me=de-pe,Ee=ve-pe,De=de+pe,fe=ve+pe,pe*=pe);Se=xe.pop();)if(!(!(we=Se.node)||(Te=Se.x0)>De||(le=Se.y0)>fe||(ae=Se.x1)<Me||(he=Se.y1)<Ee))if(we.length){var Oe=(Te+ae)/2,ze=(le+he)/2;xe.push(new b(we[3],Oe,ze,ae,he),new b(we[2],Te,ze,Oe,he),new b(we[1],Oe,le,ae,ze),new b(we[0],Te,le,Oe,ze)),(ke=(ve>=ze)<<1|de>=Oe)&&(Se=xe[xe.length-1],xe[xe.length-1]=xe[xe.length-1-ke],xe[xe.length-1-ke]=Se)}else{var Pe=de-+this._x.call(null,we.data),Ue=ve-+this._y.call(null,we.data),Ve=Pe*Pe+Ue*Ue;if(Ve<pe){var Ze=Math.sqrt(pe=Ve);Me=de-Ze,Ee=ve-Ze,De=de+Ze,fe=ve+Ze,_e=we.data}}return _e},r.remove=function(de){if(isNaN(le=+this._x.call(null,de))||isNaN(ae=+this._y.call(null,de)))return this;var ve,pe,_e,Te,le,ae,he,Se,ke,Me,Ee,De,fe=this._root,xe=this._x0,we=this._y0,Oe=this._x1,ze=this._y1;if(!fe)return this;if(fe.length)for(;;){if((ke=le>=(he=(xe+Oe)/2))?xe=he:Oe=he,(Me=ae>=(Se=(we+ze)/2))?we=Se:ze=Se,ve=fe,!(fe=fe[Ee=Me<<1|ke]))return this;if(!fe.length)break;(ve[Ee+1&3]||ve[Ee+2&3]||ve[Ee+3&3])&&(pe=ve,De=Ee)}for(;fe.data!==de;)if(_e=fe,!(fe=fe.next))return this;return(Te=fe.next)&&delete fe.next,_e?(Te?_e.next=Te:delete _e.next,this):ve?(Te?ve[Ee]=Te:delete ve[Ee],(fe=ve[0]||ve[1]||ve[2]||ve[3])&&fe===(ve[3]||ve[2]||ve[1]||ve[0])&&!fe.length&&(pe?pe[De]=fe:this._root=fe),this):(this._root=Te,this)},r.removeAll=function(de){for(var ve=0,pe=de.length;ve<pe;++ve)this.remove(de[ve]);return this},r.root=function(){return this._root},r.size=function(){var de=0;return this.visit(function(ve){if(!ve.length)do++de;while(ve=ve.next)}),de},r.visit=function(de){var ve,pe,_e,Te,le,ae,he=[],Se=this._root;for(Se&&he.push(new b(Se,this._x0,this._y0,this._x1,this._y1));ve=he.pop();)if(!de(Se=ve.node,_e=ve.x0,Te=ve.y0,le=ve.x1,ae=ve.y1)&&Se.length){var ke=(_e+le)/2,Me=(Te+ae)/2;(pe=Se[3])&&he.push(new b(pe,ke,Me,le,ae)),(pe=Se[2])&&he.push(new b(pe,_e,Me,ke,ae)),(pe=Se[1])&&he.push(new b(pe,ke,Te,le,Me)),(pe=Se[0])&&he.push(new b(pe,_e,Te,ke,Me))}return this},r.visitAfter=function(de){var ve,pe=[],_e=[];for(this._root&&pe.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));ve=pe.pop();){var Te=ve.node;if(Te.length){var le,ae=ve.x0,he=ve.y0,Se=ve.x1,ke=ve.y1,Me=(ae+Se)/2,Ee=(he+ke)/2;(le=Te[0])&&pe.push(new b(le,ae,he,Me,Ee)),(le=Te[1])&&pe.push(new b(le,Me,he,Se,Ee)),(le=Te[2])&&pe.push(new b(le,ae,Ee,Me,ke)),(le=Te[3])&&pe.push(new b(le,Me,Ee,Se,ke))}_e.push(ve)}for(;ve=_e.pop();)de(ve.node,ve.x0,ve.y0,ve.x1,ve.y1);return this},r.x=function(de){return arguments.length?(this._x=de,this):this._x},r.y=function(de){return arguments.length?(this._y=de,this):this._y};var d=e(34712);function c(de){return de.index}function x(de,ve){var pe=de.get(ve);if(!pe)throw new Error("missing: "+ve);return pe}function g(de){var ve,pe,_e,Te,le,ae=c,he=function(xe){return 1/Math.min(Te[xe.source.index],Te[xe.target.index])},Se=k(30),ke=1;function Me(xe){for(var we=0,Oe=de.length;we<ke;++we)for(var ze,Pe,Ue,Ve,Ze,it,tt,dt=0;dt<Oe;++dt)Pe=(ze=de[dt]).source,Ve=(Ue=ze.target).x+Ue.vx-Pe.x-Pe.vx||o(),Ze=Ue.y+Ue.vy-Pe.y-Pe.vy||o(),Ve*=it=((it=Math.sqrt(Ve*Ve+Ze*Ze))-pe[dt])/it*xe*ve[dt],Ze*=it,Ue.vx-=Ve*(tt=le[dt]),Ue.vy-=Ze*tt,Pe.vx+=Ve*(tt=1-tt),Pe.vy+=Ze*tt}function Ee(){if(_e){var xe,we,Oe=_e.length,ze=de.length,Pe=(0,d.kH)(_e,ae);for(xe=0,Te=new Array(Oe);xe<ze;++xe)(we=de[xe]).index=xe,typeof we.source!="object"&&(we.source=x(Pe,we.source)),typeof we.target!="object"&&(we.target=x(Pe,we.target)),Te[we.source.index]=(Te[we.source.index]||0)+1,Te[we.target.index]=(Te[we.target.index]||0)+1;for(xe=0,le=new Array(ze);xe<ze;++xe)we=de[xe],le[xe]=Te[we.source.index]/(Te[we.source.index]+Te[we.target.index]);ve=new Array(ze),De(),pe=new Array(ze),fe()}}function De(){if(_e)for(var xe=0,we=de.length;xe<we;++xe)ve[xe]=+he(de[xe],xe,de)}function fe(){if(_e)for(var xe=0,we=de.length;xe<we;++xe)pe[xe]=+Se(de[xe],xe,de)}return de==null&&(de=[]),Me.initialize=function(xe){_e=xe,Ee()},Me.links=function(xe){return arguments.length?(de=xe,Ee(),Me):de},Me.id=function(xe){return arguments.length?(ae=xe,Me):ae},Me.iterations=function(xe){return arguments.length?(ke=+xe,Me):ke},Me.strength=function(xe){return arguments.length?(he=typeof xe=="function"?xe:k(+xe),De(),Me):he},Me.distance=function(xe){return arguments.length?(Se=typeof xe=="function"?xe:k(+xe),fe(),Me):Se},Me}var p={value:function(){}};function v(){for(var de,ve=0,pe=arguments.length,_e={};ve<pe;++ve){if(!(de=arguments[ve]+"")||de in _e||/[\s.]/.test(de))throw new Error("illegal type: "+de);_e[de]=[]}return new m(_e)}function m(de){this._=de}function y(de,ve){for(var pe,_e=0,Te=de.length;_e<Te;++_e)if((pe=de[_e]).name===ve)return pe.value}function _(de,ve,pe){for(var _e=0,Te=de.length;_e<Te;++_e)if(de[_e].name===ve){de[_e]=p,de=de.slice(0,_e).concat(de.slice(_e+1));break}return pe!=null&&de.push({name:ve,value:pe}),de}m.prototype=v.prototype={constructor:m,on:function(de,ve){var pe,_e,Te=this._,le=(_e=Te,(de+"").trim().split(/^|\s+/).map(function(Se){var ke="",Me=Se.indexOf(".");if(Me>=0&&(ke=Se.slice(Me+1),Se=Se.slice(0,Me)),Se&&!_e.hasOwnProperty(Se))throw new Error("unknown type: "+Se);return{type:Se,name:ke}})),ae=-1,he=le.length;if(!(arguments.length<2)){if(ve!=null&&typeof ve!="function")throw new Error("invalid callback: "+ve);for(;++ae<he;)if(pe=(de=le[ae]).type)Te[pe]=_(Te[pe],de.name,ve);else if(ve==null)for(pe in Te)Te[pe]=_(Te[pe],de.name,null);return this}for(;++ae<he;)if((pe=(de=le[ae]).type)&&(pe=y(Te[pe],de.name)))return pe},copy:function(){var de={},ve=this._;for(var pe in ve)de[pe]=ve[pe].slice();return new m(de)},call:function(de,ve){if((pe=arguments.length-2)>0)for(var pe,_e,Te=new Array(pe),le=0;le<pe;++le)Te[le]=arguments[le+2];if(!this._.hasOwnProperty(de))throw new Error("unknown type: "+de);for(le=0,pe=(_e=this._[de]).length;le<pe;++le)_e[le].value.apply(ve,Te)},apply:function(de,ve,pe){if(!this._.hasOwnProperty(de))throw new Error("unknown type: "+de);for(var _e=this._[de],Te=0,le=_e.length;Te<le;++Te)_e[Te].value.apply(ve,pe)}};var f,S,w=v,E=0,P=0,C=0,O=1e3,R=0,j=0,D=0,N=typeof performance=="object"&&performance.now?performance:Date,W=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(de){setTimeout(de,17)};function F(){return j||(W(U),j=N.now()+D)}function U(){j=0}function V(){this._call=this._time=this._next=null}function te(de,ve,pe){var _e=new V;return _e.restart(de,ve,pe),_e}function J(){j=(R=N.now())+D,E=P=0;try{(function(){F(),++E;for(var de,ve=f;ve;)(de=j-ve._time)>=0&&ve._call.call(null,de),ve=ve._next;--E})()}finally{E=0,function(){for(var de,ve,pe=f,_e=1/0;pe;)pe._call?(_e>pe._time&&(_e=pe._time),de=pe,pe=pe._next):(ve=pe._next,pe._next=null,pe=de?de._next=ve:f=ve);S=de,X(_e)}(),j=0}}function K(){var de=N.now(),ve=de-R;ve>O&&(D-=ve,R=de)}function X(de){E||(P&&(P=clearTimeout(P)),de-j>24?(de<1/0&&(P=setTimeout(J,de-N.now()-D)),C&&(C=clearInterval(C))):(C||(R=N.now(),C=setInterval(K,O)),E=1,W(J)))}function Z(de){return de.x}function $(de){return de.y}V.prototype=te.prototype={constructor:V,restart:function(de,ve,pe){if(typeof de!="function")throw new TypeError("callback is not a function");pe=(pe==null?F():+pe)+(ve==null?0:+ve),this._next||S===this||(S?S._next=this:f=this,S=this),this._call=de,this._time=pe,X()},stop:function(){this._call&&(this._call=null,this._time=1/0,X())}};var re=10,oe=Math.PI*(3-Math.sqrt(5));function ie(de){var ve,pe=1,_e=.001,Te=1-Math.pow(_e,1/300),le=0,ae=.6,he=(0,d.kH)(),Se=te(Me),ke=w("tick","end");function Me(){Ee(),ke.call("tick",ve),pe<_e&&(Se.stop(),ke.call("end",ve))}function Ee(xe){var we,Oe,ze=de.length;xe===void 0&&(xe=1);for(var Pe=0;Pe<xe;++Pe)for(pe+=(le-pe)*Te,he.each(function(Ue){Ue(pe)}),we=0;we<ze;++we)(Oe=de[we]).fx==null?Oe.x+=Oe.vx*=ae:(Oe.x=Oe.fx,Oe.vx=0),Oe.fy==null?Oe.y+=Oe.vy*=ae:(Oe.y=Oe.fy,Oe.vy=0);return ve}function De(){for(var xe,we=0,Oe=de.length;we<Oe;++we){if((xe=de[we]).index=we,xe.fx!=null&&(xe.x=xe.fx),xe.fy!=null&&(xe.y=xe.fy),isNaN(xe.x)||isNaN(xe.y)){var ze=re*Math.sqrt(we),Pe=we*oe;xe.x=ze*Math.cos(Pe),xe.y=ze*Math.sin(Pe)}(isNaN(xe.vx)||isNaN(xe.vy))&&(xe.vx=xe.vy=0)}}function fe(xe){return xe.initialize&&xe.initialize(de),xe}return de==null&&(de=[]),De(),ve={tick:Ee,restart:function(){return Se.restart(Me),ve},stop:function(){return Se.stop(),ve},nodes:function(xe){return arguments.length?(de=xe,De(),he.each(fe),ve):de},alpha:function(xe){return arguments.length?(pe=+xe,ve):pe},alphaMin:function(xe){return arguments.length?(_e=+xe,ve):_e},alphaDecay:function(xe){return arguments.length?(Te=+xe,ve):+Te},alphaTarget:function(xe){return arguments.length?(le=+xe,ve):le},velocityDecay:function(xe){return arguments.length?(ae=1-xe,ve):1-ae},force:function(xe,we){return arguments.length>1?(we==null?he.remove(xe):he.set(xe,fe(we)),ve):he.get(xe)},find:function(xe,we,Oe){var ze,Pe,Ue,Ve,Ze,it=0,tt=de.length;for(Oe==null?Oe=1/0:Oe*=Oe,it=0;it<tt;++it)(Ue=(ze=xe-(Ve=de[it]).x)*ze+(Pe=we-Ve.y)*Pe)<Oe&&(Ze=Ve,Oe=Ue);return Ze},on:function(xe,we){return arguments.length>1?(ke.on(xe,we),ve):ke.on(xe)}}}function ue(){var de,ve,pe,_e,Te=k(-30),le=1,ae=1/0,he=.81;function Se(De){var fe,xe=de.length,we=t(de,Z,$).visitAfter(Me);for(pe=De,fe=0;fe<xe;++fe)ve=de[fe],we.visit(Ee)}function ke(){if(de){var De,fe,xe=de.length;for(_e=new Array(xe),De=0;De<xe;++De)fe=de[De],_e[fe.index]=+Te(fe,De,de)}}function Me(De){var fe,xe,we,Oe,ze,Pe=0,Ue=0;if(De.length){for(we=Oe=ze=0;ze<4;++ze)(fe=De[ze])&&(xe=Math.abs(fe.value))&&(Pe+=fe.value,Ue+=xe,we+=xe*fe.x,Oe+=xe*fe.y);De.x=we/Ue,De.y=Oe/Ue}else{(fe=De).x=fe.data.x,fe.y=fe.data.y;do Pe+=_e[fe.data.index];while(fe=fe.next)}De.value=Pe}function Ee(De,fe,xe,we){if(!De.value)return!0;var Oe=De.x-ve.x,ze=De.y-ve.y,Pe=we-fe,Ue=Oe*Oe+ze*ze;if(Pe*Pe/he<Ue)return Ue<ae&&(Oe===0&&(Ue+=(Oe=o())*Oe),ze===0&&(Ue+=(ze=o())*ze),Ue<le&&(Ue=Math.sqrt(le*Ue)),ve.vx+=Oe*De.value*pe/Ue,ve.vy+=ze*De.value*pe/Ue),!0;if(!(De.length||Ue>=ae)){(De.data!==ve||De.next)&&(Oe===0&&(Ue+=(Oe=o())*Oe),ze===0&&(Ue+=(ze=o())*ze),Ue<le&&(Ue=Math.sqrt(le*Ue)));do De.data!==ve&&(Pe=_e[De.data.index]*pe/Ue,ve.vx+=Oe*Pe,ve.vy+=ze*Pe);while(De=De.next)}}return Se.initialize=function(De){de=De,ke()},Se.strength=function(De){return arguments.length?(Te=typeof De=="function"?De:k(+De),ke(),Se):Te},Se.distanceMin=function(De){return arguments.length?(le=De*De,Se):Math.sqrt(le)},Se.distanceMax=function(De){return arguments.length?(ae=De*De,Se):Math.sqrt(ae)},Se.theta=function(De){return arguments.length?(he=De*De,Se):Math.sqrt(he)},Se}function me(de,ve,pe){var _e,Te,le,ae=k(.1);function he(ke){for(var Me=0,Ee=_e.length;Me<Ee;++Me){var De=_e[Me],fe=De.x-ve||1e-6,xe=De.y-pe||1e-6,we=Math.sqrt(fe*fe+xe*xe),Oe=(le[Me]-we)*Te[Me]*ke/we;De.vx+=fe*Oe,De.vy+=xe*Oe}}function Se(){if(_e){var ke,Me=_e.length;for(Te=new Array(Me),le=new Array(Me),ke=0;ke<Me;++ke)le[ke]=+de(_e[ke],ke,_e),Te[ke]=isNaN(le[ke])?0:+ae(_e[ke],ke,_e)}}return typeof de!="function"&&(de=k(+de)),ve==null&&(ve=0),pe==null&&(pe=0),he.initialize=function(ke){_e=ke,Se()},he.strength=function(ke){return arguments.length?(ae=typeof ke=="function"?ke:k(+ke),Se(),he):ae},he.radius=function(ke){return arguments.length?(de=typeof ke=="function"?ke:k(+ke),Se(),he):de},he.x=function(ke){return arguments.length?(ve=+ke,he):ve},he.y=function(ke){return arguments.length?(pe=+ke,he):pe},he}function be(de){var ve,pe,_e,Te=k(.1);function le(he){for(var Se,ke=0,Me=ve.length;ke<Me;++ke)(Se=ve[ke]).vx+=(_e[ke]-Se.x)*pe[ke]*he}function ae(){if(ve){var he,Se=ve.length;for(pe=new Array(Se),_e=new Array(Se),he=0;he<Se;++he)pe[he]=isNaN(_e[he]=+de(ve[he],he,ve))?0:+Te(ve[he],he,ve)}}return typeof de!="function"&&(de=k(de==null?0:+de)),le.initialize=function(he){ve=he,ae()},le.strength=function(he){return arguments.length?(Te=typeof he=="function"?he:k(+he),ae(),le):Te},le.x=function(he){return arguments.length?(de=typeof he=="function"?he:k(+he),ae(),le):de},le}function ge(de){var ve,pe,_e,Te=k(.1);function le(he){for(var Se,ke=0,Me=ve.length;ke<Me;++ke)(Se=ve[ke]).vy+=(_e[ke]-Se.y)*pe[ke]*he}function ae(){if(ve){var he,Se=ve.length;for(pe=new Array(Se),_e=new Array(Se),he=0;he<Se;++he)pe[he]=isNaN(_e[he]=+de(ve[he],he,ve))?0:+Te(ve[he],he,ve)}}return typeof de!="function"&&(de=k(de==null?0:+de)),le.initialize=function(he){ve=he,ae()},le.strength=function(he){return arguments.length?(Te=typeof he=="function"?he:k(+he),ae(),le):Te},le.y=function(he){return arguments.length?(de=typeof he=="function"?he:k(+he),ae(),le):de},le}},57624:function(ee,z,e){"use strict";function M(u,d){if((c=(u=d?u.toExponential(d-1):u.toExponential()).indexOf("e"))<0)return null;var c,x=u.slice(0,c);return[x.length>1?x[0]+x.slice(2):x,+u.slice(c+1)]}e.d(z,{E9:function(){return n},SO:function(){return l}});var k,o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T(u){if(!(d=o.exec(u)))throw new Error("invalid format: "+u);var d;return new b({fill:d[1],align:d[2],sign:d[3],symbol:d[4],zero:d[5],width:d[6],comma:d[7],precision:d[8]&&d[8].slice(1),trim:d[9],type:d[10]})}function b(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}function h(u,d){var c=M(u,d);if(!c)return u+"";var x=c[0],g=c[1];return g<0?"0."+new Array(-g).join("0")+x:x.length>g+1?x.slice(0,g+1)+"."+x.slice(g+1):x+new Array(g-x.length+2).join("0")}T.prototype=b.prototype,b.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(u,d){return(100*u).toFixed(d)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:function(u,d){return u.toExponential(d)},f:function(u,d){return u.toFixed(d)},g:function(u,d){return u.toPrecision(d)},o:function(u){return Math.round(u).toString(8)},p:function(u,d){return h(100*u,d)},r:h,s:function(u,d){var c=M(u,d);if(!c)return u+"";var x=c[0],g=c[1],p=g-(k=3*Math.max(-8,Math.min(8,Math.floor(g/3))))+1,v=x.length;return p===v?x:p>v?x+new Array(p-v+1).join("0"):p>0?x.slice(0,p)+"."+x.slice(p):"0."+new Array(1-p).join("0")+M(u,Math.max(0,d+p-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}};function t(u){return u}var i,n,r=Array.prototype.map,a=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l(u){var d,c,x=u.grouping===void 0||u.thousands===void 0?t:(d=r.call(u.grouping,Number),c=u.thousands+"",function(w,E){for(var P=w.length,C=[],O=0,R=d[0],j=0;P>0&&R>0&&(j+R+1>E&&(R=Math.max(1,E-j)),C.push(w.substring(P-=R,P+R)),!((j+=R+1)>E));)R=d[O=(O+1)%d.length];return C.reverse().join(c)}),g=u.currency===void 0?"":u.currency[0]+"",p=u.currency===void 0?"":u.currency[1]+"",v=u.decimal===void 0?".":u.decimal+"",m=u.numerals===void 0?t:function(w){return function(E){return E.replace(/[0-9]/g,function(P){return w[+P]})}}(r.call(u.numerals,String)),y=u.percent===void 0?"%":u.percent+"",_=u.minus===void 0?"-":u.minus+"",f=u.nan===void 0?"NaN":u.nan+"";function S(w){var E=(w=T(w)).fill,P=w.align,C=w.sign,O=w.symbol,R=w.zero,j=w.width,D=w.comma,N=w.precision,W=w.trim,F=w.type;F==="n"?(D=!0,F="g"):s[F]||(N===void 0&&(N=12),W=!0,F="g"),(R||E==="0"&&P==="=")&&(R=!0,E="0",P="=");var U=O==="$"?g:O==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",V=O==="$"?p:/[%p]/.test(F)?y:"",te=s[F],J=/[defgprs%]/.test(F);function K(X){var Z,$,re,oe=U,ie=V;if(F==="c")ie=te(X)+ie,X="";else{var ue=(X=+X)<0||1/X<0;if(X=isNaN(X)?f:te(Math.abs(X),N),W&&(X=function(ge){e:for(var de,ve=ge.length,pe=1,_e=-1;pe<ve;++pe)switch(ge[pe]){case".":_e=de=pe;break;case"0":_e===0&&(_e=pe),de=pe;break;default:if(!+ge[pe])break e;_e>0&&(_e=0)}return _e>0?ge.slice(0,_e)+ge.slice(de+1):ge}(X)),ue&&+X==0&&C!=="+"&&(ue=!1),oe=(ue?C==="("?C:_:C==="-"||C==="("?"":C)+oe,ie=(F==="s"?a[8+k/3]:"")+ie+(ue&&C==="("?")":""),J){for(Z=-1,$=X.length;++Z<$;)if(48>(re=X.charCodeAt(Z))||re>57){ie=(re===46?v+X.slice(Z+1):X.slice(Z))+ie,X=X.slice(0,Z);break}}}D&&!R&&(X=x(X,1/0));var me=oe.length+X.length+ie.length,be=me<j?new Array(j-me+1).join(E):"";switch(D&&R&&(X=x(be+X,be.length?j-ie.length:1/0),be=""),P){case"<":X=oe+X+ie+be;break;case"=":X=oe+be+X+ie;break;case"^":X=be.slice(0,me=be.length>>1)+oe+X+ie+be.slice(me);break;default:X=be+oe+X+ie}return m(X)}return N=N===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N)),K.toString=function(){return w+""},K}return{format:S,formatPrefix:function(w,E){var P,C=S(((w=T(w)).type="f",w)),O=3*Math.max(-8,Math.min(8,Math.floor((P=E,((P=M(Math.abs(P)))?P[1]:NaN)/3)))),R=Math.pow(10,-O),j=a[8+O/3];return function(D){return C(R*D)+j}}}}i=l({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),n=i.format,i.formatPrefix},87108:function(ee,z,e){"use strict";e.r(z),e.d(z,{geoAiry:function(){return D},geoAiryRaw:function(){return j},geoAitoff:function(){return W},geoAitoffRaw:function(){return N},geoArmadillo:function(){return U},geoArmadilloRaw:function(){return F},geoAugust:function(){return te},geoAugustRaw:function(){return V},geoBaker:function(){return Z},geoBakerRaw:function(){return X},geoBerghaus:function(){return oe},geoBerghausRaw:function(){return re},geoBertin1953:function(){return pe},geoBertin1953Raw:function(){return ve},geoBoggs:function(){return Me},geoBoggsRaw:function(){return ke},geoBonne:function(){return we},geoBonneRaw:function(){return xe},geoBottomley:function(){return ze},geoBottomleyRaw:function(){return Oe},geoBromley:function(){return Ue},geoBromleyRaw:function(){return Pe},geoChamberlin:function(){return Qe},geoChamberlinAfrica:function(){return et},geoChamberlinRaw:function(){return yt},geoCollignon:function(){return It},geoCollignonRaw:function(){return wt},geoCraig:function(){return Ct},geoCraigRaw:function(){return Dt},geoCraster:function(){return Be},geoCrasterRaw:function(){return We},geoCylindricalEqualArea:function(){return at},geoCylindricalEqualAreaRaw:function(){return Ge},geoCylindricalStereographic:function(){return Re},geoCylindricalStereographicRaw:function(){return nt},geoEckert1:function(){return rt},geoEckert1Raw:function(){return Fe},geoEckert2:function(){return ct},geoEckert2Raw:function(){return Ye},geoEckert3:function(){return gt},geoEckert3Raw:function(){return pt},geoEckert4:function(){return Mt},geoEckert4Raw:function(){return ut},geoEckert5:function(){return mt},geoEckert5Raw:function(){return xt},geoEckert6:function(){return Lt},geoEckert6Raw:function(){return Et},geoEisenlohr:function(){return rn},geoEisenlohrRaw:function(){return Wt},geoFahey:function(){return en},geoFaheyRaw:function(){return Vt},geoFoucaut:function(){return An},geoFoucautRaw:function(){return Ln},geoFoucautSinusoidal:function(){return Xt},geoFoucautSinusoidalRaw:function(){return hn},geoGilbert:function(){return Mn},geoGingery:function(){return Hn},geoGingeryRaw:function(){return zn},geoGinzburg4:function(){return or},geoGinzburg4Raw:function(){return tr},geoGinzburg5:function(){return er},geoGinzburg5Raw:function(){return ur},geoGinzburg6:function(){return jt},geoGinzburg6Raw:function(){return Mr},geoGinzburg8:function(){return xn},geoGinzburg8Raw:function(){return tn},geoGinzburg9:function(){return Sn},geoGinzburg9Raw:function(){return pn},geoGringorten:function(){return Nn},geoGringortenQuincuncial:function(){return Ea},geoGringortenRaw:function(){return Rn},geoGuyou:function(){return Pt},geoGuyouRaw:function(){return dn},geoHammer:function(){return be},geoHammerRaw:function(){return ue},geoHammerRetroazimuthal:function(){return vn},geoHammerRetroazimuthalRaw:function(){return Qt},geoHealpix:function(){return Vn},geoHealpixRaw:function(){return on},geoHill:function(){return Kn},geoHillRaw:function(){return jn},geoHomolosine:function(){return lr},geoHomolosineRaw:function(){return vr},geoHufnagel:function(){return $n},geoHufnagelRaw:function(){return dr},geoHyperelliptical:function(){return hi},geoHyperellipticalRaw:function(){return Gr},geoInterrupt:function(){return gi},geoInterruptedBoggs:function(){return _a},geoInterruptedHomolosine:function(){return zo},geoInterruptedMollweide:function(){return xs},geoInterruptedMollweideHemispheres:function(){return Is},geoInterruptedQuarticAuthalic:function(){return bl},geoInterruptedSinuMollweide:function(){return Ds},geoInterruptedSinusoidal:function(){return _s},geoKavrayskiy7:function(){return _o},geoKavrayskiy7Raw:function(){return so},geoLagrange:function(){return bi},geoLagrangeRaw:function(){return Ro},geoLarrivee:function(){return Qa},geoLarriveeRaw:function(){return lo},geoLaskowski:function(){return uo},geoLaskowskiRaw:function(){return Va},geoLittrow:function(){return Fo},geoLittrowRaw:function(){return qa},geoLoximuthal:function(){return Bo},geoLoximuthalRaw:function(){return wo},geoMiller:function(){return Ks},geoMillerRaw:function(){return co},geoModifiedStereographic:function(){return No},geoModifiedStereographicAlaska:function(){return ol},geoModifiedStereographicGs48:function(){return sl},geoModifiedStereographicGs50:function(){return $o},geoModifiedStereographicLee:function(){return To},geoModifiedStereographicMiller:function(){return Ha},geoModifiedStereographicRaw:function(){return Jo},geoMollweide:function(){return ae},geoMollweideRaw:function(){return le},geoMtFlatPolarParabolic:function(){return da},geoMtFlatPolarParabolicRaw:function(){return Ga},geoMtFlatPolarQuartic:function(){return ko},geoMtFlatPolarQuarticRaw:function(){return Uo},geoMtFlatPolarSinusoidal:function(){return Vo},geoMtFlatPolarSinusoidalRaw:function(){return Ao},geoNaturalEarth:function(){return ei.c},geoNaturalEarth2:function(){return xl},geoNaturalEarth2Raw:function(){return fs},geoNaturalEarthRaw:function(){return ei.g},geoNellHammer:function(){return hs},geoNellHammerRaw:function(){return Rs},geoNicolosi:function(){return ul},geoNicolosiRaw:function(){return Fs},geoPatterson:function(){return ht},geoPattersonRaw:function(){return Ns},geoPeirceQuincuncial:function(){return gs},geoPierceQuincuncial:function(){return gs},geoPolyconic:function(){return $t},geoPolyconicRaw:function(){return kt},geoPolyhedral:function(){return gr},geoPolyhedralButterfly:function(){return Ti},geoPolyhedralCollignon:function(){return ga},geoPolyhedralWaterman:function(){return sa},geoProject:function(){return Ta},geoQuantize:function(){return qo},geoQuincuncial:function(){return ts},geoRectangularPolyconic:function(){return no},geoRectangularPolyconicRaw:function(){return to},geoRobinson:function(){return Dr},geoRobinsonRaw:function(){return po},geoSatellite:function(){return fl},geoSatelliteRaw:function(){return js},geoSinuMollweide:function(){return Jn},geoSinuMollweideRaw:function(){return rr},geoSinusoidal:function(){return fe},geoSinusoidalRaw:function(){return De},geoStitch:function(){return ca},geoTimes:function(){return Co},geoTimesRaw:function(){return La},geoTwoPointAzimuthal:function(){return Pa},geoTwoPointAzimuthalRaw:function(){return ks},geoTwoPointAzimuthalUsa:function(){return As},geoTwoPointEquidistant:function(){return ms},geoTwoPointEquidistantRaw:function(){return ii},geoTwoPointEquidistantUsa:function(){return Po},geoVanDerGrinten:function(){return Ms},geoVanDerGrinten2:function(){return mo},geoVanDerGrinten2Raw:function(){return Ss},geoVanDerGrinten3:function(){return ys},geoVanDerGrinten3Raw:function(){return Ai},geoVanDerGrinten4:function(){return Hr},geoVanDerGrinten4Raw:function(){return Rr},geoVanDerGrintenRaw:function(){return vo},geoWagner:function(){return Oo},geoWagner4:function(){return _l},geoWagner4Raw:function(){return vi},geoWagner6:function(){return yi},geoWagner6Raw:function(){return Xa},geoWagner7:function(){return Wo},geoWagnerRaw:function(){return Ya},geoWiechel:function(){return Fa},geoWiechelRaw:function(){return Li},geoWinkel3:function(){return hl},geoWinkel3Raw:function(){return os}});var M=e(87952),k=Math.abs,o=Math.atan,T=Math.atan2,b=Math.cos,h=Math.exp,s=Math.floor,t=Math.log,i=Math.max,n=Math.min,r=Math.pow,a=Math.round,l=Math.sign||function(Xe){return Xe>0?1:Xe<0?-1:0},u=Math.sin,d=Math.tan,c=1e-6,x=1e-12,g=Math.PI,p=g/2,v=g/4,m=Math.SQRT1_2,y=C(2),_=C(g),f=2*g,S=180/g,w=g/180;function E(Xe){return Xe>1?p:Xe<-1?-p:Math.asin(Xe)}function P(Xe){return Xe>1?0:Xe<-1?g:Math.acos(Xe)}function C(Xe){return Xe>0?Math.sqrt(Xe):0}function O(Xe){return(h(Xe)-h(-Xe))/2}function R(Xe){return(h(Xe)+h(-Xe))/2}function j(Xe){var Je=d(Xe/2),ot=2*t(b(Xe/2))/(Je*Je);function B(G,H){var L=b(G),q=b(H),Q=u(H),ne=q*L,ce=-((1-ne?t((1+ne)/2)/(1-ne):-.5)+ot/(1+ne));return[ce*q*u(G),ce*Q]}return B.invert=function(G,H){var L,q=C(G*G+H*H),Q=-Xe/2,ne=50;if(!q)return[0,0];do{var ce=Q/2,ye=b(ce),Le=u(ce),Ie=Le/ye,je=-t(k(ye));Q-=L=(2/Ie*je-ot*Ie-q)/(-je/(Le*Le)+1-ot/(2*ye*ye))*(ye<0?.7:1)}while(k(L)>c&&--ne>0);var qe=u(Q);return[T(G*qe,q*b(Q)),E(H*qe/q)]},B}function D(){var Xe=p,Je=(0,M.U)(j),ot=Je(Xe);return ot.radius=function(B){return arguments.length?Je(Xe=B*w):Xe*S},ot.scale(179.976).clipAngle(147)}function N(Xe,Je){var ot=b(Je),B=function(G){return G?G/Math.sin(G):1}(P(ot*b(Xe/=2)));return[2*ot*u(Xe)*B,u(Je)*B]}function W(){return(0,M.c)(N).scale(152.63)}function F(Xe){var Je=u(Xe),ot=b(Xe),B=Xe>=0?1:-1,G=d(B*Xe),H=(1+Je-ot)/2;function L(q,Q){var ne=b(Q),ce=b(q/=2);return[(1+ne)*u(q),(B*Q>-T(ce,G)-.001?0:10*-B)+H+u(Q)*ot-(1+ne)*Je*ce]}return L.invert=function(q,Q){var ne=0,ce=0,ye=50;do{var Le=b(ne),Ie=u(ne),je=b(ce),qe=u(ce),$e=1+je,lt=$e*Ie-q,ft=H+qe*ot-$e*Je*Le-Q,_t=$e*Le/2,St=-Ie*qe,At=Je*$e*Ie/2,Ft=ot*je+Je*Le*qe,Ot=St*At-Ft*_t,Zt=(ft*St-lt*Ft)/Ot/2,Ht=(lt*At-ft*_t)/Ot;k(Ht)>2&&(Ht/=2),ne-=Zt,ce-=Ht}while((k(Zt)>c||k(Ht)>c)&&--ye>0);return B*ce>-T(b(ne),G)-.001?[2*ne,ce]:null},L}function U(){var Xe=20*w,Je=Xe>=0?1:-1,ot=d(Je*Xe),B=(0,M.U)(F),G=B(Xe),H=G.stream;return G.parallel=function(L){return arguments.length?(ot=d((Je=(Xe=L*w)>=0?1:-1)*Xe),B(Xe)):Xe*S},G.stream=function(L){var q=G.rotate(),Q=H(L),ne=(G.rotate([0,0]),H(L)),ce=G.precision();return G.rotate(q),Q.sphere=function(){ne.polygonStart(),ne.lineStart();for(var ye=-180*Je;Je*ye<180;ye+=90*Je)ne.point(ye,90*Je);if(Xe)for(;Je*(ye-=3*Je*ce)>=-180;)ne.point(ye,Je*-T(b(ye*w/2),ot)*S);ne.lineEnd(),ne.polygonEnd()},Q},G.scale(218.695).center([0,28.0974])}function V(Xe,Je){var ot=d(Je/2),B=C(1-ot*ot),G=1+B*b(Xe/=2),H=u(Xe)*B/G,L=ot/G,q=H*H,Q=L*L;return[1.3333333333333333*H*(3+q-3*Q),1.3333333333333333*L*(3+3*q-Q)]}function te(){return(0,M.c)(V).scale(66.1603)}N.invert=function(Xe,Je){if(!(Xe*Xe+4*Je*Je>g*g+c)){var ot=Xe,B=Je,G=25;do{var H,L=u(ot),q=u(ot/2),Q=b(ot/2),ne=u(B),ce=b(B),ye=u(2*B),Le=ne*ne,Ie=ce*ce,je=q*q,qe=1-Ie*Q*Q,$e=qe?P(ce*Q)*C(H=1/qe):H=0,lt=2*$e*ce*q-Xe,ft=$e*ne-Je,_t=H*(Ie*je+$e*ce*Q*Le),St=H*(.5*L*ye-2*$e*ne*q),At=.25*H*(ye*q-$e*ne*Ie*L),Ft=H*(Le*Q+$e*je*ce),Ot=St*At-Ft*_t;if(!Ot)break;var Zt=(ft*St-lt*Ft)/Ot,Ht=(lt*At-ft*_t)/Ot;ot-=Zt,B-=Ht}while((k(Zt)>c||k(Ht)>c)&&--G>0);return[ot,B]}},V.invert=function(Xe,Je){if(Je*=.375,!(Xe*=.375)&&k(Je)>1)return null;var ot=1+Xe*Xe+Je*Je,B=C((ot-C(ot*ot-4*Je*Je))/2),G=E(B)/3,H=B?function(ne){return t(ne+C(ne*ne-1))}(k(Je/B))/3:function(ne){return t(ne+C(ne*ne+1))}(k(Xe))/3,L=b(G),q=R(H),Q=q*q-L*L;return[2*l(Xe)*T(O(H)*L,.25-Q),2*l(Je)*T(q*u(G),.25+Q)]};var J=C(8),K=t(1+y);function X(Xe,Je){var ot=k(Je);return ot<v?[Xe,t(d(v+Je/2))]:[Xe*b(ot)*(2*y-1/u(ot)),l(Je)*(2*y*(ot-v)-t(d(ot/2)))]}function Z(){return(0,M.c)(X).scale(112.314)}X.invert=function(Xe,Je){if((B=k(Je))<K)return[Xe,2*o(h(Je))-p];var ot,B,G=v,H=25;do{var L=b(G/2),q=d(G/2);G-=ot=(J*(G-v)-t(q)-B)/(J-L*L/(2*q))}while(k(ot)>x&&--H>0);return[Xe/(b(G)*(J-1/u(G))),l(Je)*G]};var $=e(69020);function re(Xe){var Je=2*g/Xe;function ot(B,G){var H=(0,$.O)(B,G);if(k(B)>p){var L=T(H[1],H[0]),q=C(H[0]*H[0]+H[1]*H[1]),Q=Je*a((L-p)/Je)+p,ne=T(u(L-=Q),2-b(L));L=Q+E(g/q*u(ne))-ne,H[0]=q*b(L),H[1]=q*u(L)}return H}return ot.invert=function(B,G){var H=C(B*B+G*G);if(H>p){var L=T(G,B),q=Je*a((L-p)/Je)+p,Q=L>q?-1:1,ne=H*b(q-L),ce=1/d(Q*P((ne-g)/C(g*(g-2*ne)+H*H)));L=q+2*o((ce+Q*C(ce*ce-3))/3),B=H*b(L),G=H*u(L)}return $.O.invert(B,G)},ot}function oe(){var Xe=5,Je=(0,M.U)(re),ot=Je(Xe),B=ot.stream,G=.01,H=-b(G*w),L=u(G*w);return ot.lobes=function(q){return arguments.length?Je(Xe=+q):Xe},ot.stream=function(q){var Q=ot.rotate(),ne=B(q),ce=(ot.rotate([0,0]),B(q));return ot.rotate(Q),ne.sphere=function(){ce.polygonStart(),ce.lineStart();for(var ye=0,Le=360/Xe,Ie=2*g/Xe,je=90-180/Xe,qe=p;ye<Xe;++ye,je-=Le,qe-=Ie)ce.point(T(L*b(qe),H)*S,E(L*u(qe))*S),je<-90?(ce.point(-90,-180-je-G),ce.point(-90,-180-je+G)):(ce.point(90,je+G),ce.point(90,je-G));ce.lineEnd(),ce.polygonEnd()},ne},ot.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ie=e(54724);function ue(Xe,Je){if(arguments.length<2&&(Je=Xe),Je===1)return ie.y;if(Je===1/0)return me;function ot(B,G){var H=(0,ie.y)(B/Je,G);return H[0]*=Xe,H}return ot.invert=function(B,G){var H=ie.y.invert(B/Xe,G);return H[0]*=Je,H},ot}function me(Xe,Je){return[Xe*b(Je)/b(Je/=2),2*u(Je)]}function be(){var Xe=2,Je=(0,M.U)(ue),ot=Je(Xe);return ot.coefficient=function(B){return arguments.length?Je(Xe=+B):Xe},ot.scale(169.529)}function ge(Xe,Je,ot){var B,G,H,L=100;ot=ot===void 0?0:+ot,Je=+Je;do(G=Xe(ot))===(H=Xe(ot+c))&&(H=G+c),ot-=B=-1*c*(G-Je)/(G-H);while(L-- >0&&k(B)>c);return L<0?NaN:ot}function de(Xe,Je,ot){return Je===void 0&&(Je=40),ot===void 0&&(ot=x),function(B,G,H,L){var q,Q,ne;H=H===void 0?0:+H,L=L===void 0?0:+L;for(var ce=0;ce<Je;ce++){var ye=Xe(H,L),Le=ye[0]-B,Ie=ye[1]-G;if(k(Le)<ot&&k(Ie)<ot)break;var je=Le*Le+Ie*Ie;if(je>q)H-=Q/=2,L-=ne/=2;else{q=je;var qe=(H>0?-1:1)*ot,$e=(L>0?-1:1)*ot,lt=Xe(H+qe,L),ft=Xe(H,L+$e),_t=(lt[0]-ye[0])/qe,St=(lt[1]-ye[1])/qe,At=(ft[0]-ye[0])/$e,Ft=(ft[1]-ye[1])/$e,Ot=Ft*_t-St*At,Zt=(k(Ot)<.5?.5:1)/Ot;if(H+=Q=(Ie*At-Le*Ft)*Zt,L+=ne=(Le*St-Ie*_t)*Zt,k(Q)<ot&&k(ne)<ot)break}}return[H,L]}}function ve(){var Xe=ue(1.68,2);function Je(ot,B){if(ot+B<-1.4){var G=(ot-B+1.6)*(ot+B+1.4)/8;ot+=G,B-=.8*G*u(B+g/2)}var H=Xe(ot,B),L=(1-b(ot*B))/12;return H[1]<0&&(H[0]*=1+L),H[1]>0&&(H[1]*=1+L/1.5*H[0]*H[0]),H}return Je.invert=de(Je),Je}function pe(){return(0,M.c)(ve()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function _e(Xe,Je){var ot,B=Xe*u(Je),G=30;do Je-=ot=(Je+u(Je)-B)/(1+b(Je));while(k(ot)>c&&--G>0);return Je/2}function Te(Xe,Je,ot){function B(G,H){return[Xe*G*b(H=_e(ot,H)),Je*u(H)]}return B.invert=function(G,H){return H=E(H/Je),[G/(Xe*b(H)),E((2*H+u(2*H))/ot)]},B}me.invert=function(Xe,Je){var ot=2*E(Je/2);return[Xe*b(ot/2)/b(ot),ot]};var le=Te(y/p,y,g);function ae(){return(0,M.c)(le).scale(169.529)}var he=2.00276,Se=1.11072;function ke(Xe,Je){var ot=_e(g,Je);return[he*Xe/(1/b(Je)+Se/b(ot)),(Je+y*u(ot))/he]}function Me(){return(0,M.c)(ke).scale(160.857)}function Ee(Xe){var Je=0,ot=(0,M.U)(Xe),B=ot(Je);return B.parallel=function(G){return arguments.length?ot(Je=G*w):Je*S},B}function De(Xe,Je){return[Xe*b(Je),Je]}function fe(){return(0,M.c)(De).scale(152.63)}function xe(Xe){if(!Xe)return De;var Je=1/d(Xe);function ot(B,G){var H=Je+Xe-G,L=H&&B*b(G)/H;return[H*u(L),Je-H*b(L)]}return ot.invert=function(B,G){var H=C(B*B+(G=Je-G)*G),L=Je+Xe-H;return[H/b(L)*T(B,G),L]},ot}function we(){return Ee(xe).scale(123.082).center([0,26.1441]).parallel(45)}function Oe(Xe){function Je(ot,B){var G=p-B,H=G&&ot*Xe*u(G)/G;return[G*u(H)/Xe,p-G*b(H)]}return Je.invert=function(ot,B){var G=ot*Xe,H=p-B,L=C(G*G+H*H),q=T(G,H);return[(L?L/u(L):1)*q/Xe,p-L]},Je}function ze(){var Xe=.5,Je=(0,M.U)(Oe),ot=Je(Xe);return ot.fraction=function(B){return arguments.length?Je(Xe=+B):Xe},ot.scale(158.837)}ke.invert=function(Xe,Je){var ot,B,G=he*Je,H=Je<0?-v:v,L=25;do B=G-y*u(H),H-=ot=(u(2*H)+2*H-g*u(B))/(2*b(2*H)+2+g*b(B)*y*b(H));while(k(ot)>c&&--L>0);return B=G-y*u(H),[Xe*(1/b(B)+Se/b(H))/he,B]},De.invert=function(Xe,Je){return[Xe/b(Je),Je]};var Pe=Te(1,4/g,g);function Ue(){return(0,M.c)(Pe).scale(152.63)}var Ve=e(24052),Ze=e(92992);function it(Xe,Je,ot,B,G,H){var L,q=b(H);if(k(Xe)>1||k(H)>1)L=P(ot*G+Je*B*q);else{var Q=u(Xe/2),ne=u(H/2);L=2*E(C(Q*Q+Je*B*ne*ne))}return k(L)>c?[L,T(B*u(H),Je*G-ot*B*q)]:[0,0]}function tt(Xe,Je,ot){return P((Xe*Xe+Je*Je-ot*ot)/(2*Xe*Je))}function dt(Xe){return Xe-2*g*s((Xe+g)/(2*g))}function yt(Xe,Je,ot){for(var B,G=[[Xe[0],Xe[1],u(Xe[1]),b(Xe[1])],[Je[0],Je[1],u(Je[1]),b(Je[1])],[ot[0],ot[1],u(ot[1]),b(ot[1])]],H=G[2],L=0;L<3;++L,H=B)B=G[L],H.v=it(B[1]-H[1],H[3],H[2],B[3],B[2],B[0]-H[0]),H.point=[0,0];var q=tt(G[0].v[0],G[2].v[0],G[1].v[0]),Q=tt(G[0].v[0],G[1].v[0],G[2].v[0]),ne=g-q;G[2].point[1]=0,G[0].point[0]=-(G[1].point[0]=G[0].v[0]/2);var ce=[G[2].point[0]=G[0].point[0]+G[2].v[0]*b(q),2*(G[0].point[1]=G[1].point[1]=G[2].v[0]*u(q))];return function(ye,Le){var Ie,je=u(Le),qe=b(Le),$e=new Array(3);for(Ie=0;Ie<3;++Ie){var lt=G[Ie];if($e[Ie]=it(Le-lt[1],lt[3],lt[2],qe,je,ye-lt[0]),!$e[Ie][0])return lt.point;$e[Ie][1]=dt($e[Ie][1]-lt.v[1])}var ft=ce.slice();for(Ie=0;Ie<3;++Ie){var _t=Ie==2?0:Ie+1,St=tt(G[Ie].v[0],$e[Ie][0],$e[_t][0]);$e[Ie][1]<0&&(St=-St),Ie?Ie==1?(St=Q-St,ft[0]-=$e[Ie][0]*b(St),ft[1]-=$e[Ie][0]*u(St)):(St=ne-St,ft[0]+=$e[Ie][0]*b(St),ft[1]+=$e[Ie][0]*u(St)):(ft[0]+=$e[Ie][0]*b(St),ft[1]-=$e[Ie][0]*u(St))}return ft[0]/=3,ft[1]/=3,ft}}function vt(Xe){return Xe[0]*=w,Xe[1]*=w,Xe}function et(){return Qe([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Qe(Xe,Je,ot){var B=(0,Ve.c)({type:"MultiPoint",coordinates:[Xe,Je,ot]}),G=[-B[0],-B[1]],H=(0,Ze.c)(G),L=yt(vt(H(Xe)),vt(H(Je)),vt(H(ot)));L.invert=de(L);var q=(0,M.c)(L).rotate(G),Q=q.center;return delete q.rotate,q.center=function(ne){return arguments.length?Q(H(ne)):H.invert(Q())},q.clipAngle(90)}function wt(Xe,Je){var ot=C(1-u(Je));return[2/_*Xe*ot,_*(1-ot)]}function It(){return(0,M.c)(wt).scale(95.6464).center([0,30])}function Dt(Xe){var Je=d(Xe);function ot(B,G){return[B,(B?B/u(B):1)*(u(G)*b(B)-Je*b(G))]}return ot.invert=Je?function(B,G){B&&(G*=u(B)/B);var H=b(B);return[B,2*T(C(H*H+Je*Je-G*G)-H,Je-G)]}:function(B,G){return[B,E(B?G*d(B)/B:G)]},ot}function Ct(){return Ee(Dt).scale(249.828).clipAngle(90)}wt.invert=function(Xe,Je){var ot=(ot=Je/_-1)*ot;return[ot>0?Xe*C(g/ot)/2:0,E(1-ot)]};var He=C(3);function We(Xe,Je){return[He*Xe*(2*b(2*Je/3)-1)/_,He*_*u(Je/3)]}function Be(){return(0,M.c)(We).scale(156.19)}function Ge(Xe){var Je=b(Xe);function ot(B,G){return[B*Je,u(G)/Je]}return ot.invert=function(B,G){return[B/Je,E(G*Je)]},ot}function at(){return Ee(Ge).parallel(38.58).scale(195.044)}function nt(Xe){var Je=b(Xe);function ot(B,G){return[B*Je,(1+Je)*d(G/2)]}return ot.invert=function(B,G){return[B/Je,2*o(G/(1+Je))]},ot}function Re(){return Ee(nt).scale(124.75)}function Fe(Xe,Je){var ot=C(8/(3*g));return[ot*Xe*(1-k(Je)/g),ot*Je]}function rt(){return(0,M.c)(Fe).scale(165.664)}function Ye(Xe,Je){var ot=C(4-3*u(k(Je)));return[2/C(6*g)*Xe*ot,l(Je)*C(2*g/3)*(2-ot)]}function ct(){return(0,M.c)(Ye).scale(165.664)}function pt(Xe,Je){var ot=C(g*(4+g));return[2/ot*Xe*(1+C(1-4*Je*Je/(g*g))),4/ot*Je]}function gt(){return(0,M.c)(pt).scale(180.739)}function ut(Xe,Je){var ot=(2+p)*u(Je);Je/=2;for(var B=0,G=1/0;B<10&&k(G)>c;B++){var H=b(Je);Je-=G=(Je+u(Je)*(H+2)-ot)/(2*H*(1+H))}return[2/C(g*(4+g))*Xe*(1+b(Je)),2*C(g/(4+g))*u(Je)]}function Mt(){return(0,M.c)(ut).scale(180.739)}function xt(Xe,Je){return[Xe*(1+b(Je))/C(2+g),2*Je/C(2+g)]}function mt(){return(0,M.c)(xt).scale(173.044)}function Et(Xe,Je){for(var ot=(1+p)*u(Je),B=0,G=1/0;B<10&&k(G)>c;B++)Je-=G=(Je+u(Je)-ot)/(1+b(Je));return ot=C(2+g),[Xe*(1+b(Je))/ot,2*Je/ot]}function Lt(){return(0,M.c)(Et).scale(173.044)}We.invert=function(Xe,Je){var ot=3*E(Je/(He*_));return[_*Xe/(He*(2*b(2*ot/3)-1)),ot]},Fe.invert=function(Xe,Je){var ot=C(8/(3*g)),B=Je/ot;return[Xe/(ot*(1-k(B)/g)),B]},Ye.invert=function(Xe,Je){var ot=2-k(Je)/C(2*g/3);return[Xe*C(6*g)/(2*ot),l(Je)*E((4-ot*ot)/3)]},pt.invert=function(Xe,Je){var ot=C(g*(4+g))/2;return[Xe*ot/(1+C(1-Je*Je*(4+g)/(4*g))),Je*ot/2]},ut.invert=function(Xe,Je){var ot=Je*C((4+g)/g)/2,B=E(ot),G=b(B);return[Xe/(2/C(g*(4+g))*(1+G)),E((B+ot*(G+2))/(2+p))]},xt.invert=function(Xe,Je){var ot=C(2+g),B=Je*ot/2;return[ot*Xe/(1+b(B)),B]},Et.invert=function(Xe,Je){var ot=1+p,B=C(ot/2);return[2*Xe*B/(1+b(Je*=B)),E((Je+u(Je))/ot)]};var zt=3+2*y;function Wt(Xe,Je){var ot=u(Xe/=2),B=b(Xe),G=C(b(Je)),H=b(Je/=2),L=u(Je)/(H+y*B*G),q=C(2/(1+L*L)),Q=C((y*H+(B+ot)*G)/(y*H+(B-ot)*G));return[zt*(q*(Q-1/Q)-2*t(Q)),zt*(q*L*(Q+1/Q)-2*o(L))]}function rn(){return(0,M.c)(Wt).scale(62.5271)}Wt.invert=function(Xe,Je){if(!(ot=V.invert(Xe/1.2,1.065*Je)))return null;var ot,B=ot[0],G=ot[1],H=20;Xe/=zt,Je/=zt;do{var L=B/2,q=G/2,Q=u(L),ne=b(L),ce=u(q),ye=b(q),Le=b(G),Ie=C(Le),je=ce/(ye+y*ne*Ie),qe=je*je,$e=C(2/(1+qe)),lt=(y*ye+(ne+Q)*Ie)/(y*ye+(ne-Q)*Ie),ft=C(lt),_t=ft-1/ft,St=ft+1/ft,At=$e*_t-2*t(ft)-Xe,Ft=$e*je*St-2*o(je)-Je,Ot=ce&&m*Ie*Q*qe/ce,Zt=(y*ne*ye+Ie)/(2*(ye+y*ne*Ie)*(ye+y*ne*Ie)*Ie),Ht=-.5*je*$e*$e*$e,Nt=Ht*Ot,gn=Ht*Zt,yn=(yn=2*ye+y*Ie*(ne-Q))*yn*ft,Cn=(y*ne*ye*Ie+Le)/yn,Dn=-y*Q*ce/(Ie*yn),Wn=_t*Nt-2*Cn/ft+$e*(Cn+Cn/lt),sr=_t*gn-2*Dn/ft+$e*(Dn+Dn/lt),mr=je*St*Nt-2*Ot/(1+qe)+$e*St*Ot+$e*je*(Cn-Cn/lt),Zn=je*St*gn-2*Zt/(1+qe)+$e*St*Zt+$e*je*(Dn-Dn/lt),pr=sr*mr-Zn*Wn;if(!pr)break;var Ar=(Ft*sr-At*Zn)/pr,Fr=(At*mr-Ft*Wn)/pr;B-=Ar,G=i(-p,n(p,G-Fr))}while((k(Ar)>c||k(Fr)>c)&&--H>0);return k(k(G)-p)<c?[0,G]:H&&[B,G]};var Ut=b(35*w);function Vt(Xe,Je){var ot=d(Je/2);return[Xe*Ut*C(1-ot*ot),(1+Ut)*ot]}function en(){return(0,M.c)(Vt).scale(137.152)}function Ln(Xe,Je){var ot=Je/2,B=b(ot);return[2*Xe/_*b(Je)*B*B,_*d(ot)]}function An(){return(0,M.c)(Ln).scale(135.264)}function hn(Xe){var Je=1-Xe,ot=G(g,0)[0]-G(-g,0)[0],B=C(2*(G(0,p)[1]-G(0,-p)[1])/ot);function G(q,Q){var ne=b(Q),ce=u(Q);return[ne/(Je+Xe*ne)*q,Je*Q+Xe*ce]}function H(q,Q){var ne=G(q,Q);return[ne[0]*B,ne[1]/B]}function L(q){return H(0,q)[1]}return H.invert=function(q,Q){var ne=ge(L,Q);return[q/B*(Xe+Je/b(ne)),ne]},H}function Xt(){var Xe=.5,Je=(0,M.U)(hn),ot=Je(Xe);return ot.alpha=function(B){return arguments.length?Je(Xe=+B):Xe},ot.scale(168.725)}Vt.invert=function(Xe,Je){var ot=Je/(1+Ut);return[Xe&&Xe/(Ut*C(1-ot*ot)),2*o(ot)]},Ln.invert=function(Xe,Je){var ot=o(Je/_),B=b(ot),G=2*ot;return[Xe*_/2/(b(G)*B*B),G]};var ln=e(4888),nn=e(69604);function cn(Xe){return[Xe[0]/2,E(d(Xe[1]/2*w))*S]}function Tn(Xe){return[2*Xe[0],2*o(u(Xe[1]*w))*S]}function Mn(Xe){Xe==null&&(Xe=ln.c);var Je=Xe(),ot=(0,nn.c)().scale(S).precision(0).clipAngle(null).translate([0,0]);function B(H){return Je(cn(H))}function G(H){B[H]=function(){return arguments.length?(Je[H].apply(Je,arguments),B):Je[H]()}}return Je.invert&&(B.invert=function(H){return Tn(Je.invert(H))}),B.stream=function(H){var L=Je.stream(H),q=ot.stream({point:function(Q,ne){L.point(Q/2,E(d(-ne/2*w))*S)},lineStart:function(){L.lineStart()},lineEnd:function(){L.lineEnd()},polygonStart:function(){L.polygonStart()},polygonEnd:function(){L.polygonEnd()}});return q.sphere=L.sphere,q},B.rotate=function(H){return arguments.length?(ot.rotate(H),B):ot.rotate()},B.center=function(H){return arguments.length?(Je.center(cn(H)),B):Tn(Je.center())},G("angle"),G("clipAngle"),G("clipExtent"),G("fitExtent"),G("fitHeight"),G("fitSize"),G("fitWidth"),G("scale"),G("translate"),G("precision"),B.scale(249.5)}function zn(Xe,Je){var ot=2*g/Je,B=Xe*Xe;function G(H,L){var q=(0,$.O)(H,L),Q=q[0],ne=q[1],ce=Q*Q+ne*ne;if(ce>B){var ye=C(ce),Le=T(ne,Q),Ie=ot*a(Le/ot),je=Le-Ie,qe=Xe*b(je),$e=(Xe*u(je)-je*u(qe))/(p-qe),lt=In(je,$e),ft=(g-Xe)/Pn(lt,qe,g);Q=ye;var _t,St=50;do Q-=_t=(Xe+Pn(lt,qe,Q)*ft-ye)/(lt(Q)*ft);while(k(_t)>c&&--St>0);ne=je*u(Q),Q<p&&(ne-=$e*(Q-p));var At=u(Ie),Ft=b(Ie);q[0]=Q*Ft-ne*At,q[1]=Q*At+ne*Ft}return q}return G.invert=function(H,L){var q=H*H+L*L;if(q>B){var Q=C(q),ne=T(L,H),ce=ot*a(ne/ot),ye=ne-ce;H=Q*b(ye),L=Q*u(ye);for(var Le=H-p,Ie=u(H),je=L/Ie,qe=H<p?1/0:0,$e=10;;){var lt=Xe*u(je),ft=Xe*b(je),_t=u(ft),St=p-ft,At=(lt-je*_t)/St,Ft=In(je,At);if(k(qe)<x||!--$e)break;je-=qe=(je*Ie-At*Le-L)/(Ie-2*Le*(St*(ft+je*lt*b(ft)-_t)-lt*(lt-je*_t))/(St*St))}H=(Q=Xe+Pn(Ft,ft,H)*(g-Xe)/Pn(Ft,ft,g))*b(ne=ce+je),L=Q*u(ne)}return $.O.invert(H,L)},G}function In(Xe,Je){return function(ot){var B=Xe*b(ot);return ot<p&&(B-=Je),C(1+B*B)}}function Pn(Xe,Je,ot){for(var B=(ot-Je)/50,G=Xe(Je)+Xe(ot),H=1,L=Je;H<50;++H)G+=2*Xe(L+=B);return .5*G*B}function Hn(){var Xe=6,Je=30*w,ot=b(Je),B=u(Je),G=(0,M.U)(zn),H=G(Je,Xe),L=H.stream,q=-b(.01*w),Q=u(.01*w);return H.radius=function(ne){return arguments.length?(ot=b(Je=ne*w),B=u(Je),G(Je,Xe)):Je*S},H.lobes=function(ne){return arguments.length?G(Je,Xe=+ne):Xe},H.stream=function(ne){var ce=H.rotate(),ye=L(ne),Le=(H.rotate([0,0]),L(ne));return H.rotate(ce),ye.sphere=function(){Le.polygonStart(),Le.lineStart();for(var Ie=0,je=2*g/Xe,qe=0;Ie<Xe;++Ie,qe-=je)Le.point(T(Q*b(qe),q)*S,E(Q*u(qe))*S),Le.point(T(B*b(qe-je/2),ot)*S,E(B*u(qe-je/2))*S);Le.lineEnd(),Le.polygonEnd()},ye},H.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Fn(Xe,Je,ot,B,G,H,L,q){function Q(ne,ce){if(!ce)return[Xe*ne/g,0];var ye=ce*ce,Le=Xe+ye*(Je+ye*(ot+ye*B)),Ie=ce*(G-1+ye*(H-q+ye*L)),je=(Le*Le+Ie*Ie)/(2*Ie),qe=ne*E(Le/je)/g;return[je*u(qe),ce*(1+ye*q)+je*(1-b(qe))]}return arguments.length<8&&(q=0),Q.invert=function(ne,ce){var ye,Le,Ie=g*ne/Xe,je=ce,qe=50;do{var $e=je*je,lt=Xe+$e*(Je+$e*(ot+$e*B)),ft=je*(G-1+$e*(H-q+$e*L)),_t=lt*lt+ft*ft,St=2*ft,At=_t/St,Ft=At*At,Ot=E(lt/At)/g,Zt=Ie*Ot,Ht=lt*lt,Nt=(2*Je+$e*(4*ot+6*$e*B))*je,gn=G+$e*(3*H+5*$e*L),yn=(2*(lt*Nt+ft*(gn-1))*St-_t*(2*(gn-1)))/(St*St),Cn=b(Zt),Dn=u(Zt),Wn=At*Cn,sr=At*Dn,mr=Ie/g*(1/C(1-Ht/Ft))*(Nt*At-lt*yn)/Ft,Zn=sr-ne,pr=je*(1+$e*q)+At-Wn-ce,Ar=yn*Dn+Wn*mr,Fr=Wn*Ot,ar=1+yn-(yn*Cn-sr*mr),fr=sr*Ot,Er=Ar*fr-ar*Fr;if(!Er)break;Ie-=ye=(pr*Ar-Zn*ar)/Er,je-=Le=(Zn*fr-pr*Fr)/Er}while((k(ye)>c||k(Le)>c)&&--qe>0);return[Ie,je]},Q}var tr=Fn(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function or(){return(0,M.c)(tr).scale(149.995)}var ur=Fn(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function er(){return(0,M.c)(ur).scale(153.93)}var Mr=Fn(5/6*g,-.62636,-.0344,0,1.3493,-.05524,0,.045);function jt(){return(0,M.c)(Mr).scale(130.945)}function tn(Xe,Je){var ot=Xe*Xe,B=Je*Je;return[Xe*(1-.162388*B)*(.87-952426e-9*ot*ot),Je*(1+B/12)]}function xn(){return(0,M.c)(tn).scale(131.747)}tn.invert=function(Xe,Je){var ot,B=Xe,G=Je,H=50;do{var L=G*G;G-=ot=(G*(1+L/12)-Je)/(1+L/4)}while(k(ot)>c&&--H>0);H=50,Xe/=1-.162388*L;do{var q=(q=B*B)*q;B-=ot=(B*(.87-952426e-9*q)-Xe)/(.87-.00476213*q)}while(k(ot)>c&&--H>0);return[B,G]};var pn=Fn(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Sn(){return(0,M.c)(pn).scale(131.087)}function Gn(Xe){var Je=Xe(p,0)[0]-Xe(-p,0)[0];function ot(B,G){var H=B>0?-.5:.5,L=Xe(B+H*g,G);return L[0]-=H*Je,L}return Xe.invert&&(ot.invert=function(B,G){var H=B>0?-.5:.5,L=Xe.invert(B+H*Je,G),q=L[0]-H*g;return q<-g?q+=2*g:q>g&&(q-=2*g),L[0]=q,L}),ot}function Rn(Xe,Je){var ot=l(Xe),B=l(Je),G=b(Je),H=b(Xe)*G,L=u(Xe)*G,q=u(B*Je);Xe=k(T(L,q)),Je=E(H),k(Xe-p)>c&&(Xe%=p);var Q=function(ne,ce){if(ce===p)return[0,0];var ye,Le,Ie=u(ce),je=Ie*Ie,qe=je*je,$e=1+qe,lt=1+3*qe,ft=1-qe,_t=E(1/C($e)),St=ft+je*$e*_t,At=(1-Ie)/St,Ft=C(At),Ot=At*$e,Zt=C(Ot),Ht=Ft*ft;if(ne===0)return[0,-(Ht+je*Zt)];var Nt,gn=b(ce),yn=1/gn,Cn=2*Ie*gn,Dn=(-St*gn-(1-Ie)*((-3*je+_t*lt)*Cn))/(St*St),Wn=-yn*Cn,sr=-yn*(je*$e*Dn+At*lt*Cn),mr=-2*yn*(ft*(.5*Dn/Ft)-2*je*Ft*Cn),Zn=4*ne/g;if(ne>.222*g||ce<g/4&&ne>.175*g){if(ye=(Ht+je*C(Ot*(1+qe)-Ht*Ht))/(1+qe),ne>g/4)return[ye,ye];var pr=ye,Ar=.5*ye;ye=.5*(Ar+pr),Le=50;do{var Fr=ye*(mr+Wn*C(Ot-ye*ye))+sr*E(ye/Zt)-Zn;if(!Fr)break;Fr<0?Ar=ye:pr=ye,ye=.5*(Ar+pr)}while(k(pr-Ar)>c&&--Le>0)}else{ye=c,Le=25;do{var ar=ye*ye,fr=C(Ot-ar),Er=mr+Wn*fr,yr=ye*Er+sr*E(ye/Zt)-Zn;ye-=Nt=fr?yr/(Er+(sr-Wn*ar)/fr):0}while(k(Nt)>c&&--Le>0)}return[ye,-Ht-je*C(Ot-ye*ye)]}(Xe>g/4?p-Xe:Xe,Je);return Xe>g/4&&(q=Q[0],Q[0]=-Q[1],Q[1]=-q),Q[0]*=ot,Q[1]*=-B,Q}function Nn(){return(0,M.c)(Gn(Rn)).scale(239.75)}function ir(Xe,Je){var ot,B,G,H,L,q;if(Je<c)return[(H=u(Xe))-(ot=Je*(Xe-H*(B=b(Xe)))/4)*B,B+ot*H,1-Je*H*H/2,Xe-ot];if(Je>=1-c)return ot=(1-Je)/4,G=1/(B=R(Xe)),[(H=((q=h(2*(q=Xe)))-1)/(q+1))+ot*((L=B*O(Xe))-Xe)/(B*B),G-ot*H*G*(L-Xe),G+ot*H*G*(L+Xe),2*o(h(Xe))-p+ot*(L-Xe)/B];var Q=[1,0,0,0,0,0,0,0,0],ne=[C(Je),0,0,0,0,0,0,0,0],ce=0;for(B=C(1-Je),L=1;k(ne[ce]/Q[ce])>c&&ce<8;)ot=Q[ce++],ne[ce]=(ot-B)/2,Q[ce]=(ot+B)/2,B=C(ot*B),L*=2;G=L*Q[ce]*Xe;do G=(E(H=ne[ce]*u(B=G)/Q[ce])+G)/2;while(--ce);return[u(G),H=b(G),H/b(G-B),G]}function Gt(Xe,Je){if(!Je)return Xe;if(Je===1)return t(d(Xe/2+v));for(var ot=1,B=C(1-Je),G=C(Je),H=0;k(G)>c;H++){if(Xe%g){var L=o(B*d(Xe)/ot);L<0&&(L+=g),Xe+=L+~~(Xe/g)*g}else Xe+=Xe;G=(ot+B)/2,B=C(ot*B),G=((ot=G)-B)/2}return Xe/(r(2,H)*ot)}function dn(Xe,Je){var ot=(y-1)/(y+1),B=C(1-ot*ot),G=Gt(p,B*B),H=t(d(g/4+k(Je)/2)),L=h(-1*H)/C(ot),q=function(ne,ce){var ye=ne*ne,Le=ce+1,Ie=1-ye-ce*ce;return[.5*((ne>=0?p:-p)-T(Ie,2*ne)),-.25*t(Ie*Ie+4*ye)+.5*t(Le*Le+ye)]}(L*b(-1*Xe),L*u(-1*Xe)),Q=function(ne,ce,ye){var Le=k(ne),Ie=O(k(ce));if(Le){var je=1/u(Le),qe=1/(d(Le)*d(Le)),$e=-(qe+ye*(Ie*Ie*je*je)-1+ye),lt=(-$e+C($e*$e-(ye-1)*qe*4))/2;return[Gt(o(1/C(lt)),ye)*l(ne),Gt(o(C((lt/qe-1)/ye)),1-ye)*l(ce)]}return[0,Gt(o(Ie),1-ye)*l(ce)]}(q[0],q[1],B*B);return[-Q[1],(Je>=0?1:-1)*(.5*G-Q[0])]}function Pt(){return(0,M.c)(Gn(dn)).scale(151.496)}Rn.invert=function(Xe,Je){k(Xe)>1&&(Xe=2*l(Xe)-Xe),k(Je)>1&&(Je=2*l(Je)-Je);var ot=l(Xe),B=l(Je),G=-ot*Xe,H=-B*Je,L=H/G<1,q=function(ye,Le){for(var Ie=0,je=1,qe=.5,$e=50;;){var lt=qe*qe,ft=C(qe),_t=E(1/C(1+lt)),St=1-lt+qe*(1+lt)*_t,At=(1-ft)/St,Ft=C(At),Ot=At*(1+lt),Zt=Ft*(1-lt),Ht=C(Ot-ye*ye),Nt=Le+Zt+qe*Ht;if(k(je-Ie)<x||--$e==0||Nt===0)break;Nt>0?Ie=qe:je=qe,qe=.5*(Ie+je)}if(!$e)return null;var gn=E(ft),yn=b(gn),Cn=1/yn,Dn=2*ft*yn,Wn=(-St*yn-(-3*qe+_t*(1+3*lt))*Dn*(1-ft))/(St*St);return[g/4*(ye*(-2*Cn*((1-lt)*(.5*Wn/Ft)-2*qe*Ft*Dn)+-Cn*Dn*Ht)+-Cn*(qe*(1+lt)*Wn+At*(1+3*lt)*Dn)*E(ye/C(Ot))),gn]}(L?H:G,L?G:H),Q=q[0],ne=q[1],ce=b(ne);return L&&(Q=-p-Q),[ot*(T(u(Q)*ce,-u(ne))+g),B*E(b(Q)*ce)]},dn.invert=function(Xe,Je){var ot,B,G,H,L,q,Q=(y-1)/(y+1),ne=C(1-Q*Q),ce=(B=-Xe,G=ne*ne,(ot=.5*Gt(p,ne*ne)-Je)?(H=ir(ot,G),B?(q=(L=ir(B,1-G))[1]*L[1]+G*H[0]*H[0]*L[0]*L[0],[[H[0]*L[2]/q,H[1]*H[2]*L[0]*L[1]/q],[H[1]*L[1]/q,-H[0]*H[2]*L[0]*L[2]/q],[H[2]*L[1]*L[2]/q,-G*H[0]*H[1]*L[0]/q]]):[[H[0],0],[H[1],0],[H[2],0]]):[[0,(L=ir(B,1-G))[0]/L[1]],[1/L[1],0],[L[2]/L[1],0]]),ye=function(Le,Ie){var je=Ie[0]*Ie[0]+Ie[1]*Ie[1];return[(Le[0]*Ie[0]+Le[1]*Ie[1])/je,(Le[1]*Ie[0]-Le[0]*Ie[1])/je]}(ce[0],ce[1]);return[T(ye[1],ye[0])/-1,2*o(h(-.5*t(Q*ye[0]*ye[0]+Q*ye[1]*ye[1])))-p]};var Yt=e(61780);function Qt(Xe){var Je=u(Xe),ot=b(Xe),B=mn(Xe);function G(H,L){var q=B(H,L);H=q[0],L=q[1];var Q=u(L),ne=b(L),ce=b(H),ye=P(Je*Q+ot*ne*ce),Le=u(ye),Ie=k(Le)>c?ye/Le:1;return[Ie*ot*u(H),(k(H)>p?Ie:-Ie)*(Je*ne-ot*Q*ce)]}return B.invert=mn(-Xe),G.invert=function(H,L){var q=C(H*H+L*L),Q=-u(q),ne=b(q),ce=q*ne,ye=-L*Q,Le=q*Je,Ie=C(ce*ce+ye*ye-Le*Le),je=T(ce*Le+ye*Ie,ye*Le-ce*Ie),qe=(q>p?-1:1)*T(H*Q,q*b(je)*ne+L*u(je)*Q);return B.invert(qe,je)},G}function mn(Xe){var Je=u(Xe),ot=b(Xe);return function(B,G){var H=b(G),L=b(B)*H,q=u(B)*H,Q=u(G);return[T(q,L*ot-Q*Je),E(Q*ot+L*Je)]}}function vn(){var Xe=0,Je=(0,M.U)(Qt),ot=Je(Xe),B=ot.rotate,G=ot.stream,H=(0,Yt.c)();return ot.parallel=function(L){if(!arguments.length)return Xe*S;var q=ot.rotate();return Je(Xe=L*w).rotate(q)},ot.rotate=function(L){return arguments.length?(B.call(ot,[L[0],L[1]-Xe*S]),H.center([-L[0],-L[1]]),ot):((L=B.call(ot))[1]+=Xe*S,L)},ot.stream=function(L){return(L=G(L)).sphere=function(){L.polygonStart();var q,Q=H.radius(89.99)().coordinates[0],ne=Q.length-1,ce=-1;for(L.lineStart();++ce<ne;)L.point((q=Q[ce])[0],q[1]);for(L.lineEnd(),ne=(Q=H.radius(90.01)().coordinates[0]).length-1,L.lineStart();--ce>=0;)L.point((q=Q[ce])[0],q[1]);L.lineEnd(),L.polygonEnd()},L},ot.scale(79.4187).parallel(45).clipAngle(179.999)}var _n=e(84706),sn=e(16016),Kt=E(1-1/3)*S,Jt=Ge(0);function on(Xe){var Je=Kt*w,ot=wt(g,Je)[0]-wt(-g,Je)[0],B=Jt(0,Je)[1],G=wt(0,Je)[1],H=_-G,L=f/Xe,q=4/f,Q=B+H*H*4/f;function ne(ce,ye){var Le,Ie=k(ye);if(Ie>Je){var je=n(Xe-1,i(0,s((ce+g)/L)));(Le=wt(ce+=g*(Xe-1)/Xe-je*L,Ie))[0]=Le[0]*f/ot-f*(Xe-1)/(2*Xe)+je*f/Xe,Le[1]=B+4*(Le[1]-G)*H/f,ye<0&&(Le[1]=-Le[1])}else Le=Jt(ce,ye);return Le[0]*=q,Le[1]/=Q,Le}return ne.invert=function(ce,ye){ce/=q;var Le=k(ye*=Q);if(Le>B){var Ie=n(Xe-1,i(0,s((ce+g)/L)));ce=(ce+g*(Xe-1)/Xe-Ie*L)*ot/f;var je=wt.invert(ce,.25*(Le-B)*f/H+G);return je[0]-=g*(Xe-1)/Xe-Ie*L,ye<0&&(je[1]=-je[1]),je}return Jt.invert(ce,ye)},ne}function fn(Xe,Je){return[Xe,1&Je?90-c:Kt]}function En(Xe,Je){return[Xe,1&Je?-90+c:-Kt]}function On(Xe){return[Xe[0]*(1-c),Xe[1]]}function Vn(){var Xe=4,Je=(0,M.U)(on),ot=Je(Xe),B=ot.stream;return ot.lobes=function(G){return arguments.length?Je(Xe=+G):Xe},ot.stream=function(G){var H=ot.rotate(),L=B(G),q=(ot.rotate([0,0]),B(G));return ot.rotate(H),L.sphere=function(){var Q,ne;(0,sn.c)((Q=180/Xe,ne=[].concat((0,_n.ik)(-180,180+Q/2,Q).map(fn),(0,_n.ik)(180,-180-Q/2,-Q).map(En)),{type:"Polygon",coordinates:[Q===180?ne.map(On):ne]}),q)},L},ot.scale(239.75)}function jn(Xe){var Je,ot=1+Xe,B=E(u(1/ot)),G=2*C(g/(Je=g+4*B*ot)),H=.5*G*(ot+C(Xe*(2+Xe))),L=Xe*Xe,q=ot*ot;function Q(ne,ce){var ye,Le,Ie=1-u(ce);if(Ie&&Ie<2){var je,qe=p-ce,$e=25;do{var lt=u(qe),ft=b(qe),_t=B+T(lt,ot-ft),St=1+q-2*ot*ft;qe-=je=(qe-L*B-ot*lt+St*_t-.5*Ie*Je)/(2*ot*lt*_t)}while(k(je)>x&&--$e>0);ye=G*C(St),Le=ne*_t/g}else ye=G*(Xe+Ie),Le=ne*B/g;return[ye*u(Le),H-ye*b(Le)]}return Q.invert=function(ne,ce){var ye=ne*ne+(ce-=H)*ce,Le=(1+q-ye/(G*G))/(2*ot),Ie=P(Le),je=u(Ie),qe=B+T(je,ot-Le);return[E(ne/C(ye))*g/qe,E(1-2*(Ie-L*B-ot*je+(1+q-2*ot*Le)*qe)/Je)]},Q}function Kn(){var Xe=1,Je=(0,M.U)(jn),ot=Je(Xe);return ot.ratio=function(B){return arguments.length?Je(Xe=+B):Xe},ot.scale(167.774).center([0,18.67])}var Yn=.7109889596207567,nr=.0528035274542;function rr(Xe,Je){return Je>-Yn?((Xe=le(Xe,Je))[1]+=nr,Xe):De(Xe,Je)}function Jn(){return(0,M.c)(rr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function vr(Xe,Je){return k(Je)>Yn?((Xe=le(Xe,Je))[1]-=Je>0?nr:-nr,Xe):De(Xe,Je)}function lr(){return(0,M.c)(vr).scale(152.63)}function dr(Xe,Je,ot,B){var G=C(4*g/(2*ot+(1+Xe-Je/2)*u(2*ot)+(Xe+Je)/2*u(4*ot)+Je/2*u(6*ot))),H=C(B*u(ot)*C((1+Xe*b(2*ot)+Je*b(4*ot))/(1+Xe+Je))),L=ot*Q(1);function q(ye){return C(1+Xe*b(2*ye)+Je*b(4*ye))}function Q(ye){var Le=ye*ot;return(2*Le+(1+Xe-Je/2)*u(2*Le)+(Xe+Je)/2*u(4*Le)+Je/2*u(6*Le))/ot}function ne(ye){return q(ye)*u(ye)}var ce=function(ye,Le){var Ie=ot*ge(Q,L*u(Le)/ot,Le/g);isNaN(Ie)&&(Ie=ot*l(Le));var je=G*q(Ie);return[je*H*ye/g*b(Ie),je/H*u(Ie)]};return ce.invert=function(ye,Le){var Ie=ge(ne,Le*H/G);return[ye*g/(b(Ie)*G*H*q(Ie)),E(ot*Q(Ie/ot)/L)]},ot===0&&(G=C(B/g),(ce=function(ye,Le){return[ye*G,u(Le)/G]}).invert=function(ye,Le){return[ye/G,E(Le*G)]}),ce}function $n(){var Xe=1,Je=0,ot=45*w,B=2,G=(0,M.U)(dr),H=G(Xe,Je,ot,B);return H.a=function(L){return arguments.length?G(Xe=+L,Je,ot,B):Xe},H.b=function(L){return arguments.length?G(Xe,Je=+L,ot,B):Je},H.psiMax=function(L){return arguments.length?G(Xe,Je,ot=+L*w,B):ot*S},H.ratio=function(L){return arguments.length?G(Xe,Je,ot,B=+L):B},H.scale(180.739)}function _r(Xe,Je,ot,B,G,H,L,q,Q,ne,ce){if(ce.nanEncountered)return NaN;var ye,Le,Ie,je,qe,$e,lt,ft,_t,St;if(Le=Xe(Je+.25*(ye=ot-Je)),Ie=Xe(ot-.25*ye),isNaN(Le))ce.nanEncountered=!0;else{if(!isNaN(Ie))return St=(($e=(je=ye*(B+4*Le+G)/12)+(qe=ye*(G+4*Ie+H)/12))-L)/15,ne>Q?(ce.maxDepthCount++,$e+St):Math.abs(St)<q?$e+St:(ft=_r(Xe,Je,lt=Je+.5*ye,B,Le,G,je,.5*q,Q,ne+1,ce),isNaN(ft)?(ce.nanEncountered=!0,NaN):(_t=_r(Xe,lt,ot,G,Ie,H,qe,.5*q,Q,ne+1,ce),isNaN(_t)?(ce.nanEncountered=!0,NaN):ft+_t));ce.nanEncountered=!0}}function Lr(Xe,Je,ot,B,G){B===void 0&&(B=1e-8),G===void 0&&(G=20);var H=Xe(Je),L=Xe(.5*(Je+ot)),q=Xe(ot);return _r(Xe,Je,ot,H,L,q,(H+4*L+q)*(ot-Je)/6,B,G,1,{maxDepthCount:0,nanEncountered:!1})}function Gr(Xe,Je,ot){function B(Ie){return Xe+(1-Xe)*r(1-r(Ie,Je),1/Je)}function G(Ie){return Lr(B,0,Ie,1e-4)}for(var H=1/G(1),L=1e3,q=1.00000001*H,Q=[],ne=0;ne<=L;ne++)Q.push(G(ne/L)*q);function ce(Ie){var je=0,qe=L,$e=500;do Q[$e]>Ie?qe=$e:je=$e,$e=je+qe>>1;while($e>je);var lt=Q[$e+1]-Q[$e];return lt&&(lt=(Ie-Q[$e+1])/lt),($e+1+lt)/L}var ye=2*ce(1)/g*H/ot,Le=function(Ie,je){var qe=ce(k(u(je))),$e=B(qe)*Ie;return qe/=ye,[$e,je>=0?qe:-qe]};return Le.invert=function(Ie,je){var qe;return k(je*=ye)<1&&(qe=l(je)*E(G(k(je))*H)),[Ie/B(k(je)),qe]},Le}function hi(){var Xe=0,Je=2.5,ot=1.183136,B=(0,M.U)(Gr),G=B(Xe,Je,ot);return G.alpha=function(H){return arguments.length?B(Xe=+H,Je,ot):Xe},G.k=function(H){return arguments.length?B(Xe,Je=+H,ot):Je},G.gamma=function(H){return arguments.length?B(Xe,Je,ot=+H):ot},G.scale(152.63)}function di(Xe,Je){return k(Xe[0]-Je[0])<c&&k(Xe[1]-Je[1])<c}function Wi(Xe,Je){for(var ot,B,G,H=-1,L=Xe.length,q=Xe[0],Q=[];++H<L;){B=((ot=Xe[H])[0]-q[0])/Je,G=(ot[1]-q[1])/Je;for(var ne=0;ne<Je;++ne)Q.push([q[0]+ne*B,q[1]+ne*G]);q=ot}return Q.push(ot),Q}function gi(Xe,Je,ot){var B,G;function H(Q,ne){for(var ce=ne<0?-1:1,ye=Je[+(ne<0)],Le=0,Ie=ye.length-1;Le<Ie&&Q>ye[Le][2][0];++Le);var je=Xe(Q-ye[Le][1][0],ne);return je[0]+=Xe(ye[Le][1][0],ce*ne>ce*ye[Le][0][1]?ye[Le][0][1]:ne)[0],je}ot?H.invert=ot(H):Xe.invert&&(H.invert=function(Q,ne){for(var ce=G[+(ne<0)],ye=Je[+(ne<0)],Le=0,Ie=ce.length;Le<Ie;++Le){var je=ce[Le];if(je[0][0]<=Q&&Q<je[1][0]&&je[0][1]<=ne&&ne<je[1][1]){var qe=Xe.invert(Q-Xe(ye[Le][1][0],0)[0],ne);return qe[0]+=ye[Le][1][0],di(H(qe[0],qe[1]),[Q,ne])?qe:null}}});var L=(0,M.c)(H),q=L.stream;return L.stream=function(Q){var ne=L.rotate(),ce=q(Q),ye=(L.rotate([0,0]),q(Q));return L.rotate(ne),ce.sphere=function(){(0,sn.c)(B,ye)},ce},L.lobes=function(Q){return arguments.length?(B=function(ne){var ce,ye,Le,Ie,je,qe,$e,lt=[],ft=ne[0].length;for($e=0;$e<ft;++$e)ye=(ce=ne[0][$e])[0][0],Le=ce[0][1],Ie=ce[1][1],je=ce[2][0],qe=ce[2][1],lt.push(Wi([[ye+c,Le+c],[ye+c,Ie-c],[je-c,Ie-c],[je-c,qe+c]],30));for($e=ne[1].length-1;$e>=0;--$e)ye=(ce=ne[1][$e])[0][0],Le=ce[0][1],Ie=ce[1][1],je=ce[2][0],qe=ce[2][1],lt.push(Wi([[je-c,qe-c],[je-c,Ie+c],[ye+c,Ie+c],[ye+c,Le-c]],30));return{type:"Polygon",coordinates:[(0,_n.Uf)(lt)]}}(Q),Je=Q.map(function(ne){return ne.map(function(ce){return[[ce[0][0]*w,ce[0][1]*w],[ce[1][0]*w,ce[1][1]*w],[ce[2][0]*w,ce[2][1]*w]]})}),G=Je.map(function(ne){return ne.map(function(ce){var ye,Le=Xe(ce[0][0],ce[0][1])[0],Ie=Xe(ce[2][0],ce[2][1])[0],je=Xe(ce[1][0],ce[0][1])[1],qe=Xe(ce[1][0],ce[1][1])[1];return je>qe&&(ye=je,je=qe,qe=ye),[[Le,je],[Ie,qe]]})}),L):Je.map(function(ne){return ne.map(function(ce){return[[ce[0][0]*S,ce[0][1]*S],[ce[1][0]*S,ce[1][1]*S],[ce[2][0]*S,ce[2][1]*S]]})})},Je!=null&&L.lobes(Je),L}rr.invert=function(Xe,Je){return Je>-Yn?le.invert(Xe,Je-nr):De.invert(Xe,Je)},vr.invert=function(Xe,Je){return k(Je)>Yn?le.invert(Xe,Je+(Je>0?nr:-nr)):De.invert(Xe,Je)};var zi=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function _a(){return gi(ke,zi).scale(160.857)}var wa=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function zo(){return gi(vr,wa).scale(152.63)}var nl=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function xs(){return gi(le,nl).scale(169.529)}var bs=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Is(){return gi(le,bs).scale(169.529).rotate([20,0])}var Ja=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Ds(){return gi(rr,Ja,de).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var zs=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function _s(){return gi(De,zs).scale(152.63).rotate([-20,0])}function so(Xe,Je){return[3/f*Xe*C(g*g/3-Je*Je),Je]}function _o(){return(0,M.c)(so).scale(158.837)}function Ro(Xe){function Je(ot,B){if(k(k(B)-p)<c)return[0,B<0?-2:2];var G=u(B),H=r((1+G)/(1-G),Xe/2),L=.5*(H+1/H)+b(ot*=Xe);return[2*u(ot)/L,(H-1/H)/L]}return Je.invert=function(ot,B){var G=k(B);if(k(G-2)<c)return ot?null:[0,l(B)*p];if(G>2)return null;var H=(ot/=2)*ot,L=(B/=2)*B,q=2*B/(1+H+L);return q=r((1+q)/(1-q),1/Xe),[T(2*ot,1-H-L)/Xe,E((q-1)/(q+1))]},Je}function bi(){var Xe=.5,Je=(0,M.U)(Ro),ot=Je(Xe);return ot.spacing=function(B){return arguments.length?Je(Xe=+B):Xe},ot.scale(124.75)}so.invert=function(Xe,Je){return[f/3*Xe/C(g*g/3-Je*Je),Je]};var $i=g/y;function lo(Xe,Je){return[Xe*(1+C(b(Je)))/2,Je/(b(Je/2)*b(Xe/6))]}function Qa(){return(0,M.c)(lo).scale(97.2672)}function Va(Xe,Je){var ot=Xe*Xe,B=Je*Je;return[Xe*(.975534+B*(-.0143059*ot-.119161+-.0547009*B)),Je*(1.00384+ot*(.0802894+-.02855*B+199025e-9*ot)+B*(.0998909+-.0491032*B))]}function uo(){return(0,M.c)(Va).scale(139.98)}function qa(Xe,Je){return[u(Xe)/b(Je),d(Je)*b(Xe)]}function Fo(){return(0,M.c)(qa).scale(144.049).clipAngle(89.999)}function wo(Xe){var Je=b(Xe),ot=d(v+Xe/2);function B(G,H){var L=H-Xe,q=k(L)<c?G*Je:k(q=v+H/2)<c||k(k(q)-p)<c?0:G*L/t(d(q)/ot);return[q,L]}return B.invert=function(G,H){var L,q=H+Xe;return[k(H)<c?G/Je:k(L=v+q/2)<c||k(k(L)-p)<c?0:G*t(d(L)/ot)/H,q]},B}function Bo(){return Ee(wo).parallel(40).scale(158.837)}function co(Xe,Je){return[Xe,1.25*t(d(v+.4*Je))]}function Ks(){return(0,M.c)(co).scale(108.318)}function Jo(Xe){var Je=Xe.length-1;function ot(B,G){for(var H,L=b(G),q=2/(1+L*b(B)),Q=q*L*u(B),ne=q*u(G),ce=Je,ye=Xe[ce],Le=ye[0],Ie=ye[1];--ce>=0;)Le=(ye=Xe[ce])[0]+Q*(H=Le)-ne*Ie,Ie=ye[1]+Q*Ie+ne*H;return[Le=Q*(H=Le)-ne*Ie,Ie=Q*Ie+ne*H]}return ot.invert=function(B,G){var H=20,L=B,q=G;do{for(var Q,ne=Je,ce=Xe[ne],ye=ce[0],Le=ce[1],Ie=0,je=0;--ne>=0;)Ie=ye+L*(Q=Ie)-q*je,je=Le+L*je+q*Q,ye=(ce=Xe[ne])[0]+L*(Q=ye)-q*Le,Le=ce[1]+L*Le+q*Q;var qe,$e,lt=(Ie=ye+L*(Q=Ie)-q*je)*Ie+(je=Le+L*je+q*Q)*je;L-=qe=((ye=L*(Q=ye)-q*Le-B)*Ie+(Le=L*Le+q*Q-G)*je)/lt,q-=$e=(Le*Ie-ye*je)/lt}while(k(qe)+k($e)>c*c&&--H>0);if(H){var ft=C(L*L+q*q),_t=2*o(.5*ft),St=u(_t);return[T(L*St,ft*b(_t)),ft?E(q*St/ft):0]}},ot}lo.invert=function(Xe,Je){var ot=k(Xe),B=k(Je),G=c,H=p;B<$i?H*=B/$i:G+=6*P($i/B);for(var L=0;L<25;L++){var q=u(H),Q=C(b(H)),ne=u(H/2),ce=b(H/2),ye=u(G/6),Le=b(G/6),Ie=.5*G*(1+Q)-ot,je=H/(ce*Le)-B,qe=Q?-.25*G*q/Q:0,$e=.5*(1+Q),lt=(1+.5*H*ne/ce)/(ce*Le),ft=H/ce*(ye/6)/(Le*Le),_t=qe*ft-lt*$e,St=(Ie*ft-je*$e)/_t,At=(je*qe-Ie*lt)/_t;if(H-=St,G-=At,k(St)<c&&k(At)<c)break}return[Xe<0?-G:G,Je<0?-H:H]},Va.invert=function(Xe,Je){var ot=l(Xe)*g,B=Je/2,G=50;do{var H=ot*ot,L=B*B,q=ot*B,Q=ot*(.975534+L*(-.0143059*H-.119161+-.0547009*L))-Xe,ne=B*(1.00384+H*(.0802894+-.02855*L+199025e-9*H)+L*(.0998909+-.0491032*L))-Je,ce=.975534-L*(.119161+3*H*.0143059+.0547009*L),ye=-q*(.238322+.2188036*L+.0286118*H),Le=q*(.1605788+7961e-7*H+-.0571*L),Ie=1.00384+H*(.0802894+199025e-9*H)+L*(3*(.0998909-.02855*H)-.245516*L),je=ye*Le-Ie*ce,qe=(ne*ye-Q*Ie)/je,$e=(Q*Le-ne*ce)/je;ot-=qe,B-=$e}while((k(qe)>c||k($e)>c)&&--G>0);return G&&[ot,B]},qa.invert=function(Xe,Je){var ot=Xe*Xe,B=Je*Je+1,G=ot+B,H=Xe?m*C((G-C(G*G-4*ot))/ot):1/C(B);return[E(Xe*H),l(Je)*P(H)]},co.invert=function(Xe,Je){return[Xe,2.5*o(h(.8*Je))-.625*g]};var Qo=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],rl=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],il=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],fo=[[.9245,0],[0,0],[.01943,0]],al=[[.721316,0],[0,0],[-.00881625,-.00617325]];function ol(){return No(Qo,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function sl(){return No(rl,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function $o(){return No(il,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Ha(){return No(fo,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function To(){return No(al,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function No(Xe,Je){var ot=(0,M.c)(Jo(Xe)).rotate(Je).clipAngle(90),B=(0,Ze.c)(Je),G=ot.center;return delete ot.rotate,ot.center=function(H){return arguments.length?G(B(H)):B.invert(G())},ot}var cs=C(6),jo=C(7);function Ga(Xe,Je){var ot=E(7*u(Je)/(3*cs));return[cs*Xe*(2*b(2*ot/3)-1)/jo,9*u(ot/3)/jo]}function da(){return(0,M.c)(Ga).scale(164.859)}function Uo(Xe,Je){for(var ot,B=(1+m)*u(Je),G=Je,H=0;H<25&&(G-=ot=(u(G/2)+u(G)-B)/(.5*b(G/2)+b(G)),!(k(ot)<c));H++);return[Xe*(1+2*b(G)/b(G/2))/(3*y),2*C(3)*u(G/2)/C(2+y)]}function ko(){return(0,M.c)(Uo).scale(188.209)}function Ao(Xe,Je){for(var ot,B=C(6/(4+g)),G=(1+g/4)*u(Je),H=Je/2,L=0;L<25&&(H-=ot=(H/2+u(H)-G)/(.5+b(H)),!(k(ot)<c));L++);return[B*(.5+b(H))*Xe/1.5,B*H]}function Vo(){return(0,M.c)(Ao).scale(166.518)}Ga.invert=function(Xe,Je){var ot=3*E(Je*jo/9);return[Xe*jo/(cs*(2*b(2*ot/3)-1)),E(3*u(ot)*cs/7)]},Uo.invert=function(Xe,Je){var ot=Je*C(2+y)/(2*C(3)),B=2*E(ot);return[3*y*Xe/(1+2*b(B)/b(B/2)),E((ot+u(B))/(1+m))]},Ao.invert=function(Xe,Je){var ot=C(6/(4+g)),B=Je/ot;return k(k(B)-p)<c&&(B=B<0?-p:p),[1.5*Xe/(ot*(.5+b(B))),E((B/2+u(B))/(1+g/4))]};var ei=e(47984);function fs(Xe,Je){var ot=Je*Je,B=ot*ot,G=ot*B;return[Xe*(.84719-.13063*ot+G*G*(.05494*ot-.04515-.02326*B+.00331*G)),Je*(1.01183+B*B*(.01926*ot-.02625-.00396*B))]}function xl(){return(0,M.c)(fs).scale(175.295)}function Rs(Xe,Je){return[Xe*(1+b(Je))/2,2*(Je-d(Je/2))]}function hs(){return(0,M.c)(Rs).scale(152.63)}fs.invert=function(Xe,Je){var ot,B,G,H,L=Je,q=25;do L-=ot=(L*(1.01183+(G=(B=L*L)*B)*G*(.01926*B-.02625-.00396*G))-Je)/(1.01183+G*G*(.21186*B-.23625+-.05148*G));while(k(ot)>x&&--q>0);return[Xe/(.84719-.13063*(B=L*L)+(H=B*(G=B*B))*H*(.05494*B-.04515-.02326*G+.00331*H)),L]},Rs.invert=function(Xe,Je){for(var ot=Je/2,B=0,G=1/0;B<10&&k(G)>c;++B){var H=b(Je/2);Je-=G=(Je-d(Je/2)-ot)/(1-.5/(H*H))}return[2*Xe/(1+b(Je)),Je]};var ll=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function bl(){return gi(ue(1/0),ll).rotate([20,0]).scale(152.63)}function Fs(Xe,Je){var ot=u(Je),B=b(Je),G=l(Xe);if(Xe===0||k(Je)===p)return[0,Je];if(Je===0)return[Xe,0];if(k(Xe)===p)return[Xe*B,p*ot];var H=g/(2*Xe)-2*Xe/g,L=2*Je/g,q=(1-L*L)/(ot-L),Q=H*H,ne=q*q,ce=1+Q/ne,ye=1+ne/Q,Le=(H*ot/q-H/2)/ce,Ie=(ne*ot/Q+q/2)/ye,je=Ie*Ie-(ne*ot*ot/Q+q*ot-1)/ye;return[p*(Le+C(Le*Le+B*B/ce)*G),p*(Ie+C(je<0?0:je)*l(-Je*H)*G)]}function ul(){return(0,M.c)(Fs).scale(127.267)}Fs.invert=function(Xe,Je){var ot=(Xe/=p)*Xe,B=ot+(Je/=p)*Je,G=g*g;return[Xe?(B-1+C((1-B)*(1-B)+4*ot))/(2*Xe)*p:0,ge(function(H){return B*(g*u(H)-2*H)*g+4*H*H*(Je-u(H))+2*g*H-G*Je},0)]};var Mo=1.0148,es=.23185,So=-.14499,$a=.02406,ps=Mo,cl=5*es,ws=7*So,Bs=9*$a,Ra=1.790857183;function Ns(Xe,Je){var ot=Je*Je;return[Xe,Je*(Mo+ot*ot*(es+ot*(So+$a*ot)))]}function ht(){return(0,M.c)(Ns).scale(139.319)}function kt(Xe,Je){if(k(Je)<c)return[Xe,0];var ot=d(Je),B=Xe*u(Je);return[u(B)/ot,Je+(1-b(B))/ot]}function $t(){return(0,M.c)(kt).scale(103.74)}Ns.invert=function(Xe,Je){Je>Ra?Je=Ra:Je<-1.790857183&&(Je=-1.790857183);var ot,B=Je;do{var G=B*B;B-=ot=(B*(Mo+G*G*(es+G*(So+$a*G)))-Je)/(ps+G*G*(cl+G*(ws+Bs*G)))}while(k(ot)>c);return[Xe,B]},kt.invert=function(Xe,Je){if(k(Je)<c)return[Xe,0];var ot,B=Xe*Xe+Je*Je,G=.5*Je,H=10;do{var L=d(G),q=1/b(G),Q=B-2*Je*G+G*G;G-=ot=(L*Q+2*(G-Je))/(2+Q*q*q+2*(G-Je)*L)}while(k(ot)>c&&--H>0);return L=d(G),[(k(Je)<k(G+1/L)?E(Xe*L):l(Je)*l(Xe)*(P(k(Xe*L))+p))/u(G),G]};var bn=e(13696),qn=e(27284);function hr(Xe,Je){return[Xe[0]*Je[0]+Xe[1]*Je[3],Xe[0]*Je[1]+Xe[1]*Je[4],Xe[0]*Je[2]+Xe[1]*Je[5]+Xe[2],Xe[3]*Je[0]+Xe[4]*Je[3],Xe[3]*Je[1]+Xe[4]*Je[4],Xe[3]*Je[2]+Xe[4]*Je[5]+Xe[5]]}function xr(Xe,Je){return[Xe[0]-Je[0],Xe[1]-Je[1]]}function wr(Xe){return C(Xe[0]*Xe[0]+Xe[1]*Xe[1])}function gr(Xe,Je,ot){function B(q,Q){var ne,ce=Je(q,Q),ye=ce.project([q*S,Q*S]);return(ne=ce.transform)?[ne[0]*ye[0]+ne[1]*ye[1]+ne[2],-(ne[3]*ye[0]+ne[4]*ye[1]+ne[5])]:(ye[1]=-ye[1],ye)}function G(q,Q){var ne=q.project.invert,ce=q.transform,ye=Q;if(ce&&(ce=function($e){var lt=1/($e[0]*$e[4]-$e[1]*$e[3]);return[lt*$e[4],-lt*$e[1],lt*($e[1]*$e[5]-$e[2]*$e[4]),-lt*$e[3],lt*$e[0],lt*($e[2]*$e[3]-$e[0]*$e[5])]}(ce),ye=[ce[0]*ye[0]+ce[1]*ye[1]+ce[2],ce[3]*ye[0]+ce[4]*ye[1]+ce[5]]),ne&&q===function($e){return Je($e[0]*w,$e[1]*w)}(Le=ne(ye)))return Le;for(var Le,Ie=q.children,je=0,qe=Ie&&Ie.length;je<qe;++je)if(Le=G(Ie[je],Q))return Le}(function q(Q,ne){if(Q.edges=function(At){for(var Ft=At.length,Ot=[],Zt=At[Ft-1],Ht=0;Ht<Ft;++Ht)Ot.push([Zt,Zt=At[Ht]]);return Ot}(Q.face),ne.face){var ce=Q.shared=function(At,Ft){for(var Ot,Zt,Ht=At.length,Nt=null,gn=0;gn<Ht;++gn){Ot=At[gn];for(var yn=Ft.length;--yn>=0;)if(Zt=Ft[yn],Ot[0]===Zt[0]&&Ot[1]===Zt[1]){if(Nt)return[Nt,Ot];Nt=Ot}}}(Q.face,ne.face),ye=(qe=ce.map(ne.project),$e=ce.map(Q.project),lt=xr(qe[1],qe[0]),ft=xr($e[1],$e[0]),_t=function(At,Ft){return T(At[0]*Ft[1]-At[1]*Ft[0],At[0]*Ft[0]+At[1]*Ft[1])}(lt,ft),St=wr(lt)/wr(ft),hr([1,0,qe[0][0],0,1,qe[0][1]],hr([St,0,0,0,St,0],hr([b(_t),u(_t),0,-u(_t),b(_t),0],[1,0,-$e[0][0],0,1,-$e[0][1]]))));Q.transform=ne.transform?hr(ne.transform,ye):ye;for(var Le=ne.edges,Ie=0,je=Le.length;Ie<je;++Ie)Wr(ce[0],Le[Ie][1])&&Wr(ce[1],Le[Ie][0])&&(Le[Ie]=Q),Wr(ce[0],Le[Ie][0])&&Wr(ce[1],Le[Ie][1])&&(Le[Ie]=Q);for(Ie=0,je=(Le=Q.edges).length;Ie<je;++Ie)Wr(ce[0],Le[Ie][0])&&Wr(ce[1],Le[Ie][1])&&(Le[Ie]=ne),Wr(ce[0],Le[Ie][1])&&Wr(ce[1],Le[Ie][0])&&(Le[Ie]=ne)}else Q.transform=ne.transform;var qe,$e,lt,ft,_t,St;return Q.children&&Q.children.forEach(function(At){q(At,Q)}),Q})(Xe,{transform:null}),Kr(Xe)&&(B.invert=function(q,Q){var ne=G(Xe,[q,-Q]);return ne&&(ne[0]*=w,ne[1]*=w,ne)});var H=(0,M.c)(B),L=H.stream;return H.stream=function(q){var Q=H.rotate(),ne=L(q),ce=(H.rotate([0,0]),L(q));return H.rotate(Q),ne.sphere=function(){ce.polygonStart(),ce.lineStart(),jr(ce,Xe),ce.lineEnd(),ce.polygonEnd()},ne},H.angle(ot==null?-30:ot*S)}function jr(Xe,Je,ot){var B,G,H=Je.edges,L=H.length,q={type:"MultiPoint",coordinates:Je.face},Q=Je.face.filter(function(qe){return k(qe[1])!==90}),ne=(0,bn.c)({type:"MultiPoint",coordinates:Q}),ce=!1,ye=-1,Le=ne[1][0]-ne[0][0],Ie=Le===180||Le===360?[(ne[0][0]+ne[1][0])/2,(ne[0][1]+ne[1][1])/2]:(0,Ve.c)(q);if(ot)for(;++ye<L&&H[ye]!==ot;);++ye;for(var je=0;je<L;++je)G=H[(je+ye)%L],Array.isArray(G)?(ce||(Xe.point((B=(0,qn.c)(G[0],Ie)(c))[0],B[1]),ce=!0),Xe.point((B=(0,qn.c)(G[1],Ie)(c))[0],B[1])):(ce=!1,G!==ot&&jr(Xe,G,Je))}function Wr(Xe,Je){return Xe&&Je&&Xe[0]===Je[0]&&Xe[1]===Je[1]}function Kr(Xe){return Xe.project.invert||Xe.children&&Xe.children.some(Kr)}var Nr=e(53285),Ir=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],$r=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Xe){return Xe.map(function(Je){return Ir[Je]})});function Ti(Xe){Xe=Xe||function(ot){var B=(0,Ve.c)({type:"MultiPoint",coordinates:ot});return(0,Nr.c)().scale(1).translate([0,0]).rotate([-B[0],-B[1]])};var Je=$r.map(function(ot){return{face:ot,project:Xe(ot)}});return[-1,0,0,1,0,1,4,5].forEach(function(ot,B){var G=Je[ot];G&&(G.children||(G.children=[])).push(Je[B])}),gr(Je[0],function(ot,B){return Je[ot<-g/2?B<0?6:4:ot<0?B<0?2:0:ot<g/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var _i=2/C(3);function Oi(Xe,Je){var ot=wt(Xe,Je);return[ot[0]*_i,ot[1]]}function ga(Xe){Xe=Xe||function(ot){var B=(0,Ve.c)({type:"MultiPoint",coordinates:ot});return(0,M.c)(Oi).translate([0,0]).scale(1).rotate(B[1]>0?[-B[0],0]:[180-B[0],180])};var Je=$r.map(function(ot){return{face:ot,project:Xe(ot)}});return[-1,0,0,1,0,1,4,5].forEach(function(ot,B){var G=Je[ot];G&&(G.children||(G.children=[])).push(Je[B])}),gr(Je[0],function(ot,B){return Je[ot<-g/2?B<0?6:4:ot<0?B<0?2:0:ot<g/2?B<0?3:1:B<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function sa(Xe){Xe=Xe||function(H){var L=H.length===6?(0,Ve.c)({type:"MultiPoint",coordinates:H}):H[0];return(0,Nr.c)().scale(1).translate([0,0]).rotate([-L[0],-L[1]])};var Je=$r.map(function(H){for(var L,q=H.map(eo),Q=q.length,ne=q[Q-1],ce=[],ye=0;ye<Q;++ye)L=q[ye],ce.push(Wa([.9486832980505138*ne[0]+.31622776601683794*L[0],.9486832980505138*ne[1]+.31622776601683794*L[1],.9486832980505138*ne[2]+.31622776601683794*L[2]]),Wa([.9486832980505138*L[0]+.31622776601683794*ne[0],.9486832980505138*L[1]+.31622776601683794*ne[1],.9486832980505138*L[2]+.31622776601683794*ne[2]])),ne=L;return ce}),ot=[],B=[-1,0,0,1,0,1,4,5];Je.forEach(function(H,L){for(var q,Q,ne=$r[L],ce=ne.length,ye=ot[L]=[],Le=0;Le<ce;++Le)Je.push([ne[Le],H[(2*Le+2)%(2*ce)],H[(2*Le+1)%(2*ce)]]),B.push(L),ye.push((q=eo(H[(2*Le+2)%(2*ce)]),Q=eo(H[(2*Le+1)%(2*ce)]),[q[1]*Q[2]-q[2]*Q[1],q[2]*Q[0]-q[0]*Q[2],q[0]*Q[1]-q[1]*Q[0]]))});var G=Je.map(function(H){return{project:Xe(H),face:H}});return B.forEach(function(H,L){var q=G[H];q&&(q.children||(q.children=[])).push(G[L])}),gr(G[0],function(H,L){var q=b(L),Q=[q*b(H),q*u(H),u(L)],ne=H<-g/2?L<0?6:4:H<0?L<0?2:0:H<g/2?L<0?3:1:L<0?7:5,ce=ot[ne];return G[Yi(ce[0],Q)<0?8+3*ne:Yi(ce[1],Q)<0?8+3*ne+1:Yi(ce[2],Q)<0?8+3*ne+2:ne]}).angle(-30).scale(110.625).center([0,45])}function Yi(Xe,Je){for(var ot=0,B=Xe.length,G=0;ot<B;++ot)G+=Xe[ot]*Je[ot];return G}function Wa(Xe){return[T(Xe[1],Xe[0])*S,E(i(-1,n(1,Xe[2])))*S]}function eo(Xe){var Je=Xe[0]*w,ot=Xe[1]*w,B=b(ot);return[B*b(Je),B*u(Je),u(ot)]}function li(){}function Ta(Xe,Je){var ot,B=Je.stream;if(!B)throw new Error("invalid projection");switch(Xe&&Xe.type){case"Feature":ot=Ri;break;case"FeatureCollection":ot=Xi;break;default:ot=la}return ot(Xe,B)}function Xi(Xe,Je){return{type:"FeatureCollection",features:Xe.features.map(function(ot){return Ri(ot,Je)})}}function Ri(Xe,Je){return{type:"Feature",id:Xe.id,properties:Xe.properties,geometry:la(Xe.geometry,Je)}}function la(Xe,Je){if(!Xe)return null;if(Xe.type==="GeometryCollection")return function(B,G){return{type:"GeometryCollection",geometries:B.geometries.map(function(H){return la(H,G)})}}(Xe,Je);var ot;switch(Xe.type){case"Point":case"MultiPoint":ot=Eo;break;case"LineString":case"MultiLineString":ot=ds;break;case"Polygon":case"MultiPolygon":case"Sphere":ot=ho;break;default:return null}return(0,sn.c)(Xe,Je(ot)),ot.result()}Oi.invert=function(Xe,Je){return wt.invert(Xe/_i,Je)};var wi=[],ua=[],Eo={point:function(Xe,Je){wi.push([Xe,Je])},result:function(){var Xe=wi.length?wi.length<2?{type:"Point",coordinates:wi[0]}:{type:"MultiPoint",coordinates:wi}:null;return wi=[],Xe}},ds={lineStart:li,point:function(Xe,Je){wi.push([Xe,Je])},lineEnd:function(){wi.length&&(ua.push(wi),wi=[])},result:function(){var Xe=ua.length?ua.length<2?{type:"LineString",coordinates:ua[0]}:{type:"MultiLineString",coordinates:ua}:null;return ua=[],Xe}},ho={polygonStart:li,lineStart:li,point:function(Xe,Je){wi.push([Xe,Je])},lineEnd:function(){var Xe=wi.length;if(Xe){do wi.push(wi[0].slice());while(++Xe<4);ua.push(wi),wi=[]}},polygonEnd:li,result:function(){if(!ua.length)return null;var Xe=[],Je=[];return ua.forEach(function(ot){(function(B){if((G=B.length)<4)return!1;for(var G,H=0,L=B[G-1][1]*B[0][0]-B[G-1][0]*B[0][1];++H<G;)L+=B[H-1][1]*B[H][0]-B[H-1][0]*B[H][1];return L<=0})(ot)?Xe.push([ot]):Je.push(ot)}),Je.forEach(function(ot){var B=ot[0];Xe.some(function(G){if(function(H,L){for(var q=L[0],Q=L[1],ne=!1,ce=0,ye=H.length,Le=ye-1;ce<ye;Le=ce++){var Ie=H[ce],je=Ie[0],qe=Ie[1],$e=H[Le],lt=$e[0],ft=$e[1];qe>Q^ft>Q&&q<(lt-je)*(Q-qe)/(ft-qe)+je&&(ne=!ne)}return ne}(G[0],B))return G.push(ot),!0})||Xe.push([ot])}),ua=[],Xe.length?Xe.length>1?{type:"MultiPolygon",coordinates:Xe}:{type:"Polygon",coordinates:Xe[0]}:null}};function ts(Xe){var Je=Xe(p,0)[0]-Xe(-p,0)[0];function ot(B,G){var H=k(B)<p,L=Xe(H?B:B>0?B-g:B+g,G),q=(L[0]-L[1])*m,Q=(L[0]+L[1])*m;if(H)return[q,Q];var ne=Je*m,ce=q>0^Q>0?-1:1;return[ce*q-l(Q)*ne,ce*Q-l(q)*ne]}return Xe.invert&&(ot.invert=function(B,G){var H=(B+G)*m,L=(G-B)*m,q=k(H)<.5*Je&&k(L)<.5*Je;if(!q){var Q=Je*m,ne=H>0^L>0?-1:1,ce=-ne*B+(L>0?1:-1)*Q,ye=-ne*G+(H>0?1:-1)*Q;H=(-ce-ye)*m,L=(ce-ye)*m}var Le=Xe.invert(H,L);return q||(Le[0]+=H>0?g:-g),Le}),(0,M.c)(ot).rotate([-90,-90,45]).clipAngle(179.999)}function Ea(){return ts(Rn).scale(176.423)}function gs(){return ts(dn).scale(111.48)}function qo(Xe,Je){if(!(0<=(Je=+Je)&&Je<=20))throw new Error("invalid digits");function ot(ne){var ce=ne.length,ye=2,Le=new Array(ce);for(Le[0]=+ne[0].toFixed(Je),Le[1]=+ne[1].toFixed(Je);ye<ce;)Le[ye]=ne[ye],++ye;return Le}function B(ne){return ne.map(ot)}function G(ne){for(var ce=ot(ne[0]),ye=[ce],Le=1;Le<ne.length;Le++){var Ie=ot(ne[Le]);(Ie.length>2||Ie[0]!=ce[0]||Ie[1]!=ce[1])&&(ye.push(Ie),ce=Ie)}return ye.length===1&&ne.length>1&&ye.push(ot(ne[ne.length-1])),ye}function H(ne){return ne.map(G)}function L(ne){if(ne==null)return ne;var ce;switch(ne.type){case"GeometryCollection":ce={type:"GeometryCollection",geometries:ne.geometries.map(L)};break;case"Point":ce={type:"Point",coordinates:ot(ne.coordinates)};break;case"MultiPoint":ce={type:ne.type,coordinates:B(ne.coordinates)};break;case"LineString":ce={type:ne.type,coordinates:G(ne.coordinates)};break;case"MultiLineString":case"Polygon":ce={type:ne.type,coordinates:H(ne.coordinates)};break;case"MultiPolygon":ce={type:"MultiPolygon",coordinates:ne.coordinates.map(H)};break;default:return ne}return ne.bbox!=null&&(ce.bbox=ne.bbox),ce}function q(ne){var ce={type:"Feature",properties:ne.properties,geometry:L(ne.geometry)};return ne.id!=null&&(ce.id=ne.id),ne.bbox!=null&&(ce.bbox=ne.bbox),ce}if(Xe!=null)switch(Xe.type){case"Feature":return q(Xe);case"FeatureCollection":var Q={type:"FeatureCollection",features:Xe.features.map(q)};return Xe.bbox!=null&&(Q.bbox=Xe.bbox),Q;default:return L(Xe)}return Xe}function to(Xe){var Je=u(Xe);function ot(B,G){var H=Je?d(B*Je/2)/Je:B/2;if(!G)return[2*H,-Xe];var L=2*o(H*u(G)),q=1/d(G);return[u(L)*q,G+(1-b(L))*q-Xe]}return ot.invert=function(B,G){if(k(G+=Xe)<c)return[Je?2*o(Je*B/2)/Je:B,0];var H,L=B*B+G*G,q=0,Q=10;do{var ne=d(q),ce=1/b(q),ye=L-2*G*q+q*q;q-=H=(ne*ye+2*(q-G))/(2+ye*ce*ce+2*(q-G)*ne)}while(k(H)>c&&--Q>0);var Le=B*(ne=d(q)),Ie=d(k(G)<k(q+1/ne)?.5*E(Le):.5*P(Le)+g/4)/u(q);return[Je?2*o(Je*Ie)/Je:2*Ie,q]},ot}function no(){return Ee(to).scale(131.215)}var ki=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function po(Xe,Je){var ot,B=n(18,36*k(Je)/g),G=s(B),H=B-G,L=(ot=ki[G])[0],q=ot[1],Q=(ot=ki[++G])[0],ne=ot[1],ce=(ot=ki[n(19,++G)])[0],ye=ot[1];return[Xe*(Q+H*(ce-L)/2+H*H*(ce-2*Q+L)/2),(Je>0?p:-p)*(ne+H*(ye-q)/2+H*H*(ye-2*ne+q)/2)]}function Dr(){return(0,M.c)(po).scale(152.63)}function js(Xe,Je){var ot=function(L){function q(Q,ne){var ce=b(ne),ye=(L-1)/(L-ce*b(Q));return[ye*ce*u(Q),ye*u(ne)]}return q.invert=function(Q,ne){var ce=Q*Q+ne*ne,ye=C(ce),Le=(L-C(1-ce*(L+1)/(L-1)))/((L-1)/ye+ye/(L-1));return[T(Q*Le,ye*C(1-Le*Le)),ye?E(ne*Le/ye):0]},q}(Xe);if(!Je)return ot;var B=b(Je),G=u(Je);function H(L,q){var Q=ot(L,q),ne=Q[1],ce=ne*G/(Xe-1)+B;return[Q[0]*B/ce,ne/ce]}return H.invert=function(L,q){var Q=(Xe-1)/(Xe-1-q*G);return ot.invert(Q*L,Q*q*B)},H}function fl(){var Xe=2,Je=0,ot=(0,M.U)(js),B=ot(Xe,Je);return B.distance=function(G){return arguments.length?ot(Xe=+G,Je):Xe},B.tilt=function(G){return arguments.length?ot(Xe,Je=G*w):Je*S},B.scale(432.147).clipAngle(P(1/Xe)*S-1e-6)}ki.forEach(function(Xe){Xe[1]*=1.0144}),po.invert=function(Xe,Je){var ot=Je/p,B=90*ot,G=n(18,k(B/5)),H=i(0,s(G));do{var L=ki[H][1],q=ki[H+1][1],Q=ki[n(19,H+2)][1],ne=Q-L,ce=Q-2*q+L,ye=2*(k(ot)-q)/ne,Le=ce/ne,Ie=ye*(1-Le*ye*(1-2*Le*ye));if(Ie>=0||H===1){B=(Je>=0?5:-5)*(Ie+G);var je,qe=50;do Ie=(G=n(18,k(B)/5))-(H=s(G)),L=ki[H][1],q=ki[H+1][1],Q=ki[n(19,H+2)][1],B-=(je=(Je>=0?p:-p)*(q+Ie*(Q-L)/2+Ie*Ie*(Q-2*q+L)/2)-Je)*S;while(k(je)>x&&--qe>0);break}}while(--H>=0);var $e=ki[H][0],lt=ki[H+1][0],ft=ki[n(19,H+2)][0];return[Xe/(lt+Ie*(ft-$e)/2+Ie*Ie*(ft-2*lt+$e)/2),B*w]};var ns=1e-4,rs=1e4,vs=-180,Ts=vs+ns,kr=180,Us=kr-ns,Ho=-90,ra=Ho+ns,is=90,go=is-ns;function ro(Xe){return Xe.length>0}function ka(Xe){return Xe===Ho||Xe===is?[0,Xe]:[vs,(Je=Xe,Math.floor(Je*rs)/rs)];var Je}function Lo(Xe){var Je=Xe[0],ot=Xe[1],B=!1;return Je<=Ts?(Je=vs,B=!0):Je>=Us&&(Je=kr,B=!0),ot<=ra?(ot=Ho,B=!0):ot>=go&&(ot=is,B=!0),B?[Je,ot]:Xe}function io(Xe){return Xe.map(Lo)}function Go(Xe,Je,ot){for(var B=0,G=Xe.length;B<G;++B){var H=Xe[B].slice();ot.push({index:-1,polygon:Je,ring:H});for(var L=0,q=H.length;L<q;++L){var Q=H[L],ne=Q[0],ce=Q[1];if(ne<=Ts||ne>=Us||ce<=ra||ce>=go){H[L]=Lo(Q);for(var ye=L+1;ye<q;++ye){var Le=H[ye],Ie=Le[0],je=Le[1];if(Ie>Ts&&Ie<Us&&je>ra&&je<go)break}if(ye===L+1)continue;if(L){var qe={index:-1,polygon:Je,ring:H.slice(0,L+1)};qe.ring[qe.ring.length-1]=ka(ce),ot[ot.length-1]=qe}else ot.pop();if(ye>=q)break;ot.push({index:-1,polygon:Je,ring:H=H.slice(ye-1)}),H[0]=ka(H[0][1]),L=-1,q=H.length}}}}function Vs(Xe){var Je,ot,B,G,H,L,q=Xe.length,Q={},ne={};for(Je=0;Je<q;++Je)B=(ot=Xe[Je]).ring[0],H=ot.ring[ot.ring.length-1],B[0]!==H[0]||B[1]!==H[1]?(ot.index=Je,Q[B]=ne[H]=ot):(ot.polygon.push(ot.ring),Xe[Je]=null);for(Je=0;Je<q;++Je)if(ot=Xe[Je]){if(B=ot.ring[0],H=ot.ring[ot.ring.length-1],G=ne[B],L=Q[H],delete Q[B],delete ne[H],B[0]===H[0]&&B[1]===H[1]){ot.polygon.push(ot.ring);continue}G?(delete ne[B],delete Q[G.ring[0]],G.ring.pop(),Xe[G.index]=null,ot={index:-1,polygon:G.polygon,ring:G.ring.concat(ot.ring)},G===L?ot.polygon.push(ot.ring):(ot.index=q++,Xe.push(Q[ot.ring[0]]=ne[ot.ring[ot.ring.length-1]]=ot))):L?(delete Q[H],delete ne[L.ring[L.ring.length-1]],ot.ring.pop(),ot={index:q++,polygon:L.polygon,ring:ot.ring.concat(L.ring)},Xe[L.index]=null,Xe.push(Q[ot.ring[0]]=ne[ot.ring[ot.ring.length-1]]=ot)):(ot.ring.push(ot.ring[0]),ot.polygon.push(ot.ring))}}function as(Xe){var Je={type:"Feature",geometry:oi(Xe.geometry)};return Xe.id!=null&&(Je.id=Xe.id),Xe.bbox!=null&&(Je.bbox=Xe.bbox),Xe.properties!=null&&(Je.properties=Xe.properties),Je}function oi(Xe){if(Xe==null)return Xe;var Je,ot,B,G;switch(Xe.type){case"GeometryCollection":Je={type:"GeometryCollection",geometries:Xe.geometries.map(oi)};break;case"Point":Je={type:"Point",coordinates:Lo(Xe.coordinates)};break;case"MultiPoint":case"LineString":Je={type:Xe.type,coordinates:io(Xe.coordinates)};break;case"MultiLineString":Je={type:"MultiLineString",coordinates:Xe.coordinates.map(io)};break;case"Polygon":var H=[];Go(Xe.coordinates,H,ot=[]),Vs(ot),Je={type:"Polygon",coordinates:H};break;case"MultiPolygon":ot=[],B=-1,G=Xe.coordinates.length;for(var L=new Array(G);++B<G;)Go(Xe.coordinates[B],L[B]=[],ot);Vs(ot),Je={type:"MultiPolygon",coordinates:L.filter(ro)};break;default:return Xe}return Xe.bbox!=null&&(Je.bbox=Xe.bbox),Je}function ca(Xe){if(Xe==null)return Xe;switch(Xe.type){case"Feature":return as(Xe);case"FeatureCollection":var Je={type:"FeatureCollection",features:Xe.features.map(as)};return Xe.bbox!=null&&(Je.bbox=Xe.bbox),Je;default:return oi(Xe)}}function La(Xe,Je){var ot=d(Je/2),B=u(v*ot);return[Xe*(.74482-.34588*B*B),1.70711*ot]}function Co(){return(0,M.c)(La).scale(146.153)}function Ca(Xe,Je,ot){var B=(0,qn.c)(Je,ot),G=B(.5),H=(0,Ze.c)([-G[0],-G[1]])(Je),L=B.distance/2,q=-E(u(H[1]*w)/u(L)),Q=[-G[0],-G[1],-(H[0]>0?g-q:q)*S],ne=(0,M.c)(Xe(L)).rotate(Q),ce=(0,Ze.c)(Q),ye=ne.center;return delete ne.rotate,ne.center=function(Le){return arguments.length?ye(ce(Le)):ce.invert(ye())},ne.clipAngle(90)}function ks(Xe){var Je=b(Xe);function ot(B,G){var H=(0,Nr.Y)(B,G);return H[0]*=Je,H}return ot.invert=function(B,G){return Nr.Y.invert(B/Je,G)},ot}function As(){return Pa([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Pa(Xe,Je){return Ca(ks,Xe,Je)}function ii(Xe){if(!(Xe*=2))return $.O;var Je=-Xe/2,ot=-Je,B=Xe*Xe,G=d(ot),H=.5/u(ot);function L(q,Q){var ne=P(b(Q)*b(q-Je)),ce=P(b(Q)*b(q-ot));return[((ne*=ne)-(ce*=ce))/(2*Xe),(Q<0?-1:1)*C(4*B*ce-(B-ne+ce)*(B-ne+ce))/(2*Xe)]}return L.invert=function(q,Q){var ne,ce,ye=Q*Q,Le=b(C(ye+(ne=q+Je)*ne)),Ie=b(C(ye+(ne=q+ot)*ne));return[T(ce=Le-Ie,ne=(Le+Ie)*G),(Q<0?-1:1)*P(C(ne*ne+ce*ce)*H)]},L}function Po(){return ms([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function ms(Xe,Je){return Ca(ii,Xe,Je)}function vo(Xe,Je){if(k(Je)<c)return[Xe,0];var ot=k(Je/p),B=E(ot);if(k(Xe)<c||k(k(Je)-p)<c)return[0,l(Je)*g*d(B/2)];var G=b(B),H=k(g/Xe-Xe/g)/2,L=H*H,q=G/(ot+G-1),Q=q*(2/ot-1),ne=Q*Q,ce=ne+L,ye=q-ne,Le=L+q;return[l(Xe)*g*(H*ye+C(L*ye*ye-ce*(q*q-ne)))/ce,l(Je)*g*(Q*Le-H*C((L+1)*ce-Le*Le))/ce]}function Ms(){return(0,M.c)(vo).scale(79.4183)}function Ss(Xe,Je){if(k(Je)<c)return[Xe,0];var ot=k(Je/p),B=E(ot);if(k(Xe)<c||k(k(Je)-p)<c)return[0,l(Je)*g*d(B/2)];var G=b(B),H=k(g/Xe-Xe/g)/2,L=H*H,q=G*(C(1+L)-H*G)/(1+L*ot*ot);return[l(Xe)*g*q,l(Je)*g*C(1-q*(2*H+q))]}function mo(){return(0,M.c)(Ss).scale(79.4183)}function Ai(Xe,Je){if(k(Je)<c)return[Xe,0];var ot=Je/p,B=E(ot);if(k(Xe)<c||k(k(Je)-p)<c)return[0,g*d(B/2)];var G=(g/Xe-Xe/g)/2,H=ot/(1+b(B));return[g*(l(Xe)*C(G*G+1-H*H)-G),g*H]}function ys(){return(0,M.c)(Ai).scale(79.4183)}function Rr(Xe,Je){if(!Je)return[Xe,0];var ot=k(Je);if(!Xe||ot===p)return[0,Je];var B=ot/p,G=B*B,H=(8*B-G*(G+2)-5)/(2*G*(B-1)),L=H*H,q=B*H,Q=G+L+2*q,ne=B+3*H,ce=Xe/p,ye=ce+1/ce,Le=l(k(Xe)-p)*C(ye*ye-4),Ie=Le*Le,je=(Le*(Q+L-1)+2*C(Q*(G+L*Ie-1)+(1-G)*(G*(ne*ne+4*L)+12*q*L+4*L*L)))/(4*Q+Ie);return[l(Xe)*p*je,l(Je)*p*C(1+Le*k(je)-je*je)]}function Hr(){return(0,M.c)(Rr).scale(127.16)}function Ya(Xe,Je,ot,B){var G=g/3;Xe=i(Xe,c),Je=i(Je,c),Xe=n(Xe,p),Je=n(Je,g-c),ot=i(ot,0),ot=n(ot,100-c);var H=(B=i(B,c))/100,L=P((ot/100+1)*b(G))/G,q=u(Xe)/u(L*p),Q=Je/g,ne=C(H*u(Xe/2)/u(Je/2));return function(ce,ye,Le,Ie,je){function qe($e,lt){var ft=Le*u(Ie*lt),_t=C(1-ft*ft),St=C(2/(1+_t*b($e*=je)));return[ce*_t*St*u($e),ye*ft*St]}return qe.invert=function($e,lt){var ft=$e/ce,_t=lt/ye,St=C(ft*ft+_t*_t),At=2*E(St/2);return[T($e*d(At),ce*St)/je,St&&E(lt*u(At)/(ye*Le*St))/Ie]},qe}(ne/C(Q*q*L),1/(ne*C(Q*q*L)),q,L,Q)}function Oo(){var Xe=65*w,Je=60*w,ot=20,B=200,G=(0,M.U)(Ya),H=G(Xe,Je,ot,B);return H.poleline=function(L){return arguments.length?G(Xe=+L*w,Je,ot,B):Xe*S},H.parallels=function(L){return arguments.length?G(Xe,Je=+L*w,ot,B):Je*S},H.inflation=function(L){return arguments.length?G(Xe,Je,ot=+L,B):ot},H.ratio=function(L){return arguments.length?G(Xe,Je,ot,B=+L):B},H.scale(163.775)}function Wo(){return Oo().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}La.invert=function(Xe,Je){var ot=Je/1.70711,B=u(v*ot);return[Xe/(.74482-.34588*B*B),2*o(ot)]},vo.invert=function(Xe,Je){if(k(Je)<c)return[Xe,0];if(k(Xe)<c)return[0,p*u(2*o(Je/g))];var ot=(Xe/=g)*Xe,B=(Je/=g)*Je,G=ot+B,H=G*G,L=-k(Je)*(1+G),q=L-2*B+ot,Q=-2*L+1+2*B+H,ne=B/Q+(2*q*q*q/(Q*Q*Q)-9*L*q/(Q*Q))/27,ce=(L-q*q/(3*Q))/Q,ye=2*C(-ce/3),Le=P(3*ne/(ce*ye))/3;return[g*(G-1+C(1+2*(ot-B)+H))/(2*Xe),l(Je)*g*(-ye*b(Le+g/3)-q/(3*Q))]},Ss.invert=function(Xe,Je){if(!Xe)return[0,p*u(2*o(Je/g))];var ot=k(Xe/g),B=(1-ot*ot-(Je/=g)*Je)/(2*ot),G=C(B*B+1);return[l(Xe)*g*(G-B),l(Je)*p*u(2*T(C((1-2*B*ot)*(B+G)-ot),C(G+B+ot)))]},Ai.invert=function(Xe,Je){if(!Je)return[Xe,0];var ot=Je/g,B=(g*g*(1-ot*ot)-Xe*Xe)/(2*g*Xe);return[Xe?g*(l(Xe)*C(B*B+1)-B):0,p*u(2*o(ot))]},Rr.invert=function(Xe,Je){var ot;if(!Xe||!Je)return[Xe,Je];Je/=g;var B=l(Xe)*Xe/p,G=(B*B-1+4*Je*Je)/k(B),H=G*G,L=2*Je,q=50;do{var Q=L*L,ne=(8*L-Q*(Q+2)-5)/(2*Q*(L-1)),ce=(3*L-Q*L-10)/(2*Q*L),ye=ne*ne,Le=L*ne,Ie=L+ne,je=Ie*Ie,qe=L+3*ne,$e=-2*Ie*(4*Le*ye+(1-4*Q+3*Q*Q)*(1+ce)+ye*(14*Q-6-H+(8*Q-8-2*H)*ce)+Le*(12*Q-8+(10*Q-10-H)*ce)),lt=C(je*(Q+ye*H-1)+(1-Q)*(Q*(qe*qe+4*ye)+ye*(12*Le+4*ye)));L-=ot=(G*(je+ye-1)+2*lt-B*(4*je+H))/(G*(2*ne*ce+2*Ie*(1+ce))+$e/lt-8*Ie*(G*(-1+ye+je)+2*lt)*(1+ce)/(H+4*je))}while(ot>c&&--q>0);return[l(Xe)*(C(G*G+4)+G)*g/4,p*L]};var Zi=4*g+3*C(3),Io=2*C(2*g*C(3)/Zi),vi=Te(Io*C(3)/g,Io,Zi/6);function _l(){return(0,M.c)(vi).scale(176.84)}function Xa(Xe,Je){return[Xe*C(1-3*Je*Je/(g*g)),Je]}function yi(){return(0,M.c)(Xa).scale(152.63)}function Li(Xe,Je){var ot=b(Je),B=b(Xe)*ot,G=1-B,H=b(Xe=T(u(Xe)*ot,-u(Je))),L=u(Xe);return[L*(ot=C(1-B*B))-H*G,-H*ot-L*G]}function Fa(){return(0,M.c)(Li).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function os(Xe,Je){var ot=N(Xe,Je);return[(ot[0]+Xe/p)/2,(ot[1]+Je)/2]}function hl(){return(0,M.c)(os).scale(158.837)}Xa.invert=function(Xe,Je){return[Xe/C(1-3*Je*Je/(g*g)),Je]},Li.invert=function(Xe,Je){var ot=(Xe*Xe+Je*Je)/-2,B=C(-ot*(2+ot)),G=Je*ot+Xe*B,H=Xe*ot-Je*B,L=C(H*H+G*G);return[T(B*G,L*(1+ot)),L?-E(B*H/L):0]},os.invert=function(Xe,Je){var ot=Xe,B=Je,G=25;do{var H,L=b(B),q=u(B),Q=u(2*B),ne=q*q,ce=L*L,ye=u(ot),Le=b(ot/2),Ie=u(ot/2),je=Ie*Ie,qe=1-ce*Le*Le,$e=qe?P(L*Le)*C(H=1/qe):H=0,lt=.5*(2*$e*L*Ie+ot/p)-Xe,ft=.5*($e*q+B)-Je,_t=.5*H*(ce*je+$e*L*Le*ne)+.5/p,St=H*(ye*Q/4-$e*q*Ie),At=.125*H*(Q*Ie-$e*q*ce*ye),Ft=.5*H*(ne*Le+$e*je*L)+.5,Ot=St*At-Ft*_t,Zt=(ft*St-lt*Ft)/Ot,Ht=(lt*At-ft*_t)/Ot;ot-=Zt,B-=Ht}while((k(Zt)>c||k(Ht)>c)&&--G>0);return[ot,B]}},88728:function(ee,z,e){"use strict";function M(){return new k}function k(){this.reset()}e.d(z,{c:function(){return M}}),k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(b){T(o,b,this.t),T(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new k;function T(b,h,s){var t=b.s=h+s,i=t-h,n=t-i;b.t=h-n+(s-i)}},95384:function(ee,z,e){"use strict";e.d(z,{cp:function(){return x},mQ:function(){return n},oB:function(){return a}});var M,k,o,T,b,h=e(88728),s=e(64528),t=e(70932),i=e(16016),n=(0,h.c)(),r=(0,h.c)(),a={point:t.c,lineStart:t.c,lineEnd:t.c,polygonStart:function(){n.reset(),a.lineStart=l,a.lineEnd=u},polygonEnd:function(){var g=+n;r.add(g<0?s.kD+g:g),this.lineStart=this.lineEnd=this.point=t.c},sphere:function(){r.add(s.kD)}};function l(){a.point=d}function u(){c(M,k)}function d(g,p){a.point=c,M=g,k=p,g*=s.qw,p*=s.qw,o=g,T=(0,s.W8)(p=p/2+s.wL),b=(0,s.g$)(p)}function c(g,p){g*=s.qw,p=(p*=s.qw)/2+s.wL;var v=g-o,m=v>=0?1:-1,y=m*v,_=(0,s.W8)(p),f=(0,s.g$)(p),S=b*f,w=T*_+S*(0,s.W8)(y),E=S*m*(0,s.g$)(y);n.add((0,s.WE)(E,w)),o=g,T=_,b=f}function x(g){return r.reset(),(0,i.c)(g,a),2*r}},13696:function(ee,z,e){"use strict";e.d(z,{c:function(){return P}});var M,k,o,T,b,h,s,t,i,n,r=e(88728),a=e(95384),l=e(84220),u=e(64528),d=e(16016),c=(0,r.c)(),x={point:g,lineStart:v,lineEnd:m,polygonStart:function(){x.point=y,x.lineStart=_,x.lineEnd=f,c.reset(),a.oB.polygonStart()},polygonEnd:function(){a.oB.polygonEnd(),x.point=g,x.lineStart=v,x.lineEnd=m,a.mQ<0?(M=-(o=180),k=-(T=90)):c>u.Gg?T=90:c<-u.Gg&&(k=-90),n[0]=M,n[1]=o},sphere:function(){M=-(o=180),k=-(T=90)}};function g(C,O){i.push(n=[M=C,o=C]),O<k&&(k=O),O>T&&(T=O)}function p(C,O){var R=(0,l.ux)([C*u.qw,O*u.qw]);if(t){var j=(0,l.CW)(t,R),D=[j[1],-j[0],0],N=(0,l.CW)(D,j);(0,l.cJ)(N),N=(0,l.G)(N);var W,F=C-b,U=F>0?1:-1,V=N[0]*u.oh*U,te=(0,u.a2)(F)>180;te^(U*b<V&&V<U*C)?(W=N[1]*u.oh)>T&&(T=W):te^(U*b<(V=(V+360)%360-180)&&V<U*C)?(W=-N[1]*u.oh)<k&&(k=W):(O<k&&(k=O),O>T&&(T=O)),te?C<b?S(M,C)>S(M,o)&&(o=C):S(C,o)>S(M,o)&&(M=C):o>=M?(C<M&&(M=C),C>o&&(o=C)):C>b?S(M,C)>S(M,o)&&(o=C):S(C,o)>S(M,o)&&(M=C)}else i.push(n=[M=C,o=C]);O<k&&(k=O),O>T&&(T=O),t=R,b=C}function v(){x.point=p}function m(){n[0]=M,n[1]=o,x.point=g,t=null}function y(C,O){if(t){var R=C-b;c.add((0,u.a2)(R)>180?R+(R>0?360:-360):R)}else h=C,s=O;a.oB.point(C,O),p(C,O)}function _(){a.oB.lineStart()}function f(){y(h,s),a.oB.lineEnd(),(0,u.a2)(c)>u.Gg&&(M=-(o=180)),n[0]=M,n[1]=o,t=null}function S(C,O){return(O-=C)<0?O+360:O}function w(C,O){return C[0]-O[0]}function E(C,O){return C[0]<=C[1]?C[0]<=O&&O<=C[1]:O<C[0]||C[1]<O}function P(C){var O,R,j,D,N,W,F;if(T=o=-(M=k=1/0),i=[],(0,d.c)(C,x),R=i.length){for(i.sort(w),O=1,N=[j=i[0]];O<R;++O)E(j,(D=i[O])[0])||E(j,D[1])?(S(j[0],D[1])>S(j[0],j[1])&&(j[1]=D[1]),S(D[0],j[1])>S(j[0],j[1])&&(j[0]=D[0])):N.push(j=D);for(W=-1/0,O=0,j=N[R=N.length-1];O<=R;j=D,++O)D=N[O],(F=S(j[1],D[0]))>W&&(W=F,M=D[0],o=j[1])}return i=n=null,M===1/0||k===1/0?[[NaN,NaN],[NaN,NaN]]:[[M,k],[o,T]]}},84220:function(ee,z,e){"use strict";e.d(z,{CW:function(){return b},Ez:function(){return T},G:function(){return k},cJ:function(){return t},mg:function(){return h},ux:function(){return o},wx:function(){return s}});var M=e(64528);function k(i){return[(0,M.WE)(i[1],i[0]),(0,M.qR)(i[2])]}function o(i){var n=i[0],r=i[1],a=(0,M.W8)(r);return[a*(0,M.W8)(n),a*(0,M.g$)(n),(0,M.g$)(r)]}function T(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]}function b(i,n){return[i[1]*n[2]-i[2]*n[1],i[2]*n[0]-i[0]*n[2],i[0]*n[1]-i[1]*n[0]]}function h(i,n){i[0]+=n[0],i[1]+=n[1],i[2]+=n[2]}function s(i,n){return[i[0]*n,i[1]*n,i[2]*n]}function t(i){var n=(0,M._I)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=n,i[1]/=n,i[2]/=n}},24052:function(ee,z,e){"use strict";e.d(z,{c:function(){return R}});var M,k,o,T,b,h,s,t,i,n,r,a,l,u,d,c,x=e(64528),g=e(70932),p=e(16016),v={sphere:g.c,point:m,lineStart:_,lineEnd:w,polygonStart:function(){v.lineStart=E,v.lineEnd=P},polygonEnd:function(){v.lineStart=_,v.lineEnd=w}};function m(j,D){j*=x.qw,D*=x.qw;var N=(0,x.W8)(D);y(N*(0,x.W8)(j),N*(0,x.g$)(j),(0,x.g$)(D))}function y(j,D,N){++M,o+=(j-o)/M,T+=(D-T)/M,b+=(N-b)/M}function _(){v.point=f}function f(j,D){j*=x.qw,D*=x.qw;var N=(0,x.W8)(D);u=N*(0,x.W8)(j),d=N*(0,x.g$)(j),c=(0,x.g$)(D),v.point=S,y(u,d,c)}function S(j,D){j*=x.qw,D*=x.qw;var N=(0,x.W8)(D),W=N*(0,x.W8)(j),F=N*(0,x.g$)(j),U=(0,x.g$)(D),V=(0,x.WE)((0,x._I)((V=d*U-c*F)*V+(V=c*W-u*U)*V+(V=u*F-d*W)*V),u*W+d*F+c*U);k+=V,h+=V*(u+(u=W)),s+=V*(d+(d=F)),t+=V*(c+(c=U)),y(u,d,c)}function w(){v.point=m}function E(){v.point=C}function P(){O(a,l),v.point=m}function C(j,D){a=j,l=D,j*=x.qw,D*=x.qw,v.point=O;var N=(0,x.W8)(D);u=N*(0,x.W8)(j),d=N*(0,x.g$)(j),c=(0,x.g$)(D),y(u,d,c)}function O(j,D){j*=x.qw,D*=x.qw;var N=(0,x.W8)(D),W=N*(0,x.W8)(j),F=N*(0,x.g$)(j),U=(0,x.g$)(D),V=d*U-c*F,te=c*W-u*U,J=u*F-d*W,K=(0,x._I)(V*V+te*te+J*J),X=(0,x.qR)(K),Z=K&&-X/K;i+=Z*V,n+=Z*te,r+=Z*J,k+=X,h+=X*(u+(u=W)),s+=X*(d+(d=F)),t+=X*(c+(c=U)),y(u,d,c)}function R(j){M=k=o=T=b=h=s=t=i=n=r=0,(0,p.c)(j,v);var D=i,N=n,W=r,F=D*D+N*N+W*W;return F<x.a8&&(D=h,N=s,W=t,k<x.Gg&&(D=o,N=T,W=b),(F=D*D+N*N+W*W)<x.a8)?[NaN,NaN]:[(0,x.WE)(N,D)*x.oh,(0,x.qR)(W/(0,x._I)(F))*x.oh]}},61780:function(ee,z,e){"use strict";e.d(z,{Q:function(){return b},c:function(){return s}});var M=e(84220);function k(t){return function(){return t}}var o=e(64528),T=e(92992);function b(t,i,n,r,a,l){if(n){var u=(0,o.W8)(i),d=(0,o.g$)(i),c=r*n;a==null?(a=i+r*o.kD,l=i-c/2):(a=h(u,a),l=h(u,l),(r>0?a<l:a>l)&&(a+=r*o.kD));for(var x,g=a;r>0?g>l:g<l;g-=c)x=(0,M.G)([u,-d*(0,o.W8)(g),-d*(0,o.g$)(g)]),t.point(x[0],x[1])}}function h(t,i){(i=(0,M.ux)(i))[0]-=t,(0,M.cJ)(i);var n=(0,o.mE)(-i[1]);return((-i[2]<0?-n:n)+o.kD-o.Gg)%o.kD}function s(){var t,i,n=k([0,0]),r=k(90),a=k(6),l={point:function(d,c){t.push(d=i(d,c)),d[0]*=o.oh,d[1]*=o.oh}};function u(){var d=n.apply(this,arguments),c=r.apply(this,arguments)*o.qw,x=a.apply(this,arguments)*o.qw;return t=[],i=(0,T.O)(-d[0]*o.qw,-d[1]*o.qw,0).invert,b(l,c,x,1),d={type:"Polygon",coordinates:[t]},t=i=null,d}return u.center=function(d){return arguments.length?(n=typeof d=="function"?d:k([+d[0],+d[1]]),u):n},u.radius=function(d){return arguments.length?(r=typeof d=="function"?d:k(+d),u):r},u.precision=function(d){return arguments.length?(a=typeof d=="function"?d:k(+d),u):a},u}},78284:function(ee,z,e){"use strict";var M=e(14229),k=e(64528);z.c=(0,M.c)(function(){return!0},function(o){var T,b=NaN,h=NaN,s=NaN;return{lineStart:function(){o.lineStart(),T=1},point:function(t,i){var n=t>0?k.pi:-k.pi,r=(0,k.a2)(t-b);(0,k.a2)(r-k.pi)<k.Gg?(o.point(b,h=(h+i)/2>0?k.or:-k.or),o.point(s,h),o.lineEnd(),o.lineStart(),o.point(n,h),o.point(t,h),T=0):s!==n&&r>=k.pi&&((0,k.a2)(b-s)<k.Gg&&(b-=s*k.Gg),(0,k.a2)(t-n)<k.Gg&&(t-=n*k.Gg),h=function(a,l,u,d){var c,x,g=(0,k.g$)(a-u);return(0,k.a2)(g)>k.Gg?(0,k.MQ)(((0,k.g$)(l)*(x=(0,k.W8)(d))*(0,k.g$)(u)-(0,k.g$)(d)*(c=(0,k.W8)(l))*(0,k.g$)(a))/(c*x*g)):(l+d)/2}(b,h,t,i),o.point(s,h),o.lineEnd(),o.lineStart(),o.point(n,h),T=0),o.point(b=t,h=i),s=n},lineEnd:function(){o.lineEnd(),b=h=NaN},clean:function(){return 2-T}}},function(o,T,b,h){var s;if(o==null)s=b*k.or,h.point(-k.pi,s),h.point(0,s),h.point(k.pi,s),h.point(k.pi,0),h.point(k.pi,-s),h.point(0,-s),h.point(-k.pi,-s),h.point(-k.pi,0),h.point(-k.pi,s);else if((0,k.a2)(o[0]-T[0])>k.Gg){var t=o[0]<T[0]?k.pi:-k.pi;s=b*t/2,h.point(-t,s),h.point(0,s),h.point(t,s)}else h.point(T[0],T[1])},[-k.pi,-k.or])},97208:function(ee,z,e){"use strict";e.d(z,{c:function(){return k}});var M=e(70932);function k(){var o,T=[];return{point:function(b,h,s){o.push([b,h,s])},lineStart:function(){T.push(o=[])},lineEnd:M.c,rejoin:function(){T.length>1&&T.push(T.pop().concat(T.shift()))},result:function(){var b=T;return T=[],o=null,b}}}},2728:function(ee,z,e){"use strict";e.d(z,{c:function(){return h}});var M=e(84220),k=e(61780),o=e(64528),T=e(41860),b=e(14229);function h(s){var t=(0,o.W8)(s),i=6*o.qw,n=t>0,r=(0,o.a2)(t)>o.Gg;function a(d,c){return(0,o.W8)(d)*(0,o.W8)(c)>t}function l(d,c,x){var g=(0,M.ux)(d),p=(0,M.ux)(c),v=[1,0,0],m=(0,M.CW)(g,p),y=(0,M.Ez)(m,m),_=m[0],f=y-_*_;if(!f)return!x&&d;var S=t*y/f,w=-t*_/f,E=(0,M.CW)(v,m),P=(0,M.wx)(v,S),C=(0,M.wx)(m,w);(0,M.mg)(P,C);var O=E,R=(0,M.Ez)(P,O),j=(0,M.Ez)(O,O),D=R*R-j*((0,M.Ez)(P,P)-1);if(!(D<0)){var N=(0,o._I)(D),W=(0,M.wx)(O,(-R-N)/j);if((0,M.mg)(W,P),W=(0,M.G)(W),!x)return W;var F,U=d[0],V=c[0],te=d[1],J=c[1];V<U&&(F=U,U=V,V=F);var K=V-U,X=(0,o.a2)(K-o.pi)<o.Gg;if(!X&&J<te&&(F=te,te=J,J=F),X||K<o.Gg?X?te+J>0^W[1]<((0,o.a2)(W[0]-U)<o.Gg?te:J):te<=W[1]&&W[1]<=J:K>o.pi^(U<=W[0]&&W[0]<=V)){var Z=(0,M.wx)(O,(-R+N)/j);return(0,M.mg)(Z,P),[W,(0,M.G)(Z)]}}}function u(d,c){var x=n?s:o.pi-s,g=0;return d<-x?g|=1:d>x&&(g|=2),c<-x?g|=4:c>x&&(g|=8),g}return(0,b.c)(a,function(d){var c,x,g,p,v;return{lineStart:function(){p=g=!1,v=1},point:function(m,y){var _,f=[m,y],S=a(m,y),w=n?S?0:u(m,y):S?u(m+(m<0?o.pi:-o.pi),y):0;if(!c&&(p=g=S)&&d.lineStart(),S!==g&&(!(_=l(c,f))||(0,T.c)(c,_)||(0,T.c)(f,_))&&(f[2]=1),S!==g)v=0,S?(d.lineStart(),_=l(f,c),d.point(_[0],_[1])):(_=l(c,f),d.point(_[0],_[1],2),d.lineEnd()),c=_;else if(r&&c&&n^S){var E;w&x||!(E=l(f,c,!0))||(v=0,n?(d.lineStart(),d.point(E[0][0],E[0][1]),d.point(E[1][0],E[1][1]),d.lineEnd()):(d.point(E[1][0],E[1][1]),d.lineEnd(),d.lineStart(),d.point(E[0][0],E[0][1],3)))}!S||c&&(0,T.c)(c,f)||d.point(f[0],f[1]),c=f,g=S,x=w},lineEnd:function(){g&&d.lineEnd(),c=null},clean:function(){return v|(p&&g)<<1}}},function(d,c,x,g){(0,k.Q)(g,s,i,x,d,c)},n?[0,-s]:[-o.pi,s-o.pi])}},14229:function(ee,z,e){"use strict";e.d(z,{c:function(){return h}});var M=e(97208),k=e(32232),o=e(64528),T=e(58196),b=e(84706);function h(i,n,r,a){return function(l){var u,d,c,x=n(l),g=(0,M.c)(),p=n(g),v=!1,m={point:y,lineStart:f,lineEnd:S,polygonStart:function(){m.point=w,m.lineStart=E,m.lineEnd=P,d=[],u=[]},polygonEnd:function(){m.point=y,m.lineStart=f,m.lineEnd=S,d=(0,b.Uf)(d);var C=(0,T.c)(u,a);d.length?(v||(l.polygonStart(),v=!0),(0,k.c)(d,t,C,r,l)):C&&(v||(l.polygonStart(),v=!0),l.lineStart(),r(null,null,1,l),l.lineEnd()),v&&(l.polygonEnd(),v=!1),d=u=null},sphere:function(){l.polygonStart(),l.lineStart(),r(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function y(C,O){i(C,O)&&l.point(C,O)}function _(C,O){x.point(C,O)}function f(){m.point=_,x.lineStart()}function S(){m.point=y,x.lineEnd()}function w(C,O){c.push([C,O]),p.point(C,O)}function E(){p.lineStart(),c=[]}function P(){w(c[0][0],c[0][1]),p.lineEnd();var C,O,R,j,D=p.clean(),N=g.result(),W=N.length;if(c.pop(),u.push(c),c=null,W)if(1&D){if((O=(R=N[0]).length-1)>0){for(v||(l.polygonStart(),v=!0),l.lineStart(),C=0;C<O;++C)l.point((j=R[C])[0],j[1]);l.lineEnd()}}else W>1&&2&D&&N.push(N.pop().concat(N.shift())),d.push(N.filter(s))}return m}}function s(i){return i.length>1}function t(i,n){return((i=i.x)[0]<0?i[1]-o.or-o.Gg:o.or-i[1])-((n=n.x)[0]<0?n[1]-o.or-o.Gg:o.or-n[1])}},21676:function(ee,z,e){"use strict";e.d(z,{c:function(){return s}});var M=e(64528),k=e(97208),o=e(32232),T=e(84706),b=1e9,h=-b;function s(t,i,n,r){function a(x,g){return t<=x&&x<=n&&i<=g&&g<=r}function l(x,g,p,v){var m=0,y=0;if(x==null||(m=u(x,p))!==(y=u(g,p))||c(x,g)<0^p>0)do v.point(m===0||m===3?t:n,m>1?r:i);while((m=(m+p+4)%4)!==y);else v.point(g[0],g[1])}function u(x,g){return(0,M.a2)(x[0]-t)<M.Gg?g>0?0:3:(0,M.a2)(x[0]-n)<M.Gg?g>0?2:1:(0,M.a2)(x[1]-i)<M.Gg?g>0?1:0:g>0?3:2}function d(x,g){return c(x.x,g.x)}function c(x,g){var p=u(x,1),v=u(g,1);return p!==v?p-v:p===0?g[1]-x[1]:p===1?x[0]-g[0]:p===2?x[1]-g[1]:g[0]-x[0]}return function(x){var g,p,v,m,y,_,f,S,w,E,P,C=x,O=(0,k.c)(),R={point:j,lineStart:function(){R.point=D,p&&p.push(v=[]),E=!0,w=!1,f=S=NaN},lineEnd:function(){g&&(D(m,y),_&&w&&O.rejoin(),g.push(O.result())),R.point=j,w&&C.lineEnd()},polygonStart:function(){C=O,g=[],p=[],P=!0},polygonEnd:function(){var N=function(){for(var U=0,V=0,te=p.length;V<te;++V)for(var J,K,X=p[V],Z=1,$=X.length,re=X[0],oe=re[0],ie=re[1];Z<$;++Z)J=oe,K=ie,oe=(re=X[Z])[0],ie=re[1],K<=r?ie>r&&(oe-J)*(r-K)>(ie-K)*(t-J)&&++U:ie<=r&&(oe-J)*(r-K)<(ie-K)*(t-J)&&--U;return U}(),W=P&&N,F=(g=(0,T.Uf)(g)).length;(W||F)&&(x.polygonStart(),W&&(x.lineStart(),l(null,null,1,x),x.lineEnd()),F&&(0,o.c)(g,d,N,l,x),x.polygonEnd()),C=x,g=p=v=null}};function j(N,W){a(N,W)&&C.point(N,W)}function D(N,W){var F=a(N,W);if(p&&v.push([N,W]),E)m=N,y=W,_=F,E=!1,F&&(C.lineStart(),C.point(N,W));else if(F&&w)C.point(N,W);else{var U=[f=Math.max(h,Math.min(b,f)),S=Math.max(h,Math.min(b,S))],V=[N=Math.max(h,Math.min(b,N)),W=Math.max(h,Math.min(b,W))];(function(te,J,K,X,Z,$){var re,oe=te[0],ie=te[1],ue=0,me=1,be=J[0]-oe,ge=J[1]-ie;if(re=K-oe,be||!(re>0)){if(re/=be,be<0){if(re<ue)return;re<me&&(me=re)}else if(be>0){if(re>me)return;re>ue&&(ue=re)}if(re=Z-oe,be||!(re<0)){if(re/=be,be<0){if(re>me)return;re>ue&&(ue=re)}else if(be>0){if(re<ue)return;re<me&&(me=re)}if(re=X-ie,ge||!(re>0)){if(re/=ge,ge<0){if(re<ue)return;re<me&&(me=re)}else if(ge>0){if(re>me)return;re>ue&&(ue=re)}if(re=$-ie,ge||!(re<0)){if(re/=ge,ge<0){if(re>me)return;re>ue&&(ue=re)}else if(ge>0){if(re<ue)return;re<me&&(me=re)}return ue>0&&(te[0]=oe+ue*be,te[1]=ie+ue*ge),me<1&&(J[0]=oe+me*be,J[1]=ie+me*ge),!0}}}}})(U,V,t,i,n,r)?(w||(C.lineStart(),C.point(U[0],U[1])),C.point(V[0],V[1]),F||C.lineEnd(),P=!1):F&&(C.lineStart(),C.point(N,W),P=!1)}f=N,S=W,w=F}return R}}},32232:function(ee,z,e){"use strict";e.d(z,{c:function(){return T}});var M=e(41860),k=e(64528);function o(h,s,t,i){this.x=h,this.z=s,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function T(h,s,t,i,n){var r,a,l=[],u=[];if(h.forEach(function(v){if(!((m=v.length-1)<=0)){var m,y,_=v[0],f=v[m];if((0,M.c)(_,f)){if(!_[2]&&!f[2]){for(n.lineStart(),r=0;r<m;++r)n.point((_=v[r])[0],_[1]);return void n.lineEnd()}f[0]+=2*k.Gg}l.push(y=new o(_,v,null,!0)),u.push(y.o=new o(_,null,y,!1)),l.push(y=new o(f,v,null,!1)),u.push(y.o=new o(f,null,y,!0))}}),l.length){for(u.sort(s),b(l),b(u),r=0,a=u.length;r<a;++r)u[r].e=t=!t;for(var d,c,x=l[0];;){for(var g=x,p=!0;g.v;)if((g=g.n)===x)return;d=g.z,n.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(r=0,a=d.length;r<a;++r)n.point((c=d[r])[0],c[1]);else i(g.x,g.n.x,1,n);g=g.n}else{if(p)for(d=g.p.z,r=d.length-1;r>=0;--r)n.point((c=d[r])[0],c[1]);else i(g.x,g.p.x,-1,n);g=g.p}d=(g=g.o).z,p=!p}while(!g.v);n.lineEnd()}}}function b(h){if(s=h.length){for(var s,t,i=0,n=h[0];++i<s;)n.n=t=h[i],t.p=n,n=t;n.n=t=h[0],t.p=n}}},68120:function(ee,z,e){"use strict";function M(k,o){function T(b,h){return b=k(b,h),o(b[0],b[1])}return k.invert&&o.invert&&(T.invert=function(b,h){return(b=o.invert(b,h))&&k.invert(b[0],b[1])}),T}e.d(z,{c:function(){return M}})},7376:function(ee,z,e){"use strict";function M(k){return k}e.d(z,{c:function(){return M}})},83356:function(ee,z,e){"use strict";e.r(z),e.d(z,{geoAlbers:function(){return gt},geoAlbersUsa:function(){return Mt},geoArea:function(){return M.cp},geoAzimuthalEqualArea:function(){return xt.c},geoAzimuthalEqualAreaRaw:function(){return xt.y},geoAzimuthalEquidistant:function(){return mt.c},geoAzimuthalEquidistantRaw:function(){return mt.O},geoBounds:function(){return k.c},geoCentroid:function(){return o.c},geoCircle:function(){return T.c},geoClipAntimeridian:function(){return b.c},geoClipCircle:function(){return h.c},geoClipExtent:function(){return t},geoClipRectangle:function(){return s.c},geoConicConformal:function(){return Vt},geoConicConformalRaw:function(){return Ut},geoConicEqualArea:function(){return pt},geoConicEqualAreaRaw:function(){return ct},geoConicEquidistant:function(){return An},geoConicEquidistantRaw:function(){return Ln},geoContains:function(){return N},geoDistance:function(){return S},geoEqualEarth:function(){return Mn},geoEqualEarthRaw:function(){return Tn},geoEquirectangular:function(){return en.c},geoEquirectangularRaw:function(){return en.u},geoGnomonic:function(){return zn.c},geoGnomonicRaw:function(){return zn.Y},geoGraticule:function(){return V},geoGraticule10:function(){return te},geoIdentity:function(){return Pn},geoInterpolate:function(){return $.c},geoLength:function(){return y},geoMercator:function(){return zt},geoMercatorRaw:function(){return Lt},geoNaturalEarth1:function(){return Hn.c},geoNaturalEarth1Raw:function(){return Hn.g},geoOrthographic:function(){return Fn.c},geoOrthographicRaw:function(){return Fn.t},geoPath:function(){return Fe},geoProjection:function(){return rt.c},geoProjectionMutator:function(){return rt.U},geoRotation:function(){return Et.c},geoStereographic:function(){return ur},geoStereographicRaw:function(){return or},geoStream:function(){return c.c},geoTransform:function(){return In.c},geoTransverseMercator:function(){return Mr},geoTransverseMercatorRaw:function(){return er}});var M=e(95384),k=e(13696),o=e(24052),T=e(61780),b=e(78284),h=e(2728),s=e(21676);function t(){var jt,tn,xn,pn=0,Sn=0,Gn=960,Rn=500;return xn={stream:function(Nn){return jt&&tn===Nn?jt:jt=(0,s.c)(pn,Sn,Gn,Rn)(tn=Nn)},extent:function(Nn){return arguments.length?(pn=+Nn[0][0],Sn=+Nn[0][1],Gn=+Nn[1][0],Rn=+Nn[1][1],jt=tn=null,xn):[[pn,Sn],[Gn,Rn]]}}}var i,n,r,a=e(58196),l=e(88728),u=e(64528),d=e(70932),c=e(16016),x=(0,l.c)(),g={sphere:d.c,point:d.c,lineStart:function(){g.point=v,g.lineEnd=p},lineEnd:d.c,polygonStart:d.c,polygonEnd:d.c};function p(){g.point=g.lineEnd=d.c}function v(jt,tn){jt*=u.qw,tn*=u.qw,i=jt,n=(0,u.g$)(tn),r=(0,u.W8)(tn),g.point=m}function m(jt,tn){jt*=u.qw,tn*=u.qw;var xn=(0,u.g$)(tn),pn=(0,u.W8)(tn),Sn=(0,u.a2)(jt-i),Gn=(0,u.W8)(Sn),Rn=pn*(0,u.g$)(Sn),Nn=r*xn-n*pn*Gn,ir=n*xn+r*pn*Gn;x.add((0,u.WE)((0,u._I)(Rn*Rn+Nn*Nn),ir)),i=jt,n=xn,r=pn}function y(jt){return x.reset(),(0,c.c)(jt,g),+x}var _=[null,null],f={type:"LineString",coordinates:_};function S(jt,tn){return _[0]=jt,_[1]=tn,y(f)}var w={Feature:function(jt,tn){return P(jt.geometry,tn)},FeatureCollection:function(jt,tn){for(var xn=jt.features,pn=-1,Sn=xn.length;++pn<Sn;)if(P(xn[pn].geometry,tn))return!0;return!1}},E={Sphere:function(){return!0},Point:function(jt,tn){return C(jt.coordinates,tn)},MultiPoint:function(jt,tn){for(var xn=jt.coordinates,pn=-1,Sn=xn.length;++pn<Sn;)if(C(xn[pn],tn))return!0;return!1},LineString:function(jt,tn){return O(jt.coordinates,tn)},MultiLineString:function(jt,tn){for(var xn=jt.coordinates,pn=-1,Sn=xn.length;++pn<Sn;)if(O(xn[pn],tn))return!0;return!1},Polygon:function(jt,tn){return R(jt.coordinates,tn)},MultiPolygon:function(jt,tn){for(var xn=jt.coordinates,pn=-1,Sn=xn.length;++pn<Sn;)if(R(xn[pn],tn))return!0;return!1},GeometryCollection:function(jt,tn){for(var xn=jt.geometries,pn=-1,Sn=xn.length;++pn<Sn;)if(P(xn[pn],tn))return!0;return!1}};function P(jt,tn){return!(!jt||!E.hasOwnProperty(jt.type))&&E[jt.type](jt,tn)}function C(jt,tn){return S(jt,tn)===0}function O(jt,tn){for(var xn,pn,Sn,Gn=0,Rn=jt.length;Gn<Rn;Gn++){if((pn=S(jt[Gn],tn))===0||Gn>0&&(Sn=S(jt[Gn],jt[Gn-1]))>0&&xn<=Sn&&pn<=Sn&&(xn+pn-Sn)*(1-Math.pow((xn-pn)/Sn,2))<u.a8*Sn)return!0;xn=pn}return!1}function R(jt,tn){return!!(0,a.c)(jt.map(j),D(tn))}function j(jt){return(jt=jt.map(D)).pop(),jt}function D(jt){return[jt[0]*u.qw,jt[1]*u.qw]}function N(jt,tn){return(jt&&w.hasOwnProperty(jt.type)?w[jt.type]:P)(jt,tn)}var W=e(84706);function F(jt,tn,xn){var pn=(0,W.ik)(jt,tn-u.Gg,xn).concat(tn);return function(Sn){return pn.map(function(Gn){return[Sn,Gn]})}}function U(jt,tn,xn){var pn=(0,W.ik)(jt,tn-u.Gg,xn).concat(tn);return function(Sn){return pn.map(function(Gn){return[Gn,Sn]})}}function V(){var jt,tn,xn,pn,Sn,Gn,Rn,Nn,ir,Gt,dn,Pt,Yt=10,Qt=Yt,mn=90,vn=360,_n=2.5;function sn(){return{type:"MultiLineString",coordinates:Kt()}}function Kt(){return(0,W.ik)((0,u.Km)(pn/mn)*mn,xn,mn).map(dn).concat((0,W.ik)((0,u.Km)(Nn/vn)*vn,Rn,vn).map(Pt)).concat((0,W.ik)((0,u.Km)(tn/Yt)*Yt,jt,Yt).filter(function(Jt){return(0,u.a2)(Jt%mn)>u.Gg}).map(ir)).concat((0,W.ik)((0,u.Km)(Gn/Qt)*Qt,Sn,Qt).filter(function(Jt){return(0,u.a2)(Jt%vn)>u.Gg}).map(Gt))}return sn.lines=function(){return Kt().map(function(Jt){return{type:"LineString",coordinates:Jt}})},sn.outline=function(){return{type:"Polygon",coordinates:[dn(pn).concat(Pt(Rn).slice(1),dn(xn).reverse().slice(1),Pt(Nn).reverse().slice(1))]}},sn.extent=function(Jt){return arguments.length?sn.extentMajor(Jt).extentMinor(Jt):sn.extentMinor()},sn.extentMajor=function(Jt){return arguments.length?(pn=+Jt[0][0],xn=+Jt[1][0],Nn=+Jt[0][1],Rn=+Jt[1][1],pn>xn&&(Jt=pn,pn=xn,xn=Jt),Nn>Rn&&(Jt=Nn,Nn=Rn,Rn=Jt),sn.precision(_n)):[[pn,Nn],[xn,Rn]]},sn.extentMinor=function(Jt){return arguments.length?(tn=+Jt[0][0],jt=+Jt[1][0],Gn=+Jt[0][1],Sn=+Jt[1][1],tn>jt&&(Jt=tn,tn=jt,jt=Jt),Gn>Sn&&(Jt=Gn,Gn=Sn,Sn=Jt),sn.precision(_n)):[[tn,Gn],[jt,Sn]]},sn.step=function(Jt){return arguments.length?sn.stepMajor(Jt).stepMinor(Jt):sn.stepMinor()},sn.stepMajor=function(Jt){return arguments.length?(mn=+Jt[0],vn=+Jt[1],sn):[mn,vn]},sn.stepMinor=function(Jt){return arguments.length?(Yt=+Jt[0],Qt=+Jt[1],sn):[Yt,Qt]},sn.precision=function(Jt){return arguments.length?(_n=+Jt,ir=F(Gn,Sn,90),Gt=U(tn,jt,_n),dn=F(Nn,Rn,90),Pt=U(pn,xn,_n),sn):_n},sn.extentMajor([[-180,-90+u.Gg],[180,90-u.Gg]]).extentMinor([[-180,-80-u.Gg],[180,80+u.Gg]])}function te(){return V()()}var J,K,X,Z,$=e(27284),re=e(7376),oe=(0,l.c)(),ie=(0,l.c)(),ue={point:d.c,lineStart:d.c,lineEnd:d.c,polygonStart:function(){ue.lineStart=me,ue.lineEnd=de},polygonEnd:function(){ue.lineStart=ue.lineEnd=ue.point=d.c,oe.add((0,u.a2)(ie)),ie.reset()},result:function(){var jt=oe/2;return oe.reset(),jt}};function me(){ue.point=be}function be(jt,tn){ue.point=ge,J=X=jt,K=Z=tn}function ge(jt,tn){ie.add(Z*jt-X*tn),X=jt,Z=tn}function de(){ge(J,K)}var ve,pe,_e,Te,le=ue,ae=e(73784),he=0,Se=0,ke=0,Me=0,Ee=0,De=0,fe=0,xe=0,we=0,Oe={point:ze,lineStart:Pe,lineEnd:Ze,polygonStart:function(){Oe.lineStart=it,Oe.lineEnd=tt},polygonEnd:function(){Oe.point=ze,Oe.lineStart=Pe,Oe.lineEnd=Ze},result:function(){var jt=we?[fe/we,xe/we]:De?[Me/De,Ee/De]:ke?[he/ke,Se/ke]:[NaN,NaN];return he=Se=ke=Me=Ee=De=fe=xe=we=0,jt}};function ze(jt,tn){he+=jt,Se+=tn,++ke}function Pe(){Oe.point=Ue}function Ue(jt,tn){Oe.point=Ve,ze(_e=jt,Te=tn)}function Ve(jt,tn){var xn=jt-_e,pn=tn-Te,Sn=(0,u._I)(xn*xn+pn*pn);Me+=Sn*(_e+jt)/2,Ee+=Sn*(Te+tn)/2,De+=Sn,ze(_e=jt,Te=tn)}function Ze(){Oe.point=ze}function it(){Oe.point=dt}function tt(){yt(ve,pe)}function dt(jt,tn){Oe.point=yt,ze(ve=_e=jt,pe=Te=tn)}function yt(jt,tn){var xn=jt-_e,pn=tn-Te,Sn=(0,u._I)(xn*xn+pn*pn);Me+=Sn*(_e+jt)/2,Ee+=Sn*(Te+tn)/2,De+=Sn,fe+=(Sn=Te*jt-_e*tn)*(_e+jt),xe+=Sn*(Te+tn),we+=3*Sn,ze(_e=jt,Te=tn)}var vt=Oe;function et(jt){this._context=jt}et.prototype={_radius:4.5,pointRadius:function(jt){return this._radius=jt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(jt,tn){switch(this._point){case 0:this._context.moveTo(jt,tn),this._point=1;break;case 1:this._context.lineTo(jt,tn);break;default:this._context.moveTo(jt+this._radius,tn),this._context.arc(jt,tn,this._radius,0,u.kD)}},result:d.c};var Qe,wt,It,Dt,Ct,He=(0,l.c)(),We={point:d.c,lineStart:function(){We.point=Be},lineEnd:function(){Qe&&Ge(wt,It),We.point=d.c},polygonStart:function(){Qe=!0},polygonEnd:function(){Qe=null},result:function(){var jt=+He;return He.reset(),jt}};function Be(jt,tn){We.point=Ge,wt=Dt=jt,It=Ct=tn}function Ge(jt,tn){Dt-=jt,Ct-=tn,He.add((0,u._I)(Dt*Dt+Ct*Ct)),Dt=jt,Ct=tn}var at=We;function nt(){this._string=[]}function Re(jt){return"m0,"+jt+"a"+jt+","+jt+" 0 1,1 0,"+-2*jt+"a"+jt+","+jt+" 0 1,1 0,"+2*jt+"z"}function Fe(jt,tn){var xn,pn,Sn=4.5;function Gn(Rn){return Rn&&(typeof Sn=="function"&&pn.pointRadius(+Sn.apply(this,arguments)),(0,c.c)(Rn,xn(pn))),pn.result()}return Gn.area=function(Rn){return(0,c.c)(Rn,xn(le)),le.result()},Gn.measure=function(Rn){return(0,c.c)(Rn,xn(at)),at.result()},Gn.bounds=function(Rn){return(0,c.c)(Rn,xn(ae.c)),ae.c.result()},Gn.centroid=function(Rn){return(0,c.c)(Rn,xn(vt)),vt.result()},Gn.projection=function(Rn){return arguments.length?(xn=Rn==null?(jt=null,re.c):(jt=Rn).stream,Gn):jt},Gn.context=function(Rn){return arguments.length?(pn=Rn==null?(tn=null,new nt):new et(tn=Rn),typeof Sn!="function"&&pn.pointRadius(Sn),Gn):tn},Gn.pointRadius=function(Rn){return arguments.length?(Sn=typeof Rn=="function"?Rn:(pn.pointRadius(+Rn),+Rn),Gn):Sn},Gn.projection(jt).context(tn)}nt.prototype={_radius:4.5,_circle:Re(4.5),pointRadius:function(jt){return(jt=+jt)!==this._radius&&(this._radius=jt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(jt,tn){switch(this._point){case 0:this._string.push("M",jt,",",tn),this._point=1;break;case 1:this._string.push("L",jt,",",tn);break;default:this._circle==null&&(this._circle=Re(this._radius)),this._string.push("M",jt,",",tn,this._circle)}},result:function(){if(this._string.length){var jt=this._string.join("");return this._string=[],jt}return null}};var rt=e(87952);function Ye(jt){var tn=0,xn=u.pi/3,pn=(0,rt.U)(jt),Sn=pn(tn,xn);return Sn.parallels=function(Gn){return arguments.length?pn(tn=Gn[0]*u.qw,xn=Gn[1]*u.qw):[tn*u.oh,xn*u.oh]},Sn}function ct(jt,tn){var xn=(0,u.g$)(jt),pn=(xn+(0,u.g$)(tn))/2;if((0,u.a2)(pn)<u.Gg)return function(Nn){var ir=(0,u.W8)(Nn);function Gt(dn,Pt){return[dn*ir,(0,u.g$)(Pt)/ir]}return Gt.invert=function(dn,Pt){return[dn/ir,(0,u.qR)(Pt*ir)]},Gt}(jt);var Sn=1+xn*(2*pn-xn),Gn=(0,u._I)(Sn)/pn;function Rn(Nn,ir){var Gt=(0,u._I)(Sn-2*pn*(0,u.g$)(ir))/pn;return[Gt*(0,u.g$)(Nn*=pn),Gn-Gt*(0,u.W8)(Nn)]}return Rn.invert=function(Nn,ir){var Gt=Gn-ir,dn=(0,u.WE)(Nn,(0,u.a2)(Gt))*(0,u.kq)(Gt);return Gt*pn<0&&(dn-=u.pi*(0,u.kq)(Nn)*(0,u.kq)(Gt)),[dn/pn,(0,u.qR)((Sn-(Nn*Nn+Gt*Gt)*pn*pn)/(2*pn))]},Rn}function pt(){return Ye(ct).scale(155.424).center([0,33.6442])}function gt(){return pt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ut=e(86420);function Mt(){var jt,tn,xn,pn,Sn,Gn,Rn=gt(),Nn=pt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),ir=pt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Gt={point:function(Yt,Qt){Gn=[Yt,Qt]}};function dn(Yt){var Qt=Yt[0],mn=Yt[1];return Gn=null,xn.point(Qt,mn),Gn||(pn.point(Qt,mn),Gn)||(Sn.point(Qt,mn),Gn)}function Pt(){return jt=tn=null,dn}return dn.invert=function(Yt){var Qt=Rn.scale(),mn=Rn.translate(),vn=(Yt[0]-mn[0])/Qt,_n=(Yt[1]-mn[1])/Qt;return(_n>=.12&&_n<.234&&vn>=-.425&&vn<-.214?Nn:_n>=.166&&_n<.234&&vn>=-.214&&vn<-.115?ir:Rn).invert(Yt)},dn.stream=function(Yt){return jt&&tn===Yt?jt:(Qt=[Rn.stream(tn=Yt),Nn.stream(Yt),ir.stream(Yt)],mn=Qt.length,jt={point:function(vn,_n){for(var sn=-1;++sn<mn;)Qt[sn].point(vn,_n)},sphere:function(){for(var vn=-1;++vn<mn;)Qt[vn].sphere()},lineStart:function(){for(var vn=-1;++vn<mn;)Qt[vn].lineStart()},lineEnd:function(){for(var vn=-1;++vn<mn;)Qt[vn].lineEnd()},polygonStart:function(){for(var vn=-1;++vn<mn;)Qt[vn].polygonStart()},polygonEnd:function(){for(var vn=-1;++vn<mn;)Qt[vn].polygonEnd()}});var Qt,mn},dn.precision=function(Yt){return arguments.length?(Rn.precision(Yt),Nn.precision(Yt),ir.precision(Yt),Pt()):Rn.precision()},dn.scale=function(Yt){return arguments.length?(Rn.scale(Yt),Nn.scale(.35*Yt),ir.scale(Yt),dn.translate(Rn.translate())):Rn.scale()},dn.translate=function(Yt){if(!arguments.length)return Rn.translate();var Qt=Rn.scale(),mn=+Yt[0],vn=+Yt[1];return xn=Rn.translate(Yt).clipExtent([[mn-.455*Qt,vn-.238*Qt],[mn+.455*Qt,vn+.238*Qt]]).stream(Gt),pn=Nn.translate([mn-.307*Qt,vn+.201*Qt]).clipExtent([[mn-.425*Qt+u.Gg,vn+.12*Qt+u.Gg],[mn-.214*Qt-u.Gg,vn+.234*Qt-u.Gg]]).stream(Gt),Sn=ir.translate([mn-.205*Qt,vn+.212*Qt]).clipExtent([[mn-.214*Qt+u.Gg,vn+.166*Qt+u.Gg],[mn-.115*Qt-u.Gg,vn+.234*Qt-u.Gg]]).stream(Gt),Pt()},dn.fitExtent=function(Yt,Qt){return(0,ut.QX)(dn,Yt,Qt)},dn.fitSize=function(Yt,Qt){return(0,ut.UV)(dn,Yt,Qt)},dn.fitWidth=function(Yt,Qt){return(0,ut.Qx)(dn,Yt,Qt)},dn.fitHeight=function(Yt,Qt){return(0,ut.OW)(dn,Yt,Qt)},dn.scale(1070)}var xt=e(54724),mt=e(69020),Et=e(92992);function Lt(jt,tn){return[jt,(0,u.Yz)((0,u.a6)((u.or+tn)/2))]}function zt(){return Wt(Lt).scale(961/u.kD)}function Wt(jt){var tn,xn,pn,Sn=(0,rt.c)(jt),Gn=Sn.center,Rn=Sn.scale,Nn=Sn.translate,ir=Sn.clipExtent,Gt=null;function dn(){var Pt=u.pi*Rn(),Yt=Sn((0,Et.c)(Sn.rotate()).invert([0,0]));return ir(Gt==null?[[Yt[0]-Pt,Yt[1]-Pt],[Yt[0]+Pt,Yt[1]+Pt]]:jt===Lt?[[Math.max(Yt[0]-Pt,Gt),tn],[Math.min(Yt[0]+Pt,xn),pn]]:[[Gt,Math.max(Yt[1]-Pt,tn)],[xn,Math.min(Yt[1]+Pt,pn)]])}return Sn.scale=function(Pt){return arguments.length?(Rn(Pt),dn()):Rn()},Sn.translate=function(Pt){return arguments.length?(Nn(Pt),dn()):Nn()},Sn.center=function(Pt){return arguments.length?(Gn(Pt),dn()):Gn()},Sn.clipExtent=function(Pt){return arguments.length?(Pt==null?Gt=tn=xn=pn=null:(Gt=+Pt[0][0],tn=+Pt[0][1],xn=+Pt[1][0],pn=+Pt[1][1]),dn()):Gt==null?null:[[Gt,tn],[xn,pn]]},dn()}function rn(jt){return(0,u.a6)((u.or+jt)/2)}function Ut(jt,tn){var xn=(0,u.W8)(jt),pn=jt===tn?(0,u.g$)(jt):(0,u.Yz)(xn/(0,u.W8)(tn))/(0,u.Yz)(rn(tn)/rn(jt)),Sn=xn*(0,u.g3)(rn(jt),pn)/pn;if(!pn)return Lt;function Gn(Rn,Nn){Sn>0?Nn<-u.or+u.Gg&&(Nn=-u.or+u.Gg):Nn>u.or-u.Gg&&(Nn=u.or-u.Gg);var ir=Sn/(0,u.g3)(rn(Nn),pn);return[ir*(0,u.g$)(pn*Rn),Sn-ir*(0,u.W8)(pn*Rn)]}return Gn.invert=function(Rn,Nn){var ir=Sn-Nn,Gt=(0,u.kq)(pn)*(0,u._I)(Rn*Rn+ir*ir),dn=(0,u.WE)(Rn,(0,u.a2)(ir))*(0,u.kq)(ir);return ir*pn<0&&(dn-=u.pi*(0,u.kq)(Rn)*(0,u.kq)(ir)),[dn/pn,2*(0,u.MQ)((0,u.g3)(Sn/Gt,1/pn))-u.or]},Gn}function Vt(){return Ye(Ut).scale(109.5).parallels([30,30])}Lt.invert=function(jt,tn){return[jt,2*(0,u.MQ)((0,u.oN)(tn))-u.or]};var en=e(69604);function Ln(jt,tn){var xn=(0,u.W8)(jt),pn=jt===tn?(0,u.g$)(jt):(xn-(0,u.W8)(tn))/(tn-jt),Sn=xn/pn+jt;if((0,u.a2)(pn)<u.Gg)return en.u;function Gn(Rn,Nn){var ir=Sn-Nn,Gt=pn*Rn;return[ir*(0,u.g$)(Gt),Sn-ir*(0,u.W8)(Gt)]}return Gn.invert=function(Rn,Nn){var ir=Sn-Nn,Gt=(0,u.WE)(Rn,(0,u.a2)(ir))*(0,u.kq)(ir);return ir*pn<0&&(Gt-=u.pi*(0,u.kq)(Rn)*(0,u.kq)(ir)),[Gt/pn,Sn-(0,u.kq)(pn)*(0,u._I)(Rn*Rn+ir*ir)]},Gn}function An(){return Ye(Ln).scale(131.154).center([0,13.9389])}var hn=1.340264,Xt=-.081106,ln=893e-6,nn=.003796,cn=(0,u._I)(3)/2;function Tn(jt,tn){var xn=(0,u.qR)(cn*(0,u.g$)(tn)),pn=xn*xn,Sn=pn*pn*pn;return[jt*(0,u.W8)(xn)/(cn*(hn+3*Xt*pn+Sn*(7*ln+9*nn*pn))),xn*(hn+Xt*pn+Sn*(ln+nn*pn))]}function Mn(){return(0,rt.c)(Tn).scale(177.158)}Tn.invert=function(jt,tn){for(var xn,pn=tn,Sn=pn*pn,Gn=Sn*Sn*Sn,Rn=0;Rn<12&&(Gn=(Sn=(pn-=xn=(pn*(hn+Xt*Sn+Gn*(ln+nn*Sn))-tn)/(hn+3*Xt*Sn+Gn*(7*ln+9*nn*Sn)))*pn)*Sn*Sn,!((0,u.a2)(xn)<u.a8));++Rn);return[cn*jt*(hn+3*Xt*Sn+Gn*(7*ln+9*nn*Sn))/(0,u.W8)(pn),(0,u.qR)((0,u.g$)(pn)/cn)]};var zn=e(53285),In=e(15196);function Pn(){var jt,tn,xn,pn,Sn,Gn,Rn,Nn=1,ir=0,Gt=0,dn=1,Pt=1,Yt=0,Qt=null,mn=1,vn=1,_n=(0,In.s)({point:function(on,fn){var En=Jt([on,fn]);this.stream.point(En[0],En[1])}}),sn=re.c;function Kt(){return mn=Nn*dn,vn=Nn*Pt,Gn=Rn=null,Jt}function Jt(on){var fn=on[0]*mn,En=on[1]*vn;if(Yt){var On=En*jt-fn*tn;fn=fn*jt+En*tn,En=On}return[fn+ir,En+Gt]}return Jt.invert=function(on){var fn=on[0]-ir,En=on[1]-Gt;if(Yt){var On=En*jt+fn*tn;fn=fn*jt-En*tn,En=On}return[fn/mn,En/vn]},Jt.stream=function(on){return Gn&&Rn===on?Gn:Gn=_n(sn(Rn=on))},Jt.postclip=function(on){return arguments.length?(sn=on,Qt=xn=pn=Sn=null,Kt()):sn},Jt.clipExtent=function(on){return arguments.length?(sn=on==null?(Qt=xn=pn=Sn=null,re.c):(0,s.c)(Qt=+on[0][0],xn=+on[0][1],pn=+on[1][0],Sn=+on[1][1]),Kt()):Qt==null?null:[[Qt,xn],[pn,Sn]]},Jt.scale=function(on){return arguments.length?(Nn=+on,Kt()):Nn},Jt.translate=function(on){return arguments.length?(ir=+on[0],Gt=+on[1],Kt()):[ir,Gt]},Jt.angle=function(on){return arguments.length?(Yt=on%360*u.qw,tn=(0,u.g$)(Yt),jt=(0,u.W8)(Yt),Kt()):Yt*u.oh},Jt.reflectX=function(on){return arguments.length?(dn=on?-1:1,Kt()):dn<0},Jt.reflectY=function(on){return arguments.length?(Pt=on?-1:1,Kt()):Pt<0},Jt.fitExtent=function(on,fn){return(0,ut.QX)(Jt,on,fn)},Jt.fitSize=function(on,fn){return(0,ut.UV)(Jt,on,fn)},Jt.fitWidth=function(on,fn){return(0,ut.Qx)(Jt,on,fn)},Jt.fitHeight=function(on,fn){return(0,ut.OW)(Jt,on,fn)},Jt}var Hn=e(47984),Fn=e(4888),tr=e(62280);function or(jt,tn){var xn=(0,u.W8)(tn),pn=1+(0,u.W8)(jt)*xn;return[xn*(0,u.g$)(jt)/pn,(0,u.g$)(tn)/pn]}function ur(){return(0,rt.c)(or).scale(250).clipAngle(142)}function er(jt,tn){return[(0,u.Yz)((0,u.a6)((u.or+tn)/2)),-jt]}function Mr(){var jt=Wt(er),tn=jt.center,xn=jt.rotate;return jt.center=function(pn){return arguments.length?tn([-pn[1],pn[0]]):[(pn=tn())[1],-pn[0]]},jt.rotate=function(pn){return arguments.length?xn([pn[0],pn[1],pn.length>2?pn[2]+90:90]):[(pn=xn())[0],pn[1],pn[2]-90]},xn([0,0,90]).scale(159.155)}or.invert=(0,tr.g)(function(jt){return 2*(0,u.MQ)(jt)}),er.invert=function(jt,tn){return[-tn,2*(0,u.MQ)((0,u.oN)(jt))-u.or]}},27284:function(ee,z,e){"use strict";e.d(z,{c:function(){return k}});var M=e(64528);function k(o,T){var b=o[0]*M.qw,h=o[1]*M.qw,s=T[0]*M.qw,t=T[1]*M.qw,i=(0,M.W8)(h),n=(0,M.g$)(h),r=(0,M.W8)(t),a=(0,M.g$)(t),l=i*(0,M.W8)(b),u=i*(0,M.g$)(b),d=r*(0,M.W8)(s),c=r*(0,M.g$)(s),x=2*(0,M.qR)((0,M._I)((0,M.SD)(t-h)+i*r*(0,M.SD)(s-b))),g=(0,M.g$)(x),p=x?function(v){var m=(0,M.g$)(v*=x)/g,y=(0,M.g$)(x-v)/g,_=y*l+m*d,f=y*u+m*c,S=y*n+m*a;return[(0,M.WE)(f,_)*M.oh,(0,M.WE)(S,(0,M._I)(_*_+f*f))*M.oh]}:function(){return[b*M.oh,h*M.oh]};return p.distance=x,p}},64528:function(ee,z,e){"use strict";e.d(z,{Gg:function(){return M},Km:function(){return l},MQ:function(){return n},SD:function(){return _},W8:function(){return a},WE:function(){return r},Yz:function(){return d},_I:function(){return p},a2:function(){return i},a6:function(){return v},a8:function(){return k},g$:function(){return x},g3:function(){return c},kD:function(){return h},kq:function(){return g},mE:function(){return m},oN:function(){return u},oh:function(){return s},or:function(){return T},pi:function(){return o},qR:function(){return y},qw:function(){return t},wL:function(){return b}});var M=1e-6,k=1e-12,o=Math.PI,T=o/2,b=o/4,h=2*o,s=180/o,t=o/180,i=Math.abs,n=Math.atan,r=Math.atan2,a=Math.cos,l=Math.ceil,u=Math.exp,d=Math.log,c=Math.pow,x=Math.sin,g=Math.sign||function(f){return f>0?1:f<0?-1:0},p=Math.sqrt,v=Math.tan;function m(f){return f>1?0:f<-1?o:Math.acos(f)}function y(f){return f>1?T:f<-1?-T:Math.asin(f)}function _(f){return(f=x(f/2))*f}},70932:function(ee,z,e){"use strict";function M(){}e.d(z,{c:function(){return M}})},73784:function(ee,z,e){"use strict";var M=e(70932),k=1/0,o=k,T=-k,b=T,h={point:function(s,t){s<k&&(k=s),s>T&&(T=s),t<o&&(o=t),t>b&&(b=t)},lineStart:M.c,lineEnd:M.c,polygonStart:M.c,polygonEnd:M.c,result:function(){var s=[[k,o],[T,b]];return T=b=-(o=k=1/0),s}};z.c=h},41860:function(ee,z,e){"use strict";e.d(z,{c:function(){return k}});var M=e(64528);function k(o,T){return(0,M.a2)(o[0]-T[0])<M.Gg&&(0,M.a2)(o[1]-T[1])<M.Gg}},58196:function(ee,z,e){"use strict";e.d(z,{c:function(){return h}});var M=e(88728),k=e(84220),o=e(64528),T=(0,M.c)();function b(s){return(0,o.a2)(s[0])<=o.pi?s[0]:(0,o.kq)(s[0])*(((0,o.a2)(s[0])+o.pi)%o.kD-o.pi)}function h(s,t){var i=b(t),n=t[1],r=(0,o.g$)(n),a=[(0,o.g$)(i),-(0,o.W8)(i),0],l=0,u=0;T.reset(),r===1?n=o.or+o.Gg:r===-1&&(n=-o.or-o.Gg);for(var d=0,c=s.length;d<c;++d)if(g=(x=s[d]).length)for(var x,g,p=x[g-1],v=b(p),m=p[1]/2+o.wL,y=(0,o.g$)(m),_=(0,o.W8)(m),f=0;f<g;++f,v=w,y=P,_=C,p=S){var S=x[f],w=b(S),E=S[1]/2+o.wL,P=(0,o.g$)(E),C=(0,o.W8)(E),O=w-v,R=O>=0?1:-1,j=R*O,D=j>o.pi,N=y*P;if(T.add((0,o.WE)(N*R*(0,o.g$)(j),_*C+N*(0,o.W8)(j))),l+=D?O+R*o.kD:O,D^v>=i^w>=i){var W=(0,k.CW)((0,k.ux)(p),(0,k.ux)(S));(0,k.cJ)(W);var F=(0,k.CW)(a,W);(0,k.cJ)(F);var U=(D^O>=0?-1:1)*(0,o.qR)(F[2]);(n>U||n===U&&(W[0]||W[1]))&&(u+=D^O>=0?1:-1)}}return(l<-o.Gg||l<o.Gg&&T<-o.Gg)^1&u}},62280:function(ee,z,e){"use strict";e.d(z,{a:function(){return k},g:function(){return o}});var M=e(64528);function k(T){return function(b,h){var s=(0,M.W8)(b),t=(0,M.W8)(h),i=T(s*t);return[i*t*(0,M.g$)(b),i*(0,M.g$)(h)]}}function o(T){return function(b,h){var s=(0,M._I)(b*b+h*h),t=T(s),i=(0,M.g$)(t),n=(0,M.W8)(t);return[(0,M.WE)(b*i,s*n),(0,M.qR)(s&&h*i/s)]}}},54724:function(ee,z,e){"use strict";e.d(z,{c:function(){return b},y:function(){return T}});var M=e(64528),k=e(62280),o=e(87952),T=(0,k.a)(function(h){return(0,M._I)(2/(1+h))});function b(){return(0,o.c)(T).scale(124.75).clipAngle(179.999)}T.invert=(0,k.g)(function(h){return 2*(0,M.qR)(h/2)})},69020:function(ee,z,e){"use strict";e.d(z,{O:function(){return T},c:function(){return b}});var M=e(64528),k=e(62280),o=e(87952),T=(0,k.a)(function(h){return(h=(0,M.mE)(h))&&h/(0,M.g$)(h)});function b(){return(0,o.c)(T).scale(79.4188).clipAngle(179.999)}T.invert=(0,k.g)(function(h){return h})},69604:function(ee,z,e){"use strict";e.d(z,{c:function(){return o},u:function(){return k}});var M=e(87952);function k(T,b){return[T,b]}function o(){return(0,M.c)(k).scale(152.63)}k.invert=k},86420:function(ee,z,e){"use strict";e.d(z,{OW:function(){return s},QX:function(){return T},Qx:function(){return h},UV:function(){return b}});var M=e(16016),k=e(73784);function o(t,i,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),(0,M.c)(n,t.stream(k.c)),i(k.c.result()),r!=null&&t.clipExtent(r),t}function T(t,i,n){return o(t,function(r){var a=i[1][0]-i[0][0],l=i[1][1]-i[0][1],u=Math.min(a/(r[1][0]-r[0][0]),l/(r[1][1]-r[0][1])),d=+i[0][0]+(a-u*(r[1][0]+r[0][0]))/2,c=+i[0][1]+(l-u*(r[1][1]+r[0][1]))/2;t.scale(150*u).translate([d,c])},n)}function b(t,i,n){return T(t,[[0,0],i],n)}function h(t,i,n){return o(t,function(r){var a=+i,l=a/(r[1][0]-r[0][0]),u=(a-l*(r[1][0]+r[0][0]))/2,d=-l*r[0][1];t.scale(150*l).translate([u,d])},n)}function s(t,i,n){return o(t,function(r){var a=+i,l=a/(r[1][1]-r[0][1]),u=-l*r[0][0],d=(a-l*(r[1][1]+r[0][1]))/2;t.scale(150*l).translate([u,d])},n)}},53285:function(ee,z,e){"use strict";e.d(z,{Y:function(){return T},c:function(){return b}});var M=e(64528),k=e(62280),o=e(87952);function T(h,s){var t=(0,M.W8)(s),i=(0,M.W8)(h)*t;return[t*(0,M.g$)(h)/i,(0,M.g$)(s)/i]}function b(){return(0,o.c)(T).scale(144.049).clipAngle(60)}T.invert=(0,k.g)(M.MQ)},87952:function(ee,z,e){"use strict";e.d(z,{c:function(){return x},U:function(){return g}});var M=e(78284),k=e(2728),o=e(21676),T=e(68120),b=e(7376),h=e(64528),s=e(92992),t=e(15196),i=e(86420),n=e(84220),r=16,a=(0,h.W8)(30*h.qw);function l(p,v){return+v?function(m,y){function _(f,S,w,E,P,C,O,R,j,D,N,W,F,U){var V=O-f,te=R-S,J=V*V+te*te;if(J>4*y&&F--){var K=E+D,X=P+N,Z=C+W,$=(0,h._I)(K*K+X*X+Z*Z),re=(0,h.qR)(Z/=$),oe=(0,h.a2)((0,h.a2)(Z)-1)<h.Gg||(0,h.a2)(w-j)<h.Gg?(w+j)/2:(0,h.WE)(X,K),ie=m(oe,re),ue=ie[0],me=ie[1],be=ue-f,ge=me-S,de=te*be-V*ge;(de*de/J>y||(0,h.a2)((V*be+te*ge)/J-.5)>.3||E*D+P*N+C*W<a)&&(_(f,S,w,E,P,C,ue,me,oe,K/=$,X/=$,Z,F,U),U.point(ue,me),_(ue,me,oe,K,X,Z,O,R,j,D,N,W,F,U))}}return function(f){var S,w,E,P,C,O,R,j,D,N,W,F,U={point:V,lineStart:te,lineEnd:K,polygonStart:function(){f.polygonStart(),U.lineStart=X},polygonEnd:function(){f.polygonEnd(),U.lineStart=te}};function V(re,oe){re=m(re,oe),f.point(re[0],re[1])}function te(){j=NaN,U.point=J,f.lineStart()}function J(re,oe){var ie=(0,n.ux)([re,oe]),ue=m(re,oe);_(j,D,R,N,W,F,j=ue[0],D=ue[1],R=re,N=ie[0],W=ie[1],F=ie[2],r,f),f.point(j,D)}function K(){U.point=V,f.lineEnd()}function X(){te(),U.point=Z,U.lineEnd=$}function Z(re,oe){J(S=re,oe),w=j,E=D,P=N,C=W,O=F,U.point=J}function $(){_(j,D,R,N,W,F,w,E,S,P,C,O,r,f),U.lineEnd=K,K()}return U}}(p,v):function(m){return(0,t.s)({point:function(y,_){y=m(y,_),this.stream.point(y[0],y[1])}})}(p)}var u=(0,t.s)({point:function(p,v){this.stream.point(p*h.qw,v*h.qw)}});function d(p,v,m,y,_){function f(S,w){return[v+p*(S*=y),m-p*(w*=_)]}return f.invert=function(S,w){return[(S-v)/p*y,(m-w)/p*_]},f}function c(p,v,m,y,_,f){var S=(0,h.W8)(f),w=(0,h.g$)(f),E=S*p,P=w*p,C=S/p,O=w/p,R=(w*m-S*v)/p,j=(w*v+S*m)/p;function D(N,W){return[E*(N*=y)-P*(W*=_)+v,m-P*N-E*W]}return D.invert=function(N,W){return[y*(C*N-O*W+R),_*(j-O*N-C*W)]},D}function x(p){return g(function(){return p})()}function g(p){var v,m,y,_,f,S,w,E,P,C,O=150,R=480,j=250,D=0,N=0,W=0,F=0,U=0,V=0,te=1,J=1,K=null,X=M.c,Z=null,$=b.c,re=.5;function oe(be){return E(be[0]*h.qw,be[1]*h.qw)}function ie(be){return(be=E.invert(be[0],be[1]))&&[be[0]*h.oh,be[1]*h.oh]}function ue(){var be=c(O,0,0,te,J,V).apply(null,v(D,N)),ge=(V?c:d)(O,R-be[0],j-be[1],te,J,V);return m=(0,s.O)(W,F,U),w=(0,T.c)(v,ge),E=(0,T.c)(m,w),S=l(w,re),me()}function me(){return P=C=null,oe}return oe.stream=function(be){return P&&C===be?P:P=u(function(ge){return(0,t.s)({point:function(de,ve){var pe=ge(de,ve);return this.stream.point(pe[0],pe[1])}})}(m)(X(S($(C=be)))))},oe.preclip=function(be){return arguments.length?(X=be,K=void 0,me()):X},oe.postclip=function(be){return arguments.length?($=be,Z=y=_=f=null,me()):$},oe.clipAngle=function(be){return arguments.length?(X=+be?(0,k.c)(K=be*h.qw):(K=null,M.c),me()):K*h.oh},oe.clipExtent=function(be){return arguments.length?($=be==null?(Z=y=_=f=null,b.c):(0,o.c)(Z=+be[0][0],y=+be[0][1],_=+be[1][0],f=+be[1][1]),me()):Z==null?null:[[Z,y],[_,f]]},oe.scale=function(be){return arguments.length?(O=+be,ue()):O},oe.translate=function(be){return arguments.length?(R=+be[0],j=+be[1],ue()):[R,j]},oe.center=function(be){return arguments.length?(D=be[0]%360*h.qw,N=be[1]%360*h.qw,ue()):[D*h.oh,N*h.oh]},oe.rotate=function(be){return arguments.length?(W=be[0]%360*h.qw,F=be[1]%360*h.qw,U=be.length>2?be[2]%360*h.qw:0,ue()):[W*h.oh,F*h.oh,U*h.oh]},oe.angle=function(be){return arguments.length?(V=be%360*h.qw,ue()):V*h.oh},oe.reflectX=function(be){return arguments.length?(te=be?-1:1,ue()):te<0},oe.reflectY=function(be){return arguments.length?(J=be?-1:1,ue()):J<0},oe.precision=function(be){return arguments.length?(S=l(w,re=be*be),me()):(0,h._I)(re)},oe.fitExtent=function(be,ge){return(0,i.QX)(oe,be,ge)},oe.fitSize=function(be,ge){return(0,i.UV)(oe,be,ge)},oe.fitWidth=function(be,ge){return(0,i.Qx)(oe,be,ge)},oe.fitHeight=function(be,ge){return(0,i.OW)(oe,be,ge)},function(){return v=p.apply(this,arguments),oe.invert=v.invert&&ie,ue()}}},47984:function(ee,z,e){"use strict";e.d(z,{c:function(){return T},g:function(){return o}});var M=e(87952),k=e(64528);function o(b,h){var s=h*h,t=s*s;return[b*(.8707-.131979*s+t*(t*(.003971*s-.001529*t)-.013791)),h*(1.007226+s*(.015085+t*(.028874*s-.044475-.005916*t)))]}function T(){return(0,M.c)(o).scale(175.295)}o.invert=function(b,h){var s,t=h,i=25;do{var n=t*t,r=n*n;t-=s=(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))-h)/(1.007226+n*(.045255+r*(.259866*n-.311325-.06507600000000001*r)))}while((0,k.a2)(s)>k.Gg&&--i>0);return[b/(.8707+(n=t*t)*(n*(n*n*n*(.003971-.001529*n)-.013791)-.131979)),t]}},4888:function(ee,z,e){"use strict";e.d(z,{c:function(){return b},t:function(){return T}});var M=e(64528),k=e(62280),o=e(87952);function T(h,s){return[(0,M.W8)(s)*(0,M.g$)(h),(0,M.g$)(s)]}function b(){return(0,o.c)(T).scale(249.5).clipAngle(90+M.Gg)}T.invert=(0,k.g)(M.qR)},92992:function(ee,z,e){"use strict";e.d(z,{O:function(){return T},c:function(){return t}});var M=e(68120),k=e(64528);function o(i,n){return[(0,k.a2)(i)>k.pi?i+Math.round(-i/k.kD)*k.kD:i,n]}function T(i,n,r){return(i%=k.kD)?n||r?(0,M.c)(h(i),s(n,r)):h(i):n||r?s(n,r):o}function b(i){return function(n,r){return[(n+=i)>k.pi?n-k.kD:n<-k.pi?n+k.kD:n,r]}}function h(i){var n=b(i);return n.invert=b(-i),n}function s(i,n){var r=(0,k.W8)(i),a=(0,k.g$)(i),l=(0,k.W8)(n),u=(0,k.g$)(n);function d(c,x){var g=(0,k.W8)(x),p=(0,k.W8)(c)*g,v=(0,k.g$)(c)*g,m=(0,k.g$)(x),y=m*r+p*a;return[(0,k.WE)(v*l-y*u,p*r-m*a),(0,k.qR)(y*l+v*u)]}return d.invert=function(c,x){var g=(0,k.W8)(x),p=(0,k.W8)(c)*g,v=(0,k.g$)(c)*g,m=(0,k.g$)(x),y=m*l-v*u;return[(0,k.WE)(v*l+m*u,p*r+y*a),(0,k.qR)(y*r-p*a)]},d}function t(i){function n(r){return(r=i(r[0]*k.qw,r[1]*k.qw))[0]*=k.oh,r[1]*=k.oh,r}return i=T(i[0]*k.qw,i[1]*k.qw,i.length>2?i[2]*k.qw:0),n.invert=function(r){return(r=i.invert(r[0]*k.qw,r[1]*k.qw))[0]*=k.oh,r[1]*=k.oh,r},n}o.invert=o},16016:function(ee,z,e){"use strict";function M(s,t){s&&o.hasOwnProperty(s.type)&&o[s.type](s,t)}e.d(z,{c:function(){return h}});var k={Feature:function(s,t){M(s.geometry,t)},FeatureCollection:function(s,t){for(var i=s.features,n=-1,r=i.length;++n<r;)M(i[n].geometry,t)}},o={Sphere:function(s,t){t.sphere()},Point:function(s,t){s=s.coordinates,t.point(s[0],s[1],s[2])},MultiPoint:function(s,t){for(var i=s.coordinates,n=-1,r=i.length;++n<r;)s=i[n],t.point(s[0],s[1],s[2])},LineString:function(s,t){T(s.coordinates,t,0)},MultiLineString:function(s,t){for(var i=s.coordinates,n=-1,r=i.length;++n<r;)T(i[n],t,0)},Polygon:function(s,t){b(s.coordinates,t)},MultiPolygon:function(s,t){for(var i=s.coordinates,n=-1,r=i.length;++n<r;)b(i[n],t)},GeometryCollection:function(s,t){for(var i=s.geometries,n=-1,r=i.length;++n<r;)M(i[n],t)}};function T(s,t,i){var n,r=-1,a=s.length-i;for(t.lineStart();++r<a;)n=s[r],t.point(n[0],n[1],n[2]);t.lineEnd()}function b(s,t){var i=-1,n=s.length;for(t.polygonStart();++i<n;)T(s[i],t,1);t.polygonEnd()}function h(s,t){s&&k.hasOwnProperty(s.type)?k[s.type](s,t):M(s,t)}},15196:function(ee,z,e){"use strict";function M(T){return{stream:k(T)}}function k(T){return function(b){var h=new o;for(var s in T)h[s]=T[s];return h.stream=b,h}}function o(){}e.d(z,{c:function(){return M},s:function(){return k}}),o.prototype={constructor:o,point:function(T,b){this.stream.point(T,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(ee,z,e){"use strict";function M(ae,he){return ae.parent===he.parent?1:2}function k(ae,he){return ae+he.x}function o(ae,he){return Math.max(ae,he.y)}function T(){var ae=M,he=1,Se=1,ke=!1;function Me(Ee){var De,fe=0;Ee.eachAfter(function(Pe){var Ue=Pe.children;Ue?(Pe.x=function(Ve){return Ve.reduce(k,0)/Ve.length}(Ue),Pe.y=function(Ve){return 1+Ve.reduce(o,0)}(Ue)):(Pe.x=De?fe+=ae(Pe,De):0,Pe.y=0,De=Pe)});var xe=function(Pe){for(var Ue;Ue=Pe.children;)Pe=Ue[0];return Pe}(Ee),we=function(Pe){for(var Ue;Ue=Pe.children;)Pe=Ue[Ue.length-1];return Pe}(Ee),Oe=xe.x-ae(xe,we)/2,ze=we.x+ae(we,xe)/2;return Ee.eachAfter(ke?function(Pe){Pe.x=(Pe.x-Ee.x)*he,Pe.y=(Ee.y-Pe.y)*Se}:function(Pe){Pe.x=(Pe.x-Oe)/(ze-Oe)*he,Pe.y=(1-(Ee.y?Pe.y/Ee.y:1))*Se})}return Me.separation=function(Ee){return arguments.length?(ae=Ee,Me):ae},Me.size=function(Ee){return arguments.length?(ke=!1,he=+Ee[0],Se=+Ee[1],Me):ke?null:[he,Se]},Me.nodeSize=function(Ee){return arguments.length?(ke=!0,he=+Ee[0],Se=+Ee[1],Me):ke?[he,Se]:null},Me}function b(ae){var he=0,Se=ae.children,ke=Se&&Se.length;if(ke)for(;--ke>=0;)he+=Se[ke].value;else he=1;ae.value=he}function h(ae,he){var Se,ke,Me,Ee,De,fe=new n(ae),xe=+ae.value&&(fe.value=ae.value),we=[fe];for(he==null&&(he=s);Se=we.pop();)if(xe&&(Se.value=+Se.data.value),(Me=he(Se.data))&&(De=Me.length))for(Se.children=new Array(De),Ee=De-1;Ee>=0;--Ee)we.push(ke=Se.children[Ee]=new n(Me[Ee])),ke.parent=Se,ke.depth=Se.depth+1;return fe.eachBefore(i)}function s(ae){return ae.children}function t(ae){ae.data=ae.data.data}function i(ae){var he=0;do ae.height=he;while((ae=ae.parent)&&ae.height<++he)}function n(ae){this.data=ae,this.depth=this.height=0,this.parent=null}e.r(z),e.d(z,{cluster:function(){return T},hierarchy:function(){return h},pack:function(){return O},packEnclose:function(){return a},packSiblings:function(){return S},partition:function(){return F},stratify:function(){return X},tree:function(){return me},treemap:function(){return pe},treemapBinary:function(){return _e},treemapDice:function(){return W},treemapResquarify:function(){return le},treemapSlice:function(){return be},treemapSliceDice:function(){return Te},treemapSquarify:function(){return ve}}),n.prototype=h.prototype={constructor:n,count:function(){return this.eachAfter(b)},each:function(ae){var he,Se,ke,Me,Ee=this,De=[Ee];do for(he=De.reverse(),De=[];Ee=he.pop();)if(ae(Ee),Se=Ee.children)for(ke=0,Me=Se.length;ke<Me;++ke)De.push(Se[ke]);while(De.length);return this},eachAfter:function(ae){for(var he,Se,ke,Me=this,Ee=[Me],De=[];Me=Ee.pop();)if(De.push(Me),he=Me.children)for(Se=0,ke=he.length;Se<ke;++Se)Ee.push(he[Se]);for(;Me=De.pop();)ae(Me);return this},eachBefore:function(ae){for(var he,Se,ke=this,Me=[ke];ke=Me.pop();)if(ae(ke),he=ke.children)for(Se=he.length-1;Se>=0;--Se)Me.push(he[Se]);return this},sum:function(ae){return this.eachAfter(function(he){for(var Se=+ae(he.data)||0,ke=he.children,Me=ke&&ke.length;--Me>=0;)Se+=ke[Me].value;he.value=Se})},sort:function(ae){return this.eachBefore(function(he){he.children&&he.children.sort(ae)})},path:function(ae){for(var he=this,Se=function(Ee,De){if(Ee===De)return Ee;var fe=Ee.ancestors(),xe=De.ancestors(),we=null;for(Ee=fe.pop(),De=xe.pop();Ee===De;)we=Ee,Ee=fe.pop(),De=xe.pop();return we}(he,ae),ke=[he];he!==Se;)he=he.parent,ke.push(he);for(var Me=ke.length;ae!==Se;)ke.splice(Me,0,ae),ae=ae.parent;return ke},ancestors:function(){for(var ae=this,he=[ae];ae=ae.parent;)he.push(ae);return he},descendants:function(){var ae=[];return this.each(function(he){ae.push(he)}),ae},leaves:function(){var ae=[];return this.eachBefore(function(he){he.children||ae.push(he)}),ae},links:function(){var ae=this,he=[];return ae.each(function(Se){Se!==ae&&he.push({source:Se.parent,target:Se})}),he},copy:function(){return h(this).eachBefore(t)}};var r=Array.prototype.slice;function a(ae){for(var he,Se,ke=0,Me=(ae=function(De){for(var fe,xe,we=De.length;we;)xe=Math.random()*we--|0,fe=De[we],De[we]=De[xe],De[xe]=fe;return De}(r.call(ae))).length,Ee=[];ke<Me;)he=ae[ke],Se&&d(Se,he)?++ke:(Se=x(Ee=l(Ee,he)),ke=0);return Se}function l(ae,he){var Se,ke;if(c(he,ae))return[he];for(Se=0;Se<ae.length;++Se)if(u(he,ae[Se])&&c(g(ae[Se],he),ae))return[ae[Se],he];for(Se=0;Se<ae.length-1;++Se)for(ke=Se+1;ke<ae.length;++ke)if(u(g(ae[Se],ae[ke]),he)&&u(g(ae[Se],he),ae[ke])&&u(g(ae[ke],he),ae[Se])&&c(p(ae[Se],ae[ke],he),ae))return[ae[Se],ae[ke],he];throw new Error}function u(ae,he){var Se=ae.r-he.r,ke=he.x-ae.x,Me=he.y-ae.y;return Se<0||Se*Se<ke*ke+Me*Me}function d(ae,he){var Se=ae.r-he.r+1e-6,ke=he.x-ae.x,Me=he.y-ae.y;return Se>0&&Se*Se>ke*ke+Me*Me}function c(ae,he){for(var Se=0;Se<he.length;++Se)if(!d(ae,he[Se]))return!1;return!0}function x(ae){switch(ae.length){case 1:return{x:(he=ae[0]).x,y:he.y,r:he.r};case 2:return g(ae[0],ae[1]);case 3:return p(ae[0],ae[1],ae[2])}var he}function g(ae,he){var Se=ae.x,ke=ae.y,Me=ae.r,Ee=he.x,De=he.y,fe=he.r,xe=Ee-Se,we=De-ke,Oe=fe-Me,ze=Math.sqrt(xe*xe+we*we);return{x:(Se+Ee+xe/ze*Oe)/2,y:(ke+De+we/ze*Oe)/2,r:(ze+Me+fe)/2}}function p(ae,he,Se){var ke=ae.x,Me=ae.y,Ee=ae.r,De=he.x,fe=he.y,xe=he.r,we=Se.x,Oe=Se.y,ze=Se.r,Pe=ke-De,Ue=ke-we,Ve=Me-fe,Ze=Me-Oe,it=xe-Ee,tt=ze-Ee,dt=ke*ke+Me*Me-Ee*Ee,yt=dt-De*De-fe*fe+xe*xe,vt=dt-we*we-Oe*Oe+ze*ze,et=Ue*Ve-Pe*Ze,Qe=(Ve*vt-Ze*yt)/(2*et)-ke,wt=(Ze*it-Ve*tt)/et,It=(Ue*yt-Pe*vt)/(2*et)-Me,Dt=(Pe*tt-Ue*it)/et,Ct=wt*wt+Dt*Dt-1,He=2*(Ee+Qe*wt+It*Dt),We=Qe*Qe+It*It-Ee*Ee,Be=-(Ct?(He+Math.sqrt(He*He-4*Ct*We))/(2*Ct):We/He);return{x:ke+Qe+wt*Be,y:Me+It+Dt*Be,r:Be}}function v(ae,he,Se){var ke,Me,Ee,De,fe=ae.x-he.x,xe=ae.y-he.y,we=fe*fe+xe*xe;we?(Me=he.r+Se.r,Me*=Me,De=ae.r+Se.r,Me>(De*=De)?(ke=(we+De-Me)/(2*we),Ee=Math.sqrt(Math.max(0,De/we-ke*ke)),Se.x=ae.x-ke*fe-Ee*xe,Se.y=ae.y-ke*xe+Ee*fe):(ke=(we+Me-De)/(2*we),Ee=Math.sqrt(Math.max(0,Me/we-ke*ke)),Se.x=he.x+ke*fe-Ee*xe,Se.y=he.y+ke*xe+Ee*fe)):(Se.x=he.x+Se.r,Se.y=he.y)}function m(ae,he){var Se=ae.r+he.r-1e-6,ke=he.x-ae.x,Me=he.y-ae.y;return Se>0&&Se*Se>ke*ke+Me*Me}function y(ae){var he=ae._,Se=ae.next._,ke=he.r+Se.r,Me=(he.x*Se.r+Se.x*he.r)/ke,Ee=(he.y*Se.r+Se.y*he.r)/ke;return Me*Me+Ee*Ee}function _(ae){this._=ae,this.next=null,this.previous=null}function f(ae){if(!(Me=ae.length))return 0;var he,Se,ke,Me,Ee,De,fe,xe,we,Oe,ze;if((he=ae[0]).x=0,he.y=0,!(Me>1))return he.r;if(Se=ae[1],he.x=-Se.r,Se.x=he.r,Se.y=0,!(Me>2))return he.r+Se.r;v(Se,he,ke=ae[2]),he=new _(he),Se=new _(Se),ke=new _(ke),he.next=ke.previous=Se,Se.next=he.previous=ke,ke.next=Se.previous=he;e:for(fe=3;fe<Me;++fe){v(he._,Se._,ke=ae[fe]),ke=new _(ke),xe=Se.next,we=he.previous,Oe=Se._.r,ze=he._.r;do if(Oe<=ze){if(m(xe._,ke._)){Se=xe,he.next=Se,Se.previous=he,--fe;continue e}Oe+=xe._.r,xe=xe.next}else{if(m(we._,ke._)){(he=we).next=Se,Se.previous=he,--fe;continue e}ze+=we._.r,we=we.previous}while(xe!==we.next);for(ke.previous=he,ke.next=Se,he.next=Se.previous=Se=ke,Ee=y(he);(ke=ke.next)!==Se;)(De=y(ke))<Ee&&(he=ke,Ee=De);Se=he.next}for(he=[Se._],ke=Se;(ke=ke.next)!==Se;)he.push(ke._);for(ke=a(he),fe=0;fe<Me;++fe)(he=ae[fe]).x-=ke.x,he.y-=ke.y;return ke.r}function S(ae){return f(ae),ae}function w(ae){if(typeof ae!="function")throw new Error;return ae}function E(){return 0}function P(ae){return function(){return ae}}function C(ae){return Math.sqrt(ae.value)}function O(){var ae=null,he=1,Se=1,ke=E;function Me(Ee){return Ee.x=he/2,Ee.y=Se/2,ae?Ee.eachBefore(R(ae)).eachAfter(j(ke,.5)).eachBefore(D(1)):Ee.eachBefore(R(C)).eachAfter(j(E,1)).eachAfter(j(ke,Ee.r/Math.min(he,Se))).eachBefore(D(Math.min(he,Se)/(2*Ee.r))),Ee}return Me.radius=function(Ee){return arguments.length?(ae=(De=Ee)==null?null:w(De),Me):ae;var De},Me.size=function(Ee){return arguments.length?(he=+Ee[0],Se=+Ee[1],Me):[he,Se]},Me.padding=function(Ee){return arguments.length?(ke=typeof Ee=="function"?Ee:P(+Ee),Me):ke},Me}function R(ae){return function(he){he.children||(he.r=Math.max(0,+ae(he)||0))}}function j(ae,he){return function(Se){if(ke=Se.children){var ke,Me,Ee,De=ke.length,fe=ae(Se)*he||0;if(fe)for(Me=0;Me<De;++Me)ke[Me].r+=fe;if(Ee=f(ke),fe)for(Me=0;Me<De;++Me)ke[Me].r-=fe;Se.r=Ee+fe}}}function D(ae){return function(he){var Se=he.parent;he.r*=ae,Se&&(he.x=Se.x+ae*he.x,he.y=Se.y+ae*he.y)}}function N(ae){ae.x0=Math.round(ae.x0),ae.y0=Math.round(ae.y0),ae.x1=Math.round(ae.x1),ae.y1=Math.round(ae.y1)}function W(ae,he,Se,ke,Me){for(var Ee,De=ae.children,fe=-1,xe=De.length,we=ae.value&&(ke-he)/ae.value;++fe<xe;)(Ee=De[fe]).y0=Se,Ee.y1=Me,Ee.x0=he,Ee.x1=he+=Ee.value*we}function F(){var ae=1,he=1,Se=0,ke=!1;function Me(Ee){var De=Ee.height+1;return Ee.x0=Ee.y0=Se,Ee.x1=ae,Ee.y1=he/De,Ee.eachBefore(function(fe,xe){return function(we){we.children&&W(we,we.x0,fe*(we.depth+1)/xe,we.x1,fe*(we.depth+2)/xe);var Oe=we.x0,ze=we.y0,Pe=we.x1-Se,Ue=we.y1-Se;Pe<Oe&&(Oe=Pe=(Oe+Pe)/2),Ue<ze&&(ze=Ue=(ze+Ue)/2),we.x0=Oe,we.y0=ze,we.x1=Pe,we.y1=Ue}}(he,De)),ke&&Ee.eachBefore(N),Ee}return Me.round=function(Ee){return arguments.length?(ke=!!Ee,Me):ke},Me.size=function(Ee){return arguments.length?(ae=+Ee[0],he=+Ee[1],Me):[ae,he]},Me.padding=function(Ee){return arguments.length?(Se=+Ee,Me):Se},Me}var U="$",V={depth:-1},te={};function J(ae){return ae.id}function K(ae){return ae.parentId}function X(){var ae=J,he=K;function Se(ke){var Me,Ee,De,fe,xe,we,Oe,ze=ke.length,Pe=new Array(ze),Ue={};for(Ee=0;Ee<ze;++Ee)Me=ke[Ee],xe=Pe[Ee]=new n(Me),(we=ae(Me,Ee,ke))!=null&&(we+="")&&(Ue[Oe=U+(xe.id=we)]=Oe in Ue?te:xe);for(Ee=0;Ee<ze;++Ee)if(xe=Pe[Ee],(we=he(ke[Ee],Ee,ke))!=null&&(we+="")){if(!(fe=Ue[U+we]))throw new Error("missing: "+we);if(fe===te)throw new Error("ambiguous: "+we);fe.children?fe.children.push(xe):fe.children=[xe],xe.parent=fe}else{if(De)throw new Error("multiple roots");De=xe}if(!De)throw new Error("no root");if(De.parent=V,De.eachBefore(function(Ve){Ve.depth=Ve.parent.depth+1,--ze}).eachBefore(i),De.parent=null,ze>0)throw new Error("cycle");return De}return Se.id=function(ke){return arguments.length?(ae=w(ke),Se):ae},Se.parentId=function(ke){return arguments.length?(he=w(ke),Se):he},Se}function Z(ae,he){return ae.parent===he.parent?1:2}function $(ae){var he=ae.children;return he?he[0]:ae.t}function re(ae){var he=ae.children;return he?he[he.length-1]:ae.t}function oe(ae,he,Se){var ke=Se/(he.i-ae.i);he.c-=ke,he.s+=Se,ae.c+=ke,he.z+=Se,he.m+=Se}function ie(ae,he,Se){return ae.a.parent===he.parent?ae.a:Se}function ue(ae,he){this._=ae,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=he}function me(){var ae=Z,he=1,Se=1,ke=null;function Me(xe){var we=function(tt){for(var dt,yt,vt,et,Qe,wt=new ue(tt,0),It=[wt];dt=It.pop();)if(vt=dt._.children)for(dt.children=new Array(Qe=vt.length),et=Qe-1;et>=0;--et)It.push(yt=dt.children[et]=new ue(vt[et],et)),yt.parent=dt;return(wt.parent=new ue(null,0)).children=[wt],wt}(xe);if(we.eachAfter(Ee),we.parent.m=-we.z,we.eachBefore(De),ke)xe.eachBefore(fe);else{var Oe=xe,ze=xe,Pe=xe;xe.eachBefore(function(tt){tt.x<Oe.x&&(Oe=tt),tt.x>ze.x&&(ze=tt),tt.depth>Pe.depth&&(Pe=tt)});var Ue=Oe===ze?1:ae(Oe,ze)/2,Ve=Ue-Oe.x,Ze=he/(ze.x+Ue+Ve),it=Se/(Pe.depth||1);xe.eachBefore(function(tt){tt.x=(tt.x+Ve)*Ze,tt.y=tt.depth*it})}return xe}function Ee(xe){var we=xe.children,Oe=xe.parent.children,ze=xe.i?Oe[xe.i-1]:null;if(we){(function(Ue){for(var Ve,Ze=0,it=0,tt=Ue.children,dt=tt.length;--dt>=0;)(Ve=tt[dt]).z+=Ze,Ve.m+=Ze,Ze+=Ve.s+(it+=Ve.c)})(xe);var Pe=(we[0].z+we[we.length-1].z)/2;ze?(xe.z=ze.z+ae(xe._,ze._),xe.m=xe.z-Pe):xe.z=Pe}else ze&&(xe.z=ze.z+ae(xe._,ze._));xe.parent.A=function(Ue,Ve,Ze){if(Ve){for(var it,tt=Ue,dt=Ue,yt=Ve,vt=tt.parent.children[0],et=tt.m,Qe=dt.m,wt=yt.m,It=vt.m;yt=re(yt),tt=$(tt),yt&&tt;)vt=$(vt),(dt=re(dt)).a=Ue,(it=yt.z+wt-tt.z-et+ae(yt._,tt._))>0&&(oe(ie(yt,Ue,Ze),Ue,it),et+=it,Qe+=it),wt+=yt.m,et+=tt.m,It+=vt.m,Qe+=dt.m;yt&&!re(dt)&&(dt.t=yt,dt.m+=wt-Qe),tt&&!$(vt)&&(vt.t=tt,vt.m+=et-It,Ze=Ue)}return Ze}(xe,ze,xe.parent.A||Oe[0])}function De(xe){xe._.x=xe.z+xe.parent.m,xe.m+=xe.parent.m}function fe(xe){xe.x*=he,xe.y=xe.depth*Se}return Me.separation=function(xe){return arguments.length?(ae=xe,Me):ae},Me.size=function(xe){return arguments.length?(ke=!1,he=+xe[0],Se=+xe[1],Me):ke?null:[he,Se]},Me.nodeSize=function(xe){return arguments.length?(ke=!0,he=+xe[0],Se=+xe[1],Me):ke?[he,Se]:null},Me}function be(ae,he,Se,ke,Me){for(var Ee,De=ae.children,fe=-1,xe=De.length,we=ae.value&&(Me-Se)/ae.value;++fe<xe;)(Ee=De[fe]).x0=he,Ee.x1=ke,Ee.y0=Se,Ee.y1=Se+=Ee.value*we}ue.prototype=Object.create(n.prototype);var ge=(1+Math.sqrt(5))/2;function de(ae,he,Se,ke,Me,Ee){for(var De,fe,xe,we,Oe,ze,Pe,Ue,Ve,Ze,it,tt=[],dt=he.children,yt=0,vt=0,et=dt.length,Qe=he.value;yt<et;){xe=Me-Se,we=Ee-ke;do Oe=dt[vt++].value;while(!Oe&&vt<et);for(ze=Pe=Oe,it=Oe*Oe*(Ze=Math.max(we/xe,xe/we)/(Qe*ae)),Ve=Math.max(Pe/it,it/ze);vt<et;++vt){if(Oe+=fe=dt[vt].value,fe<ze&&(ze=fe),fe>Pe&&(Pe=fe),it=Oe*Oe*Ze,(Ue=Math.max(Pe/it,it/ze))>Ve){Oe-=fe;break}Ve=Ue}tt.push(De={value:Oe,dice:xe<we,children:dt.slice(yt,vt)}),De.dice?W(De,Se,ke,Me,Qe?ke+=we*Oe/Qe:Ee):be(De,Se,ke,Qe?Se+=xe*Oe/Qe:Me,Ee),Qe-=Oe,yt=vt}return tt}var ve=function ae(he){function Se(ke,Me,Ee,De,fe){de(he,ke,Me,Ee,De,fe)}return Se.ratio=function(ke){return ae((ke=+ke)>1?ke:1)},Se}(ge);function pe(){var ae=ve,he=!1,Se=1,ke=1,Me=[0],Ee=E,De=E,fe=E,xe=E,we=E;function Oe(Pe){return Pe.x0=Pe.y0=0,Pe.x1=Se,Pe.y1=ke,Pe.eachBefore(ze),Me=[0],he&&Pe.eachBefore(N),Pe}function ze(Pe){var Ue=Me[Pe.depth],Ve=Pe.x0+Ue,Ze=Pe.y0+Ue,it=Pe.x1-Ue,tt=Pe.y1-Ue;it<Ve&&(Ve=it=(Ve+it)/2),tt<Ze&&(Ze=tt=(Ze+tt)/2),Pe.x0=Ve,Pe.y0=Ze,Pe.x1=it,Pe.y1=tt,Pe.children&&(Ue=Me[Pe.depth+1]=Ee(Pe)/2,Ve+=we(Pe)-Ue,Ze+=De(Pe)-Ue,(it-=fe(Pe)-Ue)<Ve&&(Ve=it=(Ve+it)/2),(tt-=xe(Pe)-Ue)<Ze&&(Ze=tt=(Ze+tt)/2),ae(Pe,Ve,Ze,it,tt))}return Oe.round=function(Pe){return arguments.length?(he=!!Pe,Oe):he},Oe.size=function(Pe){return arguments.length?(Se=+Pe[0],ke=+Pe[1],Oe):[Se,ke]},Oe.tile=function(Pe){return arguments.length?(ae=w(Pe),Oe):ae},Oe.padding=function(Pe){return arguments.length?Oe.paddingInner(Pe).paddingOuter(Pe):Oe.paddingInner()},Oe.paddingInner=function(Pe){return arguments.length?(Ee=typeof Pe=="function"?Pe:P(+Pe),Oe):Ee},Oe.paddingOuter=function(Pe){return arguments.length?Oe.paddingTop(Pe).paddingRight(Pe).paddingBottom(Pe).paddingLeft(Pe):Oe.paddingTop()},Oe.paddingTop=function(Pe){return arguments.length?(De=typeof Pe=="function"?Pe:P(+Pe),Oe):De},Oe.paddingRight=function(Pe){return arguments.length?(fe=typeof Pe=="function"?Pe:P(+Pe),Oe):fe},Oe.paddingBottom=function(Pe){return arguments.length?(xe=typeof Pe=="function"?Pe:P(+Pe),Oe):xe},Oe.paddingLeft=function(Pe){return arguments.length?(we=typeof Pe=="function"?Pe:P(+Pe),Oe):we},Oe}function _e(ae,he,Se,ke,Me){var Ee,De,fe=ae.children,xe=fe.length,we=new Array(xe+1);for(we[0]=De=Ee=0;Ee<xe;++Ee)we[Ee+1]=De+=fe[Ee].value;(function Oe(ze,Pe,Ue,Ve,Ze,it,tt){if(ze>=Pe-1){var dt=fe[ze];return dt.x0=Ve,dt.y0=Ze,dt.x1=it,void(dt.y1=tt)}for(var yt=we[ze],vt=Ue/2+yt,et=ze+1,Qe=Pe-1;et<Qe;){var wt=et+Qe>>>1;we[wt]<vt?et=wt+1:Qe=wt}vt-we[et-1]<we[et]-vt&&ze+1<et&&--et;var It=we[et]-yt,Dt=Ue-It;if(it-Ve>tt-Ze){var Ct=(Ve*Dt+it*It)/Ue;Oe(ze,et,It,Ve,Ze,Ct,tt),Oe(et,Pe,Dt,Ct,Ze,it,tt)}else{var He=(Ze*Dt+tt*It)/Ue;Oe(ze,et,It,Ve,Ze,it,He),Oe(et,Pe,Dt,Ve,He,it,tt)}})(0,xe,ae.value,he,Se,ke,Me)}function Te(ae,he,Se,ke,Me){(1&ae.depth?be:W)(ae,he,Se,ke,Me)}var le=function ae(he){function Se(ke,Me,Ee,De,fe){if((xe=ke._squarify)&&xe.ratio===he)for(var xe,we,Oe,ze,Pe,Ue=-1,Ve=xe.length,Ze=ke.value;++Ue<Ve;){for(Oe=(we=xe[Ue]).children,ze=we.value=0,Pe=Oe.length;ze<Pe;++ze)we.value+=Oe[ze].value;we.dice?W(we,Me,Ee,De,Ee+=(fe-Ee)*we.value/Ze):be(we,Me,Ee,Me+=(De-Me)*we.value/Ze,fe),Ze-=we.value}else ke._squarify=xe=de(he,ke,Me,Ee,De,fe),xe.ratio=he}return Se.ratio=function(ke){return ae((ke=+ke)>1?ke:1)},Se}(ge)},10132:function(ee,z,e){"use strict";e.d(z,{ak:function(){return d}});var M=Math.PI,k=2*M,o=1e-6,T=k-o;function b(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function h(){return new b}b.prototype=h.prototype={constructor:b,moveTo:function(c,x){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,x){this._+="L"+(this._x1=+c)+","+(this._y1=+x)},quadraticCurveTo:function(c,x,g,p){this._+="Q"+ +c+","+ +x+","+(this._x1=+g)+","+(this._y1=+p)},bezierCurveTo:function(c,x,g,p,v,m){this._+="C"+ +c+","+ +x+","+ +g+","+ +p+","+(this._x1=+v)+","+(this._y1=+m)},arcTo:function(c,x,g,p,v){c=+c,x=+x,g=+g,p=+p,v=+v;var m=this._x1,y=this._y1,_=g-c,f=p-x,S=m-c,w=y-x,E=S*S+w*w;if(v<0)throw new Error("negative radius: "+v);if(this._x1===null)this._+="M"+(this._x1=c)+","+(this._y1=x);else if(E>o)if(Math.abs(w*_-f*S)>o&&v){var P=g-m,C=p-y,O=_*_+f*f,R=P*P+C*C,j=Math.sqrt(O),D=Math.sqrt(E),N=v*Math.tan((M-Math.acos((O+E-R)/(2*j*D)))/2),W=N/D,F=N/j;Math.abs(W-1)>o&&(this._+="L"+(c+W*S)+","+(x+W*w)),this._+="A"+v+","+v+",0,0,"+ +(w*P>S*C)+","+(this._x1=c+F*_)+","+(this._y1=x+F*f)}else this._+="L"+(this._x1=c)+","+(this._y1=x)},arc:function(c,x,g,p,v,m){c=+c,x=+x,m=!!m;var y=(g=+g)*Math.cos(p),_=g*Math.sin(p),f=c+y,S=x+_,w=1^m,E=m?p-v:v-p;if(g<0)throw new Error("negative radius: "+g);this._x1===null?this._+="M"+f+","+S:(Math.abs(this._x1-f)>o||Math.abs(this._y1-S)>o)&&(this._+="L"+f+","+S),g&&(E<0&&(E=E%k+k),E>T?this._+="A"+g+","+g+",0,1,"+w+","+(c-y)+","+(x-_)+"A"+g+","+g+",0,1,"+w+","+(this._x1=f)+","+(this._y1=S):E>o&&(this._+="A"+g+","+g+",0,"+ +(E>=M)+","+w+","+(this._x1=c+g*Math.cos(v))+","+(this._y1=x+g*Math.sin(v))))},rect:function(c,x,g,p){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)+"h"+ +g+"v"+ +p+"h"+-g+"Z"},toString:function(){return this._}};var s=h,t=Array.prototype.slice;function i(c){return function(){return c}}function n(c){return c[0]}function r(c){return c[1]}function a(c){return c.source}function l(c){return c.target}function u(c,x,g,p,v){c.moveTo(x,g),c.bezierCurveTo(x=(x+p)/2,g,x,v,p,v)}function d(){return function(c){var x=a,g=l,p=n,v=r,m=null;function y(){var _,f=t.call(arguments),S=x.apply(this,f),w=g.apply(this,f);if(m||(m=_=s()),c(m,+p.apply(this,(f[0]=S,f)),+v.apply(this,f),+p.apply(this,(f[0]=w,f)),+v.apply(this,f)),_)return m=null,_+""||null}return y.source=function(_){return arguments.length?(x=_,y):x},y.target=function(_){return arguments.length?(g=_,y):g},y.x=function(_){return arguments.length?(p=typeof _=="function"?_:i(+_),y):p},y.y=function(_){return arguments.length?(v=typeof _=="function"?_:i(+_),y):v},y.context=function(_){return arguments.length?(m=_==null?null:_,y):m},y}(u)}},94336:function(ee,z,e){"use strict";e.d(z,{Yn:function(){return a},m_:function(){return n},E9:function(){return l}});var M=e(8208),k=e(58931),o=e(46192),T=e(68936),b=e(32171),h=e(53528);function s(et){if(0<=et.y&&et.y<100){var Qe=new Date(-1,et.m,et.d,et.H,et.M,et.S,et.L);return Qe.setFullYear(et.y),Qe}return new Date(et.y,et.m,et.d,et.H,et.M,et.S,et.L)}function t(et){if(0<=et.y&&et.y<100){var Qe=new Date(Date.UTC(-1,et.m,et.d,et.H,et.M,et.S,et.L));return Qe.setUTCFullYear(et.y),Qe}return new Date(Date.UTC(et.y,et.m,et.d,et.H,et.M,et.S,et.L))}function i(et,Qe,wt){return{y:et,m:Qe,d:wt,H:0,M:0,S:0,L:0}}function n(et){var Qe=et.dateTime,wt=et.date,It=et.time,Dt=et.periods,Ct=et.days,He=et.shortDays,We=et.months,Be=et.shortMonths,Ge=v(Dt),at=m(Dt),nt=v(Ct),Re=m(Ct),Fe=v(He),rt=m(He),Ye=v(We),ct=m(We),pt=v(Be),gt=m(Be),ut={a:function(zt){return He[zt.getDay()]},A:function(zt){return Ct[zt.getDay()]},b:function(zt){return Be[zt.getMonth()]},B:function(zt){return We[zt.getMonth()]},c:null,d:X,e:X,f:ie,H:Z,I:$,j:re,L:oe,m:ue,M:me,p:function(zt){return Dt[+(zt.getHours()>=12)]},q:function(zt){return 1+~~(zt.getMonth()/3)},Q:yt,s:vt,S:be,u:ge,U:de,V:ve,w:pe,W:_e,x:null,X:null,y:Te,Y:le,Z:ae,"%":dt},Mt={a:function(zt){return He[zt.getUTCDay()]},A:function(zt){return Ct[zt.getUTCDay()]},b:function(zt){return Be[zt.getUTCMonth()]},B:function(zt){return We[zt.getUTCMonth()]},c:null,d:he,e:he,f:De,H:Se,I:ke,j:Me,L:Ee,m:fe,M:xe,p:function(zt){return Dt[+(zt.getUTCHours()>=12)]},q:function(zt){return 1+~~(zt.getUTCMonth()/3)},Q:yt,s:vt,S:we,u:Oe,U:ze,V:Pe,w:Ue,W:Ve,x:null,X:null,y:Ze,Y:it,Z:tt,"%":dt},xt={a:function(zt,Wt,rn){var Ut=Fe.exec(Wt.slice(rn));return Ut?(zt.w=rt[Ut[0].toLowerCase()],rn+Ut[0].length):-1},A:function(zt,Wt,rn){var Ut=nt.exec(Wt.slice(rn));return Ut?(zt.w=Re[Ut[0].toLowerCase()],rn+Ut[0].length):-1},b:function(zt,Wt,rn){var Ut=pt.exec(Wt.slice(rn));return Ut?(zt.m=gt[Ut[0].toLowerCase()],rn+Ut[0].length):-1},B:function(zt,Wt,rn){var Ut=Ye.exec(Wt.slice(rn));return Ut?(zt.m=ct[Ut[0].toLowerCase()],rn+Ut[0].length):-1},c:function(zt,Wt,rn){return Lt(zt,Qe,Wt,rn)},d:j,e:j,f:V,H:N,I:N,j:D,L:U,m:R,M:W,p:function(zt,Wt,rn){var Ut=Ge.exec(Wt.slice(rn));return Ut?(zt.p=at[Ut[0].toLowerCase()],rn+Ut[0].length):-1},q:O,Q:J,s:K,S:F,u:_,U:f,V:S,w:y,W:w,x:function(zt,Wt,rn){return Lt(zt,wt,Wt,rn)},X:function(zt,Wt,rn){return Lt(zt,It,Wt,rn)},y:P,Y:E,Z:C,"%":te};function mt(zt,Wt){return function(rn){var Ut,Vt,en,Ln=[],An=-1,hn=0,Xt=zt.length;for(rn instanceof Date||(rn=new Date(+rn));++An<Xt;)zt.charCodeAt(An)===37&&(Ln.push(zt.slice(hn,An)),(Vt=u[Ut=zt.charAt(++An)])!=null?Ut=zt.charAt(++An):Vt=Ut==="e"?" ":"0",(en=Wt[Ut])&&(Ut=en(rn,Vt)),Ln.push(Ut),hn=An+1);return Ln.push(zt.slice(hn,An)),Ln.join("")}}function Et(zt,Wt){return function(rn){var Ut,Vt,en=i(1900,void 0,1);if(Lt(en,zt,rn+="",0)!=rn.length)return null;if("Q"in en)return new Date(en.Q);if("s"in en)return new Date(1e3*en.s+("L"in en?en.L:0));if(Wt&&!("Z"in en)&&(en.Z=0),"p"in en&&(en.H=en.H%12+12*en.p),en.m===void 0&&(en.m="q"in en?en.q:0),"V"in en){if(en.V<1||en.V>53)return null;"w"in en||(en.w=1),"Z"in en?(Vt=(Ut=t(i(en.y,0,1))).getUTCDay(),Ut=Vt>4||Vt===0?M.ot.ceil(Ut):(0,M.ot)(Ut),Ut=k.c.offset(Ut,7*(en.V-1)),en.y=Ut.getUTCFullYear(),en.m=Ut.getUTCMonth(),en.d=Ut.getUTCDate()+(en.w+6)%7):(Vt=(Ut=s(i(en.y,0,1))).getDay(),Ut=Vt>4||Vt===0?o.qT.ceil(Ut):(0,o.qT)(Ut),Ut=T.c.offset(Ut,7*(en.V-1)),en.y=Ut.getFullYear(),en.m=Ut.getMonth(),en.d=Ut.getDate()+(en.w+6)%7)}else("W"in en||"U"in en)&&("w"in en||(en.w="u"in en?en.u%7:"W"in en?1:0),Vt="Z"in en?t(i(en.y,0,1)).getUTCDay():s(i(en.y,0,1)).getDay(),en.m=0,en.d="W"in en?(en.w+6)%7+7*en.W-(Vt+5)%7:en.w+7*en.U-(Vt+6)%7);return"Z"in en?(en.H+=en.Z/100|0,en.M+=en.Z%100,t(en)):s(en)}}function Lt(zt,Wt,rn,Ut){for(var Vt,en,Ln=0,An=Wt.length,hn=rn.length;Ln<An;){if(Ut>=hn)return-1;if((Vt=Wt.charCodeAt(Ln++))===37){if(Vt=Wt.charAt(Ln++),!(en=xt[Vt in u?Wt.charAt(Ln++):Vt])||(Ut=en(zt,rn,Ut))<0)return-1}else if(Vt!=rn.charCodeAt(Ut++))return-1}return Ut}return ut.x=mt(wt,ut),ut.X=mt(It,ut),ut.c=mt(Qe,ut),Mt.x=mt(wt,Mt),Mt.X=mt(It,Mt),Mt.c=mt(Qe,Mt),{format:function(zt){var Wt=mt(zt+="",ut);return Wt.toString=function(){return zt},Wt},parse:function(zt){var Wt=Et(zt+="",!1);return Wt.toString=function(){return zt},Wt},utcFormat:function(zt){var Wt=mt(zt+="",Mt);return Wt.toString=function(){return zt},Wt},utcParse:function(zt){var Wt=Et(zt+="",!0);return Wt.toString=function(){return zt},Wt}}}var r,a,l,u={"-":"",_:" ",0:"0"},d=/^\s*\d+/,c=/^%/,x=/[\\^$*+?|[\]().{}]/g;function g(et,Qe,wt){var It=et<0?"-":"",Dt=(It?-et:et)+"",Ct=Dt.length;return It+(Ct<wt?new Array(wt-Ct+1).join(Qe)+Dt:Dt)}function p(et){return et.replace(x,"\\$&")}function v(et){return new RegExp("^(?:"+et.map(p).join("|")+")","i")}function m(et){for(var Qe={},wt=-1,It=et.length;++wt<It;)Qe[et[wt].toLowerCase()]=wt;return Qe}function y(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+1));return It?(et.w=+It[0],wt+It[0].length):-1}function _(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+1));return It?(et.u=+It[0],wt+It[0].length):-1}function f(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+2));return It?(et.U=+It[0],wt+It[0].length):-1}function S(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+2));return It?(et.V=+It[0],wt+It[0].length):-1}function w(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+2));return It?(et.W=+It[0],wt+It[0].length):-1}function E(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+4));return It?(et.y=+It[0],wt+It[0].length):-1}function P(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+2));return It?(et.y=+It[0]+(+It[0]>68?1900:2e3),wt+It[0].length):-1}function C(et,Qe,wt){var It=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Qe.slice(wt,wt+6));return It?(et.Z=It[1]?0:-(It[2]+(It[3]||"00")),wt+It[0].length):-1}function O(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+1));return It?(et.q=3*It[0]-3,wt+It[0].length):-1}function R(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+2));return It?(et.m=It[0]-1,wt+It[0].length):-1}function j(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+2));return It?(et.d=+It[0],wt+It[0].length):-1}function D(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+3));return It?(et.m=0,et.d=+It[0],wt+It[0].length):-1}function N(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+2));return It?(et.H=+It[0],wt+It[0].length):-1}function W(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+2));return It?(et.M=+It[0],wt+It[0].length):-1}function F(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+2));return It?(et.S=+It[0],wt+It[0].length):-1}function U(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+3));return It?(et.L=+It[0],wt+It[0].length):-1}function V(et,Qe,wt){var It=d.exec(Qe.slice(wt,wt+6));return It?(et.L=Math.floor(It[0]/1e3),wt+It[0].length):-1}function te(et,Qe,wt){var It=c.exec(Qe.slice(wt,wt+1));return It?wt+It[0].length:-1}function J(et,Qe,wt){var It=d.exec(Qe.slice(wt));return It?(et.Q=+It[0],wt+It[0].length):-1}function K(et,Qe,wt){var It=d.exec(Qe.slice(wt));return It?(et.s=+It[0],wt+It[0].length):-1}function X(et,Qe){return g(et.getDate(),Qe,2)}function Z(et,Qe){return g(et.getHours(),Qe,2)}function $(et,Qe){return g(et.getHours()%12||12,Qe,2)}function re(et,Qe){return g(1+T.c.count((0,b.c)(et),et),Qe,3)}function oe(et,Qe){return g(et.getMilliseconds(),Qe,3)}function ie(et,Qe){return oe(et,Qe)+"000"}function ue(et,Qe){return g(et.getMonth()+1,Qe,2)}function me(et,Qe){return g(et.getMinutes(),Qe,2)}function be(et,Qe){return g(et.getSeconds(),Qe,2)}function ge(et){var Qe=et.getDay();return Qe===0?7:Qe}function de(et,Qe){return g(o.uU.count((0,b.c)(et)-1,et),Qe,2)}function ve(et,Qe){var wt=et.getDay();return et=wt>=4||wt===0?(0,o.kD)(et):o.kD.ceil(et),g(o.kD.count((0,b.c)(et),et)+((0,b.c)(et).getDay()===4),Qe,2)}function pe(et){return et.getDay()}function _e(et,Qe){return g(o.qT.count((0,b.c)(et)-1,et),Qe,2)}function Te(et,Qe){return g(et.getFullYear()%100,Qe,2)}function le(et,Qe){return g(et.getFullYear()%1e4,Qe,4)}function ae(et){var Qe=et.getTimezoneOffset();return(Qe>0?"-":(Qe*=-1,"+"))+g(Qe/60|0,"0",2)+g(Qe%60,"0",2)}function he(et,Qe){return g(et.getUTCDate(),Qe,2)}function Se(et,Qe){return g(et.getUTCHours(),Qe,2)}function ke(et,Qe){return g(et.getUTCHours()%12||12,Qe,2)}function Me(et,Qe){return g(1+k.c.count((0,h.c)(et),et),Qe,3)}function Ee(et,Qe){return g(et.getUTCMilliseconds(),Qe,3)}function De(et,Qe){return Ee(et,Qe)+"000"}function fe(et,Qe){return g(et.getUTCMonth()+1,Qe,2)}function xe(et,Qe){return g(et.getUTCMinutes(),Qe,2)}function we(et,Qe){return g(et.getUTCSeconds(),Qe,2)}function Oe(et){var Qe=et.getUTCDay();return Qe===0?7:Qe}function ze(et,Qe){return g(M.EV.count((0,h.c)(et)-1,et),Qe,2)}function Pe(et,Qe){var wt=et.getUTCDay();return et=wt>=4||wt===0?(0,M.yA)(et):M.yA.ceil(et),g(M.yA.count((0,h.c)(et),et)+((0,h.c)(et).getUTCDay()===4),Qe,2)}function Ue(et){return et.getUTCDay()}function Ve(et,Qe){return g(M.ot.count((0,h.c)(et)-1,et),Qe,2)}function Ze(et,Qe){return g(et.getUTCFullYear()%100,Qe,2)}function it(et,Qe){return g(et.getUTCFullYear()%1e4,Qe,4)}function tt(){return"+0000"}function dt(){return"%"}function yt(et){return+et}function vt(et){return Math.floor(+et/1e3)}r=n({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),a=r.format,r.parse,l=r.utcFormat,r.utcParse},68936:function(ee,z,e){"use strict";e.d(z,{m:function(){return T}});var M=e(81628),k=e(69792),o=(0,M.c)(function(b){b.setHours(0,0,0,0)},function(b,h){b.setDate(b.getDate()+h)},function(b,h){return(h-b-(h.getTimezoneOffset()-b.getTimezoneOffset())*k.iy)/k.SK},function(b){return b.getDate()-1});z.c=o;var T=o.range},69792:function(ee,z,e){"use strict";e.d(z,{KK:function(){return b},SK:function(){return T},cg:function(){return o},iy:function(){return k},yc:function(){return M}});var M=1e3,k=6e4,o=36e5,T=864e5,b=6048e5},73220:function(ee,z,e){"use strict";e.r(z),e.d(z,{timeDay:function(){return d.c},timeDays:function(){return d.m},timeFriday:function(){return c.iB},timeFridays:function(){return c.sJ},timeHour:function(){return l},timeHours:function(){return u},timeInterval:function(){return M.c},timeMillisecond:function(){return o},timeMilliseconds:function(){return T},timeMinute:function(){return n},timeMinutes:function(){return r},timeMonday:function(){return c.qT},timeMondays:function(){return c.QP},timeMonth:function(){return g},timeMonths:function(){return p},timeSaturday:function(){return c.Wc},timeSaturdays:function(){return c.aI},timeSecond:function(){return s},timeSeconds:function(){return t},timeSunday:function(){return c.uU},timeSundays:function(){return c.Ab},timeThursday:function(){return c.kD},timeThursdays:function(){return c.eC},timeTuesday:function(){return c.Mf},timeTuesdays:function(){return c.Oc},timeWednesday:function(){return c.eg},timeWednesdays:function(){return c.sn},timeWeek:function(){return c.uU},timeWeeks:function(){return c.Ab},timeYear:function(){return v.c},timeYears:function(){return v.Q},utcDay:function(){return E.c},utcDays:function(){return E.o},utcFriday:function(){return P.od},utcFridays:function(){return P.iG},utcHour:function(){return S},utcHours:function(){return w},utcMillisecond:function(){return o},utcMilliseconds:function(){return T},utcMinute:function(){return y},utcMinutes:function(){return _},utcMonday:function(){return P.ot},utcMondays:function(){return P.iO},utcMonth:function(){return O},utcMonths:function(){return R},utcSaturday:function(){return P.Ad},utcSaturdays:function(){return P.K8},utcSecond:function(){return s},utcSeconds:function(){return t},utcSunday:function(){return P.EV},utcSundays:function(){return P.Wq},utcThursday:function(){return P.yA},utcThursdays:function(){return P.ob},utcTuesday:function(){return P.sG},utcTuesdays:function(){return P.kl},utcWednesday:function(){return P._6},utcWednesdays:function(){return P.W_},utcWeek:function(){return P.EV},utcWeeks:function(){return P.Wq},utcYear:function(){return j.c},utcYears:function(){return j.i}});var M=e(81628),k=(0,M.c)(function(){},function(D,N){D.setTime(+D+N)},function(D,N){return N-D});k.every=function(D){return D=Math.floor(D),isFinite(D)&&D>0?D>1?(0,M.c)(function(N){N.setTime(Math.floor(N/D)*D)},function(N,W){N.setTime(+N+W*D)},function(N,W){return(W-N)/D}):k:null};var o=k,T=k.range,b=e(69792),h=(0,M.c)(function(D){D.setTime(D-D.getMilliseconds())},function(D,N){D.setTime(+D+N*b.yc)},function(D,N){return(N-D)/b.yc},function(D){return D.getUTCSeconds()}),s=h,t=h.range,i=(0,M.c)(function(D){D.setTime(D-D.getMilliseconds()-D.getSeconds()*b.yc)},function(D,N){D.setTime(+D+N*b.iy)},function(D,N){return(N-D)/b.iy},function(D){return D.getMinutes()}),n=i,r=i.range,a=(0,M.c)(function(D){D.setTime(D-D.getMilliseconds()-D.getSeconds()*b.yc-D.getMinutes()*b.iy)},function(D,N){D.setTime(+D+N*b.cg)},function(D,N){return(N-D)/b.cg},function(D){return D.getHours()}),l=a,u=a.range,d=e(68936),c=e(46192),x=(0,M.c)(function(D){D.setDate(1),D.setHours(0,0,0,0)},function(D,N){D.setMonth(D.getMonth()+N)},function(D,N){return N.getMonth()-D.getMonth()+12*(N.getFullYear()-D.getFullYear())},function(D){return D.getMonth()}),g=x,p=x.range,v=e(32171),m=(0,M.c)(function(D){D.setUTCSeconds(0,0)},function(D,N){D.setTime(+D+N*b.iy)},function(D,N){return(N-D)/b.iy},function(D){return D.getUTCMinutes()}),y=m,_=m.range,f=(0,M.c)(function(D){D.setUTCMinutes(0,0,0)},function(D,N){D.setTime(+D+N*b.cg)},function(D,N){return(N-D)/b.cg},function(D){return D.getUTCHours()}),S=f,w=f.range,E=e(58931),P=e(8208),C=(0,M.c)(function(D){D.setUTCDate(1),D.setUTCHours(0,0,0,0)},function(D,N){D.setUTCMonth(D.getUTCMonth()+N)},function(D,N){return N.getUTCMonth()-D.getUTCMonth()+12*(N.getUTCFullYear()-D.getUTCFullYear())},function(D){return D.getUTCMonth()}),O=C,R=C.range,j=e(53528)},81628:function(ee,z,e){"use strict";e.d(z,{c:function(){return o}});var M=new Date,k=new Date;function o(T,b,h,s){function t(i){return T(i=arguments.length===0?new Date:new Date(+i)),i}return t.floor=function(i){return T(i=new Date(+i)),i},t.ceil=function(i){return T(i=new Date(i-1)),b(i,1),T(i),i},t.round=function(i){var n=t(i),r=t.ceil(i);return i-n<r-i?n:r},t.offset=function(i,n){return b(i=new Date(+i),n==null?1:Math.floor(n)),i},t.range=function(i,n,r){var a,l=[];if(i=t.ceil(i),r=r==null?1:Math.floor(r),!(i<n&&r>0))return l;do l.push(a=new Date(+i)),b(i,r),T(i);while(a<i&&i<n);return l},t.filter=function(i){return o(function(n){if(n>=n)for(;T(n),!i(n);)n.setTime(n-1)},function(n,r){if(n>=n)if(r<0)for(;++r<=0;)for(;b(n,-1),!i(n););else for(;--r>=0;)for(;b(n,1),!i(n););})},h&&(t.count=function(i,n){return M.setTime(+i),k.setTime(+n),T(M),T(k),Math.floor(h(M,k))},t.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?t.filter(s?function(n){return s(n)%i==0}:function(n){return t.count(0,n)%i==0}):t:null}),t}},58931:function(ee,z,e){"use strict";e.d(z,{o:function(){return T}});var M=e(81628),k=e(69792),o=(0,M.c)(function(b){b.setUTCHours(0,0,0,0)},function(b,h){b.setUTCDate(b.getUTCDate()+h)},function(b,h){return(h-b)/k.SK},function(b){return b.getUTCDate()-1});z.c=o;var T=o.range},8208:function(ee,z,e){"use strict";e.d(z,{Ad:function(){return n},EV:function(){return T},K8:function(){return x},W_:function(){return u},Wq:function(){return r},_6:function(){return s},iG:function(){return c},iO:function(){return a},kl:function(){return l},ob:function(){return d},od:function(){return i},ot:function(){return b},sG:function(){return h},yA:function(){return t}});var M=e(81628),k=e(69792);function o(g){return(0,M.c)(function(p){p.setUTCDate(p.getUTCDate()-(p.getUTCDay()+7-g)%7),p.setUTCHours(0,0,0,0)},function(p,v){p.setUTCDate(p.getUTCDate()+7*v)},function(p,v){return(v-p)/k.KK})}var T=o(0),b=o(1),h=o(2),s=o(3),t=o(4),i=o(5),n=o(6),r=T.range,a=b.range,l=h.range,u=s.range,d=t.range,c=i.range,x=n.range},53528:function(ee,z,e){"use strict";e.d(z,{i:function(){return o}});var M=e(81628),k=(0,M.c)(function(T){T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,b){T.setUTCFullYear(T.getUTCFullYear()+b)},function(T,b){return b.getUTCFullYear()-T.getUTCFullYear()},function(T){return T.getUTCFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.c)(function(b){b.setUTCFullYear(Math.floor(b.getUTCFullYear()/T)*T),b.setUTCMonth(0,1),b.setUTCHours(0,0,0,0)},function(b,h){b.setUTCFullYear(b.getUTCFullYear()+h*T)}):null},z.c=k;var o=k.range},46192:function(ee,z,e){"use strict";e.d(z,{Ab:function(){return r},Mf:function(){return h},Oc:function(){return l},QP:function(){return a},Wc:function(){return n},aI:function(){return x},eC:function(){return d},eg:function(){return s},iB:function(){return i},kD:function(){return t},qT:function(){return b},sJ:function(){return c},sn:function(){return u},uU:function(){return T}});var M=e(81628),k=e(69792);function o(g){return(0,M.c)(function(p){p.setDate(p.getDate()-(p.getDay()+7-g)%7),p.setHours(0,0,0,0)},function(p,v){p.setDate(p.getDate()+7*v)},function(p,v){return(v-p-(v.getTimezoneOffset()-p.getTimezoneOffset())*k.iy)/k.KK})}var T=o(0),b=o(1),h=o(2),s=o(3),t=o(4),i=o(5),n=o(6),r=T.range,a=b.range,l=h.range,u=s.range,d=t.range,c=i.range,x=n.range},32171:function(ee,z,e){"use strict";e.d(z,{Q:function(){return o}});var M=e(81628),k=(0,M.c)(function(T){T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,b){T.setFullYear(T.getFullYear()+b)},function(T,b){return b.getFullYear()-T.getFullYear()},function(T){return T.getFullYear()});k.every=function(T){return isFinite(T=Math.floor(T))&&T>0?(0,M.c)(function(b){b.setFullYear(Math.floor(b.getFullYear()/T)*T),b.setMonth(0,1),b.setHours(0,0,0,0)},function(b,h){b.setFullYear(b.getFullYear()+h*T)}):null},z.c=k;var o=k.range},64348:function(ee,z,e){"use strict";var M=e(39640)(),k=e(53664),o=M&&k("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch(s){o=!1}var T=k("%SyntaxError%"),b=k("%TypeError%"),h=e(2304);ee.exports=function(s,t,i){if(!s||typeof s!="object"&&typeof s!="function")throw new b("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new b("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new b("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new b("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new b("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new b("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,r=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],u=!!h&&h(s,t);if(o)o(s,t,{configurable:a===null&&u?u.configurable:!a,enumerable:n===null&&u?u.enumerable:!n,value:i,writable:r===null&&u?u.writable:!r});else{if(!l&&(n||r||a))throw new T("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");s[t]=i}}},81288:function(ee,z,e){"use strict";var M=e(41820),k=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",o=Object.prototype.toString,T=Array.prototype.concat,b=Object.defineProperty,h=e(39640)(),s=b&&h,t=function(n,r,a,l){if(r in n){if(l===!0){if(n[r]===a)return}else if(typeof(u=l)!="function"||o.call(u)!=="[object Function]"||!l())return}var u;s?b(n,r,{configurable:!0,enumerable:!1,value:a,writable:!0}):n[r]=a},i=function(n,r){var a=arguments.length>2?arguments[2]:{},l=M(r);k&&(l=T.call(l,Object.getOwnPropertySymbols(r)));for(var u=0;u<l.length;u+=1)t(n,l[u],r[l[u]],a[l[u]])};i.supportsDescriptors=!!s,ee.exports=i},31264:function(ee){ee.exports=function(){for(var z=0;z<arguments.length;z++)if(arguments[z]!==void 0)return arguments[z]}},63768:function(ee){"use strict";ee.exports=M;var z=(M.canvas=document.createElement("canvas")).getContext("2d"),e=k([32,126]);function M(o,T){Array.isArray(o)&&(o=o.join(", "));var b,h={},s=16,t=.05;T&&(T.length===2&&typeof T[0]=="number"?b=k(T):Array.isArray(T)?b=T:(T.o?b=k(T.o):T.pairs&&(b=T.pairs),T.fontSize&&(s=T.fontSize),T.threshold!=null&&(t=T.threshold))),b||(b=e),z.font=s+"px "+o;for(var i=0;i<b.length;i++){var n=b[i],r=z.measureText(n[0]).width+z.measureText(n[1]).width,a=z.measureText(n).width;if(Math.abs(r-a)>s*t){var l=(a-r)/s;h[n]=1e3*l}}return h}function k(o){for(var T=[],b=o[0];b<=o[1];b++)for(var h=String.fromCharCode(b),s=o[0];s<o[1];s++){var t=h+String.fromCharCode(s);T.push(t)}return T}M.createPairs=k,M.ascii=e},22235:function(ee,z,e){var M=e(49972),k=e(48816),o={M:"moveTo",C:"bezierCurveTo"};ee.exports=function(T,b){T.beginPath(),k(M(b)).forEach(function(h){var s=h[0],t=h.slice(1);T[o[s]].apply(T,t)}),T.closePath()}},72512:function(ee){ee.exports=function(z){switch(z){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(ee){"use strict";function z(e,M,k){var o=0|e[k];if(o<=0)return[];var T,b=new Array(o);if(k===e.length-1)for(T=0;T<o;++T)b[T]=M;else for(T=0;T<o;++T)b[T]=z(e,M,k+1);return b}ee.exports=function(e,M){switch(M===void 0&&(M=0),typeof e){case"number":if(e>0)return function(k,o){var T,b;for(T=new Array(k),b=0;b<k;++b)T[b]=o;return T}(0|e,M);break;case"object":if(typeof e.length=="number")return z(e,M,0)}return[]}},28912:function(ee){"use strict";function z(S,w,E){E=E||2;var P,C,O,R,j,D,N,W=w&&w.length,F=W?w[0]*E:S.length,U=e(S,0,F,E,!0),V=[];if(!U||U.next===U.prev)return V;if(W&&(U=function(J,K,X,Z){var $,re,oe,ie=[];for($=0,re=K.length;$<re;$++)(oe=e(J,K[$]*Z,$<re-1?K[$+1]*Z:J.length,Z,!1))===oe.next&&(oe.steiner=!0),ie.push(r(oe));for(ie.sort(s),$=0;$<ie.length;$++)t(ie[$],X),X=M(X,X.next);return X}(S,w,U,E)),S.length>80*E){P=O=S[0],C=R=S[1];for(var te=E;te<F;te+=E)(j=S[te])<P&&(P=j),(D=S[te+1])<C&&(C=D),j>O&&(O=j),D>R&&(R=D);N=(N=Math.max(O-P,R-C))!==0?1/N:0}return k(U,V,E,P,C,N),V}function e(S,w,E,P,C){var O,R;if(C===f(S,w,E,P)>0)for(O=w;O<E;O+=P)R=m(O,S[O],S[O+1],R);else for(O=E-P;O>=w;O-=P)R=m(O,S[O],S[O+1],R);return R&&d(R,R.next)&&(y(R),R=R.next),R}function M(S,w){if(!S)return S;w||(w=S);var E,P=S;do if(E=!1,P.steiner||!d(P,P.next)&&u(P.prev,P,P.next)!==0)P=P.next;else{if(y(P),(P=w=P.prev)===P.next)break;E=!0}while(E||P!==w);return w}function k(S,w,E,P,C,O,R){if(S){!R&&O&&function(W,F,U,V){var te=W;do te.z===null&&(te.z=n(te.x,te.y,F,U,V)),te.prevZ=te.prev,te.nextZ=te.next,te=te.next;while(te!==W);te.prevZ.nextZ=null,te.prevZ=null,function(J){var K,X,Z,$,re,oe,ie,ue,me=1;do{for(X=J,J=null,re=null,oe=0;X;){for(oe++,Z=X,ie=0,K=0;K<me&&(ie++,Z=Z.nextZ);K++);for(ue=me;ie>0||ue>0&&Z;)ie!==0&&(ue===0||!Z||X.z<=Z.z)?($=X,X=X.nextZ,ie--):($=Z,Z=Z.nextZ,ue--),re?re.nextZ=$:J=$,$.prevZ=re,re=$;X=Z}re.nextZ=null,me*=2}while(oe>1)}(te)}(S,P,C,O);for(var j,D,N=S;S.prev!==S.next;)if(j=S.prev,D=S.next,O?T(S,P,C,O):o(S))w.push(j.i/E),w.push(S.i/E),w.push(D.i/E),y(S),S=D.next,N=D.next;else if((S=D)===N){R?R===1?k(S=b(M(S),w,E),w,E,P,C,O,2):R===2&&h(S,w,E,P,C,O):k(M(S),w,E,P,C,O,1);break}}}function o(S){var w=S.prev,E=S,P=S.next;if(u(w,E,P)>=0)return!1;for(var C=S.next.next;C!==S.prev;){if(a(w.x,w.y,E.x,E.y,P.x,P.y,C.x,C.y)&&u(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function T(S,w,E,P){var C=S.prev,O=S,R=S.next;if(u(C,O,R)>=0)return!1;for(var j=C.x<O.x?C.x<R.x?C.x:R.x:O.x<R.x?O.x:R.x,D=C.y<O.y?C.y<R.y?C.y:R.y:O.y<R.y?O.y:R.y,N=C.x>O.x?C.x>R.x?C.x:R.x:O.x>R.x?O.x:R.x,W=C.y>O.y?C.y>R.y?C.y:R.y:O.y>R.y?O.y:R.y,F=n(j,D,w,E,P),U=n(N,W,w,E,P),V=S.prevZ,te=S.nextZ;V&&V.z>=F&&te&&te.z<=U;){if(V!==S.prev&&V!==S.next&&a(C.x,C.y,O.x,O.y,R.x,R.y,V.x,V.y)&&u(V.prev,V,V.next)>=0||(V=V.prevZ,te!==S.prev&&te!==S.next&&a(C.x,C.y,O.x,O.y,R.x,R.y,te.x,te.y)&&u(te.prev,te,te.next)>=0))return!1;te=te.nextZ}for(;V&&V.z>=F;){if(V!==S.prev&&V!==S.next&&a(C.x,C.y,O.x,O.y,R.x,R.y,V.x,V.y)&&u(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;te&&te.z<=U;){if(te!==S.prev&&te!==S.next&&a(C.x,C.y,O.x,O.y,R.x,R.y,te.x,te.y)&&u(te.prev,te,te.next)>=0)return!1;te=te.nextZ}return!0}function b(S,w,E){var P=S;do{var C=P.prev,O=P.next.next;!d(C,O)&&c(C,P,P.next,O)&&p(C,O)&&p(O,C)&&(w.push(C.i/E),w.push(P.i/E),w.push(O.i/E),y(P),y(P.next),P=S=O),P=P.next}while(P!==S);return M(P)}function h(S,w,E,P,C,O){var R=S;do{for(var j=R.next.next;j!==R.prev;){if(R.i!==j.i&&l(R,j)){var D=v(R,j);return R=M(R,R.next),D=M(D,D.next),k(R,w,E,P,C,O),void k(D,w,E,P,C,O)}j=j.next}R=R.next}while(R!==S)}function s(S,w){return S.x-w.x}function t(S,w){if(w=function(P,C){var O,R=C,j=P.x,D=P.y,N=-1/0;do{if(D<=R.y&&D>=R.next.y&&R.next.y!==R.y){var W=R.x+(D-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(W<=j&&W>N){if(N=W,W===j){if(D===R.y)return R;if(D===R.next.y)return R.next}O=R.x<R.next.x?R:R.next}}R=R.next}while(R!==C);if(!O)return null;if(j===N)return O;var F,U=O,V=O.x,te=O.y,J=1/0;R=O;do j>=R.x&&R.x>=V&&j!==R.x&&a(D<te?j:N,D,V,te,D<te?N:j,D,R.x,R.y)&&(F=Math.abs(D-R.y)/(j-R.x),p(R,P)&&(F<J||F===J&&(R.x>O.x||R.x===O.x&&i(O,R)))&&(O=R,J=F)),R=R.next;while(R!==U);return O}(S,w),w){var E=v(w,S);M(w,w.next),M(E,E.next)}}function i(S,w){return u(S.prev,S,w.prev)<0&&u(w.next,S,S.next)<0}function n(S,w,E,P,C){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*C)|S<<8))|S<<4))|S<<2))|S<<1))|(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-P)*C)|w<<8))|w<<4))|w<<2))|w<<1))<<1}function r(S){var w=S,E=S;do(w.x<E.x||w.x===E.x&&w.y<E.y)&&(E=w),w=w.next;while(w!==S);return E}function a(S,w,E,P,C,O,R,j){return(C-R)*(w-j)-(S-R)*(O-j)>=0&&(S-R)*(P-j)-(E-R)*(w-j)>=0&&(E-R)*(O-j)-(C-R)*(P-j)>=0}function l(S,w){return S.next.i!==w.i&&S.prev.i!==w.i&&!function(E,P){var C=E;do{if(C.i!==E.i&&C.next.i!==E.i&&C.i!==P.i&&C.next.i!==P.i&&c(C,C.next,E,P))return!0;C=C.next}while(C!==E);return!1}(S,w)&&(p(S,w)&&p(w,S)&&function(E,P){var C=E,O=!1,R=(E.x+P.x)/2,j=(E.y+P.y)/2;do C.y>j!=C.next.y>j&&C.next.y!==C.y&&R<(C.next.x-C.x)*(j-C.y)/(C.next.y-C.y)+C.x&&(O=!O),C=C.next;while(C!==E);return O}(S,w)&&(u(S.prev,S,w.prev)||u(S,w.prev,w))||d(S,w)&&u(S.prev,S,S.next)>0&&u(w.prev,w,w.next)>0)}function u(S,w,E){return(w.y-S.y)*(E.x-w.x)-(w.x-S.x)*(E.y-w.y)}function d(S,w){return S.x===w.x&&S.y===w.y}function c(S,w,E,P){var C=g(u(S,w,E)),O=g(u(S,w,P)),R=g(u(E,P,S)),j=g(u(E,P,w));return C!==O&&R!==j||!(C!==0||!x(S,E,w))||!(O!==0||!x(S,P,w))||!(R!==0||!x(E,S,P))||!(j!==0||!x(E,w,P))}function x(S,w,E){return w.x<=Math.max(S.x,E.x)&&w.x>=Math.min(S.x,E.x)&&w.y<=Math.max(S.y,E.y)&&w.y>=Math.min(S.y,E.y)}function g(S){return S>0?1:S<0?-1:0}function p(S,w){return u(S.prev,S,S.next)<0?u(S,w,S.next)>=0&&u(S,S.prev,w)>=0:u(S,w,S.prev)<0||u(S,S.next,w)<0}function v(S,w){var E=new _(S.i,S.x,S.y),P=new _(w.i,w.x,w.y),C=S.next,O=w.prev;return S.next=w,w.prev=S,E.next=C,C.prev=E,P.next=E,E.prev=P,O.next=P,P.prev=O,P}function m(S,w,E,P){var C=new _(S,w,E);return P?(C.next=P.next,C.prev=P,P.next.prev=C,P.next=C):(C.prev=C,C.next=C),C}function y(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function _(S,w,E){this.i=S,this.x=w,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function f(S,w,E,P){for(var C=0,O=w,R=E-P;O<E;O+=P)C+=(S[R]-S[O])*(S[O+1]+S[R+1]),R=O;return C}ee.exports=z,ee.exports.default=z,z.deviation=function(S,w,E,P){var C=w&&w.length,O=C?w[0]*E:S.length,R=Math.abs(f(S,0,O,E));if(C)for(var j=0,D=w.length;j<D;j++){var N=w[j]*E,W=j<D-1?w[j+1]*E:S.length;R-=Math.abs(f(S,N,W,E))}var F=0;for(j=0;j<P.length;j+=3){var U=P[j]*E,V=P[j+1]*E,te=P[j+2]*E;F+=Math.abs((S[U]-S[te])*(S[V+1]-S[U+1])-(S[U]-S[V])*(S[te+1]-S[U+1]))}return R===0&&F===0?0:Math.abs((F-R)/R)},z.flatten=function(S){for(var w=S[0][0].length,E={vertices:[],holes:[],dimensions:w},P=0,C=0;C<S.length;C++){for(var O=0;O<S[C].length;O++)for(var R=0;R<w;R++)E.vertices.push(S[C][O][R]);C>0&&(P+=S[C-1].length,E.holes.push(P))}return E}},6688:function(ee,z,e){var M=e(78484);ee.exports=function(k,o){var T,b=[],h=[],s=[],t={},i=[];function n(p){s[p]=!1,t.hasOwnProperty(p)&&Object.keys(t[p]).forEach(function(v){delete t[p][v],s[v]&&n(v)})}function r(p){var v,m,y=!1;for(h.push(p),s[p]=!0,v=0;v<i[p].length;v++)(m=i[p][v])===T?(a(T,h),y=!0):s[m]||(y=r(m));if(y)n(p);else for(v=0;v<i[p].length;v++){m=i[p][v];var _=t[m];_||(_={},t[m]=_),_[m]=!0}return h.pop(),y}function a(p,v){var m=[].concat(v).concat(p);o?o(r):b.push(m)}function l(p){(function(E){for(var P=0;P<k.length;P++)P<E&&(k[P]=[]),k[P]=k[P].filter(function(C){return C>=E})})(p);for(var v,m=M(k).components.filter(function(E){return E.length>1}),y=1/0,_=0;_<m.length;_++)for(var f=0;f<m[_].length;f++)m[_][f]<y&&(y=m[_][f],v=_);var S=m[v];if(!S)return!1;var w=k.map(function(E,P){return S.indexOf(P)===-1?[]:E.filter(function(C){return S.indexOf(C)!==-1})});return{leastVertex:y,adjList:w}}T=0;for(var u=k.length;T<u;){var d=l(T);if(T=d.leastVertex,i=d.adjList){for(var c=0;c<i.length;c++)for(var x=0;x<i[c].length;x++){var g=i[c][x];s[+g]=!1,t[g]={}}r(T),T+=1}else T=u}return o?void 0:b}},41476:function(ee,z,e){"use strict";var M=e(9252);ee.exports=function(){return M(this).length=0,this}},74772:function(ee,z,e){"use strict";ee.exports=e(44716)()?Array.from:e(80816)},44716:function(ee){"use strict";ee.exports=function(){var z,e,M=Array.from;return typeof M=="function"&&(e=M(z=["raz","dwa"]),Boolean(e&&e!==z&&e[1]==="dwa"))}},80816:function(ee,z,e){"use strict";var M=e(92664).iterator,k=e(60948),o=e(17024),T=e(81304),b=e(34044),h=e(9252),s=e(42584),t=e(29768),i=Array.isArray,n=Function.prototype.call,r={configurable:!0,enumerable:!0,writable:!0,value:null},a=Object.defineProperty;ee.exports=function(l){var u,d,c,x,g,p,v,m,y,_,f=arguments[1],S=arguments[2];if(l=Object(h(l)),s(f)&&b(f),this&&this!==Array&&o(this))u=this;else{if(!f){if(k(l))return(g=l.length)!==1?Array.apply(null,l):((x=new Array(1))[0]=l[0],x);if(i(l)){for(x=new Array(g=l.length),d=0;d<g;++d)x[d]=l[d];return x}}x=[]}if(!i(l)){if((y=l[M])!==void 0){for(v=b(y).call(l),u&&(x=new u),m=v.next(),d=0;!m.done;)_=f?n.call(f,S,m.value,d):m.value,u?(r.value=_,a(x,d,r)):x[d]=_,m=v.next(),++d;g=d}else if(t(l)){for(g=l.length,u&&(x=new u),d=0,c=0;d<g;++d)_=l[d],d+1<g&&(p=_.charCodeAt(0))>=55296&&p<=56319&&(_+=l[++d]),_=f?n.call(f,S,_,c):_,u?(r.value=_,a(x,c,r)):x[c]=_,++c;g=c}}if(g===void 0)for(g=T(l.length),u&&(x=new u(g)),d=0;d<g;++d)_=f?n.call(f,S,l[d],d):l[d],u?(r.value=_,a(x,d,r)):x[d]=_;return u&&(r.value=null,x.length=g),x}},60948:function(ee){"use strict";var z=Object.prototype.toString,e=z.call(function(){return arguments}());ee.exports=function(M){return z.call(M)===e}},17024:function(ee){"use strict";var z=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);ee.exports=function(M){return typeof M=="function"&&e(z.call(M))}},33208:function(ee){"use strict";ee.exports=function(){}},85608:function(ee,z,e){"use strict";ee.exports=e(37328)()?Math.sign:e(92928)},37328:function(ee){"use strict";ee.exports=function(){var z=Math.sign;return typeof z=="function"&&z(10)===1&&z(-20)===-1}},92928:function(ee){"use strict";ee.exports=function(z){return z=Number(z),isNaN(z)||z===0?z:z>0?1:-1}},96936:function(ee,z,e){"use strict";var M=e(85608),k=Math.abs,o=Math.floor;ee.exports=function(T){return isNaN(T)?0:(T=Number(T))!==0&&isFinite(T)?M(T)*o(k(T)):T}},81304:function(ee,z,e){"use strict";var M=e(96936),k=Math.max;ee.exports=function(o){return k(0,M(o))}},14428:function(ee,z,e){"use strict";var M=e(34044),k=e(9252),o=Function.prototype.bind,T=Function.prototype.call,b=Object.keys,h=Object.prototype.propertyIsEnumerable;ee.exports=function(s,t){return function(i,n){var r,a=arguments[2],l=arguments[3];return i=Object(k(i)),M(n),r=b(i),l&&r.sort(typeof l=="function"?o.call(l,i):void 0),typeof s!="function"&&(s=r[s]),T.call(s,r,function(u,d){return h.call(i,u)?T.call(n,a,i[u],u,i,d):t})}}},38452:function(ee,z,e){"use strict";ee.exports=e(96276)()?Object.assign:e(81892)},96276:function(ee){"use strict";ee.exports=function(){var z,e=Object.assign;return typeof e=="function"&&(e(z={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),z.foo+z.bar+z.trzy==="razdwatrzy")}},81892:function(ee,z,e){"use strict";var M=e(54768),k=e(9252),o=Math.max;ee.exports=function(T,b){var h,s,t,i=o(arguments.length,2);for(T=Object(k(T)),t=function(n){try{T[n]=b[n]}catch(r){h||(h=r)}},s=1;s<i;++s)M(b=arguments[s]).forEach(t);if(h!==void 0)throw h;return T}},95920:function(ee,z,e){"use strict";var M=e(74772),k=e(38452),o=e(9252);ee.exports=function(T){var b=Object(o(T)),h=arguments[1],s=Object(arguments[2]);if(b!==T&&!h)return b;var t={};return h?M(h,function(i){(s.ensure||i in T)&&(t[i]=T[i])}):k(t,T),t}},14452:function(ee,z,e){"use strict";var M,k,o,T,b=Object.create;e(63092)()||(M=e(8672)),ee.exports=M?M.level!==1?b:(k={},o={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(h){o[h]=h!=="__proto__"?T:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(k,o),Object.defineProperty(M,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k}),function(h,s){return b(h===null?k:h,s)}):b},42748:function(ee,z,e){"use strict";ee.exports=e(14428)("forEach")},69127:function(ee,z,e){"use strict";var M=e(42584),k={function:!0,object:!0};ee.exports=function(o){return M(o)&&k[typeof o]||!1}},42584:function(ee,z,e){"use strict";var M=e(33208)();ee.exports=function(k){return k!==M&&k!==null}},54768:function(ee,z,e){"use strict";ee.exports=e(87888)()?Object.keys:e(89592)},87888:function(ee){"use strict";ee.exports=function(){try{return Object.keys("primitive"),!0}catch(z){return!1}}},89592:function(ee,z,e){"use strict";var M=e(42584),k=Object.keys;ee.exports=function(o){return k(M(o)?Object(o):o)}},84323:function(ee,z,e){"use strict";var M=e(34044),k=e(42748),o=Function.prototype.call;ee.exports=function(T,b){var h={},s=arguments[2];return M(b),k(T,function(t,i,n,r){h[i]=o.call(b,s,t,i,n,r)}),h}},50868:function(ee,z,e){"use strict";var M=e(42584),k=Array.prototype.forEach,o=Object.create;ee.exports=function(T){var b=o(null);return k.call(arguments,function(h){M(h)&&function(s,t){var i;for(i in s)t[i]=s[i]}(Object(h),b)}),b}},69932:function(ee,z,e){"use strict";ee.exports=e(63092)()?Object.setPrototypeOf:e(8672)},63092:function(ee){"use strict";var z=Object.create,e=Object.getPrototypeOf,M={};ee.exports=function(){var k=Object.setPrototypeOf;return typeof k=="function"&&e(k((arguments[0]||z)(null),M))===M}},8672:function(ee,z,e){"use strict";var M,k,o,T,b=e(69127),h=e(9252),s=Object.prototype.isPrototypeOf,t=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};M=function(n,r){if(h(n),r===null||b(r))return n;throw new TypeError("Prototype must be null or an object")},ee.exports=(k=function(){var n,r=Object.create(null),a={},l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{(n=l.set).call(r,a)}catch(u){}if(Object.getPrototypeOf(r)===a)return{set:n,level:2}}return r.__proto__=a,Object.getPrototypeOf(r)===a?{level:2}:((r={}).__proto__=a,Object.getPrototypeOf(r)===a&&{level:1})}(),k?(k.level===2?k.set?(T=k.set,o=function(n,r){return T.call(M(n,r),r),n}):o=function(n,r){return M(n,r).__proto__=r,n}:o=function n(r,a){var l;return M(r,a),(l=s.call(n.nullPolyfill,r))&&delete n.nullPolyfill.__proto__,a===null&&(a=n.nullPolyfill),r.__proto__=a,l&&t(n.nullPolyfill,"__proto__",i),r},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:k.level})):null),e(14452)},34044:function(ee){"use strict";ee.exports=function(z){if(typeof z!="function")throw new TypeError(z+" is not a function");return z}},92584:function(ee,z,e){"use strict";var M=e(69127);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not an Object");return k}},9252:function(ee,z,e){"use strict";var M=e(42584);ee.exports=function(k){if(!M(k))throw new TypeError("Cannot use null or undefined");return k}},71056:function(ee,z,e){"use strict";ee.exports=e(42976)()?String.prototype.contains:e(93040)},42976:function(ee){"use strict";var z="razdwatrzy";ee.exports=function(){return typeof z.contains=="function"&&z.contains("dwa")===!0&&z.contains("foo")===!1}},93040:function(ee){"use strict";var z=String.prototype.indexOf;ee.exports=function(e){return z.call(this,e,arguments[1])>-1}},29768:function(ee){"use strict";var z=Object.prototype.toString,e=z.call("");ee.exports=function(M){return typeof M=="string"||M&&typeof M=="object"&&(M instanceof String||z.call(M)===e)||!1}},82252:function(ee){"use strict";var z=Object.create(null),e=Math.random;ee.exports=function(){var M;do M=e().toString(36).slice(2);while(z[M]);return M}},52104:function(ee,z,e){"use strict";var M,k=e(69932),o=e(71056),T=e(21092),b=e(92664),h=e(85512),s=Object.defineProperty;M=ee.exports=function(t,i){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");h.call(this,t),i=i?o.call(i,"key+value")?"key+value":o.call(i,"key")?"key":"value":"value",s(this,"__kind__",T("",i))},k&&k(M,h),delete M.prototype.constructor,M.prototype=Object.create(h.prototype,{_resolve:T(function(t){return this.__kind__==="value"?this.__list__[t]:this.__kind__==="key+value"?[t,this.__list__[t]]:t})}),s(M.prototype,b.toStringTag,T("c","Array Iterator"))},76024:function(ee,z,e){"use strict";var M=e(60948),k=e(34044),o=e(29768),T=e(76252),b=Array.isArray,h=Function.prototype.call,s=Array.prototype.some;ee.exports=function(t,i){var n,r,a,l,u,d,c,x,g=arguments[2];if(b(t)||M(t)?n="array":o(t)?n="string":t=T(t),k(i),a=function(){l=!0},n!=="array")if(n!=="string")for(r=t.next();!r.done;){if(h.call(i,g,r.value,a),l)return;r=t.next()}else for(d=t.length,u=0;u<d&&(c=t[u],u+1<d&&(x=c.charCodeAt(0))>=55296&&x<=56319&&(c+=t[++u]),h.call(i,g,c,a),!l);++u);else s.call(t,function(p){return h.call(i,g,p,a),l})}},76252:function(ee,z,e){"use strict";var M=e(60948),k=e(29768),o=e(52104),T=e(80940),b=e(52891),h=e(92664).iterator;ee.exports=function(s){return typeof b(s)[h]=="function"?s[h]():M(s)?new o(s):k(s)?new T(s):new o(s)}},85512:function(ee,z,e){"use strict";var M,k=e(41476),o=e(38452),T=e(34044),b=e(9252),h=e(21092),s=e(27940),t=e(92664),i=Object.defineProperty,n=Object.defineProperties;ee.exports=M=function(r,a){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");n(this,{__list__:h("w",b(r)),__context__:h("w",a),__nextIndex__:h("w",0)}),a&&(T(a.on),a.on("_add",this._onAdd),a.on("_delete",this._onDelete),a.on("_clear",this._onClear))},delete M.prototype.constructor,n(M.prototype,o({_next:h(function(){var r;if(this.__list__)return this.__redo__&&(r=this.__redo__.shift())!==void 0?r:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:h(function(){return this._createResult(this._next())}),_createResult:h(function(r){return r===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(r)}}),_resolve:h(function(r){return this.__list__[r]}),_unBind:h(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:h(function(){return"[object "+(this[t.toStringTag]||"Object")+"]"})},s({_onAdd:h(function(r){r>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(a,l){a>=r&&(this.__redo__[l]=++a)},this),this.__redo__.push(r)):i(this,"__redo__",h("c",[r])))}),_onDelete:h(function(r){var a;r>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((a=this.__redo__.indexOf(r))!==-1&&this.__redo__.splice(a,1),this.__redo__.forEach(function(l,u){l>r&&(this.__redo__[u]=--l)},this)))}),_onClear:h(function(){this.__redo__&&k.call(this.__redo__),this.__nextIndex__=0})}))),i(M.prototype,t.iterator,h(function(){return this}))},76368:function(ee,z,e){"use strict";var M=e(60948),k=e(42584),o=e(29768),T=e(92664).iterator,b=Array.isArray;ee.exports=function(h){return!(!k(h)||!b(h)&&!o(h)&&!M(h)&&typeof h[T]!="function")}},80940:function(ee,z,e){"use strict";var M,k=e(69932),o=e(21092),T=e(92664),b=e(85512),h=Object.defineProperty;M=ee.exports=function(s){if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");s=String(s),b.call(this,s),h(this,"__length__",o("",s.length))},k&&k(M,b),delete M.prototype.constructor,M.prototype=Object.create(b.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(s){var t,i=this.__list__[s];return this.__nextIndex__===this.__length__?i:(t=i.charCodeAt(0))>=55296&&t<=56319?i+this.__list__[this.__nextIndex__++]:i})}),h(M.prototype,T.toStringTag,o("c","String Iterator"))},52891:function(ee,z,e){"use strict";var M=e(76368);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not iterable");return k}},60964:function(ee){"use strict";function z(e,M){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var k=Object(e),o=1;o<arguments.length;o++){var T=arguments[o];if(T!=null)for(var b=Object.keys(Object(T)),h=0,s=b.length;h<s;h++){var t=b[h],i=Object.getOwnPropertyDescriptor(T,t);i!==void 0&&i.enumerable&&(k[t]=T[t])}}return k}ee.exports={assign:z,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:z})}}},92664:function(ee,z,e){"use strict";ee.exports=e(43580)()?e(12296).Symbol:e(18376)},43580:function(ee,z,e){"use strict";var M=e(12296),k={object:!0,symbol:!0};ee.exports=function(){var o,T=M.Symbol;if(typeof T!="function")return!1;o=T("test symbol");try{String(o)}catch(b){return!1}return!!k[typeof T.iterator]&&!!k[typeof T.toPrimitive]&&!!k[typeof T.toStringTag]}},53908:function(ee){"use strict";ee.exports=function(z){return!!z&&(typeof z=="symbol"||!!z.constructor&&z.constructor.name==="Symbol"&&z[z.constructor.toStringTag]==="Symbol")}},96863:function(ee,z,e){"use strict";var M=e(21092),k=Object.create,o=Object.defineProperty,T=Object.prototype,b=k(null);ee.exports=function(h){for(var s,t,i=0;b[h+(i||"")];)++i;return b[h+=i||""]=!0,o(T,s="@@"+h,M.gs(null,function(n){t||(t=!0,o(this,s,M(n)),t=!1)})),s}},53540:function(ee,z,e){"use strict";var M=e(21092),k=e(12296).Symbol;ee.exports=function(o){return Object.defineProperties(o,{hasInstance:M("",k&&k.hasInstance||o("hasInstance")),isConcatSpreadable:M("",k&&k.isConcatSpreadable||o("isConcatSpreadable")),iterator:M("",k&&k.iterator||o("iterator")),match:M("",k&&k.match||o("match")),replace:M("",k&&k.replace||o("replace")),search:M("",k&&k.search||o("search")),species:M("",k&&k.species||o("species")),split:M("",k&&k.split||o("split")),toPrimitive:M("",k&&k.toPrimitive||o("toPrimitive")),toStringTag:M("",k&&k.toStringTag||o("toStringTag")),unscopables:M("",k&&k.unscopables||o("unscopables"))})}},73852:function(ee,z,e){"use strict";var M=e(21092),k=e(63948),o=Object.create(null);ee.exports=function(T){return Object.defineProperties(T,{for:M(function(b){return o[b]?o[b]:o[b]=T(String(b))}),keyFor:M(function(b){var h;for(h in k(b),o)if(o[h]===b)return h})})}},18376:function(ee,z,e){"use strict";var M,k,o,T=e(21092),b=e(63948),h=e(12296).Symbol,s=e(96863),t=e(53540),i=e(73852),n=Object.create,r=Object.defineProperties,a=Object.defineProperty;if(typeof h=="function")try{String(h()),o=!0}catch(l){}else h=null;k=function(l){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return M(l)},ee.exports=M=function l(u){var d;if(this instanceof l)throw new TypeError("Symbol is not a constructor");return o?h(u):(d=n(k.prototype),u=u===void 0?"":String(u),r(d,{__description__:T("",u),__name__:T("",s(u))}))},t(M),i(M),r(k.prototype,{constructor:T(M),toString:T("",function(){return this.__name__})}),r(M.prototype,{toString:T(function(){return"Symbol ("+b(this).__description__+")"}),valueOf:T(function(){return b(this)})}),a(M.prototype,M.toPrimitive,T("",function(){var l=b(this);return typeof l=="symbol"?l:l.toString()})),a(M.prototype,M.toStringTag,T("c","Symbol")),a(k.prototype,M.toStringTag,T("c",M.prototype[M.toStringTag])),a(k.prototype,M.toPrimitive,T("c",M.prototype[M.toPrimitive]))},63948:function(ee,z,e){"use strict";var M=e(53908);ee.exports=function(k){if(!M(k))throw new TypeError(k+" is not a symbol");return k}},60463:function(ee,z,e){"use strict";ee.exports=e(96979)()?WeakMap:e(64864)},96979:function(ee){"use strict";ee.exports=function(){var z,e;if(typeof WeakMap!="function")return!1;try{z=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch(M){return!1}return String(z)==="[object WeakMap]"&&typeof z.set=="function"&&z.set({},1)===z&&typeof z.delete=="function"&&typeof z.has=="function"&&z.get(e)==="one"}},69876:function(ee){"use strict";ee.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},64864:function(ee,z,e){"use strict";var M,k=e(42584),o=e(69932),T=e(92584),b=e(9252),h=e(82252),s=e(21092),t=e(76252),i=e(76024),n=e(92664).toStringTag,r=e(69876),a=Array.isArray,l=Object.defineProperty,u=Object.prototype.hasOwnProperty,d=Object.getPrototypeOf;ee.exports=M=function(){var c,x=arguments[0];if(!(this instanceof M))throw new TypeError("Constructor requires 'new'");return c=r&&o&&WeakMap!==M?o(new WeakMap,d(this)):this,k(x)&&(a(x)||(x=t(x))),l(c,"__weakMapData__",s("c","$weakMap$"+h())),x&&i(x,function(g){b(g),c.set(g[0],g[1])}),c},r&&(o&&o(M,WeakMap),M.prototype=Object.create(WeakMap.prototype,{constructor:s(M)})),Object.defineProperties(M.prototype,{delete:s(function(c){return!!u.call(T(c),this.__weakMapData__)&&(delete c[this.__weakMapData__],!0)}),get:s(function(c){if(u.call(T(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:s(function(c){return u.call(T(c),this.__weakMapData__)}),set:s(function(c,x){return l(T(c),this.__weakMapData__,s("c",x)),this}),toString:s(function(){return"[object WeakMap]"})}),l(M.prototype,n,s("c","WeakMap"))},61252:function(ee){"use strict";var z,e=typeof Reflect=="object"?Reflect:null,M=e&&typeof e.apply=="function"?e.apply:function(u,d,c){return Function.prototype.apply.call(u,d,c)};z=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.getOwnPropertyNames(u)};var k=Number.isNaN||function(u){return u!=u};function o(){o.init.call(this)}ee.exports=o,ee.exports.once=function(u,d){return new Promise(function(c,x){function g(v){u.removeListener(d,p),x(v)}function p(){typeof u.removeListener=="function"&&u.removeListener("error",g),c([].slice.call(arguments))}l(u,d,p,{once:!0}),d!=="error"&&function(v,m,y){typeof v.on=="function"&&l(v,"error",m,{once:!0})}(u,g)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var T=10;function b(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}function h(u){return u._maxListeners===void 0?o.defaultMaxListeners:u._maxListeners}function s(u,d,c,x){var g,p,v,m;if(b(c),(p=u._events)===void 0?(p=u._events=Object.create(null),u._eventsCount=0):(p.newListener!==void 0&&(u.emit("newListener",d,c.listener?c.listener:c),p=u._events),v=p[d]),v===void 0)v=p[d]=c,++u._eventsCount;else if(typeof v=="function"?v=p[d]=x?[c,v]:[v,c]:x?v.unshift(c):v.push(c),(g=h(u))>0&&v.length>g&&!v.warned){v.warned=!0;var y=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(d)+" listeners added. Use emitter.setMaxListeners() to increase limit");y.name="MaxListenersExceededWarning",y.emitter=u,y.type=d,y.count=v.length,m=y,console&&console.warn&&console.warn(m)}return u}function t(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(u,d,c){var x={fired:!1,wrapFn:void 0,target:u,type:d,listener:c},g=t.bind(x);return g.listener=c,x.wrapFn=g,g}function n(u,d,c){var x=u._events;if(x===void 0)return[];var g=x[d];return g===void 0?[]:typeof g=="function"?c?[g.listener||g]:[g]:c?function(p){for(var v=new Array(p.length),m=0;m<v.length;++m)v[m]=p[m].listener||p[m];return v}(g):a(g,g.length)}function r(u){var d=this._events;if(d!==void 0){var c=d[u];if(typeof c=="function")return 1;if(c!==void 0)return c.length}return 0}function a(u,d){for(var c=new Array(d),x=0;x<d;++x)c[x]=u[x];return c}function l(u,d,c,x){if(typeof u.on=="function")x.once?u.once(d,c):u.on(d,c);else{if(typeof u.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u);u.addEventListener(d,function g(p){x.once&&u.removeEventListener(d,g),c(p)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");T=u}}),o.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||k(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this},o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(u){for(var d=[],c=1;c<arguments.length;c++)d.push(arguments[c]);var x=u==="error",g=this._events;if(g!==void 0)x=x&&g.error===void 0;else if(!x)return!1;if(x){var p;if(d.length>0&&(p=d[0]),p instanceof Error)throw p;var v=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw v.context=p,v}var m=g[u];if(m===void 0)return!1;if(typeof m=="function")M(m,this,d);else{var y=m.length,_=a(m,y);for(c=0;c<y;++c)M(_[c],this,d)}return!0},o.prototype.addListener=function(u,d){return s(this,u,d,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(u,d){return s(this,u,d,!0)},o.prototype.once=function(u,d){return b(d),this.on(u,i(this,u,d)),this},o.prototype.prependOnceListener=function(u,d){return b(d),this.prependListener(u,i(this,u,d)),this},o.prototype.removeListener=function(u,d){var c,x,g,p,v;if(b(d),(x=this._events)===void 0)return this;if((c=x[u])===void 0)return this;if(c===d||c.listener===d)--this._eventsCount==0?this._events=Object.create(null):(delete x[u],x.removeListener&&this.emit("removeListener",u,c.listener||d));else if(typeof c!="function"){for(g=-1,p=c.length-1;p>=0;p--)if(c[p]===d||c[p].listener===d){v=c[p].listener,g=p;break}if(g<0)return this;g===0?c.shift():function(m,y){for(;y+1<m.length;y++)m[y]=m[y+1];m.pop()}(c,g),c.length===1&&(x[u]=c[0]),x.removeListener!==void 0&&this.emit("removeListener",u,v||d)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(u){var d,c,x;if((c=this._events)===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[u]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete c[u]),this;if(arguments.length===0){var g,p=Object.keys(c);for(x=0;x<p.length;++x)(g=p[x])!=="removeListener"&&this.removeAllListeners(g);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(d=c[u])=="function")this.removeListener(u,d);else if(d!==void 0)for(x=d.length-1;x>=0;x--)this.removeListener(u,d[x]);return this},o.prototype.listeners=function(u){return n(this,u,!0)},o.prototype.rawListeners=function(u){return n(this,u,!1)},o.listenerCount=function(u,d){return typeof u.listenerCount=="function"?u.listenerCount(d):r.call(u,d)},o.prototype.listenerCount=r,o.prototype.eventNames=function(){return this._eventsCount>0?z(this._events):[]}},39072:function(ee){var z=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};ee.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return z()}try{return __global__||z()}finally{delete Object.prototype.__global__}}()},12296:function(ee,z,e){"use strict";ee.exports=e(45072)()?globalThis:e(39072)},45072:function(ee){"use strict";ee.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},38248:function(ee,z,e){"use strict";var M=e(94576);ee.exports=function(k){var o=typeof k;if(o==="string"){var T=k;if((k=+k)==0&&M(T))return!1}else if(o!=="number")return!1;return k-k<1}},47520:function(ee,z,e){var M=e(72512);ee.exports=function(k,o,T){if(!k)throw new TypeError("must specify data as first parameter");if(T=0|+(T||0),Array.isArray(k)&&k[0]&&typeof k[0][0]=="number"){var b,h,s,t,i=k[0].length,n=k.length*i;o&&typeof o!="string"||(o=new(M(o||"float32"))(n+T));var r=o.length-T;if(n!==r)throw new Error("source length "+n+" ("+i+"x"+k.length+") does not match destination length "+r);for(b=0,s=T;b<k.length;b++)for(h=0;h<i;h++)o[s++]=k[b][h]===null?NaN:k[b][h]}else if(o&&typeof o!="string")o.set(k,T);else{var a=M(o||"float32");if(Array.isArray(k)||o==="array")for(b=0,s=T,t=(o=new a(k.length+T)).length;s<t;s++,b++)o[s]=k[b]===null?NaN:k[b];else T===0?o=new a(k):(o=new a(k.length+T)).set(k,T)}return o}},33888:function(ee,z,e){"use strict";var M=e(49395),k=[32,126];ee.exports=function(o){var T=(o=o||{}).shape?o.shape:o.canvas?[o.canvas.width,o.canvas.height]:[512,512],b=o.canvas||document.createElement("canvas"),h=o.font,s=typeof o.step=="number"?[o.step,o.step]:o.step||[32,32],t=o.chars||k;if(h&&typeof h!="string"&&(h=M(h)),Array.isArray(t)){if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var i=[],n=t[0],r=0;n<=t[1];n++)i[r++]=String.fromCharCode(n);t=i}}else t=String(t).split("");T=T.slice(),b.width=T[0],b.height=T[1];var a=b.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,b.width,b.height),a.font=h,a.textAlign="center",a.textBaseline="middle",a.fillStyle="#fff";var l=s[0]/2,u=s[1]/2;for(n=0;n<t.length;n++)a.fillText(t[n],l,u),(l+=s[0])>T[0]-s[0]/2&&(l=s[0]/2,u+=s[1]);return b}},71920:function(ee){"use strict";function z(o,T){T||(T={}),(typeof o=="string"||Array.isArray(o))&&(T.family=o);var b=Array.isArray(T.family)?T.family.join(", "):T.family;if(!b)throw Error("`family` must be defined");var h=T.size||T.fontSize||T.em||48,s=T.weight||T.fontWeight||"",t=(o=[T.style||T.fontStyle||"",s,h].join(" ")+"px "+b,T.origin||"top");if(z.cache[b]&&h<=z.cache[b].em)return e(z.cache[b],t);var i=T.canvas||z.canvas,n=i.getContext("2d"),r={upper:T.upper!==void 0?T.upper:"H",lower:T.lower!==void 0?T.lower:"x",descent:T.descent!==void 0?T.descent:"p",ascent:T.ascent!==void 0?T.ascent:"h",tittle:T.tittle!==void 0?T.tittle:"i",overshoot:T.overshoot!==void 0?T.overshoot:"O"},a=Math.ceil(1.5*h);i.height=a,i.width=.5*a,n.font=o;var l="H",u={top:0};n.clearRect(0,0,a,a),n.textBaseline="top",n.fillStyle="black",n.fillText(l,0,0);var d=M(n.getImageData(0,0,a,a));n.clearRect(0,0,a,a),n.textBaseline="bottom",n.fillText(l,0,a);var c=M(n.getImageData(0,0,a,a));u.lineHeight=u.bottom=a-c+d,n.clearRect(0,0,a,a),n.textBaseline="alphabetic",n.fillText(l,0,a);var x=a-M(n.getImageData(0,0,a,a))-1+d;u.baseline=u.alphabetic=x,n.clearRect(0,0,a,a),n.textBaseline="middle",n.fillText(l,0,.5*a);var g=M(n.getImageData(0,0,a,a));u.median=u.middle=a-g-1+d-.5*a,n.clearRect(0,0,a,a),n.textBaseline="hanging",n.fillText(l,0,.5*a);var p=M(n.getImageData(0,0,a,a));u.hanging=a-p-1+d-.5*a,n.clearRect(0,0,a,a),n.textBaseline="ideographic",n.fillText(l,0,a);var v=M(n.getImageData(0,0,a,a));if(u.ideographic=a-v-1+d,r.upper&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.upper,0,0),u.upper=M(n.getImageData(0,0,a,a)),u.capHeight=u.baseline-u.upper),r.lower&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.lower,0,0),u.lower=M(n.getImageData(0,0,a,a)),u.xHeight=u.baseline-u.lower),r.tittle&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.tittle,0,0),u.tittle=M(n.getImageData(0,0,a,a))),r.ascent&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.ascent,0,0),u.ascent=M(n.getImageData(0,0,a,a))),r.descent&&(n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.descent,0,0),u.descent=k(n.getImageData(0,0,a,a))),r.overshoot){n.clearRect(0,0,a,a),n.textBaseline="top",n.fillText(r.overshoot,0,0);var m=k(n.getImageData(0,0,a,a));u.overshoot=m-x}for(var y in u)u[y]/=h;return u.em=h,z.cache[b]=u,e(u,t)}function e(o,T){var b={};for(var h in typeof T=="string"&&(T=o[T]),o)h!=="em"&&(b[h]=o[h]-T);return b}function M(o){for(var T=o.height,b=o.data,h=3;h<b.length;h+=4)if(b[h]!==0)return Math.floor(.25*(h-3)/T)}function k(o){for(var T=o.height,b=o.data,h=b.length-1;h>0;h-=4)if(b[h]!==0)return Math.floor(.25*(h-3)/T)}ee.exports=z,z.canvas=document.createElement("canvas"),z.cache={}},46492:function(ee,z,e){"use strict";var M=e(90720),k=Object.prototype.toString,o=Object.prototype.hasOwnProperty;ee.exports=function(T,b,h){if(!M(b))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=h),k.call(T)==="[object Array]"?function(t,i,n){for(var r=0,a=t.length;r<a;r++)o.call(t,r)&&(n==null?i(t[r],r,t):i.call(n,t[r],r,t))}(T,b,s):typeof T=="string"?function(t,i,n){for(var r=0,a=t.length;r<a;r++)n==null?i(t.charAt(r),r,t):i.call(n,t.charAt(r),r,t)}(T,b,s):function(t,i,n){for(var r in t)o.call(t,r)&&(n==null?i(t[r],r,t):i.call(n,t[r],r,t))}(T,b,s)}},74336:function(ee){"use strict";var z=Object.prototype.toString,e=Math.max,M=function(k,o){for(var T=[],b=0;b<k.length;b+=1)T[b]=k[b];for(var h=0;h<o.length;h+=1)T[h+k.length]=o[h];return T};ee.exports=function(k){var o=this;if(typeof o!="function"||z.apply(o)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var T,b=function(n,r){for(var a=[],l=1,u=0;l<n.length;l+=1,u+=1)a[u]=n[l];return a}(arguments),h=e(0,o.length-b.length),s=[],t=0;t<h;t++)s[t]="$"+t;if(T=Function("binder","return function ("+function(n,r){for(var a="",l=0;l<n.length;l+=1)a+=n[l],l+1<n.length&&(a+=",");return a}(s)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof T){var n=o.apply(this,M(b,arguments));return Object(n)===n?n:this}return o.apply(k,M(b,arguments))}),o.prototype){var i=function(){};i.prototype=o.prototype,T.prototype=new i,i.prototype=null}return T}},8844:function(ee,z,e){"use strict";var M=e(74336);ee.exports=Function.prototype.bind||M},13380:function(ee){ee.exports=function(z,e){if(typeof z!="string")throw new TypeError("must specify type string");if(e=e||{},typeof document=="undefined"&&!e.canvas)return null;var M=e.canvas||document.createElement("canvas");typeof e.width=="number"&&(M.width=e.width),typeof e.height=="number"&&(M.height=e.height);var k,o=e;try{var T=[z];z.indexOf("webgl")===0&&T.push("experimental-"+z);for(var b=0;b<T.length;b++)if(k=M.getContext(T[b],o))return k}catch(h){k=null}return k||null}},53664:function(ee,z,e){"use strict";var M,k=SyntaxError,o=Function,T=TypeError,b=function(P){try{return o('"use strict"; return ('+P+").constructor;")()}catch(C){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(P){h=null}var s=function(){throw new T},t=h?function(){try{return s}catch(P){try{return h(arguments,"callee").get}catch(C){return s}}}():s,i=e(71080)(),n=e(69572)(),r=Object.getPrototypeOf||(n?function(P){return P.__proto__}:null),a={},l=typeof Uint8Array!="undefined"&&r?r(Uint8Array):M,u={"%AggregateError%":typeof AggregateError=="undefined"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?M:ArrayBuffer,"%ArrayIteratorPrototype%":i&&r?r([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":a,"%AsyncGenerator%":a,"%AsyncGeneratorFunction%":a,"%AsyncIteratorPrototype%":a,"%Atomics%":typeof Atomics=="undefined"?M:Atomics,"%BigInt%":typeof BigInt=="undefined"?M:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?M:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?M:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?M:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?M:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":a,"%Int8Array%":typeof Int8Array=="undefined"?M:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?M:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i&&r?r(r([][Symbol.iterator]())):M,"%JSON%":typeof JSON=="object"?JSON:M,"%Map%":typeof Map=="undefined"?M:Map,"%MapIteratorPrototype%":typeof Map!="undefined"&&i&&r?r(new Map()[Symbol.iterator]()):M,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?M:Promise,"%Proxy%":typeof Proxy=="undefined"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?M:Set,"%SetIteratorPrototype%":typeof Set!="undefined"&&i&&r?r(new Set()[Symbol.iterator]()):M,"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":i&&r?r(""[Symbol.iterator]()):M,"%Symbol%":i?Symbol:M,"%SyntaxError%":k,"%ThrowTypeError%":t,"%TypedArray%":l,"%TypeError%":T,"%Uint8Array%":typeof Uint8Array=="undefined"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?M:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?M:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?M:WeakSet};if(r)try{null.error}catch(P){var d=r(r(P));u["%Error.prototype%"]=d}var c=function P(C){var O;if(C==="%AsyncFunction%")O=b("async function () {}");else if(C==="%GeneratorFunction%")O=b("function* () {}");else if(C==="%AsyncGeneratorFunction%")O=b("async function* () {}");else if(C==="%AsyncGenerator%"){var R=P("%AsyncGeneratorFunction%");R&&(O=R.prototype)}else if(C==="%AsyncIteratorPrototype%"){var j=P("%AsyncGenerator%");j&&r&&(O=r(j.prototype))}return u[C]=O,O},x={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},g=e(8844),p=e(92064),v=g.call(Function.call,Array.prototype.concat),m=g.call(Function.apply,Array.prototype.splice),y=g.call(Function.call,String.prototype.replace),_=g.call(Function.call,String.prototype.slice),f=g.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w=/\\(\\)?/g,E=function(P,C){var O,R=P;if(p(x,R)&&(R="%"+(O=x[R])[0]+"%"),p(u,R)){var j=u[R];if(j===a&&(j=c(R)),j===void 0&&!C)throw new T("intrinsic "+P+" exists, but is not available. Please file an issue!");return{alias:O,name:R,value:j}}throw new k("intrinsic "+P+" does not exist!")};ee.exports=function(P,C){if(typeof P!="string"||P.length===0)throw new T("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof C!="boolean")throw new T('"allowMissing" argument must be a boolean');if(f(/^%?[^%]*%?$/,P)===null)throw new k("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var O=function(Z){var $=_(Z,0,1),re=_(Z,-1);if($==="%"&&re!=="%")throw new k("invalid intrinsic syntax, expected closing `%`");if(re==="%"&&$!=="%")throw new k("invalid intrinsic syntax, expected opening `%`");var oe=[];return y(Z,S,function(ie,ue,me,be){oe[oe.length]=me?y(be,w,"$1"):ue||ie}),oe}(P),R=O.length>0?O[0]:"",j=E("%"+R+"%",C),D=j.name,N=j.value,W=!1,F=j.alias;F&&(R=F[0],m(O,v([0,1],F)));for(var U=1,V=!0;U<O.length;U+=1){var te=O[U],J=_(te,0,1),K=_(te,-1);if((J==='"'||J==="'"||J==="`"||K==='"'||K==="'"||K==="`")&&J!==K)throw new k("property names with quotes must have matching quotes");if(te!=="constructor"&&V||(W=!0),p(u,D="%"+(R+="."+te)+"%"))N=u[D];else if(N!=null){if(!(te in N)){if(!C)throw new T("base intrinsic for "+P+" exists, but the property is not available.");return}if(h&&U+1>=O.length){var X=h(N,te);N=(V=!!X)&&"get"in X&&!("originalValue"in X.get)?X.get:N[te]}else V=p(N,te),N=N[te];V&&!W&&(u[D]=N)}}return N}},12408:function(ee){ee.exports=function(z,e){var M=e[0],k=e[1],o=e[2],T=e[3],b=e[4],h=e[5],s=e[6],t=e[7],i=e[8],n=e[9],r=e[10],a=e[11],l=e[12],u=e[13],d=e[14],c=e[15];return z[0]=h*(r*c-a*d)-n*(s*c-t*d)+u*(s*a-t*r),z[1]=-(k*(r*c-a*d)-n*(o*c-T*d)+u*(o*a-T*r)),z[2]=k*(s*c-t*d)-h*(o*c-T*d)+u*(o*t-T*s),z[3]=-(k*(s*a-t*r)-h*(o*a-T*r)+n*(o*t-T*s)),z[4]=-(b*(r*c-a*d)-i*(s*c-t*d)+l*(s*a-t*r)),z[5]=M*(r*c-a*d)-i*(o*c-T*d)+l*(o*a-T*r),z[6]=-(M*(s*c-t*d)-b*(o*c-T*d)+l*(o*t-T*s)),z[7]=M*(s*a-t*r)-b*(o*a-T*r)+i*(o*t-T*s),z[8]=b*(n*c-a*u)-i*(h*c-t*u)+l*(h*a-t*n),z[9]=-(M*(n*c-a*u)-i*(k*c-T*u)+l*(k*a-T*n)),z[10]=M*(h*c-t*u)-b*(k*c-T*u)+l*(k*t-T*h),z[11]=-(M*(h*a-t*n)-b*(k*a-T*n)+i*(k*t-T*h)),z[12]=-(b*(n*d-r*u)-i*(h*d-s*u)+l*(h*r-s*n)),z[13]=M*(n*d-r*u)-i*(k*d-o*u)+l*(k*r-o*n),z[14]=-(M*(h*d-s*u)-b*(k*d-o*u)+l*(k*s-o*h)),z[15]=M*(h*r-s*n)-b*(k*r-o*n)+i*(k*s-o*h),z}},76860:function(ee){ee.exports=function(z){var e=new Float32Array(16);return e[0]=z[0],e[1]=z[1],e[2]=z[2],e[3]=z[3],e[4]=z[4],e[5]=z[5],e[6]=z[6],e[7]=z[7],e[8]=z[8],e[9]=z[9],e[10]=z[10],e[11]=z[11],e[12]=z[12],e[13]=z[13],e[14]=z[14],e[15]=z[15],e}},64492:function(ee){ee.exports=function(z,e){return z[0]=e[0],z[1]=e[1],z[2]=e[2],z[3]=e[3],z[4]=e[4],z[5]=e[5],z[6]=e[6],z[7]=e[7],z[8]=e[8],z[9]=e[9],z[10]=e[10],z[11]=e[11],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15],z}},54212:function(ee){ee.exports=function(){var z=new Float32Array(16);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},70800:function(ee){ee.exports=function(z){var e=z[0],M=z[1],k=z[2],o=z[3],T=z[4],b=z[5],h=z[6],s=z[7],t=z[8],i=z[9],n=z[10],r=z[11],a=z[12],l=z[13],u=z[14],d=z[15];return(e*b-M*T)*(n*d-r*u)-(e*h-k*T)*(i*d-r*l)+(e*s-o*T)*(i*u-n*l)+(M*h-k*b)*(t*d-r*a)-(M*s-o*b)*(t*u-n*a)+(k*s-o*h)*(t*l-i*a)}},61784:function(ee){ee.exports=function(z,e){var M=e[0],k=e[1],o=e[2],T=e[3],b=M+M,h=k+k,s=o+o,t=M*b,i=k*b,n=k*h,r=o*b,a=o*h,l=o*s,u=T*b,d=T*h,c=T*s;return z[0]=1-n-l,z[1]=i+c,z[2]=r-d,z[3]=0,z[4]=i-c,z[5]=1-t-l,z[6]=a+u,z[7]=0,z[8]=r+d,z[9]=a-u,z[10]=1-t-n,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},91616:function(ee){ee.exports=function(z,e,M){var k,o,T,b=M[0],h=M[1],s=M[2],t=Math.sqrt(b*b+h*h+s*s);return Math.abs(t)<1e-6?null:(b*=t=1/t,h*=t,s*=t,k=Math.sin(e),T=1-(o=Math.cos(e)),z[0]=b*b*T+o,z[1]=h*b*T+s*k,z[2]=s*b*T-h*k,z[3]=0,z[4]=b*h*T-s*k,z[5]=h*h*T+o,z[6]=s*h*T+b*k,z[7]=0,z[8]=b*s*T+h*k,z[9]=h*s*T-b*k,z[10]=s*s*T+o,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z)}},51944:function(ee){ee.exports=function(z,e,M){var k=e[0],o=e[1],T=e[2],b=e[3],h=k+k,s=o+o,t=T+T,i=k*h,n=k*s,r=k*t,a=o*s,l=o*t,u=T*t,d=b*h,c=b*s,x=b*t;return z[0]=1-(a+u),z[1]=n+x,z[2]=r-c,z[3]=0,z[4]=n-x,z[5]=1-(i+u),z[6]=l+d,z[7]=0,z[8]=r+c,z[9]=l-d,z[10]=1-(i+a),z[11]=0,z[12]=M[0],z[13]=M[1],z[14]=M[2],z[15]=1,z}},69444:function(ee){ee.exports=function(z,e){return z[0]=e[0],z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=e[1],z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=e[2],z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},48268:function(ee){ee.exports=function(z,e){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=e[0],z[13]=e[1],z[14]=e[2],z[15]=1,z}},21856:function(ee){ee.exports=function(z,e){var M=Math.sin(e),k=Math.cos(e);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=k,z[6]=M,z[7]=0,z[8]=0,z[9]=-M,z[10]=k,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},79216:function(ee){ee.exports=function(z,e){var M=Math.sin(e),k=Math.cos(e);return z[0]=k,z[1]=0,z[2]=-M,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=M,z[9]=0,z[10]=k,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},57736:function(ee){ee.exports=function(z,e){var M=Math.sin(e),k=Math.cos(e);return z[0]=k,z[1]=M,z[2]=0,z[3]=0,z[4]=-M,z[5]=k,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},38848:function(ee){ee.exports=function(z,e,M,k,o,T,b){var h=1/(M-e),s=1/(o-k),t=1/(T-b);return z[0]=2*T*h,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=2*T*s,z[6]=0,z[7]=0,z[8]=(M+e)*h,z[9]=(o+k)*s,z[10]=(b+T)*t,z[11]=-1,z[12]=0,z[13]=0,z[14]=b*T*2*t,z[15]=0,z}},36635:function(ee){ee.exports=function(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}},36524:function(ee,z,e){ee.exports={create:e(54212),clone:e(76860),copy:e(64492),identity:e(36635),transpose:e(86520),invert:e(4308),adjoint:e(12408),determinant:e(70800),multiply:e(80944),translate:e(35176),scale:e(68152),rotate:e(30016),rotateX:e(15456),rotateY:e(64840),rotateZ:e(4192),fromRotation:e(91616),fromRotationTranslation:e(51944),fromScaling:e(69444),fromTranslation:e(48268),fromXRotation:e(21856),fromYRotation:e(79216),fromZRotation:e(57736),fromQuat:e(61784),frustum:e(38848),perspective:e(51296),perspectiveFromFieldOfView:e(63688),ortho:e(97688),lookAt:e(56508),str:e(89412)}},4308:function(ee){ee.exports=function(z,e){var M=e[0],k=e[1],o=e[2],T=e[3],b=e[4],h=e[5],s=e[6],t=e[7],i=e[8],n=e[9],r=e[10],a=e[11],l=e[12],u=e[13],d=e[14],c=e[15],x=M*h-k*b,g=M*s-o*b,p=M*t-T*b,v=k*s-o*h,m=k*t-T*h,y=o*t-T*s,_=i*u-n*l,f=i*d-r*l,S=i*c-a*l,w=n*d-r*u,E=n*c-a*u,P=r*c-a*d,C=x*P-g*E+p*w+v*S-m*f+y*_;return C?(C=1/C,z[0]=(h*P-s*E+t*w)*C,z[1]=(o*E-k*P-T*w)*C,z[2]=(u*y-d*m+c*v)*C,z[3]=(r*m-n*y-a*v)*C,z[4]=(s*S-b*P-t*f)*C,z[5]=(M*P-o*S+T*f)*C,z[6]=(d*p-l*y-c*g)*C,z[7]=(i*y-r*p+a*g)*C,z[8]=(b*E-h*S+t*_)*C,z[9]=(k*S-M*E-T*_)*C,z[10]=(l*m-u*p+c*x)*C,z[11]=(n*p-i*m-a*x)*C,z[12]=(h*f-b*w-s*_)*C,z[13]=(M*w-k*f+o*_)*C,z[14]=(u*g-l*v-d*x)*C,z[15]=(i*v-n*g+r*x)*C,z):null}},56508:function(ee,z,e){var M=e(36635);ee.exports=function(k,o,T,b){var h,s,t,i,n,r,a,l,u,d,c=o[0],x=o[1],g=o[2],p=b[0],v=b[1],m=b[2],y=T[0],_=T[1],f=T[2];return Math.abs(c-y)<1e-6&&Math.abs(x-_)<1e-6&&Math.abs(g-f)<1e-6?M(k):(a=c-y,l=x-_,u=g-f,h=v*(u*=d=1/Math.sqrt(a*a+l*l+u*u))-m*(l*=d),s=m*(a*=d)-p*u,t=p*l-v*a,(d=Math.sqrt(h*h+s*s+t*t))?(h*=d=1/d,s*=d,t*=d):(h=0,s=0,t=0),i=l*t-u*s,n=u*h-a*t,r=a*s-l*h,(d=Math.sqrt(i*i+n*n+r*r))?(i*=d=1/d,n*=d,r*=d):(i=0,n=0,r=0),k[0]=h,k[1]=i,k[2]=a,k[3]=0,k[4]=s,k[5]=n,k[6]=l,k[7]=0,k[8]=t,k[9]=r,k[10]=u,k[11]=0,k[12]=-(h*c+s*x+t*g),k[13]=-(i*c+n*x+r*g),k[14]=-(a*c+l*x+u*g),k[15]=1,k)}},80944:function(ee){ee.exports=function(z,e,M){var k=e[0],o=e[1],T=e[2],b=e[3],h=e[4],s=e[5],t=e[6],i=e[7],n=e[8],r=e[9],a=e[10],l=e[11],u=e[12],d=e[13],c=e[14],x=e[15],g=M[0],p=M[1],v=M[2],m=M[3];return z[0]=g*k+p*h+v*n+m*u,z[1]=g*o+p*s+v*r+m*d,z[2]=g*T+p*t+v*a+m*c,z[3]=g*b+p*i+v*l+m*x,g=M[4],p=M[5],v=M[6],m=M[7],z[4]=g*k+p*h+v*n+m*u,z[5]=g*o+p*s+v*r+m*d,z[6]=g*T+p*t+v*a+m*c,z[7]=g*b+p*i+v*l+m*x,g=M[8],p=M[9],v=M[10],m=M[11],z[8]=g*k+p*h+v*n+m*u,z[9]=g*o+p*s+v*r+m*d,z[10]=g*T+p*t+v*a+m*c,z[11]=g*b+p*i+v*l+m*x,g=M[12],p=M[13],v=M[14],m=M[15],z[12]=g*k+p*h+v*n+m*u,z[13]=g*o+p*s+v*r+m*d,z[14]=g*T+p*t+v*a+m*c,z[15]=g*b+p*i+v*l+m*x,z}},97688:function(ee){ee.exports=function(z,e,M,k,o,T,b){var h=1/(e-M),s=1/(k-o),t=1/(T-b);return z[0]=-2*h,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*s,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=2*t,z[11]=0,z[12]=(e+M)*h,z[13]=(o+k)*s,z[14]=(b+T)*t,z[15]=1,z}},51296:function(ee){ee.exports=function(z,e,M,k,o){var T=1/Math.tan(e/2),b=1/(k-o);return z[0]=T/M,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=T,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=(o+k)*b,z[11]=-1,z[12]=0,z[13]=0,z[14]=2*o*k*b,z[15]=0,z}},63688:function(ee){ee.exports=function(z,e,M,k){var o=Math.tan(e.upDegrees*Math.PI/180),T=Math.tan(e.downDegrees*Math.PI/180),b=Math.tan(e.leftDegrees*Math.PI/180),h=Math.tan(e.rightDegrees*Math.PI/180),s=2/(b+h),t=2/(o+T);return z[0]=s,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=t,z[6]=0,z[7]=0,z[8]=-(b-h)*s*.5,z[9]=(o-T)*t*.5,z[10]=k/(M-k),z[11]=-1,z[12]=0,z[13]=0,z[14]=k*M/(M-k),z[15]=0,z}},30016:function(ee){ee.exports=function(z,e,M,k){var o,T,b,h,s,t,i,n,r,a,l,u,d,c,x,g,p,v,m,y,_,f,S,w,E=k[0],P=k[1],C=k[2],O=Math.sqrt(E*E+P*P+C*C);return Math.abs(O)<1e-6?null:(E*=O=1/O,P*=O,C*=O,o=Math.sin(M),b=1-(T=Math.cos(M)),h=e[0],s=e[1],t=e[2],i=e[3],n=e[4],r=e[5],a=e[6],l=e[7],u=e[8],d=e[9],c=e[10],x=e[11],g=E*E*b+T,p=P*E*b+C*o,v=C*E*b-P*o,m=E*P*b-C*o,y=P*P*b+T,_=C*P*b+E*o,f=E*C*b+P*o,S=P*C*b-E*o,w=C*C*b+T,z[0]=h*g+n*p+u*v,z[1]=s*g+r*p+d*v,z[2]=t*g+a*p+c*v,z[3]=i*g+l*p+x*v,z[4]=h*m+n*y+u*_,z[5]=s*m+r*y+d*_,z[6]=t*m+a*y+c*_,z[7]=i*m+l*y+x*_,z[8]=h*f+n*S+u*w,z[9]=s*f+r*S+d*w,z[10]=t*f+a*S+c*w,z[11]=i*f+l*S+x*w,e!==z&&(z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z)}},15456:function(ee){ee.exports=function(z,e,M){var k=Math.sin(M),o=Math.cos(M),T=e[4],b=e[5],h=e[6],s=e[7],t=e[8],i=e[9],n=e[10],r=e[11];return e!==z&&(z[0]=e[0],z[1]=e[1],z[2]=e[2],z[3]=e[3],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z[4]=T*o+t*k,z[5]=b*o+i*k,z[6]=h*o+n*k,z[7]=s*o+r*k,z[8]=t*o-T*k,z[9]=i*o-b*k,z[10]=n*o-h*k,z[11]=r*o-s*k,z}},64840:function(ee){ee.exports=function(z,e,M){var k=Math.sin(M),o=Math.cos(M),T=e[0],b=e[1],h=e[2],s=e[3],t=e[8],i=e[9],n=e[10],r=e[11];return e!==z&&(z[4]=e[4],z[5]=e[5],z[6]=e[6],z[7]=e[7],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z[0]=T*o-t*k,z[1]=b*o-i*k,z[2]=h*o-n*k,z[3]=s*o-r*k,z[8]=T*k+t*o,z[9]=b*k+i*o,z[10]=h*k+n*o,z[11]=s*k+r*o,z}},4192:function(ee){ee.exports=function(z,e,M){var k=Math.sin(M),o=Math.cos(M),T=e[0],b=e[1],h=e[2],s=e[3],t=e[4],i=e[5],n=e[6],r=e[7];return e!==z&&(z[8]=e[8],z[9]=e[9],z[10]=e[10],z[11]=e[11],z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15]),z[0]=T*o+t*k,z[1]=b*o+i*k,z[2]=h*o+n*k,z[3]=s*o+r*k,z[4]=t*o-T*k,z[5]=i*o-b*k,z[6]=n*o-h*k,z[7]=r*o-s*k,z}},68152:function(ee){ee.exports=function(z,e,M){var k=M[0],o=M[1],T=M[2];return z[0]=e[0]*k,z[1]=e[1]*k,z[2]=e[2]*k,z[3]=e[3]*k,z[4]=e[4]*o,z[5]=e[5]*o,z[6]=e[6]*o,z[7]=e[7]*o,z[8]=e[8]*T,z[9]=e[9]*T,z[10]=e[10]*T,z[11]=e[11]*T,z[12]=e[12],z[13]=e[13],z[14]=e[14],z[15]=e[15],z}},89412:function(ee){ee.exports=function(z){return"mat4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+", "+z[9]+", "+z[10]+", "+z[11]+", "+z[12]+", "+z[13]+", "+z[14]+", "+z[15]+")"}},35176:function(ee){ee.exports=function(z,e,M){var k,o,T,b,h,s,t,i,n,r,a,l,u=M[0],d=M[1],c=M[2];return e===z?(z[12]=e[0]*u+e[4]*d+e[8]*c+e[12],z[13]=e[1]*u+e[5]*d+e[9]*c+e[13],z[14]=e[2]*u+e[6]*d+e[10]*c+e[14],z[15]=e[3]*u+e[7]*d+e[11]*c+e[15]):(k=e[0],o=e[1],T=e[2],b=e[3],h=e[4],s=e[5],t=e[6],i=e[7],n=e[8],r=e[9],a=e[10],l=e[11],z[0]=k,z[1]=o,z[2]=T,z[3]=b,z[4]=h,z[5]=s,z[6]=t,z[7]=i,z[8]=n,z[9]=r,z[10]=a,z[11]=l,z[12]=k*u+h*d+n*c+e[12],z[13]=o*u+s*d+r*c+e[13],z[14]=T*u+t*d+a*c+e[14],z[15]=b*u+i*d+l*c+e[15]),z}},86520:function(ee){ee.exports=function(z,e){if(z===e){var M=e[1],k=e[2],o=e[3],T=e[6],b=e[7],h=e[11];z[1]=e[4],z[2]=e[8],z[3]=e[12],z[4]=M,z[6]=e[9],z[7]=e[13],z[8]=k,z[9]=T,z[11]=e[14],z[12]=o,z[13]=b,z[14]=h}else z[0]=e[0],z[1]=e[4],z[2]=e[8],z[3]=e[12],z[4]=e[1],z[5]=e[5],z[6]=e[9],z[7]=e[13],z[8]=e[2],z[9]=e[6],z[10]=e[10],z[11]=e[14],z[12]=e[3],z[13]=e[7],z[14]=e[11],z[15]=e[15];return z}},23352:function(ee,z,e){"use strict";var M=e(42771),k=e(55616),o=e(28624),T=e(55212),b=e(60463),h=e(72160),s=e(33888),t=e(14144),i=e(51160),n=e(58908),r=e(65819),a=e(23464),l=e(63768),u=e(50896),d=e(71920),c=e(47520),x=e(308).nextPow2,g=new b,p=!1;if(document.body){var v=document.body.appendChild(document.createElement("div"));v.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(v).fontStretch&&(p=!0),document.body.removeChild(v)}var m=function(y){(function(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer})(y)?(y={regl:y},this.gl=y.regl._gl):this.gl=T(y),this.shader=g.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=y.regl||o({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),g.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(n(y)?y:{})};m.prototype.createShader=function(){var y=this.regl,_=y({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:y.prop("count"),offset:y.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:y.this("sizeBuffer")},width:{offset:0,stride:8,buffer:y.this("sizeBuffer")},char:y.this("charBuffer"),position:y.this("position")},uniforms:{atlasSize:function(f,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(f,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(f,S){return S.atlas.texture},charStep:function(f,S){return S.atlas.step},em:function(f,S){return S.atlas.em},color:y.prop("color"),opacity:y.prop("opacity"),viewport:y.this("viewportArray"),scale:y.this("scale"),align:y.prop("align"),baseline:y.prop("baseline"),translate:y.this("translate"),positionOffset:y.prop("positionOffset")},primitive:"points",viewport:y.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:y,draw:_,atlas:{}}},m.prototype.update=function(y){var _=this;if(typeof y=="string")y={text:y};else if(!y)return;(y=k(y,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(y.opacity)?this.opacity=y.opacity.map(function(he){return parseFloat(he)}):this.opacity=parseFloat(y.opacity)),y.viewport!=null&&(this.viewport=i(y.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),y.kerning!=null&&(this.kerning=y.kerning),y.offset!=null&&(typeof y.offset=="number"&&(y.offset=[y.offset,0]),this.positionOffset=c(y.offset)),y.direction&&(this.direction=y.direction),y.range&&(this.range=y.range,this.scale=[1/(y.range[2]-y.range[0]),1/(y.range[3]-y.range[1])],this.translate=[-y.range[0],-y.range[1]]),y.scale&&(this.scale=y.scale),y.translate&&(this.translate=y.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||y.font||(y.font=m.baseFontSize+"px sans-serif");var f,S=!1,w=!1;if(y.font&&(Array.isArray(y.font)?y.font:[y.font]).forEach(function(he,Se){if(typeof he=="string")try{he=M.parse(he)}catch(xe){he=M.parse(m.baseFontSize+"px "+he)}else he=M.parse(M.stringify(he));var ke=M.stringify({size:m.baseFontSize,family:he.family,stretch:p?he.stretch:void 0,variant:he.variant,weight:he.weight,style:he.style}),Me=r(he.size),Ee=Math.round(Me[0]*a(Me[1]));if(Ee!==_.fontSize[Se]&&(w=!0,_.fontSize[Se]=Ee),!(_.font[Se]&&ke==_.font[Se].baseString||(S=!0,_.font[Se]=m.fonts[ke],_.font[Se]))){var De=he.family.join(", "),fe=[he.style];he.style!=he.variant&&fe.push(he.variant),he.variant!=he.weight&&fe.push(he.weight),p&&he.weight!=he.stretch&&fe.push(he.stretch),_.font[Se]={baseString:ke,family:De,weight:he.weight,stretch:he.stretch,style:he.style,variant:he.variant,width:{},kerning:{},metrics:d(De,{origin:"top",fontSize:m.baseFontSize,fontStyle:fe.join(" ")})},m.fonts[ke]=_.font[Se]}}),(S||w)&&this.font.forEach(function(he,Se){var ke=M.stringify({size:_.fontSize[Se],family:he.family,stretch:p?he.stretch:void 0,variant:he.variant,weight:he.weight,style:he.style});if(_.fontAtlas[Se]=_.shader.atlas[ke],!_.fontAtlas[Se]){var Me=he.metrics;_.shader.atlas[ke]=_.fontAtlas[Se]={fontString:ke,step:2*Math.ceil(_.fontSize[Se]*Me.bottom*.5),em:_.fontSize[Se],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:_.regl.texture()}}y.text==null&&(y.text=_.text)}),typeof y.text=="string"&&y.position&&y.position.length>2){for(var E=Array(.5*y.position.length),P=0;P<E.length;P++)E[P]=y.text;y.text=E}if(y.text!=null||S){if(this.textOffsets=[0],Array.isArray(y.text)){this.count=y.text[0].length,this.counts=[this.count];for(var C=1;C<y.text.length;C++)this.textOffsets[C]=this.textOffsets[C-1]+y.text[C-1].length,this.count+=y.text[C].length,this.counts.push(y.text[C].length);this.text=y.text.join("")}else this.text=y.text,this.count=this.text.length,this.counts=[this.count];f=[],this.font.forEach(function(he,Se){m.atlasContext.font=he.baseString;for(var ke=_.fontAtlas[Se],Me=0;Me<_.text.length;Me++){var Ee=_.text.charAt(Me);if(ke.ids[Ee]==null&&(ke.ids[Ee]=ke.chars.length,ke.chars.push(Ee),f.push(Ee)),he.width[Ee]==null&&(he.width[Ee]=m.atlasContext.measureText(Ee).width/m.baseFontSize,_.kerning)){var De=[];for(var fe in he.width)De.push(fe+Ee,Ee+fe);u(he.kerning,l(he.family,{pairs:De}))}}})}if(y.position)if(y.position.length>2){for(var O=!y.position[0].length,R=t.mallocFloat(2*this.count),j=0,D=0;j<this.counts.length;j++){var N=this.counts[j];if(O)for(var W=0;W<N;W++)R[D++]=y.position[2*j],R[D++]=y.position[2*j+1];else for(var F=0;F<N;F++)R[D++]=y.position[j][0],R[D++]=y.position[j][1]}this.position.call?this.position({type:"float",data:R}):this.position=this.regl.buffer({type:"float",data:R}),t.freeFloat(R)}else this.position.destroy&&this.position.destroy(),this.position={constant:y.position};if(y.text||S){var U=t.mallocUint8(this.count),V=t.mallocFloat(2*this.count);this.textWidth=[];for(var te=0,J=0;te<this.counts.length;te++){for(var K=this.counts[te],X=this.font[te]||this.font[0],Z=this.fontAtlas[te]||this.fontAtlas[0],$=0;$<K;$++){var re=this.text.charAt(J),oe=this.text.charAt(J-1);if(U[J]=Z.ids[re],V[2*J]=X.width[re],$){var ie=V[2*J-2],ue=V[2*J],me=V[2*J-1]+.5*ie+.5*ue;if(this.kerning){var be=X.kerning[oe+re];be&&(me+=.001*be)}V[2*J+1]=me}else V[2*J+1]=.5*V[2*J];J++}this.textWidth.push(V.length?.5*V[2*J-2]+V[2*J-1]:0)}y.align||(y.align=this.align),this.charBuffer({data:U,type:"uint8",usage:"stream"}),this.sizeBuffer({data:V,type:"float",usage:"stream"}),t.freeUint8(U),t.freeFloat(V),f.length&&this.font.forEach(function(he,Se){var ke=_.fontAtlas[Se],Me=ke.step,Ee=Math.floor(m.maxAtlasSize/Me),De=Math.min(Ee,ke.chars.length),fe=Math.ceil(ke.chars.length/De),xe=x(De*Me),we=x(fe*Me);ke.width=xe,ke.height=we,ke.rows=fe,ke.cols=De,ke.em&&ke.texture({data:s({canvas:m.atlasCanvas,font:ke.fontString,chars:ke.chars,shape:[xe,we],step:[Me,Me]})})})}if(y.align&&(this.align=y.align,this.alignOffset=this.textWidth.map(function(he,Se){var ke=Array.isArray(_.align)?_.align.length>1?_.align[Se]:_.align[0]:_.align;if(typeof ke=="number")return ke;switch(ke){case"right":case"end":return-he;case"center":case"centre":case"middle":return .5*-he}return 0})),this.baseline==null&&y.baseline==null&&(y.baseline=0),y.baseline!=null&&(this.baseline=y.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(he,Se){var ke=(_.font[Se]||_.font[0]).metrics,Me=0;return Me+=.5*ke.bottom,-1*(Me+=typeof he=="number"?he-ke.baseline:-ke[he])})),y.color!=null)if(y.color||(y.color="transparent"),typeof y.color!="string"&&isNaN(y.color)){var ge;if(typeof y.color[0]=="number"&&y.color.length>this.counts.length){var de=y.color.length;ge=t.mallocUint8(de);for(var ve=(y.color.subarray||y.color.slice).bind(y.color),pe=0;pe<de;pe+=4)ge.set(h(ve(pe,pe+4),"uint8"),pe)}else{var _e=y.color.length;ge=t.mallocUint8(4*_e);for(var Te=0;Te<_e;Te++)ge.set(h(y.color[Te]||0,"uint8"),4*Te)}this.color=ge}else this.color=h(y.color,"uint8");if(y.position||y.text||y.color||y.baseline||y.align||y.font||y.offset||y.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var le=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(le);for(var ae=0;ae<this.batch.length;ae++)this.batch[ae]={count:this.counts.length>1?this.counts[ae]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ae]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ae,4*ae+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ae]:this.opacity,baseline:this.baselineOffset[ae]!=null?this.baselineOffset[ae]:this.baselineOffset[0],align:this.align?this.alignOffset[ae]!=null?this.alignOffset[ae]:this.alignOffset[0]:0,atlas:this.fontAtlas[ae]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ae,2*ae+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},m.prototype.destroy=function(){},m.prototype.kerning=!0,m.prototype.position={constant:new Float32Array(2)},m.prototype.translate=null,m.prototype.scale=null,m.prototype.font=null,m.prototype.text="",m.prototype.positionOffset=[0,0],m.prototype.opacity=1,m.prototype.color=new Uint8Array([0,0,0,255]),m.prototype.alignOffset=[0,0],m.maxAtlasSize=1024,m.atlasCanvas=document.createElement("canvas"),m.atlasContext=m.atlasCanvas.getContext("2d",{alpha:!1}),m.baseFontSize=64,m.fonts={},ee.exports=m},55212:function(ee,z,e){"use strict";var M=e(55616);function k(b){if(b.container)if(b.container==document.body)document.body.style.width||(b.canvas.width=b.width||b.pixelRatio*e.g.innerWidth),document.body.style.height||(b.canvas.height=b.height||b.pixelRatio*e.g.innerHeight);else{var h=b.container.getBoundingClientRect();b.canvas.width=b.width||h.right-h.left,b.canvas.height=b.height||h.bottom-h.top}}function o(b){return typeof b.getContext=="function"&&"width"in b&&"height"in b}function T(){var b=document.createElement("canvas");return b.style.position="absolute",b.style.top=0,b.style.left=0,b}ee.exports=function(b){var h;if(b?typeof b=="string"&&(b={container:b}):b={},(b=o(b)||typeof(h=b).nodeName=="string"&&typeof h.appendChild=="function"&&typeof h.getBoundingClientRect=="function"?{container:b}:function(t){return typeof t.drawArrays=="function"||typeof t.drawElements=="function"}(b)?{gl:b}:M(b,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(b.pixelRatio=e.g.pixelRatio||1),b.gl)return b.gl;if(b.canvas&&(b.container=b.canvas.parentNode),b.container){if(typeof b.container=="string"){var s=document.querySelector(b.container);if(!s)throw Error("Element "+b.container+" is not found");b.container=s}o(b.container)?(b.canvas=b.container,b.container=b.canvas.parentNode):b.canvas||(b.canvas=T(),b.container.appendChild(b.canvas),k(b))}else if(!b.canvas){if(typeof document=="undefined")throw Error("Not DOM environment. Use headless-gl.");b.container=document.body||document.documentElement,b.canvas=T(),b.container.appendChild(b.canvas),k(b)}return b.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{b.gl=b.canvas.getContext(t,b.attrs)}catch(i){}return b.gl}),b.gl}},26444:function(ee){ee.exports=function(z){typeof z=="string"&&(z=[z]);for(var e=[].slice.call(arguments,1),M=[],k=0;k<z.length-1;k++)M.push(z[k],e[k]||"");return M.push(z[k]),M.join("")}},2304:function(ee,z,e){"use strict";var M=e(53664)("%Object.getOwnPropertyDescriptor%",!0);if(M)try{M([],"length")}catch(k){M=null}ee.exports=M},52264:function(ee,z,e){"use strict";var M,k=e(24200);M=typeof e.g.matchMedia=="function"?!e.g.matchMedia("(hover: none)").matches:k,ee.exports=M},89184:function(ee,z,e){"use strict";var M=e(24200);ee.exports=M&&function(){var k=!1;try{var o=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch(T){k=!1}return k}()},39640:function(ee,z,e){"use strict";var M=e(53664)("%Object.defineProperty%",!0),k=function(){if(M)try{return M({},"a",{value:1}),!0}catch(o){return!1}return!1};k.hasArrayLengthDefineBug=function(){if(!k())return null;try{return M([],"length",{value:1}).length!==1}catch(o){return!0}},ee.exports=k},69572:function(ee){"use strict";var z={foo:{}},e=Object;ee.exports=function(){return{__proto__:z}.foo===z.foo&&!({__proto__:null}instanceof e)}},71080:function(ee,z,e){"use strict";var M=typeof Symbol!="undefined"&&Symbol,k=e(89320);ee.exports=function(){return typeof M=="function"&&typeof Symbol=="function"&&typeof M("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&k()}},89320:function(ee){"use strict";ee.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var z={},e=Symbol("test"),M=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(M)!=="[object Symbol]")return!1;for(e in z[e]=42,z)return!1;if(typeof Object.keys=="function"&&Object.keys(z).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(z).length!==0)return!1;var k=Object.getOwnPropertySymbols(z);if(k.length!==1||k[0]!==e||!Object.prototype.propertyIsEnumerable.call(z,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(z,e);if(o.value!==42||o.enumerable!==!0)return!1}return!0}},46672:function(ee,z,e){"use strict";var M=e(89320);ee.exports=function(){return M()&&!!Symbol.toStringTag}},92064:function(ee,z,e){"use strict";var M=Function.prototype.call,k=Object.prototype.hasOwnProperty,o=e(8844);ee.exports=o.call(M,k)},35984:function(ee,z){z.read=function(e,M,k,o,T){var b,h,s=8*T-o-1,t=(1<<s)-1,i=t>>1,n=-7,r=k?T-1:0,a=k?-1:1,l=e[M+r];for(r+=a,b=l&(1<<-n)-1,l>>=-n,n+=s;n>0;b=256*b+e[M+r],r+=a,n-=8);for(h=b&(1<<-n)-1,b>>=-n,n+=o;n>0;h=256*h+e[M+r],r+=a,n-=8);if(b===0)b=1-i;else{if(b===t)return h?NaN:1/0*(l?-1:1);h+=Math.pow(2,o),b-=i}return(l?-1:1)*h*Math.pow(2,b-o)},z.write=function(e,M,k,o,T,b){var h,s,t,i=8*b-T-1,n=(1<<i)-1,r=n>>1,a=T===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=o?0:b-1,u=o?1:-1,d=M<0||M===0&&1/M<0?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(s=isNaN(M)?1:0,h=n):(h=Math.floor(Math.log(M)/Math.LN2),M*(t=Math.pow(2,-h))<1&&(h--,t*=2),(M+=h+r>=1?a/t:a*Math.pow(2,1-r))*t>=2&&(h++,t/=2),h+r>=n?(s=0,h=n):h+r>=1?(s=(M*t-1)*Math.pow(2,T),h+=r):(s=M*Math.pow(2,r-1)*Math.pow(2,T),h=0));T>=8;e[k+l]=255&s,l+=u,s/=256,T-=8);for(h=h<<T|s,i+=T;i>0;e[k+l]=255&h,l+=u,h/=256,i-=8);e[k+l-u]|=128*d}},6768:function(ee){typeof Object.create=="function"?ee.exports=function(z,e){e&&(z.super_=e,z.prototype=Object.create(e.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}))}:ee.exports=function(z,e){if(e){z.super_=e;var M=function(){};M.prototype=e.prototype,z.prototype=new M,z.prototype.constructor=z}}},91148:function(ee,z,e){"use strict";var M=e(46672)(),k=e(99676)("Object.prototype.toString"),o=function(h){return!(M&&h&&typeof h=="object"&&Symbol.toStringTag in h)&&k(h)==="[object Arguments]"},T=function(h){return!!o(h)||h!==null&&typeof h=="object"&&typeof h.length=="number"&&h.length>=0&&k(h)!=="[object Array]"&&k(h.callee)==="[object Function]"},b=function(){return o(arguments)}();o.isLegacyArguments=T,ee.exports=b?o:T},24200:function(ee){ee.exports=!0},90720:function(ee){"use strict";var z,e,M=Function.prototype.toString,k=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof k=="function"&&typeof Object.defineProperty=="function")try{z=Object.defineProperty({},"length",{get:function(){throw e}}),e={},k(function(){throw 42},null,z)}catch(r){r!==e&&(k=null)}else k=null;var o=/^\s*class\b/,T=function(r){try{var a=M.call(r);return o.test(a)}catch(l){return!1}},b=function(r){try{return!T(r)&&(M.call(r),!0)}catch(a){return!1}},h=Object.prototype.toString,s=typeof Symbol=="function"&&!!Symbol.toStringTag,t=!(0 in[,]),i=function(){return!1};if(typeof document=="object"){var n=document.all;h.call(n)===h.call(document.all)&&(i=function(r){if((t||!r)&&(r===void 0||typeof r=="object"))try{var a=h.call(r);return(a==="[object HTMLAllCollection]"||a==="[object HTML document.all class]"||a==="[object HTMLCollection]"||a==="[object Object]")&&r("")==null}catch(l){}return!1})}ee.exports=k?function(r){if(i(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;try{k(r,null,z)}catch(a){if(a!==e)return!1}return!T(r)&&b(r)}:function(r){if(i(r))return!0;if(!r||typeof r!="function"&&typeof r!="object")return!1;if(s)return b(r);if(T(r))return!1;var a=h.call(r);return!(a!=="[object Function]"&&a!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(a))&&b(r)}},84420:function(ee,z,e){"use strict";var M,k=Object.prototype.toString,o=Function.prototype.toString,T=/^\s*(?:function)?\*/,b=e(46672)(),h=Object.getPrototypeOf;ee.exports=function(s){if(typeof s!="function")return!1;if(T.test(o.call(s)))return!0;if(!b)return k.call(s)==="[object GeneratorFunction]";if(!h)return!1;if(M===void 0){var t=function(){if(!b)return!1;try{return Function("return function*() {}")()}catch(i){}}();M=!!t&&h(t)}return h(s)===M}},96604:function(ee){"use strict";ee.exports=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(ee){"use strict";ee.exports=function(z){return z!=z}},1560:function(ee,z,e){"use strict";var M=e(57916),k=e(81288),o=e(85992),T=e(57740),b=e(59736),h=M(T(),Number);k(h,{getPolyfill:T,implementation:o,shim:b}),ee.exports=h},57740:function(ee,z,e){"use strict";var M=e(85992);ee.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:M}},59736:function(ee,z,e){"use strict";var M=e(81288),k=e(57740);ee.exports=function(){var o=k();return M(Number,{isNaN:o},{isNaN:function(){return Number.isNaN!==o}}),o}},18400:function(ee){"use strict";ee.exports=function(z){var e=typeof z;return z!==null&&(e==="object"||e==="function")}},58908:function(ee){"use strict";var z=Object.prototype.toString;ee.exports=function(e){var M;return z.call(e)==="[object Object]"&&((M=Object.getPrototypeOf(e))===null||M===Object.getPrototypeOf({}))}},94576:function(ee){"use strict";ee.exports=function(z){for(var e,M=z.length,k=0;k<M;k++)if(((e=z.charCodeAt(k))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},53520:function(ee){"use strict";ee.exports=function(z){return typeof z=="string"&&(z=z.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(z)&&/[\dz]$/i.test(z)&&z.length>4))}},7728:function(ee,z,e){"use strict";var M=e(46492),k=e(63436),o=e(99676),T=o("Object.prototype.toString"),b=e(46672)(),h=e(2304),s=typeof globalThis=="undefined"?e.g:globalThis,t=k(),i=o("Array.prototype.indexOf",!0)||function(l,u){for(var d=0;d<l.length;d+=1)if(l[d]===u)return d;return-1},n=o("String.prototype.slice"),r={},a=Object.getPrototypeOf;b&&h&&a&&M(t,function(l){var u=new s[l];if(Symbol.toStringTag in u){var d=a(u),c=h(d,Symbol.toStringTag);if(!c){var x=a(d);c=h(x,Symbol.toStringTag)}r[l]=c.get}}),ee.exports=function(l){if(!l||typeof l!="object")return!1;if(!b||!(Symbol.toStringTag in l)){var u=n(T(l),8,-1);return i(t,u)>-1}return!!h&&function(d){var c=!1;return M(r,function(x,g){if(!c)try{c=x.call(d)===g}catch(p){}}),c}(l)}},76244:function(ee){"use strict";ee.exports=Math.log2||function(z){return Math.log(z)*Math.LOG2E}},62644:function(ee,z,e){"use strict";ee.exports=function(k,o){o||(o=k,k=window);var T=0,b=0,h=0,s={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function i(p){var v=!1;return"altKey"in p&&(v=v||p.altKey!==s.alt,s.alt=!!p.altKey),"shiftKey"in p&&(v=v||p.shiftKey!==s.shift,s.shift=!!p.shiftKey),"ctrlKey"in p&&(v=v||p.ctrlKey!==s.control,s.control=!!p.ctrlKey),"metaKey"in p&&(v=v||p.metaKey!==s.meta,s.meta=!!p.metaKey),v}function n(p,v){var m=M.x(v),y=M.y(v);"buttons"in v&&(p=0|v.buttons),(p!==T||m!==b||y!==h||i(v))&&(T=0|p,b=m||0,h=y||0,o&&o(T,b,h,s))}function r(p){n(0,p)}function a(){(T||b||h||s.shift||s.alt||s.meta||s.control)&&(b=h=0,T=0,s.shift=s.alt=s.control=s.meta=!1,o&&o(0,0,0,s))}function l(p){i(p)&&o&&o(T,b,h,s)}function u(p){M.buttons(p)===0?n(0,p):n(T,p)}function d(p){n(T|M.buttons(p),p)}function c(p){n(T&~M.buttons(p),p)}function x(){t||(t=!0,k.addEventListener("mousemove",u),k.addEventListener("mousedown",d),k.addEventListener("mouseup",c),k.addEventListener("mouseleave",r),k.addEventListener("mouseenter",r),k.addEventListener("mouseout",r),k.addEventListener("mouseover",r),k.addEventListener("blur",a),k.addEventListener("keyup",l),k.addEventListener("keydown",l),k.addEventListener("keypress",l),k!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}x();var g={element:k};return Object.defineProperties(g,{enabled:{get:function(){return t},set:function(p){p?x():t&&(t=!1,k.removeEventListener("mousemove",u),k.removeEventListener("mousedown",d),k.removeEventListener("mouseup",c),k.removeEventListener("mouseleave",r),k.removeEventListener("mouseenter",r),k.removeEventListener("mouseout",r),k.removeEventListener("mouseover",r),k.removeEventListener("blur",a),k.removeEventListener("keyup",l),k.removeEventListener("keydown",l),k.removeEventListener("keypress",l),k!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return b},enumerable:!0},y:{get:function(){return h},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),g};var M=e(93784)},29128:function(ee){var z={left:0,top:0};ee.exports=function(e,M,k){M=M||e.currentTarget||e.srcElement,Array.isArray(k)||(k=[0,0]);var o,T=e.clientX||0,b=e.clientY||0,h=(o=M)===window||o===document||o===document.body?z:o.getBoundingClientRect();return k[0]=T-h.left,k[1]=b-h.top,k}},93784:function(ee,z){"use strict";function e(M){return M.target||M.srcElement||window}z.buttons=function(M){if(typeof M=="object"){if("buttons"in M)return M.buttons;if("which"in M){if((k=M.which)===2)return 4;if(k===3)return 2;if(k>0)return 1<<k-1}else if("button"in M){var k;if((k=M.button)===1)return 4;if(k===2)return 2;if(k>=0)return 1<<k}}return 0},z.element=e,z.x=function(M){if(typeof M=="object"){if("offsetX"in M)return M.offsetX;var k=e(M).getBoundingClientRect();return M.clientX-k.left}return 0},z.y=function(M){if(typeof M=="object"){if("offsetY"in M)return M.offsetY;var k=e(M).getBoundingClientRect();return M.clientY-k.top}return 0}},97264:function(ee,z,e){"use strict";var M=e(23464);ee.exports=function(k,o,T){typeof k=="function"&&(T=!!o,o=k,k=window);var b=M("ex",k),h=function(s){T&&s.preventDefault();var t=s.deltaX||0,i=s.deltaY||0,n=s.deltaZ||0,r=1;switch(s.deltaMode){case 1:r=b;break;case 2:r=window.innerHeight}if(i*=r,n*=r,(t*=r)||i||n)return o(t,i,n,s)};return k.addEventListener("wheel",h),h}},88324:function(ee,z,e){var M;(function(k,o,T){o[k]=o[k]||function(){"use strict";var b,h,s,t=Object.prototype.toString,i=typeof setImmediate!="undefined"?function(m){return setImmediate(m)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(m,y,_,f){return Object.defineProperty(m,y,{value:_,writable:!0,configurable:f!==!1})}}catch(m){b=function(y,_,f){return y[_]=f,y}}function n(m,y){s.add(m,y),h||(h=i(s.drain))}function r(m){var y,_=typeof m;return m==null||_!="object"&&_!="function"||(y=m.then),typeof y=="function"&&y}function a(){for(var m=0;m<this.chain.length;m++)l(this,this.state===1?this.chain[m].success:this.chain[m].failure,this.chain[m]);this.chain.length=0}function l(m,y,_){var f,S;try{y===!1?_.reject(m.msg):(f=y===!0?m.msg:y.call(void 0,m.msg))===_.promise?_.reject(TypeError("Promise-chain cycle")):(S=r(f))?S.call(f,_.resolve,_.reject):_.resolve(f)}catch(w){_.reject(w)}}function u(m){var y,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(y=r(m))?n(function(){var f=new x(_);try{y.call(m,function(){u.apply(f,arguments)},function(){d.apply(f,arguments)})}catch(S){d.call(f,S)}}):(_.msg=m,_.state=1,_.chain.length>0&&n(a,_))}catch(f){d.call(new x(_),f)}}}function d(m){var y=this;y.triggered||(y.triggered=!0,y.def&&(y=y.def),y.msg=m,y.state=2,y.chain.length>0&&n(a,y))}function c(m,y,_,f){for(var S=0;S<y.length;S++)(function(w){m.resolve(y[w]).then(function(E){_(w,E)},f)})(S)}function x(m){this.def=m,this.triggered=!1}function g(m){this.promise=m,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(m){if(typeof m!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var y=new g(this);this.then=function(_,f){var S={success:typeof _!="function"||_,failure:typeof f=="function"&&f};return S.promise=new this.constructor(function(w,E){if(typeof w!="function"||typeof E!="function")throw TypeError("Not a function");S.resolve=w,S.reject=E}),y.chain.push(S),y.state!==0&&n(a,y),S.promise},this.catch=function(_){return this.then(void 0,_)};try{m.call(void 0,function(_){u.call(y,_)},function(_){d.call(y,_)})}catch(_){d.call(y,_)}}s=function(){var m,y,_;function f(S,w){this.fn=S,this.self=w,this.next=void 0}return{add:function(S,w){_=new f(S,w),y?y.next=_:m=_,y=_,_=void 0},drain:function(){var S=m;for(m=y=h=void 0;S;)S.fn.call(S.self),S=S.next}}}();var v=b({},"constructor",p,!1);return p.prototype=v,b(v,"__NPO__",0,!1),b(p,"resolve",function(m){return m&&typeof m=="object"&&m.__NPO__===1?m:new this(function(y,_){if(typeof y!="function"||typeof _!="function")throw TypeError("Not a function");y(m)})}),b(p,"reject",function(m){return new this(function(y,_){if(typeof y!="function"||typeof _!="function")throw TypeError("Not a function");_(m)})}),b(p,"all",function(m){var y=this;return t.call(m)!="[object Array]"?y.reject(TypeError("Not an array")):m.length===0?y.resolve([]):new y(function(_,f){if(typeof _!="function"||typeof f!="function")throw TypeError("Not a function");var S=m.length,w=Array(S),E=0;c(y,m,function(P,C){w[P]=C,++E===S&&_(w)},f)})}),b(p,"race",function(m){var y=this;return t.call(m)!="[object Array]"?y.reject(TypeError("Not an array")):new y(function(_,f){if(typeof _!="function"||typeof f!="function")throw TypeError("Not a function");c(y,m,function(S,w){_(w)},f)})}),p}(),ee.exports?ee.exports=o[k]:(M=function(){return o[k]}.call(z,e,z,ee))===void 0||(ee.exports=M)})("Promise",e.g!==void 0?e.g:this)},48816:function(ee){var z=Math.PI,e=b(120);function M(h,s,t,i){return["C",h,s,t,i,t,i]}function k(h,s,t,i,n,r){return["C",h/3+.6666666666666666*t,s/3+.6666666666666666*i,n/3+.6666666666666666*t,r/3+.6666666666666666*i,n,r]}function o(h,s,t,i,n,r,a,l,u,d){if(d)S=d[0],w=d[1],_=d[2],f=d[3];else{var c=T(h,s,-n);h=c.x,s=c.y;var x=(h-(l=(c=T(l,u,-n)).x))/2,g=(s-(u=c.y))/2,p=x*x/(t*t)+g*g/(i*i);p>1&&(t*=p=Math.sqrt(p),i*=p);var v=t*t,m=i*i,y=(r==a?-1:1)*Math.sqrt(Math.abs((v*m-v*g*g-m*x*x)/(v*g*g+m*x*x)));y==1/0&&(y=1);var _=y*t*g/i+(h+l)/2,f=y*-i*x/t+(s+u)/2,S=Math.asin(((s-f)/i).toFixed(9)),w=Math.asin(((u-f)/i).toFixed(9));(S=h<_?z-S:S)<0&&(S=2*z+S),(w=l<_?z-w:w)<0&&(w=2*z+w),a&&S>w&&(S-=2*z),!a&&w>S&&(w-=2*z)}if(Math.abs(w-S)>e){var E=w,P=l,C=u;w=S+e*(a&&w>S?1:-1);var O=o(l=_+t*Math.cos(w),u=f+i*Math.sin(w),t,i,n,0,a,P,C,[w,E,_,f])}var R=Math.tan((w-S)/4),j=4/3*t*R,D=4/3*i*R,N=[2*h-(h+j*Math.sin(S)),2*s-(s-D*Math.cos(S)),l+j*Math.sin(w),u-D*Math.cos(w),l,u];if(d)return N;O&&(N=N.concat(O));for(var W=0;W<N.length;){var F=T(N[W],N[W+1],n);N[W++]=F.x,N[W++]=F.y}return N}function T(h,s,t){return{x:h*Math.cos(t)-s*Math.sin(t),y:h*Math.sin(t)+s*Math.cos(t)}}function b(h){return h*(z/180)}ee.exports=function(h){for(var s,t=[],i=0,n=0,r=0,a=0,l=null,u=null,d=0,c=0,x=0,g=h.length;x<g;x++){var p=h[x],v=p[0];switch(v){case"M":r=p[1],a=p[2];break;case"A":(p=o(d,c,p[1],p[2],b(p[3]),p[4],p[5],p[6],p[7])).unshift("C"),p.length>7&&(t.push(p.splice(0,7)),p.unshift("C"));break;case"S":var m=d,y=c;s!="C"&&s!="S"||(m+=m-i,y+=y-n),p=["C",m,y,p[1],p[2],p[3],p[4]];break;case"T":s=="Q"||s=="T"?(l=2*d-l,u=2*c-u):(l=d,u=c),p=k(d,c,l,u,p[1],p[2]);break;case"Q":l=p[1],u=p[2],p=k(d,c,p[1],p[2],p[3],p[4]);break;case"L":p=M(d,c,p[1],p[2]);break;case"H":p=M(d,c,p[1],c);break;case"V":p=M(d,c,d,p[1]);break;case"Z":p=M(d,c,r,a)}s=v,d=p[p.length-2],c=p[p.length-1],p.length>4?(i=p[p.length-4],n=p[p.length-3]):(i=d,n=c),t.push(p)}return t}},50896:function(ee){"use strict";var z=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;ee.exports=function(){try{if(!Object.assign)return!1;var k=new String("abc");if(k[5]="de",Object.getOwnPropertyNames(k)[0]==="5")return!1;for(var o={},T=0;T<10;T++)o["_"+String.fromCharCode(T)]=T;if(Object.getOwnPropertyNames(o).map(function(h){return o[h]}).join("")!=="0123456789")return!1;var b={};return"abcdefghijklmnopqrst".split("").forEach(function(h){b[h]=h}),Object.keys(Object.assign({},b)).join("")==="abcdefghijklmnopqrst"}catch(h){return!1}}()?Object.assign:function(k,o){for(var T,b,h=function(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}(k),s=1;s<arguments.length;s++){for(var t in T=Object(arguments[s]))e.call(T,t)&&(h[t]=T[t]);if(z){b=z(T);for(var i=0;i<b.length;i++)M.call(T,b[i])&&(h[b[i]]=T[b[i]])}}return h}},76835:function(ee){"use strict";var z=function(e){return e!=e};ee.exports=function(e,M){return e===0&&M===0?1/e==1/M:e===M||!(!z(e)||!z(M))}},39896:function(ee,z,e){"use strict";var M=e(81288),k=e(57916),o=e(76835),T=e(66148),b=e(16408),h=k(T(),Object);M(h,{getPolyfill:T,implementation:o,shim:b}),ee.exports=h},66148:function(ee,z,e){"use strict";var M=e(76835);ee.exports=function(){return typeof Object.is=="function"?Object.is:M}},16408:function(ee,z,e){"use strict";var M=e(66148),k=e(81288);ee.exports=function(){var o=M();return k(Object,{is:o},{is:function(){return Object.is!==o}}),o}},32764:function(ee,z,e){"use strict";var M;if(!Object.keys){var k=Object.prototype.hasOwnProperty,o=Object.prototype.toString,T=e(97344),b=Object.prototype.propertyIsEnumerable,h=!b.call({toString:null},"toString"),s=b.call(function(){},"prototype"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=function(a){var l=a.constructor;return l&&l.prototype===a},n={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},r=function(){if(typeof window=="undefined")return!1;for(var a in window)try{if(!n["$"+a]&&k.call(window,a)&&window[a]!==null&&typeof window[a]=="object")try{i(window[a])}catch(l){return!0}}catch(l){return!0}return!1}();M=function(a){var l=a!==null&&typeof a=="object",u=o.call(a)==="[object Function]",d=T(a),c=l&&o.call(a)==="[object String]",x=[];if(!l&&!u&&!d)throw new TypeError("Object.keys called on a non-object");var g=s&&u;if(c&&a.length>0&&!k.call(a,0))for(var p=0;p<a.length;++p)x.push(String(p));if(d&&a.length>0)for(var v=0;v<a.length;++v)x.push(String(v));else for(var m in a)g&&m==="prototype"||!k.call(a,m)||x.push(String(m));if(h)for(var y=function(f){if(typeof window=="undefined"||!r)return i(f);try{return i(f)}catch(S){return!1}}(a),_=0;_<t.length;++_)y&&t[_]==="constructor"||!k.call(a,t[_])||x.push(t[_]);return x}}ee.exports=M},41820:function(ee,z,e){"use strict";var M=Array.prototype.slice,k=e(97344),o=Object.keys,T=o?function(h){return o(h)}:e(32764),b=Object.keys;T.shim=function(){if(Object.keys){var h=function(){var s=Object.keys(arguments);return s&&s.length===arguments.length}(1,2);h||(Object.keys=function(s){return k(s)?b(M.call(s)):b(s)})}else Object.keys=T;return Object.keys||T},ee.exports=T},97344:function(ee){"use strict";var z=Object.prototype.toString;ee.exports=function(e){var M=z.call(e),k=M==="[object Arguments]";return k||(k=M!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&z.call(e.callee)==="[object Function]"),k}},32868:function(ee){"use strict";function z(k,o){if(typeof k!="string")return[k];var T=[k];typeof o=="string"||Array.isArray(o)?o={brackets:o}:o||(o={});var b=o.brackets?Array.isArray(o.brackets)?o.brackets:[o.brackets]:["{}","[]","()"],h=o.escape||"___",s=!!o.flat;b.forEach(function(i){var n=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),r=[];function a(l,u,d){var c=T.push(l.slice(i[0].length,-i[1].length))-1;return r.push(c),h+c+h}T.forEach(function(l,u){for(var d,c=0;l!=d;)if(d=l,l=l.replace(n,a),c++>1e4)throw Error("References have circular dependency. Please, check them.");T[u]=l}),r=r.reverse(),T=T.map(function(l){return r.forEach(function(u){l=l.replace(new RegExp("(\\"+h+u+"\\"+h+")","g"),i[0]+"$1"+i[1])}),l})});var t=new RegExp("\\"+h+"([0-9]+)\\"+h);return s?T:function i(n,r,a){for(var l,u=[],d=0;l=t.exec(n);){if(d++>1e4)throw Error("Circular references in parenthesis");u.push(n.slice(0,l.index)),u.push(i(r[l[1]],r)),n=n.slice(l.index+l[0].length)}return u.push(n),u}(T[0],T)}function e(k,o){if(o&&o.flat){var T,b=o&&o.escape||"___",h=k[0];if(!h)return"";for(var s=new RegExp("\\"+b+"([0-9]+)\\"+b),t=0;h!=T;){if(t++>1e4)throw Error("Circular references in "+k);T=h,h=h.replace(s,i)}return h}return k.reduce(function n(r,a){return Array.isArray(a)&&(a=a.reduce(n,"")),r+a},"");function i(n,r){if(k[r]==null)throw Error("Reference "+r+"is undefined");return k[r]}}function M(k,o){return Array.isArray(k)?e(k,o):z(k,o)}M.parse=z,M.stringify=e,ee.exports=M},51160:function(ee,z,e){"use strict";var M=e(55616);ee.exports=function(k){var o;return arguments.length>1&&(k=arguments),typeof k=="string"?k=k.split(/\s/).map(parseFloat):typeof k=="number"&&(k=[k]),k.length&&typeof k[0]=="number"?o=k.length===1?{width:k[0],height:k[0],x:0,y:0}:k.length===2?{width:k[0],height:k[1],x:0,y:0}:{x:k[0],y:k[1],width:k[2]-k[0]||0,height:k[3]-k[1]||0}:k&&(o={x:(k=M(k,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:k.top||0},k.width==null?k.right?o.width=k.right-o.x:o.width=0:o.width=k.width,k.height==null?k.bottom?o.height=k.bottom-o.y:o.height=0:o.height=k.height),o}},21984:function(ee){ee.exports=function(k){var o=[];return k.replace(e,function(T,b,h){var s=b.toLowerCase();for(h=function(t){var i=t.match(M);return i?i.map(Number):[]}(h),s=="m"&&h.length>2&&(o.push([b].concat(h.splice(0,2))),s="l",b=b=="m"?"l":"L");;){if(h.length==z[s])return h.unshift(b),o.push(h);if(h.length<z[s])throw new Error("malformed path data");o.push([b].concat(h.splice(0,z[s])))}}),o};var z={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/gi,M=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},65819:function(ee){ee.exports=function(z,e){e||(e=[0,""]),z=String(z);var M=parseFloat(z,10);return e[0]=M,e[1]=z.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},41984:function(ee,z,e){var M=e(4168);(function(){var k,o,T,b,h,s;typeof performance!="undefined"&&performance!==null&&performance.now?ee.exports=function(){return performance.now()}:M!=null&&M.hrtime?(ee.exports=function(){return(k()-h)/1e6},o=M.hrtime,b=(k=function(){var t;return 1e9*(t=o())[0]+t[1]})(),s=1e9*M.uptime(),h=b-s):Date.now?(ee.exports=function(){return Date.now()-T},T=Date.now()):(ee.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},55616:function(ee){"use strict";ee.exports=function(M,k,o){var T,b,h={};if(typeof k=="string"&&(k=e(k)),Array.isArray(k)){var s={};for(b=0;b<k.length;b++)s[k[b]]=!0;k=s}for(T in k)k[T]=e(k[T]);var t={};for(T in k){var i=k[T];if(Array.isArray(i))for(b=0;b<i.length;b++){var n=i[b];if(o&&(t[n]=!0),n in M){if(h[T]=M[n],o)for(var r=b;r<i.length;r++)t[i[r]]=!0;break}}else T in M&&(k[T]&&(h[T]=M[T]),o&&(t[T]=!0))}if(o)for(T in M)t[T]||(h[T]=M[T]);return h};var z={};function e(M){return z[M]?z[M]:(typeof M=="string"&&(M=z[M]=M.split(/\s*,\s*|\s+/)),M)}},61456:function(ee){ee.exports=function(z,e,M,k){var o=z[0],T=z[1],b=!1;M===void 0&&(M=0),k===void 0&&(k=e.length);for(var h=k-M,s=0,t=h-1;s<h;t=s++){var i=e[s+M][0],n=e[s+M][1],r=e[t+M][0],a=e[t+M][1];n>T!=a>T&&o<(r-i)*(T-n)/(a-n)+i&&(b=!b)}return b}},14756:function(ee,z,e){var M,k=e(7688),o=e(28648),T=e(72200),b=e(11403),h=e(82368),s=e(17792),t=!1,i=o();function n(r,a,l){var u=M.segments(r),d=M.segments(a),c=l(M.combine(u,d));return M.polygon(c)}M={buildLog:function(r){return r===!0?t=k():r===!1&&(t=!1),t!==!1&&t.list},epsilon:function(r){return i.epsilon(r)},segments:function(r){var a=T(!0,i,t);return r.regions.forEach(a.addRegion),{segments:a.calculate(r.inverted),inverted:r.inverted}},combine:function(r,a){return{combined:T(!1,i,t).calculate(r.segments,r.inverted,a.segments,a.inverted),inverted1:r.inverted,inverted2:a.inverted}},selectUnion:function(r){return{segments:h.union(r.combined,t),inverted:r.inverted1||r.inverted2}},selectIntersect:function(r){return{segments:h.intersect(r.combined,t),inverted:r.inverted1&&r.inverted2}},selectDifference:function(r){return{segments:h.difference(r.combined,t),inverted:r.inverted1&&!r.inverted2}},selectDifferenceRev:function(r){return{segments:h.differenceRev(r.combined,t),inverted:!r.inverted1&&r.inverted2}},selectXor:function(r){return{segments:h.xor(r.combined,t),inverted:r.inverted1!==r.inverted2}},polygon:function(r){return{regions:b(r.segments,i,t),inverted:r.inverted}},polygonFromGeoJSON:function(r){return s.toPolygon(M,r)},polygonToGeoJSON:function(r){return s.fromPolygon(M,i,r)},union:function(r,a){return n(r,a,M.selectUnion)},intersect:function(r,a){return n(r,a,M.selectIntersect)},difference:function(r,a){return n(r,a,M.selectDifference)},differenceRev:function(r,a){return n(r,a,M.selectDifferenceRev)},xor:function(r,a){return n(r,a,M.selectXor)}},typeof window=="object"&&(window.PolyBool=M),ee.exports=M},7688:function(ee){ee.exports=function(){var z,e=0,M=!1;function k(o,T){return z.list.push({type:o,data:T?JSON.parse(JSON.stringify(T)):void 0}),z}return z={list:[],segmentId:function(){return e++},checkIntersection:function(o,T){return k("check",{seg1:o,seg2:T})},segmentChop:function(o,T){return k("div_seg",{seg:o,pt:T}),k("chop",{seg:o,pt:T})},statusRemove:function(o){return k("pop_seg",{seg:o})},segmentUpdate:function(o){return k("seg_update",{seg:o})},segmentNew:function(o,T){return k("new_seg",{seg:o,primary:T})},segmentRemove:function(o){return k("rem_seg",{seg:o})},tempStatus:function(o,T,b){return k("temp_status",{seg:o,above:T,below:b})},rewind:function(o){return k("rewind",{seg:o})},status:function(o,T,b){return k("status",{seg:o,above:T,below:b})},vert:function(o){return o===M?z:(M=o,k("vert",{x:o}))},log:function(o){return typeof o!="string"&&(o=JSON.stringify(o,!1,"  ")),k("log",{txt:o})},reset:function(){return k("reset")},selected:function(o){return k("selected",{segs:o})},chainStart:function(o){return k("chain_start",{seg:o})},chainRemoveHead:function(o,T){return k("chain_rem_head",{index:o,pt:T})},chainRemoveTail:function(o,T){return k("chain_rem_tail",{index:o,pt:T})},chainNew:function(o,T){return k("chain_new",{pt1:o,pt2:T})},chainMatch:function(o){return k("chain_match",{index:o})},chainClose:function(o){return k("chain_close",{index:o})},chainAddHead:function(o,T){return k("chain_add_head",{index:o,pt:T})},chainAddTail:function(o,T){return k("chain_add_tail",{index:o,pt:T})},chainConnect:function(o,T){return k("chain_con",{index1:o,index2:T})},chainReverse:function(o){return k("chain_rev",{index:o})},chainJoin:function(o,T){return k("chain_join",{index1:o,index2:T})},done:function(){return k("done")}}}},28648:function(ee){ee.exports=function(z){typeof z!="number"&&(z=1e-10);var e={epsilon:function(M){return typeof M=="number"&&(z=M),z},pointAboveOrOnLine:function(M,k,o){var T=k[0],b=k[1],h=o[0],s=o[1],t=M[0];return(h-T)*(M[1]-b)-(s-b)*(t-T)>=-z},pointBetween:function(M,k,o){var T=M[1]-k[1],b=o[0]-k[0],h=M[0]-k[0],s=o[1]-k[1],t=h*b+T*s;return!(t<z||t-(b*b+s*s)>-z)},pointsSameX:function(M,k){return Math.abs(M[0]-k[0])<z},pointsSameY:function(M,k){return Math.abs(M[1]-k[1])<z},pointsSame:function(M,k){return e.pointsSameX(M,k)&&e.pointsSameY(M,k)},pointsCompare:function(M,k){return e.pointsSameX(M,k)?e.pointsSameY(M,k)?0:M[1]<k[1]?-1:1:M[0]<k[0]?-1:1},pointsCollinear:function(M,k,o){var T=M[0]-k[0],b=M[1]-k[1],h=k[0]-o[0],s=k[1]-o[1];return Math.abs(T*s-h*b)<z},linesIntersect:function(M,k,o,T){var b=k[0]-M[0],h=k[1]-M[1],s=T[0]-o[0],t=T[1]-o[1],i=b*t-h*s;if(Math.abs(i)<z)return!1;var n=M[0]-o[0],r=M[1]-o[1],a=(s*r-t*n)/i,l=(b*r-h*n)/i,u={alongA:0,alongB:0,pt:[M[0]+a*b,M[1]+a*h]};return u.alongA=a<=-z?-2:a<z?-1:a-1<=-z?0:a-1<z?1:2,u.alongB=l<=-z?-2:l<z?-1:l-1<=-z?0:l-1<z?1:2,u},pointInsideRegion:function(M,k){for(var o=M[0],T=M[1],b=k[k.length-1][0],h=k[k.length-1][1],s=!1,t=0;t<k.length;t++){var i=k[t][0],n=k[t][1];n-T>z!=h-T>z&&(b-i)*(T-n)/(h-n)+i-o>z&&(s=!s),b=i,h=n}return s}};return e}},17792:function(ee){var z={toPolygon:function(e,M){function k(b){if(b.length<=0)return e.segments({inverted:!1,regions:[]});function h(i){var n=i.slice(0,i.length-1);return e.segments({inverted:!1,regions:[n]})}for(var s=h(b[0]),t=1;t<b.length;t++)s=e.selectDifference(e.combine(s,h(b[t])));return s}if(M.type==="Polygon")return e.polygon(k(M.coordinates));if(M.type==="MultiPolygon"){for(var o=e.segments({inverted:!1,regions:[]}),T=0;T<M.coordinates.length;T++)o=e.selectUnion(e.combine(o,k(M.coordinates[T])));return e.polygon(o)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,M,k){function o(l,u){return M.pointInsideRegion([.5*(l[0][0]+l[1][0]),.5*(l[0][1]+l[1][1])],u)}function T(l){return{region:l,children:[]}}k=e.polygon(e.segments(k));var b=T(null);function h(l,u){for(var d=0;d<l.children.length;d++)if(o(u,(x=l.children[d]).region))return void h(x,u);var c=T(u);for(d=0;d<l.children.length;d++){var x;o((x=l.children[d]).region,u)&&(c.children.push(x),l.children.splice(d,1),d--)}l.children.push(c)}for(var s=0;s<k.regions.length;s++){var t=k.regions[s];t.length<3||h(b,t)}function i(l,u){for(var d=0,c=l[l.length-1][0],x=l[l.length-1][1],g=[],p=0;p<l.length;p++){var v=l[p][0],m=l[p][1];g.push([v,m]),d+=m*c-v*x,c=v,x=m}return d<0!==u&&g.reverse(),g.push([g[0][0],g[0][1]]),g}var n=[];function r(l){var u=[i(l.region,!1)];n.push(u);for(var d=0;d<l.children.length;d++)u.push(a(l.children[d]))}function a(l){for(var u=0;u<l.children.length;u++)r(l.children[u]);return i(l.region,!0)}for(s=0;s<b.children.length;s++)r(b.children[s]);return n.length<=0?{type:"Polygon",coordinates:[]}:n.length==1?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}}};ee.exports=z},72200:function(ee,z,e){var M=e(48088);ee.exports=function(k,o,T){function b(r,a,l){return{id:T?T.segmentId():-1,start:r,end:a,myFill:{above:l.myFill.above,below:l.myFill.below},otherFill:null}}var h=M.create();function s(r,a){h.insertBefore(r,function(l){return u=r.isStart,d=r.pt,c=a,x=l.isStart,g=l.pt,p=l.other.pt,((v=o.pointsCompare(d,g))!==0?v:o.pointsSame(c,p)?0:u!==x?u?1:-1:o.pointAboveOrOnLine(c,x?g:p,x?p:g)?1:-1)<0;var u,d,c,x,g,p,v})}function t(r,a){var l=function(u,d){var c=M.node({isStart:!0,pt:u.start,seg:u,primary:d,other:null,status:null});return s(c,u.end),c}(r,a);return function(u,d,c){var x=M.node({isStart:!1,pt:d.end,seg:d,primary:c,other:u,status:null});u.other=x,s(x,u.pt)}(l,r,a),l}function i(r,a){var l=b(a,r.seg.end,r.seg);return function(u,d){T&&T.segmentChop(u.seg,d),u.other.remove(),u.seg.end=d,u.other.pt=d,s(u.other,u.pt)}(r,a),t(l,r.primary)}function n(r,a){var l=M.create();function u(E){return l.findTransition(function(P){var C,O,R,j,D,N;return C=E,O=P.ev,R=C.seg.start,j=C.seg.end,D=O.seg.start,N=O.seg.end,(o.pointsCollinear(R,D,N)?o.pointsCollinear(j,D,N)||o.pointAboveOrOnLine(j,D,N)?1:-1:o.pointAboveOrOnLine(R,D,N)?1:-1)>0})}function d(E,P){var C=E.seg,O=P.seg,R=C.start,j=C.end,D=O.start,N=O.end;T&&T.checkIntersection(C,O);var W=o.linesIntersect(R,j,D,N);if(W===!1){if(!o.pointsCollinear(R,j,D)||o.pointsSame(R,N)||o.pointsSame(j,D))return!1;var F=o.pointsSame(R,D),U=o.pointsSame(j,N);if(F&&U)return P;var V=!F&&o.pointBetween(R,D,N),te=!U&&o.pointBetween(j,D,N);if(F)return te?i(P,j):i(E,N),P;V&&(U||(te?i(P,j):i(E,N)),i(P,R))}else W.alongA===0&&(W.alongB===-1?i(E,D):W.alongB===0?i(E,W.pt):W.alongB===1&&i(E,N)),W.alongB===0&&(W.alongA===-1?i(P,R):W.alongA===0?i(P,W.pt):W.alongA===1&&i(P,j));return!1}for(var c=[];!h.isEmpty();){var x=h.getHead();if(T&&T.vert(x.pt[0]),x.isStart){let E=function(){if(p){var P=d(x,p);if(P)return P}return!!v&&d(x,v)};var w=E;T&&T.segmentNew(x.seg,x.primary);var g=u(x),p=g.before?g.before.ev:null,v=g.after?g.after.ev:null;T&&T.tempStatus(x.seg,!!p&&p.seg,!!v&&v.seg);var m,y,_=E();if(_&&(k?(y=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=x.seg.myFill,T&&T.segmentUpdate(_.seg),x.other.remove(),x.remove()),h.getHead()!==x){T&&T.rewind(x.seg);continue}k?(y=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=v?v.seg.myFill.above:r,x.seg.myFill.above=y?!x.seg.myFill.below:x.seg.myFill.below):x.seg.otherFill===null&&(m=v?x.primary===v.primary?v.seg.otherFill.above:v.seg.myFill.above:x.primary?a:r,x.seg.otherFill={above:m,below:m}),T&&T.status(x.seg,!!p&&p.seg,!!v&&v.seg),x.other.status=g.insert(M.node({ev:x}))}else{var f=x.status;if(f===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(l.exists(f.prev)&&l.exists(f.next)&&d(f.prev.ev,f.next.ev),T&&T.statusRemove(f.ev.seg),f.remove(),!x.primary){var S=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=S}c.push(x.seg)}h.getHead().remove()}return T&&T.done(),c}return k?{addRegion:function(r){for(var a,l,u,d=r[r.length-1],c=0;c<r.length;c++){a=d,d=r[c];var x=o.pointsCompare(a,d);x!==0&&t((l=x<0?a:d,u=x<0?d:a,{id:T?T.segmentId():-1,start:l,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(r){return n(r,!1)}}:{calculate:function(r,a,l,u){return r.forEach(function(d){t(b(d.start,d.end,d),!0)}),l.forEach(function(d){t(b(d.start,d.end,d),!1)}),n(a,u)}}}},48088:function(ee){ee.exports={create:function(){var z={root:{root:!0,next:null},exists:function(e){return e!==null&&e!==z.root},isEmpty:function(){return z.root.next===null},getHead:function(){return z.root.next},insertBefore:function(e,M){for(var k=z.root,o=z.root.next;o!==null;){if(M(o))return e.prev=o.prev,e.next=o,o.prev.next=e,void(o.prev=e);k=o,o=o.next}k.next=e,e.prev=k,e.next=null},findTransition:function(e){for(var M=z.root,k=z.root.next;k!==null&&!e(k);)M=k,k=k.next;return{before:M===z.root?null:M,after:k,insert:function(o){return o.prev=M,o.next=k,M.next=o,k!==null&&(k.prev=o),o}}}};return z},node:function(z){return z.prev=null,z.next=null,z.remove=function(){z.prev.next=z.next,z.next&&(z.next.prev=z.prev),z.prev=null,z.next=null},z}}},11403:function(ee){ee.exports=function(z,e,M){var k=[],o=[];return z.forEach(function(T){var b=T.start,h=T.end;if(e.pointsSame(b,h))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{M&&M.chainStart(T);for(var s={index:0,matches_head:!1,matches_pt1:!1},t={index:0,matches_head:!1,matches_pt1:!1},i=s,n=0;n<k.length;n++){var r=(c=k[n])[0],a=(c[1],c[c.length-1]);if(c[c.length-2],e.pointsSame(r,b)){if(f(n,!0,!0))break}else if(e.pointsSame(r,h)){if(f(n,!0,!1))break}else if(e.pointsSame(a,b)){if(f(n,!1,!0))break}else if(e.pointsSame(a,h)&&f(n,!1,!1))break}if(i===s)return k.push([b,h]),void(M&&M.chainNew(b,h));if(i===t){M&&M.chainMatch(s.index);var l=s.index,u=s.matches_pt1?h:b,d=s.matches_head,c=k[l],x=d?c[0]:c[c.length-1],g=d?c[1]:c[c.length-2],p=d?c[c.length-1]:c[0],v=d?c[c.length-2]:c[1];return e.pointsCollinear(g,x,u)&&(d?(M&&M.chainRemoveHead(s.index,u),c.shift()):(M&&M.chainRemoveTail(s.index,u),c.pop()),x=g),e.pointsSame(p,u)?(k.splice(l,1),e.pointsCollinear(v,p,x)&&(d?(M&&M.chainRemoveTail(s.index,x),c.pop()):(M&&M.chainRemoveHead(s.index,x),c.shift())),M&&M.chainClose(s.index),void o.push(c)):void(d?(M&&M.chainAddHead(s.index,u),c.unshift(u)):(M&&M.chainAddTail(s.index,u),c.push(u)))}var m=s.index,y=t.index;M&&M.chainConnect(m,y);var _=k[m].length<k[y].length;s.matches_head?t.matches_head?_?(S(m),w(m,y)):(S(y),w(y,m)):w(y,m):t.matches_head?w(m,y):_?(S(m),w(y,m)):(S(y),w(m,y))}function f(E,P,C){return i.index=E,i.matches_head=P,i.matches_pt1=C,i===s?(i=t,!1):(i=null,!0)}function S(E){M&&M.chainReverse(E),k[E].reverse()}function w(E,P){var C=k[E],O=k[P],R=C[C.length-1],j=C[C.length-2],D=O[0],N=O[1];e.pointsCollinear(j,R,D)&&(M&&M.chainRemoveTail(E,R),C.pop(),R=j),e.pointsCollinear(R,D,N)&&(M&&M.chainRemoveHead(P,D),O.shift()),M&&M.chainJoin(E,P),k[E]=C.concat(O),k.splice(P,1)}}),o}},82368:function(ee){function z(M,k,o){var T=[];return M.forEach(function(b){var h=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);k[h]!==0&&T.push({id:o?o.segmentId():-1,start:b.start,end:b.end,myFill:{above:k[h]===1,below:k[h]===2},otherFill:null})}),o&&o.selected(T),T}var e={union:function(M,k){return z(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(M,k){return z(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(M,k){return z(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(M,k){return z(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(M,k){return z(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}};ee.exports=e},9696:function(ee,z,e){"use strict";var M=e(29936).Transform,k=e(55619);function o(){M.call(this,{readableObjectMode:!0})}function T(b,h,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=b,h&&(this.code=h),s&&(this.statusCode=s)}o.prototype=Object.create(M.prototype),o.prototype.constructor=o,k(o.prototype),z.gS=function(b,h,s){for(var t=h,i=0;i<s.length;)if(b[t++]!==s[i++])return!1;return!0},z.wR=function(b,h){var s=[],t=0;if(h&&h==="hex")for(;t<b.length;)s.push(parseInt(b.slice(t,t+2),16)),t+=2;else for(;t<b.length;t++)s.push(255&b.charCodeAt(t));return s},z.Bz=function(b,h){return b[h]|b[h+1]<<8},z.eW=function(b,h){return b[h+1]|b[h]<<8},z.st=function(b,h){return b[h]|b[h+1]<<8|b[h+2]<<16|16777216*b[h+3]},z.eI=function(b,h){return b[h+3]|b[h+2]<<8|b[h+1]<<16|16777216*b[h]},T.prototype=Object.create(Error.prototype),T.prototype.constructor=T},11688:function(ee){"use strict";function z(k,o){var T=new Error(k);return T.code=o,T}function e(k){try{return decodeURIComponent(escape(k))}catch(o){return k}}function M(k,o,T){this.input=k.subarray(o,T),this.start=o;var b=String.fromCharCode.apply(null,this.input.subarray(0,4));if(b!=="II*\0"&&b!=="MM\0*")throw z("invalid TIFF signature","EBADDATA");this.big_endian=b[0]==="M"}M.prototype.each=function(k){this.aborted=!1;var o=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:o}];this.ifds_to_read.length>0&&!this.aborted;){var T=this.ifds_to_read.shift();T.offset&&this.scan_ifd(T.id,T.offset,k)}},M.prototype.read_uint16=function(k){var o=this.input;if(k+2>o.length)throw z("unexpected EOF","EBADDATA");return this.big_endian?256*o[k]+o[k+1]:o[k]+256*o[k+1]},M.prototype.read_uint32=function(k){var o=this.input;if(k+4>o.length)throw z("unexpected EOF","EBADDATA");return this.big_endian?16777216*o[k]+65536*o[k+1]+256*o[k+2]+o[k+3]:o[k]+256*o[k+1]+65536*o[k+2]+16777216*o[k+3]},M.prototype.is_subifd_link=function(k,o){return k===0&&o===34665||k===0&&o===34853||k===34665&&o===40965},M.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(k,o){var T;switch(k){case 1:case 2:return this.input[o];case 6:return(T=this.input[o])|33554430*(128&T);case 3:return this.read_uint16(o);case 8:return(T=this.read_uint16(o))|131070*(32768&T);case 4:return this.read_uint32(o);case 9:return 0|this.read_uint32(o);default:return null}},M.prototype.scan_ifd=function(k,o,T){var b=this.read_uint16(o);o+=2;for(var h=0;h<b;h++){var s=this.read_uint16(o),t=this.read_uint16(o+2),i=this.read_uint32(o+4),n=this.exif_format_length(t),r=i*n,a=r<=4?o+8:this.read_uint32(o+8),l=!1;if(a+r>this.input.length)throw z("unexpected EOF","EBADDATA");for(var u=[],d=a,c=0;c<i;c++,d+=n){var x=this.exif_format_read(t,d);if(x===null){u=null;break}u.push(x)}if(Array.isArray(u)&&t===2&&(u=e(String.fromCharCode.apply(null,u)))&&u[u.length-1]==="\0"&&(u=u.slice(0,-1)),this.is_subifd_link(k,s)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:s,offset:u[0]}),l=!0),T({is_big_endian:this.big_endian,ifd:k,tag:s,format:t,count:i,entry_offset:o+this.start,data_length:r,data_offset:a+this.start,value:u,is_subifd_link:l})===!1)return void(this.aborted=!0);o+=12}k===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(o)})},ee.exports.ExifParser=M,ee.exports.get_orientation=function(k){var o=0;try{return new M(k,0,k.length).each(function(T){if(T.ifd===0&&T.tag===274&&Array.isArray(T.value))return o=T.value[0],!1}),o}catch(T){return-1}}},44600:function(ee,z,e){"use strict";var M=e(9696).eW,k=e(9696).eI;function o(i,n){if(i.length<4+n)return null;var r=k(i,n);return i.length<r+n||r<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(n+4,n+8)),data:i.slice(n+8,n+r),end:n+r}}function T(i,n){for(var r=0;;){var a=o(i,r);if(!a)break;switch(a.boxtype){case"ispe":n.sizes.push({width:k(a.data,4),height:k(a.data,8)});break;case"irot":n.transforms.push({type:"irot",value:3&a.data[0]});break;case"imir":n.transforms.push({type:"imir",value:1&a.data[0]})}r=a.end}}function b(i,n,r){for(var a=0,l=0;l<r;l++)a=256*a+(i[n+l]||0);return a}function h(i,n){for(var r=i[4]>>4&15,a=15&i[4],l=i[5]>>4&15,u=M(i,6),d=8,c=0;c<u;c++){var x=M(i,d),g=M(i,d+=2),p=b(i,d+=2,l),v=M(i,d+=l);if(d+=2,g===0&&v===1){var m=b(i,d,r),y=b(i,d+r,a);n.item_loc[x]={length:y,offset:m+p}}d+=v*(r+a)}}function s(i,n){for(var r=M(i,4),a=6,l=0;l<r;l++){var u=o(i,a);if(!u)break;if(u.boxtype==="infe"){for(var d=M(u.data,4),c="",x=8;x<u.data.length&&u.data[x];x++)c+=String.fromCharCode(u.data[x]);n.item_inf[c]=d}a=u.end}}function t(i,n){for(var r=0;;){var a=o(i,r);if(!a)break;a.boxtype==="ipco"&&T(a.data,n),r=a.end}}ee.exports.unbox=o,ee.exports.readSizeFromMeta=function(i){var n={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(x,g){for(var p=4;;){var v=o(x,p);if(!v)break;v.boxtype==="iprp"&&t(v.data,g),v.boxtype==="iloc"&&h(v.data,g),v.boxtype==="iinf"&&s(v.data,g),p=v.end}}(i,n),n.sizes.length){var r,a,l,u=(a=(r=n.sizes).reduce(function(x,g){return x.width>g.width||x.width===g.width&&x.height>g.height?x:g}),l=r.reduce(function(x,g){return x.height>g.height||x.height===g.height&&x.width>g.width?x:g}),a.width>l.height||a.width===l.height&&a.height>l.width?a:l),d=1;n.transforms.forEach(function(x){var g={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},p={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(x.type==="imir"&&(d=x.value===0?p[d]:g[d=g[d=p[d]]]),x.type==="irot")for(var v=0;v<x.value;v++)d=g[d]});var c=null;return n.item_inf.Exif&&(c=n.item_loc[n.item_inf.Exif]),{width:u.width,height:u.height,orientation:n.transforms.length?d:null,variants:n.sizes,exif_location:c}}},ee.exports.getMimeType=function(i){var n=String.fromCharCode.apply(null,i.slice(0,4)),r={};r[n]=!0;for(var a=8;a<i.length;a+=4)r[String.fromCharCode.apply(null,i.slice(a,a+4))]=!0;if(r.mif1||r.msf1||r.miaf)return n==="avif"||n==="avis"||n==="avio"?{type:"avif",mime:"image/avif"}:n==="heic"||n==="heix"?{type:"heic",mime:"image/heic"}:n==="hevc"||n==="hevx"?{type:"heic",mime:"image/heic-sequence"}:r.avif||r.avis?{type:"avif",mime:"image/avif"}:r.heic||r.heix||r.hevc||r.hevx||r.heis?r.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(ee,z,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=e(44600),b=e(11688),h=M("ftyp");ee.exports=function(s){if(k(s,4,h)){var t=T.unbox(s,0);if(t){var i=T.getMimeType(t.data);if(i){for(var n,r=t.end;;){var a=T.unbox(s,r);if(!a)break;if(r=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){n=a.data;break}}if(n){var l=T.readSizeFromMeta(n);if(l){var u={width:l.width,height:l.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(l.variants.length>1&&(u.variants=l.variants),l.orientation&&(u.orientation=l.orientation),l.exif_location&&l.exif_location.offset+l.exif_location.length<=s.length){var d=o(s,l.exif_location.offset),c=s.slice(l.exif_location.offset+d+4,l.exif_location.offset+l.exif_location.length),x=b.get_orientation(c);x>0&&(u.orientation=x)}return u}}}}}}},38728:function(ee,z,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=M("BM");ee.exports=function(b){if(!(b.length<26)&&k(b,0,T))return{width:o(b,18),height:o(b,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(ee,z,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=M("GIF87a"),b=M("GIF89a");ee.exports=function(h){if(!(h.length<10)&&(k(h,0,T)||k(h,0,b)))return{width:o(h,6),height:o(h,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(ee,z,e){"use strict";var M=e(9696).Bz;ee.exports=function(k){var o=M(k,0),T=M(k,2),b=M(k,4);if(o===0&&T===1&&b){for(var h=[],s={width:0,height:0},t=0;t<b;t++){var i=k[6+16*t]||256,n=k[6+16*t+1]||256,r={width:i,height:n};h.push(r),(i>s.width||n>s.height)&&(s=r)}return{width:s.width,height:s.height,variants:h,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(ee,z,e){"use strict";var M=e(9696).eW,k=e(9696).wR,o=e(9696).gS,T=e(11688),b=k("Exif\0\0");ee.exports=function(h){if(!(h.length<2)&&h[0]===255&&h[1]===216&&h[2]===255)for(var s=2;;){for(;;){if(h.length-s<2)return;if(h[s++]===255)break}for(var t,i,n=h[s++];n===255;)n=h[s++];if(208<=n&&n<=217||n===1)t=0;else{if(!(192<=n&&n<=254)||h.length-s<2)return;t=M(h,s)-2,s+=2}if(n===217||n===218)return;if(n===225&&t>=10&&o(h,s,b)&&(i=T.get_orientation(h.slice(s+6,s+t))),t>=5&&192<=n&&n<=207&&n!==196&&n!==200&&n!==204){if(h.length-s<t)return;var r={width:M(h,s+3),height:M(h,s+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(r.orientation=i),r}s+=t}}},37276:function(ee,z,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=M(`\x89PNG\r

`),b=M("IHDR");ee.exports=function(h){if(!(h.length<24)&&k(h,0,T)&&k(h,12,b))return{width:o(h,16),height:o(h,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(ee,z,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).eI,T=M("8BPS\0");ee.exports=function(b){if(!(b.length<22)&&k(b,0,T))return{width:o(b,18),height:o(b,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(ee){"use strict";function z(s){return typeof s=="number"&&isFinite(s)&&s>0}var e=/<[-_.:a-zA-Z0-9][^>]*>/,M=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,k=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,o=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,T=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,b=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function h(s){return b.test(s)?s.match(b)[0]:"px"}ee.exports=function(s){if(function(p){var v,m=0,y=p.length;for(p[0]===239&&p[1]===187&&p[2]===191&&(m=3);m<y&&((v=p[m])===32||v===9||v===13||v===10);)m++;return m!==y&&p[m]===60}(s)){for(var t="",i=0;i<s.length;i++)t+=String.fromCharCode(s[i]);var n=(t.match(e)||[""])[0];if(M.test(n)){var r=function(p){var v=p.match(k),m=p.match(o),y=p.match(T);return{width:v&&(v[1]||v[2]),height:m&&(m[1]||m[2]),viewbox:y&&(y[1]||y[2])}}(n),a=parseFloat(r.width),l=parseFloat(r.height);if(r.width&&r.height)return!z(a)||!z(l)?void 0:{width:a,height:l,type:"svg",mime:"image/svg+xml",wUnits:h(r.width),hUnits:h(r.height)};var u=(r.viewbox||"").split(" "),d={width:u[2],height:u[3]},c=parseFloat(d.width),x=parseFloat(d.height);if(z(c)&&z(x)&&h(d.width)===h(d.height)){var g=c/x;return r.width?z(a)?{width:a,height:a/g,type:"svg",mime:"image/svg+xml",wUnits:h(r.width),hUnits:h(r.width)}:void 0:r.height?z(l)?{width:l*g,height:l,type:"svg",mime:"image/svg+xml",wUnits:h(r.height),hUnits:h(r.height)}:void 0:{width:c,height:x,type:"svg",mime:"image/svg+xml",wUnits:h(d.width),hUnits:h(d.height)}}}}}},98792:function(ee,z,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=e(9696).eW,b=e(9696).st,h=e(9696).eI,s=M("II*\0"),t=M("MM\0*");function i(a,l,u){return u?T(a,l):o(a,l)}function n(a,l,u){return u?h(a,l):b(a,l)}function r(a,l,u){var d=i(a,l+2,u);return n(a,l+4,u)!==1||d!==3&&d!==4?null:d===3?i(a,l+8,u):n(a,l+8,u)}ee.exports=function(a){if(!(a.length<8)&&(k(a,0,s)||k(a,0,t))){var l=a[0]===77,u=n(a,4,l)-8;if(!(u<0)){var d=u+8;if(!(a.length-d<2)){var c=12*i(a,d+0,l);if(!(c<=0||(d+=2,a.length-d<c))){var x,g,p,v;for(x=0;x<c;x+=12)(v=i(a,d+x,l))===256?g=r(a,d+x,l):v===257&&(p=r(a,d+x,l));return g&&p?{width:g,height:p,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},20704:function(ee,z,e){"use strict";var M=e(9696).wR,k=e(9696).gS,o=e(9696).Bz,T=e(9696).st,b=e(11688),h=M("RIFF"),s=M("WEBP");function t(r,a){if(r[a+3]===157&&r[a+4]===1&&r[a+5]===42)return{width:16383&o(r,a+6),height:16383&o(r,a+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(r,a){if(r[a]===47){var l=T(r,a+1);return{width:1+(16383&l),height:1+(l>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function n(r,a){return{width:1+(r[a+6]<<16|r[a+5]<<8|r[a+4]),height:1+(r[a+9]<<a|r[a+8]<<8|r[a+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}ee.exports=function(r){if(!(r.length<16)&&(k(r,0,h)||k(r,8,s))){var a=12,l=null,u=0,d=T(r,4)+8;if(!(d>r.length)){for(;a+8<d;)if(r[a]!==0){var c=String.fromCharCode.apply(null,r.slice(a,a+4)),x=T(r,a+4);c==="VP8 "&&x>=10?l=l||t(r,a+8):c==="VP8L"&&x>=9?l=l||i(r,a+8):c==="VP8X"&&x>=10?l=l||n(r,a+8):c==="EXIF"&&(u=b.get_orientation(r.slice(a+8,a+8+x)),a=1/0),a+=8+x}else a++;if(l)return u>0&&(l.orientation=u),l}}}},87480:function(ee,z,e){"use strict";ee.exports={avif:e(40528),bmp:e(38728),gif:e(5588),ico:e(41924),jpeg:e(87968),png:e(37276),psd:e(90328),svg:e(16024),tiff:e(98792),webp:e(20704)}},19480:function(ee,z,e){"use strict";var M=e(87480);ee.exports=function(k){return function(o){for(var T=Object.keys(M),b=0;b<T.length;b++){var h=M[T[b]](o);if(h)return h}return null}(k)},ee.exports.parsers=M},4168:function(ee){var z,e,M=ee.exports={};function k(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function T(l){if(z===setTimeout)return setTimeout(l,0);if((z===k||!z)&&setTimeout)return z=setTimeout,setTimeout(l,0);try{return z(l,0)}catch(u){try{return z.call(null,l,0)}catch(d){return z.call(this,l,0)}}}(function(){try{z=typeof setTimeout=="function"?setTimeout:k}catch(l){z=k}try{e=typeof clearTimeout=="function"?clearTimeout:o}catch(l){e=o}})();var b,h=[],s=!1,t=-1;function i(){s&&b&&(s=!1,b.length?h=b.concat(h):t=-1,h.length&&n())}function n(){if(!s){var l=T(i);s=!0;for(var u=h.length;u;){for(b=h,h=[];++t<u;)b&&b[t].run();t=-1,u=h.length}b=null,s=!1,function(d){if(e===clearTimeout)return clearTimeout(d);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(d);try{return e(d)}catch(c){try{return e.call(null,d)}catch(x){return e.call(this,d)}}}(l)}}function r(l,u){this.fun=l,this.array=u}function a(){}M.nextTick=function(l){var u=new Array(arguments.length-1);if(arguments.length>1)for(var d=1;d<arguments.length;d++)u[d-1]=arguments[d];h.push(new r(l,u)),h.length!==1||s||T(n)},r.prototype.run=function(){this.fun.apply(null,this.array)},M.title="browser",M.browser=!0,M.env={},M.argv=[],M.version="",M.versions={},M.on=a,M.addListener=a,M.once=a,M.off=a,M.removeListener=a,M.removeAllListeners=a,M.emit=a,M.prependListener=a,M.prependOnceListener=a,M.listeners=function(l){return[]},M.binding=function(l){throw new Error("process.binding is not supported")},M.cwd=function(){return"/"},M.chdir=function(l){throw new Error("process.chdir is not supported")},M.umask=function(){return 0}},3951:function(ee,z,e){for(var M=e(41984),k=typeof window=="undefined"?e.g:window,o=["moz","webkit"],T="AnimationFrame",b=k["request"+T],h=k["cancel"+T]||k["cancelRequest"+T],s=0;!b&&s<o.length;s++)b=k[o[s]+"Request"+T],h=k[o[s]+"Cancel"+T]||k[o[s]+"CancelRequest"+T];if(!b||!h){var t=0,i=0,n=[];b=function(r){if(n.length===0){var a=M(),l=Math.max(0,16.666666666666668-(a-t));t=l+a,setTimeout(function(){var u=n.slice(0);n.length=0;for(var d=0;d<u.length;d++)if(!u[d].cancelled)try{u[d].callback(t)}catch(c){setTimeout(function(){throw c},0)}},Math.round(l))}return n.push({handle:++i,callback:r,cancelled:!1}),i},h=function(r){for(var a=0;a<n.length;a++)n[a].handle===r&&(n[a].cancelled=!0)}}ee.exports=function(r){return b.call(k,r)},ee.exports.cancel=function(){h.apply(k,arguments)},ee.exports.polyfill=function(r){r||(r=k),r.requestAnimationFrame=b,r.cancelAnimationFrame=h}},24544:function(ee,z,e){"use strict";var M=e(76752),k=e(72160),o=e(45223),T=e(55616),b=e(50896),h=e(47520),s=e(37816),t=s.float32,i=s.fract32;ee.exports=function(r,a){if(typeof r=="function"?(a||(a={}),a.regl=r):a=r,a.length&&(a.positions=a),!(r=a.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var l,u,d,c,x,g,p=r._gl,v={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},m=[];return c=r.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=r.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=r.buffer({usage:"static",type:"float",data:n}),S(a),l=r({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:r.prop("range"),lineWidth:r.prop("lineWidth"),capSize:r.prop("capSize"),opacity:r.prop("opacity"),scale:r.prop("scale"),translate:r.prop("translate"),scaleFract:r.prop("scaleFract"),translateFract:r.prop("translateFract"),viewport:function(E,P){return[P.viewport.x,P.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:c,offset:function(E,P){return 4*P.offset},divisor:1},position:{buffer:u,offset:function(E,P){return 8*P.offset},divisor:1},positionFract:{buffer:d,offset:function(E,P){return 8*P.offset},divisor:1},error:{buffer:x,offset:function(E,P){return 16*P.offset},divisor:1},direction:{buffer:g,stride:24,offset:0},lineOffset:{buffer:g,stride:24,offset:8},capOffset:{buffer:g,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:r.prop("viewport")},viewport:r.prop("viewport"),stencil:!1,instances:r.prop("count"),count:n.length}),b(y,{update:S,draw:_,destroy:w,regl:r,gl:p,canvas:p.canvas,groups:m}),y;function y(E){E?S(E):E===null&&w(),_()}function _(E){if(typeof E=="number")return f(E);E&&!Array.isArray(E)&&(E=[E]),r._refresh(),m.forEach(function(P,C){P&&(E&&(E[C]?P.draw=!0:P.draw=!1),P.draw?f(C):P.draw=!0)})}function f(E){typeof E=="number"&&(E=m[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],l(E),E.after&&E.after(E))}function S(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var P=0,C=0;if(y.groups=m=E.map(function(F,U){var V=m[U];return F&&(typeof F=="function"?F={after:F}:typeof F[0]=="number"&&(F={positions:F}),F=T(F,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),V||(m[U]=V={id:U,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},F=b({},v,F)),o(V,F,[{lineWidth:function(te){return .5*+te},capSize:function(te){return .5*+te},opacity:parseFloat,errors:function(te){return te=h(te),C+=te.length,te},positions:function(te,J){return te=h(te,"float64"),J.count=Math.floor(te.length/2),J.bounds=M(te,2),J.offset=P,P+=J.count,te}},{color:function(te,J){var K=J.count;if(te||(te="transparent"),!Array.isArray(te)||typeof te[0]=="number"){var X=te;te=Array(K);for(var Z=0;Z<K;Z++)te[Z]=X}if(te.length<K)throw Error("Not enough colors");for(var $=new Uint8Array(4*K),re=0;re<K;re++){var oe=k(te[re],"uint8");$.set(oe,4*re)}return $},range:function(te,J,K){var X=J.bounds;return te||(te=X),J.scale=[1/(te[2]-te[0]),1/(te[3]-te[1])],J.translate=[-te[0],-te[1]],J.scaleFract=i(J.scale),J.translateFract=i(J.translate),te},viewport:function(te){var J;return Array.isArray(te)?J={x:te[0],y:te[1],width:te[2]-te[0],height:te[3]-te[1]}:te?(J={x:te.x||te.left||0,y:te.y||te.top||0},te.right?J.width=te.right-J.x:J.width=te.w||te.width||0,te.bottom?J.height=te.bottom-J.y:J.height=te.h||te.height||0):J={x:0,y:0,width:p.drawingBufferWidth,height:p.drawingBufferHeight},J}}])),V}),P||C){var O=m.reduce(function(F,U,V){return F+(U?U.count:0)},0),R=new Float64Array(2*O),j=new Uint8Array(4*O),D=new Float32Array(4*O);m.forEach(function(F,U){if(F){var V=F.positions,te=F.count,J=F.offset,K=F.color,X=F.errors;te&&(j.set(K,4*J),D.set(X,4*J),R.set(V,2*J))}});var N=t(R);u(N);var W=i(R,N);d(W),c(j),x(D)}}}function w(){u.destroy(),d.destroy(),c.destroy(),x.destroy(),g.destroy()}};var n=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},13472:function(ee,z,e){"use strict";var M=e(72160),k=e(76752),o=e(50896),T=e(55616),b=e(47520),h=e(28912),s=e(71152),t=e(37816),i=t.float32,n=t.fract32,r=e(60463),a=e(51160),l=e(10272);function u(d,c){if(!(this instanceof u))return new u(d,c);if(typeof d=="function"?(c||(c={}),c.regl=d):c=d,c.length&&(c.positions=c),!(d=c.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=d._gl,this.regl=d,this.passes=[],this.shaders=u.shaders.has(d)?u.shaders.get(d):u.shaders.set(d,u.createShaders(d)).get(d),this.update(c)}ee.exports=u,u.dashMult=2,u.maxPatternLength=256,u.precisionThreshold=3e6,u.maxPoints=1e4,u.maxLines=2048,u.shaders=new r,u.createShaders=function(d){var c,x=d.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),g={primitive:"triangle strip",instances:d.prop("count"),count:4,offset:0,uniforms:{miterMode:function(v,m){return m.join==="round"?2:1},miterLimit:d.prop("miterLimit"),scale:d.prop("scale"),scaleFract:d.prop("scaleFract"),translateFract:d.prop("translateFract"),translate:d.prop("translate"),thickness:d.prop("thickness"),dashTexture:d.prop("dashTexture"),opacity:d.prop("opacity"),pixelRatio:d.context("pixelRatio"),id:d.prop("id"),dashLength:d.prop("dashLength"),viewport:function(v,m){return[m.viewport.x,m.viewport.y,v.viewportWidth,v.viewportHeight]},depth:d.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(v,m){return!m.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:d.prop("viewport")},viewport:d.prop("viewport")},p=d(o({vert:`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:d.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},g));try{c=d(o({cull:{enable:!0,face:"back"},vert:`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,frag:`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,attributes:{lineEnd:{buffer:x,divisor:0,stride:8,offset:0},lineTop:{buffer:x,divisor:0,stride:8,offset:4},aColor:{buffer:d.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:d.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},g))}catch(v){c=p}return{fill:d({primitive:"triangle",elements:function(v,m){return m.triangles},offset:0,vert:`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,frag:`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,uniforms:{scale:d.prop("scale"),color:d.prop("fill"),scaleFract:d.prop("scaleFract"),translateFract:d.prop("translateFract"),translate:d.prop("translate"),opacity:d.prop("opacity"),pixelRatio:d.context("pixelRatio"),id:d.prop("id"),viewport:function(v,m){return[m.viewport.x,m.viewport.y,v.viewportWidth,v.viewportHeight]}},attributes:{position:{buffer:d.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:8}},blend:g.blend,depth:{enable:!1},scissor:g.scissor,stencil:g.stencil,viewport:g.viewport}),rect:p,miter:c}},u.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},u.prototype.render=function(){for(var d,c=[],x=arguments.length;x--;)c[x]=arguments[x];c.length&&(d=this).update.apply(d,c),this.draw()},u.prototype.draw=function(){for(var d=this,c=[],x=arguments.length;x--;)c[x]=arguments[x];return(c.length?c:this.passes).forEach(function(g,p){var v;if(g&&Array.isArray(g))return(v=d).draw.apply(v,g);typeof g=="number"&&(g=d.passes[g]),g&&g.count>1&&g.opacity&&(d.regl._refresh(),g.fill&&g.triangles&&g.triangles.length>2&&d.shaders.fill(g),g.thickness&&(g.scale[0]*g.viewport.width>u.precisionThreshold||g.scale[1]*g.viewport.height>u.precisionThreshold||g.join==="rect"||!g.join&&(g.thickness<=2||g.count>=u.maxPoints)?d.shaders.rect(g):d.shaders.miter(g)))}),this},u.prototype.update=function(d){var c=this;if(d){d.length!=null?typeof d[0]=="number"&&(d=[{positions:d}]):Array.isArray(d)||(d=[d]);var x=this.regl,g=this.gl;if(d.forEach(function(_,f){var S=c.passes[f];if(_!==void 0)if(_!==null){if(typeof _[0]=="number"&&(_={positions:_}),_=T(_,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(c.passes[f]=S={id:f,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},_=o({},u.defaults,_)),_.thickness!=null&&(S.thickness=parseFloat(_.thickness)),_.opacity!=null&&(S.opacity=parseFloat(_.opacity)),_.miterLimit!=null&&(S.miterLimit=parseFloat(_.miterLimit)),_.overlay!=null&&(S.overlay=!!_.overlay,f<u.maxLines&&(S.depth=2*(u.maxLines-1-f%u.maxLines)/u.maxLines-1)),_.join!=null&&(S.join=_.join),_.hole!=null&&(S.hole=_.hole),_.fill!=null&&(S.fill=_.fill?M(_.fill,"uint8"):null),_.viewport!=null&&(S.viewport=a(_.viewport)),S.viewport||(S.viewport=a([g.drawingBufferWidth,g.drawingBufferHeight])),_.close!=null&&(S.close=_.close),_.positions===null&&(_.positions=[]),_.positions){var w,E;if(_.positions.x&&_.positions.y){var P=_.positions.x,C=_.positions.y;E=S.count=Math.max(P.length,C.length),w=new Float64Array(2*E);for(var O=0;O<E;O++)w[2*O]=P[O],w[2*O+1]=C[O]}else w=b(_.positions,"float64"),E=S.count=Math.floor(w.length/2);var R=S.bounds=k(w,2);if(S.fill){for(var j=[],D={},N=0,W=0,F=0,U=S.count;W<U;W++){var V=w[2*W],te=w[2*W+1];isNaN(V)||isNaN(te)||V==null||te==null?(V=w[2*N],te=w[2*N+1],D[W]=N):N=W,j[F++]=V,j[F++]=te}if(_.splitNull){S.count-1 in D||(D[S.count]=S.count-1);var J=Object.keys(D).map(Number).sort(function(yt,vt){return yt-vt}),K=[],X=0,Z=S.hole!=null?S.hole[0]:null;if(Z!=null){var $=l(J,function(yt){return yt>=Z});(J=J.slice(0,$)).push(Z)}for(var re=function(yt){var vt=j.slice(2*X,2*J[yt]).concat(Z?j.slice(2*Z):[]),et=(S.hole||[]).map(function(wt){return wt-Z+(J[yt]-X)}),Qe=h(vt,et);Qe=Qe.map(function(wt){return wt+X+(wt+X<J[yt]?0:Z-J[yt])}),K.push.apply(K,Qe),X=J[yt]+1},oe=0;oe<J.length;oe++)re(oe);for(var ie=0,ue=K.length;ie<ue;ie++)D[K[ie]]!=null&&(K[ie]=D[K[ie]]);S.triangles=K}else{for(var me=h(j,S.hole||[]),be=0,ge=me.length;be<ge;be++)D[me[be]]!=null&&(me[be]=D[me[be]]);S.triangles=me}}var de=new Float64Array(w);s(de,2,R);var ve=new Float64Array(2*E+6);S.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(ve[0]=de[2*E-4],ve[1]=de[2*E-3]):(ve[0]=de[2*E-2],ve[1]=de[2*E-1]):(ve[0]=de[0],ve[1]=de[1]),ve.set(de,2),S.close?w[0]===w[2*E-2]&&w[1]===w[2*E-1]?(ve[2*E+2]=de[2],ve[2*E+3]=de[3],S.count-=1):(ve[2*E+2]=de[0],ve[2*E+3]=de[1],ve[2*E+4]=de[2],ve[2*E+5]=de[3]):(ve[2*E+2]=de[2*E-2],ve[2*E+3]=de[2*E-1],ve[2*E+4]=de[2*E-2],ve[2*E+5]=de[2*E-1]);var pe=i(ve);S.positionBuffer(pe);var _e=n(ve,pe);S.positionFractBuffer(_e)}if(_.range?S.range=_.range:S.range||(S.range=S.bounds),(_.range||_.positions)&&S.count){var Te=S.bounds,le=Te[2]-Te[0],ae=Te[3]-Te[1],he=S.range[2]-S.range[0],Se=S.range[3]-S.range[1];S.scale=[le/he,ae/Se],S.translate=[-S.range[0]/he+Te[0]/he||0,-S.range[1]/Se+Te[1]/Se||0],S.scaleFract=n(S.scale),S.translateFract=n(S.translate)}if(_.dashes){var ke,Me=0;if(!_.dashes||_.dashes.length<2)Me=1,ke=new Uint8Array([255,255,255,255,255,255,255,255]);else{Me=0;for(var Ee=0;Ee<_.dashes.length;++Ee)Me+=_.dashes[Ee];ke=new Uint8Array(Me*u.dashMult);for(var De=0,fe=255,xe=0;xe<2;xe++)for(var we=0;we<_.dashes.length;++we){for(var Oe=0,ze=_.dashes[we]*u.dashMult*.5;Oe<ze;++Oe)ke[De++]=fe;fe^=255}}S.dashLength=Me,S.dashTexture({channels:1,data:ke,width:ke.length,height:1,mag:"linear",min:"linear"},0,0)}if(_.color){var Pe=S.count,Ue=_.color;Ue||(Ue="transparent");var Ve=new Uint8Array(4*Pe+4);if(Array.isArray(Ue)&&typeof Ue[0]!="number"){for(var Ze=0;Ze<Pe;Ze++){var it=M(Ue[Ze],"uint8");Ve.set(it,4*Ze)}Ve.set(M(Ue[0],"uint8"),4*Pe)}else for(var tt=M(Ue,"uint8"),dt=0;dt<Pe+1;dt++)Ve.set(tt,4*dt);S.colorBuffer({usage:"dynamic",type:"uint8",data:Ve})}}else c.passes[f]=null}),d.length<this.passes.length){for(var p=d.length;p<this.passes.length;p++){var v=this.passes[p];v&&(v.colorBuffer.destroy(),v.positionBuffer.destroy(),v.dashTexture.destroy())}this.passes.length=d.length}for(var m=[],y=0;y<this.passes.length;y++)this.passes[y]!==null&&m.push(this.passes[y]);return this.passes=m,this}},u.prototype.destroy=function(){return this.passes.forEach(function(d){d.colorBuffer.destroy(),d.positionBuffer.destroy(),d.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(ee,z,e){"use strict";function M(p,v){return function(m){if(Array.isArray(m))return m}(p)||function(m,y){var _=m==null?null:typeof Symbol!="undefined"&&m[Symbol.iterator]||m["@@iterator"];if(_!=null){var f,S,w,E,P=[],C=!0,O=!1;try{if(w=(_=_.call(m)).next,y===0){if(Object(_)!==_)return;C=!1}else for(;!(C=(f=w.call(_)).done)&&(P.push(f.value),P.length!==y);C=!0);}catch(R){O=!0,S=R}finally{try{if(!C&&_.return!=null&&(E=_.return(),Object(E)!==E))return}finally{if(O)throw S}}return P}}(p,v)||k(p,v)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(p,v){if(p){if(typeof p=="string")return o(p,v);var m=Object.prototype.toString.call(p).slice(8,-1);return m==="Object"&&p.constructor&&(m=p.constructor.name),m==="Map"||m==="Set"?Array.from(p):m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?o(p,v):void 0}}function o(p,v){(v==null||v>p.length)&&(v=p.length);for(var m=0,y=new Array(v);m<v;m++)y[m]=p[m];return y}var T=e(72160),b=e(76752),h=e(3808),s=e(3108),t=e(50896),i=e(26444),n=e(55616),r=e(45223),a=e(47520),l=e(96604),u=e(37816),d=e(51160),c=x;function x(p,v){var m=this;if(!(this instanceof x))return new x(p,v);typeof p=="function"?(v||(v={}),v.regl=p):(v=p,p=null),v&&v.length&&(v.positions=v);var y,_=(p=v.regl)._gl,f=[];this.tooManyColors=l,y=p.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:p,gl:_,groups:[],markerCache:[null],markerTextures:[null],palette:f,paletteIds:{},paletteTexture:y,maxColors:255,maxSize:100,canvas:_.canvas}),this.update(v);var S={uniforms:{constPointSize:!!v.constPointSize,opacity:p.prop("opacity"),paletteSize:function(P,C){return[m.tooManyColors?0:255,y.height]},pixelRatio:p.context("pixelRatio"),scale:p.prop("scale"),scaleFract:p.prop("scaleFract"),translate:p.prop("translate"),translateFract:p.prop("translateFract"),markerTexture:p.prop("markerTexture"),paletteTexture:y},attributes:{x:function(P,C){return C.xAttr||{buffer:C.positionBuffer,stride:8,offset:0}},y:function(P,C){return C.yAttr||{buffer:C.positionBuffer,stride:8,offset:4}},xFract:function(P,C){return C.xAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:0}},yFract:function(P,C){return C.yAttr?{constant:[0,0]}:{buffer:C.positionFractBuffer,stride:8,offset:4}},size:function(P,C){return C.size.length?{buffer:C.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*C.size/m.maxSize)]}},borderSize:function(P,C){return C.borderSize.length?{buffer:C.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*C.borderSize/m.maxSize)]}},colorId:function(P,C){return C.color.length?{buffer:C.colorBuffer,stride:m.tooManyColors?8:4,offset:0}:{constant:m.tooManyColors?f.slice(4*C.color,4*C.color+4):[C.color]}},borderColorId:function(P,C){return C.borderColor.length?{buffer:C.colorBuffer,stride:m.tooManyColors?8:4,offset:m.tooManyColors?4:2}:{constant:m.tooManyColors?f.slice(4*C.borderColor,4*C.borderColor+4):[C.borderColor]}},isActive:function(P,C){return C.activation===!0?{constant:[1]}:C.activation?C.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:p.prop("viewport")},viewport:p.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:p.prop("elements"),count:p.prop("count"),offset:p.prop("offset"),primitive:"points"},w=t({},S);w.frag=i([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),w.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=p(w);var E=t({},S);E.frag=i([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),l&&(E.frag=E.frag.replace("smoothstep","smoothStep"),w.frag=w.frag.replace("smoothstep","smoothStep")),this.drawCircle=p(E)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var p=this,v=arguments.length,m=new Array(v),y=0;y<v;y++)m[y]=arguments[y];var _=this.groups;if(m.length===1&&Array.isArray(m[0])&&(m[0][0]===null||Array.isArray(m[0][0]))&&(m=m[0]),this.regl._refresh(),m.length)for(var f=0;f<m.length;f++)this.drawItem(f,m[f]);else _.forEach(function(S,w){p.drawItem(w)});return this},x.prototype.drawItem=function(p,v){var m,y=this.groups,_=y[p];if(typeof v=="number"&&(p=v,_=y[v],v=null),_&&_.count&&_.opacity){_.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,_,v));for(var f=[],S=1;S<_.activation.length;S++)_.activation[S]&&(_.activation[S]===!0||_.activation[S].data.length)&&f.push.apply(f,function(w){if(Array.isArray(w))return o(w)}(m=this.getMarkerDrawOptions(S,_,v))||function(w){if(typeof Symbol!="undefined"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(m)||k(m)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());f.length&&this.drawMarker(f)}},x.prototype.getMarkerDrawOptions=function(p,v,m){var y=v.range,_=v.tree,f=v.viewport,S=v.activation,w=v.selectionBuffer,E=v.count;if(this.regl,!_)return m?[t({},v,{markerTexture:this.markerTextures[p],activation:S[p],count:m.length,elements:m,offset:0})]:[t({},v,{markerTexture:this.markerTextures[p],activation:S[p],offset:0})];var P=[],C=_.range(y,{lod:!0,px:[(y[2]-y[0])/f.width,(y[3]-y[1])/f.height]});if(m){for(var O=S[p].data,R=new Uint8Array(E),j=0;j<m.length;j++){var D=m[j];R[D]=O?O[D]:1}w.subdata(R)}for(var N=C.length;N--;){var W=M(C[N],2),F=W[0],U=W[1];P.push(t({},v,{markerTexture:this.markerTextures[p],activation:m?w:S[p],offset:F,count:U-F}))}return P},x.prototype.update=function(){for(var p=this,v=arguments.length,m=new Array(v),y=0;y<v;y++)m[y]=arguments[y];if(m.length){m.length===1&&Array.isArray(m[0])&&(m=m[0]);var _=this.groups,f=this.gl,S=this.regl,w=this.maxSize,E=this.maxColors,P=this.palette;this.groups=_=m.map(function(C,O){var R=_[O];if(C===void 0)return R;C===null?C={positions:null}:typeof C=="function"?C={ondraw:C}:typeof C[0]=="number"&&(C={positions:C}),(C=n(C,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(C.positions=[]),C.tooManyColors!=null&&(p.tooManyColors=C.tooManyColors),R||(_[O]=R={id:O,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},C=t({},x.defaults,C)),C.positions&&!("marker"in C)&&(C.marker=R.marker,delete R.marker),C.marker&&!("positions"in C)&&(C.positions=R.positions,delete R.positions);var j=0,D=0;if(r(R,C,[{snap:!0,size:function(ge,de){return ge==null&&(ge=x.defaults.size),j+=ge&&ge.length?1:0,ge},borderSize:function(ge,de){return ge==null&&(ge=x.defaults.borderSize),j+=ge&&ge.length?1:0,ge},opacity:parseFloat,color:function(ge,de){return ge==null&&(ge=x.defaults.color),ge=p.updateColor(ge),D++,ge},borderColor:function(ge,de){return ge==null&&(ge=x.defaults.borderColor),ge=p.updateColor(ge),D++,ge},bounds:function(ge,de,ve){return"range"in ve||(ve.range=null),ge},positions:function(ge,de,ve){var pe=de.snap,_e=de.positionBuffer,Te=de.positionFractBuffer,le=de.selectionBuffer;if(ge.x||ge.y)return ge.x.length?de.xAttr={buffer:S.buffer(ge.x),offset:0,stride:4,count:ge.x.length}:de.xAttr={buffer:ge.x.buffer,offset:4*ge.x.offset||0,stride:4*(ge.x.stride||1),count:ge.x.count},ge.y.length?de.yAttr={buffer:S.buffer(ge.y),offset:0,stride:4,count:ge.y.length}:de.yAttr={buffer:ge.y.buffer,offset:4*ge.y.offset||0,stride:4*(ge.y.stride||1),count:ge.y.count},de.count=Math.max(de.xAttr.count,de.yAttr.count),ge;ge=a(ge,"float64");var ae=de.count=Math.floor(ge.length/2),he=de.bounds=ae?b(ge,2):null;if(ve.range||de.range||(delete de.range,ve.range=he),ve.marker||de.marker||(delete de.marker,ve.marker=null),pe&&(pe===!0||ae>pe)?de.tree=s(ge,{bounds:he}):pe&&pe.length&&(de.tree=pe),de.tree){var Se={primitive:"points",usage:"static",data:de.tree,type:"uint32"};de.elements?de.elements(Se):de.elements=S.elements(Se)}var ke=u.float32(ge);return _e({data:ke,usage:"dynamic"}),Te({data:u.fract32(ge,ke),usage:"dynamic"}),le({data:new Uint8Array(ae),type:"uint8",usage:"stream"}),ge}},{marker:function(ge,de,ve){var pe=de.activation;if(pe.forEach(function(ke){return ke&&ke.destroy&&ke.destroy()}),pe.length=0,ge&&typeof ge[0]!="number"){for(var _e=[],Te=0,le=Math.min(ge.length,de.count);Te<le;Te++){var ae=p.addMarker(ge[Te]);_e[ae]||(_e[ae]=new Uint8Array(de.count)),_e[ae][Te]=1}for(var he=0;he<_e.length;he++)if(_e[he]){var Se={data:_e[he],type:"uint8",usage:"static"};pe[he]?pe[he](Se):pe[he]=S.buffer(Se),pe[he].data=_e[he]}}else pe[p.addMarker(ge)]=!0;return ge},range:function(ge,de,ve){var pe=de.bounds;if(pe)return ge||(ge=pe),de.scale=[1/(ge[2]-ge[0]),1/(ge[3]-ge[1])],de.translate=[-ge[0],-ge[1]],de.scaleFract=u.fract(de.scale),de.translateFract=u.fract(de.translate),ge},viewport:function(ge){return d(ge||[f.drawingBufferWidth,f.drawingBufferHeight])}}]),j){var N=R,W=N.count,F=N.size,U=N.borderSize,V=N.sizeBuffer,te=new Uint8Array(2*W);if(F.length||U.length)for(var J=0;J<W;J++)te[2*J]=Math.round(255*(F[J]==null?F:F[J])/w),te[2*J+1]=Math.round(255*(U[J]==null?U:U[J])/w);V({data:te,usage:"dynamic"})}if(D){var K,X=R,Z=X.count,$=X.color,re=X.borderColor,oe=X.colorBuffer;if(p.tooManyColors){if($.length||re.length){K=new Uint8Array(8*Z);for(var ie=0;ie<Z;ie++){var ue=$[ie];K[8*ie]=P[4*ue],K[8*ie+1]=P[4*ue+1],K[8*ie+2]=P[4*ue+2],K[8*ie+3]=P[4*ue+3];var me=re[ie];K[8*ie+4]=P[4*me],K[8*ie+5]=P[4*me+1],K[8*ie+6]=P[4*me+2],K[8*ie+7]=P[4*me+3]}}}else if($.length||re.length){K=new Uint8Array(4*Z+2);for(var be=0;be<Z;be++)$[be]!=null&&(K[4*be]=$[be]%E,K[4*be+1]=Math.floor($[be]/E)),re[be]!=null&&(K[4*be+2]=re[be]%E,K[4*be+3]=Math.floor(re[be]/E))}oe({data:K||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return R})}},x.prototype.addMarker=function(p){var v,m=this.markerTextures,y=this.regl,_=this.markerCache,f=p==null?0:_.indexOf(p);if(f>=0)return f;if(p instanceof Uint8Array||p instanceof Uint8ClampedArray)v=p;else{v=new Uint8Array(p.length);for(var S=0,w=p.length;S<w;S++)v[S]=255*p[S]}var E=Math.floor(Math.sqrt(v.length));return f=m.length,_.push(p),m.push(y.texture({channels:1,data:v,radius:E,mag:"linear",min:"linear"})),f},x.prototype.updateColor=function(p){var v=this.paletteIds,m=this.palette,y=this.maxColors;Array.isArray(p)||(p=[p]);var _=[];if(typeof p[0]=="number"){var f=[];if(Array.isArray(p))for(var S=0;S<p.length;S+=4)f.push(p.slice(S,S+4));else for(var w=0;w<p.length;w+=4)f.push(p.subarray(w,w+4));p=f}for(var E=0;E<p.length;E++){var P=p[E];P=T(P,"uint8");var C=h(P,!1);if(v[C]==null){var O=m.length;v[C]=Math.floor(O/4),m[O]=P[0],m[O+1]=P[1],m[O+2]=P[2],m[O+3]=P[3]}_[E]=v[C]}return!this.tooManyColors&&m.length>4*y&&(this.tooManyColors=!0),this.updatePalette(m),_.length===1?_[0]:_},x.prototype.updatePalette=function(p){if(!this.tooManyColors){var v=this.maxColors,m=this.paletteTexture,y=Math.ceil(.25*p.length/v);if(y>1)for(var _=.25*(p=p.slice()).length%v;_<y*v;_++)p.push(0,0,0,0);m.height<y&&m.resize(v,y),m.subimage({width:Math.min(.25*p.length,v),height:y,data:p},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(p){p.sizeBuffer.destroy(),p.positionBuffer.destroy(),p.positionFractBuffer.destroy(),p.colorBuffer.destroy(),p.activation.forEach(function(v){return v&&v.destroy&&v.destroy()}),p.selectionBuffer.destroy(),p.elements&&p.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(p){return p&&p.destroy&&p.destroy()}),this};var g=e(50896);ee.exports=function(p,v){var m=new c(p,v),y=m.render.bind(m);return g(y,{render:y,update:m.update.bind(m),draw:m.draw.bind(m),destroy:m.destroy.bind(m),regl:m.regl,gl:m.gl,canvas:m.gl.canvas,groups:m.groups,markers:m.markerCache,palette:m.palette}),y}},55795:function(ee,z,e){"use strict";var M=e(38540),k=e(55616),o=e(76752),T=e(3951),b=e(67752),h=e(51160),s=e(47520);function t(a,l){if(!(this instanceof t))return new t(a,l);this.traces=[],this.passes={},this.regl=a,this.scatter=M(a),this.canvas=this.scatter.canvas}function i(a,l,u){return(a.id!=null?a.id:a)<<16|(255&l)<<8|255&u}function n(a,l,u){var d,c,x,g,p=a[l],v=a[u];return p.length>2?(p[0],p[2],d=p[1],c=p[3]):p.length?(d=p[0],c=p[1]):(p.x,d=p.y,p.x,p.width,c=p.y+p.height),v.length>2?(x=v[0],g=v[2],v[1],v[3]):v.length?(x=v[0],g=v[1]):(x=v.x,v.y,g=v.x+v.width,v.y,v.height),[x,d,g,c]}function r(a){if(typeof a=="number")return[a,a,a,a];if(a.length===2)return[a[0],a[1],a[0],a[1]];var l=h(a);return[l.x,l.y,l.x+l.width,l.y+l.height]}ee.exports=t,t.prototype.render=function(){for(var a,l=this,u=[],d=arguments.length;d--;)u[d]=arguments[d];return u.length&&(a=this).update.apply(a,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,T(function(){l.dirty=!1})),this)},t.prototype.update=function(){for(var a,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var d=0;d<l.length;d++)this.updateItem(d,l[d]);this.traces=this.traces.filter(Boolean);for(var c=[],x=0,g=0;g<this.traces.length;g++){for(var p=this.traces[g],v=this.traces[g].passes,m=0;m<v.length;m++)c.push(this.passes[v[m]]);p.passOffset=x,x+=p.passes.length}return(a=this.scatter).update.apply(a,c),this}},t.prototype.updateItem=function(a,l){var u=this.regl;if(l===null)return this.traces[a]=null,this;if(!l)return this;var d,c=k(l,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),x=this.traces[a]||(this.traces[a]={id:a,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:h([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(x.color=c.color),c.size!=null&&(x.size=c.size),c.marker!=null&&(x.marker=c.marker),c.borderColor!=null&&(x.borderColor=c.borderColor),c.borderSize!=null&&(x.borderSize=c.borderSize),c.opacity!=null&&(x.opacity=c.opacity),c.viewport&&(x.viewport=h(c.viewport)),c.diagonal!=null&&(x.diagonal=c.diagonal),c.upper!=null&&(x.upper=c.upper),c.lower!=null&&(x.lower=c.lower),c.data){x.buffer(s(c.data)),x.columns=c.data.length,x.count=c.data[0].length,x.bounds=[];for(var g=0;g<x.columns;g++)x.bounds[g]=o(c.data[g],1)}c.range&&(x.range=c.range,d=x.range&&typeof x.range[0]!="number"),c.domain&&(x.domain=c.domain);var p=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===x.columns&&typeof c.padding[c.padding.length-1]=="number"?(x.padding=c.padding.map(r),p=!0):x.padding=r(c.padding));var v=x.columns,m=x.count,y=x.viewport.width,_=x.viewport.height,f=x.viewport.x,S=x.viewport.y,w=y/v,E=_/v;x.passes=[];for(var P=0;P<v;P++)for(var C=0;C<v;C++)if((x.diagonal||C!==P)&&(x.upper||!(P>C))&&(x.lower||!(P<C))){var O=i(x.id,P,C),R=this.passes[O]||(this.passes[O]={});if(c.data&&(c.transpose?R.positions={x:{buffer:x.buffer,offset:C,count:m,stride:v},y:{buffer:x.buffer,offset:P,count:m,stride:v}}:R.positions={x:{buffer:x.buffer,offset:C*m,count:m},y:{buffer:x.buffer,offset:P*m,count:m}},R.bounds=n(x.bounds,P,C)),c.domain||c.viewport||c.data){var j=p?n(x.padding,P,C):x.padding;if(x.domain){var D=n(x.domain,P,C),N=D[0],W=D[1],F=D[2],U=D[3];R.viewport=[f+N*y+j[0],S+W*_+j[1],f+F*y-j[2],S+U*_-j[3]]}else R.viewport=[f+C*w+w*j[0],S+P*E+E*j[1],f+(C+1)*w-w*j[2],S+(P+1)*E-E*j[3]]}c.color&&(R.color=x.color),c.size&&(R.size=x.size),c.marker&&(R.marker=x.marker),c.borderSize&&(R.borderSize=x.borderSize),c.borderColor&&(R.borderColor=x.borderColor),c.opacity&&(R.opacity=x.opacity),c.range&&(R.range=d?n(x.range,P,C):x.range||R.bounds),x.passes.push(O)}return this},t.prototype.draw=function(){for(var a,l=[],u=arguments.length;u--;)l[u]=arguments[u];if(l.length){for(var d=[],c=0;c<l.length;c++)if(typeof l[c]=="number"){var x=this.traces[l[c]],g=x.passes,p=x.passOffset;d.push.apply(d,b(p,p+g.length))}else if(l[c].length){var v=l[c],m=this.traces[c],y=m.passes,_=m.passOffset;y=y.map(function(f,S){d[_+S]=v})}(a=this.scatter).draw.apply(a,d)}else this.scatter.draw();return this},t.prototype.destroy=function(){return this.traces.forEach(function(a){a.buffer&&a.buffer.destroy&&a.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},28624:function(ee){ee.exports=function(){function z(Be,Ge){this.id=re++,this.type=Be,this.data=Ge}function e(Be){if(Be.length===0)return[];var Ge=Be.charAt(0),at=Be.charAt(Be.length-1);if(1<Be.length&&Ge===at&&(Ge==='"'||Ge==="'"))return['"'+Be.substr(1,Be.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ge=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Be))return e(Be.substr(0,Ge.index)).concat(e(Ge[1])).concat(e(Be.substr(Ge.index+Ge[0].length)));if((Ge=Be.split(".")).length===1)return['"'+Be.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Be=[],at=0;at<Ge.length;++at)Be=Be.concat(e(Ge[at]));return Be}function M(Be){return"["+e(Be).join("][")+"]"}function k(Be){return typeof Be=="string"?Be.split():Be}function o(Be){return typeof Be=="string"?document.querySelector(Be):Be}function T(Be){var Ge,at,nt,Re,Fe=Be||{};Be={};var rt=[],Ye=[],ct=typeof window=="undefined"?1:window.devicePixelRatio,pt=!1,gt={},ut=function(xt){},Mt=function(){};if(typeof Fe=="string"?Ge=document.querySelector(Fe):typeof Fe=="object"&&(typeof Fe.nodeName=="string"&&typeof Fe.appendChild=="function"&&typeof Fe.getBoundingClientRect=="function"?Ge=Fe:typeof Fe.drawArrays=="function"||typeof Fe.drawElements=="function"?nt=(Re=Fe).canvas:("gl"in Fe?Re=Fe.gl:"canvas"in Fe?nt=o(Fe.canvas):"container"in Fe&&(at=o(Fe.container)),"attributes"in Fe&&(Be=Fe.attributes),"extensions"in Fe&&(rt=k(Fe.extensions)),"optionalExtensions"in Fe&&(Ye=k(Fe.optionalExtensions)),"onDone"in Fe&&(ut=Fe.onDone),"profile"in Fe&&(pt=!!Fe.profile),"pixelRatio"in Fe&&(ct=+Fe.pixelRatio),"cachedCode"in Fe&&(gt=Fe.cachedCode))),Ge&&(Ge.nodeName.toLowerCase()==="canvas"?nt=Ge:at=Ge),!Re){if(!nt){if(!(Ge=function(xt,mt,Et){function Lt(){var rn=window.innerWidth,Ut=window.innerHeight;xt!==document.body&&(rn=(Ut=Wt.getBoundingClientRect()).right-Ut.left,Ut=Ut.bottom-Ut.top),Wt.width=Et*rn,Wt.height=Et*Ut}var zt,Wt=document.createElement("canvas");return $(Wt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),xt.appendChild(Wt),xt===document.body&&(Wt.style.position="absolute",$(xt.style,{margin:0,padding:0})),xt!==document.body&&typeof ResizeObserver=="function"?(zt=new ResizeObserver(function(){setTimeout(Lt)})).observe(xt):window.addEventListener("resize",Lt,!1),Lt(),{canvas:Wt,onDestroy:function(){zt?zt.disconnect():window.removeEventListener("resize",Lt),xt.removeChild(Wt)}}}(at||document.body,0,ct)))return null;nt=Ge.canvas,Mt=Ge.onDestroy}Be.premultipliedAlpha===void 0&&(Be.premultipliedAlpha=!0),Re=function(xt,mt){function Et(Lt){try{return xt.getContext(Lt,mt)}catch(zt){return null}}return Et("webgl")||Et("experimental-webgl")||Et("webgl-experimental")}(nt,Be)}return Re?{gl:Re,canvas:nt,container:at,extensions:rt,optionalExtensions:Ye,pixelRatio:ct,profile:pt,cachedCode:gt,onDone:ut,onDestroy:Mt}:(Mt(),ut("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function b(Be,Ge){for(var at=Array(Be),nt=0;nt<Be;++nt)at[nt]=Ge(nt);return at}function h(Be){var Ge,at;return Ge=(65535<Be)<<4,Ge|=at=(255<(Be>>>=Ge))<<3,(Ge|=at=(15<(Be>>>=at))<<2)|(at=(3<(Be>>>=at))<<1)|Be>>>at>>1}function s(){function Be(nt){e:{for(var Re=16;268435456>=Re;Re*=16)if(nt<=Re){nt=Re;break e}nt=0}return 0<(Re=at[h(nt)>>2]).length?Re.pop():new ArrayBuffer(nt)}function Ge(nt){at[h(nt.byteLength)>>2].push(nt)}var at=b(8,function(){return[]});return{alloc:Be,free:Ge,allocType:function(nt,Re){var Fe=null;switch(nt){case 5120:Fe=new Int8Array(Be(Re),0,Re);break;case 5121:Fe=new Uint8Array(Be(Re),0,Re);break;case 5122:Fe=new Int16Array(Be(2*Re),0,Re);break;case 5123:Fe=new Uint16Array(Be(2*Re),0,Re);break;case 5124:Fe=new Int32Array(Be(4*Re),0,Re);break;case 5125:Fe=new Uint32Array(Be(4*Re),0,Re);break;case 5126:Fe=new Float32Array(Be(4*Re),0,Re);break;default:return null}return Fe.length!==Re?Fe.subarray(0,Re):Fe},freeType:function(nt){Ge(nt.buffer)}}}function t(Be){return!!Be&&typeof Be=="object"&&Array.isArray(Be.shape)&&Array.isArray(Be.stride)&&typeof Be.offset=="number"&&Be.shape.length===Be.stride.length&&(Array.isArray(Be.data)||ge(Be.data))}function i(Be,Ge,at,nt,Re,Fe){for(var rt=0;rt<Ge;++rt)for(var Ye=Be[rt],ct=0;ct<at;++ct)for(var pt=Ye[ct],gt=0;gt<nt;++gt)Re[Fe++]=pt[gt]}function n(Be,Ge,at,nt,Re){for(var Fe=1,rt=at+1;rt<Ge.length;++rt)Fe*=Ge[rt];var Ye=Ge[at];if(Ge.length-at==4){var ct=Ge[at+1],pt=Ge[at+2];for(Ge=Ge[at+3],rt=0;rt<Ye;++rt)i(Be[rt],ct,pt,Ge,nt,Re),Re+=Fe}else for(rt=0;rt<Ye;++rt)n(Be[rt],Ge,at+1,nt,Re),Re+=Fe}function r(Be){return 0|pe[Object.prototype.toString.call(Be)]}function a(Be,Ge){for(var at=0;at<Ge.length;++at)Be[at]=Ge[at]}function l(Be,Ge,at,nt,Re,Fe,rt){for(var Ye=0,ct=0;ct<at;++ct)for(var pt=0;pt<nt;++pt)Be[Ye++]=Ge[Re*ct+Fe*pt+rt]}function u(Be,Ge,at,nt){function Re(ut){this.id=ct++,this.buffer=Be.createBuffer(),this.type=ut,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,at.profile&&(this.stats={size:0})}function Fe(ut,Mt,xt){ut.byteLength=Mt.byteLength,Be.bufferData(ut.type,Mt,xt)}function rt(ut,Mt,xt,mt,Et,Lt){if(ut.usage=xt,Array.isArray(Mt)){if(ut.dtype=mt||5126,0<Mt.length)if(Array.isArray(Mt[0])){Et=ae(Mt);for(var zt=mt=1;zt<Et.length;++zt)mt*=Et[zt];ut.dimension=mt,Fe(ut,Mt=le(Mt,Et,ut.dtype),xt),Lt?ut.persistentData=Mt:me.freeType(Mt)}else typeof Mt[0]=="number"?(ut.dimension=Et,a(Et=me.allocType(ut.dtype,Mt.length),Mt),Fe(ut,Et,xt),Lt?ut.persistentData=Et:me.freeType(Et)):ge(Mt[0])&&(ut.dimension=Mt[0].length,ut.dtype=mt||r(Mt[0])||5126,Fe(ut,Mt=le(Mt,[Mt.length,Mt[0].length],ut.dtype),xt),Lt?ut.persistentData=Mt:me.freeType(Mt))}else if(ge(Mt))ut.dtype=mt||r(Mt),ut.dimension=Et,Fe(ut,Mt,xt),Lt&&(ut.persistentData=new Uint8Array(new Uint8Array(Mt.buffer)));else if(t(Mt)){Et=Mt.shape;var Wt=Mt.stride,rn=(zt=Mt.offset,0),Ut=0,Vt=0,en=0;Et.length===1?(rn=Et[0],Ut=1,Vt=Wt[0],en=0):Et.length===2&&(rn=Et[0],Ut=Et[1],Vt=Wt[0],en=Wt[1]),ut.dtype=mt||r(Mt.data)||5126,ut.dimension=Ut,l(Et=me.allocType(ut.dtype,rn*Ut),Mt.data,rn,Ut,Vt,en,zt),Fe(ut,Et,xt),Lt?ut.persistentData=Et:me.freeType(Et)}else Mt instanceof ArrayBuffer&&(ut.dtype=5121,ut.dimension=Et,Fe(ut,Mt,xt),Lt&&(ut.persistentData=new Uint8Array(new Uint8Array(Mt))))}function Ye(ut){Ge.bufferCount--,nt(ut),Be.deleteBuffer(ut.buffer),ut.buffer=null,delete pt[ut.id]}var ct=0,pt={};Re.prototype.bind=function(){Be.bindBuffer(this.type,this.buffer)},Re.prototype.destroy=function(){Ye(this)};var gt=[];return at.profile&&(Ge.getTotalBufferSize=function(){var ut=0;return Object.keys(pt).forEach(function(Mt){ut+=pt[Mt].stats.size}),ut}),{create:function(ut,Mt,xt,mt){function Et(zt){var Wt=35044,rn=null,Ut=0,Vt=0,en=1;return Array.isArray(zt)||ge(zt)||t(zt)||zt instanceof ArrayBuffer?rn=zt:typeof zt=="number"?Ut=0|zt:zt&&("data"in zt&&(rn=zt.data),"usage"in zt&&(Wt=Te[zt.usage]),"type"in zt&&(Vt=_e[zt.type]),"dimension"in zt&&(en=0|zt.dimension),"length"in zt&&(Ut=0|zt.length)),Lt.bind(),rn?rt(Lt,rn,Wt,Vt,en,mt):(Ut&&Be.bufferData(Lt.type,Ut,Wt),Lt.dtype=Vt||5121,Lt.usage=Wt,Lt.dimension=en,Lt.byteLength=Ut),at.profile&&(Lt.stats.size=Lt.byteLength*he[Lt.dtype]),Et}Ge.bufferCount++;var Lt=new Re(Mt);return pt[Lt.id]=Lt,xt||Et(ut),Et._reglType="buffer",Et._buffer=Lt,Et.subdata=function(zt,Wt){var rn,Ut=0|(Wt||0);if(Lt.bind(),ge(zt)||zt instanceof ArrayBuffer)Be.bufferSubData(Lt.type,Ut,zt);else if(Array.isArray(zt)){if(0<zt.length)if(typeof zt[0]=="number"){var Vt=me.allocType(Lt.dtype,zt.length);a(Vt,zt),Be.bufferSubData(Lt.type,Ut,Vt),me.freeType(Vt)}else(Array.isArray(zt[0])||ge(zt[0]))&&(rn=ae(zt),Vt=le(zt,rn,Lt.dtype),Be.bufferSubData(Lt.type,Ut,Vt),me.freeType(Vt))}else if(t(zt)){rn=zt.shape;var en=zt.stride,Ln=Vt=0,An=0,hn=0;rn.length===1?(Vt=rn[0],Ln=1,An=en[0],hn=0):rn.length===2&&(Vt=rn[0],Ln=rn[1],An=en[0],hn=en[1]),rn=Array.isArray(zt.data)?Lt.dtype:r(zt.data),l(rn=me.allocType(rn,Vt*Ln),zt.data,Vt,Ln,An,hn,zt.offset),Be.bufferSubData(Lt.type,Ut,rn),me.freeType(rn)}return Et},at.profile&&(Et.stats=Lt.stats),Et.destroy=function(){Ye(Lt)},Et},createStream:function(ut,Mt){var xt=gt.pop();return xt||(xt=new Re(ut)),xt.bind(),rt(xt,Mt,35040,0,1,!1),xt},destroyStream:function(ut){gt.push(ut)},clear:function(){de(pt).forEach(Ye),gt.forEach(Ye)},getBuffer:function(ut){return ut&&ut._buffer instanceof Re?ut._buffer:null},restore:function(){de(pt).forEach(function(ut){ut.buffer=Be.createBuffer(),Be.bindBuffer(ut.type,ut.buffer),Be.bufferData(ut.type,ut.persistentData||ut.byteLength,ut.usage)})},_initBuffer:rt}}function d(Be,Ge,at,nt){function Re(ut){this.id=ct++,Ye[this.id]=this,this.buffer=ut,this.primType=4,this.type=this.vertCount=0}function Fe(ut,Mt,xt,mt,Et,Lt,zt){var Wt;if(ut.buffer.bind(),Mt?((Wt=zt)||ge(Mt)&&(!t(Mt)||ge(Mt.data))||(Wt=Ge.oes_element_index_uint?5125:5123),at._initBuffer(ut.buffer,Mt,xt,Wt,3)):(Be.bufferData(34963,Lt,xt),ut.buffer.dtype=Wt||5121,ut.buffer.usage=xt,ut.buffer.dimension=3,ut.buffer.byteLength=Lt),Wt=zt,!zt){switch(ut.buffer.dtype){case 5121:case 5120:Wt=5121;break;case 5123:case 5122:Wt=5123;break;case 5125:case 5124:Wt=5125}ut.buffer.dtype=Wt}ut.type=Wt,0>(Mt=Et)&&(Mt=ut.buffer.byteLength,Wt===5123?Mt>>=1:Wt===5125&&(Mt>>=2)),ut.vertCount=Mt,Mt=mt,0>mt&&(Mt=4,(mt=ut.buffer.dimension)===1&&(Mt=0),mt===2&&(Mt=1),mt===3&&(Mt=4)),ut.primType=Mt}function rt(ut){nt.elementsCount--,delete Ye[ut.id],ut.buffer.destroy(),ut.buffer=null}var Ye={},ct=0,pt={uint8:5121,uint16:5123};Ge.oes_element_index_uint&&(pt.uint32=5125),Re.prototype.bind=function(){this.buffer.bind()};var gt=[];return{create:function(ut,Mt){function xt(Lt){if(Lt)if(typeof Lt=="number")mt(Lt),Et.primType=4,Et.vertCount=0|Lt,Et.type=5121;else{var zt=null,Wt=35044,rn=-1,Ut=-1,Vt=0,en=0;Array.isArray(Lt)||ge(Lt)||t(Lt)?zt=Lt:("data"in Lt&&(zt=Lt.data),"usage"in Lt&&(Wt=Te[Lt.usage]),"primitive"in Lt&&(rn=Se[Lt.primitive]),"count"in Lt&&(Ut=0|Lt.count),"type"in Lt&&(en=pt[Lt.type]),"length"in Lt?Vt=0|Lt.length:(Vt=Ut,en===5123||en===5122?Vt*=2:en!==5125&&en!==5124||(Vt*=4))),Fe(Et,zt,Wt,rn,Ut,Vt,en)}else mt(),Et.primType=4,Et.vertCount=0,Et.type=5121;return xt}var mt=at.create(null,34963,!0),Et=new Re(mt._buffer);return nt.elementsCount++,xt(ut),xt._reglType="elements",xt._elements=Et,xt.subdata=function(Lt,zt){return mt.subdata(Lt,zt),xt},xt.destroy=function(){rt(Et)},xt},createStream:function(ut){var Mt=gt.pop();return Mt||(Mt=new Re(at.create(null,34963,!0,!1)._buffer)),Fe(Mt,ut,35040,-1,-1,0,0),Mt},destroyStream:function(ut){gt.push(ut)},getElements:function(ut){return typeof ut=="function"&&ut._elements instanceof Re?ut._elements:null},clear:function(){de(Ye).forEach(rt)}}}function c(Be){for(var Ge=me.allocType(5123,Be.length),at=0;at<Be.length;++at)if(isNaN(Be[at]))Ge[at]=65535;else if(Be[at]===1/0)Ge[at]=31744;else if(Be[at]===-1/0)Ge[at]=64512;else{ke[0]=Be[at];var nt=(Fe=Me[0])>>>31<<15,Re=(Fe<<1>>>24)-127,Fe=Fe>>13&1023;Ge[at]=-24>Re?nt:-14>Re?nt+(Fe+1024>>-14-Re):15<Re?nt+31744:nt+(Re+15<<10)+Fe}return Ge}function x(Be){return Array.isArray(Be)||ge(Be)}function g(Be){return"[object "+Be+"]"}function p(Be){return Array.isArray(Be)&&(Be.length===0||typeof Be[0]=="number")}function v(Be){return!(!Array.isArray(Be)||Be.length===0||!x(Be[0]))}function m(Be){return Object.prototype.toString.call(Be)}function y(Be){if(!Be)return!1;var Ge=m(Be);return 0<=Ve.indexOf(Ge)||p(Be)||v(Be)||t(Be)}function _(Be,Ge){Be.type===36193?(Be.data=c(Ge),me.freeType(Ge)):Be.data=Ge}function f(Be,Ge,at,nt,Re,Fe){if(Be=it[Be]!==void 0?it[Be]:fe[Be]*Ze[Ge],Fe&&(Be*=6),Re){for(nt=0;1<=at;)nt+=Be*at*at,at/=2;return nt}return Be*at*nt}function S(Be,Ge,at,nt,Re,Fe,rt){function Ye(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ct(Gt,dn){Gt.internalformat=dn.internalformat,Gt.format=dn.format,Gt.type=dn.type,Gt.compressed=dn.compressed,Gt.premultiplyAlpha=dn.premultiplyAlpha,Gt.flipY=dn.flipY,Gt.unpackAlignment=dn.unpackAlignment,Gt.colorSpace=dn.colorSpace,Gt.width=dn.width,Gt.height=dn.height,Gt.channels=dn.channels}function pt(Gt,dn){if(typeof dn=="object"&&dn){"premultiplyAlpha"in dn&&(Gt.premultiplyAlpha=dn.premultiplyAlpha),"flipY"in dn&&(Gt.flipY=dn.flipY),"alignment"in dn&&(Gt.unpackAlignment=dn.alignment),"colorSpace"in dn&&(Gt.colorSpace=In[dn.colorSpace]),"type"in dn&&(Gt.type=Pn[dn.type]);var Pt=Gt.width,Yt=Gt.height,Qt=Gt.channels,mn=!1;"shape"in dn?(Pt=dn.shape[0],Yt=dn.shape[1],dn.shape.length===3&&(Qt=dn.shape[2],mn=!0)):("radius"in dn&&(Pt=Yt=dn.radius),"width"in dn&&(Pt=dn.width),"height"in dn&&(Yt=dn.height),"channels"in dn&&(Qt=dn.channels,mn=!0)),Gt.width=0|Pt,Gt.height=0|Yt,Gt.channels=0|Qt,Pt=!1,"format"in dn&&(Pt=dn.format,Yt=Gt.internalformat=Hn[Pt],Gt.format=xn[Yt],Pt in Pn&&!("type"in dn)&&(Gt.type=Pn[Pt]),Pt in Fn&&(Gt.compressed=!0),Pt=!0),!mn&&Pt?Gt.channels=fe[Gt.format]:mn&&!Pt&&Gt.channels!==De[Gt.format]&&(Gt.format=Gt.internalformat=De[Gt.channels])}}function gt(Gt){Be.pixelStorei(37440,Gt.flipY),Be.pixelStorei(37441,Gt.premultiplyAlpha),Be.pixelStorei(37443,Gt.colorSpace),Be.pixelStorei(3317,Gt.unpackAlignment)}function ut(){Ye.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Mt(Gt,dn){var Pt=null;if(y(dn)?Pt=dn:dn&&(pt(Gt,dn),"x"in dn&&(Gt.xOffset=0|dn.x),"y"in dn&&(Gt.yOffset=0|dn.y),y(dn.data)&&(Pt=dn.data)),dn.copy){var Yt=Re.viewportWidth,Qt=Re.viewportHeight;Gt.width=Gt.width||Yt-Gt.xOffset,Gt.height=Gt.height||Qt-Gt.yOffset,Gt.needsCopy=!0}else if(Pt){if(ge(Pt))Gt.channels=Gt.channels||4,Gt.data=Pt,"type"in dn||Gt.type!==5121||(Gt.type=0|pe[Object.prototype.toString.call(Pt)]);else if(p(Pt)){switch(Gt.channels=Gt.channels||4,Qt=(Yt=Pt).length,Gt.type){case 5121:case 5123:case 5125:case 5126:(Qt=me.allocType(Gt.type,Qt)).set(Yt),Gt.data=Qt;break;case 36193:Gt.data=c(Yt)}Gt.alignment=1,Gt.needsFree=!0}else if(t(Pt)){Yt=Pt.data,Array.isArray(Yt)||Gt.type!==5121||(Gt.type=0|pe[Object.prototype.toString.call(Yt)]),Qt=Pt.shape;var mn,vn,_n,sn,Kt=Pt.stride;Qt.length===3?(_n=Qt[2],sn=Kt[2]):sn=_n=1,mn=Qt[0],vn=Qt[1],Qt=Kt[0],Kt=Kt[1],Gt.alignment=1,Gt.width=mn,Gt.height=vn,Gt.channels=_n,Gt.format=Gt.internalformat=De[_n],Gt.needsFree=!0,mn=sn,Pt=Pt.offset,_n=Gt.width,sn=Gt.height,vn=Gt.channels;for(var Jt=me.allocType(Gt.type===36193?5126:Gt.type,_n*sn*vn),on=0,fn=0;fn<sn;++fn)for(var En=0;En<_n;++En)for(var On=0;On<vn;++On)Jt[on++]=Yt[Qt*En+Kt*fn+mn*On+Pt];_(Gt,Jt)}else if(m(Pt)===xe||m(Pt)===we||m(Pt)===Oe)m(Pt)===xe||m(Pt)===we?Gt.element=Pt:Gt.element=Pt.canvas,Gt.width=Gt.element.width,Gt.height=Gt.element.height,Gt.channels=4;else if(m(Pt)===ze)Gt.element=Pt,Gt.width=Pt.width,Gt.height=Pt.height,Gt.channels=4;else if(m(Pt)===Pe)Gt.element=Pt,Gt.width=Pt.naturalWidth,Gt.height=Pt.naturalHeight,Gt.channels=4;else if(m(Pt)===Ue)Gt.element=Pt,Gt.width=Pt.videoWidth,Gt.height=Pt.videoHeight,Gt.channels=4;else if(v(Pt)){for(Yt=Gt.width||Pt[0].length,Qt=Gt.height||Pt.length,Kt=Gt.channels,Kt=x(Pt[0][0])?Kt||Pt[0][0].length:Kt||1,mn=ve.shape(Pt),_n=1,sn=0;sn<mn.length;++sn)_n*=mn[sn];_n=me.allocType(Gt.type===36193?5126:Gt.type,_n),ve.flatten(Pt,mn,"",_n),_(Gt,_n),Gt.alignment=1,Gt.width=Yt,Gt.height=Qt,Gt.channels=Kt,Gt.format=Gt.internalformat=De[Kt],Gt.needsFree=!0}}else Gt.width=Gt.width||1,Gt.height=Gt.height||1,Gt.channels=Gt.channels||4}function xt(Gt,dn,Pt,Yt,Qt){var mn=Gt.element,vn=Gt.data,_n=Gt.internalformat,sn=Gt.format,Kt=Gt.type,Jt=Gt.width,on=Gt.height;gt(Gt),mn?Be.texSubImage2D(dn,Qt,Pt,Yt,sn,Kt,mn):Gt.compressed?Be.compressedTexSubImage2D(dn,Qt,Pt,Yt,_n,Jt,on,vn):Gt.needsCopy?(nt(),Be.copyTexSubImage2D(dn,Qt,Pt,Yt,Gt.xOffset,Gt.yOffset,Jt,on)):Be.texSubImage2D(dn,Qt,Pt,Yt,Jt,on,sn,Kt,vn)}function mt(){return pn.pop()||new ut}function Et(Gt){Gt.needsFree&&me.freeType(Gt.data),ut.call(Gt),pn.push(Gt)}function Lt(){Ye.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function zt(Gt,dn,Pt){var Yt=Gt.images[0]=mt();Gt.mipmask=1,Yt.width=Gt.width=dn,Yt.height=Gt.height=Pt,Yt.channels=Gt.channels=4}function Wt(Gt,dn){var Pt=null;if(y(dn))ct(Pt=Gt.images[0]=mt(),Gt),Mt(Pt,dn),Gt.mipmask=1;else if(pt(Gt,dn),Array.isArray(dn.mipmap))for(var Yt=dn.mipmap,Qt=0;Qt<Yt.length;++Qt)ct(Pt=Gt.images[Qt]=mt(),Gt),Pt.width>>=Qt,Pt.height>>=Qt,Mt(Pt,Yt[Qt]),Gt.mipmask|=1<<Qt;else ct(Pt=Gt.images[0]=mt(),Gt),Mt(Pt,dn),Gt.mipmask=1;ct(Gt,Gt.images[0])}function rn(Gt,dn){for(var Pt=Gt.images,Yt=0;Yt<Pt.length&&Pt[Yt];++Yt){var Qt=Pt[Yt],mn=dn,vn=Yt,_n=Qt.element,sn=Qt.data,Kt=Qt.internalformat,Jt=Qt.format,on=Qt.type,fn=Qt.width,En=Qt.height;gt(Qt),_n?Be.texImage2D(mn,vn,Jt,Jt,on,_n):Qt.compressed?Be.compressedTexImage2D(mn,vn,Kt,fn,En,0,sn):Qt.needsCopy?(nt(),Be.copyTexImage2D(mn,vn,Jt,Qt.xOffset,Qt.yOffset,fn,En,0)):Be.texImage2D(mn,vn,Jt,fn,En,0,Jt,on,sn||null)}}function Ut(){var Gt=Sn.pop()||new Lt;Ye.call(Gt);for(var dn=Gt.mipmask=0;16>dn;++dn)Gt.images[dn]=null;return Gt}function Vt(Gt){for(var dn=Gt.images,Pt=0;Pt<dn.length;++Pt)dn[Pt]&&Et(dn[Pt]),dn[Pt]=null;Sn.push(Gt)}function en(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Ln(Gt,dn){"min"in dn&&(Gt.minFilter=zn[dn.min],0<=Ee.indexOf(Gt.minFilter)&&!("faces"in dn)&&(Gt.genMipmaps=!0)),"mag"in dn&&(Gt.magFilter=Mn[dn.mag]);var Pt=Gt.wrapS,Yt=Gt.wrapT;if("wrap"in dn){var Qt=dn.wrap;typeof Qt=="string"?Pt=Yt=Tn[Qt]:Array.isArray(Qt)&&(Pt=Tn[Qt[0]],Yt=Tn[Qt[1]])}else"wrapS"in dn&&(Pt=Tn[dn.wrapS]),"wrapT"in dn&&(Yt=Tn[dn.wrapT]);if(Gt.wrapS=Pt,Gt.wrapT=Yt,"anisotropic"in dn&&(Gt.anisotropic=dn.anisotropic),"mipmap"in dn){switch(Pt=!1,typeof dn.mipmap){case"string":Gt.mipmapHint=cn[dn.mipmap],Pt=Gt.genMipmaps=!0;break;case"boolean":Pt=Gt.genMipmaps=dn.mipmap;break;case"object":Gt.genMipmaps=!1,Pt=!0}!Pt||"min"in dn||(Gt.minFilter=9984)}}function An(Gt,dn){Be.texParameteri(dn,10241,Gt.minFilter),Be.texParameteri(dn,10240,Gt.magFilter),Be.texParameteri(dn,10242,Gt.wrapS),Be.texParameteri(dn,10243,Gt.wrapT),Ge.ext_texture_filter_anisotropic&&Be.texParameteri(dn,34046,Gt.anisotropic),Gt.genMipmaps&&(Be.hint(33170,Gt.mipmapHint),Be.generateMipmap(dn))}function hn(Gt){Ye.call(this),this.mipmask=0,this.internalformat=6408,this.id=Gn++,this.refCount=1,this.target=Gt,this.texture=Be.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new en,rt.profile&&(this.stats={size:0})}function Xt(Gt){Be.activeTexture(33984),Be.bindTexture(Gt.target,Gt.texture)}function ln(){var Gt=ir[0];Gt?Be.bindTexture(Gt.target,Gt.texture):Be.bindTexture(3553,null)}function nn(Gt){var dn=Gt.texture,Pt=Gt.unit,Yt=Gt.target;0<=Pt&&(Be.activeTexture(33984+Pt),Be.bindTexture(Yt,null),ir[Pt]=null),Be.deleteTexture(dn),Gt.texture=null,Gt.params=null,Gt.pixels=null,Gt.refCount=0,delete Rn[Gt.id],Fe.textureCount--}var cn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Tn={repeat:10497,clamp:33071,mirror:33648},Mn={nearest:9728,linear:9729},zn=$({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Mn),In={none:0,browser:37444},Pn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Hn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Fn={};Ge.ext_srgb&&(Hn.srgb=35904,Hn.srgba=35906),Ge.oes_texture_float&&(Pn.float32=Pn.float=5126),Ge.oes_texture_half_float&&(Pn.float16=Pn["half float"]=36193),Ge.webgl_depth_texture&&($(Hn,{depth:6402,"depth stencil":34041}),$(Pn,{uint16:5123,uint32:5125,"depth stencil":34042})),Ge.webgl_compressed_texture_s3tc&&$(Fn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ge.webgl_compressed_texture_atc&&$(Fn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ge.webgl_compressed_texture_pvrtc&&$(Fn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ge.webgl_compressed_texture_etc1&&(Fn["rgb etc1"]=36196);var tr=Array.prototype.slice.call(Be.getParameter(34467));Object.keys(Fn).forEach(function(Gt){var dn=Fn[Gt];0<=tr.indexOf(dn)&&(Hn[Gt]=dn)});var or=Object.keys(Hn);at.textureFormats=or;var ur=[];Object.keys(Hn).forEach(function(Gt){ur[Hn[Gt]]=Gt});var er=[];Object.keys(Pn).forEach(function(Gt){er[Pn[Gt]]=Gt});var Mr=[];Object.keys(Mn).forEach(function(Gt){Mr[Mn[Gt]]=Gt});var jt=[];Object.keys(zn).forEach(function(Gt){jt[zn[Gt]]=Gt});var tn=[];Object.keys(Tn).forEach(function(Gt){tn[Tn[Gt]]=Gt});var xn=or.reduce(function(Gt,dn){var Pt=Hn[dn];return Pt===6409||Pt===6406||Pt===6409||Pt===6410||Pt===6402||Pt===34041||Ge.ext_srgb&&(Pt===35904||Pt===35906)?Gt[Pt]=Pt:Pt===32855||0<=dn.indexOf("rgba")?Gt[Pt]=6408:Gt[Pt]=6407,Gt},{}),pn=[],Sn=[],Gn=0,Rn={},Nn=at.maxTextureUnits,ir=Array(Nn).map(function(){return null});return $(hn.prototype,{bind:function(){this.bindCount+=1;var Gt=this.unit;if(0>Gt){for(var dn=0;dn<Nn;++dn){var Pt=ir[dn];if(Pt){if(0<Pt.bindCount)continue;Pt.unit=-1}ir[dn]=this,Gt=dn;break}rt.profile&&Fe.maxTextureUnits<Gt+1&&(Fe.maxTextureUnits=Gt+1),this.unit=Gt,Be.activeTexture(33984+Gt),Be.bindTexture(this.target,this.texture)}return Gt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&nn(this)}}),rt.profile&&(Fe.getTotalTextureSize=function(){var Gt=0;return Object.keys(Rn).forEach(function(dn){Gt+=Rn[dn].stats.size}),Gt}),{create2D:function(Gt,dn){function Pt(Qt,mn){var vn=Yt.texInfo;en.call(vn);var _n=Ut();return typeof Qt=="number"?zt(_n,0|Qt,typeof mn=="number"?0|mn:0|Qt):Qt?(Ln(vn,Qt),Wt(_n,Qt)):zt(_n,1,1),vn.genMipmaps&&(_n.mipmask=(_n.width<<1)-1),Yt.mipmask=_n.mipmask,ct(Yt,_n),Yt.internalformat=_n.internalformat,Pt.width=_n.width,Pt.height=_n.height,Xt(Yt),rn(_n,3553),An(vn,3553),ln(),Vt(_n),rt.profile&&(Yt.stats.size=f(Yt.internalformat,Yt.type,_n.width,_n.height,vn.genMipmaps,!1)),Pt.format=ur[Yt.internalformat],Pt.type=er[Yt.type],Pt.mag=Mr[vn.magFilter],Pt.min=jt[vn.minFilter],Pt.wrapS=tn[vn.wrapS],Pt.wrapT=tn[vn.wrapT],Pt}var Yt=new hn(3553);return Rn[Yt.id]=Yt,Fe.textureCount++,Pt(Gt,dn),Pt.subimage=function(Qt,mn,vn,_n){mn|=0,vn|=0,_n|=0;var sn=mt();return ct(sn,Yt),sn.width=0,sn.height=0,Mt(sn,Qt),sn.width=sn.width||(Yt.width>>_n)-mn,sn.height=sn.height||(Yt.height>>_n)-vn,Xt(Yt),xt(sn,3553,mn,vn,_n),ln(),Et(sn),Pt},Pt.resize=function(Qt,mn){var vn=0|Qt,_n=0|mn||vn;if(vn===Yt.width&&_n===Yt.height)return Pt;Pt.width=Yt.width=vn,Pt.height=Yt.height=_n,Xt(Yt);for(var sn=0;Yt.mipmask>>sn;++sn){var Kt=vn>>sn,Jt=_n>>sn;if(!Kt||!Jt)break;Be.texImage2D(3553,sn,Yt.format,Kt,Jt,0,Yt.format,Yt.type,null)}return ln(),rt.profile&&(Yt.stats.size=f(Yt.internalformat,Yt.type,vn,_n,!1,!1)),Pt},Pt._reglType="texture2d",Pt._texture=Yt,rt.profile&&(Pt.stats=Yt.stats),Pt.destroy=function(){Yt.decRef()},Pt},createCube:function(Gt,dn,Pt,Yt,Qt,mn){function vn(Kt,Jt,on,fn,En,On){var Vn,jn=_n.texInfo;for(en.call(jn),Vn=0;6>Vn;++Vn)sn[Vn]=Ut();if(typeof Kt!="number"&&Kt){if(typeof Kt=="object")if(Jt)Wt(sn[0],Kt),Wt(sn[1],Jt),Wt(sn[2],on),Wt(sn[3],fn),Wt(sn[4],En),Wt(sn[5],On);else if(Ln(jn,Kt),pt(_n,Kt),"faces"in Kt)for(Kt=Kt.faces,Vn=0;6>Vn;++Vn)ct(sn[Vn],_n),Wt(sn[Vn],Kt[Vn]);else for(Vn=0;6>Vn;++Vn)Wt(sn[Vn],Kt)}else for(Kt=0|Kt||1,Vn=0;6>Vn;++Vn)zt(sn[Vn],Kt,Kt);for(ct(_n,sn[0]),_n.mipmask=jn.genMipmaps?(sn[0].width<<1)-1:sn[0].mipmask,_n.internalformat=sn[0].internalformat,vn.width=sn[0].width,vn.height=sn[0].height,Xt(_n),Vn=0;6>Vn;++Vn)rn(sn[Vn],34069+Vn);for(An(jn,34067),ln(),rt.profile&&(_n.stats.size=f(_n.internalformat,_n.type,vn.width,vn.height,jn.genMipmaps,!0)),vn.format=ur[_n.internalformat],vn.type=er[_n.type],vn.mag=Mr[jn.magFilter],vn.min=jt[jn.minFilter],vn.wrapS=tn[jn.wrapS],vn.wrapT=tn[jn.wrapT],Vn=0;6>Vn;++Vn)Vt(sn[Vn]);return vn}var _n=new hn(34067);Rn[_n.id]=_n,Fe.cubeCount++;var sn=Array(6);return vn(Gt,dn,Pt,Yt,Qt,mn),vn.subimage=function(Kt,Jt,on,fn,En){on|=0,fn|=0,En|=0;var On=mt();return ct(On,_n),On.width=0,On.height=0,Mt(On,Jt),On.width=On.width||(_n.width>>En)-on,On.height=On.height||(_n.height>>En)-fn,Xt(_n),xt(On,34069+Kt,on,fn,En),ln(),Et(On),vn},vn.resize=function(Kt){if((Kt|=0)!==_n.width){vn.width=_n.width=Kt,vn.height=_n.height=Kt,Xt(_n);for(var Jt=0;6>Jt;++Jt)for(var on=0;_n.mipmask>>on;++on)Be.texImage2D(34069+Jt,on,_n.format,Kt>>on,Kt>>on,0,_n.format,_n.type,null);return ln(),rt.profile&&(_n.stats.size=f(_n.internalformat,_n.type,vn.width,vn.height,!1,!0)),vn}},vn._reglType="textureCube",vn._texture=_n,rt.profile&&(vn.stats=_n.stats),vn.destroy=function(){_n.decRef()},vn},clear:function(){for(var Gt=0;Gt<Nn;++Gt)Be.activeTexture(33984+Gt),Be.bindTexture(3553,null),ir[Gt]=null;de(Rn).forEach(nn),Fe.cubeCount=0,Fe.textureCount=0},getTexture:function(Gt){return null},restore:function(){for(var Gt=0;Gt<Nn;++Gt){var dn=ir[Gt];dn&&(dn.bindCount=0,dn.unit=-1,ir[Gt]=null)}de(Rn).forEach(function(Pt){Pt.texture=Be.createTexture(),Be.bindTexture(Pt.target,Pt.texture);for(var Yt=0;32>Yt;++Yt)if((Pt.mipmask&1<<Yt)!=0)if(Pt.target===3553)Be.texImage2D(3553,Yt,Pt.internalformat,Pt.width>>Yt,Pt.height>>Yt,0,Pt.internalformat,Pt.type,null);else for(var Qt=0;6>Qt;++Qt)Be.texImage2D(34069+Qt,Yt,Pt.internalformat,Pt.width>>Yt,Pt.height>>Yt,0,Pt.internalformat,Pt.type,null);An(Pt.texInfo,Pt.target)})},refresh:function(){for(var Gt=0;Gt<Nn;++Gt){var dn=ir[Gt];dn&&(dn.bindCount=0,dn.unit=-1,ir[Gt]=null),Be.activeTexture(33984+Gt),Be.bindTexture(3553,null),Be.bindTexture(34067,null)}}}}function w(Be,Ge,at,nt,Re,Fe){function rt(hn,Xt,ln){this.target=hn,this.texture=Xt,this.renderbuffer=ln;var nn=hn=0;Xt?(hn=Xt.width,nn=Xt.height):ln&&(hn=ln.width,nn=ln.height),this.width=hn,this.height=nn}function Ye(hn){hn&&(hn.texture&&hn.texture._texture.decRef(),hn.renderbuffer&&hn.renderbuffer._renderbuffer.decRef())}function ct(hn,Xt,ln){hn&&(hn.texture?hn.texture._texture.refCount+=1:hn.renderbuffer._renderbuffer.refCount+=1)}function pt(hn,Xt){Xt&&(Xt.texture?Be.framebufferTexture2D(36160,hn,Xt.target,Xt.texture._texture.texture,0):Be.framebufferRenderbuffer(36160,hn,36161,Xt.renderbuffer._renderbuffer.renderbuffer))}function gt(hn){var Xt=3553,ln=null,nn=null,cn=hn;return typeof hn=="object"&&(cn=hn.data,"target"in hn&&(Xt=0|hn.target)),(hn=cn._reglType)==="texture2d"||hn==="textureCube"?ln=cn:hn==="renderbuffer"&&(nn=cn,Xt=36161),new rt(Xt,ln,nn)}function ut(hn,Xt,ln,nn,cn){return ln?((hn=nt.create2D({width:hn,height:Xt,format:nn,type:cn}))._texture.refCount=0,new rt(3553,hn,null)):((hn=Re.create({width:hn,height:Xt,format:nn}))._renderbuffer.refCount=0,new rt(36161,null,hn))}function Mt(hn){return hn&&(hn.texture||hn.renderbuffer)}function xt(hn,Xt,ln){hn&&(hn.texture?hn.texture.resize(Xt,ln):hn.renderbuffer&&hn.renderbuffer.resize(Xt,ln),hn.width=Xt,hn.height=ln)}function mt(){this.id=Ln++,An[this.id]=this,this.framebuffer=Be.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Et(hn){hn.colorAttachments.forEach(Ye),Ye(hn.depthAttachment),Ye(hn.stencilAttachment),Ye(hn.depthStencilAttachment)}function Lt(hn){Be.deleteFramebuffer(hn.framebuffer),hn.framebuffer=null,Fe.framebufferCount--,delete An[hn.id]}function zt(hn){var Xt;Be.bindFramebuffer(36160,hn.framebuffer);var ln=hn.colorAttachments;for(Xt=0;Xt<ln.length;++Xt)pt(36064+Xt,ln[Xt]);for(Xt=ln.length;Xt<at.maxColorAttachments;++Xt)Be.framebufferTexture2D(36160,36064+Xt,3553,null,0);Be.framebufferTexture2D(36160,33306,3553,null,0),Be.framebufferTexture2D(36160,36096,3553,null,0),Be.framebufferTexture2D(36160,36128,3553,null,0),pt(36096,hn.depthAttachment),pt(36128,hn.stencilAttachment),pt(33306,hn.depthStencilAttachment),Be.checkFramebufferStatus(36160),Be.isContextLost(),Be.bindFramebuffer(36160,rn.next?rn.next.framebuffer:null),rn.cur=rn.next,Be.getError()}function Wt(hn,Xt){function ln(cn,Tn){var Mn,zn=0,In=0,Pn=!0,Hn=!0;Mn=null;var Fn=!0,tr="rgba",or="uint8",ur=1,er=null,Mr=null,jt=null,tn=!1;typeof cn=="number"?(zn=0|cn,In=0|Tn||zn):cn?("shape"in cn?(zn=(In=cn.shape)[0],In=In[1]):("radius"in cn&&(zn=In=cn.radius),"width"in cn&&(zn=cn.width),"height"in cn&&(In=cn.height)),("color"in cn||"colors"in cn)&&(Mn=cn.color||cn.colors,Array.isArray(Mn)),Mn||("colorCount"in cn&&(ur=0|cn.colorCount),"colorTexture"in cn&&(Fn=!!cn.colorTexture,tr="rgba4"),"colorType"in cn&&(or=cn.colorType,!Fn)&&(or==="half float"||or==="float16"?tr="rgba16f":or!=="float"&&or!=="float32"||(tr="rgba32f")),"colorFormat"in cn&&(tr=cn.colorFormat,0<=Ut.indexOf(tr)?Fn=!0:0<=Vt.indexOf(tr)&&(Fn=!1))),("depthTexture"in cn||"depthStencilTexture"in cn)&&(tn=!(!cn.depthTexture&&!cn.depthStencilTexture)),"depth"in cn&&(typeof cn.depth=="boolean"?Pn=cn.depth:(er=cn.depth,Hn=!1)),"stencil"in cn&&(typeof cn.stencil=="boolean"?Hn=cn.stencil:(Mr=cn.stencil,Pn=!1)),"depthStencil"in cn&&(typeof cn.depthStencil=="boolean"?Pn=Hn=cn.depthStencil:(jt=cn.depthStencil,Hn=Pn=!1))):zn=In=1;var xn=null,pn=null,Sn=null,Gn=null;if(Array.isArray(Mn))xn=Mn.map(gt);else if(Mn)xn=[gt(Mn)];else for(xn=Array(ur),Mn=0;Mn<ur;++Mn)xn[Mn]=ut(zn,In,Fn,tr,or);for(zn=zn||xn[0].width,In=In||xn[0].height,er?pn=gt(er):Pn&&!Hn&&(pn=ut(zn,In,tn,"depth","uint32")),Mr?Sn=gt(Mr):Hn&&!Pn&&(Sn=ut(zn,In,!1,"stencil","uint8")),jt?Gn=gt(jt):!er&&!Mr&&Hn&&Pn&&(Gn=ut(zn,In,tn,"depth stencil","depth stencil")),Pn=null,Mn=0;Mn<xn.length;++Mn)ct(xn[Mn]),xn[Mn]&&xn[Mn].texture&&(Hn=yt[xn[Mn].texture._texture.format]*vt[xn[Mn].texture._texture.type],Pn===null&&(Pn=Hn));return ct(pn),ct(Sn),ct(Gn),Et(nn),nn.width=zn,nn.height=In,nn.colorAttachments=xn,nn.depthAttachment=pn,nn.stencilAttachment=Sn,nn.depthStencilAttachment=Gn,ln.color=xn.map(Mt),ln.depth=Mt(pn),ln.stencil=Mt(Sn),ln.depthStencil=Mt(Gn),ln.width=nn.width,ln.height=nn.height,zt(nn),ln}var nn=new mt;return Fe.framebufferCount++,ln(hn,Xt),$(ln,{resize:function(cn,Tn){var Mn=Math.max(0|cn,1),zn=Math.max(0|Tn||Mn,1);if(Mn===nn.width&&zn===nn.height)return ln;for(var In=nn.colorAttachments,Pn=0;Pn<In.length;++Pn)xt(In[Pn],Mn,zn);return xt(nn.depthAttachment,Mn,zn),xt(nn.stencilAttachment,Mn,zn),xt(nn.depthStencilAttachment,Mn,zn),nn.width=ln.width=Mn,nn.height=ln.height=zn,zt(nn),ln},_reglType:"framebuffer",_framebuffer:nn,destroy:function(){Lt(nn),Et(nn)},use:function(cn){rn.setFBO({framebuffer:ln},cn)}})}var rn={cur:null,next:null,dirty:!1,setFBO:null},Ut=["rgba"],Vt=["rgba4","rgb565","rgb5 a1"];Ge.ext_srgb&&Vt.push("srgba"),Ge.ext_color_buffer_half_float&&Vt.push("rgba16f","rgb16f"),Ge.webgl_color_buffer_float&&Vt.push("rgba32f");var en=["uint8"];Ge.oes_texture_half_float&&en.push("half float","float16"),Ge.oes_texture_float&&en.push("float","float32");var Ln=0,An={};return $(rn,{getFramebuffer:function(hn){return typeof hn=="function"&&hn._reglType==="framebuffer"&&(hn=hn._framebuffer)instanceof mt?hn:null},create:Wt,createCube:function(hn){function Xt(nn){var cn,Tn={color:null},Mn=0,zn=null;cn="rgba";var In="uint8",Pn=1;if(typeof nn=="number"?Mn=0|nn:nn?("shape"in nn?Mn=nn.shape[0]:("radius"in nn&&(Mn=0|nn.radius),"width"in nn?Mn=0|nn.width:"height"in nn&&(Mn=0|nn.height)),("color"in nn||"colors"in nn)&&(zn=nn.color||nn.colors,Array.isArray(zn)),zn||("colorCount"in nn&&(Pn=0|nn.colorCount),"colorType"in nn&&(In=nn.colorType),"colorFormat"in nn&&(cn=nn.colorFormat)),"depth"in nn&&(Tn.depth=nn.depth),"stencil"in nn&&(Tn.stencil=nn.stencil),"depthStencil"in nn&&(Tn.depthStencil=nn.depthStencil)):Mn=1,zn)if(Array.isArray(zn))for(nn=[],cn=0;cn<zn.length;++cn)nn[cn]=zn[cn];else nn=[zn];else for(nn=Array(Pn),zn={radius:Mn,format:cn,type:In},cn=0;cn<Pn;++cn)nn[cn]=nt.createCube(zn);for(Tn.color=Array(nn.length),cn=0;cn<nn.length;++cn)Pn=nn[cn],Mn=Mn||Pn.width,Tn.color[cn]={target:34069,data:nn[cn]};for(cn=0;6>cn;++cn){for(Pn=0;Pn<nn.length;++Pn)Tn.color[Pn].target=34069+cn;0<cn&&(Tn.depth=ln[0].depth,Tn.stencil=ln[0].stencil,Tn.depthStencil=ln[0].depthStencil),ln[cn]?ln[cn](Tn):ln[cn]=Wt(Tn)}return $(Xt,{width:Mn,height:Mn,color:nn})}var ln=Array(6);return Xt(hn),$(Xt,{faces:ln,resize:function(nn){var cn=0|nn;if(cn===Xt.width)return Xt;var Tn=Xt.color;for(nn=0;nn<Tn.length;++nn)Tn[nn].resize(cn);for(nn=0;6>nn;++nn)ln[nn].resize(cn);return Xt.width=Xt.height=cn,Xt},_reglType:"framebufferCube",destroy:function(){ln.forEach(function(nn){nn.destroy()})}})},clear:function(){de(An).forEach(Lt)},restore:function(){rn.cur=null,rn.next=null,rn.dirty=!0,de(An).forEach(function(hn){hn.framebuffer=Be.createFramebuffer(),zt(hn)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function P(Be,Ge,at,nt,Re,Fe,rt){function Ye(){this.id=++gt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var xt=Ge.oes_vertex_array_object;this.vao=xt?xt.createVertexArrayOES():null,ut[this.id]=this,this.buffers=[]}var ct=at.maxAttributes,pt=Array(ct);for(at=0;at<ct;++at)pt[at]=new E;var gt=0,ut={},Mt={Record:E,scope:{},state:pt,currentVAO:null,targetVAO:null,restore:Ge.oes_vertex_array_object?function(){Ge.oes_vertex_array_object&&de(ut).forEach(function(xt){xt.refresh()})}:function(){},createVAO:function(xt){function mt(Lt){var zt;Array.isArray(Lt)?(zt=Lt,Et.elements&&Et.ownsElements&&Et.elements.destroy(),Et.elements=null,Et.ownsElements=!1,Et.offset=0,Et.count=0,Et.instances=-1,Et.primitive=4):(Lt.elements?(zt=Lt.elements,Et.ownsElements?(typeof zt=="function"&&zt._reglType==="elements"?Et.elements.destroy():Et.elements(zt),Et.ownsElements=!1):Fe.getElements(Lt.elements)?(Et.elements=Lt.elements,Et.ownsElements=!1):(Et.elements=Fe.create(Lt.elements),Et.ownsElements=!0)):(Et.elements=null,Et.ownsElements=!1),zt=Lt.attributes,Et.offset=0,Et.count=-1,Et.instances=-1,Et.primitive=4,Et.elements&&(Et.count=Et.elements._elements.vertCount,Et.primitive=Et.elements._elements.primType),"offset"in Lt&&(Et.offset=0|Lt.offset),"count"in Lt&&(Et.count=0|Lt.count),"instances"in Lt&&(Et.instances=0|Lt.instances),"primitive"in Lt&&(Et.primitive=Se[Lt.primitive])),Lt={};var Wt=Et.attributes;Wt.length=zt.length;for(var rn=0;rn<zt.length;++rn){var Ut,Vt=zt[rn],en=Wt[rn]=new E,Ln=Vt.data||Vt;Array.isArray(Ln)||ge(Ln)||t(Ln)?(Et.buffers[rn]&&(Ut=Et.buffers[rn],ge(Ln)&&Ut._buffer.byteLength>=Ln.byteLength?Ut.subdata(Ln):(Ut.destroy(),Et.buffers[rn]=null)),Et.buffers[rn]||(Ut=Et.buffers[rn]=Re.create(Vt,34962,!1,!0)),en.buffer=Re.getBuffer(Ut),en.size=0|en.buffer.dimension,en.normalized=!1,en.type=en.buffer.dtype,en.offset=0,en.stride=0,en.divisor=0,en.state=1,Lt[rn]=1):Re.getBuffer(Vt)?(en.buffer=Re.getBuffer(Vt),en.size=0|en.buffer.dimension,en.normalized=!1,en.type=en.buffer.dtype,en.offset=0,en.stride=0,en.divisor=0,en.state=1):Re.getBuffer(Vt.buffer)?(en.buffer=Re.getBuffer(Vt.buffer),en.size=0|(+Vt.size||en.buffer.dimension),en.normalized=!!Vt.normalized||!1,en.type="type"in Vt?_e[Vt.type]:en.buffer.dtype,en.offset=0|(Vt.offset||0),en.stride=0|(Vt.stride||0),en.divisor=0|(Vt.divisor||0),en.state=1):"x"in Vt&&(en.x=+Vt.x||0,en.y=+Vt.y||0,en.z=+Vt.z||0,en.w=+Vt.w||0,en.state=2)}for(Ut=0;Ut<Et.buffers.length;++Ut)!Lt[Ut]&&Et.buffers[Ut]&&(Et.buffers[Ut].destroy(),Et.buffers[Ut]=null);return Et.refresh(),mt}var Et=new Ye;return nt.vaoCount+=1,mt.destroy=function(){for(var Lt=0;Lt<Et.buffers.length;++Lt)Et.buffers[Lt]&&Et.buffers[Lt].destroy();Et.buffers.length=0,Et.ownsElements&&(Et.elements.destroy(),Et.elements=null,Et.ownsElements=!1),Et.destroy()},mt._vao=Et,mt._reglType="vao",mt(xt)},getVAO:function(xt){return typeof xt=="function"&&xt._vao?xt._vao:null},destroyBuffer:function(xt){for(var mt=0;mt<pt.length;++mt){var Et=pt[mt];Et.buffer===xt&&(Be.disableVertexAttribArray(mt),Et.buffer=null)}},setVAO:Ge.oes_vertex_array_object?function(xt){if(xt!==Mt.currentVAO){var mt=Ge.oes_vertex_array_object;xt?mt.bindVertexArrayOES(xt.vao):mt.bindVertexArrayOES(null),Mt.currentVAO=xt}}:function(xt){if(xt!==Mt.currentVAO){if(xt)xt.bindAttrs();else{for(var mt=Ge.angle_instanced_arrays,Et=0;Et<pt.length;++Et){var Lt=pt[Et];Lt.buffer?(Be.enableVertexAttribArray(Et),Lt.buffer.bind(),Be.vertexAttribPointer(Et,Lt.size,Lt.type,Lt.normalized,Lt.stride,Lt.offfset),mt&&Lt.divisor&&mt.vertexAttribDivisorANGLE(Et,Lt.divisor)):(Be.disableVertexAttribArray(Et),Be.vertexAttrib4f(Et,Lt.x,Lt.y,Lt.z,Lt.w))}rt.elements?Be.bindBuffer(34963,rt.elements.buffer.buffer):Be.bindBuffer(34963,null)}Mt.currentVAO=xt}},clear:Ge.oes_vertex_array_object?function(){de(ut).forEach(function(xt){xt.destroy()})}:function(){}};return Ye.prototype.bindAttrs=function(){for(var xt=Ge.angle_instanced_arrays,mt=this.attributes,Et=0;Et<mt.length;++Et){var Lt=mt[Et];Lt.buffer?(Be.enableVertexAttribArray(Et),Be.bindBuffer(34962,Lt.buffer.buffer),Be.vertexAttribPointer(Et,Lt.size,Lt.type,Lt.normalized,Lt.stride,Lt.offset),xt&&Lt.divisor&&xt.vertexAttribDivisorANGLE(Et,Lt.divisor)):(Be.disableVertexAttribArray(Et),Be.vertexAttrib4f(Et,Lt.x,Lt.y,Lt.z,Lt.w))}for(xt=mt.length;xt<ct;++xt)Be.disableVertexAttribArray(xt);(xt=Fe.getElements(this.elements))?Be.bindBuffer(34963,xt.buffer.buffer):Be.bindBuffer(34963,null)},Ye.prototype.refresh=function(){var xt=Ge.oes_vertex_array_object;xt&&(xt.bindVertexArrayOES(this.vao),this.bindAttrs(),Mt.currentVAO=null,xt.bindVertexArrayOES(null))},Ye.prototype.destroy=function(){if(this.vao){var xt=Ge.oes_vertex_array_object;this===Mt.currentVAO&&(Mt.currentVAO=null,xt.bindVertexArrayOES(null)),xt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ut[this.id]&&(delete ut[this.id],--nt.vaoCount)},Mt}function C(Be,Ge,at,nt){function Re(mt,Et,Lt,zt){this.name=mt,this.id=Et,this.location=Lt,this.info=zt}function Fe(mt,Et){for(var Lt=0;Lt<mt.length;++Lt)if(mt[Lt].id===Et.id)return void(mt[Lt].location=Et.location);mt.push(Et)}function rt(mt,Et,Lt){if(!(Wt=(Lt=mt===35632?pt:gt)[Et])){var zt=Ge.str(Et),Wt=Be.createShader(mt);Be.shaderSource(Wt,zt),Be.compileShader(Wt),Lt[Et]=Wt}return Wt}function Ye(mt,Et){this.id=xt++,this.fragId=mt,this.vertId=Et,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,nt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ct(mt,Et,Lt){var zt;zt=rt(35632,mt.fragId);var Wt=rt(35633,mt.vertId);if(Et=mt.program=Be.createProgram(),Be.attachShader(Et,zt),Be.attachShader(Et,Wt),Lt)for(zt=0;zt<Lt.length;++zt)Wt=Lt[zt],Be.bindAttribLocation(Et,Wt[0],Wt[1]);Be.linkProgram(Et),Wt=Be.getProgramParameter(Et,35718),nt.profile&&(mt.stats.uniformsCount=Wt);var rn=mt.uniforms;for(zt=0;zt<Wt;++zt)if(Lt=Be.getActiveUniform(Et,zt))if(1<Lt.size)for(var Ut=0;Ut<Lt.size;++Ut){var Vt=Lt.name.replace("[0]","["+Ut+"]");Fe(rn,new Re(Vt,Ge.id(Vt),Be.getUniformLocation(Et,Vt),Lt))}else Fe(rn,new Re(Lt.name,Ge.id(Lt.name),Be.getUniformLocation(Et,Lt.name),Lt));for(Wt=Be.getProgramParameter(Et,35721),nt.profile&&(mt.stats.attributesCount=Wt),mt=mt.attributes,zt=0;zt<Wt;++zt)(Lt=Be.getActiveAttrib(Et,zt))&&Fe(mt,new Re(Lt.name,Ge.id(Lt.name),Be.getAttribLocation(Et,Lt.name),Lt))}var pt={},gt={},ut={},Mt=[],xt=0;return nt.profile&&(at.getMaxUniformsCount=function(){var mt=0;return Mt.forEach(function(Et){Et.stats.uniformsCount>mt&&(mt=Et.stats.uniformsCount)}),mt},at.getMaxAttributesCount=function(){var mt=0;return Mt.forEach(function(Et){Et.stats.attributesCount>mt&&(mt=Et.stats.attributesCount)}),mt}),{clear:function(){var mt=Be.deleteShader.bind(Be);de(pt).forEach(mt),pt={},de(gt).forEach(mt),gt={},Mt.forEach(function(Et){Be.deleteProgram(Et.program)}),Mt.length=0,ut={},at.shaderCount=0},program:function(mt,Et,Lt,zt){var Wt=ut[Et];Wt||(Wt=ut[Et]={});var rn=Wt[mt];if(rn&&(rn.refCount++,!zt))return rn;var Ut=new Ye(Et,mt);return at.shaderCount++,ct(Ut,Lt,zt),rn||(Wt[mt]=Ut),Mt.push(Ut),$(Ut,{destroy:function(){if(Ut.refCount--,0>=Ut.refCount){Be.deleteProgram(Ut.program);var Vt=Mt.indexOf(Ut);Mt.splice(Vt,1),at.shaderCount--}0>=Wt[Ut.vertId].refCount&&(Be.deleteShader(gt[Ut.vertId]),delete gt[Ut.vertId],delete ut[Ut.fragId][Ut.vertId]),Object.keys(ut[Ut.fragId]).length||(Be.deleteShader(pt[Ut.fragId]),delete pt[Ut.fragId],delete ut[Ut.fragId])}})},restore:function(){pt={},gt={};for(var mt=0;mt<Mt.length;++mt)ct(Mt[mt],null,Mt[mt].attributes.map(function(Et){return[Et.location,Et.name]}))},shader:rt,frag:-1,vert:-1}}function O(Be,Ge,at,nt,Re,Fe,rt){function Ye(ct){var pt;pt=Ge.next===null?5121:Ge.next.colorAttachments[0].texture._texture.type;var gt=0,ut=0,Mt=nt.framebufferWidth,xt=nt.framebufferHeight,mt=null;return ge(ct)?mt=ct:ct&&(gt=0|ct.x,ut=0|ct.y,Mt=0|(ct.width||nt.framebufferWidth-gt),xt=0|(ct.height||nt.framebufferHeight-ut),mt=ct.data||null),at(),ct=Mt*xt*4,mt||(pt===5121?mt=new Uint8Array(ct):pt===5126&&(mt=mt||new Float32Array(ct))),Be.pixelStorei(3333,4),Be.readPixels(gt,ut,Mt,xt,6408,pt,mt),mt}return function(ct){return ct&&"framebuffer"in ct?function(pt){var gt;return Ge.setFBO({framebuffer:pt.framebuffer},function(){gt=Ye(pt)}),gt}(ct):Ye(ct)}}function R(Be,Ge){return Be>>>Ge|Be<<32-Ge}function j(Be,Ge){var at=(65535&Be)+(65535&Ge);return(Be>>16)+(Ge>>16)+(at>>16)<<16|65535&at}function D(Be){return Array.prototype.slice.call(Be)}function N(Be){return D(Be).join("")}function W(Be){function Ge(){var gt=[],ut=[];return $(function(){gt.push.apply(gt,D(arguments))},{def:function(){var Mt="v"+Re++;return ut.push(Mt),0<arguments.length&&(gt.push(Mt,"="),gt.push.apply(gt,D(arguments)),gt.push(";")),Mt},toString:function(){return N([0<ut.length?"var "+ut.join(",")+";":"",N(gt)])}})}function at(){function gt(Et,Lt){Mt(Et,Lt,"=",ut.def(Et,Lt),";")}var ut=Ge(),Mt=Ge(),xt=ut.toString,mt=Mt.toString;return $(function(){ut.apply(ut,D(arguments))},{def:ut.def,entry:ut,exit:Mt,save:gt,set:function(Et,Lt,zt){gt(Et,Lt),ut(Et,Lt,"=",zt,";")},toString:function(){return xt()+mt()}})}var nt=Be&&Be.cache,Re=0,Fe=[],rt=[],Ye=[],ct=Ge(),pt={};return{global:ct,link:function(gt,ut){var Mt=ut&&ut.stable;if(!Mt){for(var xt=0;xt<rt.length;++xt)if(rt[xt]===gt&&!Ye[xt])return Fe[xt]}return xt="g"+Re++,Fe.push(xt),rt.push(gt),Ye.push(Mt),xt},block:Ge,proc:function(gt,ut){function Mt(){var Lt="a"+xt.length;return xt.push(Lt),Lt}var xt=[];ut=ut||0;for(var mt=0;mt<ut;++mt)Mt();var Et=(mt=at()).toString;return pt[gt]=$(mt,{arg:Mt,toString:function(){return N(["function(",xt.join(),"){",Et(),"}"])}})},scope:at,cond:function(){var gt=N(arguments),ut=at(),Mt=at(),xt=ut.toString,mt=Mt.toString;return $(ut,{then:function(){return ut.apply(ut,D(arguments)),this},else:function(){return Mt.apply(Mt,D(arguments)),this},toString:function(){var Et=mt();return Et&&(Et="else{"+Et+"}"),N(["if(",gt,"){",xt(),"}",Et])}})},compile:function(){var gt=['"use strict";',ct,"return {"];Object.keys(pt).forEach(function(xt){gt.push('"',xt,'":',pt[xt].toString(),",")}),gt.push("}");var ut,Mt=N(gt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return nt&&(ut=function(xt){for(var mt,Et="",Lt=0;Lt<xt.length;Lt++)mt=xt.charCodeAt(Lt),Et+="0123456789abcdef".charAt(mt>>>4&15)+"0123456789abcdef".charAt(15&mt);return Et}(function(xt){for(var mt=Array(xt.length>>2),Et=0;Et<mt.length;Et++)mt[Et]=0;for(Et=0;Et<8*xt.length;Et+=8)mt[Et>>5]|=(255&xt.charCodeAt(Et/8))<<24-Et%32;var Lt,zt,Wt,rn,Ut,Vt,en,Ln,An,hn,Xt,ln=8*xt.length;for(xt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Et=Array(64),mt[ln>>5]|=128<<24-ln%32,mt[15+(ln+64>>9<<4)]=ln,Ln=0;Ln<mt.length;Ln+=16){for(ln=xt[0],Lt=xt[1],zt=xt[2],Wt=xt[3],rn=xt[4],Ut=xt[5],Vt=xt[6],en=xt[7],An=0;64>An;An++){var nn;16>An?Et[An]=mt[An+Ln]:(hn=An,Xt=j(Xt=R(Xt=Et[An-2],17)^R(Xt,19)^Xt>>>10,Et[An-7]),nn=R(nn=Et[An-15],7)^R(nn,18)^nn>>>3,Et[hn]=j(j(Xt,nn),Et[An-16])),hn=j(j(j(j(en,hn=R(hn=rn,6)^R(hn,11)^R(hn,25)),rn&Ut^~rn&Vt),et[An]),Et[An]),Xt=j(en=R(en=ln,2)^R(en,13)^R(en,22),ln&Lt^ln&zt^Lt&zt),en=Vt,Vt=Ut,Ut=rn,rn=j(Wt,hn),Wt=zt,zt=Lt,Lt=ln,ln=j(hn,Xt)}xt[0]=j(ln,xt[0]),xt[1]=j(Lt,xt[1]),xt[2]=j(zt,xt[2]),xt[3]=j(Wt,xt[3]),xt[4]=j(rn,xt[4]),xt[5]=j(Ut,xt[5]),xt[6]=j(Vt,xt[6]),xt[7]=j(en,xt[7])}for(mt="",Et=0;Et<32*xt.length;Et+=8)mt+=String.fromCharCode(xt[Et>>5]>>>24-Et%32&255);return mt}(function(xt){for(var mt,Et,Lt="",zt=-1;++zt<xt.length;)mt=xt.charCodeAt(zt),Et=zt+1<xt.length?xt.charCodeAt(zt+1):0,55296<=mt&&56319>=mt&&56320<=Et&&57343>=Et&&(mt=65536+((1023&mt)<<10)+(1023&Et),zt++),127>=mt?Lt+=String.fromCharCode(mt):2047>=mt?Lt+=String.fromCharCode(192|mt>>>6&31,128|63&mt):65535>=mt?Lt+=String.fromCharCode(224|mt>>>12&15,128|mt>>>6&63,128|63&mt):2097151>=mt&&(Lt+=String.fromCharCode(240|mt>>>18&7,128|mt>>>12&63,128|mt>>>6&63,128|63&mt));return Lt}(Mt))),nt[ut])?nt[ut].apply(null,rt):(Mt=Function.apply(null,Fe.concat(Mt)),nt&&(nt[ut]=Mt),Mt.apply(null,rt))}}}function F(Be){return Array.isArray(Be)||ge(Be)||t(Be)}function U(Be){return Be.sort(function(Ge,at){return Ge==="viewport"?-1:at==="viewport"?1:Ge<at?-1:1})}function V(Be,Ge,at,nt){this.thisDep=Be,this.contextDep=Ge,this.propDep=at,this.append=nt}function te(Be){return Be&&!(Be.thisDep||Be.contextDep||Be.propDep)}function J(Be){return new V(!1,!1,!1,Be)}function K(Be,Ge){var at=Be.type;if(at===0)return new V(!0,1<=(at=Be.data.length),2<=at,Ge);if(at===4)return new V((at=Be.data).thisDep,at.contextDep,at.propDep,Ge);if(at===5)return new V(!1,!1,!1,Ge);if(at===6){for(var nt=at=!1,Re=!1,Fe=0;Fe<Be.data.length;++Fe){var rt=Be.data[Fe];rt.type===1?Re=!0:rt.type===2?nt=!0:rt.type===3?at=!0:rt.type===0?(at=!0,1<=(rt=rt.data)&&(nt=!0),2<=rt&&(Re=!0)):rt.type===4&&(at=at||rt.data.thisDep,nt=nt||rt.data.contextDep,Re=Re||rt.data.propDep)}return new V(at,nt,Re,Ge)}return new V(at===3,at===2,at===1,Ge)}function X(Be,Ge,at,nt,Re,Fe,rt,Ye,ct,pt,gt,ut,Mt,xt,mt,Et){function Lt(Pt){return Pt.replace(".","_")}function zt(Pt,Yt,Qt){var mn=Lt(Pt);Gn.push(Pt),Sn[mn]=pn[mn]=!!Qt,Rn[mn]=Yt}function Wt(Pt,Yt,Qt){var mn=Lt(Pt);Gn.push(Pt),Array.isArray(Qt)?(pn[mn]=Qt.slice(),Sn[mn]=Qt.slice()):pn[mn]=Sn[mn]=Qt,Nn[mn]=Yt}function rn(){var Pt=W({cache:mt}),Yt=Pt.link,Qt=Pt.global;Pt.id=dn++,Pt.batchId="0";var mn=Yt(ir),vn=Pt.shared={props:"a0"};Object.keys(ir).forEach(function(on){vn[on]=Qt.def(mn,".",on)});var _n=Pt.next={},sn=Pt.current={};Object.keys(Nn).forEach(function(on){Array.isArray(pn[on])&&(_n[on]=Qt.def(vn.next,".",on),sn[on]=Qt.def(vn.current,".",on))});var Kt=Pt.constants={};Object.keys(Gt).forEach(function(on){Kt[on]=Qt.def(JSON.stringify(Gt[on]))}),Pt.invoke=function(on,fn){switch(fn.type){case 0:var En=["this",vn.context,vn.props,Pt.batchId];return on.def(Yt(fn.data),".call(",En.slice(0,Math.max(fn.data.length+1,4)),")");case 1:return on.def(vn.props,fn.data);case 2:return on.def(vn.context,fn.data);case 3:return on.def("this",fn.data);case 4:return fn.data.append(Pt,on),fn.data.ref;case 5:return fn.data.toString();case 6:return fn.data.map(function(On){return Pt.invoke(on,On)})}},Pt.attribCache={};var Jt={};return Pt.scopeAttrib=function(on){if((on=Ge.id(on))in Jt)return Jt[on];var fn=pt.scope[on];return fn||(fn=pt.scope[on]=new er),Jt[on]=Yt(fn)},Pt}function Ut(Pt,Yt){var Qt=Pt.static,mn=Pt.dynamic;if("framebuffer"in Qt){var vn=Qt.framebuffer;return vn?(vn=Ye.getFramebuffer(vn),J(function(sn,Kt){var Jt=sn.link(vn),on=sn.shared;return Kt.set(on.framebuffer,".next",Jt),on=on.context,Kt.set(on,".framebufferWidth",Jt+".width"),Kt.set(on,".framebufferHeight",Jt+".height"),Jt})):J(function(sn,Kt){var Jt=sn.shared;return Kt.set(Jt.framebuffer,".next","null"),Jt=Jt.context,Kt.set(Jt,".framebufferWidth",Jt+".drawingBufferWidth"),Kt.set(Jt,".framebufferHeight",Jt+".drawingBufferHeight"),"null"})}if("framebuffer"in mn){var _n=mn.framebuffer;return K(_n,function(sn,Kt){var Jt=sn.invoke(Kt,_n),on=sn.shared,fn=on.framebuffer;return Jt=Kt.def(fn,".getFramebuffer(",Jt,")"),Kt.set(fn,".next",Jt),on=on.context,Kt.set(on,".framebufferWidth",Jt+"?"+Jt+".width:"+on+".drawingBufferWidth"),Kt.set(on,".framebufferHeight",Jt+"?"+Jt+".height:"+on+".drawingBufferHeight"),Jt})}return null}function Vt(Pt,Yt,Qt){function mn(on){if(on in vn){var fn=Ge.id(vn[on]);return(on=J(function(){return fn})).id=fn,on}if(on in _n){var En=_n[on];return K(En,function(On,Vn){var jn=On.invoke(Vn,En);return Vn.def(On.shared.strings,".id(",jn,")")})}return null}var vn=Pt.static,_n=Pt.dynamic,sn=mn("frag"),Kt=mn("vert"),Jt=null;return te(sn)&&te(Kt)?(Jt=gt.program(Kt.id,sn.id,null,Qt),Pt=J(function(on,fn){return on.link(Jt)})):Pt=new V(sn&&sn.thisDep||Kt&&Kt.thisDep,sn&&sn.contextDep||Kt&&Kt.contextDep,sn&&sn.propDep||Kt&&Kt.propDep,function(on,fn){var En,On,Vn=on.shared.shader;return En=sn?sn.append(on,fn):fn.def(Vn,".","frag"),On=Kt?Kt.append(on,fn):fn.def(Vn,".","vert"),fn.def(Vn+".program("+On+","+En+")")}),{frag:sn,vert:Kt,progVar:Pt,program:Jt}}function en(Pt,Yt){function Qt(jn,Kn){if(jn in mn){var Yn=0|mn[jn];return Kn?_n.offset=Yn:_n.instances=Yn,J(function(rr,Jn){return Kn&&(rr.OFFSET=Yn),Yn})}if(jn in vn){var nr=vn[jn];return K(nr,function(rr,Jn){var vr=rr.invoke(Jn,nr);return Kn&&(rr.OFFSET=vr),vr})}if(Kn){if(Jt)return J(function(rr,Jn){return rr.OFFSET=0});if(sn)return new V(Kt.thisDep,Kt.contextDep,Kt.propDep,function(rr,Jn){return Jn.def(rr.shared.vao+".currentVAO?"+rr.shared.vao+".currentVAO.offset:0")})}else if(sn)return new V(Kt.thisDep,Kt.contextDep,Kt.propDep,function(rr,Jn){return Jn.def(rr.shared.vao+".currentVAO?"+rr.shared.vao+".currentVAO.instances:-1")});return null}var mn=Pt.static,vn=Pt.dynamic,_n={},sn=!1,Kt=function(){if("vao"in mn){var jn=mn.vao;return jn!==null&&pt.getVAO(jn)===null&&(jn=pt.createVAO(jn)),sn=!0,_n.vao=jn,J(function(Yn){var nr=pt.getVAO(jn);return nr?Yn.link(nr):"null"})}if("vao"in vn){sn=!0;var Kn=vn.vao;return K(Kn,function(Yn,nr){var rr=Yn.invoke(nr,Kn);return nr.def(Yn.shared.vao+".getVAO("+rr+")")})}return null}(),Jt=!1,on=function(){if("elements"in mn){var jn=mn.elements;if(_n.elements=jn,F(jn)){var Kn=_n.elements=Fe.create(jn,!0);jn=Fe.getElements(Kn),Jt=!0}else jn&&(jn=Fe.getElements(jn),Jt=!0);return Kn=J(function(nr,rr){if(jn){var Jn=nr.link(jn);return nr.ELEMENTS=Jn}return nr.ELEMENTS=null}),Kn.value=jn,Kn}if("elements"in vn){Jt=!0;var Yn=vn.elements;return K(Yn,function(nr,rr){var Jn=(vr=nr.shared).isBufferArgs,vr=vr.elements,lr=nr.invoke(rr,Yn),dr=rr.def("null");return Jn=rr.def(Jn,"(",lr,")"),lr=nr.cond(Jn).then(dr,"=",vr,".createStream(",lr,");").else(dr,"=",vr,".getElements(",lr,");"),rr.entry(lr),rr.exit(nr.cond(Jn).then(vr,".destroyStream(",dr,");")),nr.ELEMENTS=dr})}return sn?new V(Kt.thisDep,Kt.contextDep,Kt.propDep,function(nr,rr){return rr.def(nr.shared.vao+".currentVAO?"+nr.shared.elements+".getElements("+nr.shared.vao+".currentVAO.elements):null")}):null}(),fn=Qt("offset",!0),En=function(){if("primitive"in mn){var jn=mn.primitive;return _n.primitive=jn,J(function(Yn,nr){return Se[jn]})}if("primitive"in vn){var Kn=vn.primitive;return K(Kn,function(Yn,nr){var rr=Yn.constants.primTypes,Jn=Yn.invoke(nr,Kn);return nr.def(rr,"[",Jn,"]")})}return Jt?te(on)?on.value?J(function(Yn,nr){return nr.def(Yn.ELEMENTS,".primType")}):J(function(){return 4}):new V(on.thisDep,on.contextDep,on.propDep,function(Yn,nr){var rr=Yn.ELEMENTS;return nr.def(rr,"?",rr,".primType:",4)}):sn?new V(Kt.thisDep,Kt.contextDep,Kt.propDep,function(Yn,nr){return nr.def(Yn.shared.vao+".currentVAO?"+Yn.shared.vao+".currentVAO.primitive:4")}):null}(),On=function(){if("count"in mn){var jn=0|mn.count;return _n.count=jn,J(function(){return jn})}if("count"in vn){var Kn=vn.count;return K(Kn,function(Yn,nr){return Yn.invoke(nr,Kn)})}return Jt?te(on)?on?fn?new V(fn.thisDep,fn.contextDep,fn.propDep,function(Yn,nr){return nr.def(Yn.ELEMENTS,".vertCount-",Yn.OFFSET)}):J(function(Yn,nr){return nr.def(Yn.ELEMENTS,".vertCount")}):J(function(){return-1}):new V(on.thisDep||fn.thisDep,on.contextDep||fn.contextDep,on.propDep||fn.propDep,function(Yn,nr){var rr=Yn.ELEMENTS;return Yn.OFFSET?nr.def(rr,"?",rr,".vertCount-",Yn.OFFSET,":-1"):nr.def(rr,"?",rr,".vertCount:-1")}):sn?new V(Kt.thisDep,Kt.contextDep,Kt.propDep,function(Yn,nr){return nr.def(Yn.shared.vao,".currentVAO?",Yn.shared.vao,".currentVAO.count:-1")}):null}(),Vn=Qt("instances",!1);return{elements:on,primitive:En,count:On,instances:Vn,offset:fn,vao:Kt,vaoActive:sn,elementsActive:Jt,static:_n}}function Ln(Pt,Yt){var Qt=Pt.static,mn=Pt.dynamic,vn={};return Object.keys(Qt).forEach(function(_n){var sn=Qt[_n],Kt=Ge.id(_n),Jt=new er;if(F(sn))Jt.state=1,Jt.buffer=Re.getBuffer(Re.create(sn,34962,!1,!0)),Jt.type=0;else if(fn=Re.getBuffer(sn))Jt.state=1,Jt.buffer=fn,Jt.type=0;else if("constant"in sn){var on=sn.constant;Jt.buffer="null",Jt.state=2,typeof on=="number"?Jt.x=on:Qe.forEach(function(Yn,nr){nr<on.length&&(Jt[Yn]=on[nr])})}else{var fn=F(sn.buffer)?Re.getBuffer(Re.create(sn.buffer,34962,!1,!0)):Re.getBuffer(sn.buffer),En=0|sn.offset,On=0|sn.stride,Vn=0|sn.size,jn=!!sn.normalized,Kn=0;"type"in sn&&(Kn=_e[sn.type]),sn=0|sn.divisor,Jt.buffer=fn,Jt.state=1,Jt.size=Vn,Jt.normalized=jn,Jt.type=Kn||fn.dtype,Jt.offset=En,Jt.stride=On,Jt.divisor=sn}vn[_n]=J(function(Yn,nr){var rr=Yn.attribCache;if(Kt in rr)return rr[Kt];var Jn={isStream:!1};return Object.keys(Jt).forEach(function(vr){Jn[vr]=Jt[vr]}),Jt.buffer&&(Jn.buffer=Yn.link(Jt.buffer),Jn.type=Jn.type||Jn.buffer+".dtype"),rr[Kt]=Jn})}),Object.keys(mn).forEach(function(_n){var sn=mn[_n];vn[_n]=K(sn,function(Kt,Jt){function on(rr){Jt(jn[rr],"=",fn,".",rr,"|0;")}var fn=Kt.invoke(Jt,sn),En=Kt.shared,On=Kt.constants,Vn=En.isBufferArgs,jn=(En=En.buffer,{isStream:Jt.def(!1)}),Kn=new er;Kn.state=1,Object.keys(Kn).forEach(function(rr){jn[rr]=Jt.def(""+Kn[rr])});var Yn=jn.buffer,nr=jn.type;return Jt("if(",Vn,"(",fn,")){",jn.isStream,"=true;",Yn,"=",En,".createStream(",34962,",",fn,");",nr,"=",Yn,".dtype;","}else{",Yn,"=",En,".getBuffer(",fn,");","if(",Yn,"){",nr,"=",Yn,".dtype;",'}else if("constant" in ',fn,"){",jn.state,"=",2,";","if(typeof "+fn+'.constant === "number"){',jn[Qe[0]],"=",fn,".constant;",Qe.slice(1).map(function(rr){return jn[rr]}).join("="),"=0;","}else{",Qe.map(function(rr,Jn){return jn[rr]+"="+fn+".constant.length>"+Jn+"?"+fn+".constant["+Jn+"]:0;"}).join(""),"}}else{","if(",Vn,"(",fn,".buffer)){",Yn,"=",En,".createStream(",34962,",",fn,".buffer);","}else{",Yn,"=",En,".getBuffer(",fn,".buffer);","}",nr,'="type" in ',fn,"?",On.glTypes,"[",fn,".type]:",Yn,".dtype;",jn.normalized,"=!!",fn,".normalized;"),on("size"),on("offset"),on("stride"),on("divisor"),Jt("}}"),Jt.exit("if(",jn.isStream,"){",En,".destroyStream(",Yn,");","}"),jn})}),vn}function An(Pt,Yt,Qt,mn,vn){function _n(Kn){var Yn=Kt[Kn];Yn&&(on[Kn]=Yn)}var sn=function(Kn,Yn){if(typeof(nr=Kn.static).frag=="string"&&typeof nr.vert=="string"){if(0<Object.keys(Yn.dynamic).length)return null;var nr=Yn.static,rr=Object.keys(nr);if(0<rr.length&&typeof nr[rr[0]]=="number"){for(var Jn=[],vr=0;vr<rr.length;++vr)Jn.push([0|nr[rr[vr]],rr[vr]]);return Jn}}return null}(Pt,Yt),Kt=function(Kn,Yn,nr){function rr(dr){if(dr in Jn){var $n=Jn[dr];dr=!0;var _r,Lr,Gr=0|$n.x,hi=0|$n.y;return"width"in $n?_r=0|$n.width:dr=!1,"height"in $n?Lr=0|$n.height:dr=!1,new V(!dr&&Yn&&Yn.thisDep,!dr&&Yn&&Yn.contextDep,!dr&&Yn&&Yn.propDep,function(Wi,gi){var zi=Wi.shared.context,_a=_r;"width"in $n||(_a=gi.def(zi,".","framebufferWidth","-",Gr));var wa=Lr;return"height"in $n||(wa=gi.def(zi,".","framebufferHeight","-",hi)),[Gr,hi,_a,wa]})}if(dr in vr){var di=vr[dr];return dr=K(di,function(Wi,gi){var zi=Wi.invoke(gi,di),_a=Wi.shared.context,wa=gi.def(zi,".x|0"),zo=gi.def(zi,".y|0");return[wa,zo,gi.def('"width" in ',zi,"?",zi,".width|0:","(",_a,".","framebufferWidth","-",wa,")"),zi=gi.def('"height" in ',zi,"?",zi,".height|0:","(",_a,".","framebufferHeight","-",zo,")")]}),Yn&&(dr.thisDep=dr.thisDep||Yn.thisDep,dr.contextDep=dr.contextDep||Yn.contextDep,dr.propDep=dr.propDep||Yn.propDep),dr}return Yn?new V(Yn.thisDep,Yn.contextDep,Yn.propDep,function(Wi,gi){var zi=Wi.shared.context;return[0,0,gi.def(zi,".","framebufferWidth"),gi.def(zi,".","framebufferHeight")]}):null}var Jn=Kn.static,vr=Kn.dynamic;if(Kn=rr("viewport")){var lr=Kn;Kn=new V(Kn.thisDep,Kn.contextDep,Kn.propDep,function(dr,$n){var _r=lr.append(dr,$n),Lr=dr.shared.context;return $n.set(Lr,".viewportWidth",_r[2]),$n.set(Lr,".viewportHeight",_r[3]),_r})}return{viewport:Kn,scissor_box:rr("scissor.box")}}(Pt,En=Ut(Pt)),Jt=en(Pt),on=function(Kn,Yn){var nr=Kn.static,rr=Kn.dynamic,Jn={};return Gn.forEach(function(vr){function lr($n,_r){if(vr in nr){var Lr=$n(nr[vr]);Jn[dr]=J(function(){return Lr})}else if(vr in rr){var Gr=rr[vr];Jn[dr]=K(Gr,function(hi,di){return _r(hi,di,hi.invoke(di,Gr))})}}var dr=Lt(vr);switch(vr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return lr(function($n){return $n},function($n,_r,Lr){return Lr});case"depth.func":return lr(function($n){return Dt[$n]},function($n,_r,Lr){return _r.def($n.constants.compareFuncs,"[",Lr,"]")});case"depth.range":return lr(function($n){return $n},function($n,_r,Lr){return[_r.def("+",Lr,"[0]"),_r=_r.def("+",Lr,"[1]")]});case"blend.func":return lr(function($n){return[It["srcRGB"in $n?$n.srcRGB:$n.src],It["dstRGB"in $n?$n.dstRGB:$n.dst],It["srcAlpha"in $n?$n.srcAlpha:$n.src],It["dstAlpha"in $n?$n.dstAlpha:$n.dst]]},function($n,_r,Lr){function Gr(gi,zi){return _r.def('"',gi,zi,'" in ',Lr,"?",Lr,".",gi,zi,":",Lr,".",gi)}$n=$n.constants.blendFuncs;var hi=Gr("src","RGB"),di=Gr("dst","RGB"),Wi=(hi=_r.def($n,"[",hi,"]"),_r.def($n,"[",Gr("src","Alpha"),"]"));return[hi,di=_r.def($n,"[",di,"]"),Wi,$n=_r.def($n,"[",Gr("dst","Alpha"),"]")]});case"blend.equation":return lr(function($n){return typeof $n=="string"?[Mr[$n],Mr[$n]]:typeof $n=="object"?[Mr[$n.rgb],Mr[$n.alpha]]:void 0},function($n,_r,Lr){var Gr=$n.constants.blendEquations,hi=_r.def(),di=_r.def();return($n=$n.cond("typeof ",Lr,'==="string"')).then(hi,"=",di,"=",Gr,"[",Lr,"];"),$n.else(hi,"=",Gr,"[",Lr,".rgb];",di,"=",Gr,"[",Lr,".alpha];"),_r($n),[hi,di]});case"blend.color":return lr(function($n){return b(4,function(_r){return+$n[_r]})},function($n,_r,Lr){return b(4,function(Gr){return _r.def("+",Lr,"[",Gr,"]")})});case"stencil.mask":return lr(function($n){return 0|$n},function($n,_r,Lr){return _r.def(Lr,"|0")});case"stencil.func":return lr(function($n){return[Dt[$n.cmp||"keep"],$n.ref||0,"mask"in $n?$n.mask:-1]},function($n,_r,Lr){return[$n=_r.def('"cmp" in ',Lr,"?",$n.constants.compareFuncs,"[",Lr,".cmp]",":",7680),_r.def(Lr,".ref|0"),_r=_r.def('"mask" in ',Lr,"?",Lr,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return lr(function($n){return[vr==="stencil.opBack"?1029:1028,Ct[$n.fail||"keep"],Ct[$n.zfail||"keep"],Ct[$n.zpass||"keep"]]},function($n,_r,Lr){function Gr(di){return _r.def('"',di,'" in ',Lr,"?",hi,"[",Lr,".",di,"]:",7680)}var hi=$n.constants.stencilOps;return[vr==="stencil.opBack"?1029:1028,Gr("fail"),Gr("zfail"),Gr("zpass")]});case"polygonOffset.offset":return lr(function($n){return[0|$n.factor,0|$n.units]},function($n,_r,Lr){return[_r.def(Lr,".factor|0"),_r=_r.def(Lr,".units|0")]});case"cull.face":return lr(function($n){var _r=0;return $n==="front"?_r=1028:$n==="back"&&(_r=1029),_r},function($n,_r,Lr){return _r.def(Lr,'==="front"?',1028,":",1029)});case"frontFace":return lr(function($n){return He[$n]},function($n,_r,Lr){return _r.def(Lr+'==="cw"?2304:2305')});case"colorMask":return lr(function($n){return $n.map(function(_r){return!!_r})},function($n,_r,Lr){return b(4,function(Gr){return"!!"+Lr+"["+Gr+"]"})});case"sample.coverage":return lr(function($n){return["value"in $n?$n.value:1,!!$n.invert]},function($n,_r,Lr){return[_r.def('"value" in ',Lr,"?+",Lr,".value:1"),_r=_r.def("!!",Lr,".invert")]})}}),Jn}(Pt),fn=Vt(Pt,0,sn);_n("viewport"),_n(Lt("scissor.box"));var En,On=0<Object.keys(on).length;if((En={framebuffer:En,draw:Jt,shader:fn,state:on,dirty:On,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Kn){var Yn,nr=Kn.static;if(Kn=Kn.dynamic,"profile"in nr){var rr=!!nr.profile;(Yn=J(function(vr,lr){return rr})).enable=rr}else if("profile"in Kn){var Jn=Kn.profile;Yn=K(Jn,function(vr,lr){return vr.invoke(lr,Jn)})}return Yn}(Pt),En.uniforms=function(Kn,Yn){var nr=Kn.static,rr=Kn.dynamic,Jn={};return Object.keys(nr).forEach(function(vr){var lr,dr=nr[vr];if(typeof dr=="number"||typeof dr=="boolean")lr=J(function(){return dr});else if(typeof dr=="function"){var $n=dr._reglType;$n==="texture2d"||$n==="textureCube"?lr=J(function(_r){return _r.link(dr)}):$n!=="framebuffer"&&$n!=="framebufferCube"||(lr=J(function(_r){return _r.link(dr.color[0])}))}else x(dr)&&(lr=J(function(_r){return _r.global.def("[",b(dr.length,function(Lr){return dr[Lr]}),"]")}));lr.value=dr,Jn[vr]=lr}),Object.keys(rr).forEach(function(vr){var lr=rr[vr];Jn[vr]=K(lr,function(dr,$n){return dr.invoke($n,lr)})}),Jn}(Qt),En.drawVAO=En.scopeVAO=Jt.vao,!En.drawVAO&&fn.program&&!sn&&at.angle_instanced_arrays&&Jt.static.elements){var Vn=!0;if(Pt=fn.program.attributes.map(function(Kn){return Kn=Yt.static[Kn],Vn=Vn&&!!Kn,Kn}),Vn&&0<Pt.length){var jn=pt.getVAO(pt.createVAO({attributes:Pt,elements:Jt.static.elements}));En.drawVAO=new V(null,null,null,function(Kn,Yn){return Kn.link(jn)}),En.useVAO=!0}}return sn?En.useVAO=!0:En.attributes=Ln(Yt),En.context=function(Kn){var Yn=Kn.static,nr=Kn.dynamic,rr={};return Object.keys(Yn).forEach(function(Jn){var vr=Yn[Jn];rr[Jn]=J(function(lr,dr){return typeof vr=="number"||typeof vr=="boolean"?""+vr:lr.link(vr)})}),Object.keys(nr).forEach(function(Jn){var vr=nr[Jn];rr[Jn]=K(vr,function(lr,dr){return lr.invoke(dr,vr)})}),rr}(mn),En}function hn(Pt,Yt,Qt){var mn=Pt.shared.context,vn=Pt.scope();Object.keys(Qt).forEach(function(_n){Yt.save(mn,"."+_n);var sn=Qt[_n].append(Pt,Yt);Array.isArray(sn)?vn(mn,".",_n,"=[",sn.join(),"];"):vn(mn,".",_n,"=",sn,";")}),Yt(vn)}function Xt(Pt,Yt,Qt,mn){var vn,_n=(Kt=Pt.shared).gl,sn=Kt.framebuffer;tn&&(vn=Yt.def(Kt.extensions,".webgl_draw_buffers"));var Kt=(Jt=Pt.constants).drawBuffer,Jt=Jt.backBuffer;Pt=Qt?Qt.append(Pt,Yt):Yt.def(sn,".next"),mn||Yt("if(",Pt,"!==",sn,".cur){"),Yt("if(",Pt,"){",_n,".bindFramebuffer(",36160,",",Pt,".framebuffer);"),tn&&Yt(vn,".drawBuffersWEBGL(",Kt,"[",Pt,".colorAttachments.length]);"),Yt("}else{",_n,".bindFramebuffer(",36160,",null);"),tn&&Yt(vn,".drawBuffersWEBGL(",Jt,");"),Yt("}",sn,".cur=",Pt,";"),mn||Yt("}")}function ln(Pt,Yt,Qt){var mn=Pt.shared,vn=mn.gl,_n=Pt.current,sn=Pt.next,Kt=mn.current,Jt=mn.next,on=Pt.cond(Kt,".dirty");Gn.forEach(function(fn){var En,On;if(!((fn=Lt(fn))in Qt.state))if(fn in sn){En=sn[fn],On=_n[fn];var Vn=b(pn[fn].length,function(jn){return on.def(En,"[",jn,"]")});on(Pt.cond(Vn.map(function(jn,Kn){return jn+"!=="+On+"["+Kn+"]"}).join("||")).then(vn,".",Nn[fn],"(",Vn,");",Vn.map(function(jn,Kn){return On+"["+Kn+"]="+jn}).join(";"),";"))}else En=on.def(Jt,".",fn),Vn=Pt.cond(En,"!==",Kt,".",fn),on(Vn),fn in Rn?Vn(Pt.cond(En).then(vn,".enable(",Rn[fn],");").else(vn,".disable(",Rn[fn],");"),Kt,".",fn,"=",En,";"):Vn(vn,".",Nn[fn],"(",En,");",Kt,".",fn,"=",En,";")}),Object.keys(Qt.state).length===0&&on(Kt,".dirty=false;"),Yt(on)}function nn(Pt,Yt,Qt,mn){var vn,_n=Pt.shared,sn=Pt.current,Kt=_n.current,Jt=_n.gl;U(Object.keys(Qt)).forEach(function(on){var fn=Qt[on];if(!mn||mn(fn)){var En=fn.append(Pt,Yt);if(Rn[on]){var On=Rn[on];te(fn)?(vn=Pt.link(En,{stable:!0}),Yt(Pt.cond(vn).then(Jt,".enable(",On,");").else(Jt,".disable(",On,");")),Yt(Kt,".",on,"=",vn,";")):(Yt(Pt.cond(En).then(Jt,".enable(",On,");").else(Jt,".disable(",On,");")),Yt(Kt,".",on,"=",En,";"))}else if(x(En)){var Vn=sn[on];Yt(Jt,".",Nn[on],"(",En,");",En.map(function(jn,Kn){return Vn+"["+Kn+"]="+jn}).join(";"),";")}else te(fn)?(vn=Pt.link(En,{stable:!0}),Yt(Jt,".",Nn[on],"(",vn,");",Kt,".",on,"=",vn,";")):Yt(Jt,".",Nn[on],"(",En,");",Kt,".",on,"=",En,";")}})}function cn(Pt,Yt){jt&&(Pt.instancing=Yt.def(Pt.shared.extensions,".angle_instanced_arrays"))}function Tn(Pt,Yt,Qt,mn,vn){function _n(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function sn(Kn){Kn(on=Yt.def(),"=",_n(),";"),typeof vn=="string"?Kn(On,".count+=",vn,";"):Kn(On,".count++;"),xt&&(mn?Kn(fn=Yt.def(),"=",jn,".getNumPendingQueries();"):Kn(jn,".beginQuery(",On,");"))}function Kt(Kn){Kn(On,".cpuTime+=",_n(),"-",on,";"),xt&&(mn?Kn(jn,".pushScopeStats(",fn,",",jn,".getNumPendingQueries(),",On,");"):Kn(jn,".endQuery();"))}function Jt(Kn){var Yn=Yt.def(Vn,".profile");Yt(Vn,".profile=",Kn,";"),Yt.exit(Vn,".profile=",Yn,";")}var on,fn,En=Pt.shared,On=Pt.stats,Vn=En.current,jn=En.timer;if(Qt=Qt.profile){if(te(Qt))return void(Qt.enable?(sn(Yt),Kt(Yt.exit),Jt("true")):Jt("false"));Jt(Qt=Qt.append(Pt,Yt))}else Qt=Yt.def(Vn,".profile");sn(En=Pt.block()),Yt("if(",Qt,"){",En,"}"),Kt(Pt=Pt.block()),Yt.exit("if(",Qt,"){",Pt,"}")}function Mn(Pt,Yt,Qt,mn,vn){function _n(Kt,Jt,on){function fn(){Yt("if(!",jn,".buffer){",On,".enableVertexAttribArray(",Vn,");}");var rr,Jn=on.type;rr=on.size?Yt.def(on.size,"||",Jt):Jt,Yt("if(",jn,".type!==",Jn,"||",jn,".size!==",rr,"||",nr.map(function(vr){return jn+"."+vr+"!=="+on[vr]}).join("||"),"){",On,".bindBuffer(",34962,",",Kn,".buffer);",On,".vertexAttribPointer(",[Vn,rr,Jn,on.normalized,on.stride,on.offset],");",jn,".type=",Jn,";",jn,".size=",rr,";",nr.map(function(vr){return jn+"."+vr+"="+on[vr]+";"}).join(""),"}"),jt&&(Jn=on.divisor,Yt("if(",jn,".divisor!==",Jn,"){",Pt.instancing,".vertexAttribDivisorANGLE(",[Vn,Jn],");",jn,".divisor=",Jn,";}"))}function En(){Yt("if(",jn,".buffer){",On,".disableVertexAttribArray(",Vn,");",jn,".buffer=null;","}if(",Qe.map(function(rr,Jn){return jn+"."+rr+"!=="+Yn[Jn]}).join("||"),"){",On,".vertexAttrib4f(",Vn,",",Yn,");",Qe.map(function(rr,Jn){return jn+"."+rr+"="+Yn[Jn]+";"}).join(""),"}")}var On=sn.gl,Vn=Yt.def(Kt,".location"),jn=Yt.def(sn.attributes,"[",Vn,"]");Kt=on.state;var Kn=on.buffer,Yn=[on.x,on.y,on.z,on.w],nr=["buffer","normalized","offset","stride"];Kt===1?fn():Kt===2?En():(Yt("if(",Kt,"===",1,"){"),fn(),Yt("}else{"),En(),Yt("}"))}var sn=Pt.shared;mn.forEach(function(Kt){var Jt,on=Kt.name,fn=Qt.attributes[on];if(fn){if(!vn(fn))return;Jt=fn.append(Pt,Yt)}else{if(!vn(We))return;var En=Pt.scopeAttrib(on);Jt={},Object.keys(new er).forEach(function(On){Jt[On]=Yt.def(En,".",On)})}_n(Pt.link(Kt),function(On){switch(On){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Kt.info.type),Jt)})}function zn(Pt,Yt,Qt,mn,vn,_n){for(var sn,Kt=Pt.shared,Jt=Kt.gl,on=0;on<mn.length;++on){var fn,En=(jn=mn[on]).name,On=jn.info.type,Vn=Qt.uniforms[En],jn=Pt.link(jn)+".location";if(Vn){if(!vn(Vn))continue;if(te(Vn)){if(En=Vn.value,On===35678||On===35680)Yt(Jt,".uniform1i(",jn,",",(On=Pt.link(En._texture||En.color[0]._texture))+".bind());"),Yt.exit(On,".unbind();");else if(On===35674||On===35675||On===35676)Vn=2,On===35675?Vn=3:On===35676&&(Vn=4),Yt(Jt,".uniformMatrix",Vn,"fv(",jn,",false,",En=Pt.global.def("new Float32Array(["+Array.prototype.slice.call(En)+"])"),");");else{switch(On){case 5126:sn="1f";break;case 35664:sn="2f";break;case 35665:sn="3f";break;case 35666:sn="4f";break;case 35670:case 5124:sn="1i";break;case 35671:case 35667:sn="2i";break;case 35672:case 35668:sn="3i";break;case 35673:case 35669:sn="4i"}Yt(Jt,".uniform",sn,"(",jn,",",x(En)?Array.prototype.slice.call(En):En,");")}continue}fn=Vn.append(Pt,Yt)}else{if(!vn(We))continue;fn=Yt.def(Kt.uniforms,"[",Ge.id(En),"]")}switch(On===35678?Yt("if(",fn,"&&",fn,'._reglType==="framebuffer"){',fn,"=",fn,".color[0];","}"):On===35680&&Yt("if(",fn,"&&",fn,'._reglType==="framebufferCube"){',fn,"=",fn,".color[0];","}"),En=1,On){case 35678:case 35680:On=Yt.def(fn,"._texture"),Yt(Jt,".uniform1i(",jn,",",On,".bind());"),Yt.exit(On,".unbind();");continue;case 5124:case 35670:sn="1i";break;case 35667:case 35671:sn="2i",En=2;break;case 35668:case 35672:sn="3i",En=3;break;case 35669:case 35673:sn="4i",En=4;break;case 5126:sn="1f";break;case 35664:sn="2f",En=2;break;case 35665:sn="3f",En=3;break;case 35666:sn="4f",En=4;break;case 35674:sn="Matrix2fv";break;case 35675:sn="Matrix3fv";break;case 35676:sn="Matrix4fv"}if(sn.charAt(0)==="M"){Yt(Jt,".uniform",sn,"(",jn,","),jn=Math.pow(On-35674+2,2);var Kn=Pt.global.def("new Float32Array(",jn,")");Array.isArray(fn)?Yt("false,(",b(jn,function(nr){return Kn+"["+nr+"]="+fn[nr]}),",",Kn,")"):Yt("false,(Array.isArray(",fn,")||",fn," instanceof Float32Array)?",fn,":(",b(jn,function(nr){return Kn+"["+nr+"]="+fn+"["+nr+"]"}),",",Kn,")"),Yt(");")}else{if(1<En){On=[];var Yn=[];for(Vn=0;Vn<En;++Vn)Array.isArray(fn)?Yn.push(fn[Vn]):Yn.push(Yt.def(fn+"["+Vn+"]")),_n&&On.push(Yt.def());_n&&Yt("if(!",Pt.batchId,"||",On.map(function(nr,rr){return nr+"!=="+Yn[rr]}).join("||"),"){",On.map(function(nr,rr){return nr+"="+Yn[rr]+";"}).join("")),Yt(Jt,".uniform",sn,"(",jn,",",Yn.join(","),");")}else _n&&(On=Yt.def(),Yt("if(!",Pt.batchId,"||",On,"!==",fn,"){",On,"=",fn,";")),Yt(Jt,".uniform",sn,"(",jn,",",fn,");");_n&&Yt("}")}}}function In(Pt,Yt,Qt,mn){function vn(Jn){var vr=On[Jn];return vr?vr.contextDep&&mn.contextDynamic||vr.propDep?vr.append(Pt,Qt):vr.append(Pt,Yt):Yt.def(En,".",Jn)}function _n(){function Jn(){Qt(Jt,".drawElementsInstancedANGLE(",[jn,Yn,nr,Kn+"<<(("+nr+"-5121)>>1)",Kt],");")}function vr(){Qt(Jt,".drawArraysInstancedANGLE(",[jn,Kn,Yn,Kt],");")}Vn&&Vn!=="null"?rr?Jn():(Qt("if(",Vn,"){"),Jn(),Qt("}else{"),vr(),Qt("}")):vr()}function sn(){function Jn(){Qt(fn+".drawElements("+[jn,Yn,nr,Kn+"<<(("+nr+"-5121)>>1)"]+");")}function vr(){Qt(fn+".drawArrays("+[jn,Kn,Yn]+");")}Vn&&Vn!=="null"?rr?Jn():(Qt("if(",Vn,"){"),Jn(),Qt("}else{"),vr(),Qt("}")):vr()}var Kt,Jt,on=Pt.shared,fn=on.gl,En=on.draw,On=mn.draw,Vn=function(){var Jn=On.elements,vr=Yt;return Jn?((Jn.contextDep&&mn.contextDynamic||Jn.propDep)&&(vr=Qt),Jn=Jn.append(Pt,vr),On.elementsActive&&vr("if("+Jn+")"+fn+".bindBuffer(34963,"+Jn+".buffer.buffer);")):(Jn=vr.def(),vr(Jn,"=",En,".","elements",";","if(",Jn,"){",fn,".bindBuffer(",34963,",",Jn,".buffer.buffer);}","else if(",on.vao,".currentVAO){",Jn,"=",Pt.shared.elements+".getElements("+on.vao,".currentVAO.elements);",xn?"":"if("+Jn+")"+fn+".bindBuffer(34963,"+Jn+".buffer.buffer);","}")),Jn}(),jn=vn("primitive"),Kn=vn("offset"),Yn=function(){var Jn=On.count,vr=Yt;return Jn?((Jn.contextDep&&mn.contextDynamic||Jn.propDep)&&(vr=Qt),Jn=Jn.append(Pt,vr)):Jn=vr.def(En,".","count"),Jn}();if(typeof Yn=="number"){if(Yn===0)return}else Qt("if(",Yn,"){"),Qt.exit("}");jt&&(Kt=vn("instances"),Jt=Pt.instancing);var nr=Vn+".type",rr=On.elements&&te(On.elements)&&!On.vaoActive;jt&&(typeof Kt!="number"||0<=Kt)?typeof Kt=="string"?(Qt("if(",Kt,">0){"),_n(),Qt("}else if(",Kt,"<0){"),sn(),Qt("}")):_n():sn()}function Pn(Pt,Yt,Qt,mn,vn){return vn=(Yt=rn()).proc("body",vn),jt&&(Yt.instancing=vn.def(Yt.shared.extensions,".angle_instanced_arrays")),Pt(Yt,vn,Qt,mn),Yt.compile().body}function Hn(Pt,Yt,Qt,mn){cn(Pt,Yt),Qt.useVAO?Qt.drawVAO?Yt(Pt.shared.vao,".setVAO(",Qt.drawVAO.append(Pt,Yt),");"):Yt(Pt.shared.vao,".setVAO(",Pt.shared.vao,".targetVAO);"):(Yt(Pt.shared.vao,".setVAO(null);"),Mn(Pt,Yt,Qt,mn.attributes,function(){return!0})),zn(Pt,Yt,Qt,mn.uniforms,function(){return!0},!1),In(Pt,Yt,Yt,Qt)}function Fn(Pt,Yt,Qt,mn){function vn(){return!0}Pt.batchId="a1",cn(Pt,Yt),Mn(Pt,Yt,Qt,mn.attributes,vn),zn(Pt,Yt,Qt,mn.uniforms,vn,!1),In(Pt,Yt,Yt,Qt)}function tr(Pt,Yt,Qt,mn){function vn(En){return En.contextDep&&sn||En.propDep}function _n(En){return!vn(En)}cn(Pt,Yt);var sn=Qt.contextDep,Kt=Yt.def(),Jt=Yt.def();Pt.shared.props=Jt,Pt.batchId=Kt;var on=Pt.scope(),fn=Pt.scope();Yt(on.entry,"for(",Kt,"=0;",Kt,"<","a1",";++",Kt,"){",Jt,"=","a0","[",Kt,"];",fn,"}",on.exit),Qt.needsContext&&hn(Pt,fn,Qt.context),Qt.needsFramebuffer&&Xt(Pt,fn,Qt.framebuffer),nn(Pt,fn,Qt.state,vn),Qt.profile&&vn(Qt.profile)&&Tn(Pt,fn,Qt,!1,!0),mn?(Qt.useVAO?Qt.drawVAO?vn(Qt.drawVAO)?fn(Pt.shared.vao,".setVAO(",Qt.drawVAO.append(Pt,fn),");"):on(Pt.shared.vao,".setVAO(",Qt.drawVAO.append(Pt,on),");"):on(Pt.shared.vao,".setVAO(",Pt.shared.vao,".targetVAO);"):(on(Pt.shared.vao,".setVAO(null);"),Mn(Pt,on,Qt,mn.attributes,_n),Mn(Pt,fn,Qt,mn.attributes,vn)),zn(Pt,on,Qt,mn.uniforms,_n,!1),zn(Pt,fn,Qt,mn.uniforms,vn,!0),In(Pt,on,fn,Qt)):(Yt=Pt.global.def("{}"),mn=Qt.shader.progVar.append(Pt,fn),Jt=fn.def(mn,".id"),on=fn.def(Yt,"[",Jt,"]"),fn(Pt.shared.gl,".useProgram(",mn,".program);","if(!",on,"){",on,"=",Yt,"[",Jt,"]=",Pt.link(function(En){return Pn(Fn,Pt,Qt,En,2)}),"(",mn,");}",on,".call(this,a0[",Kt,"],",Kt,");"))}function or(Pt,Yt){function Qt(Kt){var Jt=Yt.shader[Kt];Jt&&(Jt=Jt.append(Pt,mn),isNaN(Jt)?mn.set(vn.shader,"."+Kt,Jt):mn.set(vn.shader,"."+Kt,Pt.link(Jt,{stable:!0})))}var mn=Pt.proc("scope",3);Pt.batchId="a2";var vn=Pt.shared,_n=vn.current;if(hn(Pt,mn,Yt.context),Yt.framebuffer&&Yt.framebuffer.append(Pt,mn),U(Object.keys(Yt.state)).forEach(function(Kt){var Jt=Yt.state[Kt],on=Jt.append(Pt,mn);x(on)?on.forEach(function(fn,En){isNaN(fn)?mn.set(Pt.next[Kt],"["+En+"]",fn):mn.set(Pt.next[Kt],"["+En+"]",Pt.link(fn,{stable:!0}))}):te(Jt)?mn.set(vn.next,"."+Kt,Pt.link(on,{stable:!0})):mn.set(vn.next,"."+Kt,on)}),Tn(Pt,mn,Yt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Kt){var Jt=Yt.draw[Kt];Jt&&(Jt=Jt.append(Pt,mn),isNaN(Jt)?mn.set(vn.draw,"."+Kt,Jt):mn.set(vn.draw,"."+Kt,Pt.link(Jt),{stable:!0}))}),Object.keys(Yt.uniforms).forEach(function(Kt){var Jt=Yt.uniforms[Kt].append(Pt,mn);Array.isArray(Jt)&&(Jt="["+Jt.map(function(on){return isNaN(on)?on:Pt.link(on,{stable:!0})})+"]"),mn.set(vn.uniforms,"["+Pt.link(Ge.id(Kt),{stable:!0})+"]",Jt)}),Object.keys(Yt.attributes).forEach(function(Kt){var Jt=Yt.attributes[Kt].append(Pt,mn),on=Pt.scopeAttrib(Kt);Object.keys(new er).forEach(function(fn){mn.set(on,"."+fn,Jt[fn])})}),Yt.scopeVAO){var sn=Yt.scopeVAO.append(Pt,mn);isNaN(sn)?mn.set(vn.vao,".targetVAO",sn):mn.set(vn.vao,".targetVAO",Pt.link(sn,{stable:!0}))}Qt("vert"),Qt("frag"),0<Object.keys(Yt.state).length&&(mn(_n,".dirty=true;"),mn.exit(_n,".dirty=true;")),mn("a1(",Pt.shared.context,",a0,",Pt.batchId,");")}function ur(Pt,Yt,Qt){var mn=Yt.static[Qt];if(mn&&function(fn){if(typeof fn=="object"&&!x(fn)){for(var En=Object.keys(fn),On=0;On<En.length;++On)if(oe.isDynamic(fn[En[On]]))return!0;return!1}}(mn)){var vn=Pt.global,_n=Object.keys(mn),sn=!1,Kt=!1,Jt=!1,on=Pt.global.def("{}");_n.forEach(function(fn){var En=mn[fn];if(oe.isDynamic(En))typeof En=="function"&&(En=mn[fn]=oe.unbox(En)),fn=K(En,null),sn=sn||fn.thisDep,Jt=Jt||fn.propDep,Kt=Kt||fn.contextDep;else{switch(vn(on,".",fn,"="),typeof En){case"number":vn(En);break;case"string":vn('"',En,'"');break;case"object":Array.isArray(En)&&vn("[",En.join(),"]");break;default:vn(Pt.link(En))}vn(";")}}),Yt.dynamic[Qt]=new oe.DynamicVariable(4,{thisDep:sn,contextDep:Kt,propDep:Jt,ref:on,append:function(fn,En){_n.forEach(function(On){var Vn=mn[On];oe.isDynamic(Vn)&&(Vn=fn.invoke(En,Vn),En(on,".",On,"=",Vn,";"))})}}),delete Yt.static[Qt]}}var er=pt.Record,Mr={add:32774,subtract:32778,"reverse subtract":32779};at.ext_blend_minmax&&(Mr.min=32775,Mr.max=32776);var jt=at.angle_instanced_arrays,tn=at.webgl_draw_buffers,xn=at.oes_vertex_array_object,pn={dirty:!0,profile:Et.profile},Sn={},Gn=[],Rn={},Nn={};zt("dither",3024),zt("blend.enable",3042),Wt("blend.color","blendColor",[0,0,0,0]),Wt("blend.equation","blendEquationSeparate",[32774,32774]),Wt("blend.func","blendFuncSeparate",[1,0,1,0]),zt("depth.enable",2929,!0),Wt("depth.func","depthFunc",513),Wt("depth.range","depthRange",[0,1]),Wt("depth.mask","depthMask",!0),Wt("colorMask","colorMask",[!0,!0,!0,!0]),zt("cull.enable",2884),Wt("cull.face","cullFace",1029),Wt("frontFace","frontFace",2305),Wt("lineWidth","lineWidth",1),zt("polygonOffset.enable",32823),Wt("polygonOffset.offset","polygonOffset",[0,0]),zt("sample.alpha",32926),zt("sample.enable",32928),Wt("sample.coverage","sampleCoverage",[1,!1]),zt("stencil.enable",2960),Wt("stencil.mask","stencilMask",-1),Wt("stencil.func","stencilFunc",[519,0,-1]),Wt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Wt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),zt("scissor.enable",3089),Wt("scissor.box","scissor",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]),Wt("viewport","viewport",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]);var ir={gl:Be,context:Mt,strings:Ge,next:Sn,current:pn,draw:ut,elements:Fe,buffer:Re,shader:gt,attributes:pt.state,vao:pt,uniforms:ct,framebuffer:Ye,extensions:at,timer:xt,isBufferArgs:F},Gt={primTypes:Se,compareFuncs:Dt,blendFuncs:It,blendEquations:Mr,stencilOps:Ct,glTypes:_e,orientationType:He};tn&&(Gt.backBuffer=[1029],Gt.drawBuffer=b(nt.maxDrawbuffers,function(Pt){return Pt===0?[0]:b(Pt,function(Yt){return 36064+Yt})}));var dn=0;return{next:Sn,current:pn,procs:function(){var Pt=rn(),Yt=Pt.proc("poll"),Qt=Pt.proc("refresh"),mn=Pt.block();Yt(mn),Qt(mn);var vn,_n=(Jt=Pt.shared).gl,sn=Jt.next,Kt=Jt.current;mn(Kt,".dirty=false;"),Xt(Pt,Yt),Xt(Pt,Qt,null,!0),jt&&(vn=Pt.link(jt)),at.oes_vertex_array_object&&Qt(Pt.link(at.oes_vertex_array_object),".bindVertexArrayOES(null);");var Jt=Qt.def(Jt.attributes),on=Qt.def(0),fn=Pt.cond(on,".buffer");fn.then(_n,".enableVertexAttribArray(i);",_n,".bindBuffer(",34962,",",on,".buffer.buffer);",_n,".vertexAttribPointer(i,",on,".size,",on,".type,",on,".normalized,",on,".stride,",on,".offset);").else(_n,".disableVertexAttribArray(i);",_n,".vertexAttrib4f(i,",on,".x,",on,".y,",on,".z,",on,".w);",on,".buffer=null;");var En=Pt.link(nt.maxAttributes,{stable:!0});return Qt("for(var i=0;i<",En,";++i){",on,"=",Jt,"[i];",fn,"}"),jt&&Qt("for(var i=0;i<",En,";++i){",vn,".vertexAttribDivisorANGLE(i,",Jt,"[i].divisor);","}"),Qt(Pt.shared.vao,".currentVAO=null;",Pt.shared.vao,".setVAO(",Pt.shared.vao,".targetVAO);"),Object.keys(Rn).forEach(function(On){var Vn=Rn[On],jn=mn.def(sn,".",On),Kn=Pt.block();Kn("if(",jn,"){",_n,".enable(",Vn,")}else{",_n,".disable(",Vn,")}",Kt,".",On,"=",jn,";"),Qt(Kn),Yt("if(",jn,"!==",Kt,".",On,"){",Kn,"}")}),Object.keys(Nn).forEach(function(On){var Vn,jn,Kn=Nn[On],Yn=pn[On],nr=Pt.block();nr(_n,".",Kn,"("),x(Yn)?(Kn=Yn.length,Vn=Pt.global.def(sn,".",On),jn=Pt.global.def(Kt,".",On),nr(b(Kn,function(rr){return Vn+"["+rr+"]"}),");",b(Kn,function(rr){return jn+"["+rr+"]="+Vn+"["+rr+"];"}).join("")),Yt("if(",b(Kn,function(rr){return Vn+"["+rr+"]!=="+jn+"["+rr+"]"}).join("||"),"){",nr,"}")):(Vn=mn.def(sn,".",On),jn=mn.def(Kt,".",On),nr(Vn,");",Kt,".",On,"=",Vn,";"),Yt("if(",Vn,"!==",jn,"){",nr,"}")),Qt(nr)}),Pt.compile()}(),compile:function(Pt,Yt,Qt,mn,vn){var _n=rn();_n.stats=_n.link(vn),Object.keys(Yt.static).forEach(function(Kt){ur(_n,Yt,Kt)}),wt.forEach(function(Kt){ur(_n,Pt,Kt)});var sn=An(Pt,Yt,Qt,mn);return sn.shader.program&&(sn.shader.program.attributes.sort(function(Kt,Jt){return Kt.name<Jt.name?-1:1}),sn.shader.program.uniforms.sort(function(Kt,Jt){return Kt.name<Jt.name?-1:1})),function(Kt,Jt){var on=Kt.proc("draw",1);cn(Kt,on),hn(Kt,on,Jt.context),Xt(Kt,on,Jt.framebuffer),ln(Kt,on,Jt),nn(Kt,on,Jt.state),Tn(Kt,on,Jt,!1,!0);var fn=Jt.shader.progVar.append(Kt,on);if(on(Kt.shared.gl,".useProgram(",fn,".program);"),Jt.shader.program)Hn(Kt,on,Jt,Jt.shader.program);else{on(Kt.shared.vao,".setVAO(null);");var En=Kt.global.def("{}"),On=on.def(fn,".id"),Vn=on.def(En,"[",On,"]");on(Kt.cond(Vn).then(Vn,".call(this,a0);").else(Vn,"=",En,"[",On,"]=",Kt.link(function(jn){return Pn(Hn,Kt,Jt,jn,1)}),"(",fn,");",Vn,".call(this,a0);"))}0<Object.keys(Jt.state).length&&on(Kt.shared.current,".dirty=true;"),Kt.shared.vao&&on(Kt.shared.vao,".setVAO(null);")}(_n,sn),or(_n,sn),function(Kt,Jt){function on(Yn){return Yn.contextDep&&En||Yn.propDep}var fn=Kt.proc("batch",2);Kt.batchId="0",cn(Kt,fn);var En=!1,On=!0;Object.keys(Jt.context).forEach(function(Yn){En=En||Jt.context[Yn].propDep}),En||(hn(Kt,fn,Jt.context),On=!1);var Vn=!1;if((jn=Jt.framebuffer)?(jn.propDep?En=Vn=!0:jn.contextDep&&En&&(Vn=!0),Vn||Xt(Kt,fn,jn)):Xt(Kt,fn,null),Jt.state.viewport&&Jt.state.viewport.propDep&&(En=!0),ln(Kt,fn,Jt),nn(Kt,fn,Jt.state,function(Yn){return!on(Yn)}),Jt.profile&&on(Jt.profile)||Tn(Kt,fn,Jt,!1,"a1"),Jt.contextDep=En,Jt.needsContext=On,Jt.needsFramebuffer=Vn,(On=Jt.shader.progVar).contextDep&&En||On.propDep)tr(Kt,fn,Jt,null);else if(On=On.append(Kt,fn),fn(Kt.shared.gl,".useProgram(",On,".program);"),Jt.shader.program)tr(Kt,fn,Jt,Jt.shader.program);else{fn(Kt.shared.vao,".setVAO(null);");var jn=Kt.global.def("{}"),Kn=(Vn=fn.def(On,".id"),fn.def(jn,"[",Vn,"]"));fn(Kt.cond(Kn).then(Kn,".call(this,a0,a1);").else(Kn,"=",jn,"[",Vn,"]=",Kt.link(function(Yn){return Pn(tr,Kt,Jt,Yn,2)}),"(",On,");",Kn,".call(this,a0,a1);"))}0<Object.keys(Jt.state).length&&fn(Kt.shared.current,".dirty=true;"),Kt.shared.vao&&fn(Kt.shared.vao,".setVAO(null);")}(_n,sn),$(_n.compile(),{destroy:function(){sn.shader.program.destroy()}})}}}function Z(Be,Ge){for(var at=0;at<Be.length;++at)if(Be[at]===Ge)return at;return-1}var $=function(Be,Ge){for(var at=Object.keys(Ge),nt=0;nt<at.length;++nt)Be[at[nt]]=Ge[at[nt]];return Be},re=0,oe={DynamicVariable:z,define:function(Be,Ge){return new z(Be,M(Ge+""))},isDynamic:function(Be){return typeof Be=="function"&&!Be._reglType||Be instanceof z},unbox:function Be(Ge,at){return typeof Ge=="function"?new z(0,Ge):typeof Ge=="number"||typeof Ge=="boolean"?new z(5,Ge):Array.isArray(Ge)?new z(6,Ge.map(function(nt,Re){return Be(nt,at+"["+Re+"]")})):Ge instanceof z?Ge:void 0},accessor:M},ie={next:typeof requestAnimationFrame=="function"?function(Be){return requestAnimationFrame(Be)}:function(Be){return setTimeout(Be,16)},cancel:typeof cancelAnimationFrame=="function"?function(Be){return cancelAnimationFrame(Be)}:clearTimeout},ue=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date},me=s();me.zero=s();var be=function(Be,Ge){var at=1;Ge.ext_texture_filter_anisotropic&&(at=Be.getParameter(34047));var nt=1,Re=1;Ge.webgl_draw_buffers&&(nt=Be.getParameter(34852),Re=Be.getParameter(36063));var Fe=!!Ge.oes_texture_float;if(Fe){Fe=Be.createTexture(),Be.bindTexture(3553,Fe),Be.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var rt=Be.createFramebuffer();if(Be.bindFramebuffer(36160,rt),Be.framebufferTexture2D(36160,36064,3553,Fe,0),Be.bindTexture(3553,null),Be.checkFramebufferStatus(36160)!==36053)Fe=!1;else{Be.viewport(0,0,1,1),Be.clearColor(1,0,0,1),Be.clear(16384);var Ye=me.allocType(5126,4);Be.readPixels(0,0,1,1,6408,5126,Ye),Be.getError()?Fe=!1:(Be.deleteFramebuffer(rt),Be.deleteTexture(Fe),Fe=Ye[0]===1),me.freeType(Ye)}}return Ye=!0,typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Ye=Be.createTexture(),rt=me.allocType(5121,36),Be.activeTexture(33984),Be.bindTexture(34067,Ye),Be.texImage2D(34069,0,6408,3,3,0,6408,5121,rt),me.freeType(rt),Be.bindTexture(34067,null),Be.deleteTexture(Ye),Ye=!Be.getError()),{colorBits:[Be.getParameter(3410),Be.getParameter(3411),Be.getParameter(3412),Be.getParameter(3413)],depthBits:Be.getParameter(3414),stencilBits:Be.getParameter(3415),subpixelBits:Be.getParameter(3408),extensions:Object.keys(Ge).filter(function(ct){return!!Ge[ct]}),maxAnisotropic:at,maxDrawbuffers:nt,maxColorAttachments:Re,pointSizeDims:Be.getParameter(33901),lineWidthDims:Be.getParameter(33902),maxViewportDims:Be.getParameter(3386),maxCombinedTextureUnits:Be.getParameter(35661),maxCubeMapSize:Be.getParameter(34076),maxRenderbufferSize:Be.getParameter(34024),maxTextureUnits:Be.getParameter(34930),maxTextureSize:Be.getParameter(3379),maxAttributes:Be.getParameter(34921),maxVertexUniforms:Be.getParameter(36347),maxVertexTextureUnits:Be.getParameter(35660),maxVaryingVectors:Be.getParameter(36348),maxFragmentUniforms:Be.getParameter(36349),glsl:Be.getParameter(35724),renderer:Be.getParameter(7937),vendor:Be.getParameter(7936),version:Be.getParameter(7938),readFloat:Fe,npotTextureCube:Ye}},ge=function(Be){return Be instanceof Uint8Array||Be instanceof Uint16Array||Be instanceof Uint32Array||Be instanceof Int8Array||Be instanceof Int16Array||Be instanceof Int32Array||Be instanceof Float32Array||Be instanceof Float64Array||Be instanceof Uint8ClampedArray},de=function(Be){return Object.keys(Be).map(function(Ge){return Be[Ge]})},ve={shape:function(Be){for(var Ge=[];Be.length;Be=Be[0])Ge.push(Be.length);return Ge},flatten:function(Be,Ge,at,nt){var Re=1;if(Ge.length)for(var Fe=0;Fe<Ge.length;++Fe)Re*=Ge[Fe];else Re=0;switch(at=nt||me.allocType(at,Re),Ge.length){case 0:break;case 1:for(nt=Ge[0],Ge=0;Ge<nt;++Ge)at[Ge]=Be[Ge];break;case 2:for(nt=Ge[0],Ge=Ge[1],Fe=Re=0;Fe<nt;++Fe)for(var rt=Be[Fe],Ye=0;Ye<Ge;++Ye)at[Re++]=rt[Ye];break;case 3:i(Be,Ge[0],Ge[1],Ge[2],at,0);break;default:n(Be,Ge,0,at,0)}return at}},pe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},_e={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Te={dynamic:35048,stream:35040,static:35044},le=ve.flatten,ae=ve.shape,he=[];he[5120]=1,he[5122]=2,he[5124]=4,he[5121]=1,he[5123]=2,he[5125]=4,he[5126]=4;var Se={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ke=new Float32Array(1),Me=new Uint32Array(ke.buffer),Ee=[9984,9986,9985,9987],De=[0,6409,6410,6407,6408],fe={};fe[6409]=fe[6406]=fe[6402]=1,fe[34041]=fe[6410]=2,fe[6407]=fe[35904]=3,fe[6408]=fe[35906]=4;var xe=g("HTMLCanvasElement"),we=g("OffscreenCanvas"),Oe=g("CanvasRenderingContext2D"),ze=g("ImageBitmap"),Pe=g("HTMLImageElement"),Ue=g("HTMLVideoElement"),Ve=Object.keys(pe).concat([xe,we,Oe,ze,Pe,Ue]),Ze=[];Ze[5121]=1,Ze[5126]=4,Ze[36193]=2,Ze[5123]=2,Ze[5125]=4;var it=[];it[32854]=2,it[32855]=2,it[36194]=2,it[34041]=4,it[33776]=.5,it[33777]=.5,it[33778]=1,it[33779]=1,it[35986]=.5,it[35987]=1,it[34798]=1,it[35840]=.5,it[35841]=.25,it[35842]=.5,it[35843]=.25,it[36196]=.5;var tt=[];tt[32854]=2,tt[32855]=2,tt[36194]=2,tt[33189]=2,tt[36168]=1,tt[34041]=4,tt[35907]=4,tt[34836]=16,tt[34842]=8,tt[34843]=6;var dt=function(Be,Ge,at,nt,Re){function Fe(ut){this.id=pt++,this.refCount=1,this.renderbuffer=ut,this.format=32854,this.height=this.width=0,Re.profile&&(this.stats={size:0})}function rt(ut){var Mt=ut.renderbuffer;Be.bindRenderbuffer(36161,null),Be.deleteRenderbuffer(Mt),ut.renderbuffer=null,ut.refCount=0,delete gt[ut.id],nt.renderbufferCount--}var Ye={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ge.ext_srgb&&(Ye.srgba=35907),Ge.ext_color_buffer_half_float&&(Ye.rgba16f=34842,Ye.rgb16f=34843),Ge.webgl_color_buffer_float&&(Ye.rgba32f=34836);var ct=[];Object.keys(Ye).forEach(function(ut){ct[Ye[ut]]=ut});var pt=0,gt={};return Fe.prototype.decRef=function(){0>=--this.refCount&&rt(this)},Re.profile&&(nt.getTotalRenderbufferSize=function(){var ut=0;return Object.keys(gt).forEach(function(Mt){ut+=gt[Mt].stats.size}),ut}),{create:function(ut,Mt){function xt(Et,Lt){var zt=0,Wt=0,rn=32854;if(typeof Et=="object"&&Et?("shape"in Et?(zt=0|(Wt=Et.shape)[0],Wt=0|Wt[1]):("radius"in Et&&(zt=Wt=0|Et.radius),"width"in Et&&(zt=0|Et.width),"height"in Et&&(Wt=0|Et.height)),"format"in Et&&(rn=Ye[Et.format])):typeof Et=="number"?(zt=0|Et,Wt=typeof Lt=="number"?0|Lt:zt):Et||(zt=Wt=1),zt!==mt.width||Wt!==mt.height||rn!==mt.format)return xt.width=mt.width=zt,xt.height=mt.height=Wt,mt.format=rn,Be.bindRenderbuffer(36161,mt.renderbuffer),Be.renderbufferStorage(36161,rn,zt,Wt),Re.profile&&(mt.stats.size=tt[mt.format]*mt.width*mt.height),xt.format=ct[mt.format],xt}var mt=new Fe(Be.createRenderbuffer());return gt[mt.id]=mt,nt.renderbufferCount++,xt(ut,Mt),xt.resize=function(Et,Lt){var zt=0|Et,Wt=0|Lt||zt;return zt===mt.width&&Wt===mt.height||(xt.width=mt.width=zt,xt.height=mt.height=Wt,Be.bindRenderbuffer(36161,mt.renderbuffer),Be.renderbufferStorage(36161,mt.format,zt,Wt),Re.profile&&(mt.stats.size=tt[mt.format]*mt.width*mt.height)),xt},xt._reglType="renderbuffer",xt._renderbuffer=mt,Re.profile&&(xt.stats=mt.stats),xt.destroy=function(){mt.decRef()},xt},clear:function(){de(gt).forEach(rt)},restore:function(){de(gt).forEach(function(ut){ut.renderbuffer=Be.createRenderbuffer(),Be.bindRenderbuffer(36161,ut.renderbuffer),Be.renderbufferStorage(36161,ut.format,ut.width,ut.height)}),Be.bindRenderbuffer(36161,null)}}},yt=[];yt[6408]=4,yt[6407]=3;var vt=[];vt[5121]=1,vt[5126]=4,vt[36193]=2;var et=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Qe=["x","y","z","w"],wt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),It={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Dt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ct={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},He={cw:2304,ccw:2305},We=new V(!1,!1,!1,function(){});return function(Be){function Ge(){if(Fn.length===0)Ut&&Ut.update(),er=null;else{er=ie.next(Ge),gt();for(var jt=Fn.length-1;0<=jt;--jt){var tn=Fn[jt];tn&&tn(An,null,0)}xt.flush(),Ut&&Ut.update()}}function at(){!er&&0<Fn.length&&(er=ie.next(Ge))}function nt(){er&&(ie.cancel(Ge),er=null)}function Re(jt){jt.preventDefault(),nt(),tr.forEach(function(tn){tn()})}function Fe(jt){xt.getError(),Et.restore(),cn.restore(),Xt.restore(),Tn.restore(),Mn.restore(),zn.restore(),nn.restore(),Ut&&Ut.restore(),In.procs.refresh(),at(),or.forEach(function(tn){tn()})}function rt(jt){function tn(Pt,Yt){var Qt={},mn={};return Object.keys(Pt).forEach(function(vn){var _n=Pt[vn];if(oe.isDynamic(_n))mn[vn]=oe.unbox(_n,vn);else{if(Yt&&Array.isArray(_n)){for(var sn=0;sn<_n.length;++sn)if(oe.isDynamic(_n[sn]))return void(mn[vn]=oe.unbox(_n,vn))}Qt[vn]=_n}}),{dynamic:mn,static:Qt}}var xn=tn(jt.context||{},!0),pn=tn(jt.uniforms||{},!0),Sn=tn(jt.attributes||{},!1);jt=tn(function(Pt){function Yt(mn){if(mn in Qt){var vn=Qt[mn];delete Qt[mn],Object.keys(vn).forEach(function(_n){Qt[mn+"."+_n]=vn[_n]})}}var Qt=$({},Pt);return delete Qt.uniforms,delete Qt.attributes,delete Qt.context,delete Qt.vao,"stencil"in Qt&&Qt.stencil.op&&(Qt.stencil.opBack=Qt.stencil.opFront=Qt.stencil.op,delete Qt.stencil.op),Yt("blend"),Yt("depth"),Yt("cull"),Yt("stencil"),Yt("polygonOffset"),Yt("scissor"),Yt("sample"),"vao"in Pt&&(Qt.vao=Pt.vao),Qt}(jt),!1);var Gn={gpuTime:0,cpuTime:0,count:0},Rn=In.compile(jt,Sn,pn,xn,Gn),Nn=Rn.draw,ir=Rn.batch,Gt=Rn.scope,dn=[];return $(function(Pt,Yt){var Qt;if(typeof Pt=="function")return Gt.call(this,null,Pt,0);if(typeof Yt=="function")if(typeof Pt=="number")for(Qt=0;Qt<Pt;++Qt)Gt.call(this,null,Yt,Qt);else{if(!Array.isArray(Pt))return Gt.call(this,Pt,Yt,0);for(Qt=0;Qt<Pt.length;++Qt)Gt.call(this,Pt[Qt],Yt,Qt)}else if(typeof Pt=="number"){if(0<Pt)return ir.call(this,function(mn){for(;dn.length<mn;)dn.push(null);return dn}(0|Pt),0|Pt)}else{if(!Array.isArray(Pt))return Nn.call(this,Pt);if(Pt.length)return ir.call(this,Pt,Pt.length)}},{stats:Gn,destroy:function(){Rn.destroy()}})}function Ye(jt,tn){var xn=0;In.procs.poll();var pn=tn.color;pn&&(xt.clearColor(+pn[0]||0,+pn[1]||0,+pn[2]||0,+pn[3]||0),xn|=16384),"depth"in tn&&(xt.clearDepth(+tn.depth),xn|=256),"stencil"in tn&&(xt.clearStencil(0|tn.stencil),xn|=1024),xt.clear(xn)}function ct(jt){return Fn.push(jt),at(),{cancel:function(){var tn=Z(Fn,jt);Fn[tn]=function xn(){var pn=Z(Fn,xn);Fn[pn]=Fn[Fn.length-1],--Fn.length,0>=Fn.length&&nt()}}}}function pt(){var jt=Pn.viewport,tn=Pn.scissor_box;jt[0]=jt[1]=tn[0]=tn[1]=0,An.viewportWidth=An.framebufferWidth=An.drawingBufferWidth=jt[2]=tn[2]=xt.drawingBufferWidth,An.viewportHeight=An.framebufferHeight=An.drawingBufferHeight=jt[3]=tn[3]=xt.drawingBufferHeight}function gt(){An.tick+=1,An.time=Mt(),pt(),In.procs.poll()}function ut(){Tn.refresh(),pt(),In.procs.refresh(),Ut&&Ut.update()}function Mt(){return(ue()-Vt)/1e3}if(!(Be=T(Be)))return null;var xt=Be.gl,mt=xt.getContextAttributes();xt.isContextLost();var Et=function(jt,tn){function xn(Rn){var Nn;Rn=Rn.toLowerCase();try{Nn=pn[Rn]=jt.getExtension(Rn)}catch(ir){}return!!Nn}for(var pn={},Sn=0;Sn<tn.extensions.length;++Sn){var Gn=tn.extensions[Sn];if(!xn(Gn))return tn.onDestroy(),tn.onDone('"'+Gn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return tn.optionalExtensions.forEach(xn),{extensions:pn,restore:function(){Object.keys(pn).forEach(function(Rn){if(pn[Rn]&&!xn(Rn))throw Error("(regl): error restoring extension "+Rn)})}}}(xt,Be);if(!Et)return null;var Lt=function(){var jt={"":0},tn=[""];return{id:function(xn){var pn=jt[xn];return pn||(pn=jt[xn]=tn.length,tn.push(xn),pn)},str:function(xn){return tn[xn]}}}(),zt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Wt=Be.cachedCode||{},rn=Et.extensions,Ut=function(jt,tn){function xn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function pn(dn,Pt,Yt){var Qt=Rn.pop()||new xn;Qt.startQueryIndex=dn,Qt.endQueryIndex=Pt,Qt.sum=0,Qt.stats=Yt,Nn.push(Qt)}if(!tn.ext_disjoint_timer_query)return null;var Sn=[],Gn=[],Rn=[],Nn=[],ir=[],Gt=[];return{beginQuery:function(dn){var Pt=Sn.pop()||tn.ext_disjoint_timer_query.createQueryEXT();tn.ext_disjoint_timer_query.beginQueryEXT(35007,Pt),Gn.push(Pt),pn(Gn.length-1,Gn.length,dn)},endQuery:function(){tn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:pn,update:function(){var dn,Pt;if((dn=Gn.length)!==0){Gt.length=Math.max(Gt.length,dn+1),ir.length=Math.max(ir.length,dn+1),ir[0]=0;var Yt=Gt[0]=0;for(Pt=dn=0;Pt<Gn.length;++Pt){var Qt=Gn[Pt];tn.ext_disjoint_timer_query.getQueryObjectEXT(Qt,34919)?(Yt+=tn.ext_disjoint_timer_query.getQueryObjectEXT(Qt,34918),Sn.push(Qt)):Gn[dn++]=Qt,ir[Pt+1]=Yt,Gt[Pt+1]=dn}for(Gn.length=dn,Pt=dn=0;Pt<Nn.length;++Pt){var mn=(Yt=Nn[Pt]).startQueryIndex;Qt=Yt.endQueryIndex,Yt.sum+=ir[Qt]-ir[mn],mn=Gt[mn],(Qt=Gt[Qt])===mn?(Yt.stats.gpuTime+=Yt.sum/1e6,Rn.push(Yt)):(Yt.startQueryIndex=mn,Yt.endQueryIndex=Qt,Nn[dn++]=Yt)}Nn.length=dn}},getNumPendingQueries:function(){return Gn.length},clear:function(){Sn.push.apply(Sn,Gn);for(var dn=0;dn<Sn.length;dn++)tn.ext_disjoint_timer_query.deleteQueryEXT(Sn[dn]);Gn.length=0,Sn.length=0},restore:function(){Gn.length=0,Sn.length=0}}}(0,rn),Vt=ue(),en=xt.drawingBufferWidth,Ln=xt.drawingBufferHeight,An={tick:0,time:0,viewportWidth:en,viewportHeight:Ln,framebufferWidth:en,framebufferHeight:Ln,drawingBufferWidth:en,drawingBufferHeight:Ln,pixelRatio:Be.pixelRatio},hn=(en={elements:null,primitive:4,count:-1,offset:0,instances:-1},be(xt,rn)),Xt=u(xt,zt,Be,function(jt){return nn.destroyBuffer(jt)}),ln=d(xt,rn,Xt,zt),nn=P(xt,rn,hn,zt,Xt,ln,en),cn=C(xt,Lt,zt,Be),Tn=S(xt,rn,hn,function(){In.procs.poll()},An,zt,Be),Mn=dt(xt,rn,0,zt,Be),zn=w(xt,rn,hn,Tn,Mn,zt),In=X(xt,Lt,rn,hn,Xt,ln,0,zn,{},nn,cn,en,An,Ut,Wt,Be),Pn=(Lt=O(xt,zn,In.procs.poll,An),In.next),Hn=xt.canvas,Fn=[],tr=[],or=[],ur=[Be.onDestroy],er=null;Hn&&(Hn.addEventListener("webglcontextlost",Re,!1),Hn.addEventListener("webglcontextrestored",Fe,!1));var Mr=zn.setFBO=rt({framebuffer:oe.define.call(null,1,"framebuffer")});return ut(),mt=$(rt,{clear:function(jt){if("framebuffer"in jt)if(jt.framebuffer&&jt.framebuffer_reglType==="framebufferCube")for(var tn=0;6>tn;++tn)Mr($({framebuffer:jt.framebuffer.faces[tn]},jt),Ye);else Mr(jt,Ye);else Ye(0,jt)},prop:oe.define.bind(null,1),context:oe.define.bind(null,2),this:oe.define.bind(null,3),draw:rt({}),buffer:function(jt){return Xt.create(jt,34962,!1,!1)},elements:function(jt){return ln.create(jt,!1)},texture:Tn.create2D,cube:Tn.createCube,renderbuffer:Mn.create,framebuffer:zn.create,framebufferCube:zn.createCube,vao:nn.createVAO,attributes:mt,frame:ct,on:function(jt,tn){var xn;switch(jt){case"frame":return ct(tn);case"lost":xn=tr;break;case"restore":xn=or;break;case"destroy":xn=ur}return xn.push(tn),{cancel:function(){for(var pn=0;pn<xn.length;++pn)if(xn[pn]===tn){xn[pn]=xn[xn.length-1],xn.pop();break}}}},limits:hn,hasExtension:function(jt){return 0<=hn.extensions.indexOf(jt.toLowerCase())},read:Lt,destroy:function(){Fn.length=0,nt(),Hn&&(Hn.removeEventListener("webglcontextlost",Re),Hn.removeEventListener("webglcontextrestored",Fe)),cn.clear(),zn.clear(),Mn.clear(),nn.clear(),Tn.clear(),ln.clear(),Xt.clear(),Ut&&Ut.clear(),ur.forEach(function(jt){jt()})},_gl:xt,_refresh:ut,poll:function(){gt(),Ut&&Ut.update()},now:Mt,stats:zt,getCachedCode:function(){return Wt},preloadCachedCode:function(jt){Object.entries(jt).forEach(function(tn){Wt[tn[0]]=tn[1]})}}),Be.onDone(null,mt),mt}}()},30456:function(ee,z,e){var M=e(33576),k=M.Buffer;function o(b,h){for(var s in b)h[s]=b[s]}function T(b,h,s){return k(b,h,s)}k.from&&k.alloc&&k.allocUnsafe&&k.allocUnsafeSlow?ee.exports=M:(o(M,z),z.Buffer=T),T.prototype=Object.create(k.prototype),o(k,T),T.from=function(b,h,s){if(typeof b=="number")throw new TypeError("Argument must not be a number");return k(b,h,s)},T.alloc=function(b,h,s){if(typeof b!="number")throw new TypeError("Argument must be a number");var t=k(b);return h!==void 0?typeof s=="string"?t.fill(h,s):t.fill(h):t.fill(0),t},T.allocUnsafe=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return k(b)},T.allocUnsafeSlow=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return M.SlowBuffer(b)}},14500:function(ee,z,e){"use strict";var M=e(53664),k=e(64348),o=e(39640)(),T=e(2304),b=M("%TypeError%"),h=M("%Math.floor%");ee.exports=function(s,t){if(typeof s!="function")throw new b("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||h(t)!==t)throw new b("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,r=!0;if("length"in s&&T){var a=T(s,"length");a&&!a.configurable&&(n=!1),a&&!a.writable&&(r=!1)}return(n||r||!i)&&(o?k(s,"length",t,!0,!0):k(s,"length",t)),s}},29936:function(ee,z,e){ee.exports=k;var M=e(61252).EventEmitter;function k(){M.call(this)}e(6768)(k,M),k.Readable=e(12348),k.Writable=e(11288),k.Duplex=e(15316),k.Transform=e(22477),k.PassThrough=e(27136),k.finished=e(15932),k.pipeline=e(38180),k.Stream=k,k.prototype.pipe=function(o,T){var b=this;function h(l){o.writable&&o.write(l)===!1&&b.pause&&b.pause()}function s(){b.readable&&b.resume&&b.resume()}b.on("data",h),o.on("drain",s),o._isStdio||T&&T.end===!1||(b.on("end",i),b.on("close",n));var t=!1;function i(){t||(t=!0,o.end())}function n(){t||(t=!0,typeof o.destroy=="function"&&o.destroy())}function r(l){if(a(),M.listenerCount(this,"error")===0)throw l}function a(){b.removeListener("data",h),o.removeListener("drain",s),b.removeListener("end",i),b.removeListener("close",n),b.removeListener("error",r),o.removeListener("error",r),b.removeListener("end",a),b.removeListener("close",a),o.removeListener("close",a)}return b.on("error",r),o.on("error",r),b.on("end",a),b.on("close",a),o.on("close",a),o.emit("pipe",b),o}},92784:function(ee){"use strict";var z={};function e(k,o,T){T||(T=Error);var b=function(h){var s,t;function i(n,r,a){return h.call(this,function(l,u,d){return typeof o=="string"?o:o(l,u,d)}(n,r,a))||this}return t=h,(s=i).prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t,i}(T);b.prototype.name=T.name,b.prototype.code=k,z[k]=b}function M(k,o){if(Array.isArray(k)){var T=k.length;return k=k.map(function(b){return String(b)}),T>2?"one of ".concat(o," ").concat(k.slice(0,T-1).join(", "),", or ")+k[T-1]:T===2?"one of ".concat(o," ").concat(k[0]," or ").concat(k[1]):"of ".concat(o," ").concat(k[0])}return"of ".concat(o," ").concat(String(k))}e("ERR_INVALID_OPT_VALUE",function(k,o){return'The value "'+o+'" is invalid for option "'+k+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(k,o,T){var b,h,s,t,i;if(typeof o=="string"&&(h="not ",o.substr(0,4)===h)?(b="must not be",o=o.replace(/^not /,"")):b="must be",function(r,a,l){return(l===void 0||l>r.length)&&(l=r.length),r.substring(l-9,l)===a}(k," argument"))s="The ".concat(k," ").concat(b," ").concat(M(o,"type"));else{var n=(typeof i!="number"&&(i=0),i+1>(t=k).length||t.indexOf(".",i)===-1?"argument":"property");s='The "'.concat(k,'" ').concat(n," ").concat(b," ").concat(M(o,"type"))}return s+". Received type ".concat(typeof T)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(k){return"The "+k+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(k){return"Cannot call "+k+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(k){return"Unknown encoding: "+k},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ee.exports.i=z},15316:function(ee,z,e){"use strict";var M=e(4168),k=Object.keys||function(r){var a=[];for(var l in r)a.push(l);return a};ee.exports=t;var o=e(12348),T=e(11288);e(6768)(t,o);for(var b=k(T.prototype),h=0;h<b.length;h++){var s=b[h];t.prototype[s]||(t.prototype[s]=T.prototype[s])}function t(r){if(!(this instanceof t))return new t(r);o.call(this,r),T.call(this,r),this.allowHalfOpen=!0,r&&(r.readable===!1&&(this.readable=!1),r.writable===!1&&(this.writable=!1),r.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||M.nextTick(n,this)}function n(r){r.end()}Object.defineProperty(t.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(t.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(t.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(t.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(r){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=r,this._writableState.destroyed=r)}})},27136:function(ee,z,e){"use strict";ee.exports=k;var M=e(22477);function k(o){if(!(this instanceof k))return new k(o);M.call(this,o)}e(6768)(k,M),k.prototype._transform=function(o,T,b){b(null,o)}},12348:function(ee,z,e){"use strict";var M,k=e(4168);ee.exports=_,_.ReadableState=y,e(61252).EventEmitter;var o,T=function(J,K){return J.listeners(K).length},b=e(4776),h=e(33576).Buffer,s=e.g.Uint8Array||function(){},t=e(19768);o=t&&t.debuglog?t.debuglog("stream"):function(){};var i,n,r,a=e(47264),l=e(55324),u=e(24888).getHighWaterMark,d=e(92784).i,c=d.ERR_INVALID_ARG_TYPE,x=d.ERR_STREAM_PUSH_AFTER_EOF,g=d.ERR_METHOD_NOT_IMPLEMENTED,p=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e(6768)(_,b);var v=l.errorOrDestroy,m=["error","close","destroy","pause","resume"];function y(J,K,X){M=M||e(15316),J=J||{},typeof X!="boolean"&&(X=K instanceof M),this.objectMode=!!J.objectMode,X&&(this.objectMode=this.objectMode||!!J.readableObjectMode),this.highWaterMark=u(this,J,"readableHighWaterMark",X),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=J.emitClose!==!1,this.autoDestroy=!!J.autoDestroy,this.destroyed=!1,this.defaultEncoding=J.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,J.encoding&&(i||(i=e(86032).o),this.decoder=new i(J.encoding),this.encoding=J.encoding)}function _(J){if(M=M||e(15316),!(this instanceof _))return new _(J);var K=this instanceof M;this._readableState=new y(J,this,K),this.readable=!0,J&&(typeof J.read=="function"&&(this._read=J.read),typeof J.destroy=="function"&&(this._destroy=J.destroy)),b.call(this)}function f(J,K,X,Z,$){o("readableAddChunk",K);var re,oe=J._readableState;if(K===null)oe.reading=!1,function(ie,ue){if(o("onEofChunk"),!ue.ended){if(ue.decoder){var me=ue.decoder.end();me&&me.length&&(ue.buffer.push(me),ue.length+=ue.objectMode?1:me.length)}ue.ended=!0,ue.sync?P(ie):(ue.needReadable=!1,ue.emittedReadable||(ue.emittedReadable=!0,C(ie)))}}(J,oe);else if($||(re=function(ie,ue){var me,be;return be=ue,h.isBuffer(be)||be instanceof s||typeof ue=="string"||ue===void 0||ie.objectMode||(me=new c("chunk",["string","Buffer","Uint8Array"],ue)),me}(oe,K)),re)v(J,re);else if(oe.objectMode||K&&K.length>0)if(typeof K=="string"||oe.objectMode||Object.getPrototypeOf(K)===h.prototype||(K=function(ie){return h.from(ie)}(K)),Z)oe.endEmitted?v(J,new p):S(J,oe,K,!0);else if(oe.ended)v(J,new x);else{if(oe.destroyed)return!1;oe.reading=!1,oe.decoder&&!X?(K=oe.decoder.write(K),oe.objectMode||K.length!==0?S(J,oe,K,!1):O(J,oe)):S(J,oe,K,!1)}else Z||(oe.reading=!1,O(J,oe));return!oe.ended&&(oe.length<oe.highWaterMark||oe.length===0)}function S(J,K,X,Z){K.flowing&&K.length===0&&!K.sync?(K.awaitDrain=0,J.emit("data",X)):(K.length+=K.objectMode?1:X.length,Z?K.buffer.unshift(X):K.buffer.push(X),K.needReadable&&P(J)),O(J,K)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(J){this._readableState&&(this._readableState.destroyed=J)}}),_.prototype.destroy=l.destroy,_.prototype._undestroy=l.undestroy,_.prototype._destroy=function(J,K){K(J)},_.prototype.push=function(J,K){var X,Z=this._readableState;return Z.objectMode?X=!0:typeof J=="string"&&((K=K||Z.defaultEncoding)!==Z.encoding&&(J=h.from(J,K),K=""),X=!0),f(this,J,K,!1,X)},_.prototype.unshift=function(J){return f(this,J,null,!0,!1)},_.prototype.isPaused=function(){return this._readableState.flowing===!1},_.prototype.setEncoding=function(J){i||(i=e(86032).o);var K=new i(J);this._readableState.decoder=K,this._readableState.encoding=this._readableState.decoder.encoding;for(var X=this._readableState.buffer.head,Z="";X!==null;)Z+=K.write(X.data),X=X.next;return this._readableState.buffer.clear(),Z!==""&&this._readableState.buffer.push(Z),this._readableState.length=Z.length,this};var w=1073741824;function E(J,K){return J<=0||K.length===0&&K.ended?0:K.objectMode?1:J!=J?K.flowing&&K.length?K.buffer.head.data.length:K.length:(J>K.highWaterMark&&(K.highWaterMark=function(X){return X>=w?X=w:(X--,X|=X>>>1,X|=X>>>2,X|=X>>>4,X|=X>>>8,X|=X>>>16,X++),X}(J)),J<=K.length?J:K.ended?K.length:(K.needReadable=!0,0))}function P(J){var K=J._readableState;o("emitReadable",K.needReadable,K.emittedReadable),K.needReadable=!1,K.emittedReadable||(o("emitReadable",K.flowing),K.emittedReadable=!0,k.nextTick(C,J))}function C(J){var K=J._readableState;o("emitReadable_",K.destroyed,K.length,K.ended),K.destroyed||!K.length&&!K.ended||(J.emit("readable"),K.emittedReadable=!1),K.needReadable=!K.flowing&&!K.ended&&K.length<=K.highWaterMark,W(J)}function O(J,K){K.readingMore||(K.readingMore=!0,k.nextTick(R,J,K))}function R(J,K){for(;!K.reading&&!K.ended&&(K.length<K.highWaterMark||K.flowing&&K.length===0);){var X=K.length;if(o("maybeReadMore read 0"),J.read(0),X===K.length)break}K.readingMore=!1}function j(J){var K=J._readableState;K.readableListening=J.listenerCount("readable")>0,K.resumeScheduled&&!K.paused?K.flowing=!0:J.listenerCount("data")>0&&J.resume()}function D(J){o("readable nexttick read 0"),J.read(0)}function N(J,K){o("resume",K.reading),K.reading||J.read(0),K.resumeScheduled=!1,J.emit("resume"),W(J),K.flowing&&!K.reading&&J.read(0)}function W(J){var K=J._readableState;for(o("flow",K.flowing);K.flowing&&J.read()!==null;);}function F(J,K){return K.length===0?null:(K.objectMode?X=K.buffer.shift():!J||J>=K.length?(X=K.decoder?K.buffer.join(""):K.buffer.length===1?K.buffer.first():K.buffer.concat(K.length),K.buffer.clear()):X=K.buffer.consume(J,K.decoder),X);var X}function U(J){var K=J._readableState;o("endReadable",K.endEmitted),K.endEmitted||(K.ended=!0,k.nextTick(V,K,J))}function V(J,K){if(o("endReadableNT",J.endEmitted,J.length),!J.endEmitted&&J.length===0&&(J.endEmitted=!0,K.readable=!1,K.emit("end"),J.autoDestroy)){var X=K._writableState;(!X||X.autoDestroy&&X.finished)&&K.destroy()}}function te(J,K){for(var X=0,Z=J.length;X<Z;X++)if(J[X]===K)return X;return-1}_.prototype.read=function(J){o("read",J),J=parseInt(J,10);var K=this._readableState,X=J;if(J!==0&&(K.emittedReadable=!1),J===0&&K.needReadable&&((K.highWaterMark!==0?K.length>=K.highWaterMark:K.length>0)||K.ended))return o("read: emitReadable",K.length,K.ended),K.length===0&&K.ended?U(this):P(this),null;if((J=E(J,K))===0&&K.ended)return K.length===0&&U(this),null;var Z,$=K.needReadable;return o("need readable",$),(K.length===0||K.length-J<K.highWaterMark)&&o("length less than watermark",$=!0),K.ended||K.reading?o("reading or ended",$=!1):$&&(o("do read"),K.reading=!0,K.sync=!0,K.length===0&&(K.needReadable=!0),this._read(K.highWaterMark),K.sync=!1,K.reading||(J=E(X,K))),(Z=J>0?F(J,K):null)===null?(K.needReadable=K.length<=K.highWaterMark,J=0):(K.length-=J,K.awaitDrain=0),K.length===0&&(K.ended||(K.needReadable=!0),X!==J&&K.ended&&U(this)),Z!==null&&this.emit("data",Z),Z},_.prototype._read=function(J){v(this,new g("_read()"))},_.prototype.pipe=function(J,K){var X=this,Z=this._readableState;switch(Z.pipesCount){case 0:Z.pipes=J;break;case 1:Z.pipes=[Z.pipes,J];break;default:Z.pipes.push(J)}Z.pipesCount+=1,o("pipe count=%d opts=%j",Z.pipesCount,K);var $=K&&K.end===!1||J===k.stdout||J===k.stderr?de:re;function re(){o("onend"),J.end()}Z.endEmitted?k.nextTick($):X.once("end",$),J.on("unpipe",function ve(pe,_e){o("onunpipe"),pe===X&&_e&&_e.hasUnpiped===!1&&(_e.hasUnpiped=!0,o("cleanup"),J.removeListener("close",be),J.removeListener("finish",ge),J.removeListener("drain",oe),J.removeListener("error",me),J.removeListener("unpipe",ve),X.removeListener("end",re),X.removeListener("end",de),X.removeListener("data",ue),ie=!0,!Z.awaitDrain||J._writableState&&!J._writableState.needDrain||oe())});var oe=function(ve){return function(){var pe=ve._readableState;o("pipeOnDrain",pe.awaitDrain),pe.awaitDrain&&pe.awaitDrain--,pe.awaitDrain===0&&T(ve,"data")&&(pe.flowing=!0,W(ve))}}(X);J.on("drain",oe);var ie=!1;function ue(ve){o("ondata");var pe=J.write(ve);o("dest.write",pe),pe===!1&&((Z.pipesCount===1&&Z.pipes===J||Z.pipesCount>1&&te(Z.pipes,J)!==-1)&&!ie&&(o("false write response, pause",Z.awaitDrain),Z.awaitDrain++),X.pause())}function me(ve){o("onerror",ve),de(),J.removeListener("error",me),T(J,"error")===0&&v(J,ve)}function be(){J.removeListener("finish",ge),de()}function ge(){o("onfinish"),J.removeListener("close",be),de()}function de(){o("unpipe"),X.unpipe(J)}return X.on("data",ue),function(ve,pe,_e){if(typeof ve.prependListener=="function")return ve.prependListener(pe,_e);ve._events&&ve._events[pe]?Array.isArray(ve._events[pe])?ve._events[pe].unshift(_e):ve._events[pe]=[_e,ve._events[pe]]:ve.on(pe,_e)}(J,"error",me),J.once("close",be),J.once("finish",ge),J.emit("pipe",X),Z.flowing||(o("pipe resume"),X.resume()),J},_.prototype.unpipe=function(J){var K=this._readableState,X={hasUnpiped:!1};if(K.pipesCount===0)return this;if(K.pipesCount===1)return J&&J!==K.pipes||(J||(J=K.pipes),K.pipes=null,K.pipesCount=0,K.flowing=!1,J&&J.emit("unpipe",this,X)),this;if(!J){var Z=K.pipes,$=K.pipesCount;K.pipes=null,K.pipesCount=0,K.flowing=!1;for(var re=0;re<$;re++)Z[re].emit("unpipe",this,{hasUnpiped:!1});return this}var oe=te(K.pipes,J);return oe===-1||(K.pipes.splice(oe,1),K.pipesCount-=1,K.pipesCount===1&&(K.pipes=K.pipes[0]),J.emit("unpipe",this,X)),this},_.prototype.on=function(J,K){var X=b.prototype.on.call(this,J,K),Z=this._readableState;return J==="data"?(Z.readableListening=this.listenerCount("readable")>0,Z.flowing!==!1&&this.resume()):J==="readable"&&(Z.endEmitted||Z.readableListening||(Z.readableListening=Z.needReadable=!0,Z.flowing=!1,Z.emittedReadable=!1,o("on readable",Z.length,Z.reading),Z.length?P(this):Z.reading||k.nextTick(D,this))),X},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(J,K){var X=b.prototype.removeListener.call(this,J,K);return J==="readable"&&k.nextTick(j,this),X},_.prototype.removeAllListeners=function(J){var K=b.prototype.removeAllListeners.apply(this,arguments);return J!=="readable"&&J!==void 0||k.nextTick(j,this),K},_.prototype.resume=function(){var J=this._readableState;return J.flowing||(o("resume"),J.flowing=!J.readableListening,function(K,X){X.resumeScheduled||(X.resumeScheduled=!0,k.nextTick(N,K,X))}(this,J)),J.paused=!1,this},_.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(J){var K=this,X=this._readableState,Z=!1;for(var $ in J.on("end",function(){if(o("wrapped end"),X.decoder&&!X.ended){var oe=X.decoder.end();oe&&oe.length&&K.push(oe)}K.push(null)}),J.on("data",function(oe){o("wrapped data"),X.decoder&&(oe=X.decoder.write(oe)),X.objectMode&&oe==null||(X.objectMode||oe&&oe.length)&&(K.push(oe)||(Z=!0,J.pause()))}),J)this[$]===void 0&&typeof J[$]=="function"&&(this[$]=function(oe){return function(){return J[oe].apply(J,arguments)}}($));for(var re=0;re<m.length;re++)J.on(m[re],this.emit.bind(this,m[re]));return this._read=function(oe){o("wrapped _read",oe),Z&&(Z=!1,J.resume())},this},typeof Symbol=="function"&&(_.prototype[Symbol.asyncIterator]=function(){return n===void 0&&(n=e(60328)),n(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(J){this._readableState&&(this._readableState.flowing=J)}}),_._fromList=F,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(_.from=function(J,K){return r===void 0&&(r=e(90555)),r(_,J,K)})},22477:function(ee,z,e){"use strict";ee.exports=t;var M=e(92784).i,k=M.ERR_METHOD_NOT_IMPLEMENTED,o=M.ERR_MULTIPLE_CALLBACK,T=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=M.ERR_TRANSFORM_WITH_LENGTH_0,h=e(15316);function s(r,a){var l=this._transformState;l.transforming=!1;var u=l.writecb;if(u===null)return this.emit("error",new o);l.writechunk=null,l.writecb=null,a!=null&&this.push(a),u(r);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function t(r){if(!(this instanceof t))return new t(r);h.call(this,r),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",i)}function i(){var r=this;typeof this._flush!="function"||this._readableState.destroyed?n(this,null,null):this._flush(function(a,l){n(r,a,l)})}function n(r,a,l){if(a)return r.emit("error",a);if(l!=null&&r.push(l),r._writableState.length)throw new b;if(r._transformState.transforming)throw new T;return r.push(null)}e(6768)(t,h),t.prototype.push=function(r,a){return this._transformState.needTransform=!1,h.prototype.push.call(this,r,a)},t.prototype._transform=function(r,a,l){l(new k("_transform()"))},t.prototype._write=function(r,a,l){var u=this._transformState;if(u.writecb=l,u.writechunk=r,u.writeencoding=a,!u.transforming){var d=this._readableState;(u.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},t.prototype._read=function(r){var a=this._transformState;a.writechunk===null||a.transforming?a.needTransform=!0:(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform))},t.prototype._destroy=function(r,a){h.prototype._destroy.call(this,r,function(l){a(l)})}},11288:function(ee,z,e){"use strict";var M,k=e(4168);function o(O){var R=this;this.next=null,this.entry=null,this.finish=function(){(function(j,D,N){var W=j.entry;for(j.entry=null;W;){var F=W.callback;D.pendingcb--,F(void 0),W=W.next}D.corkedRequestsFree.next=j})(R,O)}}ee.exports=_,_.WritableState=y;var T,b={deprecate:e(96656)},h=e(4776),s=e(33576).Buffer,t=e.g.Uint8Array||function(){},i=e(55324),n=e(24888).getHighWaterMark,r=e(92784).i,a=r.ERR_INVALID_ARG_TYPE,l=r.ERR_METHOD_NOT_IMPLEMENTED,u=r.ERR_MULTIPLE_CALLBACK,d=r.ERR_STREAM_CANNOT_PIPE,c=r.ERR_STREAM_DESTROYED,x=r.ERR_STREAM_NULL_VALUES,g=r.ERR_STREAM_WRITE_AFTER_END,p=r.ERR_UNKNOWN_ENCODING,v=i.errorOrDestroy;function m(){}function y(O,R,j){M=M||e(15316),O=O||{},typeof j!="boolean"&&(j=R instanceof M),this.objectMode=!!O.objectMode,j&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=n(this,O,"writableHighWaterMark",j),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var D=O.decodeStrings===!1;this.decodeStrings=!D,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(N){(function(W,F){var U=W._writableState,V=U.sync,te=U.writecb;if(typeof te!="function")throw new u;if(function(K){K.writing=!1,K.writecb=null,K.length-=K.writelen,K.writelen=0}(U),F)(function(K,X,Z,$,re){--X.pendingcb,Z?(k.nextTick(re,$),k.nextTick(C,K,X),K._writableState.errorEmitted=!0,v(K,$)):(re($),K._writableState.errorEmitted=!0,v(K,$),C(K,X))})(W,U,V,F,te);else{var J=E(U)||W.destroyed;J||U.corked||U.bufferProcessing||!U.bufferedRequest||w(W,U),V?k.nextTick(S,W,U,J,te):S(W,U,J,te)}})(R,N)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function _(O){var R=this instanceof(M=M||e(15316));if(!R&&!T.call(_,this))return new _(O);this._writableState=new y(O,this,R),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),h.call(this)}function f(O,R,j,D,N,W,F){R.writelen=D,R.writecb=F,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new c("write")):j?O._writev(N,R.onwrite):O._write(N,W,R.onwrite),R.sync=!1}function S(O,R,j,D){j||function(N,W){W.length===0&&W.needDrain&&(W.needDrain=!1,N.emit("drain"))}(O,R),R.pendingcb--,D(),C(O,R)}function w(O,R){R.bufferProcessing=!0;var j=R.bufferedRequest;if(O._writev&&j&&j.next){var D=R.bufferedRequestCount,N=new Array(D),W=R.corkedRequestsFree;W.entry=j;for(var F=0,U=!0;j;)N[F]=j,j.isBuf||(U=!1),j=j.next,F+=1;N.allBuffers=U,f(O,R,!0,R.length,N,"",W.finish),R.pendingcb++,R.lastBufferedRequest=null,W.next?(R.corkedRequestsFree=W.next,W.next=null):R.corkedRequestsFree=new o(R),R.bufferedRequestCount=0}else{for(;j;){var V=j.chunk,te=j.encoding,J=j.callback;if(f(O,R,!1,R.objectMode?1:V.length,V,te,J),j=j.next,R.bufferedRequestCount--,R.writing)break}j===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=j,R.bufferProcessing=!1}function E(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function P(O,R){O._final(function(j){R.pendingcb--,j&&v(O,j),R.prefinished=!0,O.emit("prefinish"),C(O,R)})}function C(O,R){var j=E(R);if(j&&(function(N,W){W.prefinished||W.finalCalled||(typeof N._final!="function"||W.destroyed?(W.prefinished=!0,N.emit("prefinish")):(W.pendingcb++,W.finalCalled=!0,k.nextTick(P,N,W)))}(O,R),R.pendingcb===0&&(R.finished=!0,O.emit("finish"),R.autoDestroy))){var D=O._readableState;(!D||D.autoDestroy&&D.endEmitted)&&O.destroy()}return j}e(6768)(_,h),y.prototype.getBuffer=function(){for(var O=this.bufferedRequest,R=[];O;)R.push(O),O=O.next;return R},function(){try{Object.defineProperty(y.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(O){}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(O){return!!T.call(this,O)||this===_&&O&&O._writableState instanceof y}})):T=function(O){return O instanceof this},_.prototype.pipe=function(){v(this,new d)},_.prototype.write=function(O,R,j){var D,N=this._writableState,W=!1,F=!N.objectMode&&(D=O,s.isBuffer(D)||D instanceof t);return F&&!s.isBuffer(O)&&(O=function(U){return s.from(U)}(O)),typeof R=="function"&&(j=R,R=null),F?R="buffer":R||(R=N.defaultEncoding),typeof j!="function"&&(j=m),N.ending?function(U,V){var te=new g;v(U,te),k.nextTick(V,te)}(this,j):(F||function(U,V,te,J){var K;return te===null?K=new x:typeof te=="string"||V.objectMode||(K=new a("chunk",["string","Buffer"],te)),!K||(v(U,K),k.nextTick(J,K),!1)}(this,N,O,j))&&(N.pendingcb++,W=function(U,V,te,J,K,X){if(!te){var Z=function(ie,ue,me){return ie.objectMode||ie.decodeStrings===!1||typeof ue!="string"||(ue=s.from(ue,me)),ue}(V,J,K);J!==Z&&(te=!0,K="buffer",J=Z)}var $=V.objectMode?1:J.length;V.length+=$;var re=V.length<V.highWaterMark;if(re||(V.needDrain=!0),V.writing||V.corked){var oe=V.lastBufferedRequest;V.lastBufferedRequest={chunk:J,encoding:K,isBuf:te,callback:X,next:null},oe?oe.next=V.lastBufferedRequest:V.bufferedRequest=V.lastBufferedRequest,V.bufferedRequestCount+=1}else f(U,V,!1,$,J,K,X);return re}(this,N,F,O,R,j)),W},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,O.writing||O.corked||O.bufferProcessing||!O.bufferedRequest||w(this,O))},_.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new p(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(O,R,j){j(new l("_write()"))},_.prototype._writev=null,_.prototype.end=function(O,R,j){var D=this._writableState;return typeof O=="function"?(j=O,O=null,R=null):typeof R=="function"&&(j=R,R=null),O!=null&&this.write(O,R),D.corked&&(D.corked=1,this.uncork()),D.ending||function(N,W,F){W.ending=!0,C(N,W),F&&(W.finished?k.nextTick(F):N.once("finish",F)),W.ended=!0,N.writable=!1}(this,D,j),this},Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(O){this._writableState&&(this._writableState.destroyed=O)}}),_.prototype.destroy=i.destroy,_.prototype._undestroy=i.undestroy,_.prototype._destroy=function(O,R){R(O)}},60328:function(ee,z,e){"use strict";var M,k=e(4168);function o(x,g,p){return g in x?Object.defineProperty(x,g,{value:p,enumerable:!0,configurable:!0,writable:!0}):x[g]=p,x}var T=e(15932),b=Symbol("lastResolve"),h=Symbol("lastReject"),s=Symbol("error"),t=Symbol("ended"),i=Symbol("lastPromise"),n=Symbol("handlePromise"),r=Symbol("stream");function a(x,g){return{value:x,done:g}}function l(x){var g=x[b];if(g!==null){var p=x[r].read();p!==null&&(x[i]=null,x[b]=null,x[h]=null,g(a(p,!1)))}}function u(x){k.nextTick(l,x)}var d=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((o(M={get stream(){return this[r]},next:function(){var x=this,g=this[s];if(g!==null)return Promise.reject(g);if(this[t])return Promise.resolve(a(void 0,!0));if(this[r].destroyed)return new Promise(function(y,_){k.nextTick(function(){x[s]?_(x[s]):y(a(void 0,!0))})});var p,v=this[i];if(v)p=new Promise(function(y,_){return function(f,S){y.then(function(){_[t]?f(a(void 0,!0)):_[n](f,S)},S)}}(v,this));else{var m=this[r].read();if(m!==null)return Promise.resolve(a(m,!1));p=new Promise(this[n])}return this[i]=p,p}},Symbol.asyncIterator,function(){return this}),o(M,"return",function(){var x=this;return new Promise(function(g,p){x[r].destroy(null,function(v){v?p(v):g(a(void 0,!0))})})}),M),d);ee.exports=function(x){var g,p=Object.create(c,(o(g={},r,{value:x,writable:!0}),o(g,b,{value:null,writable:!0}),o(g,h,{value:null,writable:!0}),o(g,s,{value:null,writable:!0}),o(g,t,{value:x._readableState.endEmitted,writable:!0}),o(g,n,{value:function(v,m){var y=p[r].read();y?(p[i]=null,p[b]=null,p[h]=null,v(a(y,!1))):(p[b]=v,p[h]=m)},writable:!0}),g));return p[i]=null,T(x,function(v){if(v&&v.code!=="ERR_STREAM_PREMATURE_CLOSE"){var m=p[h];return m!==null&&(p[i]=null,p[b]=null,p[h]=null,m(v)),void(p[s]=v)}var y=p[b];y!==null&&(p[i]=null,p[b]=null,p[h]=null,y(a(void 0,!0))),p[t]=!0}),x.on("readable",u.bind(null,p)),p}},47264:function(ee,z,e){"use strict";function M(s,t){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),i.push.apply(i,n)}return i}function k(s,t,i){return t in s?Object.defineProperty(s,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[t]=i,s}function o(s,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,n.key,n)}}var T=e(33576).Buffer,b=e(21576).inspect,h=b&&b.custom||"inspect";ee.exports=function(){function s(){(function(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")})(this,s),this.head=null,this.tail=null,this.length=0}var t,i;return t=s,i=[{key:"push",value:function(n){var r={data:n,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}},{key:"unshift",value:function(n){var r={data:n,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}},{key:"shift",value:function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(n){if(this.length===0)return"";for(var r=this.head,a=""+r.data;r=r.next;)a+=n+r.data;return a}},{key:"concat",value:function(n){if(this.length===0)return T.alloc(0);for(var r,a,l,u=T.allocUnsafe(n>>>0),d=this.head,c=0;d;)r=d.data,a=u,l=c,T.prototype.copy.call(r,a,l),c+=d.data.length,d=d.next;return u}},{key:"consume",value:function(n,r){var a;return n<this.head.data.length?(a=this.head.data.slice(0,n),this.head.data=this.head.data.slice(n)):a=n===this.head.data.length?this.shift():r?this._getString(n):this._getBuffer(n),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(n){var r=this.head,a=1,l=r.data;for(n-=l.length;r=r.next;){var u=r.data,d=n>u.length?u.length:n;if(d===u.length?l+=u:l+=u.slice(0,n),(n-=d)==0){d===u.length?(++a,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=u.slice(d));break}++a}return this.length-=a,l}},{key:"_getBuffer",value:function(n){var r=T.allocUnsafe(n),a=this.head,l=1;for(a.data.copy(r),n-=a.data.length;a=a.next;){var u=a.data,d=n>u.length?u.length:n;if(u.copy(r,r.length-n,0,d),(n-=d)==0){d===u.length?(++l,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=u.slice(d));break}++l}return this.length-=l,r}},{key:h,value:function(n,r){return b(this,function(a){for(var l=1;l<arguments.length;l++){var u=arguments[l]!=null?arguments[l]:{};l%2?M(Object(u),!0).forEach(function(d){k(a,d,u[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):M(Object(u)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(u,d))})}return a}({},r,{depth:0,customInspect:!1}))}}],i&&o(t.prototype,i),s}()},55324:function(ee,z,e){"use strict";var M=e(4168);function k(b,h){T(b,h),o(b)}function o(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function T(b,h){b.emit("error",h)}ee.exports={destroy:function(b,h){var s=this,t=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return t||i?(h?h(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,M.nextTick(T,this,b)):M.nextTick(T,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(n){!h&&n?s._writableState?s._writableState.errorEmitted?M.nextTick(o,s):(s._writableState.errorEmitted=!0,M.nextTick(k,s,n)):M.nextTick(k,s,n):h?(M.nextTick(o,s),h(n)):M.nextTick(o,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(b,h){var s=b._readableState,t=b._writableState;s&&s.autoDestroy||t&&t.autoDestroy?b.destroy(h):b.emit("error",h)}}},15932:function(ee,z,e){"use strict";var M=e(92784).i.ERR_STREAM_PREMATURE_CLOSE;function k(){}ee.exports=function o(T,b,h){if(typeof b=="function")return o(T,null,b);b||(b={}),h=function(x){var g=!1;return function(){if(!g){g=!0;for(var p=arguments.length,v=new Array(p),m=0;m<p;m++)v[m]=arguments[m];x.apply(this,v)}}}(h||k);var s=b.readable||b.readable!==!1&&T.readable,t=b.writable||b.writable!==!1&&T.writable,i=function(){T.writable||r()},n=T._writableState&&T._writableState.finished,r=function(){t=!1,n=!0,s||h.call(T)},a=T._readableState&&T._readableState.endEmitted,l=function(){s=!1,a=!0,t||h.call(T)},u=function(x){h.call(T,x)},d=function(){var x;return s&&!a?(T._readableState&&T._readableState.ended||(x=new M),h.call(T,x)):t&&!n?(T._writableState&&T._writableState.ended||(x=new M),h.call(T,x)):void 0},c=function(){T.req.on("finish",r)};return function(x){return x.setHeader&&typeof x.abort=="function"}(T)?(T.on("complete",r),T.on("abort",d),T.req?c():T.on("request",c)):t&&!T._writableState&&(T.on("end",i),T.on("close",i)),T.on("end",l),T.on("finish",r),b.error!==!1&&T.on("error",u),T.on("close",d),function(){T.removeListener("complete",r),T.removeListener("abort",d),T.removeListener("request",c),T.req&&T.req.removeListener("finish",r),T.removeListener("end",i),T.removeListener("close",i),T.removeListener("finish",r),T.removeListener("end",l),T.removeListener("error",u),T.removeListener("close",d)}}},90555:function(ee){ee.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(ee,z,e){"use strict";var M,k=e(92784).i,o=k.ERR_MISSING_ARGS,T=k.ERR_STREAM_DESTROYED;function b(t){if(t)throw t}function h(t){t()}function s(t,i){return t.pipe(i)}ee.exports=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r,a=function(u){return u.length?typeof u[u.length-1]!="function"?b:u.pop():b}(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new o("streams");var l=i.map(function(u,d){var c=d<i.length-1;return function(x,g,p,v){v=function(_){var f=!1;return function(){f||(f=!0,_.apply(void 0,arguments))}}(v);var m=!1;x.on("close",function(){m=!0}),M===void 0&&(M=e(15932)),M(x,{readable:g,writable:p},function(_){if(_)return v(_);m=!0,v()});var y=!1;return function(_){if(!m&&!y)return y=!0,function(f){return f.setHeader&&typeof f.abort=="function"}(x)?x.abort():typeof x.destroy=="function"?x.destroy():void v(_||new T("pipe"))}}(u,c,d>0,function(x){r||(r=x),x&&l.forEach(h),c||(l.forEach(h),a(r))})});return i.reduce(s)}},24888:function(ee,z,e){"use strict";var M=e(92784).i.ERR_INVALID_OPT_VALUE;ee.exports={getHighWaterMark:function(k,o,T,b){var h=function(s,t,i){return s.highWaterMark!=null?s.highWaterMark:t?s[i]:null}(o,b,T);if(h!=null){if(!isFinite(h)||Math.floor(h)!==h||h<0)throw new M(b?T:"highWaterMark",h);return Math.floor(h)}return k.objectMode?16:16384}}},4776:function(ee,z,e){ee.exports=e(61252).EventEmitter},86032:function(ee,z,e){"use strict";var M=e(30456).Buffer,k=M.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(a){var l;switch(this.encoding=function(u){var d=function(c){if(!c)return"utf8";for(var x;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(x)return;c=(""+c).toLowerCase(),x=!0}}(u);if(typeof d!="string"&&(M.isEncoding===k||!k(u)))throw new Error("Unknown encoding: "+u);return d||u}(a),this.encoding){case"utf16le":this.text=h,this.end=s,l=4;break;case"utf8":this.fillLast=b,l=4;break;case"base64":this.text=t,this.end=i,l=3;break;default:return this.write=n,void(this.end=r)}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(l)}function T(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function b(a){var l=this.lastTotal-this.lastNeed,u=function(d,c,x){if((192&c[0])!=128)return d.lastNeed=0,"\uFFFD";if(d.lastNeed>1&&c.length>1){if((192&c[1])!=128)return d.lastNeed=1,"\uFFFD";if(d.lastNeed>2&&c.length>2&&(192&c[2])!=128)return d.lastNeed=2,"\uFFFD"}}(this,a);return u!==void 0?u:this.lastNeed<=a.length?(a.copy(this.lastChar,l,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(a.copy(this.lastChar,l,0,a.length),void(this.lastNeed-=a.length))}function h(a,l){if((a.length-l)%2==0){var u=a.toString("utf16le",l);if(u){var d=u.charCodeAt(u.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",l,a.length-1)}function s(a){var l=a&&a.length?this.write(a):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return l+this.lastChar.toString("utf16le",0,u)}return l}function t(a,l){var u=(a.length-l)%3;return u===0?a.toString("base64",l):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",l,a.length-u))}function i(a){var l=a&&a.length?this.write(a):"";return this.lastNeed?l+this.lastChar.toString("base64",0,3-this.lastNeed):l}function n(a){return a.toString(this.encoding)}function r(a){return a&&a.length?this.write(a):""}z.o=o,o.prototype.write=function(a){if(a.length===0)return"";var l,u;if(this.lastNeed){if((l=this.fillLast(a))===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<a.length?l?l+this.text(a,u):this.text(a,u):l||""},o.prototype.end=function(a){var l=a&&a.length?this.write(a):"";return this.lastNeed?l+"\uFFFD":l},o.prototype.text=function(a,l){var u=function(c,x,g){var p=x.length-1;if(p<g)return 0;var v=T(x[p]);return v>=0?(v>0&&(c.lastNeed=v-1),v):--p<g||v===-2?0:(v=T(x[p]))>=0?(v>0&&(c.lastNeed=v-2),v):--p<g||v===-2?0:(v=T(x[p]))>=0?(v>0&&(v===2?v=0:c.lastNeed=v-3),v):0}(this,a,l);if(!this.lastNeed)return a.toString("utf8",l);this.lastTotal=u;var d=a.length-(u-this.lastNeed);return a.copy(this.lastChar,0,d),a.toString("utf8",l,d)},o.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},55619:function(ee,z,e){var M=e(45408),k=e(86844)("stream-parser");ee.exports=function(c){var x=c&&typeof c._transform=="function",g=c&&typeof c._write=="function";if(!x&&!g)throw new Error("must pass a Writable or Transform stream in");k("extending Parser into stream"),c._bytes=t,c._skipBytes=i,x&&(c._passthrough=n),x?c._transform=a:c._write=r};var o=-1,T=0,b=1,h=2;function s(c){k("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=o,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function t(c,x){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||s(this),k("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=T}function i(c,x){M(!this._parserCallback,'there is already a "callback" set!'),M(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||s(this),k("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=b}function n(c,x){M(!this._parserCallback,'There is already a "callback" set!'),M(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||s(this),k("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=h}function r(c,x,g){this._parserInit||s(this),k("write(%o bytes)",c.length),typeof x=="function"&&(g=x),u(this,c,null,g)}function a(c,x,g){this._parserInit||s(this),k("transform(%o bytes)",c.length),typeof x!="function"&&(x=this._parserOutput),u(this,c,x,g)}function l(c,x,g,p){if(c._parserBytesLeft-=x.length,k("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===T?(c._parserBuffers.push(x),c._parserBuffered+=x.length):c._parserState===h&&g(x),c._parserBytesLeft!==0)return p;var v=c._parserCallback;if(v&&c._parserState===T&&c._parserBuffers.length>1&&(x=Buffer.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==T&&(x=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=o,c._parserBuffers.splice(0),v){var m=[];x&&m.push(x),g&&m.push(g);var y=v.length>m.length;y&&m.push(d(p));var _=v.apply(c,m);if(!y||p===_)return p}}var u=d(function c(x,g,p,v){return x._parserBytesLeft<=0?v(new Error("got data but not currently parsing anything")):g.length<=x._parserBytesLeft?function(){return l(x,g,p,v)}:function(){var m=g.slice(0,x._parserBytesLeft);return l(x,m,p,function(y){return y?v(y):g.length>m.length?function(){return c(x,g.slice(m.length),p,v)}:void 0})}});function d(c){return function(){for(var x=c.apply(this,arguments);typeof x=="function";)x=x();return x}}},86844:function(ee,z,e){var M=e(4168);function k(){var o;try{o=z.storage.debug}catch(T){}return!o&&M!==void 0&&"env"in M&&(o=M.env.DEBUG),o}(z=ee.exports=e(89416)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},z.formatArgs=function(o){var T=this.useColors;if(o[0]=(T?"%c":"")+this.namespace+(T?" %c":" ")+o[0]+(T?"%c ":" ")+"+"+z.humanize(this.diff),T){var b="color: "+this.color;o.splice(1,0,b,"color: inherit");var h=0,s=0;o[0].replace(/%[a-zA-Z%]/g,function(t){t!=="%%"&&(h++,t==="%c"&&(s=h))}),o.splice(s,0,b)}},z.save=function(o){try{o==null?z.storage.removeItem("debug"):z.storage.debug=o}catch(T){}},z.load=k,z.useColors=function(){return!(typeof window=="undefined"||!window.process||window.process.type!=="renderer")||typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},z.storage=typeof chrome!="undefined"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch(o){}}(),z.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],z.formatters.j=function(o){try{return JSON.stringify(o)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}},z.enable(k())},89416:function(ee,z,e){var M;function k(o){function T(){if(T.enabled){var b=T,h=+new Date,s=h-(M||h);b.diff=s,b.prev=M,b.curr=h,M=h;for(var t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];t[0]=z.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var n=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(r,a){if(r==="%%")return r;n++;var l=z.formatters[a];if(typeof l=="function"){var u=t[n];r=l.call(b,u),t.splice(n,1),n--}return r}),z.formatArgs.call(b,t),(T.log||z.log||console.log.bind(console)).apply(b,t)}}return T.namespace=o,T.enabled=z.enabled(o),T.useColors=z.useColors(),T.color=function(b){var h,s=0;for(h in b)s=(s<<5)-s+b.charCodeAt(h),s|=0;return z.colors[Math.abs(s)%z.colors.length]}(o),typeof z.init=="function"&&z.init(T),T}(z=ee.exports=k.debug=k.default=k).coerce=function(o){return o instanceof Error?o.stack||o.message:o},z.disable=function(){z.enable("")},z.enable=function(o){z.save(o),z.names=[],z.skips=[];for(var T=(typeof o=="string"?o:"").split(/[\s,]+/),b=T.length,h=0;h<b;h++)T[h]&&((o=T[h].replace(/\*/g,".*?"))[0]==="-"?z.skips.push(new RegExp("^"+o.substr(1)+"$")):z.names.push(new RegExp("^"+o+"$")))},z.enabled=function(o){var T,b;for(T=0,b=z.skips.length;T<b;T++)if(z.skips[T].test(o))return!1;for(T=0,b=z.names.length;T<b;T++)if(z.names[T].test(o))return!0;return!1},z.humanize=e(93744),z.names=[],z.skips=[],z.formatters={}},93744:function(ee){var z=1e3,e=60*z,M=60*e,k=24*M;function o(T,b,h){if(!(T<b))return T<1.5*b?Math.floor(T/b)+" "+h:Math.ceil(T/b)+" "+h+"s"}ee.exports=function(T,b){b=b||{};var h,s=typeof T;if(s==="string"&&T.length>0)return function(t){if(!((t=String(t)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(i){var n=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*k;case"hours":case"hour":case"hrs":case"hr":case"h":return n*M;case"minutes":case"minute":case"mins":case"min":case"m":return n*e;case"seconds":case"second":case"secs":case"sec":case"s":return n*z;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(T);if(s==="number"&&isNaN(T)===!1)return b.long?o(h=T,k,"day")||o(h,M,"hour")||o(h,e,"minute")||o(h,z,"second")||h+" ms":function(t){return t>=k?Math.round(t/k)+"d":t>=M?Math.round(t/M)+"h":t>=e?Math.round(t/e)+"m":t>=z?Math.round(t/z)+"s":t+"ms"}(T);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(T))}},39956:function(ee,z,e){"use strict";var M=e(32868);ee.exports=function(k,o,T){if(k==null)throw Error("First argument should be a string");if(o==null)throw Error("Separator should be a string or a RegExp");T?(typeof T=="string"||Array.isArray(T))&&(T={ignore:T}):T={},T.escape==null&&(T.escape=!0),T.ignore==null?T.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof T.ignore=="string"&&(T.ignore=[T.ignore]),T.ignore=T.ignore.map(function(r){return r.length===1&&(r+=r),r}));var b=M.parse(k,{flat:!0,brackets:T.ignore}),h=b[0].split(o);if(T.escape){for(var s=[],t=0;t<h.length;t++){var i=h[t],n=h[t+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(s.push(i+o+n),t++):s.push(i)}h=s}for(t=0;t<h.length;t++)b[0]=h[t],h[t]=M.stringify(b,{flat:!0});return h}},78484:function(ee){"use strict";ee.exports=function(z){for(var e=z.length,M=new Array(e),k=new Array(e),o=new Array(e),T=new Array(e),b=new Array(e),h=new Array(e),s=0;s<e;++s)M[s]=-1,k[s]=0,o[s]=!1,T[s]=0,b[s]=-1,h[s]=[];var t,i=0,n=[],r=[];function a(d){var c=[d],x=[d];for(M[d]=k[d]=i,o[d]=!0,i+=1;x.length>0;){d=x[x.length-1];var g=z[d];if(T[d]<g.length){for(var p=T[d];p<g.length;++p){var v=g[p];if(M[v]<0){M[v]=k[v]=i,o[v]=!0,i+=1,c.push(v),x.push(v);break}o[v]&&(k[d]=0|Math.min(k[d],k[v])),b[v]>=0&&h[d].push(b[v])}T[d]=p}else{if(k[d]===M[d]){var m=[],y=[],_=0;for(p=c.length-1;p>=0;--p){var f=c[p];if(o[f]=!1,m.push(f),y.push(h[f]),_+=h[f].length,b[f]=n.length,f===d){c.length=p;break}}n.push(m);var S=new Array(_);for(p=0;p<y.length;p++)for(var w=0;w<y[p].length;w++)S[--_]=y[p][w];r.push(S)}x.pop()}}}for(s=0;s<e;++s)M[s]<0&&a(s);for(s=0;s<r.length;s++){var l=r[s];if(l.length!==0){l.sort(function(d,c){return d-c}),t=[l[0]];for(var u=1;u<l.length;u++)l[u]!==l[u-1]&&t.push(l[u]);r[s]=t}}return{components:n,adjacencyList:r}}},92848:function(ee,z,e){"use strict";e.r(z);var M=2*Math.PI,k=function(b,h,s,t,i,n,r){var a=b.x,l=b.y;return{x:t*(a*=h)-i*(l*=s)+n,y:i*a+t*l+r}},o=function(b,h){var s=h===1.5707963267948966?.551915024494:h===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(h/4),t=Math.cos(b),i=Math.sin(b),n=Math.cos(b+h),r=Math.sin(b+h);return[{x:t-i*s,y:i+t*s},{x:n+r*s,y:r-n*s},{x:n,y:r}]},T=function(b,h,s,t){var i=b*s+h*t;return i>1&&(i=1),i<-1&&(i=-1),(b*t-h*s<0?-1:1)*Math.acos(i)};z.default=function(b){var h=b.px,s=b.py,t=b.cx,i=b.cy,n=b.rx,r=b.ry,a=b.xAxisRotation,l=a===void 0?0:a,u=b.largeArcFlag,d=u===void 0?0:u,c=b.sweepFlag,x=c===void 0?0:c,g=[];if(n===0||r===0)return[];var p=Math.sin(l*M/360),v=Math.cos(l*M/360),m=v*(h-t)/2+p*(s-i)/2,y=-p*(h-t)/2+v*(s-i)/2;if(m===0&&y===0)return[];n=Math.abs(n),r=Math.abs(r);var _=Math.pow(m,2)/Math.pow(n,2)+Math.pow(y,2)/Math.pow(r,2);_>1&&(n*=Math.sqrt(_),r*=Math.sqrt(_));var f=function(D,N,W,F,U,V,te,J,K,X,Z,$){var re=Math.pow(U,2),oe=Math.pow(V,2),ie=Math.pow(Z,2),ue=Math.pow($,2),me=re*oe-re*ue-oe*ie;me<0&&(me=0),me/=re*ue+oe*ie;var be=(me=Math.sqrt(me)*(te===J?-1:1))*U/V*$,ge=me*-V/U*Z,de=X*be-K*ge+(D+W)/2,ve=K*be+X*ge+(N+F)/2,pe=(Z-be)/U,_e=($-ge)/V,Te=(-Z-be)/U,le=(-$-ge)/V,ae=T(1,0,pe,_e),he=T(pe,_e,Te,le);return J===0&&he>0&&(he-=M),J===1&&he<0&&(he+=M),[de,ve,ae,he]}(h,s,t,i,n,r,d,x,p,v,m,y),S=function(D,N){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return function(W,F){var U=[],V=!0,te=!1,J=void 0;try{for(var K,X=W[Symbol.iterator]();!(V=(K=X.next()).done)&&(U.push(K.value),!F||U.length!==F);V=!0);}catch(Z){te=!0,J=Z}finally{try{!V&&X.return&&X.return()}finally{if(te)throw J}}return U}(D,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(f,4),w=S[0],E=S[1],P=S[2],C=S[3],O=Math.abs(C)/(M/4);Math.abs(1-O)<1e-7&&(O=1);var R=Math.max(Math.ceil(O),1);C/=R;for(var j=0;j<R;j++)g.push(o(P,C)),P+=C;return g.map(function(D){var N=k(D[0],n,r,v,p,w,E),W=N.x,F=N.y,U=k(D[1],n,r,v,p,w,E),V=U.x,te=U.y,J=k(D[2],n,r,v,p,w,E);return{x1:W,y1:F,x2:V,y2:te,x:J.x,y:J.y}})}},74840:function(ee,z,e){"use strict";var M=e(21984),k=e(49972),o=e(41976),T=e(53520),b=e(45408);ee.exports=function(h){if(Array.isArray(h)&&h.length===1&&typeof h[0]=="string"&&(h=h[0]),typeof h=="string"&&(b(T(h),"String is not an SVG path."),h=M(h)),b(Array.isArray(h),"Argument should be a string or an array of path segments."),h=k(h),!(h=o(h)).length)return[0,0,0,0];for(var s=[1/0,1/0,-1/0,-1/0],t=0,i=h.length;t<i;t++)for(var n=h[t].slice(1),r=0;r<n.length;r+=2)n[r+0]<s[0]&&(s[0]=n[r+0]),n[r+1]<s[1]&&(s[1]=n[r+1]),n[r+0]>s[2]&&(s[2]=n[r+0]),n[r+1]>s[3]&&(s[3]=n[r+1]);return s}},41976:function(ee,z,e){"use strict";ee.exports=function(T){for(var b,h=[],s=0,t=0,i=0,n=0,r=null,a=null,l=0,u=0,d=0,c=T.length;d<c;d++){var x=T[d],g=x[0];switch(g){case"M":i=x[1],n=x[2];break;case"A":var p=M({px:l,py:u,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!p.length)continue;for(var v,m=0;m<p.length;m++)x=["C",(v=p[m]).x1,v.y1,v.x2,v.y2,v.x,v.y],m<p.length-1&&h.push(x);break;case"S":var y=l,_=u;b!="C"&&b!="S"||(y+=y-s,_+=_-t),x=["C",y,_,x[1],x[2],x[3],x[4]];break;case"T":b=="Q"||b=="T"?(r=2*l-r,a=2*u-a):(r=l,a=u),x=o(l,u,r,a,x[1],x[2]);break;case"Q":r=x[1],a=x[2],x=o(l,u,x[1],x[2],x[3],x[4]);break;case"L":x=k(l,u,x[1],x[2]);break;case"H":x=k(l,u,x[1],u);break;case"V":x=k(l,u,l,x[1]);break;case"Z":x=k(l,u,i,n)}b=g,l=x[x.length-2],u=x[x.length-1],x.length>4?(s=x[x.length-4],t=x[x.length-3]):(s=l,t=u),h.push(x)}return h};var M=e(92848);function k(T,b,h,s){return["C",T,b,h,s,h,s]}function o(T,b,h,s,t,i){return["C",T/3+.6666666666666666*h,b/3+.6666666666666666*s,t/3+.6666666666666666*h,i/3+.6666666666666666*s,t,i]}},20472:function(ee,z,e){"use strict";var M,k=e(74840),o=e(21984),T=e(22235),b=e(53520),h=e(29620),s=document.createElement("canvas"),t=s.getContext("2d");ee.exports=function(i,n){if(!b(i))throw Error("Argument should be valid svg path string");var r,a;n||(n={}),n.shape?(r=n.shape[0],a=n.shape[1]):(r=s.width=n.w||n.width||200,a=s.height=n.h||n.height||200);var l=Math.min(r,a),u=n.stroke||0,d=n.viewbox||n.viewBox||k(i),c=[r/(d[2]-d[0]),a/(d[3]-d[1])],x=Math.min(c[0]||0,c[1]||0)/2;if(t.fillStyle="black",t.fillRect(0,0,r,a),t.fillStyle="white",u&&(typeof u!="number"&&(u=1),t.strokeStyle=u>0?"white":"black",t.lineWidth=Math.abs(u)),t.translate(.5*r,.5*a),t.scale(x,x),function(){if(M!=null)return M;var v=document.createElement("canvas").getContext("2d");if(v.canvas.width=v.canvas.height=1,!window.Path2D)return M=!1;var m=new Path2D("M0,0h1v1h-1v-1Z");v.fillStyle="black",v.fill(m);var y=v.getImageData(0,0,1,1);return M=y&&y.data&&y.data[3]===255}()){var g=new Path2D(i);t.fill(g),u&&t.stroke(g)}else{var p=o(i);T(t,p),t.fill(),u&&t.stroke()}return t.setTransform(1,0,0,1,0,0),h(t,{cutoff:n.cutoff!=null?n.cutoff:.5,radius:n.radius!=null?n.radius:.5*l})}},49760:function(ee,z,e){var M;(function(k){var o=/^\s+/,T=/\s+$/,b=0,h=k.round,s=k.min,t=k.max,i=k.random;function n(Z,$){if($=$||{},(Z=Z||"")instanceof n)return Z;if(!(this instanceof n))return new n(Z,$);var re=function(oe){var ie,ue,me,be={r:0,g:0,b:0},ge=1,de=null,ve=null,pe=null,_e=!1,Te=!1;return typeof oe=="string"&&(oe=function(le){le=le.replace(o,"").replace(T,"").toLowerCase();var ae,he=!1;if(P[le])le=P[le],he=!0;else if(le=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(ae=K.rgb.exec(le))?{r:ae[1],g:ae[2],b:ae[3]}:(ae=K.rgba.exec(le))?{r:ae[1],g:ae[2],b:ae[3],a:ae[4]}:(ae=K.hsl.exec(le))?{h:ae[1],s:ae[2],l:ae[3]}:(ae=K.hsla.exec(le))?{h:ae[1],s:ae[2],l:ae[3],a:ae[4]}:(ae=K.hsv.exec(le))?{h:ae[1],s:ae[2],v:ae[3]}:(ae=K.hsva.exec(le))?{h:ae[1],s:ae[2],v:ae[3],a:ae[4]}:(ae=K.hex8.exec(le))?{r:D(ae[1]),g:D(ae[2]),b:D(ae[3]),a:U(ae[4]),format:he?"name":"hex8"}:(ae=K.hex6.exec(le))?{r:D(ae[1]),g:D(ae[2]),b:D(ae[3]),format:he?"name":"hex"}:(ae=K.hex4.exec(le))?{r:D(ae[1]+""+ae[1]),g:D(ae[2]+""+ae[2]),b:D(ae[3]+""+ae[3]),a:U(ae[4]+""+ae[4]),format:he?"name":"hex8"}:!!(ae=K.hex3.exec(le))&&{r:D(ae[1]+""+ae[1]),g:D(ae[2]+""+ae[2]),b:D(ae[3]+""+ae[3]),format:he?"name":"hex"}}(oe)),typeof oe=="object"&&(X(oe.r)&&X(oe.g)&&X(oe.b)?(ie=oe.r,ue=oe.g,me=oe.b,be={r:255*R(ie,255),g:255*R(ue,255),b:255*R(me,255)},_e=!0,Te=String(oe.r).substr(-1)==="%"?"prgb":"rgb"):X(oe.h)&&X(oe.s)&&X(oe.v)?(de=W(oe.s),ve=W(oe.v),be=function(le,ae,he){le=6*R(le,360),ae=R(ae,100),he=R(he,100);var Se=k.floor(le),ke=le-Se,Me=he*(1-ae),Ee=he*(1-ke*ae),De=he*(1-(1-ke)*ae),fe=Se%6;return{r:255*[he,Ee,Me,Me,De,he][fe],g:255*[De,he,he,Ee,Me,Me][fe],b:255*[Me,Me,De,he,he,Ee][fe]}}(oe.h,de,ve),_e=!0,Te="hsv"):X(oe.h)&&X(oe.s)&&X(oe.l)&&(de=W(oe.s),pe=W(oe.l),be=function(le,ae,he){var Se,ke,Me;function Ee(xe,we,Oe){return Oe<0&&(Oe+=1),Oe>1&&(Oe-=1),Oe<1/6?xe+6*(we-xe)*Oe:Oe<.5?we:Oe<2/3?xe+(we-xe)*(2/3-Oe)*6:xe}if(le=R(le,360),ae=R(ae,100),he=R(he,100),ae===0)Se=ke=Me=he;else{var De=he<.5?he*(1+ae):he+ae-he*ae,fe=2*he-De;Se=Ee(fe,De,le+1/3),ke=Ee(fe,De,le),Me=Ee(fe,De,le-1/3)}return{r:255*Se,g:255*ke,b:255*Me}}(oe.h,de,pe),_e=!0,Te="hsl"),oe.hasOwnProperty("a")&&(ge=oe.a)),ge=O(ge),{ok:_e,format:oe.format||Te,r:s(255,t(be.r,0)),g:s(255,t(be.g,0)),b:s(255,t(be.b,0)),a:ge}}(Z);this._originalInput=Z,this._r=re.r,this._g=re.g,this._b=re.b,this._a=re.a,this._roundA=h(100*this._a)/100,this._format=$.format||re.format,this._gradientType=$.gradientType,this._r<1&&(this._r=h(this._r)),this._g<1&&(this._g=h(this._g)),this._b<1&&(this._b=h(this._b)),this._ok=re.ok,this._tc_id=b++}function r(Z,$,re){Z=R(Z,255),$=R($,255),re=R(re,255);var oe,ie,ue=t(Z,$,re),me=s(Z,$,re),be=(ue+me)/2;if(ue==me)oe=ie=0;else{var ge=ue-me;switch(ie=be>.5?ge/(2-ue-me):ge/(ue+me),ue){case Z:oe=($-re)/ge+($<re?6:0);break;case $:oe=(re-Z)/ge+2;break;case re:oe=(Z-$)/ge+4}oe/=6}return{h:oe,s:ie,l:be}}function a(Z,$,re){Z=R(Z,255),$=R($,255),re=R(re,255);var oe,ie,ue=t(Z,$,re),me=s(Z,$,re),be=ue,ge=ue-me;if(ie=ue===0?0:ge/ue,ue==me)oe=0;else{switch(ue){case Z:oe=($-re)/ge+($<re?6:0);break;case $:oe=(re-Z)/ge+2;break;case re:oe=(Z-$)/ge+4}oe/=6}return{h:oe,s:ie,v:be}}function l(Z,$,re,oe){var ie=[N(h(Z).toString(16)),N(h($).toString(16)),N(h(re).toString(16))];return oe&&ie[0].charAt(0)==ie[0].charAt(1)&&ie[1].charAt(0)==ie[1].charAt(1)&&ie[2].charAt(0)==ie[2].charAt(1)?ie[0].charAt(0)+ie[1].charAt(0)+ie[2].charAt(0):ie.join("")}function u(Z,$,re,oe){return[N(F(oe)),N(h(Z).toString(16)),N(h($).toString(16)),N(h(re).toString(16))].join("")}function d(Z,$){$=$===0?0:$||10;var re=n(Z).toHsl();return re.s-=$/100,re.s=j(re.s),n(re)}function c(Z,$){$=$===0?0:$||10;var re=n(Z).toHsl();return re.s+=$/100,re.s=j(re.s),n(re)}function x(Z){return n(Z).desaturate(100)}function g(Z,$){$=$===0?0:$||10;var re=n(Z).toHsl();return re.l+=$/100,re.l=j(re.l),n(re)}function p(Z,$){$=$===0?0:$||10;var re=n(Z).toRgb();return re.r=t(0,s(255,re.r-h(-$/100*255))),re.g=t(0,s(255,re.g-h(-$/100*255))),re.b=t(0,s(255,re.b-h(-$/100*255))),n(re)}function v(Z,$){$=$===0?0:$||10;var re=n(Z).toHsl();return re.l-=$/100,re.l=j(re.l),n(re)}function m(Z,$){var re=n(Z).toHsl(),oe=(re.h+$)%360;return re.h=oe<0?360+oe:oe,n(re)}function y(Z){var $=n(Z).toHsl();return $.h=($.h+180)%360,n($)}function _(Z){var $=n(Z).toHsl(),re=$.h;return[n(Z),n({h:(re+120)%360,s:$.s,l:$.l}),n({h:(re+240)%360,s:$.s,l:$.l})]}function f(Z){var $=n(Z).toHsl(),re=$.h;return[n(Z),n({h:(re+90)%360,s:$.s,l:$.l}),n({h:(re+180)%360,s:$.s,l:$.l}),n({h:(re+270)%360,s:$.s,l:$.l})]}function S(Z){var $=n(Z).toHsl(),re=$.h;return[n(Z),n({h:(re+72)%360,s:$.s,l:$.l}),n({h:(re+216)%360,s:$.s,l:$.l})]}function w(Z,$,re){$=$||6,re=re||30;var oe=n(Z).toHsl(),ie=360/re,ue=[n(Z)];for(oe.h=(oe.h-(ie*$>>1)+720)%360;--$;)oe.h=(oe.h+ie)%360,ue.push(n(oe));return ue}function E(Z,$){$=$||6;for(var re=n(Z).toHsv(),oe=re.h,ie=re.s,ue=re.v,me=[],be=1/$;$--;)me.push(n({h:oe,s:ie,v:ue})),ue=(ue+be)%1;return me}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(299*Z.r+587*Z.g+114*Z.b)/1e3},getLuminance:function(){var Z,$,re,oe=this.toRgb();return Z=oe.r/255,$=oe.g/255,re=oe.b/255,.2126*(Z<=.03928?Z/12.92:k.pow((Z+.055)/1.055,2.4))+.7152*($<=.03928?$/12.92:k.pow(($+.055)/1.055,2.4))+.0722*(re<=.03928?re/12.92:k.pow((re+.055)/1.055,2.4))},setAlpha:function(Z){return this._a=O(Z),this._roundA=h(100*this._a)/100,this},toHsv:function(){var Z=a(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=a(this._r,this._g,this._b),$=h(360*Z.h),re=h(100*Z.s),oe=h(100*Z.v);return this._a==1?"hsv("+$+", "+re+"%, "+oe+"%)":"hsva("+$+", "+re+"%, "+oe+"%, "+this._roundA+")"},toHsl:function(){var Z=r(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=r(this._r,this._g,this._b),$=h(360*Z.h),re=h(100*Z.s),oe=h(100*Z.l);return this._a==1?"hsl("+$+", "+re+"%, "+oe+"%)":"hsla("+$+", "+re+"%, "+oe+"%, "+this._roundA+")"},toHex:function(Z){return l(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return function($,re,oe,ie,ue){var me=[N(h($).toString(16)),N(h(re).toString(16)),N(h(oe).toString(16)),N(F(ie))];return ue&&me[0].charAt(0)==me[0].charAt(1)&&me[1].charAt(0)==me[1].charAt(1)&&me[2].charAt(0)==me[2].charAt(1)&&me[3].charAt(0)==me[3].charAt(1)?me[0].charAt(0)+me[1].charAt(0)+me[2].charAt(0)+me[3].charAt(0):me.join("")}(this._r,this._g,this._b,this._a,Z)},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:h(this._r),g:h(this._g),b:h(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+h(this._r)+", "+h(this._g)+", "+h(this._b)+")":"rgba("+h(this._r)+", "+h(this._g)+", "+h(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:h(100*R(this._r,255))+"%",g:h(100*R(this._g,255))+"%",b:h(100*R(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+h(100*R(this._r,255))+"%, "+h(100*R(this._g,255))+"%, "+h(100*R(this._b,255))+"%)":"rgba("+h(100*R(this._r,255))+"%, "+h(100*R(this._g,255))+"%, "+h(100*R(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(C[l(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Z){var $="#"+u(this._r,this._g,this._b,this._a),re=$,oe=this._gradientType?"GradientType = 1, ":"";if(Z){var ie=n(Z);re="#"+u(ie._r,ie._g,ie._b,ie._a)}return"progid:DXImageTransform.Microsoft.gradient("+oe+"startColorstr="+$+",endColorstr="+re+")"},toString:function(Z){var $=!!Z;Z=Z||this._format;var re=!1,oe=this._a<1&&this._a>=0;return $||!oe||Z!=="hex"&&Z!=="hex6"&&Z!=="hex3"&&Z!=="hex4"&&Z!=="hex8"&&Z!=="name"?(Z==="rgb"&&(re=this.toRgbString()),Z==="prgb"&&(re=this.toPercentageRgbString()),Z!=="hex"&&Z!=="hex6"||(re=this.toHexString()),Z==="hex3"&&(re=this.toHexString(!0)),Z==="hex4"&&(re=this.toHex8String(!0)),Z==="hex8"&&(re=this.toHex8String()),Z==="name"&&(re=this.toName()),Z==="hsl"&&(re=this.toHslString()),Z==="hsv"&&(re=this.toHsvString()),re||this.toHexString()):Z==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(Z,$){var re=Z.apply(null,[this].concat([].slice.call($)));return this._r=re._r,this._g=re._g,this._b=re._b,this.setAlpha(re._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(m,arguments)},_applyCombination:function(Z,$){return Z.apply(null,[this].concat([].slice.call($)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(f,arguments)}},n.fromRatio=function(Z,$){if(typeof Z=="object"){var re={};for(var oe in Z)Z.hasOwnProperty(oe)&&(re[oe]=oe==="a"?Z[oe]:W(Z[oe]));Z=re}return n(Z,$)},n.equals=function(Z,$){return!(!Z||!$)&&n(Z).toRgbString()==n($).toRgbString()},n.random=function(){return n.fromRatio({r:i(),g:i(),b:i()})},n.mix=function(Z,$,re){re=re===0?0:re||50;var oe=n(Z).toRgb(),ie=n($).toRgb(),ue=re/100;return n({r:(ie.r-oe.r)*ue+oe.r,g:(ie.g-oe.g)*ue+oe.g,b:(ie.b-oe.b)*ue+oe.b,a:(ie.a-oe.a)*ue+oe.a})},n.readability=function(Z,$){var re=n(Z),oe=n($);return(k.max(re.getLuminance(),oe.getLuminance())+.05)/(k.min(re.getLuminance(),oe.getLuminance())+.05)},n.isReadable=function(Z,$,re){var oe,ie,ue,me,be,ge=n.readability(Z,$);switch(ie=!1,(ue=re,(me=((ue=ue||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&me!=="AAA"&&(me="AA"),(be=(ue.size||"small").toLowerCase())!=="small"&&be!=="large"&&(be="small"),oe={level:me,size:be}).level+oe.size){case"AAsmall":case"AAAlarge":ie=ge>=4.5;break;case"AAlarge":ie=ge>=3;break;case"AAAsmall":ie=ge>=7}return ie},n.mostReadable=function(Z,$,re){var oe,ie,ue,me,be=null,ge=0;ie=(re=re||{}).includeFallbackColors,ue=re.level,me=re.size;for(var de=0;de<$.length;de++)(oe=n.readability(Z,$[de]))>ge&&(ge=oe,be=n($[de]));return n.isReadable(Z,be,{level:ue,size:me})||!ie?be:(re.includeFallbackColors=!1,n.mostReadable(Z,["#fff","#000"],re))};var P=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=n.hexNames=function(Z){var $={};for(var re in Z)Z.hasOwnProperty(re)&&($[Z[re]]=re);return $}(P);function O(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function R(Z,$){(function(oe){return typeof oe=="string"&&oe.indexOf(".")!=-1&&parseFloat(oe)===1})(Z)&&(Z="100%");var re=function(oe){return typeof oe=="string"&&oe.indexOf("%")!=-1}(Z);return Z=s($,t(0,parseFloat(Z))),re&&(Z=parseInt(Z*$,10)/100),k.abs(Z-$)<1e-6?1:Z%$/parseFloat($)}function j(Z){return s(1,t(0,Z))}function D(Z){return parseInt(Z,16)}function N(Z){return Z.length==1?"0"+Z:""+Z}function W(Z){return Z<=1&&(Z=100*Z+"%"),Z}function F(Z){return k.round(255*parseFloat(Z)).toString(16)}function U(Z){return D(Z)/255}var V,te,J,K=(te="[\\s|\\(]+("+(V="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?",J="[\\s|\\(]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?",{CSS_UNIT:new RegExp(V),rgb:new RegExp("rgb"+te),rgba:new RegExp("rgba"+J),hsl:new RegExp("hsl"+te),hsla:new RegExp("hsla"+J),hsv:new RegExp("hsv"+te),hsva:new RegExp("hsva"+J),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function X(Z){return!!K.CSS_UNIT.exec(Z)}ee.exports?ee.exports=n:(M=function(){return n}.call(z,e,z,ee))===void 0||(ee.exports=M)})(Math)},37816:function(ee){"use strict";ee.exports=e,ee.exports.float32=ee.exports.float=e,ee.exports.fract32=ee.exports.fract=function(M,k){if(M.length){if(M instanceof Float32Array)return new Float32Array(M.length);k instanceof Float32Array||(k=e(M));for(var o=0,T=k.length;o<T;o++)k[o]=M[o]-k[o];return k}return e(M-e(M))};var z=new Float32Array(1);function e(M){return M.length?M instanceof Float32Array?M:new Float32Array(M):(z[0]=M,z[0])}},23464:function(ee,z,e){"use strict";var M=e(65819);ee.exports=T;var k=96;function o(b,h){var s=M(getComputedStyle(b).getPropertyValue(h));return s[0]*T(s[1],b)}function T(b,h){switch(h=h||document.body,b=(b||"px").trim().toLowerCase(),h!==window&&h!==document||(h=document.body),b){case"%":return h.clientHeight/100;case"ch":case"ex":return function(s,t){var i=document.createElement("div");i.style["font-size"]="128"+s,t.appendChild(i);var n=o(i,"font-size")/128;return t.removeChild(i),n}(b,h);case"em":return o(h,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return k;case"cm":return k/2.54;case"mm":return k/25.4;case"pt":return k/72;case"pc":return k/6}return 1}},55712:function(ee,z,e){"use strict";function M(T){return T}function k(T,b){return typeof b=="string"&&(b=T.objects[b]),b.type==="GeometryCollection"?{type:"FeatureCollection",features:b.geometries.map(function(h){return o(T,h)})}:o(T,b)}function o(T,b){var h=b.id,s=b.bbox,t=b.properties==null?{}:b.properties,i=function(n,r){var a=function(p){if(p==null)return M;var v,m,y=p.scale[0],_=p.scale[1],f=p.translate[0],S=p.translate[1];return function(w,E){E||(v=m=0);var P=2,C=w.length,O=new Array(C);for(O[0]=(v+=w[0])*y+f,O[1]=(m+=w[1])*_+S;P<C;)O[P]=w[P],++P;return O}}(n.transform),l=n.arcs;function u(p,v){v.length&&v.pop();for(var m=l[p<0?~p:p],y=0,_=m.length;y<_;++y)v.push(a(m[y],y));p<0&&function(f,S){for(var w,E=f.length,P=E-S;P<--E;)w=f[P],f[P++]=f[E],f[E]=w}(v,_)}function d(p){return a(p)}function c(p){for(var v=[],m=0,y=p.length;m<y;++m)u(p[m],v);return v.length<2&&v.push(v[0]),v}function x(p){for(var v=c(p);v.length<4;)v.push(v[0]);return v}function g(p){return p.map(x)}return function p(v){var m,y=v.type;switch(y){case"GeometryCollection":return{type:y,geometries:v.geometries.map(p)};case"Point":m=d(v.coordinates);break;case"MultiPoint":m=v.coordinates.map(d);break;case"LineString":m=c(v.arcs);break;case"MultiLineString":m=v.arcs.map(c);break;case"Polygon":m=g(v.arcs);break;case"MultiPolygon":m=v.arcs.map(g);break;default:return null}return{type:y,coordinates:m}}(r)}(T,b);return h==null&&s==null?{type:"Feature",properties:t,geometry:i}:s==null?{type:"Feature",id:h,properties:t,geometry:i}:{type:"Feature",id:h,bbox:s,properties:t,geometry:i}}e.d(z,{NO:function(){return k}})},73384:function(ee,z,e){"use strict";var M=e(54612);ee.exports=function(k){if(typeof k!="function"||!hasOwnProperty.call(k,"length"))return!1;try{if(typeof k.length!="number"||typeof k.call!="function"||typeof k.apply!="function")return!1}catch(o){return!1}return!M(k)}},57980:function(ee,z,e){"use strict";var M=e(81680),k=e(7328),o=e(33940),T=e(18856),b=function(h,s){return h.replace("%v",T(s))};ee.exports=function(h,s,t){if(!k(t))throw new TypeError(b(s,h));if(!M(h)){if("default"in t)return t.default;if(t.isOptional)return null}var i=o(t.errorMessage);throw M(i)||(i=s),new TypeError(b(i,h))}},32336:function(ee){"use strict";ee.exports=function(z){try{return z.toString()}catch(e){try{return String(z)}catch(M){return null}}}},18856:function(ee,z,e){"use strict";var M=e(32336),k=/[\n\r\u2028\u2029]/g;ee.exports=function(o){var T=M(o);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(k,function(b){switch(b){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},7328:function(ee,z,e){"use strict";var M=e(81680),k={object:!0,function:!0,undefined:!0};ee.exports=function(o){return!!M(o)&&hasOwnProperty.call(k,typeof o)}},87396:function(ee,z,e){"use strict";var M=e(57980),k=e(85488);ee.exports=function(o){return k(o)?o:M(o,"%v is not a plain function",arguments[1])}},85488:function(ee,z,e){"use strict";var M=e(73384),k=/^\s*class[\s{/}]/,o=Function.prototype.toString;ee.exports=function(T){return!!M(T)&&!k.test(o.call(T))}},54612:function(ee,z,e){"use strict";var M=e(7328);ee.exports=function(k){if(!M(k))return!1;try{return!!k.constructor&&k.constructor.prototype===k}catch(o){return!1}}},33940:function(ee,z,e){"use strict";var M=e(81680),k=e(7328),o=Object.prototype.toString;ee.exports=function(T){if(!M(T))return null;if(k(T)){var b=T.toString;if(typeof b!="function"||b===o)return null}try{return""+T}catch(h){return null}}},18496:function(ee,z,e){"use strict";var M=e(57980),k=e(81680);ee.exports=function(o){return k(o)?o:M(o,"Cannot use %v",arguments[1])}},81680:function(ee){"use strict";ee.exports=function(z){return z!=null}},14144:function(ee,z,e){"use strict";var M=e(308),k=e(10352),o=e(33576).Buffer;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var T=typeof Uint8ClampedArray!="undefined",b=typeof BigUint64Array!="undefined",h=typeof BigInt64Array!="undefined",s=e.g.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=k([32,0])),s.BIGUINT64||(s.BIGUINT64=k([32,0])),s.BIGINT64||(s.BIGINT64=k([32,0])),s.BUFFER||(s.BUFFER=k([32,0]));var t=s.DATA,i=s.BUFFER;function n(S){if(S){var w=S.length||S.byteLength,E=M.log2(w);t[E].push(S)}}function r(S){S=M.nextPow2(S);var w=M.log2(S),E=t[w];return E.length>0?E.pop():new ArrayBuffer(S)}function a(S){return new Uint8Array(r(S),0,S)}function l(S){return new Uint16Array(r(2*S),0,S)}function u(S){return new Uint32Array(r(4*S),0,S)}function d(S){return new Int8Array(r(S),0,S)}function c(S){return new Int16Array(r(2*S),0,S)}function x(S){return new Int32Array(r(4*S),0,S)}function g(S){return new Float32Array(r(4*S),0,S)}function p(S){return new Float64Array(r(8*S),0,S)}function v(S){return T?new Uint8ClampedArray(r(S),0,S):a(S)}function m(S){return b?new BigUint64Array(r(8*S),0,S):null}function y(S){return h?new BigInt64Array(r(8*S),0,S):null}function _(S){return new DataView(r(S),0,S)}function f(S){S=M.nextPow2(S);var w=M.log2(S),E=i[w];return E.length>0?E.pop():new o(S)}z.free=function(S){if(o.isBuffer(S))i[M.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var w=S.length||S.byteLength,E=0|M.log2(w);t[E].push(S)}},z.freeUint8=z.freeUint16=z.freeUint32=z.freeBigUint64=z.freeInt8=z.freeInt16=z.freeInt32=z.freeBigInt64=z.freeFloat32=z.freeFloat=z.freeFloat64=z.freeDouble=z.freeUint8Clamped=z.freeDataView=function(S){n(S.buffer)},z.freeArrayBuffer=n,z.freeBuffer=function(S){i[M.log2(S.length)].push(S)},z.malloc=function(S,w){if(w===void 0||w==="arraybuffer")return r(S);switch(w){case"uint8":return a(S);case"uint16":return l(S);case"uint32":return u(S);case"int8":return d(S);case"int16":return c(S);case"int32":return x(S);case"float":case"float32":return g(S);case"double":case"float64":return p(S);case"uint8_clamped":return v(S);case"bigint64":return y(S);case"biguint64":return m(S);case"buffer":return f(S);case"data":case"dataview":return _(S);default:return null}return null},z.mallocArrayBuffer=r,z.mallocUint8=a,z.mallocUint16=l,z.mallocUint32=u,z.mallocInt8=d,z.mallocInt16=c,z.mallocInt32=x,z.mallocFloat32=z.mallocFloat=g,z.mallocFloat64=z.mallocDouble=p,z.mallocUint8Clamped=v,z.mallocBigUint64=m,z.mallocBigInt64=y,z.mallocDataView=_,z.mallocBuffer=f,z.clearCache=function(){for(var S=0;S<32;++S)s.UINT8[S].length=0,s.UINT16[S].length=0,s.UINT32[S].length=0,s.INT8[S].length=0,s.INT16[S].length=0,s.INT32[S].length=0,s.FLOAT[S].length=0,s.DOUBLE[S].length=0,s.BIGUINT64[S].length=0,s.BIGINT64[S].length=0,s.UINT8C[S].length=0,t[S].length=0,i[S].length=0}},92384:function(ee){var z=/[\'\"]/;ee.exports=function(e){return e?(z.test(e.charAt(0))&&(e=e.substr(1)),z.test(e.charAt(e.length-1))&&(e=e.substr(0,e.length-1)),e):""}},45223:function(ee){"use strict";ee.exports=function(z,e,M){Array.isArray(M)||(M=[].slice.call(arguments,2));for(var k=0,o=M.length;k<o;k++){var T=M[k];for(var b in T)if((e[b]===void 0||Array.isArray(e[b])||z[b]!==e[b])&&b in e){var h;if(T[b]===!0)h=e[b];else if(T[b]===!1||typeof T[b]=="function"&&(h=T[b](e[b],z,e))===void 0)continue;z[b]=h}}return z}},96656:function(ee,z,e){function M(k){try{if(!e.g.localStorage)return!1}catch(T){return!1}var o=e.g.localStorage[k];return o!=null&&String(o).toLowerCase()==="true"}ee.exports=function(k,o){if(M("noDeprecation"))return k;var T=!1;return function(){if(!T){if(M("throwDeprecation"))throw new Error(o);M("traceDeprecation")?console.trace(o):console.warn(o),T=!0}return k.apply(this,arguments)}}},75272:function(ee){ee.exports=function(z){return z&&typeof z=="object"&&typeof z.copy=="function"&&typeof z.fill=="function"&&typeof z.readUInt8=="function"}},41088:function(ee,z,e){"use strict";var M=e(91148),k=e(84420),o=e(96632),T=e(7728);function b(R){return R.call.bind(R)}var h=typeof BigInt!="undefined",s=typeof Symbol!="undefined",t=b(Object.prototype.toString),i=b(Number.prototype.valueOf),n=b(String.prototype.valueOf),r=b(Boolean.prototype.valueOf);if(h)var a=b(BigInt.prototype.valueOf);if(s)var l=b(Symbol.prototype.valueOf);function u(R,j){if(typeof R!="object")return!1;try{return j(R),!0}catch(D){return!1}}function d(R){return t(R)==="[object Map]"}function c(R){return t(R)==="[object Set]"}function x(R){return t(R)==="[object WeakMap]"}function g(R){return t(R)==="[object WeakSet]"}function p(R){return t(R)==="[object ArrayBuffer]"}function v(R){return typeof ArrayBuffer!="undefined"&&(p.working?p(R):R instanceof ArrayBuffer)}function m(R){return t(R)==="[object DataView]"}function y(R){return typeof DataView!="undefined"&&(m.working?m(R):R instanceof DataView)}z.isArgumentsObject=M,z.isGeneratorFunction=k,z.isTypedArray=T,z.isPromise=function(R){return typeof Promise!="undefined"&&R instanceof Promise||R!==null&&typeof R=="object"&&typeof R.then=="function"&&typeof R.catch=="function"},z.isArrayBufferView=function(R){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(R):T(R)||y(R)},z.isUint8Array=function(R){return o(R)==="Uint8Array"},z.isUint8ClampedArray=function(R){return o(R)==="Uint8ClampedArray"},z.isUint16Array=function(R){return o(R)==="Uint16Array"},z.isUint32Array=function(R){return o(R)==="Uint32Array"},z.isInt8Array=function(R){return o(R)==="Int8Array"},z.isInt16Array=function(R){return o(R)==="Int16Array"},z.isInt32Array=function(R){return o(R)==="Int32Array"},z.isFloat32Array=function(R){return o(R)==="Float32Array"},z.isFloat64Array=function(R){return o(R)==="Float64Array"},z.isBigInt64Array=function(R){return o(R)==="BigInt64Array"},z.isBigUint64Array=function(R){return o(R)==="BigUint64Array"},d.working=typeof Map!="undefined"&&d(new Map),z.isMap=function(R){return typeof Map!="undefined"&&(d.working?d(R):R instanceof Map)},c.working=typeof Set!="undefined"&&c(new Set),z.isSet=function(R){return typeof Set!="undefined"&&(c.working?c(R):R instanceof Set)},x.working=typeof WeakMap!="undefined"&&x(new WeakMap),z.isWeakMap=function(R){return typeof WeakMap!="undefined"&&(x.working?x(R):R instanceof WeakMap)},g.working=typeof WeakSet!="undefined"&&g(new WeakSet),z.isWeakSet=function(R){return g(R)},p.working=typeof ArrayBuffer!="undefined"&&p(new ArrayBuffer),z.isArrayBuffer=v,m.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&m(new DataView(new ArrayBuffer(1),0,1)),z.isDataView=y;var _=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function f(R){return t(R)==="[object SharedArrayBuffer]"}function S(R){return _!==void 0&&(f.working===void 0&&(f.working=f(new _)),f.working?f(R):R instanceof _)}function w(R){return u(R,i)}function E(R){return u(R,n)}function P(R){return u(R,r)}function C(R){return h&&u(R,a)}function O(R){return s&&u(R,l)}z.isSharedArrayBuffer=S,z.isAsyncFunction=function(R){return t(R)==="[object AsyncFunction]"},z.isMapIterator=function(R){return t(R)==="[object Map Iterator]"},z.isSetIterator=function(R){return t(R)==="[object Set Iterator]"},z.isGeneratorObject=function(R){return t(R)==="[object Generator]"},z.isWebAssemblyCompiledModule=function(R){return t(R)==="[object WebAssembly.Module]"},z.isNumberObject=w,z.isStringObject=E,z.isBooleanObject=P,z.isBigIntObject=C,z.isSymbolObject=O,z.isBoxedPrimitive=function(R){return w(R)||E(R)||P(R)||C(R)||O(R)},z.isAnyArrayBuffer=function(R){return typeof Uint8Array!="undefined"&&(v(R)||S(R))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(R){Object.defineProperty(z,R,{enumerable:!1,value:function(){throw new Error(R+" is not supported in userland")}})})},35840:function(ee,z,e){var M=e(4168),k=Object.getOwnPropertyDescriptors||function(O){for(var R=Object.keys(O),j={},D=0;D<R.length;D++)j[R[D]]=Object.getOwnPropertyDescriptor(O,R[D]);return j},o=/%[sdj%]/g;z.format=function(O){if(!x(O)){for(var R=[],j=0;j<arguments.length;j++)R.push(s(arguments[j]));return R.join(" ")}j=1;for(var D=arguments,N=D.length,W=String(O).replace(o,function(U){if(U==="%%")return"%";if(j>=N)return U;switch(U){case"%s":return String(D[j++]);case"%d":return Number(D[j++]);case"%j":try{return JSON.stringify(D[j++])}catch(V){return"[Circular]"}default:return U}}),F=D[j];j<N;F=D[++j])d(F)||!v(F)?W+=" "+F:W+=" "+s(F);return W},z.deprecate=function(O,R){if(M!==void 0&&M.noDeprecation===!0)return O;if(M===void 0)return function(){return z.deprecate(O,R).apply(this,arguments)};var j=!1;return function(){if(!j){if(M.throwDeprecation)throw new Error(R);M.traceDeprecation?console.trace(R):console.error(R),j=!0}return O.apply(this,arguments)}};var T={},b=/^$/;if(M.env.NODE_DEBUG){var h=M.env.NODE_DEBUG;h=h.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),b=new RegExp("^"+h+"$","i")}function s(O,R){var j={seen:[],stylize:i};return arguments.length>=3&&(j.depth=arguments[2]),arguments.length>=4&&(j.colors=arguments[3]),u(R)?j.showHidden=R:R&&z._extend(j,R),g(j.showHidden)&&(j.showHidden=!1),g(j.depth)&&(j.depth=2),g(j.colors)&&(j.colors=!1),g(j.customInspect)&&(j.customInspect=!0),j.colors&&(j.stylize=t),n(j,O,j.depth)}function t(O,R){var j=s.styles[R];return j?"\x1B["+s.colors[j][0]+"m"+O+"\x1B["+s.colors[j][1]+"m":O}function i(O,R){return O}function n(O,R,j){if(O.customInspect&&R&&_(R.inspect)&&R.inspect!==z.inspect&&(!R.constructor||R.constructor.prototype!==R)){var D=R.inspect(j,O);return x(D)||(D=n(O,D,j)),D}var N=function(X,Z){if(g(Z))return X.stylize("undefined","undefined");if(x(Z)){var $="'"+JSON.stringify(Z).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return X.stylize($,"string")}return c(Z)?X.stylize(""+Z,"number"):u(Z)?X.stylize(""+Z,"boolean"):d(Z)?X.stylize("null","null"):void 0}(O,R);if(N)return N;var W=Object.keys(R),F=function(X){var Z={};return X.forEach(function($,re){Z[$]=!0}),Z}(W);if(O.showHidden&&(W=Object.getOwnPropertyNames(R)),y(R)&&(W.indexOf("message")>=0||W.indexOf("description")>=0))return r(R);if(W.length===0){if(_(R)){var U=R.name?": "+R.name:"";return O.stylize("[Function"+U+"]","special")}if(p(R))return O.stylize(RegExp.prototype.toString.call(R),"regexp");if(m(R))return O.stylize(Date.prototype.toString.call(R),"date");if(y(R))return r(R)}var V,te="",J=!1,K=["{","}"];return l(R)&&(J=!0,K=["[","]"]),_(R)&&(te=" [Function"+(R.name?": "+R.name:"")+"]"),p(R)&&(te=" "+RegExp.prototype.toString.call(R)),m(R)&&(te=" "+Date.prototype.toUTCString.call(R)),y(R)&&(te=" "+r(R)),W.length!==0||J&&R.length!=0?j<0?p(R)?O.stylize(RegExp.prototype.toString.call(R),"regexp"):O.stylize("[Object]","special"):(O.seen.push(R),V=J?function(X,Z,$,re,oe){for(var ie=[],ue=0,me=Z.length;ue<me;++ue)E(Z,String(ue))?ie.push(a(X,Z,$,re,String(ue),!0)):ie.push("");return oe.forEach(function(be){be.match(/^\d+$/)||ie.push(a(X,Z,$,re,be,!0))}),ie}(O,R,j,F,W):W.map(function(X){return a(O,R,j,F,X,J)}),O.seen.pop(),function(X,Z,$){return X.reduce(function(re,oe){return oe.indexOf(`
`),re+oe.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?$[0]+(Z===""?"":Z+`
 `)+" "+X.join(`,
  `)+" "+$[1]:$[0]+Z+" "+X.join(", ")+" "+$[1]}(V,te,K)):K[0]+te+K[1]}function r(O){return"["+Error.prototype.toString.call(O)+"]"}function a(O,R,j,D,N,W){var F,U,V;if((V=Object.getOwnPropertyDescriptor(R,N)||{value:R[N]}).get?U=V.set?O.stylize("[Getter/Setter]","special"):O.stylize("[Getter]","special"):V.set&&(U=O.stylize("[Setter]","special")),E(D,N)||(F="["+N+"]"),U||(O.seen.indexOf(V.value)<0?(U=d(j)?n(O,V.value,null):n(O,V.value,j-1)).indexOf(`
`)>-1&&(U=W?U.split(`
`).map(function(te){return"  "+te}).join(`
`).slice(2):`
`+U.split(`
`).map(function(te){return"   "+te}).join(`
`)):U=O.stylize("[Circular]","special")),g(F)){if(W&&N.match(/^\d+$/))return U;(F=JSON.stringify(""+N)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(F=F.slice(1,-1),F=O.stylize(F,"name")):(F=F.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),F=O.stylize(F,"string"))}return F+": "+U}function l(O){return Array.isArray(O)}function u(O){return typeof O=="boolean"}function d(O){return O===null}function c(O){return typeof O=="number"}function x(O){return typeof O=="string"}function g(O){return O===void 0}function p(O){return v(O)&&f(O)==="[object RegExp]"}function v(O){return typeof O=="object"&&O!==null}function m(O){return v(O)&&f(O)==="[object Date]"}function y(O){return v(O)&&(f(O)==="[object Error]"||O instanceof Error)}function _(O){return typeof O=="function"}function f(O){return Object.prototype.toString.call(O)}function S(O){return O<10?"0"+O.toString(10):O.toString(10)}z.debuglog=function(O){if(O=O.toUpperCase(),!T[O])if(b.test(O)){var R=M.pid;T[O]=function(){var j=z.format.apply(z,arguments);console.error("%s %d: %s",O,R,j)}}else T[O]=function(){};return T[O]},z.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},z.types=e(41088),z.isArray=l,z.isBoolean=u,z.isNull=d,z.isNullOrUndefined=function(O){return O==null},z.isNumber=c,z.isString=x,z.isSymbol=function(O){return typeof O=="symbol"},z.isUndefined=g,z.isRegExp=p,z.types.isRegExp=p,z.isObject=v,z.isDate=m,z.types.isDate=m,z.isError=y,z.types.isNativeError=y,z.isFunction=_,z.isPrimitive=function(O){return O===null||typeof O=="boolean"||typeof O=="number"||typeof O=="string"||typeof O=="symbol"||O===void 0},z.isBuffer=e(75272);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(O,R){return Object.prototype.hasOwnProperty.call(O,R)}z.log=function(){var O,R;console.log("%s - %s",(R=[S((O=new Date).getHours()),S(O.getMinutes()),S(O.getSeconds())].join(":"),[O.getDate(),w[O.getMonth()],R].join(" ")),z.format.apply(z,arguments))},z.inherits=e(6768),z._extend=function(O,R){if(!R||!v(R))return O;for(var j=Object.keys(R),D=j.length;D--;)O[j[D]]=R[j[D]];return O};var P=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;function C(O,R){if(!O){var j=new Error("Promise was rejected with a falsy value");j.reason=O,O=j}return R(O)}z.promisify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');if(P&&O[P]){var R;if(typeof(R=O[P])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(R,P,{value:R,enumerable:!1,writable:!1,configurable:!0}),R}function R(){for(var j,D,N=new Promise(function(U,V){j=U,D=V}),W=[],F=0;F<arguments.length;F++)W.push(arguments[F]);W.push(function(U,V){U?D(U):j(V)});try{O.apply(this,W)}catch(U){D(U)}return N}return Object.setPrototypeOf(R,Object.getPrototypeOf(O)),P&&Object.defineProperty(R,P,{value:R,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(R,k(O))},z.promisify.custom=P,z.callbackify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');function R(){for(var j=[],D=0;D<arguments.length;D++)j.push(arguments[D]);var N=j.pop();if(typeof N!="function")throw new TypeError("The last argument must be of type Function");var W=this,F=function(){return N.apply(W,arguments)};O.apply(this,j).then(function(U){M.nextTick(F.bind(null,null,U))},function(U){M.nextTick(C.bind(null,U,F))})}return Object.setPrototypeOf(R,Object.getPrototypeOf(O)),Object.defineProperties(R,k(O)),R}},5408:function(ee,z,e){var M=e(13380);ee.exports=function(k){return M("webgl",k)}},96632:function(ee,z,e){"use strict";var M=e(46492),k=e(63436),o=e(57916),T=e(99676),b=e(2304),h=T("Object.prototype.toString"),s=e(46672)(),t=typeof globalThis=="undefined"?e.g:globalThis,i=k(),n=T("String.prototype.slice"),r=Object.getPrototypeOf,a=T("Array.prototype.indexOf",!0)||function(u,d){for(var c=0;c<u.length;c+=1)if(u[c]===d)return c;return-1},l={__proto__:null};M(i,s&&b&&r?function(u){var d=new t[u];if(Symbol.toStringTag in d){var c=r(d),x=b(c,Symbol.toStringTag);if(!x){var g=r(c);x=b(g,Symbol.toStringTag)}l["$"+u]=o(x.get)}}:function(u){var d=new t[u],c=d.slice||d.set;c&&(l["$"+u]=o(c))}),ee.exports=function(u){if(!u||typeof u!="object")return!1;if(!s){var d=n(h(u),8,-1);return a(i,d)>-1?d:d==="Object"&&function(c){var x=!1;return M(l,function(g,p){if(!x)try{g(c),x=n(p,1)}catch(v){}}),x}(u)}return b?function(c){var x=!1;return M(l,function(g,p){if(!x)try{"$"+g(c)===p&&(x=n(p,1))}catch(v){}}),x}(u):null}},67020:function(ee,z,e){var M=e(38700),k=e(50896),o=M.instance();function T(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(r,a){if(typeof r=="string"){var l=r.match(h);return l?l[0]:""}var u=this._validateYear(r),d=r.month(),c=""+this.toChineseMonth(u,d);return a&&c.length<2&&(c="0"+c),this.isIntercalaryMonth(u,d)&&(c+="i"),c},monthNames:function(r){if(typeof r=="string"){var a=r.match(s);return a?a[0]:""}var l=this._validateYear(r),u=r.month(),d=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(d="\u95F0"+d),d},monthNamesShort:function(r){if(typeof r=="string"){var a=r.match(t);return a?a[0]:""}var l=this._validateYear(r),u=r.month(),d=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][this.toChineseMonth(l,u)-1];return this.isIntercalaryMonth(l,u)&&(d="\u95F0"+d),d},parseMonth:function(r,a){r=this._validateYear(r);var l,u=parseInt(a);if(isNaN(u))a[0]==="\u95F0"&&(l=!0,a=a.substring(1)),a[a.length-1]==="\u6708"&&(a=a.substring(0,a.length-1)),u=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(a);else{var d=a[a.length-1];l=d==="i"||d==="I"}return this.toMonthIndex(r,u,l)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(r,a){if(r.year&&(r=r.year()),typeof r!="number"||r<1888||r>2111)throw a.replace(/\{0\}/,this.local.name);return r},toMonthIndex:function(r,a,l){var u=this.intercalaryMonth(r);if(l&&a!==u||a<1||a>12)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!l&&a<=u?a-1:a:a-1},toChineseMonth:function(r,a){r.year&&(a=(r=r.year()).month());var l=this.intercalaryMonth(r);if(a<0||a>(l?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return l?a<l?a+1:a:a+1},intercalaryMonth:function(r){return r=this._validateYear(r),i[r-i[0]]>>13},isIntercalaryMonth:function(r,a){r.year&&(a=(r=r.year()).month());var l=this.intercalaryMonth(r);return!!l&&l===a},leapYear:function(r){return this.intercalaryMonth(r)!==0},weekOfYear:function(r,a,l){var u,d=this._validateYear(r,M.local.invalidyear),c=n[d-n[0]],x=c>>9&4095,g=c>>5&15,p=31&c;(u=o.newDate(x,g,p)).add(4-(u.dayOfWeek()||7),"d");var v=this.toJD(r,a,l)-u.toJD();return 1+Math.floor(v/7)},monthsInYear:function(r){return this.leapYear(r)?13:12},daysInMonth:function(r,a){r.year&&(a=r.month(),r=r.year()),r=this._validateYear(r);var l=i[r-i[0]];if(a>(l>>13?12:11))throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);return l&1<<12-a?30:29},weekDay:function(r,a,l){return(this.dayOfWeek(r,a,l)||7)<6},toJD:function(r,a,l){var u=this._validate(r,c,l,M.local.invalidDate);r=this._validateYear(u.year()),a=u.month(),l=u.day();var d=this.isIntercalaryMonth(r,a),c=this.toChineseMonth(r,a),x=function(g,p,v,m,y){var _,f,S;if(typeof g=="object")f=g,_=p||{};else{var w;if(!(typeof g=="number"&&g>=1888&&g<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof p=="number"&&p>=1&&p<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof v=="number"&&v>=1&&v<=30))throw new Error("Lunar day outside range 1 - 30");typeof m=="object"?(w=!1,_=m):(w=!!m,_={}),f={year:g,month:p,day:v,isIntercalary:w}}S=f.day-1;var E,P=i[f.year-i[0]],C=P>>13;E=C&&(f.month>C||f.isIntercalary)?f.month:f.month-1;for(var O=0;O<E;O++)S+=P&1<<12-O?30:29;var R=n[f.year-n[0]],j=new Date(R>>9&4095,(R>>5&15)-1,(31&R)+S);return _.year=j.getFullYear(),_.month=1+j.getMonth(),_.day=j.getDate(),_}(r,c,l,d);return o.toJD(x.year,x.month,x.day)},fromJD:function(r){var a=o.fromJD(r),l=function(d,c,x,g){var p,v;if(typeof d=="object")p=d,v=c||{};else{if(!(typeof d=="number"&&d>=1888&&d<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof c=="number"&&c>=1&&c<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof x=="number"&&x>=1&&x<=31))throw new Error("Solar day outside range 1 - 31");p={year:d,month:c,day:x},v={}}var m=n[p.year-n[0]],y=p.year<<9|p.month<<5|p.day;v.year=y>=m?p.year:p.year-1,m=n[v.year-n[0]];var _,f=new Date(m>>9&4095,(m>>5&15)-1,31&m),S=new Date(p.year,p.month-1,p.day);_=Math.round((S-f)/864e5);var w,E=i[v.year-i[0]];for(w=0;w<13;w++){var P=E&1<<12-w?30:29;if(_<P)break;_-=P}var C=E>>13;return!C||w<C?(v.isIntercalary=!1,v.month=1+w):w===C?(v.isIntercalary=!0,v.month=w):(v.isIntercalary=!1,v.month=w),v.day=1+_,v}(a.year(),a.month(),a.day()),u=this.toMonthIndex(l.year,l.month,l.isIntercalary);return this.newDate(l.year,u,l.day)},fromString:function(r){var a=r.match(b),l=this._validateYear(+a[1]),u=+a[2],d=!!a[3],c=this.toMonthIndex(l,u,d),x=+a[4];return this.newDate(l,c,x)},add:function(r,a,l){var u=r.year(),d=r.month(),c=this.isIntercalaryMonth(u,d),x=this.toChineseMonth(u,d),g=Object.getPrototypeOf(T.prototype).add.call(this,r,a,l);if(l==="y"){var p=g.year(),v=g.month(),m=this.isIntercalaryMonth(p,x),y=c&&m?this.toMonthIndex(p,x,!0):this.toMonthIndex(p,x,!1);y!==v&&g.month(y)}return g}});var b=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,h=/^\d?\d[iI]?/m,s=/^闰?十?[一二三四五六七八九]?月/m,t=/^闰?十?[一二三四五六七八九]?/m;M.calendars.chinese=T;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],n=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},89792:function(ee,z,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,h){var s=this.newDate(T,b,h);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var h=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===13&&this.leapYear(h.year())?1:0)},weekDay:function(T,b,h){return(this.dayOfWeek(T,b,h)||7)<6},toJD:function(T,b,h){var s=this._validate(T,b,h,M.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,h=Math.floor((b-Math.floor((b+366)/1461))/365)+1;h<=0&&h--,b=Math.floor(T)+.5-this.newDate(h,1,1).toJD();var s=Math.floor(b/30)+1,t=b-30*(s-1)+1;return this.newDate(h,s,t)}}),M.calendars.coptic=o},55668:function(ee,z,e){var M=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),!1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),13},daysInYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),400},weekOfYear:function(b,h,s){var t=this.newDate(b,h,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/8)+1},daysInMonth:function(b,h){var s=this._validate(b,h,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(b,h,s){return(this._validate(b,h,s,M.local.invalidDate).day()+1)%8},weekDay:function(b,h,s){var t=this.dayOfWeek(b,h,s);return t>=2&&t<=6},extraInfo:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);return{century:T[Math.floor((t.year()-1)/100)+1]||""}},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);return b=t.year()+(t.year()<0?1:0),h=t.month(),(s=t.day())+(h>1?16:0)+(h>2?32*(h-2):0)+400*(b-1)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b+.5)-Math.floor(this.jdEpoch)-1;var h=Math.floor(b/400)+1;b-=400*(h-1),b+=b>15?16:0;var s=Math.floor(b/32)+1,t=b-32*(s-1)+1;return this.newDate(h<=0?h-1:h,s,t)}});var T={20:"Fruitbat",21:"Anchovy"};M.calendars.discworld=o},65168:function(ee,z,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=b.year()+(b.year()<0?1:0))%4==3||T%4==-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(T,b,h){var s=this.newDate(T,b,h);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var h=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===13&&this.leapYear(h.year())?1:0)},weekDay:function(T,b,h){return(this.dayOfWeek(T,b,h)||7)<6},toJD:function(T,b,h){var s=this._validate(T,b,h,M.local.invalidDate);return(T=s.year())<0&&T++,s.day()+30*(s.month()-1)+365*(T-1)+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var b=Math.floor(T)+.5-this.jdEpoch,h=Math.floor((b-Math.floor((b+366)/1461))/365)+1;h<=0&&h--,b=Math.floor(T)+.5-this.newDate(h,1,1).toJD();var s=Math.floor(b/30)+1,t=b-30*(s-1)+1;return this.newDate(h,s,t)}}),M.calendars.ethiopian=o},2084:function(ee,z,e){var M=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,h){return b-h*Math.floor(b/h)}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var h=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return this._leapYear(h.year())},_leapYear:function(b){return T(7*(b=b<0?b+1:b)+1,19)<7},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,M.local.invalidYear),this._leapYear(b.year?b.year():b)?13:12},weekOfYear:function(b,h,s){var t=this.newDate(b,h,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){return b=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear).year(),this.toJD(b===-1?1:b+1,7,1)-this.toJD(b,7,1)},daysInMonth:function(b,h){return b.year&&(h=b.month(),b=b.year()),this._validate(b,h,this.minDay,M.local.invalidMonth),h===12&&this.leapYear(b)||h===8&&T(this.daysInYear(b),10)===5?30:h===9&&T(this.daysInYear(b),10)===3?29:this.daysPerMonth[h-1]},weekDay:function(b,h,s){return this.dayOfWeek(b,h,s)!==6},extraInfo:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);return{yearType:(this.leapYear(t)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(t)%10-3]}},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);b=t.year(),h=t.month(),s=t.day();var i=b<=0?b+1:b,n=this.jdEpoch+this._delay1(i)+this._delay2(i)+s+1;if(h<7){for(var r=7;r<=this.monthsInYear(b);r++)n+=this.daysInMonth(b,r);for(r=1;r<h;r++)n+=this.daysInMonth(b,r)}else for(r=7;r<h;r++)n+=this.daysInMonth(b,r);return n},_delay1:function(b){var h=Math.floor((235*b-234)/19),s=12084+13753*h,t=29*h+Math.floor(s/25920);return T(3*(t+1),7)<3&&t++,t},_delay2:function(b){var h=this._delay1(b-1),s=this._delay1(b);return this._delay1(b+1)-s==356?2:s-h==382?1:0},fromJD:function(b){b=Math.floor(b)+.5;for(var h=Math.floor(98496*(b-this.jdEpoch)/35975351)-1;b>=this.toJD(h===-1?1:h+1,7,1);)h++;for(var s=b<this.toJD(h,1,1)?7:1;b>this.toJD(h,s,this.daysInMonth(h,s));)s++;var t=b-this.toJD(h,s,1)+1;return this.newDate(h,s,t)}}),M.calendars.hebrew=o},26368:function(ee,z,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){return(11*this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year()+14)%30<11},weekOfYear:function(T,b,h){var s=this.newDate(T,b,h);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,b){var h=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===12&&this.leapYear(h.year())?1:0)},weekDay:function(T,b,h){return this.dayOfWeek(T,b,h)!==5},toJD:function(T,b,h){var s=this._validate(T,b,h,M.local.invalidDate);return T=s.year(),b=s.month(),T=T<=0?T+1:T,(h=s.day())+Math.ceil(29.5*(b-1))+354*(T-1)+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var b=Math.floor((30*(T-this.jdEpoch)+10646)/10631);b=b<=0?b-1:b;var h=Math.min(12,Math.ceil((T-29-this.toJD(b,1,1))/29.5)+1),s=T-this.toJD(b,h,1)+1;return this.newDate(b,h,s)}}),M.calendars.islamic=o},24747:function(ee,z,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var b=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return(T=b.year()<0?b.year()+1:b.year())%4==0},weekOfYear:function(T,b,h){var s=this.newDate(T,b,h);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(T,b){var h=this._validate(T,b,this.minDay,M.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===2&&this.leapYear(h.year())?1:0)},weekDay:function(T,b,h){return(this.dayOfWeek(T,b,h)||7)<6},toJD:function(T,b,h){var s=this._validate(T,b,h,M.local.invalidDate);return T=s.year(),b=s.month(),h=s.day(),T<0&&T++,b<=2&&(T--,b+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(b+1))+h-1524.5},fromJD:function(T){var b=Math.floor(T+.5)+1524,h=Math.floor((b-122.1)/365.25),s=Math.floor(365.25*h),t=Math.floor((b-s)/30.6001),i=t-Math.floor(t<14?1:13),n=h-Math.floor(i>2?4716:4715),r=b-s-Math.floor(30.6001*t);return n<=0&&n--,this.newDate(n,i,r)}}),M.calendars.julian=o},65616:function(ee,z,e){var M=e(38700),k=e(50896);function o(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function T(h,s){return h-s*Math.floor(h/s)}function b(h,s){return T(h-1,s)+1}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(h){return this._validate(h,this.minMonth,this.minDay,M.local.invalidYear),!1},formatYear:function(h){h=this._validate(h,this.minMonth,this.minDay,M.local.invalidYear).year();var s=Math.floor(h/400);return h%=400,h+=h<0?400:0,s+"."+Math.floor(h/20)+"."+h%20},forYear:function(h){if((h=h.split(".")).length<3)throw"Invalid Mayan year";for(var s=0,t=0;t<h.length;t++){var i=parseInt(h[t],10);if(Math.abs(i)>19||t>0&&i<0)throw"Invalid Mayan year";s=20*s+i}return s},monthsInYear:function(h){return this._validate(h,this.minMonth,this.minDay,M.local.invalidYear),18},weekOfYear:function(h,s,t){return this._validate(h,s,t,M.local.invalidDate),0},daysInYear:function(h){return this._validate(h,this.minMonth,this.minDay,M.local.invalidYear),360},daysInMonth:function(h,s){return this._validate(h,s,this.minDay,M.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(h,s,t){return this._validate(h,s,t,M.local.invalidDate).day()},weekDay:function(h,s,t){return this._validate(h,s,t,M.local.invalidDate),!0},extraInfo:function(h,s,t){var i=this._validate(h,s,t,M.local.invalidDate).toJD(),n=this._toHaab(i),r=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[r[0]-1],tzolkinDay:r[0],tzolkinTrecena:r[1]}},_toHaab:function(h){var s=T(8+(h-=this.jdEpoch)+340,365);return[Math.floor(s/20)+1,T(s,20)]},_toTzolkin:function(h){return[b(20+(h-=this.jdEpoch),20),b(h+4,13)]},toJD:function(h,s,t){var i=this._validate(h,s,t,M.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(h){h=Math.floor(h)+.5-this.jdEpoch;var s=Math.floor(h/360);h%=360,h+=h<0?360:0;var t=Math.floor(h/20),i=h%20;return this.newDate(s,t,i)}}),M.calendars.mayan=o},30632:function(ee,z,e){var M=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar;var T=M.instance("gregorian");k(o.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var h=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear);return T.leapYear(h.year()+(h.year()<1?1:0)+1469)},weekOfYear:function(b,h,s){var t=this.newDate(b,h,s);return t.add(1-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,h){var s=this._validate(b,h,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,h,s){return(this.dayOfWeek(b,h,s)||7)<6},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidMonth);(b=t.year())<0&&b++;for(var i=t.day(),n=1;n<t.month();n++)i+=this.daysPerMonth[n-1];return i+T.toJD(b+1468,3,13)},fromJD:function(b){b=Math.floor(b+.5);for(var h=Math.floor((b-(this.jdEpoch-1))/366);b>=this.toJD(h+1,1,1);)h++;for(var s=b-Math.floor(this.toJD(h,1,1)+.5)+1,t=1;s>this.daysInMonth(h,t);)s-=this.daysInMonth(h,t),t++;return this.newDate(h,t,s)}}),M.calendars.nanakshahi=o},73040:function(ee,z,e){var M=e(38700),k=e(50896);function o(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,b,h){var s=this.newDate(T,b,h);return s.add(-s.dayOfWeek(),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInYear:function(T){if(T=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[T]===void 0)return this.daysPerYear;for(var b=0,h=this.minMonth;h<=12;h++)b+=this.NEPALI_CALENDAR_DATA[T][h];return b},daysInMonth:function(T,b){return T.year&&(b=T.month(),T=T.year()),this._validate(T,b,this.minDay,M.local.invalidMonth),this.NEPALI_CALENDAR_DATA[T]===void 0?this.daysPerMonth[b-1]:this.NEPALI_CALENDAR_DATA[T][b]},weekDay:function(T,b,h){return this.dayOfWeek(T,b,h)!==6},toJD:function(T,b,h){var s=this._validate(T,b,h,M.local.invalidDate);T=s.year(),b=s.month(),h=s.day();var t=M.instance(),i=0,n=b,r=T;this._createMissingCalendarData(T);var a=T-(n>9||n===9&&h>=this.NEPALI_CALENDAR_DATA[r][0]?56:57);for(b!==9&&(i=h,n--);n!==9;)n<=0&&(n=12,r--),i+=this.NEPALI_CALENDAR_DATA[r][n],n--;return b===9?(i+=h-this.NEPALI_CALENDAR_DATA[r][0])<0&&(i+=t.daysInYear(a)):i+=this.NEPALI_CALENDAR_DATA[r][9]-this.NEPALI_CALENDAR_DATA[r][0],t.newDate(a,1,1).add(i,"d").toJD()},fromJD:function(T){var b=M.instance().fromJD(T),h=b.year(),s=b.dayOfYear(),t=h+56;this._createMissingCalendarData(t);for(var i=9,n=this.NEPALI_CALENDAR_DATA[t][0],r=this.NEPALI_CALENDAR_DATA[t][i]-n+1;s>r;)++i>12&&(i=1,t++),r+=this.NEPALI_CALENDAR_DATA[t][i];var a=this.NEPALI_CALENDAR_DATA[t][i]-(r-s);return this.newDate(t,i,a)},_createMissingCalendarData:function(T){var b=this.daysPerMonth.slice(0);b.unshift(17);for(var h=T-1;h<T+2;h++)this.NEPALI_CALENDAR_DATA[h]===void 0&&(this.NEPALI_CALENDAR_DATA[h]=b)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),M.calendars.nepali=o},1104:function(ee,z,e){var M=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}function T(b,h){return b-h*Math.floor(b/h)}o.prototype=new M.baseCalendar,k(o.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){var h=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return 682*((h.year()-(h.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(b,h,s){var t=this.newDate(b,h,s);return t.add(-(t.dayOfWeek()+1)%7,"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(b,h){var s=this._validate(b,h,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===12&&this.leapYear(s.year())?1:0)},weekDay:function(b,h,s){return this.dayOfWeek(b,h,s)!==5},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);b=t.year(),h=t.month(),s=t.day();var i=b-(b>=0?474:473),n=474+T(i,2820);return s+(h<=7?31*(h-1):30*(h-1)+6)+Math.floor((682*n-110)/2816)+365*(n-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(b){var h=(b=Math.floor(b)+.5)-this.toJD(475,1,1),s=Math.floor(h/1029983),t=T(h,1029983),i=2820;if(t!==1029982){var n=Math.floor(t/366),r=T(t,366);i=Math.floor((2134*n+2816*r+2815)/1028522)+n+1}var a=i+2820*s+474;a=a<=0?a-1:a;var l=b-this.toJD(a,1,1)+1,u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),d=b-this.toJD(a,u,1)+1;return this.newDate(a,u,d)}}),M.calendars.persian=o,M.calendars.jalali=o},51456:function(ee,z,e){var M=e(38700),k=e(50896),o=M.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(b){var h=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(h.year()),o.leapYear(b)},weekOfYear:function(b,h,s){var t=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(t.year()),o.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,h){var s=this._validate(b,h,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,h,s){return(this.dayOfWeek(b,h,s)||7)<6},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);return b=this._t2gYear(t.year()),o.toJD(b,t.month(),t.day())},fromJD:function(b){var h=o.fromJD(b),s=this._g2tYear(h.year());return this.newDate(s,h.month(),h.day())},_t2gYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)},_g2tYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)}}),M.calendars.taiwan=T},4592:function(ee,z,e){var M=e(38700),k=e(50896),o=M.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new M.baseCalendar,k(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var h=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(h.year()),o.leapYear(b)},weekOfYear:function(b,h,s){var t=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return b=this._t2gYear(t.year()),o.weekOfYear(b,t.month(),t.day())},daysInMonth:function(b,h){var s=this._validate(b,h,this.minDay,M.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(b,h,s){return(this.dayOfWeek(b,h,s)||7)<6},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate);return b=this._t2gYear(t.year()),o.toJD(b,t.month(),t.day())},fromJD:function(b){var h=o.fromJD(b),s=this._g2tYear(h.year());return this.newDate(s,h.month(),h.day())},_t2gYear:function(b){return b-this.yearsOffset-(b>=1&&b<=this.yearsOffset?1:0)},_g2tYear:function(b){return b+this.yearsOffset+(b>=-this.yearsOffset&&b<=-1?1:0)}}),M.calendars.thai=T},45348:function(ee,z,e){var M=e(38700),k=e(50896);function o(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}o.prototype=new M.baseCalendar,k(o.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(b){var h=this._validate(b,this.minMonth,this.minDay,M.local.invalidYear);return this.daysInYear(h.year())===355},weekOfYear:function(b,h,s){var t=this.newDate(b,h,s);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(b){for(var h=0,s=1;s<=12;s++)h+=this.daysInMonth(b,s);return h},daysInMonth:function(b,h){for(var s=this._validate(b,h,this.minDay,M.local.invalidMonth).toJD()-24e5+.5,t=0,i=0;i<T.length;i++){if(T[i]>s)return T[t]-T[t-1];t++}return 30},weekDay:function(b,h,s){return this.dayOfWeek(b,h,s)!==5},toJD:function(b,h,s){var t=this._validate(b,h,s,M.local.invalidDate),i=12*(t.year()-1)+t.month()-15292;return t.day()+T[i-1]-1+24e5-.5},fromJD:function(b){for(var h=b-24e5+.5,s=0,t=0;t<T.length&&!(T[t]>h);t++)s++;var i=s+15292,n=Math.floor((i-1)/12),r=n+1,a=i-12*n,l=h-T[s-1]+1;return this.newDate(r,a,l)},isValid:function(b,h,s){var t=M.baseCalendar.prototype.isValid.apply(this,arguments);return t&&(t=(b=b.year!=null?b.year:b)>=1276&&b<=1500),t},_validate:function(b,h,s,t){var i=M.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw t.replace(/\{0\}/,this.local.name);return i}}),M.calendars.ummalqura=o;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(ee,z,e){var M=e(50896);function k(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function o(t,i,n,r){if(this._calendar=t,this._year=i,this._month=n,this._day=r,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(t,i){return"000000".substring(0,i-(t=""+t).length)+t}function b(){this.shortYearCutoff="+10"}function h(t){this.local=this.regionalOptions[t]||this.regionalOptions[""]}M(k.prototype,{instance:function(t,i){t=(t||"gregorian").toLowerCase(),i=i||"";var n=this._localCals[t+"-"+i];if(!n&&this.calendars[t]&&(n=new this.calendars[t](i),this._localCals[t+"-"+i]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,t);return n},newDate:function(t,i,n,r,a){return(r=(t!=null&&t.year?t.calendar():typeof r=="string"?this.instance(r,a):r)||this.instance()).newDate(t,i,n)},substituteDigits:function(t){return function(i){return(i+"").replace(/[0-9]/g,function(n){return t[n]})}},substituteChineseDigits:function(t,i){return function(n){for(var r="",a=0;n>0;){var l=n%10;r=(l===0?"":t[l]+i[a])+r,a++,n=Math.floor(n/10)}return r.indexOf(t[1]+i[1])===0&&(r=r.substr(1)),r||t[0]}}}),M(o.prototype,{newDate:function(t,i,n){return this._calendar.newDate(t==null?this:t,i,n)},year:function(t){return arguments.length===0?this._year:this.set(t,"y")},month:function(t){return arguments.length===0?this._month:this.set(t,"m")},day:function(t){return arguments.length===0?this._day:this.set(t,"d")},date:function(t,i,n){if(!this._calendar.isValid(t,i,n))throw(s.local.invalidDate||s.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=t,this._month=i,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(t,i){return this._calendar.add(this,t,i)},set:function(t,i){return this._calendar.set(this,t,i)},compareTo:function(t){if(this._calendar.name!==t._calendar.name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,t._calendar.local.name);var i=this._year!==t._year?this._year-t._year:this._month!==t._month?this.monthOfYear()-t.monthOfYear():this._day-t._day;return i===0?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(t){return this._calendar.fromJD(t)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(t){return this._calendar.fromJSDate(t)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}}),M(b.prototype,{_validateLevel:0,newDate:function(t,i,n){return t==null?this.today():(t.year&&(this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),n=t.day(),i=t.month(),t=t.year()),new o(this,t,i,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+T(Math.abs(i.year()),4)},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear),12},monthOfYear:function(t,i){var n=this._validate(t,i,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return(n.month()+this.monthsInYear(n)-this.firstMonth)%this.monthsInYear(n)+this.minMonth},fromMonthOfYear:function(t,i){var n=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(t)+this.minMonth;return this._validate(t,n,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth),n},daysInYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(t,i,n){var r=this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return r.toJD()-this.newDate(r.year(),this.fromMonthOfYear(r.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(t,i,n){var r=this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(r))+2)%this.daysInWeek()},extraInfo:function(t,i,n){return this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),{}},add:function(t,i,n){return this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate),this._correctAdd(t,this._add(t,i,n),i,n)},_add:function(t,i,n){if(this._validateLevel++,n==="d"||n==="w"){var r=t.toJD()+i*(n==="w"?this.daysInWeek():1),a=t.calendar().fromJD(r);return this._validateLevel--,[a.year(),a.month(),a.day()]}try{var l=t.year()+(n==="y"?i:0),u=t.monthOfYear()+(n==="m"?i:0);a=t.day(),n==="y"?(t.month()!==this.fromMonthOfYear(l,u)&&(u=this.newDate(l,t.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(l)),a=Math.min(a,this.daysInMonth(l,this.fromMonthOfYear(l,u)))):n==="m"&&(function(c){for(;u<c.minMonth;)l--,u+=c.monthsInYear(l);for(var x=c.monthsInYear(l);u>x-1+c.minMonth;)l++,u-=x,x=c.monthsInYear(l)}(this),a=Math.min(a,this.daysInMonth(l,this.fromMonthOfYear(l,u))));var d=[l,this.fromMonthOfYear(l,u),a];return this._validateLevel--,d}catch(c){throw this._validateLevel--,c}},_correctAdd:function(t,i,n,r){if(!(this.hasYearZero||r!=="y"&&r!=="m"||i[0]!==0&&t.year()>0==i[0]>0)){var a={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],l=n<0?-1:1;i=this._add(t,n*a[0]+l*a[1],a[2])}return t.date(i[0],i[1],i[2])},set:function(t,i,n){this._validate(t,this.minMonth,this.minDay,s.local.invalidDate||s.regionalOptions[""].invalidDate);var r=n==="y"?i:t.year(),a=n==="m"?i:t.month(),l=n==="d"?i:t.day();return n!=="y"&&n!=="m"||(l=Math.min(l,this.daysInMonth(r,a))),t.date(r,a,l)},isValid:function(t,i,n){this._validateLevel++;var r=this.hasYearZero||t!==0;if(r){var a=this.newDate(t,i,this.minDay);r=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(a)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(a)}return this._validateLevel--,r},toJSDate:function(t,i,n){var r=this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);return s.instance().fromJD(this.toJD(r)).toJSDate()},fromJSDate:function(t){return this.fromJD(s.instance().fromJSDate(t).toJD())},_validate:function(t,i,n,r){if(t.year){if(this._validateLevel===0&&this.name!==t.calendar().name)throw(s.local.differentCalendars||s.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,t.calendar().local.name);return t}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(t,i,n))throw r.replace(/\{0\}/,this.local.name);var a=this.newDate(t,i,n);return this._validateLevel--,a}catch(l){throw this._validateLevel--,l}}}),h.prototype=new b,M(h.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,s.local.invalidYear||s.regionalOptions[""].invalidYear);return(t=i.year()+(i.year()<0?1:0))%4==0&&(t%100!=0||t%400==0)},weekOfYear:function(t,i,n){var r=this.newDate(t,i,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var n=this._validate(t,i,this.minDay,s.local.invalidMonth||s.regionalOptions[""].invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(t,i,n){return(this.dayOfWeek(t,i,n)||7)<6},toJD:function(t,i,n){var r=this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate);t=r.year(),i=r.month(),n=r.day(),t<0&&t++,i<3&&(i+=12,t--);var a=Math.floor(t/100),l=2-a+Math.floor(a/4);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(i+1))+n+l-1524.5},fromJD:function(t){var i=Math.floor(t+.5),n=Math.floor((i-186721625e-2)/36524.25),r=1524+(n=i+1+n-Math.floor(n/4)),a=Math.floor((r-122.1)/365.25),l=Math.floor(365.25*a),u=Math.floor((r-l)/30.6001),d=r-l-Math.floor(30.6001*u),c=u-(u>13.5?13:1),x=a-(c>2.5?4716:4715);return x<=0&&x--,this.newDate(x,c,d)},toJSDate:function(t,i,n){var r=this._validate(t,i,n,s.local.invalidDate||s.regionalOptions[""].invalidDate),a=new Date(r.year(),r.month()-1,r.day());return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a.setHours(a.getHours()>12?a.getHours()+2:0),a},fromJSDate:function(t){return this.newDate(t.getFullYear(),t.getMonth()+1,t.getDate())}});var s=ee.exports=new k;s.cdate=o,s.baseCalendar=b,s.calendars.gregorian=h},15168:function(ee,z,e){var M=e(50896),k=e(38700);M(k.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),k.local=k.regionalOptions[""],M(k.cdate.prototype,{formatDate:function(o,T){return typeof o!="string"&&(T=o,o=""),this._calendar.formatDate(o||"",this,T)}}),M(k.baseCalendar.prototype,{UNIX_EPOCH:k.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:k.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(o,T,b){if(typeof o!="string"&&(b=T,T=o,o=""),!T)return"";if(T.calendar()!==this)throw k.local.invalidFormat||k.regionalOptions[""].invalidFormat;o=o||this.local.dateFormat;for(var h,s,t,i=(b=b||{}).dayNamesShort||this.local.dayNamesShort,n=b.dayNames||this.local.dayNames,r=b.monthNumbers||this.local.monthNumbers,a=b.monthNamesShort||this.local.monthNamesShort,l=b.monthNames||this.local.monthNames,u=(b.calculateWeek||this.local.calculateWeek,function(f,S){for(var w=1;_+w<o.length&&o.charAt(_+w)===f;)w++;return _+=w-1,Math.floor(w/(S||1))>1}),d=function(f,S,w,E){var P=""+S;if(u(f,E))for(;P.length<w;)P="0"+P;return P},c=this,x=function(f){return typeof r=="function"?r.call(c,f,u("m")):v(d("m",f.month(),2))},g=function(f,S){return S?typeof l=="function"?l.call(c,f):l[f.month()-c.minMonth]:typeof a=="function"?a.call(c,f):a[f.month()-c.minMonth]},p=this.local.digits,v=function(f){return b.localNumbers&&p?p(f):f},m="",y=!1,_=0;_<o.length;_++)if(y)o.charAt(_)!=="'"||u("'")?m+=o.charAt(_):y=!1;else switch(o.charAt(_)){case"d":m+=v(d("d",T.day(),2));break;case"D":m+=(h=T.dayOfWeek(),s=i,t=n,u("D")?t[h]:s[h]);break;case"o":m+=d("o",T.dayOfYear(),3);break;case"w":m+=d("w",T.weekOfYear(),2);break;case"m":m+=x(T);break;case"M":m+=g(T,u("M"));break;case"y":m+=u("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":u("Y",2),m+=T.formatYear();break;case"J":m+=T.toJD();break;case"@":m+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":m+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?m+="'":y=!0;break;default:m+=o.charAt(_)}return m},parseDate:function(o,T,b){if(T==null)throw k.local.invalidArguments||k.regionalOptions[""].invalidArguments;if((T=typeof T=="object"?T.toString():T+"")==="")return null;o=o||this.local.dateFormat;var h=(b=b||{}).shortYearCutoff||this.shortYearCutoff;h=typeof h!="string"?h:this.today().year()%100+parseInt(h,10);for(var s=b.dayNamesShort||this.local.dayNamesShort,t=b.dayNames||this.local.dayNames,i=b.parseMonth||this.local.parseMonth,n=b.monthNumbers||this.local.monthNumbers,r=b.monthNamesShort||this.local.monthNamesShort,a=b.monthNames||this.local.monthNames,l=-1,u=-1,d=-1,c=-1,x=-1,g=!1,p=!1,v=function(R,j){for(var D=1;P+D<o.length&&o.charAt(P+D)===R;)D++;return P+=D-1,Math.floor(D/(j||1))>1},m=function(R,j){var D=v(R,j),N=[2,3,D?4:2,D?4:2,10,11,20]["oyYJ@!".indexOf(R)+1],W=new RegExp("^-?\\d{1,"+N+"}"),F=T.substring(E).match(W);if(!F)throw(k.local.missingNumberAt||k.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=F[0].length,parseInt(F[0],10)},y=this,_=function(){if(typeof n=="function"){v("m");var R=n.call(y,T.substring(E));return E+=R.length,R}return m("m")},f=function(R,j,D,N){for(var W=v(R,N)?D:j,F=0;F<W.length;F++)if(T.substr(E,W[F].length).toLowerCase()===W[F].toLowerCase())return E+=W[F].length,F+y.minMonth;throw(k.local.unknownNameAt||k.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if(typeof a=="function"){var R=v("M")?a.call(y,T.substring(E)):r.call(y,T.substring(E));return E+=R.length,R}return f("M",r,a)},w=function(){if(T.charAt(E)!==o.charAt(P))throw(k.local.unexpectedLiteralAt||k.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,P=0;P<o.length;P++)if(p)o.charAt(P)!=="'"||v("'")?w():p=!1;else switch(o.charAt(P)){case"d":c=m("d");break;case"D":f("D",s,t);break;case"o":x=m("o");break;case"w":m("w");break;case"m":d=_();break;case"M":d=S();break;case"y":var C=P;g=!v("y",2),P=C,u=m("y",2);break;case"Y":u=m("Y",2);break;case"J":l=m("J")+.5,T.charAt(E)==="."&&(E++,m("J"));break;case"@":l=m("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=m("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=T.length;break;case"'":v("'")?w():p=!0;break;default:w()}if(E<T.length)throw k.local.unexpectedText||k.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&g&&(u+=h===-1?1900:this.today().year()-this.today().year()%100-(u<=h?0:100)),typeof d=="string"&&(d=i.call(this,u,d)),x>-1){d=1,c=x;for(var O=this.daysInMonth(u,d);c>O;O=this.daysInMonth(u,d))d++,c-=O}return l>-1?this.fromJD(l):this.newDate(u,d,c)},determineDate:function(o,T,b,h,s){b&&typeof b!="object"&&(s=h,h=b,b=null),typeof h!="string"&&(s=h,h="");var t=this;return T=T?T.newDate():null,o==null?T:typeof o=="string"?function(i){try{return t.parseDate(h,i,s)}catch(l){}for(var n=((i=i.toLowerCase()).match(/^c/)&&b?b.newDate():null)||t.today(),r=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,a=r.exec(i);a;)n.add(parseInt(a[1],10),a[2]||"d"),a=r.exec(i);return n}(o):typeof o=="number"?isNaN(o)||o===1/0||o===-1/0?T:t.today().add(o,"d"):t.newDate(o)}})},21576:function(){},19768:function(){},63436:function(ee,z,e){"use strict";var M=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],k=typeof globalThis=="undefined"?e.g:globalThis;ee.exports=function(){for(var o=[],T=0;T<M.length;T++)typeof k[M[T]]=="function"&&(o[o.length]=M[T]);return o}},67756:function(ee,z,e){"use strict";function M(ge,de,ve){ge.prototype=de.prototype=ve,ve.constructor=ge}function k(ge,de){var ve=Object.create(ge.prototype);for(var pe in de)ve[pe]=de[pe];return ve}function o(){}e.d(z,{qy:function(){return be},Gz:function(){return X}});var T=.7,b=1/T,h="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,n=new RegExp("^rgb\\(".concat(h,",").concat(h,",").concat(h,"\\)$")),r=new RegExp("^rgb\\(".concat(t,",").concat(t,",").concat(t,"\\)$")),a=new RegExp("^rgba\\(".concat(h,",").concat(h,",").concat(h,",").concat(s,"\\)$")),l=new RegExp("^rgba\\(".concat(t,",").concat(t,",").concat(t,",").concat(s,"\\)$")),u=new RegExp("^hsl\\(".concat(s,",").concat(t,",").concat(t,"\\)$")),d=new RegExp("^hsla\\(".concat(s,",").concat(t,",").concat(t,",").concat(s,"\\)$")),c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}function p(ge){var de,ve;return ge=(ge+"").trim().toLowerCase(),(de=i.exec(ge))?(ve=de[1].length,de=parseInt(de[1],16),ve===6?v(de):ve===3?new _(de>>8&15|de>>4&240,de>>4&15|240&de,(15&de)<<4|15&de,1):ve===8?m(de>>24&255,de>>16&255,de>>8&255,(255&de)/255):ve===4?m(de>>12&15|de>>8&240,de>>8&15|de>>4&240,de>>4&15|240&de,((15&de)<<4|15&de)/255):null):(de=n.exec(ge))?new _(de[1],de[2],de[3],1):(de=r.exec(ge))?new _(255*de[1]/100,255*de[2]/100,255*de[3]/100,1):(de=a.exec(ge))?m(de[1],de[2],de[3],de[4]):(de=l.exec(ge))?m(255*de[1]/100,255*de[2]/100,255*de[3]/100,de[4]):(de=u.exec(ge))?C(de[1],de[2]/100,de[3]/100,1):(de=d.exec(ge))?C(de[1],de[2]/100,de[3]/100,de[4]):c.hasOwnProperty(ge)?v(c[ge]):ge==="transparent"?new _(NaN,NaN,NaN,0):null}function v(ge){return new _(ge>>16&255,ge>>8&255,255&ge,1)}function m(ge,de,ve,pe){return pe<=0&&(ge=de=ve=NaN),new _(ge,de,ve,pe)}function y(ge,de,ve,pe){return arguments.length===1?((_e=ge)instanceof o||(_e=p(_e)),_e?new _((_e=_e.rgb()).r,_e.g,_e.b,_e.opacity):new _):new _(ge,de,ve,pe==null?1:pe);var _e}function _(ge,de,ve,pe){this.r=+ge,this.g=+de,this.b=+ve,this.opacity=+pe}function f(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b))}function S(){var ge=w(this.opacity);return"".concat(ge===1?"rgb(":"rgba(").concat(E(this.r),", ").concat(E(this.g),", ").concat(E(this.b)).concat(ge===1?")":", ".concat(ge,")"))}function w(ge){return isNaN(ge)?1:Math.max(0,Math.min(1,ge))}function E(ge){return Math.max(0,Math.min(255,Math.round(ge)||0))}function P(ge){return((ge=E(ge))<16?"0":"")+ge.toString(16)}function C(ge,de,ve,pe){return pe<=0?ge=de=ve=NaN:ve<=0||ve>=1?ge=de=NaN:de<=0&&(ge=NaN),new R(ge,de,ve,pe)}function O(ge){if(ge instanceof R)return new R(ge.h,ge.s,ge.l,ge.opacity);if(ge instanceof o||(ge=p(ge)),!ge)return new R;if(ge instanceof R)return ge;var de=(ge=ge.rgb()).r/255,ve=ge.g/255,pe=ge.b/255,_e=Math.min(de,ve,pe),Te=Math.max(de,ve,pe),le=NaN,ae=Te-_e,he=(Te+_e)/2;return ae?(le=de===Te?(ve-pe)/ae+6*(ve<pe):ve===Te?(pe-de)/ae+2:(de-ve)/ae+4,ae/=he<.5?Te+_e:2-Te-_e,le*=60):ae=he>0&&he<1?0:le,new R(le,ae,he,ge.opacity)}function R(ge,de,ve,pe){this.h=+ge,this.s=+de,this.l=+ve,this.opacity=+pe}function j(ge){return(ge=(ge||0)%360)<0?ge+360:ge}function D(ge){return Math.max(0,Math.min(1,ge||0))}function N(ge,de,ve){return 255*(ge<60?de+(ve-de)*ge/60:ge<180?ve:ge<240?de+(ve-de)*(240-ge)/60:de)}function W(ge,de,ve,pe,_e){var Te=ge*ge,le=Te*ge;return((1-3*ge+3*Te-le)*de+(4-6*Te+3*le)*ve+(1+3*ge+3*Te-3*le)*pe+le*_e)/6}M(o,p,{copy:function(ge){return Object.assign(new this.constructor,this,ge)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return O(this).formatHsl()},formatRgb:g,toString:g}),M(_,y,k(o,{brighter:function(ge){return ge=ge==null?b:Math.pow(b,ge),new _(this.r*ge,this.g*ge,this.b*ge,this.opacity)},darker:function(ge){return ge=ge==null?T:Math.pow(T,ge),new _(this.r*ge,this.g*ge,this.b*ge,this.opacity)},rgb:function(){return this},clamp:function(){return new _(E(this.r),E(this.g),E(this.b),w(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:f,formatHex:f,formatHex8:function(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b)).concat(P(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),M(R,function(ge,de,ve,pe){return arguments.length===1?O(ge):new R(ge,de,ve,pe==null?1:pe)},k(o,{brighter:function(ge){return ge=ge==null?b:Math.pow(b,ge),new R(this.h,this.s,this.l*ge,this.opacity)},darker:function(ge){return ge=ge==null?T:Math.pow(T,ge),new R(this.h,this.s,this.l*ge,this.opacity)},rgb:function(){var ge=this.h%360+360*(this.h<0),de=isNaN(ge)||isNaN(this.s)?0:this.s,ve=this.l,pe=ve+(ve<.5?ve:1-ve)*de,_e=2*ve-pe;return new _(N(ge>=240?ge-240:ge+120,_e,pe),N(ge,_e,pe),N(ge<120?ge+240:ge-120,_e,pe),this.opacity)},clamp:function(){return new R(j(this.h),D(this.s),D(this.l),w(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ge=w(this.opacity);return"".concat(ge===1?"hsl(":"hsla(").concat(j(this.h),", ").concat(100*D(this.s),"%, ").concat(100*D(this.l),"%").concat(ge===1?")":", ".concat(ge,")"))}}));var F=function(ge){return function(){return ge}};function U(ge,de){var ve=de-ge;return ve?function(pe,_e){return function(Te){return pe+Te*_e}}(ge,ve):F(isNaN(ge)?de:ge)}var V=function ge(de){var ve=function(_e){return(_e=+_e)==1?U:function(Te,le){return le-Te?function(ae,he,Se){return ae=Math.pow(ae,Se),he=Math.pow(he,Se)-ae,Se=1/Se,function(ke){return Math.pow(ae+ke*he,Se)}}(Te,le,_e):F(isNaN(Te)?le:Te)}}(de);function pe(_e,Te){var le=ve((_e=y(_e)).r,(Te=y(Te)).r),ae=ve(_e.g,Te.g),he=ve(_e.b,Te.b),Se=U(_e.opacity,Te.opacity);return function(ke){return _e.r=le(ke),_e.g=ae(ke),_e.b=he(ke),_e.opacity=Se(ke),_e+""}}return pe.gamma=ge,pe}(1);function te(ge){return function(de){var ve,pe,_e=de.length,Te=new Array(_e),le=new Array(_e),ae=new Array(_e);for(ve=0;ve<_e;++ve)pe=y(de[ve]),Te[ve]=pe.r||0,le[ve]=pe.g||0,ae[ve]=pe.b||0;return Te=ge(Te),le=ge(le),ae=ge(ae),pe.opacity=1,function(he){return pe.r=Te(he),pe.g=le(he),pe.b=ae(he),pe+""}}}function J(ge,de){var ve,pe=de?de.length:0,_e=ge?Math.min(pe,ge.length):0,Te=new Array(_e),le=new Array(pe);for(ve=0;ve<_e;++ve)Te[ve]=be(ge[ve],de[ve]);for(;ve<pe;++ve)le[ve]=de[ve];return function(ae){for(ve=0;ve<_e;++ve)le[ve]=Te[ve](ae);return le}}function K(ge,de){var ve=new Date;return ge=+ge,de=+de,function(pe){return ve.setTime(ge*(1-pe)+de*pe),ve}}function X(ge,de){return ge=+ge,de=+de,function(ve){return ge*(1-ve)+de*ve}}function Z(ge){return Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},Z(ge)}function $(ge,de){var ve,pe={},_e={};for(ve in ge!==null&&Z(ge)==="object"||(ge={}),de!==null&&Z(de)==="object"||(de={}),de)ve in ge?pe[ve]=be(ge[ve],de[ve]):_e[ve]=de[ve];return function(Te){for(ve in pe)_e[ve]=pe[ve](Te);return _e}}te(function(ge){var de=ge.length-1;return function(ve){var pe=ve<=0?ve=0:ve>=1?(ve=1,de-1):Math.floor(ve*de),_e=ge[pe],Te=ge[pe+1],le=pe>0?ge[pe-1]:2*_e-Te,ae=pe<de-1?ge[pe+2]:2*Te-_e;return W((ve-pe/de)*de,le,_e,Te,ae)}}),te(function(ge){var de=ge.length;return function(ve){var pe=Math.floor(((ve%=1)<0?++ve:ve)*de),_e=ge[(pe+de-1)%de],Te=ge[pe%de],le=ge[(pe+1)%de],ae=ge[(pe+2)%de];return W((ve-pe/de)*de,_e,Te,le,ae)}});var re=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oe=new RegExp(re.source,"g");function ie(ge,de){var ve,pe,_e,Te=re.lastIndex=oe.lastIndex=0,le=-1,ae=[],he=[];for(ge+="",de+="";(ve=re.exec(ge))&&(pe=oe.exec(de));)(_e=pe.index)>Te&&(_e=de.slice(Te,_e),ae[le]?ae[le]+=_e:ae[++le]=_e),(ve=ve[0])===(pe=pe[0])?ae[le]?ae[le]+=pe:ae[++le]=pe:(ae[++le]=null,he.push({i:le,x:X(ve,pe)})),Te=oe.lastIndex;return Te<de.length&&(_e=de.slice(Te),ae[le]?ae[le]+=_e:ae[++le]=_e),ae.length<2?he[0]?function(Se){return function(ke){return Se(ke)+""}}(he[0].x):function(Se){return function(){return Se}}(de):(de=he.length,function(Se){for(var ke,Me=0;Me<de;++Me)ae[(ke=he[Me]).i]=ke.x(Se);return ae.join("")})}function ue(ge,de){de||(de=[]);var ve,pe=ge?Math.min(de.length,ge.length):0,_e=de.slice();return function(Te){for(ve=0;ve<pe;++ve)_e[ve]=ge[ve]*(1-Te)+de[ve]*Te;return _e}}function me(ge){return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},me(ge)}function be(ge,de){var ve,pe,_e=me(de);return de==null||_e==="boolean"?F(de):(_e==="number"?X:_e==="string"?(ve=p(de))?(de=ve,V):ie:de instanceof p?V:de instanceof Date?K:(pe=de,!ArrayBuffer.isView(pe)||pe instanceof DataView?Array.isArray(de)?J:typeof de.valueOf!="function"&&typeof de.toString!="function"||isNaN(de)?$:X:ue))(ge,de)}},30584:function(ee){"use strict";ee.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(ee){"use strict";ee.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(ee){"use strict";ee.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(ee){"use strict";ee.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(ee){"use strict";ee.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(ee){"use strict";ee.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},na={};function Pr(ee){var z=na[ee];if(z!==void 0)return z.exports;var e=na[ee]={exports:{}};return pa[ee].call(e.exports,e,e.exports,Pr),e.exports}return Pr.n=function(ee){var z=ee&&ee.__esModule?function(){return ee.default}:function(){return ee};return Pr.d(z,{a:z}),z},Pr.d=function(ee,z){for(var e in z)Pr.o(z,e)&&!Pr.o(ee,e)&&Object.defineProperty(ee,e,{enumerable:!0,get:z[e]})},Pr.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(ee){if(typeof window=="object")return window}}(),Pr.o=function(ee,z){return Object.prototype.hasOwnProperty.call(ee,z)},Pr.r=function(ee){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(ee,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ee,"__esModule",{value:!0})},Pr(13792)}()})},390:(Cr,pa,na)=>{"use strict";na.d(pa,{default:()=>o});var Pr=na(234),ee=na(479),z=na.n(ee);function e(T){let b;return{c(){b=(0,Pr.bGB)("div"),(0,Pr.Ljt)(b,"id",T[0]),(0,Pr.czc)(b,"width","100%"),(0,Pr.czc)(b,"height","100%")},m(h,s){(0,Pr.$Tr)(h,b,s)},p:Pr.ZTd,i:Pr.ZTd,o:Pr.ZTd,d(h){h&&(0,Pr.ogt)(b)}}}function M(T,b,h){let{x:s=[1,2,3]}=b,{y:t=[1,2,3]}=b,{shapes:i=[]}=b,{xrange:n=[1.2*Math.min(...s),1.2*Math.max(...s)]}=b,{yrange:r=[1.2*Math.min(...t),1.2*Math.max(...t)]}=b;n[0]>0&&(n[0]=0),n[1]<0&&(n[1]=0),r[0]>0&&(r[0]=0),r[1]<0&&(r[1]=0);let{representativeX:a=[]}=b,{representativeY:l=[]}=b,{pointColors:u=[]}=b,{arrowCoords:d=[]}=b,{title:c=""}=b,{xLabel:x=""}=b,{yLabel:g=""}=b,p=0,{focusIndex:v=0}=b,m=d.map(R=>(R.label||(R.label=""),R)),y=m.length>0?m.map(R=>({x:R.x1,y:R.y1,ax:R.x0,ay:R.y0,text:R.label,showarrow:!0,arrowsize:1,arrowwidth:2,arrowcolor:"grey",xref:"x",yref:"y",axref:"x",ayref:"y"})):[];console.log(y);let _=[],{colorscale:f=[[0,"rgb(103, 34, 75)"],[.19,"rgb(89, 34, 118)"],[.37,"rgb(34, 46, 138)"],[.54,"rgb(33, 143, 159)"],[.7,"rgb(32, 182, 92)"],[.85,"rgb(93, 205, 29)"],[1,"rgb(229, 205, 25)"]]}=b,S={};u.length>0&&(S={color:u,colorscale:f,showscale:!0,reversescale:!0,colorbar:{thickness:10,ticklen:4,tickfont:{size:10}},cmin:0,cmax:1}),_.push({x:s,y:t,type:"scatter",mode:"markers",marker:S}),a.length>0&&_.push({x:a,y:l,colorscale:"Viridis",type:"histogram2dcontour",hoverinfo:"none",showscale:!1,contours:{showlabels:!1,start:0,end:1,size:.1},colorbar:{thickness:10,ticklen:4,tickfont:{size:10}}});let w={title:c,xaxis:{title:x,scaleanchor:"y",scaleratio:1,range:n},yaxis:{title:g,scaleanchor:"x",scaleratio:1,range:r},annotations:y,shapes:i},E=`plotly-chart-${Math.random().toString(36)}`;(0,Pr.H3E)(()=>{z().newPlot(E,_,w=w).then(()=>{const R=document.getElementById(E);R.on("plotly_click",j=>{P(j)}),R.on("plotly_hover",j=>{C(j)}),R.on("plotly_unhover",j=>{O(j)})})});function P(R){console.log("click");let j=R.points;j.length>0&&(p=j[0].pointIndex,h(3,v=j[0].pointIndex)),console.log(v)}function C(R){console.log("hover");let j=R.points;j.length>0&&h(3,v=j[0].pointIndex),console.log(v)}function O(R){console.log("unhover"),h(3,v=p),console.log(v)}return T.$$set=R=>{"x"in R&&h(4,s=R.x),"y"in R&&h(5,t=R.y),"shapes"in R&&h(6,i=R.shapes),"xrange"in R&&h(1,n=R.xrange),"yrange"in R&&h(2,r=R.yrange),"representativeX"in R&&h(7,a=R.representativeX),"representativeY"in R&&h(8,l=R.representativeY),"pointColors"in R&&h(9,u=R.pointColors),"arrowCoords"in R&&h(10,d=R.arrowCoords),"title"in R&&h(11,c=R.title),"xLabel"in R&&h(12,x=R.xLabel),"yLabel"in R&&h(13,g=R.yLabel),"focusIndex"in R&&h(3,v=R.focusIndex),"colorscale"in R&&h(14,f=R.colorscale)},[E,n,r,v,s,t,i,a,l,u,d,c,x,g,f]}class k extends Pr.f_C{constructor(b){super(),(0,Pr.S1n)(this,b,M,e,Pr.N8,{x:4,y:5,shapes:6,xrange:1,yrange:2,representativeX:7,representativeY:8,pointColors:9,arrowCoords:10,title:11,xLabel:12,yLabel:13,focusIndex:3,colorscale:14})}}const o=k},539:(Cr,pa,na)=>{"use strict";na.d(pa,{default:()=>s});var Pr=na(234);function ee(t){(0,Pr.qOq)(t,"svelte-1r5vl9h",".title.svelte-1r5vl9h.svelte-1r5vl9h{padding:0rem;margin:0.2rem}.token.svelte-1r5vl9h.svelte-1r5vl9h{border:0px solid currentColor;padding:0px;position:relative;cursor:default;padding:0rem;margin:0rem;display:inline-block;vertical-align:top;white-space:pre-wrap;padding-left:0rem;padding-right:.12rem}.token.svelte-1r5vl9h.svelte-1r5vl9h:first-child{border-left:0 none}.token.svelte-1r5vl9h.svelte-1r5vl9h:hover{background-color:rgba(135,206,250,1)}.noLeadingSpaceTok.svelte-1r5vl9h.svelte-1r5vl9h{border-left:1px solid currentColor;border-right:1px solid currentColor;padding-left:.06rem}.noSpaceToRight.svelte-1r5vl9h.svelte-1r5vl9h{padding-right:.06rem}.noLeadingSpaceTok.svelte-1r5vl9h+.noLeadingSpaceTok.svelte-1r5vl9h{border-left:0 none}.noLeadingSpaceTok.svelte-1r5vl9h+.token .highlighted.svelte-1r5vl9h{border-right:0 none}.token.svelte-1r5vl9h .hovertext.svelte-1r5vl9h{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%, -100%);z-index:1;background:#c1c1c1;color:black;margin-top:-.5rem;padding:.2rem;white-space:nowrap;pointer-events:none}.token.svelte-1r5vl9h:hover .hovertext.svelte-1r5vl9h{visibility:visible;display:block}.dark.svelte-1r5vl9h.svelte-1r5vl9h{background-color:black;color:white}.light.svelte-1r5vl9h.svelte-1r5vl9h{background-color:white;color:black}.highlighted.highlighted.svelte-1r5vl9h.svelte-1r5vl9h{border:2px solid currentColor}")}function z(t,i,n){const r=t.slice();return r[7]=i[n][0],r[8]=i[n][1],r[10]=n,r}function e(t){let i,n=t[7]+"",r,a,l=t[5](t[8])+"",u,d,c;return{c(){i=(0,Pr.bGB)("span"),r=(0,Pr.fLW)(n),a=(0,Pr.bGB)("span"),u=(0,Pr.fLW)(l),(0,Pr.Ljt)(a,"class","hovertext svelte-1r5vl9h"),(0,Pr.Ljt)(i,"class",d=(0,Pr.H1I)(["token",t[7][0]!=="\u22C5"?" noLeadingSpaceTok":"",t[10]==t[3]?" highlighted":"",o(t[1],t[10])?"noSpaceToRight":""].filter(Boolean).join(" "))+" svelte-1r5vl9h"),(0,Pr.Ljt)(i,"style",c=T(t[8]))},m(x,g){(0,Pr.$Tr)(x,i,g),(0,Pr.R3I)(i,r),(0,Pr.R3I)(i,a),(0,Pr.R3I)(a,u)},p(x,g){g&16&&n!==(n=x[7]+"")&&(0,Pr.rTO)(r,n),g&16&&l!==(l=x[5](x[8])+"")&&(0,Pr.rTO)(u,l),g&26&&d!==(d=(0,Pr.H1I)(["token",x[7][0]!=="\u22C5"?" noLeadingSpaceTok":"",x[10]==x[3]?" highlighted":"",o(x[1],x[10])?"noSpaceToRight":""].filter(Boolean).join(" "))+" svelte-1r5vl9h")&&(0,Pr.Ljt)(i,"class",d),g&16&&c!==(c=T(x[8]))&&(0,Pr.Ljt)(i,"style",c)},d(x){x&&(0,Pr.ogt)(i)}}}function M(t){let i,n,r,a,l,u,d=t[4],c=[];for(let x=0;x<d.length;x+=1)c[x]=e(z(t,d,x));return{c(){i=(0,Pr.bGB)("main"),n=(0,Pr.bGB)("h3"),r=(0,Pr.fLW)(t[0]),a=(0,Pr.DhX)(),l=(0,Pr.bGB)("div");for(let x=0;x<c.length;x+=1)c[x].c();(0,Pr.Ljt)(n,"class","title svelte-1r5vl9h"),(0,Pr.Ljt)(l,"class",u="doc "+t[2]+" svelte-1r5vl9h")},m(x,g){(0,Pr.$Tr)(x,i,g),(0,Pr.R3I)(i,n),(0,Pr.R3I)(n,r),(0,Pr.R3I)(i,a),(0,Pr.R3I)(i,l);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(l,null)},p(x,[g]){if(g&1&&(0,Pr.rTO)(r,x[0]),g&58){d=x[4];let p;for(p=0;p<d.length;p+=1){const v=z(x,d,p);c[p]?c[p].p(v,g):(c[p]=e(v),c[p].c(),c[p].m(l,null))}for(;p<c.length;p+=1)c[p].d(1);c.length=d.length}g&4&&u!==(u="doc "+x[2]+" svelte-1r5vl9h")&&(0,Pr.Ljt)(l,"class",u)},i:Pr.ZTd,o:Pr.ZTd,d(x){x&&(0,Pr.ogt)(i),(0,Pr.RMB)(c,x)}}}function k(...t){const i=Math.min(...t.map(n=>n.length));return Array.from({length:i},(n,r)=>t.map(a=>a[r]))}function o(t,i){return i<t.length-1&&t[i+1][0]!=="\u22C5"}function T(t){return t>=0?`background-color:rgba(13,220,193,${t});`:`background-color:rgba(220,13,48,${-t});`}function b(t,i,n){let{title:r=""}=i,{tokens:a}=i,{weights:l}=i,{theme:u=""}=i,{highlight_index:d=-1}=i;u!=="dark"&&u!=="light"&&u!==""&&console.error("theme must be dark, light, or '' (empty string)");const c=g=>!g&&g!==0?"":g.toFixed(2);let x=k(a,l);return t.$$set=g=>{"title"in g&&n(0,r=g.title),"tokens"in g&&n(1,a=g.tokens),"weights"in g&&n(6,l=g.weights),"theme"in g&&n(2,u=g.theme),"highlight_index"in g&&n(3,d=g.highlight_index)},t.$$.update=()=>{if(t.$$.dirty&66){e:n(4,x=k(a,l))}},[r,a,u,d,x,c,l]}class h extends Pr.f_C{constructor(i){super(),(0,Pr.S1n)(this,i,b,M,Pr.N8,{title:0,tokens:1,weights:6,theme:2,highlight_index:3},ee)}}const s=h},234:(Cr,pa,na)=>{"use strict";na.d(pa,{$Tr:()=>ve,DhX:()=>Me,H1I:()=>S,H3E:()=>Gn,Ljt:()=>Ue,N8:()=>h,R3I:()=>ie,RMB:()=>Te,S1n:()=>cs,Ui:()=>Gr,VnY:()=>_n,YCL:()=>sl,ZTd:()=>Pr,akz:()=>ol,bGB:()=>le,cSb:()=>Ee,czc:()=>xt,dvw:()=>_r,etI:()=>hi,fLW:()=>ke,f_C:()=>Ga,gbL:()=>Lr,hjT:()=>Vn,ogt:()=>_e,qOq:()=>ue,rTO:()=>ct,vpE:()=>To,yef:()=>Ha});function Pr(){}const ee=ht=>ht;function z(ht,kt){for(const $t in kt)ht[$t]=kt[$t];return ht}function e(ht){return!!ht&&(typeof ht=="object"||typeof ht=="function")&&typeof ht.then=="function"}function M(ht,kt,$t,bn,qn){ht.__svelte_meta={loc:{file:kt,line:$t,column:bn,char:qn}}}function k(ht){return ht()}function o(){return Object.create(null)}function T(ht){ht.forEach(k)}function b(ht){return typeof ht=="function"}function h(ht,kt){return ht!=ht?kt==kt:ht!==kt||ht&&typeof ht=="object"||typeof ht=="function"}let s;function t(ht,kt){return s||(s=document.createElement("a")),s.href=kt,ht===s.href}function i(ht,kt){return ht!=ht?kt==kt:ht!==kt}function n(ht){return Object.keys(ht).length===0}function r(ht,kt){if(ht!=null&&typeof ht.subscribe!="function")throw new Error(`'${kt}' is not a store with a 'subscribe' method`)}function a(ht,...kt){if(ht==null)return Pr;const $t=ht.subscribe(...kt);return $t.unsubscribe?()=>$t.unsubscribe():$t}function l(ht){let kt;return a(ht,$t=>kt=$t)(),kt}function u(ht,kt,$t){ht.$$.on_destroy.push(a(kt,$t))}function d(ht,kt,$t,bn){if(ht){const qn=c(ht,kt,$t,bn);return ht[0](qn)}}function c(ht,kt,$t,bn){return ht[1]&&bn?z($t.ctx.slice(),ht[1](bn(kt))):$t.ctx}function x(ht,kt,$t,bn){if(ht[2]&&bn){const qn=ht[2](bn($t));if(kt.dirty===void 0)return qn;if(typeof qn=="object"){const hr=[],xr=Math.max(kt.dirty.length,qn.length);for(let wr=0;wr<xr;wr+=1)hr[wr]=kt.dirty[wr]|qn[wr];return hr}return kt.dirty|qn}return kt.dirty}function g(ht,kt,$t,bn,qn,hr){if(qn){const xr=c(kt,$t,bn,hr);ht.p(xr,qn)}}function p(ht,kt,$t,bn,qn,hr,xr){const wr=x(kt,bn,qn,hr);g(ht,kt,$t,bn,wr,xr)}function v(ht){if(ht.ctx.length>32){const kt=[],$t=ht.ctx.length/32;for(let bn=0;bn<$t;bn++)kt[bn]=-1;return kt}return-1}function m(ht){const kt={};for(const $t in ht)$t[0]!=="$"&&(kt[$t]=ht[$t]);return kt}function y(ht,kt){const $t={};kt=new Set(kt);for(const bn in ht)!kt.has(bn)&&bn[0]!=="$"&&($t[bn]=ht[bn]);return $t}function _(ht){const kt={};for(const $t in ht)kt[$t]=!0;return kt}function f(ht){let kt=!1;return function(...$t){kt||(kt=!0,ht.call(this,...$t))}}function S(ht){return ht==null?"":ht}function w(ht,kt,$t){return ht.set($t),kt}const E=(ht,kt)=>Object.prototype.hasOwnProperty.call(ht,kt);function P(ht){return ht&&b(ht.destroy)?ht.destroy:Pr}function C(ht){const kt=typeof ht=="string"&&ht.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return kt?[parseFloat(kt[1]),kt[2]||"px"]:[ht,"px"]}const O=null,R=typeof window!="undefined";let j=null,D=null;function N(ht){j=ht}function W(ht){D=ht}const F=new Set;function U(ht){F.forEach(kt=>{kt.c(ht)||(F.delete(kt),kt.f())}),F.size!==0&&D(U)}function V(){F.clear()}function te(ht){let kt;return F.size===0&&D(U),{promise:new Promise($t=>{F.add(kt={c:ht,f:$t})}),abort(){F.delete(kt)}}}const J=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;class K{constructor(kt){this.options=kt,this._listeners="WeakMap"in J?new WeakMap:void 0}observe(kt,$t){return this._listeners.set(kt,$t),this._getObserver().observe(kt,this.options),()=>{this._listeners.delete(kt),this._observer.unobserve(kt)}}_getObserver(){var kt;return(kt=this._observer)!==null&&kt!==void 0?kt:this._observer=new ResizeObserver($t=>{var bn;for(const qn of $t)K.entries.set(qn.target,qn),(bn=this._listeners.get(qn.target))===null||bn===void 0||bn(qn)})}}K.entries="WeakMap"in J?new WeakMap:void 0;let X=!1;function Z(){X=!0}function $(){X=!1}function re(ht,kt,$t,bn){for(;ht<kt;){const qn=ht+(kt-ht>>1);$t(qn)<=bn?ht=qn+1:kt=qn}return ht}function oe(ht){if(ht.hydrate_init)return;ht.hydrate_init=!0;let kt=ht.childNodes;if(ht.nodeName==="HEAD"){const gr=[];for(let jr=0;jr<kt.length;jr++){const Wr=kt[jr];Wr.claim_order!==void 0&&gr.push(Wr)}kt=gr}const $t=new Int32Array(kt.length+1),bn=new Int32Array(kt.length);$t[0]=-1;let qn=0;for(let gr=0;gr<kt.length;gr++){const jr=kt[gr].claim_order,Wr=(qn>0&&kt[$t[qn]].claim_order<=jr?qn+1:re(1,qn,Nr=>kt[$t[Nr]].claim_order,jr))-1;bn[gr]=$t[Wr]+1;const Kr=Wr+1;$t[Kr]=gr,qn=Math.max(Kr,qn)}const hr=[],xr=[];let wr=kt.length-1;for(let gr=$t[qn]+1;gr!=0;gr=bn[gr-1]){for(hr.push(kt[gr-1]);wr>=gr;wr--)xr.push(kt[wr]);wr--}for(;wr>=0;wr--)xr.push(kt[wr]);hr.reverse(),xr.sort((gr,jr)=>gr.claim_order-jr.claim_order);for(let gr=0,jr=0;gr<xr.length;gr++){for(;jr<hr.length&&xr[gr].claim_order>=hr[jr].claim_order;)jr++;const Wr=jr<hr.length?hr[jr]:null;ht.insertBefore(xr[gr],Wr)}}function ie(ht,kt){ht.appendChild(kt)}function ue(ht,kt,$t){const bn=me(ht);if(!bn.getElementById(kt)){const qn=le("style");qn.id=kt,qn.textContent=$t,ge(bn,qn)}}function me(ht){if(!ht)return document;const kt=ht.getRootNode?ht.getRootNode():ht.ownerDocument;return kt&&kt.host?kt:ht.ownerDocument}function be(ht){const kt=le("style");return ge(me(ht),kt),kt.sheet}function ge(ht,kt){return ie(ht.head||ht,kt),kt.sheet}function de(ht,kt){if(X){for(oe(ht),(ht.actual_end_child===void 0||ht.actual_end_child!==null&&ht.actual_end_child.parentNode!==ht)&&(ht.actual_end_child=ht.firstChild);ht.actual_end_child!==null&&ht.actual_end_child.claim_order===void 0;)ht.actual_end_child=ht.actual_end_child.nextSibling;kt!==ht.actual_end_child?(kt.claim_order!==void 0||kt.parentNode!==ht)&&ht.insertBefore(kt,ht.actual_end_child):ht.actual_end_child=kt.nextSibling}else(kt.parentNode!==ht||kt.nextSibling!==null)&&ht.appendChild(kt)}function ve(ht,kt,$t){ht.insertBefore(kt,$t||null)}function pe(ht,kt,$t){X&&!$t?de(ht,kt):(kt.parentNode!==ht||kt.nextSibling!=$t)&&ht.insertBefore(kt,$t||null)}function _e(ht){ht.parentNode&&ht.parentNode.removeChild(ht)}function Te(ht,kt){for(let $t=0;$t<ht.length;$t+=1)ht[$t]&&ht[$t].d(kt)}function le(ht){return document.createElement(ht)}function ae(ht,kt){return document.createElement(ht,{is:kt})}function he(ht,kt){const $t={};for(const bn in ht)E(ht,bn)&&kt.indexOf(bn)===-1&&($t[bn]=ht[bn]);return $t}function Se(ht){return document.createElementNS("http://www.w3.org/2000/svg",ht)}function ke(ht){return document.createTextNode(ht)}function Me(){return ke(" ")}function Ee(){return ke("")}function De(ht){return document.createComment(ht)}function fe(ht,kt,$t,bn){return ht.addEventListener(kt,$t,bn),()=>ht.removeEventListener(kt,$t,bn)}function xe(ht){return function(kt){return kt.preventDefault(),ht.call(this,kt)}}function we(ht){return function(kt){return kt.stopPropagation(),ht.call(this,kt)}}function Oe(ht){return function(kt){return kt.stopImmediatePropagation(),ht.call(this,kt)}}function ze(ht){return function(kt){kt.target===this&&ht.call(this,kt)}}function Pe(ht){return function(kt){kt.isTrusted&&ht.call(this,kt)}}function Ue(ht,kt,$t){$t==null?ht.removeAttribute(kt):ht.getAttribute(kt)!==$t&&ht.setAttribute(kt,$t)}const Ve=null;function Ze(ht,kt){const $t=Object.getOwnPropertyDescriptors(ht.__proto__);for(const bn in kt)kt[bn]==null?ht.removeAttribute(bn):bn==="style"?ht.style.cssText=kt[bn]:bn==="__value"?ht.value=ht[bn]=kt[bn]:$t[bn]&&$t[bn].set&&Ve.indexOf(bn)===-1?ht[bn]=kt[bn]:Ue(ht,bn,kt[bn])}function it(ht,kt){for(const $t in kt)Ue(ht,$t,kt[$t])}function tt(ht,kt){Object.keys(kt).forEach($t=>{dt(ht,$t,kt[$t])})}function dt(ht,kt,$t){kt in ht?ht[kt]=typeof ht[kt]=="boolean"&&$t===""?!0:$t:Ue(ht,kt,$t)}function yt(ht){return/-/.test(ht)?tt:Ze}function vt(ht,kt,$t){ht.setAttributeNS("http://www.w3.org/1999/xlink",kt,$t)}function et(ht,kt,$t){const bn=new Set;for(let qn=0;qn<ht.length;qn+=1)ht[qn].checked&&bn.add(ht[qn].__value);return $t||bn.delete(kt),Array.from(bn)}function Qe(ht){let kt;return{p(...$t){kt=$t,kt.forEach(bn=>ht.push(bn))},r(){kt.forEach($t=>ht.splice(ht.indexOf($t),1))}}}function wt(ht,kt){let $t=qn(ht),bn;function qn(wr){for(let gr=0;gr<kt.length;gr++)wr=wr[kt[gr]]=wr[kt[gr]]||[];return wr}function hr(){bn.forEach(wr=>$t.push(wr))}function xr(){bn.forEach(wr=>$t.splice($t.indexOf(wr),1))}return{u(wr){kt=wr;const gr=qn(ht);gr!==$t&&(xr(),$t=gr,hr())},p(...wr){bn=wr,hr()},r:xr}}function It(ht){return ht===""?null:+ht}function Dt(ht){const kt=[];for(let $t=0;$t<ht.length;$t+=1)kt.push({start:ht.start($t),end:ht.end($t)});return kt}function Ct(ht){return Array.from(ht.childNodes)}function He(ht){ht.claim_info===void 0&&(ht.claim_info={last_index:0,total_claimed:0})}function We(ht,kt,$t,bn,qn=!1){He(ht);const hr=(()=>{for(let xr=ht.claim_info.last_index;xr<ht.length;xr++){const wr=ht[xr];if(kt(wr)){const gr=$t(wr);return gr===void 0?ht.splice(xr,1):ht[xr]=gr,qn||(ht.claim_info.last_index=xr),wr}}for(let xr=ht.claim_info.last_index-1;xr>=0;xr--){const wr=ht[xr];if(kt(wr)){const gr=$t(wr);return gr===void 0?ht.splice(xr,1):ht[xr]=gr,qn?gr===void 0&&ht.claim_info.last_index--:ht.claim_info.last_index=xr,wr}}return bn()})();return hr.claim_order=ht.claim_info.total_claimed,ht.claim_info.total_claimed+=1,hr}function Be(ht,kt,$t,bn){return We(ht,qn=>qn.nodeName===kt,qn=>{const hr=[];for(let xr=0;xr<qn.attributes.length;xr++){const wr=qn.attributes[xr];$t[wr.name]||hr.push(wr.name)}hr.forEach(xr=>qn.removeAttribute(xr))},()=>bn(kt))}function Ge(ht,kt,$t){return Be(ht,kt,$t,le)}function at(ht,kt,$t){return Be(ht,kt,$t,Se)}function nt(ht,kt){return We(ht,$t=>$t.nodeType===3,$t=>{const bn=""+kt;if($t.data.startsWith(bn)){if($t.data.length!==bn.length)return $t.splitText(bn.length)}else $t.data=bn},()=>ke(kt),!0)}function Re(ht){return nt(ht," ")}function Fe(ht,kt){return We(ht,$t=>$t.nodeType===8,$t=>{$t.data=""+kt},()=>De(kt),!0)}function rt(ht,kt,$t){for(let bn=$t;bn<ht.length;bn+=1){const qn=ht[bn];if(qn.nodeType===8&&qn.textContent.trim()===kt)return bn}return ht.length}function Ye(ht,kt){const $t=rt(ht,"HTML_TAG_START",0),bn=rt(ht,"HTML_TAG_END",$t);if($t===bn)return new cn(void 0,kt);He(ht);const qn=ht.splice($t,bn-$t+1);_e(qn[0]),_e(qn[qn.length-1]);const hr=qn.slice(1,qn.length-1);for(const xr of hr)xr.claim_order=ht.claim_info.total_claimed,ht.claim_info.total_claimed+=1;return new cn(hr,kt)}function ct(ht,kt){kt=""+kt,ht.data!==kt&&(ht.data=kt)}function pt(ht,kt){kt=""+kt,ht.wholeText!==kt&&(ht.data=kt)}function gt(ht,kt,$t){~O.indexOf($t)?pt(ht,kt):ct(ht,kt)}function ut(ht,kt){ht.value=kt==null?"":kt}function Mt(ht,kt){try{ht.type=kt}catch($t){}}function xt(ht,kt,$t,bn){$t==null?ht.style.removeProperty(kt):ht.style.setProperty(kt,$t,bn?"important":"")}function mt(ht,kt,$t){for(let bn=0;bn<ht.options.length;bn+=1){const qn=ht.options[bn];if(qn.__value===kt){qn.selected=!0;return}}(!$t||kt!==void 0)&&(ht.selectedIndex=-1)}function Et(ht,kt){for(let $t=0;$t<ht.options.length;$t+=1){const bn=ht.options[$t];bn.selected=~kt.indexOf(bn.__value)}}function Lt(ht){const kt=ht.querySelector(":checked");return kt&&kt.__value}function zt(ht){return[].map.call(ht.querySelectorAll(":checked"),kt=>kt.__value)}let Wt;function rn(){if(Wt===void 0){Wt=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch(ht){Wt=!0}}return Wt}function Ut(ht,kt){getComputedStyle(ht).position==="static"&&(ht.style.position="relative");const bn=le("iframe");bn.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),bn.setAttribute("aria-hidden","true"),bn.tabIndex=-1;const qn=rn();let hr;return qn?(bn.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",hr=fe(window,"message",xr=>{xr.source===bn.contentWindow&&kt()})):(bn.src="about:blank",bn.onload=()=>{hr=fe(bn.contentWindow,"resize",kt),kt()}),ie(ht,bn),()=>{(qn||hr&&bn.contentWindow)&&hr(),_e(bn)}}const Vt=new K({box:"content-box"}),en=new K({box:"border-box"}),Ln=new K({box:"device-pixel-content-box"});function An(ht,kt,$t){ht.classList[$t?"add":"remove"](kt)}function hn(ht,kt,{bubbles:$t=!1,cancelable:bn=!1}={}){const qn=document.createEvent("CustomEvent");return qn.initCustomEvent(ht,$t,bn,kt),qn}function Xt(ht,kt=document.body){return Array.from(kt.querySelectorAll(ht))}function ln(ht,kt){const $t=[];let bn=0;for(const qn of kt.childNodes)if(qn.nodeType===8){const hr=qn.textContent.trim();hr===`HEAD_${ht}_END`?(bn-=1,$t.push(qn)):hr===`HEAD_${ht}_START`&&(bn+=1,$t.push(qn))}else bn>0&&$t.push(qn);return $t}class nn{constructor(kt=!1){this.is_svg=!1,this.is_svg=kt,this.e=this.n=null}c(kt){this.h(kt)}m(kt,$t,bn=null){this.e||(this.is_svg?this.e=Se($t.nodeName):this.e=le($t.nodeType===11?"TEMPLATE":$t.nodeName),this.t=$t.tagName!=="TEMPLATE"?$t:$t.content,this.c(kt)),this.i(bn)}h(kt){this.e.innerHTML=kt,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(kt){for(let $t=0;$t<this.n.length;$t+=1)ve(this.t,this.n[$t],kt)}p(kt){this.d(),this.h(kt),this.i(this.a)}d(){this.n.forEach(_e)}}class cn extends null{constructor(kt,$t=!1){super($t),this.e=this.n=null,this.l=kt}c(kt){this.l?this.n=this.l:super.c(kt)}i(kt){for(let $t=0;$t<this.n.length;$t+=1)pe(this.t,this.n[$t],kt)}}function Tn(ht){const kt={};for(const $t of ht)kt[$t.name]=$t.value;return kt}function Mn(ht){const kt={};return ht.childNodes.forEach($t=>{kt[$t.slot||"default"]=!0}),kt}function zn(ht,kt){return new ht(kt)}const In=new Map;let Pn=0;function Hn(ht){let kt=5381,$t=ht.length;for(;$t--;)kt=(kt<<5)-kt^ht.charCodeAt($t);return kt>>>0}function Fn(ht,kt){const $t={stylesheet:be(kt),rules:{}};return In.set(ht,$t),$t}function tr(ht,kt,$t,bn,qn,hr,xr,wr=0){const gr=16.666/bn;let jr=`{
`;for(let _i=0;_i<=1;_i+=gr){const Oi=kt+($t-kt)*hr(_i);jr+=_i*100+`%{${xr(Oi,1-Oi)}}
`}const Wr=jr+`100% {${xr($t,1-$t)}}
}`,Kr=`__svelte_${Hn(Wr)}_${wr}`,Nr=me(ht),{stylesheet:Ir,rules:$r}=In.get(Nr)||Fn(Nr,ht);$r[Kr]||($r[Kr]=!0,Ir.insertRule(`@keyframes ${Kr} ${Wr}`,Ir.cssRules.length));const Ti=ht.style.animation||"";return ht.style.animation=`${Ti?`${Ti}, `:""}${Kr} ${bn}ms linear ${qn}ms 1 both`,Pn+=1,Kr}function or(ht,kt){const $t=(ht.style.animation||"").split(", "),bn=$t.filter(kt?hr=>hr.indexOf(kt)<0:hr=>hr.indexOf("__svelte")===-1),qn=$t.length-bn.length;qn&&(ht.style.animation=bn.join(", "),Pn-=qn,Pn||ur())}function ur(){D(()=>{Pn||(In.forEach(ht=>{const{ownerNode:kt}=ht.stylesheet;kt&&_e(kt)}),In.clear())})}function er(ht,kt,$t,bn){if(!kt)return Pr;const qn=ht.getBoundingClientRect();if(kt.left===qn.left&&kt.right===qn.right&&kt.top===qn.top&&kt.bottom===qn.bottom)return Pr;const{delay:hr=0,duration:xr=300,easing:wr=ee,start:gr=j()+hr,end:jr=gr+xr,tick:Wr=Pr,css:Kr}=$t(ht,{from:kt,to:qn},bn);let Nr=!0,Ir=!1,$r;function Ti(){Kr&&($r=tr(ht,0,1,xr,hr,wr,Kr)),hr||(Ir=!0)}function _i(){Kr&&or(ht,$r),Nr=!1}return te(Oi=>{if(!Ir&&Oi>=gr&&(Ir=!0),Ir&&Oi>=jr&&(Wr(1,0),_i()),!Nr)return!1;if(Ir){const ga=Oi-gr,sa=0+1*wr(ga/xr);Wr(sa,1-sa)}return!0}),Ti(),Wr(0,1),_i}function Mr(ht){const kt=getComputedStyle(ht);if(kt.position!=="absolute"&&kt.position!=="fixed"){const{width:$t,height:bn}=kt,qn=ht.getBoundingClientRect();ht.style.position="absolute",ht.style.width=$t,ht.style.height=bn,jt(ht,qn)}}function jt(ht,kt){const $t=ht.getBoundingClientRect();if(kt.left!==$t.left||kt.top!==$t.top){const bn=getComputedStyle(ht),qn=bn.transform==="none"?"":bn.transform;ht.style.transform=`${qn} translate(${kt.left-$t.left}px, ${kt.top-$t.top}px)`}}let tn;function xn(ht){tn=ht}function pn(){if(!tn)throw new Error("Function called outside component initialization");return tn}function Sn(ht){pn().$$.before_update.push(ht)}function Gn(ht){pn().$$.on_mount.push(ht)}function Rn(ht){pn().$$.after_update.push(ht)}function Nn(ht){pn().$$.on_destroy.push(ht)}function ir(){const ht=pn();return(kt,$t,{cancelable:bn=!1}={})=>{const qn=ht.$$.callbacks[kt];if(qn){const hr=hn(kt,$t,{cancelable:bn});return qn.slice().forEach(xr=>{xr.call(ht,hr)}),!hr.defaultPrevented}return!0}}function Gt(ht,kt){return pn().$$.context.set(ht,kt),kt}function dn(ht){return pn().$$.context.get(ht)}function Pt(){return pn().$$.context}function Yt(ht){return pn().$$.context.has(ht)}function Qt(ht,kt){const $t=ht.$$.callbacks[kt.type];$t&&$t.slice().forEach(bn=>bn.call(this,kt))}const mn=[],vn={enabled:!1},_n=[];let sn=[];const Kt=[],Jt=Promise.resolve();let on=!1;function fn(){on||(on=!0,Jt.then(Yn))}function En(){return fn(),Jt}function On(ht){sn.push(ht)}function Vn(ht){Kt.push(ht)}const jn=new Set;let Kn=0;function Yn(){if(Kn!==0)return;const ht=tn;do{try{for(;Kn<mn.length;){const kt=mn[Kn];Kn++,xn(kt),nr(kt.$$)}}catch(kt){throw mn.length=0,Kn=0,kt}for(xn(null),mn.length=0,Kn=0;_n.length;)_n.pop()();for(let kt=0;kt<sn.length;kt+=1){const $t=sn[kt];jn.has($t)||(jn.add($t),$t())}sn.length=0}while(mn.length);for(;Kt.length;)Kt.pop()();on=!1,jn.clear(),xn(ht)}function nr(ht){if(ht.fragment!==null){ht.update(),T(ht.before_update);const kt=ht.dirty;ht.dirty=[-1],ht.fragment&&ht.fragment.p(ht.ctx,kt),ht.after_update.forEach(On)}}function rr(ht){const kt=[],$t=[];sn.forEach(bn=>ht.indexOf(bn)===-1?kt.push(bn):$t.push(bn)),$t.forEach(bn=>bn()),sn=kt}let Jn;function vr(){return Jn||(Jn=Promise.resolve(),Jn.then(()=>{Jn=null})),Jn}function lr(ht,kt,$t){ht.dispatchEvent(hn(`${kt?"intro":"outro"}${$t}`))}const dr=new Set;let $n;function _r(){$n={r:0,c:[],p:$n}}function Lr(){$n.r||T($n.c),$n=$n.p}function Gr(ht,kt){ht&&ht.i&&(dr.delete(ht),ht.i(kt))}function hi(ht,kt,$t,bn){if(ht&&ht.o){if(dr.has(ht))return;dr.add(ht),$n.c.push(()=>{dr.delete(ht),bn&&($t&&ht.d(1),bn())}),ht.o(kt)}else bn&&bn()}const di={duration:0};function Wi(ht,kt,$t){const bn={direction:"in"};let qn=kt(ht,$t,bn),hr=!1,xr,wr,gr=0;function jr(){xr&&or(ht,xr)}function Wr(){const{delay:Nr=0,duration:Ir=300,easing:$r=ee,tick:Ti=Pr,css:_i}=qn||di;_i&&(xr=tr(ht,0,1,Ir,Nr,$r,_i,gr++)),Ti(0,1);const Oi=j()+Nr,ga=Oi+Ir;wr&&wr.abort(),hr=!0,On(()=>lr(ht,!0,"start")),wr=te(sa=>{if(hr){if(sa>=ga)return Ti(1,0),lr(ht,!0,"end"),jr(),hr=!1;if(sa>=Oi){const Yi=$r((sa-Oi)/Ir);Ti(Yi,1-Yi)}}return hr})}let Kr=!1;return{start(){Kr||(Kr=!0,or(ht),b(qn)?(qn=qn(bn),vr().then(Wr)):Wr())},invalidate(){Kr=!1},end(){hr&&(jr(),hr=!1)}}}function gi(ht,kt,$t){const bn={direction:"out"};let qn=kt(ht,$t,bn),hr=!0,xr;const wr=$n;wr.r+=1;function gr(){const{delay:jr=0,duration:Wr=300,easing:Kr=ee,tick:Nr=Pr,css:Ir}=qn||di;Ir&&(xr=tr(ht,1,0,Wr,jr,Kr,Ir));const $r=j()+jr,Ti=$r+Wr;On(()=>lr(ht,!1,"start")),te(_i=>{if(hr){if(_i>=Ti)return Nr(0,1),lr(ht,!1,"end"),--wr.r||T(wr.c),!1;if(_i>=$r){const Oi=Kr((_i-$r)/Wr);Nr(1-Oi,Oi)}}return hr})}return b(qn)?vr().then(()=>{qn=qn(bn),gr()}):gr(),{end(jr){jr&&qn.tick&&qn.tick(1,0),hr&&(xr&&or(ht,xr),hr=!1)}}}function zi(ht,kt,$t,bn){const qn={direction:"both"};let hr=kt(ht,$t,qn),xr=bn?0:1,wr=null,gr=null,jr=null;function Wr(){jr&&or(ht,jr)}function Kr(Ir,$r){const Ti=Ir.b-xr;return $r*=Math.abs(Ti),{a:xr,b:Ir.b,d:Ti,duration:$r,start:Ir.start,end:Ir.start+$r,group:Ir.group}}function Nr(Ir){const{delay:$r=0,duration:Ti=300,easing:_i=ee,tick:Oi=Pr,css:ga}=hr||di,sa={start:j()+$r,b:Ir};Ir||(sa.group=$n,$n.r+=1),wr||gr?gr=sa:(ga&&(Wr(),jr=tr(ht,xr,Ir,Ti,$r,_i,ga)),Ir&&Oi(0,1),wr=Kr(sa,Ti),On(()=>lr(ht,Ir,"start")),te(Yi=>{if(gr&&Yi>gr.start&&(wr=Kr(gr,Ti),gr=null,lr(ht,wr.b,"start"),ga&&(Wr(),jr=tr(ht,xr,wr.b,wr.duration,0,_i,hr.css))),wr){if(Yi>=wr.end)Oi(xr=wr.b,1-xr),lr(ht,wr.b,"end"),gr||(wr.b?Wr():--wr.group.r||T(wr.group.c)),wr=null;else if(Yi>=wr.start){const Wa=Yi-wr.start;xr=wr.a+wr.d*_i(Wa/wr.duration),Oi(xr,1-xr)}}return!!(wr||gr)}))}return{run(Ir){b(hr)?vr().then(()=>{hr=hr(qn),Nr(Ir)}):Nr(Ir)},end(){Wr(),wr=gr=null}}}function _a(ht,kt){const $t=kt.token={};function bn(qn,hr,xr,wr){if(kt.token!==$t)return;kt.resolved=wr;let gr=kt.ctx;xr!==void 0&&(gr=gr.slice(),gr[xr]=wr);const jr=qn&&(kt.current=qn)(gr);let Wr=!1;kt.block&&(kt.blocks?kt.blocks.forEach((Kr,Nr)=>{Nr!==hr&&Kr&&(_r(),hi(Kr,1,1,()=>{kt.blocks[Nr]===Kr&&(kt.blocks[Nr]=null)}),Lr())}):kt.block.d(1),jr.c(),Gr(jr,1),jr.m(kt.mount(),kt.anchor),Wr=!0),kt.block=jr,kt.blocks&&(kt.blocks[hr]=jr),Wr&&Yn()}if(e(ht)){const qn=pn();if(ht.then(hr=>{xn(qn),bn(kt.then,1,kt.value,hr),xn(null)},hr=>{if(xn(qn),bn(kt.catch,2,kt.error,hr),xn(null),!kt.hasCatch)throw hr}),kt.current!==kt.pending)return bn(kt.pending,0),!0}else{if(kt.current!==kt.then)return bn(kt.then,1,kt.value,ht),!0;kt.resolved=ht}}function wa(ht,kt,$t){const bn=kt.slice(),{resolved:qn}=ht;ht.current===ht.then&&(bn[ht.value]=qn),ht.current===ht.catch&&(bn[ht.error]=qn),ht.block.p(bn,$t)}function zo(ht,kt){ht.d(1),kt.delete(ht.key)}function nl(ht,kt){hi(ht,1,1,()=>{kt.delete(ht.key)})}function xs(ht,kt){ht.f(),zo(ht,kt)}function bs(ht,kt){ht.f(),nl(ht,kt)}function Is(ht,kt,$t,bn,qn,hr,xr,wr,gr,jr,Wr,Kr){let Nr=ht.length,Ir=hr.length,$r=Nr;const Ti={};for(;$r--;)Ti[ht[$r].key]=$r;const _i=[],Oi=new Map,ga=new Map,sa=[];for($r=Ir;$r--;){const li=Kr(qn,hr,$r),Ta=$t(li);let Xi=xr.get(Ta);Xi?bn&&sa.push(()=>Xi.p(li,kt)):(Xi=jr(Ta,li),Xi.c()),Oi.set(Ta,_i[$r]=Xi),Ta in Ti&&ga.set(Ta,Math.abs($r-Ti[Ta]))}const Yi=new Set,Wa=new Set;function eo(li){Gr(li,1),li.m(wr,Wr),xr.set(li.key,li),Wr=li.first,Ir--}for(;Nr&&Ir;){const li=_i[Ir-1],Ta=ht[Nr-1],Xi=li.key,Ri=Ta.key;li===Ta?(Wr=li.first,Nr--,Ir--):Oi.has(Ri)?!xr.has(Xi)||Yi.has(Xi)?eo(li):Wa.has(Ri)?Nr--:ga.get(Xi)>ga.get(Ri)?(Wa.add(Xi),eo(li)):(Yi.add(Ri),Nr--):(gr(Ta,xr),Nr--)}for(;Nr--;){const li=ht[Nr];Oi.has(li.key)||gr(li,xr)}for(;Ir;)eo(_i[Ir-1]);return T(sa),_i}function Ja(ht,kt,$t,bn){const qn=new Set;for(let hr=0;hr<kt.length;hr++){const xr=bn($t(ht,kt,hr));if(qn.has(xr))throw new Error("Cannot have duplicate keys in a keyed each");qn.add(xr)}}function Ds(ht,kt){const $t={},bn={},qn={$$scope:1};let hr=ht.length;for(;hr--;){const xr=ht[hr],wr=kt[hr];if(wr){for(const gr in xr)gr in wr||(bn[gr]=1);for(const gr in wr)qn[gr]||($t[gr]=wr[gr],qn[gr]=1);ht[hr]=wr}else for(const gr in xr)qn[gr]=1}for(const xr in bn)xr in $t||($t[xr]=void 0);return $t}function zs(ht){return typeof ht=="object"&&ht!==null?ht:{}}const _s=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],so=new Set([..._s]),_o=/^(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/;function Ro(ht){return _o.test(ht)||ht.toLowerCase()==="!doctype"}const bi=/[\s'">/=\u{FDD0}-\u{FDEF}\u{FFFE}\u{FFFF}\u{1FFFE}\u{1FFFF}\u{2FFFE}\u{2FFFF}\u{3FFFE}\u{3FFFF}\u{4FFFE}\u{4FFFF}\u{5FFFE}\u{5FFFF}\u{6FFFE}\u{6FFFF}\u{7FFFE}\u{7FFFF}\u{8FFFE}\u{8FFFF}\u{9FFFE}\u{9FFFF}\u{AFFFE}\u{AFFFF}\u{BFFFE}\u{BFFFF}\u{CFFFE}\u{CFFFF}\u{DFFFE}\u{DFFFF}\u{EFFFE}\u{EFFFF}\u{FFFFE}\u{FFFFF}\u{10FFFE}\u{10FFFF}]/u;function $i(ht,kt){const $t=Object.assign({},...ht);if(kt){const qn=kt.classes,hr=kt.styles;qn&&($t.class==null?$t.class=qn:$t.class+=" "+qn),hr&&($t.style==null?$t.style=fo(hr):$t.style=fo(lo($t.style,hr)))}let bn="";return Object.keys($t).forEach(qn=>{if(bi.test(qn))return;const hr=$t[qn];hr===!0?bn+=" "+qn:so.has(qn.toLowerCase())?hr&&(bn+=" "+qn):hr!=null&&(bn+=` ${qn}="${hr}"`)}),bn}function lo(ht,kt){const $t={};for(const bn of ht.split(";")){const qn=bn.indexOf(":"),hr=bn.slice(0,qn).trim(),xr=bn.slice(qn+1).trim();!hr||($t[hr]=xr)}for(const bn in kt){const qn=kt[bn];qn?$t[bn]=qn:delete $t[bn]}return $t}const Qa=/[&"]/g,Va=/[&<]/g;function uo(ht,kt=!1){const $t=String(ht),bn=kt?Qa:Va;bn.lastIndex=0;let qn="",hr=0;for(;bn.test($t);){const xr=bn.lastIndex-1,wr=$t[xr];qn+=$t.substring(hr,xr)+(wr==="&"?"&amp;":wr==='"'?"&quot;":"&lt;"),hr=xr+1}return qn+$t.substring(hr)}function qa(ht){return typeof ht=="string"||ht&&typeof ht=="object"?uo(ht,!0):ht}function Fo(ht){const kt={};for(const $t in ht)kt[$t]=qa(ht[$t]);return kt}function wo(ht,kt){let $t="";for(let bn=0;bn<ht.length;bn+=1)$t+=kt(ht[bn],bn);return $t}const Bo={$$render:()=>""};function co(ht,kt){if(!ht||!ht.$$render)throw kt==="svelte:component"&&(kt+=" this={...}"),new Error(`<${kt}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${kt}>.`);return ht}function Ks(ht,kt,$t,bn){return console.log(`{@debug} ${ht?ht+" ":""}(${kt}:${$t})`),console.log(bn),""}let Jo;function Qo(ht){function kt($t,bn,qn,hr,xr){const wr=tn,gr={on_destroy:Jo,context:new Map(xr||(wr?wr.$$.context:[])),on_mount:[],before_update:[],after_update:[],callbacks:o()};xn({$$:gr});const jr=ht($t,bn,qn,hr);return xn(wr),jr}return{render:($t={},{$$slots:bn={},context:qn=new Map}={})=>{Jo=[];const hr={title:"",head:"",css:new Set},xr=kt(hr,$t,{},bn,qn);return T(Jo),{html:xr,css:{code:Array.from(hr.css).map(wr=>wr.code).join(`
`),map:null},head:hr.title+hr.head}},$$render:kt}}function rl(ht,kt,$t){if(kt==null||$t&&!kt)return"";const bn=$t&&kt===!0?"":`="${uo(kt,!0)}"`;return` ${ht}${bn}`}function il(ht){return ht?` class="${ht}"`:""}function fo(ht){return Object.keys(ht).filter(kt=>ht[kt]).map(kt=>`${kt}: ${qa(ht[kt])};`).join(" ")}function al(ht){const kt=fo(ht);return kt?` style="${kt}"`:""}function ol(ht,kt,$t){const bn=ht.$$.props[kt];bn!==void 0&&(ht.$$.bound[bn]=$t,$t(ht.$$.ctx[bn]))}function sl(ht){ht&&ht.c()}function $o(ht,kt){ht&&ht.l(kt)}function Ha(ht,kt,$t,bn){const{fragment:qn,after_update:hr}=ht.$$;qn&&qn.m(kt,$t),bn||On(()=>{const xr=ht.$$.on_mount.map(k).filter(b);ht.$$.on_destroy?ht.$$.on_destroy.push(...xr):T(xr),ht.$$.on_mount=[]}),hr.forEach(On)}function To(ht,kt){const $t=ht.$$;$t.fragment!==null&&(rr($t.after_update),T($t.on_destroy),$t.fragment&&$t.fragment.d(kt),$t.on_destroy=$t.fragment=null,$t.ctx=[])}function No(ht,kt){ht.$$.dirty[0]===-1&&(mn.push(ht),fn(),ht.$$.dirty.fill(0)),ht.$$.dirty[kt/31|0]|=1<<kt%31}function cs(ht,kt,$t,bn,qn,hr,xr,wr=[-1]){const gr=tn;xn(ht);const jr=ht.$$={fragment:null,ctx:[],props:hr,update:Pr,not_equal:qn,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(kt.context||(gr?gr.$$.context:[])),callbacks:o(),dirty:wr,skip_bound:!1,root:kt.target||gr.$$.root};xr&&xr(jr.root);let Wr=!1;if(jr.ctx=$t?$t(ht,kt.props||{},(Kr,Nr,...Ir)=>{const $r=Ir.length?Ir[0]:Nr;return jr.ctx&&qn(jr.ctx[Kr],jr.ctx[Kr]=$r)&&(!jr.skip_bound&&jr.bound[Kr]&&jr.bound[Kr]($r),Wr&&No(ht,Kr)),Nr}):[],jr.update(),Wr=!0,T(jr.before_update),jr.fragment=bn?bn(jr.ctx):!1,kt.target){if(kt.hydrate){Z();const Kr=Ct(kt.target);jr.fragment&&jr.fragment.l(Kr),Kr.forEach(_e)}else jr.fragment&&jr.fragment.c();kt.intro&&Gr(ht.$$.fragment),Ha(ht,kt.target,kt.anchor,kt.customElement),$(),Yn()}xn(gr)}let jo;typeof HTMLElement=="function"&&(jo=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:ht}=this.$$;this.$$.on_disconnect=ht.map(k).filter(b);for(const kt in this.$$.slotted)this.appendChild(this.$$.slotted[kt])}attributeChangedCallback(ht,kt,$t){this[ht]=$t}disconnectedCallback(){T(this.$$.on_disconnect)}$destroy(){To(this,1),this.$destroy=Pr}$on(ht,kt){if(!b(kt))return Pr;const $t=this.$$.callbacks[ht]||(this.$$.callbacks[ht]=[]);return $t.push(kt),()=>{const bn=$t.indexOf(kt);bn!==-1&&$t.splice(bn,1)}}$set(ht){this.$$set&&!n(ht)&&(this.$$.skip_bound=!0,this.$$set(ht),this.$$.skip_bound=!1)}});class Ga{$destroy(){To(this,1),this.$destroy=Pr}$on(kt,$t){if(!b($t))return Pr;const bn=this.$$.callbacks[kt]||(this.$$.callbacks[kt]=[]);return bn.push($t),()=>{const qn=bn.indexOf($t);qn!==-1&&bn.splice(qn,1)}}$set(kt){this.$$set&&!n(kt)&&(this.$$.skip_bound=!0,this.$$set(kt),this.$$.skip_bound=!1)}}function da(ht,kt){document.dispatchEvent(hn(ht,Object.assign({version:"3.59.2"},kt),{bubbles:!0}))}function Uo(ht,kt){da("SvelteDOMInsert",{target:ht,node:kt}),ie(ht,kt)}function ko(ht,kt){da("SvelteDOMInsert",{target:ht,node:kt}),de(ht,kt)}function Ao(ht,kt,$t){da("SvelteDOMInsert",{target:ht,node:kt,anchor:$t}),ve(ht,kt,$t)}function Vo(ht,kt,$t){da("SvelteDOMInsert",{target:ht,node:kt,anchor:$t}),pe(ht,kt,$t)}function ei(ht){da("SvelteDOMRemove",{node:ht}),_e(ht)}function fs(ht,kt){for(;ht.nextSibling&&ht.nextSibling!==kt;)ei(ht.nextSibling)}function xl(ht){for(;ht.previousSibling;)ei(ht.previousSibling)}function Rs(ht){for(;ht.nextSibling;)ei(ht.nextSibling)}function hs(ht,kt,$t,bn,qn,hr,xr){const wr=bn===!0?["capture"]:bn?Array.from(Object.keys(bn)):[];qn&&wr.push("preventDefault"),hr&&wr.push("stopPropagation"),xr&&wr.push("stopImmediatePropagation"),da("SvelteDOMAddEventListener",{node:ht,event:kt,handler:$t,modifiers:wr});const gr=fe(ht,kt,$t,bn);return()=>{da("SvelteDOMRemoveEventListener",{node:ht,event:kt,handler:$t,modifiers:wr}),gr()}}function ll(ht,kt,$t){Ue(ht,kt,$t),$t==null?da("SvelteDOMRemoveAttribute",{node:ht,attribute:kt}):da("SvelteDOMSetAttribute",{node:ht,attribute:kt,value:$t})}function bl(ht,kt,$t){ht[kt]=$t,da("SvelteDOMSetProperty",{node:ht,property:kt,value:$t})}function Fs(ht,kt,$t){ht.dataset[kt]=$t,da("SvelteDOMSetDataset",{node:ht,property:kt,value:$t})}function ul(ht,kt){kt=""+kt,ht.data!==kt&&(da("SvelteDOMSetData",{node:ht,data:kt}),ht.data=kt)}function Mo(ht,kt){kt=""+kt,ht.wholeText!==kt&&(da("SvelteDOMSetData",{node:ht,data:kt}),ht.data=kt)}function es(ht,kt,$t){~O.indexOf($t)?Mo(ht,kt):ul(ht,kt)}function So(ht){if(typeof ht!="string"&&!(ht&&typeof ht=="object"&&"length"in ht)){let kt="{#each} only iterates over array-like objects.";throw typeof Symbol=="function"&&ht&&Symbol.iterator in ht&&(kt+=" You can use a spread to convert this iterable into an array."),new Error(kt)}}function $a(ht,kt,$t){for(const bn of Object.keys(kt))~$t.indexOf(bn)||console.warn(`<${ht}> received an unexpected slot "${bn}".`)}function ps(ht){if(ht&&!(typeof ht=="string"))throw new Error('<svelte:element> expects "this" attribute to be a string.')}function cl(ht){ht&&Ro(ht)&&console.warn(`<svelte:element this="${ht}"> is self-closing and cannot have content.`)}function ws(ht,kt){const $t="this={...} of <svelte:component> should specify a Svelte component.";try{const bn=new ht(kt);if(!bn.$$||!bn.$set||!bn.$on||!bn.$destroy)throw new Error($t);return bn}catch(bn){const{message:qn}=bn;throw typeof qn=="string"&&qn.indexOf("is not a constructor")!==-1?new Error($t):bn}}class Bs extends null{constructor(kt){if(!kt||!kt.target&&!kt.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}class Ra extends null{constructor(kt){super(kt)}}function Ns(ht){const kt=Date.now();return()=>{if(Date.now()-kt>ht)throw new Error("Infinite loop detected")}}}},lf={};function Os(Cr){var pa=lf[Cr];if(pa!==void 0)return pa.exports;var na=lf[Cr]={exports:{}};return Vh[Cr](na,na.exports,Os),na.exports}Os.n=Cr=>{var pa=Cr&&Cr.__esModule?()=>Cr.default:()=>Cr;return Os.d(pa,{a:pa}),pa},Os.d=(Cr,pa)=>{for(var na in pa)Os.o(pa,na)&&!Os.o(Cr,na)&&Object.defineProperty(Cr,na,{enumerable:!0,get:pa[na]})},Os.o=(Cr,pa)=>Object.prototype.hasOwnProperty.call(Cr,pa);var uf={};(()=>{"use strict";Os.d(uf,{default:()=>T});var Cr=Os(234),pa=Os(390),na=Os(539);function Pr(b){(0,Cr.qOq)(b,"svelte-1mr5iu2",".flex-container.svelte-1mr5iu2{display:flex;flex-direction:column;justify-content:space-around}.flex-item.svelte-1mr5iu2{flex:1;padding:10px}.dark.svelte-1mr5iu2{background-color:black;color:white}.light.svelte-1mr5iu2{background-color:white;color:black}")}function ee(b,h,s){const t=b.slice();return t[16]=h[s],t}function z(b){let h,s,t=b[6][b[14]],i=[];for(let r=0;r<t.length;r+=1)i[r]=e(ee(b,t,r));const n=r=>(0,Cr.etI)(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();h=(0,Cr.cSb)()},m(r,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(r,a);(0,Cr.$Tr)(r,h,a),s=!0},p(r,a){if(a&16455){t=r[6][r[14]];let l;for(l=0;l<t.length;l+=1){const u=ee(r,t,l);i[l]?(i[l].p(u,a),(0,Cr.Ui)(i[l],1)):(i[l]=e(u),i[l].c(),(0,Cr.Ui)(i[l],1),i[l].m(h.parentNode,h))}for((0,Cr.dvw)(),l=t.length;l<i.length;l+=1)n(l);(0,Cr.gbL)()}},i(r){if(!s){for(let a=0;a<t.length;a+=1)(0,Cr.Ui)(i[a]);s=!0}},o(r){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)(0,Cr.etI)(i[a]);s=!1},d(r){(0,Cr.RMB)(i,r),r&&(0,Cr.ogt)(h)}}}function e(b){let h,s,t,i;return s=new na.default({props:{tokens:b[2][b[16]],weights:b[0][b[16]],highlight_index:b[1][b[16]]}}),{c(){h=(0,Cr.bGB)("div"),(0,Cr.YCL)(s.$$.fragment),t=(0,Cr.DhX)(),(0,Cr.Ljt)(h,"class","flex-item svelte-1mr5iu2")},m(n,r){(0,Cr.$Tr)(n,h,r),(0,Cr.yef)(s,h,null),(0,Cr.R3I)(h,t),i=!0},p(n,r){const a={};r&16452&&(a.tokens=n[2][n[16]]),r&16449&&(a.weights=n[0][n[16]]),r&16450&&(a.highlight_index=n[1][n[16]]),s.$set(a)},i(n){i||((0,Cr.Ui)(s.$$.fragment,n),i=!0)},o(n){(0,Cr.etI)(s.$$.fragment,n),i=!1},d(n){n&&(0,Cr.ogt)(h),(0,Cr.vpE)(s)}}}function M(b){var v;let h,s,t,i,n,r,a,l,u,d,c;function x(m){b[15](m)}let g={x:b[8],y:b[9],xLabel:b[3],yLabel:b[4],title:b[5],arrowCoords:b[11],shapes:b[12],pointColors:b[10],colorscale:(v=b[13])!=null?v:void 0};b[14]!==void 0&&(g.focusIndex=b[14]),s=new pa.default({props:g}),Cr.VnY.push(()=>(0,Cr.akz)(s,"focusIndex",x)),a=new na.default({props:{tokens:b[2][b[14]],weights:b[0][b[14]],highlight_index:b[1][b[14]]}});let p=b[6].length>0&&z(b);return{c(){h=(0,Cr.bGB)("main"),(0,Cr.YCL)(s.$$.fragment),i=(0,Cr.DhX)(),n=(0,Cr.bGB)("div"),r=(0,Cr.bGB)("div"),(0,Cr.YCL)(a.$$.fragment),l=(0,Cr.DhX)(),p&&p.c(),(0,Cr.Ljt)(r,"class","flex-item svelte-1mr5iu2"),(0,Cr.Ljt)(n,"class",u=(0,Cr.H1I)("flex-container")+" svelte-1mr5iu2"),(0,Cr.Ljt)(h,"class",d=(0,Cr.H1I)(b[7])+" svelte-1mr5iu2")},m(m,y){(0,Cr.$Tr)(m,h,y),(0,Cr.yef)(s,h,null),(0,Cr.R3I)(h,i),(0,Cr.R3I)(h,n),(0,Cr.R3I)(n,r),(0,Cr.yef)(a,r,null),(0,Cr.R3I)(n,l),p&&p.m(n,null),c=!0},p(m,[y]){var S;const _={};y&256&&(_.x=m[8]),y&512&&(_.y=m[9]),y&8&&(_.xLabel=m[3]),y&16&&(_.yLabel=m[4]),y&32&&(_.title=m[5]),y&2048&&(_.arrowCoords=m[11]),y&4096&&(_.shapes=m[12]),y&1024&&(_.pointColors=m[10]),y&8192&&(_.colorscale=(S=m[13])!=null?S:void 0),!t&&y&16384&&(t=!0,_.focusIndex=m[14],(0,Cr.hjT)(()=>t=!1)),s.$set(_);const f={};y&16388&&(f.tokens=m[2][m[14]]),y&16385&&(f.weights=m[0][m[14]]),y&16386&&(f.highlight_index=m[1][m[14]]),a.$set(f),m[6].length>0?p?(p.p(m,y),y&64&&(0,Cr.Ui)(p,1)):(p=z(m),p.c(),(0,Cr.Ui)(p,1),p.m(n,null)):p&&((0,Cr.dvw)(),(0,Cr.etI)(p,1,1,()=>{p=null}),(0,Cr.gbL)()),(!c||y&128&&d!==(d=(0,Cr.H1I)(m[7])+" svelte-1mr5iu2"))&&(0,Cr.Ljt)(h,"class",d)},i(m){c||((0,Cr.Ui)(s.$$.fragment,m),(0,Cr.Ui)(a.$$.fragment,m),(0,Cr.Ui)(p),c=!0)},o(m){(0,Cr.etI)(s.$$.fragment,m),(0,Cr.etI)(a.$$.fragment,m),(0,Cr.etI)(p),c=!1},d(m){m&&(0,Cr.ogt)(h),(0,Cr.vpE)(s),(0,Cr.vpE)(a),p&&p.d()}}}function k(b,h,s){let{acts:t}=h,{tok_indices:i}=h,{toks:n}=h,{title_a:r=""}=h,{title_b:a=""}=h,{title:l=""}=h,{nearest_neighbors:u=[]}=h,{theme:d="light"}=h,{x:c}=h,{y:x}=h,{pointColors:g=[]}=h,p=0,{arrowCoords:v=[]}=h,{shapes:m=[]}=h,{colorscale:y}=h;function _(f){p=f,s(14,p)}return b.$$set=f=>{"acts"in f&&s(0,t=f.acts),"tok_indices"in f&&s(1,i=f.tok_indices),"toks"in f&&s(2,n=f.toks),"title_a"in f&&s(3,r=f.title_a),"title_b"in f&&s(4,a=f.title_b),"title"in f&&s(5,l=f.title),"nearest_neighbors"in f&&s(6,u=f.nearest_neighbors),"theme"in f&&s(7,d=f.theme),"x"in f&&s(8,c=f.x),"y"in f&&s(9,x=f.y),"pointColors"in f&&s(10,g=f.pointColors),"arrowCoords"in f&&s(11,v=f.arrowCoords),"shapes"in f&&s(12,m=f.shapes),"colorscale"in f&&s(13,y=f.colorscale)},[t,i,n,r,a,l,u,d,c,x,g,v,m,y,p,_]}class o extends Cr.f_C{constructor(h){super(),(0,Cr.S1n)(this,h,k,M,Cr.N8,{acts:0,tok_indices:1,toks:2,title_a:3,title_b:4,title:5,nearest_neighbors:6,theme:7,x:8,y:9,pointColors:10,arrowCoords:11,shapes:12,colorscale:13},Pr)}}const T=o})(),SeeActsWithCoords=uf.default})();
